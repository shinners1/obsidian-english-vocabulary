/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  AddBookModal: () => AddBookModal,
  EnglishVocabularyPlugin: () => EnglishVocabularyPlugin,
  default: () => EnglishVocabularyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian12 = require("obsidian");

// src/features/settings/ui/settings.ts
var import_obsidian2 = require("obsidian");

// src/utils.ts
function isPlainTextApiKey(apiKey) {
  if (!apiKey)
    return false;
  const apiKeyPatterns = [
    /^sk-[a-zA-Z0-9]{32,}$/,
    // OpenAI API 키
    /^sk-ant-[a-zA-Z0-9-_]{95}$/,
    // Anthropic API 키
    /^AIza[a-zA-Z0-9-_]{35}$/,
    // Google API 키
    /^[a-zA-Z0-9-_]{20,}$/
    // 일반적인 긴 토큰
  ];
  return apiKeyPatterns.some((pattern) => pattern.test(apiKey));
}
function encryptApiKey(apiKey) {
  if (!apiKey)
    return "";
  if (!isPlainTextApiKey(apiKey)) {
    return apiKey;
  }
  try {
    const key = "obsidian-vocab-temp-key-2024";
    let encrypted = "";
    for (let i = 0; i < apiKey.length; i++) {
      const charCode = apiKey.charCodeAt(i) ^ key.charCodeAt(i % key.length);
      encrypted += String.fromCharCode(charCode);
    }
    return btoa(encrypted);
  } catch (error) {
    console.error("\uB3D9\uAE30 \uC554\uD638\uD654 \uC2E4\uD328:", error);
    return "";
  }
}
function decryptApiKey(encryptedApiKey) {
  if (!encryptedApiKey)
    return "";
  if (isPlainTextApiKey(encryptedApiKey)) {
    return encryptedApiKey;
  }
  try {
    const key = "obsidian-vocab-temp-key-2024";
    const decoded = atob(encryptedApiKey);
    let decrypted = "";
    for (let i = 0; i < decoded.length; i++) {
      const charCode = decoded.charCodeAt(i) ^ key.charCodeAt(i % key.length);
      decrypted += String.fromCharCode(charCode);
    }
    return decrypted;
  } catch (error) {
    console.warn("\uBCF5\uD638\uD654 \uC2E4\uD328, \uD3C9\uBB38\uC73C\uB85C \uAC04\uC8FC:", error.message);
    return encryptedApiKey;
  }
}
function maskApiKey(apiKey) {
  if (!apiKey || typeof apiKey !== "string")
    return "";
  if (apiKey.length <= 8)
    return "*".repeat(apiKey.length);
  return apiKey.substring(0, 4) + "*".repeat(apiKey.length - 8) + apiKey.substring(apiKey.length - 4);
}
function formatDate(dateString) {
  if (!dateString) {
    return "\uC5C6\uC74C";
  }
  const date = new Date(dateString);
  if (isNaN(date.getTime())) {
    return "\uC798\uBABB\uB41C \uB0A0\uC9DC";
  }
  return date.toLocaleDateString("ko-KR", {
    year: "numeric",
    month: "long",
    day: "numeric"
  });
}

// src/shared/Config.ts
var DEFAULT_CONFIG = {
  api: {
    timeouts: {
      default: 3e4,
      // 30초
      llm: 6e4,
      // 60초
      tts: 15e3
      // 15초
    },
    retries: {
      maxAttempts: 3,
      delayMs: 1e3,
      exponentialBackoff: true
    },
    rateLimiting: {
      requestsPerMinute: 60,
      burstLimit: 10
    }
  },
  batch: {
    defaultSize: 5,
    maxSize: 20,
    delayBetweenBatches: 200,
    maxConcurrentBatches: 3
  },
  audio: {
    maxPoolSize: 10,
    autoCleanupTimeoutMs: 3e4,
    // 30초
    maxDurationMs: 3e5
    // 5분
  },
  database: {
    autoSaveInterval: 5e3,
    // 5초
    backupEnabled: true,
    maxFileSize: 10485760,
    // 10MB
    compressionEnabled: false
  },
  learning: {
    spaced_repetition: {
      initialInterval: 1,
      // 1일
      easyBonus: 1.3,
      hardPenalty: 0.8,
      maxInterval: 365,
      // 1년
      minInterval: 1
      // 1일
    },
    load_balancing: {
      maxDailyReviews: 100,
      fuzzingPercentage: 5,
      distributionWindow: 7
      // 7일
    }
  },
  ui: {
    animationDuration: 300,
    // 300ms
    progressUpdateInterval: 100,
    // 100ms
    notificationTimeout: 5e3,
    // 5초
    modalCloseDelay: 500
    // 500ms
  },
  security: {
    apiKeyEncryption: {
      iterations: 1e4,
      keyLength: 32,
      saltLength: 16
    },
    sessionTimeout: 36e5,
    // 1시간
    maxLoginAttempts: 5
  }
};
var DEVELOPMENT_CONFIG = {
  api: {
    timeouts: {
      default: 1e4,
      llm: 2e4,
      tts: 5e3
    },
    retries: {
      maxAttempts: 1,
      delayMs: 500,
      exponentialBackoff: false
    }
  },
  batch: {
    defaultSize: 2,
    maxSize: 5,
    delayBetweenBatches: 100
  },
  database: {
    autoSaveInterval: 1e3,
    backupEnabled: false
  }
};
var PRODUCTION_CONFIG = {
  api: {
    retries: {
      maxAttempts: 5,
      delayMs: 2e3,
      exponentialBackoff: true
    }
  },
  batch: {
    defaultSize: 10,
    maxSize: 50,
    delayBetweenBatches: 500
  },
  database: {
    autoSaveInterval: 1e4,
    backupEnabled: true,
    compressionEnabled: true
  }
};
var ConfigManager = class _ConfigManager {
  constructor() {
    this.config = this.mergeConfigs(DEFAULT_CONFIG, this.getEnvironmentConfig());
  }
  static getInstance() {
    if (!_ConfigManager.instance) {
      _ConfigManager.instance = new _ConfigManager();
    }
    return _ConfigManager.instance;
  }
  getConfig() {
    return { ...this.config };
  }
  getValue(path) {
    return this.getNestedValue(this.config, path);
  }
  updateConfig(updates) {
    this.config = this.mergeConfigs(this.config, updates);
  }
  getEnvironmentConfig() {
    const isDevelopment = true;
    return isDevelopment ? DEVELOPMENT_CONFIG : PRODUCTION_CONFIG;
  }
  mergeConfigs(base, override) {
    return this.deepMerge(base, override);
  }
  deepMerge(target, source) {
    const result = { ...target };
    for (const key in source) {
      if (source.hasOwnProperty(key)) {
        const sourceValue = source[key];
        const targetValue = result[key];
        if (this.isObject(sourceValue) && this.isObject(targetValue)) {
          result[key] = this.deepMerge(targetValue, sourceValue);
        } else if (sourceValue !== void 0) {
          result[key] = sourceValue;
        }
      }
    }
    return result;
  }
  isObject(item) {
    return item && typeof item === "object" && !Array.isArray(item);
  }
  getNestedValue(obj, path) {
    return path.split(".").reduce((current, key) => current == null ? void 0 : current[key], obj);
  }
};
function getConfigValue(path) {
  return ConfigManager.getInstance().getValue(path);
}
var CONFIG_PATHS = {
  API_TIMEOUT_DEFAULT: "api.timeouts.default",
  API_TIMEOUT_LLM: "api.timeouts.llm",
  API_TIMEOUT_TTS: "api.timeouts.tts",
  API_RETRY_MAX_ATTEMPTS: "api.retries.maxAttempts",
  API_RETRY_DELAY: "api.retries.delayMs",
  BATCH_DEFAULT_SIZE: "batch.defaultSize",
  BATCH_MAX_SIZE: "batch.maxSize",
  BATCH_DELAY: "batch.delayBetweenBatches",
  AUDIO_MAX_POOL_SIZE: "audio.maxPoolSize",
  AUDIO_CLEANUP_TIMEOUT: "audio.autoCleanupTimeoutMs",
  LEARNING_INITIAL_INTERVAL: "learning.spaced_repetition.initialInterval",
  LEARNING_EASY_BONUS: "learning.spaced_repetition.easyBonus",
  LEARNING_HARD_PENALTY: "learning.spaced_repetition.hardPenalty",
  UI_ANIMATION_DURATION: "ui.animationDuration",
  UI_NOTIFICATION_TIMEOUT: "ui.notificationTimeout"
};

// src/shared/RetryPolicy.ts
var RetryPolicy = class {
  constructor(options = {}) {
    var _a, _b, _c, _d, _e, _f;
    this.options = {
      maxAttempts: (_a = options.maxAttempts) != null ? _a : getConfigValue(CONFIG_PATHS.API_RETRY_MAX_ATTEMPTS),
      delayMs: (_b = options.delayMs) != null ? _b : getConfigValue(CONFIG_PATHS.API_RETRY_DELAY),
      exponentialBackoff: (_c = options.exponentialBackoff) != null ? _c : true,
      maxDelayMs: (_d = options.maxDelayMs) != null ? _d : 3e4,
      // 30초
      backoffMultiplier: (_e = options.backoffMultiplier) != null ? _e : 2,
      retryCondition: (_f = options.retryCondition) != null ? _f : this.defaultRetryCondition
    };
  }
  // 기본 재시도 조건
  defaultRetryCondition(error) {
    const retryableErrors = [
      "NetworkError",
      "TimeoutError",
      "fetch",
      "502",
      "503",
      "504",
      // 서버 에러
      "ECONNRESET",
      "ETIMEDOUT",
      "ENOTFOUND"
    ];
    const errorMessage = error.message.toLowerCase();
    const errorName = error.name.toLowerCase();
    return retryableErrors.some(
      (pattern) => errorMessage.includes(pattern.toLowerCase()) || errorName.includes(pattern.toLowerCase())
    );
  }
  // 지수 백오프 계산
  calculateDelay(attempt) {
    if (!this.options.exponentialBackoff) {
      return this.options.delayMs;
    }
    const delay2 = this.options.delayMs * Math.pow(this.options.backoffMultiplier, attempt - 1);
    const jitter = delay2 * 0.2 * (Math.random() - 0.5);
    const finalDelay = Math.floor(delay2 + jitter);
    return Math.min(finalDelay, this.options.maxDelayMs);
  }
  // 비동기 함수 재시도
  async execute(fn) {
    const startTime = Date.now();
    let lastError;
    for (let attempt = 1; attempt <= this.options.maxAttempts; attempt++) {
      try {
        const result = await fn();
        return {
          success: true,
          result,
          attempts: attempt,
          totalDuration: Date.now() - startTime
        };
      } catch (error) {
        lastError = error instanceof Error ? error : new Error(String(error));
        if (attempt === this.options.maxAttempts || !this.options.retryCondition(lastError)) {
          break;
        }
        const delay2 = this.calculateDelay(attempt);
        await this.delay(delay2);
      }
    }
    return {
      success: false,
      error: lastError,
      attempts: this.options.maxAttempts,
      totalDuration: Date.now() - startTime
    };
  }
  // 동기 함수 재시도
  executeSync(fn) {
    const startTime = Date.now();
    let lastError;
    for (let attempt = 1; attempt <= this.options.maxAttempts; attempt++) {
      try {
        const result = fn();
        return {
          success: true,
          result,
          attempts: attempt,
          totalDuration: Date.now() - startTime
        };
      } catch (error) {
        lastError = error instanceof Error ? error : new Error(String(error));
        if (attempt === this.options.maxAttempts || !this.options.retryCondition(lastError)) {
          break;
        }
      }
    }
    return {
      success: false,
      error: lastError,
      attempts: this.options.maxAttempts,
      totalDuration: Date.now() - startTime
    };
  }
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  // 설정 업데이트
  updateOptions(options) {
    this.options = { ...this.options, ...options };
  }
  // 현재 설정 반환
  getOptions() {
    return { ...this.options };
  }
};
var APIRetryPolicy = class extends RetryPolicy {
  constructor(options = {}) {
    super({
      maxAttempts: 3,
      delayMs: 2e3,
      exponentialBackoff: true,
      maxDelayMs: 15e3,
      retryCondition: (error) => {
        const retryableErrors = [
          "429",
          // Rate limit
          "502",
          "503",
          "504",
          // Server errors
          "timeout",
          "network"
        ];
        const errorText = error.message.toLowerCase();
        return retryableErrors.some((pattern) => errorText.includes(pattern));
      },
      ...options
    });
  }
};
async function retryAPICall(fn, options) {
  const policy = new APIRetryPolicy(options);
  const result = await policy.execute(fn);
  if (result.success) {
    return result.result;
  } else {
    throw result.error;
  }
}

// src/infrastructure/llm/LLMService.ts
var import_obsidian = require("obsidian");
var LLMService = class {
  constructor(settings) {
    this.settings = settings;
    this.retryPolicy = new APIRetryPolicy({
      maxAttempts: 3,
      delayMs: 2e3,
      exponentialBackoff: true
    });
  }
  // 현재 선택된 제공업체의 API 키를 가져오는 메서드
  getCurrentApiKey() {
    const provider = this.settings.llmProvider;
    let encryptedKey = "";
    switch (provider) {
      case "openai":
        encryptedKey = this.settings.openaiApiKey;
        break;
      case "anthropic":
        encryptedKey = this.settings.anthropicApiKey;
        break;
      case "google":
        encryptedKey = this.settings.googleApiKey;
        break;
    }
    return decryptApiKey(encryptedKey);
  }
  async testConnection() {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const testPrompt = 'Hello, this is a test message. Please respond with "OK" if you can read this.';
      const response = await this.callLLM(testPrompt);
      if (response.success) {
        return { success: true, data: "API \uC5F0\uACB0 \uC131\uACF5" };
      } else {
        return { success: false, error: response.error || "API \uC5F0\uACB0 \uC2E4\uD328" };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getWordDetails(word) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const prompt = this.createWordDetailPrompt(word);
      const response = await this.callLLM(prompt);
      if (response.success) {
        const parsedData = this.parseWordDetailResponse(response.data, word);
        return { success: true, data: parsedData };
      } else {
        return { success: false, error: response.error || "\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getMultipleWordDetails(words, progressCallback) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      if (words.length === 0) {
        return { success: false, error: "\uCC98\uB9AC\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      const BATCH_SIZE = 20;
      const allResults = [];
      const totalBatches = Math.ceil(words.length / BATCH_SIZE);
      if (progressCallback) {
        progressCallback(0, words.length, `\uCD1D ${words.length}\uAC1C \uB2E8\uC5B4\uB97C ${totalBatches}\uAC1C \uBC30\uCE58\uB85C \uB098\uB204\uC5B4 \uCC98\uB9AC\uD569\uB2C8\uB2E4.`);
      }
      for (let i = 0; i < words.length; i += BATCH_SIZE) {
        const batchNumber = Math.floor(i / BATCH_SIZE) + 1;
        const batchWords = words.slice(i, i + BATCH_SIZE);
        if (progressCallback) {
          progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber}/${totalBatches} \uCC98\uB9AC \uC911... (${batchWords.length}\uAC1C \uB2E8\uC5B4)`);
        }
        try {
          const prompt = this.createMultipleWordDetailPrompt(batchWords);
          const response = await this.callLLM(prompt);
          if (response.success) {
            const parsedData = this.parseMultipleWordDetailResponse(response.data, batchWords);
            allResults.push(...parsedData);
            if (progressCallback) {
              progressCallback(i + batchWords.length, words.length, `\uBC30\uCE58 ${batchNumber} \uC644\uB8CC: ${parsedData.length}\uAC1C \uB2E8\uC5B4 \uCC98\uB9AC\uB428`);
            }
          } else {
            console.error(`\uBC30\uCE58 ${batchNumber} \uC2E4\uD328:`, response.error);
            if (progressCallback) {
              progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC2E4\uD328, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
            }
            const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
            allResults.push(...individualResults);
          }
        } catch (error) {
          console.error(`\uBC30\uCE58 ${batchNumber} \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
          if (progressCallback) {
            progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC624\uB958, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
          }
          const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
          allResults.push(...individualResults);
        }
        if (i + BATCH_SIZE < words.length) {
          await this.delay(1e3);
        }
      }
      if (progressCallback) {
        progressCallback(words.length, words.length, `\uBAA8\uB4E0 \uBC30\uCE58 \uCC98\uB9AC \uC644\uB8CC. \uCD1D ${allResults.length}\uAC1C \uB2E8\uC5B4 \uB370\uC774\uD130 \uC218\uC9D1\uB428`);
      }
      return { success: true, data: allResults };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  // 개별 단어 처리 (배치 실패 시 폴백)
  async processWordsIndividually(words, progressCallback, startIndex = 0) {
    const results = [];
    for (let i = 0; i < words.length; i++) {
      const word = words[i];
      const currentIndex = startIndex + i;
      try {
        if (progressCallback) {
          progressCallback(currentIndex, startIndex + words.length, `\uAC1C\uBCC4 \uCC98\uB9AC: "${word}"`);
        }
        const response = await this.getWordDetails(word);
        if (response.success && response.data) {
          results.push(response.data);
        } else {
          console.warn(`\uB2E8\uC5B4 "${word}" \uCC98\uB9AC \uC2E4\uD328:`, response.error);
          results.push({
            word: word.toLowerCase(),
            pronunciation: "",
            meanings: ["\uCC98\uB9AC \uC2E4\uD328"],
            examples: [],
            similarWords: []
          });
        }
        await this.delay(500);
      } catch (error) {
        console.error(`\uB2E8\uC5B4 "${word}" \uAC1C\uBCC4 \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
        results.push({
          word: word.toLowerCase(),
          pronunciation: "",
          meanings: ["\uCC98\uB9AC \uC624\uB958"],
          examples: [],
          similarWords: []
        });
      }
    }
    return results;
  }
  // 지연 함수
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  createWordDetailPrompt(word) {
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4 "${word}"\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
1. \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD)
2. \uD55C\uAE00 \uB73B\uB4E4 (\uC5EC\uB7EC \uAC1C\uC77C \uC218 \uC788\uC74C)
3. \uAC01 \uB73B\uBCC4\uB85C \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED (\uAC01 \uB73B\uB2F9 2-3\uAC1C\uC758 \uC608\uBB38 \uC81C\uACF5)
4. \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4

\uC751\uB2F5 \uD615\uC2DD:
{
  "word": "${word}",
  "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
  "meanings": ["\uB73B1", "\uB73B2", "\uB73B3"],
  "examples": [
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 1",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 2", 
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 3",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
    }
  ],
  "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42", "\uC720\uC0AC\uB2E8\uC5B43"]
}

JSON \uD615\uC2DD\uC73C\uB85C\uB9CC \uC751\uB2F5\uD574\uC8FC\uC138\uC694. \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  createMultipleWordDetailPrompt(words) {
    const wordList = words.join(", ");
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C \uC815\uD655\uD55C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694: ${wordList}

\uC694\uAD6C\uC0AC\uD56D:
- \uAC01 \uB2E8\uC5B4\uC5D0 \uB300\uD574 \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD), \uD55C\uAE00 \uB73B\uB4E4, \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED, \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC744 \uD3EC\uD568
- \uAC01 \uB73B\uBCC4\uB85C 2-3\uAC1C\uC758 \uC608\uBB38\uC744 \uC81C\uACF5\uD574\uC8FC\uC138\uC694
- JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694
- \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uC774\uC911 \uB530\uC634\uD45C\uB85C \uAC10\uC2F8\uC8FC\uC138\uC694
- \uBC30\uC5F4\uACFC \uAC1D\uCCB4\uB294 \uC815\uD655\uD55C JSON \uBB38\uBC95\uC744 \uB530\uB974\uC138\uC694

\uC751\uB2F5 \uD615\uC2DD:
[
  {
    "word": "\uB2E8\uC5B41",
    "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
    "meanings": ["\uB73B1", "\uB73B2"],
    "examples": [
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 1",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 2",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 3",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
      }
    ],
    "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42"]
  }
]

\uC911\uC694: JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uD14D\uC2A4\uD2B8\uB294 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  async callLLM(prompt) {
    try {
      const provider = this.settings.llmProvider;
      switch (provider) {
        case "openai":
          return await this.callOpenAI(prompt);
        case "anthropic":
          return await this.callAnthropic(prompt);
        case "google":
          return await this.callGoogle(prompt);
        default:
          return { success: false, error: "\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 LLM \uC81C\uACF5\uC5C5\uCCB4\uC785\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callOpenAI(prompt) {
    var _a, _b, _c;
    try {
      const response = await retryAPICall(async () => {
        return (0, import_obsidian.requestUrl)({
          url: "https://api.openai.com/v1/chat/completions",
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${this.getCurrentApiKey()}`
          },
          body: JSON.stringify({
            model: this.settings.llmModel,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ],
            temperature: 0.3,
            max_tokens: 4e3
          })
        });
      });
      if (response.status >= 400) {
        const errorData = JSON.parse(response.text);
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "OpenAI API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = JSON.parse(response.text);
      const content = (_c = (_b = data.choices[0]) == null ? void 0 : _b.message) == null ? void 0 : _c.content;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callAnthropic(prompt) {
    var _a, _b, _c;
    if (typeof window === "undefined" || typeof window !== "undefined" && "process" in window && ((_a = window.process) == null ? void 0 : _a.type) === "renderer") {
      try {
        const response = await (0, import_obsidian.requestUrl)({
          url: "https://api.anthropic.com/v1/messages",
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "x-api-key": this.getCurrentApiKey(),
            "anthropic-version": "2023-06-01"
          },
          body: JSON.stringify({
            model: this.settings.llmModel,
            max_tokens: 3e4,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ]
          })
        });
        if (response.status >= 400) {
          const errorData = JSON.parse(response.text);
          return { success: false, error: ((_b = errorData.error) == null ? void 0 : _b.message) || "Anthropic API \uD638\uCD9C \uC2E4\uD328" };
        }
        const data = JSON.parse(response.text);
        const content = (_c = data.content[0]) == null ? void 0 : _c.text;
        if (!content) {
          return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
        }
        return { success: true, data: content };
      } catch (error) {
        return { success: false, error: error.message };
      }
    } else {
      return {
        success: false,
        error: "Anthropic API\uB294 \uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD\uC5D0\uC11C \uC9C1\uC811 \uD638\uCD9C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uB370\uC2A4\uD06C\uD1B1 \uC571(Obsidian)\uC5D0\uC11C\uB9CC \uB3D9\uC791\uD569\uB2C8\uB2E4."
      };
    }
  }
  async callGoogle(prompt) {
    var _a, _b, _c, _d;
    try {
      const response = await retryAPICall(async () => {
        return (0, import_obsidian.requestUrl)({
          url: `https://generativelanguage.googleapis.com/v1beta/models/${this.settings.llmModel}:generateContent?key=${this.getCurrentApiKey()}`,
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            contents: [
              {
                parts: [
                  {
                    text: prompt
                  }
                ]
              }
            ],
            generationConfig: {
              temperature: 0.3,
              maxOutputTokens: 4e3
            }
          })
        });
      });
      if (response.status >= 400) {
        const errorData = JSON.parse(response.text);
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "Google API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = JSON.parse(response.text);
      const content = (_d = (_c = (_b = data.candidates[0]) == null ? void 0 : _b.content) == null ? void 0 : _c.parts[0]) == null ? void 0 : _d.text;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  parseWordDetailResponse(response, originalWord) {
    try {
      const jsonMatch = response.match(/\{[\s\S]*\}/);
      if (!jsonMatch) {
        throw new Error("JSON \uD615\uC2DD\uC758 \uC751\uB2F5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      }
      const jsonData = JSON.parse(jsonMatch[0]);
      const validatedExamples = this.validateExamples(jsonData.examples);
      return {
        word: jsonData.word || originalWord,
        pronunciation: jsonData.pronunciation || "",
        meanings: jsonData.meanings || [],
        examples: validatedExamples,
        similarWords: jsonData.similarWords || []
      };
    } catch (error) {
      return {
        word: originalWord,
        pronunciation: "",
        meanings: ["\uC758\uBBF8\uB97C \uD30C\uC2F1\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
        examples: [],
        similarWords: []
      };
    }
  }
  // 예문 데이터 검증 및 정리
  validateExamples(examples) {
    if (!Array.isArray(examples)) {
      return [];
    }
    const validatedExamples = [];
    for (const example of examples) {
      if (example && typeof example === "object") {
        const english = example.english || example.english_text || example.text || "";
        const korean = example.korean || example.korean_text || example.translation || "";
        if (english.trim() && korean.trim()) {
          validatedExamples.push({
            english: english.trim(),
            korean: korean.trim()
          });
        }
      }
    }
    return validatedExamples;
  }
  parseMultipleWordDetailResponse(response, originalWords) {
    try {
      let jsonMatch = response.match(/\[[\s\S]*\]/);
      if (!jsonMatch) {
        const objectMatches = response.match(/\{[^{}]*"word"[^{}]*\}/g);
        if (objectMatches && objectMatches.length > 0) {
          const jsonString = "[" + objectMatches.join(",") + "]";
          try {
            const jsonData2 = JSON.parse(jsonString);
            if (Array.isArray(jsonData2)) {
              return this.processJsonData(jsonData2, originalWords);
            }
          } catch (e) {
          }
        }
        const lastCompleteMatch = response.match(/\[[\s\S]*\}(?=\s*$)/);
        if (lastCompleteMatch) {
          jsonMatch = [lastCompleteMatch[0] + "]"];
        } else {
          throw new Error("JSON \uBC30\uC5F4\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        }
      }
      let jsonData;
      let parsedLength = 0;
      try {
        jsonData = JSON.parse(jsonMatch[0]);
      } catch (parseError) {
        const results = this.parseIncrementalJson(response);
        if (results.length > 0) {
          return results;
        }
        const fixedJson = this.fixJsonString(jsonMatch[0]);
        try {
          jsonData = JSON.parse(fixedJson);
        } catch (secondError) {
          throw new Error("JSON \uD30C\uC2F1 \uBC0F \uBCF5\uAD6C \uC2E4\uD328");
        }
      }
      if (!Array.isArray(jsonData)) {
        throw new Error("\uC751\uB2F5\uC774 \uBC30\uC5F4 \uD615\uC2DD\uC774 \uC544\uB2D9\uB2C8\uB2E4.");
      }
      return this.processJsonData(jsonData, originalWords);
    } catch (error) {
      console.error("\uC5EC\uB7EC \uB2E8\uC5B4 \uC751\uB2F5 \uD30C\uC2F1 \uC624\uB958:", error);
      console.error("\uC6D0\uBCF8 \uC751\uB2F5:", response);
      return originalWords.map((word) => ({
        word: word.toLowerCase(),
        pronunciation: "",
        meanings: [],
        examples: [],
        similarWords: []
      }));
    }
  }
  // 점진적 JSON 파싱 - 완전한 객체들만 파싱
  parseIncrementalJson(response) {
    const results = [];
    const objectRegex = /\{[^{}]*"word"[^{}]*"pronunciation"[^{}]*"meanings"[^{}]*"examples"[^{}]*"similarWords"[^{}]*\}/g;
    let match;
    while ((match = objectRegex.exec(response)) !== null) {
      try {
        const objectData = JSON.parse(match[0]);
        if (objectData && objectData.word) {
          const validatedExamples = this.validateExamples(objectData.examples);
          const wordData = {
            word: objectData.word.toLowerCase(),
            pronunciation: objectData.pronunciation || "",
            meanings: Array.isArray(objectData.meanings) ? objectData.meanings : [],
            examples: validatedExamples,
            similarWords: Array.isArray(objectData.similarWords) ? objectData.similarWords : []
          };
          results.push(wordData);
        }
      } catch (e) {
        continue;
      }
    }
    return results;
  }
  // WordDetailData를 WordData로 변환하는 메서드
  convertToWordData(wordDetail) {
    return {
      word: wordDetail.word,
      pronunciation: wordDetail.pronunciation,
      meanings: wordDetail.meanings,
      similarWords: wordDetail.similarWords,
      examples: wordDetail.examples
    };
  }
  // JSON 데이터 처리
  processJsonData(jsonData, originalWords) {
    const results = [];
    for (const item of jsonData) {
      if (item && typeof item === "object" && item.word) {
        const validatedExamples = this.validateExamples(item.examples);
        const wordData = {
          word: item.word.toLowerCase(),
          pronunciation: item.pronunciation || "",
          meanings: Array.isArray(item.meanings) ? item.meanings : [],
          examples: validatedExamples,
          similarWords: Array.isArray(item.similarWords) ? item.similarWords : []
        };
        results.push(wordData);
      }
    }
    return results;
  }
  // JSON 문자열 복구
  fixJsonString(jsonString) {
    let fixed = jsonString;
    const lastCompleteObject = fixed.match(/.*\}(?=,?\s*$)/);
    if (lastCompleteObject) {
      fixed = lastCompleteObject[0] + "]";
    }
    fixed = fixed.replace(/,\s*,/g, ",");
    fixed = fixed.replace(/,\s*\]/g, "]");
    fixed = fixed.replace(/,\s*\}/g, "}");
    let result = "";
    let inString = false;
    let escaped = false;
    for (let i = 0; i < fixed.length; i++) {
      const char = fixed[i];
      const prevChar = i > 0 ? fixed[i - 1] : "";
      if (char === '"' && !escaped) {
        if (inString) {
          inString = false;
          result += char;
        } else {
          inString = true;
          result += char;
        }
      } else if (char === '"' && escaped) {
        result += char;
      } else if (char === '"' && inString && !escaped) {
        result += '\\"';
      } else {
        result += char;
      }
      escaped = char === "\\" && !escaped;
    }
    fixed = result;
    return fixed;
  }
};

// src/features/settings/ui/settings.ts
var DEFAULT_SETTINGS = {
  apiKey: "",
  defaultLanguage: "ko",
  showSimilarWords: true,
  showExamples: true,
  examplesCount: 3,
  openaiApiKey: "",
  anthropicApiKey: "",
  googleApiKey: "",
  llmProvider: "openai",
  llmModel: "gemini-1.0-pro-latest",
  enableAdvancedFeatures: false,
  reviewModalHeight: 85,
  vocabularyFolderPath: "Vocabulary",
  ttsEnabled: true,
  ttsProvider: "chatterbox",
  ttsVoice: "alloy",
  ttsPlaybackSpeed: 1,
  ttsAutoPlay: false,
  // Chatterbox TTS 기본값
  chatterboxApiUrl: "http://localhost:4123",
  // 경고: HTTP는 보안에 취약합니다. 가능하면 HTTPS를 사용하세요.
  chatterboxExaggeration: 0.7,
  chatterboxCfgWeight: 0.4,
  chatterboxTemperature: 0.9,
  // Google Cloud TTS 기본값
  googleCloudTTSApiKey: "",
  googleCloudTTSLanguageCode: "en-US",
  googleCloudTTSSpeakingRate: 1,
  googleCloudTTSPitch: 0,
  // TTS 캐시 설정
  ttsCacheEnabled: true
};
var VocabularySettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uD50C\uB7EC\uADF8\uC778 \uC124\uC815" });
    this.createBasicSettings(containerEl);
    this.createLLMSettings(containerEl);
    this.createTTSSettings(containerEl);
    this.createAdvancedSettings(containerEl);
  }
  createBasicSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uAE30\uBCF8 \uC124\uC815" });
    new import_obsidian2.Setting(containerEl).setName("\uAE30\uBCF8 \uC5B8\uC5B4").setDesc("\uB2E8\uC5B4 \uB73B\uC744 \uD45C\uC2DC\uD560 \uC5B8\uC5B4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("ko", "\uD55C\uAD6D\uC5B4").addOption("en", "English").addOption("ja", "\u65E5\u672C\u8A9E").setValue(this.plugin.settings.defaultLanguage).onChange(async (value) => {
      this.plugin.settings.defaultLanguage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC720\uC0AC\uD55C \uB2E8\uC5B4 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showSimilarWords).onChange(async (value) => {
      this.plugin.settings.showSimilarWords = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC608\uBB38 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC608\uBB38\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showExamples).onChange(async (value) => {
      this.plugin.settings.showExamples = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC608\uBB38 \uAC1C\uC218").setDesc("\uD45C\uC2DC\uD560 \uC608\uBB38\uC758 \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => slider.setLimits(1, 10, 1).setValue(this.plugin.settings.examplesCount).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.examplesCount = value;
      await this.plugin.saveSettings();
    }));
  }
  createLLMSettings(containerEl) {
    containerEl.createEl("h3", { text: "LLM API \uC124\uC815" });
    new import_obsidian2.Setting(containerEl).setName("\uACE0\uAE09 \uAE30\uB2A5 \uD65C\uC131\uD654").setDesc("LLM API\uB97C \uC0AC\uC6A9\uD55C \uACE0\uAE09 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableAdvancedFeatures).onChange(async (value) => {
      this.plugin.settings.enableAdvancedFeatures = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("LLM \uC81C\uACF5\uC5C5\uCCB4").setDesc("\uC0AC\uC6A9\uD560 LLM API \uC81C\uACF5\uC5C5\uCCB4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("openai", "OpenAI (GPT)").addOption("anthropic", "Anthropic (Claude)").addOption("google", "Google (Gemini)").setValue(this.plugin.settings.llmProvider).onChange(async (value) => {
      this.plugin.settings.llmProvider = value;
      if (value === "openai") {
        this.plugin.settings.llmModel = "gpt-4.1";
      } else if (value === "anthropic") {
        this.plugin.settings.llmModel = "claude-3-5-sonnet";
      } else if (value === "google") {
        this.plugin.settings.llmModel = "gemini-2.5-flash";
      }
      await this.plugin.saveSettings();
      this.display();
    }));
    this.createModelSelection(containerEl);
    this.createApiKeySettings(containerEl);
    new import_obsidian2.Setting(containerEl).setName("API \uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setDesc("\uD604\uC7AC \uC120\uD0DD\uB41C \uC81C\uACF5\uC5C5\uCCB4\uC758 API \uD0A4\uAC00 \uC62C\uBC14\uB974\uAC8C \uC124\uC815\uB418\uC5C8\uB294\uC9C0 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4.").addButton((button) => button.setButtonText("\uD14C\uC2A4\uD2B8").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        const llmService = new LLMService(this.plugin.settings);
        const result = await llmService.testConnection();
        if (result.success) {
          new import_obsidian2.Notice("\u2705 API \uC5F0\uACB0 \uC131\uACF5!");
        } else {
          new import_obsidian2.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + result.error);
        }
      } catch (error) {
        new import_obsidian2.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + error.message);
      } finally {
        button.setButtonText("\uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
  }
  createModelSelection(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("API \uBAA8\uB378").setDesc("\uC0AC\uC6A9\uD560 LLM \uBAA8\uB378\uC744 \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => {
      const provider = this.plugin.settings.llmProvider;
      if (provider === "openai") {
        dropdown.addOption("gpt-4.1", "GPT-4.1").addOption("gpt-4o", "GPT-4o").addOption("gpt-4o-mini", "GPT-4o Mini").addOption("gpt-4.1-long", "GPT-4.1 (Long Context)").addOption("gpt-4.5-preview", "GPT-4.5 Preview").addOption("gpt-4.5-preview-2", "GPT-4.5 Preview 2");
      } else if (provider === "anthropic") {
        dropdown.addOption("claude-3-5-sonnet", "Claude 3.5 Sonnet").addOption("claude-3-5-haiku", "Claude 3.5 Haiku").addOption("claude-3-5-opus", "Claude 3.5 Opus").addOption("claude-3-7-sonnet", "Claude 3.7 Sonnet").addOption("claude-3-7-haiku", "Claude 3.7 Haiku").addOption("claude-3-7-opus", "Claude 3.7 Opus").addOption("claude-3-5-flash", "Claude 3.5 Flash");
      } else if (provider === "google") {
        dropdown.addOption("gemini-1.5-pro-latest", "Gemini 1.5 Pro").addOption("gemini-2.5-flash", "Gemini 2.5 Flash").addOption("gemini-2.5-pro", "Gemini 2.5 Pro").addOption("gemini-1.5-flash-latest", "Gemini 1.5 Flash");
      }
      return dropdown.setValue(this.plugin.settings.llmModel).onChange(async (value) => {
        this.plugin.settings.llmModel = value;
        await this.plugin.saveSettings();
      });
    });
  }
  createApiKeySettings(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("OpenAI API \uD0A4").setDesc("OpenAI API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.openaiApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.openaiApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Anthropic API \uD0A4").setDesc("Anthropic API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-ant-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.anthropicApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-ant-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.anthropicApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Google API \uD0A4").setDesc("Google API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").addText((text) => {
      const currentKey = this.plugin.settings.googleApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
  }
  createAdvancedSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uACE0\uAE09 \uC124\uC815" });
    const folders = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian2.TFolder);
    new import_obsidian2.Setting(containerEl).setName("\uB2E8\uC5B4\uC7A5 \uC800\uC7A5 \uD3F4\uB354").setDesc("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C\uB4E4\uC774 \uC800\uC7A5\uB420 \uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: Vocabulary)").addDropdown((dropdown) => {
      folders.forEach((folder) => {
        if (folder instanceof import_obsidian2.TFolder) {
          dropdown.addOption(folder.path, folder.path);
        }
      });
      dropdown.setValue(this.plugin.settings.vocabularyFolderPath);
      dropdown.onChange(async (value) => {
        this.plugin.settings.vocabularyFolderPath = value;
        await this.plugin.saveSettings();
        if (this.plugin.databaseManager) {
          this.plugin.databaseManager.updateVocabularyFolderPath(value);
        }
      });
      return dropdown;
    });
    new import_obsidian2.Setting(containerEl).setName("\uBCF5\uC2B5 \uD654\uBA74 \uB192\uC774").setDesc("\uBCF5\uC2B5 \uBAA8\uB2EC\uC758 \uB192\uC774\uB97C \uD654\uBA74 \uB192\uC774\uC758 \uBC31\uBD84\uC728\uB85C \uC124\uC815\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: 85%)").addSlider((slider) => slider.setLimits(50, 95, 5).setValue(this.plugin.settings.reviewModalHeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.reviewModalHeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC77C\uC77C \uD559\uC2B5 \uBAA9\uD45C").setDesc("\uD558\uB8E8\uC5D0 \uD559\uC2B5\uD560 \uB2E8\uC5B4\uC758 \uBAA9\uD45C \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(5, 50, 5).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.dailyGoal) || 10).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ dailyGoal: value }));
      });
    });
    new import_obsidian2.Setting(containerEl).setName("\uBCF5\uC2B5 \uAC04\uACA9 (\uC77C)").setDesc("\uB2E8\uC5B4\uB97C \uB2E4\uC2DC \uBCF5\uC2B5\uD560 \uAC04\uACA9\uC744 \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(1, 30, 1).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.reviewInterval) || 1).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ reviewInterval: value }));
      });
    });
  }
  createTTSSettings(containerEl) {
    containerEl.createEl("h3", { text: "TTS (\uC74C\uC131 \uC77D\uAE30) \uC124\uC815" });
    const ttsToggleSetting = new import_obsidian2.Setting(containerEl).setName("TTS \uD65C\uC131\uD654").setDesc("\uB2E8\uC5B4\uC640 \uC608\uBB38\uC744 \uC74C\uC131\uC73C\uB85C \uC77D\uC5B4\uC8FC\uB294 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsEnabled).onChange(async (value) => {
      this.plugin.settings.ttsEnabled = value;
      await this.plugin.saveSettings();
      this.updateTTSSettingsVisibility();
    }));
    new import_obsidian2.Setting(containerEl).setName("TTS \uC81C\uACF5\uC790").setDesc("\uC0AC\uC6A9\uD560 TTS \uC11C\uBE44\uC2A4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").setClass("tts-provider-setting").addDropdown((dropdown) => dropdown.addOption("chatterbox", "Chatterbox TTS (\uB85C\uCEEC)").addOption("google-cloud", "Google Cloud Text-to-Speech").setValue(this.plugin.settings.ttsProvider).onChange(async (value) => {
      this.plugin.settings.ttsProvider = value;
      await this.plugin.saveSettings();
      this.updateTTSProviderSettings();
    }));
    this.createChatterboxTTSSettings(containerEl);
    this.createGoogleCloudTTSSettings(containerEl);
    const autoPlaySetting = new import_obsidian2.Setting(containerEl).setName("\uC790\uB3D9 \uC7AC\uC0DD").setDesc("\uB2E8\uC5B4 \uCE74\uB4DC\uAC00 \uD45C\uC2DC\uB420 \uB54C \uC790\uB3D9\uC73C\uB85C \uB2E8\uC5B4\uB97C \uC77D\uC5B4\uC90D\uB2C8\uB2E4.").setClass("tts-autoplay-setting").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsAutoPlay).onChange(async (value) => {
      this.plugin.settings.ttsAutoPlay = value;
      await this.plugin.saveSettings();
    }));
    this.createTTSCacheSettings(containerEl);
    this.updateTTSSettingsVisibility();
    this.updateTTSProviderSettings();
  }
  populateChatterboxVoiceDropdown(dropdown) {
    const chatterboxVoices = [
      { value: "alloy", name: "Alloy (\uC911\uC131\uC801)" },
      { value: "echo", name: "Echo (\uB0A8\uC131)" },
      { value: "fable", name: "Fable (\uC601\uAD6D\uC2DD)" },
      { value: "onyx", name: "Onyx (\uAE4A\uC740 \uB0A8\uC131)" },
      { value: "nova", name: "Nova (\uC5EC\uC131)" },
      { value: "shimmer", name: "Shimmer (\uBD80\uB4DC\uB7EC\uC6B4 \uC5EC\uC131)" },
      { value: "custom", name: "Custom (\uC0AC\uC6A9\uC790 \uC815\uC758)" }
    ];
    chatterboxVoices.forEach((option) => {
      dropdown.addOption(option.value, option.name);
    });
    try {
      const voices = speechSynthesis.getVoices();
      const englishVoices = voices.filter(
        (voice) => voice.lang.startsWith("en-") && !voice.lang.includes("ko") && !chatterboxVoices.some((opt) => opt.value === voice.name)
      );
      if (englishVoices.length > 0) {
        dropdown.addOption("---", "--- \uC2DC\uC2A4\uD15C \uC74C\uC131 ---");
        englishVoices.forEach((voice) => {
          const displayName = `${voice.name} (${voice.lang})`;
          dropdown.addOption(voice.name, displayName);
        });
      }
    } catch (error) {
      console.warn("\uC74C\uC131 \uBAA9\uB85D\uC744 \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
    }
  }
  updateTTSSettingsVisibility() {
    const isEnabled = this.plugin.settings.ttsEnabled;
    const allTtsSettings = this.containerEl.querySelectorAll(
      ".tts-provider-setting, .chatterbox-api-url-setting, .chatterbox-voice-setting, .chatterbox-exaggeration-setting, .chatterbox-cfg-setting, .chatterbox-temperature-setting, .google-cloud-tts-guide, .google-cloud-api-key-setting, .google-cloud-language-setting, .google-cloud-voice-setting, .google-cloud-speaking-rate-setting, .google-cloud-pitch-setting, .tts-autoplay-setting, .tts-cache-header, .tts-cache-enabled-setting, .tts-cache-info-setting, .tts-cache-clear-setting"
    );
    allTtsSettings.forEach((setting) => {
      const element = setting;
      if (isEnabled) {
        element.removeClass("settings-disabled");
        element.addClass("settings-enabled");
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        const inputs = element.querySelectorAll('input[type="text"]');
        buttons.forEach((btn) => btn.disabled = false);
        dropdowns.forEach((dd) => dd.disabled = false);
        sliders.forEach((slider) => slider.disabled = false);
        toggles.forEach((toggle) => toggle.disabled = false);
        inputs.forEach((input) => input.disabled = false);
      } else {
        element.removeClass("settings-enabled");
        element.addClass("settings-disabled");
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        const inputs = element.querySelectorAll('input[type="text"]');
        buttons.forEach((btn) => btn.disabled = true);
        dropdowns.forEach((dd) => dd.disabled = true);
        sliders.forEach((slider) => slider.disabled = true);
        toggles.forEach((toggle) => toggle.disabled = true);
        inputs.forEach((input) => input.disabled = true);
      }
    });
    if (isEnabled) {
      this.updateTTSProviderSettings();
    }
  }
  async testChatterboxConnection() {
    try {
      const response = await fetch(`${this.plugin.settings.chatterboxApiUrl}/v1/audio/speech`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: "Connection test",
          voice: "alloy"
        })
      });
      if (response.ok) {
        new import_obsidian2.Notice("\u2705 Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0 \uC131\uACF5!");
      } else {
        throw new Error(`\uC11C\uBC84 \uC751\uB2F5 \uC624\uB958: ${response.status}`);
      }
    } catch (error) {
      console.error("Chatterbox TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      new import_obsidian2.Notice("\u274C Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0 \uC2E4\uD328. \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      throw error;
    }
  }
  createChatterboxTTSSettings(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("Chatterbox TTS API URL").setDesc("Chatterbox TTS \uC11C\uBC84\uC758 URL\uC744 \uC785\uB825\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: http://localhost:4123)").setClass("chatterbox-api-url-setting").addText((text) => text.setPlaceholder("http://localhost:4123").setValue(this.plugin.settings.chatterboxApiUrl).onChange(async (value) => {
      this.plugin.settings.chatterboxApiUrl = value || "http://localhost:4123";
      await this.plugin.saveSettings();
    })).addButton((button) => button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setTooltip("Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0\uC744 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        await this.testChatterboxConnection();
      } finally {
        button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("Chatterbox TTS\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").setClass("chatterbox-voice-setting").addDropdown((dropdown) => {
      this.populateChatterboxVoiceDropdown(dropdown);
      return dropdown.setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
        this.plugin.settings.ttsVoice = value;
        await this.plugin.saveSettings();
      });
    }).addButton((button) => button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30").setTooltip("\uC120\uD0DD\uD55C \uC74C\uC131\uC73C\uB85C \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uB97C \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playChatterboxVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
        new import_obsidian2.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uAC10\uC815 \uD45C\uD604 \uAC15\uB3C4 (Exaggeration)").setDesc("\uC74C\uC131\uC758 \uAC10\uC815 \uD45C\uD604 \uAC15\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.25 = \uC57D\uD568, 2.0 = \uAC15\uD568)").setClass("chatterbox-exaggeration-setting").addSlider((slider) => slider.setLimits(0.25, 2, 0.05).setValue(this.plugin.settings.chatterboxExaggeration).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxExaggeration = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("CFG \uAC00\uC911\uCE58 (CFG Weight)").setDesc("\uC74C\uC131 \uC0DD\uC131\uC758 \uAC00\uC774\uB358\uC2A4 \uAC15\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.0 = \uC57D\uD568, 1.0 = \uAC15\uD568)").setClass("chatterbox-cfg-setting").addSlider((slider) => slider.setLimits(0, 1, 0.05).setValue(this.plugin.settings.chatterboxCfgWeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxCfgWeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC628\uB3C4 (Temperature)").setDesc("\uC74C\uC131 \uC0DD\uC131\uC758 \uCC3D\uC758\uC131\uC744 \uC870\uC808\uD569\uB2C8\uB2E4. (0.05 = \uC77C\uAD00\uC131, 5.0 = \uCC3D\uC758\uC131)").setClass("chatterbox-temperature-setting").addSlider((slider) => slider.setLimits(0.05, 5, 0.05).setValue(this.plugin.settings.chatterboxTemperature).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxTemperature = value;
      await this.plugin.saveSettings();
    }));
  }
  createGoogleCloudTTSSettings(containerEl) {
    const guideEl = containerEl.createEl("div", {
      cls: "google-cloud-tts-guide google-cloud-api-key-setting",
      attr: { style: "margin-bottom: 15px; padding: 10px; background-color: var(--background-secondary); border-radius: 5px; border-left: 3px solid var(--interactive-accent);" }
    });
    guideEl.createEl("h4", { text: "\u{1F527} Google Cloud TTS \uC124\uC815 \uAC00\uC774\uB4DC", attr: { style: "margin: 0 0 10px 0; color: var(--interactive-accent);" } });
    const stepsList = guideEl.createEl("ol", { attr: { style: "margin: 0; padding-left: 20px; line-height: 1.6;" } });
    const step1 = stepsList.createEl("li");
    step1.createEl("strong", { text: "Google Cloud Console \uC811\uC18D:" });
    step1.appendText(" ");
    const step1Link = step1.createEl("a", {
      text: "console.cloud.google.com",
      href: "https://console.cloud.google.com",
      attr: { style: "color: var(--interactive-accent);" }
    });
    step1Link.addEventListener("click", () => {
      window.open("https://console.cloud.google.com", "_blank");
    });
    const step2 = stepsList.createEl("li");
    step2.createEl("strong", { text: "\uD504\uB85C\uC81D\uD2B8 \uC120\uD0DD/\uC0DD\uC131:" });
    step2.appendText(" \uAE30\uC874 \uD504\uB85C\uC81D\uD2B8\uB97C \uC120\uD0DD\uD558\uAC70\uB098 \uC0C8 \uD504\uB85C\uC81D\uD2B8\uB97C \uC0DD\uC131\uD569\uB2C8\uB2E4.");
    const step3 = stepsList.createEl("li");
    step3.createEl("strong", { text: "Text-to-Speech API \uD65C\uC131\uD654:" });
    step3.appendText(" ");
    const step3Link = step3.createEl("a", {
      text: "API \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uD65C\uC131\uD654",
      href: "https://console.cloud.google.com/apis/library/texttospeech.googleapis.com",
      attr: { style: "color: var(--interactive-accent);" }
    });
    step3Link.addEventListener("click", () => {
      window.open("https://console.cloud.google.com/apis/library/texttospeech.googleapis.com", "_blank");
    });
    const step4 = stepsList.createEl("li");
    step4.createEl("strong", { text: "API \uD0A4 \uC0DD\uC131:" });
    step4.appendText(" \uC0AC\uC6A9\uC790 \uC778\uC99D \uC815\uBCF4 > API \uD0A4 > \uC0C8 API \uD0A4 \uC0DD\uC131");
    const step5 = stepsList.createEl("li");
    step5.createEl("strong", { text: "API \uD0A4 \uC81C\uD55C \uC124\uC815 (\uAD8C\uC7A5):" });
    step5.appendText(" \uD0A4 \uC81C\uD55C > API \uC81C\uD55C > Cloud Text-to-Speech API \uC120\uD0DD");
    const warningEl = guideEl.createEl("div", {
      attr: { style: "margin-top: 10px; padding: 8px; background-color: var(--background-modifier-error-rgb); border-radius: 3px; font-size: 0.9em;" }
    });
    warningEl.appendText("\u26A0\uFE0F ");
    warningEl.createEl("strong", { text: "\uC911\uC694:" });
    warningEl.appendText(' Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC740 \uACBD\uC6B0 "API_KEY_SERVICE_BLOCKED" \uC624\uB958\uAC00 \uBC1C\uC0DD\uD569\uB2C8\uB2E4.');
    new import_obsidian2.Setting(containerEl).setName("Google Cloud TTS API \uD0A4").setDesc("Google Cloud Text-to-Speech API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").setClass("google-cloud-api-key-setting").addText((text) => {
      const currentKey = this.plugin.settings.googleCloudTTSApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleCloudTTSApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    }).addButton((button) => button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setTooltip("Google Cloud TTS API \uC5F0\uACB0\uC744 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        await this.testGoogleCloudConnection();
      } finally {
        button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC5B8\uC5B4 \uCF54\uB4DC").setDesc("\uC0AC\uC6A9\uD560 \uC5B8\uC5B4 \uCF54\uB4DC\uB97C \uC120\uD0DD\uD558\uC138\uC694.").setClass("google-cloud-language-setting").addDropdown((dropdown) => dropdown.addOption("en-US", "English (US)").addOption("en-GB", "English (UK)").addOption("en-AU", "English (AU)").addOption("en-IN", "English (India)").setValue(this.plugin.settings.googleCloudTTSLanguageCode).onChange(async (value) => {
      this.plugin.settings.googleCloudTTSLanguageCode = value;
      await this.plugin.saveSettings();
      this.updateGoogleCloudVoices();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("Google Cloud TTS\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").setClass("google-cloud-voice-setting").addDropdown((dropdown) => {
      this.populateGoogleCloudVoiceDropdown(dropdown);
      return dropdown.setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
        this.plugin.settings.ttsVoice = value;
        await this.plugin.saveSettings();
      });
    }).addButton((button) => button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30").setTooltip("\uC120\uD0DD\uD55C \uC74C\uC131\uC73C\uB85C \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uB97C \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playGoogleCloudVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
        new import_obsidian2.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uB9D0\uD558\uAE30 \uC18D\uB3C4 (Speaking Rate)").setDesc("\uC74C\uC131\uC758 \uB9D0\uD558\uAE30 \uC18D\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.25 = \uB290\uB9BC, 4.0 = \uBE60\uB984)").setClass("google-cloud-speaking-rate-setting").addSlider((slider) => slider.setLimits(0.25, 4, 0.25).setValue(this.plugin.settings.googleCloudTTSSpeakingRate).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.googleCloudTTSSpeakingRate = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC74C\uC131 \uB192\uB0AE\uC774 (Pitch)").setDesc("\uC74C\uC131\uC758 \uB192\uB0AE\uC774\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (-20.0 = \uB0AE\uC74C, 20.0 = \uB192\uC74C)").setClass("google-cloud-pitch-setting").addSlider((slider) => slider.setLimits(-20, 20, 1).setValue(this.plugin.settings.googleCloudTTSPitch).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.googleCloudTTSPitch = value;
      await this.plugin.saveSettings();
    }));
  }
  populateGoogleCloudVoiceDropdown(dropdown) {
    const languageCode = this.plugin.settings.googleCloudTTSLanguageCode;
    if (languageCode === "en-US") {
      dropdown.addOption("en-US-Journey-D", "Journey-D (Male)").addOption("en-US-Journey-F", "Journey-F (Female)").addOption("en-US-Journey-O", "Journey-O (Male)").addOption("en-US-Neural2-A", "Neural2-A (Male)").addOption("en-US-Neural2-C", "Neural2-C (Female)").addOption("en-US-Neural2-D", "Neural2-D (Male)").addOption("en-US-Neural2-E", "Neural2-E (Female)").addOption("en-US-Neural2-F", "Neural2-F (Female)").addOption("en-US-Neural2-G", "Neural2-G (Female)").addOption("en-US-Neural2-H", "Neural2-H (Female)").addOption("en-US-Neural2-I", "Neural2-I (Male)").addOption("en-US-Neural2-J", "Neural2-J (Male)");
    } else if (languageCode === "en-GB") {
      dropdown.addOption("en-GB-Neural2-A", "Neural2-A (Female)").addOption("en-GB-Neural2-B", "Neural2-B (Male)").addOption("en-GB-Neural2-C", "Neural2-C (Female)").addOption("en-GB-Neural2-D", "Neural2-D (Male)").addOption("en-GB-Neural2-F", "Neural2-F (Female)");
    } else if (languageCode === "en-AU") {
      dropdown.addOption("en-AU-Neural2-A", "Neural2-A (Female)").addOption("en-AU-Neural2-B", "Neural2-B (Male)").addOption("en-AU-Neural2-C", "Neural2-C (Female)").addOption("en-AU-Neural2-D", "Neural2-D (Male)");
    } else {
      dropdown.addOption("en-US-Journey-F", "Journey-F (Female)");
    }
  }
  updateGoogleCloudVoices() {
    const voiceDropdown = this.containerEl.querySelector(".google-cloud-voice-setting select");
    if (voiceDropdown) {
      voiceDropdown.empty();
      const dropdown = { addOption: (value, text) => {
        const option = document.createElement("option");
        option.value = value;
        option.text = text;
        voiceDropdown.appendChild(option);
      } };
      this.populateGoogleCloudVoiceDropdown(dropdown);
      const languageCode = this.plugin.settings.googleCloudTTSLanguageCode;
      let defaultVoice = "en-US-Journey-F";
      if (languageCode === "en-GB")
        defaultVoice = "en-GB-Neural2-A";
      else if (languageCode === "en-AU")
        defaultVoice = "en-AU-Neural2-A";
      voiceDropdown.value = defaultVoice;
      this.plugin.settings.ttsVoice = defaultVoice;
      this.plugin.saveSettings();
    }
  }
  updateTTSProviderSettings() {
    const provider = this.plugin.settings.ttsProvider;
    const chatterboxSettings = this.containerEl.querySelectorAll(".chatterbox-api-url-setting, .chatterbox-voice-setting, .chatterbox-exaggeration-setting, .chatterbox-cfg-setting, .chatterbox-temperature-setting");
    const googleCloudSettings = this.containerEl.querySelectorAll(".google-cloud-tts-guide, .google-cloud-api-key-setting, .google-cloud-language-setting, .google-cloud-voice-setting, .google-cloud-speaking-rate-setting, .google-cloud-pitch-setting");
    chatterboxSettings.forEach((setting) => {
      setting.style.display = "none";
    });
    googleCloudSettings.forEach((setting) => {
      setting.style.display = "none";
    });
    if (provider === "chatterbox") {
      chatterboxSettings.forEach((setting) => {
        setting.style.display = "";
      });
    } else if (provider === "google-cloud") {
      googleCloudSettings.forEach((setting) => {
        setting.style.display = "";
      });
    }
  }
  async playChatterboxVoicePreview() {
    try {
      const sampleTexts = [
        "Hello, this is a sample voice preview.",
        "Welcome to English vocabulary learning.",
        "This voice will help you learn pronunciation.",
        "Beautiful words make beautiful sentences."
      ];
      const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
      const response = await fetch(`${this.plugin.settings.chatterboxApiUrl}/v1/audio/speech`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: randomText,
          voice: this.plugin.settings.ttsVoice,
          exaggeration: this.plugin.settings.chatterboxExaggeration,
          cfg_weight: this.plugin.settings.chatterboxCfgWeight,
          temperature: this.plugin.settings.chatterboxTemperature
        })
      });
      if (!response.ok) {
        throw new Error(`Chatterbox TTS API \uC624\uB958: ${response.status} ${response.statusText}`);
      }
      const audioBlob = await response.blob();
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      return new Promise((resolve, reject) => {
        audio.onended = () => {
          URL.revokeObjectURL(audioUrl);
          new import_obsidian2.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC644\uB8CC!");
          resolve();
        };
        audio.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.play().catch(reject);
      });
    } catch (error) {
      console.error("Chatterbox TTS \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
      new import_obsidian2.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. Chatterbox TTS \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      throw error;
    }
  }
  async playGoogleCloudVoicePreview() {
    try {
      const sampleTexts = [
        "Hello, this is a sample voice preview.",
        "Welcome to English vocabulary learning.",
        "This voice will help you learn pronunciation.",
        "Beautiful words make beautiful sentences."
      ];
      const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
      const apiKey = decryptApiKey(this.plugin.settings.googleCloudTTSApiKey);
      if (!apiKey) {
        throw new Error("Google Cloud TTS API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
      }
      const requestBody = {
        input: { text: randomText },
        voice: {
          languageCode: this.plugin.settings.googleCloudTTSLanguageCode,
          name: this.plugin.settings.ttsVoice
        },
        audioConfig: {
          audioEncoding: "MP3",
          speakingRate: this.plugin.settings.googleCloudTTSSpeakingRate,
          pitch: this.plugin.settings.googleCloudTTSPitch
        }
      };
      const response = await (0, import_obsidian2.requestUrl)({
        url: `https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`,
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(requestBody)
      });
      if (response.status >= 400) {
        const errorData = JSON.parse(response.text || "{}");
        const detailedError = this.getDetailedGoogleCloudError(response.status, errorData);
        throw new Error(detailedError);
      }
      const data = JSON.parse(response.text);
      const audioBlob = this.base64ToBlob(data.audioContent, "audio/mp3");
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      return new Promise((resolve, reject) => {
        audio.onended = () => {
          URL.revokeObjectURL(audioUrl);
          new import_obsidian2.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC644\uB8CC!");
          resolve();
        };
        audio.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.play().catch(reject);
      });
    } catch (error) {
      console.error("Google Cloud TTS \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
      if (error.message.includes("API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4")) {
        new import_obsidian2.Notice(`\u274C ${error.message}`);
      } else if (error.message.includes("API \uD0A4")) {
        new import_obsidian2.Notice(`\u274C ${error.message}`);
      } else {
        new import_obsidian2.Notice("\u274C \uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uC640 \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      }
      throw error;
    }
  }
  base64ToBlob(base64, mimeType) {
    const byteCharacters = atob(base64);
    const byteNumbers = new Array(byteCharacters.length);
    for (let i = 0; i < byteCharacters.length; i++) {
      byteNumbers[i] = byteCharacters.charCodeAt(i);
    }
    const byteArray = new Uint8Array(byteNumbers);
    return new Blob([byteArray], { type: mimeType });
  }
  async testGoogleCloudConnection() {
    try {
      const apiKey = decryptApiKey(this.plugin.settings.googleCloudTTSApiKey);
      if (!apiKey) {
        new import_obsidian2.Notice("\u274C Google Cloud TTS API \uD0A4\uB97C \uBA3C\uC800 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
        return;
      }
      const response = await (0, import_obsidian2.requestUrl)({
        url: `https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`,
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: { text: "Connection test" },
          voice: {
            languageCode: "en-US",
            name: "en-US-Journey-F"
          },
          audioConfig: {
            audioEncoding: "MP3"
          }
        })
      });
      if (response.status < 400) {
        new import_obsidian2.Notice("\u2705 Google Cloud TTS API \uC5F0\uACB0 \uC131\uACF5!");
      } else {
        const errorData = JSON.parse(response.text || "{}");
        const detailedError = this.getDetailedGoogleCloudError(response.status, errorData);
        new import_obsidian2.Notice(`\u274C ${detailedError}`);
      }
    } catch (error) {
      console.error("Google Cloud TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      if (error.message.includes("\uB124\uD2B8\uC6CC\uD06C") || error.message.includes("fetch")) {
        new import_obsidian2.Notice("\u274C \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      } else {
        new import_obsidian2.Notice(`\u274C ${error.message}`);
      }
    }
  }
  getDetailedGoogleCloudError(status, errorData) {
    var _a, _b, _c, _d;
    if (errorData == null ? void 0 : errorData.error) {
      const error = errorData.error;
      if (status === 403 && ((_a = error.details) == null ? void 0 : _a.some(
        (detail) => {
          var _a2;
          return detail.reason === "API_KEY_SERVICE_BLOCKED" || ((_a2 = detail["@type"]) == null ? void 0 : _a2.includes("ErrorInfo")) && detail.reason === "API_KEY_SERVICE_BLOCKED";
        }
      ))) {
        return "Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC704\uC758 \uAC00\uC774\uB4DC\uB97C \uCC38\uACE0\uD558\uC5EC API\uB97C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 403) {
        if (((_b = error.message) == null ? void 0 : _b.includes("API key not valid")) || error.code === "INVALID_ARGUMENT") {
          return "API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uD0A4\uB97C \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        if (((_c = error.message) == null ? void 0 : _c.includes("quota")) || ((_d = error.message) == null ? void 0 : _d.includes("QUOTA_EXCEEDED"))) {
          return "API \uD560\uB2F9\uB7C9\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. Google Cloud Console\uC5D0\uC11C \uD560\uB2F9\uB7C9\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        return "API \uC811\uADFC\uC774 \uAC70\uBD80\uB418\uC5C8\uC2B5\uB2C8\uB2E4. API \uD0A4 \uAD8C\uD55C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 401) {
        return "API \uD0A4 \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uAC00 \uC62C\uBC14\uB978\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 400) {
        return "API \uC694\uCCAD\uC774 \uC798\uBABB\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC74C\uC131 \uC124\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 503) {
        return "Google Cloud TTS \uC11C\uBE44\uC2A4\uAC00 \uC77C\uC2DC\uC801\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
      }
      return `API \uC624\uB958 (${status}): ${error.message || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`;
    }
    return `API \uC624\uB958: ${status} \uC0C1\uD0DC \uCF54\uB4DC`;
  }
  createTTSCacheSettings(containerEl) {
    const cacheHeaderEl = containerEl.createEl("div", {
      cls: "tts-cache-header",
      attr: { style: "margin-top: 20px; padding: 10px; background-color: var(--background-secondary); border-radius: 5px; border-left: 3px solid var(--interactive-accent);" }
    });
    cacheHeaderEl.createEl("h4", { text: "\u{1F5C2}\uFE0F TTS \uCE90\uC2DC \uAD00\uB9AC", attr: { style: "margin: 0 0 5px 0; color: var(--interactive-accent);" } });
    cacheHeaderEl.createEl("p", { text: "\uC74C\uC131 \uD30C\uC77C\uC744 \uB85C\uCEEC\uC5D0 \uCE90\uC2DC\uD558\uC5EC API \uBE44\uC6A9\uC744 \uC808\uC57D\uD558\uACE0 \uC751\uB2F5 \uC18D\uB3C4\uB97C \uD5A5\uC0C1\uC2DC\uD0B5\uB2C8\uB2E4.", attr: { style: "margin: 0; font-size: 0.9em; opacity: 0.8;" } });
    new import_obsidian2.Setting(containerEl).setName("TTS \uCE90\uC2DC \uD65C\uC131\uD654").setDesc("TTS \uC74C\uC131 \uD30C\uC77C\uC744 \uB85C\uCEEC\uC5D0 \uCE90\uC2DC\uD558\uC5EC \uC7AC\uC0AC\uC6A9\uD569\uB2C8\uB2E4.").setClass("tts-cache-enabled-setting").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsCacheEnabled).onChange(async (value) => {
      this.plugin.settings.ttsCacheEnabled = value;
      await this.plugin.saveSettings();
    }));
    const cacheInfoSetting = new import_obsidian2.Setting(containerEl).setName("\uCE90\uC2DC \uD604\uD669").setDesc("\uD604\uC7AC \uC800\uC7A5\uB41C TTS \uCE90\uC2DC \uD30C\uC77C \uC815\uBCF4").setClass("tts-cache-info-setting");
    this.updateCacheInfo(cacheInfoSetting);
    new import_obsidian2.Setting(containerEl).setName("\uCE90\uC2DC \uAD00\uB9AC").setDesc("\uC800\uC7A5\uB41C \uBAA8\uB4E0 TTS \uCE90\uC2DC \uD30C\uC77C\uC744 \uC0AD\uC81C\uD569\uB2C8\uB2E4.").setClass("tts-cache-clear-setting").addButton((button) => button.setButtonText("\uCE90\uC2DC \uC0AD\uC81C").setTooltip("\uBAA8\uB4E0 TTS \uCE90\uC2DC \uD30C\uC77C\uC744 \uC0AD\uC81C\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC0AD\uC81C \uC911...");
      button.setDisabled(true);
      try {
        const success = await this.clearTTSCache();
        if (success) {
          new import_obsidian2.Notice("\u2705 TTS \uCE90\uC2DC\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
          this.updateCacheInfo(cacheInfoSetting);
        } else {
          new import_obsidian2.Notice("\u274C TTS \uCE90\uC2DC \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
        }
      } catch (error) {
        console.error("TTS \uCE90\uC2DC \uC0AD\uC81C \uC624\uB958:", error);
        new import_obsidian2.Notice("\u274C TTS \uCE90\uC2DC \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uCE90\uC2DC \uC0AD\uC81C");
        button.setDisabled(false);
      }
    })).addButton((button) => button.setButtonText("\uC0C8\uB85C\uACE0\uCE68").setTooltip("\uCE90\uC2DC \uC815\uBCF4\uB97C \uC0C8\uB85C\uACE0\uCE68\uD569\uB2C8\uB2E4").onClick(async () => {
      this.updateCacheInfo(cacheInfoSetting);
      new import_obsidian2.Notice("\uCE90\uC2DC \uC815\uBCF4\uAC00 \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
    }));
  }
  async updateCacheInfo(setting) {
    try {
      if (this.plugin.ttsService && "getCacheInfo" in this.plugin.ttsService) {
        const cacheInfo = await this.plugin.ttsService.getCacheInfo();
        const infoText = `\uD30C\uC77C \uAC1C\uC218: ${cacheInfo.totalFiles}\uAC1C | \uC6A9\uB7C9: ${cacheInfo.formattedSize}`;
        setting.setDesc(`\uD604\uC7AC \uC800\uC7A5\uB41C TTS \uCE90\uC2DC \uD30C\uC77C \uC815\uBCF4 - ${infoText}`);
      } else {
        setting.setDesc("\uD604\uC7AC \uC800\uC7A5\uB41C TTS \uCE90\uC2DC \uD30C\uC77C \uC815\uBCF4 - \uCE90\uC2DC \uC11C\uBE44\uC2A4\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      }
    } catch (error) {
      console.error("\uCE90\uC2DC \uC815\uBCF4 \uC5C5\uB370\uC774\uD2B8 \uC624\uB958:", error);
      setting.setDesc("\uD604\uC7AC \uC800\uC7A5\uB41C TTS \uCE90\uC2DC \uD30C\uC77C \uC815\uBCF4 - \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
    }
  }
  async clearTTSCache() {
    try {
      if (this.plugin.ttsService && "clearCache" in this.plugin.ttsService) {
        return await this.plugin.ttsService.clearCache();
      }
      return false;
    } catch (error) {
      console.error("TTS \uCE90\uC2DC \uC0AD\uC81C \uC624\uB958:", error);
      return false;
    }
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var import_obsidian6 = require("obsidian");

// src/infrastructure/tts/ChatterboxTTSService.ts
var import_obsidian3 = require("obsidian");

// src/shared/AudioManager.ts
var AudioManager = class _AudioManager {
  constructor() {
    this.activeAudioElements = /* @__PURE__ */ new Set();
    this.audioPool = [];
    this.maxPoolSize = 10;
  }
  static getInstance() {
    if (!_AudioManager.instance) {
      _AudioManager.instance = new _AudioManager();
    }
    return _AudioManager.instance;
  }
  // 오디오 요소 생성 및 관리
  createAudio(src) {
    let audio;
    const availableAudio = this.audioPool.find((a) => a.ended || a.paused);
    if (availableAudio) {
      audio = availableAudio;
      audio.src = src;
      audio.currentTime = 0;
    } else {
      audio = new Audio(src);
      this.setupAudioElement(audio);
    }
    this.activeAudioElements.add(audio);
    return audio;
  }
  // 오디오 요소 설정
  setupAudioElement(audio) {
    const cleanup = () => {
      this.releaseAudio(audio);
    };
    audio.addEventListener("ended", cleanup, { once: true });
    audio.addEventListener("error", cleanup, { once: true });
    setTimeout(() => {
      if (this.activeAudioElements.has(audio)) {
        this.releaseAudio(audio);
      }
    }, 3e4);
  }
  // 오디오 재생 (안전한 래퍼)
  async playAudio(src) {
    const audio = this.createAudio(src);
    try {
      await audio.play();
    } catch (error) {
      this.releaseAudio(audio);
      throw error;
    }
  }
  // 오디오 요소 해제
  releaseAudio(audio) {
    if (!this.activeAudioElements.has(audio))
      return;
    if (!audio.paused) {
      audio.pause();
    }
    this.activeAudioElements.delete(audio);
    if (this.audioPool.length < this.maxPoolSize) {
      audio.removeAttribute("src");
      audio.load();
      this.audioPool.push(audio);
    } else {
      this.disposeAudio(audio);
    }
  }
  // 오디오 요소 완전 정리
  disposeAudio(audio) {
    var _a;
    audio.pause();
    audio.removeAttribute("src");
    audio.load();
    const newAudio = audio.cloneNode();
    (_a = audio.parentNode) == null ? void 0 : _a.replaceChild(newAudio, audio);
  }
  // 모든 활성 오디오 정지
  stopAllAudio() {
    this.activeAudioElements.forEach((audio) => {
      if (!audio.paused) {
        audio.pause();
      }
    });
  }
  // 모든 리소스 정리
  cleanup() {
    this.activeAudioElements.forEach((audio) => {
      this.disposeAudio(audio);
    });
    this.activeAudioElements.clear();
    this.audioPool.forEach((audio) => {
      this.disposeAudio(audio);
    });
    this.audioPool.clear();
  }
  // 현재 상태 정보
  getStatus() {
    return {
      active: this.activeAudioElements.size,
      pooled: this.audioPool.length
    };
  }
};
var NetworkResourceManager = class _NetworkResourceManager {
  constructor() {
    this.abortControllers = /* @__PURE__ */ new Set();
    this.activeRequests = /* @__PURE__ */ new Map();
  }
  static getInstance() {
    if (!_NetworkResourceManager.instance) {
      _NetworkResourceManager.instance = new _NetworkResourceManager();
    }
    return _NetworkResourceManager.instance;
  }
  // 네트워크 요청 생성 (자동 정리 포함)
  createRequest(identifier) {
    const controller = new AbortController();
    this.abortControllers.add(controller);
    if (identifier) {
      const existingController = this.activeRequests.get(identifier);
      if (existingController) {
        existingController.abort();
        this.abortControllers.delete(existingController);
      }
      this.activeRequests.set(identifier, controller);
    }
    setTimeout(() => {
      if (this.abortControllers.has(controller)) {
        controller.abort();
        this.cleanup(controller, identifier);
      }
    }, 6e4);
    return controller;
  }
  // 요청 완료 시 정리
  completeRequest(controller, identifier) {
    this.cleanup(controller, identifier);
  }
  // 특정 요청 취소
  cancelRequest(identifier) {
    const controller = this.activeRequests.get(identifier);
    if (controller) {
      controller.abort();
      this.cleanup(controller, identifier);
    }
  }
  // 내부 정리 로직
  cleanup(controller, identifier) {
    this.abortControllers.delete(controller);
    if (identifier) {
      this.activeRequests.delete(identifier);
    }
  }
  // 모든 활성 요청 취소
  cancelAllRequests() {
    this.abortControllers.forEach((controller) => {
      controller.abort();
    });
    this.abortControllers.clear();
    this.activeRequests.clear();
  }
  // Fetch 래퍼 (자동 정리 포함)
  async fetch(url, options = {}, identifier, timeout = 3e4) {
    const controller = this.createRequest(identifier);
    const timeoutId = setTimeout(() => {
      controller.abort();
    }, timeout);
    try {
      const response = await fetch(url, {
        ...options,
        signal: controller.signal
      });
      clearTimeout(timeoutId);
      this.completeRequest(controller, identifier);
      return response;
    } catch (error) {
      clearTimeout(timeoutId);
      this.cleanup(controller, identifier);
      throw error;
    }
  }
  // 현재 상태 정보
  getStatus() {
    return {
      active: this.abortControllers.size,
      identified: this.activeRequests.size
    };
  }
};

// src/infrastructure/tts/ChatterboxTTSService.ts
var ChatterboxTTSService = class {
  constructor(settings) {
    this.audioElement = null;
    this.currentAudioContext = null;
    this.settings = {
      enabled: settings.enabled || false,
      apiUrl: settings.apiUrl || "http://localhost:4123",
      voice: settings.voice || "alloy",
      response_format: settings.response_format || "wav",
      speed: settings.speed || 1,
      exaggeration: settings.exaggeration || 0.25,
      cfgWeight: settings.cfgWeight || 1,
      temperature: settings.temperature || 0.05,
      streaming_chunk_size: settings.streaming_chunk_size || 50,
      streaming_strategy: settings.streaming_strategy || "string",
      streaming_buffer_size: settings.streaming_buffer_size || 1,
      streaming_quality: settings.streaming_quality || "string",
      autoPlay: settings.autoPlay || false
    };
    this.audioManager = AudioManager.getInstance();
    this.networkManager = NetworkResourceManager.getInstance();
  }
  async speakText(text) {
    if (!this.settings.enabled) {
      new import_obsidian3.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!text || text.trim().length === 0) {
      console.warn("TTS: \uBE48 \uD14D\uC2A4\uD2B8\uC785\uB2C8\uB2E4.");
      return;
    }
    try {
      this.stopSpeaking();
      const audioBlob = await this.callChatterboxAPI(text);
      await this.playAudioBlob(audioBlob);
    } catch (error) {
      console.error("Chatterbox TTS \uC624\uB958:", error);
      new import_obsidian3.Notice("TTS \uC74C\uC131 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. Chatterbox TTS \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
    }
  }
  async speakWord(word) {
    if (!word || word.trim().length === 0) {
      console.warn("TTS: \uBE48 \uB2E8\uC5B4\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(word);
  }
  async speakExample(example) {
    if (!example || example.trim().length === 0) {
      console.warn("TTS: \uBE48 \uC608\uBB38\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(example);
  }
  async callChatterboxAPI(text) {
    const truncatedText = text.length > 3e3 ? text.substring(0, 3e3) : text;
    const requestBody = {
      input: truncatedText,
      voice: this.settings.voice,
      response_format: this.settings.response_format,
      speed: this.settings.speed,
      exaggeration: this.settings.exaggeration,
      cfg_weight: this.settings.cfgWeight,
      temperature: this.settings.temperature,
      streaming_chunk_size: this.settings.streaming_chunk_size,
      streaming_strategy: this.settings.streaming_strategy,
      streaming_buffer_size: this.settings.streaming_buffer_size,
      streaming_quality: this.settings.streaming_quality
    };
    const response = await fetch(`${this.settings.apiUrl}/v1/audio/speech`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(requestBody)
    });
    if (!response.ok) {
      throw new Error(`Chatterbox TTS API \uC624\uB958: ${response.status} ${response.statusText}`);
    }
    const contentType = response.headers.get("content-type");
    if (!contentType || !contentType.includes("audio")) {
      throw new Error(`\uC608\uC0C1\uD558\uC9C0 \uBABB\uD55C \uC751\uB2F5 \uD615\uC2DD: ${contentType}`);
    }
    return await response.blob();
  }
  async playAudioBlob(audioBlob) {
    return new Promise((resolve, reject) => {
      try {
        if (this.audioElement) {
          this.audioElement.pause();
          this.audioElement.src = "";
        }
        this.audioElement = new Audio();
        const audioUrl = URL.createObjectURL(audioBlob);
        this.audioElement.src = audioUrl;
        this.audioElement.onended = () => {
          URL.revokeObjectURL(audioUrl);
          resolve();
        };
        this.audioElement.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        this.audioElement.onloadeddata = () => {
          if (this.audioElement) {
            this.audioElement.play().catch((error) => {
              console.error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
              URL.revokeObjectURL(audioUrl);
              reject(error);
            });
          }
        };
        this.audioElement.load();
      } catch (error) {
        reject(error);
      }
    });
  }
  stopSpeaking() {
    if (this.audioElement) {
      this.audioElement.pause();
      this.audioElement.currentTime = 0;
      if (this.audioElement.src && this.audioElement.src.startsWith("blob:")) {
        URL.revokeObjectURL(this.audioElement.src);
      }
      this.audioElement.src = "";
    }
    if (this.currentAudioContext) {
      this.currentAudioContext.close().catch(console.error);
      this.currentAudioContext = null;
    }
  }
  isPaused() {
    return !this.audioElement || this.audioElement.paused;
  }
  resume() {
    if (this.audioElement && this.audioElement.paused) {
      this.audioElement.play().catch((error) => {
        console.error("\uC624\uB514\uC624 \uC7AC\uAC1C \uC2E4\uD328:", error);
        new import_obsidian3.Notice("\uC624\uB514\uC624 \uC7AC\uAC1C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      });
    }
  }
  pause() {
    if (this.audioElement && !this.audioElement.paused) {
      this.audioElement.pause();
    }
  }
  // 설정 업데이트
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  // 연결 테스트
  async testConnection() {
    try {
      const testText = "Hello, this is a test.";
      await this.callChatterboxAPI(testText);
      return true;
    } catch (error) {
      console.error("Chatterbox TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      return false;
    }
  }
  // 사용 가능한 음성 목록 (Chatterbox는 custom voice 지원)
  getAvailableVoices() {
    return [
      "alloy",
      "echo",
      "fable",
      "onyx",
      "nova",
      "shimmer",
      "custom"
      // 사용자 정의 음성
    ];
  }
  // 현재 설정 정보 반환
  getSettings() {
    return { ...this.settings };
  }
  // 리소스 정리
  destroy() {
    this.stopSpeaking();
    this.audioElement = null;
    this.currentAudioContext = null;
  }
};

// src/infrastructure/tts/GoogleCloudTTSService.ts
var import_obsidian5 = require("obsidian");

// src/infrastructure/tts/TTSCacheManager.ts
var import_obsidian4 = require("obsidian");
var TTSCacheManager = class {
  constructor(app) {
    this.cacheFolder = "Vocabulary/cache/tts";
    this.app = app;
    this.initializeCacheFolder();
  }
  async initializeCacheFolder() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.cacheFolder);
      if (folder instanceof import_obsidian4.TFolder) {
        return;
      }
      await this.app.vault.createFolder(this.cacheFolder);
    } catch (error) {
      if (error instanceof Error) {
        const errorMessage = error.message.toLowerCase();
        if (!errorMessage.includes("already exists") && !errorMessage.includes("folder already exists") && !errorMessage.includes("already present")) {
          console.warn("TTS \uCE90\uC2DC \uD3F4\uB354 \uC0DD\uC131 \uC2E4\uD328:", error);
        }
      }
    }
  }
  generateCacheKey(text, settings) {
    const keyData = {
      text: text.trim().toLowerCase(),
      languageCode: settings.languageCode,
      voice: settings.voice,
      speakingRate: settings.speakingRate,
      pitch: settings.pitch
    };
    const keyString = JSON.stringify(keyData);
    const hash = this.simpleHash(keyString);
    const cleanText = this.extractWordForFilename(text);
    return `${cleanText}_${hash}.mp3`;
  }
  extractWordForFilename(text) {
    let cleanText = text.trim().toLowerCase();
    const isLongText = cleanText.length > 50 || cleanText.includes(".") || cleanText.includes(",");
    if (isLongText) {
      const words = cleanText.split(/[\s\.,!?;:]+/).filter((word) => word.length > 0);
      const significantWords = words.slice(0, 3).join("_");
      cleanText = significantWords;
    } else {
      const firstWord = cleanText.split(/[\s\.,!?;:]+/)[0];
      cleanText = firstWord;
    }
    cleanText = cleanText.replace(/[<>:"/\\|?*]/g, "");
    cleanText = cleanText.replace(/[^a-z0-9\-_]/g, "");
    cleanText = cleanText.replace(/_+/g, "_");
    cleanText = cleanText.replace(/^_+|_+$/g, "");
    if (cleanText.length > 30) {
      cleanText = cleanText.substring(0, 30);
      cleanText = cleanText.replace(/_+$/, "");
    }
    if (cleanText.length === 0) {
      cleanText = "tts";
    }
    return cleanText;
  }
  simpleHash(str) {
    let hash = 0;
    if (str.length === 0)
      return hash.toString();
    for (let i = 0; i < str.length; i++) {
      const char = str.charCodeAt(i);
      hash = (hash << 5) - hash + char;
      hash = hash & hash;
    }
    return Math.abs(hash).toString(36);
  }
  getCacheFilePath(cacheKey) {
    return (0, import_obsidian4.normalizePath)(`${this.cacheFolder}/${cacheKey}`);
  }
  async getCachedAudio(text, settings) {
    try {
      const cacheKey = this.generateCacheKey(text, settings);
      const filePath = this.getCacheFilePath(cacheKey);
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian4.TFile) {
        const arrayBuffer = await this.app.vault.readBinary(file);
        console.log(`TTS \uCE90\uC2DC \uD788\uD2B8: "${text.substring(0, 50)}${text.length > 50 ? "..." : ""}" \u2192 ${cacheKey}`);
        return arrayBuffer;
      }
      return null;
    } catch (error) {
      console.warn("TTS \uCE90\uC2DC \uB85C\uB4DC \uC2E4\uD328:", error);
      return null;
    }
  }
  async setCachedAudio(text, settings, base64Audio) {
    try {
      await this.initializeCacheFolder();
      const cacheKey = this.generateCacheKey(text, settings);
      const filePath = this.getCacheFilePath(cacheKey);
      const binaryString = atob(base64Audio);
      const bytes = new Uint8Array(binaryString.length);
      for (let i = 0; i < binaryString.length; i++) {
        bytes[i] = binaryString.charCodeAt(i);
      }
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian4.TFile) {
        await this.app.vault.modifyBinary(existingFile, bytes.buffer);
      } else {
        await this.app.vault.createBinary(filePath, bytes.buffer);
      }
      console.log(`TTS \uCE90\uC2DC \uC800\uC7A5: "${text.substring(0, 50)}${text.length > 50 ? "..." : ""}" \u2192 ${cacheKey}`);
    } catch (error) {
      console.error("TTS \uCE90\uC2DC \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  async getCacheInfo() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.cacheFolder);
      if (!(folder instanceof import_obsidian4.TFolder)) {
        return {
          totalFiles: 0,
          totalSize: 0,
          formattedSize: "0 B"
        };
      }
      let totalFiles = 0;
      let totalSize = 0;
      for (const file of folder.children) {
        if (file instanceof import_obsidian4.TFile && file.extension === "mp3") {
          totalFiles++;
          totalSize += file.stat.size;
        }
      }
      return {
        totalFiles,
        totalSize,
        formattedSize: this.formatFileSize(totalSize)
      };
    } catch (error) {
      console.error("TTS \uCE90\uC2DC \uC815\uBCF4 \uC870\uD68C \uC2E4\uD328:", error);
      return {
        totalFiles: 0,
        totalSize: 0,
        formattedSize: "0 B"
      };
    }
  }
  async clearCache() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.cacheFolder);
      if (!(folder instanceof import_obsidian4.TFolder)) {
        return true;
      }
      const filesToDelete = folder.children.filter(
        (file) => file instanceof import_obsidian4.TFile && file.extension === "mp3"
      );
      for (const file of filesToDelete) {
        await this.app.fileManager.trashFile(file);
      }
      console.log(`TTS \uCE90\uC2DC \uC0AD\uC81C \uC644\uB8CC: ${filesToDelete.length}\uAC1C \uD30C\uC77C`);
      return true;
    } catch (error) {
      console.error("TTS \uCE90\uC2DC \uC0AD\uC81C \uC2E4\uD328:", error);
      return false;
    }
  }
  formatFileSize(bytes) {
    if (bytes === 0)
      return "0 B";
    const k = 1024;
    const sizes = ["B", "KB", "MB", "GB"];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
  }
  // 캐시 폴더 경로 업데이트
  updateCacheFolder(vocabularyFolderPath) {
    this.cacheFolder = `${vocabularyFolderPath}/cache/tts`;
    this.initializeCacheFolder();
  }
  // 캐시 통계 (개발/디버깅용)
  async getCacheStats() {
    return {
      hitCount: 0,
      missCount: 0,
      hitRate: 0
    };
  }
};

// src/infrastructure/tts/GoogleCloudTTSService.ts
var GoogleCloudTTSService = class {
  constructor(app, settings) {
    this.settings = {
      enabled: (settings == null ? void 0 : settings.enabled) || false,
      apiKey: (settings == null ? void 0 : settings.apiKey) || "",
      voice: (settings == null ? void 0 : settings.voice) || "en-US-Journey-F",
      languageCode: (settings == null ? void 0 : settings.languageCode) || "en-US",
      speakingRate: (settings == null ? void 0 : settings.speakingRate) || 1,
      pitch: (settings == null ? void 0 : settings.pitch) || 0,
      autoPlay: (settings == null ? void 0 : settings.autoPlay) || false,
      cacheEnabled: (settings == null ? void 0 : settings.cacheEnabled) !== false
    };
    this.audioManager = AudioManager.getInstance();
    this.networkManager = NetworkResourceManager.getInstance();
    this.cacheManager = new TTSCacheManager(app);
  }
  async speakText(text) {
    if (!this.settings.enabled) {
      new import_obsidian5.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!this.settings.apiKey) {
      new import_obsidian5.Notice("Google Cloud TTS API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!text || text.trim().length === 0) {
      console.warn("TTS: \uBE48 \uD14D\uC2A4\uD2B8\uC785\uB2C8\uB2E4.");
      return;
    }
    try {
      this.stopSpeaking();
      let audioData;
      if (this.settings.cacheEnabled) {
        const cacheSettings = {
          languageCode: this.settings.languageCode,
          voice: this.settings.voice,
          speakingRate: this.settings.speakingRate,
          pitch: this.settings.pitch
        };
        const cachedAudio = await this.cacheManager.getCachedAudio(text, cacheSettings);
        if (cachedAudio) {
          await this.playAudioBuffer(cachedAudio);
          return;
        }
      }
      audioData = await this.callGoogleCloudAPI(text);
      if (this.settings.cacheEnabled) {
        const cacheSettings = {
          languageCode: this.settings.languageCode,
          voice: this.settings.voice,
          speakingRate: this.settings.speakingRate,
          pitch: this.settings.pitch
        };
        await this.cacheManager.setCachedAudio(text, cacheSettings, audioData);
      }
      await this.playAudioData(audioData);
    } catch (error) {
      console.error("Google Cloud TTS \uC624\uB958:", error);
      new import_obsidian5.Notice("TTS \uC74C\uC131 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uC640 \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
    }
  }
  async speakWord(word) {
    if (!word || word.trim().length === 0) {
      console.warn("TTS: \uBE48 \uB2E8\uC5B4\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(word);
  }
  async speakExample(example) {
    if (!example || example.trim().length === 0) {
      console.warn("TTS: \uBE48 \uC608\uBB38\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(example);
  }
  async callGoogleCloudAPI(text) {
    const truncatedText = text.length > 5e3 ? text.substring(0, 5e3) : text;
    const requestBody = {
      input: {
        text: truncatedText
      },
      voice: {
        languageCode: this.settings.languageCode,
        name: this.settings.voice
      },
      audioConfig: {
        audioEncoding: "MP3",
        speakingRate: this.settings.speakingRate,
        pitch: this.settings.pitch
      }
    };
    const response = await this.networkManager.fetch(
      `https://texttospeech.googleapis.com/v1/text:synthesize?key=${this.settings.apiKey}`,
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(requestBody)
      },
      `google-tts-${Date.now()}`,
      // 고유 식별자
      1e4
      // 10초 타임아웃
    );
    if (!response.ok) {
      const errorData = await response.json().catch(() => ({}));
      const errorMessage = this.getDetailedErrorMessage(response.status, errorData);
      throw new Error(errorMessage);
    }
    const data = await response.json();
    return data.audioContent;
  }
  getDetailedErrorMessage(status, errorData) {
    var _a, _b, _c, _d;
    if (errorData == null ? void 0 : errorData.error) {
      const error = errorData.error;
      if (status === 403 && ((_a = error.details) == null ? void 0 : _a.some(
        (detail) => {
          var _a2;
          return detail.reason === "API_KEY_SERVICE_BLOCKED" || ((_a2 = detail["@type"]) == null ? void 0 : _a2.includes("ErrorInfo")) && detail.reason === "API_KEY_SERVICE_BLOCKED";
        }
      ))) {
        return "Google Cloud Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. Google Cloud Console\uC5D0\uC11C Text-to-Speech API\uB97C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 403) {
        if (((_b = error.message) == null ? void 0 : _b.includes("API key not valid")) || error.code === "INVALID_ARGUMENT") {
          return "Google Cloud API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. API \uD0A4\uB97C \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        if (((_c = error.message) == null ? void 0 : _c.includes("quota")) || ((_d = error.message) == null ? void 0 : _d.includes("QUOTA_EXCEEDED"))) {
          return "Google Cloud TTS API \uD560\uB2F9\uB7C9\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD560\uB2F9\uB7C9\uC744 \uD655\uC778\uD558\uAC70\uB098 \uC694\uAE08\uC81C\uB97C \uBCC0\uACBD\uD574\uC8FC\uC138\uC694.";
        }
        return "Google Cloud TTS API \uC811\uADFC\uC774 \uAC70\uBD80\uB418\uC5C8\uC2B5\uB2C8\uB2E4. API \uD0A4 \uAD8C\uD55C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 401) {
        return "Google Cloud API \uD0A4 \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uAC00 \uC62C\uBC14\uB978\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 400) {
        return "Google Cloud TTS API \uC694\uCCAD\uC774 \uC798\uBABB\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC74C\uC131 \uC124\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 503) {
        return "Google Cloud TTS \uC11C\uBE44\uC2A4\uAC00 \uC77C\uC2DC\uC801\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
      }
      return `Google Cloud TTS API \uC624\uB958 (${status}): ${error.message || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`;
    }
    return `Google Cloud TTS API \uC624\uB958: ${status} \uC0C1\uD0DC \uCF54\uB4DC`;
  }
  async playAudioData(base64Audio) {
    return new Promise((resolve, reject) => {
      try {
        const audioBlob = this.base64ToBlob(base64Audio, "audio/mp3");
        const audioUrl = URL.createObjectURL(audioBlob);
        const audio = this.audioManager.createAudio(audioUrl);
        const cleanup = () => {
          URL.revokeObjectURL(audioUrl);
          this.audioManager.releaseAudio(audio);
        };
        audio.onended = () => {
          cleanup();
          resolve();
        };
        audio.onerror = () => {
          cleanup();
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.onloadeddata = () => {
          audio.play().catch((error) => {
            console.error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
            cleanup();
            reject(error);
          });
        };
        setTimeout(() => {
          if (!audio.ended && !audio.paused) {
            cleanup();
            reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2DC\uAC04 \uCD08\uACFC"));
          }
        }, 3e4);
      } catch (error) {
        reject(error);
      }
    });
  }
  async playAudioBuffer(audioBuffer) {
    return new Promise((resolve, reject) => {
      try {
        const audioBlob = new Blob([audioBuffer], { type: "audio/mp3" });
        const audioUrl = URL.createObjectURL(audioBlob);
        const audio = this.audioManager.createAudio(audioUrl);
        const cleanup = () => {
          URL.revokeObjectURL(audioUrl);
          this.audioManager.releaseAudio(audio);
        };
        audio.onended = () => {
          cleanup();
          resolve();
        };
        audio.onerror = () => {
          cleanup();
          reject(new Error("\uCE90\uC2DC\uB41C \uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.onloadeddata = () => {
          audio.play().catch((error) => {
            console.error("\uCE90\uC2DC\uB41C \uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
            cleanup();
            reject(error);
          });
        };
        setTimeout(() => {
          if (!audio.ended && !audio.paused) {
            cleanup();
            reject(new Error("\uCE90\uC2DC\uB41C \uC624\uB514\uC624 \uC7AC\uC0DD \uC2DC\uAC04 \uCD08\uACFC"));
          }
        }, 3e4);
      } catch (error) {
        reject(error);
      }
    });
  }
  base64ToBlob(base64, mimeType) {
    const byteCharacters = atob(base64);
    const byteNumbers = new Array(byteCharacters.length);
    for (let i = 0; i < byteCharacters.length; i++) {
      byteNumbers[i] = byteCharacters.charCodeAt(i);
    }
    const byteArray = new Uint8Array(byteNumbers);
    return new Blob([byteArray], { type: mimeType });
  }
  stopSpeaking() {
    this.audioManager.stopAllAudio();
  }
  isPaused() {
    const status = this.audioManager.getStatus();
    return status.active === 0;
  }
  resume() {
    new import_obsidian5.Notice("\uC74C\uC131\uC744 \uB2E4\uC2DC \uC7AC\uC0DD\uD558\uB824\uBA74 \uBC84\uD2BC\uC744 \uB2E4\uC2DC \uD074\uB9AD\uD574\uC8FC\uC138\uC694.");
  }
  pause() {
    this.stopSpeaking();
  }
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  // 리소스 정리
  cleanup() {
    this.audioManager.cleanup();
    this.networkManager.cancelAllRequests();
  }
  async testConnection() {
    try {
      const testText = "Hello, this is a test.";
      await this.callGoogleCloudAPI(testText);
      return true;
    } catch (error) {
      console.error("Google Cloud TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      return false;
    }
  }
  getAvailableVoices() {
    return [
      "en-US-Journey-D",
      "en-US-Journey-F",
      "en-US-Journey-O",
      "en-US-Neural2-A",
      "en-US-Neural2-C",
      "en-US-Neural2-D",
      "en-US-Neural2-E",
      "en-US-Neural2-F",
      "en-US-Neural2-G",
      "en-US-Neural2-H",
      "en-US-Neural2-I",
      "en-US-Neural2-J",
      "en-US-Standard-A",
      "en-US-Standard-B",
      "en-US-Standard-C",
      "en-US-Standard-D",
      "en-US-Standard-E",
      "en-US-Standard-F",
      "en-US-Standard-G",
      "en-US-Standard-H",
      "en-US-Standard-I",
      "en-US-Standard-J",
      "en-GB-Neural2-A",
      "en-GB-Neural2-B",
      "en-GB-Neural2-C",
      "en-GB-Neural2-D",
      "en-GB-Neural2-F",
      "en-AU-Neural2-A",
      "en-AU-Neural2-B",
      "en-AU-Neural2-C",
      "en-AU-Neural2-D"
    ];
  }
  getSettings() {
    return { ...this.settings };
  }
  destroy() {
    this.stopSpeaking();
  }
  // 캐시 관리 메서드들
  async getCacheInfo() {
    return await this.cacheManager.getCacheInfo();
  }
  async clearCache() {
    return await this.cacheManager.clearCache();
  }
  updateCacheFolder(vocabularyFolderPath) {
    this.cacheManager.updateCacheFolder(vocabularyFolderPath);
  }
};

// src/infrastructure/tts/TTSService.ts
var TTSServiceFactory = class {
  static createTTSService(app, settings) {
    if (!settings || !settings.ttsEnabled) {
      return new NoOpTTSService();
    }
    if (settings.ttsProvider === "google-cloud") {
      const googleSettings = {
        enabled: settings.ttsEnabled,
        apiKey: decryptApiKey(settings.googleCloudTTSApiKey),
        voice: settings.ttsVoice,
        languageCode: settings.googleCloudTTSLanguageCode,
        speakingRate: settings.googleCloudTTSSpeakingRate,
        pitch: settings.googleCloudTTSPitch,
        autoPlay: settings.ttsAutoPlay,
        cacheEnabled: settings.ttsCacheEnabled
      };
      return new GoogleCloudTTSService(app, googleSettings);
    } else {
      const chatterboxSettings = {
        enabled: settings.ttsEnabled,
        apiUrl: settings.chatterboxApiUrl,
        voice: settings.ttsVoice,
        response_format: "wav",
        speed: 1,
        exaggeration: settings.chatterboxExaggeration,
        cfgWeight: settings.chatterboxCfgWeight,
        temperature: settings.chatterboxTemperature,
        streaming_chunk_size: 50,
        streaming_strategy: "string",
        streaming_buffer_size: 1,
        streaming_quality: "string",
        autoPlay: settings.ttsAutoPlay
      };
      return new ChatterboxTTSService(chatterboxSettings);
    }
  }
};
var NoOpTTSService = class {
  async speakText(text) {
  }
  async speakWord(word) {
  }
  async speakExample(example) {
  }
  stopSpeaking() {
  }
  isPaused() {
    return true;
  }
  resume() {
  }
  pause() {
  }
  async testConnection() {
    return false;
  }
  getAvailableVoices() {
    return [];
  }
  destroy() {
  }
};

// src/core/algorithms/SpacedRepetitionAlgorithm.ts
var QUALITY_SCORES = {
  ["hard" /* Hard */]: 1,
  ["good" /* Good */]: 2,
  ["easy" /* Easy */]: 3
};
var DEFAULT_SRS_SETTINGS = {
  // SM-2 Algorithm Settings
  initialEFactor: 2.5,
  // SM-2 표준 초기 E-Factor
  minimumEFactor: 1.3,
  // SM-2 표준 최소 E-Factor
  maximumInterval: 36525,
  // ~100년
  // Load Balancing Settings
  loadBalance: true,
  maxFuzzingDays: 3,
  // Legacy compatibility (will be converted)
  baseEase: 250,
  // 2.5 * 100
  easyBonus: 1.3,
  hardPenalty: 0.5,
  minimumEase: 130,
  // 1.3 * 100
  initialInterval: 1
};
var SpacedRepetitionAlgorithm = class {
  constructor(settings = DEFAULT_SRS_SETTINGS) {
    this.dueDateHistogram = /* @__PURE__ */ new Map();
    this.settings = settings;
  }
  /**
   * Calculate the next review schedule based on user response
   * Implements the SM-2 algorithm according to learning_algorithm.md specification
   */
  schedule(response, currentSchedule) {
    const now = /* @__PURE__ */ new Date();
    const q = QUALITY_SCORES[response];
    if (!currentSchedule) {
      currentSchedule = {
        dueDate: now.toISOString(),
        interval: 0,
        ease: Math.round(this.settings.initialEFactor * 100),
        // E-Factor를 100으로 곱해서 저장
        reviewCount: 0,
        lapseCount: 0,
        delayedDays: 0,
        repetition: 0
      };
    }
    let currentEFactor = currentSchedule.ease / 100;
    let newRepetition = currentSchedule.repetition;
    const delta = 0.1 - (3 - q) * (0.08 + (3 - q) * 0.02);
    let newEFactor = currentEFactor + delta;
    newEFactor = Math.max(this.settings.minimumEFactor, newEFactor);
    if (q >= 2) {
      newRepetition = currentSchedule.repetition + 1;
    } else {
      newRepetition = 0;
    }
    let newInterval;
    if (q < 2) {
      newInterval = 1;
    } else {
      if (newRepetition === 1) {
        newInterval = 1;
      } else if (newRepetition === 2) {
        newInterval = 6;
      } else {
        newInterval = Math.round(currentSchedule.interval * newEFactor);
      }
    }
    newInterval = Math.min(newInterval, this.settings.maximumInterval);
    newInterval = Math.max(1, newInterval);
    if (this.settings.loadBalance) {
      newInterval = this.applyLoadBalancing(newInterval);
    }
    const newDueDate = new Date(now.getTime() + newInterval * 24 * 60 * 60 * 1e3);
    this.updateDueDateHistogram(newDueDate.toDateString());
    return {
      interval: newInterval,
      ease: Math.round(newEFactor * 100),
      // E-Factor를 100으로 곱해서 반환
      dueDate: newDueDate.toISOString(),
      repetition: newRepetition
    };
  }
  /**
   * Apply load balancing to distribute reviews evenly across days
   * Based on the histogram-based approach from obsidian-spaced-repetition
   */
  applyLoadBalancing(interval) {
    if (!this.settings.loadBalance) {
      return interval;
    }
    let fuzzingRange;
    if (interval <= 21) {
      fuzzingRange = 1;
    } else if (interval <= 180) {
      fuzzingRange = Math.max(1, interval * 0.05);
    } else {
      fuzzingRange = Math.max(1, interval * 0.025);
    }
    fuzzingRange = Math.min(fuzzingRange, this.settings.maxFuzzingDays);
    const now = /* @__PURE__ */ new Date();
    let bestInterval = interval;
    let minReviews = Number.MAX_SAFE_INTEGER;
    for (let offset = -fuzzingRange; offset <= fuzzingRange; offset++) {
      const testInterval = interval + offset;
      if (testInterval < 1)
        continue;
      const testDate = new Date(now.getTime() + testInterval * 24 * 60 * 60 * 1e3);
      const dateString = testDate.toDateString();
      const reviewCount = this.dueDateHistogram.get(dateString) || 0;
      if (reviewCount < minReviews) {
        minReviews = reviewCount;
        bestInterval = testInterval;
      }
    }
    return bestInterval;
  }
  /**
   * Update the due date histogram for load balancing
   */
  updateDueDateHistogram(dateString) {
    const current = this.dueDateHistogram.get(dateString) || 0;
    this.dueDateHistogram.set(dateString, current + 1);
  }
  /**
   * Get cards that are due for review
   */
  static getCardsForReview(cards) {
    const now = /* @__PURE__ */ new Date();
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= now;
    });
  }
  /**
   * Calculate the number of cards due in the next N days
   */
  static getCardsDueInDays(cards, days) {
    const now = /* @__PURE__ */ new Date();
    const futureDate = new Date(now.getTime() + days * 24 * 60 * 60 * 1e3);
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= futureDate;
    }).length;
  }
  /**
   * Get learning statistics for a set of cards
   */
  static getStatistics(cards) {
    let newCards = 0;
    let learningCards = 0;
    let matureCards = 0;
    let totalEase = 0;
    let totalInterval = 0;
    let cardsWithSchedule = 0;
    cards.forEach((card) => {
      if (!card.scheduleInfo) {
        newCards++;
      } else {
        cardsWithSchedule++;
        totalEase += card.scheduleInfo.ease;
        totalInterval += card.scheduleInfo.interval;
        if (card.scheduleInfo.interval < 21) {
          learningCards++;
        } else {
          matureCards++;
        }
      }
    });
    return {
      total: cards.length,
      new: newCards,
      learning: learningCards,
      mature: matureCards,
      averageEase: cardsWithSchedule > 0 ? Math.round(totalEase / cardsWithSchedule) : 0,
      averageInterval: cardsWithSchedule > 0 ? Math.round(totalInterval / cardsWithSchedule) : 0
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  /**
   * Get current settings
   */
  getSettings() {
    return { ...this.settings };
  }
  /**
   * Clear the due date histogram (useful for testing or reset)
   */
  clearHistogram() {
    this.dueDateHistogram.clear();
  }
};

// src/core/services/SpacedRepetitionService.ts
var SpacedRepetitionService = class {
  constructor(settings = {}) {
    this.currentSession = null;
    const srsSettings = { ...DEFAULT_SRS_SETTINGS, ...settings };
    this.algorithm = new SpacedRepetitionAlgorithm(srsSettings);
  }
  /**
   * Get cards that are due for review today
   */
  getCardsForReview(allCards) {
    return SpacedRepetitionAlgorithm.getCardsForReview(allCards);
  }
  /**
   * Get new cards (never reviewed)
   */
  getNewCards(allCards) {
    return allCards.filter((card) => !card.scheduleInfo || card.reviewCount === 0);
  }
  /**
   * Get learning cards (reviewed but not mature)
   */
  getLearningCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.reviewCount > 0 && card.scheduleInfo.interval < 21
    );
  }
  /**
   * Get mature cards (interval >= 21 days)
   */
  getMatureCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.scheduleInfo.interval >= 21
    );
  }
  /**
   * Start a new review session
   */
  startReviewSession(dueCards, maxCards) {
    const cardsToReview = maxCards ? dueCards.slice(0, maxCards) : dueCards;
    this.currentSession = {
      sessionId: this.generateSessionId(),
      startTime: (/* @__PURE__ */ new Date()).toISOString(),
      cardsReviewed: 0,
      totalCards: cardsToReview.length,
      completedCards: [],
      currentCard: cardsToReview[0],
      remainingCards: cardsToReview
      // Add remaining cards to track progress
    };
    return this.currentSession;
  }
  /**
   * Process a review response and get the next card
   */
  processReview(card, response) {
    var _a, _b, _c, _d;
    if (!this.currentSession) {
      throw new Error("No active review session");
    }
    const reviewResult = this.algorithm.schedule(response, card.scheduleInfo);
    const updatedCard = {
      ...card,
      reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
      difficulty: response,
      lastReviewed: (/* @__PURE__ */ new Date()).toISOString(),
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.reviewCount) || 0) + 1,
        lapseCount: (((_c = card.scheduleInfo) == null ? void 0 : _c.lapseCount) || 0) + (response === "hard" /* Hard */ ? 1 : 0),
        delayedDays: ((_d = card.scheduleInfo) == null ? void 0 : _d.delayedDays) || 0,
        repetition: reviewResult.repetition
      }
    };
    this.currentSession.cardsReviewed++;
    this.currentSession.completedCards.push(updatedCard);
    const remainingCards = this.currentSession.remainingCards || [];
    const nextCard = this.currentSession.cardsReviewed < remainingCards.length ? remainingCards[this.currentSession.cardsReviewed] : void 0;
    this.currentSession.currentCard = nextCard;
    const sessionComplete = !nextCard || this.currentSession.cardsReviewed >= this.currentSession.totalCards;
    if (sessionComplete) {
      this.endReviewSession();
    }
    return {
      updatedCard,
      nextCard,
      sessionComplete
    };
  }
  /**
   * End the current review session
   */
  endReviewSession() {
    const session = this.currentSession;
    this.currentSession = null;
    return session;
  }
  /**
   * Get current session info
   */
  getCurrentSession() {
    return this.currentSession;
  }
  /**
   * Calculate study statistics
   */
  calculateStatistics(allCards, studyHistory) {
    const now = /* @__PURE__ */ new Date();
    const today = now.toDateString();
    const overallStats = SpacedRepetitionAlgorithm.getStatistics(allCards);
    const todayStats = {
      newCards: 0,
      // Would track from session data
      reviewedCards: 0,
      // Would track from session data
      totalTime: 0
      // Would track from session timing
    };
    const streakStats = {
      currentDays: 0,
      // Would calculate from study history
      longestDays: 0,
      // Would calculate from study history
      lastStudyDate: null
    };
    return {
      today: todayStats,
      streak: streakStats,
      overall: overallStats
    };
  }
  /**
   * Get cards due in the next N days
   */
  getCardsDueInDays(allCards, days) {
    return SpacedRepetitionAlgorithm.getCardsDueInDays(allCards, days);
  }
  /**
   * Reset a card's schedule (for testing or manual intervention)
   */
  resetCardSchedule(card) {
    return {
      ...card,
      reviewCount: 0,
      lastReviewed: null,
      scheduleInfo: void 0
    };
  }
  /**
   * Manually set card difficulty (for bulk operations)
   */
  setCardDifficulty(card, difficulty) {
    var _a, _b;
    const reviewResult = this.algorithm.schedule(difficulty, card.scheduleInfo);
    return {
      ...card,
      difficulty,
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
        lapseCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.lapseCount) || 0) + (difficulty === "hard" /* Hard */ ? 1 : 0),
        delayedDays: 0,
        repetition: reviewResult.repetition
      }
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(settings) {
    this.algorithm.updateSettings(settings);
  }
  /**
   * Get current algorithm settings
   */
  getSettings() {
    return this.algorithm.getSettings();
  }
  /**
   * Generate a unique session ID
   */
  generateSessionId() {
    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * Get recommended daily study load
   */
  getRecommendedDailyCards(allCards) {
    const dueCards = this.getCardsForReview(allCards);
    const newCards = this.getNewCards(allCards);
    const maxNewCardsPerDay = 20;
    const maxReviewCardsPerDay = 100;
    const recommendedNew = Math.min(newCards.length, maxNewCardsPerDay);
    const recommendedReview = Math.min(dueCards.length - recommendedNew, maxReviewCardsPerDay);
    return {
      newCards: recommendedNew,
      reviewCards: recommendedReview,
      total: recommendedNew + recommendedReview
    };
  }
  /**
   * Export cards for data analysis or backup
   */
  exportScheduleData(allCards) {
    return allCards.map((card) => ({
      word: card.word,
      reviewCount: card.reviewCount,
      difficulty: card.difficulty,
      lastReviewed: card.lastReviewed,
      scheduleInfo: card.scheduleInfo,
      addedDate: card.addedDate
    }));
  }
  /**
   * Get the next review intervals for each difficulty level
   * Shows the exact SM-2 algorithm results with E-Factor information
   */
  getNextReviewIntervals(card) {
    const hardResult = this.algorithm.schedule("hard" /* Hard */, card.scheduleInfo);
    const goodResult = this.algorithm.schedule("good" /* Good */, card.scheduleInfo);
    const easyResult = this.algorithm.schedule("easy" /* Easy */, card.scheduleInfo);
    return {
      hard: {
        interval: hardResult.interval,
        displayText: this.formatInterval(hardResult.interval),
        eFactor: hardResult.ease / 100,
        // Convert back to E-Factor
        repetition: hardResult.repetition
      },
      good: {
        interval: goodResult.interval,
        displayText: this.formatInterval(goodResult.interval),
        eFactor: goodResult.ease / 100,
        repetition: goodResult.repetition
      },
      easy: {
        interval: easyResult.interval,
        displayText: this.formatInterval(easyResult.interval),
        eFactor: easyResult.ease / 100,
        repetition: easyResult.repetition
      }
    };
  }
  /**
   * Format interval as human-readable text
   */
  formatInterval(days) {
    if (days < 1) {
      return "today";
    } else if (days === 1) {
      return "1 day";
    } else if (days < 30) {
      return `${days} day${days > 1 ? "s" : ""}`;
    } else if (days < 365) {
      const months = Math.round(days / 30 * 10) / 10;
      return `${months} month${months > 1 ? "s" : ""}`;
    } else {
      const years = Math.round(days / 365 * 10) / 10;
      return `${years} year${years > 1 ? "s" : ""}`;
    }
  }
  /**
   * Get detailed SM-2 algorithm statistics
   */
  getSM2Statistics(allCards) {
    const stats = {
      overview: { totalCards: 0, newCards: 0, learningCards: 0, matureCards: 0 },
      repetitions: { rep0: 0, rep1: 0, rep2: 0, rep3Plus: 0 },
      eFactors: { average: 0, distribution: [] },
      intervals: { average: 0, distribution: [] }
    };
    let totalEFactor = 0;
    let totalInterval = 0;
    let cardsWithSchedule = 0;
    const eFactorBuckets = /* @__PURE__ */ new Map();
    const intervalBuckets = /* @__PURE__ */ new Map();
    allCards.forEach((card) => {
      stats.overview.totalCards++;
      if (!card.scheduleInfo) {
        stats.overview.newCards++;
        stats.repetitions.rep0++;
      } else {
        cardsWithSchedule++;
        const repetition = card.scheduleInfo.repetition || 0;
        const eFactor = card.scheduleInfo.ease / 100;
        const interval = card.scheduleInfo.interval;
        totalEFactor += eFactor;
        totalInterval += interval;
        if (repetition === 1)
          stats.repetitions.rep1++;
        else if (repetition === 2)
          stats.repetitions.rep2++;
        else if (repetition >= 3)
          stats.repetitions.rep3Plus++;
        else
          stats.repetitions.rep0++;
        if (interval >= 21) {
          stats.overview.matureCards++;
        } else {
          stats.overview.learningCards++;
        }
        const eFactorRange = this.getEFactorRange(eFactor);
        eFactorBuckets.set(eFactorRange, (eFactorBuckets.get(eFactorRange) || 0) + 1);
        const intervalRange = this.getIntervalRange(interval);
        intervalBuckets.set(intervalRange, (intervalBuckets.get(intervalRange) || 0) + 1);
      }
    });
    stats.eFactors.average = cardsWithSchedule > 0 ? Math.round(totalEFactor / cardsWithSchedule * 100) / 100 : 0;
    stats.intervals.average = cardsWithSchedule > 0 ? Math.round(totalInterval / cardsWithSchedule) : 0;
    stats.eFactors.distribution = Array.from(eFactorBuckets.entries()).map(([range, count]) => ({ range, count })).sort((a, b) => parseFloat(a.range.split("-")[0]) - parseFloat(b.range.split("-")[0]));
    stats.intervals.distribution = Array.from(intervalBuckets.entries()).map(([range, count]) => ({ range, count })).sort((a, b) => this.compareIntervalRanges(a.range, b.range));
    return stats;
  }
  /**
   * Get E-Factor range for grouping
   */
  getEFactorRange(eFactor) {
    if (eFactor < 1.5)
      return "1.3-1.5";
    if (eFactor < 2)
      return "1.5-2.0";
    if (eFactor < 2.5)
      return "2.0-2.5";
    if (eFactor < 3)
      return "2.5-3.0";
    if (eFactor < 3.5)
      return "3.0-3.5";
    return "3.5+";
  }
  /**
   * Get interval range for grouping
   */
  getIntervalRange(interval) {
    if (interval === 1)
      return "1 day";
    if (interval <= 6)
      return "2-6 days";
    if (interval <= 20)
      return "7-20 days";
    if (interval <= 60)
      return "21-60 days";
    if (interval <= 180)
      return "2-6 months";
    if (interval <= 365)
      return "6-12 months";
    return "1+ years";
  }
  /**
   * Compare interval ranges for sorting
   */
  compareIntervalRanges(a, b) {
    const order = ["1 day", "2-6 days", "7-20 days", "21-60 days", "2-6 months", "6-12 months", "1+ years"];
    return order.indexOf(a) - order.indexOf(b);
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var VocabularyModal = class extends import_obsidian6.Modal {
  constructor(app, plugin) {
    super(app);
    this.currentCardIndex = 0;
    this.cards = [];
    this.showAnswer = false;
    this.keydownHandler = null;
    this.currentSession = null;
    this.plugin = plugin;
    this.ttsService = TTSServiceFactory.createTTSService(app, plugin.settings);
    this.spacedRepetitionService = new SpacedRepetitionService();
  }
  onOpen() {
    const allCards = this.plugin.databaseManager.getAllWords();
    this.cards = this.spacedRepetitionService.getCardsForReview(allCards);
    if (this.cards.length === 0) {
      this.showNoCardsForReview(allCards.length);
      return;
    }
    this.currentSession = this.spacedRepetitionService.startReviewSession(this.cards);
    this.shuffleCards();
    this.currentCardIndex = 0;
    this.showAnswer = false;
    this.showCard();
    this.keydownHandler = (e) => {
      if (!this.showAnswer) {
        if (e.code === "Space" || e.key === " ") {
          e.preventDefault();
          this.showAnswer = true;
          this.showCard();
        }
      } else {
        if (e.key === "1") {
          this.handleReview("hard");
        } else if (e.key === "2") {
          this.handleReview("good");
        } else if (e.key === "3") {
          this.handleReview("easy");
        }
      }
    };
    window.addEventListener("keydown", this.keydownHandler);
  }
  shuffleCards() {
    for (let i = this.cards.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [this.cards[i], this.cards[j]] = [this.cards[j], this.cards[i]];
    }
  }
  showNoWordsMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noWordsEl = contentEl.createEl("div", { cls: "no-words-message" });
    noWordsEl.createEl("h2", { text: "\uD559\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4" });
    noWordsEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    const closeButton = noWordsEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showNoCardsForReview(totalCards) {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noReviewEl = contentEl.createEl("div", { cls: "no-review-message" });
    noReviewEl.createEl("h2", { text: "\u{1F389} \uC624\uB298\uC758 \uBCF5\uC2B5 \uC644\uB8CC!" });
    if (totalCards > 0) {
      const stats = this.spacedRepetitionService.calculateStatistics(this.plugin.databaseManager.getAllWords());
      noReviewEl.createEl("p", {
        text: `\uCD1D ${totalCards}\uAC1C\uC758 \uB2E8\uC5B4 \uC911 \uC624\uB298 \uBCF5\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`
      });
      const nextDueCards = this.spacedRepetitionService.getCardsDueInDays(
        this.plugin.databaseManager.getAllWords(),
        1
      );
      if (nextDueCards > 0) {
        noReviewEl.createEl("p", {
          text: `\uB0B4\uC77C \uBCF5\uC2B5 \uC608\uC815: ${nextDueCards}\uAC1C \uB2E8\uC5B4`
        });
      }
      const statsEl = noReviewEl.createEl("div", { cls: "study-stats" });
      statsEl.createEl("h3", { text: "\uD559\uC2B5 \uD604\uD669" });
      statsEl.createEl("p", { text: `\u2022 \uC0C8 \uB2E8\uC5B4: ${stats.overall.newCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uD559\uC2B5 \uC911: ${stats.overall.learningCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uC644\uB8CC: ${stats.overall.matureCards}\uAC1C` });
    } else {
      noReviewEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    }
    const closeButton = noReviewEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showCard() {
    if (this.currentCardIndex >= this.cards.length) {
      this.showCompletionMessage();
      return;
    }
    const currentCard = this.cards[this.currentCardIndex];
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const cardContainer = contentEl.createEl("div", { cls: "vocabulary-card" });
    const topInfoContainer = cardContainer.createEl("div", { cls: "card-top-info" });
    const currentBook = this.plugin.databaseManager.getCurrentBook();
    if (currentBook) {
      const bookInfoEl = topInfoContainer.createEl("div", { cls: "book-info-display" });
      bookInfoEl.createEl("span", {
        text: currentBook.name,
        cls: "current-book-name"
      });
    }
    const deleteButton = topInfoContainer.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const progressEl = cardContainer.createEl("div", { cls: "progress-indicator" });
    progressEl.textContent = `${this.currentCardIndex + 1} / ${this.cards.length}`;
    const wordContainer = cardContainer.createEl("div", { cls: "word-container" });
    const wordEl = wordContainer.createEl("h1", { cls: "card-word" });
    if (currentCard.pronunciation && currentCard.pronunciation.trim()) {
      wordEl.textContent = currentCard.word;
      wordEl.appendText(" ");
      wordEl.createEl("span", {
        text: `[${currentCard.pronunciation}]`,
        cls: "pronunciation"
      });
    } else {
      wordEl.textContent = currentCard.word;
    }
    const wordPlayButton = wordContainer.createEl("button", {
      cls: "tts-play-button word-play-button",
      attr: { "aria-label": "\uB2E8\uC5B4 \uBC1C\uC74C \uB4E3\uAE30" }
    });
    wordPlayButton.textContent = "\u{1F50A}";
    wordPlayButton.addEventListener("click", () => {
      this.ttsService.speakWord(currentCard.word);
    });
    if (currentCard.similarWords && currentCard.similarWords.length > 0) {
      const similarSection = cardContainer.createEl("div", { cls: "similar-words-section" });
      similarSection.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
      const similarList = similarSection.createEl("ul", { cls: "similar-words-list" });
      currentCard.similarWords.forEach((word) => {
        similarList.createEl("li", { text: word });
      });
    }
    if (currentCard.examples && currentCard.examples.length > 0) {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      currentCard.examples.forEach((example, index) => {
        const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
        const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
        const englishExample = exampleTextContainer.createEl("p", { text: example.english });
        englishExample.addClass("english-example");
        const examplePlayButton = exampleTextContainer.createEl("button", {
          cls: "tts-play-button example-play-button",
          attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
        });
        examplePlayButton.textContent = "\u{1F50A}";
        examplePlayButton.addEventListener("click", () => {
          this.ttsService.speakExample(example.english);
        });
        if (this.showAnswer && example.korean && example.korean.trim()) {
          const koreanExample = exampleContainer.createEl("p", { text: example.korean });
          koreanExample.addClass("korean-example");
        }
      });
    } else {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
      const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
      const englishExample = exampleTextContainer.createEl("p", {
        text: `This is an example sentence with the word "${currentCard.word}".`
      });
      englishExample.addClass("english-example");
      const examplePlayButton = exampleTextContainer.createEl("button", {
        cls: "tts-play-button example-play-button",
        attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
      });
      examplePlayButton.textContent = "\u{1F50A}";
      examplePlayButton.addEventListener("click", () => {
        this.ttsService.speakExample(`This is an example sentence with the word "${currentCard.word}".`);
      });
      if (this.showAnswer) {
        const koreanExample = exampleContainer.createEl("p", {
          text: `"${currentCard.word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        });
        koreanExample.addClass("korean-example");
      }
    }
    if (!this.showAnswer) {
      const checkButton = cardContainer.createEl("button", { text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30" });
      checkButton.addClass("check-answer-button");
      checkButton.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCard();
      });
    } else {
      const answerSection = cardContainer.createEl("div", { cls: "answer-section" });
      answerSection.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerSection.createEl("ul", { cls: "meanings-list" });
      currentCard.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      this.createReviewButtons(cardContainer);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons-section" });
    const currentCard = this.cards[this.currentCardIndex];
    const intervals = this.spacedRepetitionService.getNextReviewIntervals(currentCard);
    const hardButton = reviewSection.createEl("button");
    hardButton.addClass("review-button", "hard-button");
    const hardContent = hardButton.createEl("div", { cls: "button-content" });
    hardContent.createEl("span", { text: "\uC5B4\uB824\uC6C0", cls: "button-label" });
    hardContent.createEl("span", { text: intervals.hard.displayText, cls: "button-interval" });
    hardButton.addEventListener("click", () => this.handleReview("hard"));
    const goodButton = reviewSection.createEl("button");
    goodButton.addClass("review-button", "good-button");
    const goodContent = goodButton.createEl("div", { cls: "button-content" });
    goodContent.createEl("span", { text: "\uC88B\uC74C", cls: "button-label" });
    goodContent.createEl("span", { text: intervals.good.displayText, cls: "button-interval" });
    goodButton.addEventListener("click", () => this.handleReview("good"));
    const easyButton = reviewSection.createEl("button");
    easyButton.addClass("review-button", "easy-button");
    const easyContent = easyButton.createEl("div", { cls: "button-content" });
    easyContent.createEl("span", { text: "\uC26C\uC6C0", cls: "button-label" });
    easyContent.createEl("span", { text: intervals.easy.displayText, cls: "button-interval" });
    easyButton.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentCard = this.cards[this.currentCardIndex];
    const activeSession = this.spacedRepetitionService.getCurrentSession();
    if (!activeSession) {
      console.error("No active review session in SpacedRepetitionService");
      const remainingCards = this.cards.slice(this.currentCardIndex);
      if (remainingCards.length > 0) {
        this.currentSession = this.spacedRepetitionService.startReviewSession(remainingCards);
      } else {
        console.error("No remaining cards to review");
        return;
      }
    }
    const reviewResponse = difficulty;
    try {
      const result = this.spacedRepetitionService.processReview(currentCard, reviewResponse);
      await this.plugin.databaseManager.updateWordWithSchedule(
        result.updatedCard.word,
        difficulty,
        result.updatedCard.scheduleInfo
      );
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    } catch (error) {
      console.error("Error processing spaced repetition review:", error);
      await this.plugin.databaseManager.updateWord(currentCard.word, difficulty);
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    }
  }
  async handleDeleteCard() {
    const currentCard = this.cards[this.currentCardIndex];
    const confirmModal = new ConfirmModal(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentCard.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentCard.word);
          this.cards.splice(this.currentCardIndex, 1);
          if (this.cards.length === 0) {
            this.showCompletionMessage();
            return;
          }
          if (this.currentCardIndex >= this.cards.length) {
            this.currentCardIndex = this.cards.length - 1;
          }
          this.showAnswer = false;
          this.showCard();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian6.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletionMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const completionEl = contentEl.createEl("div", { cls: "completion-message" });
    completionEl.createEl("h2", { text: "\uD559\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: `\uC624\uB298 ${this.cards.length}\uAC1C\uC758 \uB2E8\uC5B4 \uD559\uC2B5\uC744 \uC644\uB8CC\uD588\uC2B5\uB2C8\uB2E4.` });
    const restartButton = completionEl.createEl("button", { text: "\uB2E4\uC2DC \uD559\uC2B5\uD558\uAE30" });
    restartButton.addClass("restart-button");
    restartButton.addEventListener("click", () => {
      this.onOpen();
    });
    const closeButton = completionEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => {
      this.close();
    });
  }
  onClose() {
    if (this.keydownHandler) {
      window.removeEventListener("keydown", this.keydownHandler);
      this.keydownHandler = null;
    }
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal = class extends import_obsidian6.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var import_obsidian9 = require("obsidian");

// src/infrastructure/external/WordService.ts
var WordService = class {
  constructor() {
    this.apiBaseUrl = "https://api.dictionaryapi.dev/api/v2/entries/en";
  }
  async getWordData(word) {
    try {
      return this.getSampleWordData(word);
    } catch (error) {
      console.error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
      throw new Error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
  }
  getSampleWordData(word) {
    const sampleData = {
      "beautiful": {
        word: "beautiful",
        pronunciation: "/\u02C8bju\u02D0t\u026Af\u0259l/",
        meanings: ["\uC544\uB984\uB2E4\uC6B4", "\uC608\uC05C", "\uD6CC\uB96D\uD55C"],
        similarWords: ["pretty", "gorgeous", "stunning", "attractive"],
        examples: [
          {
            english: "She is a beautiful woman.",
            korean: "\uADF8\uB140\uB294 \uC544\uB984\uB2E4\uC6B4 \uC5EC\uC131\uC785\uB2C8\uB2E4."
          },
          {
            english: "The sunset was beautiful.",
            korean: "\uC77C\uBAB0\uC774 \uC544\uB984\uB2E4\uC6E0\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "What a beautiful day!",
            korean: "\uC815\uB9D0 \uC544\uB984\uB2E4\uC6B4 \uD558\uB8E8\uB124\uC694!"
          }
        ]
      },
      "happy": {
        word: "happy",
        pronunciation: "/\u02C8h\xE6pi/",
        meanings: ["\uD589\uBCF5\uD55C", "\uAE30\uC05C", "\uC990\uAC70\uC6B4"],
        similarWords: ["joyful", "cheerful", "glad", "pleased"],
        examples: [
          {
            english: "I am happy to see you.",
            korean: "\uB2F9\uC2E0\uC744 \uB9CC\uB098\uC11C \uAE30\uC069\uB2C8\uB2E4."
          },
          {
            english: "She has a happy family.",
            korean: "\uADF8\uB140\uB294 \uD589\uBCF5\uD55C \uAC00\uC871\uC744 \uAC00\uC9C0\uACE0 \uC788\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Happy birthday!",
            korean: "\uC0DD\uC77C \uCD95\uD558\uD569\uB2C8\uB2E4!"
          }
        ]
      },
      "learn": {
        word: "learn",
        pronunciation: "/l\u025C\u02D0rn/",
        meanings: ["\uBC30\uC6B0\uB2E4", "\uD559\uC2B5\uD558\uB2E4", "\uC775\uD788\uB2E4"],
        similarWords: ["study", "acquire", "grasp", "understand"],
        examples: [
          {
            english: "I want to learn English.",
            korean: "\uC800\uB294 \uC601\uC5B4\uB97C \uBC30\uC6B0\uACE0 \uC2F6\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Children learn quickly.",
            korean: "\uC544\uC774\uB4E4\uC740 \uBE68\uB9AC \uBC30\uC6C1\uB2C8\uB2E4."
          },
          {
            english: "You can learn from your mistakes.",
            korean: "\uC2E4\uC218\uB85C\uBD80\uD130 \uBC30\uC6B8 \uC218 \uC788\uC2B5\uB2C8\uB2E4."
          }
        ]
      }
    };
    if (sampleData[word.toLowerCase()]) {
      return sampleData[word.toLowerCase()];
    }
    return {
      word,
      pronunciation: "/pronunciation/",
      meanings: ["\uC758\uBBF8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
      similarWords: [],
      examples: [
        {
          english: `This is an example sentence with the word "${word}".`,
          korean: `"${word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        }
      ]
    };
  }
  // 실제 API 호출을 위한 메서드 (향후 구현)
  async fetchFromAPI(word) {
    const response = await fetch(`${this.apiBaseUrl}/${word}`);
    if (!response.ok) {
      throw new Error(`API \uC694\uCCAD \uC2E4\uD328: ${response.status}`);
    }
    return await response.json();
  }
};

// src/features/book-management/ui/AddBookModal.ts
var import_obsidian7 = require("obsidian");
var AddBookModal = class extends import_obsidian7.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-book-modal");
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uC0C8\uB85C\uC6B4 \uB2E8\uC5B4\uC7A5\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const formEl = contentEl.createEl("form", { cls: "book-form" });
    const nameSection = formEl.createEl("div", { cls: "form-section" });
    const nameLabel = nameSection.createEl("label", {
      text: "\uB2E8\uC5B4\uC7A5 \uC774\uB984 *",
      cls: "form-label"
    });
    const nameInput = nameSection.createEl("input", {
      type: "text",
      placeholder: "\uC608: TOEIC \uB2E8\uC5B4\uC7A5, \uC77C\uC0C1\uC0DD\uD65C \uB2E8\uC5B4\uC7A5",
      cls: "form-input"
    });
    nameInput.required = true;
    const descSection = formEl.createEl("div", { cls: "form-section" });
    const descLabel = descSection.createEl("label", {
      text: "\uC124\uBA85 (\uC120\uD0DD\uC0AC\uD56D)",
      cls: "form-label"
    });
    const descInput = descSection.createEl("textarea", {
      placeholder: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB300\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694.",
      cls: "form-textarea"
    });
    descInput.rows = 3;
    const buttonSection = formEl.createEl("div", { cls: "button-section" });
    const createButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uC0DD\uC131",
      cls: "create-button primary",
      type: "submit"
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button",
      type: "button"
    });
    cancelButton.addEventListener("click", () => this.close());
    formEl.addEventListener("submit", async (e) => {
      e.preventDefault();
      await this.createBook(nameInput.value.trim(), descInput.value.trim());
    });
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        formEl.dispatchEvent(new Event("submit"));
      }
    });
    nameInput.focus();
  }
  async createBook(name, description) {
    if (!name.trim()) {
      new import_obsidian7.Notice("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    try {
      const existingBooks = this.plugin.databaseManager.getAllBooks();
      const isDuplicate = existingBooks.some(
        (book) => book.name && typeof book.name === "string" && book.name.toLowerCase() === name.toLowerCase()
      );
      if (isDuplicate) {
        new import_obsidian7.Notice("\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4.");
        return;
      }
      const newBook = await this.plugin.databaseManager.createBook(name, description);
      new import_obsidian7.Notice(`"${name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
      this.close();
      const event = new CustomEvent("bookCreated", { detail: newBook });
      document.dispatchEvent(event);
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131 \uC2E4\uD328:", error);
      new import_obsidian7.Notice("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/word-management/ui/AddWordsModal.ts
var import_obsidian8 = require("obsidian");

// src/shared/validation.ts
function validateString(input, options = {}) {
  const {
    minLength = 0,
    maxLength = 1e3,
    allowEmpty = false,
    pattern,
    fieldName = "\uC785\uB825\uAC12"
  } = options;
  if (!input || input.trim().length === 0) {
    if (allowEmpty) {
      return { isValid: true, sanitized: "" };
    }
    return { isValid: false, error: `${fieldName}\uC740(\uB294) \uD544\uC218 \uC785\uB825\uAC12\uC785\uB2C8\uB2E4.` };
  }
  const trimmed = input.trim();
  if (trimmed.length < minLength) {
    return {
      isValid: false,
      error: `${fieldName}\uC740(\uB294) \uCD5C\uC18C ${minLength}\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.`
    };
  }
  if (trimmed.length > maxLength) {
    return {
      isValid: false,
      error: `${fieldName}\uC740(\uB294) \uCD5C\uB300 ${maxLength}\uC790 \uC774\uD558\uC5EC\uC57C \uD569\uB2C8\uB2E4.`
    };
  }
  if (pattern && !pattern.test(trimmed)) {
    return {
      isValid: false,
      error: `${fieldName}\uC758 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.`
    };
  }
  return { isValid: true, sanitized: trimmed };
}
function validateWord(word) {
  const validation = validateString(word, {
    minLength: 1,
    maxLength: 50,
    pattern: /^[a-zA-Z\s'-]+$/,
    fieldName: "\uB2E8\uC5B4"
  });
  if (!validation.isValid) {
    return validation;
  }
  const sanitized = validation.sanitized.replace(/[^\w\s'-]/g, "").replace(/\s+/g, " ");
  return { isValid: true, sanitized };
}
function sanitizeMarkdown(text) {
  if (!text)
    return "";
  return text.replace(/<script[^>]*>[\s\S]*?<\/script>/gi, "").replace(/<iframe[^>]*>[\s\S]*?<\/iframe>/gi, "").replace(/javascript:/gi, "").replace(/on\w+\s*=/gi, "").trim();
}
function validateBatch(items, validator) {
  const valid = [];
  const invalid = [];
  for (const item of items) {
    const result = validator(item);
    if (result.isValid) {
      valid.push(item);
    } else {
      invalid.push({ item, error: result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958" });
    }
  }
  return { valid, invalid };
}

// src/shared/CancellationToken.ts
var CancellationTokenSource = class {
  constructor() {
    this._isCancelled = false;
    this._callbacks = [];
  }
  get token() {
    return {
      get isCancelled() {
        return this._isCancelled;
      },
      throwIfCancelled: () => {
        if (this._isCancelled) {
          throw new CancellationError("Operation was cancelled");
        }
      },
      onCancelled: (callback) => {
        if (this._isCancelled) {
          callback();
        } else {
          this._callbacks.push(callback);
        }
      }
    };
  }
  cancel() {
    if (this._isCancelled)
      return;
    this._isCancelled = true;
    this._callbacks.forEach((callback) => {
      try {
        callback();
      } catch (error) {
        console.error("Error in cancellation callback:", error);
      }
    });
    this._callbacks.length = 0;
  }
  dispose() {
    this._callbacks.length = 0;
  }
};
var CancellationError = class extends Error {
  constructor(message = "Operation was cancelled") {
    super(message);
    this.name = "CancellationError";
  }
};
function delay(ms, cancellationToken) {
  return new Promise((resolve, reject) => {
    if (cancellationToken == null ? void 0 : cancellationToken.isCancelled) {
      reject(new CancellationError());
      return;
    }
    const timeoutId = setTimeout(() => {
      resolve();
    }, ms);
    cancellationToken == null ? void 0 : cancellationToken.onCancelled(() => {
      clearTimeout(timeoutId);
      reject(new CancellationError());
    });
  });
}
async function withCancellation(promise, cancellationToken) {
  if (!cancellationToken) {
    return promise;
  }
  return new Promise((resolve, reject) => {
    if (cancellationToken.isCancelled) {
      reject(new CancellationError());
      return;
    }
    let isResolved = false;
    promise.then(
      (value) => {
        if (!isResolved) {
          isResolved = true;
          resolve(value);
        }
      },
      (error) => {
        if (!isResolved) {
          isResolved = true;
          reject(error);
        }
      }
    );
    cancellationToken.onCancelled(() => {
      if (!isResolved) {
        isResolved = true;
        reject(new CancellationError());
      }
    });
  });
}
async function processBatchWithCancellation(items, processor, options = {}) {
  const {
    batchSize = 10,
    delay: delayMs = 100,
    cancellationToken,
    onProgress
  } = options;
  const results = [];
  for (let i = 0; i < items.length; i += batchSize) {
    cancellationToken == null ? void 0 : cancellationToken.throwIfCancelled();
    const batch = items.slice(i, i + batchSize);
    const batchPromises = batch.map(
      (item, batchIndex) => processor(item, i + batchIndex)
    );
    try {
      const batchResults = await withCancellation(
        Promise.all(batchPromises),
        cancellationToken
      );
      results.push(...batchResults);
      onProgress == null ? void 0 : onProgress(Math.min(i + batchSize, items.length), items.length);
      if (i + batchSize < items.length && delayMs > 0) {
        await delay(delayMs, cancellationToken);
      }
    } catch (error) {
      if (error instanceof CancellationError) {
        throw error;
      }
      throw error;
    }
  }
  return results;
}

// src/features/word-management/ui/AddWordsModal.ts
var AddWordsModal = class extends import_obsidian8.Modal {
  constructor(app, plugin, selectedBookId) {
    super(app);
    this.isProcessing = false;
    this.cancellationTokenSource = null;
    this.plugin = plugin;
    this.wordService = new WordService();
    this.selectedBookId = selectedBookId || "default";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-words-modal");
    await this.plugin.databaseManager.loadAllBooks();
    const bookSelectSection = contentEl.createEl("div", { cls: "book-select-section" });
    const bookLabel = bookSelectSection.createEl("label", { text: "\uB2E8\uC5B4\uC7A5 \uC120\uD0DD", cls: "book-select-label" });
    const bookSelectContainer = bookSelectSection.createEl("div", { cls: "book-select-container" });
    this.bookSelect = bookSelectContainer.createEl("select", { cls: "book-select-dropdown" });
    const addBookButton = bookSelectContainer.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00",
      cls: "add-book-button"
    });
    addBookButton.addEventListener("click", () => this.openAddBookModal());
    await this.updateBookSelect();
    this.bookSelect.addEventListener("change", (e) => {
      const selectedBookId = e.target.value;
      this.selectedBookId = selectedBookId;
      this.plugin.databaseManager.setCurrentBook(selectedBookId);
    });
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uCD94\uAC00\uD560 \uC601\uB2E8\uC5B4\uB4E4\uC744 \uC785\uB825\uD558\uC138\uC694. \uAC01 \uB2E8\uC5B4\uB294 \uC0C8 \uC904\uB85C \uAD6C\uBD84\uB429\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const inputSection = contentEl.createEl("div", { cls: "input-section" });
    const textarea = inputSection.createEl("textarea", {
      placeholder: "beautiful\nhappy\nlearn\nstudy\nwork\n...",
      cls: "words-textarea"
    });
    textarea.setAttribute("rows", "10");
    const exampleBtn = inputSection.createEl("button", {
      text: "\uC608\uC2DC \uB2E8\uC5B4\uB4E4 \uBD88\uB7EC\uC624\uAE30",
      cls: "example-button"
    });
    exampleBtn.addEventListener("click", () => {
      textarea.value = "beautiful\nhappy\nlearn\nstudy\nwork\nimportant\nsuccess\nknowledge\nexperience\nfreedom";
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const addButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button primary"
    });
    addButton.addEventListener("click", () => this.addWords(textarea.value, this.selectedBookId));
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      if (this.isProcessing) {
        this.cancelOperation();
      } else {
        this.close();
      }
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section display-none" });
    const progressText = progressSection.createEl("p", {
      text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911...",
      cls: "progress-text"
    });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section display-none" });
    textarea.addEventListener("keydown", (e) => {
      if (e.ctrlKey && e.key === "Enter") {
        this.addWords(textarea.value, this.selectedBookId);
      }
    });
    textarea.focus();
  }
  async addWords(inputText, bookId) {
    var _a;
    if (this.isProcessing)
      return;
    const words = this.parseWords(inputText);
    if (words.length === 0) {
      new import_obsidian8.Notice("\uCD94\uAC00\uD560 \uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    this.isProcessing = true;
    this.cancellationTokenSource = new CancellationTokenSource();
    this.showProgress(words.length);
    this.updateCancelButton(true);
    const results = {
      success: [],
      failed: [],
      alreadyExists: []
    };
    try {
      await processBatchWithCancellation(
        words,
        async (word, index) => {
          const existingWord = this.plugin.databaseManager.getWord(word);
          if (existingWord) {
            results.alreadyExists.push(word);
            return;
          }
          try {
            const wordData = await this.wordService.getWordData(word);
            const vocabularyCard = {
              ...wordData,
              reviewCount: 0,
              difficulty: "good",
              lastReviewed: null,
              addedDate: (/* @__PURE__ */ new Date()).toISOString(),
              bookId
            };
            await this.plugin.databaseManager.addWord(vocabularyCard);
            results.success.push(word);
          } catch (error) {
            results.failed.push(word);
            console.error(`\uB2E8\uC5B4 "${word}" \uCD94\uAC00 \uC2E4\uD328:`, error);
          }
        },
        {
          batchSize: getConfigValue(CONFIG_PATHS.BATCH_DEFAULT_SIZE),
          delay: getConfigValue(CONFIG_PATHS.BATCH_DELAY),
          cancellationToken: this.cancellationTokenSource.token,
          onProgress: (current, total) => {
            this.updateProgress(current, total, `\uCC98\uB9AC \uC911... (${current}/${total})`);
          }
        }
      );
    } catch (error) {
      if (error instanceof CancellationError) {
        new import_obsidian8.Notice("\uC791\uC5C5\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
      } else {
        console.error("\uBC30\uCE58 \uCC98\uB9AC \uC911 \uC624\uB958:", error);
        new import_obsidian8.Notice("\uB2E8\uC5B4 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      }
    } finally {
      this.isProcessing = false;
      (_a = this.cancellationTokenSource) == null ? void 0 : _a.dispose();
      this.cancellationTokenSource = null;
      this.hideProgress();
      this.updateCancelButton(false);
      this.showResults(results);
    }
  }
  parseWords(inputText) {
    const sanitizedInput = sanitizeMarkdown(inputText);
    const rawWords = sanitizedInput.split("\n").map((word) => word.trim()).filter((word) => word.length > 0);
    const validation = validateBatch(rawWords, (word) => validateWord(word));
    if (validation.invalid.length > 0) {
      const invalidWords = validation.invalid.slice(0, 5).map((item) => item.item).join(", ");
      const moreCount = validation.invalid.length > 5 ? ` \uC678 ${validation.invalid.length - 5}\uAC1C` : "";
      new import_obsidian8.Notice(`\uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uB2E8\uC5B4\uAC00 \uC81C\uC678\uB418\uC5C8\uC2B5\uB2C8\uB2E4: ${invalidWords}${moreCount}`);
    }
    const validWords = validation.valid.map((word) => validateWord(word).sanitized).map((word) => word.toLowerCase()).filter((word, index, array) => array.indexOf(word) === index);
    return validWords;
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.removeClass("display-none");
    progressSection.addClass("display-block");
    progressText.textContent = `\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911... (0/${totalWords})`;
  }
  updateProgress(current, total, message) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    const progressFill = progressSection.querySelector(".progress-fill");
    const percentage = current / total * 100;
    progressText.textContent = `${message} (${current}/${total})`;
    progressFill.style.width = `${percentage}%`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    progressSection.removeClass("display-block");
    progressSection.addClass("display-none");
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.removeClass("display-none");
    resultSection.addClass("display-block");
    resultSection.empty();
    const totalProcessed = results.success.length + results.failed.length + results.alreadyExists.length;
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 5) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.alreadyExists.length > 0) {
      const existsEl = summaryEl.createEl("div", { cls: "result-item warning" });
      existsEl.createEl("span", {
        text: `\u26A0\uFE0F \uC774\uBBF8 \uC874\uC7AC: ${results.alreadyExists.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.alreadyExists.length <= 5) {
        existsEl.createEl("p", {
          text: results.alreadyExists.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 5) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", {
      text: "\uB2EB\uAE30",
      cls: "close-button"
    });
    closeButton.addEventListener("click", () => this.close());
    const addMoreButton = buttonSection.createEl("button", {
      text: "\uB354 \uCD94\uAC00\uD558\uAE30",
      cls: "add-more-button"
    });
    addMoreButton.addEventListener("click", () => {
      resultSection.removeClass("display-block");
      resultSection.addClass("display-none");
      const textarea = this.contentEl.querySelector(".words-textarea");
      textarea.value = "";
      textarea.focus();
    });
    if (results.success.length > 0) {
      new import_obsidian8.Notice(`${results.success.length}\uAC1C\uC758 \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
    }
  }
  cancelOperation() {
    if (this.cancellationTokenSource) {
      this.cancellationTokenSource.cancel();
      new import_obsidian8.Notice("\uC791\uC5C5 \uCDE8\uC18C \uC911...");
    }
  }
  updateCancelButton(isProcessing) {
    const cancelButton = this.contentEl.querySelector(".cancel-button");
    if (cancelButton) {
      cancelButton.textContent = isProcessing ? "\uC791\uC5C5 \uCDE8\uC18C" : "\uCDE8\uC18C";
      cancelButton.classList.toggle("danger", isProcessing);
    }
  }
  onClose() {
    var _a;
    if (this.isProcessing && this.cancellationTokenSource) {
      this.cancellationTokenSource.cancel();
    }
    this.isProcessing = false;
    (_a = this.cancellationTokenSource) == null ? void 0 : _a.dispose();
    this.cancellationTokenSource = null;
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  openAddBookModal() {
    new AddBookModal(this.app, this.plugin).open();
  }
  async handleBookCreated(event) {
    await this.updateBookSelect();
  }
  async updateBookSelect() {
    await this.plugin.databaseManager.loadAllBooks();
    const books = this.plugin.databaseManager.getAllBooks();
    this.bookSelect.empty();
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      if (book.id === this.selectedBookId) {
        option.selected = true;
      }
      this.bookSelect.appendChild(option);
    });
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var VocabularyManagerModal = class extends import_obsidian9.Modal {
  constructor(app, plugin) {
    var _a;
    super(app);
    this.currentView = "list";
    this.selectedWords = /* @__PURE__ */ new Set();
    this.selectedBookId = "";
    this.plugin = plugin;
    this.databaseManager = plugin.databaseManager;
    this.wordService = new WordService();
    this.llmService = plugin.llmService;
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
  }
  hasValidApiKey() {
    const provider = this.plugin.settings.llmProvider;
    switch (provider) {
      case "openai":
        return !!this.plugin.settings.openaiApiKey;
      case "anthropic":
        return !!this.plugin.settings.anthropicApiKey;
      case "google":
        return !!this.plugin.settings.googleApiKey;
      default:
        return false;
    }
  }
  async onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-manager-modal");
    contentEl.classList.add("wide-manager-modal");
    await this.databaseManager.loadAllBooks();
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
    this.createBookSelectorHeader();
    this.createNavigation();
    this.showCurrentView();
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  async handleBookCreated(event) {
    const newBook = event.detail;
    this.selectedBookId = newBook.id;
    await this.refreshBookSelector();
  }
  createBookSelectorHeader() {
    const headerEl = this.contentEl.createEl("div", { cls: "manager-header" });
    const books = this.databaseManager.getAllBooks();
    const bookSelect = headerEl.createEl("select", { cls: "book-select-dropdown" });
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      if (book.id === this.selectedBookId)
        option.selected = true;
      bookSelect.appendChild(option);
    });
    bookSelect.addEventListener("change", async (e) => {
      this.selectedBookId = e.target.value;
      await this.databaseManager.setCurrentBook(this.selectedBookId);
      this.showCurrentView();
    });
    const addBookBtn = headerEl.createEl("button", { text: "\uC0C8 \uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "book-manage-button" });
    addBookBtn.addEventListener("click", () => {
      const addBookModal = new AddBookModal(this.app, this.plugin);
      addBookModal.onClose = () => {
        this.refreshBookSelector();
      };
      addBookModal.open();
    });
    const delBookBtn = headerEl.createEl("button", { text: "\uD604\uC7AC \uB2E8\uC5B4\uC7A5 \uC0AD\uC81C", cls: "book-delete-button" });
    const isDefault = this.selectedBookId === "default";
    if (isDefault) {
      delBookBtn.setAttr("disabled", "true");
      delBookBtn.addClass("disabled");
    }
    delBookBtn.addEventListener("click", async () => {
      if (isDefault)
        return;
      const currentBook = this.databaseManager.getBook(this.selectedBookId);
      if (!currentBook) {
        new import_obsidian9.Notice("\uB2E8\uC5B4\uC7A5 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      const wordsInBook = this.databaseManager.getWordsByBook(this.selectedBookId);
      const wordCount = wordsInBook.length;
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uD655\uC778",
        `\uC815\uB9D0\uB85C "${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\u2022 \uB2E8\uC5B4\uC7A5 \uC774\uB984: ${currentBook.name}
\u2022 \uD3EC\uD568\uB41C \uB2E8\uC5B4 \uC218: ${wordCount}\uAC1C
\u2022 \uC0DD\uC131\uC77C: ${new Date(currentBook.createdAt).toLocaleDateString("ko-KR")}

\u26A0\uFE0F \uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC73C\uBA70, \uB2E8\uC5B4\uC7A5\uACFC \uBAA8\uB4E0 \uB2E8\uC5B4\uAC00 \uC601\uAD6C\uC801\uC73C\uB85C \uC0AD\uC81C\uB429\uB2C8\uB2E4.`,
        async () => {
          try {
            await this.databaseManager.deleteBook(this.selectedBookId);
            this.selectedBookId = "default";
            await this.databaseManager.setCurrentBook("default");
            new import_obsidian9.Notice(`"${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`);
            this.onOpen();
          } catch (e) {
            new import_obsidian9.Notice("\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uC2E4\uD328: " + e.message);
          }
        }
      );
      confirmModal.open();
    });
  }
  createNavigation() {
    const navEl = this.contentEl.createEl("div", { cls: "manager-navigation" });
    const listBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uBAA9\uB85D", cls: "nav-button" });
    listBtn.addEventListener("click", () => {
      this.currentView = "list";
      this.showCurrentView();
    });
    const statsBtn = navEl.createEl("button", { text: "\uD1B5\uACC4", cls: "nav-button" });
    statsBtn.addEventListener("click", () => {
      this.currentView = "statistics";
      this.showCurrentView();
    });
    const addBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "nav-button" });
    addBtn.addEventListener("click", () => {
      this.close();
      new AddWordsModal(this.app, this.plugin, this.selectedBookId).open();
    });
    const startLearningButton = navEl.createEl("button", {
      text: "\uC804\uCCB4 \uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      cls: "nav-button"
    });
    startLearningButton.addEventListener("click", () => {
      this.close();
      new VocabularyModal(this.app, this.plugin).open();
    });
  }
  showCurrentView() {
    const contentEl = this.contentEl.querySelector(".manager-content") || this.contentEl.createEl("div", { cls: "manager-content" });
    contentEl.empty();
    switch (this.currentView) {
      case "list":
        this.showWordList(contentEl);
        break;
      case "statistics":
        this.showStatistics(contentEl);
        break;
      case "add":
        this.showAddWord(contentEl);
        break;
    }
  }
  showWordList(container2) {
    const words = this.databaseManager.getAllWords();
    if (words.length === 0) {
      container2.createEl("p", {
        text: "\uB2E8\uC5B4\uC7A5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4. \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD574\uBCF4\uC138\uC694!",
        cls: "empty-message"
      });
      return;
    }
    const searchEl = container2.createEl("div", { cls: "search-section" });
    const searchInput = searchEl.createEl("input", {
      type: "text",
      placeholder: "\uB2E8\uC5B4 \uAC80\uC0C9...",
      cls: "search-input"
    });
    const selectionControls = searchEl.createEl("div", { cls: "selection-controls" });
    const allSelected = this.selectedWords.size === words.length && words.length > 0;
    const selectAllBtn = selectionControls.createEl("button", {
      text: allSelected ? "\uC804\uCCB4 \uD574\uC81C" : "\uC804\uCCB4 \uC120\uD0DD",
      cls: "selection-button"
    });
    selectAllBtn.addEventListener("click", () => {
      if (this.selectedWords.size === words.length) {
        this.selectedWords.clear();
      } else {
        this.selectedWords.clear();
        words.forEach((word) => this.selectedWords.add(word.word));
      }
      this.showCurrentView();
    });
    const fetchSelectedButton = selectionControls.createEl("button", {
      text: "\uC120\uD0DD \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-selected-button"
    });
    fetchSelectedButton.addEventListener("click", () => {
      if (this.selectedWords.size === 0) {
        new import_obsidian9.Notice("\uC120\uD0DD\uB41C \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      this.showFetchSelectedMeaningsModal();
    });
    const wordListEl = container2.createEl("div", { cls: "word-list" });
    const renderWords = (filteredWords) => {
      wordListEl.empty();
      filteredWords.forEach((word) => {
        this.createWordItem(wordListEl, word);
      });
    };
    searchInput.addEventListener("input", (e) => {
      const query = e.target.value;
      const filteredWords = query ? this.databaseManager.searchWords(query) : words;
      renderWords(filteredWords);
    });
    renderWords(words);
  }
  createWordItem(container2, word) {
    const wordEl = container2.createEl("div", { cls: "word-item" });
    const checkbox = wordEl.createEl("input", {
      type: "checkbox",
      cls: "word-checkbox"
    });
    checkbox.checked = this.selectedWords.has(word.word);
    checkbox.addEventListener("change", (e) => {
      const isChecked = e.target.checked;
      if (isChecked) {
        this.selectedWords.add(word.word);
      } else {
        this.selectedWords.delete(word.word);
      }
    });
    const wordHeader = wordEl.createEl("div", { cls: "word-header" });
    const wordTitleEl = wordHeader.createEl("h3", { cls: "word-title" });
    if (word.pronunciation && word.pronunciation.trim()) {
      wordTitleEl.textContent = word.word;
      wordTitleEl.appendText(" ");
      wordTitleEl.createEl("span", {
        text: `[${word.pronunciation}]`,
        cls: "pronunciation"
      });
    } else {
      wordTitleEl.textContent = word.word;
    }
    const difficultyBadge = wordHeader.createEl("span", {
      text: this.getDifficultyText(word.difficulty),
      cls: `difficulty-badge ${word.difficulty}`
    });
    const wordContent = wordEl.createEl("div", { cls: "word-content" });
    wordContent.createEl("p", {
      text: `\uB73B: ${word.meanings.join(", ")}`,
      cls: "word-meanings"
    });
    wordContent.createEl("p", {
      text: `\uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}\uD68C`,
      cls: "review-count"
    });
    if (word.lastReviewed) {
      wordContent.createEl("p", {
        text: `\uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${formatDate(word.lastReviewed)}`,
        cls: "last-reviewed"
      });
    }
    const wordActions = wordEl.createEl("div", { cls: "word-actions" });
    if (this.plugin.settings.enableAdvancedFeatures) {
      const fetchButton = wordActions.createEl("button", {
        text: "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
        cls: "action-button fetch-single-button"
      });
      fetchButton.addEventListener("click", () => {
        this.fetchSingleWordMeaning(word);
      });
    }
    const deleteBtn = wordActions.createEl("button", {
      text: "\uC0AD\uC81C",
      cls: "action-button delete-button"
    });
    deleteBtn.addEventListener("click", async () => {
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4 \uC0AD\uC81C",
        `"${word.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,
        async () => {
          await this.databaseManager.removeWord(word.word);
          this.showCurrentView();
        }
      );
      confirmModal.open();
    });
  }
  showStatistics(container2) {
    const stats = this.databaseManager.getStatistics();
    const statsGrid = container2.createEl("div", { cls: "stats-grid" });
    const basicStats = statsGrid.createEl("div", { cls: "stats-section" });
    basicStats.createEl("h3", { text: "\uAE30\uBCF8 \uD1B5\uACC4", cls: "stats-title" });
    this.createStatItem(basicStats, "\uCD1D \uB2E8\uC5B4 \uC218", stats.totalWords.toString());
    this.createStatItem(basicStats, "\uCD1D \uBCF5\uC2B5 \uD69F\uC218", stats.totalReviews.toString());
    this.createStatItem(basicStats, "\uC5F0\uC18D \uD559\uC2B5\uC77C", `${stats.streakDays}\uC77C`);
    this.createStatItem(basicStats, "\uD3C9\uADE0 \uB09C\uC774\uB3C4", stats.averageDifficulty.toFixed(1));
    const difficultyStats = statsGrid.createEl("div", { cls: "stats-section" });
    difficultyStats.createEl("h3", { text: "\uB09C\uC774\uB3C4\uBCC4 \uBD84\uD3EC", cls: "stats-title" });
    this.createStatItem(difficultyStats, "\uC26C\uC6C0", stats.wordsByDifficulty.easy.toString());
    this.createStatItem(difficultyStats, "\uC88B\uC74C", stats.wordsByDifficulty.good.toString());
    this.createStatItem(difficultyStats, "\uC5B4\uB824\uC6C0", stats.wordsByDifficulty.hard.toString());
    const activityStats = statsGrid.createEl("div", { cls: "stats-section" });
    activityStats.createEl("h3", { text: "\uCD5C\uADFC 7\uC77C \uD65C\uB3D9", cls: "stats-title" });
    stats.recentActivity.forEach((activity) => {
      const date = new Date(activity.date).toLocaleDateString("ko-KR", {
        month: "short",
        day: "numeric"
      });
      this.createStatItem(
        activityStats,
        date,
        `\uD559\uC2B5: ${activity.wordsStudied}, \uBCF5\uC2B5: ${activity.reviewsCompleted}`
      );
    });
  }
  createStatItem(container2, label, value) {
    const statEl = container2.createEl("div", { cls: "stat-item" });
    statEl.createEl("span", { text: label, cls: "stat-label" });
    statEl.createEl("span", { text: value, cls: "stat-value" });
  }
  showAddWord(container2) {
    const addSection = container2.createEl("div", { cls: "add-word-section" });
    addSection.createEl("h3", { text: "\uC0C8 \uB2E8\uC5B4 \uCD94\uAC00", cls: "section-title" });
    const inputEl = addSection.createEl("div", { cls: "word-input-group" });
    const wordInput = inputEl.createEl("input", {
      type: "text",
      placeholder: "\uC601\uB2E8\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694 (\uC608: beautiful)",
      cls: "word-input"
    });
    const addButton = inputEl.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button"
    });
    const addWord = async () => {
      const word = wordInput.value.trim();
      if (!word) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",
          cls: "error-message"
        });
        return;
      }
      try {
        const wordData = await this.wordService.getWordData(word);
        const vocabularyCard = {
          ...wordData,
          reviewCount: 0,
          difficulty: "good",
          lastReviewed: null,
          addedDate: (/* @__PURE__ */ new Date()).toISOString(),
          bookId: this.selectedBookId
        };
        await this.databaseManager.addWord(vocabularyCard);
        wordInput.value = "";
        addSection.createEl("p", {
          text: `"${word}" \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`,
          cls: "success-message"
        });
        setTimeout(() => {
          const successMsg = addSection.querySelector(".success-message");
          if (successMsg)
            successMsg.remove();
        }, 3e3);
      } catch (error) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
          cls: "error-message"
        });
      }
    };
    addButton.addEventListener("click", addWord);
    wordInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        addWord();
      }
    });
  }
  getDifficultyText(difficulty) {
    switch (difficulty) {
      case "easy":
        return "\uC26C\uC6C0";
      case "good":
        return "\uC88B\uC74C";
      case "hard":
        return "\uC5B4\uB824\uC6C0";
      default:
        return "\uC88B\uC74C";
    }
  }
  startReview(words) {
    const reviewModal = new VocabularyReviewModal(this.app, this.plugin, words);
    reviewModal.open();
  }
  showFetchSelectedMeaningsModal() {
    const selectedWordList = Array.from(this.selectedWords);
    new FetchSelectedMeaningsModal(this.app, this.plugin, selectedWordList).open();
  }
  async fetchSingleWordMeaning(word) {
    if (!this.hasValidApiKey()) {
      new import_obsidian9.Notice("LLM API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      `"${word.word}" \uB2E8\uC5B4\uC758 \uB73B\uC744 \uC0C8\uB85C \uAC00\uC838\uC624\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? \uAE30\uC874 \uC815\uBCF4\uAC00\uC5B4\uC50C\uC6CC\uC9D1\uB2C8\uB2E4.`,
      async () => {
        try {
          new import_obsidian9.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911...`);
          const llmResponse = await this.plugin.llmService.getWordDetails(word.word);
          if (llmResponse.success) {
            const wordDetail = llmResponse.data;
            const wordData = this.plugin.llmService.convertToWordData(wordDetail);
            const updatedWord = {
              ...word,
              meanings: wordData.meanings,
              examples: wordData.examples,
              similarWords: wordData.similarWords
            };
            await this.plugin.databaseManager.updateWordData(word.word, updatedWord);
            new import_obsidian9.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
            this.showCurrentView();
          } else {
            new import_obsidian9.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328: ${llmResponse.error}`);
          }
        } catch (error) {
          console.error(`\uB2E8\uC5B4 "${word.word}" \uCC98\uB9AC \uC2E4\uD328:`, error);
          new import_obsidian9.Notice(`"${word.word}" \uB2E8\uC5B4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.`);
        }
      }
    );
    confirmModal.open();
  }
  async refreshBookSelector() {
    await this.databaseManager.loadAllBooks();
    const headerEl = this.contentEl.querySelector(".manager-header");
    if (headerEl) {
      const bookSelect = headerEl.querySelector(".book-select-dropdown");
      if (bookSelect) {
        const currentValue = bookSelect.value;
        const books = this.databaseManager.getAllBooks();
        bookSelect.empty();
        books.forEach((book) => {
          const option = document.createElement("option");
          option.value = book.id;
          option.text = book.name;
          if (book.id === currentValue || book.id === this.selectedBookId) {
            option.selected = true;
            this.selectedBookId = book.id;
          }
          bookSelect.appendChild(option);
        });
      }
    }
    this.showCurrentView();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
};
var VocabularyReviewModal = class extends import_obsidian9.Modal {
  constructor(app, plugin, words) {
    super(app);
    this.currentIndex = 0;
    this.showAnswer = false;
    this.plugin = plugin;
    this.words = words;
  }
  onOpen() {
    if (this.words.length === 0) {
      this.close();
      return;
    }
    this.showCurrentWord();
  }
  showCurrentWord() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const currentWord = this.words[this.currentIndex];
    const progressEl = contentEl.createEl("div", { cls: "review-progress" });
    progressEl.createEl("span", {
      text: `${this.currentIndex + 1} / ${this.words.length}`,
      cls: "progress-text"
    });
    const cardEl = contentEl.createEl("div", { cls: "review-card" });
    const deleteButton = cardEl.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const wordEl = cardEl.createEl("h1", { cls: "review-word" });
    if (currentWord.pronunciation && currentWord.pronunciation.trim()) {
      wordEl.textContent = currentWord.word;
      wordEl.appendText(" ");
      wordEl.createEl("span", {
        text: `[${currentWord.pronunciation}]`,
        cls: "pronunciation"
      });
    } else {
      wordEl.textContent = currentWord.word;
    }
    if (!this.showAnswer) {
      if (currentWord.similarWords.length > 0) {
        const similarEl = cardEl.createEl("div", { cls: "similar-words" });
        similarEl.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
        const similarList = similarEl.createEl("ul");
        currentWord.similarWords.forEach((word) => {
          similarList.createEl("li", { text: word });
        });
      }
      if (currentWord.examples.length > 0) {
        const examplesEl = cardEl.createEl("div", { cls: "examples" });
        examplesEl.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
        currentWord.examples.forEach((example) => {
          examplesEl.createEl("p", { text: example.english, cls: "example" });
        });
      }
      const checkBtn = cardEl.createEl("button", {
        text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30",
        cls: "check-answer-button"
      });
      checkBtn.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCurrentWord();
      });
    } else {
      const answerEl = cardEl.createEl("div", { cls: "answer-section" });
      answerEl.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerEl.createEl("ul");
      currentWord.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      if (currentWord.examples.length > 0) {
        answerEl.createEl("h3", { text: "\uC608\uBB38 \uBC88\uC5ED:" });
        currentWord.examples.forEach((example) => {
          answerEl.createEl("p", { text: example.korean, cls: "translation" });
        });
      }
      this.createReviewButtons(cardEl);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons" });
    const hardBtn = reviewSection.createEl("button", { text: "\uC5B4\uB824\uC6C0", cls: "review-btn hard" });
    const goodBtn = reviewSection.createEl("button", { text: "\uC88B\uC74C", cls: "review-btn good" });
    const easyBtn = reviewSection.createEl("button", { text: "\uC26C\uC6C0", cls: "review-btn easy" });
    hardBtn.addEventListener("click", () => this.handleReview("hard"));
    goodBtn.addEventListener("click", () => this.handleReview("good"));
    easyBtn.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentWord = this.words[this.currentIndex];
    await this.plugin.databaseManager.updateWord(currentWord.word, difficulty);
    this.currentIndex++;
    this.showAnswer = false;
    if (this.currentIndex >= this.words.length) {
      this.showCompletion();
    } else {
      this.showCurrentWord();
    }
  }
  async handleDeleteCard() {
    const currentWord = this.words[this.currentIndex];
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentWord.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentWord.word);
          this.words.splice(this.currentIndex, 1);
          if (this.words.length === 0) {
            this.showCompletion();
            return;
          }
          if (this.currentIndex >= this.words.length) {
            this.currentIndex = this.words.length - 1;
          }
          this.showAnswer = false;
          this.showCurrentWord();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian9.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletion() {
    const { contentEl } = this;
    contentEl.empty();
    const completionEl = contentEl.createEl("div", { cls: "completion" });
    completionEl.createEl("h2", { text: "\uBCF5\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: "\uBAA8\uB4E0 \uB2E8\uC5B4\uB97C \uBCF5\uC2B5\uD588\uC2B5\uB2C8\uB2E4." });
    const closeBtn = completionEl.createEl("button", { text: "\uB2EB\uAE30", cls: "close-btn" });
    closeBtn.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FetchSelectedMeaningsModal = class extends import_obsidian9.Modal {
  constructor(app, plugin, selectedWords) {
    super(app);
    this.isProcessing = false;
    this.plugin = plugin;
    this.selectedWords = selectedWords;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("fetch-selected-meanings-modal");
    contentEl.createEl("h2", {
      text: `\uC120\uD0DD\uB41C ${this.selectedWords.length}\uAC1C \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30`,
      cls: "modal-title"
    });
    contentEl.createEl("p", {
      text: `\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4\uC758 \uC0C1\uC138 \uC815\uBCF4\uB97C LLM API\uB97C \uD1B5\uD574 \uAC00\uC838\uC635\uB2C8\uB2E4.`,
      cls: "modal-description"
    });
    const wordListEl = contentEl.createEl("div", { cls: "selected-words-list" });
    wordListEl.createEl("h3", { text: "\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4:" });
    const wordsContainer = wordListEl.createEl("div", { cls: "words-container" });
    this.selectedWords.forEach((word) => {
      wordsContainer.createEl("span", {
        text: word,
        cls: "selected-word-tag"
      });
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const fetchButton = buttonSection.createEl("button", {
      text: "\uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-button"
    });
    fetchButton.addEventListener("click", () => {
      this.fetchSelectedMeanings();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      this.close();
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section display-none" });
    const progressText = progressSection.createEl("div", { cls: "progress-text" });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section display-none" });
  }
  async fetchSelectedMeanings() {
    if (this.isProcessing)
      return;
    this.isProcessing = true;
    this.showProgress(this.selectedWords.length);
    try {
      const result = await this.plugin.llmService.getMultipleWordDetails(this.selectedWords);
      if (result.success && Array.isArray(result.data)) {
        const successWords = [];
        const failedWords = [];
        for (const wordData of result.data) {
          try {
            if (wordData.word && wordData.meanings && wordData.meanings.length > 0) {
              const existingWord = this.plugin.databaseManager.getWord(wordData.word);
              if (existingWord) {
                const updatedWord = {
                  ...existingWord,
                  pronunciation: wordData.pronunciation || "",
                  meanings: wordData.meanings,
                  examples: wordData.examples || [],
                  similarWords: wordData.similarWords || []
                };
                await this.plugin.databaseManager.updateWordData(wordData.word, updatedWord);
                successWords.push(wordData.word);
              }
            } else {
              failedWords.push(wordData.word);
            }
          } catch (error) {
            console.error(`\uB2E8\uC5B4 "${wordData.word}" \uC5C5\uB370\uC774\uD2B8 \uC2E4\uD328:`, error);
            failedWords.push(wordData.word);
          }
        }
        this.hideProgress();
        this.showResults({ success: successWords, failed: failedWords });
        if (successWords.length > 0) {
          new import_obsidian9.Notice(`${successWords.length}\uAC1C\uC758 \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD588\uC2B5\uB2C8\uB2E4!`);
        }
      } else {
        this.hideProgress();
        new import_obsidian9.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + (result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"));
      }
    } catch (error) {
      this.hideProgress();
      new import_obsidian9.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + error.message);
    } finally {
      this.isProcessing = false;
    }
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.removeClass("display-none");
    progressSection.addClass("display-block");
    progressText.textContent = `\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911... (0/${totalWords})`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    if (progressSection) {
      progressSection.removeClass("display-block");
      progressSection.addClass("display-none");
    }
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.removeClass("display-none");
    resultSection.addClass("display-block");
    resultSection.empty();
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 10) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 10) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", { text: "\uB2EB\uAE30", cls: "close-button" });
    closeButton.addEventListener("click", () => this.close());
  }
  onClose() {
    this.isProcessing = false;
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal2 = class extends import_obsidian9.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/shared/container/DIContainer.ts
var DIContainer = class {
  constructor() {
    this.services = /* @__PURE__ */ new Map();
    this.instances = /* @__PURE__ */ new Map();
  }
  register(name, implementation, options = {}) {
    var _a, _b;
    this.services.set(name, {
      implementation,
      singleton: (_a = options.singleton) != null ? _a : true,
      dependencies: (_b = options.dependencies) != null ? _b : []
    });
  }
  resolve(name) {
    const service = this.services.get(name);
    if (!service) {
      throw new Error(`Service '${name}' not registered`);
    }
    if (service.singleton && this.instances.has(name)) {
      return this.instances.get(name);
    }
    const dependencies = service.dependencies.map((dep) => this.resolve(dep));
    let instance;
    if (this.isConstructor(service.implementation)) {
      instance = new service.implementation(...dependencies);
    } else {
      instance = service.implementation(...dependencies);
    }
    if (service.singleton) {
      this.instances.set(name, instance);
    }
    return instance;
  }
  registerInstance(name, instance) {
    this.instances.set(name, instance);
    this.services.set(name, {
      implementation: () => instance,
      singleton: true,
      dependencies: []
    });
  }
  has(name) {
    return this.services.has(name);
  }
  clear() {
    this.services.clear();
    this.instances.clear();
  }
  isConstructor(implementation) {
    return implementation.prototype && implementation.prototype.constructor === implementation;
  }
};
var container = new DIContainer();

// src/core/entities/Vocabulary.ts
var VocabularyCard = class _VocabularyCard {
  constructor(word, pronunciation, meanings, similarWords, examples, reviewCount, difficulty, lastReviewed, addedDate, bookId) {
    this.word = word;
    this.pronunciation = pronunciation;
    this.meanings = meanings;
    this.similarWords = similarWords;
    this.examples = examples;
    this.reviewCount = reviewCount;
    this.difficulty = difficulty;
    this.lastReviewed = lastReviewed;
    this.addedDate = addedDate;
    this.bookId = bookId;
  }
  // 팩토리 메서드: WordData로부터 VocabularyCard 생성
  static fromWordData(wordData, bookId) {
    return new _VocabularyCard(
      wordData.word,
      wordData.pronunciation,
      wordData.meanings,
      wordData.similarWords,
      wordData.examples,
      0,
      // 초기 복습 횟수
      "good",
      // 초기 난이도
      null,
      // 초기 복습 날짜
      (/* @__PURE__ */ new Date()).toISOString(),
      // 추가 날짜
      bookId
    );
  }
  // 비즈니스 로직: 복습 수행
  review(newDifficulty) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount + 1,
      newDifficulty,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어 정보 업데이트
  updateWordData(wordData) {
    var _a, _b, _c, _d;
    return new _VocabularyCard(
      this.word,
      (_a = wordData.pronunciation) != null ? _a : this.pronunciation,
      (_b = wordData.meanings) != null ? _b : this.meanings,
      (_c = wordData.similarWords) != null ? _c : this.similarWords,
      (_d = wordData.examples) != null ? _d : this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어장 이동
  moveToBook(newBookId) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      newBookId
    );
  }
  // 비즈니스 로직: 복습이 필요한지 확인
  needsReview(reviewInterval = 1) {
    if (!this.lastReviewed)
      return true;
    const lastReviewDate = new Date(this.lastReviewed);
    const now = /* @__PURE__ */ new Date();
    const daysDiff = Math.floor((now.getTime() - lastReviewDate.getTime()) / (1e3 * 60 * 60 * 24));
    const difficultyMultiplier = {
      "hard": 0.5,
      "good": 1,
      "easy": 2
    };
    const adjustedInterval = reviewInterval * difficultyMultiplier[this.difficulty];
    return daysDiff >= adjustedInterval;
  }
  // 비즈니스 로직: 학습 진행도 계산 (0-100)
  getProgressPercentage() {
    const maxReviews = 10;
    const progress = Math.min(this.reviewCount / maxReviews, 1) * 100;
    const difficultyBonus = {
      "easy": 20,
      "good": 10,
      "hard": 0
    };
    return Math.min(progress + difficultyBonus[this.difficulty], 100);
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      word: this.word,
      pronunciation: this.pronunciation,
      meanings: this.meanings,
      similarWords: this.similarWords,
      examples: this.examples,
      reviewCount: this.reviewCount,
      difficulty: this.difficulty,
      lastReviewed: this.lastReviewed,
      addedDate: this.addedDate,
      bookId: this.bookId
    };
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.word || this.word.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uAC00 \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
    }
    if (this.meanings.length === 0) {
      errors.push("\uB2E8\uC5B4\uC758 \uB73B\uC774 \uD558\uB098 \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (!this.bookId || this.bookId.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 ID\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  static create(data) {
    var _a;
    return new _VocabularyCard(
      data.word,
      data.pronunciation || "",
      [data.meaning],
      // meanings array
      [],
      // similarWords
      ((_a = data.examples) == null ? void 0 : _a.map((ex) => ({ english: ex, korean: "" }))) || [],
      // examples with Example type
      0,
      // reviewCount
      "good",
      // difficulty
      null,
      // lastReviewed
      (/* @__PURE__ */ new Date()).toISOString(),
      // addedDate
      data.bookId || "default"
    );
  }
};

// src/core/use-cases/AddWordUseCase.ts
var AddWordUseCase = class {
  constructor(vocabularyRepository, bookRepository, wordService) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
    this.wordService = wordService;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingWord = await this.vocabularyRepository.findByWord(word);
      if (existingWord) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC785\uB2C8\uB2E4."
        };
      }
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = (currentBook == null ? void 0 : currentBook.id) || "default";
      }
      const book = await this.bookRepository.findById(bookId);
      if (!book) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const wordData = await this.wordService.getWordData(word);
      const vocabularyCard = VocabularyCard.create({
        word: wordData.word,
        meaning: wordData.meaning,
        pronunciation: wordData.pronunciation || "",
        examples: wordData.examples || [],
        bookId
      });
      const validationErrors = vocabularyCard.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.vocabularyRepository.add(vocabularyCard);
      const event = {
        type: "WORD_ADDED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: vocabularyCard.word,
          bookId: vocabularyCard.bookId
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: vocabularyCard
      };
    } catch (error) {
      console.error("AddWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordAdded", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/entities/Book.ts
var Book = class _Book {
  constructor(id, name, description, createdAt, updatedAt, wordCount, isDefault) {
    this.id = id;
    this.name = name;
    this.description = description;
    this.createdAt = createdAt;
    this.updatedAt = updatedAt;
    this.wordCount = wordCount;
    this.isDefault = isDefault;
  }
  // 팩토리 메서드: 새 단어장 생성
  static create(name, description = "", isDefault = false) {
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const id = isDefault ? "default" : _Book.generateId();
    return new _Book(
      id,
      name,
      description,
      now,
      now,
      0,
      isDefault
    );
  }
  // 팩토리 메서드: 기본 단어장 생성
  static createDefault() {
    return _Book.create("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5", "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.", true);
  }
  // 비즈니스 로직: 단어장 정보 업데이트
  updateInfo(name, description) {
    return new _Book(
      this.id,
      name != null ? name : this.name,
      description != null ? description : this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 증가
  incrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount + 1,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 감소
  decrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, this.wordCount - 1),
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 재설정
  updateWordCount(count) {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, count),
      this.isDefault
    );
  }
  // 비즈니스 로직: 삭제 가능 여부 확인
  canBeDeleted() {
    return !this.isDefault;
  }
  // 비즈니스 로직: 단어장이 비어있는지 확인
  isEmpty() {
    return this.wordCount === 0;
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.name || this.name.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (this.name.trim().length > 100) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC740 100\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.description.length > 500) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC124\uBA85\uC740 500\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.wordCount < 0) {
      errors.push("\uB2E8\uC5B4 \uC218\uB294 0 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      id: this.id,
      name: this.name,
      description: this.description,
      createdAt: this.createdAt,
      updatedAt: this.updatedAt,
      wordCount: this.wordCount,
      isDefault: this.isDefault
    };
  }
  // 비즈니스 로직: 생성일로부터 경과 일수 계산
  getDaysFromCreation() {
    const createdDate = new Date(this.createdAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - createdDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // 비즈니스 로직: 마지막 업데이트로부터 경과 일수 계산
  getDaysFromLastUpdate() {
    const updatedDate = new Date(this.updatedAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - updatedDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // ID 생성 유틸리티
  static generateId() {
    return `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/core/use-cases/CreateBookUseCase.ts
var CreateBookUseCase = class {
  constructor(bookRepository) {
    this.bookRepository = bookRepository;
  }
  async execute(request) {
    try {
      if (!request.name || request.name.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const name = request.name.trim();
      const existingBooks = await this.bookRepository.findAll();
      const duplicateBook = existingBooks.find(
        (book2) => book2.name.toLowerCase() === name.toLowerCase()
      );
      if (duplicateBook) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4."
        };
      }
      const book = Book.create(
        name,
        request.description || ""
      );
      const validationErrors = book.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.bookRepository.add(book);
      const event = {
        type: "BOOK_CREATED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          bookId: book.id,
          name: book.name
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        book
      };
    } catch (error) {
      console.error("CreateBookUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("bookCreated", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/use-cases/GetWordsForReviewUseCase.ts
var GetWordsForReviewUseCase = class {
  constructor(vocabularyRepository, bookRepository) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
  }
  async execute(request = {}) {
    try {
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = currentBook == null ? void 0 : currentBook.id;
      }
      const allWords = await this.vocabularyRepository.findByBookId(bookId);
      if (allWords.length === 0) {
        return {
          success: true,
          words: [],
          totalCount: 0
        };
      }
      const reviewInterval = request.reviewInterval || 1;
      const wordsNeedingReview = allWords.filter(
        (word) => word.needsReview(reviewInterval)
      );
      wordsNeedingReview.sort((a, b) => {
        if (a.lastReviewed && b.lastReviewed) {
          const aDate = new Date(a.lastReviewed).getTime();
          const bDate = new Date(b.lastReviewed).getTime();
          if (aDate !== bDate)
            return aDate - bDate;
        } else if (a.lastReviewed && !b.lastReviewed) {
          return -1;
        } else if (!a.lastReviewed && b.lastReviewed) {
          return 1;
        }
        const difficultyOrder = { "hard": 3, "good": 2, "easy": 1 };
        const difficultyDiff = difficultyOrder[b.difficulty] - difficultyOrder[a.difficulty];
        if (difficultyDiff !== 0)
          return difficultyDiff;
        return a.reviewCount - b.reviewCount;
      });
      const limit = request.limit || 20;
      const limitedWords = wordsNeedingReview.slice(0, limit);
      return {
        success: true,
        words: limitedWords,
        totalCount: wordsNeedingReview.length
      };
    } catch (error) {
      console.error("GetWordsForReviewUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
};

// src/core/use-cases/ReviewWordUseCase.ts
var ReviewWordUseCase = class {
  constructor(vocabularyRepository) {
    this.vocabularyRepository = vocabularyRepository;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      if (!["easy", "good", "hard"].includes(request.difficulty)) {
        return {
          success: false,
          error: "\uC62C\uBC14\uB978 \uB09C\uC774\uB3C4\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingCard = await this.vocabularyRepository.findByWord(word);
      if (!existingCard) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const previousDifficulty = existingCard.difficulty;
      const reviewedCard = existingCard.review(request.difficulty);
      await this.vocabularyRepository.update(reviewedCard);
      const event = {
        type: "WORD_REVIEWED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: reviewedCard.word,
          difficulty: request.difficulty,
          previousDifficulty
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: reviewedCard
      };
    } catch (error) {
      console.error("ReviewWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordReviewed", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/infrastructure/obsidian/repositories/VocabularyRepositoryAdapter.ts
var VocabularyRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(card) {
    await this.databaseManager.addWord(card);
  }
  async save(card) {
    await this.databaseManager.addWord(card);
  }
  async findByWord(word) {
    return this.databaseManager.getWord(word);
  }
  async findAll() {
    return this.databaseManager.getAllWords();
  }
  async findByBookId(bookId) {
    return this.databaseManager.getWordsByBook(bookId);
  }
  async update(word, card) {
    await this.databaseManager.updateWord(word, card.difficulty);
  }
  async delete(word) {
    await this.databaseManager.removeWord(word);
  }
  async search(options) {
    const allWords = await this.findAll();
    const filteredWords = allWords.filter(
      (word) => {
        var _a;
        return word.word.toLowerCase().includes(((_a = options.query) == null ? void 0 : _a.toLowerCase()) || "");
      }
    );
    return {
      words: filteredWords,
      total: filteredWords.length,
      hasMore: false
    };
  }
  async searchByText(query) {
    const result = await this.search({ query });
    return result.words;
  }
  async findCardsForReview(bookId) {
    return this.databaseManager.getWordsForReview(bookId);
  }
  async findCardsByDifficulty(difficulty, bookId) {
    const words = bookId ? await this.findByBookId(bookId) : await this.findAll();
    return words.filter((word) => word.difficulty === difficulty);
  }
  async count() {
    const words = await this.findAll();
    return words.length;
  }
  async countByBookId(bookId) {
    const words = await this.findByBookId(bookId);
    return words.length;
  }
  async countByDifficulty(difficulty) {
    const words = await this.findCardsByDifficulty(difficulty);
    return words.length;
  }
  async saveMany(cards) {
    for (const card of cards) {
      await this.add(card);
    }
  }
  async deleteMany(words) {
    for (const word of words) {
      await this.delete(word);
    }
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
};

// src/infrastructure/obsidian/repositories/BookRepositoryAdapter.ts
var BookRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async save(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async findById(id) {
    const bookData = this.databaseManager.getBook(id);
    if (!bookData)
      return null;
    return new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    );
  }
  async findAll(options) {
    const booksData = this.databaseManager.getAllBooks();
    let books = booksData.map((bookData) => new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    ));
    if (options) {
      if (options.includeEmpty === false) {
        books = books.filter((book) => !book.isEmpty());
      }
      if (options.sortBy) {
        books.sort((a, b) => {
          const aValue = a[options.sortBy];
          const bValue = b[options.sortBy];
          if (typeof aValue === "string" && typeof bValue === "string") {
            return options.sortOrder === "desc" ? bValue.localeCompare(aValue) : aValue.localeCompare(bValue);
          }
          if (typeof aValue === "number" && typeof bValue === "number") {
            return options.sortOrder === "desc" ? bValue - aValue : aValue - bValue;
          }
          return 0;
        });
      }
      if (options.offset || options.limit) {
        const start = options.offset || 0;
        const end = options.limit ? start + options.limit : void 0;
        books = books.slice(start, end);
      }
    }
    return books;
  }
  async update(id, book) {
    await this.databaseManager.updateBook(id, book.toPlainObject());
  }
  async delete(id) {
    await this.databaseManager.deleteBook(id);
  }
  async findDefault() {
    return this.findById("default");
  }
  async findByName(name) {
    const books = await this.findAll();
    return books.find((book) => book.name === name) || null;
  }
  async exists(id) {
    const book = await this.findById(id);
    return book !== null;
  }
  async count() {
    const books = await this.findAll();
    return books.length;
  }
  async getStatistics(bookId) {
    const book = await this.findById(bookId);
    if (!book)
      return null;
    const words = this.databaseManager.getWordsByBook(bookId);
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const totalReviews = words.reduce((sum, word) => sum + word.reviewCount, 0);
    const averageReviewCount = words.length > 0 ? totalReviews / words.length : 0;
    const lastActivityDate = words.length > 0 ? Math.max(...words.map((w) => new Date(w.lastReviewed || w.addedDate).getTime())) : null;
    const completionPercentage = words.length > 0 ? wordsByDifficulty.easy / words.length * 100 : 0;
    return {
      book,
      totalWords: words.length,
      wordsByDifficulty,
      averageReviewCount,
      lastActivityDate: lastActivityDate ? new Date(lastActivityDate).toISOString() : null,
      completionPercentage
    };
  }
  async getAllStatistics() {
    const books = await this.findAll();
    const statistics = [];
    for (const book of books) {
      const stat = await this.getStatistics(book.id);
      if (stat) {
        statistics.push(stat);
      }
    }
    return statistics;
  }
  async getCurrentBook() {
    const currentBook = this.databaseManager.getCurrentBook();
    if (!currentBook)
      return null;
    return new Book(
      currentBook.id,
      currentBook.name,
      currentBook.description,
      currentBook.createdAt,
      currentBook.updatedAt,
      currentBook.wordCount,
      currentBook.isDefault
    );
  }
  async setCurrentBook(bookId) {
    await this.databaseManager.setCurrentBook(bookId);
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  async validateBookName(name, excludeId) {
    const books = await this.findAll();
    return !books.some(
      (book) => book.name === name && (!excludeId || book.id !== excludeId)
    );
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
  onCurrentBookChanged(callback) {
  }
  offCurrentBookChanged(callback) {
  }
};

// src/infrastructure/storage/VocabularyDatabase.ts
var import_obsidian10 = require("obsidian");
var VocabularyDatabaseManager = class {
  constructor(app, saveCallback, folderPath) {
    this.books = /* @__PURE__ */ new Map();
    this.words = /* @__PURE__ */ new Map();
    this.settings = {
      dailyGoal: 10,
      reviewInterval: 1,
      currentBookId: "default"
    };
    this.statistics = {
      totalReviews: 0,
      streakDays: 0,
      lastStudyDate: null
    };
    this.vocabularyFolderPath = "Vocabulary";
    this.app = app;
    this.saveCallback = saveCallback;
    if (folderPath) {
      this.vocabularyFolderPath = folderPath;
    }
    this.initializeVocabularyFolder();
    this.initializeDefaultBook();
  }
  // 단어장 폴더 초기화
  async initializeVocabularyFolder() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
      if (folder instanceof import_obsidian10.TFolder) {
        return;
      }
      await this.app.vault.createFolder(this.vocabularyFolderPath);
    } catch (error) {
      if (error instanceof Error) {
        const errorMessage = error.message.toLowerCase();
        if (errorMessage.includes("already exists") || errorMessage.includes("folder already exists") || errorMessage.includes("already present")) {
        } else {
          console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC2E4\uD328:", error);
        }
      } else {
        console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC911 \uC54C \uC218 \uC5C6\uB294 \uC624\uB958 \uBC1C\uC0DD:", error);
      }
    }
  }
  // 기본 book 초기화
  async initializeDefaultBook() {
    if (!this.books.has("default")) {
      const defaultBook = {
        id: "default",
        name: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5",
        description: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.",
        createdAt: (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: 0,
        isDefault: true
      };
      this.books.set("default", defaultBook);
      await this.saveBookToFile(defaultBook);
    }
  }
  // Book을 MD 파일로 저장
  async saveBookToFile(book) {
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian10.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const bookWords = Array.from(this.words.values()).filter((word) => word.bookId === book.id).sort((a, b) => a.word.localeCompare(b.word));
    const frontmatter = [
      "---",
      `bookId: ${book.id}`,
      `name: "${book.name}"`,
      `description: "${book.description}"`,
      `createdAt: ${book.createdAt}`,
      `updatedAt: ${book.updatedAt}`,
      `wordCount: ${bookWords.length}`,
      `isDefault: ${book.isDefault}`,
      "---",
      ""
    ].join("\n");
    let content = frontmatter;
    content += `# ${book.name}

`;
    content += `${book.description}

`;
    content += `## \uB2E8\uC5B4 \uBAA9\uB85D (${bookWords.length}\uAC1C)

`;
    for (const word of bookWords) {
      content += `### ${word.word}

`;
      if (word.pronunciation) {
        content += `**\uBC1C\uC74C:** ${word.pronunciation}

`;
      }
      content += `**\uB73B:**
`;
      for (const meaning of word.meanings) {
        content += `- ${meaning}
`;
      }
      content += "\n";
      if (word.similarWords.length > 0) {
        content += `**\uC720\uC0AC\uD55C \uB2E8\uC5B4:** ${word.similarWords.join(", ")}

`;
      }
      if (word.examples.length > 0) {
        content += `**\uC608\uBB38:**
`;
        for (const example of word.examples) {
          content += `- ${example.english}
`;
          content += `  - ${example.korean}
`;
        }
        content += "\n";
      }
      content += `**\uBCF5\uC2B5 \uC815\uBCF4:**
`;
      content += `- \uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}
`;
      content += `- \uB09C\uC774\uB3C4: ${word.difficulty}
`;
      content += `- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${word.lastReviewed || "\uC5C6\uC74C"}
`;
      content += `- \uCD94\uAC00\uC77C: ${word.addedDate}
`;
      if (word.scheduleInfo) {
        content += `
**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**
`;
        content += `- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ${word.scheduleInfo.dueDate}
`;
        content += `- \uBCF5\uC2B5 \uAC04\uACA9: ${word.scheduleInfo.interval}\uC77C
`;
        content += `- \uC6A9\uC774\uB3C4: ${word.scheduleInfo.ease}
`;
        content += `- \uC2E4\uD328 \uD69F\uC218: ${word.scheduleInfo.lapseCount}
`;
      }
      content += "\n---\n\n";
    }
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian10.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        try {
          await this.app.vault.create(filePath, content);
        } catch (error) {
          if (error instanceof Error && error.message.includes("already exists")) {
            const file = this.app.vault.getAbstractFileByPath(filePath);
            if (file instanceof import_obsidian10.TFile) {
              await this.app.vault.modify(file, content);
            } else {
            }
          } else {
            console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
          }
        }
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  // MD 파일에서 Book과 단어들 로드
  async loadBookFromFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const { frontmatter, body } = this.parseMDFile(content);
      if (!frontmatter.bookId)
        return;
      const book = {
        id: frontmatter.bookId,
        name: frontmatter.name || file.basename,
        description: frontmatter.description || "",
        createdAt: frontmatter.createdAt || (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: frontmatter.updatedAt || (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: frontmatter.wordCount || 0,
        isDefault: frontmatter.isDefault || false
      };
      this.books.set(book.id, book);
      const words = this.parseWordsFromMarkdown(body, book.id);
      for (const word of words) {
        this.words.set(word.word.toLowerCase(), word);
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:", error);
    }
  }
  // MD 파일 파싱 (frontmatter와 body 분리)
  parseMDFile(content) {
    const frontmatterRegex = /^---\n([\s\S]*?)\n---\n([\s\S]*)$/;
    const match = content.match(frontmatterRegex);
    if (!match) {
      return { frontmatter: {}, body: content };
    }
    const frontmatterText = match[1];
    const body = match[2];
    const frontmatter = {};
    const lines = frontmatterText.split("\n");
    for (const line of lines) {
      const colonIndex = line.indexOf(":");
      if (colonIndex > 0) {
        const key = line.substring(0, colonIndex).trim();
        let value = line.substring(colonIndex + 1).trim();
        if (value.startsWith('"') && value.endsWith('"')) {
          value = value.slice(1, -1);
        }
        if (value === "true")
          frontmatter[key] = true;
        else if (value === "false")
          frontmatter[key] = false;
        else if (!isNaN(Number(value)))
          frontmatter[key] = Number(value);
        else
          frontmatter[key] = value;
      }
    }
    return { frontmatter, body };
  }
  // 마크다운에서 단어들 파싱
  parseWordsFromMarkdown(markdown, bookId) {
    const words = [];
    const wordSections = markdown.split("---").filter((section) => section.trim());
    for (const section of wordSections) {
      const word = this.parseWordSection(section, bookId);
      if (word) {
        words.push(word);
      }
    }
    return words;
  }
  // 개별 단어 섹션 파싱
  parseWordSection(section, bookId) {
    const lines = section.split("\n").filter((line) => line.trim());
    if (lines.length === 0)
      return null;
    let word = "";
    let pronunciation = "";
    const meanings = [];
    const similarWords = [];
    const examples = [];
    let reviewCount = 0;
    let difficulty = "good";
    let lastReviewed = null;
    let addedDate = (/* @__PURE__ */ new Date()).toISOString();
    let scheduleInfo = void 0;
    let currentSection = "";
    let currentExample = {};
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const trimmedLine = line.trim();
      if (trimmedLine.startsWith("### ")) {
        word = trimmedLine.substring(4).trim();
        continue;
      }
      if (trimmedLine.startsWith("**\uBC1C\uC74C:**")) {
        pronunciation = trimmedLine.substring(7).trim();
        currentSection = "pronunciation";
      } else if (trimmedLine.startsWith("**\uB73B:**")) {
        currentSection = "meanings";
      } else if (trimmedLine.startsWith("**\uC720\uC0AC\uD55C \uB2E8\uC5B4:**")) {
        const similarWordsText = trimmedLine.substring(12).trim();
        similarWords.push(...similarWordsText.split(",").map((w) => w.trim()));
        currentSection = "similar";
      } else if (trimmedLine.startsWith("**\uC608\uBB38:**")) {
        currentSection = "examples";
      } else if (trimmedLine.startsWith("**\uBCF5\uC2B5 \uC815\uBCF4:**")) {
        currentSection = "review";
      } else if (trimmedLine.startsWith("**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**")) {
        currentSection = "spaced-repetition";
      } else if (currentSection === "meanings" && trimmedLine.startsWith("- ")) {
        meanings.push(trimmedLine.substring(2).trim());
      } else if (currentSection === "examples") {
        if (line.startsWith("- ") && !line.startsWith("  - ")) {
          if (currentExample.english && currentExample.korean) {
            examples.push({
              english: currentExample.english,
              korean: currentExample.korean
            });
          }
          currentExample = { english: line.substring(2).trim() };
        } else if (line.startsWith("  - ")) {
          currentExample.korean = line.substring(4).trim();
        }
      } else if (currentSection === "review") {
        if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uD69F\uC218: ")) {
          reviewCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        } else if (trimmedLine.startsWith("- \uB09C\uC774\uB3C4: ")) {
          const diff = trimmedLine.substring(7).trim();
          if (diff === "easy" || diff === "good" || diff === "hard") {
            difficulty = diff;
          }
        } else if (trimmedLine.startsWith("- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ")) {
          const lastRev = trimmedLine.substring(11).trim();
          lastReviewed = lastRev === "\uC5C6\uC74C" ? null : lastRev;
        } else if (trimmedLine.startsWith("- \uCD94\uAC00\uC77C: ")) {
          addedDate = trimmedLine.substring(7).trim();
        }
      } else if (currentSection === "spaced-repetition") {
        if (!scheduleInfo) {
          scheduleInfo = {};
        }
        if (trimmedLine.startsWith("- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ")) {
          scheduleInfo.dueDate = trimmedLine.substring(10).trim();
        } else if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uAC04\uACA9: ")) {
          const intervalText = trimmedLine.substring(8).trim();
          scheduleInfo.interval = parseInt(intervalText.replace("\uC77C", "")) || 1;
        } else if (trimmedLine.startsWith("- \uC6A9\uC774\uB3C4: ")) {
          scheduleInfo.ease = parseInt(trimmedLine.substring(7).trim()) || 250;
        } else if (trimmedLine.startsWith("- \uC2E4\uD328 \uD69F\uC218: ")) {
          scheduleInfo.lapseCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        }
      }
    }
    if (currentExample.english && currentExample.korean) {
      examples.push({
        english: currentExample.english,
        korean: currentExample.korean
      });
    }
    if (!word)
      return null;
    return {
      word: word.toLowerCase(),
      pronunciation,
      meanings,
      similarWords,
      examples,
      reviewCount,
      difficulty,
      lastReviewed,
      addedDate,
      bookId,
      scheduleInfo
    };
  }
  // 모든 단어장 파일 로드
  async loadAllBooks() {
    this.books.clear();
    this.words.clear();
    await this.initializeVocabularyFolder();
    await this.initializeDefaultBook();
    const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
    if (folder instanceof import_obsidian10.TFolder) {
      for (const file of folder.children) {
        if (file instanceof import_obsidian10.TFile && file.extension === "md") {
          await this.loadBookFromFile(file);
        }
      }
    }
    await this.loadSettings();
  }
  // 설정 파일 저장/로드
  async saveSettings() {
    const settingsPath = (0, import_obsidian10.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    const data = {
      settings: this.settings,
      statistics: this.statistics
    };
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(settingsPath);
      const content = JSON.stringify(data, null, 2);
      if (existingFile instanceof import_obsidian10.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        await this.app.vault.create(settingsPath, content);
      }
    } catch (error) {
      console.error("\uC124\uC815 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  async loadSettings() {
    const settingsPath = (0, import_obsidian10.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    try {
      const file = this.app.vault.getAbstractFileByPath(settingsPath);
      if (file instanceof import_obsidian10.TFile) {
        const content = await this.app.vault.read(file);
        const data = JSON.parse(content);
        if (data.settings) {
          this.settings = { ...this.settings, ...data.settings };
        }
        if (data.statistics) {
          this.statistics = { ...this.statistics, ...data.statistics };
        }
      }
    } catch (error) {
      console.warn("\uC124\uC815 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:", error);
    }
  }
  // Book 관리 메서드들
  async createBook(name, description = "") {
    const id = `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    const book = {
      id,
      name,
      description,
      createdAt: (/* @__PURE__ */ new Date()).toISOString(),
      updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
      wordCount: 0,
      isDefault: false
    };
    this.books.set(id, book);
    await this.saveBookToFile(book);
    this.saveCallback();
    return book;
  }
  async updateBook(bookId, updates) {
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedBook = {
      ...book,
      ...updates,
      updatedAt: (/* @__PURE__ */ new Date()).toISOString()
    };
    this.books.set(bookId, updatedBook);
    await this.saveBookToFile(updatedBook);
    this.saveCallback();
  }
  async deleteBook(bookId) {
    if (bookId === "default") {
      throw new Error("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC740 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const wordsToDelete = Array.from(this.words.values()).filter((word) => word.bookId === bookId).map((word) => word.word);
    for (const word of wordsToDelete) {
      this.words.delete(word.toLowerCase());
    }
    this.books.delete(bookId);
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian10.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian10.TFile) {
      await this.app.fileManager.trashFile(file);
    }
    if (this.settings.currentBookId === bookId) {
      this.settings.currentBookId = "default";
      await this.saveSettings();
    }
    this.saveCallback();
  }
  getAllBooks() {
    return Array.from(this.books.values()).sort((a, b) => {
      if (a.isDefault)
        return -1;
      if (b.isDefault)
        return 1;
      return a.name.localeCompare(b.name);
    });
  }
  getBook(bookId) {
    return this.books.get(bookId);
  }
  getCurrentBook() {
    return this.books.get(this.settings.currentBookId);
  }
  async setCurrentBook(bookId) {
    if (!this.books.has(bookId)) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    this.settings.currentBookId = bookId;
    await this.saveSettings();
    this.saveCallback();
  }
  // Book별 단어 수 업데이트
  updateBookWordCount(bookId) {
    const wordCount = Array.from(this.words.values()).filter((word) => word.bookId === bookId).length;
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount = wordCount;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
    }
  }
  // 단어 추가
  async addWord(wordData) {
    const word = wordData.word.toLowerCase();
    if (this.words.has(word)) {
      throw new Error(`\uB2E8\uC5B4 "${wordData.word}"\uB294 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4.`);
    }
    const newWord = {
      ...wordData,
      word: wordData.word.toLowerCase(),
      reviewCount: 0,
      difficulty: "good",
      lastReviewed: null,
      addedDate: (/* @__PURE__ */ new Date()).toISOString(),
      bookId: wordData.bookId || this.settings.currentBookId
    };
    this.words.set(word, newWord);
    const book = this.books.get(newWord.bookId);
    if (book) {
      book.wordCount++;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 삭제
  async removeWord(word) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const bookId = wordData.bookId;
    this.words.delete(wordKey);
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount--;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과)
  async updateWord(word, difficulty) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과 + 스페이스드 리피티션 정보)
  async updateWordWithSchedule(word, difficulty, scheduleInfo) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    if (scheduleInfo) {
      wordData.scheduleInfo = scheduleInfo;
    }
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 전체 데이터 업데이트 (LLM API로 가져온 정보로 덮어쓰기)
  async updateWordData(word, updatedWordData) {
    const wordKey = word.toLowerCase();
    const existingWord = this.words.get(wordKey);
    if (!existingWord) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedWord = {
      ...updatedWordData,
      word: wordKey,
      reviewCount: existingWord.reviewCount,
      difficulty: existingWord.difficulty,
      lastReviewed: existingWord.lastReviewed,
      addedDate: existingWord.addedDate,
      bookId: existingWord.bookId
    };
    this.words.set(wordKey, updatedWord);
    const book = this.books.get(updatedWord.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 조회
  getWord(word) {
    return this.words.get(word.toLowerCase());
  }
  // 현재 book의 모든 단어 조회
  getAllWords() {
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 특정 book의 모든 단어 조회
  getWordsByBook(bookId) {
    return Array.from(this.words.values()).filter((word) => word.bookId === bookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 복습 대상 단어 조회 (현재 book)
  getWordsForReview() {
    const now = /* @__PURE__ */ new Date();
    const reviewIntervalMs = this.settings.reviewInterval * 24 * 60 * 60 * 1e3;
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return true;
      const lastReview = new Date(word.lastReviewed);
      const timeSinceLastReview = now.getTime() - lastReview.getTime();
      return timeSinceLastReview >= reviewIntervalMs;
    });
  }
  // 단어 검색 (현재 book)
  searchWords(query) {
    const lowerQuery = query.toLowerCase();
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter(
      (word) => word.word.includes(lowerQuery) || word.meanings.some((meaning) => meaning.toLowerCase().includes(lowerQuery))
    );
  }
  // 통계 조회 (현재 book)
  getStatistics() {
    const words = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId);
    const totalWords = words.length;
    const totalReviews = this.statistics.totalReviews;
    const averageDifficulty = words.length > 0 ? words.reduce((sum, word) => {
      const difficultyValue = word.difficulty === "easy" ? 1 : word.difficulty === "good" ? 2 : 3;
      return sum + difficultyValue;
    }, 0) / words.length : 0;
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const recentActivity = this.calculateRecentActivity();
    return {
      totalWords,
      totalReviews,
      streakDays: this.statistics.streakDays,
      averageDifficulty,
      wordsByDifficulty,
      recentActivity
    };
  }
  // 일일 목표 진행률 조회 (현재 book)
  getDailyGoalProgress() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const todayWords = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return false;
      return new Date(word.lastReviewed).toDateString() === today;
    }).length;
    const goal = this.settings.dailyGoal;
    const percentage = goal > 0 ? Math.min(todayWords / goal * 100, 100) : 0;
    return {
      current: todayWords,
      goal,
      percentage
    };
  }
  // 설정 업데이트
  async updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
    await this.saveSettings();
    this.saveCallback();
  }
  // 데이터 저장용 형식으로 변환 (호환성 유지)
  getDataForSave() {
    return {
      books: Array.from(this.books.values()),
      words: Array.from(this.words.values()),
      settings: this.settings,
      statistics: this.statistics
    };
  }
  // 저장된 데이터에서 로드 (호환성 유지)
  async loadFromData(data) {
    await this.loadAllBooks();
  }
  // 연속 학습일 업데이트
  updateStreak() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const lastStudyDate = this.statistics.lastStudyDate ? new Date(this.statistics.lastStudyDate).toDateString() : null;
    if (lastStudyDate === today) {
      return;
    }
    if (!lastStudyDate) {
      this.statistics.streakDays = 1;
    } else {
      const yesterday = /* @__PURE__ */ new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      const yesterdayStr = yesterday.toDateString();
      if (lastStudyDate === yesterdayStr) {
        this.statistics.streakDays++;
      } else {
        this.statistics.streakDays = 1;
      }
    }
    this.statistics.lastStudyDate = (/* @__PURE__ */ new Date()).toISOString();
  }
  // 최근 7일 활동 계산
  calculateRecentActivity() {
    const activity = [];
    const today = /* @__PURE__ */ new Date();
    for (let i = 6; i >= 0; i--) {
      const date = new Date(today);
      date.setDate(date.getDate() - i);
      const dateStr = date.toDateString();
      const wordsStudied = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        return new Date(word.lastReviewed).toDateString() === dateStr;
      }).length;
      const reviewsCompleted = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        const reviewDate = new Date(word.lastReviewed);
        return reviewDate.toDateString() === dateStr;
      }).length;
      activity.push({
        date: date.toISOString().split("T")[0],
        wordsStudied,
        reviewsCompleted
      });
    }
    return activity;
  }
  // 단어장 폴더 경로 업데이트
  updateVocabularyFolderPath(newPath) {
    this.vocabularyFolderPath = newPath;
    this.initializeVocabularyFolder();
  }
};

// src/infrastructure/llm/LLMServiceAdapter.ts
var LLMServiceAdapter = class {
  constructor(settings) {
    this.llmService = new LLMService(settings);
  }
  async getWordData(request) {
    try {
      const wordInfo = await this.llmService.getWordInfo(request.word);
      return {
        success: true,
        data: {
          word: wordInfo.word,
          meaning: wordInfo.meanings,
          pronunciation: wordInfo.pronunciation,
          examples: wordInfo.examples,
          similarWords: wordInfo.similarWords
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  async testConnection() {
    return await this.llmService.testConnection();
  }
  updateSettings(settings) {
    this.llmService = new LLMService(settings);
  }
};

// src/infrastructure/external/WordServiceAdapter.ts
var WordServiceAdapter = class {
  constructor(settings) {
    this.wordService = new WordService(settings);
  }
  async getWordData(request) {
    try {
      const wordData = await this.wordService.getWordData(request.word);
      return {
        success: true,
        data: {
          word: wordData.word,
          meaning: wordData.meaning,
          pronunciation: wordData.pronunciation,
          examples: wordData.examples || [],
          similarWords: wordData.similarWords || []
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  updateSettings(settings) {
    this.wordService = new WordService(settings);
  }
};

// src/core/ports/services/ITTSServiceAdapter.ts
var TTSServiceAdapter = class {
  constructor(app, settings) {
    this.app = app;
    this.ttsService = TTSServiceFactory.createTTSService(app, settings);
  }
  async speakText(text) {
    await this.ttsService.speakText(text);
  }
  async speakWord(word) {
    await this.ttsService.speakWord(word);
  }
  async speakExample(example) {
    await this.ttsService.speakExample(example);
  }
  stopSpeaking() {
    this.ttsService.stopSpeaking();
  }
  updateSettings(settings) {
    this.ttsService.destroy();
    this.ttsService = TTSServiceFactory.createTTSService(this.app, settings);
  }
  isEnabled() {
    return true;
  }
  getAvailableVoices() {
    const voices = this.ttsService.getAvailableVoices();
    return [];
  }
  async testConnection() {
    return await this.ttsService.testConnection();
  }
  isPaused() {
    return this.ttsService.isPaused();
  }
  resume() {
    this.ttsService.resume();
  }
  pause() {
    this.ttsService.pause();
  }
  destroy() {
    this.ttsService.destroy();
  }
};

// src/shared/container/ServiceRegistry.ts
var ServiceRegistry = class {
  static registerServices(container2, app, settings) {
    container2.registerInstance("app", app);
    container2.registerInstance("settings", settings);
    container2.register("databaseManager", (app2) => {
      return new VocabularyDatabaseManager(
        app2,
        () => {
        },
        // saveCallback - DI에서는 빈 함수로 처리
        settings.vocabularyFolderPath
      );
    }, {
      dependencies: ["app"],
      singleton: true
    });
    container2.register("vocabularyRepository", VocabularyRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("bookRepository", BookRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("wordService", WordServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("llmService", LLMServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("ttsService", TTSServiceAdapter, {
      dependencies: ["app", "settings"]
    });
    container2.register("addWordUseCase", AddWordUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository", "wordService"]
    });
    container2.register("createBookUseCase", CreateBookUseCase, {
      dependencies: ["bookRepository"]
    });
    container2.register("getWordsForReviewUseCase", GetWordsForReviewUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository"]
    });
    container2.register("reviewWordUseCase", ReviewWordUseCase, {
      dependencies: ["vocabularyRepository"]
    });
  }
  static updateSettings(container2, settings) {
    container2.registerInstance("settings", settings);
    if (container2.has("ttsService")) {
      const ttsService = container2.resolve("ttsService");
      ttsService.updateSettings(settings);
    }
    if (container2.has("llmService")) {
      const llmService = container2.resolve("llmService");
      llmService.updateSettings(settings);
    }
    if (container2.has("wordService")) {
      const wordService = container2.resolve("wordService");
      wordService.updateSettings(settings);
    }
  }
};

// src/shared/ErrorBoundary.ts
var import_obsidian11 = require("obsidian");
var ErrorBoundary = class _ErrorBoundary {
  constructor() {
    this.errorHandlers = /* @__PURE__ */ new Map();
    this.isInitialized = false;
  }
  static getInstance() {
    if (!_ErrorBoundary.instance) {
      _ErrorBoundary.instance = new _ErrorBoundary();
    }
    return _ErrorBoundary.instance;
  }
  // 전역 에러 핸들러 초기화
  initialize() {
    if (this.isInitialized)
      return;
    window.addEventListener("error", (event) => {
      var _a;
      this.handleError({
        error: event.error || new Error(event.message),
        context: "Global Error",
        timestamp: Date.now(),
        stackTrace: (_a = event.error) == null ? void 0 : _a.stack
      });
    });
    window.addEventListener("unhandledrejection", (event) => {
      var _a;
      this.handleError({
        error: event.reason instanceof Error ? event.reason : new Error(String(event.reason)),
        context: "Unhandled Promise Rejection",
        timestamp: Date.now(),
        stackTrace: (_a = event.reason) == null ? void 0 : _a.stack
      });
    });
    this.isInitialized = true;
  }
  // 에러 핸들러 등록
  registerHandler(context, handler) {
    this.errorHandlers.set(context, handler);
  }
  // 에러 핸들러 제거
  unregisterHandler(context) {
    this.errorHandlers.delete(context);
  }
  // 에러 처리
  handleError(errorInfo) {
    console.error("Error caught by ErrorBoundary:", errorInfo);
    const userMessage = this.getUserFriendlyMessage(errorInfo.error);
    new import_obsidian11.Notice(userMessage, 0);
    this.errorHandlers.forEach((handler, context) => {
      try {
        handler(errorInfo);
      } catch (handlerError) {
        console.error(`Error in handler for context ${context}:`, handlerError);
      }
    });
  }
  // 안전한 함수 실행 래퍼
  async safeExecute(fn, context, fallback) {
    try {
      return await fn();
    } catch (error) {
      this.handleError({
        error: error instanceof Error ? error : new Error(String(error)),
        context,
        timestamp: Date.now(),
        stackTrace: error instanceof Error ? error.stack : void 0
      });
      return fallback;
    }
  }
  // 동기 함수용 안전한 실행
  safeExecuteSync(fn, context, fallback) {
    try {
      return fn();
    } catch (error) {
      this.handleError({
        error: error instanceof Error ? error : new Error(String(error)),
        context,
        timestamp: Date.now(),
        stackTrace: error instanceof Error ? error.stack : void 0
      });
      return fallback;
    }
  }
  // 사용자 친화적인 에러 메시지 생성
  getUserFriendlyMessage(error) {
    const errorType = error.name;
    const errorMessage = error.message;
    const friendlyMessages = {
      "NetworkError": "\uB124\uD2B8\uC6CC\uD06C \uC5F0\uACB0\uC5D0 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.",
      "TypeError": "\uB370\uC774\uD130 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
      "ReferenceError": "\uD544\uC694\uD55C \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",
      "SyntaxError": "\uB370\uC774\uD130 \uD615\uC2DD\uC5D0 \uC624\uB958\uAC00 \uC788\uC2B5\uB2C8\uB2E4.",
      "QuotaExceededError": "\uC800\uC7A5 \uACF5\uAC04\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4.",
      "SecurityError": "\uBCF4\uC548 \uC815\uCC45\uC73C\uB85C \uC778\uD574 \uC791\uC5C5\uC744 \uC218\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
    };
    if (errorMessage.includes("API") || errorMessage.includes("fetch")) {
      return "API \uC11C\uBE44\uC2A4\uC5D0 \uC77C\uC2DC\uC801\uC778 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
    }
    if (errorMessage.includes("file") || errorMessage.includes("File")) {
      return "\uD30C\uC77C \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uD30C\uC77C\uC774 \uC874\uC7AC\uD558\uB294\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
    }
    if (errorMessage.includes("encrypt") || errorMessage.includes("decrypt")) {
      return "API \uD0A4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC744 \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
    }
    return friendlyMessages[errorType] || `\uC608\uC0C1\uCE58 \uBABB\uD55C \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${errorMessage}`;
  }
  // 에러 복구 시도
  async attemptRecovery(error, context) {
    if (error.message.includes("fetch") || error.message.includes("network")) {
      try {
        await (0, import_obsidian11.requestUrl)({
          url: "https://www.google.com/favicon.ico",
          method: "HEAD"
        });
        return true;
      } catch (e) {
        return false;
      }
    }
    if (error.name === "QuotaExceededError") {
      try {
        localStorage.removeItem("temp-data");
        return true;
      } catch (e) {
        return false;
      }
    }
    return false;
  }
  // 정리
  cleanup() {
    this.errorHandlers.clear();
    this.isInitialized = false;
  }
};

// src/main.ts
var EnglishVocabularyPlugin = class extends import_obsidian12.Plugin {
  async onload() {
    const errorBoundary = ErrorBoundary.getInstance();
    errorBoundary.initialize();
    errorBoundary.registerHandler("VocabularyPlugin", (errorInfo) => {
      var _a;
      if ((_a = errorInfo.context) == null ? void 0 : _a.includes("API")) {
        console.warn("API \uC5D0\uB7EC \uAC10\uC9C0, \uD3F4\uBC31 \uBAA8\uB4DC\uB85C \uC804\uD658");
      }
    });
    await this.loadSettings();
    this.container = container;
    ServiceRegistry.registerServices(this.container, this.app, this.settings);
    this.databaseManager = this.container.resolve("databaseManager");
    this.llmService = new LLMService(this.settings);
    try {
      await this.databaseManager.loadAllBooks();
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uB370\uC774\uD130 \uB85C\uB4DC \uC2E4\uD328:", error);
      await this.migrateFromLegacyData();
    }
    this.addSettingTab(new VocabularySettingTab(this.app, this));
    this.addCommand({
      id: "open-vocabulary-modal",
      name: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      callback: () => {
        new VocabularyModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "open-vocabulary-manager",
      name: "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30",
      callback: () => {
        new VocabularyManagerModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "add-words",
      name: "\uB2E8\uC5B4 \uCD94\uAC00",
      callback: () => {
        new AddWordsModal(this.app, this).open();
      }
    });
    this.addRibbonIcon("book", "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30", () => {
      new VocabularyManagerModal(this.app, this).open();
    });
  }
  onunload() {
    const errorBoundary = ErrorBoundary.getInstance();
    errorBoundary.unregisterHandler("VocabularyPlugin");
    errorBoundary.cleanup();
  }
  async loadSettings() {
    const data = await this.loadData();
    if (data && typeof data === "object" && "settings" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data.settings);
    } else if (data && typeof data === "object" && "apiKey" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
    } else {
      this.settings = Object.assign({}, DEFAULT_SETTINGS);
    }
    await this.migrateApiKeys();
  }
  // API 키 암호화 마이그레이션
  async migrateApiKeys() {
    let needsSave = false;
    if (this.settings.llmApiKey && this.isPlainTextApiKey(this.settings.llmApiKey)) {
      const plainKey = this.settings.llmApiKey;
      this.settings.llmApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.openaiApiKey && this.isPlainTextApiKey(this.settings.openaiApiKey)) {
      const plainKey = this.settings.openaiApiKey;
      this.settings.openaiApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.anthropicApiKey && this.isPlainTextApiKey(this.settings.anthropicApiKey)) {
      const plainKey = this.settings.anthropicApiKey;
      this.settings.anthropicApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.googleApiKey && this.isPlainTextApiKey(this.settings.googleApiKey)) {
      const plainKey = this.settings.googleApiKey;
      this.settings.googleApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (needsSave) {
      await this.saveSettings();
    }
  }
  // API 키가 평문인지 확인하는 헬퍼 함수
  isPlainTextApiKey(apiKey) {
    if (!apiKey)
      return false;
    try {
      const decrypted = decryptApiKey(apiKey);
      return decrypted === apiKey;
    } catch (error) {
      return apiKey.startsWith("sk-") || apiKey.startsWith("sk-ant-") || apiKey.startsWith("AIza") || apiKey.length > 20;
    }
  }
  async saveSettings() {
    await this.saveAllData();
    if (this.llmService) {
      this.llmService = new LLMService(this.settings);
    }
    if (this.container) {
      ServiceRegistry.updateSettings(this.container, this.settings);
    }
  }
  // 기존 data.json에서 MD 파일로 마이그레이션
  async migrateFromLegacyData() {
    try {
      const savedData = await this.loadData();
      if (savedData && savedData.database && Array.isArray(savedData.database.words)) {
        const legacyData = savedData.database;
        if (legacyData.words && legacyData.words.length > 0) {
          for (const word of legacyData.words) {
            try {
              await this.databaseManager.addWord({
                ...word,
                bookId: "default",
                pronunciation: word.pronunciation || ""
              });
            } catch (error) {
              console.warn(`\uB2E8\uC5B4 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328: ${word.word}`, error);
            }
          }
        }
        if (legacyData.settings) {
          await this.databaseManager.updateSettings(legacyData.settings);
        }
      }
    } catch (error) {
      console.error("\uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328:", error);
    }
  }
  // 모든 데이터 저장 (설정만 저장, 단어장 데이터는 MD 파일로 자동 저장됨)
  async saveAllData() {
    const data = {
      settings: this.settings
    };
    await this.saveData(data);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzLnRzIiwgInNyYy91dGlscy50cyIsICJzcmMvc2hhcmVkL0NvbmZpZy50cyIsICJzcmMvc2hhcmVkL1JldHJ5UG9saWN5LnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZS50cyIsICJzcmMvZmVhdHVyZXMvdm9jYWJ1bGFyeS1sZWFybmluZy91aS9Wb2NhYnVsYXJ5TW9kYWwudHMiLCAic3JjL2luZnJhc3RydWN0dXJlL3R0cy9DaGF0dGVyYm94VFRTU2VydmljZS50cyIsICJzcmMvc2hhcmVkL0F1ZGlvTWFuYWdlci50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL0dvb2dsZUNsb3VkVFRTU2VydmljZS50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL1RUU0NhY2hlTWFuYWdlci50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL1RUU1NlcnZpY2UudHMiLCAic3JjL2NvcmUvYWxnb3JpdGhtcy9TcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLnRzIiwgInNyYy9jb3JlL3NlcnZpY2VzL1NwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnRzIiwgInNyYy9mZWF0dXJlcy9ib29rLW1hbmFnZW1lbnQvdWkvVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbC50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2UudHMiLCAic3JjL2ZlYXR1cmVzL2Jvb2stbWFuYWdlbWVudC91aS9BZGRCb29rTW9kYWwudHMiLCAic3JjL2ZlYXR1cmVzL3dvcmQtbWFuYWdlbWVudC91aS9BZGRXb3Jkc01vZGFsLnRzIiwgInNyYy9zaGFyZWQvdmFsaWRhdGlvbi50cyIsICJzcmMvc2hhcmVkL0NhbmNlbGxhdGlvblRva2VuLnRzIiwgInNyYy9zaGFyZWQvY29udGFpbmVyL0RJQ29udGFpbmVyLnRzIiwgInNyYy9jb3JlL2VudGl0aWVzL1ZvY2FidWxhcnkudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL0FkZFdvcmRVc2VDYXNlLnRzIiwgInNyYy9jb3JlL2VudGl0aWVzL0Jvb2sudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL0NyZWF0ZUJvb2tVc2VDYXNlLnRzIiwgInNyYy9jb3JlL3VzZS1jYXNlcy9HZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL1Jldmlld1dvcmRVc2VDYXNlLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvQm9va1JlcG9zaXRvcnlBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZS50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2VBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9leHRlcm5hbC9Xb3JkU2VydmljZUFkYXB0ZXIudHMiLCAic3JjL2NvcmUvcG9ydHMvc2VydmljZXMvSVRUU1NlcnZpY2VBZGFwdGVyLnRzIiwgInNyYy9zaGFyZWQvY29udGFpbmVyL1NlcnZpY2VSZWdpc3RyeS50cyIsICJzcmMvc2hhcmVkL0Vycm9yQm91bmRhcnkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTLCBWb2NhYnVsYXJ5U2V0dGluZ1RhYiB9IGZyb20gJy4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5TW9kYWwgfSBmcm9tICcuL2ZlYXR1cmVzL3ZvY2FidWxhcnktbGVhcm5pbmcvdWkvVm9jYWJ1bGFyeU1vZGFsJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuL1ZvY2FidWxhcnlDYXJkJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCB9IGZyb20gJy4vZmVhdHVyZXMvYm9vay1tYW5hZ2VtZW50L3VpL1ZvY2FidWxhcnlNYW5hZ2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIH0gZnJvbSAnLi9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XHJcbmltcG9ydCB7IEFkZFdvcmRzTW9kYWwgfSBmcm9tICcuL2ZlYXR1cmVzL3dvcmQtbWFuYWdlbWVudC91aS9BZGRXb3Jkc01vZGFsJztcclxuaW1wb3J0IHsgQWRkQm9va01vZGFsIH0gZnJvbSAnLi9mZWF0dXJlcy9ib29rLW1hbmFnZW1lbnQvdWkvQWRkQm9va01vZGFsJztcclxuaW1wb3J0IHsgTExNU2VydmljZSB9IGZyb20gJy4vaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBlbmNyeXB0QXBpS2V5LCBkZWNyeXB0QXBpS2V5IH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG4vLyBESSBDb250YWluZXJcclxuaW1wb3J0IHsgRElDb250YWluZXIsIGNvbnRhaW5lciB9IGZyb20gJy4vc2hhcmVkL2NvbnRhaW5lci9ESUNvbnRhaW5lcic7XHJcbmltcG9ydCB7IFNlcnZpY2VSZWdpc3RyeSB9IGZyb20gJy4vc2hhcmVkL2NvbnRhaW5lci9TZXJ2aWNlUmVnaXN0cnknO1xyXG5cclxuLy8gRXJyb3IgQm91bmRhcnlcclxuaW1wb3J0IHsgRXJyb3JCb3VuZGFyeSB9IGZyb20gJy4vc2hhcmVkL0Vycm9yQm91bmRhcnknO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncztcclxuICAgIGRhdGFiYXNlTWFuYWdlcjogVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcjtcclxuICAgIGxsbVNlcnZpY2U6IExMTVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogRElDb250YWluZXI7XHJcblxyXG4gICAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgICAgIC8vIEVycm9yIEJvdW5kYXJ5IFx1Q0QwOFx1QUUzMFx1RDY1NFxyXG4gICAgICAgIGNvbnN0IGVycm9yQm91bmRhcnkgPSBFcnJvckJvdW5kYXJ5LmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgZXJyb3JCb3VuZGFyeS5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4XHVCQ0M0IFx1QzVEMFx1QjdFQyBcdUQ1NzhcdUI0RTRcdUI3RUMgXHVCNEYxXHVCODVEXHJcbiAgICAgICAgZXJyb3JCb3VuZGFyeS5yZWdpc3RlckhhbmRsZXIoJ1ZvY2FidWxhcnlQbHVnaW4nLCAoZXJyb3JJbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQyBcdUI4NUNcdUM5QzFcclxuICAgICAgICAgICAgaWYgKGVycm9ySW5mby5jb250ZXh0Py5pbmNsdWRlcygnQVBJJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFQSSBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDXHVCMjk0IFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUI2MTBcdUIyOTQgXHVEM0Y0XHVCQzMxIFx1Q0M5OFx1QjlBQ1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdBUEkgXHVDNUQwXHVCN0VDIFx1QUMxMFx1QzlDMCwgXHVEM0Y0XHVCQzMxIFx1QkFBOFx1QjREQ1x1Qjg1QyBcdUM4MDRcdUQ2NTgnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuICAgICAgICAvLyBESSBDb250YWluZXIgXHVDRDA4XHVBRTMwXHVENjU0XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgU2VydmljZVJlZ2lzdHJ5LnJlZ2lzdGVyU2VydmljZXModGhpcy5jb250YWluZXIsIHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QjlFNFx1QjJDOFx1QzgwMCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICB0aGlzLmRhdGFiYXNlTWFuYWdlciA9IHRoaXMuY29udGFpbmVyLnJlc29sdmU8Vm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcj4oJ2RhdGFiYXNlTWFuYWdlcicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExMTSBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDRDA4XHVBRTMwXHVENjU0XHJcbiAgICAgICAgdGhpcy5sbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2UodGhpcy5zZXR0aW5ncyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTUQgXHVEMzBDXHVDNzdDIFx1QUUzMFx1QkMxOCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0REMgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IGRhdGEuanNvblx1QzVEMFx1QzExQyBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNTggXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWlncmF0ZUZyb21MZWdhY3lEYXRhKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVEMEVEIFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVm9jYWJ1bGFyeVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gXHVCQTg1XHVCODM5XHVDNUI0IFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnb3Blbi12b2NhYnVsYXJ5LW1vZGFsJyxcclxuICAgICAgICAgICAgbmFtZTogJ1x1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjQgXHVENTU5XHVDMkI1IFx1QzJEQ1x1Qzc5MScsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkNGNFx1QUUzMCBcdUJBODVcdUI4MzlcdUM1QjQgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdvcGVuLXZvY2FidWxhcnktbWFuYWdlcicsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0Y0XHVBRTMwJyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5ldyBWb2NhYnVsYXJ5TWFuYWdlck1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCBcdUJBODVcdUI4MzlcdUM1QjQgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdhZGQtd29yZHMnLFxyXG4gICAgICAgICAgICBuYW1lOiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgQWRkV29yZHNNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QjlBQ1x1QkNGOCBcdUM1NDRcdUM3NzRcdUNGNTggXHVDRDk0XHVBQzAwIChcdUNDNDUgXHVDNTQ0XHVDNzc0XHVDRjU4KVxyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignYm9vaycsICdcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0Y0XHVBRTMwJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9udW5sb2FkKCkge1xyXG4gICAgICAgIC8vIEVycm9yIEJvdW5kYXJ5IFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgIGNvbnN0IGVycm9yQm91bmRhcnkgPSBFcnJvckJvdW5kYXJ5LmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgZXJyb3JCb3VuZGFyeS51bnJlZ2lzdGVySGFuZGxlcignVm9jYWJ1bGFyeVBsdWdpbicpO1xyXG4gICAgICAgIGVycm9yQm91bmRhcnkuY2xlYW51cCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOUNDIFx1Qjg1Q1x1QjREQyAoXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QzY0MCBcdUJEODRcdUI5QUMpXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcclxuICAgICAgICBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgJ3NldHRpbmdzJyBpbiBkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIFx1RDFCNVx1RDU2OVx1QjQxQyBcdUIzNzBcdUM3NzRcdUQxMzBcdUM1RDBcdUMxMUMgXHVDMTI0XHVDODE1IFx1QkQ4MFx1QkQ4NFx1QjlDQyBcdUNEOTRcdUNEOUNcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEuc2V0dGluZ3MpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgJ2FwaUtleScgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVENjE1XHVDMkREXHVDNzU4IFx1QzEyNFx1QzgxNSBcdUIzNzBcdUM3NzRcdUQxMzBcdUM3NzggXHVBQ0JEXHVDNkIwXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVCMzcwXHVDNzc0XHVEMTMwXHVBQzAwIFx1QzVDNlx1QjI5NCBcdUFDQkRcdUM2QjAgXHVBRTMwXHVCQ0Y4XHVBQzEyIFx1QzBBQ1x1QzZBOVxyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBUEkgXHVEMEE0IFx1QzU1NFx1RDYzOFx1RDY1NCBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNThcclxuICAgICAgICBhd2FpdCB0aGlzLm1pZ3JhdGVBcGlLZXlzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XHJcbiAgICBwcml2YXRlIGFzeW5jIG1pZ3JhdGVBcGlLZXlzKCkge1xyXG4gICAgICAgIGxldCBuZWVkc1NhdmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gbGxtQXBpS2V5XHVBQzAwIFx1RDNDOVx1QkIzOFx1QzczQ1x1Qjg1QyBcdUM4MDBcdUM3QTVcdUI0MThcdUM1QjQgXHVDNzg4XHVCMjk0XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUNFMCBcdUM1NTRcdUQ2MzhcdUQ2NTRcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5sbG1BcGlLZXkgJiYgdGhpcy5pc1BsYWluVGV4dEFwaUtleSh0aGlzLnNldHRpbmdzLmxsbUFwaUtleSkpIHtcclxuICAgICAgICAgICAgY29uc3QgcGxhaW5LZXkgPSB0aGlzLnNldHRpbmdzLmxsbUFwaUtleTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5sbG1BcGlLZXkgPSBlbmNyeXB0QXBpS2V5KHBsYWluS2V5KTtcclxuICAgICAgICAgICAgbmVlZHNTYXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QjJFNFx1Qjk3OCBBUEkgXHVEMEE0XHVCNEU0XHVCM0M0IFx1RDNDOVx1QkIzOFx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NThcdUFDRTAgXHVDNTU0XHVENjM4XHVENjU0IChcdUFFMzBcdUM4NzRcdUM1RDAgXHVDNTU0XHVENjM4XHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUFDQkRcdUM2QjApXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5ICYmIHRoaXMuaXNQbGFpblRleHRBcGlLZXkodGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXkpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYWluS2V5ID0gdGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5ID0gZW5jcnlwdEFwaUtleShwbGFpbktleSk7XHJcbiAgICAgICAgICAgIG5lZWRzU2F2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkgJiYgdGhpcy5pc1BsYWluVGV4dEFwaUtleSh0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSkpIHtcclxuICAgICAgICAgICAgY29uc3QgcGxhaW5LZXkgPSB0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkgPSBlbmNyeXB0QXBpS2V5KHBsYWluS2V5KTtcclxuICAgICAgICAgICAgbmVlZHNTYXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleSAmJiB0aGlzLmlzUGxhaW5UZXh0QXBpS2V5KHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5KSkge1xyXG4gICAgICAgICAgICBjb25zdCBwbGFpbktleSA9IHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5O1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleSA9IGVuY3J5cHRBcGlLZXkocGxhaW5LZXkpO1xyXG4gICAgICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVCQ0MwXHVBQ0JEXHVDMEFDXHVENTZEXHVDNzc0IFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM4MDBcdUM3QTVcclxuICAgICAgICBpZiAobmVlZHNTYXZlKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFQSSBcdUQwQTRcdUFDMDAgXHVEM0M5XHVCQjM4XHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QjI5NCBcdUQ1RUNcdUQzN0MgXHVENTY4XHVDMjE4XHJcbiAgICBwcml2YXRlIGlzUGxhaW5UZXh0QXBpS2V5KGFwaUtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFhcGlLZXkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVEMEE0XHVCOTdDIFx1QkNGNVx1RDYzOFx1RDY1NFx1RDU3NFx1QkNGNFx1QUNFMCBcdUM2RDBcdUJDRjhcdUFDRkMgXHVCMkU0XHVCOTc0XHVCQTc0IFx1RDNDOVx1QkIzOFx1QzczQ1x1Qjg1QyBcdUFDMDRcdUM4RkNcclxuICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gZGVjcnlwdEFwaUtleShhcGlLZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVjcnlwdGVkID09PSBhcGlLZXk7IC8vIFx1QkNGNVx1RDYzOFx1RDY1NCBcdUFDQjBcdUFDRkNcdUFDMDAgXHVDNkQwXHVCQ0Y4XHVBQ0ZDIFx1QUMxOVx1QzczQ1x1QkE3NCBcdUQzQzlcdUJCMzhcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4XHVENTU4XHVCQTc0IFx1RDNDOVx1QkIzOFx1Qzc3QyBcdUFDMDBcdUIyQTVcdUMxMzFcdUM3NzQgXHVDNzg4XHVDNzRDXHJcbiAgICAgICAgICAgIC8vIFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBBUEkgXHVEMEE0IFx1RDMyOFx1RDEzNCBcdUQ2NTVcdUM3NzhcclxuICAgICAgICAgICAgcmV0dXJuIGFwaUtleS5zdGFydHNXaXRoKCdzay0nKSB8fCBhcGlLZXkuc3RhcnRzV2l0aCgnc2stYW50LScpIHx8IGFwaUtleS5zdGFydHNXaXRoKCdBSXphJykgfHwgYXBpS2V5Lmxlbmd0aCA+IDIwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlQWxsRGF0YSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExMTSBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKHRoaXMubGxtU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLmxsbVNlcnZpY2UgPSBuZXcgTExNU2VydmljZSh0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gREkgQ29udGFpbmVyXHVDNUQwIFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcclxuICAgICAgICAgICAgU2VydmljZVJlZ2lzdHJ5LnVwZGF0ZVNldHRpbmdzKHRoaXMuY29udGFpbmVyLCB0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVBRTMwXHVDODc0IGRhdGEuanNvblx1QzVEMFx1QzExQyBNRCBcdUQzMENcdUM3N0NcdUI4NUMgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XHJcbiAgICBwcml2YXRlIGFzeW5jIG1pZ3JhdGVGcm9tTGVnYWN5RGF0YSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBzYXZlZERhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XHJcbiAgICAgICAgICAgIGlmIChzYXZlZERhdGEgJiYgc2F2ZWREYXRhLmRhdGFiYXNlICYmIEFycmF5LmlzQXJyYXkoc2F2ZWREYXRhLmRhdGFiYXNlLndvcmRzKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVnYWN5RGF0YSA9IHNhdmVkRGF0YS5kYXRhYmFzZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNUQwIFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgICAgICAgICAgaWYgKGxlZ2FjeURhdGEud29yZHMgJiYgbGVnYWN5RGF0YS53b3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIGxlZ2FjeURhdGEud29yZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLndvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va0lkOiAnZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZC5wcm9udW5jaWF0aW9uIHx8ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgXHVCMkU4XHVDNUI0IFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OCBcdUMyRTRcdUQzMjg6ICR7d29yZC53b3JkfWAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OFxyXG4gICAgICAgICAgICAgICAgaWYgKGxlZ2FjeURhdGEuc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci51cGRhdGVTZXR0aW5ncyhsZWdhY3lEYXRhLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJBQThcdUI0RTAgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwMFx1QzdBNSAoXHVDMTI0XHVDODE1XHVCOUNDIFx1QzgwMFx1QzdBNSwgXHVCMkU4XHVDNUI0XHVDN0E1IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QjI5NCBNRCBcdUQzMENcdUM3N0NcdUI4NUMgXHVDNzkwXHVCM0Q5IFx1QzgwMFx1QzdBNVx1QjQyOClcclxuICAgIGFzeW5jIHNhdmVBbGxEYXRhKCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzXHJcbiAgICAgICAgfTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKGRhdGEpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUQwQzBcdUM3ODUgXHVDMTIwXHVDNUI4IFx1Q0Q5NFx1QUMwMFxyXG5leHBvcnQgeyBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiwgQWRkQm9va01vZGFsIH07ICIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSwgVEZvbGRlciwgcmVxdWVzdFVybCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBMTE1TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBlbmNyeXB0QXBpS2V5LCBkZWNyeXB0QXBpS2V5LCBtYXNrQXBpS2V5IH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWb2NhYnVsYXJ5U2V0dGluZ3Mge1xyXG4gICAgYXBpS2V5OiBzdHJpbmc7XHJcbiAgICBkZWZhdWx0TGFuZ3VhZ2U6IHN0cmluZztcclxuICAgIHNob3dTaW1pbGFyV29yZHM6IGJvb2xlYW47XHJcbiAgICBzaG93RXhhbXBsZXM6IGJvb2xlYW47XHJcbiAgICBleGFtcGxlc0NvdW50OiBudW1iZXI7XHJcbiAgICAvLyBcdUFDMDEgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVCQ0M0IFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBBUEkgXHVEMEE0XHJcbiAgICBvcGVuYWlBcGlLZXk6IHN0cmluZztcclxuICAgIGFudGhyb3BpY0FwaUtleTogc3RyaW5nO1xyXG4gICAgZ29vZ2xlQXBpS2V5OiBzdHJpbmc7XHJcbiAgICBsbG1Qcm92aWRlcjogJ29wZW5haScgfCAnYW50aHJvcGljJyB8ICdnb29nbGUnO1xyXG4gICAgbGxtTW9kZWw6IHN0cmluZztcclxuICAgIGVuYWJsZUFkdmFuY2VkRmVhdHVyZXM6IGJvb2xlYW47XHJcbiAgICAvLyBcdUJDRjVcdUMyQjUgXHVENjU0XHVCQTc0IFx1QjE5Mlx1Qzc3NCBcdUMxMjRcdUM4MTVcclxuICAgIHJldmlld01vZGFsSGVpZ2h0OiBudW1iZXI7XHJcbiAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDODAwXHVDN0E1IFx1RDNGNFx1QjM1NCBcdUFDQkRcdUI4NUNcclxuICAgIHZvY2FidWxhcnlGb2xkZXJQYXRoOiBzdHJpbmc7XHJcbiAgICAvLyBUVFMgXHVDMTI0XHVDODE1XHJcbiAgICB0dHNFbmFibGVkOiBib29sZWFuO1xyXG4gICAgdHRzUHJvdmlkZXI6ICdjaGF0dGVyYm94JyB8ICdnb29nbGUtY2xvdWQnO1xyXG4gICAgdHRzVm9pY2U6IHN0cmluZztcclxuICAgIHR0c1BsYXliYWNrU3BlZWQ6IG51bWJlcjtcclxuICAgIHR0c0F1dG9QbGF5OiBib29sZWFuO1xyXG4gICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVxyXG4gICAgY2hhdHRlcmJveEFwaVVybDogc3RyaW5nO1xyXG4gICAgY2hhdHRlcmJveEV4YWdnZXJhdGlvbjogbnVtYmVyO1xyXG4gICAgY2hhdHRlcmJveENmZ1dlaWdodDogbnVtYmVyO1xyXG4gICAgY2hhdHRlcmJveFRlbXBlcmF0dXJlOiBudW1iZXI7XHJcbiAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzgwNFx1QzZBOSBcdUMxMjRcdUM4MTVcclxuICAgIGdvb2dsZUNsb3VkVFRTQXBpS2V5OiBzdHJpbmc7XHJcbiAgICBnb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZTogc3RyaW5nO1xyXG4gICAgZ29vZ2xlQ2xvdWRUVFNTcGVha2luZ1JhdGU6IG51bWJlcjtcclxuICAgIGdvb2dsZUNsb3VkVFRTUGl0Y2g6IG51bWJlcjtcclxuICAgIC8vIFRUUyBcdUNFOTBcdUMyREMgXHVDMTI0XHVDODE1XHJcbiAgICB0dHNDYWNoZUVuYWJsZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBWb2NhYnVsYXJ5U2V0dGluZ3MgPSB7XHJcbiAgICBhcGlLZXk6ICcnLFxyXG4gICAgZGVmYXVsdExhbmd1YWdlOiAna28nLFxyXG4gICAgc2hvd1NpbWlsYXJXb3JkczogdHJ1ZSxcclxuICAgIHNob3dFeGFtcGxlczogdHJ1ZSxcclxuICAgIGV4YW1wbGVzQ291bnQ6IDMsXHJcbiAgICBvcGVuYWlBcGlLZXk6ICcnLFxyXG4gICAgYW50aHJvcGljQXBpS2V5OiAnJyxcclxuICAgIGdvb2dsZUFwaUtleTogJycsXHJcbiAgICBsbG1Qcm92aWRlcjogJ29wZW5haScsXHJcbiAgICBsbG1Nb2RlbDogJ2dlbWluaS0xLjAtcHJvLWxhdGVzdCcsXHJcbiAgICBlbmFibGVBZHZhbmNlZEZlYXR1cmVzOiBmYWxzZSxcclxuICAgIHJldmlld01vZGFsSGVpZ2h0OiA4NSxcclxuICAgIHZvY2FidWxhcnlGb2xkZXJQYXRoOiAnVm9jYWJ1bGFyeScsXHJcbiAgICB0dHNFbmFibGVkOiB0cnVlLFxyXG4gICAgdHRzUHJvdmlkZXI6ICdjaGF0dGVyYm94JyxcclxuICAgIHR0c1ZvaWNlOiAnYWxsb3knLFxyXG4gICAgdHRzUGxheWJhY2tTcGVlZDogMS4wLFxyXG4gICAgdHRzQXV0b1BsYXk6IGZhbHNlLFxyXG4gICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVBRTMwXHVCQ0Y4XHVBQzEyXHJcbiAgICBjaGF0dGVyYm94QXBpVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo0MTIzJywgLy8gXHVBQ0JEXHVBQ0UwOiBIVFRQXHVCMjk0IFx1QkNGNFx1QzU0OFx1QzVEMCBcdUNERThcdUM1N0RcdUQ1NjlcdUIyQzhcdUIyRTQuIFx1QUMwMFx1QjJBNVx1RDU1OFx1QkE3NCBIVFRQU1x1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NThcdUMxMzhcdUM2OTQuXHJcbiAgICBjaGF0dGVyYm94RXhhZ2dlcmF0aW9uOiAwLjcsXHJcbiAgICBjaGF0dGVyYm94Q2ZnV2VpZ2h0OiAwLjQsXHJcbiAgICBjaGF0dGVyYm94VGVtcGVyYXR1cmU6IDAuOSxcclxuICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVBRTMwXHVCQ0Y4XHVBQzEyXHJcbiAgICBnb29nbGVDbG91ZFRUU0FwaUtleTogJycsXHJcbiAgICBnb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZTogJ2VuLVVTJyxcclxuICAgIGdvb2dsZUNsb3VkVFRTU3BlYWtpbmdSYXRlOiAxLjAsXHJcbiAgICBnb29nbGVDbG91ZFRUU1BpdGNoOiAwLjAsXHJcbiAgICAvLyBUVFMgXHVDRTkwXHVDMkRDIFx1QzEyNFx1QzgxNVxyXG4gICAgdHRzQ2FjaGVFbmFibGVkOiB0cnVlXHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjQgXHVENTU5XHVDMkI1IFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUMxMjRcdUM4MTUnIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZUJhc2ljU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlTExNU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlVFRTU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlQWR2YW5jZWRTZXR0aW5ncyhjb250YWluZXJFbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVCYXNpY1NldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QUUzMFx1QkNGOCBcdUMxMjRcdUM4MTUnIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QUUzMFx1QkNGOCBcdUM1QjhcdUM1QjQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0IFx1QjczQlx1Qzc0NCBcdUQ0NUNcdUMyRENcdUQ1NjAgXHVDNUI4XHVDNUI0XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2tvJywgJ1x1RDU1Q1x1QUQ2RFx1QzVCNCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbicsICdFbmdsaXNoJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2phJywgJ1x1NjVFNVx1NjcyQ1x1OEE5RScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdExhbmd1YWdlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRMYW5ndWFnZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjQgXHVENDVDXHVDMkRDJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1RDU1OVx1QzJCNVx1RDU2MCBcdUI1NEMgXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUQ1NjhcdUFFRDggXHVENDVDXHVDMkRDXHVENTY5XHVCMkM4XHVCMkU0LicpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTaW1pbGFyV29yZHMpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1NpbWlsYXJXb3JkcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QzYwOFx1QkIzOCBcdUQ0NUNcdUMyREMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVENTU5XHVDMkI1XHVENTYwIFx1QjU0QyBcdUM2MDhcdUJCMzhcdUI0RTRcdUM3NDQgXHVENTY4XHVBRUQ4IFx1RDQ1Q1x1QzJEQ1x1RDU2OVx1QjJDOFx1QjJFNC4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RXhhbXBsZXMpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0V4YW1wbGVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNjA4XHVCQjM4IFx1QUMxQ1x1QzIxOCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ0NUNcdUMyRENcdUQ1NjAgXHVDNjA4XHVCQjM4XHVDNzU4IFx1QUMxQ1x1QzIxOFx1Qjk3QyBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDEsIDEwLCAxKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YW1wbGVzQ291bnQpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YW1wbGVzQ291bnQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUxMTVNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0xMTSBBUEkgXHVDMTI0XHVDODE1JyB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUFDRTBcdUFFMDkgXHVBRTMwXHVCMkE1IFx1RDY1Q1x1QzEzMVx1RDY1NCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdMTE0gQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU1QyBcdUFDRTBcdUFFMDkgXHVBRTMwXHVCMkE1XHVDNzQ0IFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU2OVx1QjJDOFx1QjJFNC4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBZHZhbmNlZEZlYXR1cmVzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUFkdmFuY2VkRmVhdHVyZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdMTE0gXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QzBBQ1x1QzZBOVx1RDU2MCBMTE0gQVBJIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdvcGVuYWknLCAnT3BlbkFJIChHUFQpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2FudGhyb3BpYycsICdBbnRocm9waWMgKENsYXVkZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ29vZ2xlJywgJ0dvb2dsZSAoR2VtaW5pKScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXIpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXIgPSB2YWx1ZSBhcyAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dvb2dsZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnb3BlbmFpJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Nb2RlbCA9ICdncHQtNC4xJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnYW50aHJvcGljJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Nb2RlbCA9ICdjbGF1ZGUtMy01LXNvbm5ldCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ2dvb2dsZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnZ2VtaW5pLTIuNS1mbGFzaCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZU1vZGVsU2VsZWN0aW9uKGNvbnRhaW5lckVsKTtcclxuXHJcbiAgICAgICAgLy8gXHVBQzAxIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1QkNDNCBBUEkgXHVEMEE0IFx1QzEyNFx1QzgxNVxyXG4gICAgICAgIHRoaXMuY3JlYXRlQXBpS2V5U2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0FQSSBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1RDYwNFx1QzdBQyBcdUMxMjBcdUQwRERcdUI0MUMgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVDNzU4IEFQSSBcdUQwQTRcdUFDMDAgXHVDNjJDXHVCQzE0XHVCOTc0XHVBQzhDIFx1QzEyNFx1QzgxNVx1QjQxOFx1QzVDOFx1QjI5NFx1QzlDMCBcdUQxNENcdUMyQTRcdUQyQjhcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzkxMS4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2UodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBsbG1TZXJ2aWNlLnRlc3RDb25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBBUEkgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNSEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBBUEkgXHVDNUYwXHVBQ0IwIFx1QzJFNFx1RDMyODogJyArIHJlc3VsdC5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQVBJIFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjg6ICcgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlTW9kZWxTZWxlY3Rpb24oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBUEkgXHVCQUE4XHVCMzc4JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QzBBQ1x1QzZBOVx1RDU2MCBMTE0gXHVCQUE4XHVCMzc4XHVDNzQ0IFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Qcm92aWRlcjtcclxuICAgICAgICAgICAgICAgIGlmIChwcm92aWRlciA9PT0gJ29wZW5haScpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNC4xJywgJ0dQVC00LjEnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNG8nLCAnR1BULTRvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTRvLW1pbmknLCAnR1BULTRvIE1pbmknKSAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNC4xLWxvbmcnLCAnR1BULTQuMSAoTG9uZyBDb250ZXh0KScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dwdC00LjUtcHJldmlldycsICdHUFQtNC41IFByZXZpZXcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNC41LXByZXZpZXctMicsICdHUFQtNC41IFByZXZpZXcgMicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm92aWRlciA9PT0gJ2FudGhyb3BpYycpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGF1ZGUgMy41IFx1QkFBOFx1QjM3OFx1QjRFNFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy01LXNvbm5ldCcsICdDbGF1ZGUgMy41IFNvbm5ldCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTUtaGFpa3UnLCAnQ2xhdWRlIDMuNSBIYWlrdScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTUtb3B1cycsICdDbGF1ZGUgMy41IE9wdXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGF1ZGUgMy43IFx1QkFBOFx1QjM3OFx1QjRFNFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy03LXNvbm5ldCcsICdDbGF1ZGUgMy43IFNvbm5ldCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTctaGFpa3UnLCAnQ2xhdWRlIDMuNyBIYWlrdScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTctb3B1cycsICdDbGF1ZGUgMy43IE9wdXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy01LWZsYXNoJywgJ0NsYXVkZSAzLjUgRmxhc2gnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdnb29nbGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ2VtaW5pLTEuNS1wcm8tbGF0ZXN0JywgJ0dlbWluaSAxLjUgUHJvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ2VtaW5pLTIuNS1mbGFzaCcsICdHZW1pbmkgMi41IEZsYXNoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ2VtaW5pLTIuNS1wcm8nLCAnR2VtaW5pIDIuNSBQcm8nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdnZW1pbmktMS41LWZsYXNoLWxhdGVzdCcsICdHZW1pbmkgMS41IEZsYXNoJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Nb2RlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVBcGlLZXlTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAvLyBPcGVuQUkgQVBJIFx1RDBBNFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnT3BlbkFJIEFQSSBcdUQwQTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnT3BlbkFJIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LiAoc2stLi4uXHVCODVDIFx1QzJEQ1x1Qzc5MSknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRLZXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignc2stLi4uJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFza2VkS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVDMEFDXHVDNkE5XHVDNzkwXHVBQzAwIFx1Qzc4NVx1QjgyNVx1RDU1QyBcdUFDMTJcdUM3NzQgXHVCOUM4XHVDMkE0XHVEMEI5XHVCNDFDIFx1QUMxMlx1QUNGQyBcdUIyRTRcdUI5NzRcdUJBNzQgXHVDMEM4XHVCODVDXHVDNkI0IFx1RDBBNFx1Qjg1QyBcdUFDMDRcdUM4RkNcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBtYXNrZWRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZEtleSA9IGVuY3J5cHRBcGlLZXkodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpQXBpS2V5ID0gZW5jcnlwdGVkS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFudGhyb3BpYyBBUEkgXHVEMEE0XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBbnRocm9waWMgQVBJIFx1RDBBNCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdBbnRocm9waWMgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIChzay1hbnQtLi4uXHVCODVDIFx1QzJEQ1x1Qzc5MSknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRLZXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignc2stYW50LS4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBlbmNyeXB0QXBpS2V5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSA9IGVuY3J5cHRlZEtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBHb29nbGUgQVBJIFx1RDBBNFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnR29vZ2xlIEFQSSBcdUQwQTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnR29vZ2xlIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEtleSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUFwaUtleTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlY3J5cHRlZEtleSA9IGRlY3J5cHRBcGlLZXkoY3VycmVudEtleSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXNrZWRLZXkgPSBtYXNrQXBpS2V5KGRlY3J5cHRlZEtleSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdBSXphLi4uJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFza2VkS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBtYXNrZWRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZEtleSA9IGVuY3J5cHRBcGlLZXkodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQXBpS2V5ID0gZW5jcnlwdGVkS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVBZHZhbmNlZFNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QUNFMFx1QUUwOSBcdUMxMjRcdUM4MTUnIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUQzRjRcdUIzNTQgXHVCQUE5XHVCODVEIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgIGNvbnN0IGZvbGRlcnMgPSB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcik7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzgwMFx1QzdBNSBcdUQzRjRcdUIzNTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDMwQ1x1Qzc3Q1x1QjRFNFx1Qzc3NCBcdUM4MDBcdUM3QTVcdUI0MjAgXHVEM0Y0XHVCMzU0XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4gKFx1QUUzMFx1QkNGOFx1QUMxMjogVm9jYWJ1bGFyeSknKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9sZGVycy5mb3JFYWNoKGZvbGRlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKGZvbGRlci5wYXRoLCBmb2xkZXIucGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCk7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVZvY2FidWxhcnlGb2xkZXJQYXRoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkcm9wZG93bjtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVCQ0Y1XHVDMkI1IFx1RDY1NFx1QkE3NCBcdUIxOTJcdUM3NzQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCQ0Y1XHVDMkI1IFx1QkFBOFx1QjJFQ1x1Qzc1OCBcdUIxOTJcdUM3NzRcdUI5N0MgXHVENjU0XHVCQTc0IFx1QjE5Mlx1Qzc3NFx1Qzc1OCBcdUJDMzFcdUJEODRcdUM3MjhcdUI4NUMgXHVDMTI0XHVDODE1XHVENTU4XHVDMTM4XHVDNjk0LiAoXHVBRTMwXHVCQ0Y4XHVBQzEyOiA4NSUpJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDUwLCA5NSwgNSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodClcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3N0NcdUM3N0MgXHVENTU5XHVDMkI1IFx1QkFBOVx1RDQ1QycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ1NThcdUI4RThcdUM1RDAgXHVENTU5XHVDMkI1XHVENTYwIFx1QjJFOFx1QzVCNFx1Qzc1OCBcdUJBQTlcdUQ0NUMgXHVBQzFDXHVDMjE4XHVCOTdDIFx1QzEyNFx1QzgxNVx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoNSwgNTAsIDUpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyPy5nZXREYXRhRm9yU2F2ZSgpPy5zZXR0aW5ncz8uZGFpbHlHb2FsIHx8IDEwKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXI/LnVwZGF0ZVNldHRpbmdzKHsgZGFpbHlHb2FsOiB2YWx1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUJDRjVcdUMyQjUgXHVBQzA0XHVBQ0E5IChcdUM3N0MpJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUIyRTRcdUMyREMgXHVCQ0Y1XHVDMkI1XHVENTYwIFx1QUMwNFx1QUNBOVx1Qzc0NCBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDEsIDMwLCAxKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8uZ2V0RGF0YUZvclNhdmUoKT8uc2V0dGluZ3M/LnJldmlld0ludGVydmFsIHx8IDEpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8udXBkYXRlU2V0dGluZ3MoeyByZXZpZXdJbnRlcnZhbDogdmFsdWUgfSk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVUVFNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdUVFMgKFx1Qzc0Q1x1QzEzMSBcdUM3N0RcdUFFMzApIFx1QzEyNFx1QzgxNScgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHR0c1RvZ2dsZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1RUUyBcdUQ2NUNcdUMxMzFcdUQ2NTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0XHVDNjQwIFx1QzYwOFx1QkIzOFx1Qzc0NCBcdUM3NENcdUMxMzFcdUM3M0NcdUI4NUMgXHVDNzdEXHVDNUI0XHVDOEZDXHVCMjk0IFx1QUUzMFx1QjJBNVx1Qzc0NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzRW5hYmxlZClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNFbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVFRTIFx1QzEyNFx1QzgxNSBVSSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRUU1NldHRpbmdzVmlzaWJpbGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBUVFMgXHVDODFDXHVBQ0Y1XHVDNzkwIFx1QzEyMFx1RDBERFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnVFRTIFx1QzgxQ1x1QUNGNVx1Qzc5MCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgVFRTIFx1QzExQ1x1QkU0NFx1QzJBNFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCd0dHMtcHJvdmlkZXItc2V0dGluZycpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2hhdHRlcmJveCcsICdDaGF0dGVyYm94IFRUUyAoXHVCODVDXHVDRUVDKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdnb29nbGUtY2xvdWQnLCAnR29vZ2xlIENsb3VkIFRleHQtdG8tU3BlZWNoJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQcm92aWRlcilcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQcm92aWRlciA9IHZhbHVlIGFzICdjaGF0dGVyYm94JyB8ICdnb29nbGUtY2xvdWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVFRTUHJvdmlkZXJTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBDaGF0dGVyYm94IFRUUyBcdUMxMjRcdUM4MTVcclxuICAgICAgICB0aGlzLmNyZWF0ZUNoYXR0ZXJib3hUVFNTZXR0aW5ncyhjb250YWluZXJFbCk7XHJcblxyXG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgdGhpcy5jcmVhdGVHb29nbGVDbG91ZFRUU1NldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuXHJcbiAgICAgICAgLy8gXHVDNzkwXHVCM0Q5IFx1QzdBQ1x1QzBERCBcdUMxMjRcdUM4MTUgKFx1QUNGNVx1RDFCNSlcclxuICAgICAgICBjb25zdCBhdXRvUGxheVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Qzc5MFx1QjNEOSBcdUM3QUNcdUMwREQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0IFx1Q0U3NFx1QjREQ1x1QUMwMCBcdUQ0NUNcdUMyRENcdUI0MjAgXHVCNTRDIFx1Qzc5MFx1QjNEOVx1QzczQ1x1Qjg1QyBcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzdEXHVDNUI0XHVDOTBEXHVCMkM4XHVCMkU0LicpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygndHRzLWF1dG9wbGF5LXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNBdXRvUGxheSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNBdXRvUGxheSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBUVFMgXHVDRTkwXHVDMkRDIFx1QUQwMFx1QjlBQyBcdUMxMzlcdUMxNThcclxuICAgICAgICB0aGlzLmNyZWF0ZVRUU0NhY2hlU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Q0QwOFx1QUUzMCBcdUMwQzFcdUQwREMgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgdGhpcy51cGRhdGVUVFNTZXR0aW5nc1Zpc2liaWxpdHkoKTtcclxuICAgICAgICAvLyBcdUM4MUNcdUFDRjVcdUM3OTBcdUJDQzQgXHVDMTI0XHVDODE1IFx1Q0QwOFx1QUUzMFx1RDY1NFxyXG4gICAgICAgIHRoaXMudXBkYXRlVFRTUHJvdmlkZXJTZXR0aW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcG9wdWxhdGVDaGF0dGVyYm94Vm9pY2VEcm9wZG93bihkcm9wZG93bjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDOUMwXHVDNkQwIFx1Qzc0Q1x1QzEzMVx1QjRFNCAoT3BlbkFJIFx1RDYzOFx1RDY1OClcclxuICAgICAgICBjb25zdCBjaGF0dGVyYm94Vm9pY2VzID0gW1xyXG4gICAgICAgICAgICB7IHZhbHVlOiAnYWxsb3knLCBuYW1lOiAnQWxsb3kgKFx1QzkxMVx1QzEzMVx1QzgwMSknIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdlY2hvJywgbmFtZTogJ0VjaG8gKFx1QjBBOFx1QzEzMSknIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdmYWJsZScsIG5hbWU6ICdGYWJsZSAoXHVDNjAxXHVBRDZEXHVDMkREKScgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ29ueXgnLCBuYW1lOiAnT255eCAoXHVBRTRBXHVDNzQwIFx1QjBBOFx1QzEzMSknIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdub3ZhJywgbmFtZTogJ05vdmEgKFx1QzVFQ1x1QzEzMSknIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdzaGltbWVyJywgbmFtZTogJ1NoaW1tZXIgKFx1QkQ4MFx1QjREQ1x1QjdFQ1x1QzZCNCBcdUM1RUNcdUMxMzEpJyB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnY3VzdG9tJywgbmFtZTogJ0N1c3RvbSAoXHVDMEFDXHVDNkE5XHVDNzkwIFx1QzgxNVx1Qzc1OCknIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICAvLyBDaGF0dGVyYm94IFx1Qzc0Q1x1QzEzMVx1QjRFNCBcdUNEOTRcdUFDMDBcclxuICAgICAgICBjaGF0dGVyYm94Vm9pY2VzLmZvckVhY2gob3B0aW9uID0+IHtcclxuICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG9wdGlvbi52YWx1ZSwgb3B0aW9uLm5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUMyRTRcdUM4MUMgXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOSBcdUFDMDBcdUIyQTVcdUQ1NUMgXHVDNjAxXHVDNUI0IFx1Qzc0Q1x1QzEzMVx1QjRFNCBcdUNEOTRcdUFDMDBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB2b2ljZXMgPSBzcGVlY2hTeW50aGVzaXMuZ2V0Vm9pY2VzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hWb2ljZXMgPSB2b2ljZXMuZmlsdGVyKHZvaWNlID0+IFxyXG4gICAgICAgICAgICAgICAgdm9pY2UubGFuZy5zdGFydHNXaXRoKCdlbi0nKSAmJiBcclxuICAgICAgICAgICAgICAgICF2b2ljZS5sYW5nLmluY2x1ZGVzKCdrbycpICYmXHJcbiAgICAgICAgICAgICAgICAhY2hhdHRlcmJveFZvaWNlcy5zb21lKG9wdCA9PiBvcHQudmFsdWUgPT09IHZvaWNlLm5hbWUpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZW5nbGlzaFZvaWNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUFENkNcdUJEODRcdUMxMjAgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJy0tLScsICctLS0gXHVDMkRDXHVDMkE0XHVEMTVDIFx1Qzc0Q1x1QzEzMSAtLS0nKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZW5nbGlzaFZvaWNlcy5mb3JFYWNoKHZvaWNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGAke3ZvaWNlLm5hbWV9ICgke3ZvaWNlLmxhbmd9KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKHZvaWNlLm5hbWUsIGRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdUM3NENcdUMxMzEgXHVCQUE5XHVCODVEXHVDNzQ0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVUVFNTZXR0aW5nc1Zpc2liaWxpdHkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgaXNFbmFibGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzRW5hYmxlZDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUJBQThcdUI0RTAgVFRTIFx1QUQwMFx1QjgyOCBcdUMxMjRcdUM4MTVcdUI0RTRcclxuICAgICAgICBjb25zdCBhbGxUdHNTZXR0aW5ncyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgICAgICAgJy50dHMtcHJvdmlkZXItc2V0dGluZywgLmNoYXR0ZXJib3gtYXBpLXVybC1zZXR0aW5nLCAuY2hhdHRlcmJveC12b2ljZS1zZXR0aW5nLCAuY2hhdHRlcmJveC1leGFnZ2VyYXRpb24tc2V0dGluZywgLmNoYXR0ZXJib3gtY2ZnLXNldHRpbmcsIC5jaGF0dGVyYm94LXRlbXBlcmF0dXJlLXNldHRpbmcsIC5nb29nbGUtY2xvdWQtdHRzLWd1aWRlLCAuZ29vZ2xlLWNsb3VkLWFwaS1rZXktc2V0dGluZywgLmdvb2dsZS1jbG91ZC1sYW5ndWFnZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXZvaWNlLXNldHRpbmcsIC5nb29nbGUtY2xvdWQtc3BlYWtpbmctcmF0ZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXBpdGNoLXNldHRpbmcsIC50dHMtYXV0b3BsYXktc2V0dGluZywgLnR0cy1jYWNoZS1oZWFkZXIsIC50dHMtY2FjaGUtZW5hYmxlZC1zZXR0aW5nLCAudHRzLWNhY2hlLWluZm8tc2V0dGluZywgLnR0cy1jYWNoZS1jbGVhci1zZXR0aW5nJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYWxsVHRzU2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHNldHRpbmcgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChpc0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3NldHRpbmdzLWRpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdzZXR0aW5ncy1lbmFibGVkJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3ducyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXJzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvZ2dsZXMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBidXR0b25zLmZvckVhY2goYnRuID0+IChidG4gYXMgSFRNTEJ1dHRvbkVsZW1lbnQpLmRpc2FibGVkID0gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25zLmZvckVhY2goZGQgPT4gKGRkIGFzIEhUTUxTZWxlY3RFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHNsaWRlcnMuZm9yRWFjaChzbGlkZXIgPT4gKHNsaWRlciBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZXMuZm9yRWFjaCh0b2dnbGUgPT4gKHRvZ2dsZSBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3NldHRpbmdzLWVuYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ3NldHRpbmdzLWRpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3ducyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXJzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvZ2dsZXMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBidXR0b25zLmZvckVhY2goYnRuID0+IChidG4gYXMgSFRNTEJ1dHRvbkVsZW1lbnQpLmRpc2FibGVkID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bnMuZm9yRWFjaChkZCA9PiAoZGQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLmRpc2FibGVkID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXJzLmZvckVhY2goc2xpZGVyID0+IChzbGlkZXIgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZXMuZm9yRWFjaCh0b2dnbGUgPT4gKHRvZ2dsZSBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IHRydWUpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUVFNcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDFDIFx1QUNCRFx1QzZCMCBcdUM4MUNcdUFDRjVcdUM3OTBcdUJDQzQgXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGlmIChpc0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVUVFNQcm92aWRlclNldHRpbmdzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHRlc3RDaGF0dGVyYm94Q29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hBcGlVcmx9L3YxL2F1ZGlvL3NwZWVjaGAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiAnQ29ubmVjdGlvbiB0ZXN0JyxcclxuICAgICAgICAgICAgICAgICAgICB2b2ljZTogJ2FsbG95J1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODQgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNSEnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVDMTFDXHVCQzg0IFx1Qzc1MVx1QjJGNSBcdUM2MjRcdUI5NTg6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2hhdHRlcmJveCBUVFMgXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0IFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjguIFx1QzExQ1x1QkM4NFx1QUMwMCBcdUMyRTRcdUQ1ODkgXHVDOTExXHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQ2hhdHRlcmJveFRUU1NldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIC8vIENoYXR0ZXJib3ggQVBJIFVSTCBcdUMxMjRcdUM4MTVcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0NoYXR0ZXJib3ggVFRTIEFQSSBVUkwnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0XHVDNzU4IFVSTFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIChcdUFFMzBcdUJDRjhcdUFDMTI6IGh0dHA6Ly9sb2NhbGhvc3Q6NDEyMyknKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2NoYXR0ZXJib3gtYXBpLXVybC1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMycpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveEFwaVVybClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94QXBpVXJsID0gdmFsdWUgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMyc7IC8vIFx1QUUzMFx1QkNGOFx1QUMxMjogSFRUUCAoXHVCQ0Y0XHVDNTQ4IFx1QzcwNFx1RDVEOClcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4JylcclxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODQgXHVDNUYwXHVBQ0IwXHVDNzQ0IFx1RDE0Q1x1QzJBNFx1RDJCOFx1RDU2OVx1QjJDOFx1QjJFNCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCBcdUM5MTEuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0Q2hhdHRlcmJveENvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gQ2hhdHRlcmJveCBcdUM3NENcdUMxMzEgXHVDMTIwXHVEMEREXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3NENcdUMxMzEgXHVDMTIwXHVEMEREJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0NoYXR0ZXJib3ggVFRTXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUM3NENcdUMxMzFcdUM3NDQgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnY2hhdHRlcmJveC12b2ljZS1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVDaGF0dGVyYm94Vm9pY2VEcm9wZG93bihkcm9wZG93bik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJylcclxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdcdUMxMjBcdUQwRERcdUQ1NUMgXHVDNzRDXHVDMTMxXHVDNzNDXHVCODVDIFx1QzBEOFx1RDUwQyBcdUQxNERcdUMyQTRcdUQyQjhcdUI5N0MgXHVDN0FDXHVDMEREXHVENTY5XHVCMkM4XHVCMkU0JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDN0FDXHVDMEREIFx1QzkxMS4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsYXlDaGF0dGVyYm94Vm9pY2VQcmV2aWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNzRDXHVDMTMxIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3NENcdUMxMzEgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIENoYXR0ZXJib3ggVFRTIFx1QzgwNFx1QzZBOSBcdUMxMjRcdUM4MTVcdUI0RTRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QUMxMFx1QzgxNSBcdUQ0NUNcdUQ2MDQgXHVBQzE1XHVCM0M0IChFeGFnZ2VyYXRpb24pJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1Qzc0Q1x1QzEzMVx1Qzc1OCBcdUFDMTBcdUM4MTUgXHVENDVDXHVENjA0IFx1QUMxNVx1QjNDNFx1Qjk3QyBcdUM4NzBcdUM4MDhcdUQ1NjlcdUIyQzhcdUIyRTQuICgwLjI1ID0gXHVDNTdEXHVENTY4LCAyLjAgPSBcdUFDMTVcdUQ1NjgpJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCdjaGF0dGVyYm94LWV4YWdnZXJhdGlvbi1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAuMjUsIDIuMCwgMC4wNSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94RXhhZ2dlcmF0aW9uKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94RXhhZ2dlcmF0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ0ZHIFx1QUMwMFx1QzkxMVx1Q0U1OCAoQ0ZHIFdlaWdodCknKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxIFx1QzBERFx1QzEzMVx1Qzc1OCBcdUFDMDBcdUM3NzRcdUIzNThcdUMyQTQgXHVBQzE1XHVCM0M0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKDAuMCA9IFx1QzU3RFx1RDU2OCwgMS4wID0gXHVBQzE1XHVENTY4KScpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnY2hhdHRlcmJveC1jZmctc2V0dGluZycpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLjAsIDEuMCwgMC4wNSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94Q2ZnV2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94Q2ZnV2VpZ2h0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNjI4XHVCM0M0IChUZW1wZXJhdHVyZSknKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxIFx1QzBERFx1QzEzMVx1Qzc1OCBcdUNDM0RcdUM3NThcdUMxMzFcdUM3NDQgXHVDODcwXHVDODA4XHVENTY5XHVCMkM4XHVCMkU0LiAoMC4wNSA9IFx1Qzc3Q1x1QUQwMFx1QzEzMSwgNS4wID0gXHVDQzNEXHVDNzU4XHVDMTMxKScpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnY2hhdHRlcmJveC10ZW1wZXJhdHVyZS1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAuMDUsIDUuMCwgMC4wNSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94VGVtcGVyYXR1cmUpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hUZW1wZXJhdHVyZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlR29vZ2xlQ2xvdWRUVFNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzBBQ1x1QzZBOSBcdUFDMDBcdUM3NzRcdUI0RENcclxuICAgICAgICBjb25zdCBndWlkZUVsID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgXHJcbiAgICAgICAgICAgIGNsczogJ2dvb2dsZS1jbG91ZC10dHMtZ3VpZGUgZ29vZ2xlLWNsb3VkLWFwaS1rZXktc2V0dGluZycsXHJcbiAgICAgICAgICAgIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tYm90dG9tOiAxNXB4OyBwYWRkaW5nOiAxMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7IGJvcmRlci1yYWRpdXM6IDVweDsgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOycgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGd1aWRlRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnXHVEODNEXHVERDI3IEdvb2dsZSBDbG91ZCBUVFMgXHVDMTI0XHVDODE1IFx1QUMwMFx1Qzc3NFx1QjREQycsIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW46IDAgMCAxMHB4IDA7IGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOycgfSB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdGVwc0xpc3QgPSBndWlkZUVsLmNyZWF0ZUVsKCdvbCcsIHsgYXR0cjogeyBzdHlsZTogJ21hcmdpbjogMDsgcGFkZGluZy1sZWZ0OiAyMHB4OyBsaW5lLWhlaWdodDogMS42OycgfSB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdGVwMSA9IHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuICAgICAgICBzdGVwMS5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnR29vZ2xlIENsb3VkIENvbnNvbGUgXHVDODExXHVDMThEOicgfSk7XHJcbiAgICAgICAgc3RlcDEuYXBwZW5kVGV4dCgnICcpO1xyXG4gICAgICAgIGNvbnN0IHN0ZXAxTGluayA9IHN0ZXAxLmNyZWF0ZUVsKCdhJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbScsXHJcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbScsXHJcbiAgICAgICAgICAgIGF0dHI6IHsgc3R5bGU6ICdjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsnIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzdGVwMUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbScsICdfYmxhbmsnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdGVwMiA9IHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuICAgICAgICBzdGVwMi5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnXHVENTA0XHVCODVDXHVDODFEXHVEMkI4IFx1QzEyMFx1RDBERC9cdUMwRERcdUMxMzE6JyB9KTtcclxuICAgICAgICBzdGVwMi5hcHBlbmRUZXh0KCcgXHVBRTMwXHVDODc0IFx1RDUwNFx1Qjg1Q1x1QzgxRFx1RDJCOFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUFDNzBcdUIwOTggXHVDMEM4IFx1RDUwNFx1Qjg1Q1x1QzgxRFx1RDJCOFx1Qjk3QyBcdUMwRERcdUMxMzFcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc3RlcDMgPSBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcbiAgICAgICAgc3RlcDMuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1RleHQtdG8tU3BlZWNoIEFQSSBcdUQ2NUNcdUMxMzFcdUQ2NTQ6JyB9KTtcclxuICAgICAgICBzdGVwMy5hcHBlbmRUZXh0KCcgJyk7XHJcbiAgICAgICAgY29uc3Qgc3RlcDNMaW5rID0gc3RlcDMuY3JlYXRlRWwoJ2EnLCB7XHJcbiAgICAgICAgICAgIHRleHQ6ICdBUEkgXHVCNzdDXHVDNzc0XHVCRTBDXHVCN0VDXHVCOUFDXHVDNUQwXHVDMTFDIFx1RDY1Q1x1QzEzMVx1RDY1NCcsXHJcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2xpYnJhcnkvdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tJyxcclxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ2NvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOycgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN0ZXAzTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93Lm9wZW4oJ2h0dHBzOi8vY29uc29sZS5jbG91ZC5nb29nbGUuY29tL2FwaXMvbGlicmFyeS90ZXh0dG9zcGVlY2guZ29vZ2xlYXBpcy5jb20nLCAnX2JsYW5rJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc3RlcDQgPSBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcbiAgICAgICAgc3RlcDQuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ0FQSSBcdUQwQTQgXHVDMEREXHVDMTMxOicgfSk7XHJcbiAgICAgICAgc3RlcDQuYXBwZW5kVGV4dCgnIFx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUM3NzhcdUM5OUQgXHVDODE1XHVCQ0Y0ID4gQVBJIFx1RDBBNCA+IFx1QzBDOCBBUEkgXHVEMEE0IFx1QzBERFx1QzEzMScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHN0ZXA1ID0gc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScpO1xyXG4gICAgICAgIHN0ZXA1LmNyZWF0ZUVsKCdzdHJvbmcnLCB7IHRleHQ6ICdBUEkgXHVEMEE0IFx1QzgxQ1x1RDU1QyBcdUMxMjRcdUM4MTUgKFx1QUQ4Q1x1QzdBNSk6JyB9KTtcclxuICAgICAgICBzdGVwNS5hcHBlbmRUZXh0KCcgXHVEMEE0IFx1QzgxQ1x1RDU1QyA+IEFQSSBcdUM4MUNcdUQ1NUMgPiBDbG91ZCBUZXh0LXRvLVNwZWVjaCBBUEkgXHVDMTIwXHVEMEREJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgd2FybmluZ0VsID0gZ3VpZGVFbC5jcmVhdGVFbCgnZGl2JywgeyBcclxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDEwcHg7IHBhZGRpbmc6IDhweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvci1yZ2IpOyBib3JkZXItcmFkaXVzOiAzcHg7IGZvbnQtc2l6ZTogMC45ZW07JyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2FybmluZ0VsLmFwcGVuZFRleHQoJ1x1MjZBMFx1RkUwRiAnKTtcclxuICAgICAgICB3YXJuaW5nRWwuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1x1QzkxMVx1QzY5NDonIH0pO1xyXG4gICAgICAgIHdhcm5pbmdFbC5hcHBlbmRUZXh0KCcgVGV4dC10by1TcGVlY2ggQVBJXHVBQzAwIFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM3NDAgXHVBQ0JEXHVDNkIwIFwiQVBJX0tFWV9TRVJWSUNFX0JMT0NLRURcIiBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTY5XHVCMkM4XHVCMkU0LicpO1xyXG5cclxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgQVBJIFx1RDBBNCBcdUMxMjRcdUM4MTVcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0dvb2dsZSBDbG91ZCBUVFMgQVBJIFx1RDBBNCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdHb29nbGUgQ2xvdWQgVGV4dC10by1TcGVlY2ggQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCdnb29nbGUtY2xvdWQtYXBpLWtleS1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQUl6YS4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBlbmNyeXB0QXBpS2V5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTQXBpS2V5ID0gZW5jcnlwdGVkS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNUYwXHVBQ0IwXHVDNzQ0IFx1RDE0Q1x1QzJBNFx1RDJCOFx1RDU2OVx1QjJDOFx1QjJFNCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCBcdUM5MTEuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0R29vZ2xlQ2xvdWRDb25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1QzVGMFx1QUNCMCBcdUQxNENcdUMyQTRcdUQyQjgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBcdUM1QjhcdUM1QjQgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM1QjhcdUM1QjQgXHVDRjU0XHVCNERDJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QzBBQ1x1QzZBOVx1RDU2MCBcdUM1QjhcdUM1QjQgXHVDRjU0XHVCNERDXHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC1sYW5ndWFnZS1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUycsICdFbmdsaXNoIChVUyknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tR0InLCAnRW5nbGlzaCAoVUspJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUFVJywgJ0VuZ2xpc2ggKEFVKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1JTicsICdFbmdsaXNoIChJbmRpYSknKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTTGFuZ3VhZ2VDb2RlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTTGFuZ3VhZ2VDb2RlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVHb29nbGVDbG91ZFZvaWNlcygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgXHVDNzRDXHVDMTMxIFx1QzEyMFx1RDBERFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNzRDXHVDMTMxIFx1QzEyMFx1RDBERCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdHb29nbGUgQ2xvdWQgVFRTXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUM3NENcdUMxMzFcdUM3NDQgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnZ29vZ2xlLWNsb3VkLXZvaWNlLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUdvb2dsZUNsb3VkVm9pY2VEcm9wZG93bihkcm9wZG93bik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJylcclxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdcdUMxMjBcdUQwRERcdUQ1NUMgXHVDNzRDXHVDMTMxXHVDNzNDXHVCODVDIFx1QzBEOFx1RDUwQyBcdUQxNERcdUMyQTRcdUQyQjhcdUI5N0MgXHVDN0FDXHVDMEREXHVENTY5XHVCMkM4XHVCMkU0JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDN0FDXHVDMEREIFx1QzkxMS4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsYXlHb29nbGVDbG91ZFZvaWNlUHJldmlldygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzRDXHVDMTMxIFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzgwNFx1QzZBOSBcdUMxMjRcdUM4MTVcdUI0RTRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QjlEMFx1RDU1OFx1QUUzMCBcdUMxOERcdUIzQzQgKFNwZWFraW5nIFJhdGUpJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1Qzc0Q1x1QzEzMVx1Qzc1OCBcdUI5RDBcdUQ1NThcdUFFMzAgXHVDMThEXHVCM0M0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKDAuMjUgPSBcdUIyOTBcdUI5QkMsIDQuMCA9IFx1QkU2MFx1Qjk4NCknKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC1zcGVha2luZy1yYXRlLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMC4yNSwgNC4wLCAwLjI1KVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTU3BlYWtpbmdSYXRlKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU1NwZWFraW5nUmF0ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Qzc0Q1x1QzEzMSBcdUIxOTJcdUIwQUVcdUM3NzQgKFBpdGNoKScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUM3NENcdUMxMzFcdUM3NTggXHVCMTkyXHVCMEFFXHVDNzc0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKC0yMC4wID0gXHVCMEFFXHVDNzRDLCAyMC4wID0gXHVCMTkyXHVDNzRDKScpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnZ29vZ2xlLWNsb3VkLXBpdGNoLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoLTIwLjAsIDIwLjAsIDEuMClcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU1BpdGNoKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU1BpdGNoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwb3B1bGF0ZUdvb2dsZUNsb3VkVm9pY2VEcm9wZG93bihkcm9wZG93bjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VDb2RlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLVVTJykge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtSm91cm5leS1EJywgJ0pvdXJuZXktRCAoTWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtSm91cm5leS1GJywgJ0pvdXJuZXktRiAoRmVtYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1Kb3VybmV5LU8nLCAnSm91cm5leS1PIChNYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUEnLCAnTmV1cmFsMi1BIChNYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUMnLCAnTmV1cmFsMi1DIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItRCcsICdOZXVyYWwyLUQgKE1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItRScsICdOZXVyYWwyLUUgKEZlbWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1GJywgJ05ldXJhbDItRiAoRmVtYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUcnLCAnTmV1cmFsMi1HIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItSCcsICdOZXVyYWwyLUggKEZlbWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1JJywgJ05ldXJhbDItSSAoTWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1KJywgJ05ldXJhbDItSiAoTWFsZSknKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUdCJykge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tR0ItTmV1cmFsMi1BJywgJ05ldXJhbDItQSAoRmVtYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQi1OZXVyYWwyLUInLCAnTmV1cmFsMi1CIChNYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQi1OZXVyYWwyLUMnLCAnTmV1cmFsMi1DIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUdCLU5ldXJhbDItRCcsICdOZXVyYWwyLUQgKE1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUdCLU5ldXJhbDItRicsICdOZXVyYWwyLUYgKEZlbWFsZSknKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUFVJykge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tQVUtTmV1cmFsMi1BJywgJ05ldXJhbDItQSAoRmVtYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1BVS1OZXVyYWwyLUInLCAnTmV1cmFsMi1CIChNYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1BVS1OZXVyYWwyLUMnLCAnTmV1cmFsMi1DIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUFVLU5ldXJhbDItRCcsICdOZXVyYWwyLUQgKE1hbGUpJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdlbi1VUy1Kb3VybmV5LUYnLCAnSm91cm5leS1GIChGZW1hbGUpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlR29vZ2xlQ2xvdWRWb2ljZXMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgdm9pY2VEcm9wZG93biA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLmdvb2dsZS1jbG91ZC12b2ljZS1zZXR0aW5nIHNlbGVjdCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgICAgIGlmICh2b2ljZURyb3Bkb3duKSB7XHJcbiAgICAgICAgICAgIHZvaWNlRHJvcGRvd24uZW1wdHkoKTtcclxuICAgICAgICAgICAgY29uc3QgZHJvcGRvd24gPSB7IGFkZE9wdGlvbjogKHZhbHVlOiBzdHJpbmcsIHRleHQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgICAgIHZvaWNlRHJvcGRvd24uYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICAgICAgfX07XHJcbiAgICAgICAgICAgIHRoaXMucG9wdWxhdGVHb29nbGVDbG91ZFZvaWNlRHJvcGRvd24oZHJvcGRvd24pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVBRTMwXHVCQ0Y4IFx1Qzc0Q1x1QzEzMSBcdUMxMjRcdUM4MTVcclxuICAgICAgICAgICAgY29uc3QgbGFuZ3VhZ2VDb2RlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGU7XHJcbiAgICAgICAgICAgIGxldCBkZWZhdWx0Vm9pY2UgPSAnZW4tVVMtSm91cm5leS1GJztcclxuICAgICAgICAgICAgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUdCJykgZGVmYXVsdFZvaWNlID0gJ2VuLUdCLU5ldXJhbDItQSc7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUFVJykgZGVmYXVsdFZvaWNlID0gJ2VuLUFVLU5ldXJhbDItQSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2b2ljZURyb3Bkb3duLnZhbHVlID0gZGVmYXVsdFZvaWNlO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSA9IGRlZmF1bHRWb2ljZTtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlVFRTUHJvdmlkZXJTZXR0aW5ncygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c1Byb3ZpZGVyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNoYXR0ZXJib3hTZXR0aW5ncyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmNoYXR0ZXJib3gtYXBpLXVybC1zZXR0aW5nLCAuY2hhdHRlcmJveC12b2ljZS1zZXR0aW5nLCAuY2hhdHRlcmJveC1leGFnZ2VyYXRpb24tc2V0dGluZywgLmNoYXR0ZXJib3gtY2ZnLXNldHRpbmcsIC5jaGF0dGVyYm94LXRlbXBlcmF0dXJlLXNldHRpbmcnKTtcclxuICAgICAgICBjb25zdCBnb29nbGVDbG91ZFNldHRpbmdzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuZ29vZ2xlLWNsb3VkLXR0cy1ndWlkZSwgLmdvb2dsZS1jbG91ZC1hcGkta2V5LXNldHRpbmcsIC5nb29nbGUtY2xvdWQtbGFuZ3VhZ2Utc2V0dGluZywgLmdvb2dsZS1jbG91ZC12b2ljZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXNwZWFraW5nLXJhdGUtc2V0dGluZywgLmdvb2dsZS1jbG91ZC1waXRjaC1zZXR0aW5nJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCQUE4XHVCNEUwIFx1QzEyNFx1QzgxNSBcdUMyMjhcdUFFNDBcclxuICAgICAgICBjaGF0dGVyYm94U2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nID0+IHtcclxuICAgICAgICAgICAgKHNldHRpbmcgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZ29vZ2xlQ2xvdWRTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmcgPT4ge1xyXG4gICAgICAgICAgICAoc2V0dGluZyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUMxMjBcdUQwRERcdUI0MUMgXHVDODFDXHVBQ0Y1XHVDNzkwXHVDNzU4IFx1QzEyNFx1QzgxNVx1QjlDQyBcdUQ0NUNcdUMyRENcclxuICAgICAgICBpZiAocHJvdmlkZXIgPT09ICdjaGF0dGVyYm94Jykge1xyXG4gICAgICAgICAgICBjaGF0dGVyYm94U2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nID0+IHtcclxuICAgICAgICAgICAgICAgIChzZXR0aW5nIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdnb29nbGUtY2xvdWQnKSB7XHJcbiAgICAgICAgICAgIGdvb2dsZUNsb3VkU2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nID0+IHtcclxuICAgICAgICAgICAgICAgIChzZXR0aW5nIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHBsYXlDaGF0dGVyYm94Vm9pY2VQcmV2aWV3KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhbXBsZVRleHRzID0gW1xyXG4gICAgICAgICAgICAgICAgJ0hlbGxvLCB0aGlzIGlzIGEgc2FtcGxlIHZvaWNlIHByZXZpZXcuJyxcclxuICAgICAgICAgICAgICAgICdXZWxjb21lIHRvIEVuZ2xpc2ggdm9jYWJ1bGFyeSBsZWFybmluZy4nLFxyXG4gICAgICAgICAgICAgICAgJ1RoaXMgdm9pY2Ugd2lsbCBoZWxwIHlvdSBsZWFybiBwcm9udW5jaWF0aW9uLicsXHJcbiAgICAgICAgICAgICAgICAnQmVhdXRpZnVsIHdvcmRzIG1ha2UgYmVhdXRpZnVsIHNlbnRlbmNlcy4nXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByYW5kb21UZXh0ID0gc2FtcGxlVGV4dHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2FtcGxlVGV4dHMubGVuZ3RoKV07XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hBcGlVcmx9L3YxL2F1ZGlvL3NwZWVjaGAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiByYW5kb21UZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIHZvaWNlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSxcclxuICAgICAgICAgICAgICAgICAgICBleGFnZ2VyYXRpb246IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hFeGFnZ2VyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY2ZnX3dlaWdodDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveENmZ1dlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveFRlbXBlcmF0dXJlXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hhdHRlcmJveCBUVFMgQVBJIFx1QzYyNFx1Qjk1ODogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xyXG4gICAgICAgICAgICBjb25zdCBhdWRpb1VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYXVkaW9CbG9iKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKGF1ZGlvVXJsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVuZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAgXHVDNjQ0XHVCOENDIScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGF1ZGlvLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhdWRpby5wbGF5KCkuY2F0Y2gocmVqZWN0KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NoYXR0ZXJib3ggVFRTIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3NENcdUMxMzEgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0XHVBQzAwIFx1QzJFNFx1RDU4OSBcdUM5MTFcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBwbGF5R29vZ2xlQ2xvdWRWb2ljZVByZXZpZXcoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgc2FtcGxlVGV4dHMgPSBbXHJcbiAgICAgICAgICAgICAgICAnSGVsbG8sIHRoaXMgaXMgYSBzYW1wbGUgdm9pY2UgcHJldmlldy4nLFxyXG4gICAgICAgICAgICAgICAgJ1dlbGNvbWUgdG8gRW5nbGlzaCB2b2NhYnVsYXJ5IGxlYXJuaW5nLicsXHJcbiAgICAgICAgICAgICAgICAnVGhpcyB2b2ljZSB3aWxsIGhlbHAgeW91IGxlYXJuIHByb251bmNpYXRpb24uJyxcclxuICAgICAgICAgICAgICAgICdCZWF1dGlmdWwgd29yZHMgbWFrZSBiZWF1dGlmdWwgc2VudGVuY2VzLidcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbVRleHQgPSBzYW1wbGVUZXh0c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzYW1wbGVUZXh0cy5sZW5ndGgpXTtcclxuICAgICAgICAgICAgY29uc3QgYXBpS2V5ID0gZGVjcnlwdEFwaUtleSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0FwaUtleSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dDogeyB0ZXh0OiByYW5kb21UZXh0IH0sXHJcbiAgICAgICAgICAgICAgICB2b2ljZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2VcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhdWRpb0NvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvRW5jb2Rpbmc6ICdNUDMnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWFraW5nUmF0ZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNTcGVha2luZ1JhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGl0Y2g6IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTUGl0Y2hcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGBodHRwczovL3RleHR0b3NwZWVjaC5nb29nbGVhcGlzLmNvbS92MS90ZXh0OnN5bnRoZXNpemU/a2V5PSR7YXBpS2V5fWAsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQgfHwgJ3t9Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxlZEVycm9yID0gdGhpcy5nZXREZXRhaWxlZEdvb2dsZUNsb3VkRXJyb3IocmVzcG9uc2Uuc3RhdHVzLCBlcnJvckRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRldGFpbGVkRXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gdGhpcy5iYXNlNjRUb0Jsb2IoZGF0YS5hdWRpb0NvbnRlbnQsICdhdWRpby9tcDMnKTtcclxuICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhhdWRpb1VybCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXVkaW8ub25lbmRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3NENcdUMxMzEgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwIFx1QzY0NFx1QjhDQyEnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJykpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYXVkaW8ucGxheSgpLmNhdGNoKHJlamVjdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHb29nbGUgQ2xvdWQgVFRTIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnQVBJXHVBQzAwIFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQnKSkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdBUEkgXHVEMEE0JykpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHVDNzRDXHVDMTMxIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMFx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTRcdUM2NDAgXHVDNzc4XHVEMTMwXHVCMTM3IFx1QzVGMFx1QUNCMFx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmFzZTY0VG9CbG9iKGJhc2U2NDogc3RyaW5nLCBtaW1lVHlwZTogc3RyaW5nKTogQmxvYiB7XHJcbiAgICAgICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZU51bWJlcnMgPSBuZXcgQXJyYXkoYnl0ZUNoYXJhY3RlcnMubGVuZ3RoKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJ5dGVOdW1iZXJzW2ldID0gYnl0ZUNoYXJhY3RlcnMuY2hhckNvZGVBdChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZU51bWJlcnMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbYnl0ZUFycmF5XSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHRlc3RHb29nbGVDbG91ZENvbm5lY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgYXBpS2V5ID0gZGVjcnlwdEFwaUtleSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0FwaUtleSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEdvb2dsZSBDbG91ZCBUVFMgQVBJIFx1RDBBNFx1Qjk3QyBcdUJBM0NcdUM4MDAgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly90ZXh0dG9zcGVlY2guZ29vZ2xlYXBpcy5jb20vdjEvdGV4dDpzeW50aGVzaXplP2tleT0ke2FwaUtleX1gLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHsgdGV4dDogJ0Nvbm5lY3Rpb24gdGVzdCcgfSxcclxuICAgICAgICAgICAgICAgICAgICB2b2ljZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6ICdlbi1VUycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdlbi1VUy1Kb3VybmV5LUYnXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhdWRpb0NvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0VuY29kaW5nOiAnTVAzJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA8IDQwMCkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IEdvb2dsZSBDbG91ZCBUVFMgQVBJIFx1QzVGMFx1QUNCMCBcdUMxMzFcdUFDRjUhJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQgfHwgJ3t9Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxlZEVycm9yID0gdGhpcy5nZXREZXRhaWxlZEdvb2dsZUNsb3VkRXJyb3IocmVzcG9uc2Uuc3RhdHVzLCBlcnJvckRhdGEpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDICR7ZGV0YWlsZWRFcnJvcn1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBDbG91ZCBUVFMgXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1Qzc3OFx1RDEzMFx1QjEzNyBcdUM1RjBcdUFDQjBcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERldGFpbGVkR29vZ2xlQ2xvdWRFcnJvcihzdGF0dXM6IG51bWJlciwgZXJyb3JEYXRhOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChlcnJvckRhdGE/LmVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZXJyb3JEYXRhLmVycm9yO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQVBJXHVBQzAwIFx1Q0MyOFx1QjJFOFx1QjQxQyBcdUFDQkRcdUM2QjAgKDQwMyBQRVJNSVNTSU9OX0RFTklFRCB3aXRoIEFQSV9LRVlfU0VSVklDRV9CTE9DS0VEKVxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDMgJiYgZXJyb3IuZGV0YWlscz8uc29tZSgoZGV0YWlsOiBhbnkpID0+IFxyXG4gICAgICAgICAgICAgICAgZGV0YWlsLnJlYXNvbiA9PT0gJ0FQSV9LRVlfU0VSVklDRV9CTE9DS0VEJyB8fCBcclxuICAgICAgICAgICAgICAgIGRldGFpbFsnQHR5cGUnXT8uaW5jbHVkZXMoJ0Vycm9ySW5mbycpICYmIGRldGFpbC5yZWFzb24gPT09ICdBUElfS0VZX1NFUlZJQ0VfQkxPQ0tFRCdcclxuICAgICAgICAgICAgKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdUZXh0LXRvLVNwZWVjaCBBUElcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDNzA0XHVDNzU4IFx1QUMwMFx1Qzc3NFx1QjREQ1x1Qjk3QyBcdUNDMzhcdUFDRTBcdUQ1NThcdUM1RUMgQVBJXHVCOTdDIFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBUEkgXHVEMEE0IFx1QUQwMFx1QjgyOCBcdUM2MjRcdUI5NThcdUI0RTRcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ0FQSSBrZXkgbm90IHZhbGlkJykgfHwgZXJyb3IuY29kZSA9PT0gJ0lOVkFMSURfQVJHVU1FTlQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTQuIFx1RDBBNFx1Qjk3QyBcdUIyRTRcdUMyREMgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3F1b3RhJykgfHwgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ1FVT1RBX0VYQ0VFREVEJykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0FQSSBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NzQgXHVDRDA4XHVBQ0ZDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBHb29nbGUgQ2xvdWQgQ29uc29sZVx1QzVEMFx1QzExQyBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0FQSSBcdUM4MTFcdUFERkNcdUM3NzQgXHVBQzcwXHVCRDgwXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0IFx1QUQ4Q1x1RDU1Q1x1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNzc4XHVDOTlEIFx1QzYyNFx1Qjk1OCAoNDAxKVxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnQVBJIFx1RDBBNCBcdUM3NzhcdUM5OURcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNjk0XHVDQ0FEIFx1QzYyNFx1Qjk1OCAoNDAwKVxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnQVBJIFx1QzY5NFx1Q0NBRFx1Qzc3NCBcdUM3OThcdUJBQkJcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1Qzc0Q1x1QzEzMSBcdUMxMjRcdUM4MTVcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUMwQUNcdUM2QTkgXHVCRDg4XHVBQzAwICg1MDMpXHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDUwMykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIFx1QzExQ1x1QkU0NFx1QzJBNFx1QUMwMCBcdUM3N0NcdUMyRENcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEFDXHVDNkE5XHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QzdBMFx1QzJEQyBcdUQ2QzQgXHVCMkU0XHVDMkRDIFx1QzJEQ1x1QjNDNFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gYEFQSSBcdUM2MjRcdUI5NTggKCR7c3RhdHVzfSk6ICR7ZXJyb3IubWVzc2FnZSB8fCAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4J31gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gYEFQSSBcdUM2MjRcdUI5NTg6ICR7c3RhdHVzfSBcdUMwQzFcdUQwREMgXHVDRjU0XHVCNERDYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVRUU0NhY2hlU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gVFRTIFx1Q0U5MFx1QzJEQyBcdUMxMzlcdUMxNTggXHVENUU0XHVCMzU0XHJcbiAgICAgICAgY29uc3QgY2FjaGVIZWFkZXJFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxyXG4gICAgICAgICAgICBjbHM6ICd0dHMtY2FjaGUtaGVhZGVyJyxcclxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDIwcHg7IHBhZGRpbmc6IDEwcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgYm9yZGVyLXJhZGl1czogNXB4OyBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7JyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY2FjaGVIZWFkZXJFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdcdUQ4M0RcdUREQzJcdUZFMEYgVFRTIFx1Q0U5MFx1QzJEQyBcdUFEMDBcdUI5QUMnLCBhdHRyOiB7IHN0eWxlOiAnbWFyZ2luOiAwIDAgNXB4IDA7IGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOycgfSB9KTtcclxuICAgICAgICBjYWNoZUhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHVDNzRDXHVDMTMxIFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUI4NUNcdUNFRUNcdUM1RDAgXHVDRTkwXHVDMkRDXHVENTU4XHVDNUVDIEFQSSBcdUJFNDRcdUM2QTlcdUM3NDQgXHVDODA4XHVDNTdEXHVENTU4XHVBQ0UwIFx1Qzc1MVx1QjJGNSBcdUMxOERcdUIzQzRcdUI5N0MgXHVENUE1XHVDMEMxXHVDMkRDXHVEMEI1XHVCMkM4XHVCMkU0LicsIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW46IDA7IGZvbnQtc2l6ZTogMC45ZW07IG9wYWNpdHk6IDAuODsnIH0gfSk7XHJcblxyXG4gICAgICAgIC8vIFx1Q0U5MFx1QzJEQyBcdUQ2NUNcdUMxMzFcdUQ2NTQgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdUVFMgXHVDRTkwXHVDMkRDIFx1RDY1Q1x1QzEzMVx1RDY1NCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdUVFMgXHVDNzRDXHVDMTMxIFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUI4NUNcdUNFRUNcdUM1RDAgXHVDRTkwXHVDMkRDXHVENTU4XHVDNUVDIFx1QzdBQ1x1QzBBQ1x1QzZBOVx1RDU2OVx1QjJDOFx1QjJFNC4nKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3R0cy1jYWNoZS1lbmFibGVkLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNDYWNoZUVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzQ2FjaGVFbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIFx1Q0U5MFx1QzJEQyBcdUM4MTVcdUJDRjQgXHVENDVDXHVDMkRDXHJcbiAgICAgICAgY29uc3QgY2FjaGVJbmZvU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDRTkwXHVDMkRDIFx1RDYwNFx1RDY2OScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ2MDRcdUM3QUMgXHVDODAwXHVDN0E1XHVCNDFDIFRUUyBcdUNFOTBcdUMyREMgXHVEMzBDXHVDNzdDIFx1QzgxNVx1QkNGNCcpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygndHRzLWNhY2hlLWluZm8tc2V0dGluZycpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUNhY2hlSW5mbyhjYWNoZUluZm9TZXR0aW5nKTtcclxuXHJcbiAgICAgICAgLy8gXHVDRTkwXHVDMkRDIFx1QzBBRFx1QzgxQyBcdUJDODRcdUQyQkNcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Q0U5MFx1QzJEQyBcdUFEMDBcdUI5QUMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDODAwXHVDN0E1XHVCNDFDIFx1QkFBOFx1QjRFMCBUVFMgXHVDRTkwXHVDMkRDIFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUMwQURcdUM4MUNcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCd0dHMtY2FjaGUtY2xlYXItc2V0dGluZycpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1Q0U5MFx1QzJEQyBcdUMwQURcdUM4MUMnKVxyXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ1x1QkFBOFx1QjRFMCBUVFMgXHVDRTkwXHVDMkRDIFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUMwQURcdUM4MUNcdUQ1NjlcdUIyQzhcdUIyRTQnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUMwQURcdUM4MUMgXHVDOTExLi4uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLmNsZWFyVFRTQ2FjaGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBUVFMgXHVDRTkwXHVDMkRDXHVBQzAwIFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwQURcdUM4MUNcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUNFOTBcdUMyREMgXHVDODE1XHVCQ0Y0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYWNoZUluZm8oY2FjaGVJbmZvU2V0dGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgVFRTIFx1Q0U5MFx1QzJEQyBcdUMwQURcdUM4MUNcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVFRTIFx1Q0U5MFx1QzJEQyBcdUMwQURcdUM4MUMgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFRUUyBcdUNFOTBcdUMyREMgXHVDMEFEXHVDODFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUNFOTBcdUMyREMgXHVDMEFEXHVDODFDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1QzBDOFx1Qjg1Q1x1QUNFMFx1Q0U2OCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnXHVDRTkwXHVDMkRDIFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUMwQzhcdUI4NUNcdUFDRTBcdUNFNjhcdUQ1NjlcdUIyQzhcdUIyRTQnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FjaGVJbmZvKGNhY2hlSW5mb1NldHRpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Q0U5MFx1QzJEQyBcdUM4MTVcdUJDRjRcdUFDMDAgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQ2FjaGVJbmZvKHNldHRpbmc6IFNldHRpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzExQ1x1QkU0NFx1QzJBNFx1QzVEMFx1QzExQyBcdUNFOTBcdUMyREMgXHVDODE1XHVCQ0Y0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4udHRzU2VydmljZSAmJiAnZ2V0Q2FjaGVJbmZvJyBpbiB0aGlzLnBsdWdpbi50dHNTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUluZm8gPSBhd2FpdCAodGhpcy5wbHVnaW4udHRzU2VydmljZSBhcyBhbnkpLmdldENhY2hlSW5mbygpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvVGV4dCA9IGBcdUQzMENcdUM3N0MgXHVBQzFDXHVDMjE4OiAke2NhY2hlSW5mby50b3RhbEZpbGVzfVx1QUMxQyB8IFx1QzZBOVx1QjdDOTogJHtjYWNoZUluZm8uZm9ybWF0dGVkU2l6ZX1gO1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZy5zZXREZXNjKGBcdUQ2MDRcdUM3QUMgXHVDODAwXHVDN0E1XHVCNDFDIFRUUyBcdUNFOTBcdUMyREMgXHVEMzBDXHVDNzdDIFx1QzgxNVx1QkNGNCAtICR7aW5mb1RleHR9YCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nLnNldERlc2MoJ1x1RDYwNFx1QzdBQyBcdUM4MDBcdUM3QTVcdUI0MUMgVFRTIFx1Q0U5MFx1QzJEQyBcdUQzMENcdUM3N0MgXHVDODE1XHVCQ0Y0IC0gXHVDRTkwXHVDMkRDIFx1QzExQ1x1QkU0NFx1QzJBNFx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Q0U5MFx1QzJEQyBcdUM4MTVcdUJDRjQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHNldHRpbmcuc2V0RGVzYygnXHVENjA0XHVDN0FDIFx1QzgwMFx1QzdBNVx1QjQxQyBUVFMgXHVDRTkwXHVDMkRDIFx1RDMwQ1x1Qzc3QyBcdUM4MTVcdUJDRjQgLSBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNsZWFyVFRTQ2FjaGUoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gR29vZ2xlIENsb3VkIFRUUyBcdUMxMUNcdUJFNDRcdUMyQTRcdUM1RDBcdUMxMUMgXHVDRTkwXHVDMkRDIFx1QzBBRFx1QzgxQ1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4udHRzU2VydmljZSAmJiAnY2xlYXJDYWNoZScgaW4gdGhpcy5wbHVnaW4udHRzU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0ICh0aGlzLnBsdWdpbi50dHNTZXJ2aWNlIGFzIGFueSkuY2xlYXJDYWNoZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUVFMgXHVDRTkwXHVDMkRDIFx1QzBBRFx1QzgxQyBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSAiLCAiLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQvXHVCQ0Y1XHVENjM4XHVENjU0IFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMCAoV2ViIENyeXB0byBBUEkgXHVDMEFDXHVDNkE5KVxyXG5cclxuLy8gXHVEM0M5XHVCQjM4IEFQSSBcdUQwQTRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTU4XHVCMjk0IFx1RDVFQ1x1RDM3QyBcdUQ1NjhcdUMyMThcclxuZnVuY3Rpb24gaXNQbGFpblRleHRBcGlLZXkoYXBpS2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGlmICghYXBpS2V5KSByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgIC8vIFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBBUEkgXHVEMEE0IFx1RDMyOFx1RDEzNFx1QjRFNFxyXG4gICAgY29uc3QgYXBpS2V5UGF0dGVybnMgPSBbXHJcbiAgICAgICAgL15zay1bYS16QS1aMC05XXszMix9JC8sICAgICAgICAgICAvLyBPcGVuQUkgQVBJIFx1RDBBNFxyXG4gICAgICAgIC9ec2stYW50LVthLXpBLVowLTktX117OTV9JC8sICAgICAgLy8gQW50aHJvcGljIEFQSSBcdUQwQTRcclxuICAgICAgICAvXkFJemFbYS16QS1aMC05LV9dezM1fSQvLCAgICAgICAgIC8vIEdvb2dsZSBBUEkgXHVEMEE0XHJcbiAgICAgICAgL15bYS16QS1aMC05LV9dezIwLH0kLyAgICAgICAgICAgICAvLyBcdUM3N0NcdUJDMThcdUM4MDFcdUM3NzggXHVBRTM0IFx1RDFBMFx1RDA3MFxyXG4gICAgXTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGFwaUtleVBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoYXBpS2V5KSk7XHJcbn1cclxuXHJcbi8vIFx1QzU0OFx1QzgwNFx1RDU1QyBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI5N0MgXHVDNzA0XHVENTVDIFx1RDBBNCBcdUMwRERcdUMxMzFcclxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVFbmNyeXB0aW9uS2V5KCk6IFByb21pc2U8Q3J5cHRvS2V5PiB7XHJcbiAgICAvLyBcdUMwQUNcdUM2QTlcdUM3OTBcdUJDQzQgXHVBQ0UwXHVDNzIwIFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFFMzBcdUJDMThcdUM3M0NcdUI4NUMgXHVEMEE0IFx1QzBERFx1QzEzMVxyXG4gICAgY29uc3QgcGx1Z2luSWQgPSAnb2JzaWRpYW4tZW5nbGlzaC12b2NhYnVsYXJ5JztcclxuICAgIGNvbnN0IHZlcnNpb24gPSAnMC4xJztcclxuICAgIGNvbnN0IHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XHJcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XHJcbiAgICBcclxuICAgIC8vIFx1RDBBNCBcdUM3QUNcdUI4Q0MgXHVDMEREXHVDMTMxXHJcbiAgICBjb25zdCBrZXlNYXRlcmlhbCA9IHBsdWdpbklkICsgdmVyc2lvbiArIHVzZXJBZ2VudCArIHRpbWVzdGFtcDtcclxuICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcclxuICAgIGNvbnN0IGtleURhdGEgPSBlbmNvZGVyLmVuY29kZShrZXlNYXRlcmlhbCk7XHJcbiAgICBcclxuICAgIC8vIFdlYiBDcnlwdG8gQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU1QyBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVEMEE0IFx1QjNDNFx1Q0Q5Q1xyXG4gICAgY29uc3QgYmFzZUtleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KFxyXG4gICAgICAgICdyYXcnLFxyXG4gICAgICAgIGtleURhdGEsXHJcbiAgICAgICAgeyBuYW1lOiAnUEJLREYyJyB9LFxyXG4gICAgICAgIGZhbHNlLFxyXG4gICAgICAgIFsnZGVyaXZlQml0cycsICdkZXJpdmVLZXknXVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgLy8gUEJLREYyXHVCODVDIFx1QUMxNVx1QjgyNVx1RDU1QyBcdUQwQTQgXHVCM0M0XHVDRDlDXHJcbiAgICBjb25zdCBkZXJpdmVkS2V5ID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kZXJpdmVLZXkoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnUEJLREYyJyxcclxuICAgICAgICAgICAgc2FsdDogZW5jb2Rlci5lbmNvZGUoJ29ic2lkaWFuLXZvY2FidWxhcnktc2FsdC0yMDI0JyksXHJcbiAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEwMDAwMCxcclxuICAgICAgICAgICAgaGFzaDogJ1NIQS0yNTYnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBiYXNlS2V5LFxyXG4gICAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBsZW5ndGg6IDI1NiB9LFxyXG4gICAgICAgIGZhbHNlLFxyXG4gICAgICAgIFsnZW5jcnlwdCcsICdkZWNyeXB0J11cclxuICAgICk7XHJcbiAgICBcclxuICAgIHJldHVybiBkZXJpdmVkS2V5O1xyXG59XHJcblxyXG4vLyBXZWIgQ3J5cHRvIEFQSVx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NUMgXHVDNTQ4XHVDODA0XHVENTVDIFx1QzU1NFx1RDYzOFx1RDY1NCAoQXN5bmMpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNyeXB0QXBpS2V5QXN5bmMoYXBpS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgaWYgKCFhcGlLZXkpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgLy8gXHVDNzc0XHVCQkY4IFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUQwQTRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHJcbiAgICBpZiAoIWlzUGxhaW5UZXh0QXBpS2V5KGFwaUtleSkpIHtcclxuICAgICAgICByZXR1cm4gYXBpS2V5OyAvLyBcdUM3NzRcdUJCRjggXHVDNTU0XHVENjM4XHVENjU0XHVCNDFDIFx1QUM4M1x1QzczQ1x1Qjg1QyBcdUFDMDRcdUM4RkNcdUQ1NThcdUFDRTAgXHVBREY4XHVCMzAwXHVCODVDIFx1QkMxOFx1RDY1OFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IGdlbmVyYXRlRW5jcnlwdGlvbktleSgpO1xyXG4gICAgICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcclxuICAgICAgICBjb25zdCBkYXRhID0gZW5jb2Rlci5lbmNvZGUoYXBpS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUI3OUNcdUIzNjQgSVYgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgY29uc3QgaXYgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEyKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQUVTLUdDTSBcdUM1NTRcdUQ2MzhcdUQ2NTRcclxuICAgICAgICBjb25zdCBlbmNyeXB0ZWQgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmVuY3J5cHQoXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBpdjogaXYgfSxcclxuICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICBkYXRhXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJVlx1QzY0MCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1QUNCMFx1RDU2OVx1RDU1OFx1QzVFQyBCYXNlNjQgXHVDNzc4XHVDRjU0XHVCNTI5XHJcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkQXJyYXkgPSBuZXcgVWludDhBcnJheShlbmNyeXB0ZWQpO1xyXG4gICAgICAgIGNvbnN0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkoaXYubGVuZ3RoICsgZW5jcnlwdGVkQXJyYXkubGVuZ3RoKTtcclxuICAgICAgICBjb21iaW5lZC5zZXQoaXYpO1xyXG4gICAgICAgIGNvbWJpbmVkLnNldChlbmNyeXB0ZWRBcnJheSwgaXYubGVuZ3RoKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmNvbWJpbmVkKSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QkU0NFx1QjNEOVx1QUUzMCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4OicsIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XHJcbiAgICAgICAgLy8gXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUIzRDlcdUFFMzAgXHVDNTU0XHVENjM4XHVENjU0XHVCODVDIFx1RDNGNFx1QkMzMVxyXG4gICAgICAgIHJldHVybiBlbmNyeXB0QXBpS2V5KGFwaUtleSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWNyeXB0QXBpS2V5QXN5bmMoZW5jcnlwdGVkQXBpS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgaWYgKCFlbmNyeXB0ZWRBcGlLZXkpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgLy8gXHVEM0M5XHVCQjM4IEFQSSBcdUQwQTRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4IChcdUM3N0NcdUJDMThcdUM4MDFcdUM3NzggQVBJIFx1RDBBNCBcdUQzMjhcdUQxMzQpXHJcbiAgICBpZiAoaXNQbGFpblRleHRBcGlLZXkoZW5jcnlwdGVkQXBpS2V5KSkge1xyXG4gICAgICAgIHJldHVybiBlbmNyeXB0ZWRBcGlLZXk7IC8vIFx1RDNDOVx1QkIzOFx1Qzc3NFx1QkE3NCBcdUFERjhcdUIzMDBcdUI4NUMgXHVCQzE4XHVENjU4XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgZ2VuZXJhdGVFbmNyeXB0aW9uS2V5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQmFzZTY0IFx1QjUxNFx1Q0Y1NFx1QjUyOVxyXG4gICAgICAgIGNvbnN0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkoXHJcbiAgICAgICAgICAgIGF0b2IoZW5jcnlwdGVkQXBpS2V5KVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcnKVxyXG4gICAgICAgICAgICAgICAgLm1hcChjaGFyID0+IGNoYXIuY2hhckNvZGVBdCgwKSlcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIElWXHVDNjQwIFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCRDg0XHVCOUFDXHJcbiAgICAgICAgY29uc3QgaXYgPSBjb21iaW5lZC5zbGljZSgwLCAxMik7XHJcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkID0gY29tYmluZWQuc2xpY2UoMTIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFFUy1HQ00gXHVCQ0Y1XHVENjM4XHVENjU0XHJcbiAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kZWNyeXB0KFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdBRVMtR0NNJywgaXY6IGl2IH0sXHJcbiAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgZW5jcnlwdGVkXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XHJcbiAgICAgICAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGRlY3J5cHRlZCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIGF0b2IgXHVDMkU0XHVEMzI4XHVENTU4XHVBQzcwXHVCMDk4IFx1QkNGNVx1RDYzOFx1RDY1NCBcdUMyRTRcdUQzMjhcdUQ1NThcdUJBNzQgXHVEM0M5XHVCQjM4XHVDNzdDIFx1QUMwMFx1QjJBNVx1QzEzMVx1Qzc3NCBcdUIxOTJcdUM3NENcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1x1QkU0NFx1QjNEOVx1QUUzMCBcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4LCBcdUQzQzlcdUJCMzhcdUM3M0NcdUI4NUMgXHVBQzA0XHVDOEZDOicsIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIGVuY3J5cHRlZEFwaUtleTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVCM0Q5XHVBRTMwXHVDMkREIFx1RDYzOFx1RDY1OFx1QzEzMVx1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVCNzk4XHVEMzdDIFx1RDU2OFx1QzIxOFx1QjRFNCAoTGVnYWN5KVxyXG5leHBvcnQgZnVuY3Rpb24gZW5jcnlwdEFwaUtleShhcGlLZXk6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAoIWFwaUtleSkgcmV0dXJuICcnO1xyXG4gICAgXHJcbiAgICAvLyBcdUM3NzRcdUJCRjggXHVDNTU0XHVENjM4XHVENjU0XHVCNDFDIFx1RDBBNFx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcclxuICAgIGlmICghaXNQbGFpblRleHRBcGlLZXkoYXBpS2V5KSkge1xyXG4gICAgICAgIHJldHVybiBhcGlLZXk7IC8vIFx1Qzc3NFx1QkJGOCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVBQzgzXHVDNzNDXHVCODVDIFx1QUMwNFx1QzhGQ1x1RDU1OFx1QUNFMCBcdUFERjhcdUIzMDBcdUI4NUMgXHVCQzE4XHVENjU4XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1QkU0NFx1QjNEOVx1QUUzMCBcdUQ1NjhcdUMyMThcdUI5N0MgXHVCM0Q5XHVBRTMwXHVDODAxXHVDNzNDXHVCODVDIFx1QzBBQ1x1QzZBOVx1RDU1OFx1QUUzMCBcdUM3MDRcdUQ1NUMgXHVEM0Y0XHVCQzMxXHJcbiAgICAvLyBcdUMyRTRcdUM4MUNcdUI4NUNcdUIyOTQgXHVCRTQ0XHVCM0Q5XHVBRTMwIFx1QkM4NFx1QzgwNFx1Qzc0NCBcdUMwQUNcdUM2QTlcdUQ1NThcdUIyOTQgXHVBQzgzXHVDNzQ0IFx1QUQ4Q1x1QzdBNVxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBcdUFDMDRcdUIyRThcdUQ1NUMgWE9SIFx1QzU1NFx1RDYzOFx1RDY1NCAoXHVENjM4XHVENjU4XHVDMTMxXHVDNkE5KVxyXG4gICAgICAgIGNvbnN0IGtleSA9ICdvYnNpZGlhbi12b2NhYi10ZW1wLWtleS0yMDI0JztcclxuICAgICAgICBsZXQgZW5jcnlwdGVkID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcGlLZXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY2hhckNvZGUgPSBhcGlLZXkuY2hhckNvZGVBdChpKSBeIGtleS5jaGFyQ29kZUF0KGkgJSBrZXkubGVuZ3RoKTtcclxuICAgICAgICAgICAgZW5jcnlwdGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnRvYShlbmNyeXB0ZWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIzRDlcdUFFMzAgXHVDNTU0XHVENjM4XHVENjU0IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVjcnlwdEFwaUtleShlbmNyeXB0ZWRBcGlLZXk6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAoIWVuY3J5cHRlZEFwaUtleSkgcmV0dXJuICcnO1xyXG4gICAgXHJcbiAgICAvLyBcdUQzQzlcdUJCMzggQVBJIFx1RDBBNFx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzggKFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBBUEkgXHVEMEE0IFx1RDMyOFx1RDEzNClcclxuICAgIGlmIChpc1BsYWluVGV4dEFwaUtleShlbmNyeXB0ZWRBcGlLZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGVuY3J5cHRlZEFwaUtleTsgLy8gXHVEM0M5XHVCQjM4XHVDNzc0XHVCQTc0IFx1QURGOFx1QjMwMFx1Qjg1QyBcdUJDMThcdUQ2NThcclxuICAgIH1cclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBrZXkgPSAnb2JzaWRpYW4tdm9jYWItdGVtcC1rZXktMjAyNCc7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGF0b2IoZW5jcnlwdGVkQXBpS2V5KTtcclxuICAgICAgICBsZXQgZGVjcnlwdGVkID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWNvZGVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXJDb2RlID0gZGVjb2RlZC5jaGFyQ29kZUF0KGkpIF4ga2V5LmNoYXJDb2RlQXQoaSAlIGtleS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBkZWNyeXB0ZWQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkZWNyeXB0ZWQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIGF0b2IgXHVDMkU0XHVEMzI4XHVENTU4XHVCQTc0IFx1RDNDOVx1QkIzOFx1Qzc3QyBcdUFDMDBcdUIyQTVcdUMxMzFcdUM3NzQgXHVCMTkyXHVDNzRDXHJcbiAgICAgICAgY29uc29sZS53YXJuKCdcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4LCBcdUQzQzlcdUJCMzhcdUM3M0NcdUI4NUMgXHVBQzA0XHVDOEZDOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiBlbmNyeXB0ZWRBcGlLZXk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEFQSSBcdUQwQTRcdUI5N0MgXHVCOUM4XHVDMkE0XHVEMEI5XHVENTU4XHVDNUVDIFx1RDQ1Q1x1QzJEQ1xyXG5leHBvcnQgZnVuY3Rpb24gbWFza0FwaUtleShhcGlLZXk6IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGwpOiBzdHJpbmcge1xyXG4gICAgLy8gbnVsbCwgdW5kZWZpbmVkLCBcdUJFNDggXHVCQjM4XHVDNzkwXHVDNUY0IFx1Q0NCNFx1RDA2Q1xyXG4gICAgaWYgKCFhcGlLZXkgfHwgdHlwZW9mIGFwaUtleSAhPT0gJ3N0cmluZycpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgLy8gXHVCQjM4XHVDNzkwXHVDNUY0IFx1QUUzOFx1Qzc3NFx1QUMwMCA4IFx1Qzc3NFx1RDU1OFx1Qzc3OCBcdUFDQkRcdUM2QjBcclxuICAgIGlmIChhcGlLZXkubGVuZ3RoIDw9IDgpIHJldHVybiAnKicucmVwZWF0KGFwaUtleS5sZW5ndGgpO1xyXG4gICAgXHJcbiAgICAvLyBcdUM4MTVcdUMwQzFcdUM4MDFcdUM3NzggXHVCOUM4XHVDMkE0XHVEMEI5IFx1Q0M5OFx1QjlBQ1xyXG4gICAgcmV0dXJuIGFwaUtleS5zdWJzdHJpbmcoMCwgNCkgKyAnKicucmVwZWF0KGFwaUtleS5sZW5ndGggLSA4KSArIGFwaUtleS5zdWJzdHJpbmcoYXBpS2V5Lmxlbmd0aCAtIDQpO1xyXG59XHJcblxyXG4vLyBcdUIwQTBcdUM5REMgXHVEM0VDXHVCOUY3XHVEMzA1IFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMFxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlU3RyaW5nOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcclxuICAgIGlmICghZGF0ZVN0cmluZykge1xyXG4gICAgICAgIHJldHVybiAnXHVDNUM2XHVDNzRDJztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XHJcbiAgICBcclxuICAgIGlmIChpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcclxuICAgICAgICByZXR1cm4gJ1x1Qzc5OFx1QkFCQlx1QjQxQyBcdUIwQTBcdUM5REMnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygna28tS1InLCB7XHJcbiAgICAgICAgeWVhcjogJ251bWVyaWMnLFxyXG4gICAgICAgIG1vbnRoOiAnbG9uZycsXHJcbiAgICAgICAgZGF5OiAnbnVtZXJpYydcclxuICAgIH0pO1xyXG59ICIsICIvLyBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzggXHVDMTI0XHVDODE1IFx1QzBDMVx1QzIxOCBcdUJDMEYgXHVBRDZDXHVDMTMxXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBsdWdpbkNvbmZpZyB7XHJcbiAgICAvLyBBUEkgXHVBRDAwXHVCODI4IFx1QzEyNFx1QzgxNVxyXG4gICAgYXBpOiB7XHJcbiAgICAgICAgdGltZW91dHM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVtYmVyO1xyXG4gICAgICAgICAgICBsbG06IG51bWJlcjtcclxuICAgICAgICAgICAgdHRzOiBudW1iZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXRyaWVzOiB7XHJcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGRlbGF5TXM6IG51bWJlcjtcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiBib29sZWFuO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmF0ZUxpbWl0aW5nOiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RzUGVyTWludXRlOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGJ1cnN0TGltaXQ6IG51bWJlcjtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBcdUJDMzBcdUNFNTggXHVDQzk4XHVCOUFDIFx1QzEyNFx1QzgxNVxyXG4gICAgYmF0Y2g6IHtcclxuICAgICAgICBkZWZhdWx0U2l6ZTogbnVtYmVyO1xyXG4gICAgICAgIG1heFNpemU6IG51bWJlcjtcclxuICAgICAgICBkZWxheUJldHdlZW5CYXRjaGVzOiBudW1iZXI7XHJcbiAgICAgICAgbWF4Q29uY3VycmVudEJhdGNoZXM6IG51bWJlcjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QUQwMFx1QjgyOCBcdUMxMjRcdUM4MTVcclxuICAgIGF1ZGlvOiB7XHJcbiAgICAgICAgbWF4UG9vbFNpemU6IG51bWJlcjtcclxuICAgICAgICBhdXRvQ2xlYW51cFRpbWVvdXRNczogbnVtYmVyO1xyXG4gICAgICAgIG1heER1cmF0aW9uTXM6IG51bWJlcjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QzEyNFx1QzgxNVxyXG4gICAgZGF0YWJhc2U6IHtcclxuICAgICAgICBhdXRvU2F2ZUludGVydmFsOiBudW1iZXI7XHJcbiAgICAgICAgYmFja3VwRW5hYmxlZDogYm9vbGVhbjtcclxuICAgICAgICBtYXhGaWxlU2l6ZTogbnVtYmVyO1xyXG4gICAgICAgIGNvbXByZXNzaW9uRW5hYmxlZDogYm9vbGVhbjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gXHVENTU5XHVDMkI1IFx1QzU0Q1x1QUNFMFx1QjlBQ1x1Qzk5OCBcdUMxMjRcdUM4MTVcclxuICAgIGxlYXJuaW5nOiB7XHJcbiAgICAgICAgc3BhY2VkX3JlcGV0aXRpb246IHtcclxuICAgICAgICAgICAgaW5pdGlhbEludGVydmFsOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGVhc3lCb251czogbnVtYmVyO1xyXG4gICAgICAgICAgICBoYXJkUGVuYWx0eTogbnVtYmVyO1xyXG4gICAgICAgICAgICBtYXhJbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgICAgICAgICBtaW5JbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbG9hZF9iYWxhbmNpbmc6IHtcclxuICAgICAgICAgICAgbWF4RGFpbHlSZXZpZXdzOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGZ1enppbmdQZXJjZW50YWdlOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbldpbmRvdzogbnVtYmVyO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFVJIFx1QzEyNFx1QzgxNVxyXG4gICAgdWk6IHtcclxuICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogbnVtYmVyO1xyXG4gICAgICAgIHByb2dyZXNzVXBkYXRlSW50ZXJ2YWw6IG51bWJlcjtcclxuICAgICAgICBub3RpZmljYXRpb25UaW1lb3V0OiBudW1iZXI7XHJcbiAgICAgICAgbW9kYWxDbG9zZURlbGF5OiBudW1iZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFx1QkNGNFx1QzU0OCBcdUMxMjRcdUM4MTVcclxuICAgIHNlY3VyaXR5OiB7XHJcbiAgICAgICAgYXBpS2V5RW5jcnlwdGlvbjoge1xyXG4gICAgICAgICAgICBpdGVyYXRpb25zOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGtleUxlbmd0aDogbnVtYmVyO1xyXG4gICAgICAgICAgICBzYWx0TGVuZ3RoOiBudW1iZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZXNzaW9uVGltZW91dDogbnVtYmVyO1xyXG4gICAgICAgIG1heExvZ2luQXR0ZW1wdHM6IG51bWJlcjtcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIFx1QUUzMFx1QkNGOCBcdUMxMjRcdUM4MTVcclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09ORklHOiBQbHVnaW5Db25maWcgPSB7XHJcbiAgICBhcGk6IHtcclxuICAgICAgICB0aW1lb3V0czoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiAzMDAwMCwgICAgLy8gMzBcdUNEMDhcclxuICAgICAgICAgICAgbGxtOiA2MDAwMCwgICAgICAgIC8vIDYwXHVDRDA4XHJcbiAgICAgICAgICAgIHR0czogMTUwMDAsICAgICAgICAvLyAxNVx1Q0QwOFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmV0cmllczoge1xyXG4gICAgICAgICAgICBtYXhBdHRlbXB0czogMyxcclxuICAgICAgICAgICAgZGVsYXlNczogMTAwMCxcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmF0ZUxpbWl0aW5nOiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RzUGVyTWludXRlOiA2MCxcclxuICAgICAgICAgICAgYnVyc3RMaW1pdDogMTAsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgYmF0Y2g6IHtcclxuICAgICAgICBkZWZhdWx0U2l6ZTogNSxcclxuICAgICAgICBtYXhTaXplOiAyMCxcclxuICAgICAgICBkZWxheUJldHdlZW5CYXRjaGVzOiAyMDAsXHJcbiAgICAgICAgbWF4Q29uY3VycmVudEJhdGNoZXM6IDMsXHJcbiAgICB9LFxyXG5cclxuICAgIGF1ZGlvOiB7XHJcbiAgICAgICAgbWF4UG9vbFNpemU6IDEwLFxyXG4gICAgICAgIGF1dG9DbGVhbnVwVGltZW91dE1zOiAzMDAwMCwgIC8vIDMwXHVDRDA4XHJcbiAgICAgICAgbWF4RHVyYXRpb25NczogMzAwMDAwLCAgICAgICAgLy8gNVx1QkQ4NFxyXG4gICAgfSxcclxuXHJcbiAgICBkYXRhYmFzZToge1xyXG4gICAgICAgIGF1dG9TYXZlSW50ZXJ2YWw6IDUwMDAsICAgICAgIC8vIDVcdUNEMDhcclxuICAgICAgICBiYWNrdXBFbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIG1heEZpbGVTaXplOiAxMDQ4NTc2MCwgICAgICAgIC8vIDEwTUJcclxuICAgICAgICBjb21wcmVzc2lvbkVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgfSxcclxuXHJcbiAgICBsZWFybmluZzoge1xyXG4gICAgICAgIHNwYWNlZF9yZXBldGl0aW9uOiB7XHJcbiAgICAgICAgICAgIGluaXRpYWxJbnRlcnZhbDogMSwgICAgICAgIC8vIDFcdUM3N0NcclxuICAgICAgICAgICAgZWFzeUJvbnVzOiAxLjMsXHJcbiAgICAgICAgICAgIGhhcmRQZW5hbHR5OiAwLjgsXHJcbiAgICAgICAgICAgIG1heEludGVydmFsOiAzNjUsICAgICAgICAgIC8vIDFcdUIxNDRcclxuICAgICAgICAgICAgbWluSW50ZXJ2YWw6IDEsICAgICAgICAgICAgLy8gMVx1Qzc3Q1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9hZF9iYWxhbmNpbmc6IHtcclxuICAgICAgICAgICAgbWF4RGFpbHlSZXZpZXdzOiAxMDAsXHJcbiAgICAgICAgICAgIGZ1enppbmdQZXJjZW50YWdlOiA1LFxyXG4gICAgICAgICAgICBkaXN0cmlidXRpb25XaW5kb3c6IDcsICAgICAvLyA3XHVDNzdDXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgdWk6IHtcclxuICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogMzAwLCAgICAgICAvLyAzMDBtc1xyXG4gICAgICAgIHByb2dyZXNzVXBkYXRlSW50ZXJ2YWw6IDEwMCwgIC8vIDEwMG1zXHJcbiAgICAgICAgbm90aWZpY2F0aW9uVGltZW91dDogNTAwMCwgICAgLy8gNVx1Q0QwOFxyXG4gICAgICAgIG1vZGFsQ2xvc2VEZWxheTogNTAwLCAgICAgICAgIC8vIDUwMG1zXHJcbiAgICB9LFxyXG5cclxuICAgIHNlY3VyaXR5OiB7XHJcbiAgICAgICAgYXBpS2V5RW5jcnlwdGlvbjoge1xyXG4gICAgICAgICAgICBpdGVyYXRpb25zOiAxMDAwMCxcclxuICAgICAgICAgICAga2V5TGVuZ3RoOiAzMixcclxuICAgICAgICAgICAgc2FsdExlbmd0aDogMTYsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXNzaW9uVGltZW91dDogMzYwMDAwMCwgICAgICAvLyAxXHVDMkRDXHVBQzA0XHJcbiAgICAgICAgbWF4TG9naW5BdHRlbXB0czogNSxcclxuICAgIH0sXHJcbn07XHJcblxyXG4vLyBcdUQ2NThcdUFDQkRcdUJDQzQgXHVDMTI0XHVDODE1XHJcbmV4cG9ydCBjb25zdCBERVZFTE9QTUVOVF9DT05GSUc6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPiA9IHtcclxuICAgIGFwaToge1xyXG4gICAgICAgIHRpbWVvdXRzOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDEwMDAwLFxyXG4gICAgICAgICAgICBsbG06IDIwMDAwLFxyXG4gICAgICAgICAgICB0dHM6IDUwMDAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXRyaWVzOiB7XHJcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAxLFxyXG4gICAgICAgICAgICBkZWxheU1zOiA1MDAsXHJcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBiYXRjaDoge1xyXG4gICAgICAgIGRlZmF1bHRTaXplOiAyLFxyXG4gICAgICAgIG1heFNpemU6IDUsXHJcbiAgICAgICAgZGVsYXlCZXR3ZWVuQmF0Y2hlczogMTAwLFxyXG4gICAgfSxcclxuICAgIGRhdGFiYXNlOiB7XHJcbiAgICAgICAgYXV0b1NhdmVJbnRlcnZhbDogMTAwMCxcclxuICAgICAgICBiYWNrdXBFbmFibGVkOiBmYWxzZSxcclxuICAgIH0sXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgUFJPRFVDVElPTl9DT05GSUc6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPiA9IHtcclxuICAgIGFwaToge1xyXG4gICAgICAgIHJldHJpZXM6IHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDUsXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IDIwMDAsXHJcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIGJhdGNoOiB7XHJcbiAgICAgICAgZGVmYXVsdFNpemU6IDEwLFxyXG4gICAgICAgIG1heFNpemU6IDUwLFxyXG4gICAgICAgIGRlbGF5QmV0d2VlbkJhdGNoZXM6IDUwMCxcclxuICAgIH0sXHJcbiAgICBkYXRhYmFzZToge1xyXG4gICAgICAgIGF1dG9TYXZlSW50ZXJ2YWw6IDEwMDAwLFxyXG4gICAgICAgIGJhY2t1cEVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgY29tcHJlc3Npb25FbmFibGVkOiB0cnVlLFxyXG4gICAgfSxcclxufTtcclxuXHJcbi8vIFx1QzEyNFx1QzgxNSBcdUFEMDBcdUI5QUMgXHVEMDc0XHVCNzk4XHVDMkE0XHJcbmV4cG9ydCBjbGFzcyBDb25maWdNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBDb25maWdNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBjb25maWc6IFBsdWdpbkNvbmZpZztcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZ3MoREVGQVVMVF9DT05GSUcsIHRoaXMuZ2V0RW52aXJvbm1lbnRDb25maWcoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCk6IENvbmZpZ01hbmFnZXIge1xyXG4gICAgICAgIGlmICghQ29uZmlnTWFuYWdlci5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBDb25maWdNYW5hZ2VyLmluc3RhbmNlID0gbmV3IENvbmZpZ01hbmFnZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENvbmZpZ01hbmFnZXIuaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29uZmlnKCk6IFBsdWdpbkNvbmZpZyB7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5jb25maWcgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRWYWx1ZTxUPihwYXRoOiBzdHJpbmcpOiBUIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXROZXN0ZWRWYWx1ZSh0aGlzLmNvbmZpZywgcGF0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ29uZmlnKHVwZGF0ZXM6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZ3ModGhpcy5jb25maWcsIHVwZGF0ZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RW52aXJvbm1lbnRDb25maWcoKTogUGFydGlhbDxQbHVnaW5Db25maWc+IHtcclxuICAgICAgICAvLyBcdUFDMUNcdUJDMUMgXHVENjU4XHVBQ0JEIFx1QUMxMFx1QzlDMCAoXHVBQzA0XHVCMkU4XHVENTVDIFx1RDczNFx1QjlBQ1x1QzJBNFx1RDJGMSlcclxuICAgICAgICBjb25zdCBpc0RldmVsb3BtZW50ID0gXHJcbiAgICAgICAgICAgIHByb2Nlc3M/LmVudj8uTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgfHxcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uPy5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcgfHxcclxuICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnRGV2ZWxvcG1lbnQnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGlzRGV2ZWxvcG1lbnQgPyBERVZFTE9QTUVOVF9DT05GSUcgOiBQUk9EVUNUSU9OX0NPTkZJRztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1lcmdlQ29uZmlncyhiYXNlOiBQbHVnaW5Db25maWcsIG92ZXJyaWRlOiBQYXJ0aWFsPFBsdWdpbkNvbmZpZz4pOiBQbHVnaW5Db25maWcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZXBNZXJnZShiYXNlLCBvdmVycmlkZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWVwTWVyZ2U8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KHRhcmdldDogVCwgc291cmNlOiBQYXJ0aWFsPFQ+KTogVCB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyAuLi50YXJnZXQgfTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcclxuICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VWYWx1ZSA9IHNvdXJjZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VmFsdWUgPSByZXN1bHRba2V5XTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPYmplY3Qoc291cmNlVmFsdWUpICYmIHRoaXMuaXNPYmplY3QodGFyZ2V0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB0aGlzLmRlZXBNZXJnZSh0YXJnZXRWYWx1ZSwgc291cmNlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2VWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBzb3VyY2VWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNPYmplY3QoaXRlbTogYW55KTogaXRlbSBpcyBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcclxuICAgICAgICByZXR1cm4gaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoaXRlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXROZXN0ZWRWYWx1ZShvYmo6IGFueSwgcGF0aDogc3RyaW5nKTogYW55IHtcclxuICAgICAgICByZXR1cm4gcGF0aC5zcGxpdCgnLicpLnJlZHVjZSgoY3VycmVudCwga2V5KSA9PiBjdXJyZW50Py5ba2V5XSwgb2JqKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVEM0I4XHVDNzU4IFx1RDU2OFx1QzIxOFx1QjRFNFxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnKCk6IFBsdWdpbkNvbmZpZyB7XHJcbiAgICByZXR1cm4gQ29uZmlnTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldENvbmZpZygpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnVmFsdWU8VD4ocGF0aDogc3RyaW5nKTogVCB7XHJcbiAgICByZXR1cm4gQ29uZmlnTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFZhbHVlPFQ+KHBhdGgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ29uZmlnKHVwZGF0ZXM6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPik6IHZvaWQge1xyXG4gICAgQ29uZmlnTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZUNvbmZpZyh1cGRhdGVzKTtcclxufVxyXG5cclxuLy8gXHVEMEMwXHVDNzg1IFx1QzU0OFx1QzgwNFx1RDU1QyBcdUMxMjRcdUM4MTUgXHVDODExXHVBREZDXHVDNzQ0IFx1QzcwNFx1RDU1QyBcdUMwQzFcdUMyMThcdUI0RTRcclxuZXhwb3J0IGNvbnN0IENPTkZJR19QQVRIUyA9IHtcclxuICAgIEFQSV9USU1FT1VUX0RFRkFVTFQ6ICdhcGkudGltZW91dHMuZGVmYXVsdCcsXHJcbiAgICBBUElfVElNRU9VVF9MTE06ICdhcGkudGltZW91dHMubGxtJyxcclxuICAgIEFQSV9USU1FT1VUX1RUUzogJ2FwaS50aW1lb3V0cy50dHMnLFxyXG4gICAgQVBJX1JFVFJZX01BWF9BVFRFTVBUUzogJ2FwaS5yZXRyaWVzLm1heEF0dGVtcHRzJyxcclxuICAgIEFQSV9SRVRSWV9ERUxBWTogJ2FwaS5yZXRyaWVzLmRlbGF5TXMnLFxyXG4gICAgQkFUQ0hfREVGQVVMVF9TSVpFOiAnYmF0Y2guZGVmYXVsdFNpemUnLFxyXG4gICAgQkFUQ0hfTUFYX1NJWkU6ICdiYXRjaC5tYXhTaXplJyxcclxuICAgIEJBVENIX0RFTEFZOiAnYmF0Y2guZGVsYXlCZXR3ZWVuQmF0Y2hlcycsXHJcbiAgICBBVURJT19NQVhfUE9PTF9TSVpFOiAnYXVkaW8ubWF4UG9vbFNpemUnLFxyXG4gICAgQVVESU9fQ0xFQU5VUF9USU1FT1VUOiAnYXVkaW8uYXV0b0NsZWFudXBUaW1lb3V0TXMnLFxyXG4gICAgTEVBUk5JTkdfSU5JVElBTF9JTlRFUlZBTDogJ2xlYXJuaW5nLnNwYWNlZF9yZXBldGl0aW9uLmluaXRpYWxJbnRlcnZhbCcsXHJcbiAgICBMRUFSTklOR19FQVNZX0JPTlVTOiAnbGVhcm5pbmcuc3BhY2VkX3JlcGV0aXRpb24uZWFzeUJvbnVzJyxcclxuICAgIExFQVJOSU5HX0hBUkRfUEVOQUxUWTogJ2xlYXJuaW5nLnNwYWNlZF9yZXBldGl0aW9uLmhhcmRQZW5hbHR5JyxcclxuICAgIFVJX0FOSU1BVElPTl9EVVJBVElPTjogJ3VpLmFuaW1hdGlvbkR1cmF0aW9uJyxcclxuICAgIFVJX05PVElGSUNBVElPTl9USU1FT1VUOiAndWkubm90aWZpY2F0aW9uVGltZW91dCcsXHJcbn0gYXMgY29uc3Q7IiwgIi8vIFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUM4MTVcdUNDNDUgXHVCQzBGIFx1QUQ2Q1x1RDYwNFxyXG5cclxuaW1wb3J0IHsgZ2V0Q29uZmlnVmFsdWUsIENPTkZJR19QQVRIUyB9IGZyb20gJy4vQ29uZmlnJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmV0cnlPcHRpb25zIHtcclxuICAgIG1heEF0dGVtcHRzPzogbnVtYmVyO1xyXG4gICAgZGVsYXlNcz86IG51bWJlcjtcclxuICAgIGV4cG9uZW50aWFsQmFja29mZj86IGJvb2xlYW47XHJcbiAgICBtYXhEZWxheU1zPzogbnVtYmVyO1xyXG4gICAgYmFja29mZk11bHRpcGxpZXI/OiBudW1iZXI7XHJcbiAgICByZXRyeUNvbmRpdGlvbj86IChlcnJvcjogRXJyb3IpID0+IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmV0cnlSZXN1bHQ8VD4ge1xyXG4gICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgIHJlc3VsdD86IFQ7XHJcbiAgICBlcnJvcj86IEVycm9yO1xyXG4gICAgYXR0ZW1wdHM6IG51bWJlcjtcclxuICAgIHRvdGFsRHVyYXRpb246IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJldHJ5UG9saWN5IHtcclxuICAgIHByaXZhdGUgb3B0aW9uczogUmVxdWlyZWQ8UmV0cnlPcHRpb25zPjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IG9wdGlvbnMubWF4QXR0ZW1wdHMgPz8gZ2V0Q29uZmlnVmFsdWU8bnVtYmVyPihDT05GSUdfUEFUSFMuQVBJX1JFVFJZX01BWF9BVFRFTVBUUyksXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IG9wdGlvbnMuZGVsYXlNcyA/PyBnZXRDb25maWdWYWx1ZTxudW1iZXI+KENPTkZJR19QQVRIUy5BUElfUkVUUllfREVMQVkpLFxyXG4gICAgICAgICAgICBleHBvbmVudGlhbEJhY2tvZmY6IG9wdGlvbnMuZXhwb25lbnRpYWxCYWNrb2ZmID8/IHRydWUsXHJcbiAgICAgICAgICAgIG1heERlbGF5TXM6IG9wdGlvbnMubWF4RGVsYXlNcyA/PyAzMDAwMCwgLy8gMzBcdUNEMDhcclxuICAgICAgICAgICAgYmFja29mZk11bHRpcGxpZXI6IG9wdGlvbnMuYmFja29mZk11bHRpcGxpZXIgPz8gMixcclxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IG9wdGlvbnMucmV0cnlDb25kaXRpb24gPz8gdGhpcy5kZWZhdWx0UmV0cnlDb25kaXRpb24sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUFFMzBcdUJDRjggXHVDN0FDXHVDMkRDXHVCM0M0IFx1Qzg3MFx1QUM3NFxyXG4gICAgcHJpdmF0ZSBkZWZhdWx0UmV0cnlDb25kaXRpb24oZXJyb3I6IEVycm9yKTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QzVEMFx1QjdFQywgXHVEMEMwXHVDNzg0XHVDNTQ0XHVDNkMzLCBcdUMxMUNcdUJDODQgXHVDNUQwXHVCN0VDXHVCMjk0IFx1QzdBQ1x1QzJEQ1x1QjNDNFxyXG4gICAgICAgIGNvbnN0IHJldHJ5YWJsZUVycm9ycyA9IFtcclxuICAgICAgICAgICAgJ05ldHdvcmtFcnJvcicsXHJcbiAgICAgICAgICAgICdUaW1lb3V0RXJyb3InLFxyXG4gICAgICAgICAgICAnZmV0Y2gnLFxyXG4gICAgICAgICAgICAnNTAyJywgJzUwMycsICc1MDQnLCAvLyBcdUMxMUNcdUJDODQgXHVDNUQwXHVCN0VDXHJcbiAgICAgICAgICAgICdFQ09OTlJFU0VUJyxcclxuICAgICAgICAgICAgJ0VUSU1FRE9VVCcsXHJcbiAgICAgICAgICAgICdFTk9URk9VTkQnXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IGVycm9yTmFtZSA9IGVycm9yLm5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJldHJ5YWJsZUVycm9ycy5zb21lKHBhdHRlcm4gPT4gXHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcyhwYXR0ZXJuLnRvTG93ZXJDYXNlKCkpIHx8IFxyXG4gICAgICAgICAgICBlcnJvck5hbWUuaW5jbHVkZXMocGF0dGVybi50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDOUMwXHVDMjE4IFx1QkMzMVx1QzYyNFx1RDUwNCBcdUFDQzRcdUMwQjBcclxuICAgIHByaXZhdGUgY2FsY3VsYXRlRGVsYXkoYXR0ZW1wdDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5leHBvbmVudGlhbEJhY2tvZmYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kZWxheU1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLm9wdGlvbnMuZGVsYXlNcyAqIE1hdGgucG93KHRoaXMub3B0aW9ucy5iYWNrb2ZmTXVsdGlwbGllciwgYXR0ZW1wdCAtIDEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzlDMFx1RDEzMCBcdUNEOTRcdUFDMDAgKFx1MDBCMTIwJSlcclxuICAgICAgICBjb25zdCBqaXR0ZXIgPSBkZWxheSAqIDAuMiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuICAgICAgICBjb25zdCBmaW5hbERlbGF5ID0gTWF0aC5mbG9vcihkZWxheSArIGppdHRlcik7XHJcblxyXG4gICAgICAgIHJldHVybiBNYXRoLm1pbihmaW5hbERlbGF5LCB0aGlzLm9wdGlvbnMubWF4RGVsYXlNcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVCM0Q5XHVBRTMwIFx1RDU2OFx1QzIxOCBcdUM3QUNcdUMyRENcdUIzQzRcclxuICAgIGFzeW5jIGV4ZWN1dGU8VD4oZm46ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFJldHJ5UmVzdWx0PFQ+PiB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzOyBhdHRlbXB0KyspIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHRzOiBhdHRlbXB0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzJEQ1x1QjNDNFx1Qzc3NFx1QUM3MFx1QjA5OCBcdUM3QUNcdUMyRENcdUIzQzQgXHVDODcwXHVBQzc0XHVDNzQ0IFx1QjlDQ1x1Qzg3MVx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3M0NcdUJBNzQgXHVDOTExXHVCMkU4XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzIHx8ICF0aGlzLm9wdGlvbnMucmV0cnlDb25kaXRpb24obGFzdEVycm9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUMyRENcdUIzQzQgXHVDODA0IFx1QjMwMFx1QUUzMFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLmNhbGN1bGF0ZURlbGF5KGF0dGVtcHQpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxheShkZWxheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBlcnJvcjogbGFzdEVycm9yLFxyXG4gICAgICAgICAgICBhdHRlbXB0czogdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzLFxyXG4gICAgICAgICAgICB0b3RhbER1cmF0aW9uOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIzRDlcdUFFMzAgXHVENTY4XHVDMjE4IFx1QzdBQ1x1QzJEQ1x1QjNDNFxyXG4gICAgZXhlY3V0ZVN5bmM8VD4oZm46ICgpID0+IFQpOiBSZXRyeVJlc3VsdDxUPiB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzOyBhdHRlbXB0KyspIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZuKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHRzOiBhdHRlbXB0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzJEQ1x1QjNDNFx1Qzc3NFx1QUM3MFx1QjA5OCBcdUM3QUNcdUMyRENcdUIzQzQgXHVDODcwXHVBQzc0XHVDNzQ0IFx1QjlDQ1x1Qzg3MVx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3M0NcdUJBNzQgXHVDOTExXHVCMkU4XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzIHx8ICF0aGlzLm9wdGlvbnMucmV0cnlDb25kaXRpb24obGFzdEVycm9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1QjNEOVx1QUUzMCBcdUQ1NjhcdUMyMThcdUM1RDBcdUMxMUNcdUIyOTQgXHVDOTg5XHVDMkRDIFx1QjJFNFx1Qzc0QyBcdUMyRENcdUIzQzQgKFx1QkU0NFx1QjNEOVx1QUUzMCBcdUIzMDBcdUFFMzAgXHVCRDg4XHVBQzAwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgZXJyb3I6IGxhc3RFcnJvcixcclxuICAgICAgICAgICAgYXR0ZW1wdHM6IHRoaXMub3B0aW9ucy5tYXhBdHRlbXB0cyxcclxuICAgICAgICAgICAgdG90YWxEdXJhdGlvbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHVwZGF0ZU9wdGlvbnMob3B0aW9uczogUGFydGlhbDxSZXRyeU9wdGlvbnM+KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTI0XHVDODE1IFx1QkMxOFx1RDY1OFxyXG4gICAgZ2V0T3B0aW9ucygpOiBSZXF1aXJlZDxSZXRyeU9wdGlvbnM+IHtcclxuICAgICAgICByZXR1cm4geyAuLi50aGlzLm9wdGlvbnMgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVEMkI5XHVENjU0XHVCNDFDIFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUM4MTVcdUNDNDVcdUI0RTRcclxuZXhwb3J0IGNsYXNzIE5ldHdvcmtSZXRyeVBvbGljeSBleHRlbmRzIFJldHJ5UG9saWN5IHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFJldHJ5T3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgc3VwZXIoe1xyXG4gICAgICAgICAgICBtYXhBdHRlbXB0czogNSxcclxuICAgICAgICAgICAgZGVsYXlNczogMTAwMCxcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiB0cnVlLFxyXG4gICAgICAgICAgICBtYXhEZWxheU1zOiAxMDAwMCxcclxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QUQwMFx1QjgyOCBcdUM1RDBcdUI3RUNcdUI5Q0MgXHVDN0FDXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXR3b3JrRXJyb3JzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICduZXR3b3JrZXJyb3InLCAnZmV0Y2gnLCAndGltZW91dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2Vjb25ucmVzZXQnLCAnZXRpbWVkb3V0JywgJ2Vub3Rmb3VuZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJzUwMicsICc1MDMnLCAnNTA0JywgJzQwOCcsICc0MjknXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV0d29ya0Vycm9ycy5zb21lKHBhdHRlcm4gPT4gZXJyb3JUZXh0LmluY2x1ZGVzKHBhdHRlcm4pKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLi4ub3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQVBJUmV0cnlQb2xpY3kgZXh0ZW5kcyBSZXRyeVBvbGljeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDMsXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IDIwMDAsXHJcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogdHJ1ZSxcclxuICAgICAgICAgICAgbWF4RGVsYXlNczogMTUwMDAsXHJcbiAgICAgICAgICAgIHJldHJ5Q29uZGl0aW9uOiAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEFQSSBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1QzkxMSBcdUM3QUNcdUMyRENcdUIzQzQgXHVBQzAwXHVCMkE1XHVENTVDIFx1QUM4M1x1QjRFNFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmV0cnlhYmxlRXJyb3JzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICc0MjknLCAvLyBSYXRlIGxpbWl0XHJcbiAgICAgICAgICAgICAgICAgICAgJzUwMicsICc1MDMnLCAnNTA0JywgLy8gU2VydmVyIGVycm9yc1xyXG4gICAgICAgICAgICAgICAgICAgICd0aW1lb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAnbmV0d29yaydcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXRyeWFibGVFcnJvcnMuc29tZShwYXR0ZXJuID0+IGVycm9yVGV4dC5pbmNsdWRlcyhwYXR0ZXJuKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERhdGFiYXNlUmV0cnlQb2xpY3kgZXh0ZW5kcyBSZXRyeVBvbGljeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDMsXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IDUwMCxcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiBmYWxzZSwgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVCMjk0IFx1QkU2MFx1Qjk3OCBcdUM3QUNcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgbWF4RGVsYXlNczogMjAwMCxcclxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzdDXHVDMkRDXHVDODAxXHVDNzc4IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUM1RDBcdUI3RUNcdUI5Q0MgXHVDN0FDXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXRyeWFibGVFcnJvcnMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xvY2snLCAnYnVzeScsICd0aW1lb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAnY29ubmVjdGlvbicsICduZXR3b3JrJ1xyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHJ5YWJsZUVycm9ycy5zb21lKHBhdHRlcm4gPT4gZXJyb3JUZXh0LmluY2x1ZGVzKHBhdHRlcm4pKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLi4ub3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUQzQjhcdUM3NTggXHVENTY4XHVDMjE4XHVCNEU0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyeUFzeW5jPFQ+KFxyXG4gICAgZm46ICgpID0+IFByb21pc2U8VD4sXHJcbiAgICBvcHRpb25zPzogUmV0cnlPcHRpb25zXHJcbik6IFByb21pc2U8VD4ge1xyXG4gICAgY29uc3QgcG9saWN5ID0gbmV3IFJldHJ5UG9saWN5KG9wdGlvbnMpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9saWN5LmV4ZWN1dGUoZm4pO1xyXG4gICAgXHJcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdCE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJldHJ5U3luYzxUPihcclxuICAgIGZuOiAoKSA9PiBULFxyXG4gICAgb3B0aW9ucz86IFJldHJ5T3B0aW9uc1xyXG4pOiBUIHtcclxuICAgIGNvbnN0IHBvbGljeSA9IG5ldyBSZXRyeVBvbGljeShvcHRpb25zKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHBvbGljeS5leGVjdXRlU3luYyhmbik7XHJcbiAgICBcclxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0ITtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVDNjk0XHVDQ0FEXHVDNkE5IFx1RDNCOFx1Qzc1OCBcdUQ1NjhcdUMyMThcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJldHJ5TmV0d29ya1JlcXVlc3Q8VD4oXHJcbiAgICBmbjogKCkgPT4gUHJvbWlzZTxUPixcclxuICAgIG9wdGlvbnM/OiBSZXRyeU9wdGlvbnNcclxuKTogUHJvbWlzZTxUPiB7XHJcbiAgICBjb25zdCBwb2xpY3kgPSBuZXcgTmV0d29ya1JldHJ5UG9saWN5KG9wdGlvbnMpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9saWN5LmV4ZWN1dGUoZm4pO1xyXG4gICAgXHJcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdCE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcclxuICAgIH1cclxufVxyXG5cclxuLy8gQVBJIFx1RDYzOFx1Q0Q5Q1x1QzZBOSBcdUQzQjhcdUM3NTggXHVENTY4XHVDMjE4XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyeUFQSUNhbGw8VD4oXHJcbiAgICBmbjogKCkgPT4gUHJvbWlzZTxUPixcclxuICAgIG9wdGlvbnM/OiBSZXRyeU9wdGlvbnNcclxuKTogUHJvbWlzZTxUPiB7XHJcbiAgICBjb25zdCBwb2xpY3kgPSBuZXcgQVBJUmV0cnlQb2xpY3kob3B0aW9ucyk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb2xpY3kuZXhlY3V0ZShmbik7XHJcbiAgICBcclxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0ITtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBDaXJjdWl0IEJyZWFrZXIgXHVEMzI4XHVEMTM0XHVBQ0ZDIFx1RDU2OFx1QUVEOCBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QjI5NCBcdUFDRTBcdUFFMDkgXHVDN0FDXHVDMkRDXHVCM0M0XHJcbmV4cG9ydCBjbGFzcyBDaXJjdWl0QnJlYWtlclJldHJ5UG9saWN5IGV4dGVuZHMgUmV0cnlQb2xpY3kge1xyXG4gICAgcHJpdmF0ZSBmYWlsdXJlQ291bnQgPSAwO1xyXG4gICAgcHJpdmF0ZSBsYXN0RmFpbHVyZVRpbWUgPSAwO1xyXG4gICAgcHJpdmF0ZSBjaXJjdWl0QnJlYWtlclRpbWVvdXQgPSA2MDAwMDsgLy8gMVx1QkQ4NFxyXG4gICAgcHJpdmF0ZSBmYWlsdXJlVGhyZXNob2xkID0gNTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGV4ZWN1dGVXaXRoQ2lyY3VpdEJyZWFrZXI8VD4oZm46ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFJldHJ5UmVzdWx0PFQ+PiB7XHJcbiAgICAgICAgLy8gQ2lyY3VpdCBCcmVha2VyIFx1Q0NCNFx1RDA2Q1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ2lyY3VpdE9wZW4oKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogbmV3IEVycm9yKCdDaXJjdWl0IGJyZWFrZXIgaXMgb3BlbicpLFxyXG4gICAgICAgICAgICAgICAgYXR0ZW1wdHM6IDAsXHJcbiAgICAgICAgICAgICAgICB0b3RhbER1cmF0aW9uOiAwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGUoZm4pO1xyXG5cclxuICAgICAgICAvLyBcdUFDQjBcdUFDRkNcdUM1RDAgXHVCNTMwXHVCOTc4IENpcmN1aXQgQnJlYWtlciBcdUMwQzFcdUQwREMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZUNvdW50ID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZhaWx1cmVDb3VudCsrO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RGYWlsdXJlVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNDaXJjdWl0T3BlbigpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5mYWlsdXJlQ291bnQgPCB0aGlzLmZhaWx1cmVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdEZhaWx1cmUgPSBEYXRlLm5vdygpIC0gdGhpcy5sYXN0RmFpbHVyZVRpbWU7XHJcbiAgICAgICAgaWYgKHRpbWVTaW5jZUxhc3RGYWlsdXJlID49IHRoaXMuY2lyY3VpdEJyZWFrZXJUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZUNvdW50ID0gMDsgLy8gUmVzZXQgY2lyY3VpdCBicmVha2VyXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcclxuaW1wb3J0IHsgV29yZERhdGEgfSBmcm9tICcuLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcbmltcG9ydCB7IGRlY3J5cHRBcGlLZXkgfSBmcm9tICcuLi8uLi91dGlscyc7XHJcbmltcG9ydCB7IHJldHJ5QVBJQ2FsbCwgQVBJUmV0cnlQb2xpY3kgfSBmcm9tICcuLi8uLi9zaGFyZWQvUmV0cnlQb2xpY3knO1xyXG5pbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMTE1SZXNwb25zZSB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgZGF0YT86IGFueTtcclxuICAgIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb2dyZXNzQ2FsbGJhY2sge1xyXG4gICAgKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBXb3JkRGV0YWlsRGF0YSB7XHJcbiAgICB3b3JkOiBzdHJpbmc7XHJcbiAgICBwcm9udW5jaWF0aW9uOiBzdHJpbmc7XHJcbiAgICBtZWFuaW5nczogc3RyaW5nW107XHJcbiAgICBleGFtcGxlczoge1xyXG4gICAgICAgIGVuZ2xpc2g6IHN0cmluZztcclxuICAgICAgICBrb3JlYW46IHN0cmluZztcclxuICAgIH1bXTtcclxuICAgIHNpbWlsYXJXb3Jkczogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMTE1TZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncztcclxuICAgIHByaXZhdGUgcmV0cnlQb2xpY3k6IEFQSVJldHJ5UG9saWN5O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICAgICAgdGhpcy5yZXRyeVBvbGljeSA9IG5ldyBBUElSZXRyeVBvbGljeSh7XHJcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAzLFxyXG4gICAgICAgICAgICBkZWxheU1zOiAyMDAwLFxyXG4gICAgICAgICAgICBleHBvbmVudGlhbEJhY2tvZmY6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc1OCBBUEkgXHVEMEE0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUJBNTRcdUMxMUNcdUI0RENcclxuICAgIHByaXZhdGUgZ2V0Q3VycmVudEFwaUtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5zZXR0aW5ncy5sbG1Qcm92aWRlcjtcclxuICAgICAgICBsZXQgZW5jcnlwdGVkS2V5ID0gJyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3dpdGNoIChwcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgZW5jcnlwdGVkS2V5ID0gdGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcclxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZEtleSA9IHRoaXMuc2V0dGluZ3MuYW50aHJvcGljQXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2dvb2dsZSc6XHJcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRLZXkgPSB0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZGVjcnlwdEFwaUtleShlbmNyeXB0ZWRLZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKTtcclxuICAgICAgICAgICAgaWYgKCFhcGlLZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RQcm9tcHQgPSAnSGVsbG8sIHRoaXMgaXMgYSB0ZXN0IG1lc3NhZ2UuIFBsZWFzZSByZXNwb25kIHdpdGggXCJPS1wiIGlmIHlvdSBjYW4gcmVhZCB0aGlzLic7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsTExNKHRlc3RQcm9tcHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6ICdBUEkgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNScgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzcG9uc2UuZXJyb3IgfHwgJ0FQSSBcdUM1RjBcdUFDQjAgXHVDMkU0XHVEMzI4JyB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFdvcmREZXRhaWxzKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKTtcclxuICAgICAgICAgICAgaWYgKCFhcGlLZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IHRoaXMuY3JlYXRlV29yZERldGFpbFByb21wdCh3b3JkKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxMTE0ocHJvbXB0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gdGhpcy5wYXJzZVdvcmREZXRhaWxSZXNwb25zZShyZXNwb25zZS5kYXRhLCB3b3JkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHBhcnNlZERhdGEgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzcG9uc2UuZXJyb3IgfHwgJ1x1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0XHVCMzcwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0TXVsdGlwbGVXb3JkRGV0YWlscyh3b3Jkczogc3RyaW5nW10sIHByb2dyZXNzQ2FsbGJhY2s/OiBQcm9ncmVzc0NhbGxiYWNrKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IHRoaXMuZ2V0Q3VycmVudEFwaUtleSgpO1xyXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHdvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDQzk4XHVCOUFDXHVENTYwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBCQVRDSF9TSVpFID0gMjA7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFJlc3VsdHM6IFdvcmREZXRhaWxEYXRhW10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgdG90YWxCYXRjaGVzID0gTWF0aC5jZWlsKHdvcmRzLmxlbmd0aCAvIEJBVENIX1NJWkUpO1xyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKDAsIHdvcmRzLmxlbmd0aCwgYFx1Q0QxRCAke3dvcmRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0XHVCOTdDICR7dG90YWxCYXRjaGVzfVx1QUMxQyBcdUJDMzBcdUNFNThcdUI4NUMgXHVCMDk4XHVCMjA0XHVDNUI0IFx1Q0M5OFx1QjlBQ1x1RDU2OVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkgKz0gQkFUQ0hfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmF0Y2hOdW1iZXIgPSBNYXRoLmZsb29yKGkgLyBCQVRDSF9TSVpFKSArIDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaFdvcmRzID0gd29yZHMuc2xpY2UoaSwgaSArIEJBVENIX1NJWkUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhpLCB3b3Jkcy5sZW5ndGgsIGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0vJHt0b3RhbEJhdGNoZXN9IFx1Q0M5OFx1QjlBQyBcdUM5MTEuLi4gKCR7YmF0Y2hXb3Jkcy5sZW5ndGh9XHVBQzFDIFx1QjJFOFx1QzVCNClgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHQgPSB0aGlzLmNyZWF0ZU11bHRpcGxlV29yZERldGFpbFByb21wdChiYXRjaFdvcmRzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbExMTShwcm9tcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSB0aGlzLnBhcnNlTXVsdGlwbGVXb3JkRGV0YWlsUmVzcG9uc2UocmVzcG9uc2UuZGF0YSwgYmF0Y2hXb3Jkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbFJlc3VsdHMucHVzaCguLi5wYXJzZWREYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGkgKyBiYXRjaFdvcmRzLmxlbmd0aCwgd29yZHMubGVuZ3RoLCBgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzY0NFx1QjhDQzogJHtwYXJzZWREYXRhLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1Q0M5OFx1QjlBQ1x1QjQyOGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzJFNFx1RDMyODpgLCByZXNwb25zZS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGksIHdvcmRzLmxlbmd0aCwgYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfSBcdUMyRTRcdUQzMjgsIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUNcdUI4NUMgXHVDODA0XHVENjU4Li4uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVDMkU0XHVEMzI4XHVENTVDIFx1QkMzMFx1Q0U1OFx1Qzc1OCBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NDQgXHVBQzFDXHVCQ0M0XHVDODAxXHVDNzNDXHVCODVDIFx1Q0M5OFx1QjlBQyBcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kaXZpZHVhbFJlc3VsdHMgPSBhd2FpdCB0aGlzLnByb2Nlc3NXb3Jkc0luZGl2aWR1YWxseShiYXRjaFdvcmRzLCBwcm9ncmVzc0NhbGxiYWNrLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLmluZGl2aWR1YWxSZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfSBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1ODpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhpLCB3b3Jkcy5sZW5ndGgsIGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0gXHVDNjI0XHVCOTU4LCBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDXHVCODVDIFx1QzgwNFx1RDY1OC4uLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREIFx1QzJEQyBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDXHVCODVDIFx1RDNGNFx1QkMzMVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGl2aWR1YWxSZXN1bHRzID0gYXdhaXQgdGhpcy5wcm9jZXNzV29yZHNJbmRpdmlkdWFsbHkoYmF0Y2hXb3JkcywgcHJvZ3Jlc3NDYWxsYmFjaywgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLmluZGl2aWR1YWxSZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUJDMzBcdUNFNTggXHVBQzA0IFx1QzlFN1x1Qzc0MCBcdUM5QzBcdUM1RjAgKEFQSSBcdUM4MUNcdUQ1NUMgXHVCQzI5XHVDOUMwKVxyXG4gICAgICAgICAgICAgICAgaWYgKGkgKyBCQVRDSF9TSVpFIDwgd29yZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2sod29yZHMubGVuZ3RoLCB3b3Jkcy5sZW5ndGgsIGBcdUJBQThcdUI0RTAgXHVCQzMwXHVDRTU4IFx1Q0M5OFx1QjlBQyBcdUM2NDRcdUI4Q0MuIFx1Q0QxRCAke2FsbFJlc3VsdHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzIxOFx1QzlEMVx1QjQyOGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGFsbFJlc3VsdHMgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUIyRThcdUM1QjQgXHVDQzk4XHVCOUFDIChcdUJDMzBcdUNFNTggXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUQzRjRcdUJDMzEpXHJcbiAgICBwcml2YXRlIGFzeW5jIHByb2Nlc3NXb3Jkc0luZGl2aWR1YWxseSh3b3Jkczogc3RyaW5nW10sIHByb2dyZXNzQ2FsbGJhY2s/OiBQcm9ncmVzc0NhbGxiYWNrLCBzdGFydEluZGV4OiBudW1iZXIgPSAwKTogUHJvbWlzZTxXb3JkRGV0YWlsRGF0YVtdPiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHdvcmRzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBzdGFydEluZGV4ICsgaTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soY3VycmVudEluZGV4LCBzdGFydEluZGV4ICsgd29yZHMubGVuZ3RoLCBgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQzogXCIke3dvcmR9XCJgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldFdvcmREZXRhaWxzKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCIgXHVDQzk4XHVCOUFDIFx1QzJFNFx1RDMyODpgLCByZXNwb25zZS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVDMkU0XHVEMzI4XHVENTVDIFx1QjJFOFx1QzVCNFx1QzVEMCBcdUIzMDBcdUQ1NUMgXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMwRERcdUMxMzFcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JkOiB3b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4J10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDIFx1QUMwNCBcdUM5RTdcdUM3NDAgXHVDOUMwXHVDNUYwXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDUwMCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCIgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZDogd29yZC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Q0M5OFx1QjlBQyBcdUM2MjRcdUI5NTgnXSxcclxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDOUMwXHVDNUYwIFx1RDU2OFx1QzIxOFxyXG4gICAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlV29yZERldGFpbFByb21wdCh3b3JkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgXHVCMkU0XHVDNzRDIFx1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUM1RDAgXHVCMzAwXHVENTVDIFx1QzBDMVx1QzEzOCBcdUM4MTVcdUJDRjRcdUI5N0MgSlNPTiBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUMgXHVDODFDXHVBQ0Y1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LlxyXG5cclxuXHVDNjk0XHVBRDZDXHVDMEFDXHVENTZEOlxyXG4xLiBcdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzggKElQQSBcdUQ2MTVcdUMyREQpXHJcbjIuIFx1RDU1Q1x1QUUwMCBcdUI3M0JcdUI0RTQgKFx1QzVFQ1x1QjdFQyBcdUFDMUNcdUM3N0MgXHVDMjE4IFx1Qzc4OFx1Qzc0QylcclxuMy4gXHVBQzAxIFx1QjczQlx1QkNDNFx1Qjg1QyBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4XHVBQ0ZDIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgKFx1QUMwMSBcdUI3M0JcdUIyRjkgMi0zXHVBQzFDXHVDNzU4IFx1QzYwOFx1QkIzOCBcdUM4MUNcdUFDRjUpXHJcbjQuIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0XHVCNEU0XHJcblxyXG5cdUM3NTFcdUIyRjUgXHVENjE1XHVDMkREOlxyXG57XHJcbiAgXCJ3b3JkXCI6IFwiJHt3b3JkfVwiLFxyXG4gIFwicHJvbnVuY2lhdGlvblwiOiBcIi9cdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzgvXCIsXHJcbiAgXCJtZWFuaW5nc1wiOiBbXCJcdUI3M0IxXCIsIFwiXHVCNzNCMlwiLCBcIlx1QjczQjNcIl0sXHJcbiAgXCJleGFtcGxlc1wiOiBbXHJcbiAgICB7XHJcbiAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggMVwiLFxyXG4gICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgMVwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDJcIiwgXHJcbiAgICAgIFwia29yZWFuXCI6IFwiXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAyXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggM1wiLFxyXG4gICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgM1wiXHJcbiAgICB9XHJcbiAgXSxcclxuICBcInNpbWlsYXJXb3Jkc1wiOiBbXCJcdUM3MjBcdUMwQUNcdUIyRThcdUM1QjQxXCIsIFwiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0MlwiLCBcIlx1QzcyMFx1QzBBQ1x1QjJFOFx1QzVCNDNcIl1cclxufVxyXG5cclxuSlNPTiBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUNcdUI5Q0MgXHVDNzUxXHVCMkY1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LiBcdUIyRTRcdUI5NzggXHVDMTI0XHVCQTg1XHVDNzQwIFx1RDNFQ1x1RDU2OFx1RDU1OFx1QzlDMCBcdUI5QzhcdUMxMzhcdUM2OTQuYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZU11bHRpcGxlV29yZERldGFpbFByb21wdCh3b3Jkczogc3RyaW5nW10pOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHdvcmRMaXN0ID0gd29yZHMuam9pbignLCAnKTtcclxuICAgICAgICByZXR1cm4gYFx1QjJFNFx1Qzc0QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0XHVCNEU0XHVDNUQwIFx1QjMwMFx1RDU1QyBcdUMwQzFcdUMxMzggXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QzgxNVx1RDY1NVx1RDU1QyBKU09OIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUM4MUNcdUFDRjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQ6ICR7d29yZExpc3R9XHJcblxyXG5cdUM2OTRcdUFENkNcdUMwQUNcdUQ1NkQ6XHJcbi0gXHVBQzAxIFx1QjJFOFx1QzVCNFx1QzVEMCBcdUIzMDBcdUQ1NzQgXHVCQzFDXHVDNzRDXHVBRTMwXHVENjM4IChJUEEgXHVENjE1XHVDMkREKSwgXHVENTVDXHVBRTAwIFx1QjczQlx1QjRFNCwgXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOFx1QUNGQyBcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVELCBcdUM3MjBcdUMwQUNcdUQ1NUMgXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUQzRUNcdUQ1NjhcclxuLSBcdUFDMDEgXHVCNzNCXHVCQ0M0XHVCODVDIDItM1x1QUMxQ1x1Qzc1OCBcdUM2MDhcdUJCMzhcdUM3NDQgXHVDODFDXHVBQ0Y1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0XHJcbi0gSlNPTiBcdUQ2MTVcdUMyRERcdUI5Q0MgXHVDNzUxXHVCMkY1XHVENTU4XHVBQ0UwIFx1QjJFNFx1Qjk3OCBcdUMxMjRcdUJBODVcdUM3NDAgXHVEM0VDXHVENTY4XHVENTU4XHVDOUMwIFx1QjlDOFx1QzEzOFx1QzY5NFxyXG4tIFx1QkFBOFx1QjRFMCBcdUJCMzhcdUM3OTBcdUM1RjRcdUM3NDAgXHVDNzc0XHVDOTExIFx1QjUzMFx1QzYzNFx1RDQ1Q1x1Qjg1QyBcdUFDMTBcdUMyRjhcdUM4RkNcdUMxMzhcdUM2OTRcclxuLSBcdUJDMzBcdUM1RjRcdUFDRkMgXHVBQzFEXHVDQ0I0XHVCMjk0IFx1QzgxNVx1RDY1NVx1RDU1QyBKU09OIFx1QkIzOFx1QkM5NVx1Qzc0NCBcdUI1MzBcdUI5NzRcdUMxMzhcdUM2OTRcclxuXHJcblx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyREQ6XHJcbltcclxuICB7XHJcbiAgICBcIndvcmRcIjogXCJcdUIyRThcdUM1QjQxXCIsXHJcbiAgICBcInByb251bmNpYXRpb25cIjogXCIvXHVCQzFDXHVDNzRDXHVBRTMwXHVENjM4L1wiLFxyXG4gICAgXCJtZWFuaW5nc1wiOiBbXCJcdUI3M0IxXCIsIFwiXHVCNzNCMlwiXSxcclxuICAgIFwiZXhhbXBsZXNcIjogW1xyXG4gICAgICB7XHJcbiAgICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAxXCIsXHJcbiAgICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDFcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAyXCIsXHJcbiAgICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDJcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAzXCIsXHJcbiAgICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDNcIlxyXG4gICAgICB9XHJcbiAgICBdLFxyXG4gICAgXCJzaW1pbGFyV29yZHNcIjogW1wiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0MVwiLCBcIlx1QzcyMFx1QzBBQ1x1QjJFOFx1QzVCNDJcIl1cclxuICB9XHJcbl1cclxuXHJcblx1QzkxMVx1QzY5NDogSlNPTiBcdUQ2MTVcdUMyRERcdUI5Q0MgXHVDNzUxXHVCMkY1XHVENTU4XHVBQ0UwIFx1QjJFNFx1Qjk3OCBcdUQxNERcdUMyQTRcdUQyQjhcdUIyOTQgXHVEM0VDXHVENTY4XHVENTU4XHVDOUMwIFx1QjlDOFx1QzEzOFx1QzY5NC5gO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY2FsbExMTShwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuc2V0dGluZ3MubGxtUHJvdmlkZXI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNhbGxPcGVuQUkocHJvbXB0KTtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2FsbEFudGhyb3BpYyhwcm9tcHQpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZ29vZ2xlJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jYWxsR29vZ2xlKHByb21wdCk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1QzlDMFx1QzZEMFx1RDU1OFx1QzlDMCBcdUM1NEFcdUIyOTQgTExNIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc4NVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsT3BlbkFJKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlBUElDYWxsKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdFVybCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5nZXRDdXJyZW50QXBpS2V5KCl9YFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5zZXR0aW5ncy5sbG1Nb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHByb21wdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3Rva2VuczogNDAwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDQwMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JEYXRhLmVycm9yPy5tZXNzYWdlIHx8ICdPcGVuQUkgQVBJIFx1RDYzOFx1Q0Q5QyBcdUMyRTRcdUQzMjgnIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdUM3NTFcdUIyRjUgXHVCMEI0XHVDNkE5XHVDNzc0IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGNvbnRlbnQgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsQW50aHJvcGljKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIC8vIE5vZGUuanMgXHVENjU4XHVBQ0JEXHVDNUQwXHVDMTFDXHVCOUNDIFx1QjNEOVx1Qzc5MVx1RDU1OFx1QjNDNFx1Qjg1RCBcdUNDOThcdUI5QUNcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICdwcm9jZXNzJyBpbiB3aW5kb3cgJiYgKHdpbmRvdyBhcyBXaW5kb3cgJiB7IHByb2Nlc3M/OiB7IHR5cGU/OiBzdHJpbmcgfSB9KS5wcm9jZXNzPy50eXBlID09PSAncmVuZGVyZXInKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5hbnRocm9waWMuY29tL3YxL21lc3NhZ2VzJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd4LWFwaS1rZXknOiB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLnNldHRpbmdzLmxsbU1vZGVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiAzMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogcHJvbXB0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCAnQW50aHJvcGljIEFQSSBcdUQ2MzhcdUNEOUMgXHVDMkU0XHVEMzI4JyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLmNvbnRlbnRbMF0/LnRleHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdUM3NTFcdUIyRjUgXHVCMEI0XHVDNkE5XHVDNzc0IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjb250ZW50IH07XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1QkUwQ1x1Qjc3Q1x1QzZCMFx1QzgwMCBcdUQ2NThcdUFDQkRcdUM1RDBcdUMxMUNcdUIyOTQgXHVDNTQ4XHVCMEI0IFx1QkE1NFx1QzJEQ1x1QzlDMCBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdBbnRocm9waWMgQVBJXHVCMjk0IFx1QkUwQ1x1Qjc3Q1x1QzZCMFx1QzgwMCBcdUQ2NThcdUFDQkRcdUM1RDBcdUMxMUMgXHVDOUMxXHVDODExIFx1RDYzOFx1Q0Q5Q1x1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUIzNzBcdUMyQTRcdUQwNkNcdUQxQjEgXHVDNTcxKE9ic2lkaWFuKVx1QzVEMFx1QzExQ1x1QjlDQyBcdUIzRDlcdUM3OTFcdUQ1NjlcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNhbGxHb29nbGUocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPExMTVJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXRyeUFQSUNhbGwoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0VXJsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy8ke3RoaXMuc2V0dGluZ3MubGxtTW9kZWx9OmdlbmVyYXRlQ29udGVudD9rZXk9JHt0aGlzLmdldEN1cnJlbnRBcGlLZXkoKX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9tcHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDQwMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UudGV4dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCAnR29vZ2xlIEFQSSBcdUQ2MzhcdUNEOUMgXHVDMkU0XHVEMzI4JyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGRhdGEuY2FuZGlkYXRlc1swXT8uY29udGVudD8ucGFydHNbMF0/LnRleHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1Qzc1MVx1QjJGNSBcdUIwQjRcdUM2QTlcdUM3NzQgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogY29udGVudCB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcsIG9yaWdpbmFsV29yZDogc3RyaW5nKTogV29yZERldGFpbERhdGEge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEpTT04gXHVDNzUxXHVCMkY1XHVDNUQwXHVDMTFDIEpTT04gXHVCRDgwXHVCRDg0XHVCOUNDIFx1Q0Q5NFx1Q0Q5Q1xyXG4gICAgICAgICAgICBjb25zdCBqc29uTWF0Y2ggPSByZXNwb25zZS5tYXRjaCgvXFx7W1xcc1xcU10qXFx9Lyk7XHJcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pTT04gXHVENjE1XHVDMkREXHVDNzU4IFx1Qzc1MVx1QjJGNVx1Qzc0NCBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUM2MDhcdUJCMzggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUM4MFx1Qzk5RCBcdUJDMEYgXHVDODE1XHVCOUFDXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzID0gdGhpcy52YWxpZGF0ZUV4YW1wbGVzKGpzb25EYXRhLmV4YW1wbGVzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiBqc29uRGF0YS53b3JkIHx8IG9yaWdpbmFsV29yZCxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IGpzb25EYXRhLnByb251bmNpYXRpb24gfHwgJycsXHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nczoganNvbkRhdGEubWVhbmluZ3MgfHwgW10sXHJcbiAgICAgICAgICAgICAgICBleGFtcGxlczogdmFsaWRhdGVkRXhhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IGpzb25EYXRhLnNpbWlsYXJXb3JkcyB8fCBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIEpTT04gXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6IG9yaWdpbmFsV29yZCxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVDNzU4XHVCQkY4XHVCOTdDIFx1RDMwQ1x1QzJGMVx1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LiddLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM2MDhcdUJCMzggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUM4MFx1Qzk5RCBcdUJDMEYgXHVDODE1XHVCOUFDXHJcbiAgICBwcml2YXRlIHZhbGlkYXRlRXhhbXBsZXMoZXhhbXBsZXM6IGFueVtdKTogeyBlbmdsaXNoOiBzdHJpbmc7IGtvcmVhbjogc3RyaW5nOyB9W10ge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShleGFtcGxlcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRXhhbXBsZXM6IHsgZW5nbGlzaDogc3RyaW5nOyBrb3JlYW46IHN0cmluZzsgfVtdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBleGFtcGxlIG9mIGV4YW1wbGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChleGFtcGxlICYmIHR5cGVvZiBleGFtcGxlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5nbGlzaCA9IGV4YW1wbGUuZW5nbGlzaCB8fCBleGFtcGxlLmVuZ2xpc2hfdGV4dCB8fCBleGFtcGxlLnRleHQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrb3JlYW4gPSBleGFtcGxlLmtvcmVhbiB8fCBleGFtcGxlLmtvcmVhbl90ZXh0IHx8IGV4YW1wbGUudHJhbnNsYXRpb24gfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChlbmdsaXNoLnRyaW0oKSAmJiBrb3JlYW4udHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVkRXhhbXBsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6IGVuZ2xpc2gudHJpbSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46IGtvcmVhbi50cmltKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRXhhbXBsZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZU11bHRpcGxlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcsIG9yaWdpbmFsV29yZHM6IHN0cmluZ1tdKTogV29yZERldGFpbERhdGFbXSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDEuIFx1QzY0NFx1QzgwNFx1RDU1QyBKU09OIFx1QkMzMFx1QzVGNFx1Qzc0NCBcdUNDM0VcdUM1NDRcdUJDRjRcdUFFMzBcclxuICAgICAgICAgICAgbGV0IGpzb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXFtbXFxzXFxTXSpcXF0vKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAyLiBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVCQzMwXHVDNUY0XHVDNzc0IFx1QzVDNlx1QzczQ1x1QkE3NCBcdUFDMUNcdUJDQzQgXHVBQzFEXHVDQ0I0XHVCNEU0XHVDNzQ0IFx1Q0MzRVx1QzU0NFx1QzExQyBcdUJDMzBcdUM1RjRcdUI4NUMgXHVCOUNDXHVCNEU0XHVBRTMwXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmplY3RNYXRjaGVzID0gcmVzcG9uc2UubWF0Y2goL1xce1tee31dKlwid29yZFwiW157fV0qXFx9L2cpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdE1hdGNoZXMgJiYgb2JqZWN0TWF0Y2hlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QganNvblN0cmluZyA9ICdbJyArIG9iamVjdE1hdGNoZXMuam9pbignLCcpICsgJ10nO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbkRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzSnNvbkRhdGEoanNvbkRhdGEsIG9yaWdpbmFsV29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUQzMENcdUMyRjEgXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUJCMzRcdUMyRENcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIDMuIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0XHVBRTRDXHVDOUMwIFx1Q0MzRVx1QUUzMFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdENvbXBsZXRlTWF0Y2ggPSByZXNwb25zZS5tYXRjaCgvXFxbW1xcc1xcU10qXFx9KD89XFxzKiQpLyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdENvbXBsZXRlTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBqc29uTWF0Y2ggPSBbbGFzdENvbXBsZXRlTWF0Y2hbMF0gKyAnXSddO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pTT04gXHVCQzMwXHVDNUY0XHVDNzQ0IFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyA0LiBKU09OIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzQgLSBcdUM4MTBcdUM5QzRcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgIGxldCBqc29uRGF0YTtcclxuICAgICAgICAgICAgbGV0IHBhcnNlZExlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAganNvbkRhdGEgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIEpTT04gXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVDODEwXHVDOUM0XHVDODAxIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gNS4gXHVDODEwXHVDOUM0XHVDODAxIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzQgLSBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0XHVCNEU0XHVCOUNDIFx1RDMwQ1x1QzJGMVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMucGFyc2VJbmNyZW1lbnRhbEpzb24ocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyA2LiBKU09OIFx1QkNGNVx1QUQ2QyBcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpeGVkSnNvbiA9IHRoaXMuZml4SnNvblN0cmluZyhqc29uTWF0Y2hbMF0pO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBqc29uRGF0YSA9IEpTT04ucGFyc2UoZml4ZWRKc29uKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHNlY29uZEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKU09OIFx1RDMwQ1x1QzJGMSBcdUJDMEYgXHVCQ0Y1XHVBRDZDIFx1QzJFNFx1RDMyOCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbkRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1Qzc1MVx1QjJGNVx1Qzc3NCBcdUJDMzBcdUM1RjQgXHVENjE1XHVDMkREXHVDNzc0IFx1QzU0NFx1QjJEOVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0pzb25EYXRhKGpzb25EYXRhLCBvcmlnaW5hbFdvcmRzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNUVDXHVCN0VDIFx1QjJFOFx1QzVCNCBcdUM3NTFcdUIyRjUgXHVEMzBDXHVDMkYxIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzZEMFx1QkNGOCBcdUM3NTFcdUIyRjU6JywgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERCBcdUMyREMgXHVCRTQ4IFx1QUNCMFx1QUNGQyBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsV29yZHMubWFwKHdvcmQgPT4gKHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmQudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzgxMFx1QzlDNFx1QzgwMSBKU09OIFx1RDMwQ1x1QzJGMSAtIFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjRcdUI0RTRcdUI5Q0MgXHVEMzBDXHVDMkYxXHJcbiAgICBwcml2YXRlIHBhcnNlSW5jcmVtZW50YWxKc29uKHJlc3BvbnNlOiBzdHJpbmcpOiBXb3JkRGV0YWlsRGF0YVtdIHtcclxuICAgICAgICBjb25zdCByZXN1bHRzOiBXb3JkRGV0YWlsRGF0YVtdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDNjQ0XHVDODA0XHVENTVDIFx1QUMxRFx1Q0NCNFx1QjRFNFx1Qzc0NCBcdUNDM0VcdUFFMzAgKFx1QzYwOFx1QkIzOCBcdUQ1NDRcdUI0REMgXHVEM0VDXHVENTY4KVxyXG4gICAgICAgIGNvbnN0IG9iamVjdFJlZ2V4ID0gL1xce1tee31dKlwid29yZFwiW157fV0qXCJwcm9udW5jaWF0aW9uXCJbXnt9XSpcIm1lYW5pbmdzXCJbXnt9XSpcImV4YW1wbGVzXCJbXnt9XSpcInNpbWlsYXJXb3Jkc1wiW157fV0qXFx9L2c7XHJcbiAgICAgICAgbGV0IG1hdGNoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHdoaWxlICgobWF0Y2ggPSBvYmplY3RSZWdleC5leGVjKHJlc3BvbnNlKSkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdERhdGEgPSBKU09OLnBhcnNlKG1hdGNoWzBdKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3REYXRhICYmIG9iamVjdERhdGEud29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzID0gdGhpcy52YWxpZGF0ZUV4YW1wbGVzKG9iamVjdERhdGEuZXhhbXBsZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhOiBXb3JkRGV0YWlsRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZDogb2JqZWN0RGF0YS53b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IG9iamVjdERhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IEFycmF5LmlzQXJyYXkob2JqZWN0RGF0YS5tZWFuaW5ncykgPyBvYmplY3REYXRhLm1lYW5pbmdzIDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB2YWxpZGF0ZWRFeGFtcGxlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBBcnJheS5pc0FycmF5KG9iamVjdERhdGEuc2ltaWxhcldvcmRzKSA/IG9iamVjdERhdGEuc2ltaWxhcldvcmRzIDogW11cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh3b3JkRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUFDMURcdUNDQjQgXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVCQjM0XHVDMkRDXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICAvLyBXb3JkRGV0YWlsRGF0YVx1Qjk3QyBXb3JkRGF0YVx1Qjg1QyBcdUJDQzBcdUQ2NThcdUQ1NThcdUIyOTQgXHVCQTU0XHVDMTFDXHVCNERDXHJcbiAgICBjb252ZXJ0VG9Xb3JkRGF0YSh3b3JkRGV0YWlsOiBXb3JkRGV0YWlsRGF0YSk6IFdvcmREYXRhIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3b3JkOiB3b3JkRGV0YWlsLndvcmQsXHJcbiAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmREZXRhaWwucHJvbnVuY2lhdGlvbixcclxuICAgICAgICAgICAgbWVhbmluZ3M6IHdvcmREZXRhaWwubWVhbmluZ3MsXHJcbiAgICAgICAgICAgIHNpbWlsYXJXb3Jkczogd29yZERldGFpbC5zaW1pbGFyV29yZHMsXHJcbiAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGV0YWlsLmV4YW1wbGVzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBKU09OIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUNDOThcdUI5QUNcclxuICAgIHByaXZhdGUgcHJvY2Vzc0pzb25EYXRhKGpzb25EYXRhOiBhbnlbXSwgb3JpZ2luYWxXb3Jkczogc3RyaW5nW10pOiBXb3JkRGV0YWlsRGF0YVtdIHtcclxuICAgICAgICBjb25zdCByZXN1bHRzOiBXb3JkRGV0YWlsRGF0YVtdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGpzb25EYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiBpdGVtLndvcmQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzID0gdGhpcy52YWxpZGF0ZUV4YW1wbGVzKGl0ZW0uZXhhbXBsZXMpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YTogV29yZERldGFpbERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZDogaXRlbS53b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogaXRlbS5wcm9udW5jaWF0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBBcnJheS5pc0FycmF5KGl0ZW0ubWVhbmluZ3MpID8gaXRlbS5tZWFuaW5ncyA6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB2YWxpZGF0ZWRFeGFtcGxlcyxcclxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IEFycmF5LmlzQXJyYXkoaXRlbS5zaW1pbGFyV29yZHMpID8gaXRlbS5zaW1pbGFyV29yZHMgOiBbXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh3b3JkRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEpTT04gXHVCQjM4XHVDNzkwXHVDNUY0IFx1QkNGNVx1QUQ2Q1xyXG4gICAgcHJpdmF0ZSBmaXhKc29uU3RyaW5nKGpzb25TdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGZpeGVkID0ganNvblN0cmluZztcclxuICAgICAgICBcclxuICAgICAgICAvLyAxLiBcdUJEODhcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0IFx1QzgxQ1x1QUM3MCAoXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzI3Q1x1RDQ1QyBcdUI0QTRcdUM3NTggXHVCRDg4XHVDNjQ0XHVDODA0XHVENTVDIFx1QkQ4MFx1QkQ4NClcclxuICAgICAgICBjb25zdCBsYXN0Q29tcGxldGVPYmplY3QgPSBmaXhlZC5tYXRjaCgvLipcXH0oPz0sP1xccyokKS8pO1xyXG4gICAgICAgIGlmIChsYXN0Q29tcGxldGVPYmplY3QpIHtcclxuICAgICAgICAgICAgZml4ZWQgPSBsYXN0Q29tcGxldGVPYmplY3RbMF0gKyAnXSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDIuIFx1QzkxMVx1QkNGNVx1QjQxQyBcdUMyN0NcdUQ0NUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8sXFxzKiwvZywgJywnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyAzLiBcdUJDMzBcdUM1RjQgXHVCMDVEXHVDNzU4IFx1QzI3Q1x1RDQ1QyBcdUM4MUNcdUFDNzBcclxuICAgICAgICBmaXhlZCA9IGZpeGVkLnJlcGxhY2UoLyxcXHMqXFxdL2csICddJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gNC4gXHVBQzFEXHVDQ0I0IFx1QjA1RFx1Qzc1OCBcdUMyN0NcdUQ0NUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8sXFxzKlxcfS9nLCAnfScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDUuIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUIwQjRcdUM3NTggXHVDNzc0XHVDMkE0XHVDRjAwXHVDNzc0XHVENTA0XHVCNDE4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUI1MzBcdUM2MzRcdUQ0NUMgXHVDQzk4XHVCOUFDIChsb29rYmVoaW5kIFx1QzVDNlx1Qzc3NClcclxuICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XHJcbiAgICAgICAgbGV0IGluU3RyaW5nID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGVzY2FwZWQgPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpeGVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXIgPSBmaXhlZFtpXTtcclxuICAgICAgICAgICAgY29uc3QgcHJldkNoYXIgPSBpID4gMCA/IGZpeGVkW2kgLSAxXSA6ICcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcIicgJiYgIWVzY2FwZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpblN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUM4ODVcdUI4Q0NcclxuICAgICAgICAgICAgICAgICAgICBpblN0cmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUJCMzhcdUM3OTBcdUM1RjQgXHVDMkRDXHVDNzkxXHJcbiAgICAgICAgICAgICAgICAgICAgaW5TdHJpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICdcIicgJiYgZXNjYXBlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzc0XHVCQkY4IFx1Qzc3NFx1QzJBNFx1Q0YwMFx1Qzc3NFx1RDUwNFx1QjQxQyBcdUI1MzBcdUM2MzRcdUQ0NUNcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICdcIicgJiYgaW5TdHJpbmcgJiYgIWVzY2FwZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUIwQjRcdUJEODBcdUM3NTggXHVDNzc0XHVDMkE0XHVDRjAwXHVDNzc0XHVENTA0XHVCNDE4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUI1MzBcdUM2MzRcdUQ0NUNcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnXFxcXFwiJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlc2NhcGVkID0gKGNoYXIgPT09ICdcXFxcJyAmJiAhZXNjYXBlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGZpeGVkID0gcmVzdWx0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmaXhlZDtcclxuICAgIH1cclxuXHJcbn0gIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCB9IGZyb20gJy4uLy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcclxuaW1wb3J0IHsgVFRTU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL3R0cy9UVFNJbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBUVFNTZXJ2aWNlRmFjdG9yeSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL3R0cy9UVFNTZXJ2aWNlJztcclxuaW1wb3J0IHsgU3BhY2VkUmVwZXRpdGlvblNlcnZpY2UsIFJldmlld1Nlc3Npb24gfSBmcm9tICcuLi8uLi8uLi9jb3JlL3NlcnZpY2VzL1NwYWNlZFJlcGV0aXRpb25TZXJ2aWNlJztcclxuaW1wb3J0IHsgUmV2aWV3UmVzcG9uc2UgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2FsZ29yaXRobXMvU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobSc7XHJcblxyXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIGN1cnJlbnRDYXJkSW5kZXggPSAwO1xyXG4gICAgY2FyZHM6IFZvY2FidWxhcnlDYXJkW10gPSBbXTtcclxuICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgIHByaXZhdGUga2V5ZG93bkhhbmRsZXI6ICgoZTogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgdHRzU2VydmljZTogVFRTU2VydmljZTtcclxuICAgIHByaXZhdGUgc3BhY2VkUmVwZXRpdGlvblNlcnZpY2U6IFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50U2Vzc2lvbjogUmV2aWV3U2Vzc2lvbiB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLnR0c1NlcnZpY2UgPSBUVFNTZXJ2aWNlRmFjdG9yeS5jcmVhdGVUVFNTZXJ2aWNlKGFwcCwgcGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlID0gbmV3IFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIC8vIFx1QzgwMFx1QzdBNVx1QjQxQyBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgIGNvbnN0IGFsbENhcmRzID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3BhY2VkIFJlcGV0aXRpb246IFx1QkNGNVx1QzJCNVx1Qzc3NCBcdUQ1NDRcdUM2OTRcdUQ1NUMgXHVDRTc0XHVCNERDXHVCNEU0XHVCOUNDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgIHRoaXMuY2FyZHMgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLmdldENhcmRzRm9yUmV2aWV3KGFsbENhcmRzKTtcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5jYXJkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93Tm9DYXJkc0ZvclJldmlldyhhbGxDYXJkcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUJDRjVcdUMyQjUgXHVDMTM4XHVDMTU4IFx1QzJEQ1x1Qzc5MVxyXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24gPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnN0YXJ0UmV2aWV3U2Vzc2lvbih0aGlzLmNhcmRzKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVDMjFDXHVDMTFDIFx1QzExRVx1QUUzMCAoXHVDMEM4IFx1Q0U3NFx1QjREQ1x1QUMwMCBcdUJBM0NcdUM4MDAgXHVDNjI0XHVCM0M0XHVCODVEIFx1Qzg3MFx1QzgxNSBcdUFDMDBcdUIyQTUpXHJcbiAgICAgICAgdGhpcy5zaHVmZmxlQ2FyZHMoKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICAvLyBcdUQwQTRcdUJDRjRcdUI0REMgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjRGMVx1Qjg1RFxyXG4gICAgICAgIHRoaXMua2V5ZG93bkhhbmRsZXIgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2hvd0Fuc3dlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gJ1NwYWNlJyB8fCBlLmtleSA9PT0gJyAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnMScpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJldmlldygnaGFyZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJzInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXZpZXcoJ2dvb2QnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICczJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmV2aWV3KCdlYXN5Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlkb3duSGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaHVmZmxlQ2FyZHMoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2FyZHMubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xyXG4gICAgICAgICAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XHJcbiAgICAgICAgICAgIFt0aGlzLmNhcmRzW2ldLCB0aGlzLmNhcmRzW2pdXSA9IFt0aGlzLmNhcmRzW2pdLCB0aGlzLmNhcmRzW2ldXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Tm9Xb3Jkc01lc3NhZ2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2b2NhYnVsYXJ5LWxlYXJuaW5nLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNVx1QjQxQyBcdUIxOTJcdUM3NzRcdUI5N0MgQ1NTIFx1QkNDMFx1QzIxOFx1Qjg1QyBcdUM4MDFcdUM2QTlcclxuICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmV2aWV3LW1vZGFsLWhlaWdodCcsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0fXZoYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vV29yZHNFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICduby13b3Jkcy1tZXNzYWdlJyB9KTtcclxuICAgICAgICBub1dvcmRzRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVENTU5XHVDMkI1XHVENTYwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQnIH0pO1xyXG4gICAgICAgIG5vV29yZHNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1QzVEMCBcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTVDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBub1dvcmRzRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFQlx1QUUzMCcgfSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkQ2xhc3MoJ2Nsb3NlLWJ1dHRvbicpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dOb0NhcmRzRm9yUmV2aWV3KHRvdGFsQ2FyZHM6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xyXG5cclxuICAgICAgICBjb25zdCBub1Jldmlld0VsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ25vLXJldmlldy1tZXNzYWdlJyB9KTtcclxuICAgICAgICBub1Jldmlld0VsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDgzQ1x1REY4OSBcdUM2MjRcdUIyOThcdUM3NTggXHVCQ0Y1XHVDMkI1IFx1QzY0NFx1QjhDQyEnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0b3RhbENhcmRzID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdGF0cyA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UuY2FsY3VsYXRlU3RhdGlzdGljcyh0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKSk7XHJcbiAgICAgICAgICAgIG5vUmV2aWV3RWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1Q0QxRCAke3RvdGFsQ2FyZHN9XHVBQzFDXHVDNzU4IFx1QjJFOFx1QzVCNCBcdUM5MTEgXHVDNjI0XHVCMjk4IFx1QkNGNVx1QzJCNVx1RDU2MCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmAgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1QkNGNVx1QzJCNSBcdUM2MDhcdUM4MTUgXHVDODE1XHVCQ0Y0XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHREdWVDYXJkcyA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UuZ2V0Q2FyZHNEdWVJbkRheXMoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKSwgXHJcbiAgICAgICAgICAgICAgICAxXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChuZXh0RHVlQ2FyZHMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBub1Jldmlld0VsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgXHVCMEI0XHVDNzdDIFx1QkNGNVx1QzJCNSBcdUM2MDhcdUM4MTU6ICR7bmV4dER1ZUNhcmRzfVx1QUMxQyBcdUIyRThcdUM1QjRgIFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1RDU1OVx1QzJCNSBcdUQxQjVcdUFDQzRcclxuICAgICAgICAgICAgY29uc3Qgc3RhdHNFbCA9IG5vUmV2aWV3RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3R1ZHktc3RhdHMnIH0pO1xyXG4gICAgICAgICAgICBzdGF0c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1RDU1OVx1QzJCNSBcdUQ2MDRcdUQ2NjknIH0pO1xyXG4gICAgICAgICAgICBzdGF0c0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgXHUyMDIyIFx1QzBDOCBcdUIyRThcdUM1QjQ6ICR7c3RhdHMub3ZlcmFsbC5uZXdDYXJkc31cdUFDMUNgIH0pO1xyXG4gICAgICAgICAgICBzdGF0c0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgXHUyMDIyIFx1RDU1OVx1QzJCNSBcdUM5MTE6ICR7c3RhdHMub3ZlcmFsbC5sZWFybmluZ0NhcmRzfVx1QUMxQ2AgfSk7XHJcbiAgICAgICAgICAgIHN0YXRzRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBcdTIwMjIgXHVDNjQ0XHVCOENDOiAke3N0YXRzLm92ZXJhbGwubWF0dXJlQ2FyZHN9XHVBQzFDYCB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBub1Jldmlld0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1XHVDNUQwIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NUMgXHVENkM0IFx1QjJFNFx1QzJEQyBcdUMyRENcdUIzQzRcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBub1Jldmlld0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnIH0pO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZENsYXNzKCdjbG9zZS1idXR0b24nKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q2FyZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2FyZEluZGV4ID49IHRoaXMuY2FyZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbXBsZXRpb25NZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYXJkID0gdGhpcy5jYXJkc1t0aGlzLmN1cnJlbnRDYXJkSW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xyXG5cclxuICAgICAgICBjb25zdCBjYXJkQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZvY2FidWxhcnktY2FyZCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMEMxXHVCMkU4IFx1QzgxNVx1QkNGNCBcdUM2MDFcdUM1RUQgKGJvb2sgXHVDODE1XHVCQ0Y0XHVDNjQwIFx1Q0U3NFx1QjREQyBcdUMwQURcdUM4MUMgXHVCQzg0XHVEMkJDXHVDNzQ0IFx1RDU2OFx1QUVEOCBcdUJDMzBcdUNFNTgpXHJcbiAgICAgICAgY29uc3QgdG9wSW5mb0NvbnRhaW5lciA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY2FyZC10b3AtaW5mbycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIGJvb2sgXHVDODE1XHVCQ0Y0IFx1RDQ1Q1x1QzJEQyAoXHVDNjdDXHVDQUJEKVxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRCb29rID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEN1cnJlbnRCb29rKCk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRCb29rKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2tJbmZvRWwgPSB0b3BJbmZvQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Jvb2staW5mby1kaXNwbGF5JyB9KTtcclxuICAgICAgICAgICAgYm9va0luZm9FbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBjdXJyZW50Qm9vay5uYW1lLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnY3VycmVudC1ib29rLW5hbWUnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDIFx1QkM4NFx1RDJCQyAoXHVDNjI0XHVCOTc4XHVDQUJEKVxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRvcEluZm9Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDJyxcclxuICAgICAgICAgICAgY2xzOiAnY2FyZC1kZWxldGUtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlRGVsZXRlQ2FyZCgpKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUM5QzRcdUQ1ODlcdUI5NjAgXHVENDVDXHVDMkRDXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NFbCA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtaW5kaWNhdG9yJyB9KTtcclxuICAgICAgICBwcm9ncmVzc0VsLnRleHRDb250ZW50ID0gYCR7dGhpcy5jdXJyZW50Q2FyZEluZGV4ICsgMX0gLyAke3RoaXMuY2FyZHMubGVuZ3RofWA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1RDQ1Q1x1QzJEQyAoVFRTIFx1QkM4NFx1RDJCQyBcdUQzRUNcdUQ1NjgpXHJcbiAgICAgICAgY29uc3Qgd29yZENvbnRhaW5lciA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1jb250YWluZXInIH0pO1xyXG4gICAgICAgIGNvbnN0IHdvcmRFbCA9IHdvcmRDb250YWluZXIuY3JlYXRlRWwoJ2gxJywgeyBjbHM6ICdjYXJkLXdvcmQnIH0pO1xyXG4gICAgICAgIGlmIChjdXJyZW50Q2FyZC5wcm9udW5jaWF0aW9uICYmIGN1cnJlbnRDYXJkLnByb251bmNpYXRpb24udHJpbSgpKSB7XHJcbiAgICAgICAgICAgIHdvcmRFbC50ZXh0Q29udGVudCA9IGN1cnJlbnRDYXJkLndvcmQ7XHJcbiAgICAgICAgICAgIHdvcmRFbC5hcHBlbmRUZXh0KCcgJyk7XHJcbiAgICAgICAgICAgIHdvcmRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgWyR7Y3VycmVudENhcmQucHJvbnVuY2lhdGlvbn1dYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Byb251bmNpYXRpb24nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdvcmRFbC50ZXh0Q29udGVudCA9IGN1cnJlbnRDYXJkLndvcmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUJDMUNcdUM3NEMgXHVDN0FDXHVDMEREIFx1QkM4NFx1RDJCQ1xyXG4gICAgICAgIGNvbnN0IHdvcmRQbGF5QnV0dG9uID0gd29yZENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgY2xzOiAndHRzLXBsYXktYnV0dG9uIHdvcmQtcGxheS1idXR0b24nLFxyXG4gICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1QjJFOFx1QzVCNCBcdUJDMUNcdUM3NEMgXHVCNEUzXHVBRTMwJyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd29yZFBsYXlCdXR0b24udGV4dENvbnRlbnQgPSAnXHVEODNEXHVERDBBJztcclxuICAgICAgICB3b3JkUGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnNwZWFrV29yZChjdXJyZW50Q2FyZC53b3JkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNFxyXG4gICAgICAgIGlmIChjdXJyZW50Q2FyZC5zaW1pbGFyV29yZHMgJiYgY3VycmVudENhcmQuc2ltaWxhcldvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3Qgc2ltaWxhclNlY3Rpb24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NpbWlsYXItd29yZHMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIHNpbWlsYXJTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTQ6JyB9KTtcclxuICAgICAgICAgICAgY29uc3Qgc2ltaWxhckxpc3QgPSBzaW1pbGFyU2VjdGlvbi5jcmVhdGVFbCgndWwnLCB7IGNsczogJ3NpbWlsYXItd29yZHMtbGlzdCcgfSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDYXJkLnNpbWlsYXJXb3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2ltaWxhckxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiB3b3JkIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QzYwOFx1QkIzOFx1QjRFNCAoXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1QUMwMFx1QzgzOFx1QzYyOCBcdUM2MDhcdUJCMzggXHVDMEFDXHVDNkE5KVxyXG4gICAgICAgIGlmIChjdXJyZW50Q2FyZC5leGFtcGxlcyAmJiBjdXJyZW50Q2FyZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzU2VjdGlvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZXMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIGV4YW1wbGVzU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzhcdUI0RTQ6JyB9KTtcclxuICAgICAgICAgICAgY3VycmVudENhcmQuZXhhbXBsZXMuZm9yRWFjaCgoZXhhbXBsZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVDb250YWluZXIgPSBleGFtcGxlc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS1jb250YWluZXInIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IChUVFMgXHVCQzg0XHVEMkJDIFx1RDNFQ1x1RDU2OClcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVUZXh0Q29udGFpbmVyID0gZXhhbXBsZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlLXRleHQtY29udGFpbmVyJyB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hFeGFtcGxlID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4YW1wbGUuZW5nbGlzaCB9KTtcclxuICAgICAgICAgICAgICAgIGVuZ2xpc2hFeGFtcGxlLmFkZENsYXNzKCdlbmdsaXNoLWV4YW1wbGUnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVDNjA4XHVCQjM4IFx1QkMxQ1x1Qzc0QyBcdUM3QUNcdUMwREQgXHVCQzg0XHVEMkJDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGFtcGxlUGxheUJ1dHRvbiA9IGV4YW1wbGVUZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3R0cy1wbGF5LWJ1dHRvbiBleGFtcGxlLXBsYXktYnV0dG9uJyxcclxuICAgICAgICAgICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1QzYwOFx1QkIzOCBcdUJDMUNcdUM3NEMgXHVCNEUzXHVBRTMwJyB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVQbGF5QnV0dG9uLnRleHRDb250ZW50ID0gJ1x1RDgzRFx1REQwQSc7XHJcbiAgICAgICAgICAgICAgICBleGFtcGxlUGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtFeGFtcGxlKGV4YW1wbGUuZW5nbGlzaCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAoXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OCBcdUQ2QzRcdUM1RDBcdUI5Q0MgXHVENDVDXHVDMkRDKVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0Fuc3dlciAmJiBleGFtcGxlLmtvcmVhbiAmJiBleGFtcGxlLmtvcmVhbi50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBrb3JlYW5FeGFtcGxlID0gZXhhbXBsZUNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogZXhhbXBsZS5rb3JlYW4gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAga29yZWFuRXhhbXBsZS5hZGRDbGFzcygna29yZWFuLWV4YW1wbGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHVDNjA4XHVCQjM4XHVDNzc0IFx1QzVDNlx1Qzc0NCBcdUI1NEMgXHVBRTMwXHVCQ0Y4IFx1QzYwOFx1QkIzOCBcdUQ0NUNcdUMyRENcclxuICAgICAgICAgICAgY29uc3QgZXhhbXBsZXNTZWN0aW9uID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlcy1zZWN0aW9uJyB9KTtcclxuICAgICAgICAgICAgZXhhbXBsZXNTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzYwOFx1QkIzOFx1QjRFNDonIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlQ29udGFpbmVyID0gZXhhbXBsZXNTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGUtY29udGFpbmVyJyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVUZXh0Q29udGFpbmVyID0gZXhhbXBsZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlLXRleHQtY29udGFpbmVyJyB9KTtcclxuICAgICAgICAgICAgY29uc3QgZW5nbGlzaEV4YW1wbGUgPSBleGFtcGxlVGV4dENvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgVGhpcyBpcyBhbiBleGFtcGxlIHNlbnRlbmNlIHdpdGggdGhlIHdvcmQgXCIke2N1cnJlbnRDYXJkLndvcmR9XCIuYCBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVuZ2xpc2hFeGFtcGxlLmFkZENsYXNzKCdlbmdsaXNoLWV4YW1wbGUnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QUUzMFx1QkNGOCBcdUM2MDhcdUJCMzggXHVCQzFDXHVDNzRDIFx1QzdBQ1x1QzBERCBcdUJDODRcdUQyQkNcclxuICAgICAgICAgICAgY29uc3QgZXhhbXBsZVBsYXlCdXR0b24gPSBleGFtcGxlVGV4dENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgICAgIGNsczogJ3R0cy1wbGF5LWJ1dHRvbiBleGFtcGxlLXBsYXktYnV0dG9uJyxcclxuICAgICAgICAgICAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnXHVDNjA4XHVCQjM4IFx1QkMxQ1x1Qzc0QyBcdUI0RTNcdUFFMzAnIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV4YW1wbGVQbGF5QnV0dG9uLnRleHRDb250ZW50ID0gJ1x1RDgzRFx1REQwQSc7XHJcbiAgICAgICAgICAgIGV4YW1wbGVQbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnNwZWFrRXhhbXBsZShgVGhpcyBpcyBhbiBleGFtcGxlIHNlbnRlbmNlIHdpdGggdGhlIHdvcmQgXCIke2N1cnJlbnRDYXJkLndvcmR9XCIuYCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAoXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OCBcdUQ2QzRcdUM1RDBcdUI5Q0MgXHVENDVDXHVDMkRDKVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93QW5zd2VyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrb3JlYW5FeGFtcGxlID0gZXhhbXBsZUNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYFwiJHtjdXJyZW50Q2FyZC53b3JkfVwiXHVCNzdDXHVCMjk0IFx1QjJFOFx1QzVCNFx1QUMwMCBcdUQzRUNcdUQ1NjhcdUI0MUMgXHVDNjA4XHVCQjM4XHVDNzg1XHVCMkM4XHVCMkU0LmAgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGtvcmVhbkV4YW1wbGUuYWRkQ2xhc3MoJ2tvcmVhbi1leGFtcGxlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QzgxNVx1QjJGNSBcdUQ2NTVcdUM3NzggXHVCQzg0XHVEMkJDXHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgY2hlY2tCdXR0b24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUM4MTVcdUIyRjUgXHVENjU1XHVDNzc4XHVENTU4XHVBRTMwJyB9KTtcclxuICAgICAgICAgICAgY2hlY2tCdXR0b24uYWRkQ2xhc3MoJ2NoZWNrLWFuc3dlci1idXR0b24nKTtcclxuICAgICAgICAgICAgY2hlY2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q2FyZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdUM4MTVcdUIyRjUgXHVENDVDXHVDMkRDXHJcbiAgICAgICAgICAgIGNvbnN0IGFuc3dlclNlY3Rpb24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Fuc3dlci1zZWN0aW9uJyB9KTtcclxuICAgICAgICAgICAgYW5zd2VyU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUI3M0I6JyB9KTtcclxuICAgICAgICAgICAgY29uc3QgbWVhbmluZ3NMaXN0ID0gYW5zd2VyU2VjdGlvbi5jcmVhdGVFbCgndWwnLCB7IGNsczogJ21lYW5pbmdzLWxpc3QnIH0pO1xyXG4gICAgICAgICAgICBjdXJyZW50Q2FyZC5tZWFuaW5ncy5mb3JFYWNoKG1lYW5pbmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3NMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogbWVhbmluZyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdUJDRjVcdUMyQjUgXHVCQzg0XHVEMkJDXHVCNEU0XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmV2aWV3QnV0dG9ucyhjYXJkQ29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVSZXZpZXdCdXR0b25zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCByZXZpZXdTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jldmlldy1idXR0b25zLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEdldCBuZXh0IHJldmlldyBpbnRlcnZhbHMgZm9yIGN1cnJlbnQgY2FyZFxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYXJkID0gdGhpcy5jYXJkc1t0aGlzLmN1cnJlbnRDYXJkSW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IGludGVydmFscyA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UuZ2V0TmV4dFJldmlld0ludGVydmFscyhjdXJyZW50Q2FyZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSGFyZCBidXR0b24gd2l0aCBpbnRlcnZhbFxyXG4gICAgICAgIGNvbnN0IGhhcmRCdXR0b24gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuICAgICAgICBoYXJkQnV0dG9uLmFkZENsYXNzKCdyZXZpZXctYnV0dG9uJywgJ2hhcmQtYnV0dG9uJyk7XHJcbiAgICAgICAgY29uc3QgaGFyZENvbnRlbnQgPSBoYXJkQnV0dG9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1jb250ZW50JyB9KTtcclxuICAgICAgICBoYXJkQ29udGVudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1x1QzVCNFx1QjgyNFx1QzZDMCcsIGNsczogJ2J1dHRvbi1sYWJlbCcgfSk7XHJcbiAgICAgICAgaGFyZENvbnRlbnQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGludGVydmFscy5oYXJkLmRpc3BsYXlUZXh0LCBjbHM6ICdidXR0b24taW50ZXJ2YWwnIH0pO1xyXG4gICAgICAgIGhhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnaGFyZCcpKTtcclxuXHJcbiAgICAgICAgLy8gR29vZCBidXR0b24gd2l0aCBpbnRlcnZhbFxyXG4gICAgICAgIGNvbnN0IGdvb2RCdXR0b24gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuICAgICAgICBnb29kQnV0dG9uLmFkZENsYXNzKCdyZXZpZXctYnV0dG9uJywgJ2dvb2QtYnV0dG9uJyk7XHJcbiAgICAgICAgY29uc3QgZ29vZENvbnRlbnQgPSBnb29kQnV0dG9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1jb250ZW50JyB9KTtcclxuICAgICAgICBnb29kQ29udGVudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1x1Qzg4Qlx1Qzc0QycsIGNsczogJ2J1dHRvbi1sYWJlbCcgfSk7XHJcbiAgICAgICAgZ29vZENvbnRlbnQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGludGVydmFscy5nb29kLmRpc3BsYXlUZXh0LCBjbHM6ICdidXR0b24taW50ZXJ2YWwnIH0pO1xyXG4gICAgICAgIGdvb2RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnZ29vZCcpKTtcclxuXHJcbiAgICAgICAgLy8gRWFzeSBidXR0b24gd2l0aCBpbnRlcnZhbFxyXG4gICAgICAgIGNvbnN0IGVhc3lCdXR0b24gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuICAgICAgICBlYXN5QnV0dG9uLmFkZENsYXNzKCdyZXZpZXctYnV0dG9uJywgJ2Vhc3ktYnV0dG9uJyk7XHJcbiAgICAgICAgY29uc3QgZWFzeUNvbnRlbnQgPSBlYXN5QnV0dG9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1jb250ZW50JyB9KTtcclxuICAgICAgICBlYXN5Q29udGVudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1x1QzI2Q1x1QzZDMCcsIGNsczogJ2J1dHRvbi1sYWJlbCcgfSk7XHJcbiAgICAgICAgZWFzeUNvbnRlbnQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGludGVydmFscy5lYXN5LmRpc3BsYXlUZXh0LCBjbHM6ICdidXR0b24taW50ZXJ2YWwnIH0pO1xyXG4gICAgICAgIGVhc3lCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnZWFzeScpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVJldmlldyhkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50Q2FyZCA9IHRoaXMuY2FyZHNbdGhpcy5jdXJyZW50Q2FyZEluZGV4XTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayBpZiBTcGFjZWRSZXBldGl0aW9uU2VydmljZSBoYXMgYW4gYWN0aXZlIHNlc3Npb25cclxuICAgICAgICBjb25zdCBhY3RpdmVTZXNzaW9uID0gdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZS5nZXRDdXJyZW50U2Vzc2lvbigpO1xyXG4gICAgICAgIGlmICghYWN0aXZlU2Vzc2lvbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyBhY3RpdmUgcmV2aWV3IHNlc3Npb24gaW4gU3BhY2VkUmVwZXRpdGlvblNlcnZpY2UnKTtcclxuICAgICAgICAgICAgLy8gRmFsbGJhY2s6IHN0YXJ0IGEgbmV3IHNlc3Npb24gd2l0aCByZW1haW5pbmcgY2FyZHNcclxuICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nQ2FyZHMgPSB0aGlzLmNhcmRzLnNsaWNlKHRoaXMuY3VycmVudENhcmRJbmRleCk7XHJcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmdDYXJkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uID0gdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZS5zdGFydFJldmlld1Nlc3Npb24ocmVtYWluaW5nQ2FyZHMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gcmVtYWluaW5nIGNhcmRzIHRvIHJldmlldycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENvbnZlcnQgZGlmZmljdWx0eSB0byBSZXZpZXdSZXNwb25zZSBlbnVtXHJcbiAgICAgICAgY29uc3QgcmV2aWV3UmVzcG9uc2UgPSBkaWZmaWN1bHR5IGFzIFJldmlld1Jlc3BvbnNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFByb2Nlc3MgcmV2aWV3IHVzaW5nIHNwYWNlZCByZXBldGl0aW9uIHNlcnZpY2VcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZS5wcm9jZXNzUmV2aWV3KGN1cnJlbnRDYXJkLCByZXZpZXdSZXNwb25zZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2FyZCBpbiBkYXRhYmFzZSB3aXRoIG5ldyBzY2hlZHVsZSBpbmZvcm1hdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZFdpdGhTY2hlZHVsZShcclxuICAgICAgICAgICAgICAgIHJlc3VsdC51cGRhdGVkQ2FyZC53b3JkLCBcclxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgICAgICByZXN1bHQudXBkYXRlZENhcmQuc2NoZWR1bGVJbmZvXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUIyRTRcdUM3NEMgXHVDRTc0XHVCNERDXHVCODVDIFx1Qzc3NFx1QjNEOVxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXgrKztcclxuICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBzcGFjZWQgcmVwZXRpdGlvbiByZXZpZXc6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAvLyBGYWxsYmFjayB0byBvbGQgbWV0aG9kIGlmIHNwYWNlZCByZXBldGl0aW9uIGZhaWxzXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkKGN1cnJlbnRDYXJkLndvcmQsIGRpZmZpY3VsdHkpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXgrKztcclxuICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYXJkID0gdGhpcy5jYXJkc1t0aGlzLmN1cnJlbnRDYXJkSW5kZXhdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQycsXHJcbiAgICAgICAgICAgIGBcIiR7Y3VycmVudENhcmQud29yZH1cIiBcdUIyRThcdUM1QjRcdUI5N0MgXHVDMEFEXHVDODFDXHVENTU4XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDP1xcblxcblx1Qzc3NCBcdUM3OTFcdUM1QzVcdUM3NDAgXHVCNDE4XHVCM0NDXHVCOUI0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCxcclxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQ1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5yZW1vdmVXb3JkKGN1cnJlbnRDYXJkLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUIyRThcdUM1QjQgXHVCQUE5XHVCODVEXHVDNUQwXHVDMTFDXHVCM0M0IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZHMuc3BsaWNlKHRoaXMuY3VycmVudENhcmRJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVBQzAwIFx1QjM1NCBcdUM3NzRcdUMwQzEgXHVDNUM2XHVDNzNDXHVCQTc0IFx1QzY0NFx1QjhDQyBcdUQ2NTRcdUJBNzRcdUM3M0NcdUI4NUNcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYXJkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGlvbk1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDNzc4XHVCMzcxXHVDMkE0XHVBQzAwIFx1QjJFOFx1QzVCNCBcdUJBQTlcdUI4NUQgXHVCQzk0XHVDNzA0XHVCOTdDIFx1QkM5N1x1QzVCNFx1QjA5OFx1QkE3NCBcdUM4NzBcdUM4MTVcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2FyZEluZGV4ID49IHRoaXMuY2FyZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCA9IHRoaXMuY2FyZHMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1QjJFOFx1QzVCNCBcdUQ0NUNcdUMyRENcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDYXJkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQ6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q29tcGxldGlvbk1lc3NhZ2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2b2NhYnVsYXJ5LWxlYXJuaW5nLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNVx1QjQxQyBcdUIxOTJcdUM3NzRcdUI5N0MgQ1NTIFx1QkNDMFx1QzIxOFx1Qjg1QyBcdUM4MDFcdUM2QTlcclxuICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmV2aWV3LW1vZGFsLWhlaWdodCcsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0fXZoYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjb21wbGV0aW9uLW1lc3NhZ2UnIH0pO1xyXG4gICAgICAgIGNvbXBsZXRpb25FbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ1NTlcdUMyQjUgXHVDNjQ0XHVCOENDIScgfSk7XHJcbiAgICAgICAgY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgXHVDNjI0XHVCMjk4ICR7dGhpcy5jYXJkcy5sZW5ndGh9XHVBQzFDXHVDNzU4IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjVcdUM3NDQgXHVDNjQ0XHVCOENDXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LmAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3RhcnRCdXR0b24gPSBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFNFx1QzJEQyBcdUQ1NTlcdUMyQjVcdUQ1NThcdUFFMzAnIH0pO1xyXG4gICAgICAgIHJlc3RhcnRCdXR0b24uYWRkQ2xhc3MoJ3Jlc3RhcnQtYnV0dG9uJyk7XHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFQlx1QUUzMCcgfSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkQ2xhc3MoJ2Nsb3NlLWJ1dHRvbicpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5rZXlkb3duSGFuZGxlcikge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5ZG93bkhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmtleWRvd25IYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1QUMwNFx1QjJFOFx1RDU1QyBcdUQ2NTVcdUM3NzggXHVCQUE4XHVCMkVDIFx1RDA3NFx1Qjc5OFx1QzJBNFxyXG5jbGFzcyBDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICB0aXRsZTogc3RyaW5nO1xyXG4gICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgb25Db25maXJtOiAoKSA9PiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0aXRsZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIG9uQ29uZmlybTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm07XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnY29uZmlybS1tb2RhbCcpO1xyXG5cclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLnRpdGxlLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0aGlzLm1lc3NhZ2UsIGNsczogJ21vZGFsLW1lc3NhZ2UnIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb25maXJtQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1RDY1NVx1Qzc3OCcsXHJcbiAgICAgICAgICAgIGNsczogJ2NvbmZpcm0tYnV0dG9uIHByaW1hcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkNvbmZpcm0oKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDREU4XHVDMThDJyxcclxuICAgICAgICAgICAgY2xzOiAnY2FuY2VsLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVFRTU2VydmljZSB9IGZyb20gJy4vVFRTSW50ZXJmYWNlJztcclxuaW1wb3J0IHsgQXVkaW9NYW5hZ2VyLCBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc2hhcmVkL0F1ZGlvTWFuYWdlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENoYXR0ZXJib3hUVFNTZXR0aW5ncyB7XHJcbiAgICBlbmFibGVkOiBib29sZWFuO1xyXG4gICAgYXBpVXJsOiBzdHJpbmc7XHJcbiAgICB2b2ljZTogc3RyaW5nO1xyXG4gICAgcmVzcG9uc2VfZm9ybWF0OiBzdHJpbmc7XHJcbiAgICBzcGVlZDogbnVtYmVyO1xyXG4gICAgZXhhZ2dlcmF0aW9uOiBudW1iZXI7XHJcbiAgICBjZmdXZWlnaHQ6IG51bWJlcjtcclxuICAgIHRlbXBlcmF0dXJlOiBudW1iZXI7XHJcbiAgICBzdHJlYW1pbmdfY2h1bmtfc2l6ZTogbnVtYmVyO1xyXG4gICAgc3RyZWFtaW5nX3N0cmF0ZWd5OiBzdHJpbmc7XHJcbiAgICBzdHJlYW1pbmdfYnVmZmVyX3NpemU6IG51bWJlcjtcclxuICAgIHN0cmVhbWluZ19xdWFsaXR5OiBzdHJpbmc7XHJcbiAgICBhdXRvUGxheTogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDaGF0dGVyYm94VFRTUmVxdWVzdCB7XHJcbiAgICBpbnB1dDogc3RyaW5nO1xyXG4gICAgdm9pY2U/OiBzdHJpbmc7XHJcbiAgICByZXNwb25zZV9mb3JtYXQ/OiBzdHJpbmc7XHJcbiAgICBzcGVlZD86IG51bWJlcjtcclxuICAgIGV4YWdnZXJhdGlvbj86IG51bWJlcjtcclxuICAgIGNmZ193ZWlnaHQ/OiBudW1iZXI7XHJcbiAgICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcclxuICAgIHN0cmVhbWluZ19jaHVua19zaXplPzogbnVtYmVyO1xyXG4gICAgc3RyZWFtaW5nX3N0cmF0ZWd5Pzogc3RyaW5nO1xyXG4gICAgc3RyZWFtaW5nX2J1ZmZlcl9zaXplPzogbnVtYmVyO1xyXG4gICAgc3RyZWFtaW5nX3F1YWxpdHk/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDaGF0dGVyYm94VFRTU2VydmljZSBpbXBsZW1lbnRzIFRUU1NlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nczogQ2hhdHRlcmJveFRUU1NldHRpbmdzO1xyXG4gICAgcHJpdmF0ZSBhdWRpb01hbmFnZXI6IEF1ZGlvTWFuYWdlcjtcclxuICAgIHByaXZhdGUgbmV0d29ya01hbmFnZXI6IE5ldHdvcmtSZXNvdXJjZU1hbmFnZXI7XHJcbiAgICBwcml2YXRlIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50QXVkaW9Db250ZXh0OiBBdWRpb0NvbnRleHQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogQ2hhdHRlcmJveFRUU1NldHRpbmdzKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgZW5hYmxlZDogc2V0dGluZ3MuZW5hYmxlZCB8fCBmYWxzZSxcclxuICAgICAgICAgICAgYXBpVXJsOiBzZXR0aW5ncy5hcGlVcmwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMycsXHJcbiAgICAgICAgICAgIHZvaWNlOiBzZXR0aW5ncy52b2ljZSB8fCAnYWxsb3knLFxyXG4gICAgICAgICAgICByZXNwb25zZV9mb3JtYXQ6IHNldHRpbmdzLnJlc3BvbnNlX2Zvcm1hdCB8fCAnd2F2JyxcclxuICAgICAgICAgICAgc3BlZWQ6IHNldHRpbmdzLnNwZWVkIHx8IDEsXHJcbiAgICAgICAgICAgIGV4YWdnZXJhdGlvbjogc2V0dGluZ3MuZXhhZ2dlcmF0aW9uIHx8IDAuMjUsXHJcbiAgICAgICAgICAgIGNmZ1dlaWdodDogc2V0dGluZ3MuY2ZnV2VpZ2h0IHx8IDEsXHJcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBzZXR0aW5ncy50ZW1wZXJhdHVyZSB8fCAwLjA1LFxyXG4gICAgICAgICAgICBzdHJlYW1pbmdfY2h1bmtfc2l6ZTogc2V0dGluZ3Muc3RyZWFtaW5nX2NodW5rX3NpemUgfHwgNTAsXHJcbiAgICAgICAgICAgIHN0cmVhbWluZ19zdHJhdGVneTogc2V0dGluZ3Muc3RyZWFtaW5nX3N0cmF0ZWd5IHx8ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICBzdHJlYW1pbmdfYnVmZmVyX3NpemU6IHNldHRpbmdzLnN0cmVhbWluZ19idWZmZXJfc2l6ZSB8fCAxLFxyXG4gICAgICAgICAgICBzdHJlYW1pbmdfcXVhbGl0eTogc2V0dGluZ3Muc3RyZWFtaW5nX3F1YWxpdHkgfHwgJ3N0cmluZycsXHJcbiAgICAgICAgICAgIGF1dG9QbGF5OiBzZXR0aW5ncy5hdXRvUGxheSB8fCBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hdWRpb01hbmFnZXIgPSBBdWRpb01hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyID0gTmV0d29ya1Jlc291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlZCkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdUVFMgXHVBRTMwXHVCMkE1XHVDNzc0IFx1QkU0NFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzVCNCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGV4dCB8fCB0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUQxNERcdUMyQTRcdUQyQjhcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUM3QUNcdUMwREQgXHVDOTExXHVDNzc4IFx1QzYyNFx1QjUxNFx1QzYyNFx1QUMwMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVDOTExXHVDOUMwXHJcbiAgICAgICAgICAgIHRoaXMuc3RvcFNwZWFraW5nKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGF0dGVyYm94IFRUUyBBUEkgXHVENjM4XHVDRDlDXHJcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IGF3YWl0IHRoaXMuY2FsbENoYXR0ZXJib3hBUEkodGV4dCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGxheUF1ZGlvQmxvYihhdWRpb0Jsb2IpO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaGF0dGVyYm94IFRUUyBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdUVFMgXHVDNzRDXHVDMTMxIFx1QzBERFx1QzEzMVx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIENoYXR0ZXJib3ggVFRTIFx1QzExQ1x1QkM4NFx1QUMwMCBcdUMyRTRcdUQ1ODkgXHVDOTExXHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3BlYWtXb3JkKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghd29yZCB8fCB3b3JkLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUIyRThcdUM1QjRcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMuc3BlYWtUZXh0KHdvcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrRXhhbXBsZShleGFtcGxlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoIWV4YW1wbGUgfHwgZXhhbXBsZS50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVFRTOiBcdUJFNDggXHVDNjA4XHVCQjM4XHVDNzg1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnNwZWFrVGV4dChleGFtcGxlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNhbGxDaGF0dGVyYm94QVBJKHRleHQ6IHN0cmluZyk6IFByb21pc2U8QmxvYj4ge1xyXG4gICAgICAgIC8vIFx1RDE0RFx1QzJBNFx1RDJCOCBcdUFFMzhcdUM3NzQgXHVDODFDXHVENTVDIChDaGF0dGVyYm94IFx1QUQ4Q1x1QzdBNTogMzAwMFx1Qzc5MClcclxuICAgICAgICBjb25zdCB0cnVuY2F0ZWRUZXh0ID0gdGV4dC5sZW5ndGggPiAzMDAwID8gdGV4dC5zdWJzdHJpbmcoMCwgMzAwMCkgOiB0ZXh0O1xyXG5cclxuICAgICAgICBjb25zdCByZXF1ZXN0Qm9keTogQ2hhdHRlcmJveFRUU1JlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIGlucHV0OiB0cnVuY2F0ZWRUZXh0LFxyXG4gICAgICAgICAgICB2b2ljZTogdGhpcy5zZXR0aW5ncy52b2ljZSxcclxuICAgICAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiB0aGlzLnNldHRpbmdzLnJlc3BvbnNlX2Zvcm1hdCxcclxuICAgICAgICAgICAgc3BlZWQ6IHRoaXMuc2V0dGluZ3Muc3BlZWQsXHJcbiAgICAgICAgICAgIGV4YWdnZXJhdGlvbjogdGhpcy5zZXR0aW5ncy5leGFnZ2VyYXRpb24sXHJcbiAgICAgICAgICAgIGNmZ193ZWlnaHQ6IHRoaXMuc2V0dGluZ3MuY2ZnV2VpZ2h0LFxyXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy5zZXR0aW5ncy50ZW1wZXJhdHVyZSxcclxuICAgICAgICAgICAgc3RyZWFtaW5nX2NodW5rX3NpemU6IHRoaXMuc2V0dGluZ3Muc3RyZWFtaW5nX2NodW5rX3NpemUsXHJcbiAgICAgICAgICAgIHN0cmVhbWluZ19zdHJhdGVneTogdGhpcy5zZXR0aW5ncy5zdHJlYW1pbmdfc3RyYXRlZ3ksXHJcbiAgICAgICAgICAgIHN0cmVhbWluZ19idWZmZXJfc2l6ZTogdGhpcy5zZXR0aW5ncy5zdHJlYW1pbmdfYnVmZmVyX3NpemUsXHJcbiAgICAgICAgICAgIHN0cmVhbWluZ19xdWFsaXR5OiB0aGlzLnNldHRpbmdzLnN0cmVhbWluZ19xdWFsaXR5XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5zZXR0aW5ncy5hcGlVcmx9L3YxL2F1ZGlvL3NwZWVjaGAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hhdHRlcmJveCBUVFMgQVBJIFx1QzYyNFx1Qjk1ODogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xyXG4gICAgICAgIGlmICghY29udGVudFR5cGUgfHwgIWNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhdWRpbycpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVDNjA4XHVDMEMxXHVENTU4XHVDOUMwIFx1QkFCQlx1RDU1QyBcdUM3NTFcdUIyRjUgXHVENjE1XHVDMkREOiAke2NvbnRlbnRUeXBlfWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHBsYXlBdWRpb0Jsb2IoYXVkaW9CbG9iOiBCbG9iKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIFx1Qzc3NFx1QzgwNCBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDODE1XHVCOUFDXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5wYXVzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnNyYyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1QzBDOCBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNUQ4XHVCOUFDXHVCQTNDXHVEMkI4IFx1QzBERFx1QzEzMVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQgPSBuZXcgQXVkaW8oKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQmxvYlx1Qzc0NCBVUkxcdUI4NUMgXHVCQ0MwXHVENjU4XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb1VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYXVkaW9CbG9iKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnNyYyA9IGF1ZGlvVXJsO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDMTI0XHVDODE1XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5vbmVuZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQub25sb2FkZWRkYXRhID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5wbGF5KCkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUI4NUNcdUI0REMgXHVDMkRDXHVDNzkxXHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5sb2FkKCk7XHJcblxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0b3BTcGVha2luZygpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2UoKTtcclxuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVVJMIFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQuc3JjICYmIHRoaXMuYXVkaW9FbGVtZW50LnNyYy5zdGFydHNXaXRoKCdibG9iOicpKSB7XHJcbiAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuYXVkaW9FbGVtZW50LnNyYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnNyYyA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEF1ZGlvQ29udGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRBdWRpb0NvbnRleHQuY2xvc2UoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QXVkaW9Db250ZXh0ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNQYXVzZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmF1ZGlvRWxlbWVudCB8fCB0aGlzLmF1ZGlvRWxlbWVudC5wYXVzZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdW1lKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCAmJiB0aGlzLmF1ZGlvRWxlbWVudC5wYXVzZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQucGxheSgpLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUFDMUMgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUFDMUNcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGF1c2UoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9FbGVtZW50ICYmICF0aGlzLmF1ZGlvRWxlbWVudC5wYXVzZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgdXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3M6IFBhcnRpYWw8Q2hhdHRlcmJveFRUU1NldHRpbmdzPik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIC4uLm5ld1NldHRpbmdzIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOFxyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFRleHQgPSAnSGVsbG8sIHRoaXMgaXMgYSB0ZXN0Lic7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FsbENoYXR0ZXJib3hBUEkodGVzdFRleHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaGF0dGVyYm94IFRUUyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDMEFDXHVDNkE5IFx1QUMwMFx1QjJBNVx1RDU1QyBcdUM3NENcdUMxMzEgXHVCQUE5XHVCODVEIChDaGF0dGVyYm94XHVCMjk0IGN1c3RvbSB2b2ljZSBcdUM5QzBcdUM2RDApXHJcbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIC8vIE9wZW5BSSBcdUQ2MzhcdUQ2NTggXHVDNzRDXHVDMTMxXHVCNEU0ICsgXHVDRUU0XHVDMkE0XHVEMTQwIFx1Qzc0Q1x1QzEzMSBcdUM5QzBcdUM2RDBcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAnYWxsb3knLFxyXG4gICAgICAgICAgICAnZWNobycsIFxyXG4gICAgICAgICAgICAnZmFibGUnLFxyXG4gICAgICAgICAgICAnb255eCcsXHJcbiAgICAgICAgICAgICdub3ZhJyxcclxuICAgICAgICAgICAgJ3NoaW1tZXInLFxyXG4gICAgICAgICAgICAnY3VzdG9tJyAvLyBcdUMwQUNcdUM2QTlcdUM3OTAgXHVDODE1XHVDNzU4IFx1Qzc0Q1x1QzEzMVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVENjA0XHVDN0FDIFx1QzEyNFx1QzgxNSBcdUM4MTVcdUJDRjQgXHVCQzE4XHVENjU4XHJcbiAgICBnZXRTZXR0aW5ncygpOiBDaGF0dGVyYm94VFRTU2V0dGluZ3Mge1xyXG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuc2V0dGluZ3MgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUI5QUNcdUMxOENcdUMyQTQgXHVDODE1XHVCOUFDXHJcbiAgICBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RvcFNwZWFraW5nKCk7XHJcbiAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEF1ZGlvQ29udGV4dCA9IG51bGw7XHJcbiAgICB9XHJcbn0iLCAiLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QjlBQ1x1QzE4Q1x1QzJBNCBcdUFEMDBcdUI5QUMgXHVCQzBGIFx1QzgxNVx1QjlBQ1xyXG5cclxuZXhwb3J0IGNsYXNzIEF1ZGlvTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQXVkaW9NYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBhY3RpdmVBdWRpb0VsZW1lbnRzOiBTZXQ8SFRNTEF1ZGlvRWxlbWVudD4gPSBuZXcgU2V0KCk7XHJcbiAgICBwcml2YXRlIGF1ZGlvUG9vbDogSFRNTEF1ZGlvRWxlbWVudFtdID0gW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1heFBvb2xTaXplID0gMTA7XHJcblxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCk6IEF1ZGlvTWFuYWdlciB7XHJcbiAgICAgICAgaWYgKCFBdWRpb01hbmFnZXIuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgQXVkaW9NYW5hZ2VyLmluc3RhbmNlID0gbmV3IEF1ZGlvTWFuYWdlcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gQXVkaW9NYW5hZ2VyLmluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM2OTRcdUMxOEMgXHVDMEREXHVDMTMxIFx1QkMwRiBcdUFEMDBcdUI5QUNcclxuICAgIGNyZWF0ZUF1ZGlvKHNyYzogc3RyaW5nKTogSFRNTEF1ZGlvRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50O1xyXG5cclxuICAgICAgICAvLyBcdUQ0ODBcdUM1RDBcdUMxMUMgXHVDN0FDXHVDMEFDXHVDNkE5IFx1QUMwMFx1QjJBNVx1RDU1QyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDIFx1Q0MzRVx1QUUzMFxyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZUF1ZGlvID0gdGhpcy5hdWRpb1Bvb2wuZmluZChhID0+IGEuZW5kZWQgfHwgYS5wYXVzZWQpO1xyXG4gICAgICAgIGlmIChhdmFpbGFibGVBdWRpbykge1xyXG4gICAgICAgICAgICBhdWRpbyA9IGF2YWlsYWJsZUF1ZGlvO1xyXG4gICAgICAgICAgICBhdWRpby5zcmMgPSBzcmM7XHJcbiAgICAgICAgICAgIGF1ZGlvLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhdWRpbyA9IG5ldyBBdWRpbyhzcmMpO1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwQXVkaW9FbGVtZW50KGF1ZGlvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5hZGQoYXVkaW8pO1xyXG4gICAgICAgIHJldHVybiBhdWRpbztcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDIFx1QzEyNFx1QzgxNVxyXG4gICAgcHJpdmF0ZSBzZXR1cEF1ZGlvRWxlbWVudChhdWRpbzogSFRNTEF1ZGlvRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Qzc5MFx1QjNEOSBcdUM4MTVcdUI5QUMgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOFxyXG4gICAgICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVsZWFzZUF1ZGlvKGF1ZGlvKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIGNsZWFudXAsIHsgb25jZTogdHJ1ZSB9KTtcclxuICAgICAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGNsZWFudXAsIHsgb25jZTogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVCQTU0XHVCQUE4XHVCOUFDIFx1QjIwNFx1QzIxOCBcdUJDMjlcdUM5QzBcdUI5N0MgXHVDNzA0XHVENTVDIFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDM1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmhhcyhhdWRpbykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVsZWFzZUF1ZGlvKGF1ZGlvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDMwMDAwKTsgLy8gMzBcdUNEMDggXHVENkM0IFx1Qzc5MFx1QjNEOSBcdUM4MTVcdUI5QUNcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIChcdUM1NDhcdUM4MDRcdUQ1NUMgXHVCNzk4XHVEMzdDKVxyXG4gICAgYXN5bmMgcGxheUF1ZGlvKHNyYzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgYXVkaW8gPSB0aGlzLmNyZWF0ZUF1ZGlvKHNyYyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgYXVkaW8ucGxheSgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVsZWFzZUF1ZGlvKGF1ZGlvKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM2OTRcdUMxOEMgXHVENTc0XHVDODFDXHJcbiAgICByZWxlYXNlQXVkaW8oYXVkaW86IEhUTUxBdWRpb0VsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5oYXMoYXVkaW8pKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIFx1QzdBQ1x1QzBERCBcdUM5MTFcdUM3NzRcdUJBNzQgXHVDODE1XHVDOUMwXHJcbiAgICAgICAgaWYgKCFhdWRpby5wYXVzZWQpIHtcclxuICAgICAgICAgICAgYXVkaW8ucGF1c2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1RDY1Q1x1QzEzMSBcdUJBQTlcdUI4NURcdUM1RDBcdUMxMUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmRlbGV0ZShhdWRpbyk7XHJcblxyXG4gICAgICAgIC8vIFx1RDQ4MFx1QzVEMCBcdUJDMThcdUQ2NTggKFx1RDA2Q1x1QUUzMCBcdUM4MUNcdUQ1NUMpXHJcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9Qb29sLmxlbmd0aCA8IHRoaXMubWF4UG9vbFNpemUpIHtcclxuICAgICAgICAgICAgYXVkaW8ucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcclxuICAgICAgICAgICAgYXVkaW8ubG9hZCgpOyAvLyBcdUJBNTRcdUJBQThcdUI5QUMgXHVENTc0XHVDODFDXHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9Qb29sLnB1c2goYXVkaW8pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1RDQ4MFx1Qzc3NCBcdUFDMDBcdUI0REQgXHVDQzJDIFx1QUNCRFx1QzZCMCBcdUM2NDRcdUM4MDRcdUQ3ODggXHVDODE1XHVCOUFDXHJcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZUF1ZGlvKGF1ZGlvKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzY5NFx1QzE4QyBcdUM2NDRcdUM4MDQgXHVDODE1XHVCOUFDXHJcbiAgICBwcml2YXRlIGRpc3Bvc2VBdWRpbyhhdWRpbzogSFRNTEF1ZGlvRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIGF1ZGlvLnBhdXNlKCk7XHJcbiAgICAgICAgYXVkaW8ucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcclxuICAgICAgICBhdWRpby5sb2FkKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCQUE4XHVCNEUwIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwXHJcbiAgICAgICAgY29uc3QgbmV3QXVkaW8gPSBhdWRpby5jbG9uZU5vZGUoKSBhcyBIVE1MQXVkaW9FbGVtZW50O1xyXG4gICAgICAgIGF1ZGlvLnBhcmVudE5vZGU/LnJlcGxhY2VDaGlsZChuZXdBdWRpbywgYXVkaW8pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkFBOFx1QjRFMCBcdUQ2NUNcdUMxMzEgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzgxNVx1QzlDMFxyXG4gICAgc3RvcEFsbEF1ZGlvKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5mb3JFYWNoKGF1ZGlvID0+IHtcclxuICAgICAgICAgICAgaWYgKCFhdWRpby5wYXVzZWQpIHtcclxuICAgICAgICAgICAgICAgIGF1ZGlvLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJBQThcdUI0RTAgXHVCOUFDXHVDMThDXHVDMkE0IFx1QzgxNVx1QjlBQ1xyXG4gICAgY2xlYW51cCgpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUJBQThcdUI0RTAgXHVENjVDXHVDMTMxIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM4MTVcdUI5QUNcclxuICAgICAgICB0aGlzLmFjdGl2ZUF1ZGlvRWxlbWVudHMuZm9yRWFjaChhdWRpbyA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZUF1ZGlvKGF1ZGlvKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFjdGl2ZUF1ZGlvRWxlbWVudHMuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgLy8gXHVENDgwXHVDNzU4IFx1QkFBOFx1QjRFMCBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDODE1XHVCOUFDXHJcbiAgICAgICAgdGhpcy5hdWRpb1Bvb2wuZm9yRWFjaChhdWRpbyA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZUF1ZGlvKGF1ZGlvKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmF1ZGlvUG9vbC5jbGVhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMwQzFcdUQwREMgXHVDODE1XHVCQ0Y0XHJcbiAgICBnZXRTdGF0dXMoKTogeyBhY3RpdmU6IG51bWJlcjsgcG9vbGVkOiBudW1iZXIgfSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYWN0aXZlOiB0aGlzLmFjdGl2ZUF1ZGlvRWxlbWVudHMuc2l6ZSxcclxuICAgICAgICAgICAgcG9vbGVkOiB0aGlzLmF1ZGlvUG9vbC5sZW5ndGhcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVCOUFDXHVDMThDXHVDMkE0IFx1QUQwMFx1QjlBQ1xyXG5leHBvcnQgY2xhc3MgTmV0d29ya1Jlc291cmNlTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogTmV0d29ya1Jlc291cmNlTWFuYWdlcjtcclxuICAgIHByaXZhdGUgYWJvcnRDb250cm9sbGVyczogU2V0PEFib3J0Q29udHJvbGxlcj4gPSBuZXcgU2V0KCk7XHJcbiAgICBwcml2YXRlIGFjdGl2ZVJlcXVlc3RzOiBNYXA8c3RyaW5nLCBBYm9ydENvbnRyb2xsZXI+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyIHtcclxuICAgICAgICBpZiAoIU5ldHdvcmtSZXNvdXJjZU1hbmFnZXIuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgTmV0d29ya1Jlc291cmNlTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyLmluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QyBcdUM2OTRcdUNDQUQgXHVDMEREXHVDMTMxIChcdUM3OTBcdUIzRDkgXHVDODE1XHVCOUFDIFx1RDNFQ1x1RDU2OClcclxuICAgIGNyZWF0ZVJlcXVlc3QoaWRlbnRpZmllcj86IHN0cmluZyk6IEFib3J0Q29udHJvbGxlciB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlcnMuYWRkKGNvbnRyb2xsZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgIC8vIFx1QjNEOVx1Qzc3Q1x1RDU1QyBcdUMyRERcdUJDQzRcdUM3OTBcdUM3NTggXHVBRTMwXHVDODc0IFx1QzY5NFx1Q0NBRCBcdUNERThcdUMxOENcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDb250cm9sbGVyID0gdGhpcy5hY3RpdmVSZXF1ZXN0cy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0NvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQ29udHJvbGxlci5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzLmRlbGV0ZShleGlzdGluZ0NvbnRyb2xsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlUmVxdWVzdHMuc2V0KGlkZW50aWZpZXIsIGNvbnRyb2xsZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDNzkwXHVCM0Q5IFx1QzgxNVx1QjlBQ1x1Qjk3QyBcdUM3MDRcdUQ1NUMgXHVEMEMwXHVDNzg0XHVDNTQ0XHVDNkMzIFx1QzEyNFx1QzgxNVxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hYm9ydENvbnRyb2xsZXJzLmhhcyhjb250cm9sbGVyKSkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhbnVwKGNvbnRyb2xsZXIsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgNjAwMDApOyAvLyA2MFx1Q0QwOCBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzNcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNjk0XHVDQ0FEIFx1QzY0NFx1QjhDQyBcdUMyREMgXHVDODE1XHVCOUFDXHJcbiAgICBjb21wbGV0ZVJlcXVlc3QoY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyLCBpZGVudGlmaWVyPzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jbGVhbnVwKGNvbnRyb2xsZXIsIGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDJCOVx1QzgxNSBcdUM2OTRcdUNDQUQgXHVDREU4XHVDMThDXHJcbiAgICBjYW5jZWxSZXF1ZXN0KGlkZW50aWZpZXI6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSB0aGlzLmFjdGl2ZVJlcXVlc3RzLmdldChpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cChjb250cm9sbGVyLCBpZGVudGlmaWVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMEI0XHVCRDgwIFx1QzgxNVx1QjlBQyBcdUI4NUNcdUM5QzFcclxuICAgIHByaXZhdGUgY2xlYW51cChjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsIGlkZW50aWZpZXI/OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlcnMuZGVsZXRlKGNvbnRyb2xsZXIpO1xyXG4gICAgICAgIGlmIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlUmVxdWVzdHMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJBQThcdUI0RTAgXHVENjVDXHVDMTMxIFx1QzY5NFx1Q0NBRCBcdUNERThcdUMxOENcclxuICAgIGNhbmNlbEFsbFJlcXVlc3RzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5mb3JFYWNoKGNvbnRyb2xsZXIgPT4ge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVSZXF1ZXN0cy5jbGVhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIFx1Qjc5OFx1RDM3QyAoXHVDNzkwXHVCM0Q5IFx1QzgxNVx1QjlBQyBcdUQzRUNcdUQ1NjgpXHJcbiAgICBhc3luYyBmZXRjaChcclxuICAgICAgICB1cmw6IHN0cmluZywgXHJcbiAgICAgICAgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fSwgXHJcbiAgICAgICAgaWRlbnRpZmllcj86IHN0cmluZyxcclxuICAgICAgICB0aW1lb3V0OiBudW1iZXIgPSAzMDAwMFxyXG4gICAgKTogUHJvbWlzZTxSZXNwb25zZT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSB0aGlzLmNyZWF0ZVJlcXVlc3QoaWRlbnRpZmllcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcclxuICAgICAgICB9LCB0aW1lb3V0KTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVSZXF1ZXN0KGNvbnRyb2xsZXIsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFudXAoY29udHJvbGxlciwgaWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMEMxXHVEMERDIFx1QzgxNVx1QkNGNFxyXG4gICAgZ2V0U3RhdHVzKCk6IHsgYWN0aXZlOiBudW1iZXI7IGlkZW50aWZpZWQ6IG51bWJlciB9IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhY3RpdmU6IHRoaXMuYWJvcnRDb250cm9sbGVycy5zaXplLFxyXG4gICAgICAgICAgICBpZGVudGlmaWVkOiB0aGlzLmFjdGl2ZVJlcXVlc3RzLnNpemVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IE5vdGljZSwgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUVFNTZXJ2aWNlIH0gZnJvbSAnLi9UVFNJbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBBdWRpb01hbmFnZXIsIE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9zaGFyZWQvQXVkaW9NYW5hZ2VyJztcclxuaW1wb3J0IHsgVFRTQ2FjaGVNYW5hZ2VyLCBDYWNoZVNldHRpbmdzIH0gZnJvbSAnLi9UVFNDYWNoZU1hbmFnZXInO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVDbG91ZFRUU1NldHRpbmdzIHtcclxuICAgIGVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgICBhcGlLZXk6IHN0cmluZztcclxuICAgIHZvaWNlOiBzdHJpbmc7XHJcbiAgICBsYW5ndWFnZUNvZGU6IHN0cmluZztcclxuICAgIHNwZWFraW5nUmF0ZTogbnVtYmVyO1xyXG4gICAgcGl0Y2g6IG51bWJlcjtcclxuICAgIGF1dG9QbGF5OiBib29sZWFuO1xyXG4gICAgY2FjaGVFbmFibGVkOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdvb2dsZUNsb3VkVFRTUmVxdWVzdCB7XHJcbiAgICBpbnB1dDoge1xyXG4gICAgICAgIHRleHQ6IHN0cmluZztcclxuICAgIH07XHJcbiAgICB2b2ljZToge1xyXG4gICAgICAgIGxhbmd1YWdlQ29kZTogc3RyaW5nO1xyXG4gICAgICAgIG5hbWU/OiBzdHJpbmc7XHJcbiAgICAgICAgc3NtbEdlbmRlcj86ICdNQUxFJyB8ICdGRU1BTEUnIHwgJ05FVVRSQUwnO1xyXG4gICAgfTtcclxuICAgIGF1ZGlvQ29uZmlnOiB7XHJcbiAgICAgICAgYXVkaW9FbmNvZGluZzogJ01QMycgfCAnTElORUFSMTYnIHwgJ09HR19PUFVTJztcclxuICAgICAgICBzcGVha2luZ1JhdGU/OiBudW1iZXI7XHJcbiAgICAgICAgcGl0Y2g/OiBudW1iZXI7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdvb2dsZUNsb3VkVFRTUmVzcG9uc2Uge1xyXG4gICAgYXVkaW9Db250ZW50OiBzdHJpbmc7IC8vIEJhc2U2NCBlbmNvZGVkIGF1ZGlvXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHb29nbGVDbG91ZFRUU1NlcnZpY2UgaW1wbGVtZW50cyBUVFNTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgc2V0dGluZ3M6IEdvb2dsZUNsb3VkVFRTU2V0dGluZ3M7XHJcbiAgICBwcml2YXRlIGF1ZGlvTWFuYWdlcjogQXVkaW9NYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBuZXR3b3JrTWFuYWdlcjogTmV0d29ya1Jlc291cmNlTWFuYWdlcjtcclxuICAgIHByaXZhdGUgY2FjaGVNYW5hZ2VyOiBUVFNDYWNoZU1hbmFnZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHNldHRpbmdzPzogR29vZ2xlQ2xvdWRUVFNTZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzPy5lbmFibGVkIHx8IGZhbHNlLFxyXG4gICAgICAgICAgICBhcGlLZXk6IHNldHRpbmdzPy5hcGlLZXkgfHwgJycsXHJcbiAgICAgICAgICAgIHZvaWNlOiBzZXR0aW5ncz8udm9pY2UgfHwgJ2VuLVVTLUpvdXJuZXktRicsXHJcbiAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogc2V0dGluZ3M/Lmxhbmd1YWdlQ29kZSB8fCAnZW4tVVMnLFxyXG4gICAgICAgICAgICBzcGVha2luZ1JhdGU6IHNldHRpbmdzPy5zcGVha2luZ1JhdGUgfHwgMS4wLFxyXG4gICAgICAgICAgICBwaXRjaDogc2V0dGluZ3M/LnBpdGNoIHx8IDAuMCxcclxuICAgICAgICAgICAgYXV0b1BsYXk6IHNldHRpbmdzPy5hdXRvUGxheSB8fCBmYWxzZSxcclxuICAgICAgICAgICAgY2FjaGVFbmFibGVkOiBzZXR0aW5ncz8uY2FjaGVFbmFibGVkICE9PSBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hdWRpb01hbmFnZXIgPSBBdWRpb01hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyID0gTmV0d29ya1Jlc291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyID0gbmV3IFRUU0NhY2hlTWFuYWdlcihhcHApO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlZCkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdUVFMgXHVBRTMwXHVCMkE1XHVDNzc0IFx1QkU0NFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzVCNCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hcGlLZXkpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVEMEE0XHVBQzAwIFx1QzEyNFx1QzgxNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGV4dCB8fCB0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUQxNERcdUMyQTRcdUQyQjhcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcFNwZWFraW5nKCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgYXVkaW9EYXRhOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUNFOTBcdUMyREMgXHVENjU1XHVDNzc4IChcdUNFOTBcdUMyRENcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDFDIFx1QUNCRFx1QzZCMClcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuY2FjaGVFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZVNldHRpbmdzOiBDYWNoZVNldHRpbmdzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogdGhpcy5zZXR0aW5ncy5sYW5ndWFnZUNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdm9pY2U6IHRoaXMuc2V0dGluZ3Mudm9pY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BlYWtpbmdSYXRlOiB0aGlzLnNldHRpbmdzLnNwZWFraW5nUmF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwaXRjaDogdGhpcy5zZXR0aW5ncy5waXRjaFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGVkQXVkaW8gPSBhd2FpdCB0aGlzLmNhY2hlTWFuYWdlci5nZXRDYWNoZWRBdWRpbyh0ZXh0LCBjYWNoZVNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZWRBdWRpbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGxheUF1ZGlvQnVmZmVyKGNhY2hlZEF1ZGlvKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1Q0U5MFx1QzJEQ1x1QzVEMCBcdUM1QzZcdUM3M0NcdUJBNzQgQVBJIFx1RDYzOFx1Q0Q5Q1xyXG4gICAgICAgICAgICBhdWRpb0RhdGEgPSBhd2FpdCB0aGlzLmNhbGxHb29nbGVDbG91ZEFQSSh0ZXh0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1Q0U5MFx1QzJEQ1x1QzVEMCBcdUM4MDBcdUM3QTUgKFx1Q0U5MFx1QzJEQ1x1QUMwMCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUI0MUMgXHVBQ0JEXHVDNkIwKVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5jYWNoZUVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlU2V0dGluZ3M6IENhY2hlU2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiB0aGlzLnNldHRpbmdzLmxhbmd1YWdlQ29kZSxcclxuICAgICAgICAgICAgICAgICAgICB2b2ljZTogdGhpcy5zZXR0aW5ncy52b2ljZSxcclxuICAgICAgICAgICAgICAgICAgICBzcGVha2luZ1JhdGU6IHRoaXMuc2V0dGluZ3Muc3BlYWtpbmdSYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBpdGNoOiB0aGlzLnNldHRpbmdzLnBpdGNoXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNhY2hlTWFuYWdlci5zZXRDYWNoZWRBdWRpbyh0ZXh0LCBjYWNoZVNldHRpbmdzLCBhdWRpb0RhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsYXlBdWRpb0RhdGEoYXVkaW9EYXRhKTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIENsb3VkIFRUUyBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdUVFMgXHVDNzRDXHVDMTMxIFx1QzBERFx1QzEzMVx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTRcdUM2NDAgXHVDNzc4XHVEMTMwXHVCMTM3IFx1QzVGMFx1QUNCMFx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoIXdvcmQgfHwgd29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVFRTOiBcdUJFNDggXHVCMkU4XHVDNUI0XHVDNzg1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnNwZWFrVGV4dCh3b3JkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzcGVha0V4YW1wbGUoZXhhbXBsZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKCFleGFtcGxlIHx8IGV4YW1wbGUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUzogXHVCRTQ4IFx1QzYwOFx1QkIzOFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zcGVha1RleHQoZXhhbXBsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsR29vZ2xlQ2xvdWRBUEkodGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICBjb25zdCB0cnVuY2F0ZWRUZXh0ID0gdGV4dC5sZW5ndGggPiA1MDAwID8gdGV4dC5zdWJzdHJpbmcoMCwgNTAwMCkgOiB0ZXh0O1xyXG5cclxuICAgICAgICBjb25zdCByZXF1ZXN0Qm9keTogR29vZ2xlQ2xvdWRUVFNSZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICBpbnB1dDoge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogdHJ1bmNhdGVkVGV4dFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB2b2ljZToge1xyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiB0aGlzLnNldHRpbmdzLmxhbmd1YWdlQ29kZSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuc2V0dGluZ3Mudm9pY2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYXVkaW9Db25maWc6IHtcclxuICAgICAgICAgICAgICAgIGF1ZGlvRW5jb2Rpbmc6ICdNUDMnLFxyXG4gICAgICAgICAgICAgICAgc3BlYWtpbmdSYXRlOiB0aGlzLnNldHRpbmdzLnNwZWFraW5nUmF0ZSxcclxuICAgICAgICAgICAgICAgIHBpdGNoOiB0aGlzLnNldHRpbmdzLnBpdGNoXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm5ldHdvcmtNYW5hZ2VyLmZldGNoKFxyXG4gICAgICAgICAgICBgaHR0cHM6Ly90ZXh0dG9zcGVlY2guZ29vZ2xlYXBpcy5jb20vdjEvdGV4dDpzeW50aGVzaXplP2tleT0ke3RoaXMuc2V0dGluZ3MuYXBpS2V5fWAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGBnb29nbGUtdHRzLSR7RGF0ZS5ub3coKX1gLCAvLyBcdUFDRTBcdUM3MjAgXHVDMkREXHVCQ0M0XHVDNzkwXHJcbiAgICAgICAgICAgIDEwMDAwIC8vIDEwXHVDRDA4IFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDM1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLmdldERldGFpbGVkRXJyb3JNZXNzYWdlKHJlc3BvbnNlLnN0YXR1cywgZXJyb3JEYXRhKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkYXRhOiBHb29nbGVDbG91ZFRUU1Jlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIHJldHVybiBkYXRhLmF1ZGlvQ29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERldGFpbGVkRXJyb3JNZXNzYWdlKHN0YXR1czogbnVtYmVyLCBlcnJvckRhdGE6IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGVycm9yRGF0YT8uZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBlcnJvckRhdGEuZXJyb3I7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBUElcdUFDMDAgXHVDQzI4XHVCMkU4XHVCNDFDIFx1QUNCRFx1QzZCMCAoNDAzIFBFUk1JU1NJT05fREVOSUVEIHdpdGggQVBJX0tFWV9TRVJWSUNFX0JMT0NLRUQpXHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMyAmJiBlcnJvci5kZXRhaWxzPy5zb21lKChkZXRhaWw6IGFueSkgPT4gXHJcbiAgICAgICAgICAgICAgICBkZXRhaWwucmVhc29uID09PSAnQVBJX0tFWV9TRVJWSUNFX0JMT0NLRUQnIHx8IFxyXG4gICAgICAgICAgICAgICAgZGV0YWlsWydAdHlwZSddPy5pbmNsdWRlcygnRXJyb3JJbmZvJykgJiYgZGV0YWlsLnJlYXNvbiA9PT0gJ0FQSV9LRVlfU0VSVklDRV9CTE9DS0VEJ1xyXG4gICAgICAgICAgICApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBUZXh0LXRvLVNwZWVjaCBBUElcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4gR29vZ2xlIENsb3VkIENvbnNvbGVcdUM1RDBcdUMxMUMgVGV4dC10by1TcGVlY2ggQVBJXHVCOTdDIFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBUEkgXHVEMEE0IFx1QUQwMFx1QjgyOCBcdUM2MjRcdUI5NThcdUI0RTRcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ0FQSSBrZXkgbm90IHZhbGlkJykgfHwgZXJyb3IuY29kZSA9PT0gJ0lOVkFMSURfQVJHVU1FTlQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgQVBJIFx1RDBBNFx1QUMwMCBcdUM2MkNcdUJDMTRcdUI5NzRcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0XHVCOTdDIFx1QjJFNFx1QzJEQyBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygncXVvdGEnKSB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnUVVPVEFfRVhDRUVERUQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVENTYwXHVCMkY5XHVCN0M5XHVDNzc0IFx1Q0QwOFx1QUNGQ1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVENTYwXHVCMkY5XHVCN0M5XHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUM3MFx1QjA5OCBcdUM2OTRcdUFFMDhcdUM4MUNcdUI5N0MgXHVCQ0MwXHVBQ0JEXHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBUVFMgQVBJIFx1QzgxMVx1QURGQ1x1Qzc3NCBcdUFDNzBcdUJEODBcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTQgXHVBRDhDXHVENTVDXHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUM3NzhcdUM5OUQgXHVDNjI0XHVCOTU4ICg0MDEpXHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgQVBJIFx1RDBBNCBcdUM3NzhcdUM5OURcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNjk0XHVDQ0FEIFx1QzYyNFx1Qjk1OCAoNDAwKVxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNjk0XHVDQ0FEXHVDNzc0IFx1Qzc5OFx1QkFCQlx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDNzRDXHVDMTMxIFx1QzEyNFx1QzgxNVx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDMTFDXHVCRTQ0XHVDMkE0IFx1QzBBQ1x1QzZBOSBcdUJEODhcdUFDMDAgKDUwMylcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNTAzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0XHVBQzAwIFx1Qzc3Q1x1QzJEQ1x1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDN0EwXHVDMkRDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBgR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNjI0XHVCOTU4ICgke3N0YXR1c30pOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OCd9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGBHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUM2MjRcdUI5NTg6ICR7c3RhdHVzfSBcdUMwQzFcdUQwREMgXHVDRjU0XHVCNERDYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHBsYXlBdWRpb0RhdGEoYmFzZTY0QXVkaW86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdWRpb01hbmFnZXJcdUI5N0MgXHVDMEFDXHVDNkE5XHVENTVDIFx1QzU0OFx1QzgwNFx1RDU1QyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSB0aGlzLmJhc2U2NFRvQmxvYihiYXNlNjRBdWRpbywgJ2F1ZGlvL21wMycpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gdGhpcy5hdWRpb01hbmFnZXIuY3JlYXRlQXVkaW8oYXVkaW9VcmwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb01hbmFnZXIucmVsZWFzZUF1ZGlvKGF1ZGlvKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgYXVkaW8ub25lbmRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgYXVkaW8ub25sb2FkZWRkYXRhID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvLnBsYXkoKS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzMgXHVDMTI0XHVDODE1ICgzMFx1Q0QwOClcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXVkaW8uZW5kZWQgJiYgIWF1ZGlvLnBhdXNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDMkRDXHVBQzA0IFx1Q0QwOFx1QUNGQycpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAzMDAwMCk7XHJcblxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcGxheUF1ZGlvQnVmZmVyKGF1ZGlvQnVmZmVyOiBBcnJheUJ1ZmZlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBcnJheUJ1ZmZlclx1Qjk3QyBCbG9iXHVDNzNDXHVCODVDIFx1QkNDMFx1RDY1OFxyXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gbmV3IEJsb2IoW2F1ZGlvQnVmZmVyXSwgeyB0eXBlOiAnYXVkaW8vbXAzJyB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChhdWRpb0Jsb2IpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpbyA9IHRoaXMuYXVkaW9NYW5hZ2VyLmNyZWF0ZUF1ZGlvKGF1ZGlvVXJsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9NYW5hZ2VyLnJlbGVhc2VBdWRpbyhhdWRpbyk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGF1ZGlvLm9uZW5kZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgYXVkaW8ub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignXHVDRTkwXHVDMkRDXHVCNDFDIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJykpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhdWRpby5vbmxvYWRlZGRhdGEgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXVkaW8ucGxheSgpLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDRTkwXHVDMkRDXHVCNDFDIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzMgXHVDMTI0XHVDODE1ICgzMFx1Q0QwOClcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXVkaW8uZW5kZWQgJiYgIWF1ZGlvLnBhdXNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1x1Q0U5MFx1QzJEQ1x1QjQxQyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzJEQ1x1QUMwNCBcdUNEMDhcdUFDRkMnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMzAwMDApO1xyXG5cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJhc2U2NFRvQmxvYihiYXNlNjQ6IHN0cmluZywgbWltZVR5cGU6IHN0cmluZyk6IEJsb2Ige1xyXG4gICAgICAgIGNvbnN0IGJ5dGVDaGFyYWN0ZXJzID0gYXRvYihiYXNlNjQpO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVOdW1iZXJzID0gbmV3IEFycmF5KGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlQ2hhcmFjdGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBieXRlTnVtYmVyc1tpXSA9IGJ5dGVDaGFyYWN0ZXJzLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVOdW1iZXJzKTtcclxuICAgICAgICByZXR1cm4gbmV3IEJsb2IoW2J5dGVBcnJheV0sIHsgdHlwZTogbWltZVR5cGUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RvcFNwZWFraW5nKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIEF1ZGlvTWFuYWdlclx1Qjk3QyBcdUQxQjVcdUQ1NzQgXHVCQUE4XHVCNEUwIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM4MTVcdUM5QzBcclxuICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlci5zdG9wQWxsQXVkaW8oKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1BhdXNlZCgpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVENjVDXHVDMTMxIFx1QzYyNFx1QjUxNFx1QzYyNFx1QUMwMCBcdUM3ODhcdUIyOTRcdUM5QzAgXHVENjU1XHVDNzc4XHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gdGhpcy5hdWRpb01hbmFnZXIuZ2V0U3RhdHVzKCk7XHJcbiAgICAgICAgcmV0dXJuIHN0YXR1cy5hY3RpdmUgPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdW1lKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIEF1ZGlvTWFuYWdlclx1QjI5NCBcdUFDMUNcdUJDQzQgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzY5NFx1QzE4Q1x1Qjk3QyBcdUFEMDBcdUI5QUNcdUQ1NThcdUJCQzBcdUI4NUMgXHJcbiAgICAgICAgLy8gXHVDNUVDXHVBRTMwXHVDMTFDXHVCMjk0IFx1QzBDOFx1Qjg1Q1x1QzZCNCBcdUM2OTRcdUNDQURcdUM3M0NcdUI4NUMgXHVDQzk4XHVCOUFDXHJcbiAgICAgICAgbmV3IE5vdGljZSgnXHVDNzRDXHVDMTMxXHVDNzQ0IFx1QjJFNFx1QzJEQyBcdUM3QUNcdUMwRERcdUQ1NThcdUI4MjRcdUJBNzQgXHVCQzg0XHVEMkJDXHVDNzQ0IFx1QjJFNFx1QzJEQyBcdUQwNzRcdUI5QURcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcGF1c2UoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zdG9wU3BlYWtpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5nczogUGFydGlhbDxHb29nbGVDbG91ZFRUU1NldHRpbmdzPik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIC4uLm5ld1NldHRpbmdzIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCOUFDXHVDMThDXHVDMkE0IFx1QzgxNVx1QjlBQ1xyXG4gICAgY2xlYW51cCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlci5jbGVhbnVwKCk7XHJcbiAgICAgICAgdGhpcy5uZXR3b3JrTWFuYWdlci5jYW5jZWxBbGxSZXF1ZXN0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RUZXh0ID0gJ0hlbGxvLCB0aGlzIGlzIGEgdGVzdC4nO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNhbGxHb29nbGVDbG91ZEFQSSh0ZXN0VGV4dCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBDbG91ZCBUVFMgXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEF2YWlsYWJsZVZvaWNlcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgJ2VuLVVTLUpvdXJuZXktRCcsXHJcbiAgICAgICAgICAgICdlbi1VUy1Kb3VybmV5LUYnLFxyXG4gICAgICAgICAgICAnZW4tVVMtSm91cm5leS1PJyxcclxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItQScsXHJcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUMnLFxyXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1EJyxcclxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItRScsXHJcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUYnLFxyXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1HJyxcclxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItSCcsXHJcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUknLFxyXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1KJyxcclxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUEnLFxyXG4gICAgICAgICAgICAnZW4tVVMtU3RhbmRhcmQtQicsXHJcbiAgICAgICAgICAgICdlbi1VUy1TdGFuZGFyZC1DJyxcclxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUQnLFxyXG4gICAgICAgICAgICAnZW4tVVMtU3RhbmRhcmQtRScsXHJcbiAgICAgICAgICAgICdlbi1VUy1TdGFuZGFyZC1GJyxcclxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUcnLFxyXG4gICAgICAgICAgICAnZW4tVVMtU3RhbmRhcmQtSCcsXHJcbiAgICAgICAgICAgICdlbi1VUy1TdGFuZGFyZC1JJyxcclxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUonLFxyXG4gICAgICAgICAgICAnZW4tR0ItTmV1cmFsMi1BJyxcclxuICAgICAgICAgICAgJ2VuLUdCLU5ldXJhbDItQicsXHJcbiAgICAgICAgICAgICdlbi1HQi1OZXVyYWwyLUMnLFxyXG4gICAgICAgICAgICAnZW4tR0ItTmV1cmFsMi1EJyxcclxuICAgICAgICAgICAgJ2VuLUdCLU5ldXJhbDItRicsXHJcbiAgICAgICAgICAgICdlbi1BVS1OZXVyYWwyLUEnLFxyXG4gICAgICAgICAgICAnZW4tQVUtTmV1cmFsMi1CJyxcclxuICAgICAgICAgICAgJ2VuLUFVLU5ldXJhbDItQycsXHJcbiAgICAgICAgICAgICdlbi1BVS1OZXVyYWwyLUQnXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZXR0aW5ncygpOiBHb29nbGVDbG91ZFRUU1NldHRpbmdzIHtcclxuICAgICAgICByZXR1cm4geyAuLi50aGlzLnNldHRpbmdzIH07XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0b3BTcGVha2luZygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1Q0U5MFx1QzJEQyBcdUFEMDBcdUI5QUMgXHVCQTU0XHVDMTFDXHVCNERDXHVCNEU0XHJcbiAgICBhc3luYyBnZXRDYWNoZUluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2FjaGVNYW5hZ2VyLmdldENhY2hlSW5mbygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNsZWFyQ2FjaGUoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2FjaGVNYW5hZ2VyLmNsZWFyQ2FjaGUoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVDYWNoZUZvbGRlcih2b2NhYnVsYXJ5Rm9sZGVyUGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGVGb2xkZXIodm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIG5vcm1hbGl6ZVBhdGggfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhY2hlU2V0dGluZ3Mge1xyXG4gICAgbGFuZ3VhZ2VDb2RlOiBzdHJpbmc7XHJcbiAgICB2b2ljZTogc3RyaW5nO1xyXG4gICAgc3BlYWtpbmdSYXRlOiBudW1iZXI7XHJcbiAgICBwaXRjaDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhY2hlSW5mbyB7XHJcbiAgICB0b3RhbEZpbGVzOiBudW1iZXI7XHJcbiAgICB0b3RhbFNpemU6IG51bWJlcjtcclxuICAgIGZvcm1hdHRlZFNpemU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRUU0NhY2hlTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBjYWNoZUZvbGRlciA9ICdWb2NhYnVsYXJ5L2NhY2hlL3R0cyc7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplQ2FjaGVGb2xkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVDYWNoZUZvbGRlcigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5jYWNoZUZvbGRlcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBjYWNoZS90dHMgXHVEM0Y0XHVCMzU0IFx1QzBERFx1QzEzMVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIodGhpcy5jYWNoZUZvbGRlcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWVycm9yTWVzc2FnZS5pbmNsdWRlcygnYWxyZWFkeSBleGlzdHMnKSAmJiBcclxuICAgICAgICAgICAgICAgICAgICAhZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdmb2xkZXIgYWxyZWFkeSBleGlzdHMnKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2FscmVhZHkgcHJlc2VudCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFMgXHVDRTkwXHVDMkRDIFx1RDNGNFx1QjM1NCBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdlbmVyYXRlQ2FjaGVLZXkodGV4dDogc3RyaW5nLCBzZXR0aW5nczogQ2FjaGVTZXR0aW5ncyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3Qga2V5RGF0YSA9IHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dC50cmltKCkudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiBzZXR0aW5ncy5sYW5ndWFnZUNvZGUsXHJcbiAgICAgICAgICAgIHZvaWNlOiBzZXR0aW5ncy52b2ljZSxcclxuICAgICAgICAgICAgc3BlYWtpbmdSYXRlOiBzZXR0aW5ncy5zcGVha2luZ1JhdGUsXHJcbiAgICAgICAgICAgIHBpdGNoOiBzZXR0aW5ncy5waXRjaFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qga2V5U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoa2V5RGF0YSk7XHJcbiAgICAgICAgLy8gXHVBQzA0XHVCMkU4XHVENTVDIFx1RDU3NFx1QzJEQyBcdUQ1NjhcdUMyMTggKFx1QkUwQ1x1Qjc3Q1x1QzZCMFx1QzgwMCBcdUQ2NThcdUFDQkRcdUM1RDBcdUMxMUMgXHVDMEFDXHVDNkE5IFx1QUMwMFx1QjJBNSlcclxuICAgICAgICBjb25zdCBoYXNoID0gdGhpcy5zaW1wbGVIYXNoKGtleVN0cmluZyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVEMTREXHVDMkE0XHVEMkI4XHVDNUQwXHVDMTFDIFx1QjJFOFx1QzVCNCBcdUNEOTRcdUNEOUMgKFx1RDMwQ1x1Qzc3Q1x1QkE4NVx1QzVEMCBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QjNDNFx1Qjg1RCBcdUM4MTVcdUI5QUMpXHJcbiAgICAgICAgY29uc3QgY2xlYW5UZXh0ID0gdGhpcy5leHRyYWN0V29yZEZvckZpbGVuYW1lKHRleHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDMwQ1x1Qzc3Q1x1QkE4NTogXHVCMkU4XHVDNUI0X1x1RDU3NFx1QzJEQy5tcDMgXHVENjE1XHVDMkREXHJcbiAgICAgICAgcmV0dXJuIGAke2NsZWFuVGV4dH1fJHtoYXNofS5tcDNgO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZXh0cmFjdFdvcmRGb3JGaWxlbmFtZSh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vIFx1RDE0RFx1QzJBNFx1RDJCOFx1Qjk3QyBcdUQzMENcdUM3N0NcdUJBODVcdUM1RDAgXHVDMEFDXHVDNkE5XHVENTYwIFx1QzIxOCBcdUM3ODhcdUIzQzRcdUI4NUQgXHVDODE1XHVCOUFDXHJcbiAgICAgICAgbGV0IGNsZWFuVGV4dCA9IHRleHQudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVEMTREXHVDMkE0XHVEMkI4IFx1RDBDMFx1Qzc4NSBcdUFDMTBcdUM5QzBcclxuICAgICAgICBjb25zdCBpc0xvbmdUZXh0ID0gY2xlYW5UZXh0Lmxlbmd0aCA+IDUwIHx8IGNsZWFuVGV4dC5pbmNsdWRlcygnLicpIHx8IGNsZWFuVGV4dC5pbmNsdWRlcygnLCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpc0xvbmdUZXh0KSB7XHJcbiAgICAgICAgICAgIC8vIFx1QUUzNCBcdUQxNERcdUMyQTRcdUQyQjgoXHVDNjA4XHVCQjM4KVx1Qzc1OCBcdUFDQkRcdUM2QjA6IFx1Q0NBQiAyLTNcdUFDMUMgXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1Q0Q5Q1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkcyA9IGNsZWFuVGV4dC5zcGxpdCgvW1xcc1xcLiwhPzs6XSsvKS5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDApO1xyXG4gICAgICAgICAgICBjb25zdCBzaWduaWZpY2FudFdvcmRzID0gd29yZHMuc2xpY2UoMCwgMykuam9pbignXycpO1xyXG4gICAgICAgICAgICBjbGVhblRleHQgPSBzaWduaWZpY2FudFdvcmRzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1QjJFOFx1Qzc3QyBcdUIyRThcdUM1QjRcdUM3NTggXHVBQ0JEXHVDNkIwOiBcdUNDQUIgXHVCQzg4XHVDOUY4IFx1QjJFOFx1QzVCNFx1QjlDQyBcdUNEOTRcdUNEOUNcclxuICAgICAgICAgICAgY29uc3QgZmlyc3RXb3JkID0gY2xlYW5UZXh0LnNwbGl0KC9bXFxzXFwuLCE/OzpdKy8pWzBdO1xyXG4gICAgICAgICAgICBjbGVhblRleHQgPSBmaXJzdFdvcmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDMwQ1x1Qzc3Q1x1QkE4NVx1QzVEMCBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUJCMzhcdUM3OTBcdUI0RTQgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgY2xlYW5UZXh0ID0gY2xlYW5UZXh0LnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCAnJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDNjAxXHVCQjM4XHVDNzkwLCBcdUMyMkJcdUM3OTAsIFx1RDU1OFx1Qzc3NFx1RDUwOCwgXHVDNUI4XHVCMzU0XHVDMkE0XHVDRjU0XHVDNUI0XHVCOUNDIFx1RDVDOFx1QzZBOVxyXG4gICAgICAgIGNsZWFuVGV4dCA9IGNsZWFuVGV4dC5yZXBsYWNlKC9bXmEtejAtOVxcLV9dL2csICcnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUM1RjBcdUMxOERcdUI0MUMgXHVDNUI4XHVCMzU0XHVDMkE0XHVDRjU0XHVDNUI0IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIGNsZWFuVGV4dCA9IGNsZWFuVGV4dC5yZXBsYWNlKC9fKy9nLCAnXycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzJEQ1x1Qzc5MVx1QUNGQyBcdUIwNURcdUM3NTggXHVDNUI4XHVCMzU0XHVDMkE0XHVDRjU0XHVDNUI0IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIGNsZWFuVGV4dCA9IGNsZWFuVGV4dC5yZXBsYWNlKC9eXyt8XyskL2csICcnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUFFMzhcdUM3NzQgXHVDODFDXHVENTVDIChcdUNENUNcdUIzMDAgMzBcdUM3OTApXHJcbiAgICAgICAgaWYgKGNsZWFuVGV4dC5sZW5ndGggPiAzMCkge1xyXG4gICAgICAgICAgICBjbGVhblRleHQgPSBjbGVhblRleHQuc3Vic3RyaW5nKDAsIDMwKTtcclxuICAgICAgICAgICAgLy8gXHVCMDVEXHVDNUQwIFx1QzVCOFx1QjM1NFx1QzJBNFx1Q0Y1NFx1QzVCNFx1QUMwMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgICAgIGNsZWFuVGV4dCA9IGNsZWFuVGV4dC5yZXBsYWNlKC9fKyQvLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QkU0OCBcdUJCMzhcdUM3OTBcdUM1RjRcdUM3NzRcdUJBNzQgXHVBRTMwXHVCQ0Y4XHVBQzEyIFx1QzBBQ1x1QzZBOVxyXG4gICAgICAgIGlmIChjbGVhblRleHQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNsZWFuVGV4dCA9ICd0dHMnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY2xlYW5UZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2ltcGxlSGFzaChzdHI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGhhc2ggPSAwO1xyXG4gICAgICAgIGlmIChzdHIubGVuZ3RoID09PSAwKSByZXR1cm4gaGFzaC50b1N0cmluZygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXIgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hhcjtcclxuICAgICAgICAgICAgaGFzaCA9IGhhc2ggJiBoYXNoOyAvLyAzMlx1QkU0NFx1RDJCOCBcdUM4MTVcdUMyMThcdUI4NUMgXHVCQ0MwXHVENjU4XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBNYXRoLmFicyhoYXNoKS50b1N0cmluZygzNik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDYWNoZUZpbGVQYXRoKGNhY2hlS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBub3JtYWxpemVQYXRoKGAke3RoaXMuY2FjaGVGb2xkZXJ9LyR7Y2FjaGVLZXl9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0Q2FjaGVkQXVkaW8odGV4dDogc3RyaW5nLCBzZXR0aW5nczogQ2FjaGVTZXR0aW5ncyk6IFByb21pc2U8QXJyYXlCdWZmZXIgfCBudWxsPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSB0aGlzLmdlbmVyYXRlQ2FjaGVLZXkodGV4dCwgc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHRoaXMuZ2V0Q2FjaGVGaWxlUGF0aChjYWNoZUtleSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkQmluYXJ5KGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFRUUyBcdUNFOTBcdUMyREMgXHVENzg4XHVEMkI4OiBcIiR7dGV4dC5zdWJzdHJpbmcoMCwgNTApfSR7dGV4dC5sZW5ndGggPiA1MCA/ICcuLi4nIDogJyd9XCIgXHUyMTkyICR7Y2FjaGVLZXl9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlCdWZmZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVFRTIFx1Q0U5MFx1QzJEQyBcdUI4NUNcdUI0REMgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNldENhY2hlZEF1ZGlvKHRleHQ6IHN0cmluZywgc2V0dGluZ3M6IENhY2hlU2V0dGluZ3MsIGJhc2U2NEF1ZGlvOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVDYWNoZUZvbGRlcigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSB0aGlzLmdlbmVyYXRlQ2FjaGVLZXkodGV4dCwgc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHRoaXMuZ2V0Q2FjaGVGaWxlUGF0aChjYWNoZUtleSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBCYXNlNjRcdUI5N0MgQXJyYXlCdWZmZXJcdUI4NUMgXHVCQ0MwXHVENjU4XHJcbiAgICAgICAgICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IGF0b2IoYmFzZTY0QXVkaW8pO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJpbmFyeVN0cmluZy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeVN0cmluZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnlCaW5hcnkoZXhpc3RpbmdGaWxlLCBieXRlcy5idWZmZXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlQmluYXJ5KGZpbGVQYXRoLCBieXRlcy5idWZmZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVFRTIFx1Q0U5MFx1QzJEQyBcdUM4MDBcdUM3QTU6IFwiJHt0ZXh0LnN1YnN0cmluZygwLCA1MCl9JHt0ZXh0Lmxlbmd0aCA+IDUwID8gJy4uLicgOiAnJ31cIiBcdTIxOTIgJHtjYWNoZUtleX1gKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUVFMgXHVDRTkwXHVDMkRDIFx1QzgwMFx1QzdBNSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRDYWNoZUluZm8oKTogUHJvbWlzZTxDYWNoZUluZm8+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5jYWNoZUZvbGRlcik7XHJcbiAgICAgICAgICAgIGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRmlsZXM6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxTaXplOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFNpemU6ICcwIEInXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgdG90YWxGaWxlcyA9IDA7XHJcbiAgICAgICAgICAgIGxldCB0b3RhbFNpemUgPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZvbGRlci5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21wMycpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbEZpbGVzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxTaXplICs9IGZpbGUuc3RhdC5zaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdG90YWxGaWxlcyxcclxuICAgICAgICAgICAgICAgIHRvdGFsU2l6ZSxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFNpemU6IHRoaXMuZm9ybWF0RmlsZVNpemUodG90YWxTaXplKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RUUyBcdUNFOTBcdUMyREMgXHVDODE1XHVCQ0Y0IFx1Qzg3MFx1RDY4QyBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdG90YWxGaWxlczogMCxcclxuICAgICAgICAgICAgICAgIHRvdGFsU2l6ZTogMCxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFNpemU6ICcwIEInXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNsZWFyQ2FjaGUoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuY2FjaGVGb2xkZXIpO1xyXG4gICAgICAgICAgICBpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzVG9EZWxldGUgPSBmb2xkZXIuY2hpbGRyZW4uZmlsdGVyKGZpbGUgPT4gXHJcbiAgICAgICAgICAgICAgICBmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtcDMnXHJcbiAgICAgICAgICAgICkgYXMgVEZpbGVbXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlc1RvRGVsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci50cmFzaEZpbGUoZmlsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUVFMgXHVDRTkwXHVDMkRDIFx1QzBBRFx1QzgxQyBcdUM2NDRcdUI4Q0M6ICR7ZmlsZXNUb0RlbGV0ZS5sZW5ndGh9XHVBQzFDIFx1RDMwQ1x1Qzc3Q2ApO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUVFMgXHVDRTkwXHVDMkRDIFx1QzBBRFx1QzgxQyBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZm9ybWF0RmlsZVNpemUoYnl0ZXM6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQic7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgayA9IDEwMjQ7XHJcbiAgICAgICAgY29uc3Qgc2l6ZXMgPSBbJ0InLCAnS0InLCAnTUInLCAnR0InXTtcclxuICAgICAgICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoKGJ5dGVzIC8gTWF0aC5wb3coaywgaSkpLnRvRml4ZWQoMikpICsgJyAnICsgc2l6ZXNbaV07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDRTkwXHVDMkRDIFx1RDNGNFx1QjM1NCBcdUFDQkRcdUI4NUMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICB1cGRhdGVDYWNoZUZvbGRlcih2b2NhYnVsYXJ5Rm9sZGVyUGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jYWNoZUZvbGRlciA9IGAke3ZvY2FidWxhcnlGb2xkZXJQYXRofS9jYWNoZS90dHNgO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNhY2hlRm9sZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDRTkwXHVDMkRDIFx1RDFCNVx1QUNDNCAoXHVBQzFDXHVCQzFDL1x1QjUxNFx1QkM4NFx1QUU0NVx1QzZBOSlcclxuICAgIGFzeW5jIGdldENhY2hlU3RhdHMoKTogUHJvbWlzZTx7XHJcbiAgICAgICAgaGl0Q291bnQ6IG51bWJlcjtcclxuICAgICAgICBtaXNzQ291bnQ6IG51bWJlcjtcclxuICAgICAgICBoaXRSYXRlOiBudW1iZXI7XHJcbiAgICB9PiB7XHJcbiAgICAgICAgLy8gXHVDMkU0XHVDODFDIFx1QUQ2Q1x1RDYwNFx1QzJEQ1x1QzVEMFx1QjI5NCBcdUJBNTRcdUJBQThcdUI5QUNcdUIwOTggXHVCQ0M0XHVCM0M0IFx1RDMwQ1x1Qzc3Q1x1QzVEMCBcdUQxQjVcdUFDQzRcdUI5N0MgXHVDODAwXHVDN0E1XHVENTc0XHVDNTdDIFx1RDU2OFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUFFMzBcdUJDRjhcdUFDMTIgXHVCQzE4XHVENjU4XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaGl0Q291bnQ6IDAsXHJcbiAgICAgICAgICAgIG1pc3NDb3VudDogMCxcclxuICAgICAgICAgICAgaGl0UmF0ZTogMFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2hhdHRlcmJveFRUU1NlcnZpY2UsIENoYXR0ZXJib3hUVFNTZXR0aW5ncyB9IGZyb20gJy4vQ2hhdHRlcmJveFRUU1NlcnZpY2UnO1xyXG5pbXBvcnQgeyBHb29nbGVDbG91ZFRUU1NlcnZpY2UsIEdvb2dsZUNsb3VkVFRTU2V0dGluZ3MgfSBmcm9tICcuL0dvb2dsZUNsb3VkVFRTU2VydmljZSc7XHJcbmltcG9ydCB7IFRUU1NlcnZpY2UgfSBmcm9tICcuL1RUU0ludGVyZmFjZSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcclxuaW1wb3J0IHsgZGVjcnlwdEFwaUtleSB9IGZyb20gJy4uLy4uL3V0aWxzJztcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLy8gVFRTIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUQzMjlcdUQxQTBcdUI5QUNcclxuZXhwb3J0IGNsYXNzIFRUU1NlcnZpY2VGYWN0b3J5IHtcclxuICAgIHN0YXRpYyBjcmVhdGVUVFNTZXJ2aWNlKGFwcDogQXBwLCBzZXR0aW5ncz86IFZvY2FidWxhcnlTZXR0aW5ncyk6IFRUU1NlcnZpY2Uge1xyXG4gICAgICAgIGlmICghc2V0dGluZ3MgfHwgIXNldHRpbmdzLnR0c0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb09wVFRTU2VydmljZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLnR0c1Byb3ZpZGVyID09PSAnZ29vZ2xlLWNsb3VkJykge1xyXG4gICAgICAgICAgICBjb25zdCBnb29nbGVTZXR0aW5nczogR29vZ2xlQ2xvdWRUVFNTZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLnR0c0VuYWJsZWQsXHJcbiAgICAgICAgICAgICAgICBhcGlLZXk6IGRlY3J5cHRBcGlLZXkoc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNBcGlLZXkpLFxyXG4gICAgICAgICAgICAgICAgdm9pY2U6IHNldHRpbmdzLnR0c1ZvaWNlLFxyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiBzZXR0aW5ncy5nb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZSxcclxuICAgICAgICAgICAgICAgIHNwZWFraW5nUmF0ZTogc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNTcGVha2luZ1JhdGUsXHJcbiAgICAgICAgICAgICAgICBwaXRjaDogc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNQaXRjaCxcclxuICAgICAgICAgICAgICAgIGF1dG9QbGF5OiBzZXR0aW5ncy50dHNBdXRvUGxheSxcclxuICAgICAgICAgICAgICAgIGNhY2hlRW5hYmxlZDogc2V0dGluZ3MudHRzQ2FjaGVFbmFibGVkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR29vZ2xlQ2xvdWRUVFNTZXJ2aWNlKGFwcCwgZ29vZ2xlU2V0dGluZ3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1QUUzMFx1QkNGOFx1QUMxMjogQ2hhdHRlcmJveCBUVFNcclxuICAgICAgICAgICAgY29uc3QgY2hhdHRlcmJveFNldHRpbmdzOiBDaGF0dGVyYm94VFRTU2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBzZXR0aW5ncy50dHNFbmFibGVkLFxyXG4gICAgICAgICAgICAgICAgYXBpVXJsOiBzZXR0aW5ncy5jaGF0dGVyYm94QXBpVXJsLFxyXG4gICAgICAgICAgICAgICAgdm9pY2U6IHNldHRpbmdzLnR0c1ZvaWNlLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiAnd2F2JyxcclxuICAgICAgICAgICAgICAgIHNwZWVkOiAxLFxyXG4gICAgICAgICAgICAgICAgZXhhZ2dlcmF0aW9uOiBzZXR0aW5ncy5jaGF0dGVyYm94RXhhZ2dlcmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgY2ZnV2VpZ2h0OiBzZXR0aW5ncy5jaGF0dGVyYm94Q2ZnV2VpZ2h0LFxyXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHNldHRpbmdzLmNoYXR0ZXJib3hUZW1wZXJhdHVyZSxcclxuICAgICAgICAgICAgICAgIHN0cmVhbWluZ19jaHVua19zaXplOiA1MCxcclxuICAgICAgICAgICAgICAgIHN0cmVhbWluZ19zdHJhdGVneTogJ3N0cmluZycsXHJcbiAgICAgICAgICAgICAgICBzdHJlYW1pbmdfYnVmZmVyX3NpemU6IDEsXHJcbiAgICAgICAgICAgICAgICBzdHJlYW1pbmdfcXVhbGl0eTogJ3N0cmluZycsXHJcbiAgICAgICAgICAgICAgICBhdXRvUGxheTogc2V0dGluZ3MudHRzQXV0b1BsYXlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGF0dGVyYm94VFRTU2VydmljZShjaGF0dGVyYm94U2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVCRTQ0XHVENjVDXHVDMTMxIFx1QzBDMVx1RDBEQ1x1Qzc1OCBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0IChOby1PcCBcdUQzMjhcdUQxMzQpXHJcbmNsYXNzIE5vT3BUVFNTZXJ2aWNlIGltcGxlbWVudHMgVFRTU2VydmljZSB7XHJcbiAgICBhc3luYyBzcGVha1RleHQodGV4dDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8gXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzcGVha1dvcmQod29yZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8gXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzcGVha0V4YW1wbGUoZXhhbXBsZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8gXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcclxuICAgIH1cclxuXHJcbiAgICBzdG9wU3BlYWtpbmcoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcclxuICAgIH1cclxuXHJcbiAgICBpc1BhdXNlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXN1bWUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcclxuICAgIH1cclxuXHJcbiAgICBwYXVzZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1RDYzOFx1RDY1OFx1QzEzMVx1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVCODA4XHVBQzcwXHVDMkRDIFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNFxyXG5leHBvcnQgaW50ZXJmYWNlIExlZ2FjeVRUU1NldHRpbmdzIHtcclxuICAgIGVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgICB2b2ljZTogc3RyaW5nO1xyXG4gICAgcGxheWJhY2tTcGVlZDogbnVtYmVyO1xyXG4gICAgYXV0b1BsYXk6IGJvb2xlYW47XHJcbn1cclxuXHJcbi8vIFx1QjgwOFx1QUM3MFx1QzJEQyBcdUMxMjRcdUM4MTVcdUM3NDQgQ2hhdHRlcmJveCBcdUMxMjRcdUM4MTVcdUM3M0NcdUI4NUMgXHVCQ0MwXHVENjU4XHVENTU4XHVCMjk0IFx1RDVFQ1x1RDM3QyBcdUQ1NjhcdUMyMThcclxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRMZWdhY3lTZXR0aW5ncyhsZWdhY3lTZXR0aW5nczogTGVnYWN5VFRTU2V0dGluZ3MpOiBDaGF0dGVyYm94VFRTU2V0dGluZ3Mge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBlbmFibGVkOiBsZWdhY3lTZXR0aW5ncy5lbmFibGVkLFxyXG4gICAgICAgIGFwaVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMycsXHJcbiAgICAgICAgdm9pY2U6IGxlZ2FjeVNldHRpbmdzLnZvaWNlIHx8ICdhbGxveScsXHJcbiAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiAnd2F2JyxcclxuICAgICAgICBzcGVlZDogMSxcclxuICAgICAgICBleGFnZ2VyYXRpb246IDAuMjUsXHJcbiAgICAgICAgY2ZnV2VpZ2h0OiAxLFxyXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjA1LFxyXG4gICAgICAgIHN0cmVhbWluZ19jaHVua19zaXplOiA1MCxcclxuICAgICAgICBzdHJlYW1pbmdfc3RyYXRlZ3k6ICdzdHJpbmcnLFxyXG4gICAgICAgIHN0cmVhbWluZ19idWZmZXJfc2l6ZTogMSxcclxuICAgICAgICBzdHJlYW1pbmdfcXVhbGl0eTogJ3N0cmluZycsXHJcbiAgICAgICAgYXV0b1BsYXk6IGxlZ2FjeVNldHRpbmdzLmF1dG9QbGF5XHJcbiAgICB9O1xyXG59XHJcblxyXG4vLyBcdUQ2MzhcdUQ2NThcdUMxMzFcdUM3NDQgXHVDNzA0XHVENTVDIFx1QUUzMFx1QkNGOCBleHBvcnRcclxuZXhwb3J0IHsgQ2hhdHRlcmJveFRUU1NlcnZpY2UsIEdvb2dsZUNsb3VkVFRTU2VydmljZSB9O1xyXG5leHBvcnQgdHlwZSB7IENoYXR0ZXJib3hUVFNTZXR0aW5ncywgR29vZ2xlQ2xvdWRUVFNTZXR0aW5ncywgVFRTU2VydmljZSB9OyIsICJpbXBvcnQgeyBNb21lbnQgfSBmcm9tICdtb21lbnQnO1xyXG5cclxuZXhwb3J0IGVudW0gUmV2aWV3UmVzcG9uc2Uge1xyXG4gICAgSGFyZCA9ICdoYXJkJywgICAgLy8gcSA9IDE6IFx1QjlFNFx1QzZCMCBcdUM1QjRcdUI4MzVcdUFDOEMgXHVENjhDXHVDMEMxXHVENTU4XHVBQzcwXHVCMDk4IFx1QUM3MFx1Qzc1OCBcdUMyRTRcdUQzMjhcdUM1RDAgXHVBQzAwXHVBRTRDXHVDNkI0IFx1QUNCRFx1QzZCMFxyXG4gICAgR29vZCA9ICdnb29kJywgICAgLy8gcSA9IDI6IFx1QzU3RFx1QUMwNFx1Qzc1OCBcdUIxNzhcdUI4MjVcdUM3NDQgXHVCNEU0XHVDNUVDIFx1RDY4Q1x1QzBDMVx1RDU1QyBcdUFDQkRcdUM2QjAgIFxyXG4gICAgRWFzeSA9ICdlYXN5JyAgICAgLy8gcSA9IDM6IFx1QzI3RFx1QUM4QyBcdUM2NDRcdUM4MDQgXHVENjhDXHVDMEMxXHVENTVDIFx1QUNCRFx1QzZCMFxyXG59XHJcblxyXG4vLyBTTS0yIFx1QzU0Q1x1QUNFMFx1QjlBQ1x1Qzk5OFx1Qzc1OCBcdUQ0ODhcdUM5QzggXHVDODEwXHVDMjE4IFx1QjlFNFx1RDU1MVxyXG5leHBvcnQgY29uc3QgUVVBTElUWV9TQ09SRVMgPSB7XHJcbiAgICBbUmV2aWV3UmVzcG9uc2UuSGFyZF06IDEsXHJcbiAgICBbUmV2aWV3UmVzcG9uc2UuR29vZF06IDIsXHJcbiAgICBbUmV2aWV3UmVzcG9uc2UuRWFzeV06IDNcclxufSBhcyBjb25zdDtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU1JTU2V0dGluZ3Mge1xyXG4gICAgLy8gU00tMiBBbGdvcml0aG0gU2V0dGluZ3NcclxuICAgIGluaXRpYWxFRmFjdG9yOiBudW1iZXI7ICAgICAvLyBTTS0yIFx1Q0QwOFx1QUUzMCBFLUZhY3RvciAoMi41KVxyXG4gICAgbWluaW11bUVGYWN0b3I6IG51bWJlcjsgICAgIC8vIFNNLTIgXHVDRDVDXHVDMThDIEUtRmFjdG9yICgxLjMpXHJcbiAgICBtYXhpbXVtSW50ZXJ2YWw6IG51bWJlcjsgICAgLy8gTWF4aW11bSBpbnRlcnZhbCBpbiBkYXlzICgzNjUyNSA9IH4xMDAgeWVhcnMpXHJcbiAgICBcclxuICAgIC8vIExvYWQgQmFsYW5jaW5nIFNldHRpbmdzXHJcbiAgICBsb2FkQmFsYW5jZTogYm9vbGVhbjsgICAgICAgLy8gRW5hYmxlIHJldmlldyBsb2FkIGJhbGFuY2luZ1xyXG4gICAgbWF4RnV6emluZ0RheXM6IG51bWJlcjsgICAgIC8vIE1heGltdW0gZnV6emluZyBmb3IgbG9hZCBiYWxhbmNpbmcgKDMpXHJcbiAgICBcclxuICAgIC8vIExlZ2FjeSBjb21wYXRpYmlsaXR5IChkZXByZWNhdGVkIGJ1dCBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5KVxyXG4gICAgYmFzZUVhc2U6IG51bWJlcjsgICAgICAgICAgIC8vIFN0YXJ0aW5nIGVhc2UgZmFjdG9yICgyNTAlKSAtIGNvbnZlcnRlZCB0byBFRmFjdG9yXHJcbiAgICBlYXN5Qm9udXM6IG51bWJlcjsgICAgICAgICAgLy8gTXVsdGlwbGllciBmb3IgZWFzeSByZXNwb25zZXMgKDEuMykgLSBub3QgdXNlZCBpbiBTTS0yXHJcbiAgICBoYXJkUGVuYWx0eTogbnVtYmVyOyAgICAgICAgLy8gTXVsdGlwbGllciBmb3IgaGFyZCByZXNwb25zZXMgKDAuNSkgLSBub3QgdXNlZCBpbiBTTS0yXHJcbiAgICBtaW5pbXVtRWFzZTogbnVtYmVyOyAgICAgICAgLy8gTWluaW11bSBlYXNlIGZhY3RvciAoMTMwJSkgLSBjb252ZXJ0ZWQgdG8gRUZhY3RvclxyXG4gICAgaW5pdGlhbEludGVydmFsOiBudW1iZXI7ICAgIC8vIFN0YXJ0aW5nIGludGVydmFsIGluIGRheXMgKDEpIC0gbm90IHVzZWQgaW4gU00tMlxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TUlNfU0VUVElOR1M6IFNSU1NldHRpbmdzID0ge1xyXG4gICAgLy8gU00tMiBBbGdvcml0aG0gU2V0dGluZ3NcclxuICAgIGluaXRpYWxFRmFjdG9yOiAyLjUsICAgICAgICAvLyBTTS0yIFx1RDQ1Q1x1QzkwMCBcdUNEMDhcdUFFMzAgRS1GYWN0b3JcclxuICAgIG1pbmltdW1FRmFjdG9yOiAxLjMsICAgICAgICAvLyBTTS0yIFx1RDQ1Q1x1QzkwMCBcdUNENUNcdUMxOEMgRS1GYWN0b3JcclxuICAgIG1heGltdW1JbnRlcnZhbDogMzY1MjUsICAgICAvLyB+MTAwXHVCMTQ0XHJcbiAgICBcclxuICAgIC8vIExvYWQgQmFsYW5jaW5nIFNldHRpbmdzXHJcbiAgICBsb2FkQmFsYW5jZTogdHJ1ZSxcclxuICAgIG1heEZ1enppbmdEYXlzOiAzLFxyXG4gICAgXHJcbiAgICAvLyBMZWdhY3kgY29tcGF0aWJpbGl0eSAod2lsbCBiZSBjb252ZXJ0ZWQpXHJcbiAgICBiYXNlRWFzZTogMjUwLCAgICAgICAgICAgICAgLy8gMi41ICogMTAwXHJcbiAgICBlYXN5Qm9udXM6IDEuMyxcclxuICAgIGhhcmRQZW5hbHR5OiAwLjUsXHJcbiAgICBtaW5pbXVtRWFzZTogMTMwLCAgICAgICAgICAgLy8gMS4zICogMTAwXHJcbiAgICBpbml0aWFsSW50ZXJ2YWw6IDFcclxufTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2NoZWR1bGVJbmZvIHtcclxuICAgIGR1ZURhdGU6IHN0cmluZzsgICAgICAgICAgIC8vIElTTyBkYXRlIHN0cmluZ1xyXG4gICAgaW50ZXJ2YWw6IG51bWJlcjsgICAgICAgICAgLy8gRGF5cyB1bnRpbCBuZXh0IHJldmlld1xyXG4gICAgZWFzZTogbnVtYmVyOyAgICAgICAgICAgICAgLy8gRWFzZSBmYWN0b3IgKEUtRmFjdG9yICogMTAwLCAxMzAtNTAwKylcclxuICAgIHJldmlld0NvdW50OiBudW1iZXI7ICAgICAgIC8vIFRvdGFsIG51bWJlciBvZiByZXZpZXdzXHJcbiAgICBsYXBzZUNvdW50OiBudW1iZXI7ICAgICAgICAvLyBOdW1iZXIgb2YgaGFyZCByZXNwb25zZXNcclxuICAgIGRlbGF5ZWREYXlzOiBudW1iZXI7ICAgICAgIC8vIERheXMgZGVsYXllZCBiZWZvcmUgdGhpcyByZXZpZXdcclxuICAgIHJlcGV0aXRpb246IG51bWJlcjsgICAgICAgIC8vIFNNLTIgcmVwZXRpdGlvbiBjb3VudCAoXHVDNUYwXHVDMThEIFx1QzEzMVx1QUNGNSBcdUQ2OENcdUMwQzEgXHVENjlGXHVDMjE4KVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1Jlc3VsdCB7XHJcbiAgICBpbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgZWFzZTogbnVtYmVyO1xyXG4gICAgZHVlRGF0ZTogc3RyaW5nO1xyXG4gICAgcmVwZXRpdGlvbjogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobSB7XHJcbiAgICBwcml2YXRlIHNldHRpbmdzOiBTUlNTZXR0aW5ncztcclxuICAgIHByaXZhdGUgZHVlRGF0ZUhpc3RvZ3JhbTogTWFwPHN0cmluZywgbnVtYmVyPiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogU1JTU2V0dGluZ3MgPSBERUZBVUxUX1NSU19TRVRUSU5HUykge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZSB0aGUgbmV4dCByZXZpZXcgc2NoZWR1bGUgYmFzZWQgb24gdXNlciByZXNwb25zZVxyXG4gICAgICogSW1wbGVtZW50cyB0aGUgU00tMiBhbGdvcml0aG0gYWNjb3JkaW5nIHRvIGxlYXJuaW5nX2FsZ29yaXRobS5tZCBzcGVjaWZpY2F0aW9uXHJcbiAgICAgKi9cclxuICAgIHNjaGVkdWxlKFxyXG4gICAgICAgIHJlc3BvbnNlOiBSZXZpZXdSZXNwb25zZSxcclxuICAgICAgICBjdXJyZW50U2NoZWR1bGU/OiBTY2hlZHVsZUluZm9cclxuICAgICk6IFJldmlld1Jlc3VsdCB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCBxID0gUVVBTElUWV9TQ09SRVNbcmVzcG9uc2VdOyAvLyBcdUQ0ODhcdUM5QzggXHVDODEwXHVDMjE4OiAxKGhhcmQpLCAyKGdvb2QpLCAzKGVhc3kpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBzY2hlZHVsZSBpbmZvIGZvciBuZXcgY2FyZHNcclxuICAgICAgICBpZiAoIWN1cnJlbnRTY2hlZHVsZSkge1xyXG4gICAgICAgICAgICBjdXJyZW50U2NoZWR1bGUgPSB7XHJcbiAgICAgICAgICAgICAgICBkdWVEYXRlOiBub3cudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGludGVydmFsOiAwLFxyXG4gICAgICAgICAgICAgICAgZWFzZTogTWF0aC5yb3VuZCh0aGlzLnNldHRpbmdzLmluaXRpYWxFRmFjdG9yICogMTAwKSwgLy8gRS1GYWN0b3JcdUI5N0MgMTAwXHVDNzNDXHVCODVDIFx1QUNGMVx1RDU3NFx1QzExQyBcdUM4MDBcdUM3QTVcclxuICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgbGFwc2VDb3VudDogMCxcclxuICAgICAgICAgICAgICAgIGRlbGF5ZWREYXlzOiAwLFxyXG4gICAgICAgICAgICAgICAgcmVwZXRpdGlvbjogMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIEUtRmFjdG9yIFx1QUNDNFx1QzBCMCAoXHVDODAwXHVDN0E1XHVCNDFDIFx1QUMxMlx1Qzc0NCAxMDBcdUM3M0NcdUI4NUMgXHVCMDk4XHVCMjA0XHVDNUI0IFx1QzJFNFx1QzgxQyBFLUZhY3RvciBcdUM1QkJcdUM3NEMpXHJcbiAgICAgICAgbGV0IGN1cnJlbnRFRmFjdG9yID0gY3VycmVudFNjaGVkdWxlLmVhc2UgLyAxMDA7XHJcbiAgICAgICAgbGV0IG5ld1JlcGV0aXRpb24gPSBjdXJyZW50U2NoZWR1bGUucmVwZXRpdGlvbjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTTS0yIEFsZ29yaXRobSBTdGVwIDE6IEUtRmFjdG9yIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIC8vIEVGX25ldyA9IEVGX29sZCArICgwLjEgLSAoMy1xKSAqICgwLjA4ICsgKDMtcSkgKiAwLjAyKSlcclxuICAgICAgICBjb25zdCBkZWx0YSA9IDAuMSAtICgzIC0gcSkgKiAoMC4wOCArICgzIC0gcSkgKiAwLjAyKTtcclxuICAgICAgICBsZXQgbmV3RUZhY3RvciA9IGN1cnJlbnRFRmFjdG9yICsgZGVsdGE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRS1GYWN0b3IgXHVDRDVDXHVDMThDXHVBQzEyIFx1QzgxQ1x1RDU1QyAoMS4zKVxyXG4gICAgICAgIG5ld0VGYWN0b3IgPSBNYXRoLm1heCh0aGlzLnNldHRpbmdzLm1pbmltdW1FRmFjdG9yLCBuZXdFRmFjdG9yKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTTS0yIEFsZ29yaXRobSBTdGVwIDI6IFJlcGV0aXRpb24gXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKHEgPj0gMikgeyAvLyBnb29kIFx1QjYxMFx1QjI5NCBlYXN5IChxID0gMiBcdUI2MTBcdUIyOTQgMylcclxuICAgICAgICAgICAgbmV3UmVwZXRpdGlvbiA9IGN1cnJlbnRTY2hlZHVsZS5yZXBldGl0aW9uICsgMTtcclxuICAgICAgICB9IGVsc2UgeyAvLyBoYXJkIChxID0gMSlcclxuICAgICAgICAgICAgbmV3UmVwZXRpdGlvbiA9IDA7IC8vIHJlcGV0aXRpb24gXHVCOUFDXHVDMTRCXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNNLTIgQWxnb3JpdGhtIFN0ZXAgMzogXHVCMkU0XHVDNzRDIFx1QkNGNVx1QzJCNSBcdUFDMDRcdUFDQTkgXHVBQ0M0XHVDMEIwXHJcbiAgICAgICAgbGV0IG5ld0ludGVydmFsOiBudW1iZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHEgPCAyKSB7IC8vIGhhcmQgKHEgPSAxKVxyXG4gICAgICAgICAgICAvLyBoYXJkIFx1Qzc1MVx1QjJGNSBcdUMyREMgXHVDOTg5XHVDMkRDIFx1QkNGNVx1QzJCNSAoMVx1Qzc3QyBcdUQ2QzQpXHJcbiAgICAgICAgICAgIG5ld0ludGVydmFsID0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBnb29kIFx1QjYxMFx1QjI5NCBlYXN5IFx1Qzc1MVx1QjJGNSBcdUMyREMgU00tMiBcdUFDMDRcdUFDQTkgXHVBQ0Y1XHVDMkREIFx1QzgwMVx1QzZBOVxyXG4gICAgICAgICAgICBpZiAobmV3UmVwZXRpdGlvbiA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSAxO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1JlcGV0aXRpb24gPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIG5ld0ludGVydmFsID0gNjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIG4gPj0gMzogSV9uID0gSV8obi0xKSAqIEVGX25ld1xyXG4gICAgICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSBNYXRoLnJvdW5kKGN1cnJlbnRTY2hlZHVsZS5pbnRlcnZhbCAqIG5ld0VGYWN0b3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Q0Q1Q1x1QjMwMCBcdUFDMDRcdUFDQTkgXHVDODFDXHVENTVDXHJcbiAgICAgICAgbmV3SW50ZXJ2YWwgPSBNYXRoLm1pbihuZXdJbnRlcnZhbCwgdGhpcy5zZXR0aW5ncy5tYXhpbXVtSW50ZXJ2YWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Q0Q1Q1x1QzE4QyBcdUFDMDRcdUFDQTkgXHVCQ0Y0XHVDN0E1ICgxXHVDNzdDKVxyXG4gICAgICAgIG5ld0ludGVydmFsID0gTWF0aC5tYXgoMSwgbmV3SW50ZXJ2YWwpO1xyXG5cclxuICAgICAgICAvLyBMb2FkIGJhbGFuY2luZyBcdUM4MDFcdUM2QTkgKFx1QzEyMFx1RDBERFx1QzBBQ1x1RDU2RClcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5sb2FkQmFsYW5jZSkge1xyXG4gICAgICAgICAgICBuZXdJbnRlcnZhbCA9IHRoaXMuYXBwbHlMb2FkQmFsYW5jaW5nKG5ld0ludGVydmFsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QzBDOFx1Qjg1Q1x1QzZCNCBcdUI5Q0NcdUI4Q0NcdUM3N0MgXHVBQ0M0XHVDMEIwXHJcbiAgICAgICAgY29uc3QgbmV3RHVlRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyBuZXdJbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xyXG5cclxuICAgICAgICAvLyBcdUQ3ODhcdUMyQTRcdUQxQTBcdUFERjhcdUI3QTggXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IChsb2FkIGJhbGFuY2luZ1x1QzZBOSlcclxuICAgICAgICB0aGlzLnVwZGF0ZUR1ZURhdGVIaXN0b2dyYW0obmV3RHVlRGF0ZS50b0RhdGVTdHJpbmcoKSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGludGVydmFsOiBuZXdJbnRlcnZhbCxcclxuICAgICAgICAgICAgZWFzZTogTWF0aC5yb3VuZChuZXdFRmFjdG9yICogMTAwKSwgLy8gRS1GYWN0b3JcdUI5N0MgMTAwXHVDNzNDXHVCODVDIFx1QUNGMVx1RDU3NFx1QzExQyBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgZHVlRGF0ZTogbmV3RHVlRGF0ZS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICByZXBldGl0aW9uOiBuZXdSZXBldGl0aW9uXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGx5IGxvYWQgYmFsYW5jaW5nIHRvIGRpc3RyaWJ1dGUgcmV2aWV3cyBldmVubHkgYWNyb3NzIGRheXNcclxuICAgICAqIEJhc2VkIG9uIHRoZSBoaXN0b2dyYW0tYmFzZWQgYXBwcm9hY2ggZnJvbSBvYnNpZGlhbi1zcGFjZWQtcmVwZXRpdGlvblxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFwcGx5TG9hZEJhbGFuY2luZyhpbnRlcnZhbDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MubG9hZEJhbGFuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGludGVydmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGlmZmVyZW50IGZ1enppbmcgc3RyYXRlZ2llcyBiYXNlZCBvbiBpbnRlcnZhbCBsZW5ndGhcclxuICAgICAgICBsZXQgZnV6emluZ1JhbmdlOiBudW1iZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDIxKSB7XHJcbiAgICAgICAgICAgIGZ1enppbmdSYW5nZSA9IDE7IC8vIDEgZGF5IGZ1enppbmcgZm9yIHNob3J0IGludGVydmFsc1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW50ZXJ2YWwgPD0gMTgwKSB7XHJcbiAgICAgICAgICAgIGZ1enppbmdSYW5nZSA9IE1hdGgubWF4KDEsIGludGVydmFsICogMC4wNSk7IC8vIDUlIGZ1enppbmcgZm9yIG1lZGl1bSBpbnRlcnZhbHNcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmdXp6aW5nUmFuZ2UgPSBNYXRoLm1heCgxLCBpbnRlcnZhbCAqIDAuMDI1KTsgLy8gMi41JSBmdXp6aW5nIGZvciBsb25nIGludGVydmFsc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2FwIGZ1enppbmcgYXQgbWF4IHNldHRpbmdcclxuICAgICAgICBmdXp6aW5nUmFuZ2UgPSBNYXRoLm1pbihmdXp6aW5nUmFuZ2UsIHRoaXMuc2V0dGluZ3MubWF4RnV6emluZ0RheXMpO1xyXG5cclxuICAgICAgICAvLyBGaW5kIHRoZSBkYXRlIHdpdGggbWluaW11bSByZXZpZXdzIGluIHRoZSBmdXp6aW5nIHJhbmdlXHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBsZXQgYmVzdEludGVydmFsID0gaW50ZXJ2YWw7XHJcbiAgICAgICAgbGV0IG1pblJldmlld3MgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgb2Zmc2V0ID0gLWZ1enppbmdSYW5nZTsgb2Zmc2V0IDw9IGZ1enppbmdSYW5nZTsgb2Zmc2V0KyspIHtcclxuICAgICAgICAgICAgY29uc3QgdGVzdEludGVydmFsID0gaW50ZXJ2YWwgKyBvZmZzZXQ7XHJcbiAgICAgICAgICAgIGlmICh0ZXN0SW50ZXJ2YWwgPCAxKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3REYXRlID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIHRlc3RJbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gdGVzdERhdGUudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJldmlld0NvdW50ID0gdGhpcy5kdWVEYXRlSGlzdG9ncmFtLmdldChkYXRlU3RyaW5nKSB8fCAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJldmlld0NvdW50IDwgbWluUmV2aWV3cykge1xyXG4gICAgICAgICAgICAgICAgbWluUmV2aWV3cyA9IHJldmlld0NvdW50O1xyXG4gICAgICAgICAgICAgICAgYmVzdEludGVydmFsID0gdGVzdEludGVydmFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYmVzdEludGVydmFsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSBkdWUgZGF0ZSBoaXN0b2dyYW0gZm9yIGxvYWQgYmFsYW5jaW5nXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlRHVlRGF0ZUhpc3RvZ3JhbShkYXRlU3RyaW5nOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5kdWVEYXRlSGlzdG9ncmFtLmdldChkYXRlU3RyaW5nKSB8fCAwO1xyXG4gICAgICAgIHRoaXMuZHVlRGF0ZUhpc3RvZ3JhbS5zZXQoZGF0ZVN0cmluZywgY3VycmVudCArIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGNhcmRzIHRoYXQgYXJlIGR1ZSBmb3IgcmV2aWV3XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRDYXJkc0ZvclJldmlldyhjYXJkczogQXJyYXk8eyBzY2hlZHVsZUluZm8/OiBTY2hlZHVsZUluZm8gfT4pOiBBcnJheTx7IHNjaGVkdWxlSW5mbz86IFNjaGVkdWxlSW5mbyB9PiB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY2FyZHMuZmlsdGVyKGNhcmQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWNhcmQuc2NoZWR1bGVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gTmV3IGNhcmRzIGFyZSBhbHdheXMgZHVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGR1ZURhdGUgPSBuZXcgRGF0ZShjYXJkLnNjaGVkdWxlSW5mby5kdWVEYXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGR1ZURhdGUgPD0gbm93O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgY2FyZHMgZHVlIGluIHRoZSBuZXh0IE4gZGF5c1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0Q2FyZHNEdWVJbkRheXMoY2FyZHM6IEFycmF5PHsgc2NoZWR1bGVJbmZvPzogU2NoZWR1bGVJbmZvIH0+LCBkYXlzOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgZnV0dXJlRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyBkYXlzICogMjQgKiA2MCAqIDYwICogMTAwMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGNhcmRzLmZpbHRlcihjYXJkID0+IHtcclxuICAgICAgICAgICAgaWYgKCFjYXJkLnNjaGVkdWxlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIE5ldyBjYXJkcyBjb3VudCBhcyBkdWUgdG9kYXlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IG5ldyBEYXRlKGNhcmQuc2NoZWR1bGVJbmZvLmR1ZURhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZHVlRGF0ZSA8PSBmdXR1cmVEYXRlO1xyXG4gICAgICAgIH0pLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBsZWFybmluZyBzdGF0aXN0aWNzIGZvciBhIHNldCBvZiBjYXJkc1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0U3RhdGlzdGljcyhjYXJkczogQXJyYXk8eyBzY2hlZHVsZUluZm8/OiBTY2hlZHVsZUluZm8gfT4pOiB7XHJcbiAgICAgICAgdG90YWw6IG51bWJlcjtcclxuICAgICAgICBuZXc6IG51bWJlcjtcclxuICAgICAgICBsZWFybmluZzogbnVtYmVyO1xyXG4gICAgICAgIG1hdHVyZTogbnVtYmVyO1xyXG4gICAgICAgIGF2ZXJhZ2VFYXNlOiBudW1iZXI7XHJcbiAgICAgICAgYXZlcmFnZUludGVydmFsOiBudW1iZXI7XHJcbiAgICB9IHtcclxuICAgICAgICBsZXQgbmV3Q2FyZHMgPSAwO1xyXG4gICAgICAgIGxldCBsZWFybmluZ0NhcmRzID0gMDtcclxuICAgICAgICBsZXQgbWF0dXJlQ2FyZHMgPSAwO1xyXG4gICAgICAgIGxldCB0b3RhbEVhc2UgPSAwO1xyXG4gICAgICAgIGxldCB0b3RhbEludGVydmFsID0gMDtcclxuICAgICAgICBsZXQgY2FyZHNXaXRoU2NoZWR1bGUgPSAwO1xyXG5cclxuICAgICAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWNhcmQuc2NoZWR1bGVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdDYXJkcysrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FyZHNXaXRoU2NoZWR1bGUrKztcclxuICAgICAgICAgICAgICAgIHRvdGFsRWFzZSArPSBjYXJkLnNjaGVkdWxlSW5mby5lYXNlO1xyXG4gICAgICAgICAgICAgICAgdG90YWxJbnRlcnZhbCArPSBjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FyZC5zY2hlZHVsZUluZm8uaW50ZXJ2YWwgPCAyMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nQ2FyZHMrKztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0dXJlQ2FyZHMrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b3RhbDogY2FyZHMubGVuZ3RoLFxyXG4gICAgICAgICAgICBuZXc6IG5ld0NhcmRzLFxyXG4gICAgICAgICAgICBsZWFybmluZzogbGVhcm5pbmdDYXJkcyxcclxuICAgICAgICAgICAgbWF0dXJlOiBtYXR1cmVDYXJkcyxcclxuICAgICAgICAgICAgYXZlcmFnZUVhc2U6IGNhcmRzV2l0aFNjaGVkdWxlID4gMCA/IE1hdGgucm91bmQodG90YWxFYXNlIC8gY2FyZHNXaXRoU2NoZWR1bGUpIDogMCxcclxuICAgICAgICAgICAgYXZlcmFnZUludGVydmFsOiBjYXJkc1dpdGhTY2hlZHVsZSA+IDAgPyBNYXRoLnJvdW5kKHRvdGFsSW50ZXJ2YWwgLyBjYXJkc1dpdGhTY2hlZHVsZSkgOiAwXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBhbGdvcml0aG0gc2V0dGluZ3NcclxuICAgICAqL1xyXG4gICAgdXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3M6IFBhcnRpYWw8U1JTU2V0dGluZ3M+KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjdXJyZW50IHNldHRpbmdzXHJcbiAgICAgKi9cclxuICAgIGdldFNldHRpbmdzKCk6IFNSU1NldHRpbmdzIHtcclxuICAgICAgICByZXR1cm4geyAuLi50aGlzLnNldHRpbmdzIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhciB0aGUgZHVlIGRhdGUgaGlzdG9ncmFtICh1c2VmdWwgZm9yIHRlc3Rpbmcgb3IgcmVzZXQpXHJcbiAgICAgKi9cclxuICAgIGNsZWFySGlzdG9ncmFtKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZHVlRGF0ZUhpc3RvZ3JhbS5jbGVhcigpO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IFxyXG4gICAgU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobSwgXHJcbiAgICBSZXZpZXdSZXNwb25zZSwgXHJcbiAgICBTUlNTZXR0aW5ncywgXHJcbiAgICBERUZBVUxUX1NSU19TRVRUSU5HUyxcclxuICAgIFNjaGVkdWxlSW5mbyBcclxufSBmcm9tICcuLi9hbGdvcml0aG1zL1NwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0nO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCB9IGZyb20gJy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmV2aWV3U2Vzc2lvbiB7XHJcbiAgICBzZXNzaW9uSWQ6IHN0cmluZztcclxuICAgIHN0YXJ0VGltZTogc3RyaW5nO1xyXG4gICAgY2FyZHNSZXZpZXdlZDogbnVtYmVyO1xyXG4gICAgdG90YWxDYXJkczogbnVtYmVyO1xyXG4gICAgY29tcGxldGVkQ2FyZHM6IFZvY2FidWxhcnlDYXJkW107XHJcbiAgICBjdXJyZW50Q2FyZD86IFZvY2FidWxhcnlDYXJkO1xyXG4gICAgcmVtYWluaW5nQ2FyZHM/OiBWb2NhYnVsYXJ5Q2FyZFtdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN0dWR5U3RhdGlzdGljcyB7XHJcbiAgICB0b2RheToge1xyXG4gICAgICAgIG5ld0NhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgcmV2aWV3ZWRDYXJkczogbnVtYmVyO1xyXG4gICAgICAgIHRvdGFsVGltZTogbnVtYmVyOyAvLyBtaW51dGVzXHJcbiAgICB9O1xyXG4gICAgc3RyZWFrOiB7XHJcbiAgICAgICAgY3VycmVudERheXM6IG51bWJlcjtcclxuICAgICAgICBsb25nZXN0RGF5czogbnVtYmVyO1xyXG4gICAgICAgIGxhc3RTdHVkeURhdGU6IHN0cmluZyB8IG51bGw7XHJcbiAgICB9O1xyXG4gICAgb3ZlcmFsbDoge1xyXG4gICAgICAgIHRvdGFsQ2FyZHM6IG51bWJlcjtcclxuICAgICAgICBuZXdDYXJkczogbnVtYmVyO1xyXG4gICAgICAgIGxlYXJuaW5nQ2FyZHM6IG51bWJlcjtcclxuICAgICAgICBtYXR1cmVDYXJkczogbnVtYmVyO1xyXG4gICAgICAgIGF2ZXJhZ2VFYXNlOiBudW1iZXI7XHJcbiAgICAgICAgYXZlcmFnZUludGVydmFsOiBudW1iZXI7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU3BhY2VkUmVwZXRpdGlvblNlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSBhbGdvcml0aG06IFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG07XHJcbiAgICBwcml2YXRlIGN1cnJlbnRTZXNzaW9uOiBSZXZpZXdTZXNzaW9uIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFBhcnRpYWw8U1JTU2V0dGluZ3M+ID0ge30pIHtcclxuICAgICAgICBjb25zdCBzcnNTZXR0aW5ncyA9IHsgLi4uREVGQVVMVF9TUlNfU0VUVElOR1MsIC4uLnNldHRpbmdzIH07XHJcbiAgICAgICAgdGhpcy5hbGdvcml0aG0gPSBuZXcgU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobShzcnNTZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY2FyZHMgdGhhdCBhcmUgZHVlIGZvciByZXZpZXcgdG9kYXlcclxuICAgICAqL1xyXG4gICAgZ2V0Q2FyZHNGb3JSZXZpZXcoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcclxuICAgICAgICByZXR1cm4gU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobS5nZXRDYXJkc0ZvclJldmlldyhhbGxDYXJkcykgYXMgVm9jYWJ1bGFyeUNhcmRbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBuZXcgY2FyZHMgKG5ldmVyIHJldmlld2VkKVxyXG4gICAgICovXHJcbiAgICBnZXROZXdDYXJkcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIHJldHVybiBhbGxDYXJkcy5maWx0ZXIoY2FyZCA9PiAhY2FyZC5zY2hlZHVsZUluZm8gfHwgY2FyZC5yZXZpZXdDb3VudCA9PT0gMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgbGVhcm5pbmcgY2FyZHMgKHJldmlld2VkIGJ1dCBub3QgbWF0dXJlKVxyXG4gICAgICovXHJcbiAgICBnZXRMZWFybmluZ0NhcmRzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgcmV0dXJuIGFsbENhcmRzLmZpbHRlcihjYXJkID0+IFxyXG4gICAgICAgICAgICBjYXJkLnNjaGVkdWxlSW5mbyAmJiBcclxuICAgICAgICAgICAgY2FyZC5yZXZpZXdDb3VudCA+IDAgJiYgXHJcbiAgICAgICAgICAgIGNhcmQuc2NoZWR1bGVJbmZvLmludGVydmFsIDwgMjFcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IG1hdHVyZSBjYXJkcyAoaW50ZXJ2YWwgPj0gMjEgZGF5cylcclxuICAgICAqL1xyXG4gICAgZ2V0TWF0dXJlQ2FyZHMoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcclxuICAgICAgICByZXR1cm4gYWxsQ2FyZHMuZmlsdGVyKGNhcmQgPT4gXHJcbiAgICAgICAgICAgIGNhcmQuc2NoZWR1bGVJbmZvICYmIFxyXG4gICAgICAgICAgICBjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbCA+PSAyMVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydCBhIG5ldyByZXZpZXcgc2Vzc2lvblxyXG4gICAgICovXHJcbiAgICBzdGFydFJldmlld1Nlc3Npb24oZHVlQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10sIG1heENhcmRzPzogbnVtYmVyKTogUmV2aWV3U2Vzc2lvbiB7XHJcbiAgICAgICAgY29uc3QgY2FyZHNUb1JldmlldyA9IG1heENhcmRzID8gZHVlQ2FyZHMuc2xpY2UoMCwgbWF4Q2FyZHMpIDogZHVlQ2FyZHM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbiA9IHtcclxuICAgICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLmdlbmVyYXRlU2Vzc2lvbklkKCksXHJcbiAgICAgICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICBjYXJkc1Jldmlld2VkOiAwLFxyXG4gICAgICAgICAgICB0b3RhbENhcmRzOiBjYXJkc1RvUmV2aWV3Lmxlbmd0aCxcclxuICAgICAgICAgICAgY29tcGxldGVkQ2FyZHM6IFtdLFxyXG4gICAgICAgICAgICBjdXJyZW50Q2FyZDogY2FyZHNUb1Jldmlld1swXSxcclxuICAgICAgICAgICAgcmVtYWluaW5nQ2FyZHM6IGNhcmRzVG9SZXZpZXcgLy8gQWRkIHJlbWFpbmluZyBjYXJkcyB0byB0cmFjayBwcm9ncmVzc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTZXNzaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2VzcyBhIHJldmlldyByZXNwb25zZSBhbmQgZ2V0IHRoZSBuZXh0IGNhcmRcclxuICAgICAqL1xyXG4gICAgcHJvY2Vzc1JldmlldyhcclxuICAgICAgICBjYXJkOiBWb2NhYnVsYXJ5Q2FyZCwgXHJcbiAgICAgICAgcmVzcG9uc2U6IFJldmlld1Jlc3BvbnNlXHJcbiAgICApOiB7IFxyXG4gICAgICAgIHVwZGF0ZWRDYXJkOiBWb2NhYnVsYXJ5Q2FyZDsgXHJcbiAgICAgICAgbmV4dENhcmQ/OiBWb2NhYnVsYXJ5Q2FyZDsgXHJcbiAgICAgICAgc2Vzc2lvbkNvbXBsZXRlOiBib29sZWFuIFxyXG4gICAgfSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRTZXNzaW9uKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYWN0aXZlIHJldmlldyBzZXNzaW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBcHBseSBzcGFjZWQgcmVwZXRpdGlvbiBhbGdvcml0aG1cclxuICAgICAgICBjb25zdCByZXZpZXdSZXN1bHQgPSB0aGlzLmFsZ29yaXRobS5zY2hlZHVsZShyZXNwb25zZSwgY2FyZC5zY2hlZHVsZUluZm8pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFVwZGF0ZSBjYXJkIHdpdGggbmV3IHNjaGVkdWxlXHJcbiAgICAgICAgY29uc3QgdXBkYXRlZENhcmQ6IFZvY2FidWxhcnlDYXJkID0ge1xyXG4gICAgICAgICAgICAuLi5jYXJkLFxyXG4gICAgICAgICAgICByZXZpZXdDb3VudDogKGNhcmQuc2NoZWR1bGVJbmZvPy5yZXZpZXdDb3VudCB8fCAwKSArIDEsXHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHJlc3BvbnNlLFxyXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgc2NoZWR1bGVJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICBkdWVEYXRlOiByZXZpZXdSZXN1bHQuZHVlRGF0ZSxcclxuICAgICAgICAgICAgICAgIGludGVydmFsOiByZXZpZXdSZXN1bHQuaW50ZXJ2YWwsXHJcbiAgICAgICAgICAgICAgICBlYXNlOiByZXZpZXdSZXN1bHQuZWFzZSxcclxuICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LnJldmlld0NvdW50IHx8IDApICsgMSxcclxuICAgICAgICAgICAgICAgIGxhcHNlQ291bnQ6IChjYXJkLnNjaGVkdWxlSW5mbz8ubGFwc2VDb3VudCB8fCAwKSArIChyZXNwb25zZSA9PT0gUmV2aWV3UmVzcG9uc2UuSGFyZCA/IDEgOiAwKSxcclxuICAgICAgICAgICAgICAgIGRlbGF5ZWREYXlzOiBjYXJkLnNjaGVkdWxlSW5mbz8uZGVsYXllZERheXMgfHwgMCxcclxuICAgICAgICAgICAgICAgIHJlcGV0aXRpb246IHJldmlld1Jlc3VsdC5yZXBldGl0aW9uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgc2Vzc2lvblxyXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24uY2FyZHNSZXZpZXdlZCsrO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24uY29tcGxldGVkQ2FyZHMucHVzaCh1cGRhdGVkQ2FyZCk7XHJcblxyXG4gICAgICAgIC8vIEdldCBuZXh0IGNhcmQgZnJvbSByZW1haW5pbmcgY2FyZHNcclxuICAgICAgICBjb25zdCByZW1haW5pbmdDYXJkcyA9IHRoaXMuY3VycmVudFNlc3Npb24ucmVtYWluaW5nQ2FyZHMgfHwgW107XHJcbiAgICAgICAgY29uc3QgbmV4dENhcmQgPSB0aGlzLmN1cnJlbnRTZXNzaW9uLmNhcmRzUmV2aWV3ZWQgPCByZW1haW5pbmdDYXJkcy5sZW5ndGggXHJcbiAgICAgICAgICAgID8gcmVtYWluaW5nQ2FyZHNbdGhpcy5jdXJyZW50U2Vzc2lvbi5jYXJkc1Jldmlld2VkXSBcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24uY3VycmVudENhcmQgPSBuZXh0Q2FyZDtcclxuXHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbXBsZXRlID0gIW5leHRDYXJkIHx8IHRoaXMuY3VycmVudFNlc3Npb24uY2FyZHNSZXZpZXdlZCA+PSB0aGlzLmN1cnJlbnRTZXNzaW9uLnRvdGFsQ2FyZHM7XHJcblxyXG4gICAgICAgIGlmIChzZXNzaW9uQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgdGhpcy5lbmRSZXZpZXdTZXNzaW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB1cGRhdGVkQ2FyZCxcclxuICAgICAgICAgICAgbmV4dENhcmQsXHJcbiAgICAgICAgICAgIHNlc3Npb25Db21wbGV0ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbmQgdGhlIGN1cnJlbnQgcmV2aWV3IHNlc3Npb25cclxuICAgICAqL1xyXG4gICAgZW5kUmV2aWV3U2Vzc2lvbigpOiBSZXZpZXdTZXNzaW9uIHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuY3VycmVudFNlc3Npb247XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbiA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHNlc3Npb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY3VycmVudCBzZXNzaW9uIGluZm9cclxuICAgICAqL1xyXG4gICAgZ2V0Q3VycmVudFNlc3Npb24oKTogUmV2aWV3U2Vzc2lvbiB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTZXNzaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlIHN0dWR5IHN0YXRpc3RpY3NcclxuICAgICAqL1xyXG4gICAgY2FsY3VsYXRlU3RhdGlzdGljcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSwgc3R1ZHlIaXN0b3J5PzogYW55W10pOiBTdHVkeVN0YXRpc3RpY3Mge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgdG9kYXkgPSBub3cudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gT3ZlcmFsbCBzdGF0aXN0aWNzIHVzaW5nIHRoZSBhbGdvcml0aG0ncyBzdGF0aWMgbWV0aG9kXHJcbiAgICAgICAgY29uc3Qgb3ZlcmFsbFN0YXRzID0gU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobS5nZXRTdGF0aXN0aWNzKGFsbENhcmRzKTtcclxuXHJcbiAgICAgICAgLy8gVG9kYXkncyBzdGF0aXN0aWNzICh3b3VsZCBuZWVkIHRvIGJlIHRyYWNrZWQgc2VwYXJhdGVseSlcclxuICAgICAgICBjb25zdCB0b2RheVN0YXRzID0ge1xyXG4gICAgICAgICAgICBuZXdDYXJkczogMCwgLy8gV291bGQgdHJhY2sgZnJvbSBzZXNzaW9uIGRhdGFcclxuICAgICAgICAgICAgcmV2aWV3ZWRDYXJkczogMCwgLy8gV291bGQgdHJhY2sgZnJvbSBzZXNzaW9uIGRhdGFcclxuICAgICAgICAgICAgdG90YWxUaW1lOiAwIC8vIFdvdWxkIHRyYWNrIGZyb20gc2Vzc2lvbiB0aW1pbmdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBTdHJlYWsgY2FsY3VsYXRpb24gKHdvdWxkIG5lZWQgcGVyc2lzdGVudCBzdG9yYWdlKVxyXG4gICAgICAgIGNvbnN0IHN0cmVha1N0YXRzID0ge1xyXG4gICAgICAgICAgICBjdXJyZW50RGF5czogMCwgLy8gV291bGQgY2FsY3VsYXRlIGZyb20gc3R1ZHkgaGlzdG9yeVxyXG4gICAgICAgICAgICBsb25nZXN0RGF5czogMCwgLy8gV291bGQgY2FsY3VsYXRlIGZyb20gc3R1ZHkgaGlzdG9yeVxyXG4gICAgICAgICAgICBsYXN0U3R1ZHlEYXRlOiBudWxsIGFzIHN0cmluZyB8IG51bGxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b2RheTogdG9kYXlTdGF0cyxcclxuICAgICAgICAgICAgc3RyZWFrOiBzdHJlYWtTdGF0cyxcclxuICAgICAgICAgICAgb3ZlcmFsbDogb3ZlcmFsbFN0YXRzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjYXJkcyBkdWUgaW4gdGhlIG5leHQgTiBkYXlzXHJcbiAgICAgKi9cclxuICAgIGdldENhcmRzRHVlSW5EYXlzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdLCBkYXlzOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLmdldENhcmRzRHVlSW5EYXlzKGFsbENhcmRzLCBkYXlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IGEgY2FyZCdzIHNjaGVkdWxlIChmb3IgdGVzdGluZyBvciBtYW51YWwgaW50ZXJ2ZW50aW9uKVxyXG4gICAgICovXHJcbiAgICByZXNldENhcmRTY2hlZHVsZShjYXJkOiBWb2NhYnVsYXJ5Q2FyZCk6IFZvY2FidWxhcnlDYXJkIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAuLi5jYXJkLFxyXG4gICAgICAgICAgICByZXZpZXdDb3VudDogMCxcclxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBudWxsLFxyXG4gICAgICAgICAgICBzY2hlZHVsZUluZm86IHVuZGVmaW5lZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYW51YWxseSBzZXQgY2FyZCBkaWZmaWN1bHR5IChmb3IgYnVsayBvcGVyYXRpb25zKVxyXG4gICAgICovXHJcbiAgICBzZXRDYXJkRGlmZmljdWx0eShjYXJkOiBWb2NhYnVsYXJ5Q2FyZCwgZGlmZmljdWx0eTogUmV2aWV3UmVzcG9uc2UpOiBWb2NhYnVsYXJ5Q2FyZCB7XHJcbiAgICAgICAgY29uc3QgcmV2aWV3UmVzdWx0ID0gdGhpcy5hbGdvcml0aG0uc2NoZWR1bGUoZGlmZmljdWx0eSwgY2FyZC5zY2hlZHVsZUluZm8pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIC4uLmNhcmQsXHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIHNjaGVkdWxlSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgZHVlRGF0ZTogcmV2aWV3UmVzdWx0LmR1ZURhdGUsXHJcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogcmV2aWV3UmVzdWx0LmludGVydmFsLFxyXG4gICAgICAgICAgICAgICAgZWFzZTogcmV2aWV3UmVzdWx0LmVhc2UsXHJcbiAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogKGNhcmQuc2NoZWR1bGVJbmZvPy5yZXZpZXdDb3VudCB8fCAwKSArIDEsXHJcbiAgICAgICAgICAgICAgICBsYXBzZUNvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LmxhcHNlQ291bnQgfHwgMCkgKyAoZGlmZmljdWx0eSA9PT0gUmV2aWV3UmVzcG9uc2UuSGFyZCA/IDEgOiAwKSxcclxuICAgICAgICAgICAgICAgIGRlbGF5ZWREYXlzOiAwLFxyXG4gICAgICAgICAgICAgICAgcmVwZXRpdGlvbjogcmV2aWV3UmVzdWx0LnJlcGV0aXRpb25cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgYWxnb3JpdGhtIHNldHRpbmdzXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBQYXJ0aWFsPFNSU1NldHRpbmdzPik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWxnb3JpdGhtLnVwZGF0ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjdXJyZW50IGFsZ29yaXRobSBzZXR0aW5nc1xyXG4gICAgICovXHJcbiAgICBnZXRTZXR0aW5ncygpOiBTUlNTZXR0aW5ncyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxnb3JpdGhtLmdldFNldHRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSBhIHVuaXF1ZSBzZXNzaW9uIElEXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2VuZXJhdGVTZXNzaW9uSWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYHNlc3Npb25fJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHJlY29tbWVuZGVkIGRhaWx5IHN0dWR5IGxvYWRcclxuICAgICAqL1xyXG4gICAgZ2V0UmVjb21tZW5kZWREYWlseUNhcmRzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKToge1xyXG4gICAgICAgIG5ld0NhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgcmV2aWV3Q2FyZHM6IG51bWJlcjtcclxuICAgICAgICB0b3RhbDogbnVtYmVyO1xyXG4gICAgfSB7XHJcbiAgICAgICAgY29uc3QgZHVlQ2FyZHMgPSB0aGlzLmdldENhcmRzRm9yUmV2aWV3KGFsbENhcmRzKTtcclxuICAgICAgICBjb25zdCBuZXdDYXJkcyA9IHRoaXMuZ2V0TmV3Q2FyZHMoYWxsQ2FyZHMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFJlY29tbWVuZGVkIGxpbWl0cyAoY29uZmlndXJhYmxlKVxyXG4gICAgICAgIGNvbnN0IG1heE5ld0NhcmRzUGVyRGF5ID0gMjA7XHJcbiAgICAgICAgY29uc3QgbWF4UmV2aWV3Q2FyZHNQZXJEYXkgPSAxMDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWROZXcgPSBNYXRoLm1pbihuZXdDYXJkcy5sZW5ndGgsIG1heE5ld0NhcmRzUGVyRGF5KTtcclxuICAgICAgICBjb25zdCByZWNvbW1lbmRlZFJldmlldyA9IE1hdGgubWluKGR1ZUNhcmRzLmxlbmd0aCAtIHJlY29tbWVuZGVkTmV3LCBtYXhSZXZpZXdDYXJkc1BlckRheSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmV3Q2FyZHM6IHJlY29tbWVuZGVkTmV3LFxyXG4gICAgICAgICAgICByZXZpZXdDYXJkczogcmVjb21tZW5kZWRSZXZpZXcsXHJcbiAgICAgICAgICAgIHRvdGFsOiByZWNvbW1lbmRlZE5ldyArIHJlY29tbWVuZGVkUmV2aWV3XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4cG9ydCBjYXJkcyBmb3IgZGF0YSBhbmFseXNpcyBvciBiYWNrdXBcclxuICAgICAqL1xyXG4gICAgZXhwb3J0U2NoZWR1bGVEYXRhKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogYW55W10ge1xyXG4gICAgICAgIHJldHVybiBhbGxDYXJkcy5tYXAoY2FyZCA9PiAoe1xyXG4gICAgICAgICAgICB3b3JkOiBjYXJkLndvcmQsXHJcbiAgICAgICAgICAgIHJldmlld0NvdW50OiBjYXJkLnJldmlld0NvdW50LFxyXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiBjYXJkLmRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogY2FyZC5sYXN0UmV2aWV3ZWQsXHJcbiAgICAgICAgICAgIHNjaGVkdWxlSW5mbzogY2FyZC5zY2hlZHVsZUluZm8sXHJcbiAgICAgICAgICAgIGFkZGVkRGF0ZTogY2FyZC5hZGRlZERhdGVcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIG5leHQgcmV2aWV3IGludGVydmFscyBmb3IgZWFjaCBkaWZmaWN1bHR5IGxldmVsXHJcbiAgICAgKiBTaG93cyB0aGUgZXhhY3QgU00tMiBhbGdvcml0aG0gcmVzdWx0cyB3aXRoIEUtRmFjdG9yIGluZm9ybWF0aW9uXHJcbiAgICAgKi9cclxuICAgIGdldE5leHRSZXZpZXdJbnRlcnZhbHMoY2FyZDogVm9jYWJ1bGFyeUNhcmQpOiB7XHJcbiAgICAgICAgaGFyZDogeyBpbnRlcnZhbDogbnVtYmVyOyBkaXNwbGF5VGV4dDogc3RyaW5nOyBlRmFjdG9yOiBudW1iZXI7IHJlcGV0aXRpb246IG51bWJlciB9O1xyXG4gICAgICAgIGdvb2Q6IHsgaW50ZXJ2YWw6IG51bWJlcjsgZGlzcGxheVRleHQ6IHN0cmluZzsgZUZhY3RvcjogbnVtYmVyOyByZXBldGl0aW9uOiBudW1iZXIgfTtcclxuICAgICAgICBlYXN5OiB7IGludGVydmFsOiBudW1iZXI7IGRpc3BsYXlUZXh0OiBzdHJpbmc7IGVGYWN0b3I6IG51bWJlcjsgcmVwZXRpdGlvbjogbnVtYmVyIH07XHJcbiAgICB9IHtcclxuICAgICAgICBjb25zdCBoYXJkUmVzdWx0ID0gdGhpcy5hbGdvcml0aG0uc2NoZWR1bGUoUmV2aWV3UmVzcG9uc2UuSGFyZCwgY2FyZC5zY2hlZHVsZUluZm8pO1xyXG4gICAgICAgIGNvbnN0IGdvb2RSZXN1bHQgPSB0aGlzLmFsZ29yaXRobS5zY2hlZHVsZShSZXZpZXdSZXNwb25zZS5Hb29kLCBjYXJkLnNjaGVkdWxlSW5mbyk7XHJcbiAgICAgICAgY29uc3QgZWFzeVJlc3VsdCA9IHRoaXMuYWxnb3JpdGhtLnNjaGVkdWxlKFJldmlld1Jlc3BvbnNlLkVhc3ksIGNhcmQuc2NoZWR1bGVJbmZvKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaGFyZDoge1xyXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IGhhcmRSZXN1bHQuaW50ZXJ2YWwsXHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dDogdGhpcy5mb3JtYXRJbnRlcnZhbChoYXJkUmVzdWx0LmludGVydmFsKSxcclxuICAgICAgICAgICAgICAgIGVGYWN0b3I6IGhhcmRSZXN1bHQuZWFzZSAvIDEwMCwgLy8gQ29udmVydCBiYWNrIHRvIEUtRmFjdG9yXHJcbiAgICAgICAgICAgICAgICByZXBldGl0aW9uOiBoYXJkUmVzdWx0LnJlcGV0aXRpb25cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ29vZDoge1xyXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IGdvb2RSZXN1bHQuaW50ZXJ2YWwsXHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dDogdGhpcy5mb3JtYXRJbnRlcnZhbChnb29kUmVzdWx0LmludGVydmFsKSxcclxuICAgICAgICAgICAgICAgIGVGYWN0b3I6IGdvb2RSZXN1bHQuZWFzZSAvIDEwMCxcclxuICAgICAgICAgICAgICAgIHJlcGV0aXRpb246IGdvb2RSZXN1bHQucmVwZXRpdGlvblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlYXN5OiB7XHJcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogZWFzeVJlc3VsdC5pbnRlcnZhbCxcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0OiB0aGlzLmZvcm1hdEludGVydmFsKGVhc3lSZXN1bHQuaW50ZXJ2YWwpLFxyXG4gICAgICAgICAgICAgICAgZUZhY3RvcjogZWFzeVJlc3VsdC5lYXNlIC8gMTAwLFxyXG4gICAgICAgICAgICAgICAgcmVwZXRpdGlvbjogZWFzeVJlc3VsdC5yZXBldGl0aW9uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm9ybWF0IGludGVydmFsIGFzIGh1bWFuLXJlYWRhYmxlIHRleHRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBmb3JtYXRJbnRlcnZhbChkYXlzOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChkYXlzIDwgMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ3RvZGF5JztcclxuICAgICAgICB9IGVsc2UgaWYgKGRheXMgPT09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcxIGRheSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXlzIDwgMzApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGAke2RheXN9IGRheSR7ZGF5cyA+IDEgPyAncycgOiAnJ31gO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF5cyA8IDM2NSkge1xyXG4gICAgICAgICAgICBjb25zdCBtb250aHMgPSBNYXRoLnJvdW5kKGRheXMgLyAzMCAqIDEwKSAvIDEwO1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7bW9udGhzfSBtb250aCR7bW9udGhzID4gMSA/ICdzJyA6ICcnfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeWVhcnMgPSBNYXRoLnJvdW5kKGRheXMgLyAzNjUgKiAxMCkgLyAxMDtcclxuICAgICAgICAgICAgcmV0dXJuIGAke3llYXJzfSB5ZWFyJHt5ZWFycyA+IDEgPyAncycgOiAnJ31gO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBkZXRhaWxlZCBTTS0yIGFsZ29yaXRobSBzdGF0aXN0aWNzXHJcbiAgICAgKi9cclxuICAgIGdldFNNMlN0YXRpc3RpY3MoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiB7XHJcbiAgICAgICAgb3ZlcnZpZXc6IHtcclxuICAgICAgICAgICAgdG90YWxDYXJkczogbnVtYmVyO1xyXG4gICAgICAgICAgICBuZXdDYXJkczogbnVtYmVyO1xyXG4gICAgICAgICAgICBsZWFybmluZ0NhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgICAgIG1hdHVyZUNhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXBldGl0aW9uczoge1xyXG4gICAgICAgICAgICByZXAwOiBudW1iZXI7IC8vIFx1QzBDOCBcdUNFNzRcdUI0RENcclxuICAgICAgICAgICAgcmVwMTogbnVtYmVyOyAvLyBcdUNDQUIgXHVCQzg4XHVDOUY4IFx1QkNGNVx1QzJCNVxyXG4gICAgICAgICAgICByZXAyOiBudW1iZXI7IC8vIFx1QjQ1MCBcdUJDODhcdUM5RjggXHVCQ0Y1XHVDMkI1XHJcbiAgICAgICAgICAgIHJlcDNQbHVzOiBudW1iZXI7IC8vIFx1QzEzOCBcdUJDODhcdUM5RjggXHVDNzc0XHVDMEMxIFx1QkNGNVx1QzJCNVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZUZhY3RvcnM6IHtcclxuICAgICAgICAgICAgYXZlcmFnZTogbnVtYmVyO1xyXG4gICAgICAgICAgICBkaXN0cmlidXRpb246IHsgcmFuZ2U6IHN0cmluZzsgY291bnQ6IG51bWJlciB9W107XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbnRlcnZhbHM6IHtcclxuICAgICAgICAgICAgYXZlcmFnZTogbnVtYmVyO1xyXG4gICAgICAgICAgICBkaXN0cmlidXRpb246IHsgcmFuZ2U6IHN0cmluZzsgY291bnQ6IG51bWJlciB9W107XHJcbiAgICAgICAgfTtcclxuICAgIH0ge1xyXG4gICAgICAgIGNvbnN0IHN0YXRzID0ge1xyXG4gICAgICAgICAgICBvdmVydmlldzogeyB0b3RhbENhcmRzOiAwLCBuZXdDYXJkczogMCwgbGVhcm5pbmdDYXJkczogMCwgbWF0dXJlQ2FyZHM6IDAgfSxcclxuICAgICAgICAgICAgcmVwZXRpdGlvbnM6IHsgcmVwMDogMCwgcmVwMTogMCwgcmVwMjogMCwgcmVwM1BsdXM6IDAgfSxcclxuICAgICAgICAgICAgZUZhY3RvcnM6IHsgYXZlcmFnZTogMCwgZGlzdHJpYnV0aW9uOiBbXSBhcyB7IHJhbmdlOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfVtdIH0sXHJcbiAgICAgICAgICAgIGludGVydmFsczogeyBhdmVyYWdlOiAwLCBkaXN0cmlidXRpb246IFtdIGFzIHsgcmFuZ2U6IHN0cmluZzsgY291bnQ6IG51bWJlciB9W10gfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCB0b3RhbEVGYWN0b3IgPSAwO1xyXG4gICAgICAgIGxldCB0b3RhbEludGVydmFsID0gMDtcclxuICAgICAgICBsZXQgY2FyZHNXaXRoU2NoZWR1bGUgPSAwO1xyXG4gICAgICAgIGNvbnN0IGVGYWN0b3JCdWNrZXRzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcclxuICAgICAgICBjb25zdCBpbnRlcnZhbEJ1Y2tldHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG5cclxuICAgICAgICBhbGxDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xyXG4gICAgICAgICAgICBzdGF0cy5vdmVydmlldy50b3RhbENhcmRzKys7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWNhcmQuc2NoZWR1bGVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBzdGF0cy5vdmVydmlldy5uZXdDYXJkcysrO1xyXG4gICAgICAgICAgICAgICAgc3RhdHMucmVwZXRpdGlvbnMucmVwMCsrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FyZHNXaXRoU2NoZWR1bGUrKztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGV0aXRpb24gPSBjYXJkLnNjaGVkdWxlSW5mby5yZXBldGl0aW9uIHx8IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlRmFjdG9yID0gY2FyZC5zY2hlZHVsZUluZm8uZWFzZSAvIDEwMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gY2FyZC5zY2hlZHVsZUluZm8uaW50ZXJ2YWw7XHJcblxyXG4gICAgICAgICAgICAgICAgdG90YWxFRmFjdG9yICs9IGVGYWN0b3I7XHJcbiAgICAgICAgICAgICAgICB0b3RhbEludGVydmFsICs9IGludGVydmFsO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlcGV0aXRpb24gXHVCRDg0XHVEM0VDXHJcbiAgICAgICAgICAgICAgICBpZiAocmVwZXRpdGlvbiA9PT0gMSkgc3RhdHMucmVwZXRpdGlvbnMucmVwMSsrO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVwZXRpdGlvbiA9PT0gMikgc3RhdHMucmVwZXRpdGlvbnMucmVwMisrO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVwZXRpdGlvbiA+PSAzKSBzdGF0cy5yZXBldGl0aW9ucy5yZXAzUGx1cysrO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBzdGF0cy5yZXBldGl0aW9ucy5yZXAwKys7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTWF0dXJlL0xlYXJuaW5nIFx1QkQ4NFx1Qjk1OFxyXG4gICAgICAgICAgICAgICAgaWYgKGludGVydmFsID49IDIxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHMub3ZlcnZpZXcubWF0dXJlQ2FyZHMrKztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHMub3ZlcnZpZXcubGVhcm5pbmdDYXJkcysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEUtRmFjdG9yIFx1QkQ4NFx1RDNFQ1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZUZhY3RvclJhbmdlID0gdGhpcy5nZXRFRmFjdG9yUmFuZ2UoZUZhY3Rvcik7XHJcbiAgICAgICAgICAgICAgICBlRmFjdG9yQnVja2V0cy5zZXQoZUZhY3RvclJhbmdlLCAoZUZhY3RvckJ1Y2tldHMuZ2V0KGVGYWN0b3JSYW5nZSkgfHwgMCkgKyAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJbnRlcnZhbCBcdUJEODRcdUQzRUNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVydmFsUmFuZ2UgPSB0aGlzLmdldEludGVydmFsUmFuZ2UoaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWxCdWNrZXRzLnNldChpbnRlcnZhbFJhbmdlLCAoaW50ZXJ2YWxCdWNrZXRzLmdldChpbnRlcnZhbFJhbmdlKSB8fCAwKSArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1RDNDOVx1QURFMCBcdUFDQzRcdUMwQjBcclxuICAgICAgICBzdGF0cy5lRmFjdG9ycy5hdmVyYWdlID0gY2FyZHNXaXRoU2NoZWR1bGUgPiAwID8gTWF0aC5yb3VuZCgodG90YWxFRmFjdG9yIC8gY2FyZHNXaXRoU2NoZWR1bGUpICogMTAwKSAvIDEwMCA6IDA7XHJcbiAgICAgICAgc3RhdHMuaW50ZXJ2YWxzLmF2ZXJhZ2UgPSBjYXJkc1dpdGhTY2hlZHVsZSA+IDAgPyBNYXRoLnJvdW5kKHRvdGFsSW50ZXJ2YWwgLyBjYXJkc1dpdGhTY2hlZHVsZSkgOiAwO1xyXG5cclxuICAgICAgICAvLyBcdUJEODRcdUQzRUMgXHVCQzMwXHVDNUY0IFx1QzBERFx1QzEzMVxyXG4gICAgICAgIHN0YXRzLmVGYWN0b3JzLmRpc3RyaWJ1dGlvbiA9IEFycmF5LmZyb20oZUZhY3RvckJ1Y2tldHMuZW50cmllcygpKVxyXG4gICAgICAgICAgICAubWFwKChbcmFuZ2UsIGNvdW50XSkgPT4gKHsgcmFuZ2UsIGNvdW50IH0pKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gcGFyc2VGbG9hdChhLnJhbmdlLnNwbGl0KCctJylbMF0pIC0gcGFyc2VGbG9hdChiLnJhbmdlLnNwbGl0KCctJylbMF0pKTtcclxuXHJcbiAgICAgICAgc3RhdHMuaW50ZXJ2YWxzLmRpc3RyaWJ1dGlvbiA9IEFycmF5LmZyb20oaW50ZXJ2YWxCdWNrZXRzLmVudHJpZXMoKSlcclxuICAgICAgICAgICAgLm1hcCgoW3JhbmdlLCBjb3VudF0pID0+ICh7IHJhbmdlLCBjb3VudCB9KSlcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHRoaXMuY29tcGFyZUludGVydmFsUmFuZ2VzKGEucmFuZ2UsIGIucmFuZ2UpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHN0YXRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IEUtRmFjdG9yIHJhbmdlIGZvciBncm91cGluZ1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldEVGYWN0b3JSYW5nZShlRmFjdG9yOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChlRmFjdG9yIDwgMS41KSByZXR1cm4gJzEuMy0xLjUnO1xyXG4gICAgICAgIGlmIChlRmFjdG9yIDwgMi4wKSByZXR1cm4gJzEuNS0yLjAnO1xyXG4gICAgICAgIGlmIChlRmFjdG9yIDwgMi41KSByZXR1cm4gJzIuMC0yLjUnO1xyXG4gICAgICAgIGlmIChlRmFjdG9yIDwgMy4wKSByZXR1cm4gJzIuNS0zLjAnO1xyXG4gICAgICAgIGlmIChlRmFjdG9yIDwgMy41KSByZXR1cm4gJzMuMC0zLjUnO1xyXG4gICAgICAgIHJldHVybiAnMy41Kyc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgaW50ZXJ2YWwgcmFuZ2UgZm9yIGdyb3VwaW5nXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0SW50ZXJ2YWxSYW5nZShpbnRlcnZhbDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoaW50ZXJ2YWwgPT09IDEpIHJldHVybiAnMSBkYXknO1xyXG4gICAgICAgIGlmIChpbnRlcnZhbCA8PSA2KSByZXR1cm4gJzItNiBkYXlzJztcclxuICAgICAgICBpZiAoaW50ZXJ2YWwgPD0gMjApIHJldHVybiAnNy0yMCBkYXlzJztcclxuICAgICAgICBpZiAoaW50ZXJ2YWwgPD0gNjApIHJldHVybiAnMjEtNjAgZGF5cyc7XHJcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDE4MCkgcmV0dXJuICcyLTYgbW9udGhzJztcclxuICAgICAgICBpZiAoaW50ZXJ2YWwgPD0gMzY1KSByZXR1cm4gJzYtMTIgbW9udGhzJztcclxuICAgICAgICByZXR1cm4gJzErIHllYXJzJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXBhcmUgaW50ZXJ2YWwgcmFuZ2VzIGZvciBzb3J0aW5nXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29tcGFyZUludGVydmFsUmFuZ2VzKGE6IHN0cmluZywgYjogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBvcmRlciA9IFsnMSBkYXknLCAnMi02IGRheXMnLCAnNy0yMCBkYXlzJywgJzIxLTYwIGRheXMnLCAnMi02IG1vbnRocycsICc2LTEyIG1vbnRocycsICcxKyB5ZWFycyddO1xyXG4gICAgICAgIHJldHVybiBvcmRlci5pbmRleE9mKGEpIC0gb3JkZXIuaW5kZXhPZihiKTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQsIEJvb2sgfSBmcm9tICcuLi8uLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XHJcbmltcG9ydCB7IFdvcmRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBMTE1TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5TW9kYWwgfSBmcm9tICcuLi8uLi92b2NhYnVsYXJ5LWxlYXJuaW5nL3VpL1ZvY2FidWxhcnlNb2RhbCc7XHJcbmltcG9ydCB7IEFkZEJvb2tNb2RhbCB9IGZyb20gJy4vQWRkQm9va01vZGFsJztcclxuaW1wb3J0IHsgQWRkV29yZHNNb2RhbCB9IGZyb20gJy4uLy4uL3dvcmQtbWFuYWdlbWVudC91aS9BZGRXb3Jkc01vZGFsJztcclxuaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gJy4uLy4uLy4uL3V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5TWFuYWdlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIGRhdGFiYXNlTWFuYWdlcjogVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcjtcclxuICAgIHdvcmRTZXJ2aWNlOiBXb3JkU2VydmljZTtcclxuICAgIGxsbVNlcnZpY2U6IExMTVNlcnZpY2U7XHJcbiAgICBjdXJyZW50VmlldzogJ2xpc3QnIHwgJ3N0YXRpc3RpY3MnIHwgJ2FkZCcgPSAnbGlzdCc7XHJcbiAgICBzZWxlY3RlZFdvcmRzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcclxuICAgIHNlbGVjdGVkQm9va0lkOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZU1hbmFnZXIgPSBwbHVnaW4uZGF0YWJhc2VNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMud29yZFNlcnZpY2UgPSBuZXcgV29yZFNlcnZpY2UoKTtcclxuICAgICAgICB0aGlzLmxsbVNlcnZpY2UgPSBwbHVnaW4ubGxtU2VydmljZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0Q3VycmVudEJvb2soKT8uaWQgfHwgJ2RlZmF1bHQnO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFzVmFsaWRBcGlLZXkoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Qcm92aWRlcjtcclxuICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlBcGlLZXk7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXk7XHJcbiAgICAgICAgICAgIGNhc2UgJ2dvb2dsZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVBcGlLZXk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbWFuYWdlci1tb2RhbCcpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5jbGFzc0xpc3QuYWRkKCd3aWRlLW1hbmFnZXItbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1Q0Q1Q1x1QzJFMCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEN1cnJlbnRCb29rKCk/LmlkIHx8ICdkZWZhdWx0JztcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVCb29rU2VsZWN0b3JIZWFkZXIoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZU5hdmlnYXRpb24oKTtcclxuICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG5cclxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYm9va0NyZWF0ZWQnLCB0aGlzLmhhbmRsZUJvb2tDcmVhdGVkLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQm9va0NyZWF0ZWQoZXZlbnQ6IEN1c3RvbUV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbmV3Qm9vayA9IGV2ZW50LmRldGFpbDtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gbmV3Qm9vay5pZDtcclxuICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hCb29rU2VsZWN0b3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUJvb2tTZWxlY3RvckhlYWRlcigpIHtcclxuICAgICAgICBjb25zdCBoZWFkZXJFbCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21hbmFnZXItaGVhZGVyJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYm9va3MgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xyXG4gICAgICAgIGNvbnN0IGJvb2tTZWxlY3QgPSBoZWFkZXJFbC5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdib29rLXNlbGVjdC1kcm9wZG93bicgfSk7XHJcbiAgICAgICAgYm9va3MuZm9yRWFjaChib29rID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGJvb2suaWQ7XHJcbiAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gYm9vay5uYW1lO1xyXG4gICAgICAgICAgICBpZiAoYm9vay5pZCA9PT0gdGhpcy5zZWxlY3RlZEJvb2tJZCkgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgYm9va1NlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJvb2tTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNldEN1cnJlbnRCb29rKHRoaXMuc2VsZWN0ZWRCb29rSWQpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhZGRCb29rQnRuID0gaGVhZGVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzBDOCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDRDk0XHVBQzAwJywgY2xzOiAnYm9vay1tYW5hZ2UtYnV0dG9uJyB9KTtcclxuICAgICAgICBhZGRCb29rQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhZGRCb29rTW9kYWwgPSBuZXcgQWRkQm9va01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbik7XHJcbiAgICAgICAgICAgIGFkZEJvb2tNb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QzBERFx1QzEzMVx1QjQxOFx1QkE3NCBcdUI0RENcdUI4NkRcdUIyRTRcdUM2QjRcdUFDRkMgXHVDMTIwXHVEMEREXHVDNzQ0IFx1QzBDOFx1Qjg1Q1x1QUNFMFx1Q0U2OFxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQm9va1NlbGVjdG9yKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGFkZEJvb2tNb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlbEJvb2tCdG4gPSBoZWFkZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVENjA0XHVDN0FDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwQURcdUM4MUMnLCBjbHM6ICdib29rLWRlbGV0ZS1idXR0b24nIH0pO1xyXG4gICAgICAgIGNvbnN0IGlzRGVmYXVsdCA9IHRoaXMuc2VsZWN0ZWRCb29rSWQgPT09ICdkZWZhdWx0JztcclxuICAgICAgICBpZiAoaXNEZWZhdWx0KSB7XHJcbiAgICAgICAgICAgIGRlbEJvb2tCdG4uc2V0QXR0cignZGlzYWJsZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICBkZWxCb29rQnRuLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxCb29rQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNEZWZhdWx0KSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MTVcdUJDRjQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCb29rID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0Qm9vayh0aGlzLnNlbGVjdGVkQm9va0lkKTtcclxuICAgICAgICAgICAgaWYgKCFjdXJyZW50Qm9vaykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzU4IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVENjU1XHVDNzc4XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRzSW5Cb29rID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZHNCeUJvb2sodGhpcy5zZWxlY3RlZEJvb2tJZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRDb3VudCA9IHdvcmRzSW5Cb29rLmxlbmd0aDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QzBDMVx1QzEzOFx1RDU1QyBcdUQ2NTVcdUM3NzggXHVCQUE4XHVCMkVDIFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICAgICAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBBRFx1QzgxQyBcdUQ2NTVcdUM3NzgnLFxyXG4gICAgICAgICAgICAgICAgYFx1QzgxNVx1QjlEMFx1Qjg1QyBcIiR7Y3VycmVudEJvb2submFtZX1cIiBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVDMEFEXHVDODFDXHVENTU4XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDP1xcblxcbmAgK1xyXG4gICAgICAgICAgICAgICAgYFx1MjAyMiBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0OiAke2N1cnJlbnRCb29rLm5hbWV9XFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXHUyMDIyIFx1RDNFQ1x1RDU2OFx1QjQxQyBcdUIyRThcdUM1QjQgXHVDMjE4OiAke3dvcmRDb3VudH1cdUFDMUNcXG5gICtcclxuICAgICAgICAgICAgICAgIGBcdTIwMjIgXHVDMEREXHVDMTMxXHVDNzdDOiAke25ldyBEYXRlKGN1cnJlbnRCb29rLmNyZWF0ZWRBdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdrby1LUicpfVxcblxcbmAgK1xyXG4gICAgICAgICAgICAgICAgYFx1MjZBMFx1RkUwRiBcdUM3NzQgXHVDNzkxXHVDNUM1XHVDNzQwIFx1QjQxOFx1QjNDQ1x1QjlCNCBcdUMyMTggXHVDNUM2XHVDNzNDXHVCQTcwLCBcdUIyRThcdUM1QjRcdUM3QTVcdUFDRkMgXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM2MDFcdUFENkNcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEFEXHVDODFDXHVCNDI5XHVCMkM4XHVCMkU0LmAsXHJcbiAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuZGVsZXRlQm9vayh0aGlzLnNlbGVjdGVkQm9va0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9ICdkZWZhdWx0JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2V0Q3VycmVudEJvb2soJ2RlZmF1bHQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke2N1cnJlbnRCb29rLm5hbWV9XCIgXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwQURcdUM4MUNcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEFEXHVDODFDIFx1QzJFNFx1RDMyODogJyArIGUubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlTmF2aWdhdGlvbigpIHtcclxuICAgICAgICBjb25zdCBuYXZFbCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21hbmFnZXItbmF2aWdhdGlvbicgfSk7XHJcbiAgICAgICAgY29uc3QgbGlzdEJ0biA9IG5hdkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRThcdUM1QjQgXHVCQUE5XHVCODVEJywgY2xzOiAnbmF2LWJ1dHRvbicgfSk7XHJcbiAgICAgICAgbGlzdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9ICdsaXN0JztcclxuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzdGF0c0J0biA9IG5hdkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUQxQjVcdUFDQzQnLCBjbHM6ICduYXYtYnV0dG9uJyB9KTtcclxuICAgICAgICBzdGF0c0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9ICdzdGF0aXN0aWNzJztcclxuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBhZGRCdG4gPSBuYXZFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsIGNsczogJ25hdi1idXR0b24nIH0pO1xyXG4gICAgICAgIGFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICBuZXcgQWRkV29yZHNNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIHRoaXMuc2VsZWN0ZWRCb29rSWQpLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzdGFydExlYXJuaW5nQnV0dG9uID0gbmF2RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUM4MDRcdUNDQjQgXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjUgXHVDMkRDXHVDNzkxJyxcclxuICAgICAgICAgICAgY2xzOiAnbmF2LWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBzdGFydExlYXJuaW5nQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIG5ldyBWb2NhYnVsYXJ5TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKS5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q3VycmVudFZpZXcoKSB7XHJcbiAgICAgICAgY29uc3QgY29udGVudEVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLm1hbmFnZXItY29udGVudCcpIHx8IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbWFuYWdlci1jb250ZW50JyB9KTtcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFZpZXcpIHtcclxuICAgICAgICAgICAgY2FzZSAnbGlzdCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dXb3JkTGlzdChjb250ZW50RWwgYXMgSFRNTEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0YXRpc3RpY3MnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93U3RhdGlzdGljcyhjb250ZW50RWwgYXMgSFRNTEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FkZCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dBZGRXb3JkKGNvbnRlbnRFbCBhcyBIVE1MRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93V29yZExpc3QoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAod29yZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QkU0NFx1QzVCNFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU3NFx1QkNGNFx1QzEzOFx1QzY5NCEnLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnZW1wdHktbWVzc2FnZSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNlYXJjaEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NlYXJjaC1zZWN0aW9uJyB9KTtcclxuICAgICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNlYXJjaEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1x1QjJFOFx1QzVCNCBcdUFDODBcdUMwQzkuLi4nLFxyXG4gICAgICAgICAgICBjbHM6ICdzZWFyY2gtaW5wdXQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbkNvbnRyb2xzID0gc2VhcmNoRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VsZWN0aW9uLWNvbnRyb2xzJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBhbGxTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRXb3Jkcy5zaXplID09PSB3b3Jkcy5sZW5ndGggJiYgd29yZHMubGVuZ3RoID4gMDtcclxuICAgICAgICBjb25zdCBzZWxlY3RBbGxCdG4gPSBzZWxlY3Rpb25Db250cm9scy5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogYWxsU2VsZWN0ZWQgPyAnXHVDODA0XHVDQ0I0IFx1RDU3NFx1QzgxQycgOiAnXHVDODA0XHVDQ0I0IFx1QzEyMFx1RDBERCcsXHJcbiAgICAgICAgICAgIGNsczogJ3NlbGVjdGlvbi1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFdvcmRzLnNpemUgPT09IHdvcmRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgIHdvcmRzLmZvckVhY2god29yZCA9PiB0aGlzLnNlbGVjdGVkV29yZHMuYWRkKHdvcmQud29yZCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZldGNoU2VsZWN0ZWRCdXR0b24gPSBzZWxlY3Rpb25Db250cm9scy5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QzEyMFx1RDBERCBcdUIyRThcdUM1QjQgXHVCNzNCIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2ZldGNoLXNlbGVjdGVkLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBmZXRjaFNlbGVjdGVkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFdvcmRzLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0ZldGNoU2VsZWN0ZWRNZWFuaW5nc01vZGFsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmRMaXN0RWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1saXN0JyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByZW5kZXJXb3JkcyA9IChmaWx0ZXJlZFdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSA9PiB7XHJcbiAgICAgICAgICAgIHdvcmRMaXN0RWwuZW1wdHkoKTtcclxuICAgICAgICAgICAgZmlsdGVyZWRXb3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVXb3JkSXRlbSh3b3JkTGlzdEVsLCB3b3JkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBxdWVyeSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRXb3JkcyA9IHF1ZXJ5ID8gXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFiYXNlTWFuYWdlci5zZWFyY2hXb3JkcyhxdWVyeSkgOiB3b3JkcztcclxuICAgICAgICAgICAgcmVuZGVyV29yZHMoZmlsdGVyZWRXb3Jkcyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJlbmRlcldvcmRzKHdvcmRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVdvcmRJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHdvcmQ6IFZvY2FidWxhcnlDYXJkKSB7XHJcbiAgICAgICAgY29uc3Qgd29yZEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtaXRlbScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSB3b3JkRWwuY3JlYXRlRWwoJ2lucHV0Jywge1xyXG4gICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxyXG4gICAgICAgICAgICBjbHM6ICd3b3JkLWNoZWNrYm94J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkV29yZHMuaGFzKHdvcmQud29yZCk7XHJcbiAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXNDaGVja2VkID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIGlmIChpc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5hZGQod29yZC53b3JkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5kZWxldGUod29yZC53b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHdvcmRIZWFkZXIgPSB3b3JkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1oZWFkZXInIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHdvcmRUaXRsZUVsID0gd29yZEhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IGNsczogJ3dvcmQtdGl0bGUnIH0pO1xyXG4gICAgICAgIGlmICh3b3JkLnByb251bmNpYXRpb24gJiYgd29yZC5wcm9udW5jaWF0aW9uLnRyaW0oKSkge1xyXG4gICAgICAgICAgICB3b3JkVGl0bGVFbC50ZXh0Q29udGVudCA9IHdvcmQud29yZDtcclxuICAgICAgICAgICAgd29yZFRpdGxlRWwuYXBwZW5kVGV4dCgnICcpO1xyXG4gICAgICAgICAgICB3b3JkVGl0bGVFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgWyR7d29yZC5wcm9udW5jaWF0aW9ufV1gLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAncHJvbnVuY2lhdGlvbidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd29yZFRpdGxlRWwudGV4dENvbnRlbnQgPSB3b3JkLndvcmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdHlCYWRnZSA9IHdvcmRIZWFkZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiB0aGlzLmdldERpZmZpY3VsdHlUZXh0KHdvcmQuZGlmZmljdWx0eSksXHJcbiAgICAgICAgICAgIGNsczogYGRpZmZpY3VsdHktYmFkZ2UgJHt3b3JkLmRpZmZpY3VsdHl9YFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB3b3JkQ29udGVudCA9IHdvcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWNvbnRlbnQnIH0pO1xyXG4gICAgICAgIHdvcmRDb250ZW50LmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgdGV4dDogYFx1QjczQjogJHt3b3JkLm1lYW5pbmdzLmpvaW4oJywgJyl9YCxcclxuICAgICAgICAgICAgY2xzOiAnd29yZC1tZWFuaW5ncydcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICB3b3JkQ29udGVudC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IGBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4OiAke3dvcmQucmV2aWV3Q291bnR9XHVENjhDYCxcclxuICAgICAgICAgICAgY2xzOiAncmV2aWV3LWNvdW50J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAod29yZC5sYXN0UmV2aWV3ZWQpIHtcclxuICAgICAgICAgICAgd29yZENvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDRjVcdUMyQjU6ICR7Zm9ybWF0RGF0ZSh3b3JkLmxhc3RSZXZpZXdlZCl9YCxcclxuICAgICAgICAgICAgICAgIGNsczogJ2xhc3QtcmV2aWV3ZWQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgd29yZEFjdGlvbnMgPSB3b3JkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1hY3Rpb25zJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQWR2YW5jZWRGZWF0dXJlcykge1xyXG4gICAgICAgICAgICBjb25zdCBmZXRjaEJ1dHRvbiA9IHdvcmRBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwJyxcclxuICAgICAgICAgICAgICAgIGNsczogJ2FjdGlvbi1idXR0b24gZmV0Y2gtc2luZ2xlLWJ1dHRvbidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZldGNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mZXRjaFNpbmdsZVdvcmRNZWFuaW5nKHdvcmQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IHdvcmRBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDMEFEXHVDODFDJyxcclxuICAgICAgICAgICAgY2xzOiAnYWN0aW9uLWJ1dHRvbiBkZWxldGUtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAgICAgJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMnLFxyXG4gICAgICAgICAgICAgICAgYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0XHVCOTdDIFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz9gLFxyXG4gICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnJlbW92ZVdvcmQod29yZC53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1N0YXRpc3RpY3MoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0U3RhdGlzdGljcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHN0YXRzR3JpZCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0cy1ncmlkJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBiYXNpY1N0YXRzID0gc3RhdHNHcmlkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXRzLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIGJhc2ljU3RhdHMuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVBRTMwXHVCQ0Y4IFx1RDFCNVx1QUNDNCcsIGNsczogJ3N0YXRzLXRpdGxlJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGJhc2ljU3RhdHMsICdcdUNEMUQgXHVCMkU4XHVDNUI0IFx1QzIxOCcsIHN0YXRzLnRvdGFsV29yZHMudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShiYXNpY1N0YXRzLCAnXHVDRDFEIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTgnLCBzdGF0cy50b3RhbFJldmlld3MudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShiYXNpY1N0YXRzLCAnXHVDNUYwXHVDMThEIFx1RDU1OVx1QzJCNVx1Qzc3QycsIGAke3N0YXRzLnN0cmVha0RheXN9XHVDNzdDYCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShiYXNpY1N0YXRzLCAnXHVEM0M5XHVBREUwIFx1QjA5Q1x1Qzc3NFx1QjNDNCcsIHN0YXRzLmF2ZXJhZ2VEaWZmaWN1bHR5LnRvRml4ZWQoMSkpO1xyXG5cclxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5U3RhdHMgPSBzdGF0c0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3RhdHMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgZGlmZmljdWx0eVN0YXRzLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QjA5Q1x1Qzc3NFx1QjNDNFx1QkNDNCBcdUJEODRcdUQzRUMnLCBjbHM6ICdzdGF0cy10aXRsZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShkaWZmaWN1bHR5U3RhdHMsICdcdUMyNkNcdUM2QzAnLCBzdGF0cy53b3Jkc0J5RGlmZmljdWx0eS5lYXN5LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oZGlmZmljdWx0eVN0YXRzLCAnXHVDODhCXHVDNzRDJywgc3RhdHMud29yZHNCeURpZmZpY3VsdHkuZ29vZC50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGRpZmZpY3VsdHlTdGF0cywgJ1x1QzVCNFx1QjgyNFx1QzZDMCcsIHN0YXRzLndvcmRzQnlEaWZmaWN1bHR5LmhhcmQudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGl2aXR5U3RhdHMgPSBzdGF0c0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3RhdHMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgYWN0aXZpdHlTdGF0cy5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUNENUNcdUFERkMgN1x1Qzc3QyBcdUQ2NUNcdUIzRDknLCBjbHM6ICdzdGF0cy10aXRsZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3RhdHMucmVjZW50QWN0aXZpdHkuZm9yRWFjaChhY3Rpdml0eSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShhY3Rpdml0eS5kYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoJ2tvLUtSJywgeyBcclxuICAgICAgICAgICAgICAgIG1vbnRoOiAnc2hvcnQnLCBcclxuICAgICAgICAgICAgICAgIGRheTogJ251bWVyaWMnIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShhY3Rpdml0eVN0YXRzLCBkYXRlLCBcclxuICAgICAgICAgICAgICAgIGBcdUQ1NTlcdUMyQjU6ICR7YWN0aXZpdHkud29yZHNTdHVkaWVkfSwgXHVCQ0Y1XHVDMkI1OiAke2FjdGl2aXR5LnJldmlld3NDb21wbGV0ZWR9YCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVTdGF0SXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXQtaXRlbScgfSk7XHJcbiAgICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBsYWJlbCwgY2xzOiAnc3RhdC1sYWJlbCcgfSk7XHJcbiAgICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB2YWx1ZSwgY2xzOiAnc3RhdC12YWx1ZScgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93QWRkV29yZChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgYWRkU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdhZGQtd29yZC1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzBDOCBcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJywgY2xzOiAnc2VjdGlvbi10aXRsZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaW5wdXRFbCA9IGFkZFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1pbnB1dC1ncm91cCcgfSk7XHJcbiAgICAgICAgY29uc3Qgd29yZElucHV0ID0gaW5wdXRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdUM2MDFcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0IChcdUM2MDg6IGJlYXV0aWZ1bCknLFxyXG4gICAgICAgICAgICBjbHM6ICd3b3JkLWlucHV0J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSBpbnB1dEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2FkZC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZFdvcmQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmQgPSB3b3JkSW5wdXQudmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAoIXdvcmQpIHtcclxuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnZXJyb3ItbWVzc2FnZSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZERhdGEgPSBhd2FpdCB0aGlzLndvcmRTZXJ2aWNlLmdldFdvcmREYXRhKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgdm9jYWJ1bGFyeUNhcmQ6IFZvY2FidWxhcnlDYXJkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLndvcmREYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6ICdnb29kJyxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkZWREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYm9va0lkOiB0aGlzLnNlbGVjdGVkQm9va0lkXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuYWRkV29yZCh2b2NhYnVsYXJ5Q2FyZCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHdvcmRJbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYFwiJHt3b3JkfVwiIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDRDk0XHVBQzAwXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0IWAsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnc3VjY2Vzcy1tZXNzYWdlJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NNc2cgPSBhZGRTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zdWNjZXNzLW1lc3NhZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzc01zZykgc3VjY2Vzc01zZy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NThcdUIyOTQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdlcnJvci1tZXNzYWdlJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRXb3JkKTtcclxuICAgICAgICB3b3JkSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgICAgIGFkZFdvcmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGlmZmljdWx0eVRleHQoZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnKTogc3RyaW5nIHtcclxuICAgICAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcclxuICAgICAgICAgICAgY2FzZSAnZWFzeSc6IHJldHVybiAnXHVDMjZDXHVDNkMwJztcclxuICAgICAgICAgICAgY2FzZSAnZ29vZCc6IHJldHVybiAnXHVDODhCXHVDNzRDJztcclxuICAgICAgICAgICAgY2FzZSAnaGFyZCc6IHJldHVybiAnXHVDNUI0XHVCODI0XHVDNkMwJztcclxuICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuICdcdUM4OEJcdUM3NEMnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXJ0UmV2aWV3KHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSB7XHJcbiAgICAgICAgY29uc3QgcmV2aWV3TW9kYWwgPSBuZXcgVm9jYWJ1bGFyeVJldmlld01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgd29yZHMpO1xyXG4gICAgICAgIHJldmlld01vZGFsLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dGZXRjaFNlbGVjdGVkTWVhbmluZ3NNb2RhbCgpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZFdvcmRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkV29yZHMpO1xyXG4gICAgICAgIG5ldyBGZXRjaFNlbGVjdGVkTWVhbmluZ3NNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIHNlbGVjdGVkV29yZExpc3QpLm9wZW4oKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBmZXRjaFNpbmdsZVdvcmRNZWFuaW5nKHdvcmQ6IFZvY2FidWxhcnlDYXJkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc1ZhbGlkQXBpS2V5KCkpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnTExNIEFQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDMTI0XHVDODE1XHVDNUQwXHVDMTFDIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxyXG4gICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgJ1x1QjJFOFx1QzVCNCBcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwJyxcclxuICAgICAgICAgICAgYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0XHVDNzU4IFx1QjczQlx1Qzc0NCBcdUMwQzhcdUI4NUMgXHVBQzAwXHVDODM4XHVDNjI0XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDPyBcdUFFMzBcdUM4NzQgXHVDODE1XHVCQ0Y0XHVBQzAwXHVDNUI0XHVDNTBDXHVDNkNDXHVDOUQxXHVCMkM4XHVCMkU0LmAsXHJcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUM5MTEuLi5gKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsbG1SZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmxsbVNlcnZpY2UuZ2V0V29yZERldGFpbHMod29yZC53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGxtUmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGV0YWlsID0gbGxtUmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZERhdGEgPSB0aGlzLnBsdWdpbi5sbG1TZXJ2aWNlLmNvbnZlcnRUb1dvcmREYXRhKHdvcmREZXRhaWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFdvcmQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi53b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IHdvcmREYXRhLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IHdvcmREYXRhLmV4YW1wbGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiB3b3JkRGF0YS5zaW1pbGFyV29yZHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkRGF0YSh3b3JkLndvcmQsIHVwZGF0ZWRXb3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVBQzAwIFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQhYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAgXHVDMkU0XHVEMzI4OiAke2xsbVJlc3BvbnNlLmVycm9yfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkLndvcmR9XCIgXHVDQzk4XHVCOUFDIFx1QzJFNFx1RDMyODpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjQgXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcmVmcmVzaEJvb2tTZWxlY3RvcigpIHtcclxuICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQ0IFx1QjJFNFx1QzJEQyBcdUI4NUNcdUI0RENcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ1RTRcdUIzNTRcdUM3NTggXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyMFx1RDBERCBcdUI0RENcdUI4NkRcdUIyRTRcdUM2QjRcdUM3NDQgXHVDMEM4XHVCODVDXHVBQ0UwXHVDRTY4XHJcbiAgICAgICAgY29uc3QgaGVhZGVyRWwgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcubWFuYWdlci1oZWFkZXInKTtcclxuICAgICAgICBpZiAoaGVhZGVyRWwpIHtcclxuICAgICAgICAgICAgY29uc3QgYm9va1NlbGVjdCA9IGhlYWRlckVsLnF1ZXJ5U2VsZWN0b3IoJy5ib29rLXNlbGVjdC1kcm9wZG93bicpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAoYm9va1NlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gYm9va1NlbGVjdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJvb2tzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsQm9va3MoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1QzYzNVx1QzE1OFx1QjRFNCBcdUM4MUNcdUFDNzBcclxuICAgICAgICAgICAgICAgIGJvb2tTZWxlY3QuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVDMEM4XHVCODVDXHVDNkI0IFx1QzYzNVx1QzE1OFx1QjRFNCBcdUNEOTRcdUFDMDBcclxuICAgICAgICAgICAgICAgIGJvb2tzLmZvckVhY2goYm9vayA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gYm9vay5pZDtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24udGV4dCA9IGJvb2submFtZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYm9vay5pZCA9PT0gY3VycmVudFZhbHVlIHx8IGJvb2suaWQgPT09IHRoaXMuc2VsZWN0ZWRCb29rSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IGJvb2suaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUJERjAgXHVDMEM4XHVCODVDXHVBQ0UwXHVDRTY4XHJcbiAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYm9va0NyZWF0ZWQnLCB0aGlzLmhhbmRsZUJvb2tDcmVhdGVkLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuY2xhc3MgVm9jYWJ1bGFyeVJldmlld01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdO1xyXG4gICAgY3VycmVudEluZGV4ID0gMDtcclxuICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiwgd29yZHM6IFZvY2FidWxhcnlDYXJkW10pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMud29yZHMgPSB3b3JkcztcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud29yZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zaG93Q3VycmVudFdvcmQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dDdXJyZW50V29yZCgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbGVhcm5pbmctbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxyXG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZXZpZXctbW9kYWwtaGVpZ2h0JywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHR9dmhgKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudFdvcmQgPSB0aGlzLndvcmRzW3RoaXMuY3VycmVudEluZGV4XTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwcm9ncmVzc0VsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jldmlldy1wcm9ncmVzcycgfSk7XHJcbiAgICAgICAgcHJvZ3Jlc3NFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IGAke3RoaXMuY3VycmVudEluZGV4ICsgMX0gLyAke3RoaXMud29yZHMubGVuZ3RofWAsXHJcbiAgICAgICAgICAgIGNsczogJ3Byb2dyZXNzLXRleHQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhcmRFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXZpZXctY2FyZCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQyBcdUJDODRcdUQyQkMgKFx1QzYyNFx1Qjk3OFx1Q0FCRCBcdUMwQzFcdUIyRTgpXHJcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gY2FyZEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhcmQtZGVsZXRlLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZURlbGV0ZUNhcmQoKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgd29yZEVsID0gY2FyZEVsLmNyZWF0ZUVsKCdoMScsIHsgY2xzOiAncmV2aWV3LXdvcmQnIH0pO1xyXG4gICAgICAgIGlmIChjdXJyZW50V29yZC5wcm9udW5jaWF0aW9uICYmIGN1cnJlbnRXb3JkLnByb251bmNpYXRpb24udHJpbSgpKSB7XHJcbiAgICAgICAgICAgIHdvcmRFbC50ZXh0Q29udGVudCA9IGN1cnJlbnRXb3JkLndvcmQ7XHJcbiAgICAgICAgICAgIHdvcmRFbC5hcHBlbmRUZXh0KCcgJyk7XHJcbiAgICAgICAgICAgIHdvcmRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgWyR7Y3VycmVudFdvcmQucHJvbnVuY2lhdGlvbn1dYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Byb251bmNpYXRpb24nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdvcmRFbC50ZXh0Q29udGVudCA9IGN1cnJlbnRXb3JkLndvcmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc2hvd0Fuc3dlcikge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudFdvcmQuc2ltaWxhcldvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJFbCA9IGNhcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzaW1pbGFyLXdvcmRzJyB9KTtcclxuICAgICAgICAgICAgICAgIHNpbWlsYXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0XHVCNEU0OicgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaW1pbGFyTGlzdCA9IHNpbWlsYXJFbC5jcmVhdGVFbCgndWwnKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkLnNpbWlsYXJXb3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpbWlsYXJMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogd29yZCB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY3VycmVudFdvcmQuZXhhbXBsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhhbXBsZXNFbCA9IGNhcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlcycgfSk7XHJcbiAgICAgICAgICAgICAgICBleGFtcGxlc0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzYwOFx1QkIzOFx1QjRFNDonIH0pO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFdvcmQuZXhhbXBsZXMuZm9yRWFjaChleGFtcGxlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlc0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBleGFtcGxlLmVuZ2xpc2gsIGNsczogJ2V4YW1wbGUnIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrQnRuID0gY2FyZEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1QzgxNVx1QjJGNSBcdUQ2NTVcdUM3NzhcdUQ1NThcdUFFMzAnLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnY2hlY2stYW5zd2VyLWJ1dHRvbidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNoZWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRXb3JkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuc3dlckVsID0gY2FyZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Fuc3dlci1zZWN0aW9uJyB9KTtcclxuICAgICAgICAgICAgYW5zd2VyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVCNzNCOicgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lYW5pbmdzTGlzdCA9IGFuc3dlckVsLmNyZWF0ZUVsKCd1bCcpO1xyXG4gICAgICAgICAgICBjdXJyZW50V29yZC5tZWFuaW5ncy5mb3JFYWNoKG1lYW5pbmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3NMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogbWVhbmluZyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY3VycmVudFdvcmQuZXhhbXBsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYW5zd2VyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNjA4XHVCQjM4IFx1QkM4OFx1QzVFRDonIH0pO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFdvcmQuZXhhbXBsZXMuZm9yRWFjaChleGFtcGxlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhbnN3ZXJFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogZXhhbXBsZS5rb3JlYW4sIGNsczogJ3RyYW5zbGF0aW9uJyB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJldmlld0J1dHRvbnMoY2FyZEVsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVSZXZpZXdCdXR0b25zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCByZXZpZXdTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jldmlldy1idXR0b25zJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBoYXJkQnRuID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDNUI0XHVCODI0XHVDNkMwJywgY2xzOiAncmV2aWV3LWJ0biBoYXJkJyB9KTtcclxuICAgICAgICBjb25zdCBnb29kQnRuID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDODhCXHVDNzRDJywgY2xzOiAncmV2aWV3LWJ0biBnb29kJyB9KTtcclxuICAgICAgICBjb25zdCBlYXN5QnRuID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDMjZDXHVDNkMwJywgY2xzOiAncmV2aWV3LWJ0biBlYXN5JyB9KTtcclxuXHJcbiAgICAgICAgaGFyZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdoYXJkJykpO1xyXG4gICAgICAgIGdvb2RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnZ29vZCcpKTtcclxuICAgICAgICBlYXN5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2Vhc3knKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVSZXZpZXcoZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFdvcmQgPSB0aGlzLndvcmRzW3RoaXMuY3VycmVudEluZGV4XTtcclxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZChjdXJyZW50V29yZC53b3JkLCBkaWZmaWN1bHR5KTtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50SW5kZXgrKztcclxuICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ID49IHRoaXMud29yZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbXBsZXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50V29yZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFdvcmQgPSB0aGlzLndvcmRzW3RoaXMuY3VycmVudEluZGV4XTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxyXG4gICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMnLFxyXG4gICAgICAgICAgICBgXCIke2N1cnJlbnRXb3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0XHVCOTdDIFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz9cXG5cXG5cdUM3NzQgXHVDNzkxXHVDNUM1XHVDNzQwIFx1QjQxOFx1QjNDQ1x1QjlCNCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmAsXHJcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnJlbW92ZVdvcmQoY3VycmVudFdvcmQud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53b3Jkcy5zcGxpY2UodGhpcy5jdXJyZW50SW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb21wbGV0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ID49IHRoaXMud29yZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gdGhpcy53b3Jkcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50V29yZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDIFx1QzkxMSBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0NvbXBsZXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjb21wbGV0aW9uJyB9KTtcclxuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVCQ0Y1XHVDMkI1IFx1QzY0NFx1QjhDQyEnIH0pO1xyXG4gICAgICAgIGNvbXBsZXRpb25FbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjRcdUI5N0MgXHVCQ0Y1XHVDMkI1XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnLCBjbHM6ICdjbG9zZS1idG4nIH0pO1xyXG4gICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBGZXRjaFNlbGVjdGVkTWVhbmluZ3NNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XHJcbiAgICBzZWxlY3RlZFdvcmRzOiBzdHJpbmdbXTtcclxuICAgIGlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luLCBzZWxlY3RlZFdvcmRzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzID0gc2VsZWN0ZWRXb3JkcztcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdmZXRjaC1zZWxlY3RlZC1tZWFuaW5ncy1tb2RhbCcpO1xyXG5cclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyBcclxuICAgICAgICAgICAgdGV4dDogYFx1QzEyMFx1RDBERFx1QjQxQyAke3RoaXMuc2VsZWN0ZWRXb3Jkcy5sZW5ndGh9XHVBQzFDIFx1QjJFOFx1QzVCNCBcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwYCxcclxuICAgICAgICAgICAgY2xzOiAnbW9kYWwtdGl0bGUnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IGBcdUMxMjBcdUQwRERcdUI0MUMgXHVCMkU4XHVDNUI0XHVCNEU0XHVDNzU4IFx1QzBDMVx1QzEzOCBcdUM4MTVcdUJDRjRcdUI5N0MgTExNIEFQSVx1Qjk3QyBcdUQxQjVcdUQ1NzQgXHVBQzAwXHVDODM4XHVDNjM1XHVCMkM4XHVCMkU0LmAsXHJcbiAgICAgICAgICAgIGNsczogJ21vZGFsLWRlc2NyaXB0aW9uJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB3b3JkTGlzdEVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NlbGVjdGVkLXdvcmRzLWxpc3QnIH0pO1xyXG4gICAgICAgIHdvcmRMaXN0RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QjRFNDonIH0pO1xyXG4gICAgICAgIGNvbnN0IHdvcmRzQ29udGFpbmVyID0gd29yZExpc3RFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3Jkcy1jb250YWluZXInIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xyXG4gICAgICAgICAgICB3b3Jkc0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiB3b3JkLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnc2VsZWN0ZWQtd29yZC10YWcnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBmZXRjaEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwJyxcclxuICAgICAgICAgICAgY2xzOiAnZmV0Y2gtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZldGNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZldGNoU2VsZWN0ZWRNZWFuaW5ncygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDREU4XHVDMThDJyxcclxuICAgICAgICAgICAgY2xzOiAnY2FuY2VsLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLXNlY3Rpb24gZGlzcGxheS1ub25lJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtdGV4dCcgfSk7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBwcm9ncmVzc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtYmFyJyB9KTtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc0ZpbGwgPSBwcm9ncmVzc0Jhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1maWxsJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtc2VjdGlvbiBkaXNwbGF5LW5vbmUnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZmV0Y2hTZWxlY3RlZE1lYW5pbmdzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZykgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNob3dQcm9ncmVzcyh0aGlzLnNlbGVjdGVkV29yZHMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4ubGxtU2VydmljZS5nZXRNdWx0aXBsZVdvcmREZXRhaWxzKHRoaXMuc2VsZWN0ZWRXb3Jkcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgQXJyYXkuaXNBcnJheShyZXN1bHQuZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NXb3Jkczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZhaWxlZFdvcmRzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgd29yZERhdGEgb2YgcmVzdWx0LmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZERhdGEud29yZCAmJiB3b3JkRGF0YS5tZWFuaW5ncyAmJiB3b3JkRGF0YS5tZWFuaW5ncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1dvcmQgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZCh3b3JkRGF0YS53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1dvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkV29yZDogVm9jYWJ1bGFyeUNhcmQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nV29yZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZERhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IHdvcmREYXRhLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZERhdGEuZXhhbXBsZXMgfHwgW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3Jkczogd29yZERhdGEuc2ltaWxhcldvcmRzIHx8IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZERhdGEod29yZERhdGEud29yZCwgdXBkYXRlZFdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NXb3Jkcy5wdXNoKHdvcmREYXRhLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkV29yZHMucHVzaCh3b3JkRGF0YS53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZERhdGEud29yZH1cIiBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggXHVDMkU0XHVEMzI4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkV29yZHMucHVzaCh3b3JkRGF0YS53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdHMoeyBzdWNjZXNzOiBzdWNjZXNzV29yZHMsIGZhaWxlZDogZmFpbGVkV29yZHMgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzV29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYCR7c3VjY2Vzc1dvcmRzLmxlbmd0aH1cdUFDMUNcdUM3NTggXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0IWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0XHVCMzcwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNDogJyArIChyZXN1bHQuZXJyb3IgfHwgJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OCcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0XHVCMzcwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNDogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1Byb2dyZXNzKHRvdGFsV29yZHM6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnJlbW92ZUNsYXNzKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24uYWRkQ2xhc3MoJ2Rpc3BsYXktYmxvY2snKTtcclxuICAgICAgICBwcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSBgXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTQgXHVDOTExLi4uICgwLyR7dG90YWxXb3Jkc30pYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhpZGVQcm9ncmVzcygpIHtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmIChwcm9ncmVzc1NlY3Rpb24pIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnJlbW92ZUNsYXNzKCdkaXNwbGF5LWJsb2NrJyk7XHJcbiAgICAgICAgICAgIHByb2dyZXNzU2VjdGlvbi5hZGRDbGFzcygnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1Jlc3VsdHMocmVzdWx0czogeyBzdWNjZXNzOiBzdHJpbmdbXTsgZmFpbGVkOiBzdHJpbmdbXSB9KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHJlc3VsdFNlY3Rpb24ucmVtb3ZlQ2xhc3MoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIHJlc3VsdFNlY3Rpb24uYWRkQ2xhc3MoJ2Rpc3BsYXktYmxvY2snKTtcclxuICAgICAgICByZXN1bHRTZWN0aW9uLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHN1bW1hcnlFbCA9IHJlc3VsdFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0cy1zdW1tYXJ5JyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAocmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc0VsID0gc3VtbWFyeUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1pdGVtIHN1Y2Nlc3MnIH0pO1xyXG4gICAgICAgICAgICBzdWNjZXNzRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1MjcwNSBcdUMxMzFcdUFDRjU6ICR7cmVzdWx0cy5zdWNjZXNzLmxlbmd0aH1cdUFDMUNgLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LWNvdW50J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPD0gMTApIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5zdWNjZXNzLmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZXN1bHRzLmZhaWxlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhaWxlZEVsID0gc3VtbWFyeUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1pdGVtIGVycm9yJyB9KTtcclxuICAgICAgICAgICAgZmFpbGVkRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1Mjc0QyBcdUMyRTRcdUQzMjg6ICR7cmVzdWx0cy5mYWlsZWQubGVuZ3RofVx1QUMxQ2AsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5mYWlsZWQubGVuZ3RoIDw9IDEwKSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsZWRFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5mYWlsZWQuam9pbignLCAnKSxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtd29yZHMnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IHJlc3VsdFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWJ1dHRvbnMnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkVCXHVBRTMwJywgY2xzOiAnY2xvc2UtYnV0dG9uJyB9KTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUFDMDRcdUIyRThcdUQ1NUMgXHVENjU1XHVDNzc4IFx1QkFBOFx1QjJFQyBcdUQwNzRcdUI3OThcdUMyQTRcclxuY2xhc3MgQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgdGl0bGU6IHN0cmluZztcclxuICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgIG9uQ29uZmlybTogKCkgPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGl0bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBvbkNvbmZpcm06ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIHRoaXMub25Db25maXJtID0gb25Db25maXJtO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2NvbmZpcm0tbW9kYWwnKTtcclxuXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy50aXRsZSwgY2xzOiAnbW9kYWwtdGl0bGUnIH0pO1xyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlLCBjbHM6ICdtb2RhbC1tZXNzYWdlJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUQ2NTVcdUM3NzgnLFxyXG4gICAgICAgICAgICBjbHM6ICdjb25maXJtLWJ1dHRvbiBwcmltYXJ5J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25Db25maXJtKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBXb3JkRGF0YSB9IGZyb20gJy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcclxuXHJcbmV4cG9ydCBjbGFzcyBXb3JkU2VydmljZSB7XHJcbiAgICBwcml2YXRlIGFwaUJhc2VVcmwgPSAnaHR0cHM6Ly9hcGkuZGljdGlvbmFyeWFwaS5kZXYvYXBpL3YyL2VudHJpZXMvZW4nO1xyXG5cclxuICAgIGFzeW5jIGdldFdvcmREYXRhKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8V29yZERhdGE+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdUMyRTRcdUM4MUMgQVBJIFx1RDYzOFx1Q0Q5QyBcdUIzMDBcdUMyRTAgXHVDMEQ4XHVENTBDIFx1QjM3MFx1Qzc3NFx1RDEzMFx1Qjk3QyBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgLy8gXHVDMkU0XHVDODFDIFx1QUQ2Q1x1RDYwNFx1QzVEMFx1QzExQ1x1QjI5NCBEaWN0aW9uYXJ5IEFQSVx1QjA5OCBcdUIyRTRcdUI5NzggQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUMyMTggXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNhbXBsZVdvcmREYXRhKHdvcmQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjJDIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0U2FtcGxlV29yZERhdGEod29yZDogc3RyaW5nKTogV29yZERhdGEge1xyXG4gICAgICAgIC8vIFx1QzBEOFx1RDUwQyBcdUIzNzBcdUM3NzRcdUQxMzAgLSBcdUMyRTRcdUM4MUNcdUI4NUNcdUIyOTQgQVBJXHVDNUQwXHVDMTFDIFx1QUMwMFx1QzgzOFx1QzY0MFx1QzU3QyBcdUQ1NjhcclxuICAgICAgICBjb25zdCBzYW1wbGVEYXRhOiB7IFtrZXk6IHN0cmluZ106IFdvcmREYXRhIH0gPSB7XHJcbiAgICAgICAgICAgICdiZWF1dGlmdWwnOiB7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiAnYmVhdXRpZnVsJyxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcvXHUwMkM4Ymp1XHUwMkQwdFx1MDI2QWZcdTAyNTlsLycsXHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUM1NDRcdUI5ODRcdUIyRTRcdUM2QjQnLCAnXHVDNjA4XHVDMDVDJywgJ1x1RDZDQ1x1Qjk2RFx1RDU1QyddLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbJ3ByZXR0eScsICdnb3JnZW91cycsICdzdHVubmluZycsICdhdHRyYWN0aXZlJ10sXHJcbiAgICAgICAgICAgICAgICBleGFtcGxlczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1NoZSBpcyBhIGJlYXV0aWZ1bCB3b21hbi4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUFERjhcdUIxNDBcdUIyOTQgXHVDNTQ0XHVCOTg0XHVCMkU0XHVDNkI0IFx1QzVFQ1x1QzEzMVx1Qzc4NVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdUaGUgc3Vuc2V0IHdhcyBiZWF1dGlmdWwuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDNzdDXHVCQUIwXHVDNzc0IFx1QzU0NFx1Qjk4NFx1QjJFNFx1QzZFMFx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdXaGF0IGEgYmVhdXRpZnVsIGRheSEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM4MTVcdUI5RDAgXHVDNTQ0XHVCOTg0XHVCMkU0XHVDNkI0IFx1RDU1OFx1QjhFOFx1QjEyNFx1QzY5NCEnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnaGFwcHknOiB7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiAnaGFwcHknLFxyXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJy9cdTAyQzhoXHUwMEU2cGkvJyxcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1RDU4OVx1QkNGNVx1RDU1QycsICdcdUFFMzBcdUMwNUMnLCAnXHVDOTkwXHVBQzcwXHVDNkI0J10sXHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFsnam95ZnVsJywgJ2NoZWVyZnVsJywgJ2dsYWQnLCAncGxlYXNlZCddLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdJIGFtIGhhcHB5IHRvIHNlZSB5b3UuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVCMkY5XHVDMkUwXHVDNzQ0IFx1QjlDQ1x1QjA5OFx1QzExQyBcdUFFMzBcdUMwNjlcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnU2hlIGhhcyBhIGhhcHB5IGZhbWlseS4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUFERjhcdUIxNDBcdUIyOTQgXHVENTg5XHVCQ0Y1XHVENTVDIFx1QUMwMFx1Qzg3MVx1Qzc0NCBcdUFDMDBcdUM5QzBcdUFDRTAgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ0hhcHB5IGJpcnRoZGF5IScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QzBERFx1Qzc3QyBcdUNEOTVcdUQ1NThcdUQ1NjlcdUIyQzhcdUIyRTQhJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2xlYXJuJzoge1xyXG4gICAgICAgICAgICAgICAgd29yZDogJ2xlYXJuJyxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcvbFx1MDI1Q1x1MDJEMHJuLycsXHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUJDMzBcdUM2QjBcdUIyRTQnLCAnXHVENTU5XHVDMkI1XHVENTU4XHVCMkU0JywgJ1x1Qzc3NVx1RDc4OFx1QjJFNCddLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbJ3N0dWR5JywgJ2FjcXVpcmUnLCAnZ3Jhc3AnLCAndW5kZXJzdGFuZCddLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdJIHdhbnQgdG8gbGVhcm4gRW5nbGlzaC4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM4MDBcdUIyOTQgXHVDNjAxXHVDNUI0XHVCOTdDIFx1QkMzMFx1QzZCMFx1QUNFMCBcdUMyRjZcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnQ2hpbGRyZW4gbGVhcm4gcXVpY2tseS4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM1NDRcdUM3NzRcdUI0RTRcdUM3NDAgXHVCRTY4XHVCOUFDIFx1QkMzMFx1QzZDMVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdZb3UgY2FuIGxlYXJuIGZyb20geW91ciBtaXN0YWtlcy4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUMyRTRcdUMyMThcdUI4NUNcdUJEODBcdUQxMzAgXHVCQzMwXHVDNkI4IFx1QzIxOCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFx1Qzc4NVx1QjgyNVx1QjQxQyBcdUIyRThcdUM1QjRcdUFDMDAgXHVDMEQ4XHVENTBDIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QzVEMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVCQzE4XHVENjU4LCBcdUM1QzZcdUM3M0NcdUJBNzQgXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMwRERcdUMxMzFcclxuICAgICAgICBpZiAoc2FtcGxlRGF0YVt3b3JkLnRvTG93ZXJDYXNlKCldKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzYW1wbGVEYXRhW3dvcmQudG9Mb3dlckNhc2UoKV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUFFMzBcdUJDRjggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QkMxOFx1RDY1OFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdvcmQ6IHdvcmQsXHJcbiAgICAgICAgICAgIHByb251bmNpYXRpb246ICcvcHJvbnVuY2lhdGlvbi8nLFxyXG4gICAgICAgICAgICBtZWFuaW5nczogWydcdUM3NThcdUJCRjhcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJ10sXHJcbiAgICAgICAgICAgIHNpbWlsYXJXb3JkczogW10sXHJcbiAgICAgICAgICAgIGV4YW1wbGVzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogYFRoaXMgaXMgYW4gZXhhbXBsZSBzZW50ZW5jZSB3aXRoIHRoZSB3b3JkIFwiJHt3b3JkfVwiLmAsXHJcbiAgICAgICAgICAgICAgICAgICAga29yZWFuOiBgXCIke3dvcmR9XCJcdUI3N0NcdUIyOTQgXHVCMkU4XHVDNUI0XHVBQzAwIFx1RDNFQ1x1RDU2OFx1QjQxQyBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuYFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUMyRTRcdUM4MUMgQVBJIFx1RDYzOFx1Q0Q5Q1x1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVCQTU0XHVDMTFDXHVCNERDIChcdUQ1QTVcdUQ2QzQgXHVBRDZDXHVENjA0KVxyXG4gICAgcHJpdmF0ZSBhc3luYyBmZXRjaEZyb21BUEkod29yZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYXBpQmFzZVVybH0vJHt3b3JkfWApO1xyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgXHVDNjk0XHVDQ0FEIFx1QzJFNFx1RDMyODogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFkZEJvb2tNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2FkZC1ib29rLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QzgxQ1x1QkFBOVxyXG4gICAgICAgIGNvbnN0IHRpdGxlRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Q0Q5NFx1QUMwMCcsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUMxMjRcdUJBODVcclxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbkVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QzBDOFx1Qjg1Q1x1QzZCNCBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVDMEREXHVDMTMxXHVENTY5XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgIGNsczogJ21vZGFsLWRlc2NyaXB0aW9uJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUM3ODVcdUI4MjUgXHVEM0ZDXHJcbiAgICAgICAgY29uc3QgZm9ybUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdmb3JtJywgeyBjbHM6ICdib29rLWZvcm0nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODQgXHVDNzg1XHVCODI1XHJcbiAgICAgICAgY29uc3QgbmFtZVNlY3Rpb24gPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm9ybS1zZWN0aW9uJyB9KTtcclxuICAgICAgICBjb25zdCBuYW1lTGFiZWwgPSBuYW1lU2VjdGlvbi5jcmVhdGVFbCgnbGFiZWwnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NCAqJyxcclxuICAgICAgICAgICAgY2xzOiAnZm9ybS1sYWJlbCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBuYW1lSW5wdXQgPSBuYW1lU2VjdGlvbi5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdUM2MDg6IFRPRUlDIFx1QjJFOFx1QzVCNFx1QzdBNSwgXHVDNzdDXHVDMEMxXHVDMEREXHVENjVDIFx1QjJFOFx1QzVCNFx1QzdBNScsXHJcbiAgICAgICAgICAgIGNsczogJ2Zvcm0taW5wdXQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbmFtZUlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyNFx1QkE4NSBcdUM3ODVcdUI4MjVcclxuICAgICAgICBjb25zdCBkZXNjU2VjdGlvbiA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JtLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIGNvbnN0IGRlc2NMYWJlbCA9IGRlc2NTZWN0aW9uLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUMxMjRcdUJBODUgKFx1QzEyMFx1RDBERFx1QzBBQ1x1RDU2RCknLFxyXG4gICAgICAgICAgICBjbHM6ICdmb3JtLWxhYmVsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGRlc2NJbnB1dCA9IGRlc2NTZWN0aW9uLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdUIyRThcdUM1QjRcdUM3QTVcdUM1RDAgXHVCMzAwXHVENTVDIFx1QzEyNFx1QkE4NVx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuJyxcclxuICAgICAgICAgICAgY2xzOiAnZm9ybS10ZXh0YXJlYSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZXNjSW5wdXQucm93cyA9IDM7XHJcblxyXG4gICAgICAgIC8vIFx1QkM4NFx1RDJCQyBcdUM2MDFcdUM1RURcclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjcmVhdGVCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMScsXHJcbiAgICAgICAgICAgIGNsczogJ2NyZWF0ZS1idXR0b24gcHJpbWFyeScsXHJcbiAgICAgICAgICAgIHR5cGU6ICdzdWJtaXQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJyxcclxuICAgICAgICAgICAgdHlwZTogJ2J1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG5cclxuICAgICAgICAvLyBcdUQzRkMgXHVDODFDXHVDRDlDIFx1Qzc3NFx1QkNBNFx1RDJCOFxyXG4gICAgICAgIGZvcm1FbC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhc3luYyAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQm9vayhuYW1lSW5wdXQudmFsdWUudHJpbSgpLCBkZXNjSW5wdXQudmFsdWUudHJpbSgpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gRW50ZXIgXHVEMEE0XHVCODVDIFx1QzgxQ1x1Q0Q5QyBcdUFDMDBcdUIyQTVcdUQ1NThcdUIzQzRcdUI4NURcclxuICAgICAgICBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgZm9ybUVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdzdWJtaXQnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVEM0VDXHVDRUU0XHVDMkE0IFx1QzEyNFx1QzgxNVxyXG4gICAgICAgIG5hbWVJbnB1dC5mb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlQm9vayhuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIW5hbWUudHJpbSgpKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODRcdUM3NDQgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVCMkU4XHVDNUI0XHVDN0E1XHVBQ0ZDIFx1Qzc3NFx1Qjk4NCBcdUM5MTFcdUJDRjUgXHVENjU1XHVDNzc4XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQm9va3MgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsQm9va3MoKTtcclxuICAgICAgICAgICAgY29uc3QgaXNEdXBsaWNhdGUgPSBleGlzdGluZ0Jvb2tzLnNvbWUoYm9vayA9PiBcclxuICAgICAgICAgICAgICAgIGJvb2submFtZSAmJiB0eXBlb2YgYm9vay5uYW1lID09PSAnc3RyaW5nJyAmJiBcclxuICAgICAgICAgICAgICAgIGJvb2submFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc0R1cGxpY2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzg1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0Jvb2sgPSBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuY3JlYXRlQm9vayhuYW1lLCBkZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7bmFtZX1cIiBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NzQgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzBERFx1QzEzMVx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QkFBOFx1QjJFQyBcdUIyRUJcdUFFMzBcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCQUE4XHVCNEUwIFx1QkFBOFx1QjJFQ1x1QzVEMFx1QzExQyBcdUMyMThcdUMyRTBcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QjNDNFx1Qjg1RCBcdUM3NzRcdUJDQTRcdUQyQjggXHVCQzFDXHVDMEREXHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdib29rQ3JlYXRlZCcsIHsgZGV0YWlsOiBuZXdCb29rIH0pO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZnJvbSAnLi4vLi4vLi4vbWFpbic7XHJcbmltcG9ydCB7IFdvcmRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBBZGRCb29rTW9kYWwgfSBmcm9tICcuLi8uLi9ib29rLW1hbmFnZW1lbnQvdWkvQWRkQm9va01vZGFsJztcclxuaW1wb3J0IHsgdmFsaWRhdGVXb3JkLCB2YWxpZGF0ZUJhdGNoLCBzYW5pdGl6ZU1hcmtkb3duIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL3ZhbGlkYXRpb24nO1xyXG5pbXBvcnQgeyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSwgQ2FuY2VsbGF0aW9uRXJyb3IsIHByb2Nlc3NCYXRjaFdpdGhDYW5jZWxsYXRpb24gfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvQ2FuY2VsbGF0aW9uVG9rZW4nO1xyXG5pbXBvcnQgeyBnZXRDb25maWdWYWx1ZSwgQ09ORklHX1BBVEhTIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL0NvbmZpZyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQWRkV29yZHNNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XHJcbiAgICB3b3JkU2VydmljZTogV29yZFNlcnZpY2U7XHJcbiAgICBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgYm9va1NlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGNhbmNlbGxhdGlvblRva2VuU291cmNlOiBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBzZWxlY3RlZEJvb2tJZDogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luLCBzZWxlY3RlZEJvb2tJZD86IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy53b3JkU2VydmljZSA9IG5ldyBXb3JkU2VydmljZSgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSBzZWxlY3RlZEJvb2tJZCB8fCAnZGVmYXVsdCc7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnYWRkLXdvcmRzLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUNENUNcdUMyRTAgXHVCMzcwXHVDNzc0XHVEMTMwIFx1Qjg1Q1x1QjREQ1xyXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyMFx1RDBERCBcdUI0RENcdUI4NkRcdUIyRTRcdUM2QjRcclxuICAgICAgICBjb25zdCBib29rU2VsZWN0U2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdib29rLXNlbGVjdC1zZWN0aW9uJyB9KTtcclxuICAgICAgICBjb25zdCBib29rTGFiZWwgPSBib29rU2VsZWN0U2VjdGlvbi5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTIwXHVEMEREJywgY2xzOiAnYm9vay1zZWxlY3QtbGFiZWwnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGJvb2tTZWxlY3RDb250YWluZXIgPSBib29rU2VsZWN0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdib29rLXNlbGVjdC1jb250YWluZXInIH0pO1xyXG4gICAgICAgIHRoaXMuYm9va1NlbGVjdCA9IGJvb2tTZWxlY3RDb250YWluZXIuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnYm9vay1zZWxlY3QtZHJvcGRvd24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUNEOTRcdUFDMDAgXHVCQzg0XHVEMkJDXHJcbiAgICAgICAgY29uc3QgYWRkQm9va0J1dHRvbiA9IGJvb2tTZWxlY3RDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUNEOTRcdUFDMDAnLFxyXG4gICAgICAgICAgICBjbHM6ICdhZGQtYm9vay1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYWRkQm9va0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMub3BlbkFkZEJvb2tNb2RhbCgpKTtcclxuICAgICAgICBcclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUJvb2tTZWxlY3QoKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmJvb2tTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRCb29rSWQgPSAoZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gc2VsZWN0ZWRCb29rSWQ7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5zZXRDdXJyZW50Qm9vayhzZWxlY3RlZEJvb2tJZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzEgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOFxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Jvb2tDcmVhdGVkJywgdGhpcy5oYW5kbGVCb29rQ3JlYXRlZC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gXHVDODFDXHVCQUE5XHJcbiAgICAgICAgY29uc3QgdGl0bGVFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJywgY2xzOiAnbW9kYWwtdGl0bGUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzEyNFx1QkE4NVxyXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDRDk0XHVBQzAwXHVENTYwIFx1QzYwMVx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIFx1QUMwMSBcdUIyRThcdUM1QjRcdUIyOTQgXHVDMEM4IFx1QzkwNFx1Qjg1QyBcdUFENkNcdUJEODRcdUI0MjlcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICAgICAgY2xzOiAnbW9kYWwtZGVzY3JpcHRpb24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1Qzc4NVx1QjgyNSBcdUM2MDFcdUM1RURcclxuICAgICAgICBjb25zdCBpbnB1dFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnaW5wdXQtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBpbnB1dFNlY3Rpb24uY3JlYXRlRWwoJ3RleHRhcmVhJywge1xyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ2JlYXV0aWZ1bFxcbmhhcHB5XFxubGVhcm5cXG5zdHVkeVxcbndvcmtcXG4uLi4nLFxyXG4gICAgICAgICAgICBjbHM6ICd3b3Jkcy10ZXh0YXJlYSdcclxuICAgICAgICB9KTtcclxuICAgICAgICB0ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ3Jvd3MnLCAnMTAnKTtcclxuXHJcbiAgICAgICAgLy8gXHVDNjA4XHVDMkRDIFx1QkM4NFx1RDJCQ1xyXG4gICAgICAgIGNvbnN0IGV4YW1wbGVCdG4gPSBpbnB1dFNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUM2MDhcdUMyREMgXHVCMkU4XHVDNUI0XHVCNEU0IFx1QkQ4OFx1QjdFQ1x1QzYyNFx1QUUzMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2V4YW1wbGUtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV4YW1wbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gJ2JlYXV0aWZ1bFxcbmhhcHB5XFxubGVhcm5cXG5zdHVkeVxcbndvcmtcXG5pbXBvcnRhbnRcXG5zdWNjZXNzXFxua25vd2xlZGdlXFxuZXhwZXJpZW5jZVxcbmZyZWVkb20nO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUJDODRcdUQyQkMgXHVDNjAxXHVDNUVEXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLFxyXG4gICAgICAgICAgICBjbHM6ICdhZGQtYnV0dG9uIHByaW1hcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5hZGRXb3Jkcyh0ZXh0YXJlYS52YWx1ZSwgdGhpcy5zZWxlY3RlZEJvb2tJZCkpO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDREU4XHVDMThDJyxcclxuICAgICAgICAgICAgY2xzOiAnY2FuY2VsLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxPcGVyYXRpb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUM5QzRcdUQ1ODkgXHVDMEMxXHVENjY5IFx1RDQ1Q1x1QzJEQyBcdUM2MDFcdUM1RURcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3Mtc2VjdGlvbiBkaXNwbGF5LW5vbmUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IHByb2dyZXNzU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTU4XHVCMjk0IFx1QzkxMS4uLicsXHJcbiAgICAgICAgICAgIGNsczogJ3Byb2dyZXNzLXRleHQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBwcm9ncmVzc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtYmFyJyB9KTtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc0ZpbGwgPSBwcm9ncmVzc0Jhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1maWxsJyB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVBQ0IwXHVBQ0ZDIFx1RDQ1Q1x1QzJEQyBcdUM2MDFcdUM1RURcclxuICAgICAgICBjb25zdCByZXN1bHRTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1zZWN0aW9uIGRpc3BsYXktbm9uZScgfSk7XHJcblxyXG4gICAgICAgIC8vIEVudGVyIFx1RDBBNFx1Qjg1QyBcdUNEOTRcdUFDMDAgXHVBQzAwXHVCMkE1XHVENTU4XHVCM0M0XHVCODVEXHJcbiAgICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmN0cmxLZXkgJiYgZS5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkV29yZHModGV4dGFyZWEudmFsdWUsIHRoaXMuc2VsZWN0ZWRCb29rSWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1RDNFQ1x1Q0VFNFx1QzJBNCBcdUMxMjRcdUM4MTVcclxuICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgYWRkV29yZHMoaW5wdXRUZXh0OiBzdHJpbmcsIGJvb2tJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5wYXJzZVdvcmRzKGlucHV0VGV4dCk7XHJcbiAgICAgICAgaWYgKHdvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUNEOTRcdUFDMDBcdUQ1NjAgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgPSBuZXcgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UoKTtcclxuICAgICAgICB0aGlzLnNob3dQcm9ncmVzcyh3b3Jkcy5sZW5ndGgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ2FuY2VsQnV0dG9uKHRydWUpO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHRzID0ge1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBbXSBhcyBzdHJpbmdbXSxcclxuICAgICAgICAgICAgZmFpbGVkOiBbXSBhcyBzdHJpbmdbXSxcclxuICAgICAgICAgICAgYWxyZWFkeUV4aXN0czogW10gYXMgc3RyaW5nW11cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzQmF0Y2hXaXRoQ2FuY2VsbGF0aW9uKFxyXG4gICAgICAgICAgICAgICAgd29yZHMsXHJcbiAgICAgICAgICAgICAgICBhc3luYyAod29yZDogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1dvcmQgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZCh3b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdXb3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuYWxyZWFkeUV4aXN0cy5wdXNoKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IGF3YWl0IHRoaXMud29yZFNlcnZpY2UuZ2V0V29yZERhdGEod29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXb3JkRGF0YVx1Qjk3QyBWb2NhYnVsYXJ5Q2FyZFx1Qjg1QyBcdUJDQzBcdUQ2NThcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgdm9jYWJ1bGFyeUNhcmQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi53b3JkRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eTogJ2dvb2QnIGFzIGNvbnN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFJldmlld2VkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29rSWQ6IGJvb2tJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwIFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuYWRkV29yZCh2b2NhYnVsYXJ5Q2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuc3VjY2Vzcy5wdXNoKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2god29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIiBcdUNEOTRcdUFDMDAgXHVDMkU0XHVEMzI4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhdGNoU2l6ZTogZ2V0Q29uZmlnVmFsdWU8bnVtYmVyPihDT05GSUdfUEFUSFMuQkFUQ0hfREVGQVVMVF9TSVpFKSxcclxuICAgICAgICAgICAgICAgICAgICBkZWxheTogZ2V0Q29uZmlnVmFsdWU8bnVtYmVyPihDT05GSUdfUEFUSFMuQkFUQ0hfREVMQVkpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGxhdGlvblRva2VuOiB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlLnRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IChjdXJyZW50LCB0b3RhbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzKGN1cnJlbnQsIHRvdGFsLCBgXHVDQzk4XHVCOUFDIFx1QzkxMS4uLiAoJHtjdXJyZW50fS8ke3RvdGFsfSlgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQ2FuY2VsbGF0aW9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc5MVx1QzVDNVx1Qzc3NCBcdUNERThcdUMxOENcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUJDMzBcdUNFNTggXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2U/LmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FuY2VsQnV0dG9uKGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5zaG93UmVzdWx0cyhyZXN1bHRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZVdvcmRzKGlucHV0VGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgICAgIC8vIFx1Qzc4NVx1QjgyNSBcdUQxNERcdUMyQTRcdUQyQjggXHVDODE1XHVDODFDXHJcbiAgICAgICAgY29uc3Qgc2FuaXRpemVkSW5wdXQgPSBzYW5pdGl6ZU1hcmtkb3duKGlucHV0VGV4dCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcmF3V29yZHMgPSBzYW5pdGl6ZWRJbnB1dFxyXG4gICAgICAgICAgICAuc3BsaXQoJ1xcbicpXHJcbiAgICAgICAgICAgIC5tYXAod29yZCA9PiB3b3JkLnRyaW0oKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCk7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUFDODBcdUM5OUQgXHVCQzBGIFx1QzgxNVx1QzgxQ1xyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZUJhdGNoKHJhd1dvcmRzLCAod29yZCkgPT4gdmFsaWRhdGVXb3JkKHdvcmQpKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUM3MjBcdUQ2QThcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzQwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVDMEFDXHVDNkE5XHVDNzkwXHVDNUQwXHVBQzhDIFx1QzU0Q1x1QjlCQ1xyXG4gICAgICAgIGlmICh2YWxpZGF0aW9uLmludmFsaWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbnZhbGlkV29yZHMgPSB2YWxpZGF0aW9uLmludmFsaWQuc2xpY2UoMCwgNSkubWFwKGl0ZW0gPT4gaXRlbS5pdGVtKS5qb2luKCcsICcpO1xyXG4gICAgICAgICAgICBjb25zdCBtb3JlQ291bnQgPSB2YWxpZGF0aW9uLmludmFsaWQubGVuZ3RoID4gNSA/IGAgXHVDNjc4ICR7dmFsaWRhdGlvbi5pbnZhbGlkLmxlbmd0aCAtIDV9XHVBQzFDYCA6ICcnO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdUM3MjBcdUQ2QThcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzQwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM4MUNcdUM2NzhcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQ6ICR7aW52YWxpZFdvcmRzfSR7bW9yZUNvdW50fWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDNzIwXHVENkE4XHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNFx1QjlDQyBcdUJDMThcdUQ2NTggKFx1QzkxMVx1QkNGNSBcdUM4MUNcdUFDNzApXHJcbiAgICAgICAgY29uc3QgdmFsaWRXb3JkcyA9IHZhbGlkYXRpb24udmFsaWRcclxuICAgICAgICAgICAgLm1hcCh3b3JkID0+IHZhbGlkYXRlV29yZCh3b3JkKS5zYW5pdGl6ZWQhKVxyXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gd29yZC50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKCh3b3JkLCBpbmRleCwgYXJyYXkpID0+IGFycmF5LmluZGV4T2Yod29yZCkgPT09IGluZGV4KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbGlkV29yZHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93UHJvZ3Jlc3ModG90YWxXb3JkczogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBcclxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24ucmVtb3ZlQ2xhc3MoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5hZGRDbGFzcygnZGlzcGxheS1ibG9jaycpO1xyXG4gICAgICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IGBcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTU4XHVCMjk0IFx1QzkxMS4uLiAoMC8ke3RvdGFsV29yZHN9KWA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVQcm9ncmVzcyhjdXJyZW50OiBudW1iZXIsIHRvdGFsOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1maWxsJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IChjdXJyZW50IC8gdG90YWwpICogMTAwO1xyXG4gICAgICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IGAke21lc3NhZ2V9ICgke2N1cnJlbnR9LyR7dG90YWx9KWA7XHJcbiAgICAgICAgcHJvZ3Jlc3NGaWxsLnN0eWxlLndpZHRoID0gYCR7cGVyY2VudGFnZX0lYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhpZGVQcm9ncmVzcygpIHtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5yZW1vdmVDbGFzcygnZGlzcGxheS1ibG9jaycpO1xyXG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5hZGRDbGFzcygnZGlzcGxheS1ub25lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93UmVzdWx0cyhyZXN1bHRzOiB7IHN1Y2Nlc3M6IHN0cmluZ1tdOyBmYWlsZWQ6IHN0cmluZ1tdOyBhbHJlYWR5RXhpc3RzOiBzdHJpbmdbXSB9KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHJlc3VsdFNlY3Rpb24ucmVtb3ZlQ2xhc3MoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIHJlc3VsdFNlY3Rpb24uYWRkQ2xhc3MoJ2Rpc3BsYXktYmxvY2snKTtcclxuICAgICAgICByZXN1bHRTZWN0aW9uLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvdGFsUHJvY2Vzc2VkID0gcmVzdWx0cy5zdWNjZXNzLmxlbmd0aCArIHJlc3VsdHMuZmFpbGVkLmxlbmd0aCArIHJlc3VsdHMuYWxyZWFkeUV4aXN0cy5sZW5ndGg7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVBQ0IwXHVBQ0ZDIFx1QzY5NFx1QzU3RFxyXG4gICAgICAgIGNvbnN0IHN1bW1hcnlFbCA9IHJlc3VsdFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0cy1zdW1tYXJ5JyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAocmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc0VsID0gc3VtbWFyeUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1pdGVtIHN1Y2Nlc3MnIH0pO1xyXG4gICAgICAgICAgICBzdWNjZXNzRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1MjcwNSBcdUMxMzFcdUFDRjU6ICR7cmVzdWx0cy5zdWNjZXNzLmxlbmd0aH1cdUFDMUNgLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LWNvdW50J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPD0gNSkge1xyXG4gICAgICAgICAgICAgICAgc3VjY2Vzc0VsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLnN1Y2Nlc3Muam9pbignLCAnKSxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtd29yZHMnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlc3VsdHMuYWxyZWFkeUV4aXN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0c0VsID0gc3VtbWFyeUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1pdGVtIHdhcm5pbmcnIH0pO1xyXG4gICAgICAgICAgICBleGlzdHNFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNkEwXHVGRTBGIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUM6ICR7cmVzdWx0cy5hbHJlYWR5RXhpc3RzLmxlbmd0aH1cdUFDMUNgLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LWNvdW50J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdHMuYWxyZWFkeUV4aXN0cy5sZW5ndGggPD0gNSkge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RzRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuYWxyZWFkeUV4aXN0cy5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVzdWx0cy5mYWlsZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBmYWlsZWRFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSBlcnJvcicgfSk7XHJcbiAgICAgICAgICAgIGZhaWxlZEVsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI3NEMgXHVDMkU0XHVEMzI4OiAke3Jlc3VsdHMuZmFpbGVkLmxlbmd0aH1cdUFDMUNgLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LWNvdW50J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdHMuZmFpbGVkLmxlbmd0aCA8PSA1KSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsZWRFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5mYWlsZWQuam9pbignLCAnKSxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtd29yZHMnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVCQzg0XHVEMkJDXHVCNEU0XHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IHJlc3VsdFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWJ1dHRvbnMnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFQlx1QUUzMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2Nsb3NlLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZE1vcmVCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMzU0IFx1Q0Q5NFx1QUMwMFx1RDU1OFx1QUUzMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2FkZC1tb3JlLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBhZGRNb3JlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByZXN1bHRTZWN0aW9uLnJlbW92ZUNsYXNzKCdkaXNwbGF5LWJsb2NrJyk7XHJcbiAgICAgICAgICAgIHJlc3VsdFNlY3Rpb24uYWRkQ2xhc3MoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy53b3Jkcy10ZXh0YXJlYScpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLmZvY3VzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QzEzMVx1QUNGNVx1RDU1QyBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNzg4XHVDNzNDXHVCQTc0IFx1QzU0Q1x1QjlCQ1xyXG4gICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGAke3Jlc3VsdHMuc3VjY2Vzcy5sZW5ndGh9XHVBQzFDXHVDNzU4IFx1QjJFOFx1QzVCNFx1QUMwMCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDRDk0XHVBQzAwXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0IWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNhbmNlbE9wZXJhdGlvbigpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3OTFcdUM1QzUgXHVDREU4XHVDMThDIFx1QzkxMS4uLicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNhbmNlbEJ1dHRvbihpc1Byb2Nlc3Npbmc6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWJ1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIGlmIChjYW5jZWxCdXR0b24pIHtcclxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gaXNQcm9jZXNzaW5nID8gJ1x1Qzc5MVx1QzVDNSBcdUNERThcdUMxOEMnIDogJ1x1Q0RFOFx1QzE4Qyc7XHJcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdkYW5nZXInLCBpc1Byb2Nlc3NpbmcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIC8vIFx1QzlDNFx1RDU4OSBcdUM5MTFcdUM3NzggXHVDNzkxXHVDNUM1IFx1Q0RFOFx1QzE4Q1xyXG4gICAgICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZyAmJiB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UuY2FuY2VsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZT8uZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgPSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYm9va0NyZWF0ZWQnLCB0aGlzLmhhbmRsZUJvb2tDcmVhdGVkLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb3BlbkFkZEJvb2tNb2RhbCgpIHtcclxuICAgICAgICBuZXcgQWRkQm9va01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQm9va0NyZWF0ZWQoZXZlbnQ6IEN1c3RvbUV2ZW50KSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVCb29rU2VsZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVCb29rU2VsZWN0KCkge1xyXG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUNENUNcdUMyRTAgXHVCMzcwXHVDNzc0XHVEMTMwIFx1Qjg1Q1x1QjREQ1xyXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBib29rcyA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xyXG4gICAgICAgIHRoaXMuYm9va1NlbGVjdC5lbXB0eSgpO1xyXG4gICAgICAgIGJvb2tzLmZvckVhY2goYm9vayA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBib29rLmlkO1xyXG4gICAgICAgICAgICBvcHRpb24udGV4dCA9IGJvb2submFtZTtcclxuICAgICAgICAgICAgaWYgKGJvb2suaWQgPT09IHRoaXMuc2VsZWN0ZWRCb29rSWQpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ib29rU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0gIiwgIi8vIFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OUQgXHVCQzBGIFx1QzgxNVx1QzgxQyBcdUM3MjBcdUQyRjhcdUI5QUNcdUQyRjBcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvblJlc3VsdCB7XHJcbiAgICBpc1ZhbGlkOiBib29sZWFuO1xyXG4gICAgZXJyb3I/OiBzdHJpbmc7XHJcbiAgICBzYW5pdGl6ZWQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVN0cmluZyhpbnB1dDogc3RyaW5nLCBvcHRpb25zOiB7XHJcbiAgICBtaW5MZW5ndGg/OiBudW1iZXI7XHJcbiAgICBtYXhMZW5ndGg/OiBudW1iZXI7XHJcbiAgICBhbGxvd0VtcHR5PzogYm9vbGVhbjtcclxuICAgIHBhdHRlcm4/OiBSZWdFeHA7XHJcbiAgICBmaWVsZE5hbWU/OiBzdHJpbmc7XHJcbn0gPSB7fSk6IFZhbGlkYXRpb25SZXN1bHQge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICAgIG1pbkxlbmd0aCA9IDAsXHJcbiAgICAgICAgbWF4TGVuZ3RoID0gMTAwMCxcclxuICAgICAgICBhbGxvd0VtcHR5ID0gZmFsc2UsXHJcbiAgICAgICAgcGF0dGVybixcclxuICAgICAgICBmaWVsZE5hbWUgPSAnXHVDNzg1XHVCODI1XHVBQzEyJ1xyXG4gICAgfSA9IG9wdGlvbnM7XHJcblxyXG4gICAgaWYgKCFpbnB1dCB8fCBpbnB1dC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgaWYgKGFsbG93RW1wdHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgc2FuaXRpemVkOiAnJyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NDAoXHVCMjk0KSBcdUQ1NDRcdUMyMTggXHVDNzg1XHVCODI1XHVBQzEyXHVDNzg1XHVCMkM4XHVCMkU0LmAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0cmltbWVkID0gaW5wdXQudHJpbSgpO1xyXG5cclxuICAgIGlmICh0cmltbWVkLmxlbmd0aCA8IG1pbkxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSwgXHJcbiAgICAgICAgICAgIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgXHVDRDVDXHVDMThDICR7bWluTGVuZ3RofVx1Qzc5MCBcdUM3NzRcdUMwQzFcdUM3NzRcdUM1QjRcdUM1N0MgXHVENTY5XHVCMkM4XHVCMkU0LmAgXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHJpbW1lZC5sZW5ndGggPiBtYXhMZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgICAgaXNWYWxpZDogZmFsc2UsIFxyXG4gICAgICAgICAgICBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpIFx1Q0Q1Q1x1QjMwMCAke21heExlbmd0aH1cdUM3OTAgXHVDNzc0XHVENTU4XHVDNUVDXHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5gIFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBhdHRlcm4gJiYgIXBhdHRlcm4udGVzdCh0cmltbWVkKSkge1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSwgXHJcbiAgICAgICAgICAgIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzU4IFx1RDYxNVx1QzJERFx1Qzc3NCBcdUM2MkNcdUJDMTRcdUI5NzRcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0LmAgXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBzYW5pdGl6ZWQ6IHRyaW1tZWQgfTtcclxufVxyXG5cclxuLy8gQVBJIFx1RDBBNCBcdUFDODBcdUM5OURcclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQXBpS2V5KGFwaUtleTogc3RyaW5nLCBwcm92aWRlcjogc3RyaW5nKTogVmFsaWRhdGlvblJlc3VsdCB7XHJcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGVTdHJpbmcoYXBpS2V5LCB7XHJcbiAgICAgICAgbWluTGVuZ3RoOiAxMCxcclxuICAgICAgICBtYXhMZW5ndGg6IDIwMCxcclxuICAgICAgICBmaWVsZE5hbWU6IGAke3Byb3ZpZGVyfSBBUEkgXHVEMEE0YFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcclxuICAgICAgICByZXR1cm4gdmFsaWRhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUFDMDEgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVCQ0M0IEFQSSBcdUQwQTQgXHVENjE1XHVDMkREIFx1QUM4MFx1Qzk5RFxyXG4gICAgY29uc3QgcGF0dGVybnMgPSB7XHJcbiAgICAgICAgb3BlbmFpOiAvXnNrLVthLXpBLVowLTldezQ4LH0kLyxcclxuICAgICAgICBhbnRocm9waWM6IC9ec2stYW50LVthLXpBLVowLTktX117OTUsfSQvLFxyXG4gICAgICAgIGdvb2dsZTogL15bYS16QS1aMC05Xy1dezM5fSQvXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHBhdHRlcm4gPSBwYXR0ZXJuc1twcm92aWRlci50b0xvd2VyQ2FzZSgpIGFzIGtleW9mIHR5cGVvZiBwYXR0ZXJuc107XHJcbiAgICBpZiAocGF0dGVybiAmJiAhcGF0dGVybi50ZXN0KHZhbGlkYXRpb24uc2FuaXRpemVkISkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcclxuICAgICAgICAgICAgZXJyb3I6IGAke3Byb3ZpZGVyfSBBUEkgXHVEMEE0IFx1RDYxNVx1QzJERFx1Qzc3NCBcdUM2MkNcdUJDMTRcdUI5NzRcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0LmBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWxpZGF0aW9uO1xyXG59XHJcblxyXG4vLyBcdUIyRThcdUM1QjQgXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RFxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVXb3JkKHdvcmQ6IHN0cmluZyk6IFZhbGlkYXRpb25SZXN1bHQge1xyXG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlU3RyaW5nKHdvcmQsIHtcclxuICAgICAgICBtaW5MZW5ndGg6IDEsXHJcbiAgICAgICAgbWF4TGVuZ3RoOiA1MCxcclxuICAgICAgICBwYXR0ZXJuOiAvXlthLXpBLVpcXHMnLV0rJC8sXHJcbiAgICAgICAgZmllbGROYW1lOiAnXHVCMkU4XHVDNUI0J1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcclxuICAgICAgICByZXR1cm4gdmFsaWRhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUNEOTRcdUFDMDAgXHVBQzgwXHVDOTlEOiBcdUQyQjlcdUMyMTggXHVCQjM4XHVDNzkwIFx1QzgxQ1x1RDU1Q1xyXG4gICAgY29uc3Qgc2FuaXRpemVkID0gdmFsaWRhdGlvbi5zYW5pdGl6ZWQhXHJcbiAgICAgICAgLnJlcGxhY2UoL1teXFx3XFxzJy1dL2csICcnKSAvLyBcdUQ1QzhcdUM2QTlcdUI0MThcdUM5QzAgXHVDNTRBXHVCMjk0IFx1RDJCOVx1QzIxOFx1QkIzOFx1Qzc5MCBcdUM4MUNcdUFDNzBcclxuICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpOyAvLyBcdUM1RjBcdUMxOERcdUI0MUMgXHVBQ0Y1XHVCQzMxXHVDNzQ0IFx1RDU1OFx1QjA5OFx1Qjg1Q1xyXG5cclxuICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIHNhbml0aXplZCB9O1xyXG59XHJcblxyXG4vLyBcdUI5QzhcdUQwNkNcdUIyRTRcdUM2QjQgXHVEMTREXHVDMkE0XHVEMkI4IFx1QzgxNVx1QzgxQ1xyXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKCF0ZXh0KSByZXR1cm4gJyc7XHJcblxyXG4gICAgcmV0dXJuIHRleHRcclxuICAgICAgICAucmVwbGFjZSgvPHNjcmlwdFtePl0qPltcXHNcXFNdKj88XFwvc2NyaXB0Pi9naSwgJycpIC8vIFx1QzJBNFx1RDA2Q1x1QjlCRFx1RDJCOCBcdUQwRENcdUFERjggXHVDODFDXHVBQzcwXHJcbiAgICAgICAgLnJlcGxhY2UoLzxpZnJhbWVbXj5dKj5bXFxzXFxTXSo/PFxcL2lmcmFtZT4vZ2ksICcnKSAvLyBpZnJhbWUgXHVEMERDXHVBREY4IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIC5yZXBsYWNlKC9qYXZhc2NyaXB0Oi9naSwgJycpIC8vIGphdmFzY3JpcHQ6IFx1RDUwNFx1Qjg1Q1x1RDFBMFx1Q0Y1QyBcdUM4MUNcdUFDNzBcclxuICAgICAgICAucmVwbGFjZSgvb25cXHcrXFxzKj0vZ2ksICcnKSAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVENTc4XHVCNEU0XHVCN0VDIFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIC50cmltKCk7XHJcbn1cclxuXHJcbi8vIFVSTCBcdUFDODBcdUM5OURcclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVXJsKHVybDogc3RyaW5nKTogVmFsaWRhdGlvblJlc3VsdCB7XHJcbiAgICBpZiAoIXVybCkge1xyXG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogJ1VSTFx1Qzc3NCBcdUQ1NDRcdUM2OTRcdUQ1NjlcdUIyQzhcdUIyRTQuJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTCh1cmwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEhUVFBTXHVCOUNDIFx1RDVDOFx1QzZBOVxyXG4gICAgICAgIGlmICh1cmxPYmoucHJvdG9jb2wgIT09ICdodHRwczonKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogJ0hUVFBTIFVSTFx1QjlDQyBcdUQ1QzhcdUM2QTlcdUI0MjlcdUIyQzhcdUIyRTQuJyB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVENUM4XHVDNkE5XHVCNDFDIFx1QjNDNFx1QkE1NFx1Qzc3OCBcdUQ2NTVcdUM3NzggKFx1RDU0NFx1QzY5NFx1QzJEQylcclxuICAgICAgICBjb25zdCBhbGxvd2VkRG9tYWlucyA9IFtcclxuICAgICAgICAgICAgJ2FwaS5vcGVuYWkuY29tJyxcclxuICAgICAgICAgICAgJ2FwaS5hbnRocm9waWMuY29tJyxcclxuICAgICAgICAgICAgJ2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbSdcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICAvLyBcdUIzQzRcdUJBNTRcdUM3NzggXHVBQzgwXHVDOTlEXHVDNzQwIFx1QzEyMFx1RDBERFx1QzgwMVx1QzczQ1x1Qjg1QyBcdUMyMThcdUQ1ODlcclxuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBzYW5pdGl6ZWQ6IHVybCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6ICdcdUM3MjBcdUQ2QThcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzQwIFVSTCBcdUQ2MTVcdUMyRERcdUM3ODVcdUIyQzhcdUIyRTQuJyB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUMyMkJcdUM3OTAgXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RFxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXIodmFsdWU6IGFueSwgb3B0aW9uczoge1xyXG4gICAgbWluPzogbnVtYmVyO1xyXG4gICAgbWF4PzogbnVtYmVyO1xyXG4gICAgaW50ZWdlcj86IGJvb2xlYW47XHJcbiAgICBmaWVsZE5hbWU/OiBzdHJpbmc7XHJcbn0gPSB7fSk6IFZhbGlkYXRpb25SZXN1bHQge1xyXG4gICAgY29uc3QgeyBtaW4sIG1heCwgaW50ZWdlciA9IGZhbHNlLCBmaWVsZE5hbWUgPSAnXHVDMjJCXHVDNzkwJyB9ID0gb3B0aW9ucztcclxuXHJcbiAgICBjb25zdCBudW0gPSBOdW1iZXIodmFsdWUpO1xyXG4gICAgXHJcbiAgICBpZiAoaXNOYU4obnVtKSkge1xyXG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpIFx1QzcyMFx1RDZBOFx1RDU1QyBcdUMyMkJcdUM3OTBcdUM1RUNcdUM1N0MgXHVENTY5XHVCMkM4XHVCMkU0LmAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaW50ZWdlciAmJiAhTnVtYmVyLmlzSW50ZWdlcihudW0pKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgXHVDODE1XHVDMjE4XHVDNUVDXHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5gIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG1pbiAhPT0gdW5kZWZpbmVkICYmIG51bSA8IG1pbikge1xyXG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpICR7bWlufSBcdUM3NzRcdUMwQzFcdUM3NzRcdUM1QjRcdUM1N0MgXHVENTY5XHVCMkM4XHVCMkU0LmAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobWF4ICE9PSB1bmRlZmluZWQgJiYgbnVtID4gbWF4KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgJHttYXh9IFx1Qzc3NFx1RDU1OFx1QzVFQ1x1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuYCB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIHNhbml0aXplZDogbnVtLnRvU3RyaW5nKCkgfTtcclxufVxyXG5cclxuLy8gXHVCQzMwXHVDRTU4IFx1QUM4MFx1Qzk5RCBcdUQ1NjhcdUMyMThcclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQmF0Y2g8VD4oXHJcbiAgICBpdGVtczogVFtdLFxyXG4gICAgdmFsaWRhdG9yOiAoaXRlbTogVCkgPT4gVmFsaWRhdGlvblJlc3VsdFxyXG4pOiB7IHZhbGlkOiBUW107IGludmFsaWQ6IEFycmF5PHsgaXRlbTogVDsgZXJyb3I6IHN0cmluZyB9PiB9IHtcclxuICAgIGNvbnN0IHZhbGlkOiBUW10gPSBbXTtcclxuICAgIGNvbnN0IGludmFsaWQ6IEFycmF5PHsgaXRlbTogVDsgZXJyb3I6IHN0cmluZyB9PiA9IFtdO1xyXG5cclxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvcihpdGVtKTtcclxuICAgICAgICBpZiAocmVzdWx0LmlzVmFsaWQpIHtcclxuICAgICAgICAgICAgdmFsaWQucHVzaChpdGVtKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnZhbGlkLnB1c2goeyBpdGVtLCBlcnJvcjogcmVzdWx0LmVycm9yIHx8ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTgnIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB2YWxpZCwgaW52YWxpZCB9O1xyXG59IiwgIi8vIFx1Qzc5MVx1QzVDNSBcdUNERThcdUMxOENcdUI5N0MgXHVDNzA0XHVENTVDIFx1RDFBMFx1RDA3MCBcdUMyRENcdUMyQTRcdUQxNUNcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FuY2VsbGF0aW9uVG9rZW4ge1xyXG4gICAgcmVhZG9ubHkgaXNDYW5jZWxsZWQ6IGJvb2xlYW47XHJcbiAgICB0aHJvd0lmQ2FuY2VsbGVkKCk6IHZvaWQ7XHJcbiAgICBvbkNhbmNlbGxlZChjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSB7XHJcbiAgICBwcml2YXRlIF9pc0NhbmNlbGxlZCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfY2FsbGJhY2tzOiAoKCkgPT4gdm9pZClbXSA9IFtdO1xyXG5cclxuICAgIGdldCB0b2tlbigpOiBDYW5jZWxsYXRpb25Ub2tlbiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ2V0IGlzQ2FuY2VsbGVkKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzQ2FuY2VsbGVkO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0aHJvd0lmQ2FuY2VsbGVkOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNDYW5jZWxsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoJ09wZXJhdGlvbiB3YXMgY2FuY2VsbGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ2FuY2VsbGVkOiAoY2FsbGJhY2s6ICgpID0+IHZvaWQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc0NhbmNlbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY2FuY2VsKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc0NhbmNlbGxlZCkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2lzQ2FuY2VsbGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9jYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gY2FuY2VsbGF0aW9uIGNhbGxiYWNrOicsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcy5sZW5ndGggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDYW5jZWxsYXRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdPcGVyYXRpb24gd2FzIGNhbmNlbGxlZCcpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAnQ2FuY2VsbGF0aW9uRXJyb3InO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUM3MjBcdUQyRjhcdUI5QUNcdUQyRjAgXHVENTY4XHVDMjE4XHVCNEU0XHJcbmV4cG9ydCBmdW5jdGlvbiBkZWxheShtczogbnVtYmVyLCBjYW5jZWxsYXRpb25Ub2tlbj86IENhbmNlbGxhdGlvblRva2VuKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGlmIChjYW5jZWxsYXRpb25Ub2tlbj8uaXNDYW5jZWxsZWQpIHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldyBDYW5jZWxsYXRpb25FcnJvcigpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9LCBtcyk7XHJcblxyXG4gICAgICAgIGNhbmNlbGxhdGlvblRva2VuPy5vbkNhbmNlbGxlZCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgICAgICByZWplY3QobmV3IENhbmNlbGxhdGlvbkVycm9yKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoQ2FuY2VsbGF0aW9uPFQ+KFxyXG4gICAgcHJvbWlzZTogUHJvbWlzZTxUPixcclxuICAgIGNhbmNlbGxhdGlvblRva2VuPzogQ2FuY2VsbGF0aW9uVG9rZW5cclxuKTogUHJvbWlzZTxUPiB7XHJcbiAgICBpZiAoIWNhbmNlbGxhdGlvblRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBpZiAoY2FuY2VsbGF0aW9uVG9rZW4uaXNDYW5jZWxsZWQpIHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldyBDYW5jZWxsYXRpb25FcnJvcigpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGlzUmVzb2x2ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHJvbWlzZS50aGVuKFxyXG4gICAgICAgICAgICAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghaXNSZXNvbHZlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghaXNSZXNvbHZlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbi5vbkNhbmNlbGxlZCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaXNSZXNvbHZlZCkge1xyXG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IENhbmNlbGxhdGlvbkVycm9yKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gXHVCQzMwXHVDRTU4IFx1Q0M5OFx1QjlBQ1x1QzZBOSBcdUNERThcdUMxOEMgXHVBQzAwXHVCMkE1XHVENTVDIFx1RDU2OFx1QzIxOFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0JhdGNoV2l0aENhbmNlbGxhdGlvbjxULCBSPihcclxuICAgIGl0ZW1zOiBUW10sXHJcbiAgICBwcm9jZXNzb3I6IChpdGVtOiBULCBpbmRleDogbnVtYmVyKSA9PiBQcm9taXNlPFI+LFxyXG4gICAgb3B0aW9uczoge1xyXG4gICAgICAgIGJhdGNoU2l6ZT86IG51bWJlcjtcclxuICAgICAgICBkZWxheT86IG51bWJlcjtcclxuICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbj86IENhbmNlbGxhdGlvblRva2VuO1xyXG4gICAgICAgIG9uUHJvZ3Jlc3M/OiAoY3VycmVudDogbnVtYmVyLCB0b3RhbDogbnVtYmVyKSA9PiB2b2lkO1xyXG4gICAgfSA9IHt9XHJcbik6IFByb21pc2U8UltdPiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgICAgYmF0Y2hTaXplID0gMTAsXHJcbiAgICAgICAgZGVsYXk6IGRlbGF5TXMgPSAxMDAsXHJcbiAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW4sXHJcbiAgICAgICAgb25Qcm9ncmVzc1xyXG4gICAgfSA9IG9wdGlvbnM7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0czogUltdID0gW107XHJcbiAgICBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xyXG4gICAgICAgIGNhbmNlbGxhdGlvblRva2VuPy50aHJvd0lmQ2FuY2VsbGVkKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYmF0Y2ggPSBpdGVtcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKTtcclxuICAgICAgICBjb25zdCBiYXRjaFByb21pc2VzID0gYmF0Y2gubWFwKChpdGVtLCBiYXRjaEluZGV4KSA9PlxyXG4gICAgICAgICAgICBwcm9jZXNzb3IoaXRlbSwgaSArIGJhdGNoSW5kZXgpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgYmF0Y2hSZXN1bHRzID0gYXdhaXQgd2l0aENhbmNlbGxhdGlvbihcclxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKGJhdGNoUHJvbWlzZXMpLFxyXG4gICAgICAgICAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKC4uLmJhdGNoUmVzdWx0cyk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdUM5QzRcdUQ1ODlcdUI5NjAgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3M/LihNYXRoLm1pbihpICsgYmF0Y2hTaXplLCBpdGVtcy5sZW5ndGgpLCBpdGVtcy5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1QkMzMFx1Q0U1OCBcdUM4MDQgXHVCMzAwXHVBRTMwIChcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQzMwXHVDRTU4XHVBQzAwIFx1QzU0NFx1QjJDQyBcdUFDQkRcdUM2QjApXHJcbiAgICAgICAgICAgIGlmIChpICsgYmF0Y2hTaXplIDwgaXRlbXMubGVuZ3RoICYmIGRlbGF5TXMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBkZWxheShkZWxheU1zLCBjYW5jZWxsYXRpb25Ub2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBDYW5jZWxsYXRpb25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gXHVCMkU0XHVCOTc4IFx1QzVEMFx1QjdFQ1x1QjI5NCBcdUFDQjBcdUFDRkNcdUM1RDAgXHVEM0VDXHVENTY4XHVENTU4XHVBQzcwXHVCMDk4IFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUI4NUNcdUM5QzEgXHVDRDk0XHVBQzAwIFx1QUMwMFx1QjJBNVxyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbn0iLCAiZXhwb3J0IHR5cGUgQ29uc3RydWN0b3I8VCA9IHt9PiA9IG5ldyAoLi4uYXJnczogYW55W10pID0+IFQ7XHJcbmV4cG9ydCB0eXBlIEZhY3Rvcnk8VCA9IGFueT4gPSAoLi4uYXJnczogYW55W10pID0+IFQ7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNlcnZpY2VEZWZpbml0aW9uPFQgPSBhbnk+IHtcclxuICAgIGltcGxlbWVudGF0aW9uOiBDb25zdHJ1Y3RvcjxUPiB8IEZhY3Rvcnk8VD47XHJcbiAgICBzaW5nbGV0b24/OiBib29sZWFuO1xyXG4gICAgZGVwZW5kZW5jaWVzPzogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBESUNvbnRhaW5lciB7XHJcbiAgICBwcml2YXRlIHNlcnZpY2VzID0gbmV3IE1hcDxzdHJpbmcsIFNlcnZpY2VEZWZpbml0aW9uPigpO1xyXG4gICAgcHJpdmF0ZSBpbnN0YW5jZXMgPSBuZXcgTWFwPHN0cmluZywgYW55PigpO1xyXG5cclxuICAgIHJlZ2lzdGVyPFQ+KFxyXG4gICAgICAgIG5hbWU6IHN0cmluZywgXHJcbiAgICAgICAgaW1wbGVtZW50YXRpb246IENvbnN0cnVjdG9yPFQ+IHwgRmFjdG9yeTxUPixcclxuICAgICAgICBvcHRpb25zOiB7IHNpbmdsZXRvbj86IGJvb2xlYW47IGRlcGVuZGVuY2llcz86IHN0cmluZ1tdIH0gPSB7fVxyXG4gICAgKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlcy5zZXQobmFtZSwge1xyXG4gICAgICAgICAgICBpbXBsZW1lbnRhdGlvbixcclxuICAgICAgICAgICAgc2luZ2xldG9uOiBvcHRpb25zLnNpbmdsZXRvbiA/PyB0cnVlLFxyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IG9wdGlvbnMuZGVwZW5kZW5jaWVzID8/IFtdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzb2x2ZTxUPihuYW1lOiBzdHJpbmcpOiBUIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlID0gdGhpcy5zZXJ2aWNlcy5nZXQobmFtZSk7XHJcbiAgICAgICAgaWYgKCFzZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU2VydmljZSAnJHtuYW1lfScgbm90IHJlZ2lzdGVyZWRgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QzJGMVx1QUUwMFx1RDFBNFx1Qzc3NFx1QUNFMCBcdUM3NzRcdUJCRjggXHVDNzc4XHVDMkE0XHVEMTM0XHVDMkE0XHVBQzAwIFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUJDMThcdUQ2NThcclxuICAgICAgICBpZiAoc2VydmljZS5zaW5nbGV0b24gJiYgdGhpcy5pbnN0YW5jZXMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5nZXQobmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUM3NThcdUM4NzRcdUMxMzEgXHVENTc0XHVBQ0IwXHJcbiAgICAgICAgY29uc3QgZGVwZW5kZW5jaWVzID0gc2VydmljZS5kZXBlbmRlbmNpZXMubWFwKGRlcCA9PiB0aGlzLnJlc29sdmUoZGVwKSk7XHJcblxyXG4gICAgICAgIC8vIFx1Qzc3OFx1QzJBNFx1RDEzNFx1QzJBNCBcdUMwRERcdUMxMzFcclxuICAgICAgICBsZXQgaW5zdGFuY2U6IFQ7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb25zdHJ1Y3RvcihzZXJ2aWNlLmltcGxlbWVudGF0aW9uKSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBzZXJ2aWNlLmltcGxlbWVudGF0aW9uKC4uLmRlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSBzZXJ2aWNlLmltcGxlbWVudGF0aW9uKC4uLmRlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUMyRjFcdUFFMDBcdUQxQTRcdUM3NzRcdUJBNzQgXHVDNzc4XHVDMkE0XHVEMTM0XHVDMkE0IFx1QzgwMFx1QzdBNVxyXG4gICAgICAgIGlmIChzZXJ2aWNlLnNpbmdsZXRvbikge1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQobmFtZSwgaW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVySW5zdGFuY2U8VD4obmFtZTogc3RyaW5nLCBpbnN0YW5jZTogVCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChuYW1lLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlcy5zZXQobmFtZSwge1xyXG4gICAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogKCkgPT4gaW5zdGFuY2UsXHJcbiAgICAgICAgICAgIHNpbmdsZXRvbjogdHJ1ZSxcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbXVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGhhcyhuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlcy5oYXMobmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlcy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0NvbnN0cnVjdG9yKGltcGxlbWVudGF0aW9uOiBhbnkpOiBpbXBsZW1lbnRhdGlvbiBpcyBDb25zdHJ1Y3RvciB7XHJcbiAgICAgICAgcmV0dXJuIGltcGxlbWVudGF0aW9uLnByb3RvdHlwZSAmJiBpbXBsZW1lbnRhdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPT09IGltcGxlbWVudGF0aW9uO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUFFMDBcdUI4NUNcdUJDOEMgXHVDRUU4XHVEMTRDXHVDNzc0XHVCMTA4IFx1Qzc3OFx1QzJBNFx1RDEzNFx1QzJBNFxyXG5leHBvcnQgY29uc3QgY29udGFpbmVyID0gbmV3IERJQ29udGFpbmVyKCk7IiwgImltcG9ydCB7IERpZmZpY3VsdHksIEV4YW1wbGUgfSBmcm9tICcuLi8uLi9zaGFyZWQvbGliL3R5cGVzJztcclxuXHJcbi8vIFx1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0IFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNFxyXG5leHBvcnQgaW50ZXJmYWNlIFdvcmREYXRhIHtcclxuICAgIHdvcmQ6IHN0cmluZztcclxuICAgIHByb251bmNpYXRpb246IHN0cmluZztcclxuICAgIG1lYW5pbmdzOiBzdHJpbmdbXTtcclxuICAgIHNpbWlsYXJXb3Jkczogc3RyaW5nW107XHJcbiAgICBleGFtcGxlczogRXhhbXBsZVtdO1xyXG59XHJcblxyXG4vLyBcdUIyRThcdUM1QjQgXHVDRTc0XHVCNERDIFx1QzVENFx1RDJGMFx1RDJGMFxyXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeUNhcmQge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHdvcmQ6IHN0cmluZyxcclxuICAgICAgICBwdWJsaWMgcHJvbnVuY2lhdGlvbjogc3RyaW5nLFxyXG4gICAgICAgIHB1YmxpYyBtZWFuaW5nczogc3RyaW5nW10sXHJcbiAgICAgICAgcHVibGljIHNpbWlsYXJXb3Jkczogc3RyaW5nW10sXHJcbiAgICAgICAgcHVibGljIGV4YW1wbGVzOiBFeGFtcGxlW10sXHJcbiAgICAgICAgcHVibGljIHJldmlld0NvdW50OiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIGRpZmZpY3VsdHk6IERpZmZpY3VsdHksXHJcbiAgICAgICAgcHVibGljIGxhc3RSZXZpZXdlZDogc3RyaW5nIHwgbnVsbCxcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgYWRkZWREYXRlOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIGJvb2tJZDogc3RyaW5nXHJcbiAgICApIHt9XHJcblxyXG4gICAgLy8gXHVEMzI5XHVEMUEwXHVCOUFDIFx1QkE1NFx1QzExQ1x1QjREQzogV29yZERhdGFcdUI4NUNcdUJEODBcdUQxMzAgVm9jYWJ1bGFyeUNhcmQgXHVDMEREXHVDMTMxXHJcbiAgICBzdGF0aWMgZnJvbVdvcmREYXRhKHdvcmREYXRhOiBXb3JkRGF0YSwgYm9va0lkOiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZCB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcclxuICAgICAgICAgICAgd29yZERhdGEud29yZCxcclxuICAgICAgICAgICAgd29yZERhdGEucHJvbnVuY2lhdGlvbixcclxuICAgICAgICAgICAgd29yZERhdGEubWVhbmluZ3MsXHJcbiAgICAgICAgICAgIHdvcmREYXRhLnNpbWlsYXJXb3JkcyxcclxuICAgICAgICAgICAgd29yZERhdGEuZXhhbXBsZXMsXHJcbiAgICAgICAgICAgIDAsIC8vIFx1Q0QwOFx1QUUzMCBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4XHJcbiAgICAgICAgICAgICdnb29kJywgLy8gXHVDRDA4XHVBRTMwIFx1QjA5Q1x1Qzc3NFx1QjNDNFxyXG4gICAgICAgICAgICBudWxsLCAvLyBcdUNEMDhcdUFFMzAgXHVCQ0Y1XHVDMkI1IFx1QjBBMFx1QzlEQ1xyXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIC8vIFx1Q0Q5NFx1QUMwMCBcdUIwQTBcdUM5RENcclxuICAgICAgICAgICAgYm9va0lkXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUJDRjVcdUMyQjUgXHVDMjE4XHVENTg5XHJcbiAgICByZXZpZXcobmV3RGlmZmljdWx0eTogRGlmZmljdWx0eSk6IFZvY2FidWxhcnlDYXJkIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlDYXJkKFxyXG4gICAgICAgICAgICB0aGlzLndvcmQsXHJcbiAgICAgICAgICAgIHRoaXMucHJvbnVuY2lhdGlvbixcclxuICAgICAgICAgICAgdGhpcy5tZWFuaW5ncyxcclxuICAgICAgICAgICAgdGhpcy5zaW1pbGFyV29yZHMsXHJcbiAgICAgICAgICAgIHRoaXMuZXhhbXBsZXMsXHJcbiAgICAgICAgICAgIHRoaXMucmV2aWV3Q291bnQgKyAxLFxyXG4gICAgICAgICAgICBuZXdEaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHRoaXMuYWRkZWREYXRlLFxyXG4gICAgICAgICAgICB0aGlzLmJvb2tJZFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHVwZGF0ZVdvcmREYXRhKHdvcmREYXRhOiBQYXJ0aWFsPFdvcmREYXRhPik6IFZvY2FidWxhcnlDYXJkIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlDYXJkKFxyXG4gICAgICAgICAgICB0aGlzLndvcmQsXHJcbiAgICAgICAgICAgIHdvcmREYXRhLnByb251bmNpYXRpb24gPz8gdGhpcy5wcm9udW5jaWF0aW9uLFxyXG4gICAgICAgICAgICB3b3JkRGF0YS5tZWFuaW5ncyA/PyB0aGlzLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICB3b3JkRGF0YS5zaW1pbGFyV29yZHMgPz8gdGhpcy5zaW1pbGFyV29yZHMsXHJcbiAgICAgICAgICAgIHdvcmREYXRhLmV4YW1wbGVzID8/IHRoaXMuZXhhbXBsZXMsXHJcbiAgICAgICAgICAgIHRoaXMucmV2aWV3Q291bnQsXHJcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgdGhpcy5sYXN0UmV2aWV3ZWQsXHJcbiAgICAgICAgICAgIHRoaXMuYWRkZWREYXRlLFxyXG4gICAgICAgICAgICB0aGlzLmJvb2tJZFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1QjNEOVxyXG4gICAgbW92ZVRvQm9vayhuZXdCb29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlDYXJkKFxyXG4gICAgICAgICAgICB0aGlzLndvcmQsXHJcbiAgICAgICAgICAgIHRoaXMucHJvbnVuY2lhdGlvbixcclxuICAgICAgICAgICAgdGhpcy5tZWFuaW5ncyxcclxuICAgICAgICAgICAgdGhpcy5zaW1pbGFyV29yZHMsXHJcbiAgICAgICAgICAgIHRoaXMuZXhhbXBsZXMsXHJcbiAgICAgICAgICAgIHRoaXMucmV2aWV3Q291bnQsXHJcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgdGhpcy5sYXN0UmV2aWV3ZWQsXHJcbiAgICAgICAgICAgIHRoaXMuYWRkZWREYXRlLFxyXG4gICAgICAgICAgICBuZXdCb29rSWRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QkNGNVx1QzJCNVx1Qzc3NCBcdUQ1NDRcdUM2OTRcdUQ1NUNcdUM5QzAgXHVENjU1XHVDNzc4XHJcbiAgICBuZWVkc1JldmlldyhyZXZpZXdJbnRlcnZhbDogbnVtYmVyID0gMSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghdGhpcy5sYXN0UmV2aWV3ZWQpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGxhc3RSZXZpZXdEYXRlID0gbmV3IERhdGUodGhpcy5sYXN0UmV2aWV3ZWQpO1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgZGF5c0RpZmYgPSBNYXRoLmZsb29yKChub3cuZ2V0VGltZSgpIC0gbGFzdFJldmlld0RhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCMDlDXHVDNzc0XHVCM0M0XHVDNUQwIFx1QjUzMFx1Qjk3OCBcdUJDRjVcdUMyQjUgXHVDOEZDXHVBRTMwIFx1Qzg3MFx1QzgxNVxyXG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdHlNdWx0aXBsaWVyID0ge1xyXG4gICAgICAgICAgICAnaGFyZCc6IDAuNSxcclxuICAgICAgICAgICAgJ2dvb2QnOiAxLFxyXG4gICAgICAgICAgICAnZWFzeSc6IDJcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGFkanVzdGVkSW50ZXJ2YWwgPSByZXZpZXdJbnRlcnZhbCAqIGRpZmZpY3VsdHlNdWx0aXBsaWVyW3RoaXMuZGlmZmljdWx0eV07XHJcbiAgICAgICAgcmV0dXJuIGRheXNEaWZmID49IGFkanVzdGVkSW50ZXJ2YWw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVENTU5XHVDMkI1IFx1QzlDNFx1RDU4OVx1QjNDNCBcdUFDQzRcdUMwQjAgKDAtMTAwKVxyXG4gICAgZ2V0UHJvZ3Jlc3NQZXJjZW50YWdlKCk6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgbWF4UmV2aWV3cyA9IDEwOyAvLyBcdUNENUNcdUIzMDAgXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxOFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4odGhpcy5yZXZpZXdDb3VudCAvIG1heFJldmlld3MsIDEpICogMTAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjA5Q1x1Qzc3NFx1QjNDNCBcdUJDRjRcdUIxMDhcdUMyQTRcclxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5Qm9udXMgPSB7XHJcbiAgICAgICAgICAgICdlYXN5JzogMjAsXHJcbiAgICAgICAgICAgICdnb29kJzogMTAsXHJcbiAgICAgICAgICAgICdoYXJkJzogMFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHByb2dyZXNzICsgZGlmZmljdWx0eUJvbnVzW3RoaXMuZGlmZmljdWx0eV0sIDEwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzlDMVx1QjgyQ1x1RDY1NFx1Qjk3QyBcdUM3MDRcdUQ1NUMgXHVCQTU0XHVDMTFDXHVCNERDXHJcbiAgICB0b1BsYWluT2JqZWN0KCk6IFZvY2FidWxhcnlDYXJkRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd29yZDogdGhpcy53b3JkLFxyXG4gICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB0aGlzLnByb251bmNpYXRpb24sXHJcbiAgICAgICAgICAgIG1lYW5pbmdzOiB0aGlzLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICBzaW1pbGFyV29yZHM6IHRoaXMuc2ltaWxhcldvcmRzLFxyXG4gICAgICAgICAgICBleGFtcGxlczogdGhpcy5leGFtcGxlcyxcclxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IHRoaXMucmV2aWV3Q291bnQsXHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiB0aGlzLmxhc3RSZXZpZXdlZCxcclxuICAgICAgICAgICAgYWRkZWREYXRlOiB0aGlzLmFkZGVkRGF0ZSxcclxuICAgICAgICAgICAgYm9va0lkOiB0aGlzLmJvb2tJZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVBQzgwXHVDOTlEIFx1Qjg1Q1x1QzlDMVxyXG4gICAgdmFsaWRhdGUoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXRoaXMud29yZCB8fCB0aGlzLndvcmQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVBQzAwIFx1Qzc4NVx1QjgyNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLm1lYW5pbmdzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVDNzU4IFx1QjczQlx1Qzc3NCBcdUQ1NThcdUIwOTggXHVDNzc0XHVDMEMxIFx1RDU0NFx1QzY5NFx1RDU2OVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF0aGlzLmJvb2tJZCB8fCB0aGlzLmJvb2tJZC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjRcdUM3QTUgSURcdUFDMDAgXHVENTQ0XHVDNjk0XHVENTY5XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZXJyb3JzO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGUoZGF0YToge1xyXG4gICAgICAgIHdvcmQ6IHN0cmluZztcclxuICAgICAgICBtZWFuaW5nOiBzdHJpbmc7XHJcbiAgICAgICAgcHJvbnVuY2lhdGlvbj86IHN0cmluZztcclxuICAgICAgICBleGFtcGxlcz86IHN0cmluZ1tdO1xyXG4gICAgICAgIGJvb2tJZD86IHN0cmluZztcclxuICAgIH0pOiBWb2NhYnVsYXJ5Q2FyZCB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcclxuICAgICAgICAgICAgZGF0YS53b3JkLFxyXG4gICAgICAgICAgICBkYXRhLnByb251bmNpYXRpb24gfHwgJycsXHJcbiAgICAgICAgICAgIFtkYXRhLm1lYW5pbmddLCAvLyBtZWFuaW5ncyBhcnJheVxyXG4gICAgICAgICAgICBbXSwgLy8gc2ltaWxhcldvcmRzXHJcbiAgICAgICAgICAgIGRhdGEuZXhhbXBsZXM/Lm1hcChleCA9PiAoeyBlbmdsaXNoOiBleCwga29yZWFuOiAnJyB9KSkgfHwgW10sIC8vIGV4YW1wbGVzIHdpdGggRXhhbXBsZSB0eXBlXHJcbiAgICAgICAgICAgIDAsIC8vIHJldmlld0NvdW50XHJcbiAgICAgICAgICAgICdnb29kJywgLy8gZGlmZmljdWx0eVxyXG4gICAgICAgICAgICBudWxsLCAvLyBsYXN0UmV2aWV3ZWRcclxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCAvLyBhZGRlZERhdGVcclxuICAgICAgICAgICAgZGF0YS5ib29rSWQgfHwgJ2RlZmF1bHQnXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwNFx1QzFBMVx1QzZBOSBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTQgKFx1QUUzMFx1Qzg3NCBcdUQ2MzhcdUQ2NThcdUMxMzEgXHVDNzIwXHVDOUMwKVxyXG5leHBvcnQgaW50ZXJmYWNlIFZvY2FidWxhcnlDYXJkRGF0YSBleHRlbmRzIFdvcmREYXRhIHtcclxuICAgIHJldmlld0NvdW50OiBudW1iZXI7XHJcbiAgICBkaWZmaWN1bHR5OiBEaWZmaWN1bHR5O1xyXG4gICAgbGFzdFJldmlld2VkOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgYWRkZWREYXRlOiBzdHJpbmc7XHJcbiAgICBib29rSWQ6IHN0cmluZztcclxufVxyXG5cclxuLy8gXHVBQzgwXHVDMEM5IFx1QUNCMFx1QUNGQyBcdUQwQzBcdUM3ODVcclxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hSZXN1bHQge1xyXG4gICAgY2FyZHM6IFZvY2FidWxhcnlDYXJkW107XHJcbiAgICB0b3RhbENvdW50OiBudW1iZXI7XHJcbiAgICBoYXNNb3JlOiBib29sZWFuO1xyXG59ICIsICJpbXBvcnQgeyBJVm9jYWJ1bGFyeVJlcG9zaXRvcnkgfSBmcm9tICcuLi9wb3J0cy9yZXBvc2l0b3JpZXMvSVZvY2FidWxhcnlSZXBvc2l0b3J5JztcclxuaW1wb3J0IHsgSUJvb2tSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcG9ydHMvcmVwb3NpdG9yaWVzL0lCb29rUmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IElXb3JkU2VydmljZSB9IGZyb20gJy4uL3BvcnRzL3NlcnZpY2VzL0lXb3JkU2VydmljZSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi4vZW50aXRpZXMvVm9jYWJ1bGFyeSc7XHJcbmltcG9ydCB7IFdvcmRBZGRlZEV2ZW50IH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi90eXBlcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFkZFdvcmRSZXF1ZXN0IHtcclxuICAgIHdvcmQ6IHN0cmluZztcclxuICAgIGJvb2tJZD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBZGRXb3JkUmVzcG9uc2Uge1xyXG4gICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgIGNhcmQ/OiBWb2NhYnVsYXJ5Q2FyZDtcclxuICAgIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWRkV29yZFVzZUNhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSB2b2NhYnVsYXJ5UmVwb3NpdG9yeTogSVZvY2FidWxhcnlSZXBvc2l0b3J5LFxyXG4gICAgICAgIHByaXZhdGUgYm9va1JlcG9zaXRvcnk6IElCb29rUmVwb3NpdG9yeSxcclxuICAgICAgICBwcml2YXRlIHdvcmRTZXJ2aWNlOiBJV29yZFNlcnZpY2VcclxuICAgICkge31cclxuXHJcbiAgICBhc3luYyBleGVjdXRlKHJlcXVlc3Q6IEFkZFdvcmRSZXF1ZXN0KTogUHJvbWlzZTxBZGRXb3JkUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyAxLiBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXHJcbiAgICAgICAgICAgIGlmICghcmVxdWVzdC53b3JkIHx8IHJlcXVlc3Qud29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB3b3JkID0gcmVxdWVzdC53b3JkLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gMi4gXHVDOTExXHVCQ0Y1IFx1RDY1NVx1Qzc3OFxyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1dvcmQgPSBhd2FpdCB0aGlzLnZvY2FidWxhcnlSZXBvc2l0b3J5LmZpbmRCeVdvcmQod29yZCk7XHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1dvcmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0IFx1QjJFOFx1QzVCNFx1Qzc4NVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAzLiBcdUIyRThcdUM1QjRcdUM3QTUgXHVENjU1XHVDNzc4IFx1QkMwRiBcdUMxMjRcdUM4MTVcclxuICAgICAgICAgICAgbGV0IGJvb2tJZCA9IHJlcXVlc3QuYm9va0lkO1xyXG4gICAgICAgICAgICBpZiAoIWJvb2tJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEJvb2sgPSBhd2FpdCB0aGlzLmJvb2tSZXBvc2l0b3J5LmdldEN1cnJlbnRCb29rKCk7XHJcbiAgICAgICAgICAgICAgICBib29rSWQgPSBjdXJyZW50Qm9vaz8uaWQgfHwgJ2RlZmF1bHQnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBib29rID0gYXdhaXQgdGhpcy5ib29rUmVwb3NpdG9yeS5maW5kQnlJZChib29rSWQpO1xyXG4gICAgICAgICAgICBpZiAoIWJvb2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gNC4gXHVCMkU4XHVDNUI0IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICAgICAgY29uc3Qgd29yZERhdGEgPSBhd2FpdCB0aGlzLndvcmRTZXJ2aWNlLmdldFdvcmREYXRhKHdvcmQpO1xyXG5cclxuICAgICAgICAgICAgLy8gNS4gVm9jYWJ1bGFyeUNhcmQgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgICAgIGNvbnN0IHZvY2FidWxhcnlDYXJkID0gVm9jYWJ1bGFyeUNhcmQuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmREYXRhLndvcmQsXHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nOiB3b3JkRGF0YS5tZWFuaW5nLFxyXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZERhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGF0YS5leGFtcGxlcyB8fCBbXSxcclxuICAgICAgICAgICAgICAgIGJvb2tJZDogYm9va0lkXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gNi4gXHVBQzgwXHVDOTlEXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSB2b2NhYnVsYXJ5Q2FyZC52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBpZiAodmFsaWRhdGlvbkVycm9ycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiB2YWxpZGF0aW9uRXJyb3JzLmpvaW4oJywgJylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDcuIFx1QzgwMFx1QzdBNVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZvY2FidWxhcnlSZXBvc2l0b3J5LmFkZCh2b2NhYnVsYXJ5Q2FyZCk7XHJcblxyXG4gICAgICAgICAgICAvLyA4LiBcdUM3NzRcdUJDQTRcdUQyQjggXHVCQzFDXHVDMEREXHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50OiBXb3JkQWRkZWRFdmVudCA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdXT1JEX0FEREVEJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IHZvY2FidWxhcnlDYXJkLndvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgYm9va0lkOiB2b2NhYnVsYXJ5Q2FyZC5ib29rSWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUJDMUNcdUMwREQgKFx1QzJFNFx1QzgxQyBcdUFENkNcdUQ2MDRcdUM1RDBcdUMxMUNcdUIyOTQgRXZlbnRCdXMgXHVDMEFDXHVDNkE5KVxyXG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hFdmVudChldmVudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNhcmQ6IHZvY2FidWxhcnlDYXJkXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FkZFdvcmRVc2VDYXNlIFx1QzJFNFx1RDU4OSBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHB1Ymxpc2hFdmVudChldmVudDogV29yZEFkZGVkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM3ODRcdUMyREMgXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIEV2ZW50QnVzXHVCODVDIFx1QUQ1MFx1Q0NCNFxyXG4gICAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd3b3JkQWRkZWQnLCB7IGRldGFpbDogZXZlbnQuZGF0YSB9KTtcclxuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcclxuICAgIH1cclxufSAiLCAiLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzVENFx1RDJGMFx1RDJGMFxyXG5leHBvcnQgY2xhc3MgQm9vayB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaWQ6IHN0cmluZyxcclxuICAgICAgICBwdWJsaWMgbmFtZTogc3RyaW5nLFxyXG4gICAgICAgIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBjcmVhdGVkQXQ6IHN0cmluZyxcclxuICAgICAgICBwdWJsaWMgdXBkYXRlZEF0OiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHdvcmRDb3VudDogbnVtYmVyLFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBpc0RlZmF1bHQ6IGJvb2xlYW5cclxuICAgICkge31cclxuXHJcbiAgICAvLyBcdUQzMjlcdUQxQTBcdUI5QUMgXHVCQTU0XHVDMTFDXHVCNERDOiBcdUMwQzggXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMVxyXG4gICAgc3RhdGljIGNyZWF0ZShuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcgPSAnJywgaXNEZWZhdWx0OiBib29sZWFuID0gZmFsc2UpOiBCb29rIHtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgaWQgPSBpc0RlZmF1bHQgPyAnZGVmYXVsdCcgOiBCb29rLmdlbmVyYXRlSWQoKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gbmV3IEJvb2soXHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgbm93LFxyXG4gICAgICAgICAgICBub3csXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVEMzI5XHVEMUEwXHVCOUFDIFx1QkE1NFx1QzExQ1x1QjREQzogXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzFcclxuICAgIHN0YXRpYyBjcmVhdGVEZWZhdWx0KCk6IEJvb2sge1xyXG4gICAgICAgIHJldHVybiBCb29rLmNyZWF0ZSgnXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNScsICdcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzg1XHVCMkM4XHVCMkU0LicsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MTVcdUJDRjQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICB1cGRhdGVJbmZvKG5hbWU/OiBzdHJpbmcsIGRlc2NyaXB0aW9uPzogc3RyaW5nKTogQm9vayB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxyXG4gICAgICAgICAgICB0aGlzLmlkLFxyXG4gICAgICAgICAgICBuYW1lID8/IHRoaXMubmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPz8gdGhpcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgdGhpcy53b3JkQ291bnQsXHJcbiAgICAgICAgICAgIHRoaXMuaXNEZWZhdWx0XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjQgXHVDMjE4IFx1Qzk5RFx1QUMwMFxyXG4gICAgaW5jcmVtZW50V29yZENvdW50KCk6IEJvb2sge1xyXG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcclxuICAgICAgICAgICAgdGhpcy5pZCxcclxuICAgICAgICAgICAgdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICB0aGlzLndvcmRDb3VudCArIDEsXHJcbiAgICAgICAgICAgIHRoaXMuaXNEZWZhdWx0XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjQgXHVDMjE4IFx1QUMxMFx1QzE4Q1xyXG4gICAgZGVjcmVtZW50V29yZENvdW50KCk6IEJvb2sge1xyXG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcclxuICAgICAgICAgICAgdGhpcy5pZCxcclxuICAgICAgICAgICAgdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICBNYXRoLm1heCgwLCB0aGlzLndvcmRDb3VudCAtIDEpLFxyXG4gICAgICAgICAgICB0aGlzLmlzRGVmYXVsdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0IFx1QzIxOCBcdUM3QUNcdUMxMjRcdUM4MTVcclxuICAgIHVwZGF0ZVdvcmRDb3VudChjb3VudDogbnVtYmVyKTogQm9vayB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxyXG4gICAgICAgICAgICB0aGlzLmlkLFxyXG4gICAgICAgICAgICB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIE1hdGgubWF4KDAsIGNvdW50KSxcclxuICAgICAgICAgICAgdGhpcy5pc0RlZmF1bHRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QzBBRFx1QzgxQyBcdUFDMDBcdUIyQTUgXHVDNUVDXHVCRDgwIFx1RDY1NVx1Qzc3OFxyXG4gICAgY2FuQmVEZWxldGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5pc0RlZmF1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QkU0NFx1QzVCNFx1Qzc4OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcclxuICAgIGlzRW1wdHkoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud29yZENvdW50ID09PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QUM4MFx1Qzk5RCBcdUI4NUNcdUM5QzFcclxuICAgIHZhbGlkYXRlKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF0aGlzLm5hbWUgfHwgdGhpcy5uYW1lLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODRcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTY5XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5uYW1lLnRyaW0oKS5sZW5ndGggPiAxMDApIHtcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODRcdUM3NDAgMTAwXHVDNzkwXHVCOTdDIFx1Q0QwOFx1QUNGQ1x1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5kZXNjcmlwdGlvbi5sZW5ndGggPiA1MDApIHtcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjRcdUJBODVcdUM3NDAgNTAwXHVDNzkwXHVCOTdDIFx1Q0QwOFx1QUNGQ1x1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy53b3JkQ291bnQgPCAwKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjQgXHVDMjE4XHVCMjk0IDAgXHVDNzc0XHVDMEMxXHVDNzc0XHVDNUI0XHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGVycm9ycztcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDOUMxXHVCODJDXHVENjU0XHVCOTdDIFx1QzcwNFx1RDU1QyBcdUJBNTRcdUMxMUNcdUI0RENcclxuICAgIHRvUGxhaW5PYmplY3QoKTogQm9va0RhdGEge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHRoaXMuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IHRoaXMudXBkYXRlZEF0LFxyXG4gICAgICAgICAgICB3b3JkQ291bnQ6IHRoaXMud29yZENvdW50LFxyXG4gICAgICAgICAgICBpc0RlZmF1bHQ6IHRoaXMuaXNEZWZhdWx0XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUMwRERcdUMxMzFcdUM3N0NcdUI4NUNcdUJEODBcdUQxMzAgXHVBQ0JEXHVBQ0ZDIFx1Qzc3Q1x1QzIxOCBcdUFDQzRcdUMwQjBcclxuICAgIGdldERheXNGcm9tQ3JlYXRpb24oKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBjcmVhdGVkRGF0ZSA9IG5ldyBEYXRlKHRoaXMuY3JlYXRlZEF0KTtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKChub3cuZ2V0VGltZSgpIC0gY3JlYXRlZERhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFx1Qjg1Q1x1QkQ4MFx1RDEzMCBcdUFDQkRcdUFDRkMgXHVDNzdDXHVDMjE4IFx1QUNDNFx1QzBCMFxyXG4gICAgZ2V0RGF5c0Zyb21MYXN0VXBkYXRlKCk6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZERhdGUgPSBuZXcgRGF0ZSh0aGlzLnVwZGF0ZWRBdCk7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIHVwZGF0ZWREYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElEIFx1QzBERFx1QzEzMSBcdUM3MjBcdUQyRjhcdUI5QUNcdUQyRjBcclxuICAgIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlSWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYGJvb2tfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDODA0XHVDMUExXHVDNkE5IFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNCAoXHVBRTMwXHVDODc0IFx1RDYzOFx1RDY1OFx1QzEzMSBcdUM3MjBcdUM5QzApXHJcbmV4cG9ydCBpbnRlcmZhY2UgQm9va0RhdGEge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBjcmVhdGVkQXQ6IHN0cmluZztcclxuICAgIHVwZGF0ZWRBdDogc3RyaW5nO1xyXG4gICAgd29yZENvdW50OiBudW1iZXI7XHJcbiAgICBpc0RlZmF1bHQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbi8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQxQjVcdUFDQzQgXHVDNzc4XHVEMTMwXHVEMzk4XHVDNzc0XHVDMkE0XHJcbmV4cG9ydCBpbnRlcmZhY2UgQm9va1N0YXRpc3RpY3Mge1xyXG4gICAgYm9vazogQm9vaztcclxuICAgIHRvdGFsV29yZHM6IG51bWJlcjtcclxuICAgIHdvcmRzQnlEaWZmaWN1bHR5OiB7XHJcbiAgICAgICAgZWFzeTogbnVtYmVyO1xyXG4gICAgICAgIGdvb2Q6IG51bWJlcjtcclxuICAgICAgICBoYXJkOiBudW1iZXI7XHJcbiAgICB9O1xyXG4gICAgYXZlcmFnZVJldmlld0NvdW50OiBudW1iZXI7XHJcbiAgICBsYXN0QWN0aXZpdHlEYXRlOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgY29tcGxldGlvblBlcmNlbnRhZ2U6IG51bWJlcjtcclxufVxyXG5cclxuLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkFBOVx1Qjg1RCBcdUM2MzVcdUMxNThcclxuZXhwb3J0IGludGVyZmFjZSBCb29rTGlzdE9wdGlvbnMge1xyXG4gICAgaW5jbHVkZUVtcHR5PzogYm9vbGVhbjtcclxuICAgIHNvcnRCeT86ICduYW1lJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCcgfCAnd29yZENvdW50JztcclxuICAgIHNvcnRPcmRlcj86ICdhc2MnIHwgJ2Rlc2MnO1xyXG4gICAgbGltaXQ/OiBudW1iZXI7XHJcbiAgICBvZmZzZXQ/OiBudW1iZXI7XHJcbn0gIiwgImltcG9ydCB7IElCb29rUmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL3JlcG9zaXRvcmllcy9JQm9va1JlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBCb29rIH0gZnJvbSAnLi4vZW50aXRpZXMvQm9vayc7XHJcbmltcG9ydCB7IEJvb2tDcmVhdGVkRXZlbnQgfSBmcm9tICcuLi8uLi9zaGFyZWQvbGliL3R5cGVzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlQm9va1JlcXVlc3Qge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlQm9va1Jlc3BvbnNlIHtcclxuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICBib29rPzogQm9vaztcclxuICAgIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ3JlYXRlQm9va1VzZUNhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBib29rUmVwb3NpdG9yeTogSUJvb2tSZXBvc2l0b3J5XHJcbiAgICApIHt9XHJcblxyXG4gICAgYXN5bmMgZXhlY3V0ZShyZXF1ZXN0OiBDcmVhdGVCb29rUmVxdWVzdCk6IFByb21pc2U8Q3JlYXRlQm9va1Jlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gMS4gXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RFxyXG4gICAgICAgICAgICBpZiAoIXJlcXVlc3QubmFtZSB8fCByZXF1ZXN0Lm5hbWUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODRcdUM3NDQgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSByZXF1ZXN0Lm5hbWUudHJpbSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMi4gXHVDNzc0XHVCOTg0IFx1QzkxMVx1QkNGNSBcdUQ2NTVcdUM3NzhcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdCb29rcyA9IGF3YWl0IHRoaXMuYm9va1JlcG9zaXRvcnkuZmluZEFsbCgpO1xyXG4gICAgICAgICAgICBjb25zdCBkdXBsaWNhdGVCb29rID0gZXhpc3RpbmdCb29rcy5maW5kKGJvb2sgPT4gXHJcbiAgICAgICAgICAgICAgICBib29rLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZHVwbGljYXRlQm9vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTQgXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc4NVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAzLiBCb29rIFx1QzVENFx1RDJGMFx1RDJGMCBcdUMwRERcdUMxMzFcclxuICAgICAgICAgICAgY29uc3QgYm9vayA9IEJvb2suY3JlYXRlKFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QuZGVzY3JpcHRpb24gfHwgJydcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8vIDQuIFx1QUM4MFx1Qzk5RFxyXG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0gYm9vay52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBpZiAodmFsaWRhdGlvbkVycm9ycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiB2YWxpZGF0aW9uRXJyb3JzLmpvaW4oJywgJylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDUuIFx1QzgwMFx1QzdBNVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJvb2tSZXBvc2l0b3J5LmFkZChib29rKTtcclxuXHJcbiAgICAgICAgICAgIC8vIDYuIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUJDMUNcdUMwRERcclxuICAgICAgICAgICAgY29uc3QgZXZlbnQ6IEJvb2tDcmVhdGVkRXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnQk9PS19DUkVBVEVEJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tJZDogYm9vay5pZCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBib29rLm5hbWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMucHVibGlzaEV2ZW50KGV2ZW50KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYm9vazogYm9va1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDcmVhdGVCb29rVXNlQ2FzZSBcdUMyRTRcdUQ1ODkgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwdWJsaXNoRXZlbnQoZXZlbnQ6IEJvb2tDcmVhdGVkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM3ODRcdUMyREMgXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIEV2ZW50QnVzXHVCODVDIFx1QUQ1MFx1Q0NCNFxyXG4gICAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdib29rQ3JlYXRlZCcsIHsgZGV0YWlsOiBldmVudC5kYXRhIH0pO1xyXG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBJVm9jYWJ1bGFyeVJlcG9zaXRvcnkgfSBmcm9tICcuLi9wb3J0cy9JVm9jYWJ1bGFyeVJlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBJQm9va1JlcG9zaXRvcnkgfSBmcm9tICcuLi9wb3J0cy9JQm9va1JlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCB9IGZyb20gJy4uL2VudGl0aWVzL1ZvY2FidWxhcnknO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHZXRXb3Jkc0ZvclJldmlld1JlcXVlc3Qge1xyXG4gICAgYm9va0lkPzogc3RyaW5nO1xyXG4gICAgbGltaXQ/OiBudW1iZXI7XHJcbiAgICByZXZpZXdJbnRlcnZhbD86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHZXRXb3Jkc0ZvclJldmlld1Jlc3BvbnNlIHtcclxuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICB3b3Jkcz86IFZvY2FidWxhcnlDYXJkW107XHJcbiAgICB0b3RhbENvdW50PzogbnVtYmVyO1xyXG4gICAgZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHZXRXb3Jkc0ZvclJldmlld1VzZUNhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSB2b2NhYnVsYXJ5UmVwb3NpdG9yeTogSVZvY2FidWxhcnlSZXBvc2l0b3J5LFxyXG4gICAgICAgIHByaXZhdGUgYm9va1JlcG9zaXRvcnk6IElCb29rUmVwb3NpdG9yeVxyXG4gICAgKSB7fVxyXG5cclxuICAgIGFzeW5jIGV4ZWN1dGUocmVxdWVzdDogR2V0V29yZHNGb3JSZXZpZXdSZXF1ZXN0ID0ge30pOiBQcm9taXNlPEdldFdvcmRzRm9yUmV2aWV3UmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyAxLiBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgICAgIGxldCBib29rSWQgPSByZXF1ZXN0LmJvb2tJZDtcclxuICAgICAgICAgICAgaWYgKCFib29rSWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCb29rID0gYXdhaXQgdGhpcy5ib29rUmVwb3NpdG9yeS5nZXRDdXJyZW50Qm9vaygpO1xyXG4gICAgICAgICAgICAgICAgYm9va0lkID0gY3VycmVudEJvb2s/LmlkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4Q1xyXG4gICAgICAgICAgICBjb25zdCBhbGxXb3JkcyA9IGF3YWl0IHRoaXMudm9jYWJ1bGFyeVJlcG9zaXRvcnkuZmluZEJ5Qm9va0lkKGJvb2tJZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoYWxsV29yZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgd29yZHM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IDBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDMuIFx1QkNGNVx1QzJCNVx1Qzc3NCBcdUQ1NDRcdUM2OTRcdUQ1NUMgXHVCMkU4XHVDNUI0IFx1RDU0NFx1RDEzMFx1QjlDMVxyXG4gICAgICAgICAgICBjb25zdCByZXZpZXdJbnRlcnZhbCA9IHJlcXVlc3QucmV2aWV3SW50ZXJ2YWwgfHwgMTtcclxuICAgICAgICAgICAgY29uc3Qgd29yZHNOZWVkaW5nUmV2aWV3ID0gYWxsV29yZHMuZmlsdGVyKHdvcmQgPT4gXHJcbiAgICAgICAgICAgICAgICB3b3JkLm5lZWRzUmV2aWV3KHJldmlld0ludGVydmFsKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgLy8gNC4gXHVDODE1XHVCODJDIChcdUM2QjBcdUMxMjBcdUMyMUNcdUM3MDQ6IFx1QzYyNFx1Qjc5OFx1QjQxQyBcdUJDRjVcdUMyQjUgPiBcdUM1QjRcdUI4MjRcdUM2QjQgXHVCMkU4XHVDNUI0ID4gXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxOCBcdUM4MDFcdUM3NDAgXHVCMkU4XHVDNUI0KVxyXG4gICAgICAgICAgICB3b3Jkc05lZWRpbmdSZXZpZXcuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gMVx1QzIxQ1x1QzcwNDogXHVCOUM4XHVDOUMwXHVCOUM5IFx1QkNGNVx1QzJCNVx1Qzc3QyAoXHVDNjI0XHVCNzk4XHVCNDFDIFx1QUM4M1x1QkQ4MFx1RDEzMClcclxuICAgICAgICAgICAgICAgIGlmIChhLmxhc3RSZXZpZXdlZCAmJiBiLmxhc3RSZXZpZXdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFEYXRlID0gbmV3IERhdGUoYS5sYXN0UmV2aWV3ZWQpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBiRGF0ZSA9IG5ldyBEYXRlKGIubGFzdFJldmlld2VkKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFEYXRlICE9PSBiRGF0ZSkgcmV0dXJuIGFEYXRlIC0gYkRhdGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEubGFzdFJldmlld2VkICYmICFiLmxhc3RSZXZpZXdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWEubGFzdFJldmlld2VkICYmIGIubGFzdFJldmlld2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gMlx1QzIxQ1x1QzcwNDogXHVCMDlDXHVDNzc0XHVCM0M0IChcdUM1QjRcdUI4MjRcdUM2QjQgXHVBQzgzXHVCRDgwXHVEMTMwKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZmljdWx0eU9yZGVyID0geyAnaGFyZCc6IDMsICdnb29kJzogMiwgJ2Vhc3knOiAxIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmaWN1bHR5RGlmZiA9IGRpZmZpY3VsdHlPcmRlcltiLmRpZmZpY3VsdHldIC0gZGlmZmljdWx0eU9yZGVyW2EuZGlmZmljdWx0eV07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlmZmljdWx0eURpZmYgIT09IDApIHJldHVybiBkaWZmaWN1bHR5RGlmZjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAzXHVDMjFDXHVDNzA0OiBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4IChcdUM4MDFcdUM3NDAgXHVBQzgzXHVCRDgwXHVEMTMwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEucmV2aWV3Q291bnQgLSBiLnJldmlld0NvdW50O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIDUuIFx1QzgxQ1x1RDU1QyBcdUM4MDFcdUM2QTlcclxuICAgICAgICAgICAgY29uc3QgbGltaXQgPSByZXF1ZXN0LmxpbWl0IHx8IDIwO1xyXG4gICAgICAgICAgICBjb25zdCBsaW1pdGVkV29yZHMgPSB3b3Jkc05lZWRpbmdSZXZpZXcuc2xpY2UoMCwgbGltaXQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB3b3JkczogbGltaXRlZFdvcmRzLFxyXG4gICAgICAgICAgICAgICAgdG90YWxDb3VudDogd29yZHNOZWVkaW5nUmV2aWV3Lmxlbmd0aFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UgXHVDMkU0XHVENTg5IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBJVm9jYWJ1bGFyeVJlcG9zaXRvcnkgfSBmcm9tICcuLi9wb3J0cy9JVm9jYWJ1bGFyeVJlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCB9IGZyb20gJy4uL2VudGl0aWVzL1ZvY2FidWxhcnknO1xyXG5pbXBvcnQgeyBEaWZmaWN1bHR5LCBXb3JkUmV2aWV3ZWRFdmVudCB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWIvdHlwZXMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZXZpZXdXb3JkUmVxdWVzdCB7XHJcbiAgICB3b3JkOiBzdHJpbmc7XHJcbiAgICBkaWZmaWN1bHR5OiBEaWZmaWN1bHR5O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1dvcmRSZXNwb25zZSB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgY2FyZD86IFZvY2FidWxhcnlDYXJkO1xyXG4gICAgZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSZXZpZXdXb3JkVXNlQ2FzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHZvY2FidWxhcnlSZXBvc2l0b3J5OiBJVm9jYWJ1bGFyeVJlcG9zaXRvcnlcclxuICAgICkge31cclxuXHJcbiAgICBhc3luYyBleGVjdXRlKHJlcXVlc3Q6IFJldmlld1dvcmRSZXF1ZXN0KTogUHJvbWlzZTxSZXZpZXdXb3JkUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyAxLiBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXHJcbiAgICAgICAgICAgIGlmICghcmVxdWVzdC53b3JkIHx8IHJlcXVlc3Qud29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIVsnZWFzeScsICdnb29kJywgJ2hhcmQnXS5pbmNsdWRlcyhyZXF1ZXN0LmRpZmZpY3VsdHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVDNjJDXHVCQzE0XHVCOTc4IFx1QjA5Q1x1Qzc3NFx1QjNDNFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gMi4gXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4Q1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkID0gcmVxdWVzdC53b3JkLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0NhcmQgPSBhd2FpdCB0aGlzLnZvY2FidWxhcnlSZXBvc2l0b3J5LmZpbmRCeVdvcmQod29yZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nQ2FyZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAzLiBcdUJDRjVcdUMyQjUgXHVDMjE4XHVENTg5IChcdUM1RDRcdUQyRjBcdUQyRjBcdUM3NTggXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMSBcdUQ2NUNcdUM2QTkpXHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzRGlmZmljdWx0eSA9IGV4aXN0aW5nQ2FyZC5kaWZmaWN1bHR5O1xyXG4gICAgICAgICAgICBjb25zdCByZXZpZXdlZENhcmQgPSBleGlzdGluZ0NhcmQucmV2aWV3KHJlcXVlc3QuZGlmZmljdWx0eSk7XHJcblxyXG4gICAgICAgICAgICAvLyA0LiBcdUM4MDBcdUM3QTVcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy52b2NhYnVsYXJ5UmVwb3NpdG9yeS51cGRhdGUocmV2aWV3ZWRDYXJkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIDUuIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUJDMUNcdUMwRERcclxuICAgICAgICAgICAgY29uc3QgZXZlbnQ6IFdvcmRSZXZpZXdlZEV2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ1dPUkRfUkVWSUVXRUQnLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZDogcmV2aWV3ZWRDYXJkLndvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eTogcmVxdWVzdC5kaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRGlmZmljdWx0eTogcHJldmlvdXNEaWZmaWN1bHR5XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hFdmVudChldmVudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNhcmQ6IHJldmlld2VkQ2FyZFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdSZXZpZXdXb3JkVXNlQ2FzZSBcdUMyRTRcdUQ1ODkgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwdWJsaXNoRXZlbnQoZXZlbnQ6IFdvcmRSZXZpZXdlZEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNzg0XHVDMkRDIFx1QUQ2Q1x1RDYwNCAtIFx1QjA5OFx1QzkxMVx1QzVEMCBFdmVudEJ1c1x1Qjg1QyBcdUFENTBcdUNDQjRcclxuICAgICAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnd29yZFJldmlld2VkJywgeyBkZXRhaWw6IGV2ZW50LmRhdGEgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvcG9ydHMvcmVwb3NpdG9yaWVzL0lWb2NhYnVsYXJ5UmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkLCBTZWFyY2hSZXN1bHQgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2VudGl0aWVzL1ZvY2FidWxhcnknO1xyXG5pbXBvcnQgeyBTZWFyY2hPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2xpYi90eXBlcyc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyIGltcGxlbWVudHMgSVZvY2FidWxhcnlSZXBvc2l0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0YWJhc2VNYW5hZ2VyOiBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyKSB7fVxyXG5cclxuICAgIGFzeW5jIGFkZChjYXJkOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQoY2FyZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2F2ZShjYXJkOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQoY2FyZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmluZEJ5V29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkIHwgbnVsbD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRXb3JkKHdvcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbmRBbGwoKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZFtdPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmluZEJ5Qm9va0lkKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZFtdPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmRzQnlCb29rKGJvb2tJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBkYXRlKHdvcmQ6IHN0cmluZywgY2FyZDogVm9jYWJ1bGFyeUNhcmQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkKHdvcmQsIGNhcmQuZGlmZmljdWx0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVsZXRlKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnJlbW92ZVdvcmQod29yZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2VhcmNoKG9wdGlvbnM6IFNlYXJjaE9wdGlvbnMpOiBQcm9taXNlPFNlYXJjaFJlc3VsdD4ge1xyXG4gICAgICAgIGNvbnN0IGFsbFdvcmRzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XHJcbiAgICAgICAgLy8gXHVBRTMwXHVCQ0Y4XHVDODAxXHVDNzc4IFx1QUM4MFx1QzBDOSBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgXHVBQ0UwXHVCM0M0XHVENjU0IFx1QUMwMFx1QjJBNVxyXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkV29yZHMgPSBhbGxXb3Jkcy5maWx0ZXIod29yZCA9PiBcclxuICAgICAgICAgICAgd29yZC53b3JkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMob3B0aW9ucy5xdWVyeT8udG9Mb3dlckNhc2UoKSB8fCAnJylcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdvcmRzOiBmaWx0ZXJlZFdvcmRzLFxyXG4gICAgICAgICAgICB0b3RhbDogZmlsdGVyZWRXb3Jkcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGhhc01vcmU6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZWFyY2hCeVRleHQocXVlcnk6IHN0cmluZyk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmRbXT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2VhcmNoKHsgcXVlcnkgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC53b3JkcztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kQ2FyZHNGb3JSZXZpZXcoYm9va0lkPzogc3RyaW5nKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZFtdPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmRzRm9yUmV2aWV3KGJvb2tJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmluZENhcmRzQnlEaWZmaWN1bHR5KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJywgYm9va0lkPzogc3RyaW5nKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZFtdPiB7XHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSBib29rSWQgPyBcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5maW5kQnlCb29rSWQoYm9va0lkKSA6IFxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gd29yZHMuZmlsdGVyKHdvcmQgPT4gd29yZC5kaWZmaWN1bHR5ID09PSBkaWZmaWN1bHR5KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjb3VudCgpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XHJcbiAgICAgICAgcmV0dXJuIHdvcmRzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjb3VudEJ5Qm9va0lkKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgICAgICBjb25zdCB3b3JkcyA9IGF3YWl0IHRoaXMuZmluZEJ5Qm9va0lkKGJvb2tJZCk7XHJcbiAgICAgICAgcmV0dXJuIHdvcmRzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjb3VudEJ5RGlmZmljdWx0eShkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gYXdhaXQgdGhpcy5maW5kQ2FyZHNCeURpZmZpY3VsdHkoZGlmZmljdWx0eSk7XHJcbiAgICAgICAgcmV0dXJuIHdvcmRzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlTWFueShjYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGZvciAoY29uc3QgY2FyZCBvZiBjYXJkcykge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZChjYXJkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVsZXRlTWFueSh3b3Jkczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxldGUod29yZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWREYXRhKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmVEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNhdmVBbGxEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25EYXRhQ2hhbmdlZChjYWxsYmFjazogKGNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgRXZlbnRFbWl0dGVyIFx1RDMyOFx1RDEzNFx1QzczQ1x1Qjg1QyBcdUFENkNcdUQ2MDRcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxyXG4gICAgfVxyXG5cclxuICAgIG9mZkRhdGFDaGFuZ2VkKGNhbGxiYWNrOiAoY2FyZHM6IFZvY2FidWxhcnlDYXJkW10pID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzgxQ1x1QUM3MCBcdUFENkNcdUQ2MDRcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IElCb29rUmVwb3NpdG9yeSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvcG9ydHMvcmVwb3NpdG9yaWVzL0lCb29rUmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IEJvb2ssIEJvb2tTdGF0aXN0aWNzLCBCb29rTGlzdE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2VudGl0aWVzL0Jvb2snO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc3RvcmFnZS9Wb2NhYnVsYXJ5RGF0YWJhc2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJvb2tSZXBvc2l0b3J5QWRhcHRlciBpbXBsZW1lbnRzIElCb29rUmVwb3NpdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGFiYXNlTWFuYWdlcjogVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcikge31cclxuXHJcbiAgICBhc3luYyBhZGQoYm9vazogQm9vayk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmNyZWF0ZUJvb2soYm9vay50b1BsYWluT2JqZWN0KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmUoYm9vazogQm9vayk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmNyZWF0ZUJvb2soYm9vay50b1BsYWluT2JqZWN0KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbmRCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPEJvb2sgfCBudWxsPiB7XHJcbiAgICAgICAgY29uc3QgYm9va0RhdGEgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRCb29rKGlkKTtcclxuICAgICAgICBpZiAoIWJvb2tEYXRhKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gbmV3IEJvb2soXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLmlkLFxyXG4gICAgICAgICAgICBib29rRGF0YS5uYW1lLFxyXG4gICAgICAgICAgICBib29rRGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgYm9va0RhdGEuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBib29rRGF0YS51cGRhdGVkQXQsXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLndvcmRDb3VudCxcclxuICAgICAgICAgICAgYm9va0RhdGEuaXNEZWZhdWx0XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kQWxsKG9wdGlvbnM/OiBCb29rTGlzdE9wdGlvbnMpOiBQcm9taXNlPEJvb2tbXT4ge1xyXG4gICAgICAgIGNvbnN0IGJvb2tzRGF0YSA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEFsbEJvb2tzKCk7XHJcbiAgICAgICAgbGV0IGJvb2tzID0gYm9va3NEYXRhLm1hcChib29rRGF0YSA9PiBuZXcgQm9vayhcclxuICAgICAgICAgICAgYm9va0RhdGEuaWQsXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLm5hbWUsXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBib29rRGF0YS5jcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLnVwZGF0ZWRBdCxcclxuICAgICAgICAgICAgYm9va0RhdGEud29yZENvdW50LFxyXG4gICAgICAgICAgICBib29rRGF0YS5pc0RlZmF1bHRcclxuICAgICAgICApKTtcclxuXHJcbiAgICAgICAgLy8gXHVDNjM1XHVDMTU4XHVDNUQwIFx1QjUzMFx1Qjk3OCBcdUQ1NDRcdUQxMzBcdUI5QzFcclxuICAgICAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pbmNsdWRlRW1wdHkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBib29rcyA9IGJvb2tzLmZpbHRlcihib29rID0+ICFib29rLmlzRW1wdHkoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1QzgxNVx1QjgyQ1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zb3J0QnkpIHtcclxuICAgICAgICAgICAgICAgIGJvb2tzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhVmFsdWUgPSBhW29wdGlvbnMuc29ydEJ5IV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYlZhbHVlID0gYltvcHRpb25zLnNvcnRCeSFdO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYVZhbHVlID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgYlZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5zb3J0T3JkZXIgPT09ICdkZXNjJyA/IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYlZhbHVlLmxvY2FsZUNvbXBhcmUoYVZhbHVlKSA6IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLmxvY2FsZUNvbXBhcmUoYlZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhVmFsdWUgPT09ICdudW1iZXInICYmIHR5cGVvZiBiVmFsdWUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLnNvcnRPcmRlciA9PT0gJ2Rlc2MnID8gYlZhbHVlIC0gYVZhbHVlIDogYVZhbHVlIC0gYlZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdUQzOThcdUM3NzRcdUM5QzBcdUIxMjRcdUM3NzRcdUMxNThcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMub2Zmc2V0IHx8IG9wdGlvbnMubGltaXQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gb3B0aW9ucy5vZmZzZXQgfHwgMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IG9wdGlvbnMubGltaXQgPyBzdGFydCArIG9wdGlvbnMubGltaXQgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBib29rcyA9IGJvb2tzLnNsaWNlKHN0YXJ0LCBlbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYm9va3M7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBkYXRlKGlkOiBzdHJpbmcsIGJvb2s6IEJvb2spOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci51cGRhdGVCb29rKGlkLCBib29rLnRvUGxhaW5PYmplY3QoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVsZXRlKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5kZWxldGVCb29rKGlkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kRGVmYXVsdCgpOiBQcm9taXNlPEJvb2sgfCBudWxsPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEJ5SWQoJ2RlZmF1bHQnKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kQnlOYW1lKG5hbWU6IHN0cmluZyk6IFByb21pc2U8Qm9vayB8IG51bGw+IHtcclxuICAgICAgICBjb25zdCBib29rcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xyXG4gICAgICAgIHJldHVybiBib29rcy5maW5kKGJvb2sgPT4gYm9vay5uYW1lID09PSBuYW1lKSB8fCBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGV4aXN0cyhpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgY29uc3QgYm9vayA9IGF3YWl0IHRoaXMuZmluZEJ5SWQoaWQpO1xyXG4gICAgICAgIHJldHVybiBib29rICE9PSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNvdW50KCk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICAgICAgY29uc3QgYm9va3MgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcclxuICAgICAgICByZXR1cm4gYm9va3MubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFN0YXRpc3RpY3MoYm9va0lkOiBzdHJpbmcpOiBQcm9taXNlPEJvb2tTdGF0aXN0aWNzIHwgbnVsbD4ge1xyXG4gICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCB0aGlzLmZpbmRCeUlkKGJvb2tJZCk7XHJcbiAgICAgICAgaWYgKCFib29rKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRXb3Jkc0J5Qm9vayhib29rSWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHdvcmRzQnlEaWZmaWN1bHR5ID0ge1xyXG4gICAgICAgICAgICBlYXN5OiB3b3Jkcy5maWx0ZXIodyA9PiB3LmRpZmZpY3VsdHkgPT09ICdlYXN5JykubGVuZ3RoLFxyXG4gICAgICAgICAgICBnb29kOiB3b3Jkcy5maWx0ZXIodyA9PiB3LmRpZmZpY3VsdHkgPT09ICdnb29kJykubGVuZ3RoLFxyXG4gICAgICAgICAgICBoYXJkOiB3b3Jkcy5maWx0ZXIodyA9PiB3LmRpZmZpY3VsdHkgPT09ICdoYXJkJykubGVuZ3RoXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdG90YWxSZXZpZXdzID0gd29yZHMucmVkdWNlKChzdW0sIHdvcmQpID0+IHN1bSArIHdvcmQucmV2aWV3Q291bnQsIDApO1xyXG4gICAgICAgIGNvbnN0IGF2ZXJhZ2VSZXZpZXdDb3VudCA9IHdvcmRzLmxlbmd0aCA+IDAgPyB0b3RhbFJldmlld3MgLyB3b3Jkcy5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICBjb25zdCBsYXN0QWN0aXZpdHlEYXRlID0gd29yZHMubGVuZ3RoID4gMCA/IFxyXG4gICAgICAgICAgICBNYXRoLm1heCguLi53b3Jkcy5tYXAodyA9PiBuZXcgRGF0ZSh3Lmxhc3RSZXZpZXdlZCB8fCB3LmFkZGVkRGF0ZSkuZ2V0VGltZSgpKSkgOlxyXG4gICAgICAgICAgICBudWxsO1xyXG5cclxuICAgICAgICBjb25zdCBjb21wbGV0aW9uUGVyY2VudGFnZSA9IHdvcmRzLmxlbmd0aCA+IDAgP1xyXG4gICAgICAgICAgICAod29yZHNCeURpZmZpY3VsdHkuZWFzeSAvIHdvcmRzLmxlbmd0aCkgKiAxMDAgOiAwO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBib29rLFxyXG4gICAgICAgICAgICB0b3RhbFdvcmRzOiB3b3Jkcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIHdvcmRzQnlEaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICBhdmVyYWdlUmV2aWV3Q291bnQsXHJcbiAgICAgICAgICAgIGxhc3RBY3Rpdml0eURhdGU6IGxhc3RBY3Rpdml0eURhdGUgPyBuZXcgRGF0ZShsYXN0QWN0aXZpdHlEYXRlKS50b0lTT1N0cmluZygpIDogbnVsbCxcclxuICAgICAgICAgICAgY29tcGxldGlvblBlcmNlbnRhZ2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldEFsbFN0YXRpc3RpY3MoKTogUHJvbWlzZTxCb29rU3RhdGlzdGljc1tdPiB7XHJcbiAgICAgICAgY29uc3QgYm9va3MgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcclxuICAgICAgICBjb25zdCBzdGF0aXN0aWNzOiBCb29rU3RhdGlzdGljc1tdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBib29rIG9mIGJvb2tzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXQgPSBhd2FpdCB0aGlzLmdldFN0YXRpc3RpY3MoYm9vay5pZCk7XHJcbiAgICAgICAgICAgIGlmIChzdGF0KSB7XHJcbiAgICAgICAgICAgICAgICBzdGF0aXN0aWNzLnB1c2goc3RhdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHN0YXRpc3RpY3M7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0Q3VycmVudEJvb2soKTogUHJvbWlzZTxCb29rIHwgbnVsbD4ge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRCb29rID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0Q3VycmVudEJvb2soKTtcclxuICAgICAgICBpZiAoIWN1cnJlbnRCb29rKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxyXG4gICAgICAgICAgICBjdXJyZW50Qm9vay5pZCxcclxuICAgICAgICAgICAgY3VycmVudEJvb2submFtZSxcclxuICAgICAgICAgICAgY3VycmVudEJvb2suZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgY3VycmVudEJvb2sudXBkYXRlZEF0LFxyXG4gICAgICAgICAgICBjdXJyZW50Qm9vay53b3JkQ291bnQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLmlzRGVmYXVsdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2V0Q3VycmVudEJvb2soYm9va0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5zZXRDdXJyZW50Qm9vayhib29rSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWREYXRhKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmVEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNhdmVBbGxEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdmFsaWRhdGVCb29rTmFtZShuYW1lOiBzdHJpbmcsIGV4Y2x1ZGVJZD86IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IGJvb2tzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XHJcbiAgICAgICAgcmV0dXJuICFib29rcy5zb21lKGJvb2sgPT4gXHJcbiAgICAgICAgICAgIGJvb2submFtZSA9PT0gbmFtZSAmJiBcclxuICAgICAgICAgICAgKCFleGNsdWRlSWQgfHwgYm9vay5pZCAhPT0gZXhjbHVkZUlkKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgb25EYXRhQ2hhbmdlZChjYWxsYmFjazogKGJvb2tzOiBCb29rW10pID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QUQ2Q1x1RDYwNCAtIFx1QjA5OFx1QzkxMVx1QzVEMCBFdmVudEVtaXR0ZXIgXHVEMzI4XHVEMTM0XHVDNzNDXHVCODVDIFx1QUQ2Q1x1RDYwNFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XHJcbiAgICB9XHJcblxyXG4gICAgb2ZmRGF0YUNoYW5nZWQoY2FsbGJhY2s6IChib29rczogQm9va1tdKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzAgXHVBRDZDXHVENjA0XHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcclxuICAgIH1cclxuXHJcbiAgICBvbkN1cnJlbnRCb29rQ2hhbmdlZChjYWxsYmFjazogKGJvb2s6IEJvb2sgfCBudWxsKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUJDQzBcdUFDQkQgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XHJcbiAgICB9XHJcblxyXG4gICAgb2ZmQ3VycmVudEJvb2tDaGFuZ2VkKGNhbGxiYWNrOiAoYm9vazogQm9vayB8IG51bGwpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkNDMFx1QUNCRCBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQsIEJvb2sgfSBmcm9tICcuLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIG5vcm1hbGl6ZVBhdGggfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERhdGFiYXNlRGF0YSB7XHJcbiAgICBib29rczogQm9va1tdO1xyXG4gICAgd29yZHM6IFZvY2FidWxhcnlDYXJkW107XHJcbiAgICBzZXR0aW5nczoge1xyXG4gICAgICAgIGRhaWx5R29hbDogbnVtYmVyO1xyXG4gICAgICAgIHJldmlld0ludGVydmFsOiBudW1iZXI7XHJcbiAgICAgICAgY3VycmVudEJvb2tJZDogc3RyaW5nO1xyXG4gICAgfTtcclxuICAgIHN0YXRpc3RpY3M6IHtcclxuICAgICAgICB0b3RhbFJldmlld3M6IG51bWJlcjtcclxuICAgICAgICBzdHJlYWtEYXlzOiBudW1iZXI7XHJcbiAgICAgICAgbGFzdFN0dWR5RGF0ZTogc3RyaW5nIHwgbnVsbDtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcbiAgICBwcml2YXRlIGJvb2tzOiBNYXA8c3RyaW5nLCBCb29rPiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgd29yZHM6IE1hcDxzdHJpbmcsIFZvY2FidWxhcnlDYXJkPiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgZGFpbHlHb2FsOiAxMCxcclxuICAgICAgICByZXZpZXdJbnRlcnZhbDogMSxcclxuICAgICAgICBjdXJyZW50Qm9va0lkOiAnZGVmYXVsdCdcclxuICAgIH07XHJcbiAgICBwcml2YXRlIHN0YXRpc3RpY3MgPSB7XHJcbiAgICAgICAgdG90YWxSZXZpZXdzOiAwLFxyXG4gICAgICAgIHN0cmVha0RheXM6IDAsXHJcbiAgICAgICAgbGFzdFN0dWR5RGF0ZTogbnVsbCBhcyBzdHJpbmcgfCBudWxsXHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBzYXZlQ2FsbGJhY2s6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIHZvY2FidWxhcnlGb2xkZXJQYXRoID0gJ1ZvY2FidWxhcnknO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzYXZlQ2FsbGJhY2s6ICgpID0+IHZvaWQsIGZvbGRlclBhdGg/OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjayA9IHNhdmVDYWxsYmFjaztcclxuICAgICAgICBpZiAoZm9sZGVyUGF0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRoID0gZm9sZGVyUGF0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplVm9jYWJ1bGFyeUZvbGRlcigpO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRCb29rKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NCBcdUNEMDhcdUFFMzBcdUQ2NTRcclxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVZvY2FidWxhcnlGb2xkZXIoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVEM0Y0XHVCMzU0XHVBQzAwIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUFDRTAgVEZvbGRlciBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTRcdUM3NzggXHVBQ0JEXHVDNkIwXHJcbiAgICAgICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUJCQzBcdUI4NUMgXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVEM0Y0XHVCMzU0XHVBQzAwIFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QzlDMCBcdUM1NEFcdUIyOTQgXHVBQ0JEXHVDNkIwXHVDNUQwXHVCOUNDIFx1QzBERFx1QzEzMVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIodGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIFx1RDNGNFx1QjM1NFx1QUMwMCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0IFx1QUNCRFx1QzZCMFx1QjI5NCBcdUM4MTVcdUMwQzFcdUM4MDFcdUM3NzggXHVDMEMxXHVENjY5XHVDNzc0XHVCQkMwXHVCODVDIFx1QUNCRFx1QUNFMFx1QjlDQyBcdUNEOUNcdUI4MjVcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2FscmVhZHkgZXhpc3RzJykgfHwgXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdmb2xkZXIgYWxyZWFkeSBleGlzdHMnKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnYWxyZWFkeSBwcmVzZW50JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVEM0Y0XHVCMzU0XHVBQzAwIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTQgXHVBQ0JEXHVDNkIwIChcdUM4MTVcdUMwQzEpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NCBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NCBcdUMwRERcdUMxMzEgXHVDOTExIFx1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQ6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QUUzMFx1QkNGOCBib29rIFx1Q0QwOFx1QUUzMFx1RDY1NFxyXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplRGVmYXVsdEJvb2soKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJvb2tzLmhhcygnZGVmYXVsdCcpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRCb29rOiBCb29rID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6ICdkZWZhdWx0JyxcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1JyxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc4NVx1QjJDOFx1QjJFNC4nLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHdvcmRDb3VudDogMCxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmJvb2tzLnNldCgnZGVmYXVsdCcsIGRlZmF1bHRCb29rKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShkZWZhdWx0Qm9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEJvb2tcdUM3NDQgTUQgXHVEMzBDXHVDNzdDXHVCODVDIFx1QzgwMFx1QzdBNVxyXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlQm9va1RvRmlsZShib29rOiBCb29rKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtib29rLm5hbWUucmVwbGFjZSgvWzw+OlwiL1xcXFx8PypdL2csICdfJyl9Lm1kYDtcclxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9va1x1Qzc1OCBcdUIyRThcdUM1QjRcdUI0RTQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXHJcbiAgICAgICAgY29uc3QgYm9va1dvcmRzID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IGJvb2suaWQpXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLndvcmQubG9jYWxlQ29tcGFyZShiLndvcmQpKTtcclxuXHJcbiAgICAgICAgLy8gWUFNTCBmcm9udG1hdHRlciBcdUMwRERcdUMxMzFcclxuICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IFtcclxuICAgICAgICAgICAgJy0tLScsXHJcbiAgICAgICAgICAgIGBib29rSWQ6ICR7Ym9vay5pZH1gLFxyXG4gICAgICAgICAgICBgbmFtZTogXCIke2Jvb2submFtZX1cImAsXHJcbiAgICAgICAgICAgIGBkZXNjcmlwdGlvbjogXCIke2Jvb2suZGVzY3JpcHRpb259XCJgLFxyXG4gICAgICAgICAgICBgY3JlYXRlZEF0OiAke2Jvb2suY3JlYXRlZEF0fWAsXHJcbiAgICAgICAgICAgIGB1cGRhdGVkQXQ6ICR7Ym9vay51cGRhdGVkQXR9YCxcclxuICAgICAgICAgICAgYHdvcmRDb3VudDogJHtib29rV29yZHMubGVuZ3RofWAsXHJcbiAgICAgICAgICAgIGBpc0RlZmF1bHQ6ICR7Ym9vay5pc0RlZmF1bHR9YCxcclxuICAgICAgICAgICAgJy0tLScsXHJcbiAgICAgICAgICAgICcnXHJcbiAgICAgICAgXS5qb2luKCdcXG4nKTtcclxuXHJcbiAgICAgICAgLy8gXHVCOUM4XHVEMDZDXHVCMkU0XHVDNkI0IFx1Q0Y1OFx1RDE1MFx1Q0UyMCBcdUMwRERcdUMxMzFcclxuICAgICAgICBsZXQgY29udGVudCA9IGZyb250bWF0dGVyO1xyXG4gICAgICAgIGNvbnRlbnQgKz0gYCMgJHtib29rLm5hbWV9XFxuXFxuYDtcclxuICAgICAgICBjb250ZW50ICs9IGAke2Jvb2suZGVzY3JpcHRpb259XFxuXFxuYDtcclxuICAgICAgICBjb250ZW50ICs9IGAjIyBcdUIyRThcdUM1QjQgXHVCQUE5XHVCODVEICgke2Jvb2tXb3Jkcy5sZW5ndGh9XHVBQzFDKVxcblxcbmA7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiBib29rV29yZHMpIHtcclxuICAgICAgICAgICAgY29udGVudCArPSBgIyMjICR7d29yZC53b3JkfVxcblxcbmA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAod29yZC5wcm9udW5jaWF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAqKlx1QkMxQ1x1Qzc0QzoqKiAke3dvcmQucHJvbnVuY2lhdGlvbn1cXG5cXG5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAqKlx1QjczQjoqKlxcbmA7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbWVhbmluZyBvZiB3b3JkLm1lYW5pbmdzKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtICR7bWVhbmluZ31cXG5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gJ1xcbic7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAod29yZC5zaW1pbGFyV29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgKipcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0OioqICR7d29yZC5zaW1pbGFyV29yZHMuam9pbignLCAnKX1cXG5cXG5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAod29yZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAqKlx1QzYwOFx1QkIzODoqKlxcbmA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV4YW1wbGUgb2Ygd29yZC5leGFtcGxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gJHtleGFtcGxlLmVuZ2xpc2h9XFxuYDtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAgIC0gJHtleGFtcGxlLmtvcmVhbn1cXG5gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSAnXFxuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QzgxNVx1QkNGNFxyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAqKlx1QkNGNVx1QzJCNSBcdUM4MTVcdUJDRjQ6KipcXG5gO1xyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTg6ICR7d29yZC5yZXZpZXdDb3VudH1cXG5gO1xyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QjA5Q1x1Qzc3NFx1QjNDNDogJHt3b3JkLmRpZmZpY3VsdHl9XFxuYDtcclxuICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQ0Y1XHVDMkI1OiAke3dvcmQubGFzdFJldmlld2VkIHx8ICdcdUM1QzZcdUM3NEMnfVxcbmA7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVDRDk0XHVBQzAwXHVDNzdDOiAke3dvcmQuYWRkZWREYXRlfVxcbmA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUMyQTRcdUQzOThcdUM3NzRcdUMyQTRcdUI0REMgXHVCOUFDXHVENTNDXHVEMkYwXHVDMTU4IFx1QzgxNVx1QkNGNFxyXG4gICAgICAgICAgICBpZiAod29yZC5zY2hlZHVsZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYFxcbioqXHVDMkE0XHVEMzk4XHVDNzc0XHVDMkE0XHVCNERDIFx1QjlBQ1x1RDUzQ1x1RDJGMFx1QzE1ODoqKlxcbmA7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QjJFNFx1Qzc0QyBcdUJDRjVcdUMyQjVcdUM3N0M6ICR7d29yZC5zY2hlZHVsZUluZm8uZHVlRGF0ZX1cXG5gO1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUJDRjVcdUMyQjUgXHVBQzA0XHVBQ0E5OiAke3dvcmQuc2NoZWR1bGVJbmZvLmludGVydmFsfVx1Qzc3Q1xcbmA7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QzZBOVx1Qzc3NFx1QjNDNDogJHt3b3JkLnNjaGVkdWxlSW5mby5lYXNlfVxcbmA7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QzJFNFx1RDMyOCBcdUQ2OUZcdUMyMTg6ICR7d29yZC5zY2hlZHVsZUluZm8ubGFwc2VDb3VudH1cXG5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb250ZW50ICs9ICdcXG4tLS1cXG5cXG4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmdGaWxlLCBjb250ZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBjb250ZW50KTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVEMzBDXHVDNzdDXHVDNzc0IFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NUNcdUIyRTRcdUJBNzQgbW9kaWZ5XHVCODVDIFx1QzdBQ1x1QzJEQ1x1QjNDNFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2FscmVhZHkgZXhpc3RzJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1RDMwQ1x1Qzc3Q1x1Qzc3NCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVDOUMwXHVCOUNDIFRGaWxlXHVDNzc0IFx1QzU0NFx1QjJDQyBcdUFDQkRcdUM2QjAgKFx1QzYwODogXHVEM0Y0XHVCMzU0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVDNzc0XHVCMjk0IFx1QzgxNVx1QzBDMVx1QzgwMVx1Qzc3OCBcdUMwQzFcdUQ2NjlcdUM3N0MgXHVDMjE4IFx1Qzc4OFx1QzczQ1x1QkJDMFx1Qjg1QyBcdUM4NzBcdUM2QTlcdUQ3ODggXHVDQzk4XHVCOUFDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDIFx1QzgwMFx1QzdBNSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzMENcdUM3N0MgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1EIFx1RDMwQ1x1Qzc3Q1x1QzVEMFx1QzExQyBCb29rXHVBQ0ZDIFx1QjJFOFx1QzVCNFx1QjRFNCBcdUI4NUNcdUI0RENcclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZEJvb2tGcm9tRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICBjb25zdCB7IGZyb250bWF0dGVyLCBib2R5IH0gPSB0aGlzLnBhcnNlTURGaWxlKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFmcm9udG1hdHRlci5ib29rSWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIC8vIEJvb2sgXHVDODE1XHVCQ0Y0IFx1QkNGNVx1QzZEMFxyXG4gICAgICAgICAgICBjb25zdCBib29rOiBCb29rID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGZyb250bWF0dGVyLmJvb2tJZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGZyb250bWF0dGVyLm5hbWUgfHwgZmlsZS5iYXNlbmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBmcm9udG1hdHRlci5kZXNjcmlwdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogZnJvbnRtYXR0ZXIuY3JlYXRlZEF0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogZnJvbnRtYXR0ZXIudXBkYXRlZEF0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHdvcmRDb3VudDogZnJvbnRtYXR0ZXIud29yZENvdW50IHx8IDAsXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGZyb250bWF0dGVyLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5ib29rcy5zZXQoYm9vay5pZCwgYm9vayk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUI0RTQgXHVEMzBDXHVDMkYxXHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5wYXJzZVdvcmRzRnJvbU1hcmtkb3duKGJvZHksIGJvb2suaWQpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud29yZHMuc2V0KHdvcmQud29yZC50b0xvd2VyQ2FzZSgpLCB3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzMENcdUM3N0MgXHVCODVDXHVCNERDIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1EIFx1RDMwQ1x1Qzc3QyBcdUQzMENcdUMyRjEgKGZyb250bWF0dGVyXHVDNjQwIGJvZHkgXHVCRDg0XHVCOUFDKVxyXG4gICAgcHJpdmF0ZSBwYXJzZU1ERmlsZShjb250ZW50OiBzdHJpbmcpOiB7IGZyb250bWF0dGVyOiBhbnksIGJvZHk6IHN0cmluZyB9IHtcclxuICAgICAgICBjb25zdCBmcm9udG1hdHRlclJlZ2V4ID0gL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS1cXG4oW1xcc1xcU10qKSQvO1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaChmcm9udG1hdHRlclJlZ2V4KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIW1hdGNoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGZyb250bWF0dGVyOiB7fSwgYm9keTogY29udGVudCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBmcm9udG1hdHRlclRleHQgPSBtYXRjaFsxXTtcclxuICAgICAgICBjb25zdCBib2R5ID0gbWF0Y2hbMl07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVBQzA0XHVCMkU4XHVENTVDIFlBTUwgXHVEMzBDXHVDMkYxXHJcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXI6IGFueSA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXJUZXh0LnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sb25JbmRleCA9IGxpbmUuaW5kZXhPZignOicpO1xyXG4gICAgICAgICAgICBpZiAoY29sb25JbmRleCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGxpbmUuc3Vic3RyaW5nKDAsIGNvbG9uSW5kZXgpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGxpbmUuc3Vic3RyaW5nKGNvbG9uSW5kZXggKyAxKS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1QjUzMFx1QzYzNFx1RDQ1QyBcdUM4MUNcdUFDNzBcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIHZhbHVlLmVuZHNXaXRoKCdcIicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgxLCAtMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1RDBDMFx1Qzc4NSBcdUJDQzBcdUQ2NThcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSBmcm9udG1hdHRlcltrZXldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSAnZmFsc2UnKSBmcm9udG1hdHRlcltrZXldID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNOYU4oTnVtYmVyKHZhbHVlKSkpIGZyb250bWF0dGVyW2tleV0gPSBOdW1iZXIodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBmcm9udG1hdHRlcltrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHsgZnJvbnRtYXR0ZXIsIGJvZHkgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUI5QzhcdUQwNkNcdUIyRTRcdUM2QjRcdUM1RDBcdUMxMUMgXHVCMkU4XHVDNUI0XHVCNEU0IFx1RDMwQ1x1QzJGMVxyXG4gICAgcHJpdmF0ZSBwYXJzZVdvcmRzRnJvbU1hcmtkb3duKG1hcmtkb3duOiBzdHJpbmcsIGJvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgY29uc3Qgd29yZHM6IFZvY2FidWxhcnlDYXJkW10gPSBbXTtcclxuICAgICAgICBjb25zdCB3b3JkU2VjdGlvbnMgPSBtYXJrZG93bi5zcGxpdCgnLS0tJykuZmlsdGVyKHNlY3Rpb24gPT4gc2VjdGlvbi50cmltKCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiB3b3JkU2VjdGlvbnMpIHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHRoaXMucGFyc2VXb3JkU2VjdGlvbihzZWN0aW9uLCBib29rSWQpO1xyXG4gICAgICAgICAgICBpZiAod29yZCkge1xyXG4gICAgICAgICAgICAgICAgd29yZHMucHVzaCh3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gd29yZHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVBQzFDXHVCQ0M0IFx1QjJFOFx1QzVCNCBcdUMxMzlcdUMxNTggXHVEMzBDXHVDMkYxXHJcbiAgICBwcml2YXRlIHBhcnNlV29yZFNlY3Rpb24oc2VjdGlvbjogc3RyaW5nLCBib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkIHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBzZWN0aW9uLnNwbGl0KCdcXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSk7XHJcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHdvcmQgPSAnJztcclxuICAgICAgICBsZXQgcHJvbnVuY2lhdGlvbiA9ICcnO1xyXG4gICAgICAgIGNvbnN0IG1lYW5pbmdzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNpbWlsYXJXb3Jkczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBjb25zdCBleGFtcGxlczogeyBlbmdsaXNoOiBzdHJpbmc7IGtvcmVhbjogc3RyaW5nIH1bXSA9IFtdO1xyXG4gICAgICAgIGxldCByZXZpZXdDb3VudCA9IDA7XHJcbiAgICAgICAgbGV0IGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJyA9ICdnb29kJztcclxuICAgICAgICBsZXQgbGFzdFJldmlld2VkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBsZXQgYWRkZWREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIGxldCBzY2hlZHVsZUluZm86IGFueSA9IHVuZGVmaW5lZDtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgY3VycmVudFNlY3Rpb24gPSAnJztcclxuICAgICAgICBsZXQgY3VycmVudEV4YW1wbGU6IHsgZW5nbGlzaD86IHN0cmluZzsga29yZWFuPzogc3RyaW5nIH0gPSB7fTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QkE4NSBcdUNEOTRcdUNEOUMgKCMjIyBcdUQ1RTRcdUIzNTQpXHJcbiAgICAgICAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcjIyMgJykpIHtcclxuICAgICAgICAgICAgICAgIHdvcmQgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoNCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QzEzOVx1QzE1OCBcdUFENkNcdUJEODRcclxuICAgICAgICAgICAgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVCQzFDXHVDNzRDOioqJykpIHtcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb24gPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoNykudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAncHJvbnVuY2lhdGlvbic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUI3M0I6KionKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAnbWVhbmluZ3MnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNDoqKicpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaW1pbGFyV29yZHNUZXh0ID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDEyKS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHMucHVzaCguLi5zaW1pbGFyV29yZHNUZXh0LnNwbGl0KCcsJykubWFwKHcgPT4gdy50cmltKCkpKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ3NpbWlsYXInO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVDNjA4XHVCQjM4OioqJykpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ2V4YW1wbGVzJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcqKlx1QkNGNVx1QzJCNSBcdUM4MTVcdUJDRjQ6KionKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAncmV2aWV3JztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcqKlx1QzJBNFx1RDM5OFx1Qzc3NFx1QzJBNFx1QjREQyBcdUI5QUNcdUQ1M0NcdUQyRjBcdUMxNTg6KionKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAnc3BhY2VkLXJlcGV0aXRpb24nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnbWVhbmluZ3MnICYmIHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gJykpIHtcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzLnB1c2godHJpbW1lZExpbmUuc3Vic3RyaW5nKDIpLnRyaW0oKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdleGFtcGxlcycpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QjRFNFx1QzVFQ1x1QzRGMFx1QUUzMFx1Qjk3QyBcdUFDRTBcdUI4MjRcdUQ1NUMgXHVDNjA4XHVCQjM4IFx1RDMwQ1x1QzJGMVxyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnLSAnKSAmJiAhbGluZS5zdGFydHNXaXRoKCcgIC0gJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IChcdUI0RTRcdUM1RUNcdUM0RjBcdUFFMzAgXHVDNUM2XHVDNzRDKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RXhhbXBsZS5lbmdsaXNoICYmIGN1cnJlbnRFeGFtcGxlLmtvcmVhbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6IGN1cnJlbnRFeGFtcGxlLmVuZ2xpc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46IGN1cnJlbnRFeGFtcGxlLmtvcmVhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEV4YW1wbGUgPSB7IGVuZ2xpc2g6IGxpbmUuc3Vic3RyaW5nKDIpLnRyaW0oKSB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJyAgLSAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgKDJcdUNFNzggXHVCNEU0XHVDNUVDXHVDNEYwXHVBRTMwKVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFeGFtcGxlLmtvcmVhbiA9IGxpbmUuc3Vic3RyaW5nKDQpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U2VjdGlvbiA9PT0gJ3JldmlldycpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTg6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV2aWV3Q291bnQgPSBwYXJzZUludCh0cmltbWVkTGluZS5zdWJzdHJpbmcoOSkudHJpbSgpKSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QjA5Q1x1Qzc3NFx1QjNDNDogJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWZmID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDcpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZiA9PT0gJ2Vhc3knIHx8IGRpZmYgPT09ICdnb29kJyB8fCBkaWZmID09PSAnaGFyZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eSA9IGRpZmY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDRjVcdUMyQjU6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFJldiA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZygxMSkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RSZXZpZXdlZCA9IGxhc3RSZXYgPT09ICdcdUM1QzZcdUM3NEMnID8gbnVsbCA6IGxhc3RSZXY7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVDRDk0XHVBQzAwXHVDNzdDOiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZGVkRGF0ZSA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZyg3KS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdzcGFjZWQtcmVwZXRpdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGlmICghc2NoZWR1bGVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSBcdUIyRTRcdUM3NEMgXHVCQ0Y1XHVDMkI1XHVDNzdDOiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlSW5mby5kdWVEYXRlID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDEwKS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVCQ0Y1XHVDMkI1IFx1QUMwNFx1QUNBOTogJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnZhbFRleHQgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoOCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlSW5mby5pbnRlcnZhbCA9IHBhcnNlSW50KGludGVydmFsVGV4dC5yZXBsYWNlKCdcdUM3N0MnLCAnJykpIHx8IDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVDNkE5XHVDNzc0XHVCM0M0OiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlSW5mby5lYXNlID0gcGFyc2VJbnQodHJpbW1lZExpbmUuc3Vic3RyaW5nKDcpLnRyaW0oKSkgfHwgMjUwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QzJFNFx1RDMyOCBcdUQ2OUZcdUMyMTg6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvLmxhcHNlQ291bnQgPSBwYXJzZUludCh0cmltbWVkTGluZS5zdWJzdHJpbmcoOSkudHJpbSgpKSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUM2MDhcdUJCMzggXHVDQzk4XHVCOUFDXHJcbiAgICAgICAgaWYgKGN1cnJlbnRFeGFtcGxlLmVuZ2xpc2ggJiYgY3VycmVudEV4YW1wbGUua29yZWFuKSB7XHJcbiAgICAgICAgICAgIGV4YW1wbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZW5nbGlzaDogY3VycmVudEV4YW1wbGUuZW5nbGlzaCxcclxuICAgICAgICAgICAgICAgIGtvcmVhbjogY3VycmVudEV4YW1wbGUua29yZWFuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF3b3JkKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3b3JkOiB3b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgIHByb251bmNpYXRpb24sXHJcbiAgICAgICAgICAgIG1lYW5pbmdzLFxyXG4gICAgICAgICAgICBzaW1pbGFyV29yZHMsXHJcbiAgICAgICAgICAgIGV4YW1wbGVzLFxyXG4gICAgICAgICAgICByZXZpZXdDb3VudCxcclxuICAgICAgICAgICAgZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgbGFzdFJldmlld2VkLFxyXG4gICAgICAgICAgICBhZGRlZERhdGUsXHJcbiAgICAgICAgICAgIGJvb2tJZCxcclxuICAgICAgICAgICAgc2NoZWR1bGVJbmZvXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDMwQ1x1Qzc3QyBcdUI4NUNcdUI0RENcclxuICAgIGFzeW5jIGxvYWRBbGxCb29rcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLmJvb2tzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy53b3Jkcy5jbGVhcigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVZvY2FidWxhcnlGb2xkZXIoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVEZWZhdWx0Qm9vaygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRoKTtcclxuICAgICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkQm9va0Zyb21GaWxlKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNSBcdUQzMENcdUM3N0MgXHVCODVDXHVCNERDXHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUMxMjRcdUM4MTUgXHVEMzBDXHVDNzdDIFx1QzgwMFx1QzdBNS9cdUI4NUNcdUI0RENcclxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aH0vc2V0dGluZ3MuanNvbmApO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzLFxyXG4gICAgICAgICAgICBzdGF0aXN0aWNzOiB0aGlzLnN0YXRpc3RpY3NcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzZXR0aW5nc1BhdGgpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShleGlzdGluZ0ZpbGUsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHNldHRpbmdzUGF0aCwgY29udGVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUMxMjRcdUM4MTUgXHVEMzBDXHVDNzdDIFx1QzgwMFx1QzdBNSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGxvYWRTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBzZXR0aW5nc1BhdGggPSBub3JtYWxpemVQYXRoKGAke3RoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGh9L3NldHRpbmdzLmpzb25gKTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNldHRpbmdzUGF0aCk7XHJcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4uZGF0YS5zZXR0aW5ncyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdGlzdGljcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGlzdGljcyA9IHsgLi4udGhpcy5zdGF0aXN0aWNzLCAuLi5kYXRhLnN0YXRpc3RpY3MgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignXHVDMTI0XHVDODE1IFx1RDMwQ1x1Qzc3QyBcdUI4NUNcdUI0REMgXHVDMkU0XHVEMzI4LCBcdUFFMzBcdUJDRjhcdUFDMTIgXHVDMEFDXHVDNkE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQm9vayBcdUFEMDBcdUI5QUMgXHVCQTU0XHVDMTFDXHVCNERDXHVCNEU0XHJcbiAgICBhc3luYyBjcmVhdGVCb29rKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZyA9ICcnKTogUHJvbWlzZTxCb29rPiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSBgYm9va18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XHJcbiAgICAgICAgY29uc3QgYm9vazogQm9vayA9IHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHdvcmRDb3VudDogMCxcclxuICAgICAgICAgICAgaXNEZWZhdWx0OiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5ib29rcy5zZXQoaWQsIGJvb2spO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgICAgICByZXR1cm4gYm9vaztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1cGRhdGVCb29rKGJvb2tJZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPEJvb2s+KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XHJcbiAgICAgICAgaWYgKCFib29rKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQm9vayBcIiR7Ym9va0lkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEJvb2s6IEJvb2sgPSB7XHJcbiAgICAgICAgICAgIC4uLmJvb2ssXHJcbiAgICAgICAgICAgIC4uLnVwZGF0ZXMsXHJcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5ib29rcy5zZXQoYm9va0lkLCB1cGRhdGVkQm9vayk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZSh1cGRhdGVkQm9vayk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGVCb29rKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKGJvb2tJZCA9PT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc0MCBcdUMwQURcdUM4MUNcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldChib29rSWQpO1xyXG4gICAgICAgIGlmICghYm9vaykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJvb2sgXCIke2Jvb2tJZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGJvb2tcdUM1RDAgXHVDMThEXHVENTVDIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDXHJcbiAgICAgICAgY29uc3Qgd29yZHNUb0RlbGV0ZSA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSBib29rSWQpXHJcbiAgICAgICAgICAgIC5tYXAod29yZCA9PiB3b3JkLndvcmQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkc1RvRGVsZXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMud29yZHMuZGVsZXRlKHdvcmQudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBib29rIFx1QzBBRFx1QzgxQ1xyXG4gICAgICAgIHRoaXMuYm9va3MuZGVsZXRlKGJvb2tJZCk7XHJcblxyXG4gICAgICAgIC8vIFx1RDMwQ1x1Qzc3QyBcdUMwQURcdUM4MUNcclxuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke2Jvb2submFtZS5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgJ18nKX0ubWRgO1xyXG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWApO1xyXG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIudHJhc2hGaWxlKGZpbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIGJvb2tcdUM3NzQgXHVDMEFEXHVDODFDXHVCNDFDIGJvb2tcdUM3NzRcdUJBNzQgXHVBRTMwXHVCQ0Y4IGJvb2tcdUM3M0NcdUI4NUMgXHVCQ0MwXHVBQ0JEXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCA9PT0gYm9va0lkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCA9ICdkZWZhdWx0JztcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsQm9va3MoKTogQm9va1tdIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmJvb2tzLnZhbHVlcygpKS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhLmlzRGVmYXVsdCkgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICBpZiAoYi5pc0RlZmF1bHQpIHJldHVybiAxO1xyXG4gICAgICAgICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRCb29rKGJvb2tJZDogc3RyaW5nKTogQm9vayB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q3VycmVudEJvb2soKTogQm9vayB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9va3MuZ2V0KHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2V0Q3VycmVudEJvb2soYm9va0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoIXRoaXMuYm9va3MuaGFzKGJvb2tJZCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCb29rIFwiJHtib29rSWR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCA9IGJvb2tJZDtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQm9va1x1QkNDNCBcdUIyRThcdUM1QjQgXHVDMjE4IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgcHJpdmF0ZSB1cGRhdGVCb29rV29yZENvdW50KGJvb2tJZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgd29yZENvdW50ID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IGJvb2tJZCkubGVuZ3RoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldChib29rSWQpO1xyXG4gICAgICAgIGlmIChib29rKSB7XHJcbiAgICAgICAgICAgIGJvb2sud29yZENvdW50ID0gd29yZENvdW50O1xyXG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMFxyXG4gICAgYXN5bmMgYWRkV29yZCh3b3JkRGF0YTogVm9jYWJ1bGFyeUNhcmQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB3b3JkID0gd29yZERhdGEud29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLndvcmRzLmhhcyh3b3JkKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZERhdGEud29yZH1cIlx1QjI5NCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTY5XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbmV3V29yZDogVm9jYWJ1bGFyeUNhcmQgPSB7XHJcbiAgICAgICAgICAgIC4uLndvcmREYXRhLFxyXG4gICAgICAgICAgICB3b3JkOiB3b3JkRGF0YS53b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgIHJldmlld0NvdW50OiAwLFxyXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiAnZ29vZCcsXHJcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbnVsbCxcclxuICAgICAgICAgICAgYWRkZWREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIGJvb2tJZDogd29yZERhdGEuYm9va0lkIHx8IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMud29yZHMuc2V0KHdvcmQsIG5ld1dvcmQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQobmV3V29yZC5ib29rSWQpO1xyXG4gICAgICAgIGlmIChib29rKSB7XHJcbiAgICAgICAgICAgIGJvb2sud29yZENvdW50Kys7XHJcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGJvb2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUNcclxuICAgIGFzeW5jIHJlbW92ZVdvcmQod29yZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgd29yZEtleSA9IHdvcmQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBjb25zdCB3b3JkRGF0YSA9IHRoaXMud29yZHMuZ2V0KHdvcmRLZXkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghd29yZERhdGEpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBib29rSWQgPSB3b3JkRGF0YS5ib29rSWQ7XHJcbiAgICAgICAgdGhpcy53b3Jkcy5kZWxldGUod29yZEtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2sgXHVEMzBDXHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldChib29rSWQpO1xyXG4gICAgICAgIGlmIChib29rKSB7XHJcbiAgICAgICAgICAgIGJvb2sud29yZENvdW50LS07XHJcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGJvb2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggKFx1QkNGNVx1QzJCNSBcdUFDQjBcdUFDRkMpXHJcbiAgICBhc3luYyB1cGRhdGVXb3JkKHdvcmQ6IHN0cmluZywgZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgd29yZEtleSA9IHdvcmQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBjb25zdCB3b3JkRGF0YSA9IHRoaXMud29yZHMuZ2V0KHdvcmRLZXkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghd29yZERhdGEpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3b3JkRGF0YS5yZXZpZXdDb3VudCsrO1xyXG4gICAgICAgIHdvcmREYXRhLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5O1xyXG4gICAgICAgIHdvcmREYXRhLmxhc3RSZXZpZXdlZCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgLy8gXHVEMUI1XHVBQ0M0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIHRoaXMuc3RhdGlzdGljcy50b3RhbFJldmlld3MrKztcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0cmVhaygpO1xyXG5cclxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9vayBcdUQzMENcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KHdvcmREYXRhLmJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IChcdUJDRjVcdUMyQjUgXHVBQ0IwXHVBQ0ZDICsgXHVDMkE0XHVEMzk4XHVDNzc0XHVDMkE0XHVCNERDIFx1QjlBQ1x1RDUzQ1x1RDJGMFx1QzE1OCBcdUM4MTVcdUJDRjQpXHJcbiAgICBhc3luYyB1cGRhdGVXb3JkV2l0aFNjaGVkdWxlKFxyXG4gICAgICAgIHdvcmQ6IHN0cmluZywgXHJcbiAgICAgICAgZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnLCBcclxuICAgICAgICBzY2hlZHVsZUluZm8/OiBhbnlcclxuICAgICk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmRLZXkgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3Qgd29yZERhdGEgPSB0aGlzLndvcmRzLmdldCh3b3JkS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXdvcmREYXRhKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd29yZERhdGEucmV2aWV3Q291bnQrKztcclxuICAgICAgICB3b3JkRGF0YS5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eTtcclxuICAgICAgICB3b3JkRGF0YS5sYXN0UmV2aWV3ZWQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMkE0XHVEMzk4XHVDNzc0XHVDMkE0XHVCNERDIFx1QjlBQ1x1RDUzQ1x1RDJGMFx1QzE1OCBcdUM4MTVcdUJDRjQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKHNjaGVkdWxlSW5mbykge1xyXG4gICAgICAgICAgICB3b3JkRGF0YS5zY2hlZHVsZUluZm8gPSBzY2hlZHVsZUluZm87XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUQxQjVcdUFDQzQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnRvdGFsUmV2aWV3cysrO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RyZWFrKCk7XHJcblxyXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQod29yZERhdGEuYm9va0lkKTtcclxuICAgICAgICBpZiAoYm9vaykge1xyXG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUM4MDRcdUNDQjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOCAoTExNIEFQSVx1Qjg1QyBcdUFDMDBcdUM4MzhcdUM2MjggXHVDODE1XHVCQ0Y0XHVCODVDIFx1QjM2RVx1QzVCNFx1QzRGMFx1QUUzMClcclxuICAgIGFzeW5jIHVwZGF0ZVdvcmREYXRhKHdvcmQ6IHN0cmluZywgdXBkYXRlZFdvcmREYXRhOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmRLZXkgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdXb3JkID0gdGhpcy53b3Jkcy5nZXQod29yZEtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFleGlzdGluZ1dvcmQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVCMkU4XHVDNUI0XHVDNzU4IFx1QkNGNVx1QzJCNSBcdUFEMDBcdUI4MjggXHVDODE1XHVCQ0Y0XHVCMjk0IFx1QzcyMFx1QzlDMFx1RDU1OFx1QUNFMCwgXHVCNzNCIFx1QzgxNVx1QkNGNFx1QjlDQyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBjb25zdCB1cGRhdGVkV29yZDogVm9jYWJ1bGFyeUNhcmQgPSB7XHJcbiAgICAgICAgICAgIC4uLnVwZGF0ZWRXb3JkRGF0YSxcclxuICAgICAgICAgICAgd29yZDogd29yZEtleSxcclxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IGV4aXN0aW5nV29yZC5yZXZpZXdDb3VudCxcclxuICAgICAgICAgICAgZGlmZmljdWx0eTogZXhpc3RpbmdXb3JkLmRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogZXhpc3RpbmdXb3JkLmxhc3RSZXZpZXdlZCxcclxuICAgICAgICAgICAgYWRkZWREYXRlOiBleGlzdGluZ1dvcmQuYWRkZWREYXRlLFxyXG4gICAgICAgICAgICBib29rSWQ6IGV4aXN0aW5nV29yZC5ib29rSWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLndvcmRzLnNldCh3b3JkS2V5LCB1cGRhdGVkV29yZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2sgXHVEMzBDXHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldCh1cGRhdGVkV29yZC5ib29rSWQpO1xyXG4gICAgICAgIGlmIChib29rKSB7XHJcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGJvb2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OENcclxuICAgIGdldFdvcmQod29yZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndvcmRzLmdldCh3b3JkLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDYwNFx1QzdBQyBib29rXHVDNzU4IFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXHJcbiAgICBnZXRBbGxXb3JkcygpOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZClcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEud29yZC5sb2NhbGVDb21wYXJlKGIud29yZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDJCOVx1QzgxNSBib29rXHVDNzU4IFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXHJcbiAgICBnZXRXb3Jkc0J5Qm9vayhib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gYm9va0lkKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS53b3JkLmxvY2FsZUNvbXBhcmUoYi53b3JkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QjMwMFx1QzBDMSBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDIChcdUQ2MDRcdUM3QUMgYm9vaylcclxuICAgIGdldFdvcmRzRm9yUmV2aWV3KCk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgcmV2aWV3SW50ZXJ2YWxNcyA9IHRoaXMuc2V0dGluZ3MucmV2aWV3SW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG5cclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZClcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghd29yZC5sYXN0UmV2aWV3ZWQpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmV2aWV3ID0gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdFJldmlldyA9IG5vdy5nZXRUaW1lKCkgLSBsYXN0UmV2aWV3LmdldFRpbWUoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVTaW5jZUxhc3RSZXZpZXcgPj0gcmV2aWV3SW50ZXJ2YWxNcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QUM4MFx1QzBDOSAoXHVENjA0XHVDN0FDIGJvb2spXHJcbiAgICBzZWFyY2hXb3JkcyhxdWVyeTogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PlxyXG4gICAgICAgICAgICAgICAgd29yZC53b3JkLmluY2x1ZGVzKGxvd2VyUXVlcnkpIHx8XHJcbiAgICAgICAgICAgICAgICB3b3JkLm1lYW5pbmdzLnNvbWUobWVhbmluZyA9PiBtZWFuaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVEMUI1XHVBQ0M0IFx1Qzg3MFx1RDY4QyAoXHVENjA0XHVDN0FDIGJvb2spXHJcbiAgICBnZXRTdGF0aXN0aWNzKCkge1xyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCk7XHJcbiAgICAgICAgY29uc3QgdG90YWxXb3JkcyA9IHdvcmRzLmxlbmd0aDtcclxuICAgICAgICBjb25zdCB0b3RhbFJldmlld3MgPSB0aGlzLnN0YXRpc3RpY3MudG90YWxSZXZpZXdzO1xyXG4gICAgICAgIGNvbnN0IGF2ZXJhZ2VEaWZmaWN1bHR5ID0gd29yZHMubGVuZ3RoID4gMCBcclxuICAgICAgICAgICAgPyB3b3Jkcy5yZWR1Y2UoKHN1bSwgd29yZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZmljdWx0eVZhbHVlID0gd29yZC5kaWZmaWN1bHR5ID09PSAnZWFzeScgPyAxIDogXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZC5kaWZmaWN1bHR5ID09PSAnZ29vZCcgPyAyIDogMztcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyBkaWZmaWN1bHR5VmFsdWU7XHJcbiAgICAgICAgICAgIH0sIDApIC8gd29yZHMubGVuZ3RoXHJcbiAgICAgICAgICAgIDogMDtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZHNCeURpZmZpY3VsdHkgPSB7XHJcbiAgICAgICAgICAgIGVhc3k6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2Vhc3knKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGdvb2Q6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2dvb2QnKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGhhcmQ6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2hhcmQnKS5sZW5ndGhcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBcdUNENUNcdUFERkMgN1x1Qzc3QyBcdUQ2NUNcdUIzRDkgXHVBQ0M0XHVDMEIwXHJcbiAgICAgICAgY29uc3QgcmVjZW50QWN0aXZpdHkgPSB0aGlzLmNhbGN1bGF0ZVJlY2VudEFjdGl2aXR5KCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvdGFsV29yZHMsXHJcbiAgICAgICAgICAgIHRvdGFsUmV2aWV3cyxcclxuICAgICAgICAgICAgc3RyZWFrRGF5czogdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMsXHJcbiAgICAgICAgICAgIGF2ZXJhZ2VEaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICB3b3Jkc0J5RGlmZmljdWx0eSxcclxuICAgICAgICAgICAgcmVjZW50QWN0aXZpdHlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1Qzc3Q1x1Qzc3QyBcdUJBQTlcdUQ0NUMgXHVDOUM0XHVENTg5XHVCOTYwIFx1Qzg3MFx1RDY4QyAoXHVENjA0XHVDN0FDIGJvb2spXHJcbiAgICBnZXREYWlseUdvYWxQcm9ncmVzcygpIHtcclxuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgdG9kYXlXb3JkcyA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpLnRvRGF0ZVN0cmluZygpID09PSB0b2RheTtcclxuICAgICAgICAgICAgfSkubGVuZ3RoO1xyXG5cclxuICAgICAgICBjb25zdCBnb2FsID0gdGhpcy5zZXR0aW5ncy5kYWlseUdvYWw7XHJcbiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IGdvYWwgPiAwID8gTWF0aC5taW4oKHRvZGF5V29yZHMgLyBnb2FsKSAqIDEwMCwgMTAwKSA6IDA7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IHRvZGF5V29yZHMsXHJcbiAgICAgICAgICAgIGdvYWw6IGdvYWwsXHJcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IHBlcmNlbnRhZ2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIGFzeW5jIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPHR5cGVvZiB0aGlzLnNldHRpbmdzPik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIC4uLm5ld1NldHRpbmdzIH07XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM4MDBcdUM3QTVcdUM2QTkgXHVENjE1XHVDMkREXHVDNzNDXHVCODVDIFx1QkNDMFx1RDY1OCAoXHVENjM4XHVENjU4XHVDMTMxIFx1QzcyMFx1QzlDMClcclxuICAgIGdldERhdGFGb3JTYXZlKCk6IERhdGFiYXNlRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYm9va3M6IEFycmF5LmZyb20odGhpcy5ib29rcy52YWx1ZXMoKSksXHJcbiAgICAgICAgICAgIHdvcmRzOiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpLFxyXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5zZXR0aW5ncyxcclxuICAgICAgICAgICAgc3RhdGlzdGljczogdGhpcy5zdGF0aXN0aWNzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM4MDBcdUM3QTVcdUI0MUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNUQwXHVDMTFDIFx1Qjg1Q1x1QjREQyAoXHVENjM4XHVENjU4XHVDMTMxIFx1QzcyMFx1QzlDMClcclxuICAgIGFzeW5jIGxvYWRGcm9tRGF0YShkYXRhOiBEYXRhYmFzZURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyBNRCBcdUQzMENcdUM3N0MgXHVDMkRDXHVDMkE0XHVEMTVDXHVDNUQwXHVDMTFDXHVCMjk0IFx1Qzc3NCBcdUJBNTRcdUMxMUNcdUI0REMgXHVCMzAwXHVDMkUwIGxvYWRBbGxCb29rcygpXHVCOTdDIFx1QzBBQ1x1QzZBOVxyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZEFsbEJvb2tzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNUYwXHVDMThEIFx1RDU1OVx1QzJCNVx1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHByaXZhdGUgdXBkYXRlU3RyZWFrKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBsYXN0U3R1ZHlEYXRlID0gdGhpcy5zdGF0aXN0aWNzLmxhc3RTdHVkeURhdGUgXHJcbiAgICAgICAgICAgID8gbmV3IERhdGUodGhpcy5zdGF0aXN0aWNzLmxhc3RTdHVkeURhdGUpLnRvRGF0ZVN0cmluZygpXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGxhc3RTdHVkeURhdGUgPT09IHRvZGF5KSB7XHJcbiAgICAgICAgICAgIC8vIFx1QzYyNFx1QjI5OCBcdUM3NzRcdUJCRjggXHVENTU5XHVDMkI1XHVENTg4XHVDNzNDXHVCQTc0IFx1QzVGMFx1QzE4RFx1Qzc3QyBcdUM5OURcdUFDMDBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghbGFzdFN0dWR5RGF0ZSkge1xyXG4gICAgICAgICAgICAvLyBcdUNDOThcdUM3NEMgXHVENTU5XHVDMkI1XHVENTU4XHVCMjk0IFx1QUNCRFx1QzZCMFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRpc3RpY3Muc3RyZWFrRGF5cyA9IDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgeWVzdGVyZGF5LnNldERhdGUoeWVzdGVyZGF5LmdldERhdGUoKSAtIDEpO1xyXG4gICAgICAgICAgICBjb25zdCB5ZXN0ZXJkYXlTdHIgPSB5ZXN0ZXJkYXkudG9EYXRlU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobGFzdFN0dWR5RGF0ZSA9PT0geWVzdGVyZGF5U3RyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUM1QjRcdUM4MUMgXHVENTU5XHVDMkI1XHVENTg4XHVDNzNDXHVCQTc0IFx1QzVGMFx1QzE4RFx1Qzc3QyBcdUM5OURcdUFDMDBcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGlzdGljcy5zdHJlYWtEYXlzKys7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUM1RjBcdUMxOERcdUM3NzQgXHVCMDRBXHVDNUI0XHVDOUM0IFx1QUNCRFx1QzZCMCAxXHVCODVDIFx1QjlBQ1x1QzE0QlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN0YXRpc3RpY3MubGFzdFN0dWR5RGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUNENUNcdUFERkMgN1x1Qzc3QyBcdUQ2NUNcdUIzRDkgXHVBQ0M0XHVDMEIwXHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZVJlY2VudEFjdGl2aXR5KCkge1xyXG4gICAgICAgIGNvbnN0IGFjdGl2aXR5ID0gW107XHJcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gNjsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRvZGF5KTtcclxuICAgICAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBkYXRlLnRvRGF0ZVN0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgd29yZHNTdHVkaWVkID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKS5maWx0ZXIod29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpLnRvRGF0ZVN0cmluZygpID09PSBkYXRlU3RyO1xyXG4gICAgICAgICAgICB9KS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXZpZXdzQ29tcGxldGVkID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKS5maWx0ZXIod29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXZpZXdEYXRlID0gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldmlld0RhdGUudG9EYXRlU3RyaW5nKCkgPT09IGRhdGVTdHI7XHJcbiAgICAgICAgICAgIH0pLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGFjdGl2aXR5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZGF0ZTogZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXHJcbiAgICAgICAgICAgICAgICB3b3Jkc1N0dWRpZWQsXHJcbiAgICAgICAgICAgICAgICByZXZpZXdzQ29tcGxldGVkXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGFjdGl2aXR5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVBQ0JEXHVCODVDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgdXBkYXRlVm9jYWJ1bGFyeUZvbGRlclBhdGgobmV3UGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCA9IG5ld1BhdGg7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplVm9jYWJ1bGFyeUZvbGRlcigpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBJTExNU2VydmljZSwgV29yZERhdGFSZXF1ZXN0LCBXb3JkRGF0YVJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vY29yZS9wb3J0cy9zZXJ2aWNlcy9JTExNU2VydmljZSc7XHJcbmltcG9ydCB7IExMTVNlcnZpY2UgfSBmcm9tICcuL0xMTVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTExNU2VydmljZUFkYXB0ZXIgaW1wbGVtZW50cyBJTExNU2VydmljZSB7XHJcbiAgICBwcml2YXRlIGxsbVNlcnZpY2U6IExMTVNlcnZpY2U7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMubGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRXb3JkRGF0YShyZXF1ZXN0OiBXb3JkRGF0YVJlcXVlc3QpOiBQcm9taXNlPFdvcmREYXRhUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkSW5mbyA9IGF3YWl0IHRoaXMubGxtU2VydmljZS5nZXRXb3JkSW5mbyhyZXF1ZXN0LndvcmQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZDogd29yZEluZm8ud29yZCxcclxuICAgICAgICAgICAgICAgICAgICBtZWFuaW5nOiB3b3JkSW5mby5tZWFuaW5ncyxcclxuICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkSW5mby5wcm9udW5jaWF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkSW5mby5leGFtcGxlcyxcclxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmRJbmZvLnNpbWlsYXJXb3Jkc1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmxsbVNlcnZpY2UudGVzdENvbm5lY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5sbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2Uoc2V0dGluZ3MpO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IElXb3JkU2VydmljZSwgV29yZERhdGFSZXF1ZXN0LCBXb3JkRGF0YVJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vY29yZS9wb3J0cy9zZXJ2aWNlcy9JV29yZFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBXb3JkU2VydmljZSB9IGZyb20gJy4vV29yZFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XHJcblxyXG5leHBvcnQgY2xhc3MgV29yZFNlcnZpY2VBZGFwdGVyIGltcGxlbWVudHMgSVdvcmRTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgd29yZFNlcnZpY2U6IFdvcmRTZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLndvcmRTZXJ2aWNlID0gbmV3IFdvcmRTZXJ2aWNlKHNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRXb3JkRGF0YShyZXF1ZXN0OiBXb3JkRGF0YVJlcXVlc3QpOiBQcm9taXNlPFdvcmREYXRhUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IGF3YWl0IHRoaXMud29yZFNlcnZpY2UuZ2V0V29yZERhdGEocmVxdWVzdC53b3JkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmREYXRhLndvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVhbmluZzogd29yZERhdGEubWVhbmluZyxcclxuICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkRGF0YS5wcm9udW5jaWF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGF0YS5leGFtcGxlcyB8fCBbXSxcclxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREYXRhLnNpbWlsYXJXb3JkcyB8fCBbXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy53b3JkU2VydmljZSA9IG5ldyBXb3JkU2VydmljZShzZXR0aW5ncyk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgSVRUU1NlcnZpY2UgfSBmcm9tICcuL0lUVFNTZXJ2aWNlJztcclxuaW1wb3J0IHsgVFRTU2VydmljZSwgVFRTU2VydmljZUZhY3RvcnkgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS90dHMvVFRTU2VydmljZSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncyB9IGZyb20gJy4uLy4uLy4uL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRUU1NlcnZpY2VBZGFwdGVyIGltcGxlbWVudHMgSVRUU1NlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSB0dHNTZXJ2aWNlOiBUVFNTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2V0dGluZ3M/OiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLnR0c1NlcnZpY2UgPSBUVFNTZXJ2aWNlRmFjdG9yeS5jcmVhdGVUVFNTZXJ2aWNlKGFwcCwgc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtUZXh0KHRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtXb3JkKHdvcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrRXhhbXBsZShleGFtcGxlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtFeGFtcGxlKGV4YW1wbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0b3BTcGVha2luZygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnR0c1NlcnZpY2Uuc3RvcFNwZWFraW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0IFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgIHRoaXMudHRzU2VydmljZS5kZXN0cm95KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMEM4IFx1QzEyNFx1QzgxNVx1QzczQ1x1Qjg1QyBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0IFx1QzdBQ1x1QzBERFx1QzEzMVxyXG4gICAgICAgIHRoaXMudHRzU2VydmljZSA9IFRUU1NlcnZpY2VGYWN0b3J5LmNyZWF0ZVRUU1NlcnZpY2UodGhpcy5hcHAsIHNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0VuYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIFx1RDMyOVx1RDFBMFx1QjlBQ1x1QzVEMFx1QzExQyBcdUM3NzRcdUJCRjggZW5hYmxlZCBcdUNDQjRcdUQwNkNcdUI5N0MgXHVENTY4XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXZhaWxhYmxlVm9pY2VzKCk6IFNwZWVjaFN5bnRoZXNpc1ZvaWNlW10ge1xyXG4gICAgICAgIGNvbnN0IHZvaWNlcyA9IHRoaXMudHRzU2VydmljZS5nZXRBdmFpbGFibGVWb2ljZXMoKTtcclxuICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVDNzc4XHVEMTMwXHVEMzk4XHVDNzc0XHVDMkE0IFx1RDYzOFx1RDY1OFx1Qzc0NCBcdUM3MDRcdUQ1NzQgXHVCRTQ4IFx1QkMzMFx1QzVGNCBcdUJDMThcdUQ2NTggKFx1QzJFNFx1QzgxQyBcdUM3NENcdUMxMzFcdUM3NDAgXHVBQzAxIFx1QzExQ1x1QkU0NFx1QzJBNFx1QUMwMCBcdUNDOThcdUI5QUMpXHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnR0c1NlcnZpY2UudGVzdENvbm5lY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1BhdXNlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50dHNTZXJ2aWNlLmlzUGF1c2VkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdW1lKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudHRzU2VydmljZS5yZXN1bWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXVzZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnR0c1NlcnZpY2UucGF1c2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudHRzU2VydmljZS5kZXN0cm95KCk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBESUNvbnRhaW5lciB9IGZyb20gJy4vRElDb250YWluZXInO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XHJcblxyXG4vLyBDb3JlIFNlcnZpY2VzXHJcbmltcG9ydCB7IEFkZFdvcmRVc2VDYXNlIH0gZnJvbSAnLi4vLi4vY29yZS91c2UtY2FzZXMvQWRkV29yZFVzZUNhc2UnO1xyXG5pbXBvcnQgeyBDcmVhdGVCb29rVXNlQ2FzZSB9IGZyb20gJy4uLy4uL2NvcmUvdXNlLWNhc2VzL0NyZWF0ZUJvb2tVc2VDYXNlJztcclxuaW1wb3J0IHsgR2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlIH0gZnJvbSAnLi4vLi4vY29yZS91c2UtY2FzZXMvR2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlJztcclxuaW1wb3J0IHsgUmV2aWV3V29yZFVzZUNhc2UgfSBmcm9tICcuLi8uLi9jb3JlL3VzZS1jYXNlcy9SZXZpZXdXb3JkVXNlQ2FzZSc7XHJcblxyXG4vLyBJbmZyYXN0cnVjdHVyZSBTZXJ2aWNlc1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5UmVwb3NpdG9yeUFkYXB0ZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyJztcclxuaW1wb3J0IHsgQm9va1JlcG9zaXRvcnlBZGFwdGVyIH0gZnJvbSAnLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvb2JzaWRpYW4vcmVwb3NpdG9yaWVzL0Jvb2tSZXBvc2l0b3J5QWRhcHRlcic7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XHJcbmltcG9ydCB7IExMTVNlcnZpY2VBZGFwdGVyIH0gZnJvbSAnLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2VBZGFwdGVyJztcclxuXHJcbi8vIEV4dGVybmFsIFNlcnZpY2VzXHJcbmltcG9ydCB7IFdvcmRTZXJ2aWNlQWRhcHRlciB9IGZyb20gJy4uLy4uL2luZnJhc3RydWN0dXJlL2V4dGVybmFsL1dvcmRTZXJ2aWNlQWRhcHRlcic7XHJcbmltcG9ydCB7IFRUU1NlcnZpY2VBZGFwdGVyIH0gZnJvbSAnLi4vLi4vY29yZS9wb3J0cy9zZXJ2aWNlcy9JVFRTU2VydmljZUFkYXB0ZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlcnZpY2VSZWdpc3RyeSB7XHJcbiAgICBzdGF0aWMgcmVnaXN0ZXJTZXJ2aWNlcyhjb250YWluZXI6IERJQ29udGFpbmVyLCBhcHA6IEFwcCwgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgICAgIC8vIEV4dGVybmFsIGRlcGVuZGVuY2llc1xyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlckluc3RhbmNlKCdhcHAnLCBhcHApO1xyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlckluc3RhbmNlKCdzZXR0aW5ncycsIHNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgLy8gSW5mcmFzdHJ1Y3R1cmUgTGF5ZXJcclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2RhdGFiYXNlTWFuYWdlcicsIChhcHA6IEFwcCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIoXHJcbiAgICAgICAgICAgICAgICBhcHAsXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB7fSwgLy8gc2F2ZUNhbGxiYWNrIC0gRElcdUM1RDBcdUMxMUNcdUIyOTQgXHVCRTQ4IFx1RDU2OFx1QzIxOFx1Qjg1QyBcdUNDOThcdUI5QUNcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLnZvY2FidWxhcnlGb2xkZXJQYXRoXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnYXBwJ10sXHJcbiAgICAgICAgICAgIHNpbmdsZXRvbjogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3ZvY2FidWxhcnlSZXBvc2l0b3J5JywgVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydkYXRhYmFzZU1hbmFnZXInXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2Jvb2tSZXBvc2l0b3J5JywgQm9va1JlcG9zaXRvcnlBZGFwdGVyLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydkYXRhYmFzZU1hbmFnZXInXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3dvcmRTZXJ2aWNlJywgV29yZFNlcnZpY2VBZGFwdGVyLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydzZXR0aW5ncyddXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignbGxtU2VydmljZScsIExMTVNlcnZpY2VBZGFwdGVyLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydzZXR0aW5ncyddXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcigndHRzU2VydmljZScsIFRUU1NlcnZpY2VBZGFwdGVyLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydhcHAnLCAnc2V0dGluZ3MnXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBDb3JlIFVzZSBDYXNlc1xyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignYWRkV29yZFVzZUNhc2UnLCBBZGRXb3JkVXNlQ2FzZSwge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsndm9jYWJ1bGFyeVJlcG9zaXRvcnknLCAnYm9va1JlcG9zaXRvcnknLCAnd29yZFNlcnZpY2UnXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2NyZWF0ZUJvb2tVc2VDYXNlJywgQ3JlYXRlQm9va1VzZUNhc2UsIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ2Jvb2tSZXBvc2l0b3J5J11cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdnZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UnLCBHZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UsIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3ZvY2FidWxhcnlSZXBvc2l0b3J5JywgJ2Jvb2tSZXBvc2l0b3J5J11cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdyZXZpZXdXb3JkVXNlQ2FzZScsIFJldmlld1dvcmRVc2VDYXNlLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWyd2b2NhYnVsYXJ5UmVwb3NpdG9yeSddXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHVwZGF0ZVNldHRpbmdzKGNvbnRhaW5lcjogRElDb250YWluZXIsIHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpOiB2b2lkIHtcclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJJbnN0YW5jZSgnc2V0dGluZ3MnLCBzZXR0aW5ncyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDNUI0XHVCMzExXHVEMTMwIFx1QzExQ1x1QkU0NFx1QzJBNFx1QjRFNCBcdUMxMjRcdUM4MTUgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKGNvbnRhaW5lci5oYXMoJ3R0c1NlcnZpY2UnKSkge1xyXG4gICAgICAgICAgICBjb25zdCB0dHNTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmU8VFRTU2VydmljZUFkYXB0ZXI+KCd0dHNTZXJ2aWNlJyk7XHJcbiAgICAgICAgICAgIHR0c1NlcnZpY2UudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoY29udGFpbmVyLmhhcygnbGxtU2VydmljZScpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxsbVNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZTxMTE1TZXJ2aWNlQWRhcHRlcj4oJ2xsbVNlcnZpY2UnKTtcclxuICAgICAgICAgICAgbGxtU2VydmljZS51cGRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjb250YWluZXIuaGFzKCd3b3JkU2VydmljZScpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmU8V29yZFNlcnZpY2VBZGFwdGVyPignd29yZFNlcnZpY2UnKTtcclxuICAgICAgICAgICAgd29yZFNlcnZpY2UudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsICIvLyBcdUM4MDRcdUM1RUQgXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQyBcdUJDMEYgXHVBQ0JEXHVBQ0M0IFx1QUQwMFx1QjlBQ1xyXG5cclxuaW1wb3J0IHsgTm90aWNlLCByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFcnJvckluZm8ge1xyXG4gICAgZXJyb3I6IEVycm9yO1xyXG4gICAgY29udGV4dD86IHN0cmluZztcclxuICAgIHVzZXJJZD86IHN0cmluZztcclxuICAgIHRpbWVzdGFtcDogbnVtYmVyO1xyXG4gICAgc3RhY2tUcmFjZT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVycm9yQm91bmRhcnkge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEVycm9yQm91bmRhcnk7XHJcbiAgICBwcml2YXRlIGVycm9ySGFuZGxlcnM6IE1hcDxzdHJpbmcsIChlcnJvcjogRXJyb3JJbmZvKSA9PiB2b2lkPiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBFcnJvckJvdW5kYXJ5IHtcclxuICAgICAgICBpZiAoIUVycm9yQm91bmRhcnkuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgRXJyb3JCb3VuZGFyeS5pbnN0YW5jZSA9IG5ldyBFcnJvckJvdW5kYXJ5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBFcnJvckJvdW5kYXJ5Lmluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzgwNFx1QzVFRCBcdUM1RDBcdUI3RUMgXHVENTc4XHVCNEU0XHVCN0VDIFx1Q0QwOFx1QUUzMFx1RDY1NFxyXG4gICAgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIFx1QzgwNFx1QzVFRCBcdUM1RDBcdUI3RUMgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOFxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBldmVudC5lcnJvciB8fCBuZXcgRXJyb3IoZXZlbnQubWVzc2FnZSksXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnR2xvYmFsIEVycm9yJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgIHN0YWNrVHJhY2U6IGV2ZW50LmVycm9yPy5zdGFja1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUHJvbWlzZSByZWplY3Rpb24gXHVENTc4XHVCNEU0XHVCN0VDXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VuaGFuZGxlZHJlamVjdGlvbicsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBldmVudC5yZWFzb24gaW5zdGFuY2VvZiBFcnJvciA/IGV2ZW50LnJlYXNvbiA6IG5ldyBFcnJvcihTdHJpbmcoZXZlbnQucmVhc29uKSksXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnVW5oYW5kbGVkIFByb21pc2UgUmVqZWN0aW9uJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgIHN0YWNrVHJhY2U6IGV2ZW50LnJlYXNvbj8uc3RhY2tcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNUQwXHVCN0VDIFx1RDU3OFx1QjRFNFx1QjdFQyBcdUI0RjFcdUI4NURcclxuICAgIHJlZ2lzdGVySGFuZGxlcihjb250ZXh0OiBzdHJpbmcsIGhhbmRsZXI6IChlcnJvcjogRXJyb3JJbmZvKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLnNldChjb250ZXh0LCBoYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM1RDBcdUI3RUMgXHVENTc4XHVCNEU0XHVCN0VDIFx1QzgxQ1x1QUM3MFxyXG4gICAgdW5yZWdpc3RlckhhbmRsZXIoY29udGV4dDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLmRlbGV0ZShjb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM1RDBcdUI3RUMgXHVDQzk4XHVCOUFDXHJcbiAgICBoYW5kbGVFcnJvcihlcnJvckluZm86IEVycm9ySW5mbyk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Q0Y1OFx1QzE5NFx1QzVEMCBcdUM1RDBcdUI3RUMgXHVCODVDXHVBREY4XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2F1Z2h0IGJ5IEVycm9yQm91bmRhcnk6JywgZXJyb3JJbmZvKTtcclxuXHJcbiAgICAgICAgLy8gXHVDMEFDXHVDNkE5XHVDNzkwXHVDNUQwXHVBQzhDIFx1Q0U1Q1x1RDY1NFx1QzgwMVx1Qzc3OCBcdUM1RDBcdUI3RUMgXHVCQTU0XHVDMkRDXHVDOUMwIFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gdGhpcy5nZXRVc2VyRnJpZW5kbHlNZXNzYWdlKGVycm9ySW5mby5lcnJvcik7XHJcbiAgICAgICAgbmV3IE5vdGljZSh1c2VyTWVzc2FnZSwgMCk7XHJcblxyXG4gICAgICAgIC8vIFx1QjRGMVx1Qjg1RFx1QjQxQyBcdUQ1NzhcdUI0RTRcdUI3RUNcdUI0RTQgXHVDMkU0XHVENTg5XHJcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLmZvckVhY2goKGhhbmRsZXIsIGNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXIoZXJyb3JJbmZvKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoaGFuZGxlckVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyIGZvciBjb250ZXh0ICR7Y29udGV4dH06YCwgaGFuZGxlckVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzU0OFx1QzgwNFx1RDU1QyBcdUQ1NjhcdUMyMTggXHVDMkU0XHVENTg5IFx1Qjc5OFx1RDM3Q1xyXG4gICAgYXN5bmMgc2FmZUV4ZWN1dGU8VD4oXHJcbiAgICAgICAgZm46ICgpID0+IFByb21pc2U8VD4gfCBULFxyXG4gICAgICAgIGNvbnRleHQ6IHN0cmluZyxcclxuICAgICAgICBmYWxsYmFjaz86IFRcclxuICAgICk6IFByb21pc2U8VCB8IHVuZGVmaW5lZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKSxcclxuICAgICAgICAgICAgICAgIGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICBzdGFja1RyYWNlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCM0Q5XHVBRTMwIFx1RDU2OFx1QzIxOFx1QzZBOSBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVDMkU0XHVENTg5XHJcbiAgICBzYWZlRXhlY3V0ZVN5bmM8VD4oXHJcbiAgICAgICAgZm46ICgpID0+IFQsXHJcbiAgICAgICAgY29udGV4dDogc3RyaW5nLFxyXG4gICAgICAgIGZhbGxiYWNrPzogVFxyXG4gICAgKTogVCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIGZuKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKFN0cmluZyhlcnJvcikpLFxyXG4gICAgICAgICAgICAgICAgY29udGV4dCxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgIHN0YWNrVHJhY2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUMwQUNcdUM2QTlcdUM3OTAgXHVDRTVDXHVENjU0XHVDODAxXHVDNzc4IFx1QzVEMFx1QjdFQyBcdUJBNTRcdUMyRENcdUM5QzAgXHVDMEREXHVDMTMxXHJcbiAgICBwcml2YXRlIGdldFVzZXJGcmllbmRseU1lc3NhZ2UoZXJyb3I6IEVycm9yKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBlcnJvclR5cGUgPSBlcnJvci5uYW1lO1xyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcblxyXG4gICAgICAgIC8vIFx1QzVEMFx1QjdFQyBcdUQwQzBcdUM3ODVcdUJDQzQgXHVDMEFDXHVDNkE5XHVDNzkwIFx1Q0U1Q1x1RDY1NFx1QzgwMSBcdUJBNTRcdUMyRENcdUM5QzBcclxuICAgICAgICBjb25zdCBmcmllbmRseU1lc3NhZ2VzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gICAgICAgICAgICAnTmV0d29ya0Vycm9yJzogJ1x1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QyBcdUM1RjBcdUFDQjBcdUM1RDAgXHVCQjM4XHVDODFDXHVBQzAwIFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDNzc4XHVEMTMwXHVCMTM3IFx1QzVGMFx1QUNCMFx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyxcclxuICAgICAgICAgICAgJ1R5cGVFcnJvcic6ICdcdUIzNzBcdUM3NzRcdUQxMzAgXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgICdSZWZlcmVuY2VFcnJvcic6ICdcdUQ1NDRcdUM2OTRcdUQ1NUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgICdTeW50YXhFcnJvcic6ICdcdUIzNzBcdUM3NzRcdUQxMzAgXHVENjE1XHVDMkREXHVDNUQwIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICAgICAgJ1F1b3RhRXhjZWVkZWRFcnJvcic6ICdcdUM4MDBcdUM3QTUgXHVBQ0Y1XHVBQzA0XHVDNzc0IFx1QkQ4MFx1Qzg3MVx1RDU2OVx1QjJDOFx1QjJFNC4nLFxyXG4gICAgICAgICAgICAnU2VjdXJpdHlFcnJvcic6ICdcdUJDRjRcdUM1NDggXHVDODE1XHVDQzQ1XHVDNzNDXHVCODVDIFx1Qzc3OFx1RDU3NCBcdUM3OTFcdUM1QzVcdUM3NDQgXHVDMjE4XHVENTg5XHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBBUEkgXHVBRDAwXHVCODI4IFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUNcclxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdBUEknKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdBUEkgXHVDMTFDXHVCRTQ0XHVDMkE0XHVDNUQwIFx1Qzc3Q1x1QzJEQ1x1QzgwMVx1Qzc3OCBcdUJCMzhcdUM4MUNcdUFDMDAgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUM3QTBcdUMyREMgXHVENkM0IFx1QjJFNFx1QzJEQyBcdUMyRENcdUIzQzRcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1RDMwQ1x1Qzc3QyBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQ1xyXG4gICAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZpbGUnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0ZpbGUnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1RDMwQ1x1Qzc3QyBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1RDMwQ1x1Qzc3Q1x1Qzc3NCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTRcdUM5QzAgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVBRDAwXHVCODI4IFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUNcclxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdlbmNyeXB0JykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdkZWNyeXB0JykpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdBUEkgXHVEMEE0IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDMTI0XHVDODE1XHVDNzQ0IFx1QjJFNFx1QzJEQyBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmcmllbmRseU1lc3NhZ2VzW2Vycm9yVHlwZV0gfHwgXHJcbiAgICAgICAgICAgICAgIGBcdUM2MDhcdUMwQzFcdUNFNTggXHVCQUJCXHVENTVDIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQ6ICR7ZXJyb3JNZXNzYWdlfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNUQwXHVCN0VDIFx1QkNGNVx1QUQ2QyBcdUMyRENcdUIzQzRcclxuICAgIGFzeW5jIGF0dGVtcHRSZWNvdmVyeShlcnJvcjogRXJyb3IsIGNvbnRleHQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIC8vIFx1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QyBcdUM1RDBcdUI3RUNcdUM3NTggXHVBQ0JEXHVDNkIwIFx1QzdBQ1x1QzJEQ1x1QjNDNFxyXG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdmZXRjaCcpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25ldHdvcmsnKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVBQzA0XHVCMkU4XHVENTVDIFx1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QyBcdUQxNENcdUMyQTRcdUQyQjhcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJlcXVlc3RVcmwoeyBcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL3d3dy5nb29nbGUuY29tL2Zhdmljb24uaWNvJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdIRUFEJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QzgwMFx1QzdBNVx1QzE4QyBcdUM1RDBcdUI3RUNcdUM3NTggXHVBQ0JEXHVDNkIwIFx1RDA3NFx1QjlBQ1x1QzVCNCBcdUMyRENcdUIzQzRcclxuICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1F1b3RhRXhjZWVkZWRFcnJvcicpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIFx1Qzc4NFx1QzJEQyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVEMDc0XHVCOUFDXHVDNUI0IChcdUMyRTRcdUM4MUMgXHVBRDZDXHVENjA0XHVDNUQwXHVDMTFDXHVCMjk0IFx1QjM1NCBcdUMyRTBcdUM5MTFcdUQ1NThcdUFDOEMpXHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndGVtcC1kYXRhJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM4MTVcdUI5QUNcclxuICAgIGNsZWFudXAoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1RDNCOFx1Qzc1OCBcdUQ1NjhcdUMyMThcdUI0RTRcclxuZXhwb3J0IGNvbnN0IHNhZmVBc3luYyA9IGFzeW5jIDxUPihcclxuICAgIGZuOiAoKSA9PiBQcm9taXNlPFQ+LFxyXG4gICAgY29udGV4dDogc3RyaW5nLFxyXG4gICAgZmFsbGJhY2s/OiBUXHJcbik6IFByb21pc2U8VCB8IHVuZGVmaW5lZD4gPT4ge1xyXG4gICAgcmV0dXJuIEVycm9yQm91bmRhcnkuZ2V0SW5zdGFuY2UoKS5zYWZlRXhlY3V0ZShmbiwgY29udGV4dCwgZmFsbGJhY2spO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNhZmVTeW5jID0gPFQ+KFxyXG4gICAgZm46ICgpID0+IFQsXHJcbiAgICBjb250ZXh0OiBzdHJpbmcsXHJcbiAgICBmYWxsYmFjaz86IFRcclxuKTogVCB8IHVuZGVmaW5lZCA9PiB7XHJcbiAgICByZXR1cm4gRXJyb3JCb3VuZGFyeS5nZXRJbnN0YW5jZSgpLnNhZmVFeGVjdXRlU3luYyhmbiwgY29udGV4dCwgZmFsbGJhY2spO1xyXG59O1xyXG5cclxuLy8gXHVCMzcwXHVDRjU0XHVCODA4XHVDNzc0XHVEMTMwIFx1RDU2OFx1QzIxOCAoVHlwZVNjcmlwdCBcdUIzNzBcdUNGNTRcdUI4MDhcdUM3NzRcdUQxMzAgXHVCMzAwXHVDMkUwIFx1QzBBQ1x1QzZBOSlcclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhFcnJvckJvdW5kYXJ5PFQgZXh0ZW5kcyBhbnlbXSwgUj4oXHJcbiAgICBmbjogKC4uLmFyZ3M6IFQpID0+IFIgfCBQcm9taXNlPFI+LFxyXG4gICAgY29udGV4dDogc3RyaW5nXHJcbikge1xyXG4gICAgcmV0dXJuIGFzeW5jICguLi5hcmdzOiBUKTogUHJvbWlzZTxSIHwgdW5kZWZpbmVkPiA9PiB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JCb3VuZGFyeSA9IEVycm9yQm91bmRhcnkuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICBpZiAoZm4uY29uc3RydWN0b3IubmFtZSA9PT0gJ0FzeW5jRnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlcnJvckJvdW5kYXJ5LnNhZmVFeGVjdXRlKCgpID0+IGZuKC4uLmFyZ3MpLCBjb250ZXh0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZXJyb3JCb3VuZGFyeS5zYWZlRXhlY3V0ZVN5bmMoKCkgPT4gZm4oLi4uYXJncyksIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG9CQUF1Qjs7O0FDQXZCLElBQUFDLG1CQUE0RTs7O0FDRzVFLFNB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QUFJLEtBQUssV0FBVztBQUNoQixzQkFBZ0IsZUFBZSxLQUFLLFdBQVcsS0FBSyxRQUFRO0FBQUEsSUFDaEU7QUFBQSxFQUNKO0FBQUE7QUFBQSxFQUdBLE1BQWMsd0JBQXdCO0FBQ2xDLFFBQUk7QUFDQSxZQUFNLFlBQVksTUFBTSxLQUFLLFNBQVM7QUFDdEMsVUFBSSxhQUFhLFVBQVUsWUFBWSxNQUFNLFFBQVEsVUFBVSxTQUFTLEtBQUssR0FBRztBQUM1RSxjQUFNLGFBQWEsVUFBVTtBQUc3QixZQUFJLFdBQVcsU0FBUyxXQUFXLE1BQU0sU0FBUyxHQUFHO0FBQ2pELHFCQUFXLFFBQVEsV0FBVyxPQUFPO0FBQ2pDLGdCQUFJO0FBQ0Esb0JBQU0sS0FBSyxnQkFBZ0IsUUFBUTtBQUFBLGdCQUMvQixHQUFHO0FBQUEsZ0JBQ0gsUUFBUTtBQUFBLGdCQUNSLGVBQWUsS0FBSyxpQkFBaUI7QUFBQSxjQUN6QyxDQUFDO0FBQUEsWUFDTCxTQUFTLE9BQU87QUFDWixzQkFBUSxLQUFLLG1FQUFpQixLQUFLLElBQUksSUFBSSxLQUFLO0FBQUEsWUFDcEQ7QUFBQSxVQUNKO0FBQUEsUUFDSjtBQUdBLFlBQUksV0FBVyxVQUFVO0FBQ3JCLGdCQUFNLEtBQUssZ0JBQWdCLGVBQWUsV0FBVyxRQUFRO0FBQUEsUUFDakU7QUFBQSxNQUNKO0FBQUEsSUFDSixTQUFTLE9BQU87QUFDWixjQUFRLE1BQU0sc0RBQWMsS0FBSztBQUFBLElBQ3JDO0FBQUEsRUFDSjtBQUFBO0FBQUEsRUFHQSxNQUFNLGNBQWM7QUFDaEIsVUFBTSxPQUFPO0FBQUEsTUFDVCxVQUFVLEtBQUs7QUFBQSxJQUNuQjtBQUNBLFVBQU0sS0FBSyxTQUFTLElBQUk7QUFBQSxFQUM1QjtBQUNKOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImRlbGF5IiwgImpzb25EYXRhIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJjb250YWluZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiQ29uZmlybU1vZGFsIiwgImNvbnRhaW5lciIsICJib29rIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250YWluZXIiLCAiYXBwIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
