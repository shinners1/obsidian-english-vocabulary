/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  AddBookModal: () => AddBookModal,
  EnglishVocabularyPlugin: () => EnglishVocabularyPlugin,
  default: () => EnglishVocabularyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian11 = require("obsidian");

// src/features/settings/ui/settings.ts
var import_obsidian2 = require("obsidian");

// src/utils.ts
function isPlainTextApiKey(apiKey) {
  if (!apiKey)
    return false;
  const apiKeyPatterns = [
    /^sk-[a-zA-Z0-9]{32,}$/,
    // OpenAI API 키
    /^sk-ant-[a-zA-Z0-9-_]{95}$/,
    // Anthropic API 키
    /^AIza[a-zA-Z0-9-_]{35}$/,
    // Google API 키
    /^[a-zA-Z0-9-_]{20,}$/
    // 일반적인 긴 토큰
  ];
  return apiKeyPatterns.some((pattern) => pattern.test(apiKey));
}
function encryptApiKey(apiKey) {
  if (!apiKey)
    return "";
  if (!isPlainTextApiKey(apiKey)) {
    return apiKey;
  }
  try {
    const key = "obsidian-vocab-temp-key-2024";
    let encrypted = "";
    for (let i = 0; i < apiKey.length; i++) {
      const charCode = apiKey.charCodeAt(i) ^ key.charCodeAt(i % key.length);
      encrypted += String.fromCharCode(charCode);
    }
    return btoa(encrypted);
  } catch (error) {
    console.error("\uB3D9\uAE30 \uC554\uD638\uD654 \uC2E4\uD328:", error);
    return "";
  }
}
function decryptApiKey(encryptedApiKey) {
  if (!encryptedApiKey)
    return "";
  if (isPlainTextApiKey(encryptedApiKey)) {
    return encryptedApiKey;
  }
  try {
    const key = "obsidian-vocab-temp-key-2024";
    const decoded = atob(encryptedApiKey);
    let decrypted = "";
    for (let i = 0; i < decoded.length; i++) {
      const charCode = decoded.charCodeAt(i) ^ key.charCodeAt(i % key.length);
      decrypted += String.fromCharCode(charCode);
    }
    return decrypted;
  } catch (error) {
    console.warn("\uBCF5\uD638\uD654 \uC2E4\uD328, \uD3C9\uBB38\uC73C\uB85C \uAC04\uC8FC:", error.message);
    return encryptedApiKey;
  }
}
function maskApiKey(apiKey) {
  if (!apiKey || typeof apiKey !== "string")
    return "";
  if (apiKey.length <= 8)
    return "*".repeat(apiKey.length);
  return apiKey.substring(0, 4) + "*".repeat(apiKey.length - 8) + apiKey.substring(apiKey.length - 4);
}
function formatDate(dateString) {
  if (!dateString) {
    return "\uC5C6\uC74C";
  }
  const date = new Date(dateString);
  if (isNaN(date.getTime())) {
    return "\uC798\uBABB\uB41C \uB0A0\uC9DC";
  }
  return date.toLocaleDateString("ko-KR", {
    year: "numeric",
    month: "long",
    day: "numeric"
  });
}

// src/shared/Config.ts
var DEFAULT_CONFIG = {
  api: {
    timeouts: {
      default: 3e4,
      // 30초
      llm: 6e4,
      // 60초
      tts: 15e3
      // 15초
    },
    retries: {
      maxAttempts: 3,
      delayMs: 1e3,
      exponentialBackoff: true
    },
    rateLimiting: {
      requestsPerMinute: 60,
      burstLimit: 10
    }
  },
  batch: {
    defaultSize: 5,
    maxSize: 20,
    delayBetweenBatches: 200,
    maxConcurrentBatches: 3
  },
  audio: {
    maxPoolSize: 10,
    autoCleanupTimeoutMs: 3e4,
    // 30초
    maxDurationMs: 3e5
    // 5분
  },
  database: {
    autoSaveInterval: 5e3,
    // 5초
    backupEnabled: true,
    maxFileSize: 10485760,
    // 10MB
    compressionEnabled: false
  },
  learning: {
    spaced_repetition: {
      initialInterval: 1,
      // 1일
      easyBonus: 1.3,
      hardPenalty: 0.8,
      maxInterval: 365,
      // 1년
      minInterval: 1
      // 1일
    },
    load_balancing: {
      maxDailyReviews: 100,
      fuzzingPercentage: 5,
      distributionWindow: 7
      // 7일
    }
  },
  ui: {
    animationDuration: 300,
    // 300ms
    progressUpdateInterval: 100,
    // 100ms
    notificationTimeout: 5e3,
    // 5초
    modalCloseDelay: 500
    // 500ms
  },
  security: {
    apiKeyEncryption: {
      iterations: 1e4,
      keyLength: 32,
      saltLength: 16
    },
    sessionTimeout: 36e5,
    // 1시간
    maxLoginAttempts: 5
  }
};
var DEVELOPMENT_CONFIG = {
  api: {
    timeouts: {
      default: 1e4,
      llm: 2e4,
      tts: 5e3
    },
    retries: {
      maxAttempts: 1,
      delayMs: 500,
      exponentialBackoff: false
    }
  },
  batch: {
    defaultSize: 2,
    maxSize: 5,
    delayBetweenBatches: 100
  },
  database: {
    autoSaveInterval: 1e3,
    backupEnabled: false
  }
};
var PRODUCTION_CONFIG = {
  api: {
    retries: {
      maxAttempts: 5,
      delayMs: 2e3,
      exponentialBackoff: true
    }
  },
  batch: {
    defaultSize: 10,
    maxSize: 50,
    delayBetweenBatches: 500
  },
  database: {
    autoSaveInterval: 1e4,
    backupEnabled: true,
    compressionEnabled: true
  }
};
var ConfigManager = class _ConfigManager {
  constructor() {
    this.config = this.mergeConfigs(DEFAULT_CONFIG, this.getEnvironmentConfig());
  }
  static getInstance() {
    if (!_ConfigManager.instance) {
      _ConfigManager.instance = new _ConfigManager();
    }
    return _ConfigManager.instance;
  }
  getConfig() {
    return { ...this.config };
  }
  getValue(path) {
    return this.getNestedValue(this.config, path);
  }
  updateConfig(updates) {
    this.config = this.mergeConfigs(this.config, updates);
  }
  getEnvironmentConfig() {
    const isDevelopment = true;
    return isDevelopment ? DEVELOPMENT_CONFIG : PRODUCTION_CONFIG;
  }
  mergeConfigs(base, override) {
    return this.deepMerge(base, override);
  }
  deepMerge(target, source) {
    const result = { ...target };
    for (const key in source) {
      if (source.hasOwnProperty(key)) {
        const sourceValue = source[key];
        const targetValue = result[key];
        if (this.isObject(sourceValue) && this.isObject(targetValue)) {
          result[key] = this.deepMerge(targetValue, sourceValue);
        } else if (sourceValue !== void 0) {
          result[key] = sourceValue;
        }
      }
    }
    return result;
  }
  isObject(item) {
    return item && typeof item === "object" && !Array.isArray(item);
  }
  getNestedValue(obj, path) {
    return path.split(".").reduce((current, key) => current == null ? void 0 : current[key], obj);
  }
};
function getConfigValue(path) {
  return ConfigManager.getInstance().getValue(path);
}
var CONFIG_PATHS = {
  API_TIMEOUT_DEFAULT: "api.timeouts.default",
  API_TIMEOUT_LLM: "api.timeouts.llm",
  API_TIMEOUT_TTS: "api.timeouts.tts",
  API_RETRY_MAX_ATTEMPTS: "api.retries.maxAttempts",
  API_RETRY_DELAY: "api.retries.delayMs",
  BATCH_DEFAULT_SIZE: "batch.defaultSize",
  BATCH_MAX_SIZE: "batch.maxSize",
  BATCH_DELAY: "batch.delayBetweenBatches",
  AUDIO_MAX_POOL_SIZE: "audio.maxPoolSize",
  AUDIO_CLEANUP_TIMEOUT: "audio.autoCleanupTimeoutMs",
  LEARNING_INITIAL_INTERVAL: "learning.spaced_repetition.initialInterval",
  LEARNING_EASY_BONUS: "learning.spaced_repetition.easyBonus",
  LEARNING_HARD_PENALTY: "learning.spaced_repetition.hardPenalty",
  UI_ANIMATION_DURATION: "ui.animationDuration",
  UI_NOTIFICATION_TIMEOUT: "ui.notificationTimeout"
};

// src/shared/RetryPolicy.ts
var RetryPolicy = class {
  constructor(options = {}) {
    var _a, _b, _c, _d, _e, _f;
    this.options = {
      maxAttempts: (_a = options.maxAttempts) != null ? _a : getConfigValue(CONFIG_PATHS.API_RETRY_MAX_ATTEMPTS),
      delayMs: (_b = options.delayMs) != null ? _b : getConfigValue(CONFIG_PATHS.API_RETRY_DELAY),
      exponentialBackoff: (_c = options.exponentialBackoff) != null ? _c : true,
      maxDelayMs: (_d = options.maxDelayMs) != null ? _d : 3e4,
      // 30초
      backoffMultiplier: (_e = options.backoffMultiplier) != null ? _e : 2,
      retryCondition: (_f = options.retryCondition) != null ? _f : this.defaultRetryCondition
    };
  }
  // 기본 재시도 조건
  defaultRetryCondition(error) {
    const retryableErrors = [
      "NetworkError",
      "TimeoutError",
      "fetch",
      "502",
      "503",
      "504",
      // 서버 에러
      "ECONNRESET",
      "ETIMEDOUT",
      "ENOTFOUND"
    ];
    const errorMessage = error.message.toLowerCase();
    const errorName = error.name.toLowerCase();
    return retryableErrors.some(
      (pattern) => errorMessage.includes(pattern.toLowerCase()) || errorName.includes(pattern.toLowerCase())
    );
  }
  // 지수 백오프 계산
  calculateDelay(attempt) {
    if (!this.options.exponentialBackoff) {
      return this.options.delayMs;
    }
    const delay2 = this.options.delayMs * Math.pow(this.options.backoffMultiplier, attempt - 1);
    const jitter = delay2 * 0.2 * (Math.random() - 0.5);
    const finalDelay = Math.floor(delay2 + jitter);
    return Math.min(finalDelay, this.options.maxDelayMs);
  }
  // 비동기 함수 재시도
  async execute(fn) {
    const startTime = Date.now();
    let lastError;
    for (let attempt = 1; attempt <= this.options.maxAttempts; attempt++) {
      try {
        const result = await fn();
        return {
          success: true,
          result,
          attempts: attempt,
          totalDuration: Date.now() - startTime
        };
      } catch (error) {
        lastError = error instanceof Error ? error : new Error(String(error));
        if (attempt === this.options.maxAttempts || !this.options.retryCondition(lastError)) {
          break;
        }
        const delay2 = this.calculateDelay(attempt);
        await this.delay(delay2);
      }
    }
    return {
      success: false,
      error: lastError,
      attempts: this.options.maxAttempts,
      totalDuration: Date.now() - startTime
    };
  }
  // 동기 함수 재시도
  executeSync(fn) {
    const startTime = Date.now();
    let lastError;
    for (let attempt = 1; attempt <= this.options.maxAttempts; attempt++) {
      try {
        const result = fn();
        return {
          success: true,
          result,
          attempts: attempt,
          totalDuration: Date.now() - startTime
        };
      } catch (error) {
        lastError = error instanceof Error ? error : new Error(String(error));
        if (attempt === this.options.maxAttempts || !this.options.retryCondition(lastError)) {
          break;
        }
      }
    }
    return {
      success: false,
      error: lastError,
      attempts: this.options.maxAttempts,
      totalDuration: Date.now() - startTime
    };
  }
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  // 설정 업데이트
  updateOptions(options) {
    this.options = { ...this.options, ...options };
  }
  // 현재 설정 반환
  getOptions() {
    return { ...this.options };
  }
};
var APIRetryPolicy = class extends RetryPolicy {
  constructor(options = {}) {
    super({
      maxAttempts: 3,
      delayMs: 2e3,
      exponentialBackoff: true,
      maxDelayMs: 15e3,
      retryCondition: (error) => {
        const retryableErrors = [
          "429",
          // Rate limit
          "502",
          "503",
          "504",
          // Server errors
          "timeout",
          "network"
        ];
        const errorText = error.message.toLowerCase();
        return retryableErrors.some((pattern) => errorText.includes(pattern));
      },
      ...options
    });
  }
};
async function retryAPICall(fn, options) {
  const policy = new APIRetryPolicy(options);
  const result = await policy.execute(fn);
  if (result.success) {
    return result.result;
  } else {
    throw result.error;
  }
}

// src/infrastructure/llm/LLMService.ts
var import_obsidian = require("obsidian");
var LLMService = class {
  constructor(settings) {
    this.settings = settings;
    this.retryPolicy = new APIRetryPolicy({
      maxAttempts: 3,
      delayMs: 2e3,
      exponentialBackoff: true
    });
  }
  // 현재 선택된 제공업체의 API 키를 가져오는 메서드
  getCurrentApiKey() {
    const provider = this.settings.llmProvider;
    let encryptedKey = "";
    switch (provider) {
      case "openai":
        encryptedKey = this.settings.openaiApiKey;
        break;
      case "anthropic":
        encryptedKey = this.settings.anthropicApiKey;
        break;
      case "google":
        encryptedKey = this.settings.googleApiKey;
        break;
    }
    return decryptApiKey(encryptedKey);
  }
  async testConnection() {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const testPrompt = 'Hello, this is a test message. Please respond with "OK" if you can read this.';
      const response = await this.callLLM(testPrompt);
      if (response.success) {
        return { success: true, data: "API \uC5F0\uACB0 \uC131\uACF5" };
      } else {
        return { success: false, error: response.error || "API \uC5F0\uACB0 \uC2E4\uD328" };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getWordDetails(word) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const prompt = this.createWordDetailPrompt(word);
      const response = await this.callLLM(prompt);
      if (response.success) {
        const parsedData = this.parseWordDetailResponse(response.data, word);
        return { success: true, data: parsedData };
      } else {
        return { success: false, error: response.error || "\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getMultipleWordDetails(words, progressCallback) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      if (words.length === 0) {
        return { success: false, error: "\uCC98\uB9AC\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      const BATCH_SIZE = 20;
      const allResults = [];
      const totalBatches = Math.ceil(words.length / BATCH_SIZE);
      if (progressCallback) {
        progressCallback(0, words.length, `\uCD1D ${words.length}\uAC1C \uB2E8\uC5B4\uB97C ${totalBatches}\uAC1C \uBC30\uCE58\uB85C \uB098\uB204\uC5B4 \uCC98\uB9AC\uD569\uB2C8\uB2E4.`);
      }
      for (let i = 0; i < words.length; i += BATCH_SIZE) {
        const batchNumber = Math.floor(i / BATCH_SIZE) + 1;
        const batchWords = words.slice(i, i + BATCH_SIZE);
        if (progressCallback) {
          progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber}/${totalBatches} \uCC98\uB9AC \uC911... (${batchWords.length}\uAC1C \uB2E8\uC5B4)`);
        }
        try {
          const prompt = this.createMultipleWordDetailPrompt(batchWords);
          const response = await this.callLLM(prompt);
          if (response.success) {
            const parsedData = this.parseMultipleWordDetailResponse(response.data, batchWords);
            allResults.push(...parsedData);
            if (progressCallback) {
              progressCallback(i + batchWords.length, words.length, `\uBC30\uCE58 ${batchNumber} \uC644\uB8CC: ${parsedData.length}\uAC1C \uB2E8\uC5B4 \uCC98\uB9AC\uB428`);
            }
          } else {
            console.error(`\uBC30\uCE58 ${batchNumber} \uC2E4\uD328:`, response.error);
            if (progressCallback) {
              progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC2E4\uD328, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
            }
            const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
            allResults.push(...individualResults);
          }
        } catch (error) {
          console.error(`\uBC30\uCE58 ${batchNumber} \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
          if (progressCallback) {
            progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC624\uB958, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
          }
          const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
          allResults.push(...individualResults);
        }
        if (i + BATCH_SIZE < words.length) {
          await this.delay(1e3);
        }
      }
      if (progressCallback) {
        progressCallback(words.length, words.length, `\uBAA8\uB4E0 \uBC30\uCE58 \uCC98\uB9AC \uC644\uB8CC. \uCD1D ${allResults.length}\uAC1C \uB2E8\uC5B4 \uB370\uC774\uD130 \uC218\uC9D1\uB428`);
      }
      return { success: true, data: allResults };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  // 개별 단어 처리 (배치 실패 시 폴백)
  async processWordsIndividually(words, progressCallback, startIndex = 0) {
    const results = [];
    for (let i = 0; i < words.length; i++) {
      const word = words[i];
      const currentIndex = startIndex + i;
      try {
        if (progressCallback) {
          progressCallback(currentIndex, startIndex + words.length, `\uAC1C\uBCC4 \uCC98\uB9AC: "${word}"`);
        }
        const response = await this.getWordDetails(word);
        if (response.success && response.data) {
          results.push(response.data);
        } else {
          console.warn(`\uB2E8\uC5B4 "${word}" \uCC98\uB9AC \uC2E4\uD328:`, response.error);
          results.push({
            word: word.toLowerCase(),
            pronunciation: "",
            meanings: ["\uCC98\uB9AC \uC2E4\uD328"],
            examples: [],
            similarWords: []
          });
        }
        await this.delay(500);
      } catch (error) {
        console.error(`\uB2E8\uC5B4 "${word}" \uAC1C\uBCC4 \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
        results.push({
          word: word.toLowerCase(),
          pronunciation: "",
          meanings: ["\uCC98\uB9AC \uC624\uB958"],
          examples: [],
          similarWords: []
        });
      }
    }
    return results;
  }
  // 지연 함수
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  createWordDetailPrompt(word) {
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4 "${word}"\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
1. \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD)
2. \uD55C\uAE00 \uB73B\uB4E4 (\uC5EC\uB7EC \uAC1C\uC77C \uC218 \uC788\uC74C)
3. \uAC01 \uB73B\uBCC4\uB85C \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED (\uAC01 \uB73B\uB2F9 2-3\uAC1C\uC758 \uC608\uBB38 \uC81C\uACF5)
4. \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4

\uC751\uB2F5 \uD615\uC2DD:
{
  "word": "${word}",
  "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
  "meanings": ["\uB73B1", "\uB73B2", "\uB73B3"],
  "examples": [
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 1",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 2", 
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 3",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
    }
  ],
  "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42", "\uC720\uC0AC\uB2E8\uC5B43"]
}

JSON \uD615\uC2DD\uC73C\uB85C\uB9CC \uC751\uB2F5\uD574\uC8FC\uC138\uC694. \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  createMultipleWordDetailPrompt(words) {
    const wordList = words.join(", ");
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C \uC815\uD655\uD55C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694: ${wordList}

\uC694\uAD6C\uC0AC\uD56D:
- \uAC01 \uB2E8\uC5B4\uC5D0 \uB300\uD574 \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD), \uD55C\uAE00 \uB73B\uB4E4, \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED, \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC744 \uD3EC\uD568
- \uAC01 \uB73B\uBCC4\uB85C 2-3\uAC1C\uC758 \uC608\uBB38\uC744 \uC81C\uACF5\uD574\uC8FC\uC138\uC694
- JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694
- \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uC774\uC911 \uB530\uC634\uD45C\uB85C \uAC10\uC2F8\uC8FC\uC138\uC694
- \uBC30\uC5F4\uACFC \uAC1D\uCCB4\uB294 \uC815\uD655\uD55C JSON \uBB38\uBC95\uC744 \uB530\uB974\uC138\uC694

\uC751\uB2F5 \uD615\uC2DD:
[
  {
    "word": "\uB2E8\uC5B41",
    "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
    "meanings": ["\uB73B1", "\uB73B2"],
    "examples": [
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 1",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 2",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 3",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
      }
    ],
    "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42"]
  }
]

\uC911\uC694: JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uD14D\uC2A4\uD2B8\uB294 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  async callLLM(prompt) {
    try {
      const provider = this.settings.llmProvider;
      switch (provider) {
        case "openai":
          return await this.callOpenAI(prompt);
        case "anthropic":
          return await this.callAnthropic(prompt);
        case "google":
          return await this.callGoogle(prompt);
        default:
          return { success: false, error: "\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 LLM \uC81C\uACF5\uC5C5\uCCB4\uC785\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callOpenAI(prompt) {
    var _a, _b, _c;
    try {
      const response = await retryAPICall(async () => {
        return (0, import_obsidian.requestUrl)({
          url: "https://api.openai.com/v1/chat/completions",
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${this.getCurrentApiKey()}`
          },
          body: JSON.stringify({
            model: this.settings.llmModel,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ],
            temperature: 0.3,
            max_tokens: 4e3
          })
        });
      });
      if (response.status >= 400) {
        const errorData = JSON.parse(response.text);
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "OpenAI API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = JSON.parse(response.text);
      const content = (_c = (_b = data.choices[0]) == null ? void 0 : _b.message) == null ? void 0 : _c.content;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callAnthropic(prompt) {
    var _a, _b, _c;
    if (typeof window === "undefined" || typeof window !== "undefined" && "process" in window && ((_a = window.process) == null ? void 0 : _a.type) === "renderer") {
      try {
        const response = await (0, import_obsidian.requestUrl)({
          url: "https://api.anthropic.com/v1/messages",
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "x-api-key": this.getCurrentApiKey(),
            "anthropic-version": "2023-06-01"
          },
          body: JSON.stringify({
            model: this.settings.llmModel,
            max_tokens: 3e4,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ]
          })
        });
        if (response.status >= 400) {
          const errorData = JSON.parse(response.text);
          return { success: false, error: ((_b = errorData.error) == null ? void 0 : _b.message) || "Anthropic API \uD638\uCD9C \uC2E4\uD328" };
        }
        const data = JSON.parse(response.text);
        const content = (_c = data.content[0]) == null ? void 0 : _c.text;
        if (!content) {
          return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
        }
        return { success: true, data: content };
      } catch (error) {
        return { success: false, error: error.message };
      }
    } else {
      return {
        success: false,
        error: "Anthropic API\uB294 \uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD\uC5D0\uC11C \uC9C1\uC811 \uD638\uCD9C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uB370\uC2A4\uD06C\uD1B1 \uC571(Obsidian)\uC5D0\uC11C\uB9CC \uB3D9\uC791\uD569\uB2C8\uB2E4."
      };
    }
  }
  async callGoogle(prompt) {
    var _a, _b, _c, _d;
    try {
      const response = await retryAPICall(async () => {
        return (0, import_obsidian.requestUrl)({
          url: `https://generativelanguage.googleapis.com/v1beta/models/${this.settings.llmModel}:generateContent?key=${this.getCurrentApiKey()}`,
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            contents: [
              {
                parts: [
                  {
                    text: prompt
                  }
                ]
              }
            ],
            generationConfig: {
              temperature: 0.3,
              maxOutputTokens: 4e3
            }
          })
        });
      });
      if (response.status >= 400) {
        const errorData = JSON.parse(response.text);
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "Google API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = JSON.parse(response.text);
      const content = (_d = (_c = (_b = data.candidates[0]) == null ? void 0 : _b.content) == null ? void 0 : _c.parts[0]) == null ? void 0 : _d.text;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  parseWordDetailResponse(response, originalWord) {
    try {
      const jsonMatch = response.match(/\{[\s\S]*\}/);
      if (!jsonMatch) {
        throw new Error("JSON \uD615\uC2DD\uC758 \uC751\uB2F5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      }
      const jsonData = JSON.parse(jsonMatch[0]);
      const validatedExamples = this.validateExamples(jsonData.examples);
      return {
        word: jsonData.word || originalWord,
        pronunciation: jsonData.pronunciation || "",
        meanings: jsonData.meanings || [],
        examples: validatedExamples,
        similarWords: jsonData.similarWords || []
      };
    } catch (error) {
      return {
        word: originalWord,
        pronunciation: "",
        meanings: ["\uC758\uBBF8\uB97C \uD30C\uC2F1\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
        examples: [],
        similarWords: []
      };
    }
  }
  // 예문 데이터 검증 및 정리
  validateExamples(examples) {
    if (!Array.isArray(examples)) {
      return [];
    }
    const validatedExamples = [];
    for (const example of examples) {
      if (example && typeof example === "object") {
        const english = example.english || example.english_text || example.text || "";
        const korean = example.korean || example.korean_text || example.translation || "";
        if (english.trim() && korean.trim()) {
          validatedExamples.push({
            english: english.trim(),
            korean: korean.trim()
          });
        }
      }
    }
    return validatedExamples;
  }
  parseMultipleWordDetailResponse(response, originalWords) {
    try {
      let jsonMatch = response.match(/\[[\s\S]*\]/);
      if (!jsonMatch) {
        const objectMatches = response.match(/\{[^{}]*"word"[^{}]*\}/g);
        if (objectMatches && objectMatches.length > 0) {
          const jsonString = "[" + objectMatches.join(",") + "]";
          try {
            const jsonData2 = JSON.parse(jsonString);
            if (Array.isArray(jsonData2)) {
              return this.processJsonData(jsonData2, originalWords);
            }
          } catch (e) {
          }
        }
        const lastCompleteMatch = response.match(/\[[\s\S]*\}(?=\s*$)/);
        if (lastCompleteMatch) {
          jsonMatch = [lastCompleteMatch[0] + "]"];
        } else {
          throw new Error("JSON \uBC30\uC5F4\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        }
      }
      let jsonData;
      let parsedLength = 0;
      try {
        jsonData = JSON.parse(jsonMatch[0]);
      } catch (parseError) {
        const results = this.parseIncrementalJson(response);
        if (results.length > 0) {
          return results;
        }
        const fixedJson = this.fixJsonString(jsonMatch[0]);
        try {
          jsonData = JSON.parse(fixedJson);
        } catch (secondError) {
          throw new Error("JSON \uD30C\uC2F1 \uBC0F \uBCF5\uAD6C \uC2E4\uD328");
        }
      }
      if (!Array.isArray(jsonData)) {
        throw new Error("\uC751\uB2F5\uC774 \uBC30\uC5F4 \uD615\uC2DD\uC774 \uC544\uB2D9\uB2C8\uB2E4.");
      }
      return this.processJsonData(jsonData, originalWords);
    } catch (error) {
      console.error("\uC5EC\uB7EC \uB2E8\uC5B4 \uC751\uB2F5 \uD30C\uC2F1 \uC624\uB958:", error);
      console.error("\uC6D0\uBCF8 \uC751\uB2F5:", response);
      return originalWords.map((word) => ({
        word: word.toLowerCase(),
        pronunciation: "",
        meanings: [],
        examples: [],
        similarWords: []
      }));
    }
  }
  // 점진적 JSON 파싱 - 완전한 객체들만 파싱
  parseIncrementalJson(response) {
    const results = [];
    const objectRegex = /\{[^{}]*"word"[^{}]*"pronunciation"[^{}]*"meanings"[^{}]*"examples"[^{}]*"similarWords"[^{}]*\}/g;
    let match;
    while ((match = objectRegex.exec(response)) !== null) {
      try {
        const objectData = JSON.parse(match[0]);
        if (objectData && objectData.word) {
          const validatedExamples = this.validateExamples(objectData.examples);
          const wordData = {
            word: objectData.word.toLowerCase(),
            pronunciation: objectData.pronunciation || "",
            meanings: Array.isArray(objectData.meanings) ? objectData.meanings : [],
            examples: validatedExamples,
            similarWords: Array.isArray(objectData.similarWords) ? objectData.similarWords : []
          };
          results.push(wordData);
        }
      } catch (e) {
        continue;
      }
    }
    return results;
  }
  // WordDetailData를 WordData로 변환하는 메서드
  convertToWordData(wordDetail) {
    return {
      word: wordDetail.word,
      pronunciation: wordDetail.pronunciation,
      meanings: wordDetail.meanings,
      similarWords: wordDetail.similarWords,
      examples: wordDetail.examples
    };
  }
  // JSON 데이터 처리
  processJsonData(jsonData, originalWords) {
    const results = [];
    for (const item of jsonData) {
      if (item && typeof item === "object" && item.word) {
        const validatedExamples = this.validateExamples(item.examples);
        const wordData = {
          word: item.word.toLowerCase(),
          pronunciation: item.pronunciation || "",
          meanings: Array.isArray(item.meanings) ? item.meanings : [],
          examples: validatedExamples,
          similarWords: Array.isArray(item.similarWords) ? item.similarWords : []
        };
        results.push(wordData);
      }
    }
    return results;
  }
  // JSON 문자열 복구
  fixJsonString(jsonString) {
    let fixed = jsonString;
    const lastCompleteObject = fixed.match(/.*\}(?=,?\s*$)/);
    if (lastCompleteObject) {
      fixed = lastCompleteObject[0] + "]";
    }
    fixed = fixed.replace(/,\s*,/g, ",");
    fixed = fixed.replace(/,\s*\]/g, "]");
    fixed = fixed.replace(/,\s*\}/g, "}");
    let result = "";
    let inString = false;
    let escaped = false;
    for (let i = 0; i < fixed.length; i++) {
      const char = fixed[i];
      const prevChar = i > 0 ? fixed[i - 1] : "";
      if (char === '"' && !escaped) {
        if (inString) {
          inString = false;
          result += char;
        } else {
          inString = true;
          result += char;
        }
      } else if (char === '"' && escaped) {
        result += char;
      } else if (char === '"' && inString && !escaped) {
        result += '\\"';
      } else {
        result += char;
      }
      escaped = char === "\\" && !escaped;
    }
    fixed = result;
    return fixed;
  }
};

// src/features/settings/ui/settings.ts
var DEFAULT_SETTINGS = {
  apiKey: "",
  defaultLanguage: "ko",
  showSimilarWords: true,
  showExamples: true,
  examplesCount: 3,
  openaiApiKey: "",
  anthropicApiKey: "",
  googleApiKey: "",
  llmProvider: "openai",
  llmModel: "gemini-1.0-pro-latest",
  enableAdvancedFeatures: false,
  reviewModalHeight: 85,
  vocabularyFolderPath: "Vocabulary",
  ttsEnabled: true,
  ttsProvider: "chatterbox",
  ttsVoice: "alloy",
  ttsPlaybackSpeed: 1,
  ttsAutoPlay: false,
  // Chatterbox TTS 기본값
  chatterboxApiUrl: "http://localhost:4123",
  // 경고: HTTP는 보안에 취약합니다. 가능하면 HTTPS를 사용하세요.
  chatterboxExaggeration: 0.7,
  chatterboxCfgWeight: 0.4,
  chatterboxTemperature: 0.9,
  // Google Cloud TTS 기본값
  googleCloudTTSApiKey: "",
  googleCloudTTSLanguageCode: "en-US",
  googleCloudTTSSpeakingRate: 1,
  googleCloudTTSPitch: 0
};
var VocabularySettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uD50C\uB7EC\uADF8\uC778 \uC124\uC815" });
    this.createBasicSettings(containerEl);
    this.createLLMSettings(containerEl);
    this.createTTSSettings(containerEl);
    this.createAdvancedSettings(containerEl);
  }
  createBasicSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uAE30\uBCF8 \uC124\uC815" });
    new import_obsidian2.Setting(containerEl).setName("\uAE30\uBCF8 \uC5B8\uC5B4").setDesc("\uB2E8\uC5B4 \uB73B\uC744 \uD45C\uC2DC\uD560 \uC5B8\uC5B4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("ko", "\uD55C\uAD6D\uC5B4").addOption("en", "English").addOption("ja", "\u65E5\u672C\u8A9E").setValue(this.plugin.settings.defaultLanguage).onChange(async (value) => {
      this.plugin.settings.defaultLanguage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC720\uC0AC\uD55C \uB2E8\uC5B4 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showSimilarWords).onChange(async (value) => {
      this.plugin.settings.showSimilarWords = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC608\uBB38 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC608\uBB38\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showExamples).onChange(async (value) => {
      this.plugin.settings.showExamples = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC608\uBB38 \uAC1C\uC218").setDesc("\uD45C\uC2DC\uD560 \uC608\uBB38\uC758 \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => slider.setLimits(1, 10, 1).setValue(this.plugin.settings.examplesCount).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.examplesCount = value;
      await this.plugin.saveSettings();
    }));
  }
  createLLMSettings(containerEl) {
    containerEl.createEl("h3", { text: "LLM API \uC124\uC815" });
    new import_obsidian2.Setting(containerEl).setName("\uACE0\uAE09 \uAE30\uB2A5 \uD65C\uC131\uD654").setDesc("LLM API\uB97C \uC0AC\uC6A9\uD55C \uACE0\uAE09 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableAdvancedFeatures).onChange(async (value) => {
      this.plugin.settings.enableAdvancedFeatures = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("LLM \uC81C\uACF5\uC5C5\uCCB4").setDesc("\uC0AC\uC6A9\uD560 LLM API \uC81C\uACF5\uC5C5\uCCB4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("openai", "OpenAI (GPT)").addOption("anthropic", "Anthropic (Claude)").addOption("google", "Google (Gemini)").setValue(this.plugin.settings.llmProvider).onChange(async (value) => {
      this.plugin.settings.llmProvider = value;
      if (value === "openai") {
        this.plugin.settings.llmModel = "gpt-4.1";
      } else if (value === "anthropic") {
        this.plugin.settings.llmModel = "claude-3-5-sonnet";
      } else if (value === "google") {
        this.plugin.settings.llmModel = "gemini-2.5-flash";
      }
      await this.plugin.saveSettings();
      this.display();
    }));
    this.createModelSelection(containerEl);
    this.createApiKeySettings(containerEl);
    new import_obsidian2.Setting(containerEl).setName("API \uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setDesc("\uD604\uC7AC \uC120\uD0DD\uB41C \uC81C\uACF5\uC5C5\uCCB4\uC758 API \uD0A4\uAC00 \uC62C\uBC14\uB974\uAC8C \uC124\uC815\uB418\uC5C8\uB294\uC9C0 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4.").addButton((button) => button.setButtonText("\uD14C\uC2A4\uD2B8").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        const llmService = new LLMService(this.plugin.settings);
        const result = await llmService.testConnection();
        if (result.success) {
          new import_obsidian2.Notice("\u2705 API \uC5F0\uACB0 \uC131\uACF5!");
        } else {
          new import_obsidian2.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + result.error);
        }
      } catch (error) {
        new import_obsidian2.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + error.message);
      } finally {
        button.setButtonText("\uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
  }
  createModelSelection(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("API \uBAA8\uB378").setDesc("\uC0AC\uC6A9\uD560 LLM \uBAA8\uB378\uC744 \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => {
      const provider = this.plugin.settings.llmProvider;
      if (provider === "openai") {
        dropdown.addOption("gpt-4.1", "GPT-4.1").addOption("gpt-4o", "GPT-4o").addOption("gpt-4o-mini", "GPT-4o Mini").addOption("gpt-4.1-long", "GPT-4.1 (Long Context)").addOption("gpt-4.5-preview", "GPT-4.5 Preview").addOption("gpt-4.5-preview-2", "GPT-4.5 Preview 2");
      } else if (provider === "anthropic") {
        dropdown.addOption("claude-3-5-sonnet", "Claude 3.5 Sonnet").addOption("claude-3-5-haiku", "Claude 3.5 Haiku").addOption("claude-3-5-opus", "Claude 3.5 Opus").addOption("claude-3-7-sonnet", "Claude 3.7 Sonnet").addOption("claude-3-7-haiku", "Claude 3.7 Haiku").addOption("claude-3-7-opus", "Claude 3.7 Opus").addOption("claude-3-5-flash", "Claude 3.5 Flash");
      } else if (provider === "google") {
        dropdown.addOption("gemini-1.5-pro-latest", "Gemini 1.5 Pro").addOption("gemini-2.5-flash", "Gemini 2.5 Flash").addOption("gemini-2.5-pro", "Gemini 2.5 Pro").addOption("gemini-1.5-flash-latest", "Gemini 1.5 Flash");
      }
      return dropdown.setValue(this.plugin.settings.llmModel).onChange(async (value) => {
        this.plugin.settings.llmModel = value;
        await this.plugin.saveSettings();
      });
    });
  }
  createApiKeySettings(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("OpenAI API \uD0A4").setDesc("OpenAI API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.openaiApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.openaiApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Anthropic API \uD0A4").setDesc("Anthropic API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-ant-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.anthropicApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-ant-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.anthropicApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Google API \uD0A4").setDesc("Google API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").addText((text) => {
      const currentKey = this.plugin.settings.googleApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
  }
  createAdvancedSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uACE0\uAE09 \uC124\uC815" });
    const folders = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian2.TFolder);
    new import_obsidian2.Setting(containerEl).setName("\uB2E8\uC5B4\uC7A5 \uC800\uC7A5 \uD3F4\uB354").setDesc("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C\uB4E4\uC774 \uC800\uC7A5\uB420 \uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: Vocabulary)").addDropdown((dropdown) => {
      folders.forEach((folder) => {
        if (folder instanceof import_obsidian2.TFolder) {
          dropdown.addOption(folder.path, folder.path);
        }
      });
      dropdown.setValue(this.plugin.settings.vocabularyFolderPath);
      dropdown.onChange(async (value) => {
        this.plugin.settings.vocabularyFolderPath = value;
        await this.plugin.saveSettings();
        if (this.plugin.databaseManager) {
          this.plugin.databaseManager.updateVocabularyFolderPath(value);
        }
      });
      return dropdown;
    });
    new import_obsidian2.Setting(containerEl).setName("\uBCF5\uC2B5 \uD654\uBA74 \uB192\uC774").setDesc("\uBCF5\uC2B5 \uBAA8\uB2EC\uC758 \uB192\uC774\uB97C \uD654\uBA74 \uB192\uC774\uC758 \uBC31\uBD84\uC728\uB85C \uC124\uC815\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: 85%)").addSlider((slider) => slider.setLimits(50, 95, 5).setValue(this.plugin.settings.reviewModalHeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.reviewModalHeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC77C\uC77C \uD559\uC2B5 \uBAA9\uD45C").setDesc("\uD558\uB8E8\uC5D0 \uD559\uC2B5\uD560 \uB2E8\uC5B4\uC758 \uBAA9\uD45C \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(5, 50, 5).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.dailyGoal) || 10).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ dailyGoal: value }));
      });
    });
    new import_obsidian2.Setting(containerEl).setName("\uBCF5\uC2B5 \uAC04\uACA9 (\uC77C)").setDesc("\uB2E8\uC5B4\uB97C \uB2E4\uC2DC \uBCF5\uC2B5\uD560 \uAC04\uACA9\uC744 \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(1, 30, 1).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.reviewInterval) || 1).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ reviewInterval: value }));
      });
    });
  }
  createTTSSettings(containerEl) {
    containerEl.createEl("h3", { text: "TTS (\uC74C\uC131 \uC77D\uAE30) \uC124\uC815" });
    const ttsToggleSetting = new import_obsidian2.Setting(containerEl).setName("TTS \uD65C\uC131\uD654").setDesc("\uB2E8\uC5B4\uC640 \uC608\uBB38\uC744 \uC74C\uC131\uC73C\uB85C \uC77D\uC5B4\uC8FC\uB294 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsEnabled).onChange(async (value) => {
      this.plugin.settings.ttsEnabled = value;
      await this.plugin.saveSettings();
      this.updateTTSSettingsVisibility();
    }));
    new import_obsidian2.Setting(containerEl).setName("TTS \uC81C\uACF5\uC790").setDesc("\uC0AC\uC6A9\uD560 TTS \uC11C\uBE44\uC2A4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").setClass("tts-provider-setting").addDropdown((dropdown) => dropdown.addOption("chatterbox", "Chatterbox TTS (\uB85C\uCEEC)").addOption("google-cloud", "Google Cloud Text-to-Speech").setValue(this.plugin.settings.ttsProvider).onChange(async (value) => {
      this.plugin.settings.ttsProvider = value;
      await this.plugin.saveSettings();
      this.updateTTSProviderSettings();
    }));
    this.createChatterboxTTSSettings(containerEl);
    this.createGoogleCloudTTSSettings(containerEl);
    const autoPlaySetting = new import_obsidian2.Setting(containerEl).setName("\uC790\uB3D9 \uC7AC\uC0DD").setDesc("\uB2E8\uC5B4 \uCE74\uB4DC\uAC00 \uD45C\uC2DC\uB420 \uB54C \uC790\uB3D9\uC73C\uB85C \uB2E8\uC5B4\uB97C \uC77D\uC5B4\uC90D\uB2C8\uB2E4.").setClass("tts-autoplay-setting").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsAutoPlay).onChange(async (value) => {
      this.plugin.settings.ttsAutoPlay = value;
      await this.plugin.saveSettings();
    }));
    this.updateTTSSettingsVisibility();
    this.updateTTSProviderSettings();
  }
  populateChatterboxVoiceDropdown(dropdown) {
    const chatterboxVoices = [
      { value: "alloy", name: "Alloy (\uC911\uC131\uC801)" },
      { value: "echo", name: "Echo (\uB0A8\uC131)" },
      { value: "fable", name: "Fable (\uC601\uAD6D\uC2DD)" },
      { value: "onyx", name: "Onyx (\uAE4A\uC740 \uB0A8\uC131)" },
      { value: "nova", name: "Nova (\uC5EC\uC131)" },
      { value: "shimmer", name: "Shimmer (\uBD80\uB4DC\uB7EC\uC6B4 \uC5EC\uC131)" },
      { value: "custom", name: "Custom (\uC0AC\uC6A9\uC790 \uC815\uC758)" }
    ];
    chatterboxVoices.forEach((option) => {
      dropdown.addOption(option.value, option.name);
    });
    try {
      const voices = speechSynthesis.getVoices();
      const englishVoices = voices.filter(
        (voice) => voice.lang.startsWith("en-") && !voice.lang.includes("ko") && !chatterboxVoices.some((opt) => opt.value === voice.name)
      );
      if (englishVoices.length > 0) {
        dropdown.addOption("---", "--- \uC2DC\uC2A4\uD15C \uC74C\uC131 ---");
        englishVoices.forEach((voice) => {
          const displayName = `${voice.name} (${voice.lang})`;
          dropdown.addOption(voice.name, displayName);
        });
      }
    } catch (error) {
      console.warn("\uC74C\uC131 \uBAA9\uB85D\uC744 \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
    }
  }
  updateTTSSettingsVisibility() {
    const isEnabled = this.plugin.settings.ttsEnabled;
    const allTtsSettings = this.containerEl.querySelectorAll(
      ".tts-provider-setting, .chatterbox-api-url-setting, .chatterbox-voice-setting, .chatterbox-exaggeration-setting, .chatterbox-cfg-setting, .chatterbox-temperature-setting, .google-cloud-tts-guide, .google-cloud-api-key-setting, .google-cloud-language-setting, .google-cloud-voice-setting, .google-cloud-speaking-rate-setting, .google-cloud-pitch-setting, .tts-autoplay-setting"
    );
    allTtsSettings.forEach((setting) => {
      const element = setting;
      if (isEnabled) {
        element.removeClass("settings-disabled");
        element.addClass("settings-enabled");
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        const inputs = element.querySelectorAll('input[type="text"]');
        buttons.forEach((btn) => btn.disabled = false);
        dropdowns.forEach((dd) => dd.disabled = false);
        sliders.forEach((slider) => slider.disabled = false);
        toggles.forEach((toggle) => toggle.disabled = false);
        inputs.forEach((input) => input.disabled = false);
      } else {
        element.removeClass("settings-enabled");
        element.addClass("settings-disabled");
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        const inputs = element.querySelectorAll('input[type="text"]');
        buttons.forEach((btn) => btn.disabled = true);
        dropdowns.forEach((dd) => dd.disabled = true);
        sliders.forEach((slider) => slider.disabled = true);
        toggles.forEach((toggle) => toggle.disabled = true);
        inputs.forEach((input) => input.disabled = true);
      }
    });
    if (isEnabled) {
      this.updateTTSProviderSettings();
    }
  }
  async testChatterboxConnection() {
    try {
      const response = await fetch(`${this.plugin.settings.chatterboxApiUrl}/v1/audio/speech`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: "Connection test",
          voice: "alloy"
        })
      });
      if (response.ok) {
        new import_obsidian2.Notice("\u2705 Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0 \uC131\uACF5!");
      } else {
        throw new Error(`\uC11C\uBC84 \uC751\uB2F5 \uC624\uB958: ${response.status}`);
      }
    } catch (error) {
      console.error("Chatterbox TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      new import_obsidian2.Notice("\u274C Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0 \uC2E4\uD328. \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      throw error;
    }
  }
  createChatterboxTTSSettings(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("Chatterbox TTS API URL").setDesc("Chatterbox TTS \uC11C\uBC84\uC758 URL\uC744 \uC785\uB825\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: http://localhost:4123)").setClass("chatterbox-api-url-setting").addText((text) => text.setPlaceholder("http://localhost:4123").setValue(this.plugin.settings.chatterboxApiUrl).onChange(async (value) => {
      this.plugin.settings.chatterboxApiUrl = value || "http://localhost:4123";
      await this.plugin.saveSettings();
    })).addButton((button) => button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setTooltip("Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0\uC744 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        await this.testChatterboxConnection();
      } finally {
        button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("Chatterbox TTS\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").setClass("chatterbox-voice-setting").addDropdown((dropdown) => {
      this.populateChatterboxVoiceDropdown(dropdown);
      return dropdown.setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
        this.plugin.settings.ttsVoice = value;
        await this.plugin.saveSettings();
      });
    }).addButton((button) => button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30").setTooltip("\uC120\uD0DD\uD55C \uC74C\uC131\uC73C\uB85C \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uB97C \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playChatterboxVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
        new import_obsidian2.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uAC10\uC815 \uD45C\uD604 \uAC15\uB3C4 (Exaggeration)").setDesc("\uC74C\uC131\uC758 \uAC10\uC815 \uD45C\uD604 \uAC15\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.25 = \uC57D\uD568, 2.0 = \uAC15\uD568)").setClass("chatterbox-exaggeration-setting").addSlider((slider) => slider.setLimits(0.25, 2, 0.05).setValue(this.plugin.settings.chatterboxExaggeration).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxExaggeration = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("CFG \uAC00\uC911\uCE58 (CFG Weight)").setDesc("\uC74C\uC131 \uC0DD\uC131\uC758 \uAC00\uC774\uB358\uC2A4 \uAC15\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.0 = \uC57D\uD568, 1.0 = \uAC15\uD568)").setClass("chatterbox-cfg-setting").addSlider((slider) => slider.setLimits(0, 1, 0.05).setValue(this.plugin.settings.chatterboxCfgWeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxCfgWeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC628\uB3C4 (Temperature)").setDesc("\uC74C\uC131 \uC0DD\uC131\uC758 \uCC3D\uC758\uC131\uC744 \uC870\uC808\uD569\uB2C8\uB2E4. (0.05 = \uC77C\uAD00\uC131, 5.0 = \uCC3D\uC758\uC131)").setClass("chatterbox-temperature-setting").addSlider((slider) => slider.setLimits(0.05, 5, 0.05).setValue(this.plugin.settings.chatterboxTemperature).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxTemperature = value;
      await this.plugin.saveSettings();
    }));
  }
  createGoogleCloudTTSSettings(containerEl) {
    const guideEl = containerEl.createEl("div", {
      cls: "google-cloud-tts-guide google-cloud-api-key-setting",
      attr: { style: "margin-bottom: 15px; padding: 10px; background-color: var(--background-secondary); border-radius: 5px; border-left: 3px solid var(--interactive-accent);" }
    });
    guideEl.createEl("h4", { text: "\u{1F527} Google Cloud TTS \uC124\uC815 \uAC00\uC774\uB4DC", attr: { style: "margin: 0 0 10px 0; color: var(--interactive-accent);" } });
    const stepsList = guideEl.createEl("ol", { attr: { style: "margin: 0; padding-left: 20px; line-height: 1.6;" } });
    const step1 = stepsList.createEl("li");
    step1.createEl("strong", { text: "Google Cloud Console \uC811\uC18D:" });
    step1.appendText(" ");
    const step1Link = step1.createEl("a", {
      text: "console.cloud.google.com",
      href: "https://console.cloud.google.com",
      attr: { style: "color: var(--interactive-accent);" }
    });
    step1Link.addEventListener("click", () => {
      window.open("https://console.cloud.google.com", "_blank");
    });
    const step2 = stepsList.createEl("li");
    step2.createEl("strong", { text: "\uD504\uB85C\uC81D\uD2B8 \uC120\uD0DD/\uC0DD\uC131:" });
    step2.appendText(" \uAE30\uC874 \uD504\uB85C\uC81D\uD2B8\uB97C \uC120\uD0DD\uD558\uAC70\uB098 \uC0C8 \uD504\uB85C\uC81D\uD2B8\uB97C \uC0DD\uC131\uD569\uB2C8\uB2E4.");
    const step3 = stepsList.createEl("li");
    step3.createEl("strong", { text: "Text-to-Speech API \uD65C\uC131\uD654:" });
    step3.appendText(" ");
    const step3Link = step3.createEl("a", {
      text: "API \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uD65C\uC131\uD654",
      href: "https://console.cloud.google.com/apis/library/texttospeech.googleapis.com",
      attr: { style: "color: var(--interactive-accent);" }
    });
    step3Link.addEventListener("click", () => {
      window.open("https://console.cloud.google.com/apis/library/texttospeech.googleapis.com", "_blank");
    });
    const step4 = stepsList.createEl("li");
    step4.createEl("strong", { text: "API \uD0A4 \uC0DD\uC131:" });
    step4.appendText(" \uC0AC\uC6A9\uC790 \uC778\uC99D \uC815\uBCF4 > API \uD0A4 > \uC0C8 API \uD0A4 \uC0DD\uC131");
    const step5 = stepsList.createEl("li");
    step5.createEl("strong", { text: "API \uD0A4 \uC81C\uD55C \uC124\uC815 (\uAD8C\uC7A5):" });
    step5.appendText(" \uD0A4 \uC81C\uD55C > API \uC81C\uD55C > Cloud Text-to-Speech API \uC120\uD0DD");
    const warningEl = guideEl.createEl("div", {
      attr: { style: "margin-top: 10px; padding: 8px; background-color: var(--background-modifier-error-rgb); border-radius: 3px; font-size: 0.9em;" }
    });
    warningEl.appendText("\u26A0\uFE0F ");
    warningEl.createEl("strong", { text: "\uC911\uC694:" });
    warningEl.appendText(' Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC740 \uACBD\uC6B0 "API_KEY_SERVICE_BLOCKED" \uC624\uB958\uAC00 \uBC1C\uC0DD\uD569\uB2C8\uB2E4.');
    new import_obsidian2.Setting(containerEl).setName("Google Cloud TTS API \uD0A4").setDesc("Google Cloud Text-to-Speech API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").setClass("google-cloud-api-key-setting").addText((text) => {
      const currentKey = this.plugin.settings.googleCloudTTSApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleCloudTTSApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    }).addButton((button) => button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setTooltip("Google Cloud TTS API \uC5F0\uACB0\uC744 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        await this.testGoogleCloudConnection();
      } finally {
        button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC5B8\uC5B4 \uCF54\uB4DC").setDesc("\uC0AC\uC6A9\uD560 \uC5B8\uC5B4 \uCF54\uB4DC\uB97C \uC120\uD0DD\uD558\uC138\uC694.").setClass("google-cloud-language-setting").addDropdown((dropdown) => dropdown.addOption("en-US", "English (US)").addOption("en-GB", "English (UK)").addOption("en-AU", "English (AU)").addOption("en-IN", "English (India)").setValue(this.plugin.settings.googleCloudTTSLanguageCode).onChange(async (value) => {
      this.plugin.settings.googleCloudTTSLanguageCode = value;
      await this.plugin.saveSettings();
      this.updateGoogleCloudVoices();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("Google Cloud TTS\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").setClass("google-cloud-voice-setting").addDropdown((dropdown) => {
      this.populateGoogleCloudVoiceDropdown(dropdown);
      return dropdown.setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
        this.plugin.settings.ttsVoice = value;
        await this.plugin.saveSettings();
      });
    }).addButton((button) => button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30").setTooltip("\uC120\uD0DD\uD55C \uC74C\uC131\uC73C\uB85C \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uB97C \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playGoogleCloudVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
        new import_obsidian2.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uB9D0\uD558\uAE30 \uC18D\uB3C4 (Speaking Rate)").setDesc("\uC74C\uC131\uC758 \uB9D0\uD558\uAE30 \uC18D\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.25 = \uB290\uB9BC, 4.0 = \uBE60\uB984)").setClass("google-cloud-speaking-rate-setting").addSlider((slider) => slider.setLimits(0.25, 4, 0.25).setValue(this.plugin.settings.googleCloudTTSSpeakingRate).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.googleCloudTTSSpeakingRate = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC74C\uC131 \uB192\uB0AE\uC774 (Pitch)").setDesc("\uC74C\uC131\uC758 \uB192\uB0AE\uC774\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (-20.0 = \uB0AE\uC74C, 20.0 = \uB192\uC74C)").setClass("google-cloud-pitch-setting").addSlider((slider) => slider.setLimits(-20, 20, 1).setValue(this.plugin.settings.googleCloudTTSPitch).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.googleCloudTTSPitch = value;
      await this.plugin.saveSettings();
    }));
  }
  populateGoogleCloudVoiceDropdown(dropdown) {
    const languageCode = this.plugin.settings.googleCloudTTSLanguageCode;
    if (languageCode === "en-US") {
      dropdown.addOption("en-US-Journey-D", "Journey-D (Male)").addOption("en-US-Journey-F", "Journey-F (Female)").addOption("en-US-Journey-O", "Journey-O (Male)").addOption("en-US-Neural2-A", "Neural2-A (Male)").addOption("en-US-Neural2-C", "Neural2-C (Female)").addOption("en-US-Neural2-D", "Neural2-D (Male)").addOption("en-US-Neural2-E", "Neural2-E (Female)").addOption("en-US-Neural2-F", "Neural2-F (Female)").addOption("en-US-Neural2-G", "Neural2-G (Female)").addOption("en-US-Neural2-H", "Neural2-H (Female)").addOption("en-US-Neural2-I", "Neural2-I (Male)").addOption("en-US-Neural2-J", "Neural2-J (Male)");
    } else if (languageCode === "en-GB") {
      dropdown.addOption("en-GB-Neural2-A", "Neural2-A (Female)").addOption("en-GB-Neural2-B", "Neural2-B (Male)").addOption("en-GB-Neural2-C", "Neural2-C (Female)").addOption("en-GB-Neural2-D", "Neural2-D (Male)").addOption("en-GB-Neural2-F", "Neural2-F (Female)");
    } else if (languageCode === "en-AU") {
      dropdown.addOption("en-AU-Neural2-A", "Neural2-A (Female)").addOption("en-AU-Neural2-B", "Neural2-B (Male)").addOption("en-AU-Neural2-C", "Neural2-C (Female)").addOption("en-AU-Neural2-D", "Neural2-D (Male)");
    } else {
      dropdown.addOption("en-US-Journey-F", "Journey-F (Female)");
    }
  }
  updateGoogleCloudVoices() {
    const voiceDropdown = this.containerEl.querySelector(".google-cloud-voice-setting select");
    if (voiceDropdown) {
      voiceDropdown.empty();
      const dropdown = { addOption: (value, text) => {
        const option = document.createElement("option");
        option.value = value;
        option.text = text;
        voiceDropdown.appendChild(option);
      } };
      this.populateGoogleCloudVoiceDropdown(dropdown);
      const languageCode = this.plugin.settings.googleCloudTTSLanguageCode;
      let defaultVoice = "en-US-Journey-F";
      if (languageCode === "en-GB")
        defaultVoice = "en-GB-Neural2-A";
      else if (languageCode === "en-AU")
        defaultVoice = "en-AU-Neural2-A";
      voiceDropdown.value = defaultVoice;
      this.plugin.settings.ttsVoice = defaultVoice;
      this.plugin.saveSettings();
    }
  }
  updateTTSProviderSettings() {
    const provider = this.plugin.settings.ttsProvider;
    const chatterboxSettings = this.containerEl.querySelectorAll(".chatterbox-api-url-setting, .chatterbox-voice-setting, .chatterbox-exaggeration-setting, .chatterbox-cfg-setting, .chatterbox-temperature-setting");
    const googleCloudSettings = this.containerEl.querySelectorAll(".google-cloud-tts-guide, .google-cloud-api-key-setting, .google-cloud-language-setting, .google-cloud-voice-setting, .google-cloud-speaking-rate-setting, .google-cloud-pitch-setting");
    chatterboxSettings.forEach((setting) => {
      setting.style.display = "none";
    });
    googleCloudSettings.forEach((setting) => {
      setting.style.display = "none";
    });
    if (provider === "chatterbox") {
      chatterboxSettings.forEach((setting) => {
        setting.style.display = "";
      });
    } else if (provider === "google-cloud") {
      googleCloudSettings.forEach((setting) => {
        setting.style.display = "";
      });
    }
  }
  async playChatterboxVoicePreview() {
    try {
      const sampleTexts = [
        "Hello, this is a sample voice preview.",
        "Welcome to English vocabulary learning.",
        "This voice will help you learn pronunciation.",
        "Beautiful words make beautiful sentences."
      ];
      const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
      const response = await fetch(`${this.plugin.settings.chatterboxApiUrl}/v1/audio/speech`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: randomText,
          voice: this.plugin.settings.ttsVoice,
          exaggeration: this.plugin.settings.chatterboxExaggeration,
          cfg_weight: this.plugin.settings.chatterboxCfgWeight,
          temperature: this.plugin.settings.chatterboxTemperature
        })
      });
      if (!response.ok) {
        throw new Error(`Chatterbox TTS API \uC624\uB958: ${response.status} ${response.statusText}`);
      }
      const audioBlob = await response.blob();
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      return new Promise((resolve, reject) => {
        audio.onended = () => {
          URL.revokeObjectURL(audioUrl);
          new import_obsidian2.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC644\uB8CC!");
          resolve();
        };
        audio.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.play().catch(reject);
      });
    } catch (error) {
      console.error("Chatterbox TTS \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
      new import_obsidian2.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. Chatterbox TTS \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      throw error;
    }
  }
  async playGoogleCloudVoicePreview() {
    try {
      const sampleTexts = [
        "Hello, this is a sample voice preview.",
        "Welcome to English vocabulary learning.",
        "This voice will help you learn pronunciation.",
        "Beautiful words make beautiful sentences."
      ];
      const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
      const apiKey = decryptApiKey(this.plugin.settings.googleCloudTTSApiKey);
      if (!apiKey) {
        throw new Error("Google Cloud TTS API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
      }
      const requestBody = {
        input: { text: randomText },
        voice: {
          languageCode: this.plugin.settings.googleCloudTTSLanguageCode,
          name: this.plugin.settings.ttsVoice
        },
        audioConfig: {
          audioEncoding: "MP3",
          speakingRate: this.plugin.settings.googleCloudTTSSpeakingRate,
          pitch: this.plugin.settings.googleCloudTTSPitch
        }
      };
      const response = await (0, import_obsidian2.requestUrl)({
        url: `https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`,
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(requestBody)
      });
      if (response.status >= 400) {
        const errorData = JSON.parse(response.text || "{}");
        const detailedError = this.getDetailedGoogleCloudError(response.status, errorData);
        throw new Error(detailedError);
      }
      const data = JSON.parse(response.text);
      const audioBlob = this.base64ToBlob(data.audioContent, "audio/mp3");
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      return new Promise((resolve, reject) => {
        audio.onended = () => {
          URL.revokeObjectURL(audioUrl);
          new import_obsidian2.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC644\uB8CC!");
          resolve();
        };
        audio.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.play().catch(reject);
      });
    } catch (error) {
      console.error("Google Cloud TTS \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
      if (error.message.includes("API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4")) {
        new import_obsidian2.Notice(`\u274C ${error.message}`);
      } else if (error.message.includes("API \uD0A4")) {
        new import_obsidian2.Notice(`\u274C ${error.message}`);
      } else {
        new import_obsidian2.Notice("\u274C \uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uC640 \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      }
      throw error;
    }
  }
  base64ToBlob(base64, mimeType) {
    const byteCharacters = atob(base64);
    const byteNumbers = new Array(byteCharacters.length);
    for (let i = 0; i < byteCharacters.length; i++) {
      byteNumbers[i] = byteCharacters.charCodeAt(i);
    }
    const byteArray = new Uint8Array(byteNumbers);
    return new Blob([byteArray], { type: mimeType });
  }
  async testGoogleCloudConnection() {
    try {
      const apiKey = decryptApiKey(this.plugin.settings.googleCloudTTSApiKey);
      if (!apiKey) {
        new import_obsidian2.Notice("\u274C Google Cloud TTS API \uD0A4\uB97C \uBA3C\uC800 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
        return;
      }
      const response = await (0, import_obsidian2.requestUrl)({
        url: `https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`,
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: { text: "Connection test" },
          voice: {
            languageCode: "en-US",
            name: "en-US-Journey-F"
          },
          audioConfig: {
            audioEncoding: "MP3"
          }
        })
      });
      if (response.status < 400) {
        new import_obsidian2.Notice("\u2705 Google Cloud TTS API \uC5F0\uACB0 \uC131\uACF5!");
      } else {
        const errorData = JSON.parse(response.text || "{}");
        const detailedError = this.getDetailedGoogleCloudError(response.status, errorData);
        new import_obsidian2.Notice(`\u274C ${detailedError}`);
      }
    } catch (error) {
      console.error("Google Cloud TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      if (error.message.includes("\uB124\uD2B8\uC6CC\uD06C") || error.message.includes("fetch")) {
        new import_obsidian2.Notice("\u274C \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      } else {
        new import_obsidian2.Notice(`\u274C ${error.message}`);
      }
    }
  }
  getDetailedGoogleCloudError(status, errorData) {
    var _a, _b, _c, _d;
    if (errorData == null ? void 0 : errorData.error) {
      const error = errorData.error;
      if (status === 403 && ((_a = error.details) == null ? void 0 : _a.some(
        (detail) => {
          var _a2;
          return detail.reason === "API_KEY_SERVICE_BLOCKED" || ((_a2 = detail["@type"]) == null ? void 0 : _a2.includes("ErrorInfo")) && detail.reason === "API_KEY_SERVICE_BLOCKED";
        }
      ))) {
        return "Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC704\uC758 \uAC00\uC774\uB4DC\uB97C \uCC38\uACE0\uD558\uC5EC API\uB97C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 403) {
        if (((_b = error.message) == null ? void 0 : _b.includes("API key not valid")) || error.code === "INVALID_ARGUMENT") {
          return "API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uD0A4\uB97C \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        if (((_c = error.message) == null ? void 0 : _c.includes("quota")) || ((_d = error.message) == null ? void 0 : _d.includes("QUOTA_EXCEEDED"))) {
          return "API \uD560\uB2F9\uB7C9\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. Google Cloud Console\uC5D0\uC11C \uD560\uB2F9\uB7C9\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        return "API \uC811\uADFC\uC774 \uAC70\uBD80\uB418\uC5C8\uC2B5\uB2C8\uB2E4. API \uD0A4 \uAD8C\uD55C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 401) {
        return "API \uD0A4 \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uAC00 \uC62C\uBC14\uB978\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 400) {
        return "API \uC694\uCCAD\uC774 \uC798\uBABB\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC74C\uC131 \uC124\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 503) {
        return "Google Cloud TTS \uC11C\uBE44\uC2A4\uAC00 \uC77C\uC2DC\uC801\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
      }
      return `API \uC624\uB958 (${status}): ${error.message || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`;
    }
    return `API \uC624\uB958: ${status} \uC0C1\uD0DC \uCF54\uB4DC`;
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var import_obsidian5 = require("obsidian");

// src/infrastructure/tts/ChatterboxTTSService.ts
var import_obsidian3 = require("obsidian");

// src/shared/AudioManager.ts
var AudioManager = class _AudioManager {
  constructor() {
    this.activeAudioElements = /* @__PURE__ */ new Set();
    this.audioPool = [];
    this.maxPoolSize = 10;
  }
  static getInstance() {
    if (!_AudioManager.instance) {
      _AudioManager.instance = new _AudioManager();
    }
    return _AudioManager.instance;
  }
  // 오디오 요소 생성 및 관리
  createAudio(src) {
    let audio;
    const availableAudio = this.audioPool.find((a) => a.ended || a.paused);
    if (availableAudio) {
      audio = availableAudio;
      audio.src = src;
      audio.currentTime = 0;
    } else {
      audio = new Audio(src);
      this.setupAudioElement(audio);
    }
    this.activeAudioElements.add(audio);
    return audio;
  }
  // 오디오 요소 설정
  setupAudioElement(audio) {
    const cleanup = () => {
      this.releaseAudio(audio);
    };
    audio.addEventListener("ended", cleanup, { once: true });
    audio.addEventListener("error", cleanup, { once: true });
    setTimeout(() => {
      if (this.activeAudioElements.has(audio)) {
        this.releaseAudio(audio);
      }
    }, 3e4);
  }
  // 오디오 재생 (안전한 래퍼)
  async playAudio(src) {
    const audio = this.createAudio(src);
    try {
      await audio.play();
    } catch (error) {
      this.releaseAudio(audio);
      throw error;
    }
  }
  // 오디오 요소 해제
  releaseAudio(audio) {
    if (!this.activeAudioElements.has(audio))
      return;
    if (!audio.paused) {
      audio.pause();
    }
    this.activeAudioElements.delete(audio);
    if (this.audioPool.length < this.maxPoolSize) {
      audio.removeAttribute("src");
      audio.load();
      this.audioPool.push(audio);
    } else {
      this.disposeAudio(audio);
    }
  }
  // 오디오 요소 완전 정리
  disposeAudio(audio) {
    var _a;
    audio.pause();
    audio.removeAttribute("src");
    audio.load();
    const newAudio = audio.cloneNode();
    (_a = audio.parentNode) == null ? void 0 : _a.replaceChild(newAudio, audio);
  }
  // 모든 활성 오디오 정지
  stopAllAudio() {
    this.activeAudioElements.forEach((audio) => {
      if (!audio.paused) {
        audio.pause();
      }
    });
  }
  // 모든 리소스 정리
  cleanup() {
    this.activeAudioElements.forEach((audio) => {
      this.disposeAudio(audio);
    });
    this.activeAudioElements.clear();
    this.audioPool.forEach((audio) => {
      this.disposeAudio(audio);
    });
    this.audioPool.clear();
  }
  // 현재 상태 정보
  getStatus() {
    return {
      active: this.activeAudioElements.size,
      pooled: this.audioPool.length
    };
  }
};
var NetworkResourceManager = class _NetworkResourceManager {
  constructor() {
    this.abortControllers = /* @__PURE__ */ new Set();
    this.activeRequests = /* @__PURE__ */ new Map();
  }
  static getInstance() {
    if (!_NetworkResourceManager.instance) {
      _NetworkResourceManager.instance = new _NetworkResourceManager();
    }
    return _NetworkResourceManager.instance;
  }
  // 네트워크 요청 생성 (자동 정리 포함)
  createRequest(identifier) {
    const controller = new AbortController();
    this.abortControllers.add(controller);
    if (identifier) {
      const existingController = this.activeRequests.get(identifier);
      if (existingController) {
        existingController.abort();
        this.abortControllers.delete(existingController);
      }
      this.activeRequests.set(identifier, controller);
    }
    setTimeout(() => {
      if (this.abortControllers.has(controller)) {
        controller.abort();
        this.cleanup(controller, identifier);
      }
    }, 6e4);
    return controller;
  }
  // 요청 완료 시 정리
  completeRequest(controller, identifier) {
    this.cleanup(controller, identifier);
  }
  // 특정 요청 취소
  cancelRequest(identifier) {
    const controller = this.activeRequests.get(identifier);
    if (controller) {
      controller.abort();
      this.cleanup(controller, identifier);
    }
  }
  // 내부 정리 로직
  cleanup(controller, identifier) {
    this.abortControllers.delete(controller);
    if (identifier) {
      this.activeRequests.delete(identifier);
    }
  }
  // 모든 활성 요청 취소
  cancelAllRequests() {
    this.abortControllers.forEach((controller) => {
      controller.abort();
    });
    this.abortControllers.clear();
    this.activeRequests.clear();
  }
  // Fetch 래퍼 (자동 정리 포함)
  async fetch(url, options = {}, identifier, timeout = 3e4) {
    const controller = this.createRequest(identifier);
    const timeoutId = setTimeout(() => {
      controller.abort();
    }, timeout);
    try {
      const response = await fetch(url, {
        ...options,
        signal: controller.signal
      });
      clearTimeout(timeoutId);
      this.completeRequest(controller, identifier);
      return response;
    } catch (error) {
      clearTimeout(timeoutId);
      this.cleanup(controller, identifier);
      throw error;
    }
  }
  // 현재 상태 정보
  getStatus() {
    return {
      active: this.abortControllers.size,
      identified: this.activeRequests.size
    };
  }
};

// src/infrastructure/tts/ChatterboxTTSService.ts
var ChatterboxTTSService = class {
  constructor(settings) {
    this.audioElement = null;
    this.currentAudioContext = null;
    this.settings = {
      enabled: settings.enabled || false,
      apiUrl: settings.apiUrl || "http://localhost:4123",
      voice: settings.voice || "alloy",
      response_format: settings.response_format || "wav",
      speed: settings.speed || 1,
      exaggeration: settings.exaggeration || 0.25,
      cfgWeight: settings.cfgWeight || 1,
      temperature: settings.temperature || 0.05,
      streaming_chunk_size: settings.streaming_chunk_size || 50,
      streaming_strategy: settings.streaming_strategy || "string",
      streaming_buffer_size: settings.streaming_buffer_size || 1,
      streaming_quality: settings.streaming_quality || "string",
      autoPlay: settings.autoPlay || false
    };
    this.audioManager = AudioManager.getInstance();
    this.networkManager = NetworkResourceManager.getInstance();
  }
  async speakText(text) {
    if (!this.settings.enabled) {
      new import_obsidian3.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!text || text.trim().length === 0) {
      console.warn("TTS: \uBE48 \uD14D\uC2A4\uD2B8\uC785\uB2C8\uB2E4.");
      return;
    }
    try {
      this.stopSpeaking();
      const audioBlob = await this.callChatterboxAPI(text);
      await this.playAudioBlob(audioBlob);
    } catch (error) {
      console.error("Chatterbox TTS \uC624\uB958:", error);
      new import_obsidian3.Notice("TTS \uC74C\uC131 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. Chatterbox TTS \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
    }
  }
  async speakWord(word) {
    if (!word || word.trim().length === 0) {
      console.warn("TTS: \uBE48 \uB2E8\uC5B4\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(word);
  }
  async speakExample(example) {
    if (!example || example.trim().length === 0) {
      console.warn("TTS: \uBE48 \uC608\uBB38\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(example);
  }
  async callChatterboxAPI(text) {
    const truncatedText = text.length > 3e3 ? text.substring(0, 3e3) : text;
    const requestBody = {
      input: truncatedText,
      voice: this.settings.voice,
      response_format: this.settings.response_format,
      speed: this.settings.speed,
      exaggeration: this.settings.exaggeration,
      cfg_weight: this.settings.cfgWeight,
      temperature: this.settings.temperature,
      streaming_chunk_size: this.settings.streaming_chunk_size,
      streaming_strategy: this.settings.streaming_strategy,
      streaming_buffer_size: this.settings.streaming_buffer_size,
      streaming_quality: this.settings.streaming_quality
    };
    const response = await fetch(`${this.settings.apiUrl}/v1/audio/speech`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(requestBody)
    });
    if (!response.ok) {
      throw new Error(`Chatterbox TTS API \uC624\uB958: ${response.status} ${response.statusText}`);
    }
    const contentType = response.headers.get("content-type");
    if (!contentType || !contentType.includes("audio")) {
      throw new Error(`\uC608\uC0C1\uD558\uC9C0 \uBABB\uD55C \uC751\uB2F5 \uD615\uC2DD: ${contentType}`);
    }
    return await response.blob();
  }
  async playAudioBlob(audioBlob) {
    return new Promise((resolve, reject) => {
      try {
        if (this.audioElement) {
          this.audioElement.pause();
          this.audioElement.src = "";
        }
        this.audioElement = new Audio();
        const audioUrl = URL.createObjectURL(audioBlob);
        this.audioElement.src = audioUrl;
        this.audioElement.onended = () => {
          URL.revokeObjectURL(audioUrl);
          resolve();
        };
        this.audioElement.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        this.audioElement.onloadeddata = () => {
          if (this.audioElement) {
            this.audioElement.play().catch((error) => {
              console.error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
              URL.revokeObjectURL(audioUrl);
              reject(error);
            });
          }
        };
        this.audioElement.load();
      } catch (error) {
        reject(error);
      }
    });
  }
  stopSpeaking() {
    if (this.audioElement) {
      this.audioElement.pause();
      this.audioElement.currentTime = 0;
      if (this.audioElement.src && this.audioElement.src.startsWith("blob:")) {
        URL.revokeObjectURL(this.audioElement.src);
      }
      this.audioElement.src = "";
    }
    if (this.currentAudioContext) {
      this.currentAudioContext.close().catch(console.error);
      this.currentAudioContext = null;
    }
  }
  isPaused() {
    return !this.audioElement || this.audioElement.paused;
  }
  resume() {
    if (this.audioElement && this.audioElement.paused) {
      this.audioElement.play().catch((error) => {
        console.error("\uC624\uB514\uC624 \uC7AC\uAC1C \uC2E4\uD328:", error);
        new import_obsidian3.Notice("\uC624\uB514\uC624 \uC7AC\uAC1C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      });
    }
  }
  pause() {
    if (this.audioElement && !this.audioElement.paused) {
      this.audioElement.pause();
    }
  }
  // 설정 업데이트
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  // 연결 테스트
  async testConnection() {
    try {
      const testText = "Hello, this is a test.";
      await this.callChatterboxAPI(testText);
      return true;
    } catch (error) {
      console.error("Chatterbox TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      return false;
    }
  }
  // 사용 가능한 음성 목록 (Chatterbox는 custom voice 지원)
  getAvailableVoices() {
    return [
      "alloy",
      "echo",
      "fable",
      "onyx",
      "nova",
      "shimmer",
      "custom"
      // 사용자 정의 음성
    ];
  }
  // 현재 설정 정보 반환
  getSettings() {
    return { ...this.settings };
  }
  // 리소스 정리
  destroy() {
    this.stopSpeaking();
    this.audioElement = null;
    this.currentAudioContext = null;
  }
};

// src/infrastructure/tts/GoogleCloudTTSService.ts
var import_obsidian4 = require("obsidian");
var GoogleCloudTTSService = class {
  constructor(settings) {
    this.settings = {
      enabled: settings.enabled || false,
      apiKey: settings.apiKey || "",
      voice: settings.voice || "en-US-Journey-F",
      languageCode: settings.languageCode || "en-US",
      speakingRate: settings.speakingRate || 1,
      pitch: settings.pitch || 0,
      autoPlay: settings.autoPlay || false
    };
    this.audioManager = AudioManager.getInstance();
    this.networkManager = NetworkResourceManager.getInstance();
  }
  async speakText(text) {
    if (!this.settings.enabled) {
      new import_obsidian4.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!this.settings.apiKey) {
      new import_obsidian4.Notice("Google Cloud TTS API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!text || text.trim().length === 0) {
      console.warn("TTS: \uBE48 \uD14D\uC2A4\uD2B8\uC785\uB2C8\uB2E4.");
      return;
    }
    try {
      this.stopSpeaking();
      const audioData = await this.callGoogleCloudAPI(text);
      await this.playAudioData(audioData);
    } catch (error) {
      console.error("Google Cloud TTS \uC624\uB958:", error);
      new import_obsidian4.Notice("TTS \uC74C\uC131 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uC640 \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
    }
  }
  async speakWord(word) {
    if (!word || word.trim().length === 0) {
      console.warn("TTS: \uBE48 \uB2E8\uC5B4\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(word);
  }
  async speakExample(example) {
    if (!example || example.trim().length === 0) {
      console.warn("TTS: \uBE48 \uC608\uBB38\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(example);
  }
  async callGoogleCloudAPI(text) {
    const truncatedText = text.length > 5e3 ? text.substring(0, 5e3) : text;
    const requestBody = {
      input: {
        text: truncatedText
      },
      voice: {
        languageCode: this.settings.languageCode,
        name: this.settings.voice
      },
      audioConfig: {
        audioEncoding: "MP3",
        speakingRate: this.settings.speakingRate,
        pitch: this.settings.pitch
      }
    };
    const response = await this.networkManager.fetch(
      `https://texttospeech.googleapis.com/v1/text:synthesize?key=${this.settings.apiKey}`,
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(requestBody)
      },
      `google-tts-${Date.now()}`,
      // 고유 식별자
      1e4
      // 10초 타임아웃
    );
    if (!response.ok) {
      const errorData = await response.json().catch(() => ({}));
      const errorMessage = this.getDetailedErrorMessage(response.status, errorData);
      throw new Error(errorMessage);
    }
    const data = await response.json();
    return data.audioContent;
  }
  getDetailedErrorMessage(status, errorData) {
    var _a, _b, _c, _d;
    if (errorData == null ? void 0 : errorData.error) {
      const error = errorData.error;
      if (status === 403 && ((_a = error.details) == null ? void 0 : _a.some(
        (detail) => {
          var _a2;
          return detail.reason === "API_KEY_SERVICE_BLOCKED" || ((_a2 = detail["@type"]) == null ? void 0 : _a2.includes("ErrorInfo")) && detail.reason === "API_KEY_SERVICE_BLOCKED";
        }
      ))) {
        return "Google Cloud Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. Google Cloud Console\uC5D0\uC11C Text-to-Speech API\uB97C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 403) {
        if (((_b = error.message) == null ? void 0 : _b.includes("API key not valid")) || error.code === "INVALID_ARGUMENT") {
          return "Google Cloud API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. API \uD0A4\uB97C \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        if (((_c = error.message) == null ? void 0 : _c.includes("quota")) || ((_d = error.message) == null ? void 0 : _d.includes("QUOTA_EXCEEDED"))) {
          return "Google Cloud TTS API \uD560\uB2F9\uB7C9\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD560\uB2F9\uB7C9\uC744 \uD655\uC778\uD558\uAC70\uB098 \uC694\uAE08\uC81C\uB97C \uBCC0\uACBD\uD574\uC8FC\uC138\uC694.";
        }
        return "Google Cloud TTS API \uC811\uADFC\uC774 \uAC70\uBD80\uB418\uC5C8\uC2B5\uB2C8\uB2E4. API \uD0A4 \uAD8C\uD55C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 401) {
        return "Google Cloud API \uD0A4 \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uAC00 \uC62C\uBC14\uB978\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 400) {
        return "Google Cloud TTS API \uC694\uCCAD\uC774 \uC798\uBABB\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC74C\uC131 \uC124\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 503) {
        return "Google Cloud TTS \uC11C\uBE44\uC2A4\uAC00 \uC77C\uC2DC\uC801\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
      }
      return `Google Cloud TTS API \uC624\uB958 (${status}): ${error.message || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`;
    }
    return `Google Cloud TTS API \uC624\uB958: ${status} \uC0C1\uD0DC \uCF54\uB4DC`;
  }
  async playAudioData(base64Audio) {
    return new Promise((resolve, reject) => {
      try {
        const audioBlob = this.base64ToBlob(base64Audio, "audio/mp3");
        const audioUrl = URL.createObjectURL(audioBlob);
        const audio = this.audioManager.createAudio(audioUrl);
        const cleanup = () => {
          URL.revokeObjectURL(audioUrl);
          this.audioManager.releaseAudio(audio);
        };
        audio.onended = () => {
          cleanup();
          resolve();
        };
        audio.onerror = () => {
          cleanup();
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.onloadeddata = () => {
          audio.play().catch((error) => {
            console.error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
            cleanup();
            reject(error);
          });
        };
        setTimeout(() => {
          if (!audio.ended && !audio.paused) {
            cleanup();
            reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2DC\uAC04 \uCD08\uACFC"));
          }
        }, 3e4);
      } catch (error) {
        reject(error);
      }
    });
  }
  base64ToBlob(base64, mimeType) {
    const byteCharacters = atob(base64);
    const byteNumbers = new Array(byteCharacters.length);
    for (let i = 0; i < byteCharacters.length; i++) {
      byteNumbers[i] = byteCharacters.charCodeAt(i);
    }
    const byteArray = new Uint8Array(byteNumbers);
    return new Blob([byteArray], { type: mimeType });
  }
  stopSpeaking() {
    this.audioManager.stopAllAudio();
  }
  isPaused() {
    const status = this.audioManager.getStatus();
    return status.active === 0;
  }
  resume() {
    new import_obsidian4.Notice("\uC74C\uC131\uC744 \uB2E4\uC2DC \uC7AC\uC0DD\uD558\uB824\uBA74 \uBC84\uD2BC\uC744 \uB2E4\uC2DC \uD074\uB9AD\uD574\uC8FC\uC138\uC694.");
  }
  pause() {
    this.stopSpeaking();
  }
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  // 리소스 정리
  cleanup() {
    this.audioManager.cleanup();
    this.networkManager.cancelAllRequests();
  }
  async testConnection() {
    try {
      const testText = "Hello, this is a test.";
      await this.callGoogleCloudAPI(testText);
      return true;
    } catch (error) {
      console.error("Google Cloud TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      return false;
    }
  }
  getAvailableVoices() {
    return [
      "en-US-Journey-D",
      "en-US-Journey-F",
      "en-US-Journey-O",
      "en-US-Neural2-A",
      "en-US-Neural2-C",
      "en-US-Neural2-D",
      "en-US-Neural2-E",
      "en-US-Neural2-F",
      "en-US-Neural2-G",
      "en-US-Neural2-H",
      "en-US-Neural2-I",
      "en-US-Neural2-J",
      "en-US-Standard-A",
      "en-US-Standard-B",
      "en-US-Standard-C",
      "en-US-Standard-D",
      "en-US-Standard-E",
      "en-US-Standard-F",
      "en-US-Standard-G",
      "en-US-Standard-H",
      "en-US-Standard-I",
      "en-US-Standard-J",
      "en-GB-Neural2-A",
      "en-GB-Neural2-B",
      "en-GB-Neural2-C",
      "en-GB-Neural2-D",
      "en-GB-Neural2-F",
      "en-AU-Neural2-A",
      "en-AU-Neural2-B",
      "en-AU-Neural2-C",
      "en-AU-Neural2-D"
    ];
  }
  getSettings() {
    return { ...this.settings };
  }
  destroy() {
    this.stopSpeaking();
    this.audioElement = null;
  }
};

// src/infrastructure/tts/TTSService.ts
var TTSServiceFactory = class {
  static createTTSService(settings) {
    if (!settings.ttsEnabled) {
      return new NoOpTTSService();
    }
    if (settings.ttsProvider === "google-cloud") {
      const googleSettings = {
        enabled: settings.ttsEnabled,
        apiKey: decryptApiKey(settings.googleCloudTTSApiKey),
        voice: settings.ttsVoice,
        languageCode: settings.googleCloudTTSLanguageCode,
        speakingRate: settings.googleCloudTTSSpeakingRate,
        pitch: settings.googleCloudTTSPitch,
        autoPlay: settings.ttsAutoPlay
      };
      return new GoogleCloudTTSService(googleSettings);
    } else {
      const chatterboxSettings = {
        enabled: settings.ttsEnabled,
        apiUrl: settings.chatterboxApiUrl,
        voice: settings.ttsVoice,
        response_format: "wav",
        speed: 1,
        exaggeration: settings.chatterboxExaggeration,
        cfgWeight: settings.chatterboxCfgWeight,
        temperature: settings.chatterboxTemperature,
        streaming_chunk_size: 50,
        streaming_strategy: "string",
        streaming_buffer_size: 1,
        streaming_quality: "string",
        autoPlay: settings.ttsAutoPlay
      };
      return new ChatterboxTTSService(chatterboxSettings);
    }
  }
};
var NoOpTTSService = class {
  async speakText(text) {
  }
  async speakWord(word) {
  }
  async speakExample(example) {
  }
  stopSpeaking() {
  }
  isPaused() {
    return true;
  }
  resume() {
  }
  pause() {
  }
  async testConnection() {
    return false;
  }
  getAvailableVoices() {
    return [];
  }
  destroy() {
  }
};

// src/core/algorithms/SpacedRepetitionAlgorithm.ts
var QUALITY_SCORES = {
  ["hard" /* Hard */]: 1,
  ["good" /* Good */]: 2,
  ["easy" /* Easy */]: 3
};
var DEFAULT_SRS_SETTINGS = {
  // SM-2 Algorithm Settings
  initialEFactor: 2.5,
  // SM-2 표준 초기 E-Factor
  minimumEFactor: 1.3,
  // SM-2 표준 최소 E-Factor
  maximumInterval: 36525,
  // ~100년
  // Load Balancing Settings
  loadBalance: true,
  maxFuzzingDays: 3,
  // Legacy compatibility (will be converted)
  baseEase: 250,
  // 2.5 * 100
  easyBonus: 1.3,
  hardPenalty: 0.5,
  minimumEase: 130,
  // 1.3 * 100
  initialInterval: 1
};
var SpacedRepetitionAlgorithm = class {
  constructor(settings = DEFAULT_SRS_SETTINGS) {
    this.dueDateHistogram = /* @__PURE__ */ new Map();
    this.settings = settings;
  }
  /**
   * Calculate the next review schedule based on user response
   * Implements the SM-2 algorithm according to learning_algorithm.md specification
   */
  schedule(response, currentSchedule) {
    const now = /* @__PURE__ */ new Date();
    const q = QUALITY_SCORES[response];
    if (!currentSchedule) {
      currentSchedule = {
        dueDate: now.toISOString(),
        interval: 0,
        ease: Math.round(this.settings.initialEFactor * 100),
        // E-Factor를 100으로 곱해서 저장
        reviewCount: 0,
        lapseCount: 0,
        delayedDays: 0,
        repetition: 0
      };
    }
    let currentEFactor = currentSchedule.ease / 100;
    let newRepetition = currentSchedule.repetition;
    const delta = 0.1 - (3 - q) * (0.08 + (3 - q) * 0.02);
    let newEFactor = currentEFactor + delta;
    newEFactor = Math.max(this.settings.minimumEFactor, newEFactor);
    if (q >= 2) {
      newRepetition = currentSchedule.repetition + 1;
    } else {
      newRepetition = 0;
    }
    let newInterval;
    if (q < 2) {
      newInterval = 1;
    } else {
      if (newRepetition === 1) {
        newInterval = 1;
      } else if (newRepetition === 2) {
        newInterval = 6;
      } else {
        newInterval = Math.round(currentSchedule.interval * newEFactor);
      }
    }
    newInterval = Math.min(newInterval, this.settings.maximumInterval);
    newInterval = Math.max(1, newInterval);
    if (this.settings.loadBalance) {
      newInterval = this.applyLoadBalancing(newInterval);
    }
    const newDueDate = new Date(now.getTime() + newInterval * 24 * 60 * 60 * 1e3);
    this.updateDueDateHistogram(newDueDate.toDateString());
    return {
      interval: newInterval,
      ease: Math.round(newEFactor * 100),
      // E-Factor를 100으로 곱해서 반환
      dueDate: newDueDate.toISOString(),
      repetition: newRepetition
    };
  }
  /**
   * Apply load balancing to distribute reviews evenly across days
   * Based on the histogram-based approach from obsidian-spaced-repetition
   */
  applyLoadBalancing(interval) {
    if (!this.settings.loadBalance) {
      return interval;
    }
    let fuzzingRange;
    if (interval <= 21) {
      fuzzingRange = 1;
    } else if (interval <= 180) {
      fuzzingRange = Math.max(1, interval * 0.05);
    } else {
      fuzzingRange = Math.max(1, interval * 0.025);
    }
    fuzzingRange = Math.min(fuzzingRange, this.settings.maxFuzzingDays);
    const now = /* @__PURE__ */ new Date();
    let bestInterval = interval;
    let minReviews = Number.MAX_SAFE_INTEGER;
    for (let offset = -fuzzingRange; offset <= fuzzingRange; offset++) {
      const testInterval = interval + offset;
      if (testInterval < 1)
        continue;
      const testDate = new Date(now.getTime() + testInterval * 24 * 60 * 60 * 1e3);
      const dateString = testDate.toDateString();
      const reviewCount = this.dueDateHistogram.get(dateString) || 0;
      if (reviewCount < minReviews) {
        minReviews = reviewCount;
        bestInterval = testInterval;
      }
    }
    return bestInterval;
  }
  /**
   * Update the due date histogram for load balancing
   */
  updateDueDateHistogram(dateString) {
    const current = this.dueDateHistogram.get(dateString) || 0;
    this.dueDateHistogram.set(dateString, current + 1);
  }
  /**
   * Get cards that are due for review
   */
  static getCardsForReview(cards) {
    const now = /* @__PURE__ */ new Date();
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= now;
    });
  }
  /**
   * Calculate the number of cards due in the next N days
   */
  static getCardsDueInDays(cards, days) {
    const now = /* @__PURE__ */ new Date();
    const futureDate = new Date(now.getTime() + days * 24 * 60 * 60 * 1e3);
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= futureDate;
    }).length;
  }
  /**
   * Get learning statistics for a set of cards
   */
  static getStatistics(cards) {
    let newCards = 0;
    let learningCards = 0;
    let matureCards = 0;
    let totalEase = 0;
    let totalInterval = 0;
    let cardsWithSchedule = 0;
    cards.forEach((card) => {
      if (!card.scheduleInfo) {
        newCards++;
      } else {
        cardsWithSchedule++;
        totalEase += card.scheduleInfo.ease;
        totalInterval += card.scheduleInfo.interval;
        if (card.scheduleInfo.interval < 21) {
          learningCards++;
        } else {
          matureCards++;
        }
      }
    });
    return {
      total: cards.length,
      new: newCards,
      learning: learningCards,
      mature: matureCards,
      averageEase: cardsWithSchedule > 0 ? Math.round(totalEase / cardsWithSchedule) : 0,
      averageInterval: cardsWithSchedule > 0 ? Math.round(totalInterval / cardsWithSchedule) : 0
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  /**
   * Get current settings
   */
  getSettings() {
    return { ...this.settings };
  }
  /**
   * Clear the due date histogram (useful for testing or reset)
   */
  clearHistogram() {
    this.dueDateHistogram.clear();
  }
};

// src/core/services/SpacedRepetitionService.ts
var SpacedRepetitionService = class {
  constructor(settings = {}) {
    this.currentSession = null;
    const srsSettings = { ...DEFAULT_SRS_SETTINGS, ...settings };
    this.algorithm = new SpacedRepetitionAlgorithm(srsSettings);
  }
  /**
   * Get cards that are due for review today
   */
  getCardsForReview(allCards) {
    return SpacedRepetitionAlgorithm.getCardsForReview(allCards);
  }
  /**
   * Get new cards (never reviewed)
   */
  getNewCards(allCards) {
    return allCards.filter((card) => !card.scheduleInfo || card.reviewCount === 0);
  }
  /**
   * Get learning cards (reviewed but not mature)
   */
  getLearningCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.reviewCount > 0 && card.scheduleInfo.interval < 21
    );
  }
  /**
   * Get mature cards (interval >= 21 days)
   */
  getMatureCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.scheduleInfo.interval >= 21
    );
  }
  /**
   * Start a new review session
   */
  startReviewSession(dueCards, maxCards) {
    const cardsToReview = maxCards ? dueCards.slice(0, maxCards) : dueCards;
    this.currentSession = {
      sessionId: this.generateSessionId(),
      startTime: (/* @__PURE__ */ new Date()).toISOString(),
      cardsReviewed: 0,
      totalCards: cardsToReview.length,
      completedCards: [],
      currentCard: cardsToReview[0],
      remainingCards: cardsToReview
      // Add remaining cards to track progress
    };
    return this.currentSession;
  }
  /**
   * Process a review response and get the next card
   */
  processReview(card, response) {
    var _a, _b, _c, _d;
    if (!this.currentSession) {
      throw new Error("No active review session");
    }
    const reviewResult = this.algorithm.schedule(response, card.scheduleInfo);
    const updatedCard = {
      ...card,
      reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
      difficulty: response,
      lastReviewed: (/* @__PURE__ */ new Date()).toISOString(),
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.reviewCount) || 0) + 1,
        lapseCount: (((_c = card.scheduleInfo) == null ? void 0 : _c.lapseCount) || 0) + (response === "hard" /* Hard */ ? 1 : 0),
        delayedDays: ((_d = card.scheduleInfo) == null ? void 0 : _d.delayedDays) || 0,
        repetition: reviewResult.repetition
      }
    };
    this.currentSession.cardsReviewed++;
    this.currentSession.completedCards.push(updatedCard);
    const remainingCards = this.currentSession.remainingCards || [];
    const nextCard = this.currentSession.cardsReviewed < remainingCards.length ? remainingCards[this.currentSession.cardsReviewed] : void 0;
    this.currentSession.currentCard = nextCard;
    const sessionComplete = !nextCard || this.currentSession.cardsReviewed >= this.currentSession.totalCards;
    if (sessionComplete) {
      this.endReviewSession();
    }
    return {
      updatedCard,
      nextCard,
      sessionComplete
    };
  }
  /**
   * End the current review session
   */
  endReviewSession() {
    const session = this.currentSession;
    this.currentSession = null;
    return session;
  }
  /**
   * Get current session info
   */
  getCurrentSession() {
    return this.currentSession;
  }
  /**
   * Calculate study statistics
   */
  calculateStatistics(allCards, studyHistory) {
    const now = /* @__PURE__ */ new Date();
    const today = now.toDateString();
    const overallStats = SpacedRepetitionAlgorithm.getStatistics(allCards);
    const todayStats = {
      newCards: 0,
      // Would track from session data
      reviewedCards: 0,
      // Would track from session data
      totalTime: 0
      // Would track from session timing
    };
    const streakStats = {
      currentDays: 0,
      // Would calculate from study history
      longestDays: 0,
      // Would calculate from study history
      lastStudyDate: null
    };
    return {
      today: todayStats,
      streak: streakStats,
      overall: overallStats
    };
  }
  /**
   * Get cards due in the next N days
   */
  getCardsDueInDays(allCards, days) {
    return SpacedRepetitionAlgorithm.getCardsDueInDays(allCards, days);
  }
  /**
   * Reset a card's schedule (for testing or manual intervention)
   */
  resetCardSchedule(card) {
    return {
      ...card,
      reviewCount: 0,
      lastReviewed: null,
      scheduleInfo: void 0
    };
  }
  /**
   * Manually set card difficulty (for bulk operations)
   */
  setCardDifficulty(card, difficulty) {
    var _a, _b;
    const reviewResult = this.algorithm.schedule(difficulty, card.scheduleInfo);
    return {
      ...card,
      difficulty,
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
        lapseCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.lapseCount) || 0) + (difficulty === "hard" /* Hard */ ? 1 : 0),
        delayedDays: 0,
        repetition: reviewResult.repetition
      }
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(settings) {
    this.algorithm.updateSettings(settings);
  }
  /**
   * Get current algorithm settings
   */
  getSettings() {
    return this.algorithm.getSettings();
  }
  /**
   * Generate a unique session ID
   */
  generateSessionId() {
    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * Get recommended daily study load
   */
  getRecommendedDailyCards(allCards) {
    const dueCards = this.getCardsForReview(allCards);
    const newCards = this.getNewCards(allCards);
    const maxNewCardsPerDay = 20;
    const maxReviewCardsPerDay = 100;
    const recommendedNew = Math.min(newCards.length, maxNewCardsPerDay);
    const recommendedReview = Math.min(dueCards.length - recommendedNew, maxReviewCardsPerDay);
    return {
      newCards: recommendedNew,
      reviewCards: recommendedReview,
      total: recommendedNew + recommendedReview
    };
  }
  /**
   * Export cards for data analysis or backup
   */
  exportScheduleData(allCards) {
    return allCards.map((card) => ({
      word: card.word,
      reviewCount: card.reviewCount,
      difficulty: card.difficulty,
      lastReviewed: card.lastReviewed,
      scheduleInfo: card.scheduleInfo,
      addedDate: card.addedDate
    }));
  }
  /**
   * Get the next review intervals for each difficulty level
   * Shows the exact SM-2 algorithm results with E-Factor information
   */
  getNextReviewIntervals(card) {
    const hardResult = this.algorithm.schedule("hard" /* Hard */, card.scheduleInfo);
    const goodResult = this.algorithm.schedule("good" /* Good */, card.scheduleInfo);
    const easyResult = this.algorithm.schedule("easy" /* Easy */, card.scheduleInfo);
    return {
      hard: {
        interval: hardResult.interval,
        displayText: this.formatInterval(hardResult.interval),
        eFactor: hardResult.ease / 100,
        // Convert back to E-Factor
        repetition: hardResult.repetition
      },
      good: {
        interval: goodResult.interval,
        displayText: this.formatInterval(goodResult.interval),
        eFactor: goodResult.ease / 100,
        repetition: goodResult.repetition
      },
      easy: {
        interval: easyResult.interval,
        displayText: this.formatInterval(easyResult.interval),
        eFactor: easyResult.ease / 100,
        repetition: easyResult.repetition
      }
    };
  }
  /**
   * Format interval as human-readable text
   */
  formatInterval(days) {
    if (days < 1) {
      return "today";
    } else if (days === 1) {
      return "1 day";
    } else if (days < 30) {
      return `${days} day${days > 1 ? "s" : ""}`;
    } else if (days < 365) {
      const months = Math.round(days / 30 * 10) / 10;
      return `${months} month${months > 1 ? "s" : ""}`;
    } else {
      const years = Math.round(days / 365 * 10) / 10;
      return `${years} year${years > 1 ? "s" : ""}`;
    }
  }
  /**
   * Get detailed SM-2 algorithm statistics
   */
  getSM2Statistics(allCards) {
    const stats = {
      overview: { totalCards: 0, newCards: 0, learningCards: 0, matureCards: 0 },
      repetitions: { rep0: 0, rep1: 0, rep2: 0, rep3Plus: 0 },
      eFactors: { average: 0, distribution: [] },
      intervals: { average: 0, distribution: [] }
    };
    let totalEFactor = 0;
    let totalInterval = 0;
    let cardsWithSchedule = 0;
    const eFactorBuckets = /* @__PURE__ */ new Map();
    const intervalBuckets = /* @__PURE__ */ new Map();
    allCards.forEach((card) => {
      stats.overview.totalCards++;
      if (!card.scheduleInfo) {
        stats.overview.newCards++;
        stats.repetitions.rep0++;
      } else {
        cardsWithSchedule++;
        const repetition = card.scheduleInfo.repetition || 0;
        const eFactor = card.scheduleInfo.ease / 100;
        const interval = card.scheduleInfo.interval;
        totalEFactor += eFactor;
        totalInterval += interval;
        if (repetition === 1)
          stats.repetitions.rep1++;
        else if (repetition === 2)
          stats.repetitions.rep2++;
        else if (repetition >= 3)
          stats.repetitions.rep3Plus++;
        else
          stats.repetitions.rep0++;
        if (interval >= 21) {
          stats.overview.matureCards++;
        } else {
          stats.overview.learningCards++;
        }
        const eFactorRange = this.getEFactorRange(eFactor);
        eFactorBuckets.set(eFactorRange, (eFactorBuckets.get(eFactorRange) || 0) + 1);
        const intervalRange = this.getIntervalRange(interval);
        intervalBuckets.set(intervalRange, (intervalBuckets.get(intervalRange) || 0) + 1);
      }
    });
    stats.eFactors.average = cardsWithSchedule > 0 ? Math.round(totalEFactor / cardsWithSchedule * 100) / 100 : 0;
    stats.intervals.average = cardsWithSchedule > 0 ? Math.round(totalInterval / cardsWithSchedule) : 0;
    stats.eFactors.distribution = Array.from(eFactorBuckets.entries()).map(([range, count]) => ({ range, count })).sort((a, b) => parseFloat(a.range.split("-")[0]) - parseFloat(b.range.split("-")[0]));
    stats.intervals.distribution = Array.from(intervalBuckets.entries()).map(([range, count]) => ({ range, count })).sort((a, b) => this.compareIntervalRanges(a.range, b.range));
    return stats;
  }
  /**
   * Get E-Factor range for grouping
   */
  getEFactorRange(eFactor) {
    if (eFactor < 1.5)
      return "1.3-1.5";
    if (eFactor < 2)
      return "1.5-2.0";
    if (eFactor < 2.5)
      return "2.0-2.5";
    if (eFactor < 3)
      return "2.5-3.0";
    if (eFactor < 3.5)
      return "3.0-3.5";
    return "3.5+";
  }
  /**
   * Get interval range for grouping
   */
  getIntervalRange(interval) {
    if (interval === 1)
      return "1 day";
    if (interval <= 6)
      return "2-6 days";
    if (interval <= 20)
      return "7-20 days";
    if (interval <= 60)
      return "21-60 days";
    if (interval <= 180)
      return "2-6 months";
    if (interval <= 365)
      return "6-12 months";
    return "1+ years";
  }
  /**
   * Compare interval ranges for sorting
   */
  compareIntervalRanges(a, b) {
    const order = ["1 day", "2-6 days", "7-20 days", "21-60 days", "2-6 months", "6-12 months", "1+ years"];
    return order.indexOf(a) - order.indexOf(b);
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var VocabularyModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    super(app);
    this.currentCardIndex = 0;
    this.cards = [];
    this.showAnswer = false;
    this.keydownHandler = null;
    this.currentSession = null;
    this.plugin = plugin;
    this.ttsService = TTSServiceFactory.createTTSService(plugin.settings);
    this.spacedRepetitionService = new SpacedRepetitionService();
  }
  onOpen() {
    const allCards = this.plugin.databaseManager.getAllWords();
    this.cards = this.spacedRepetitionService.getCardsForReview(allCards);
    if (this.cards.length === 0) {
      this.showNoCardsForReview(allCards.length);
      return;
    }
    this.currentSession = this.spacedRepetitionService.startReviewSession(this.cards);
    this.shuffleCards();
    this.currentCardIndex = 0;
    this.showAnswer = false;
    this.showCard();
    this.keydownHandler = (e) => {
      if (!this.showAnswer) {
        if (e.code === "Space" || e.key === " ") {
          e.preventDefault();
          this.showAnswer = true;
          this.showCard();
        }
      } else {
        if (e.key === "1") {
          this.handleReview("hard");
        } else if (e.key === "2") {
          this.handleReview("good");
        } else if (e.key === "3") {
          this.handleReview("easy");
        }
      }
    };
    window.addEventListener("keydown", this.keydownHandler);
  }
  shuffleCards() {
    for (let i = this.cards.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [this.cards[i], this.cards[j]] = [this.cards[j], this.cards[i]];
    }
  }
  showNoWordsMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noWordsEl = contentEl.createEl("div", { cls: "no-words-message" });
    noWordsEl.createEl("h2", { text: "\uD559\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4" });
    noWordsEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    const closeButton = noWordsEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showNoCardsForReview(totalCards) {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noReviewEl = contentEl.createEl("div", { cls: "no-review-message" });
    noReviewEl.createEl("h2", { text: "\u{1F389} \uC624\uB298\uC758 \uBCF5\uC2B5 \uC644\uB8CC!" });
    if (totalCards > 0) {
      const stats = this.spacedRepetitionService.calculateStatistics(this.plugin.databaseManager.getAllWords());
      noReviewEl.createEl("p", {
        text: `\uCD1D ${totalCards}\uAC1C\uC758 \uB2E8\uC5B4 \uC911 \uC624\uB298 \uBCF5\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`
      });
      const nextDueCards = this.spacedRepetitionService.getCardsDueInDays(
        this.plugin.databaseManager.getAllWords(),
        1
      );
      if (nextDueCards > 0) {
        noReviewEl.createEl("p", {
          text: `\uB0B4\uC77C \uBCF5\uC2B5 \uC608\uC815: ${nextDueCards}\uAC1C \uB2E8\uC5B4`
        });
      }
      const statsEl = noReviewEl.createEl("div", { cls: "study-stats" });
      statsEl.createEl("h3", { text: "\uD559\uC2B5 \uD604\uD669" });
      statsEl.createEl("p", { text: `\u2022 \uC0C8 \uB2E8\uC5B4: ${stats.overall.newCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uD559\uC2B5 \uC911: ${stats.overall.learningCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uC644\uB8CC: ${stats.overall.matureCards}\uAC1C` });
    } else {
      noReviewEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    }
    const closeButton = noReviewEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showCard() {
    if (this.currentCardIndex >= this.cards.length) {
      this.showCompletionMessage();
      return;
    }
    const currentCard = this.cards[this.currentCardIndex];
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const cardContainer = contentEl.createEl("div", { cls: "vocabulary-card" });
    const topInfoContainer = cardContainer.createEl("div", { cls: "card-top-info" });
    const currentBook = this.plugin.databaseManager.getCurrentBook();
    if (currentBook) {
      const bookInfoEl = topInfoContainer.createEl("div", { cls: "book-info-display" });
      bookInfoEl.createEl("span", {
        text: currentBook.name,
        cls: "current-book-name"
      });
    }
    const deleteButton = topInfoContainer.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const progressEl = cardContainer.createEl("div", { cls: "progress-indicator" });
    progressEl.textContent = `${this.currentCardIndex + 1} / ${this.cards.length}`;
    const wordContainer = cardContainer.createEl("div", { cls: "word-container" });
    const wordEl = wordContainer.createEl("h1", { cls: "card-word" });
    if (currentCard.pronunciation && currentCard.pronunciation.trim()) {
      wordEl.textContent = currentCard.word;
      wordEl.appendText(" ");
      wordEl.createEl("span", {
        text: `[${currentCard.pronunciation}]`,
        cls: "pronunciation"
      });
    } else {
      wordEl.textContent = currentCard.word;
    }
    const wordPlayButton = wordContainer.createEl("button", {
      cls: "tts-play-button word-play-button",
      attr: { "aria-label": "\uB2E8\uC5B4 \uBC1C\uC74C \uB4E3\uAE30" }
    });
    wordPlayButton.textContent = "\u{1F50A}";
    wordPlayButton.addEventListener("click", () => {
      this.ttsService.speakWord(currentCard.word);
    });
    if (currentCard.similarWords && currentCard.similarWords.length > 0) {
      const similarSection = cardContainer.createEl("div", { cls: "similar-words-section" });
      similarSection.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
      const similarList = similarSection.createEl("ul", { cls: "similar-words-list" });
      currentCard.similarWords.forEach((word) => {
        similarList.createEl("li", { text: word });
      });
    }
    if (currentCard.examples && currentCard.examples.length > 0) {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      currentCard.examples.forEach((example, index) => {
        const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
        const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
        const englishExample = exampleTextContainer.createEl("p", { text: example.english });
        englishExample.addClass("english-example");
        const examplePlayButton = exampleTextContainer.createEl("button", {
          cls: "tts-play-button example-play-button",
          attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
        });
        examplePlayButton.textContent = "\u{1F50A}";
        examplePlayButton.addEventListener("click", () => {
          this.ttsService.speakExample(example.english);
        });
        if (this.showAnswer && example.korean && example.korean.trim()) {
          const koreanExample = exampleContainer.createEl("p", { text: example.korean });
          koreanExample.addClass("korean-example");
        }
      });
    } else {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
      const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
      const englishExample = exampleTextContainer.createEl("p", {
        text: `This is an example sentence with the word "${currentCard.word}".`
      });
      englishExample.addClass("english-example");
      const examplePlayButton = exampleTextContainer.createEl("button", {
        cls: "tts-play-button example-play-button",
        attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
      });
      examplePlayButton.textContent = "\u{1F50A}";
      examplePlayButton.addEventListener("click", () => {
        this.ttsService.speakExample(`This is an example sentence with the word "${currentCard.word}".`);
      });
      if (this.showAnswer) {
        const koreanExample = exampleContainer.createEl("p", {
          text: `"${currentCard.word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        });
        koreanExample.addClass("korean-example");
      }
    }
    if (!this.showAnswer) {
      const checkButton = cardContainer.createEl("button", { text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30" });
      checkButton.addClass("check-answer-button");
      checkButton.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCard();
      });
    } else {
      const answerSection = cardContainer.createEl("div", { cls: "answer-section" });
      answerSection.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerSection.createEl("ul", { cls: "meanings-list" });
      currentCard.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      this.createReviewButtons(cardContainer);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons-section" });
    const currentCard = this.cards[this.currentCardIndex];
    const intervals = this.spacedRepetitionService.getNextReviewIntervals(currentCard);
    const hardButton = reviewSection.createEl("button");
    hardButton.addClass("review-button", "hard-button");
    const hardContent = hardButton.createEl("div", { cls: "button-content" });
    hardContent.createEl("span", { text: "\uC5B4\uB824\uC6C0", cls: "button-label" });
    hardContent.createEl("span", { text: intervals.hard.displayText, cls: "button-interval" });
    hardButton.addEventListener("click", () => this.handleReview("hard"));
    const goodButton = reviewSection.createEl("button");
    goodButton.addClass("review-button", "good-button");
    const goodContent = goodButton.createEl("div", { cls: "button-content" });
    goodContent.createEl("span", { text: "\uC88B\uC74C", cls: "button-label" });
    goodContent.createEl("span", { text: intervals.good.displayText, cls: "button-interval" });
    goodButton.addEventListener("click", () => this.handleReview("good"));
    const easyButton = reviewSection.createEl("button");
    easyButton.addClass("review-button", "easy-button");
    const easyContent = easyButton.createEl("div", { cls: "button-content" });
    easyContent.createEl("span", { text: "\uC26C\uC6C0", cls: "button-label" });
    easyContent.createEl("span", { text: intervals.easy.displayText, cls: "button-interval" });
    easyButton.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentCard = this.cards[this.currentCardIndex];
    const activeSession = this.spacedRepetitionService.getCurrentSession();
    if (!activeSession) {
      console.error("No active review session in SpacedRepetitionService");
      const remainingCards = this.cards.slice(this.currentCardIndex);
      if (remainingCards.length > 0) {
        this.currentSession = this.spacedRepetitionService.startReviewSession(remainingCards);
      } else {
        console.error("No remaining cards to review");
        return;
      }
    }
    const reviewResponse = difficulty;
    try {
      const result = this.spacedRepetitionService.processReview(currentCard, reviewResponse);
      await this.plugin.databaseManager.updateWordWithSchedule(
        result.updatedCard.word,
        difficulty,
        result.updatedCard.scheduleInfo
      );
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    } catch (error) {
      console.error("Error processing spaced repetition review:", error);
      await this.plugin.databaseManager.updateWord(currentCard.word, difficulty);
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    }
  }
  async handleDeleteCard() {
    const currentCard = this.cards[this.currentCardIndex];
    const confirmModal = new ConfirmModal(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentCard.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentCard.word);
          this.cards.splice(this.currentCardIndex, 1);
          if (this.cards.length === 0) {
            this.showCompletionMessage();
            return;
          }
          if (this.currentCardIndex >= this.cards.length) {
            this.currentCardIndex = this.cards.length - 1;
          }
          this.showAnswer = false;
          this.showCard();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian5.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletionMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const completionEl = contentEl.createEl("div", { cls: "completion-message" });
    completionEl.createEl("h2", { text: "\uD559\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: `\uC624\uB298 ${this.cards.length}\uAC1C\uC758 \uB2E8\uC5B4 \uD559\uC2B5\uC744 \uC644\uB8CC\uD588\uC2B5\uB2C8\uB2E4.` });
    const restartButton = completionEl.createEl("button", { text: "\uB2E4\uC2DC \uD559\uC2B5\uD558\uAE30" });
    restartButton.addClass("restart-button");
    restartButton.addEventListener("click", () => {
      this.onOpen();
    });
    const closeButton = completionEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => {
      this.close();
    });
  }
  onClose() {
    if (this.keydownHandler) {
      window.removeEventListener("keydown", this.keydownHandler);
      this.keydownHandler = null;
    }
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal = class extends import_obsidian5.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var import_obsidian8 = require("obsidian");

// src/infrastructure/external/WordService.ts
var WordService = class {
  constructor() {
    this.apiBaseUrl = "https://api.dictionaryapi.dev/api/v2/entries/en";
  }
  async getWordData(word) {
    try {
      return this.getSampleWordData(word);
    } catch (error) {
      console.error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
      throw new Error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
  }
  getSampleWordData(word) {
    const sampleData = {
      "beautiful": {
        word: "beautiful",
        pronunciation: "/\u02C8bju\u02D0t\u026Af\u0259l/",
        meanings: ["\uC544\uB984\uB2E4\uC6B4", "\uC608\uC05C", "\uD6CC\uB96D\uD55C"],
        similarWords: ["pretty", "gorgeous", "stunning", "attractive"],
        examples: [
          {
            english: "She is a beautiful woman.",
            korean: "\uADF8\uB140\uB294 \uC544\uB984\uB2E4\uC6B4 \uC5EC\uC131\uC785\uB2C8\uB2E4."
          },
          {
            english: "The sunset was beautiful.",
            korean: "\uC77C\uBAB0\uC774 \uC544\uB984\uB2E4\uC6E0\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "What a beautiful day!",
            korean: "\uC815\uB9D0 \uC544\uB984\uB2E4\uC6B4 \uD558\uB8E8\uB124\uC694!"
          }
        ]
      },
      "happy": {
        word: "happy",
        pronunciation: "/\u02C8h\xE6pi/",
        meanings: ["\uD589\uBCF5\uD55C", "\uAE30\uC05C", "\uC990\uAC70\uC6B4"],
        similarWords: ["joyful", "cheerful", "glad", "pleased"],
        examples: [
          {
            english: "I am happy to see you.",
            korean: "\uB2F9\uC2E0\uC744 \uB9CC\uB098\uC11C \uAE30\uC069\uB2C8\uB2E4."
          },
          {
            english: "She has a happy family.",
            korean: "\uADF8\uB140\uB294 \uD589\uBCF5\uD55C \uAC00\uC871\uC744 \uAC00\uC9C0\uACE0 \uC788\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Happy birthday!",
            korean: "\uC0DD\uC77C \uCD95\uD558\uD569\uB2C8\uB2E4!"
          }
        ]
      },
      "learn": {
        word: "learn",
        pronunciation: "/l\u025C\u02D0rn/",
        meanings: ["\uBC30\uC6B0\uB2E4", "\uD559\uC2B5\uD558\uB2E4", "\uC775\uD788\uB2E4"],
        similarWords: ["study", "acquire", "grasp", "understand"],
        examples: [
          {
            english: "I want to learn English.",
            korean: "\uC800\uB294 \uC601\uC5B4\uB97C \uBC30\uC6B0\uACE0 \uC2F6\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Children learn quickly.",
            korean: "\uC544\uC774\uB4E4\uC740 \uBE68\uB9AC \uBC30\uC6C1\uB2C8\uB2E4."
          },
          {
            english: "You can learn from your mistakes.",
            korean: "\uC2E4\uC218\uB85C\uBD80\uD130 \uBC30\uC6B8 \uC218 \uC788\uC2B5\uB2C8\uB2E4."
          }
        ]
      }
    };
    if (sampleData[word.toLowerCase()]) {
      return sampleData[word.toLowerCase()];
    }
    return {
      word,
      pronunciation: "/pronunciation/",
      meanings: ["\uC758\uBBF8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
      similarWords: [],
      examples: [
        {
          english: `This is an example sentence with the word "${word}".`,
          korean: `"${word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        }
      ]
    };
  }
  // 실제 API 호출을 위한 메서드 (향후 구현)
  async fetchFromAPI(word) {
    const response = await fetch(`${this.apiBaseUrl}/${word}`);
    if (!response.ok) {
      throw new Error(`API \uC694\uCCAD \uC2E4\uD328: ${response.status}`);
    }
    return await response.json();
  }
};

// src/features/book-management/ui/AddBookModal.ts
var import_obsidian6 = require("obsidian");
var AddBookModal = class extends import_obsidian6.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-book-modal");
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uC0C8\uB85C\uC6B4 \uB2E8\uC5B4\uC7A5\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const formEl = contentEl.createEl("form", { cls: "book-form" });
    const nameSection = formEl.createEl("div", { cls: "form-section" });
    const nameLabel = nameSection.createEl("label", {
      text: "\uB2E8\uC5B4\uC7A5 \uC774\uB984 *",
      cls: "form-label"
    });
    const nameInput = nameSection.createEl("input", {
      type: "text",
      placeholder: "\uC608: TOEIC \uB2E8\uC5B4\uC7A5, \uC77C\uC0C1\uC0DD\uD65C \uB2E8\uC5B4\uC7A5",
      cls: "form-input"
    });
    nameInput.required = true;
    const descSection = formEl.createEl("div", { cls: "form-section" });
    const descLabel = descSection.createEl("label", {
      text: "\uC124\uBA85 (\uC120\uD0DD\uC0AC\uD56D)",
      cls: "form-label"
    });
    const descInput = descSection.createEl("textarea", {
      placeholder: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB300\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694.",
      cls: "form-textarea"
    });
    descInput.rows = 3;
    const buttonSection = formEl.createEl("div", { cls: "button-section" });
    const createButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uC0DD\uC131",
      cls: "create-button primary",
      type: "submit"
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button",
      type: "button"
    });
    cancelButton.addEventListener("click", () => this.close());
    formEl.addEventListener("submit", async (e) => {
      e.preventDefault();
      await this.createBook(nameInput.value.trim(), descInput.value.trim());
    });
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        formEl.dispatchEvent(new Event("submit"));
      }
    });
    nameInput.focus();
  }
  async createBook(name, description) {
    if (!name.trim()) {
      new import_obsidian6.Notice("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    try {
      const existingBooks = this.plugin.databaseManager.getAllBooks();
      const isDuplicate = existingBooks.some(
        (book) => book.name.toLowerCase() === name.toLowerCase()
      );
      if (isDuplicate) {
        new import_obsidian6.Notice("\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4.");
        return;
      }
      const newBook = await this.plugin.databaseManager.createBook(name, description);
      new import_obsidian6.Notice(`"${name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
      this.close();
      const event = new CustomEvent("bookCreated", { detail: newBook });
      document.dispatchEvent(event);
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131 \uC2E4\uD328:", error);
      new import_obsidian6.Notice("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/word-management/ui/AddWordsModal.ts
var import_obsidian7 = require("obsidian");

// src/shared/validation.ts
function validateString(input, options = {}) {
  const {
    minLength = 0,
    maxLength = 1e3,
    allowEmpty = false,
    pattern,
    fieldName = "\uC785\uB825\uAC12"
  } = options;
  if (!input || input.trim().length === 0) {
    if (allowEmpty) {
      return { isValid: true, sanitized: "" };
    }
    return { isValid: false, error: `${fieldName}\uC740(\uB294) \uD544\uC218 \uC785\uB825\uAC12\uC785\uB2C8\uB2E4.` };
  }
  const trimmed = input.trim();
  if (trimmed.length < minLength) {
    return {
      isValid: false,
      error: `${fieldName}\uC740(\uB294) \uCD5C\uC18C ${minLength}\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.`
    };
  }
  if (trimmed.length > maxLength) {
    return {
      isValid: false,
      error: `${fieldName}\uC740(\uB294) \uCD5C\uB300 ${maxLength}\uC790 \uC774\uD558\uC5EC\uC57C \uD569\uB2C8\uB2E4.`
    };
  }
  if (pattern && !pattern.test(trimmed)) {
    return {
      isValid: false,
      error: `${fieldName}\uC758 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.`
    };
  }
  return { isValid: true, sanitized: trimmed };
}
function validateWord(word) {
  const validation = validateString(word, {
    minLength: 1,
    maxLength: 50,
    pattern: /^[a-zA-Z\s'-]+$/,
    fieldName: "\uB2E8\uC5B4"
  });
  if (!validation.isValid) {
    return validation;
  }
  const sanitized = validation.sanitized.replace(/[^\w\s'-]/g, "").replace(/\s+/g, " ");
  return { isValid: true, sanitized };
}
function sanitizeMarkdown(text) {
  if (!text)
    return "";
  return text.replace(/<script[^>]*>[\s\S]*?<\/script>/gi, "").replace(/<iframe[^>]*>[\s\S]*?<\/iframe>/gi, "").replace(/javascript:/gi, "").replace(/on\w+\s*=/gi, "").trim();
}
function validateBatch(items, validator) {
  const valid = [];
  const invalid = [];
  for (const item of items) {
    const result = validator(item);
    if (result.isValid) {
      valid.push(item);
    } else {
      invalid.push({ item, error: result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958" });
    }
  }
  return { valid, invalid };
}

// src/shared/CancellationToken.ts
var CancellationTokenSource = class {
  constructor() {
    this._isCancelled = false;
    this._callbacks = [];
  }
  get token() {
    return {
      get isCancelled() {
        return this._isCancelled;
      },
      throwIfCancelled: () => {
        if (this._isCancelled) {
          throw new CancellationError("Operation was cancelled");
        }
      },
      onCancelled: (callback) => {
        if (this._isCancelled) {
          callback();
        } else {
          this._callbacks.push(callback);
        }
      }
    };
  }
  cancel() {
    if (this._isCancelled)
      return;
    this._isCancelled = true;
    this._callbacks.forEach((callback) => {
      try {
        callback();
      } catch (error) {
        console.error("Error in cancellation callback:", error);
      }
    });
    this._callbacks.length = 0;
  }
  dispose() {
    this._callbacks.length = 0;
  }
};
var CancellationError = class extends Error {
  constructor(message = "Operation was cancelled") {
    super(message);
    this.name = "CancellationError";
  }
};
function delay(ms, cancellationToken) {
  return new Promise((resolve, reject) => {
    if (cancellationToken == null ? void 0 : cancellationToken.isCancelled) {
      reject(new CancellationError());
      return;
    }
    const timeoutId = setTimeout(() => {
      resolve();
    }, ms);
    cancellationToken == null ? void 0 : cancellationToken.onCancelled(() => {
      clearTimeout(timeoutId);
      reject(new CancellationError());
    });
  });
}
async function withCancellation(promise, cancellationToken) {
  if (!cancellationToken) {
    return promise;
  }
  return new Promise((resolve, reject) => {
    if (cancellationToken.isCancelled) {
      reject(new CancellationError());
      return;
    }
    let isResolved = false;
    promise.then(
      (value) => {
        if (!isResolved) {
          isResolved = true;
          resolve(value);
        }
      },
      (error) => {
        if (!isResolved) {
          isResolved = true;
          reject(error);
        }
      }
    );
    cancellationToken.onCancelled(() => {
      if (!isResolved) {
        isResolved = true;
        reject(new CancellationError());
      }
    });
  });
}
async function processBatchWithCancellation(items, processor, options = {}) {
  const {
    batchSize = 10,
    delay: delayMs = 100,
    cancellationToken,
    onProgress
  } = options;
  const results = [];
  for (let i = 0; i < items.length; i += batchSize) {
    cancellationToken == null ? void 0 : cancellationToken.throwIfCancelled();
    const batch = items.slice(i, i + batchSize);
    const batchPromises = batch.map(
      (item, batchIndex) => processor(item, i + batchIndex)
    );
    try {
      const batchResults = await withCancellation(
        Promise.all(batchPromises),
        cancellationToken
      );
      results.push(...batchResults);
      onProgress == null ? void 0 : onProgress(Math.min(i + batchSize, items.length), items.length);
      if (i + batchSize < items.length && delayMs > 0) {
        await delay(delayMs, cancellationToken);
      }
    } catch (error) {
      if (error instanceof CancellationError) {
        throw error;
      }
      throw error;
    }
  }
  return results;
}

// src/features/word-management/ui/AddWordsModal.ts
var AddWordsModal = class extends import_obsidian7.Modal {
  constructor(app, plugin, selectedBookId) {
    super(app);
    this.isProcessing = false;
    this.cancellationTokenSource = null;
    this.plugin = plugin;
    this.wordService = new WordService();
    this.selectedBookId = selectedBookId || "default";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-words-modal");
    await this.plugin.databaseManager.loadAllBooks();
    const bookSelectSection = contentEl.createEl("div", { cls: "book-select-section" });
    const bookLabel = bookSelectSection.createEl("label", { text: "\uB2E8\uC5B4\uC7A5 \uC120\uD0DD", cls: "book-select-label" });
    const bookSelectContainer = bookSelectSection.createEl("div", { cls: "book-select-container" });
    this.bookSelect = bookSelectContainer.createEl("select", { cls: "book-select-dropdown" });
    const addBookButton = bookSelectContainer.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00",
      cls: "add-book-button"
    });
    addBookButton.addEventListener("click", () => this.openAddBookModal());
    await this.updateBookSelect();
    this.bookSelect.addEventListener("change", (e) => {
      const selectedBookId = e.target.value;
      this.selectedBookId = selectedBookId;
      this.plugin.databaseManager.setCurrentBook(selectedBookId);
    });
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uCD94\uAC00\uD560 \uC601\uB2E8\uC5B4\uB4E4\uC744 \uC785\uB825\uD558\uC138\uC694. \uAC01 \uB2E8\uC5B4\uB294 \uC0C8 \uC904\uB85C \uAD6C\uBD84\uB429\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const inputSection = contentEl.createEl("div", { cls: "input-section" });
    const textarea = inputSection.createEl("textarea", {
      placeholder: "beautiful\nhappy\nlearn\nstudy\nwork\n...",
      cls: "words-textarea"
    });
    textarea.setAttribute("rows", "10");
    const exampleBtn = inputSection.createEl("button", {
      text: "\uC608\uC2DC \uB2E8\uC5B4\uB4E4 \uBD88\uB7EC\uC624\uAE30",
      cls: "example-button"
    });
    exampleBtn.addEventListener("click", () => {
      textarea.value = "beautiful\nhappy\nlearn\nstudy\nwork\nimportant\nsuccess\nknowledge\nexperience\nfreedom";
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const addButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button primary"
    });
    addButton.addEventListener("click", () => this.addWords(textarea.value, this.selectedBookId));
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      if (this.isProcessing) {
        this.cancelOperation();
      } else {
        this.close();
      }
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section display-none" });
    const progressText = progressSection.createEl("p", {
      text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911...",
      cls: "progress-text"
    });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section display-none" });
    textarea.addEventListener("keydown", (e) => {
      if (e.ctrlKey && e.key === "Enter") {
        this.addWords(textarea.value, this.selectedBookId);
      }
    });
    textarea.focus();
  }
  async addWords(inputText, bookId) {
    var _a;
    if (this.isProcessing)
      return;
    const words = this.parseWords(inputText);
    if (words.length === 0) {
      new import_obsidian7.Notice("\uCD94\uAC00\uD560 \uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    this.isProcessing = true;
    this.cancellationTokenSource = new CancellationTokenSource();
    this.showProgress(words.length);
    this.updateCancelButton(true);
    const results = {
      success: [],
      failed: [],
      alreadyExists: []
    };
    try {
      await processBatchWithCancellation(
        words,
        async (word, index) => {
          const existingWord = this.plugin.databaseManager.getWord(word);
          if (existingWord) {
            results.alreadyExists.push(word);
            return;
          }
          try {
            const wordData = await this.wordService.getWordData(word);
            const vocabularyCard = {
              ...wordData,
              reviewCount: 0,
              difficulty: "good",
              lastReviewed: null,
              addedDate: (/* @__PURE__ */ new Date()).toISOString(),
              bookId
            };
            await this.plugin.databaseManager.addWord(vocabularyCard);
            results.success.push(word);
          } catch (error) {
            results.failed.push(word);
            console.error(`\uB2E8\uC5B4 "${word}" \uCD94\uAC00 \uC2E4\uD328:`, error);
          }
        },
        {
          batchSize: getConfigValue(CONFIG_PATHS.BATCH_DEFAULT_SIZE),
          delay: getConfigValue(CONFIG_PATHS.BATCH_DELAY),
          cancellationToken: this.cancellationTokenSource.token,
          onProgress: (current, total) => {
            this.updateProgress(current, total, `\uCC98\uB9AC \uC911... (${current}/${total})`);
          }
        }
      );
    } catch (error) {
      if (error instanceof CancellationError) {
        new import_obsidian7.Notice("\uC791\uC5C5\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
      } else {
        console.error("\uBC30\uCE58 \uCC98\uB9AC \uC911 \uC624\uB958:", error);
        new import_obsidian7.Notice("\uB2E8\uC5B4 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      }
    } finally {
      this.isProcessing = false;
      (_a = this.cancellationTokenSource) == null ? void 0 : _a.dispose();
      this.cancellationTokenSource = null;
      this.hideProgress();
      this.updateCancelButton(false);
      this.showResults(results);
    }
  }
  parseWords(inputText) {
    const sanitizedInput = sanitizeMarkdown(inputText);
    const rawWords = sanitizedInput.split("\n").map((word) => word.trim()).filter((word) => word.length > 0);
    const validation = validateBatch(rawWords, (word) => validateWord(word));
    if (validation.invalid.length > 0) {
      const invalidWords = validation.invalid.slice(0, 5).map((item) => item.item).join(", ");
      const moreCount = validation.invalid.length > 5 ? ` \uC678 ${validation.invalid.length - 5}\uAC1C` : "";
      new import_obsidian7.Notice(`\uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uB2E8\uC5B4\uAC00 \uC81C\uC678\uB418\uC5C8\uC2B5\uB2C8\uB2E4: ${invalidWords}${moreCount}`);
    }
    const validWords = validation.valid.map((word) => validateWord(word).sanitized).map((word) => word.toLowerCase()).filter((word, index, array) => array.indexOf(word) === index);
    return validWords;
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.removeClass("display-none");
    progressSection.addClass("display-block");
    progressText.textContent = `\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911... (0/${totalWords})`;
  }
  updateProgress(current, total, message) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    const progressFill = progressSection.querySelector(".progress-fill");
    const percentage = current / total * 100;
    progressText.textContent = `${message} (${current}/${total})`;
    progressFill.style.width = `${percentage}%`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    progressSection.removeClass("display-block");
    progressSection.addClass("display-none");
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.removeClass("display-none");
    resultSection.addClass("display-block");
    resultSection.empty();
    const totalProcessed = results.success.length + results.failed.length + results.alreadyExists.length;
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 5) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.alreadyExists.length > 0) {
      const existsEl = summaryEl.createEl("div", { cls: "result-item warning" });
      existsEl.createEl("span", {
        text: `\u26A0\uFE0F \uC774\uBBF8 \uC874\uC7AC: ${results.alreadyExists.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.alreadyExists.length <= 5) {
        existsEl.createEl("p", {
          text: results.alreadyExists.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 5) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", {
      text: "\uB2EB\uAE30",
      cls: "close-button"
    });
    closeButton.addEventListener("click", () => this.close());
    const addMoreButton = buttonSection.createEl("button", {
      text: "\uB354 \uCD94\uAC00\uD558\uAE30",
      cls: "add-more-button"
    });
    addMoreButton.addEventListener("click", () => {
      resultSection.removeClass("display-block");
      resultSection.addClass("display-none");
      const textarea = this.contentEl.querySelector(".words-textarea");
      textarea.value = "";
      textarea.focus();
    });
    if (results.success.length > 0) {
      new import_obsidian7.Notice(`${results.success.length}\uAC1C\uC758 \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
    }
  }
  cancelOperation() {
    if (this.cancellationTokenSource) {
      this.cancellationTokenSource.cancel();
      new import_obsidian7.Notice("\uC791\uC5C5 \uCDE8\uC18C \uC911...");
    }
  }
  updateCancelButton(isProcessing) {
    const cancelButton = this.contentEl.querySelector(".cancel-button");
    if (cancelButton) {
      cancelButton.textContent = isProcessing ? "\uC791\uC5C5 \uCDE8\uC18C" : "\uCDE8\uC18C";
      cancelButton.classList.toggle("danger", isProcessing);
    }
  }
  onClose() {
    var _a;
    if (this.isProcessing && this.cancellationTokenSource) {
      this.cancellationTokenSource.cancel();
    }
    this.isProcessing = false;
    (_a = this.cancellationTokenSource) == null ? void 0 : _a.dispose();
    this.cancellationTokenSource = null;
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  openAddBookModal() {
    new AddBookModal(this.app, this.plugin).open();
  }
  async handleBookCreated(event) {
    await this.updateBookSelect();
  }
  async updateBookSelect() {
    await this.plugin.databaseManager.loadAllBooks();
    const books = this.plugin.databaseManager.getAllBooks();
    this.bookSelect.empty();
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      if (book.id === this.selectedBookId) {
        option.selected = true;
      }
      this.bookSelect.appendChild(option);
    });
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var VocabularyManagerModal = class extends import_obsidian8.Modal {
  constructor(app, plugin) {
    var _a;
    super(app);
    this.currentView = "list";
    this.selectedWords = /* @__PURE__ */ new Set();
    this.selectedBookId = "";
    this.plugin = plugin;
    this.databaseManager = plugin.databaseManager;
    this.wordService = new WordService();
    this.llmService = plugin.llmService;
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
  }
  hasValidApiKey() {
    const provider = this.plugin.settings.llmProvider;
    switch (provider) {
      case "openai":
        return !!this.plugin.settings.openaiApiKey;
      case "anthropic":
        return !!this.plugin.settings.anthropicApiKey;
      case "google":
        return !!this.plugin.settings.googleApiKey;
      default:
        return false;
    }
  }
  async onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-manager-modal");
    contentEl.classList.add("wide-manager-modal");
    await this.databaseManager.loadAllBooks();
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
    this.createBookSelectorHeader();
    this.createNavigation();
    this.showCurrentView();
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  async handleBookCreated(event) {
    const newBook = event.detail;
    this.selectedBookId = newBook.id;
    await this.refreshBookSelector();
  }
  createBookSelectorHeader() {
    const headerEl = this.contentEl.createEl("div", { cls: "manager-header" });
    const books = this.databaseManager.getAllBooks();
    const bookSelect = headerEl.createEl("select", { cls: "book-select-dropdown" });
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      if (book.id === this.selectedBookId)
        option.selected = true;
      bookSelect.appendChild(option);
    });
    bookSelect.addEventListener("change", async (e) => {
      this.selectedBookId = e.target.value;
      await this.databaseManager.setCurrentBook(this.selectedBookId);
      this.showCurrentView();
    });
    const addBookBtn = headerEl.createEl("button", { text: "\uC0C8 \uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "book-manage-button" });
    addBookBtn.addEventListener("click", () => {
      const addBookModal = new AddBookModal(this.app, this.plugin);
      addBookModal.onClose = () => {
        this.refreshBookSelector();
      };
      addBookModal.open();
    });
    const delBookBtn = headerEl.createEl("button", { text: "\uD604\uC7AC \uB2E8\uC5B4\uC7A5 \uC0AD\uC81C", cls: "book-delete-button" });
    const isDefault = this.selectedBookId === "default";
    if (isDefault) {
      delBookBtn.setAttr("disabled", "true");
      delBookBtn.addClass("disabled");
    }
    delBookBtn.addEventListener("click", async () => {
      if (isDefault)
        return;
      const currentBook = this.databaseManager.getBook(this.selectedBookId);
      if (!currentBook) {
        new import_obsidian8.Notice("\uB2E8\uC5B4\uC7A5 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      const wordsInBook = this.databaseManager.getWordsByBook(this.selectedBookId);
      const wordCount = wordsInBook.length;
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uD655\uC778",
        `\uC815\uB9D0\uB85C "${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\u2022 \uB2E8\uC5B4\uC7A5 \uC774\uB984: ${currentBook.name}
\u2022 \uD3EC\uD568\uB41C \uB2E8\uC5B4 \uC218: ${wordCount}\uAC1C
\u2022 \uC0DD\uC131\uC77C: ${new Date(currentBook.createdAt).toLocaleDateString("ko-KR")}

\u26A0\uFE0F \uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC73C\uBA70, \uB2E8\uC5B4\uC7A5\uACFC \uBAA8\uB4E0 \uB2E8\uC5B4\uAC00 \uC601\uAD6C\uC801\uC73C\uB85C \uC0AD\uC81C\uB429\uB2C8\uB2E4.`,
        async () => {
          try {
            await this.databaseManager.deleteBook(this.selectedBookId);
            this.selectedBookId = "default";
            await this.databaseManager.setCurrentBook("default");
            new import_obsidian8.Notice(`"${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`);
            this.onOpen();
          } catch (e) {
            new import_obsidian8.Notice("\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uC2E4\uD328: " + e.message);
          }
        }
      );
      confirmModal.open();
    });
  }
  createNavigation() {
    const navEl = this.contentEl.createEl("div", { cls: "manager-navigation" });
    const listBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uBAA9\uB85D", cls: "nav-button" });
    listBtn.addEventListener("click", () => {
      this.currentView = "list";
      this.showCurrentView();
    });
    const statsBtn = navEl.createEl("button", { text: "\uD1B5\uACC4", cls: "nav-button" });
    statsBtn.addEventListener("click", () => {
      this.currentView = "statistics";
      this.showCurrentView();
    });
    const addBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "nav-button" });
    addBtn.addEventListener("click", () => {
      this.close();
      new AddWordsModal(this.app, this.plugin, this.selectedBookId).open();
    });
    const startLearningButton = navEl.createEl("button", {
      text: "\uC804\uCCB4 \uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      cls: "nav-button"
    });
    startLearningButton.addEventListener("click", () => {
      this.close();
      new VocabularyModal(this.app, this.plugin).open();
    });
  }
  showCurrentView() {
    const contentEl = this.contentEl.querySelector(".manager-content") || this.contentEl.createEl("div", { cls: "manager-content" });
    contentEl.empty();
    switch (this.currentView) {
      case "list":
        this.showWordList(contentEl);
        break;
      case "statistics":
        this.showStatistics(contentEl);
        break;
      case "add":
        this.showAddWord(contentEl);
        break;
    }
  }
  showWordList(container2) {
    const words = this.databaseManager.getAllWords();
    if (words.length === 0) {
      container2.createEl("p", {
        text: "\uB2E8\uC5B4\uC7A5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4. \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD574\uBCF4\uC138\uC694!",
        cls: "empty-message"
      });
      return;
    }
    const searchEl = container2.createEl("div", { cls: "search-section" });
    const searchInput = searchEl.createEl("input", {
      type: "text",
      placeholder: "\uB2E8\uC5B4 \uAC80\uC0C9...",
      cls: "search-input"
    });
    const selectionControls = searchEl.createEl("div", { cls: "selection-controls" });
    const allSelected = this.selectedWords.size === words.length && words.length > 0;
    const selectAllBtn = selectionControls.createEl("button", {
      text: allSelected ? "\uC804\uCCB4 \uD574\uC81C" : "\uC804\uCCB4 \uC120\uD0DD",
      cls: "selection-button"
    });
    selectAllBtn.addEventListener("click", () => {
      if (this.selectedWords.size === words.length) {
        this.selectedWords.clear();
      } else {
        this.selectedWords.clear();
        words.forEach((word) => this.selectedWords.add(word.word));
      }
      this.showCurrentView();
    });
    const fetchSelectedButton = selectionControls.createEl("button", {
      text: "\uC120\uD0DD \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-selected-button"
    });
    fetchSelectedButton.addEventListener("click", () => {
      if (this.selectedWords.size === 0) {
        new import_obsidian8.Notice("\uC120\uD0DD\uB41C \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      this.showFetchSelectedMeaningsModal();
    });
    const wordListEl = container2.createEl("div", { cls: "word-list" });
    const renderWords = (filteredWords) => {
      wordListEl.empty();
      filteredWords.forEach((word) => {
        this.createWordItem(wordListEl, word);
      });
    };
    searchInput.addEventListener("input", (e) => {
      const query = e.target.value;
      const filteredWords = query ? this.databaseManager.searchWords(query) : words;
      renderWords(filteredWords);
    });
    renderWords(words);
  }
  createWordItem(container2, word) {
    const wordEl = container2.createEl("div", { cls: "word-item" });
    const checkbox = wordEl.createEl("input", {
      type: "checkbox",
      cls: "word-checkbox"
    });
    checkbox.checked = this.selectedWords.has(word.word);
    checkbox.addEventListener("change", (e) => {
      const isChecked = e.target.checked;
      if (isChecked) {
        this.selectedWords.add(word.word);
      } else {
        this.selectedWords.delete(word.word);
      }
    });
    const wordHeader = wordEl.createEl("div", { cls: "word-header" });
    const wordTitleEl = wordHeader.createEl("h3", { cls: "word-title" });
    if (word.pronunciation && word.pronunciation.trim()) {
      wordTitleEl.textContent = word.word;
      wordTitleEl.appendText(" ");
      wordTitleEl.createEl("span", {
        text: `[${word.pronunciation}]`,
        cls: "pronunciation"
      });
    } else {
      wordTitleEl.textContent = word.word;
    }
    const difficultyBadge = wordHeader.createEl("span", {
      text: this.getDifficultyText(word.difficulty),
      cls: `difficulty-badge ${word.difficulty}`
    });
    const wordContent = wordEl.createEl("div", { cls: "word-content" });
    wordContent.createEl("p", {
      text: `\uB73B: ${word.meanings.join(", ")}`,
      cls: "word-meanings"
    });
    wordContent.createEl("p", {
      text: `\uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}\uD68C`,
      cls: "review-count"
    });
    if (word.lastReviewed) {
      wordContent.createEl("p", {
        text: `\uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${formatDate(word.lastReviewed)}`,
        cls: "last-reviewed"
      });
    }
    const wordActions = wordEl.createEl("div", { cls: "word-actions" });
    if (this.plugin.settings.enableAdvancedFeatures) {
      const fetchButton = wordActions.createEl("button", {
        text: "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
        cls: "action-button fetch-single-button"
      });
      fetchButton.addEventListener("click", () => {
        this.fetchSingleWordMeaning(word);
      });
    }
    const deleteBtn = wordActions.createEl("button", {
      text: "\uC0AD\uC81C",
      cls: "action-button delete-button"
    });
    deleteBtn.addEventListener("click", async () => {
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4 \uC0AD\uC81C",
        `"${word.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,
        async () => {
          await this.databaseManager.removeWord(word.word);
          this.showCurrentView();
        }
      );
      confirmModal.open();
    });
  }
  showStatistics(container2) {
    const stats = this.databaseManager.getStatistics();
    const statsGrid = container2.createEl("div", { cls: "stats-grid" });
    const basicStats = statsGrid.createEl("div", { cls: "stats-section" });
    basicStats.createEl("h3", { text: "\uAE30\uBCF8 \uD1B5\uACC4", cls: "stats-title" });
    this.createStatItem(basicStats, "\uCD1D \uB2E8\uC5B4 \uC218", stats.totalWords.toString());
    this.createStatItem(basicStats, "\uCD1D \uBCF5\uC2B5 \uD69F\uC218", stats.totalReviews.toString());
    this.createStatItem(basicStats, "\uC5F0\uC18D \uD559\uC2B5\uC77C", `${stats.streakDays}\uC77C`);
    this.createStatItem(basicStats, "\uD3C9\uADE0 \uB09C\uC774\uB3C4", stats.averageDifficulty.toFixed(1));
    const difficultyStats = statsGrid.createEl("div", { cls: "stats-section" });
    difficultyStats.createEl("h3", { text: "\uB09C\uC774\uB3C4\uBCC4 \uBD84\uD3EC", cls: "stats-title" });
    this.createStatItem(difficultyStats, "\uC26C\uC6C0", stats.wordsByDifficulty.easy.toString());
    this.createStatItem(difficultyStats, "\uC88B\uC74C", stats.wordsByDifficulty.good.toString());
    this.createStatItem(difficultyStats, "\uC5B4\uB824\uC6C0", stats.wordsByDifficulty.hard.toString());
    const activityStats = statsGrid.createEl("div", { cls: "stats-section" });
    activityStats.createEl("h3", { text: "\uCD5C\uADFC 7\uC77C \uD65C\uB3D9", cls: "stats-title" });
    stats.recentActivity.forEach((activity) => {
      const date = new Date(activity.date).toLocaleDateString("ko-KR", {
        month: "short",
        day: "numeric"
      });
      this.createStatItem(
        activityStats,
        date,
        `\uD559\uC2B5: ${activity.wordsStudied}, \uBCF5\uC2B5: ${activity.reviewsCompleted}`
      );
    });
  }
  createStatItem(container2, label, value) {
    const statEl = container2.createEl("div", { cls: "stat-item" });
    statEl.createEl("span", { text: label, cls: "stat-label" });
    statEl.createEl("span", { text: value, cls: "stat-value" });
  }
  showAddWord(container2) {
    const addSection = container2.createEl("div", { cls: "add-word-section" });
    addSection.createEl("h3", { text: "\uC0C8 \uB2E8\uC5B4 \uCD94\uAC00", cls: "section-title" });
    const inputEl = addSection.createEl("div", { cls: "word-input-group" });
    const wordInput = inputEl.createEl("input", {
      type: "text",
      placeholder: "\uC601\uB2E8\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694 (\uC608: beautiful)",
      cls: "word-input"
    });
    const addButton = inputEl.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button"
    });
    const addWord = async () => {
      const word = wordInput.value.trim();
      if (!word) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",
          cls: "error-message"
        });
        return;
      }
      try {
        const wordData = await this.wordService.getWordData(word);
        const vocabularyCard = {
          ...wordData,
          reviewCount: 0,
          difficulty: "good",
          lastReviewed: null,
          addedDate: (/* @__PURE__ */ new Date()).toISOString(),
          bookId: this.selectedBookId
        };
        await this.databaseManager.addWord(vocabularyCard);
        wordInput.value = "";
        addSection.createEl("p", {
          text: `"${word}" \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`,
          cls: "success-message"
        });
        setTimeout(() => {
          const successMsg = addSection.querySelector(".success-message");
          if (successMsg)
            successMsg.remove();
        }, 3e3);
      } catch (error) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
          cls: "error-message"
        });
      }
    };
    addButton.addEventListener("click", addWord);
    wordInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        addWord();
      }
    });
  }
  getDifficultyText(difficulty) {
    switch (difficulty) {
      case "easy":
        return "\uC26C\uC6C0";
      case "good":
        return "\uC88B\uC74C";
      case "hard":
        return "\uC5B4\uB824\uC6C0";
      default:
        return "\uC88B\uC74C";
    }
  }
  startReview(words) {
    const reviewModal = new VocabularyReviewModal(this.app, this.plugin, words);
    reviewModal.open();
  }
  showFetchSelectedMeaningsModal() {
    const selectedWordList = Array.from(this.selectedWords);
    new FetchSelectedMeaningsModal(this.app, this.plugin, selectedWordList).open();
  }
  async fetchSingleWordMeaning(word) {
    if (!this.hasValidApiKey()) {
      new import_obsidian8.Notice("LLM API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      `"${word.word}" \uB2E8\uC5B4\uC758 \uB73B\uC744 \uC0C8\uB85C \uAC00\uC838\uC624\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? \uAE30\uC874 \uC815\uBCF4\uAC00\uC5B4\uC50C\uC6CC\uC9D1\uB2C8\uB2E4.`,
      async () => {
        try {
          new import_obsidian8.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911...`);
          const llmResponse = await this.plugin.llmService.getWordDetails(word.word);
          if (llmResponse.success) {
            const wordDetail = llmResponse.data;
            const wordData = this.plugin.llmService.convertToWordData(wordDetail);
            const updatedWord = {
              ...word,
              meanings: wordData.meanings,
              examples: wordData.examples,
              similarWords: wordData.similarWords
            };
            await this.plugin.databaseManager.updateWordData(word.word, updatedWord);
            new import_obsidian8.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
            this.showCurrentView();
          } else {
            new import_obsidian8.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328: ${llmResponse.error}`);
          }
        } catch (error) {
          console.error(`\uB2E8\uC5B4 "${word.word}" \uCC98\uB9AC \uC2E4\uD328:`, error);
          new import_obsidian8.Notice(`"${word.word}" \uB2E8\uC5B4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.`);
        }
      }
    );
    confirmModal.open();
  }
  async refreshBookSelector() {
    await this.databaseManager.loadAllBooks();
    const headerEl = this.contentEl.querySelector(".manager-header");
    if (headerEl) {
      const bookSelect = headerEl.querySelector(".book-select-dropdown");
      if (bookSelect) {
        const currentValue = bookSelect.value;
        const books = this.databaseManager.getAllBooks();
        bookSelect.empty();
        books.forEach((book) => {
          const option = document.createElement("option");
          option.value = book.id;
          option.text = book.name;
          if (book.id === currentValue || book.id === this.selectedBookId) {
            option.selected = true;
            this.selectedBookId = book.id;
          }
          bookSelect.appendChild(option);
        });
      }
    }
    this.showCurrentView();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
};
var VocabularyReviewModal = class extends import_obsidian8.Modal {
  constructor(app, plugin, words) {
    super(app);
    this.currentIndex = 0;
    this.showAnswer = false;
    this.plugin = plugin;
    this.words = words;
  }
  onOpen() {
    if (this.words.length === 0) {
      this.close();
      return;
    }
    this.showCurrentWord();
  }
  showCurrentWord() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const currentWord = this.words[this.currentIndex];
    const progressEl = contentEl.createEl("div", { cls: "review-progress" });
    progressEl.createEl("span", {
      text: `${this.currentIndex + 1} / ${this.words.length}`,
      cls: "progress-text"
    });
    const cardEl = contentEl.createEl("div", { cls: "review-card" });
    const deleteButton = cardEl.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const wordEl = cardEl.createEl("h1", { cls: "review-word" });
    if (currentWord.pronunciation && currentWord.pronunciation.trim()) {
      wordEl.textContent = currentWord.word;
      wordEl.appendText(" ");
      wordEl.createEl("span", {
        text: `[${currentWord.pronunciation}]`,
        cls: "pronunciation"
      });
    } else {
      wordEl.textContent = currentWord.word;
    }
    if (!this.showAnswer) {
      if (currentWord.similarWords.length > 0) {
        const similarEl = cardEl.createEl("div", { cls: "similar-words" });
        similarEl.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
        const similarList = similarEl.createEl("ul");
        currentWord.similarWords.forEach((word) => {
          similarList.createEl("li", { text: word });
        });
      }
      if (currentWord.examples.length > 0) {
        const examplesEl = cardEl.createEl("div", { cls: "examples" });
        examplesEl.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
        currentWord.examples.forEach((example) => {
          examplesEl.createEl("p", { text: example.english, cls: "example" });
        });
      }
      const checkBtn = cardEl.createEl("button", {
        text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30",
        cls: "check-answer-button"
      });
      checkBtn.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCurrentWord();
      });
    } else {
      const answerEl = cardEl.createEl("div", { cls: "answer-section" });
      answerEl.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerEl.createEl("ul");
      currentWord.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      if (currentWord.examples.length > 0) {
        answerEl.createEl("h3", { text: "\uC608\uBB38 \uBC88\uC5ED:" });
        currentWord.examples.forEach((example) => {
          answerEl.createEl("p", { text: example.korean, cls: "translation" });
        });
      }
      this.createReviewButtons(cardEl);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons" });
    const hardBtn = reviewSection.createEl("button", { text: "\uC5B4\uB824\uC6C0", cls: "review-btn hard" });
    const goodBtn = reviewSection.createEl("button", { text: "\uC88B\uC74C", cls: "review-btn good" });
    const easyBtn = reviewSection.createEl("button", { text: "\uC26C\uC6C0", cls: "review-btn easy" });
    hardBtn.addEventListener("click", () => this.handleReview("hard"));
    goodBtn.addEventListener("click", () => this.handleReview("good"));
    easyBtn.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentWord = this.words[this.currentIndex];
    await this.plugin.databaseManager.updateWord(currentWord.word, difficulty);
    this.currentIndex++;
    this.showAnswer = false;
    if (this.currentIndex >= this.words.length) {
      this.showCompletion();
    } else {
      this.showCurrentWord();
    }
  }
  async handleDeleteCard() {
    const currentWord = this.words[this.currentIndex];
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentWord.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentWord.word);
          this.words.splice(this.currentIndex, 1);
          if (this.words.length === 0) {
            this.showCompletion();
            return;
          }
          if (this.currentIndex >= this.words.length) {
            this.currentIndex = this.words.length - 1;
          }
          this.showAnswer = false;
          this.showCurrentWord();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian8.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletion() {
    const { contentEl } = this;
    contentEl.empty();
    const completionEl = contentEl.createEl("div", { cls: "completion" });
    completionEl.createEl("h2", { text: "\uBCF5\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: "\uBAA8\uB4E0 \uB2E8\uC5B4\uB97C \uBCF5\uC2B5\uD588\uC2B5\uB2C8\uB2E4." });
    const closeBtn = completionEl.createEl("button", { text: "\uB2EB\uAE30", cls: "close-btn" });
    closeBtn.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FetchSelectedMeaningsModal = class extends import_obsidian8.Modal {
  constructor(app, plugin, selectedWords) {
    super(app);
    this.isProcessing = false;
    this.plugin = plugin;
    this.selectedWords = selectedWords;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("fetch-selected-meanings-modal");
    contentEl.createEl("h2", {
      text: `\uC120\uD0DD\uB41C ${this.selectedWords.length}\uAC1C \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30`,
      cls: "modal-title"
    });
    contentEl.createEl("p", {
      text: `\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4\uC758 \uC0C1\uC138 \uC815\uBCF4\uB97C LLM API\uB97C \uD1B5\uD574 \uAC00\uC838\uC635\uB2C8\uB2E4.`,
      cls: "modal-description"
    });
    const wordListEl = contentEl.createEl("div", { cls: "selected-words-list" });
    wordListEl.createEl("h3", { text: "\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4:" });
    const wordsContainer = wordListEl.createEl("div", { cls: "words-container" });
    this.selectedWords.forEach((word) => {
      wordsContainer.createEl("span", {
        text: word,
        cls: "selected-word-tag"
      });
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const fetchButton = buttonSection.createEl("button", {
      text: "\uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-button"
    });
    fetchButton.addEventListener("click", () => {
      this.fetchSelectedMeanings();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      this.close();
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section display-none" });
    const progressText = progressSection.createEl("div", { cls: "progress-text" });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section display-none" });
  }
  async fetchSelectedMeanings() {
    if (this.isProcessing)
      return;
    this.isProcessing = true;
    this.showProgress(this.selectedWords.length);
    try {
      const result = await this.plugin.llmService.getMultipleWordDetails(this.selectedWords);
      if (result.success && Array.isArray(result.data)) {
        const successWords = [];
        const failedWords = [];
        for (const wordData of result.data) {
          try {
            if (wordData.word && wordData.meanings && wordData.meanings.length > 0) {
              const existingWord = this.plugin.databaseManager.getWord(wordData.word);
              if (existingWord) {
                const updatedWord = {
                  ...existingWord,
                  pronunciation: wordData.pronunciation || "",
                  meanings: wordData.meanings,
                  examples: wordData.examples || [],
                  similarWords: wordData.similarWords || []
                };
                await this.plugin.databaseManager.updateWordData(wordData.word, updatedWord);
                successWords.push(wordData.word);
              }
            } else {
              failedWords.push(wordData.word);
            }
          } catch (error) {
            console.error(`\uB2E8\uC5B4 "${wordData.word}" \uC5C5\uB370\uC774\uD2B8 \uC2E4\uD328:`, error);
            failedWords.push(wordData.word);
          }
        }
        this.hideProgress();
        this.showResults({ success: successWords, failed: failedWords });
        if (successWords.length > 0) {
          new import_obsidian8.Notice(`${successWords.length}\uAC1C\uC758 \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD588\uC2B5\uB2C8\uB2E4!`);
        }
      } else {
        this.hideProgress();
        new import_obsidian8.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + (result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"));
      }
    } catch (error) {
      this.hideProgress();
      new import_obsidian8.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + error.message);
    } finally {
      this.isProcessing = false;
    }
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.removeClass("display-none");
    progressSection.addClass("display-block");
    progressText.textContent = `\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911... (0/${totalWords})`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    if (progressSection) {
      progressSection.removeClass("display-block");
      progressSection.addClass("display-none");
    }
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.removeClass("display-none");
    resultSection.addClass("display-block");
    resultSection.empty();
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 10) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 10) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", { text: "\uB2EB\uAE30", cls: "close-button" });
    closeButton.addEventListener("click", () => this.close());
  }
  onClose() {
    this.isProcessing = false;
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal2 = class extends import_obsidian8.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/shared/container/DIContainer.ts
var DIContainer = class {
  constructor() {
    this.services = /* @__PURE__ */ new Map();
    this.instances = /* @__PURE__ */ new Map();
  }
  register(name, implementation, options = {}) {
    var _a, _b;
    this.services.set(name, {
      implementation,
      singleton: (_a = options.singleton) != null ? _a : true,
      dependencies: (_b = options.dependencies) != null ? _b : []
    });
  }
  resolve(name) {
    const service = this.services.get(name);
    if (!service) {
      throw new Error(`Service '${name}' not registered`);
    }
    if (service.singleton && this.instances.has(name)) {
      return this.instances.get(name);
    }
    const dependencies = service.dependencies.map((dep) => this.resolve(dep));
    let instance;
    if (this.isConstructor(service.implementation)) {
      instance = new service.implementation(...dependencies);
    } else {
      instance = service.implementation(...dependencies);
    }
    if (service.singleton) {
      this.instances.set(name, instance);
    }
    return instance;
  }
  registerInstance(name, instance) {
    this.instances.set(name, instance);
    this.services.set(name, {
      implementation: () => instance,
      singleton: true,
      dependencies: []
    });
  }
  has(name) {
    return this.services.has(name);
  }
  clear() {
    this.services.clear();
    this.instances.clear();
  }
  isConstructor(implementation) {
    return implementation.prototype && implementation.prototype.constructor === implementation;
  }
};
var container = new DIContainer();

// src/core/entities/Vocabulary.ts
var VocabularyCard = class _VocabularyCard {
  constructor(word, pronunciation, meanings, similarWords, examples, reviewCount, difficulty, lastReviewed, addedDate, bookId) {
    this.word = word;
    this.pronunciation = pronunciation;
    this.meanings = meanings;
    this.similarWords = similarWords;
    this.examples = examples;
    this.reviewCount = reviewCount;
    this.difficulty = difficulty;
    this.lastReviewed = lastReviewed;
    this.addedDate = addedDate;
    this.bookId = bookId;
  }
  // 팩토리 메서드: WordData로부터 VocabularyCard 생성
  static fromWordData(wordData, bookId) {
    return new _VocabularyCard(
      wordData.word,
      wordData.pronunciation,
      wordData.meanings,
      wordData.similarWords,
      wordData.examples,
      0,
      // 초기 복습 횟수
      "good",
      // 초기 난이도
      null,
      // 초기 복습 날짜
      (/* @__PURE__ */ new Date()).toISOString(),
      // 추가 날짜
      bookId
    );
  }
  // 비즈니스 로직: 복습 수행
  review(newDifficulty) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount + 1,
      newDifficulty,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어 정보 업데이트
  updateWordData(wordData) {
    var _a, _b, _c, _d;
    return new _VocabularyCard(
      this.word,
      (_a = wordData.pronunciation) != null ? _a : this.pronunciation,
      (_b = wordData.meanings) != null ? _b : this.meanings,
      (_c = wordData.similarWords) != null ? _c : this.similarWords,
      (_d = wordData.examples) != null ? _d : this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어장 이동
  moveToBook(newBookId) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      newBookId
    );
  }
  // 비즈니스 로직: 복습이 필요한지 확인
  needsReview(reviewInterval = 1) {
    if (!this.lastReviewed)
      return true;
    const lastReviewDate = new Date(this.lastReviewed);
    const now = /* @__PURE__ */ new Date();
    const daysDiff = Math.floor((now.getTime() - lastReviewDate.getTime()) / (1e3 * 60 * 60 * 24));
    const difficultyMultiplier = {
      "hard": 0.5,
      "good": 1,
      "easy": 2
    };
    const adjustedInterval = reviewInterval * difficultyMultiplier[this.difficulty];
    return daysDiff >= adjustedInterval;
  }
  // 비즈니스 로직: 학습 진행도 계산 (0-100)
  getProgressPercentage() {
    const maxReviews = 10;
    const progress = Math.min(this.reviewCount / maxReviews, 1) * 100;
    const difficultyBonus = {
      "easy": 20,
      "good": 10,
      "hard": 0
    };
    return Math.min(progress + difficultyBonus[this.difficulty], 100);
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      word: this.word,
      pronunciation: this.pronunciation,
      meanings: this.meanings,
      similarWords: this.similarWords,
      examples: this.examples,
      reviewCount: this.reviewCount,
      difficulty: this.difficulty,
      lastReviewed: this.lastReviewed,
      addedDate: this.addedDate,
      bookId: this.bookId
    };
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.word || this.word.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uAC00 \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
    }
    if (this.meanings.length === 0) {
      errors.push("\uB2E8\uC5B4\uC758 \uB73B\uC774 \uD558\uB098 \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (!this.bookId || this.bookId.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 ID\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  static create(data) {
    var _a;
    return new _VocabularyCard(
      data.word,
      data.pronunciation || "",
      [data.meaning],
      // meanings array
      [],
      // similarWords
      ((_a = data.examples) == null ? void 0 : _a.map((ex) => ({ english: ex, korean: "" }))) || [],
      // examples with Example type
      0,
      // reviewCount
      "good",
      // difficulty
      null,
      // lastReviewed
      (/* @__PURE__ */ new Date()).toISOString(),
      // addedDate
      data.bookId || "default"
    );
  }
};

// src/core/use-cases/AddWordUseCase.ts
var AddWordUseCase = class {
  constructor(vocabularyRepository, bookRepository, wordService) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
    this.wordService = wordService;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingWord = await this.vocabularyRepository.findByWord(word);
      if (existingWord) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC785\uB2C8\uB2E4."
        };
      }
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = (currentBook == null ? void 0 : currentBook.id) || "default";
      }
      const book = await this.bookRepository.findById(bookId);
      if (!book) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const wordData = await this.wordService.getWordData(word);
      const vocabularyCard = VocabularyCard.create({
        word: wordData.word,
        meaning: wordData.meaning,
        pronunciation: wordData.pronunciation || "",
        examples: wordData.examples || [],
        bookId
      });
      const validationErrors = vocabularyCard.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.vocabularyRepository.add(vocabularyCard);
      const event = {
        type: "WORD_ADDED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: vocabularyCard.word,
          bookId: vocabularyCard.bookId
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: vocabularyCard
      };
    } catch (error) {
      console.error("AddWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordAdded", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/entities/Book.ts
var Book = class _Book {
  constructor(id, name, description, createdAt, updatedAt, wordCount, isDefault) {
    this.id = id;
    this.name = name;
    this.description = description;
    this.createdAt = createdAt;
    this.updatedAt = updatedAt;
    this.wordCount = wordCount;
    this.isDefault = isDefault;
  }
  // 팩토리 메서드: 새 단어장 생성
  static create(name, description = "", isDefault = false) {
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const id = isDefault ? "default" : _Book.generateId();
    return new _Book(
      id,
      name,
      description,
      now,
      now,
      0,
      isDefault
    );
  }
  // 팩토리 메서드: 기본 단어장 생성
  static createDefault() {
    return _Book.create("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5", "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.", true);
  }
  // 비즈니스 로직: 단어장 정보 업데이트
  updateInfo(name, description) {
    return new _Book(
      this.id,
      name != null ? name : this.name,
      description != null ? description : this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 증가
  incrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount + 1,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 감소
  decrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, this.wordCount - 1),
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 재설정
  updateWordCount(count) {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, count),
      this.isDefault
    );
  }
  // 비즈니스 로직: 삭제 가능 여부 확인
  canBeDeleted() {
    return !this.isDefault;
  }
  // 비즈니스 로직: 단어장이 비어있는지 확인
  isEmpty() {
    return this.wordCount === 0;
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.name || this.name.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (this.name.trim().length > 100) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC740 100\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.description.length > 500) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC124\uBA85\uC740 500\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.wordCount < 0) {
      errors.push("\uB2E8\uC5B4 \uC218\uB294 0 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      id: this.id,
      name: this.name,
      description: this.description,
      createdAt: this.createdAt,
      updatedAt: this.updatedAt,
      wordCount: this.wordCount,
      isDefault: this.isDefault
    };
  }
  // 비즈니스 로직: 생성일로부터 경과 일수 계산
  getDaysFromCreation() {
    const createdDate = new Date(this.createdAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - createdDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // 비즈니스 로직: 마지막 업데이트로부터 경과 일수 계산
  getDaysFromLastUpdate() {
    const updatedDate = new Date(this.updatedAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - updatedDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // ID 생성 유틸리티
  static generateId() {
    return `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/core/use-cases/CreateBookUseCase.ts
var CreateBookUseCase = class {
  constructor(bookRepository) {
    this.bookRepository = bookRepository;
  }
  async execute(request) {
    try {
      if (!request.name || request.name.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const name = request.name.trim();
      const existingBooks = await this.bookRepository.findAll();
      const duplicateBook = existingBooks.find(
        (book2) => book2.name.toLowerCase() === name.toLowerCase()
      );
      if (duplicateBook) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4."
        };
      }
      const book = Book.create(
        name,
        request.description || ""
      );
      const validationErrors = book.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.bookRepository.add(book);
      const event = {
        type: "BOOK_CREATED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          bookId: book.id,
          name: book.name
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        book
      };
    } catch (error) {
      console.error("CreateBookUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("bookCreated", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/use-cases/GetWordsForReviewUseCase.ts
var GetWordsForReviewUseCase = class {
  constructor(vocabularyRepository, bookRepository) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
  }
  async execute(request = {}) {
    try {
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = currentBook == null ? void 0 : currentBook.id;
      }
      const allWords = await this.vocabularyRepository.findByBookId(bookId);
      if (allWords.length === 0) {
        return {
          success: true,
          words: [],
          totalCount: 0
        };
      }
      const reviewInterval = request.reviewInterval || 1;
      const wordsNeedingReview = allWords.filter(
        (word) => word.needsReview(reviewInterval)
      );
      wordsNeedingReview.sort((a, b) => {
        if (a.lastReviewed && b.lastReviewed) {
          const aDate = new Date(a.lastReviewed).getTime();
          const bDate = new Date(b.lastReviewed).getTime();
          if (aDate !== bDate)
            return aDate - bDate;
        } else if (a.lastReviewed && !b.lastReviewed) {
          return -1;
        } else if (!a.lastReviewed && b.lastReviewed) {
          return 1;
        }
        const difficultyOrder = { "hard": 3, "good": 2, "easy": 1 };
        const difficultyDiff = difficultyOrder[b.difficulty] - difficultyOrder[a.difficulty];
        if (difficultyDiff !== 0)
          return difficultyDiff;
        return a.reviewCount - b.reviewCount;
      });
      const limit = request.limit || 20;
      const limitedWords = wordsNeedingReview.slice(0, limit);
      return {
        success: true,
        words: limitedWords,
        totalCount: wordsNeedingReview.length
      };
    } catch (error) {
      console.error("GetWordsForReviewUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
};

// src/core/use-cases/ReviewWordUseCase.ts
var ReviewWordUseCase = class {
  constructor(vocabularyRepository) {
    this.vocabularyRepository = vocabularyRepository;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      if (!["easy", "good", "hard"].includes(request.difficulty)) {
        return {
          success: false,
          error: "\uC62C\uBC14\uB978 \uB09C\uC774\uB3C4\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingCard = await this.vocabularyRepository.findByWord(word);
      if (!existingCard) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const previousDifficulty = existingCard.difficulty;
      const reviewedCard = existingCard.review(request.difficulty);
      await this.vocabularyRepository.update(reviewedCard);
      const event = {
        type: "WORD_REVIEWED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: reviewedCard.word,
          difficulty: request.difficulty,
          previousDifficulty
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: reviewedCard
      };
    } catch (error) {
      console.error("ReviewWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordReviewed", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/infrastructure/obsidian/repositories/VocabularyRepositoryAdapter.ts
var VocabularyRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(card) {
    await this.databaseManager.addWord(card);
  }
  async save(card) {
    await this.databaseManager.addWord(card);
  }
  async findByWord(word) {
    return this.databaseManager.getWord(word);
  }
  async findAll() {
    return this.databaseManager.getAllWords();
  }
  async findByBookId(bookId) {
    return this.databaseManager.getWordsByBook(bookId);
  }
  async update(word, card) {
    await this.databaseManager.updateWord(word, card.difficulty);
  }
  async delete(word) {
    await this.databaseManager.removeWord(word);
  }
  async search(options) {
    const allWords = await this.findAll();
    const filteredWords = allWords.filter(
      (word) => {
        var _a;
        return word.word.toLowerCase().includes(((_a = options.query) == null ? void 0 : _a.toLowerCase()) || "");
      }
    );
    return {
      words: filteredWords,
      total: filteredWords.length,
      hasMore: false
    };
  }
  async searchByText(query) {
    const result = await this.search({ query });
    return result.words;
  }
  async findCardsForReview(bookId) {
    return this.databaseManager.getWordsForReview(bookId);
  }
  async findCardsByDifficulty(difficulty, bookId) {
    const words = bookId ? await this.findByBookId(bookId) : await this.findAll();
    return words.filter((word) => word.difficulty === difficulty);
  }
  async count() {
    const words = await this.findAll();
    return words.length;
  }
  async countByBookId(bookId) {
    const words = await this.findByBookId(bookId);
    return words.length;
  }
  async countByDifficulty(difficulty) {
    const words = await this.findCardsByDifficulty(difficulty);
    return words.length;
  }
  async saveMany(cards) {
    for (const card of cards) {
      await this.add(card);
    }
  }
  async deleteMany(words) {
    for (const word of words) {
      await this.delete(word);
    }
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
};

// src/infrastructure/obsidian/repositories/BookRepositoryAdapter.ts
var BookRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async save(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async findById(id) {
    const bookData = this.databaseManager.getBook(id);
    if (!bookData)
      return null;
    return new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    );
  }
  async findAll(options) {
    const booksData = this.databaseManager.getAllBooks();
    let books = booksData.map((bookData) => new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    ));
    if (options) {
      if (options.includeEmpty === false) {
        books = books.filter((book) => !book.isEmpty());
      }
      if (options.sortBy) {
        books.sort((a, b) => {
          const aValue = a[options.sortBy];
          const bValue = b[options.sortBy];
          if (typeof aValue === "string" && typeof bValue === "string") {
            return options.sortOrder === "desc" ? bValue.localeCompare(aValue) : aValue.localeCompare(bValue);
          }
          if (typeof aValue === "number" && typeof bValue === "number") {
            return options.sortOrder === "desc" ? bValue - aValue : aValue - bValue;
          }
          return 0;
        });
      }
      if (options.offset || options.limit) {
        const start = options.offset || 0;
        const end = options.limit ? start + options.limit : void 0;
        books = books.slice(start, end);
      }
    }
    return books;
  }
  async update(id, book) {
    await this.databaseManager.updateBook(id, book.toPlainObject());
  }
  async delete(id) {
    await this.databaseManager.deleteBook(id);
  }
  async findDefault() {
    return this.findById("default");
  }
  async findByName(name) {
    const books = await this.findAll();
    return books.find((book) => book.name === name) || null;
  }
  async exists(id) {
    const book = await this.findById(id);
    return book !== null;
  }
  async count() {
    const books = await this.findAll();
    return books.length;
  }
  async getStatistics(bookId) {
    const book = await this.findById(bookId);
    if (!book)
      return null;
    const words = this.databaseManager.getWordsByBook(bookId);
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const totalReviews = words.reduce((sum, word) => sum + word.reviewCount, 0);
    const averageReviewCount = words.length > 0 ? totalReviews / words.length : 0;
    const lastActivityDate = words.length > 0 ? Math.max(...words.map((w) => new Date(w.lastReviewed || w.addedDate).getTime())) : null;
    const completionPercentage = words.length > 0 ? wordsByDifficulty.easy / words.length * 100 : 0;
    return {
      book,
      totalWords: words.length,
      wordsByDifficulty,
      averageReviewCount,
      lastActivityDate: lastActivityDate ? new Date(lastActivityDate).toISOString() : null,
      completionPercentage
    };
  }
  async getAllStatistics() {
    const books = await this.findAll();
    const statistics = [];
    for (const book of books) {
      const stat = await this.getStatistics(book.id);
      if (stat) {
        statistics.push(stat);
      }
    }
    return statistics;
  }
  async getCurrentBook() {
    const currentBook = this.databaseManager.getCurrentBook();
    if (!currentBook)
      return null;
    return new Book(
      currentBook.id,
      currentBook.name,
      currentBook.description,
      currentBook.createdAt,
      currentBook.updatedAt,
      currentBook.wordCount,
      currentBook.isDefault
    );
  }
  async setCurrentBook(bookId) {
    await this.databaseManager.setCurrentBook(bookId);
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  async validateBookName(name, excludeId) {
    const books = await this.findAll();
    return !books.some(
      (book) => book.name === name && (!excludeId || book.id !== excludeId)
    );
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
  onCurrentBookChanged(callback) {
  }
  offCurrentBookChanged(callback) {
  }
};

// src/infrastructure/storage/VocabularyDatabase.ts
var import_obsidian9 = require("obsidian");
var VocabularyDatabaseManager = class {
  constructor(app, saveCallback, folderPath) {
    this.books = /* @__PURE__ */ new Map();
    this.words = /* @__PURE__ */ new Map();
    this.settings = {
      dailyGoal: 10,
      reviewInterval: 1,
      currentBookId: "default"
    };
    this.statistics = {
      totalReviews: 0,
      streakDays: 0,
      lastStudyDate: null
    };
    this.vocabularyFolderPath = "Vocabulary";
    this.app = app;
    this.saveCallback = saveCallback;
    if (folderPath) {
      this.vocabularyFolderPath = folderPath;
    }
    this.initializeVocabularyFolder();
    this.initializeDefaultBook();
  }
  // 단어장 폴더 초기화
  async initializeVocabularyFolder() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
      if (folder instanceof import_obsidian9.TFolder) {
        return;
      }
      await this.app.vault.createFolder(this.vocabularyFolderPath);
    } catch (error) {
      if (error instanceof Error) {
        const errorMessage = error.message.toLowerCase();
        if (errorMessage.includes("already exists") || errorMessage.includes("folder already exists") || errorMessage.includes("already present")) {
        } else {
          console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC2E4\uD328:", error);
        }
      } else {
        console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC911 \uC54C \uC218 \uC5C6\uB294 \uC624\uB958 \uBC1C\uC0DD:", error);
      }
    }
  }
  // 기본 book 초기화
  async initializeDefaultBook() {
    if (!this.books.has("default")) {
      const defaultBook = {
        id: "default",
        name: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5",
        description: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.",
        createdAt: (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: 0,
        isDefault: true
      };
      this.books.set("default", defaultBook);
      await this.saveBookToFile(defaultBook);
    }
  }
  // Book을 MD 파일로 저장
  async saveBookToFile(book) {
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian9.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const bookWords = Array.from(this.words.values()).filter((word) => word.bookId === book.id).sort((a, b) => a.word.localeCompare(b.word));
    const frontmatter = [
      "---",
      `bookId: ${book.id}`,
      `name: "${book.name}"`,
      `description: "${book.description}"`,
      `createdAt: ${book.createdAt}`,
      `updatedAt: ${book.updatedAt}`,
      `wordCount: ${bookWords.length}`,
      `isDefault: ${book.isDefault}`,
      "---",
      ""
    ].join("\n");
    let content = frontmatter;
    content += `# ${book.name}

`;
    content += `${book.description}

`;
    content += `## \uB2E8\uC5B4 \uBAA9\uB85D (${bookWords.length}\uAC1C)

`;
    for (const word of bookWords) {
      content += `### ${word.word}

`;
      if (word.pronunciation) {
        content += `**\uBC1C\uC74C:** ${word.pronunciation}

`;
      }
      content += `**\uB73B:**
`;
      for (const meaning of word.meanings) {
        content += `- ${meaning}
`;
      }
      content += "\n";
      if (word.similarWords.length > 0) {
        content += `**\uC720\uC0AC\uD55C \uB2E8\uC5B4:** ${word.similarWords.join(", ")}

`;
      }
      if (word.examples.length > 0) {
        content += `**\uC608\uBB38:**
`;
        for (const example of word.examples) {
          content += `- ${example.english}
`;
          content += `  - ${example.korean}
`;
        }
        content += "\n";
      }
      content += `**\uBCF5\uC2B5 \uC815\uBCF4:**
`;
      content += `- \uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}
`;
      content += `- \uB09C\uC774\uB3C4: ${word.difficulty}
`;
      content += `- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${word.lastReviewed || "\uC5C6\uC74C"}
`;
      content += `- \uCD94\uAC00\uC77C: ${word.addedDate}
`;
      if (word.scheduleInfo) {
        content += `
**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**
`;
        content += `- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ${word.scheduleInfo.dueDate}
`;
        content += `- \uBCF5\uC2B5 \uAC04\uACA9: ${word.scheduleInfo.interval}\uC77C
`;
        content += `- \uC6A9\uC774\uB3C4: ${word.scheduleInfo.ease}
`;
        content += `- \uC2E4\uD328 \uD69F\uC218: ${word.scheduleInfo.lapseCount}
`;
      }
      content += "\n---\n\n";
    }
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian9.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        try {
          await this.app.vault.create(filePath, content);
        } catch (error) {
          if (error instanceof Error && error.message.includes("already exists")) {
            const file = this.app.vault.getAbstractFileByPath(filePath);
            if (file instanceof import_obsidian9.TFile) {
              await this.app.vault.modify(file, content);
            } else {
            }
          } else {
            console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
          }
        }
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  // MD 파일에서 Book과 단어들 로드
  async loadBookFromFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const { frontmatter, body } = this.parseMDFile(content);
      if (!frontmatter.bookId)
        return;
      const book = {
        id: frontmatter.bookId,
        name: frontmatter.name || file.basename,
        description: frontmatter.description || "",
        createdAt: frontmatter.createdAt || (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: frontmatter.updatedAt || (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: frontmatter.wordCount || 0,
        isDefault: frontmatter.isDefault || false
      };
      this.books.set(book.id, book);
      const words = this.parseWordsFromMarkdown(body, book.id);
      for (const word of words) {
        this.words.set(word.word.toLowerCase(), word);
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:", error);
    }
  }
  // MD 파일 파싱 (frontmatter와 body 분리)
  parseMDFile(content) {
    const frontmatterRegex = /^---\n([\s\S]*?)\n---\n([\s\S]*)$/;
    const match = content.match(frontmatterRegex);
    if (!match) {
      return { frontmatter: {}, body: content };
    }
    const frontmatterText = match[1];
    const body = match[2];
    const frontmatter = {};
    const lines = frontmatterText.split("\n");
    for (const line of lines) {
      const colonIndex = line.indexOf(":");
      if (colonIndex > 0) {
        const key = line.substring(0, colonIndex).trim();
        let value = line.substring(colonIndex + 1).trim();
        if (value.startsWith('"') && value.endsWith('"')) {
          value = value.slice(1, -1);
        }
        if (value === "true")
          frontmatter[key] = true;
        else if (value === "false")
          frontmatter[key] = false;
        else if (!isNaN(Number(value)))
          frontmatter[key] = Number(value);
        else
          frontmatter[key] = value;
      }
    }
    return { frontmatter, body };
  }
  // 마크다운에서 단어들 파싱
  parseWordsFromMarkdown(markdown, bookId) {
    const words = [];
    const wordSections = markdown.split("---").filter((section) => section.trim());
    for (const section of wordSections) {
      const word = this.parseWordSection(section, bookId);
      if (word) {
        words.push(word);
      }
    }
    return words;
  }
  // 개별 단어 섹션 파싱
  parseWordSection(section, bookId) {
    const lines = section.split("\n").filter((line) => line.trim());
    if (lines.length === 0)
      return null;
    let word = "";
    let pronunciation = "";
    const meanings = [];
    const similarWords = [];
    const examples = [];
    let reviewCount = 0;
    let difficulty = "good";
    let lastReviewed = null;
    let addedDate = (/* @__PURE__ */ new Date()).toISOString();
    let scheduleInfo = void 0;
    let currentSection = "";
    let currentExample = {};
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const trimmedLine = line.trim();
      if (trimmedLine.startsWith("### ")) {
        word = trimmedLine.substring(4).trim();
        continue;
      }
      if (trimmedLine.startsWith("**\uBC1C\uC74C:**")) {
        pronunciation = trimmedLine.substring(7).trim();
        currentSection = "pronunciation";
      } else if (trimmedLine.startsWith("**\uB73B:**")) {
        currentSection = "meanings";
      } else if (trimmedLine.startsWith("**\uC720\uC0AC\uD55C \uB2E8\uC5B4:**")) {
        const similarWordsText = trimmedLine.substring(12).trim();
        similarWords.push(...similarWordsText.split(",").map((w) => w.trim()));
        currentSection = "similar";
      } else if (trimmedLine.startsWith("**\uC608\uBB38:**")) {
        currentSection = "examples";
      } else if (trimmedLine.startsWith("**\uBCF5\uC2B5 \uC815\uBCF4:**")) {
        currentSection = "review";
      } else if (trimmedLine.startsWith("**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**")) {
        currentSection = "spaced-repetition";
      } else if (currentSection === "meanings" && trimmedLine.startsWith("- ")) {
        meanings.push(trimmedLine.substring(2).trim());
      } else if (currentSection === "examples") {
        if (line.startsWith("- ") && !line.startsWith("  - ")) {
          if (currentExample.english && currentExample.korean) {
            examples.push({
              english: currentExample.english,
              korean: currentExample.korean
            });
          }
          currentExample = { english: line.substring(2).trim() };
        } else if (line.startsWith("  - ")) {
          currentExample.korean = line.substring(4).trim();
        }
      } else if (currentSection === "review") {
        if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uD69F\uC218: ")) {
          reviewCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        } else if (trimmedLine.startsWith("- \uB09C\uC774\uB3C4: ")) {
          const diff = trimmedLine.substring(7).trim();
          if (diff === "easy" || diff === "good" || diff === "hard") {
            difficulty = diff;
          }
        } else if (trimmedLine.startsWith("- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ")) {
          const lastRev = trimmedLine.substring(11).trim();
          lastReviewed = lastRev === "\uC5C6\uC74C" ? null : lastRev;
        } else if (trimmedLine.startsWith("- \uCD94\uAC00\uC77C: ")) {
          addedDate = trimmedLine.substring(7).trim();
        }
      } else if (currentSection === "spaced-repetition") {
        if (!scheduleInfo) {
          scheduleInfo = {};
        }
        if (trimmedLine.startsWith("- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ")) {
          scheduleInfo.dueDate = trimmedLine.substring(10).trim();
        } else if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uAC04\uACA9: ")) {
          const intervalText = trimmedLine.substring(8).trim();
          scheduleInfo.interval = parseInt(intervalText.replace("\uC77C", "")) || 1;
        } else if (trimmedLine.startsWith("- \uC6A9\uC774\uB3C4: ")) {
          scheduleInfo.ease = parseInt(trimmedLine.substring(7).trim()) || 250;
        } else if (trimmedLine.startsWith("- \uC2E4\uD328 \uD69F\uC218: ")) {
          scheduleInfo.lapseCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        }
      }
    }
    if (currentExample.english && currentExample.korean) {
      examples.push({
        english: currentExample.english,
        korean: currentExample.korean
      });
    }
    if (!word)
      return null;
    return {
      word: word.toLowerCase(),
      pronunciation,
      meanings,
      similarWords,
      examples,
      reviewCount,
      difficulty,
      lastReviewed,
      addedDate,
      bookId,
      scheduleInfo
    };
  }
  // 모든 단어장 파일 로드
  async loadAllBooks() {
    this.books.clear();
    this.words.clear();
    await this.initializeVocabularyFolder();
    await this.initializeDefaultBook();
    const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
    if (folder instanceof import_obsidian9.TFolder) {
      for (const file of folder.children) {
        if (file instanceof import_obsidian9.TFile && file.extension === "md") {
          await this.loadBookFromFile(file);
        }
      }
    }
    await this.loadSettings();
  }
  // 설정 파일 저장/로드
  async saveSettings() {
    const settingsPath = (0, import_obsidian9.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    const data = {
      settings: this.settings,
      statistics: this.statistics
    };
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(settingsPath);
      const content = JSON.stringify(data, null, 2);
      if (existingFile instanceof import_obsidian9.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        await this.app.vault.create(settingsPath, content);
      }
    } catch (error) {
      console.error("\uC124\uC815 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  async loadSettings() {
    const settingsPath = (0, import_obsidian9.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    try {
      const file = this.app.vault.getAbstractFileByPath(settingsPath);
      if (file instanceof import_obsidian9.TFile) {
        const content = await this.app.vault.read(file);
        const data = JSON.parse(content);
        if (data.settings) {
          this.settings = { ...this.settings, ...data.settings };
        }
        if (data.statistics) {
          this.statistics = { ...this.statistics, ...data.statistics };
        }
      }
    } catch (error) {
      console.warn("\uC124\uC815 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:", error);
    }
  }
  // Book 관리 메서드들
  async createBook(name, description = "") {
    const id = `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    const book = {
      id,
      name,
      description,
      createdAt: (/* @__PURE__ */ new Date()).toISOString(),
      updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
      wordCount: 0,
      isDefault: false
    };
    this.books.set(id, book);
    await this.saveBookToFile(book);
    this.saveCallback();
    return book;
  }
  async updateBook(bookId, updates) {
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedBook = {
      ...book,
      ...updates,
      updatedAt: (/* @__PURE__ */ new Date()).toISOString()
    };
    this.books.set(bookId, updatedBook);
    await this.saveBookToFile(updatedBook);
    this.saveCallback();
  }
  async deleteBook(bookId) {
    if (bookId === "default") {
      throw new Error("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC740 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const wordsToDelete = Array.from(this.words.values()).filter((word) => word.bookId === bookId).map((word) => word.word);
    for (const word of wordsToDelete) {
      this.words.delete(word.toLowerCase());
    }
    this.books.delete(bookId);
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian9.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian9.TFile) {
      await this.app.fileManager.trashFile(file);
    }
    if (this.settings.currentBookId === bookId) {
      this.settings.currentBookId = "default";
      await this.saveSettings();
    }
    this.saveCallback();
  }
  getAllBooks() {
    return Array.from(this.books.values()).sort((a, b) => {
      if (a.isDefault)
        return -1;
      if (b.isDefault)
        return 1;
      return a.name.localeCompare(b.name);
    });
  }
  getBook(bookId) {
    return this.books.get(bookId);
  }
  getCurrentBook() {
    return this.books.get(this.settings.currentBookId);
  }
  async setCurrentBook(bookId) {
    if (!this.books.has(bookId)) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    this.settings.currentBookId = bookId;
    await this.saveSettings();
    this.saveCallback();
  }
  // Book별 단어 수 업데이트
  updateBookWordCount(bookId) {
    const wordCount = Array.from(this.words.values()).filter((word) => word.bookId === bookId).length;
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount = wordCount;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
    }
  }
  // 단어 추가
  async addWord(wordData) {
    const word = wordData.word.toLowerCase();
    if (this.words.has(word)) {
      throw new Error(`\uB2E8\uC5B4 "${wordData.word}"\uB294 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4.`);
    }
    const newWord = {
      ...wordData,
      word: wordData.word.toLowerCase(),
      reviewCount: 0,
      difficulty: "good",
      lastReviewed: null,
      addedDate: (/* @__PURE__ */ new Date()).toISOString(),
      bookId: wordData.bookId || this.settings.currentBookId
    };
    this.words.set(word, newWord);
    const book = this.books.get(newWord.bookId);
    if (book) {
      book.wordCount++;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 삭제
  async removeWord(word) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const bookId = wordData.bookId;
    this.words.delete(wordKey);
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount--;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과)
  async updateWord(word, difficulty) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과 + 스페이스드 리피티션 정보)
  async updateWordWithSchedule(word, difficulty, scheduleInfo) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    if (scheduleInfo) {
      wordData.scheduleInfo = scheduleInfo;
    }
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 전체 데이터 업데이트 (LLM API로 가져온 정보로 덮어쓰기)
  async updateWordData(word, updatedWordData) {
    const wordKey = word.toLowerCase();
    const existingWord = this.words.get(wordKey);
    if (!existingWord) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedWord = {
      ...updatedWordData,
      word: wordKey,
      reviewCount: existingWord.reviewCount,
      difficulty: existingWord.difficulty,
      lastReviewed: existingWord.lastReviewed,
      addedDate: existingWord.addedDate,
      bookId: existingWord.bookId
    };
    this.words.set(wordKey, updatedWord);
    const book = this.books.get(updatedWord.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 조회
  getWord(word) {
    return this.words.get(word.toLowerCase());
  }
  // 현재 book의 모든 단어 조회
  getAllWords() {
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 특정 book의 모든 단어 조회
  getWordsByBook(bookId) {
    return Array.from(this.words.values()).filter((word) => word.bookId === bookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 복습 대상 단어 조회 (현재 book)
  getWordsForReview() {
    const now = /* @__PURE__ */ new Date();
    const reviewIntervalMs = this.settings.reviewInterval * 24 * 60 * 60 * 1e3;
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return true;
      const lastReview = new Date(word.lastReviewed);
      const timeSinceLastReview = now.getTime() - lastReview.getTime();
      return timeSinceLastReview >= reviewIntervalMs;
    });
  }
  // 단어 검색 (현재 book)
  searchWords(query) {
    const lowerQuery = query.toLowerCase();
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter(
      (word) => word.word.includes(lowerQuery) || word.meanings.some((meaning) => meaning.toLowerCase().includes(lowerQuery))
    );
  }
  // 통계 조회 (현재 book)
  getStatistics() {
    const words = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId);
    const totalWords = words.length;
    const totalReviews = this.statistics.totalReviews;
    const averageDifficulty = words.length > 0 ? words.reduce((sum, word) => {
      const difficultyValue = word.difficulty === "easy" ? 1 : word.difficulty === "good" ? 2 : 3;
      return sum + difficultyValue;
    }, 0) / words.length : 0;
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const recentActivity = this.calculateRecentActivity();
    return {
      totalWords,
      totalReviews,
      streakDays: this.statistics.streakDays,
      averageDifficulty,
      wordsByDifficulty,
      recentActivity
    };
  }
  // 일일 목표 진행률 조회 (현재 book)
  getDailyGoalProgress() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const todayWords = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return false;
      return new Date(word.lastReviewed).toDateString() === today;
    }).length;
    const goal = this.settings.dailyGoal;
    const percentage = goal > 0 ? Math.min(todayWords / goal * 100, 100) : 0;
    return {
      current: todayWords,
      goal,
      percentage
    };
  }
  // 설정 업데이트
  async updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
    await this.saveSettings();
    this.saveCallback();
  }
  // 데이터 저장용 형식으로 변환 (호환성 유지)
  getDataForSave() {
    return {
      books: Array.from(this.books.values()),
      words: Array.from(this.words.values()),
      settings: this.settings,
      statistics: this.statistics
    };
  }
  // 저장된 데이터에서 로드 (호환성 유지)
  async loadFromData(data) {
    await this.loadAllBooks();
  }
  // 연속 학습일 업데이트
  updateStreak() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const lastStudyDate = this.statistics.lastStudyDate ? new Date(this.statistics.lastStudyDate).toDateString() : null;
    if (lastStudyDate === today) {
      return;
    }
    if (!lastStudyDate) {
      this.statistics.streakDays = 1;
    } else {
      const yesterday = /* @__PURE__ */ new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      const yesterdayStr = yesterday.toDateString();
      if (lastStudyDate === yesterdayStr) {
        this.statistics.streakDays++;
      } else {
        this.statistics.streakDays = 1;
      }
    }
    this.statistics.lastStudyDate = (/* @__PURE__ */ new Date()).toISOString();
  }
  // 최근 7일 활동 계산
  calculateRecentActivity() {
    const activity = [];
    const today = /* @__PURE__ */ new Date();
    for (let i = 6; i >= 0; i--) {
      const date = new Date(today);
      date.setDate(date.getDate() - i);
      const dateStr = date.toDateString();
      const wordsStudied = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        return new Date(word.lastReviewed).toDateString() === dateStr;
      }).length;
      const reviewsCompleted = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        const reviewDate = new Date(word.lastReviewed);
        return reviewDate.toDateString() === dateStr;
      }).length;
      activity.push({
        date: date.toISOString().split("T")[0],
        wordsStudied,
        reviewsCompleted
      });
    }
    return activity;
  }
  // 단어장 폴더 경로 업데이트
  updateVocabularyFolderPath(newPath) {
    this.vocabularyFolderPath = newPath;
    this.initializeVocabularyFolder();
  }
};

// src/infrastructure/llm/LLMServiceAdapter.ts
var LLMServiceAdapter = class {
  constructor(settings) {
    this.llmService = new LLMService(settings);
  }
  async getWordData(request) {
    try {
      const wordInfo = await this.llmService.getWordInfo(request.word);
      return {
        success: true,
        data: {
          word: wordInfo.word,
          meaning: wordInfo.meanings,
          pronunciation: wordInfo.pronunciation,
          examples: wordInfo.examples,
          similarWords: wordInfo.similarWords
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  async testConnection() {
    return await this.llmService.testConnection();
  }
  updateSettings(settings) {
    this.llmService = new LLMService(settings);
  }
};

// src/infrastructure/external/WordServiceAdapter.ts
var WordServiceAdapter = class {
  constructor(settings) {
    this.wordService = new WordService(settings);
  }
  async getWordData(request) {
    try {
      const wordData = await this.wordService.getWordData(request.word);
      return {
        success: true,
        data: {
          word: wordData.word,
          meaning: wordData.meaning,
          pronunciation: wordData.pronunciation,
          examples: wordData.examples || [],
          similarWords: wordData.similarWords || []
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  updateSettings(settings) {
    this.wordService = new WordService(settings);
  }
};

// src/core/ports/services/ITTSServiceAdapter.ts
var TTSServiceAdapter = class {
  constructor(settings) {
    this.ttsService = TTSServiceFactory.createTTSService(settings);
  }
  async speakText(text) {
    await this.ttsService.speakText(text);
  }
  async speakWord(word) {
    await this.ttsService.speakWord(word);
  }
  async speakExample(example) {
    await this.ttsService.speakExample(example);
  }
  stopSpeaking() {
    this.ttsService.stopSpeaking();
  }
  updateSettings(settings) {
    this.ttsService.destroy();
    this.ttsService = TTSServiceFactory.createTTSService(settings);
  }
  isEnabled() {
    return true;
  }
  getAvailableVoices() {
    const voices = this.ttsService.getAvailableVoices();
    return [];
  }
  async testConnection() {
    return await this.ttsService.testConnection();
  }
  isPaused() {
    return this.ttsService.isPaused();
  }
  resume() {
    this.ttsService.resume();
  }
  pause() {
    this.ttsService.pause();
  }
  destroy() {
    this.ttsService.destroy();
  }
};

// src/shared/container/ServiceRegistry.ts
var ServiceRegistry = class {
  static registerServices(container2, app, settings) {
    container2.registerInstance("app", app);
    container2.registerInstance("settings", settings);
    container2.register("databaseManager", (app2) => {
      return new VocabularyDatabaseManager(
        app2,
        () => {
        },
        // saveCallback - DI에서는 빈 함수로 처리
        settings.vocabularyFolderPath
      );
    }, {
      dependencies: ["app"],
      singleton: true
    });
    container2.register("vocabularyRepository", VocabularyRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("bookRepository", BookRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("wordService", WordServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("llmService", LLMServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("ttsService", TTSServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("addWordUseCase", AddWordUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository", "wordService"]
    });
    container2.register("createBookUseCase", CreateBookUseCase, {
      dependencies: ["bookRepository"]
    });
    container2.register("getWordsForReviewUseCase", GetWordsForReviewUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository"]
    });
    container2.register("reviewWordUseCase", ReviewWordUseCase, {
      dependencies: ["vocabularyRepository"]
    });
  }
  static updateSettings(container2, settings) {
    container2.registerInstance("settings", settings);
    if (container2.has("ttsService")) {
      const ttsService = container2.resolve("ttsService");
      ttsService.updateSettings(settings);
    }
    if (container2.has("llmService")) {
      const llmService = container2.resolve("llmService");
      llmService.updateSettings(settings);
    }
    if (container2.has("wordService")) {
      const wordService = container2.resolve("wordService");
      wordService.updateSettings(settings);
    }
  }
};

// src/shared/ErrorBoundary.ts
var import_obsidian10 = require("obsidian");
var ErrorBoundary = class _ErrorBoundary {
  constructor() {
    this.errorHandlers = /* @__PURE__ */ new Map();
    this.isInitialized = false;
  }
  static getInstance() {
    if (!_ErrorBoundary.instance) {
      _ErrorBoundary.instance = new _ErrorBoundary();
    }
    return _ErrorBoundary.instance;
  }
  // 전역 에러 핸들러 초기화
  initialize() {
    if (this.isInitialized)
      return;
    window.addEventListener("error", (event) => {
      var _a;
      this.handleError({
        error: event.error || new Error(event.message),
        context: "Global Error",
        timestamp: Date.now(),
        stackTrace: (_a = event.error) == null ? void 0 : _a.stack
      });
    });
    window.addEventListener("unhandledrejection", (event) => {
      var _a;
      this.handleError({
        error: event.reason instanceof Error ? event.reason : new Error(String(event.reason)),
        context: "Unhandled Promise Rejection",
        timestamp: Date.now(),
        stackTrace: (_a = event.reason) == null ? void 0 : _a.stack
      });
    });
    this.isInitialized = true;
  }
  // 에러 핸들러 등록
  registerHandler(context, handler) {
    this.errorHandlers.set(context, handler);
  }
  // 에러 핸들러 제거
  unregisterHandler(context) {
    this.errorHandlers.delete(context);
  }
  // 에러 처리
  handleError(errorInfo) {
    console.error("Error caught by ErrorBoundary:", errorInfo);
    const userMessage = this.getUserFriendlyMessage(errorInfo.error);
    new import_obsidian10.Notice(userMessage, 0);
    this.errorHandlers.forEach((handler, context) => {
      try {
        handler(errorInfo);
      } catch (handlerError) {
        console.error(`Error in handler for context ${context}:`, handlerError);
      }
    });
  }
  // 안전한 함수 실행 래퍼
  async safeExecute(fn, context, fallback) {
    try {
      return await fn();
    } catch (error) {
      this.handleError({
        error: error instanceof Error ? error : new Error(String(error)),
        context,
        timestamp: Date.now(),
        stackTrace: error instanceof Error ? error.stack : void 0
      });
      return fallback;
    }
  }
  // 동기 함수용 안전한 실행
  safeExecuteSync(fn, context, fallback) {
    try {
      return fn();
    } catch (error) {
      this.handleError({
        error: error instanceof Error ? error : new Error(String(error)),
        context,
        timestamp: Date.now(),
        stackTrace: error instanceof Error ? error.stack : void 0
      });
      return fallback;
    }
  }
  // 사용자 친화적인 에러 메시지 생성
  getUserFriendlyMessage(error) {
    const errorType = error.name;
    const errorMessage = error.message;
    const friendlyMessages = {
      "NetworkError": "\uB124\uD2B8\uC6CC\uD06C \uC5F0\uACB0\uC5D0 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.",
      "TypeError": "\uB370\uC774\uD130 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
      "ReferenceError": "\uD544\uC694\uD55C \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",
      "SyntaxError": "\uB370\uC774\uD130 \uD615\uC2DD\uC5D0 \uC624\uB958\uAC00 \uC788\uC2B5\uB2C8\uB2E4.",
      "QuotaExceededError": "\uC800\uC7A5 \uACF5\uAC04\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4.",
      "SecurityError": "\uBCF4\uC548 \uC815\uCC45\uC73C\uB85C \uC778\uD574 \uC791\uC5C5\uC744 \uC218\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
    };
    if (errorMessage.includes("API") || errorMessage.includes("fetch")) {
      return "API \uC11C\uBE44\uC2A4\uC5D0 \uC77C\uC2DC\uC801\uC778 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
    }
    if (errorMessage.includes("file") || errorMessage.includes("File")) {
      return "\uD30C\uC77C \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uD30C\uC77C\uC774 \uC874\uC7AC\uD558\uB294\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
    }
    if (errorMessage.includes("encrypt") || errorMessage.includes("decrypt")) {
      return "API \uD0A4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC744 \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
    }
    return friendlyMessages[errorType] || `\uC608\uC0C1\uCE58 \uBABB\uD55C \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${errorMessage}`;
  }
  // 에러 복구 시도
  async attemptRecovery(error, context) {
    if (error.message.includes("fetch") || error.message.includes("network")) {
      try {
        await (0, import_obsidian10.requestUrl)({
          url: "https://www.google.com/favicon.ico",
          method: "HEAD"
        });
        return true;
      } catch (e) {
        return false;
      }
    }
    if (error.name === "QuotaExceededError") {
      try {
        localStorage.removeItem("temp-data");
        return true;
      } catch (e) {
        return false;
      }
    }
    return false;
  }
  // 정리
  cleanup() {
    this.errorHandlers.clear();
    this.isInitialized = false;
  }
};

// src/main.ts
var EnglishVocabularyPlugin = class extends import_obsidian11.Plugin {
  async onload() {
    const errorBoundary = ErrorBoundary.getInstance();
    errorBoundary.initialize();
    errorBoundary.registerHandler("VocabularyPlugin", (errorInfo) => {
      var _a;
      if ((_a = errorInfo.context) == null ? void 0 : _a.includes("API")) {
        console.warn("API \uC5D0\uB7EC \uAC10\uC9C0, \uD3F4\uBC31 \uBAA8\uB4DC\uB85C \uC804\uD658");
      }
    });
    await this.loadSettings();
    this.container = container;
    ServiceRegistry.registerServices(this.container, this.app, this.settings);
    this.databaseManager = this.container.resolve("databaseManager");
    this.llmService = new LLMService(this.settings);
    try {
      await this.databaseManager.loadAllBooks();
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uB370\uC774\uD130 \uB85C\uB4DC \uC2E4\uD328:", error);
      await this.migrateFromLegacyData();
    }
    this.addSettingTab(new VocabularySettingTab(this.app, this));
    this.addCommand({
      id: "open-vocabulary-modal",
      name: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      callback: () => {
        new VocabularyModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "open-vocabulary-manager",
      name: "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30",
      callback: () => {
        new VocabularyManagerModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "add-words",
      name: "\uB2E8\uC5B4 \uCD94\uAC00",
      callback: () => {
        new AddWordsModal(this.app, this).open();
      }
    });
    this.addRibbonIcon("book", "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30", () => {
      new VocabularyManagerModal(this.app, this).open();
    });
  }
  onunload() {
    const errorBoundary = ErrorBoundary.getInstance();
    errorBoundary.unregisterHandler("VocabularyPlugin");
    errorBoundary.cleanup();
  }
  async loadSettings() {
    const data = await this.loadData();
    if (data && typeof data === "object" && "settings" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data.settings);
    } else if (data && typeof data === "object" && "apiKey" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
    } else {
      this.settings = Object.assign({}, DEFAULT_SETTINGS);
    }
    await this.migrateApiKeys();
  }
  // API 키 암호화 마이그레이션
  async migrateApiKeys() {
    let needsSave = false;
    if (this.settings.llmApiKey && this.isPlainTextApiKey(this.settings.llmApiKey)) {
      const plainKey = this.settings.llmApiKey;
      this.settings.llmApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.openaiApiKey && this.isPlainTextApiKey(this.settings.openaiApiKey)) {
      const plainKey = this.settings.openaiApiKey;
      this.settings.openaiApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.anthropicApiKey && this.isPlainTextApiKey(this.settings.anthropicApiKey)) {
      const plainKey = this.settings.anthropicApiKey;
      this.settings.anthropicApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.googleApiKey && this.isPlainTextApiKey(this.settings.googleApiKey)) {
      const plainKey = this.settings.googleApiKey;
      this.settings.googleApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (needsSave) {
      await this.saveSettings();
    }
  }
  // API 키가 평문인지 확인하는 헬퍼 함수
  isPlainTextApiKey(apiKey) {
    if (!apiKey)
      return false;
    try {
      const decrypted = decryptApiKey(apiKey);
      return decrypted === apiKey;
    } catch (error) {
      return apiKey.startsWith("sk-") || apiKey.startsWith("sk-ant-") || apiKey.startsWith("AIza") || apiKey.length > 20;
    }
  }
  async saveSettings() {
    await this.saveAllData();
    if (this.llmService) {
      this.llmService = new LLMService(this.settings);
    }
    if (this.container) {
      ServiceRegistry.updateSettings(this.container, this.settings);
    }
  }
  // 기존 data.json에서 MD 파일로 마이그레이션
  async migrateFromLegacyData() {
    try {
      const savedData = await this.loadData();
      if (savedData && savedData.database && Array.isArray(savedData.database.words)) {
        const legacyData = savedData.database;
        if (legacyData.words && legacyData.words.length > 0) {
          for (const word of legacyData.words) {
            try {
              await this.databaseManager.addWord({
                ...word,
                bookId: "default",
                pronunciation: word.pronunciation || ""
              });
            } catch (error) {
              console.warn(`\uB2E8\uC5B4 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328: ${word.word}`, error);
            }
          }
        }
        if (legacyData.settings) {
          await this.databaseManager.updateSettings(legacyData.settings);
        }
      }
    } catch (error) {
      console.error("\uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328:", error);
    }
  }
  // 모든 데이터 저장 (설정만 저장, 단어장 데이터는 MD 파일로 자동 저장됨)
  async saveAllData() {
    const data = {
      settings: this.settings
    };
    await this.saveData(data);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzLnRzIiwgInNyYy91dGlscy50cyIsICJzcmMvc2hhcmVkL0NvbmZpZy50cyIsICJzcmMvc2hhcmVkL1JldHJ5UG9saWN5LnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZS50cyIsICJzcmMvZmVhdHVyZXMvdm9jYWJ1bGFyeS1sZWFybmluZy91aS9Wb2NhYnVsYXJ5TW9kYWwudHMiLCAic3JjL2luZnJhc3RydWN0dXJlL3R0cy9DaGF0dGVyYm94VFRTU2VydmljZS50cyIsICJzcmMvc2hhcmVkL0F1ZGlvTWFuYWdlci50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL0dvb2dsZUNsb3VkVFRTU2VydmljZS50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL1RUU1NlcnZpY2UudHMiLCAic3JjL2NvcmUvYWxnb3JpdGhtcy9TcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLnRzIiwgInNyYy9jb3JlL3NlcnZpY2VzL1NwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnRzIiwgInNyYy9mZWF0dXJlcy9ib29rLW1hbmFnZW1lbnQvdWkvVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbC50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2UudHMiLCAic3JjL2ZlYXR1cmVzL2Jvb2stbWFuYWdlbWVudC91aS9BZGRCb29rTW9kYWwudHMiLCAic3JjL2ZlYXR1cmVzL3dvcmQtbWFuYWdlbWVudC91aS9BZGRXb3Jkc01vZGFsLnRzIiwgInNyYy9zaGFyZWQvdmFsaWRhdGlvbi50cyIsICJzcmMvc2hhcmVkL0NhbmNlbGxhdGlvblRva2VuLnRzIiwgInNyYy9zaGFyZWQvY29udGFpbmVyL0RJQ29udGFpbmVyLnRzIiwgInNyYy9jb3JlL2VudGl0aWVzL1ZvY2FidWxhcnkudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL0FkZFdvcmRVc2VDYXNlLnRzIiwgInNyYy9jb3JlL2VudGl0aWVzL0Jvb2sudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL0NyZWF0ZUJvb2tVc2VDYXNlLnRzIiwgInNyYy9jb3JlL3VzZS1jYXNlcy9HZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL1Jldmlld1dvcmRVc2VDYXNlLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvQm9va1JlcG9zaXRvcnlBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZS50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2VBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9leHRlcm5hbC9Xb3JkU2VydmljZUFkYXB0ZXIudHMiLCAic3JjL2NvcmUvcG9ydHMvc2VydmljZXMvSVRUU1NlcnZpY2VBZGFwdGVyLnRzIiwgInNyYy9zaGFyZWQvY29udGFpbmVyL1NlcnZpY2VSZWdpc3RyeS50cyIsICJzcmMvc2hhcmVkL0Vycm9yQm91bmRhcnkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTLCBWb2NhYnVsYXJ5U2V0dGluZ1RhYiB9IGZyb20gJy4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5TW9kYWwgfSBmcm9tICcuL2ZlYXR1cmVzL3ZvY2FidWxhcnktbGVhcm5pbmcvdWkvVm9jYWJ1bGFyeU1vZGFsJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuL1ZvY2FidWxhcnlDYXJkJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCB9IGZyb20gJy4vZmVhdHVyZXMvYm9vay1tYW5hZ2VtZW50L3VpL1ZvY2FidWxhcnlNYW5hZ2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIH0gZnJvbSAnLi9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XHJcbmltcG9ydCB7IEFkZFdvcmRzTW9kYWwgfSBmcm9tICcuL2ZlYXR1cmVzL3dvcmQtbWFuYWdlbWVudC91aS9BZGRXb3Jkc01vZGFsJztcclxuaW1wb3J0IHsgQWRkQm9va01vZGFsIH0gZnJvbSAnLi9mZWF0dXJlcy9ib29rLW1hbmFnZW1lbnQvdWkvQWRkQm9va01vZGFsJztcclxuaW1wb3J0IHsgTExNU2VydmljZSB9IGZyb20gJy4vaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBlbmNyeXB0QXBpS2V5LCBkZWNyeXB0QXBpS2V5IH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG4vLyBESSBDb250YWluZXJcclxuaW1wb3J0IHsgRElDb250YWluZXIsIGNvbnRhaW5lciB9IGZyb20gJy4vc2hhcmVkL2NvbnRhaW5lci9ESUNvbnRhaW5lcic7XHJcbmltcG9ydCB7IFNlcnZpY2VSZWdpc3RyeSB9IGZyb20gJy4vc2hhcmVkL2NvbnRhaW5lci9TZXJ2aWNlUmVnaXN0cnknO1xyXG5cclxuLy8gRXJyb3IgQm91bmRhcnlcclxuaW1wb3J0IHsgRXJyb3JCb3VuZGFyeSB9IGZyb20gJy4vc2hhcmVkL0Vycm9yQm91bmRhcnknO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncztcclxuICAgIGRhdGFiYXNlTWFuYWdlcjogVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcjtcclxuICAgIGxsbVNlcnZpY2U6IExMTVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogRElDb250YWluZXI7XHJcblxyXG4gICAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgICAgIC8vIEVycm9yIEJvdW5kYXJ5IFx1Q0QwOFx1QUUzMFx1RDY1NFxyXG4gICAgICAgIGNvbnN0IGVycm9yQm91bmRhcnkgPSBFcnJvckJvdW5kYXJ5LmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgZXJyb3JCb3VuZGFyeS5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4XHVCQ0M0IFx1QzVEMFx1QjdFQyBcdUQ1NzhcdUI0RTRcdUI3RUMgXHVCNEYxXHVCODVEXHJcbiAgICAgICAgZXJyb3JCb3VuZGFyeS5yZWdpc3RlckhhbmRsZXIoJ1ZvY2FidWxhcnlQbHVnaW4nLCAoZXJyb3JJbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQyBcdUI4NUNcdUM5QzFcclxuICAgICAgICAgICAgaWYgKGVycm9ySW5mby5jb250ZXh0Py5pbmNsdWRlcygnQVBJJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFQSSBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDXHVCMjk0IFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUI2MTBcdUIyOTQgXHVEM0Y0XHVCQzMxIFx1Q0M5OFx1QjlBQ1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdBUEkgXHVDNUQwXHVCN0VDIFx1QUMxMFx1QzlDMCwgXHVEM0Y0XHVCQzMxIFx1QkFBOFx1QjREQ1x1Qjg1QyBcdUM4MDRcdUQ2NTgnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuICAgICAgICAvLyBESSBDb250YWluZXIgXHVDRDA4XHVBRTMwXHVENjU0XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgU2VydmljZVJlZ2lzdHJ5LnJlZ2lzdGVyU2VydmljZXModGhpcy5jb250YWluZXIsIHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QjlFNFx1QjJDOFx1QzgwMCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICB0aGlzLmRhdGFiYXNlTWFuYWdlciA9IHRoaXMuY29udGFpbmVyLnJlc29sdmU8Vm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcj4oJ2RhdGFiYXNlTWFuYWdlcicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExMTSBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDRDA4XHVBRTMwXHVENjU0XHJcbiAgICAgICAgdGhpcy5sbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2UodGhpcy5zZXR0aW5ncyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTUQgXHVEMzBDXHVDNzdDIFx1QUUzMFx1QkMxOCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0REMgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IGRhdGEuanNvblx1QzVEMFx1QzExQyBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNTggXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWlncmF0ZUZyb21MZWdhY3lEYXRhKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVEMEVEIFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVm9jYWJ1bGFyeVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gXHVCQTg1XHVCODM5XHVDNUI0IFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnb3Blbi12b2NhYnVsYXJ5LW1vZGFsJyxcclxuICAgICAgICAgICAgbmFtZTogJ1x1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjQgXHVENTU5XHVDMkI1IFx1QzJEQ1x1Qzc5MScsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkNGNFx1QUUzMCBcdUJBODVcdUI4MzlcdUM1QjQgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdvcGVuLXZvY2FidWxhcnktbWFuYWdlcicsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0Y0XHVBRTMwJyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5ldyBWb2NhYnVsYXJ5TWFuYWdlck1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCBcdUJBODVcdUI4MzlcdUM1QjQgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdhZGQtd29yZHMnLFxyXG4gICAgICAgICAgICBuYW1lOiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgQWRkV29yZHNNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QjlBQ1x1QkNGOCBcdUM1NDRcdUM3NzRcdUNGNTggXHVDRDk0XHVBQzAwIChcdUNDNDUgXHVDNTQ0XHVDNzc0XHVDRjU4KVxyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignYm9vaycsICdcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0Y0XHVBRTMwJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9udW5sb2FkKCkge1xyXG4gICAgICAgIC8vIEVycm9yIEJvdW5kYXJ5IFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgIGNvbnN0IGVycm9yQm91bmRhcnkgPSBFcnJvckJvdW5kYXJ5LmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgZXJyb3JCb3VuZGFyeS51bnJlZ2lzdGVySGFuZGxlcignVm9jYWJ1bGFyeVBsdWdpbicpO1xyXG4gICAgICAgIGVycm9yQm91bmRhcnkuY2xlYW51cCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOUNDIFx1Qjg1Q1x1QjREQyAoXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QzY0MCBcdUJEODRcdUI5QUMpXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcclxuICAgICAgICBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgJ3NldHRpbmdzJyBpbiBkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIFx1RDFCNVx1RDU2OVx1QjQxQyBcdUIzNzBcdUM3NzRcdUQxMzBcdUM1RDBcdUMxMUMgXHVDMTI0XHVDODE1IFx1QkQ4MFx1QkQ4NFx1QjlDQyBcdUNEOTRcdUNEOUNcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEuc2V0dGluZ3MpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgJ2FwaUtleScgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVENjE1XHVDMkREXHVDNzU4IFx1QzEyNFx1QzgxNSBcdUIzNzBcdUM3NzRcdUQxMzBcdUM3NzggXHVBQ0JEXHVDNkIwXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVCMzcwXHVDNzc0XHVEMTMwXHVBQzAwIFx1QzVDNlx1QjI5NCBcdUFDQkRcdUM2QjAgXHVBRTMwXHVCQ0Y4XHVBQzEyIFx1QzBBQ1x1QzZBOVxyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBUEkgXHVEMEE0IFx1QzU1NFx1RDYzOFx1RDY1NCBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNThcclxuICAgICAgICBhd2FpdCB0aGlzLm1pZ3JhdGVBcGlLZXlzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XHJcbiAgICBwcml2YXRlIGFzeW5jIG1pZ3JhdGVBcGlLZXlzKCkge1xyXG4gICAgICAgIGxldCBuZWVkc1NhdmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gbGxtQXBpS2V5XHVBQzAwIFx1RDNDOVx1QkIzOFx1QzczQ1x1Qjg1QyBcdUM4MDBcdUM3QTVcdUI0MThcdUM1QjQgXHVDNzg4XHVCMjk0XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUNFMCBcdUM1NTRcdUQ2MzhcdUQ2NTRcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5sbG1BcGlLZXkgJiYgdGhpcy5pc1BsYWluVGV4dEFwaUtleSh0aGlzLnNldHRpbmdzLmxsbUFwaUtleSkpIHtcclxuICAgICAgICAgICAgY29uc3QgcGxhaW5LZXkgPSB0aGlzLnNldHRpbmdzLmxsbUFwaUtleTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5sbG1BcGlLZXkgPSBlbmNyeXB0QXBpS2V5KHBsYWluS2V5KTtcclxuICAgICAgICAgICAgbmVlZHNTYXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QjJFNFx1Qjk3OCBBUEkgXHVEMEE0XHVCNEU0XHVCM0M0IFx1RDNDOVx1QkIzOFx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NThcdUFDRTAgXHVDNTU0XHVENjM4XHVENjU0IChcdUFFMzBcdUM4NzRcdUM1RDAgXHVDNTU0XHVENjM4XHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUFDQkRcdUM2QjApXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5ICYmIHRoaXMuaXNQbGFpblRleHRBcGlLZXkodGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXkpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYWluS2V5ID0gdGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5ID0gZW5jcnlwdEFwaUtleShwbGFpbktleSk7XHJcbiAgICAgICAgICAgIG5lZWRzU2F2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkgJiYgdGhpcy5pc1BsYWluVGV4dEFwaUtleSh0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSkpIHtcclxuICAgICAgICAgICAgY29uc3QgcGxhaW5LZXkgPSB0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkgPSBlbmNyeXB0QXBpS2V5KHBsYWluS2V5KTtcclxuICAgICAgICAgICAgbmVlZHNTYXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleSAmJiB0aGlzLmlzUGxhaW5UZXh0QXBpS2V5KHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5KSkge1xyXG4gICAgICAgICAgICBjb25zdCBwbGFpbktleSA9IHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5O1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleSA9IGVuY3J5cHRBcGlLZXkocGxhaW5LZXkpO1xyXG4gICAgICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVCQ0MwXHVBQ0JEXHVDMEFDXHVENTZEXHVDNzc0IFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM4MDBcdUM3QTVcclxuICAgICAgICBpZiAobmVlZHNTYXZlKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFQSSBcdUQwQTRcdUFDMDAgXHVEM0M5XHVCQjM4XHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QjI5NCBcdUQ1RUNcdUQzN0MgXHVENTY4XHVDMjE4XHJcbiAgICBwcml2YXRlIGlzUGxhaW5UZXh0QXBpS2V5KGFwaUtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFhcGlLZXkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVEMEE0XHVCOTdDIFx1QkNGNVx1RDYzOFx1RDY1NFx1RDU3NFx1QkNGNFx1QUNFMCBcdUM2RDBcdUJDRjhcdUFDRkMgXHVCMkU0XHVCOTc0XHVCQTc0IFx1RDNDOVx1QkIzOFx1QzczQ1x1Qjg1QyBcdUFDMDRcdUM4RkNcclxuICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gZGVjcnlwdEFwaUtleShhcGlLZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVjcnlwdGVkID09PSBhcGlLZXk7IC8vIFx1QkNGNVx1RDYzOFx1RDY1NCBcdUFDQjBcdUFDRkNcdUFDMDAgXHVDNkQwXHVCQ0Y4XHVBQ0ZDIFx1QUMxOVx1QzczQ1x1QkE3NCBcdUQzQzlcdUJCMzhcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4XHVENTU4XHVCQTc0IFx1RDNDOVx1QkIzOFx1Qzc3QyBcdUFDMDBcdUIyQTVcdUMxMzFcdUM3NzQgXHVDNzg4XHVDNzRDXHJcbiAgICAgICAgICAgIC8vIFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBBUEkgXHVEMEE0IFx1RDMyOFx1RDEzNCBcdUQ2NTVcdUM3NzhcclxuICAgICAgICAgICAgcmV0dXJuIGFwaUtleS5zdGFydHNXaXRoKCdzay0nKSB8fCBhcGlLZXkuc3RhcnRzV2l0aCgnc2stYW50LScpIHx8IGFwaUtleS5zdGFydHNXaXRoKCdBSXphJykgfHwgYXBpS2V5Lmxlbmd0aCA+IDIwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlQWxsRGF0YSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExMTSBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKHRoaXMubGxtU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLmxsbVNlcnZpY2UgPSBuZXcgTExNU2VydmljZSh0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gREkgQ29udGFpbmVyXHVDNUQwIFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcclxuICAgICAgICAgICAgU2VydmljZVJlZ2lzdHJ5LnVwZGF0ZVNldHRpbmdzKHRoaXMuY29udGFpbmVyLCB0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVBRTMwXHVDODc0IGRhdGEuanNvblx1QzVEMFx1QzExQyBNRCBcdUQzMENcdUM3N0NcdUI4NUMgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XHJcbiAgICBwcml2YXRlIGFzeW5jIG1pZ3JhdGVGcm9tTGVnYWN5RGF0YSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBzYXZlZERhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XHJcbiAgICAgICAgICAgIGlmIChzYXZlZERhdGEgJiYgc2F2ZWREYXRhLmRhdGFiYXNlICYmIEFycmF5LmlzQXJyYXkoc2F2ZWREYXRhLmRhdGFiYXNlLndvcmRzKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVnYWN5RGF0YSA9IHNhdmVkRGF0YS5kYXRhYmFzZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNUQwIFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgICAgICAgICAgaWYgKGxlZ2FjeURhdGEud29yZHMgJiYgbGVnYWN5RGF0YS53b3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIGxlZ2FjeURhdGEud29yZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLndvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va0lkOiAnZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZC5wcm9udW5jaWF0aW9uIHx8ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgXHVCMkU4XHVDNUI0IFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OCBcdUMyRTRcdUQzMjg6ICR7d29yZC53b3JkfWAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OFxyXG4gICAgICAgICAgICAgICAgaWYgKGxlZ2FjeURhdGEuc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci51cGRhdGVTZXR0aW5ncyhsZWdhY3lEYXRhLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJBQThcdUI0RTAgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwMFx1QzdBNSAoXHVDMTI0XHVDODE1XHVCOUNDIFx1QzgwMFx1QzdBNSwgXHVCMkU4XHVDNUI0XHVDN0E1IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QjI5NCBNRCBcdUQzMENcdUM3N0NcdUI4NUMgXHVDNzkwXHVCM0Q5IFx1QzgwMFx1QzdBNVx1QjQyOClcclxuICAgIGFzeW5jIHNhdmVBbGxEYXRhKCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzXHJcbiAgICAgICAgfTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKGRhdGEpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUQwQzBcdUM3ODUgXHVDMTIwXHVDNUI4IFx1Q0Q5NFx1QUMwMFxyXG5leHBvcnQgeyBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiwgQWRkQm9va01vZGFsIH07ICIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSwgVEZvbGRlciwgcmVxdWVzdFVybCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBMTE1TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBlbmNyeXB0QXBpS2V5LCBkZWNyeXB0QXBpS2V5LCBtYXNrQXBpS2V5IH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWb2NhYnVsYXJ5U2V0dGluZ3Mge1xyXG4gICAgYXBpS2V5OiBzdHJpbmc7XHJcbiAgICBkZWZhdWx0TGFuZ3VhZ2U6IHN0cmluZztcclxuICAgIHNob3dTaW1pbGFyV29yZHM6IGJvb2xlYW47XHJcbiAgICBzaG93RXhhbXBsZXM6IGJvb2xlYW47XHJcbiAgICBleGFtcGxlc0NvdW50OiBudW1iZXI7XHJcbiAgICAvLyBcdUFDMDEgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVCQ0M0IFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBBUEkgXHVEMEE0XHJcbiAgICBvcGVuYWlBcGlLZXk6IHN0cmluZztcclxuICAgIGFudGhyb3BpY0FwaUtleTogc3RyaW5nO1xyXG4gICAgZ29vZ2xlQXBpS2V5OiBzdHJpbmc7XHJcbiAgICBsbG1Qcm92aWRlcjogJ29wZW5haScgfCAnYW50aHJvcGljJyB8ICdnb29nbGUnO1xyXG4gICAgbGxtTW9kZWw6IHN0cmluZztcclxuICAgIGVuYWJsZUFkdmFuY2VkRmVhdHVyZXM6IGJvb2xlYW47XHJcbiAgICAvLyBcdUJDRjVcdUMyQjUgXHVENjU0XHVCQTc0IFx1QjE5Mlx1Qzc3NCBcdUMxMjRcdUM4MTVcclxuICAgIHJldmlld01vZGFsSGVpZ2h0OiBudW1iZXI7XHJcbiAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDODAwXHVDN0E1IFx1RDNGNFx1QjM1NCBcdUFDQkRcdUI4NUNcclxuICAgIHZvY2FidWxhcnlGb2xkZXJQYXRoOiBzdHJpbmc7XHJcbiAgICAvLyBUVFMgXHVDMTI0XHVDODE1XHJcbiAgICB0dHNFbmFibGVkOiBib29sZWFuO1xyXG4gICAgdHRzUHJvdmlkZXI6ICdjaGF0dGVyYm94JyB8ICdnb29nbGUtY2xvdWQnO1xyXG4gICAgdHRzVm9pY2U6IHN0cmluZztcclxuICAgIHR0c1BsYXliYWNrU3BlZWQ6IG51bWJlcjtcclxuICAgIHR0c0F1dG9QbGF5OiBib29sZWFuO1xyXG4gICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVxyXG4gICAgY2hhdHRlcmJveEFwaVVybDogc3RyaW5nO1xyXG4gICAgY2hhdHRlcmJveEV4YWdnZXJhdGlvbjogbnVtYmVyO1xyXG4gICAgY2hhdHRlcmJveENmZ1dlaWdodDogbnVtYmVyO1xyXG4gICAgY2hhdHRlcmJveFRlbXBlcmF0dXJlOiBudW1iZXI7XHJcbiAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzgwNFx1QzZBOSBcdUMxMjRcdUM4MTVcclxuICAgIGdvb2dsZUNsb3VkVFRTQXBpS2V5OiBzdHJpbmc7XHJcbiAgICBnb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZTogc3RyaW5nO1xyXG4gICAgZ29vZ2xlQ2xvdWRUVFNTcGVha2luZ1JhdGU6IG51bWJlcjtcclxuICAgIGdvb2dsZUNsb3VkVFRTUGl0Y2g6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFZvY2FidWxhcnlTZXR0aW5ncyA9IHtcclxuICAgIGFwaUtleTogJycsXHJcbiAgICBkZWZhdWx0TGFuZ3VhZ2U6ICdrbycsXHJcbiAgICBzaG93U2ltaWxhcldvcmRzOiB0cnVlLFxyXG4gICAgc2hvd0V4YW1wbGVzOiB0cnVlLFxyXG4gICAgZXhhbXBsZXNDb3VudDogMyxcclxuICAgIG9wZW5haUFwaUtleTogJycsXHJcbiAgICBhbnRocm9waWNBcGlLZXk6ICcnLFxyXG4gICAgZ29vZ2xlQXBpS2V5OiAnJyxcclxuICAgIGxsbVByb3ZpZGVyOiAnb3BlbmFpJyxcclxuICAgIGxsbU1vZGVsOiAnZ2VtaW5pLTEuMC1wcm8tbGF0ZXN0JyxcclxuICAgIGVuYWJsZUFkdmFuY2VkRmVhdHVyZXM6IGZhbHNlLFxyXG4gICAgcmV2aWV3TW9kYWxIZWlnaHQ6IDg1LFxyXG4gICAgdm9jYWJ1bGFyeUZvbGRlclBhdGg6ICdWb2NhYnVsYXJ5JyxcclxuICAgIHR0c0VuYWJsZWQ6IHRydWUsXHJcbiAgICB0dHNQcm92aWRlcjogJ2NoYXR0ZXJib3gnLFxyXG4gICAgdHRzVm9pY2U6ICdhbGxveScsXHJcbiAgICB0dHNQbGF5YmFja1NwZWVkOiAxLjAsXHJcbiAgICB0dHNBdXRvUGxheTogZmFsc2UsXHJcbiAgICAvLyBDaGF0dGVyYm94IFRUUyBcdUFFMzBcdUJDRjhcdUFDMTJcclxuICAgIGNoYXR0ZXJib3hBcGlVcmw6ICdodHRwOi8vbG9jYWxob3N0OjQxMjMnLCAvLyBcdUFDQkRcdUFDRTA6IEhUVFBcdUIyOTQgXHVCQ0Y0XHVDNTQ4XHVDNUQwIFx1Q0RFOFx1QzU3RFx1RDU2OVx1QjJDOFx1QjJFNC4gXHVBQzAwXHVCMkE1XHVENTU4XHVCQTc0IEhUVFBTXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU1OFx1QzEzOFx1QzY5NC5cclxuICAgIGNoYXR0ZXJib3hFeGFnZ2VyYXRpb246IDAuNyxcclxuICAgIGNoYXR0ZXJib3hDZmdXZWlnaHQ6IDAuNCxcclxuICAgIGNoYXR0ZXJib3hUZW1wZXJhdHVyZTogMC45LFxyXG4gICAgLy8gR29vZ2xlIENsb3VkIFRUUyBcdUFFMzBcdUJDRjhcdUFDMTJcclxuICAgIGdvb2dsZUNsb3VkVFRTQXBpS2V5OiAnJyxcclxuICAgIGdvb2dsZUNsb3VkVFRTTGFuZ3VhZ2VDb2RlOiAnZW4tVVMnLFxyXG4gICAgZ29vZ2xlQ2xvdWRUVFNTcGVha2luZ1JhdGU6IDEuMCxcclxuICAgIGdvb2dsZUNsb3VkVFRTUGl0Y2g6IDAuMFxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNSBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzggXHVDMTI0XHVDODE1JyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVCYXNpY1NldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZUxMTVNldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZVRUU1NldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZUFkdmFuY2VkU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQmFzaWNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUFFMzBcdUJDRjggXHVDMTI0XHVDODE1JyB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUFFMzBcdUJDRjggXHVDNUI4XHVDNUI0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNCBcdUI3M0JcdUM3NDQgXHVENDVDXHVDMkRDXHVENTYwIFx1QzVCOFx1QzVCNFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdrbycsICdcdUQ1NUNcdUFENkRcdUM1QjQnKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4nLCAnRW5nbGlzaCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdqYScsICdcdTY1RTVcdTY3MkNcdThBOUUnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRMYW5ndWFnZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TGFuZ3VhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0IFx1RDQ1Q1x1QzJEQycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ1NTlcdUMyQjVcdUQ1NjAgXHVCNTRDIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NDQgXHVENTY4XHVBRUQ4IFx1RDQ1Q1x1QzJEQ1x1RDU2OVx1QjJDOFx1QjJFNC4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U2ltaWxhcldvcmRzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTaW1pbGFyV29yZHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM2MDhcdUJCMzggXHVENDVDXHVDMkRDJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1RDU1OVx1QzJCNVx1RDU2MCBcdUI1NEMgXHVDNjA4XHVCQjM4XHVCNEU0XHVDNzQ0IFx1RDU2OFx1QUVEOCBcdUQ0NUNcdUMyRENcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0V4YW1wbGVzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFeGFtcGxlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QzYwOFx1QkIzOCBcdUFDMUNcdUMyMTgnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVENDVDXHVDMkRDXHVENTYwIFx1QzYwOFx1QkIzOFx1Qzc1OCBcdUFDMUNcdUMyMThcdUI5N0MgXHVDMTI0XHVDODE1XHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygxLCAxMCwgMSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGFtcGxlc0NvdW50KVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGFtcGxlc0NvdW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVMTE1TZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdMTE0gQVBJIFx1QzEyNFx1QzgxNScgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVBQ0UwXHVBRTA5IFx1QUUzMFx1QjJBNSBcdUQ2NUNcdUMxMzFcdUQ2NTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnTExNIEFQSVx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NUMgXHVBQ0UwXHVBRTA5IFx1QUUzMFx1QjJBNVx1Qzc0NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQWR2YW5jZWRGZWF0dXJlcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBZHZhbmNlZEZlYXR1cmVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnTExNIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgTExNIEFQSSBcdUM4MUNcdUFDRjVcdUM1QzVcdUNDQjRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignb3BlbmFpJywgJ09wZW5BSSAoR1BUKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdhbnRocm9waWMnLCAnQW50aHJvcGljIChDbGF1ZGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dvb2dsZScsICdHb29nbGUgKEdlbWluaSknKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVByb3ZpZGVyKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVByb3ZpZGVyID0gdmFsdWUgYXMgJ29wZW5haScgfCAnYW50aHJvcGljJyB8ICdnb29nbGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ29wZW5haScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnZ3B0LTQuMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ2FudGhyb3BpYycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnY2xhdWRlLTMtNS1zb25uZXQnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdnb29nbGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbU1vZGVsID0gJ2dlbWluaS0yLjUtZmxhc2gnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVNb2RlbFNlbGVjdGlvbihjb250YWluZXJFbCk7XHJcblxyXG4gICAgICAgIC8vIFx1QUMwMSBcdUM4MUNcdUFDRjVcdUM1QzVcdUNDQjRcdUJDQzQgQVBJIFx1RDBBNCBcdUMxMjRcdUM4MTVcclxuICAgICAgICB0aGlzLmNyZWF0ZUFwaUtleVNldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBUEkgXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc1OCBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QUM4QyBcdUMxMjRcdUM4MTVcdUI0MThcdUM1QzhcdUIyOTRcdUM5QzAgXHVEMTRDXHVDMkE0XHVEMkI4XHVENTY5XHVCMkM4XHVCMkU0LicpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCBcdUM5MTEuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbGxtU2VydmljZS50ZXN0Q29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgQVBJIFx1QzVGMFx1QUNCMCBcdUMxMzFcdUFDRjUhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQVBJIFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjg6ICcgKyByZXN1bHQuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEFQSSBcdUM1RjBcdUFDQjAgXHVDMkU0XHVEMzI4OiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZU1vZGVsU2VsZWN0aW9uKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQVBJIFx1QkFBOFx1QjM3OCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgTExNIFx1QkFBOFx1QjM3OFx1Qzc0NCBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvdmlkZXIgPT09ICdvcGVuYWknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuMScsICdHUFQtNC4xJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTRvJywgJ0dQVC00bycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dwdC00by1taW5pJywgJ0dQVC00byBNaW5pJykgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuMS1sb25nJywgJ0dQVC00LjEgKExvbmcgQ29udGV4dCknKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNC41LXByZXZpZXcnLCAnR1BULTQuNSBQcmV2aWV3JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuNS1wcmV2aWV3LTInLCAnR1BULTQuNSBQcmV2aWV3IDInKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdhbnRocm9waWMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xhdWRlIDMuNSBcdUJBQThcdUIzNzhcdUI0RTRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNS1zb25uZXQnLCAnQ2xhdWRlIDMuNSBTb25uZXQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy01LWhhaWt1JywgJ0NsYXVkZSAzLjUgSGFpa3UnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy01LW9wdXMnLCAnQ2xhdWRlIDMuNSBPcHVzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xhdWRlIDMuNyBcdUJBQThcdUIzNzhcdUI0RTRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNy1zb25uZXQnLCAnQ2xhdWRlIDMuNyBTb25uZXQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy03LWhhaWt1JywgJ0NsYXVkZSAzLjcgSGFpa3UnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy03LW9wdXMnLCAnQ2xhdWRlIDMuNyBPcHVzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNS1mbGFzaCcsICdDbGF1ZGUgMy41IEZsYXNoJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb3ZpZGVyID09PSAnZ29vZ2xlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0xLjUtcHJvLWxhdGVzdCcsICdHZW1pbmkgMS41IFBybycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0yLjUtZmxhc2gnLCAnR2VtaW5pIDIuNSBGbGFzaCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0yLjUtcHJvJywgJ0dlbWluaSAyLjUgUHJvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ2VtaW5pLTEuNS1mbGFzaC1sYXRlc3QnLCAnR2VtaW5pIDEuNSBGbGFzaCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbU1vZGVsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQXBpS2V5U2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gT3BlbkFJIEFQSSBcdUQwQTRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ09wZW5BSSBBUEkgXHVEMEE0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ09wZW5BSSBBUEkgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4gKHNrLS4uLlx1Qjg1QyBcdUMyRENcdUM3OTEpJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpQXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkS2V5ID0gZGVjcnlwdEFwaUtleShjdXJyZW50S2V5KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hc2tlZEtleSA9IG1hc2tBcGlLZXkoZGVjcnlwdGVkS2V5KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3NrLS4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1QzBBQ1x1QzZBOVx1Qzc5MFx1QUMwMCBcdUM3ODVcdUI4MjVcdUQ1NUMgXHVBQzEyXHVDNzc0IFx1QjlDOFx1QzJBNFx1RDBCOVx1QjQxQyBcdUFDMTJcdUFDRkMgXHVCMkU0XHVCOTc0XHVCQTc0IFx1QzBDOFx1Qjg1Q1x1QzZCNCBcdUQwQTRcdUI4NUMgXHVBQzA0XHVDOEZDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBlbmNyeXB0QXBpS2V5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haUFwaUtleSA9IGVuY3J5cHRlZEtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBbnRocm9waWMgQVBJIFx1RDBBNFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQW50aHJvcGljIEFQSSBcdUQwQTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQW50aHJvcGljIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LiAoc2stYW50LS4uLlx1Qjg1QyBcdUMyRENcdUM3OTEpJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljQXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkS2V5ID0gZGVjcnlwdEFwaUtleShjdXJyZW50S2V5KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hc2tlZEtleSA9IG1hc2tBcGlLZXkoZGVjcnlwdGVkS2V5KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3NrLWFudC0uLi4nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShtYXNrZWRLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IG1hc2tlZEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkS2V5ID0gZW5jcnlwdEFwaUtleSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkgPSBlbmNyeXB0ZWRLZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gR29vZ2xlIEFQSSBcdUQwQTRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0dvb2dsZSBBUEkgXHVEMEE0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0dvb2dsZSBBUEkgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRLZXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQUl6YS4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBlbmNyeXB0QXBpS2V5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUFwaUtleSA9IGVuY3J5cHRlZEtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQWR2YW5jZWRTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUFDRTBcdUFFMDkgXHVDMTI0XHVDODE1JyB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVEM0Y0XHVCMzU0IFx1QkFBOVx1Qjg1RCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICBjb25zdCBmb2xkZXJzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKVxyXG4gICAgICAgICAgICAuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGb2xkZXIpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MDBcdUM3QTUgXHVEM0Y0XHVCMzU0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzMENcdUM3N0NcdUI0RTRcdUM3NzQgXHVDODAwXHVDN0E1XHVCNDIwIFx1RDNGNFx1QjM1NFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuIChcdUFFMzBcdUJDRjhcdUFDMTI6IFZvY2FidWxhcnkpJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIGZvbGRlcnMuZm9yRWFjaChmb2xkZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihmb2xkZXIucGF0aCwgZm9sZGVyLnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mudm9jYWJ1bGFyeUZvbGRlclBhdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVWb2NhYnVsYXJ5Rm9sZGVyUGF0aCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZHJvcGRvd247XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QkNGNVx1QzJCNSBcdUQ2NTRcdUJBNzQgXHVCMTkyXHVDNzc0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QkNGNVx1QzJCNSBcdUJBQThcdUIyRUNcdUM3NTggXHVCMTkyXHVDNzc0XHVCOTdDIFx1RDY1NFx1QkE3NCBcdUIxOTJcdUM3NzRcdUM3NTggXHVCQzMxXHVCRDg0XHVDNzI4XHVCODVDIFx1QzEyNFx1QzgxNVx1RDU1OFx1QzEzOFx1QzY5NC4gKFx1QUUzMFx1QkNGOFx1QUMxMjogODUlKScpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cyg1MCwgOTUsIDUpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNzdDXHVDNzdDIFx1RDU1OVx1QzJCNSBcdUJBQTlcdUQ0NUMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVENTU4XHVCOEU4XHVDNUQwIFx1RDU1OVx1QzJCNVx1RDU2MCBcdUIyRThcdUM1QjRcdUM3NTggXHVCQUE5XHVENDVDIFx1QUMxQ1x1QzIxOFx1Qjk3QyBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDUsIDUwLCA1KVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8uZ2V0RGF0YUZvclNhdmUoKT8uc2V0dGluZ3M/LmRhaWx5R29hbCB8fCAxMClcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyPy51cGRhdGVTZXR0aW5ncyh7IGRhaWx5R29hbDogdmFsdWUgfSk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVCQ0Y1XHVDMkI1IFx1QUMwNFx1QUNBOSAoXHVDNzdDKScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUIyRThcdUM1QjRcdUI5N0MgXHVCMkU0XHVDMkRDIFx1QkNGNVx1QzJCNVx1RDU2MCBcdUFDMDRcdUFDQTlcdUM3NDQgXHVDMTI0XHVDODE1XHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygxLCAzMCwgMSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXI/LmdldERhdGFGb3JTYXZlKCk/LnNldHRpbmdzPy5yZXZpZXdJbnRlcnZhbCB8fCAxKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXI/LnVwZGF0ZVNldHRpbmdzKHsgcmV2aWV3SW50ZXJ2YWw6IHZhbHVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlVFRTU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVFRTIChcdUM3NENcdUMxMzEgXHVDNzdEXHVBRTMwKSBcdUMxMjRcdUM4MTUnIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB0dHNUb2dnbGVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdUVFMgXHVENjVDXHVDMTMxXHVENjU0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNFx1QzY0MCBcdUM2MDhcdUJCMzhcdUM3NDQgXHVDNzRDXHVDMTMxXHVDNzNDXHVCODVDIFx1Qzc3RFx1QzVCNFx1QzhGQ1x1QjI5NCBcdUFFMzBcdUIyQTVcdUM3NDQgXHVENjVDXHVDMTMxXHVENjU0XHVENTY5XHVCMkM4XHVCMkU0LicpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c0VuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzRW5hYmxlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRUUyBcdUMxMjRcdUM4MTUgVUkgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUVFNTZXR0aW5nc1Zpc2liaWxpdHkoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gVFRTIFx1QzgxQ1x1QUNGNVx1Qzc5MCBcdUMxMjBcdUQwRERcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1RUUyBcdUM4MUNcdUFDRjVcdUM3OTAnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDMEFDXHVDNkE5XHVENTYwIFRUUyBcdUMxMUNcdUJFNDRcdUMyQTRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygndHRzLXByb3ZpZGVyLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NoYXR0ZXJib3gnLCAnQ2hhdHRlcmJveCBUVFMgKFx1Qjg1Q1x1Q0VFQyknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ29vZ2xlLWNsb3VkJywgJ0dvb2dsZSBDbG91ZCBUZXh0LXRvLVNwZWVjaCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzUHJvdmlkZXIpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzUHJvdmlkZXIgPSB2YWx1ZSBhcyAnY2hhdHRlcmJveCcgfCAnZ29vZ2xlLWNsb3VkJztcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRUU1Byb3ZpZGVyU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgdGhpcy5jcmVhdGVDaGF0dGVyYm94VFRTU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cclxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzEyNFx1QzgxNVxyXG4gICAgICAgIHRoaXMuY3JlYXRlR29vZ2xlQ2xvdWRUVFNTZXR0aW5ncyhjb250YWluZXJFbCk7XHJcblxyXG4gICAgICAgIC8vIFx1Qzc5MFx1QjNEOSBcdUM3QUNcdUMwREQgXHVDMTI0XHVDODE1IChcdUFDRjVcdUQxQjUpXHJcbiAgICAgICAgY29uc3QgYXV0b1BsYXlTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3OTBcdUIzRDkgXHVDN0FDXHVDMEREJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNCBcdUNFNzRcdUI0RENcdUFDMDAgXHVENDVDXHVDMkRDXHVCNDIwIFx1QjU0QyBcdUM3OTBcdUIzRDlcdUM3M0NcdUI4NUMgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc3RFx1QzVCNFx1QzkwRFx1QjJDOFx1QjJFNC4nKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3R0cy1hdXRvcGxheS1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzQXV0b1BsYXkpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzQXV0b1BsYXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUNEMDhcdUFFMzAgXHVDMEMxXHVEMERDIFx1QzEyNFx1QzgxNVxyXG4gICAgICAgIHRoaXMudXBkYXRlVFRTU2V0dGluZ3NWaXNpYmlsaXR5KCk7XHJcbiAgICAgICAgLy8gXHVDODFDXHVBQ0Y1XHVDNzkwXHVCQ0M0IFx1QzEyNFx1QzgxNSBcdUNEMDhcdUFFMzBcdUQ2NTRcclxuICAgICAgICB0aGlzLnVwZGF0ZVRUU1Byb3ZpZGVyU2V0dGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBvcHVsYXRlQ2hhdHRlcmJveFZvaWNlRHJvcGRvd24oZHJvcGRvd246IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIENoYXR0ZXJib3ggVFRTIFx1QzlDMFx1QzZEMCBcdUM3NENcdUMxMzFcdUI0RTQgKE9wZW5BSSBcdUQ2MzhcdUQ2NTgpXHJcbiAgICAgICAgY29uc3QgY2hhdHRlcmJveFZvaWNlcyA9IFtcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ2FsbG95JywgbmFtZTogJ0FsbG95IChcdUM5MTFcdUMxMzFcdUM4MDEpJyB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnZWNobycsIG5hbWU6ICdFY2hvIChcdUIwQThcdUMxMzEpJyB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnZmFibGUnLCBuYW1lOiAnRmFibGUgKFx1QzYwMVx1QUQ2RFx1QzJERCknIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdvbnl4JywgbmFtZTogJ09ueXggKFx1QUU0QVx1Qzc0MCBcdUIwQThcdUMxMzEpJyB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnbm92YScsIG5hbWU6ICdOb3ZhIChcdUM1RUNcdUMxMzEpJyB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnc2hpbW1lcicsIG5hbWU6ICdTaGltbWVyIChcdUJEODBcdUI0RENcdUI3RUNcdUM2QjQgXHVDNUVDXHVDMTMxKScgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ2N1c3RvbScsIG5hbWU6ICdDdXN0b20gKFx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUM4MTVcdUM3NTgpJyB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgLy8gQ2hhdHRlcmJveCBcdUM3NENcdUMxMzFcdUI0RTQgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgY2hhdHRlcmJveFZvaWNlcy5mb3JFYWNoKG9wdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihvcHRpb24udmFsdWUsIG9wdGlvbi5uYW1lKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVDMkU0XHVDODFDIFx1QkUwQ1x1Qjc3Q1x1QzZCMFx1QzgwMFx1QzVEMFx1QzExQyBcdUMwQUNcdUM2QTkgXHVBQzAwXHVCMkE1XHVENTVDIFx1QzYwMVx1QzVCNCBcdUM3NENcdUMxMzFcdUI0RTQgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgdm9pY2VzID0gc3BlZWNoU3ludGhlc2lzLmdldFZvaWNlcygpO1xyXG4gICAgICAgICAgICBjb25zdCBlbmdsaXNoVm9pY2VzID0gdm9pY2VzLmZpbHRlcih2b2ljZSA9PiBcclxuICAgICAgICAgICAgICAgIHZvaWNlLmxhbmcuc3RhcnRzV2l0aCgnZW4tJykgJiYgXHJcbiAgICAgICAgICAgICAgICAhdm9pY2UubGFuZy5pbmNsdWRlcygna28nKSAmJlxyXG4gICAgICAgICAgICAgICAgIWNoYXR0ZXJib3hWb2ljZXMuc29tZShvcHQgPT4gb3B0LnZhbHVlID09PSB2b2ljZS5uYW1lKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVuZ2xpc2hWb2ljZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVBRDZDXHVCRDg0XHVDMTIwIFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCctLS0nLCAnLS0tIFx1QzJEQ1x1QzJBNFx1RDE1QyBcdUM3NENcdUMxMzEgLS0tJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGVuZ2xpc2hWb2ljZXMuZm9yRWFjaCh2b2ljZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBgJHt2b2ljZS5uYW1lfSAoJHt2b2ljZS5sYW5nfSlgO1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbih2b2ljZS5uYW1lLCBkaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignXHVDNzRDXHVDMTMxIFx1QkFBOVx1Qjg1RFx1Qzc0NCBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTQgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlVFRTU2V0dGluZ3NWaXNpYmlsaXR5KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGlzRW5hYmxlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c0VuYWJsZWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCQUE4XHVCNEUwIFRUUyBcdUFEMDBcdUI4MjggXHVDMTI0XHVDODE1XHVCNEU0XHJcbiAgICAgICAgY29uc3QgYWxsVHRzU2V0dGluZ3MgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgICAgICAgICcudHRzLXByb3ZpZGVyLXNldHRpbmcsIC5jaGF0dGVyYm94LWFwaS11cmwtc2V0dGluZywgLmNoYXR0ZXJib3gtdm9pY2Utc2V0dGluZywgLmNoYXR0ZXJib3gtZXhhZ2dlcmF0aW9uLXNldHRpbmcsIC5jaGF0dGVyYm94LWNmZy1zZXR0aW5nLCAuY2hhdHRlcmJveC10ZW1wZXJhdHVyZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXR0cy1ndWlkZSwgLmdvb2dsZS1jbG91ZC1hcGkta2V5LXNldHRpbmcsIC5nb29nbGUtY2xvdWQtbGFuZ3VhZ2Utc2V0dGluZywgLmdvb2dsZS1jbG91ZC12b2ljZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXNwZWFraW5nLXJhdGUtc2V0dGluZywgLmdvb2dsZS1jbG91ZC1waXRjaC1zZXR0aW5nLCAudHRzLWF1dG9wbGF5LXNldHRpbmcnXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICBhbGxUdHNTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmcgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gc2V0dGluZyBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGlzRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnc2V0dGluZ3MtZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ3NldHRpbmdzLWVuYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZHJvcGRvd25zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlcnMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYW5nZVwiXScpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG9nZ2xlcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4gKGJ0biBhcyBIVE1MQnV0dG9uRWxlbWVudCkuZGlzYWJsZWQgPSBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bnMuZm9yRWFjaChkZCA9PiAoZGQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLmRpc2FibGVkID0gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgc2xpZGVycy5mb3JFYWNoKHNsaWRlciA9PiAoc2xpZGVyIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlcy5mb3JFYWNoKHRvZ2dsZSA9PiAodG9nZ2xlIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gZmFsc2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnc2V0dGluZ3MtZW5hYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnc2V0dGluZ3MtZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZHJvcGRvd25zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlcnMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYW5nZVwiXScpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG9nZ2xlcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4gKGJ0biBhcyBIVE1MQnV0dG9uRWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3ducy5mb3JFYWNoKGRkID0+IChkZCBhcyBIVE1MU2VsZWN0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHNsaWRlcnMuZm9yRWFjaChzbGlkZXIgPT4gKHNsaWRlciBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlcy5mb3JFYWNoKHRvZ2dsZSA9PiAodG9nZ2xlIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiAoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRUU1x1QUMwMCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUI0MUMgXHVBQ0JEXHVDNkIwIFx1QzgxQ1x1QUNGNVx1Qzc5MFx1QkNDNCBcdUMxMjRcdUM4MTUgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKGlzRW5hYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRUU1Byb3ZpZGVyU2V0dGluZ3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgdGVzdENoYXR0ZXJib3hDb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveEFwaVVybH0vdjEvYXVkaW8vc3BlZWNoYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6ICdDb25uZWN0aW9uIHRlc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHZvaWNlOiAnYWxsb3knXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IENoYXR0ZXJib3ggVFRTIFx1QzExQ1x1QkM4NCBcdUM1RjBcdUFDQjAgXHVDMTMxXHVBQ0Y1IScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUMxMUNcdUJDODQgXHVDNzUxXHVCMkY1IFx1QzYyNFx1Qjk1ODogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaGF0dGVyYm94IFRUUyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODQgXHVDNUYwXHVBQ0IwIFx1QzJFNFx1RDMyOC4gXHVDMTFDXHVCQzg0XHVBQzAwIFx1QzJFNFx1RDU4OSBcdUM5MTFcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVDaGF0dGVyYm94VFRTU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gQ2hhdHRlcmJveCBBUEkgVVJMIFx1QzEyNFx1QzgxNVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2hhdHRlcmJveCBUVFMgQVBJIFVSTCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODRcdUM3NTggVVJMXHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4gKFx1QUUzMFx1QkNGOFx1QUMxMjogaHR0cDovL2xvY2FsaG9zdDo0MTIzKScpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnY2hhdHRlcmJveC1hcGktdXJsLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cDovL2xvY2FsaG9zdDo0MTIzJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94QXBpVXJsKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hBcGlVcmwgPSB2YWx1ZSB8fCAnaHR0cDovL2xvY2FsaG9zdDo0MTIzJzsgLy8gXHVBRTMwXHVCQ0Y4XHVBQzEyOiBIVFRQIChcdUJDRjRcdUM1NDggXHVDNzA0XHVENUQ4KVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1QzVGMFx1QUNCMCBcdUQxNENcdUMyQTRcdUQyQjgnKVxyXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ0NoYXR0ZXJib3ggVFRTIFx1QzExQ1x1QkM4NCBcdUM1RjBcdUFDQjBcdUM3NDQgXHVEMTRDXHVDMkE0XHVEMkI4XHVENTY5XHVCMkM4XHVCMkU0JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzkxMS4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnRlc3RDaGF0dGVyYm94Q29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBDaGF0dGVyYm94IFx1Qzc0Q1x1QzEzMSBcdUMxMjBcdUQwRERcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Qzc0Q1x1QzEzMSBcdUMxMjBcdUQwREQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hhdHRlcmJveCBUVFNcdUM1RDBcdUMxMUMgXHVDMEFDXHVDNkE5XHVENTYwIFx1Qzc0Q1x1QzEzMVx1Qzc0NCBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCdjaGF0dGVyYm94LXZvaWNlLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUNoYXR0ZXJib3hWb2ljZURyb3Bkb3duKGRyb3Bkb3duKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c1ZvaWNlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAnKVxyXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ1x1QzEyMFx1RDBERFx1RDU1QyBcdUM3NENcdUMxMzFcdUM3M0NcdUI4NUMgXHVDMEQ4XHVENTBDIFx1RDE0RFx1QzJBNFx1RDJCOFx1Qjk3QyBcdUM3QUNcdUMwRERcdUQ1NjlcdUIyQzhcdUIyRTQnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUM3QUNcdUMwREQgXHVDOTExLi4uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGxheUNoYXR0ZXJib3hWb2ljZVByZXZpZXcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUM3NENcdUMxMzEgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUM3QUNcdUMwREQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVx1QjRFNFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVBQzEwXHVDODE1IFx1RDQ1Q1x1RDYwNCBcdUFDMTVcdUIzQzQgKEV4YWdnZXJhdGlvbiknKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxXHVDNzU4IFx1QUMxMFx1QzgxNSBcdUQ0NUNcdUQ2MDQgXHVBQzE1XHVCM0M0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKDAuMjUgPSBcdUM1N0RcdUQ1NjgsIDIuMCA9IFx1QUMxNVx1RDU2OCknKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2NoYXR0ZXJib3gtZXhhZ2dlcmF0aW9uLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMC4yNSwgMi4wLCAwLjA1KVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hFeGFnZ2VyYXRpb24pXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hFeGFnZ2VyYXRpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdDRkcgXHVBQzAwXHVDOTExXHVDRTU4IChDRkcgV2VpZ2h0KScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUM3NENcdUMxMzEgXHVDMEREXHVDMTMxXHVDNzU4IFx1QUMwMFx1Qzc3NFx1QjM1OFx1QzJBNCBcdUFDMTVcdUIzQzRcdUI5N0MgXHVDODcwXHVDODA4XHVENTY5XHVCMkM4XHVCMkU0LiAoMC4wID0gXHVDNTdEXHVENTY4LCAxLjAgPSBcdUFDMTVcdUQ1NjgpJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCdjaGF0dGVyYm94LWNmZy1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAuMCwgMS4wLCAwLjA1KVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hDZmdXZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hDZmdXZWlnaHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM2MjhcdUIzQzQgKFRlbXBlcmF0dXJlKScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUM3NENcdUMxMzEgXHVDMEREXHVDMTMxXHVDNzU4IFx1Q0MzRFx1Qzc1OFx1QzEzMVx1Qzc0NCBcdUM4NzBcdUM4MDhcdUQ1NjlcdUIyQzhcdUIyRTQuICgwLjA1ID0gXHVDNzdDXHVBRDAwXHVDMTMxLCA1LjAgPSBcdUNDM0RcdUM3NThcdUMxMzEpJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCdjaGF0dGVyYm94LXRlbXBlcmF0dXJlLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMC4wNSwgNS4wLCAwLjA1KVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hUZW1wZXJhdHVyZSlcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveFRlbXBlcmF0dXJlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVHb29nbGVDbG91ZFRUU1NldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVDMEFDXHVDNkE5IFx1QUMwMFx1Qzc3NFx1QjREQ1xyXG4gICAgICAgIGNvbnN0IGd1aWRlRWwgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBcclxuICAgICAgICAgICAgY2xzOiAnZ29vZ2xlLWNsb3VkLXR0cy1ndWlkZSBnb29nbGUtY2xvdWQtYXBpLWtleS1zZXR0aW5nJyxcclxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbi1ib3R0b206IDE1cHg7IHBhZGRpbmc6IDEwcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgYm9yZGVyLXJhZGl1czogNXB4OyBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7JyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZ3VpZGVFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdcdUQ4M0RcdUREMjcgR29vZ2xlIENsb3VkIFRUUyBcdUMxMjRcdUM4MTUgXHVBQzAwXHVDNzc0XHVCNERDJywgYXR0cjogeyBzdHlsZTogJ21hcmdpbjogMCAwIDEwcHggMDsgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7JyB9IH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHN0ZXBzTGlzdCA9IGd1aWRlRWwuY3JlYXRlRWwoJ29sJywgeyBhdHRyOiB7IHN0eWxlOiAnbWFyZ2luOiAwOyBwYWRkaW5nLWxlZnQ6IDIwcHg7IGxpbmUtaGVpZ2h0OiAxLjY7JyB9IH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHN0ZXAxID0gc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScpO1xyXG4gICAgICAgIHN0ZXAxLmNyZWF0ZUVsKCdzdHJvbmcnLCB7IHRleHQ6ICdHb29nbGUgQ2xvdWQgQ29uc29sZSBcdUM4MTFcdUMxOEQ6JyB9KTtcclxuICAgICAgICBzdGVwMS5hcHBlbmRUZXh0KCcgJyk7XHJcbiAgICAgICAgY29uc3Qgc3RlcDFMaW5rID0gc3RlcDEuY3JlYXRlRWwoJ2EnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnY29uc29sZS5jbG91ZC5nb29nbGUuY29tJyxcclxuICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vY29uc29sZS5jbG91ZC5nb29nbGUuY29tJyxcclxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ2NvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOycgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN0ZXAxTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93Lm9wZW4oJ2h0dHBzOi8vY29uc29sZS5jbG91ZC5nb29nbGUuY29tJywgJ19ibGFuaycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHN0ZXAyID0gc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScpO1xyXG4gICAgICAgIHN0ZXAyLmNyZWF0ZUVsKCdzdHJvbmcnLCB7IHRleHQ6ICdcdUQ1MDRcdUI4NUNcdUM4MURcdUQyQjggXHVDMTIwXHVEMEREL1x1QzBERFx1QzEzMTonIH0pO1xyXG4gICAgICAgIHN0ZXAyLmFwcGVuZFRleHQoJyBcdUFFMzBcdUM4NzQgXHVENTA0XHVCODVDXHVDODFEXHVEMkI4XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QUM3MFx1QjA5OCBcdUMwQzggXHVENTA0XHVCODVDXHVDODFEXHVEMkI4XHVCOTdDIFx1QzBERFx1QzEzMVx1RDU2OVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdGVwMyA9IHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuICAgICAgICBzdGVwMy5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnVGV4dC10by1TcGVlY2ggQVBJIFx1RDY1Q1x1QzEzMVx1RDY1NDonIH0pO1xyXG4gICAgICAgIHN0ZXAzLmFwcGVuZFRleHQoJyAnKTtcclxuICAgICAgICBjb25zdCBzdGVwM0xpbmsgPSBzdGVwMy5jcmVhdGVFbCgnYScsIHtcclxuICAgICAgICAgICAgdGV4dDogJ0FQSSBcdUI3N0NcdUM3NzRcdUJFMENcdUI3RUNcdUI5QUNcdUM1RDBcdUMxMUMgXHVENjVDXHVDMTMxXHVENjU0JyxcclxuICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vY29uc29sZS5jbG91ZC5nb29nbGUuY29tL2FwaXMvbGlicmFyeS90ZXh0dG9zcGVlY2guZ29vZ2xlYXBpcy5jb20nLFxyXG4gICAgICAgICAgICBhdHRyOiB7IHN0eWxlOiAnY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7JyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3RlcDNMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly9jb25zb2xlLmNsb3VkLmdvb2dsZS5jb20vYXBpcy9saWJyYXJ5L3RleHR0b3NwZWVjaC5nb29nbGVhcGlzLmNvbScsICdfYmxhbmsnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdGVwNCA9IHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuICAgICAgICBzdGVwNC5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnQVBJIFx1RDBBNCBcdUMwRERcdUMxMzE6JyB9KTtcclxuICAgICAgICBzdGVwNC5hcHBlbmRUZXh0KCcgXHVDMEFDXHVDNkE5XHVDNzkwIFx1Qzc3OFx1Qzk5RCBcdUM4MTVcdUJDRjQgPiBBUEkgXHVEMEE0ID4gXHVDMEM4IEFQSSBcdUQwQTQgXHVDMEREXHVDMTMxJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc3RlcDUgPSBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcbiAgICAgICAgc3RlcDUuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ0FQSSBcdUQwQTQgXHVDODFDXHVENTVDIFx1QzEyNFx1QzgxNSAoXHVBRDhDXHVDN0E1KTonIH0pO1xyXG4gICAgICAgIHN0ZXA1LmFwcGVuZFRleHQoJyBcdUQwQTQgXHVDODFDXHVENTVDID4gQVBJIFx1QzgxQ1x1RDU1QyA+IENsb3VkIFRleHQtdG8tU3BlZWNoIEFQSSBcdUMxMjBcdUQwREQnKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB3YXJuaW5nRWwgPSBndWlkZUVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxyXG4gICAgICAgICAgICBhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMTBweDsgcGFkZGluZzogOHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yLXJnYik7IGJvcmRlci1yYWRpdXM6IDNweDsgZm9udC1zaXplOiAwLjllbTsnIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB3YXJuaW5nRWwuYXBwZW5kVGV4dCgnXHUyNkEwXHVGRTBGICcpO1xyXG4gICAgICAgIHdhcm5pbmdFbC5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnXHVDOTExXHVDNjk0OicgfSk7XHJcbiAgICAgICAgd2FybmluZ0VsLmFwcGVuZFRleHQoJyBUZXh0LXRvLVNwZWVjaCBBUElcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUFDQkRcdUM2QjAgXCJBUElfS0VZX1NFUlZJQ0VfQkxPQ0tFRFwiIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XHJcblxyXG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBBUEkgXHVEMEE0IFx1QzEyNFx1QzgxNVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVEMEE0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0dvb2dsZSBDbG91ZCBUZXh0LXRvLVNwZWVjaCBBUEkgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC1hcGkta2V5LXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRLZXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0FwaUtleTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlY3J5cHRlZEtleSA9IGRlY3J5cHRBcGlLZXkoY3VycmVudEtleSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXNrZWRLZXkgPSBtYXNrQXBpS2V5KGRlY3J5cHRlZEtleSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdBSXphLi4uJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFza2VkS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBtYXNrZWRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZEtleSA9IGVuY3J5cHRBcGlLZXkodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNBcGlLZXkgPSBlbmNyeXB0ZWRLZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4JylcclxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUM1RjBcdUFDQjBcdUM3NDQgXHVEMTRDXHVDMkE0XHVEMkI4XHVENTY5XHVCMkM4XHVCMkU0JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzkxMS4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnRlc3RHb29nbGVDbG91ZENvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gR29vZ2xlIENsb3VkIFx1QzVCOFx1QzVCNCBcdUMxMjRcdUM4MTVcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QzVCOFx1QzVCNCBcdUNGNTRcdUI0REMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDMEFDXHVDNkE5XHVENTYwIFx1QzVCOFx1QzVCNCBcdUNGNTRcdUI0RENcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnZ29vZ2xlLWNsb3VkLWxhbmd1YWdlLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTJywgJ0VuZ2xpc2ggKFVTKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQicsICdFbmdsaXNoIChVSyknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tQVUnLCAnRW5nbGlzaCAoQVUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUlOJywgJ0VuZ2xpc2ggKEluZGlhKScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUdvb2dsZUNsb3VkVm9pY2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBcdUM3NENcdUMxMzEgXHVDMTIwXHVEMEREXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3NENcdUMxMzEgXHVDMTIwXHVEMEREJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0dvb2dsZSBDbG91ZCBUVFNcdUM1RDBcdUMxMUMgXHVDMEFDXHVDNkE5XHVENTYwIFx1Qzc0Q1x1QzEzMVx1Qzc0NCBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCdnb29nbGUtY2xvdWQtdm9pY2Utc2V0dGluZycpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVsYXRlR29vZ2xlQ2xvdWRWb2ljZURyb3Bkb3duKGRyb3Bkb3duKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c1ZvaWNlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAnKVxyXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ1x1QzEyMFx1RDBERFx1RDU1QyBcdUM3NENcdUMxMzFcdUM3M0NcdUI4NUMgXHVDMEQ4XHVENTBDIFx1RDE0RFx1QzJBNFx1RDJCOFx1Qjk3QyBcdUM3QUNcdUMwRERcdUQ1NjlcdUIyQzhcdUIyRTQnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUM3QUNcdUMwREQgXHVDOTExLi4uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGxheUdvb2dsZUNsb3VkVm9pY2VQcmV2aWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNzRDXHVDMTMxIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3NENcdUMxMzEgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVx1QjRFNFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVCOUQwXHVENTU4XHVBRTMwIFx1QzE4RFx1QjNDNCAoU3BlYWtpbmcgUmF0ZSknKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxXHVDNzU4IFx1QjlEMFx1RDU1OFx1QUUzMCBcdUMxOERcdUIzQzRcdUI5N0MgXHVDODcwXHVDODA4XHVENTY5XHVCMkM4XHVCMkU0LiAoMC4yNSA9IFx1QjI5MFx1QjlCQywgNC4wID0gXHVCRTYwXHVCOTg0KScpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnZ29vZ2xlLWNsb3VkLXNwZWFraW5nLXJhdGUtc2V0dGluZycpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLjI1LCA0LjAsIDAuMjUpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNTcGVha2luZ1JhdGUpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTU3BlYWtpbmdSYXRlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNzRDXHVDMTMxIFx1QjE5Mlx1QjBBRVx1Qzc3NCAoUGl0Y2gpJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1Qzc0Q1x1QzEzMVx1Qzc1OCBcdUIxOTJcdUIwQUVcdUM3NzRcdUI5N0MgXHVDODcwXHVDODA4XHVENTY5XHVCMkM4XHVCMkU0LiAoLTIwLjAgPSBcdUIwQUVcdUM3NEMsIDIwLjAgPSBcdUIxOTJcdUM3NEMpJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCdnb29nbGUtY2xvdWQtcGl0Y2gtc2V0dGluZycpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygtMjAuMCwgMjAuMCwgMS4wKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTUGl0Y2gpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTUGl0Y2ggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBvcHVsYXRlR29vZ2xlQ2xvdWRWb2ljZURyb3Bkb3duKGRyb3Bkb3duOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBsYW5ndWFnZUNvZGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAobGFuZ3VhZ2VDb2RlID09PSAnZW4tVVMnKSB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1Kb3VybmV5LUQnLCAnSm91cm5leS1EIChNYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1Kb3VybmV5LUYnLCAnSm91cm5leS1GIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLUpvdXJuZXktTycsICdKb3VybmV5LU8gKE1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItQScsICdOZXVyYWwyLUEgKE1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItQycsICdOZXVyYWwyLUMgKEZlbWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1EJywgJ05ldXJhbDItRCAoTWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1FJywgJ05ldXJhbDItRSAoRmVtYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUYnLCAnTmV1cmFsMi1GIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItRycsICdOZXVyYWwyLUcgKEZlbWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1IJywgJ05ldXJhbDItSCAoRmVtYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUknLCAnTmV1cmFsMi1JIChNYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUonLCAnTmV1cmFsMi1KIChNYWxlKScpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobGFuZ3VhZ2VDb2RlID09PSAnZW4tR0InKSB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQi1OZXVyYWwyLUEnLCAnTmV1cmFsMi1BIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUdCLU5ldXJhbDItQicsICdOZXVyYWwyLUIgKE1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUdCLU5ldXJhbDItQycsICdOZXVyYWwyLUMgKEZlbWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tR0ItTmV1cmFsMi1EJywgJ05ldXJhbDItRCAoTWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tR0ItTmV1cmFsMi1GJywgJ05ldXJhbDItRiAoRmVtYWxlKScpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobGFuZ3VhZ2VDb2RlID09PSAnZW4tQVUnKSB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1BVS1OZXVyYWwyLUEnLCAnTmV1cmFsMi1BIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUFVLU5ldXJhbDItQicsICdOZXVyYWwyLUIgKE1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUFVLU5ldXJhbDItQycsICdOZXVyYWwyLUMgKEZlbWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tQVUtTmV1cmFsMi1EJywgJ05ldXJhbDItRCAoTWFsZSknKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ2VuLVVTLUpvdXJuZXktRicsICdKb3VybmV5LUYgKEZlbWFsZSknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVHb29nbGVDbG91ZFZvaWNlcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB2b2ljZURyb3Bkb3duID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuZ29vZ2xlLWNsb3VkLXZvaWNlLXNldHRpbmcgc2VsZWN0JykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHZvaWNlRHJvcGRvd24pIHtcclxuICAgICAgICAgICAgdm9pY2VEcm9wZG93bi5lbXB0eSgpO1xyXG4gICAgICAgICAgICBjb25zdCBkcm9wZG93biA9IHsgYWRkT3B0aW9uOiAodmFsdWU6IHN0cmluZywgdGV4dDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnRleHQgPSB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgdm9pY2VEcm9wZG93bi5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgICAgICB9fTtcclxuICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUdvb2dsZUNsb3VkVm9pY2VEcm9wZG93bihkcm9wZG93bik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUFFMzBcdUJDRjggXHVDNzRDXHVDMTMxIFx1QzEyNFx1QzgxNVxyXG4gICAgICAgICAgICBjb25zdCBsYW5ndWFnZUNvZGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZTtcclxuICAgICAgICAgICAgbGV0IGRlZmF1bHRWb2ljZSA9ICdlbi1VUy1Kb3VybmV5LUYnO1xyXG4gICAgICAgICAgICBpZiAobGFuZ3VhZ2VDb2RlID09PSAnZW4tR0InKSBkZWZhdWx0Vm9pY2UgPSAnZW4tR0ItTmV1cmFsMi1BJztcclxuICAgICAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2VDb2RlID09PSAnZW4tQVUnKSBkZWZhdWx0Vm9pY2UgPSAnZW4tQVUtTmV1cmFsMi1BJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZvaWNlRHJvcGRvd24udmFsdWUgPSBkZWZhdWx0Vm9pY2U7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c1ZvaWNlID0gZGVmYXVsdFZvaWNlO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVUVFNQcm92aWRlclNldHRpbmdzKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzUHJvdmlkZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2hhdHRlcmJveFNldHRpbmdzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhdHRlcmJveC1hcGktdXJsLXNldHRpbmcsIC5jaGF0dGVyYm94LXZvaWNlLXNldHRpbmcsIC5jaGF0dGVyYm94LWV4YWdnZXJhdGlvbi1zZXR0aW5nLCAuY2hhdHRlcmJveC1jZmctc2V0dGluZywgLmNoYXR0ZXJib3gtdGVtcGVyYXR1cmUtc2V0dGluZycpO1xyXG4gICAgICAgIGNvbnN0IGdvb2dsZUNsb3VkU2V0dGluZ3MgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5nb29nbGUtY2xvdWQtdHRzLWd1aWRlLCAuZ29vZ2xlLWNsb3VkLWFwaS1rZXktc2V0dGluZywgLmdvb2dsZS1jbG91ZC1sYW5ndWFnZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXZvaWNlLXNldHRpbmcsIC5nb29nbGUtY2xvdWQtc3BlYWtpbmctcmF0ZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXBpdGNoLXNldHRpbmcnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUJBQThcdUI0RTAgXHVDMTI0XHVDODE1IFx1QzIyOFx1QUU0MFxyXG4gICAgICAgIGNoYXR0ZXJib3hTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmcgPT4ge1xyXG4gICAgICAgICAgICAoc2V0dGluZyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9KTtcclxuICAgICAgICBnb29nbGVDbG91ZFNldHRpbmdzLmZvckVhY2goc2V0dGluZyA9PiB7XHJcbiAgICAgICAgICAgIChzZXR0aW5nIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzEyMFx1RDBERFx1QjQxQyBcdUM4MUNcdUFDRjVcdUM3OTBcdUM3NTggXHVDMTI0XHVDODE1XHVCOUNDIFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgIGlmIChwcm92aWRlciA9PT0gJ2NoYXR0ZXJib3gnKSB7XHJcbiAgICAgICAgICAgIGNoYXR0ZXJib3hTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgKHNldHRpbmcgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwcm92aWRlciA9PT0gJ2dvb2dsZS1jbG91ZCcpIHtcclxuICAgICAgICAgICAgZ29vZ2xlQ2xvdWRTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgKHNldHRpbmcgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcGxheUNoYXR0ZXJib3hWb2ljZVByZXZpZXcoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgc2FtcGxlVGV4dHMgPSBbXHJcbiAgICAgICAgICAgICAgICAnSGVsbG8sIHRoaXMgaXMgYSBzYW1wbGUgdm9pY2UgcHJldmlldy4nLFxyXG4gICAgICAgICAgICAgICAgJ1dlbGNvbWUgdG8gRW5nbGlzaCB2b2NhYnVsYXJ5IGxlYXJuaW5nLicsXHJcbiAgICAgICAgICAgICAgICAnVGhpcyB2b2ljZSB3aWxsIGhlbHAgeW91IGxlYXJuIHByb251bmNpYXRpb24uJyxcclxuICAgICAgICAgICAgICAgICdCZWF1dGlmdWwgd29yZHMgbWFrZSBiZWF1dGlmdWwgc2VudGVuY2VzLidcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbVRleHQgPSBzYW1wbGVUZXh0c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzYW1wbGVUZXh0cy5sZW5ndGgpXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveEFwaVVybH0vdjEvYXVkaW8vc3BlZWNoYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHJhbmRvbVRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgdm9pY2U6IHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c1ZvaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4YWdnZXJhdGlvbjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveEV4YWdnZXJhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjZmdfd2VpZ2h0OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94Q2ZnV2VpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94VGVtcGVyYXR1cmVcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDaGF0dGVyYm94IFRUUyBBUEkgXHVDNjI0XHVCOTU4OiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChhdWRpb0Jsb2IpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgYXVkaW8gPSBuZXcgQXVkaW8oYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGF1ZGlvLm9uZW5kZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzRDXHVDMTMxIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2NDRcdUI4Q0MhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYXVkaW8ub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGF1ZGlvLnBsYXkoKS5jYXRjaChyZWplY3QpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2hhdHRlcmJveCBUVFMgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzBcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODRcdUFDMDAgXHVDMkU0XHVENTg5IFx1QzkxMVx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHBsYXlHb29nbGVDbG91ZFZvaWNlUHJldmlldygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBzYW1wbGVUZXh0cyA9IFtcclxuICAgICAgICAgICAgICAgICdIZWxsbywgdGhpcyBpcyBhIHNhbXBsZSB2b2ljZSBwcmV2aWV3LicsXHJcbiAgICAgICAgICAgICAgICAnV2VsY29tZSB0byBFbmdsaXNoIHZvY2FidWxhcnkgbGVhcm5pbmcuJyxcclxuICAgICAgICAgICAgICAgICdUaGlzIHZvaWNlIHdpbGwgaGVscCB5b3UgbGVhcm4gcHJvbnVuY2lhdGlvbi4nLFxyXG4gICAgICAgICAgICAgICAgJ0JlYXV0aWZ1bCB3b3JkcyBtYWtlIGJlYXV0aWZ1bCBzZW50ZW5jZXMuJ1xyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmFuZG9tVGV4dCA9IHNhbXBsZVRleHRzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNhbXBsZVRleHRzLmxlbmd0aCldO1xyXG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSBkZWNyeXB0QXBpS2V5KHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTQXBpS2V5KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghYXBpS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dvb2dsZSBDbG91ZCBUVFMgQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcclxuICAgICAgICAgICAgICAgIGlucHV0OiB7IHRleHQ6IHJhbmRvbVRleHQgfSxcclxuICAgICAgICAgICAgICAgIHZvaWNlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGF1ZGlvQ29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9FbmNvZGluZzogJ01QMycsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BlYWtpbmdSYXRlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU1NwZWFraW5nUmF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwaXRjaDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNQaXRjaFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcclxuICAgICAgICAgICAgICAgIHVybDogYGh0dHBzOi8vdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tL3YxL3RleHQ6c3ludGhlc2l6ZT9rZXk9JHthcGlLZXl9YCxcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UudGV4dCB8fCAne30nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbGVkRXJyb3IgPSB0aGlzLmdldERldGFpbGVkR29vZ2xlQ2xvdWRFcnJvcihyZXNwb25zZS5zdGF0dXMsIGVycm9yRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGV0YWlsZWRFcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQpO1xyXG4gICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSB0aGlzLmJhc2U2NFRvQmxvYihkYXRhLmF1ZGlvQ29udGVudCwgJ2F1ZGlvL21wMycpO1xyXG4gICAgICAgICAgICBjb25zdCBhdWRpb1VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYXVkaW9CbG9iKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKGF1ZGlvVXJsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVuZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAgXHVDNjQ0XHVCOENDIScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGF1ZGlvLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhdWRpby5wbGF5KCkuY2F0Y2gocmVqZWN0KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBDbG91ZCBUVFMgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdBUElcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNCcpKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3NEMgJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0FQSSBcdUQwQTQnKSkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdUM3NENcdUMxMzEgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gQVBJIFx1RDBBNFx1QzY0MCBcdUM3NzhcdUQxMzBcdUIxMzcgXHVDNUYwXHVBQ0IwXHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiYXNlNjRUb0Jsb2IoYmFzZTY0OiBzdHJpbmcsIG1pbWVUeXBlOiBzdHJpbmcpOiBCbG9iIHtcclxuICAgICAgICBjb25zdCBieXRlQ2hhcmFjdGVycyA9IGF0b2IoYmFzZTY0KTtcclxuICAgICAgICBjb25zdCBieXRlTnVtYmVycyA9IG5ldyBBcnJheShieXRlQ2hhcmFjdGVycy5sZW5ndGgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZUNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYnl0ZU51bWJlcnNbaV0gPSBieXRlQ2hhcmFjdGVycy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBieXRlQXJyYXkgPSBuZXcgVWludDhBcnJheShieXRlTnVtYmVycyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtieXRlQXJyYXldLCB7IHR5cGU6IG1pbWVUeXBlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgdGVzdEdvb2dsZUNsb3VkQ29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSBkZWNyeXB0QXBpS2V5KHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTQXBpS2V5KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghYXBpS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVEMEE0XHVCOTdDIFx1QkEzQ1x1QzgwMCBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGBodHRwczovL3RleHR0b3NwZWVjaC5nb29nbGVhcGlzLmNvbS92MS90ZXh0OnN5bnRoZXNpemU/a2V5PSR7YXBpS2V5fWAsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dDogeyB0ZXh0OiAnQ29ubmVjdGlvbiB0ZXN0JyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHZvaWNlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogJ2VuLVVTJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2VuLVVTLUpvdXJuZXktRidcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvQ29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvRW5jb2Rpbmc6ICdNUDMnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzIDwgNDAwKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNSEnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UudGV4dCB8fCAne30nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbGVkRXJyb3IgPSB0aGlzLmdldERldGFpbGVkR29vZ2xlQ2xvdWRFcnJvcihyZXNwb25zZS5zdGF0dXMsIGVycm9yRGF0YSk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3NEMgJHtkZXRhaWxlZEVycm9yfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIENsb3VkIFRUUyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdmZXRjaCcpKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHVDNzc4XHVEMTMwXHVCMTM3IFx1QzVGMFx1QUNCMFx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3NEMgJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGV0YWlsZWRHb29nbGVDbG91ZEVycm9yKHN0YXR1czogbnVtYmVyLCBlcnJvckRhdGE6IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGVycm9yRGF0YT8uZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBlcnJvckRhdGEuZXJyb3I7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBUElcdUFDMDAgXHVDQzI4XHVCMkU4XHVCNDFDIFx1QUNCRFx1QzZCMCAoNDAzIFBFUk1JU1NJT05fREVOSUVEIHdpdGggQVBJX0tFWV9TRVJWSUNFX0JMT0NLRUQpXHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMyAmJiBlcnJvci5kZXRhaWxzPy5zb21lKChkZXRhaWw6IGFueSkgPT4gXHJcbiAgICAgICAgICAgICAgICBkZXRhaWwucmVhc29uID09PSAnQVBJX0tFWV9TRVJWSUNFX0JMT0NLRUQnIHx8IFxyXG4gICAgICAgICAgICAgICAgZGV0YWlsWydAdHlwZSddPy5pbmNsdWRlcygnRXJyb3JJbmZvJykgJiYgZGV0YWlsLnJlYXNvbiA9PT0gJ0FQSV9LRVlfU0VSVklDRV9CTE9DS0VEJ1xyXG4gICAgICAgICAgICApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1RleHQtdG8tU3BlZWNoIEFQSVx1QUMwMCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUM3MDRcdUM3NTggXHVBQzAwXHVDNzc0XHVCNERDXHVCOTdDIFx1Q0MzOFx1QUNFMFx1RDU1OFx1QzVFQyBBUElcdUI5N0MgXHVENjVDXHVDMTMxXHVENjU0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFQSSBcdUQwQTQgXHVBRDAwXHVCODI4IFx1QzYyNFx1Qjk1OFx1QjRFNFxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnQVBJIGtleSBub3QgdmFsaWQnKSB8fCBlcnJvci5jb2RlID09PSAnSU5WQUxJRF9BUkdVTUVOVCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0FQSSBcdUQwQTRcdUFDMDAgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC4gXHVEMEE0XHVCOTdDIFx1QjJFNFx1QzJEQyBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygncXVvdGEnKSB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnUVVPVEFfRVhDRUVERUQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnQVBJIFx1RDU2MFx1QjJGOVx1QjdDOVx1Qzc3NCBcdUNEMDhcdUFDRkNcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuIEdvb2dsZSBDbG91ZCBDb25zb2xlXHVDNUQwXHVDMTFDIFx1RDU2MFx1QjJGOVx1QjdDOVx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiAnQVBJIFx1QzgxMVx1QURGQ1x1Qzc3NCBcdUFDNzBcdUJEODBcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTQgXHVBRDhDXHVENTVDXHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUM3NzhcdUM5OUQgXHVDNjI0XHVCOTU4ICg0MDEpXHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdBUEkgXHVEMEE0IFx1Qzc3OFx1Qzk5RFx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTRcdUFDMDAgXHVDNjJDXHVCQzE0XHVCOTc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUM2OTRcdUNDQUQgXHVDNjI0XHVCOTU4ICg0MDApXHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdBUEkgXHVDNjk0XHVDQ0FEXHVDNzc0IFx1Qzc5OFx1QkFCQlx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDNzRDXHVDMTMxIFx1QzEyNFx1QzgxNVx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDMTFDXHVCRTQ0XHVDMkE0IFx1QzBBQ1x1QzZBOSBcdUJEODhcdUFDMDAgKDUwMylcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNTAzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0XHVBQzAwIFx1Qzc3Q1x1QzJEQ1x1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDN0EwXHVDMkRDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBgQVBJIFx1QzYyNFx1Qjk1OCAoJHtzdGF0dXN9KTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTgnfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBgQVBJIFx1QzYyNFx1Qjk1ODogJHtzdGF0dXN9IFx1QzBDMVx1RDBEQyBcdUNGNTRcdUI0RENgO1xyXG4gICAgfVxyXG5cclxufSAiLCAiLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQvXHVCQ0Y1XHVENjM4XHVENjU0IFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMCAoV2ViIENyeXB0byBBUEkgXHVDMEFDXHVDNkE5KVxyXG5cclxuLy8gXHVEM0M5XHVCQjM4IEFQSSBcdUQwQTRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTU4XHVCMjk0IFx1RDVFQ1x1RDM3QyBcdUQ1NjhcdUMyMThcclxuZnVuY3Rpb24gaXNQbGFpblRleHRBcGlLZXkoYXBpS2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGlmICghYXBpS2V5KSByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgIC8vIFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBBUEkgXHVEMEE0IFx1RDMyOFx1RDEzNFx1QjRFNFxyXG4gICAgY29uc3QgYXBpS2V5UGF0dGVybnMgPSBbXHJcbiAgICAgICAgL15zay1bYS16QS1aMC05XXszMix9JC8sICAgICAgICAgICAvLyBPcGVuQUkgQVBJIFx1RDBBNFxyXG4gICAgICAgIC9ec2stYW50LVthLXpBLVowLTktX117OTV9JC8sICAgICAgLy8gQW50aHJvcGljIEFQSSBcdUQwQTRcclxuICAgICAgICAvXkFJemFbYS16QS1aMC05LV9dezM1fSQvLCAgICAgICAgIC8vIEdvb2dsZSBBUEkgXHVEMEE0XHJcbiAgICAgICAgL15bYS16QS1aMC05LV9dezIwLH0kLyAgICAgICAgICAgICAvLyBcdUM3N0NcdUJDMThcdUM4MDFcdUM3NzggXHVBRTM0IFx1RDFBMFx1RDA3MFxyXG4gICAgXTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGFwaUtleVBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoYXBpS2V5KSk7XHJcbn1cclxuXHJcbi8vIFx1QzU0OFx1QzgwNFx1RDU1QyBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI5N0MgXHVDNzA0XHVENTVDIFx1RDBBNCBcdUMwRERcdUMxMzFcclxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVFbmNyeXB0aW9uS2V5KCk6IFByb21pc2U8Q3J5cHRvS2V5PiB7XHJcbiAgICAvLyBcdUMwQUNcdUM2QTlcdUM3OTBcdUJDQzQgXHVBQ0UwXHVDNzIwIFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFFMzBcdUJDMThcdUM3M0NcdUI4NUMgXHVEMEE0IFx1QzBERFx1QzEzMVxyXG4gICAgY29uc3QgcGx1Z2luSWQgPSAnb2JzaWRpYW4tZW5nbGlzaC12b2NhYnVsYXJ5JztcclxuICAgIGNvbnN0IHZlcnNpb24gPSAnMC4xJztcclxuICAgIGNvbnN0IHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XHJcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XHJcbiAgICBcclxuICAgIC8vIFx1RDBBNCBcdUM3QUNcdUI4Q0MgXHVDMEREXHVDMTMxXHJcbiAgICBjb25zdCBrZXlNYXRlcmlhbCA9IHBsdWdpbklkICsgdmVyc2lvbiArIHVzZXJBZ2VudCArIHRpbWVzdGFtcDtcclxuICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcclxuICAgIGNvbnN0IGtleURhdGEgPSBlbmNvZGVyLmVuY29kZShrZXlNYXRlcmlhbCk7XHJcbiAgICBcclxuICAgIC8vIFdlYiBDcnlwdG8gQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU1QyBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVEMEE0IFx1QjNDNFx1Q0Q5Q1xyXG4gICAgY29uc3QgYmFzZUtleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KFxyXG4gICAgICAgICdyYXcnLFxyXG4gICAgICAgIGtleURhdGEsXHJcbiAgICAgICAgeyBuYW1lOiAnUEJLREYyJyB9LFxyXG4gICAgICAgIGZhbHNlLFxyXG4gICAgICAgIFsnZGVyaXZlQml0cycsICdkZXJpdmVLZXknXVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgLy8gUEJLREYyXHVCODVDIFx1QUMxNVx1QjgyNVx1RDU1QyBcdUQwQTQgXHVCM0M0XHVDRDlDXHJcbiAgICBjb25zdCBkZXJpdmVkS2V5ID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kZXJpdmVLZXkoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnUEJLREYyJyxcclxuICAgICAgICAgICAgc2FsdDogZW5jb2Rlci5lbmNvZGUoJ29ic2lkaWFuLXZvY2FidWxhcnktc2FsdC0yMDI0JyksXHJcbiAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEwMDAwMCxcclxuICAgICAgICAgICAgaGFzaDogJ1NIQS0yNTYnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBiYXNlS2V5LFxyXG4gICAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBsZW5ndGg6IDI1NiB9LFxyXG4gICAgICAgIGZhbHNlLFxyXG4gICAgICAgIFsnZW5jcnlwdCcsICdkZWNyeXB0J11cclxuICAgICk7XHJcbiAgICBcclxuICAgIHJldHVybiBkZXJpdmVkS2V5O1xyXG59XHJcblxyXG4vLyBXZWIgQ3J5cHRvIEFQSVx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NUMgXHVDNTQ4XHVDODA0XHVENTVDIFx1QzU1NFx1RDYzOFx1RDY1NCAoQXN5bmMpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNyeXB0QXBpS2V5QXN5bmMoYXBpS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgaWYgKCFhcGlLZXkpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgLy8gXHVDNzc0XHVCQkY4IFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUQwQTRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHJcbiAgICBpZiAoIWlzUGxhaW5UZXh0QXBpS2V5KGFwaUtleSkpIHtcclxuICAgICAgICByZXR1cm4gYXBpS2V5OyAvLyBcdUM3NzRcdUJCRjggXHVDNTU0XHVENjM4XHVENjU0XHVCNDFDIFx1QUM4M1x1QzczQ1x1Qjg1QyBcdUFDMDRcdUM4RkNcdUQ1NThcdUFDRTAgXHVBREY4XHVCMzAwXHVCODVDIFx1QkMxOFx1RDY1OFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IGdlbmVyYXRlRW5jcnlwdGlvbktleSgpO1xyXG4gICAgICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcclxuICAgICAgICBjb25zdCBkYXRhID0gZW5jb2Rlci5lbmNvZGUoYXBpS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUI3OUNcdUIzNjQgSVYgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgY29uc3QgaXYgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEyKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQUVTLUdDTSBcdUM1NTRcdUQ2MzhcdUQ2NTRcclxuICAgICAgICBjb25zdCBlbmNyeXB0ZWQgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmVuY3J5cHQoXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBpdjogaXYgfSxcclxuICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICBkYXRhXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJVlx1QzY0MCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1QUNCMFx1RDU2OVx1RDU1OFx1QzVFQyBCYXNlNjQgXHVDNzc4XHVDRjU0XHVCNTI5XHJcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkQXJyYXkgPSBuZXcgVWludDhBcnJheShlbmNyeXB0ZWQpO1xyXG4gICAgICAgIGNvbnN0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkoaXYubGVuZ3RoICsgZW5jcnlwdGVkQXJyYXkubGVuZ3RoKTtcclxuICAgICAgICBjb21iaW5lZC5zZXQoaXYpO1xyXG4gICAgICAgIGNvbWJpbmVkLnNldChlbmNyeXB0ZWRBcnJheSwgaXYubGVuZ3RoKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmNvbWJpbmVkKSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QkU0NFx1QjNEOVx1QUUzMCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4OicsIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XHJcbiAgICAgICAgLy8gXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUIzRDlcdUFFMzAgXHVDNTU0XHVENjM4XHVENjU0XHVCODVDIFx1RDNGNFx1QkMzMVxyXG4gICAgICAgIHJldHVybiBlbmNyeXB0QXBpS2V5KGFwaUtleSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWNyeXB0QXBpS2V5QXN5bmMoZW5jcnlwdGVkQXBpS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgaWYgKCFlbmNyeXB0ZWRBcGlLZXkpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgLy8gXHVEM0M5XHVCQjM4IEFQSSBcdUQwQTRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4IChcdUM3N0NcdUJDMThcdUM4MDFcdUM3NzggQVBJIFx1RDBBNCBcdUQzMjhcdUQxMzQpXHJcbiAgICBpZiAoaXNQbGFpblRleHRBcGlLZXkoZW5jcnlwdGVkQXBpS2V5KSkge1xyXG4gICAgICAgIHJldHVybiBlbmNyeXB0ZWRBcGlLZXk7IC8vIFx1RDNDOVx1QkIzOFx1Qzc3NFx1QkE3NCBcdUFERjhcdUIzMDBcdUI4NUMgXHVCQzE4XHVENjU4XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgZ2VuZXJhdGVFbmNyeXB0aW9uS2V5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQmFzZTY0IFx1QjUxNFx1Q0Y1NFx1QjUyOVxyXG4gICAgICAgIGNvbnN0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkoXHJcbiAgICAgICAgICAgIGF0b2IoZW5jcnlwdGVkQXBpS2V5KVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcnKVxyXG4gICAgICAgICAgICAgICAgLm1hcChjaGFyID0+IGNoYXIuY2hhckNvZGVBdCgwKSlcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIElWXHVDNjQwIFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCRDg0XHVCOUFDXHJcbiAgICAgICAgY29uc3QgaXYgPSBjb21iaW5lZC5zbGljZSgwLCAxMik7XHJcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkID0gY29tYmluZWQuc2xpY2UoMTIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFFUy1HQ00gXHVCQ0Y1XHVENjM4XHVENjU0XHJcbiAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kZWNyeXB0KFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdBRVMtR0NNJywgaXY6IGl2IH0sXHJcbiAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgZW5jcnlwdGVkXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XHJcbiAgICAgICAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGRlY3J5cHRlZCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIGF0b2IgXHVDMkU0XHVEMzI4XHVENTU4XHVBQzcwXHVCMDk4IFx1QkNGNVx1RDYzOFx1RDY1NCBcdUMyRTRcdUQzMjhcdUQ1NThcdUJBNzQgXHVEM0M5XHVCQjM4XHVDNzdDIFx1QUMwMFx1QjJBNVx1QzEzMVx1Qzc3NCBcdUIxOTJcdUM3NENcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1x1QkU0NFx1QjNEOVx1QUUzMCBcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4LCBcdUQzQzlcdUJCMzhcdUM3M0NcdUI4NUMgXHVBQzA0XHVDOEZDOicsIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIGVuY3J5cHRlZEFwaUtleTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVCM0Q5XHVBRTMwXHVDMkREIFx1RDYzOFx1RDY1OFx1QzEzMVx1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVCNzk4XHVEMzdDIFx1RDU2OFx1QzIxOFx1QjRFNCAoTGVnYWN5KVxyXG5leHBvcnQgZnVuY3Rpb24gZW5jcnlwdEFwaUtleShhcGlLZXk6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAoIWFwaUtleSkgcmV0dXJuICcnO1xyXG4gICAgXHJcbiAgICAvLyBcdUM3NzRcdUJCRjggXHVDNTU0XHVENjM4XHVENjU0XHVCNDFDIFx1RDBBNFx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcclxuICAgIGlmICghaXNQbGFpblRleHRBcGlLZXkoYXBpS2V5KSkge1xyXG4gICAgICAgIHJldHVybiBhcGlLZXk7IC8vIFx1Qzc3NFx1QkJGOCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVBQzgzXHVDNzNDXHVCODVDIFx1QUMwNFx1QzhGQ1x1RDU1OFx1QUNFMCBcdUFERjhcdUIzMDBcdUI4NUMgXHVCQzE4XHVENjU4XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1QkU0NFx1QjNEOVx1QUUzMCBcdUQ1NjhcdUMyMThcdUI5N0MgXHVCM0Q5XHVBRTMwXHVDODAxXHVDNzNDXHVCODVDIFx1QzBBQ1x1QzZBOVx1RDU1OFx1QUUzMCBcdUM3MDRcdUQ1NUMgXHVEM0Y0XHVCQzMxXHJcbiAgICAvLyBcdUMyRTRcdUM4MUNcdUI4NUNcdUIyOTQgXHVCRTQ0XHVCM0Q5XHVBRTMwIFx1QkM4NFx1QzgwNFx1Qzc0NCBcdUMwQUNcdUM2QTlcdUQ1NThcdUIyOTQgXHVBQzgzXHVDNzQ0IFx1QUQ4Q1x1QzdBNVxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBcdUFDMDRcdUIyRThcdUQ1NUMgWE9SIFx1QzU1NFx1RDYzOFx1RDY1NCAoXHVENjM4XHVENjU4XHVDMTMxXHVDNkE5KVxyXG4gICAgICAgIGNvbnN0IGtleSA9ICdvYnNpZGlhbi12b2NhYi10ZW1wLWtleS0yMDI0JztcclxuICAgICAgICBsZXQgZW5jcnlwdGVkID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcGlLZXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY2hhckNvZGUgPSBhcGlLZXkuY2hhckNvZGVBdChpKSBeIGtleS5jaGFyQ29kZUF0KGkgJSBrZXkubGVuZ3RoKTtcclxuICAgICAgICAgICAgZW5jcnlwdGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnRvYShlbmNyeXB0ZWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIzRDlcdUFFMzAgXHVDNTU0XHVENjM4XHVENjU0IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVjcnlwdEFwaUtleShlbmNyeXB0ZWRBcGlLZXk6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAoIWVuY3J5cHRlZEFwaUtleSkgcmV0dXJuICcnO1xyXG4gICAgXHJcbiAgICAvLyBcdUQzQzlcdUJCMzggQVBJIFx1RDBBNFx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzggKFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBBUEkgXHVEMEE0IFx1RDMyOFx1RDEzNClcclxuICAgIGlmIChpc1BsYWluVGV4dEFwaUtleShlbmNyeXB0ZWRBcGlLZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGVuY3J5cHRlZEFwaUtleTsgLy8gXHVEM0M5XHVCQjM4XHVDNzc0XHVCQTc0IFx1QURGOFx1QjMwMFx1Qjg1QyBcdUJDMThcdUQ2NThcclxuICAgIH1cclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBrZXkgPSAnb2JzaWRpYW4tdm9jYWItdGVtcC1rZXktMjAyNCc7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGF0b2IoZW5jcnlwdGVkQXBpS2V5KTtcclxuICAgICAgICBsZXQgZGVjcnlwdGVkID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWNvZGVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXJDb2RlID0gZGVjb2RlZC5jaGFyQ29kZUF0KGkpIF4ga2V5LmNoYXJDb2RlQXQoaSAlIGtleS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBkZWNyeXB0ZWQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkZWNyeXB0ZWQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIGF0b2IgXHVDMkU0XHVEMzI4XHVENTU4XHVCQTc0IFx1RDNDOVx1QkIzOFx1Qzc3QyBcdUFDMDBcdUIyQTVcdUMxMzFcdUM3NzQgXHVCMTkyXHVDNzRDXHJcbiAgICAgICAgY29uc29sZS53YXJuKCdcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4LCBcdUQzQzlcdUJCMzhcdUM3M0NcdUI4NUMgXHVBQzA0XHVDOEZDOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiBlbmNyeXB0ZWRBcGlLZXk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEFQSSBcdUQwQTRcdUI5N0MgXHVCOUM4XHVDMkE0XHVEMEI5XHVENTU4XHVDNUVDIFx1RDQ1Q1x1QzJEQ1xyXG5leHBvcnQgZnVuY3Rpb24gbWFza0FwaUtleShhcGlLZXk6IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGwpOiBzdHJpbmcge1xyXG4gICAgLy8gbnVsbCwgdW5kZWZpbmVkLCBcdUJFNDggXHVCQjM4XHVDNzkwXHVDNUY0IFx1Q0NCNFx1RDA2Q1xyXG4gICAgaWYgKCFhcGlLZXkgfHwgdHlwZW9mIGFwaUtleSAhPT0gJ3N0cmluZycpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgLy8gXHVCQjM4XHVDNzkwXHVDNUY0IFx1QUUzOFx1Qzc3NFx1QUMwMCA4IFx1Qzc3NFx1RDU1OFx1Qzc3OCBcdUFDQkRcdUM2QjBcclxuICAgIGlmIChhcGlLZXkubGVuZ3RoIDw9IDgpIHJldHVybiAnKicucmVwZWF0KGFwaUtleS5sZW5ndGgpO1xyXG4gICAgXHJcbiAgICAvLyBcdUM4MTVcdUMwQzFcdUM4MDFcdUM3NzggXHVCOUM4XHVDMkE0XHVEMEI5IFx1Q0M5OFx1QjlBQ1xyXG4gICAgcmV0dXJuIGFwaUtleS5zdWJzdHJpbmcoMCwgNCkgKyAnKicucmVwZWF0KGFwaUtleS5sZW5ndGggLSA4KSArIGFwaUtleS5zdWJzdHJpbmcoYXBpS2V5Lmxlbmd0aCAtIDQpO1xyXG59XHJcblxyXG4vLyBcdUIwQTBcdUM5REMgXHVEM0VDXHVCOUY3XHVEMzA1IFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMFxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlU3RyaW5nOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcclxuICAgIGlmICghZGF0ZVN0cmluZykge1xyXG4gICAgICAgIHJldHVybiAnXHVDNUM2XHVDNzRDJztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XHJcbiAgICBcclxuICAgIGlmIChpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcclxuICAgICAgICByZXR1cm4gJ1x1Qzc5OFx1QkFCQlx1QjQxQyBcdUIwQTBcdUM5REMnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygna28tS1InLCB7XHJcbiAgICAgICAgeWVhcjogJ251bWVyaWMnLFxyXG4gICAgICAgIG1vbnRoOiAnbG9uZycsXHJcbiAgICAgICAgZGF5OiAnbnVtZXJpYydcclxuICAgIH0pO1xyXG59ICIsICIvLyBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzggXHVDMTI0XHVDODE1IFx1QzBDMVx1QzIxOCBcdUJDMEYgXHVBRDZDXHVDMTMxXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBsdWdpbkNvbmZpZyB7XHJcbiAgICAvLyBBUEkgXHVBRDAwXHVCODI4IFx1QzEyNFx1QzgxNVxyXG4gICAgYXBpOiB7XHJcbiAgICAgICAgdGltZW91dHM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVtYmVyO1xyXG4gICAgICAgICAgICBsbG06IG51bWJlcjtcclxuICAgICAgICAgICAgdHRzOiBudW1iZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXRyaWVzOiB7XHJcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGRlbGF5TXM6IG51bWJlcjtcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiBib29sZWFuO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmF0ZUxpbWl0aW5nOiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RzUGVyTWludXRlOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGJ1cnN0TGltaXQ6IG51bWJlcjtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBcdUJDMzBcdUNFNTggXHVDQzk4XHVCOUFDIFx1QzEyNFx1QzgxNVxyXG4gICAgYmF0Y2g6IHtcclxuICAgICAgICBkZWZhdWx0U2l6ZTogbnVtYmVyO1xyXG4gICAgICAgIG1heFNpemU6IG51bWJlcjtcclxuICAgICAgICBkZWxheUJldHdlZW5CYXRjaGVzOiBudW1iZXI7XHJcbiAgICAgICAgbWF4Q29uY3VycmVudEJhdGNoZXM6IG51bWJlcjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QUQwMFx1QjgyOCBcdUMxMjRcdUM4MTVcclxuICAgIGF1ZGlvOiB7XHJcbiAgICAgICAgbWF4UG9vbFNpemU6IG51bWJlcjtcclxuICAgICAgICBhdXRvQ2xlYW51cFRpbWVvdXRNczogbnVtYmVyO1xyXG4gICAgICAgIG1heER1cmF0aW9uTXM6IG51bWJlcjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QzEyNFx1QzgxNVxyXG4gICAgZGF0YWJhc2U6IHtcclxuICAgICAgICBhdXRvU2F2ZUludGVydmFsOiBudW1iZXI7XHJcbiAgICAgICAgYmFja3VwRW5hYmxlZDogYm9vbGVhbjtcclxuICAgICAgICBtYXhGaWxlU2l6ZTogbnVtYmVyO1xyXG4gICAgICAgIGNvbXByZXNzaW9uRW5hYmxlZDogYm9vbGVhbjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gXHVENTU5XHVDMkI1IFx1QzU0Q1x1QUNFMFx1QjlBQ1x1Qzk5OCBcdUMxMjRcdUM4MTVcclxuICAgIGxlYXJuaW5nOiB7XHJcbiAgICAgICAgc3BhY2VkX3JlcGV0aXRpb246IHtcclxuICAgICAgICAgICAgaW5pdGlhbEludGVydmFsOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGVhc3lCb251czogbnVtYmVyO1xyXG4gICAgICAgICAgICBoYXJkUGVuYWx0eTogbnVtYmVyO1xyXG4gICAgICAgICAgICBtYXhJbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgICAgICAgICBtaW5JbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbG9hZF9iYWxhbmNpbmc6IHtcclxuICAgICAgICAgICAgbWF4RGFpbHlSZXZpZXdzOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGZ1enppbmdQZXJjZW50YWdlOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbldpbmRvdzogbnVtYmVyO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFVJIFx1QzEyNFx1QzgxNVxyXG4gICAgdWk6IHtcclxuICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogbnVtYmVyO1xyXG4gICAgICAgIHByb2dyZXNzVXBkYXRlSW50ZXJ2YWw6IG51bWJlcjtcclxuICAgICAgICBub3RpZmljYXRpb25UaW1lb3V0OiBudW1iZXI7XHJcbiAgICAgICAgbW9kYWxDbG9zZURlbGF5OiBudW1iZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFx1QkNGNFx1QzU0OCBcdUMxMjRcdUM4MTVcclxuICAgIHNlY3VyaXR5OiB7XHJcbiAgICAgICAgYXBpS2V5RW5jcnlwdGlvbjoge1xyXG4gICAgICAgICAgICBpdGVyYXRpb25zOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGtleUxlbmd0aDogbnVtYmVyO1xyXG4gICAgICAgICAgICBzYWx0TGVuZ3RoOiBudW1iZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZXNzaW9uVGltZW91dDogbnVtYmVyO1xyXG4gICAgICAgIG1heExvZ2luQXR0ZW1wdHM6IG51bWJlcjtcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIFx1QUUzMFx1QkNGOCBcdUMxMjRcdUM4MTVcclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09ORklHOiBQbHVnaW5Db25maWcgPSB7XHJcbiAgICBhcGk6IHtcclxuICAgICAgICB0aW1lb3V0czoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiAzMDAwMCwgICAgLy8gMzBcdUNEMDhcclxuICAgICAgICAgICAgbGxtOiA2MDAwMCwgICAgICAgIC8vIDYwXHVDRDA4XHJcbiAgICAgICAgICAgIHR0czogMTUwMDAsICAgICAgICAvLyAxNVx1Q0QwOFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmV0cmllczoge1xyXG4gICAgICAgICAgICBtYXhBdHRlbXB0czogMyxcclxuICAgICAgICAgICAgZGVsYXlNczogMTAwMCxcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmF0ZUxpbWl0aW5nOiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RzUGVyTWludXRlOiA2MCxcclxuICAgICAgICAgICAgYnVyc3RMaW1pdDogMTAsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgYmF0Y2g6IHtcclxuICAgICAgICBkZWZhdWx0U2l6ZTogNSxcclxuICAgICAgICBtYXhTaXplOiAyMCxcclxuICAgICAgICBkZWxheUJldHdlZW5CYXRjaGVzOiAyMDAsXHJcbiAgICAgICAgbWF4Q29uY3VycmVudEJhdGNoZXM6IDMsXHJcbiAgICB9LFxyXG5cclxuICAgIGF1ZGlvOiB7XHJcbiAgICAgICAgbWF4UG9vbFNpemU6IDEwLFxyXG4gICAgICAgIGF1dG9DbGVhbnVwVGltZW91dE1zOiAzMDAwMCwgIC8vIDMwXHVDRDA4XHJcbiAgICAgICAgbWF4RHVyYXRpb25NczogMzAwMDAwLCAgICAgICAgLy8gNVx1QkQ4NFxyXG4gICAgfSxcclxuXHJcbiAgICBkYXRhYmFzZToge1xyXG4gICAgICAgIGF1dG9TYXZlSW50ZXJ2YWw6IDUwMDAsICAgICAgIC8vIDVcdUNEMDhcclxuICAgICAgICBiYWNrdXBFbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIG1heEZpbGVTaXplOiAxMDQ4NTc2MCwgICAgICAgIC8vIDEwTUJcclxuICAgICAgICBjb21wcmVzc2lvbkVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgfSxcclxuXHJcbiAgICBsZWFybmluZzoge1xyXG4gICAgICAgIHNwYWNlZF9yZXBldGl0aW9uOiB7XHJcbiAgICAgICAgICAgIGluaXRpYWxJbnRlcnZhbDogMSwgICAgICAgIC8vIDFcdUM3N0NcclxuICAgICAgICAgICAgZWFzeUJvbnVzOiAxLjMsXHJcbiAgICAgICAgICAgIGhhcmRQZW5hbHR5OiAwLjgsXHJcbiAgICAgICAgICAgIG1heEludGVydmFsOiAzNjUsICAgICAgICAgIC8vIDFcdUIxNDRcclxuICAgICAgICAgICAgbWluSW50ZXJ2YWw6IDEsICAgICAgICAgICAgLy8gMVx1Qzc3Q1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9hZF9iYWxhbmNpbmc6IHtcclxuICAgICAgICAgICAgbWF4RGFpbHlSZXZpZXdzOiAxMDAsXHJcbiAgICAgICAgICAgIGZ1enppbmdQZXJjZW50YWdlOiA1LFxyXG4gICAgICAgICAgICBkaXN0cmlidXRpb25XaW5kb3c6IDcsICAgICAvLyA3XHVDNzdDXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgdWk6IHtcclxuICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogMzAwLCAgICAgICAvLyAzMDBtc1xyXG4gICAgICAgIHByb2dyZXNzVXBkYXRlSW50ZXJ2YWw6IDEwMCwgIC8vIDEwMG1zXHJcbiAgICAgICAgbm90aWZpY2F0aW9uVGltZW91dDogNTAwMCwgICAgLy8gNVx1Q0QwOFxyXG4gICAgICAgIG1vZGFsQ2xvc2VEZWxheTogNTAwLCAgICAgICAgIC8vIDUwMG1zXHJcbiAgICB9LFxyXG5cclxuICAgIHNlY3VyaXR5OiB7XHJcbiAgICAgICAgYXBpS2V5RW5jcnlwdGlvbjoge1xyXG4gICAgICAgICAgICBpdGVyYXRpb25zOiAxMDAwMCxcclxuICAgICAgICAgICAga2V5TGVuZ3RoOiAzMixcclxuICAgICAgICAgICAgc2FsdExlbmd0aDogMTYsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXNzaW9uVGltZW91dDogMzYwMDAwMCwgICAgICAvLyAxXHVDMkRDXHVBQzA0XHJcbiAgICAgICAgbWF4TG9naW5BdHRlbXB0czogNSxcclxuICAgIH0sXHJcbn07XHJcblxyXG4vLyBcdUQ2NThcdUFDQkRcdUJDQzQgXHVDMTI0XHVDODE1XHJcbmV4cG9ydCBjb25zdCBERVZFTE9QTUVOVF9DT05GSUc6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPiA9IHtcclxuICAgIGFwaToge1xyXG4gICAgICAgIHRpbWVvdXRzOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDEwMDAwLFxyXG4gICAgICAgICAgICBsbG06IDIwMDAwLFxyXG4gICAgICAgICAgICB0dHM6IDUwMDAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXRyaWVzOiB7XHJcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAxLFxyXG4gICAgICAgICAgICBkZWxheU1zOiA1MDAsXHJcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBiYXRjaDoge1xyXG4gICAgICAgIGRlZmF1bHRTaXplOiAyLFxyXG4gICAgICAgIG1heFNpemU6IDUsXHJcbiAgICAgICAgZGVsYXlCZXR3ZWVuQmF0Y2hlczogMTAwLFxyXG4gICAgfSxcclxuICAgIGRhdGFiYXNlOiB7XHJcbiAgICAgICAgYXV0b1NhdmVJbnRlcnZhbDogMTAwMCxcclxuICAgICAgICBiYWNrdXBFbmFibGVkOiBmYWxzZSxcclxuICAgIH0sXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgUFJPRFVDVElPTl9DT05GSUc6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPiA9IHtcclxuICAgIGFwaToge1xyXG4gICAgICAgIHJldHJpZXM6IHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDUsXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IDIwMDAsXHJcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIGJhdGNoOiB7XHJcbiAgICAgICAgZGVmYXVsdFNpemU6IDEwLFxyXG4gICAgICAgIG1heFNpemU6IDUwLFxyXG4gICAgICAgIGRlbGF5QmV0d2VlbkJhdGNoZXM6IDUwMCxcclxuICAgIH0sXHJcbiAgICBkYXRhYmFzZToge1xyXG4gICAgICAgIGF1dG9TYXZlSW50ZXJ2YWw6IDEwMDAwLFxyXG4gICAgICAgIGJhY2t1cEVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgY29tcHJlc3Npb25FbmFibGVkOiB0cnVlLFxyXG4gICAgfSxcclxufTtcclxuXHJcbi8vIFx1QzEyNFx1QzgxNSBcdUFEMDBcdUI5QUMgXHVEMDc0XHVCNzk4XHVDMkE0XHJcbmV4cG9ydCBjbGFzcyBDb25maWdNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBDb25maWdNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBjb25maWc6IFBsdWdpbkNvbmZpZztcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZ3MoREVGQVVMVF9DT05GSUcsIHRoaXMuZ2V0RW52aXJvbm1lbnRDb25maWcoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCk6IENvbmZpZ01hbmFnZXIge1xyXG4gICAgICAgIGlmICghQ29uZmlnTWFuYWdlci5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBDb25maWdNYW5hZ2VyLmluc3RhbmNlID0gbmV3IENvbmZpZ01hbmFnZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENvbmZpZ01hbmFnZXIuaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29uZmlnKCk6IFBsdWdpbkNvbmZpZyB7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5jb25maWcgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRWYWx1ZTxUPihwYXRoOiBzdHJpbmcpOiBUIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXROZXN0ZWRWYWx1ZSh0aGlzLmNvbmZpZywgcGF0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ29uZmlnKHVwZGF0ZXM6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZ3ModGhpcy5jb25maWcsIHVwZGF0ZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RW52aXJvbm1lbnRDb25maWcoKTogUGFydGlhbDxQbHVnaW5Db25maWc+IHtcclxuICAgICAgICAvLyBcdUFDMUNcdUJDMUMgXHVENjU4XHVBQ0JEIFx1QUMxMFx1QzlDMCAoXHVBQzA0XHVCMkU4XHVENTVDIFx1RDczNFx1QjlBQ1x1QzJBNFx1RDJGMSlcclxuICAgICAgICBjb25zdCBpc0RldmVsb3BtZW50ID0gXHJcbiAgICAgICAgICAgIHByb2Nlc3M/LmVudj8uTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgfHxcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uPy5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcgfHxcclxuICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnRGV2ZWxvcG1lbnQnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGlzRGV2ZWxvcG1lbnQgPyBERVZFTE9QTUVOVF9DT05GSUcgOiBQUk9EVUNUSU9OX0NPTkZJRztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1lcmdlQ29uZmlncyhiYXNlOiBQbHVnaW5Db25maWcsIG92ZXJyaWRlOiBQYXJ0aWFsPFBsdWdpbkNvbmZpZz4pOiBQbHVnaW5Db25maWcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZXBNZXJnZShiYXNlLCBvdmVycmlkZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWVwTWVyZ2U8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KHRhcmdldDogVCwgc291cmNlOiBQYXJ0aWFsPFQ+KTogVCB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyAuLi50YXJnZXQgfTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcclxuICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VWYWx1ZSA9IHNvdXJjZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VmFsdWUgPSByZXN1bHRba2V5XTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPYmplY3Qoc291cmNlVmFsdWUpICYmIHRoaXMuaXNPYmplY3QodGFyZ2V0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB0aGlzLmRlZXBNZXJnZSh0YXJnZXRWYWx1ZSwgc291cmNlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2VWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBzb3VyY2VWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNPYmplY3QoaXRlbTogYW55KTogaXRlbSBpcyBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcclxuICAgICAgICByZXR1cm4gaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoaXRlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXROZXN0ZWRWYWx1ZShvYmo6IGFueSwgcGF0aDogc3RyaW5nKTogYW55IHtcclxuICAgICAgICByZXR1cm4gcGF0aC5zcGxpdCgnLicpLnJlZHVjZSgoY3VycmVudCwga2V5KSA9PiBjdXJyZW50Py5ba2V5XSwgb2JqKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVEM0I4XHVDNzU4IFx1RDU2OFx1QzIxOFx1QjRFNFxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnKCk6IFBsdWdpbkNvbmZpZyB7XHJcbiAgICByZXR1cm4gQ29uZmlnTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldENvbmZpZygpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnVmFsdWU8VD4ocGF0aDogc3RyaW5nKTogVCB7XHJcbiAgICByZXR1cm4gQ29uZmlnTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFZhbHVlPFQ+KHBhdGgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ29uZmlnKHVwZGF0ZXM6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPik6IHZvaWQge1xyXG4gICAgQ29uZmlnTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZUNvbmZpZyh1cGRhdGVzKTtcclxufVxyXG5cclxuLy8gXHVEMEMwXHVDNzg1IFx1QzU0OFx1QzgwNFx1RDU1QyBcdUMxMjRcdUM4MTUgXHVDODExXHVBREZDXHVDNzQ0IFx1QzcwNFx1RDU1QyBcdUMwQzFcdUMyMThcdUI0RTRcclxuZXhwb3J0IGNvbnN0IENPTkZJR19QQVRIUyA9IHtcclxuICAgIEFQSV9USU1FT1VUX0RFRkFVTFQ6ICdhcGkudGltZW91dHMuZGVmYXVsdCcsXHJcbiAgICBBUElfVElNRU9VVF9MTE06ICdhcGkudGltZW91dHMubGxtJyxcclxuICAgIEFQSV9USU1FT1VUX1RUUzogJ2FwaS50aW1lb3V0cy50dHMnLFxyXG4gICAgQVBJX1JFVFJZX01BWF9BVFRFTVBUUzogJ2FwaS5yZXRyaWVzLm1heEF0dGVtcHRzJyxcclxuICAgIEFQSV9SRVRSWV9ERUxBWTogJ2FwaS5yZXRyaWVzLmRlbGF5TXMnLFxyXG4gICAgQkFUQ0hfREVGQVVMVF9TSVpFOiAnYmF0Y2guZGVmYXVsdFNpemUnLFxyXG4gICAgQkFUQ0hfTUFYX1NJWkU6ICdiYXRjaC5tYXhTaXplJyxcclxuICAgIEJBVENIX0RFTEFZOiAnYmF0Y2guZGVsYXlCZXR3ZWVuQmF0Y2hlcycsXHJcbiAgICBBVURJT19NQVhfUE9PTF9TSVpFOiAnYXVkaW8ubWF4UG9vbFNpemUnLFxyXG4gICAgQVVESU9fQ0xFQU5VUF9USU1FT1VUOiAnYXVkaW8uYXV0b0NsZWFudXBUaW1lb3V0TXMnLFxyXG4gICAgTEVBUk5JTkdfSU5JVElBTF9JTlRFUlZBTDogJ2xlYXJuaW5nLnNwYWNlZF9yZXBldGl0aW9uLmluaXRpYWxJbnRlcnZhbCcsXHJcbiAgICBMRUFSTklOR19FQVNZX0JPTlVTOiAnbGVhcm5pbmcuc3BhY2VkX3JlcGV0aXRpb24uZWFzeUJvbnVzJyxcclxuICAgIExFQVJOSU5HX0hBUkRfUEVOQUxUWTogJ2xlYXJuaW5nLnNwYWNlZF9yZXBldGl0aW9uLmhhcmRQZW5hbHR5JyxcclxuICAgIFVJX0FOSU1BVElPTl9EVVJBVElPTjogJ3VpLmFuaW1hdGlvbkR1cmF0aW9uJyxcclxuICAgIFVJX05PVElGSUNBVElPTl9USU1FT1VUOiAndWkubm90aWZpY2F0aW9uVGltZW91dCcsXHJcbn0gYXMgY29uc3Q7IiwgIi8vIFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUM4MTVcdUNDNDUgXHVCQzBGIFx1QUQ2Q1x1RDYwNFxyXG5cclxuaW1wb3J0IHsgZ2V0Q29uZmlnVmFsdWUsIENPTkZJR19QQVRIUyB9IGZyb20gJy4vQ29uZmlnJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmV0cnlPcHRpb25zIHtcclxuICAgIG1heEF0dGVtcHRzPzogbnVtYmVyO1xyXG4gICAgZGVsYXlNcz86IG51bWJlcjtcclxuICAgIGV4cG9uZW50aWFsQmFja29mZj86IGJvb2xlYW47XHJcbiAgICBtYXhEZWxheU1zPzogbnVtYmVyO1xyXG4gICAgYmFja29mZk11bHRpcGxpZXI/OiBudW1iZXI7XHJcbiAgICByZXRyeUNvbmRpdGlvbj86IChlcnJvcjogRXJyb3IpID0+IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmV0cnlSZXN1bHQ8VD4ge1xyXG4gICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgIHJlc3VsdD86IFQ7XHJcbiAgICBlcnJvcj86IEVycm9yO1xyXG4gICAgYXR0ZW1wdHM6IG51bWJlcjtcclxuICAgIHRvdGFsRHVyYXRpb246IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJldHJ5UG9saWN5IHtcclxuICAgIHByaXZhdGUgb3B0aW9uczogUmVxdWlyZWQ8UmV0cnlPcHRpb25zPjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IG9wdGlvbnMubWF4QXR0ZW1wdHMgPz8gZ2V0Q29uZmlnVmFsdWU8bnVtYmVyPihDT05GSUdfUEFUSFMuQVBJX1JFVFJZX01BWF9BVFRFTVBUUyksXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IG9wdGlvbnMuZGVsYXlNcyA/PyBnZXRDb25maWdWYWx1ZTxudW1iZXI+KENPTkZJR19QQVRIUy5BUElfUkVUUllfREVMQVkpLFxyXG4gICAgICAgICAgICBleHBvbmVudGlhbEJhY2tvZmY6IG9wdGlvbnMuZXhwb25lbnRpYWxCYWNrb2ZmID8/IHRydWUsXHJcbiAgICAgICAgICAgIG1heERlbGF5TXM6IG9wdGlvbnMubWF4RGVsYXlNcyA/PyAzMDAwMCwgLy8gMzBcdUNEMDhcclxuICAgICAgICAgICAgYmFja29mZk11bHRpcGxpZXI6IG9wdGlvbnMuYmFja29mZk11bHRpcGxpZXIgPz8gMixcclxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IG9wdGlvbnMucmV0cnlDb25kaXRpb24gPz8gdGhpcy5kZWZhdWx0UmV0cnlDb25kaXRpb24sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUFFMzBcdUJDRjggXHVDN0FDXHVDMkRDXHVCM0M0IFx1Qzg3MFx1QUM3NFxyXG4gICAgcHJpdmF0ZSBkZWZhdWx0UmV0cnlDb25kaXRpb24oZXJyb3I6IEVycm9yKTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QzVEMFx1QjdFQywgXHVEMEMwXHVDNzg0XHVDNTQ0XHVDNkMzLCBcdUMxMUNcdUJDODQgXHVDNUQwXHVCN0VDXHVCMjk0IFx1QzdBQ1x1QzJEQ1x1QjNDNFxyXG4gICAgICAgIGNvbnN0IHJldHJ5YWJsZUVycm9ycyA9IFtcclxuICAgICAgICAgICAgJ05ldHdvcmtFcnJvcicsXHJcbiAgICAgICAgICAgICdUaW1lb3V0RXJyb3InLFxyXG4gICAgICAgICAgICAnZmV0Y2gnLFxyXG4gICAgICAgICAgICAnNTAyJywgJzUwMycsICc1MDQnLCAvLyBcdUMxMUNcdUJDODQgXHVDNUQwXHVCN0VDXHJcbiAgICAgICAgICAgICdFQ09OTlJFU0VUJyxcclxuICAgICAgICAgICAgJ0VUSU1FRE9VVCcsXHJcbiAgICAgICAgICAgICdFTk9URk9VTkQnXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IGVycm9yTmFtZSA9IGVycm9yLm5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJldHJ5YWJsZUVycm9ycy5zb21lKHBhdHRlcm4gPT4gXHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcyhwYXR0ZXJuLnRvTG93ZXJDYXNlKCkpIHx8IFxyXG4gICAgICAgICAgICBlcnJvck5hbWUuaW5jbHVkZXMocGF0dGVybi50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDOUMwXHVDMjE4IFx1QkMzMVx1QzYyNFx1RDUwNCBcdUFDQzRcdUMwQjBcclxuICAgIHByaXZhdGUgY2FsY3VsYXRlRGVsYXkoYXR0ZW1wdDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5leHBvbmVudGlhbEJhY2tvZmYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kZWxheU1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLm9wdGlvbnMuZGVsYXlNcyAqIE1hdGgucG93KHRoaXMub3B0aW9ucy5iYWNrb2ZmTXVsdGlwbGllciwgYXR0ZW1wdCAtIDEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzlDMFx1RDEzMCBcdUNEOTRcdUFDMDAgKFx1MDBCMTIwJSlcclxuICAgICAgICBjb25zdCBqaXR0ZXIgPSBkZWxheSAqIDAuMiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuICAgICAgICBjb25zdCBmaW5hbERlbGF5ID0gTWF0aC5mbG9vcihkZWxheSArIGppdHRlcik7XHJcblxyXG4gICAgICAgIHJldHVybiBNYXRoLm1pbihmaW5hbERlbGF5LCB0aGlzLm9wdGlvbnMubWF4RGVsYXlNcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVCM0Q5XHVBRTMwIFx1RDU2OFx1QzIxOCBcdUM3QUNcdUMyRENcdUIzQzRcclxuICAgIGFzeW5jIGV4ZWN1dGU8VD4oZm46ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFJldHJ5UmVzdWx0PFQ+PiB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzOyBhdHRlbXB0KyspIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHRzOiBhdHRlbXB0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzJEQ1x1QjNDNFx1Qzc3NFx1QUM3MFx1QjA5OCBcdUM3QUNcdUMyRENcdUIzQzQgXHVDODcwXHVBQzc0XHVDNzQ0IFx1QjlDQ1x1Qzg3MVx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3M0NcdUJBNzQgXHVDOTExXHVCMkU4XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzIHx8ICF0aGlzLm9wdGlvbnMucmV0cnlDb25kaXRpb24obGFzdEVycm9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUMyRENcdUIzQzQgXHVDODA0IFx1QjMwMFx1QUUzMFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLmNhbGN1bGF0ZURlbGF5KGF0dGVtcHQpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxheShkZWxheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBlcnJvcjogbGFzdEVycm9yLFxyXG4gICAgICAgICAgICBhdHRlbXB0czogdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzLFxyXG4gICAgICAgICAgICB0b3RhbER1cmF0aW9uOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIzRDlcdUFFMzAgXHVENTY4XHVDMjE4IFx1QzdBQ1x1QzJEQ1x1QjNDNFxyXG4gICAgZXhlY3V0ZVN5bmM8VD4oZm46ICgpID0+IFQpOiBSZXRyeVJlc3VsdDxUPiB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzOyBhdHRlbXB0KyspIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZuKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHRzOiBhdHRlbXB0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzJEQ1x1QjNDNFx1Qzc3NFx1QUM3MFx1QjA5OCBcdUM3QUNcdUMyRENcdUIzQzQgXHVDODcwXHVBQzc0XHVDNzQ0IFx1QjlDQ1x1Qzg3MVx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3M0NcdUJBNzQgXHVDOTExXHVCMkU4XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzIHx8ICF0aGlzLm9wdGlvbnMucmV0cnlDb25kaXRpb24obGFzdEVycm9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1QjNEOVx1QUUzMCBcdUQ1NjhcdUMyMThcdUM1RDBcdUMxMUNcdUIyOTQgXHVDOTg5XHVDMkRDIFx1QjJFNFx1Qzc0QyBcdUMyRENcdUIzQzQgKFx1QkU0NFx1QjNEOVx1QUUzMCBcdUIzMDBcdUFFMzAgXHVCRDg4XHVBQzAwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgZXJyb3I6IGxhc3RFcnJvcixcclxuICAgICAgICAgICAgYXR0ZW1wdHM6IHRoaXMub3B0aW9ucy5tYXhBdHRlbXB0cyxcclxuICAgICAgICAgICAgdG90YWxEdXJhdGlvbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHVwZGF0ZU9wdGlvbnMob3B0aW9uczogUGFydGlhbDxSZXRyeU9wdGlvbnM+KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTI0XHVDODE1IFx1QkMxOFx1RDY1OFxyXG4gICAgZ2V0T3B0aW9ucygpOiBSZXF1aXJlZDxSZXRyeU9wdGlvbnM+IHtcclxuICAgICAgICByZXR1cm4geyAuLi50aGlzLm9wdGlvbnMgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVEMkI5XHVENjU0XHVCNDFDIFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUM4MTVcdUNDNDVcdUI0RTRcclxuZXhwb3J0IGNsYXNzIE5ldHdvcmtSZXRyeVBvbGljeSBleHRlbmRzIFJldHJ5UG9saWN5IHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFJldHJ5T3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgc3VwZXIoe1xyXG4gICAgICAgICAgICBtYXhBdHRlbXB0czogNSxcclxuICAgICAgICAgICAgZGVsYXlNczogMTAwMCxcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiB0cnVlLFxyXG4gICAgICAgICAgICBtYXhEZWxheU1zOiAxMDAwMCxcclxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QUQwMFx1QjgyOCBcdUM1RDBcdUI3RUNcdUI5Q0MgXHVDN0FDXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXR3b3JrRXJyb3JzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICduZXR3b3JrZXJyb3InLCAnZmV0Y2gnLCAndGltZW91dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2Vjb25ucmVzZXQnLCAnZXRpbWVkb3V0JywgJ2Vub3Rmb3VuZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJzUwMicsICc1MDMnLCAnNTA0JywgJzQwOCcsICc0MjknXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV0d29ya0Vycm9ycy5zb21lKHBhdHRlcm4gPT4gZXJyb3JUZXh0LmluY2x1ZGVzKHBhdHRlcm4pKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLi4ub3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQVBJUmV0cnlQb2xpY3kgZXh0ZW5kcyBSZXRyeVBvbGljeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDMsXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IDIwMDAsXHJcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogdHJ1ZSxcclxuICAgICAgICAgICAgbWF4RGVsYXlNczogMTUwMDAsXHJcbiAgICAgICAgICAgIHJldHJ5Q29uZGl0aW9uOiAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEFQSSBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1QzkxMSBcdUM3QUNcdUMyRENcdUIzQzQgXHVBQzAwXHVCMkE1XHVENTVDIFx1QUM4M1x1QjRFNFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmV0cnlhYmxlRXJyb3JzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICc0MjknLCAvLyBSYXRlIGxpbWl0XHJcbiAgICAgICAgICAgICAgICAgICAgJzUwMicsICc1MDMnLCAnNTA0JywgLy8gU2VydmVyIGVycm9yc1xyXG4gICAgICAgICAgICAgICAgICAgICd0aW1lb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAnbmV0d29yaydcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXRyeWFibGVFcnJvcnMuc29tZShwYXR0ZXJuID0+IGVycm9yVGV4dC5pbmNsdWRlcyhwYXR0ZXJuKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERhdGFiYXNlUmV0cnlQb2xpY3kgZXh0ZW5kcyBSZXRyeVBvbGljeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDMsXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IDUwMCxcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiBmYWxzZSwgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVCMjk0IFx1QkU2MFx1Qjk3OCBcdUM3QUNcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgbWF4RGVsYXlNczogMjAwMCxcclxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzdDXHVDMkRDXHVDODAxXHVDNzc4IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUM1RDBcdUI3RUNcdUI5Q0MgXHVDN0FDXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXRyeWFibGVFcnJvcnMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xvY2snLCAnYnVzeScsICd0aW1lb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAnY29ubmVjdGlvbicsICduZXR3b3JrJ1xyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHJ5YWJsZUVycm9ycy5zb21lKHBhdHRlcm4gPT4gZXJyb3JUZXh0LmluY2x1ZGVzKHBhdHRlcm4pKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLi4ub3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUQzQjhcdUM3NTggXHVENTY4XHVDMjE4XHVCNEU0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyeUFzeW5jPFQ+KFxyXG4gICAgZm46ICgpID0+IFByb21pc2U8VD4sXHJcbiAgICBvcHRpb25zPzogUmV0cnlPcHRpb25zXHJcbik6IFByb21pc2U8VD4ge1xyXG4gICAgY29uc3QgcG9saWN5ID0gbmV3IFJldHJ5UG9saWN5KG9wdGlvbnMpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9saWN5LmV4ZWN1dGUoZm4pO1xyXG4gICAgXHJcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdCE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJldHJ5U3luYzxUPihcclxuICAgIGZuOiAoKSA9PiBULFxyXG4gICAgb3B0aW9ucz86IFJldHJ5T3B0aW9uc1xyXG4pOiBUIHtcclxuICAgIGNvbnN0IHBvbGljeSA9IG5ldyBSZXRyeVBvbGljeShvcHRpb25zKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHBvbGljeS5leGVjdXRlU3luYyhmbik7XHJcbiAgICBcclxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0ITtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVDNjk0XHVDQ0FEXHVDNkE5IFx1RDNCOFx1Qzc1OCBcdUQ1NjhcdUMyMThcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJldHJ5TmV0d29ya1JlcXVlc3Q8VD4oXHJcbiAgICBmbjogKCkgPT4gUHJvbWlzZTxUPixcclxuICAgIG9wdGlvbnM/OiBSZXRyeU9wdGlvbnNcclxuKTogUHJvbWlzZTxUPiB7XHJcbiAgICBjb25zdCBwb2xpY3kgPSBuZXcgTmV0d29ya1JldHJ5UG9saWN5KG9wdGlvbnMpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9saWN5LmV4ZWN1dGUoZm4pO1xyXG4gICAgXHJcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdCE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcclxuICAgIH1cclxufVxyXG5cclxuLy8gQVBJIFx1RDYzOFx1Q0Q5Q1x1QzZBOSBcdUQzQjhcdUM3NTggXHVENTY4XHVDMjE4XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyeUFQSUNhbGw8VD4oXHJcbiAgICBmbjogKCkgPT4gUHJvbWlzZTxUPixcclxuICAgIG9wdGlvbnM/OiBSZXRyeU9wdGlvbnNcclxuKTogUHJvbWlzZTxUPiB7XHJcbiAgICBjb25zdCBwb2xpY3kgPSBuZXcgQVBJUmV0cnlQb2xpY3kob3B0aW9ucyk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb2xpY3kuZXhlY3V0ZShmbik7XHJcbiAgICBcclxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0ITtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBDaXJjdWl0IEJyZWFrZXIgXHVEMzI4XHVEMTM0XHVBQ0ZDIFx1RDU2OFx1QUVEOCBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QjI5NCBcdUFDRTBcdUFFMDkgXHVDN0FDXHVDMkRDXHVCM0M0XHJcbmV4cG9ydCBjbGFzcyBDaXJjdWl0QnJlYWtlclJldHJ5UG9saWN5IGV4dGVuZHMgUmV0cnlQb2xpY3kge1xyXG4gICAgcHJpdmF0ZSBmYWlsdXJlQ291bnQgPSAwO1xyXG4gICAgcHJpdmF0ZSBsYXN0RmFpbHVyZVRpbWUgPSAwO1xyXG4gICAgcHJpdmF0ZSBjaXJjdWl0QnJlYWtlclRpbWVvdXQgPSA2MDAwMDsgLy8gMVx1QkQ4NFxyXG4gICAgcHJpdmF0ZSBmYWlsdXJlVGhyZXNob2xkID0gNTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGV4ZWN1dGVXaXRoQ2lyY3VpdEJyZWFrZXI8VD4oZm46ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFJldHJ5UmVzdWx0PFQ+PiB7XHJcbiAgICAgICAgLy8gQ2lyY3VpdCBCcmVha2VyIFx1Q0NCNFx1RDA2Q1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ2lyY3VpdE9wZW4oKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogbmV3IEVycm9yKCdDaXJjdWl0IGJyZWFrZXIgaXMgb3BlbicpLFxyXG4gICAgICAgICAgICAgICAgYXR0ZW1wdHM6IDAsXHJcbiAgICAgICAgICAgICAgICB0b3RhbER1cmF0aW9uOiAwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGUoZm4pO1xyXG5cclxuICAgICAgICAvLyBcdUFDQjBcdUFDRkNcdUM1RDAgXHVCNTMwXHVCOTc4IENpcmN1aXQgQnJlYWtlciBcdUMwQzFcdUQwREMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZUNvdW50ID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZhaWx1cmVDb3VudCsrO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RGYWlsdXJlVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNDaXJjdWl0T3BlbigpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5mYWlsdXJlQ291bnQgPCB0aGlzLmZhaWx1cmVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdEZhaWx1cmUgPSBEYXRlLm5vdygpIC0gdGhpcy5sYXN0RmFpbHVyZVRpbWU7XHJcbiAgICAgICAgaWYgKHRpbWVTaW5jZUxhc3RGYWlsdXJlID49IHRoaXMuY2lyY3VpdEJyZWFrZXJUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZUNvdW50ID0gMDsgLy8gUmVzZXQgY2lyY3VpdCBicmVha2VyXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcclxuaW1wb3J0IHsgV29yZERhdGEgfSBmcm9tICcuLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcbmltcG9ydCB7IGRlY3J5cHRBcGlLZXkgfSBmcm9tICcuLi8uLi91dGlscyc7XHJcbmltcG9ydCB7IHJldHJ5QVBJQ2FsbCwgQVBJUmV0cnlQb2xpY3kgfSBmcm9tICcuLi8uLi9zaGFyZWQvUmV0cnlQb2xpY3knO1xyXG5pbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMTE1SZXNwb25zZSB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgZGF0YT86IGFueTtcclxuICAgIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb2dyZXNzQ2FsbGJhY2sge1xyXG4gICAgKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBXb3JkRGV0YWlsRGF0YSB7XHJcbiAgICB3b3JkOiBzdHJpbmc7XHJcbiAgICBwcm9udW5jaWF0aW9uOiBzdHJpbmc7XHJcbiAgICBtZWFuaW5nczogc3RyaW5nW107XHJcbiAgICBleGFtcGxlczoge1xyXG4gICAgICAgIGVuZ2xpc2g6IHN0cmluZztcclxuICAgICAgICBrb3JlYW46IHN0cmluZztcclxuICAgIH1bXTtcclxuICAgIHNpbWlsYXJXb3Jkczogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMTE1TZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncztcclxuICAgIHByaXZhdGUgcmV0cnlQb2xpY3k6IEFQSVJldHJ5UG9saWN5O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICAgICAgdGhpcy5yZXRyeVBvbGljeSA9IG5ldyBBUElSZXRyeVBvbGljeSh7XHJcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAzLFxyXG4gICAgICAgICAgICBkZWxheU1zOiAyMDAwLFxyXG4gICAgICAgICAgICBleHBvbmVudGlhbEJhY2tvZmY6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc1OCBBUEkgXHVEMEE0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUJBNTRcdUMxMUNcdUI0RENcclxuICAgIHByaXZhdGUgZ2V0Q3VycmVudEFwaUtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5zZXR0aW5ncy5sbG1Qcm92aWRlcjtcclxuICAgICAgICBsZXQgZW5jcnlwdGVkS2V5ID0gJyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3dpdGNoIChwcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgZW5jcnlwdGVkS2V5ID0gdGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcclxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZEtleSA9IHRoaXMuc2V0dGluZ3MuYW50aHJvcGljQXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2dvb2dsZSc6XHJcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRLZXkgPSB0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZGVjcnlwdEFwaUtleShlbmNyeXB0ZWRLZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKTtcclxuICAgICAgICAgICAgaWYgKCFhcGlLZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RQcm9tcHQgPSAnSGVsbG8sIHRoaXMgaXMgYSB0ZXN0IG1lc3NhZ2UuIFBsZWFzZSByZXNwb25kIHdpdGggXCJPS1wiIGlmIHlvdSBjYW4gcmVhZCB0aGlzLic7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsTExNKHRlc3RQcm9tcHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6ICdBUEkgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNScgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzcG9uc2UuZXJyb3IgfHwgJ0FQSSBcdUM1RjBcdUFDQjAgXHVDMkU0XHVEMzI4JyB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFdvcmREZXRhaWxzKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKTtcclxuICAgICAgICAgICAgaWYgKCFhcGlLZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IHRoaXMuY3JlYXRlV29yZERldGFpbFByb21wdCh3b3JkKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxMTE0ocHJvbXB0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gdGhpcy5wYXJzZVdvcmREZXRhaWxSZXNwb25zZShyZXNwb25zZS5kYXRhLCB3b3JkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHBhcnNlZERhdGEgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzcG9uc2UuZXJyb3IgfHwgJ1x1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0XHVCMzcwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0TXVsdGlwbGVXb3JkRGV0YWlscyh3b3Jkczogc3RyaW5nW10sIHByb2dyZXNzQ2FsbGJhY2s/OiBQcm9ncmVzc0NhbGxiYWNrKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IHRoaXMuZ2V0Q3VycmVudEFwaUtleSgpO1xyXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHdvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDQzk4XHVCOUFDXHVENTYwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBCQVRDSF9TSVpFID0gMjA7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFJlc3VsdHM6IFdvcmREZXRhaWxEYXRhW10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgdG90YWxCYXRjaGVzID0gTWF0aC5jZWlsKHdvcmRzLmxlbmd0aCAvIEJBVENIX1NJWkUpO1xyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKDAsIHdvcmRzLmxlbmd0aCwgYFx1Q0QxRCAke3dvcmRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0XHVCOTdDICR7dG90YWxCYXRjaGVzfVx1QUMxQyBcdUJDMzBcdUNFNThcdUI4NUMgXHVCMDk4XHVCMjA0XHVDNUI0IFx1Q0M5OFx1QjlBQ1x1RDU2OVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkgKz0gQkFUQ0hfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmF0Y2hOdW1iZXIgPSBNYXRoLmZsb29yKGkgLyBCQVRDSF9TSVpFKSArIDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaFdvcmRzID0gd29yZHMuc2xpY2UoaSwgaSArIEJBVENIX1NJWkUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhpLCB3b3Jkcy5sZW5ndGgsIGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0vJHt0b3RhbEJhdGNoZXN9IFx1Q0M5OFx1QjlBQyBcdUM5MTEuLi4gKCR7YmF0Y2hXb3Jkcy5sZW5ndGh9XHVBQzFDIFx1QjJFOFx1QzVCNClgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHQgPSB0aGlzLmNyZWF0ZU11bHRpcGxlV29yZERldGFpbFByb21wdChiYXRjaFdvcmRzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbExMTShwcm9tcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSB0aGlzLnBhcnNlTXVsdGlwbGVXb3JkRGV0YWlsUmVzcG9uc2UocmVzcG9uc2UuZGF0YSwgYmF0Y2hXb3Jkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbFJlc3VsdHMucHVzaCguLi5wYXJzZWREYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGkgKyBiYXRjaFdvcmRzLmxlbmd0aCwgd29yZHMubGVuZ3RoLCBgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzY0NFx1QjhDQzogJHtwYXJzZWREYXRhLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1Q0M5OFx1QjlBQ1x1QjQyOGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzJFNFx1RDMyODpgLCByZXNwb25zZS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGksIHdvcmRzLmxlbmd0aCwgYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfSBcdUMyRTRcdUQzMjgsIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUNcdUI4NUMgXHVDODA0XHVENjU4Li4uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVDMkU0XHVEMzI4XHVENTVDIFx1QkMzMFx1Q0U1OFx1Qzc1OCBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NDQgXHVBQzFDXHVCQ0M0XHVDODAxXHVDNzNDXHVCODVDIFx1Q0M5OFx1QjlBQyBcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kaXZpZHVhbFJlc3VsdHMgPSBhd2FpdCB0aGlzLnByb2Nlc3NXb3Jkc0luZGl2aWR1YWxseShiYXRjaFdvcmRzLCBwcm9ncmVzc0NhbGxiYWNrLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLmluZGl2aWR1YWxSZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfSBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1ODpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhpLCB3b3Jkcy5sZW5ndGgsIGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0gXHVDNjI0XHVCOTU4LCBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDXHVCODVDIFx1QzgwNFx1RDY1OC4uLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREIFx1QzJEQyBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDXHVCODVDIFx1RDNGNFx1QkMzMVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGl2aWR1YWxSZXN1bHRzID0gYXdhaXQgdGhpcy5wcm9jZXNzV29yZHNJbmRpdmlkdWFsbHkoYmF0Y2hXb3JkcywgcHJvZ3Jlc3NDYWxsYmFjaywgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLmluZGl2aWR1YWxSZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUJDMzBcdUNFNTggXHVBQzA0IFx1QzlFN1x1Qzc0MCBcdUM5QzBcdUM1RjAgKEFQSSBcdUM4MUNcdUQ1NUMgXHVCQzI5XHVDOUMwKVxyXG4gICAgICAgICAgICAgICAgaWYgKGkgKyBCQVRDSF9TSVpFIDwgd29yZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2sod29yZHMubGVuZ3RoLCB3b3Jkcy5sZW5ndGgsIGBcdUJBQThcdUI0RTAgXHVCQzMwXHVDRTU4IFx1Q0M5OFx1QjlBQyBcdUM2NDRcdUI4Q0MuIFx1Q0QxRCAke2FsbFJlc3VsdHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzIxOFx1QzlEMVx1QjQyOGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGFsbFJlc3VsdHMgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUIyRThcdUM1QjQgXHVDQzk4XHVCOUFDIChcdUJDMzBcdUNFNTggXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUQzRjRcdUJDMzEpXHJcbiAgICBwcml2YXRlIGFzeW5jIHByb2Nlc3NXb3Jkc0luZGl2aWR1YWxseSh3b3Jkczogc3RyaW5nW10sIHByb2dyZXNzQ2FsbGJhY2s/OiBQcm9ncmVzc0NhbGxiYWNrLCBzdGFydEluZGV4OiBudW1iZXIgPSAwKTogUHJvbWlzZTxXb3JkRGV0YWlsRGF0YVtdPiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHdvcmRzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBzdGFydEluZGV4ICsgaTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soY3VycmVudEluZGV4LCBzdGFydEluZGV4ICsgd29yZHMubGVuZ3RoLCBgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQzogXCIke3dvcmR9XCJgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldFdvcmREZXRhaWxzKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCIgXHVDQzk4XHVCOUFDIFx1QzJFNFx1RDMyODpgLCByZXNwb25zZS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVDMkU0XHVEMzI4XHVENTVDIFx1QjJFOFx1QzVCNFx1QzVEMCBcdUIzMDBcdUQ1NUMgXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMwRERcdUMxMzFcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JkOiB3b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4J10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDIFx1QUMwNCBcdUM5RTdcdUM3NDAgXHVDOUMwXHVDNUYwXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDUwMCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCIgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZDogd29yZC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Q0M5OFx1QjlBQyBcdUM2MjRcdUI5NTgnXSxcclxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDOUMwXHVDNUYwIFx1RDU2OFx1QzIxOFxyXG4gICAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlV29yZERldGFpbFByb21wdCh3b3JkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgXHVCMkU0XHVDNzRDIFx1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUM1RDAgXHVCMzAwXHVENTVDIFx1QzBDMVx1QzEzOCBcdUM4MTVcdUJDRjRcdUI5N0MgSlNPTiBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUMgXHVDODFDXHVBQ0Y1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LlxyXG5cclxuXHVDNjk0XHVBRDZDXHVDMEFDXHVENTZEOlxyXG4xLiBcdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzggKElQQSBcdUQ2MTVcdUMyREQpXHJcbjIuIFx1RDU1Q1x1QUUwMCBcdUI3M0JcdUI0RTQgKFx1QzVFQ1x1QjdFQyBcdUFDMUNcdUM3N0MgXHVDMjE4IFx1Qzc4OFx1Qzc0QylcclxuMy4gXHVBQzAxIFx1QjczQlx1QkNDNFx1Qjg1QyBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4XHVBQ0ZDIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgKFx1QUMwMSBcdUI3M0JcdUIyRjkgMi0zXHVBQzFDXHVDNzU4IFx1QzYwOFx1QkIzOCBcdUM4MUNcdUFDRjUpXHJcbjQuIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0XHVCNEU0XHJcblxyXG5cdUM3NTFcdUIyRjUgXHVENjE1XHVDMkREOlxyXG57XHJcbiAgXCJ3b3JkXCI6IFwiJHt3b3JkfVwiLFxyXG4gIFwicHJvbnVuY2lhdGlvblwiOiBcIi9cdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzgvXCIsXHJcbiAgXCJtZWFuaW5nc1wiOiBbXCJcdUI3M0IxXCIsIFwiXHVCNzNCMlwiLCBcIlx1QjczQjNcIl0sXHJcbiAgXCJleGFtcGxlc1wiOiBbXHJcbiAgICB7XHJcbiAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggMVwiLFxyXG4gICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgMVwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDJcIiwgXHJcbiAgICAgIFwia29yZWFuXCI6IFwiXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAyXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggM1wiLFxyXG4gICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgM1wiXHJcbiAgICB9XHJcbiAgXSxcclxuICBcInNpbWlsYXJXb3Jkc1wiOiBbXCJcdUM3MjBcdUMwQUNcdUIyRThcdUM1QjQxXCIsIFwiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0MlwiLCBcIlx1QzcyMFx1QzBBQ1x1QjJFOFx1QzVCNDNcIl1cclxufVxyXG5cclxuSlNPTiBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUNcdUI5Q0MgXHVDNzUxXHVCMkY1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LiBcdUIyRTRcdUI5NzggXHVDMTI0XHVCQTg1XHVDNzQwIFx1RDNFQ1x1RDU2OFx1RDU1OFx1QzlDMCBcdUI5QzhcdUMxMzhcdUM2OTQuYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZU11bHRpcGxlV29yZERldGFpbFByb21wdCh3b3Jkczogc3RyaW5nW10pOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHdvcmRMaXN0ID0gd29yZHMuam9pbignLCAnKTtcclxuICAgICAgICByZXR1cm4gYFx1QjJFNFx1Qzc0QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0XHVCNEU0XHVDNUQwIFx1QjMwMFx1RDU1QyBcdUMwQzFcdUMxMzggXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QzgxNVx1RDY1NVx1RDU1QyBKU09OIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUM4MUNcdUFDRjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQ6ICR7d29yZExpc3R9XHJcblxyXG5cdUM2OTRcdUFENkNcdUMwQUNcdUQ1NkQ6XHJcbi0gXHVBQzAxIFx1QjJFOFx1QzVCNFx1QzVEMCBcdUIzMDBcdUQ1NzQgXHVCQzFDXHVDNzRDXHVBRTMwXHVENjM4IChJUEEgXHVENjE1XHVDMkREKSwgXHVENTVDXHVBRTAwIFx1QjczQlx1QjRFNCwgXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOFx1QUNGQyBcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVELCBcdUM3MjBcdUMwQUNcdUQ1NUMgXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUQzRUNcdUQ1NjhcclxuLSBcdUFDMDEgXHVCNzNCXHVCQ0M0XHVCODVDIDItM1x1QUMxQ1x1Qzc1OCBcdUM2MDhcdUJCMzhcdUM3NDQgXHVDODFDXHVBQ0Y1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0XHJcbi0gSlNPTiBcdUQ2MTVcdUMyRERcdUI5Q0MgXHVDNzUxXHVCMkY1XHVENTU4XHVBQ0UwIFx1QjJFNFx1Qjk3OCBcdUMxMjRcdUJBODVcdUM3NDAgXHVEM0VDXHVENTY4XHVENTU4XHVDOUMwIFx1QjlDOFx1QzEzOFx1QzY5NFxyXG4tIFx1QkFBOFx1QjRFMCBcdUJCMzhcdUM3OTBcdUM1RjRcdUM3NDAgXHVDNzc0XHVDOTExIFx1QjUzMFx1QzYzNFx1RDQ1Q1x1Qjg1QyBcdUFDMTBcdUMyRjhcdUM4RkNcdUMxMzhcdUM2OTRcclxuLSBcdUJDMzBcdUM1RjRcdUFDRkMgXHVBQzFEXHVDQ0I0XHVCMjk0IFx1QzgxNVx1RDY1NVx1RDU1QyBKU09OIFx1QkIzOFx1QkM5NVx1Qzc0NCBcdUI1MzBcdUI5NzRcdUMxMzhcdUM2OTRcclxuXHJcblx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyREQ6XHJcbltcclxuICB7XHJcbiAgICBcIndvcmRcIjogXCJcdUIyRThcdUM1QjQxXCIsXHJcbiAgICBcInByb251bmNpYXRpb25cIjogXCIvXHVCQzFDXHVDNzRDXHVBRTMwXHVENjM4L1wiLFxyXG4gICAgXCJtZWFuaW5nc1wiOiBbXCJcdUI3M0IxXCIsIFwiXHVCNzNCMlwiXSxcclxuICAgIFwiZXhhbXBsZXNcIjogW1xyXG4gICAgICB7XHJcbiAgICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAxXCIsXHJcbiAgICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDFcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAyXCIsXHJcbiAgICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDJcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAzXCIsXHJcbiAgICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDNcIlxyXG4gICAgICB9XHJcbiAgICBdLFxyXG4gICAgXCJzaW1pbGFyV29yZHNcIjogW1wiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0MVwiLCBcIlx1QzcyMFx1QzBBQ1x1QjJFOFx1QzVCNDJcIl1cclxuICB9XHJcbl1cclxuXHJcblx1QzkxMVx1QzY5NDogSlNPTiBcdUQ2MTVcdUMyRERcdUI5Q0MgXHVDNzUxXHVCMkY1XHVENTU4XHVBQ0UwIFx1QjJFNFx1Qjk3OCBcdUQxNERcdUMyQTRcdUQyQjhcdUIyOTQgXHVEM0VDXHVENTY4XHVENTU4XHVDOUMwIFx1QjlDOFx1QzEzOFx1QzY5NC5gO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY2FsbExMTShwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuc2V0dGluZ3MubGxtUHJvdmlkZXI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNhbGxPcGVuQUkocHJvbXB0KTtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2FsbEFudGhyb3BpYyhwcm9tcHQpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZ29vZ2xlJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jYWxsR29vZ2xlKHByb21wdCk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1QzlDMFx1QzZEMFx1RDU1OFx1QzlDMCBcdUM1NEFcdUIyOTQgTExNIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc4NVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsT3BlbkFJKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlBUElDYWxsKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdFVybCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5nZXRDdXJyZW50QXBpS2V5KCl9YFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5zZXR0aW5ncy5sbG1Nb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHByb21wdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3Rva2VuczogNDAwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDQwMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JEYXRhLmVycm9yPy5tZXNzYWdlIHx8ICdPcGVuQUkgQVBJIFx1RDYzOFx1Q0Q5QyBcdUMyRTRcdUQzMjgnIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdUM3NTFcdUIyRjUgXHVCMEI0XHVDNkE5XHVDNzc0IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGNvbnRlbnQgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsQW50aHJvcGljKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIC8vIE5vZGUuanMgXHVENjU4XHVBQ0JEXHVDNUQwXHVDMTFDXHVCOUNDIFx1QjNEOVx1Qzc5MVx1RDU1OFx1QjNDNFx1Qjg1RCBcdUNDOThcdUI5QUNcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICdwcm9jZXNzJyBpbiB3aW5kb3cgJiYgKHdpbmRvdyBhcyBXaW5kb3cgJiB7IHByb2Nlc3M/OiB7IHR5cGU/OiBzdHJpbmcgfSB9KS5wcm9jZXNzPy50eXBlID09PSAncmVuZGVyZXInKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5hbnRocm9waWMuY29tL3YxL21lc3NhZ2VzJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd4LWFwaS1rZXknOiB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLnNldHRpbmdzLmxsbU1vZGVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiAzMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogcHJvbXB0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCAnQW50aHJvcGljIEFQSSBcdUQ2MzhcdUNEOUMgXHVDMkU0XHVEMzI4JyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLmNvbnRlbnRbMF0/LnRleHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdUM3NTFcdUIyRjUgXHVCMEI0XHVDNkE5XHVDNzc0IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjb250ZW50IH07XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1QkUwQ1x1Qjc3Q1x1QzZCMFx1QzgwMCBcdUQ2NThcdUFDQkRcdUM1RDBcdUMxMUNcdUIyOTQgXHVDNTQ4XHVCMEI0IFx1QkE1NFx1QzJEQ1x1QzlDMCBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdBbnRocm9waWMgQVBJXHVCMjk0IFx1QkUwQ1x1Qjc3Q1x1QzZCMFx1QzgwMCBcdUQ2NThcdUFDQkRcdUM1RDBcdUMxMUMgXHVDOUMxXHVDODExIFx1RDYzOFx1Q0Q5Q1x1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUIzNzBcdUMyQTRcdUQwNkNcdUQxQjEgXHVDNTcxKE9ic2lkaWFuKVx1QzVEMFx1QzExQ1x1QjlDQyBcdUIzRDlcdUM3OTFcdUQ1NjlcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNhbGxHb29nbGUocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPExMTVJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXRyeUFQSUNhbGwoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0VXJsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy8ke3RoaXMuc2V0dGluZ3MubGxtTW9kZWx9OmdlbmVyYXRlQ29udGVudD9rZXk9JHt0aGlzLmdldEN1cnJlbnRBcGlLZXkoKX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9tcHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDQwMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UudGV4dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCAnR29vZ2xlIEFQSSBcdUQ2MzhcdUNEOUMgXHVDMkU0XHVEMzI4JyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGRhdGEuY2FuZGlkYXRlc1swXT8uY29udGVudD8ucGFydHNbMF0/LnRleHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1Qzc1MVx1QjJGNSBcdUIwQjRcdUM2QTlcdUM3NzQgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogY29udGVudCB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcsIG9yaWdpbmFsV29yZDogc3RyaW5nKTogV29yZERldGFpbERhdGEge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEpTT04gXHVDNzUxXHVCMkY1XHVDNUQwXHVDMTFDIEpTT04gXHVCRDgwXHVCRDg0XHVCOUNDIFx1Q0Q5NFx1Q0Q5Q1xyXG4gICAgICAgICAgICBjb25zdCBqc29uTWF0Y2ggPSByZXNwb25zZS5tYXRjaCgvXFx7W1xcc1xcU10qXFx9Lyk7XHJcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pTT04gXHVENjE1XHVDMkREXHVDNzU4IFx1Qzc1MVx1QjJGNVx1Qzc0NCBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUM2MDhcdUJCMzggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUM4MFx1Qzk5RCBcdUJDMEYgXHVDODE1XHVCOUFDXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzID0gdGhpcy52YWxpZGF0ZUV4YW1wbGVzKGpzb25EYXRhLmV4YW1wbGVzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiBqc29uRGF0YS53b3JkIHx8IG9yaWdpbmFsV29yZCxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IGpzb25EYXRhLnByb251bmNpYXRpb24gfHwgJycsXHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nczoganNvbkRhdGEubWVhbmluZ3MgfHwgW10sXHJcbiAgICAgICAgICAgICAgICBleGFtcGxlczogdmFsaWRhdGVkRXhhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IGpzb25EYXRhLnNpbWlsYXJXb3JkcyB8fCBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIEpTT04gXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6IG9yaWdpbmFsV29yZCxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVDNzU4XHVCQkY4XHVCOTdDIFx1RDMwQ1x1QzJGMVx1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LiddLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM2MDhcdUJCMzggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUM4MFx1Qzk5RCBcdUJDMEYgXHVDODE1XHVCOUFDXHJcbiAgICBwcml2YXRlIHZhbGlkYXRlRXhhbXBsZXMoZXhhbXBsZXM6IGFueVtdKTogeyBlbmdsaXNoOiBzdHJpbmc7IGtvcmVhbjogc3RyaW5nOyB9W10ge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShleGFtcGxlcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRXhhbXBsZXM6IHsgZW5nbGlzaDogc3RyaW5nOyBrb3JlYW46IHN0cmluZzsgfVtdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBleGFtcGxlIG9mIGV4YW1wbGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChleGFtcGxlICYmIHR5cGVvZiBleGFtcGxlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5nbGlzaCA9IGV4YW1wbGUuZW5nbGlzaCB8fCBleGFtcGxlLmVuZ2xpc2hfdGV4dCB8fCBleGFtcGxlLnRleHQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrb3JlYW4gPSBleGFtcGxlLmtvcmVhbiB8fCBleGFtcGxlLmtvcmVhbl90ZXh0IHx8IGV4YW1wbGUudHJhbnNsYXRpb24gfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChlbmdsaXNoLnRyaW0oKSAmJiBrb3JlYW4udHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVkRXhhbXBsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6IGVuZ2xpc2gudHJpbSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46IGtvcmVhbi50cmltKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRXhhbXBsZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZU11bHRpcGxlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcsIG9yaWdpbmFsV29yZHM6IHN0cmluZ1tdKTogV29yZERldGFpbERhdGFbXSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDEuIFx1QzY0NFx1QzgwNFx1RDU1QyBKU09OIFx1QkMzMFx1QzVGNFx1Qzc0NCBcdUNDM0VcdUM1NDRcdUJDRjRcdUFFMzBcclxuICAgICAgICAgICAgbGV0IGpzb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXFtbXFxzXFxTXSpcXF0vKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAyLiBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVCQzMwXHVDNUY0XHVDNzc0IFx1QzVDNlx1QzczQ1x1QkE3NCBcdUFDMUNcdUJDQzQgXHVBQzFEXHVDQ0I0XHVCNEU0XHVDNzQ0IFx1Q0MzRVx1QzU0NFx1QzExQyBcdUJDMzBcdUM1RjRcdUI4NUMgXHVCOUNDXHVCNEU0XHVBRTMwXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmplY3RNYXRjaGVzID0gcmVzcG9uc2UubWF0Y2goL1xce1tee31dKlwid29yZFwiW157fV0qXFx9L2cpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdE1hdGNoZXMgJiYgb2JqZWN0TWF0Y2hlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QganNvblN0cmluZyA9ICdbJyArIG9iamVjdE1hdGNoZXMuam9pbignLCcpICsgJ10nO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbkRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzSnNvbkRhdGEoanNvbkRhdGEsIG9yaWdpbmFsV29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUQzMENcdUMyRjEgXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUJCMzRcdUMyRENcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIDMuIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0XHVBRTRDXHVDOUMwIFx1Q0MzRVx1QUUzMFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdENvbXBsZXRlTWF0Y2ggPSByZXNwb25zZS5tYXRjaCgvXFxbW1xcc1xcU10qXFx9KD89XFxzKiQpLyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdENvbXBsZXRlTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBqc29uTWF0Y2ggPSBbbGFzdENvbXBsZXRlTWF0Y2hbMF0gKyAnXSddO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pTT04gXHVCQzMwXHVDNUY0XHVDNzQ0IFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyA0LiBKU09OIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzQgLSBcdUM4MTBcdUM5QzRcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgIGxldCBqc29uRGF0YTtcclxuICAgICAgICAgICAgbGV0IHBhcnNlZExlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAganNvbkRhdGEgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIEpTT04gXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVDODEwXHVDOUM0XHVDODAxIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gNS4gXHVDODEwXHVDOUM0XHVDODAxIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzQgLSBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0XHVCNEU0XHVCOUNDIFx1RDMwQ1x1QzJGMVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMucGFyc2VJbmNyZW1lbnRhbEpzb24ocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyA2LiBKU09OIFx1QkNGNVx1QUQ2QyBcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpeGVkSnNvbiA9IHRoaXMuZml4SnNvblN0cmluZyhqc29uTWF0Y2hbMF0pO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBqc29uRGF0YSA9IEpTT04ucGFyc2UoZml4ZWRKc29uKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHNlY29uZEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKU09OIFx1RDMwQ1x1QzJGMSBcdUJDMEYgXHVCQ0Y1XHVBRDZDIFx1QzJFNFx1RDMyOCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbkRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1Qzc1MVx1QjJGNVx1Qzc3NCBcdUJDMzBcdUM1RjQgXHVENjE1XHVDMkREXHVDNzc0IFx1QzU0NFx1QjJEOVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0pzb25EYXRhKGpzb25EYXRhLCBvcmlnaW5hbFdvcmRzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNUVDXHVCN0VDIFx1QjJFOFx1QzVCNCBcdUM3NTFcdUIyRjUgXHVEMzBDXHVDMkYxIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzZEMFx1QkNGOCBcdUM3NTFcdUIyRjU6JywgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERCBcdUMyREMgXHVCRTQ4IFx1QUNCMFx1QUNGQyBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsV29yZHMubWFwKHdvcmQgPT4gKHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmQudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzgxMFx1QzlDNFx1QzgwMSBKU09OIFx1RDMwQ1x1QzJGMSAtIFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjRcdUI0RTRcdUI5Q0MgXHVEMzBDXHVDMkYxXHJcbiAgICBwcml2YXRlIHBhcnNlSW5jcmVtZW50YWxKc29uKHJlc3BvbnNlOiBzdHJpbmcpOiBXb3JkRGV0YWlsRGF0YVtdIHtcclxuICAgICAgICBjb25zdCByZXN1bHRzOiBXb3JkRGV0YWlsRGF0YVtdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDNjQ0XHVDODA0XHVENTVDIFx1QUMxRFx1Q0NCNFx1QjRFNFx1Qzc0NCBcdUNDM0VcdUFFMzAgKFx1QzYwOFx1QkIzOCBcdUQ1NDRcdUI0REMgXHVEM0VDXHVENTY4KVxyXG4gICAgICAgIGNvbnN0IG9iamVjdFJlZ2V4ID0gL1xce1tee31dKlwid29yZFwiW157fV0qXCJwcm9udW5jaWF0aW9uXCJbXnt9XSpcIm1lYW5pbmdzXCJbXnt9XSpcImV4YW1wbGVzXCJbXnt9XSpcInNpbWlsYXJXb3Jkc1wiW157fV0qXFx9L2c7XHJcbiAgICAgICAgbGV0IG1hdGNoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHdoaWxlICgobWF0Y2ggPSBvYmplY3RSZWdleC5leGVjKHJlc3BvbnNlKSkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdERhdGEgPSBKU09OLnBhcnNlKG1hdGNoWzBdKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3REYXRhICYmIG9iamVjdERhdGEud29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzID0gdGhpcy52YWxpZGF0ZUV4YW1wbGVzKG9iamVjdERhdGEuZXhhbXBsZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhOiBXb3JkRGV0YWlsRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZDogb2JqZWN0RGF0YS53b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IG9iamVjdERhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IEFycmF5LmlzQXJyYXkob2JqZWN0RGF0YS5tZWFuaW5ncykgPyBvYmplY3REYXRhLm1lYW5pbmdzIDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB2YWxpZGF0ZWRFeGFtcGxlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBBcnJheS5pc0FycmF5KG9iamVjdERhdGEuc2ltaWxhcldvcmRzKSA/IG9iamVjdERhdGEuc2ltaWxhcldvcmRzIDogW11cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh3b3JkRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUFDMURcdUNDQjQgXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVCQjM0XHVDMkRDXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICAvLyBXb3JkRGV0YWlsRGF0YVx1Qjk3QyBXb3JkRGF0YVx1Qjg1QyBcdUJDQzBcdUQ2NThcdUQ1NThcdUIyOTQgXHVCQTU0XHVDMTFDXHVCNERDXHJcbiAgICBjb252ZXJ0VG9Xb3JkRGF0YSh3b3JkRGV0YWlsOiBXb3JkRGV0YWlsRGF0YSk6IFdvcmREYXRhIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3b3JkOiB3b3JkRGV0YWlsLndvcmQsXHJcbiAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmREZXRhaWwucHJvbnVuY2lhdGlvbixcclxuICAgICAgICAgICAgbWVhbmluZ3M6IHdvcmREZXRhaWwubWVhbmluZ3MsXHJcbiAgICAgICAgICAgIHNpbWlsYXJXb3Jkczogd29yZERldGFpbC5zaW1pbGFyV29yZHMsXHJcbiAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGV0YWlsLmV4YW1wbGVzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBKU09OIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUNDOThcdUI5QUNcclxuICAgIHByaXZhdGUgcHJvY2Vzc0pzb25EYXRhKGpzb25EYXRhOiBhbnlbXSwgb3JpZ2luYWxXb3Jkczogc3RyaW5nW10pOiBXb3JkRGV0YWlsRGF0YVtdIHtcclxuICAgICAgICBjb25zdCByZXN1bHRzOiBXb3JkRGV0YWlsRGF0YVtdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGpzb25EYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiBpdGVtLndvcmQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzID0gdGhpcy52YWxpZGF0ZUV4YW1wbGVzKGl0ZW0uZXhhbXBsZXMpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YTogV29yZERldGFpbERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZDogaXRlbS53b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogaXRlbS5wcm9udW5jaWF0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBBcnJheS5pc0FycmF5KGl0ZW0ubWVhbmluZ3MpID8gaXRlbS5tZWFuaW5ncyA6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB2YWxpZGF0ZWRFeGFtcGxlcyxcclxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IEFycmF5LmlzQXJyYXkoaXRlbS5zaW1pbGFyV29yZHMpID8gaXRlbS5zaW1pbGFyV29yZHMgOiBbXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh3b3JkRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEpTT04gXHVCQjM4XHVDNzkwXHVDNUY0IFx1QkNGNVx1QUQ2Q1xyXG4gICAgcHJpdmF0ZSBmaXhKc29uU3RyaW5nKGpzb25TdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGZpeGVkID0ganNvblN0cmluZztcclxuICAgICAgICBcclxuICAgICAgICAvLyAxLiBcdUJEODhcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0IFx1QzgxQ1x1QUM3MCAoXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzI3Q1x1RDQ1QyBcdUI0QTRcdUM3NTggXHVCRDg4XHVDNjQ0XHVDODA0XHVENTVDIFx1QkQ4MFx1QkQ4NClcclxuICAgICAgICBjb25zdCBsYXN0Q29tcGxldGVPYmplY3QgPSBmaXhlZC5tYXRjaCgvLipcXH0oPz0sP1xccyokKS8pO1xyXG4gICAgICAgIGlmIChsYXN0Q29tcGxldGVPYmplY3QpIHtcclxuICAgICAgICAgICAgZml4ZWQgPSBsYXN0Q29tcGxldGVPYmplY3RbMF0gKyAnXSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDIuIFx1QzkxMVx1QkNGNVx1QjQxQyBcdUMyN0NcdUQ0NUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8sXFxzKiwvZywgJywnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyAzLiBcdUJDMzBcdUM1RjQgXHVCMDVEXHVDNzU4IFx1QzI3Q1x1RDQ1QyBcdUM4MUNcdUFDNzBcclxuICAgICAgICBmaXhlZCA9IGZpeGVkLnJlcGxhY2UoLyxcXHMqXFxdL2csICddJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gNC4gXHVBQzFEXHVDQ0I0IFx1QjA1RFx1Qzc1OCBcdUMyN0NcdUQ0NUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8sXFxzKlxcfS9nLCAnfScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDUuIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUIwQjRcdUM3NTggXHVDNzc0XHVDMkE0XHVDRjAwXHVDNzc0XHVENTA0XHVCNDE4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUI1MzBcdUM2MzRcdUQ0NUMgXHVDQzk4XHVCOUFDIChsb29rYmVoaW5kIFx1QzVDNlx1Qzc3NClcclxuICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XHJcbiAgICAgICAgbGV0IGluU3RyaW5nID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGVzY2FwZWQgPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpeGVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXIgPSBmaXhlZFtpXTtcclxuICAgICAgICAgICAgY29uc3QgcHJldkNoYXIgPSBpID4gMCA/IGZpeGVkW2kgLSAxXSA6ICcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcIicgJiYgIWVzY2FwZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpblN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUM4ODVcdUI4Q0NcclxuICAgICAgICAgICAgICAgICAgICBpblN0cmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUJCMzhcdUM3OTBcdUM1RjQgXHVDMkRDXHVDNzkxXHJcbiAgICAgICAgICAgICAgICAgICAgaW5TdHJpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICdcIicgJiYgZXNjYXBlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzc0XHVCQkY4IFx1Qzc3NFx1QzJBNFx1Q0YwMFx1Qzc3NFx1RDUwNFx1QjQxQyBcdUI1MzBcdUM2MzRcdUQ0NUNcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICdcIicgJiYgaW5TdHJpbmcgJiYgIWVzY2FwZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUIwQjRcdUJEODBcdUM3NTggXHVDNzc0XHVDMkE0XHVDRjAwXHVDNzc0XHVENTA0XHVCNDE4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUI1MzBcdUM2MzRcdUQ0NUNcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnXFxcXFwiJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlc2NhcGVkID0gKGNoYXIgPT09ICdcXFxcJyAmJiAhZXNjYXBlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGZpeGVkID0gcmVzdWx0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmaXhlZDtcclxuICAgIH1cclxuXHJcbn0gIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCB9IGZyb20gJy4uLy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcclxuaW1wb3J0IHsgVFRTU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL3R0cy9UVFNJbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBUVFNTZXJ2aWNlRmFjdG9yeSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL3R0cy9UVFNTZXJ2aWNlJztcclxuaW1wb3J0IHsgU3BhY2VkUmVwZXRpdGlvblNlcnZpY2UsIFJldmlld1Nlc3Npb24gfSBmcm9tICcuLi8uLi8uLi9jb3JlL3NlcnZpY2VzL1NwYWNlZFJlcGV0aXRpb25TZXJ2aWNlJztcclxuaW1wb3J0IHsgUmV2aWV3UmVzcG9uc2UgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2FsZ29yaXRobXMvU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobSc7XHJcblxyXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIGN1cnJlbnRDYXJkSW5kZXggPSAwO1xyXG4gICAgY2FyZHM6IFZvY2FidWxhcnlDYXJkW10gPSBbXTtcclxuICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgIHByaXZhdGUga2V5ZG93bkhhbmRsZXI6ICgoZTogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgdHRzU2VydmljZTogVFRTU2VydmljZTtcclxuICAgIHByaXZhdGUgc3BhY2VkUmVwZXRpdGlvblNlcnZpY2U6IFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50U2Vzc2lvbjogUmV2aWV3U2Vzc2lvbiB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLnR0c1NlcnZpY2UgPSBUVFNTZXJ2aWNlRmFjdG9yeS5jcmVhdGVUVFNTZXJ2aWNlKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZSA9IG5ldyBTcGFjZWRSZXBldGl0aW9uU2VydmljZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICAvLyBcdUM4MDBcdUM3QTVcdUI0MUMgXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICBjb25zdCBhbGxDYXJkcyA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxXb3JkcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNwYWNlZCBSZXBldGl0aW9uOiBcdUJDRjVcdUMyQjVcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTVDIFx1Q0U3NFx1QjREQ1x1QjRFNFx1QjlDQyBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICB0aGlzLmNhcmRzID0gdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZS5nZXRDYXJkc0ZvclJldmlldyhhbGxDYXJkcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuY2FyZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd05vQ2FyZHNGb3JSZXZpZXcoYWxsQ2FyZHMubGVuZ3RoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QzEzOFx1QzE1OCBcdUMyRENcdUM3OTFcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uID0gdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZS5zdGFydFJldmlld1Nlc3Npb24odGhpcy5jYXJkcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1QzIxQ1x1QzExQyBcdUMxMUVcdUFFMzAgKFx1QzBDOCBcdUNFNzRcdUI0RENcdUFDMDAgXHVCQTNDXHVDODAwIFx1QzYyNFx1QjNDNFx1Qjg1RCBcdUM4NzBcdUM4MTUgXHVBQzAwXHVCMkE1KVxyXG4gICAgICAgIHRoaXMuc2h1ZmZsZUNhcmRzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNob3dDYXJkKCk7XHJcbiAgICAgICAgLy8gXHVEMEE0XHVCQ0Y0XHVCNERDIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI0RjFcdUI4NURcclxuICAgICAgICB0aGlzLmtleWRvd25IYW5kbGVyID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLmNvZGUgPT09ICdTcGFjZScgfHwgZS5rZXkgPT09ICcgJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJzEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXZpZXcoJ2hhcmQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICcyJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmV2aWV3KCdnb29kJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnMycpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJldmlldygnZWFzeScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5ZG93bkhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2h1ZmZsZUNhcmRzKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmNhcmRzLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xyXG4gICAgICAgICAgICBbdGhpcy5jYXJkc1tpXSwgdGhpcy5jYXJkc1tqXV0gPSBbdGhpcy5jYXJkc1tqXSwgdGhpcy5jYXJkc1tpXV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd05vV29yZHNNZXNzYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xyXG5cclxuICAgICAgICBjb25zdCBub1dvcmRzRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbm8td29yZHMtbWVzc2FnZScgfSk7XHJcbiAgICAgICAgbm9Xb3Jkc0VsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDU1OVx1QzJCNVx1RDU2MCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0JyB9KTtcclxuICAgICAgICBub1dvcmRzRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTVcdUM1RDAgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1QyBcdUQ2QzQgXHVCMkU0XHVDMkRDIFx1QzJEQ1x1QjNDNFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gbm9Xb3Jkc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnIH0pO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZENsYXNzKCdjbG9zZS1idXR0b24nKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Tm9DYXJkc0ZvclJldmlldyh0b3RhbENhcmRzOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbGVhcm5pbmctbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxyXG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZXZpZXctbW9kYWwtaGVpZ2h0JywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHR9dmhgKTtcclxuXHJcbiAgICAgICAgY29uc3Qgbm9SZXZpZXdFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICduby1yZXZpZXctbWVzc2FnZScgfSk7XHJcbiAgICAgICAgbm9SZXZpZXdFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0NcdURGODkgXHVDNjI0XHVCMjk4XHVDNzU4IFx1QkNGNVx1QzJCNSBcdUM2NDRcdUI4Q0MhJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodG90YWxDYXJkcyA+IDApIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLmNhbGN1bGF0ZVN0YXRpc3RpY3ModGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCkpO1xyXG4gICAgICAgICAgICBub1Jldmlld0VsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdUNEMUQgJHt0b3RhbENhcmRzfVx1QUMxQ1x1Qzc1OCBcdUIyRThcdUM1QjQgXHVDOTExIFx1QzYyNFx1QjI5OCBcdUJDRjVcdUMyQjVcdUQ1NjAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUJDRjVcdUMyQjUgXHVDNjA4XHVDODE1IFx1QzgxNVx1QkNGNFxyXG4gICAgICAgICAgICBjb25zdCBuZXh0RHVlQ2FyZHMgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLmdldENhcmRzRHVlSW5EYXlzKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCksIFxyXG4gICAgICAgICAgICAgICAgMVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAobmV4dER1ZUNhcmRzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbm9SZXZpZXdFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYFx1QjBCNFx1Qzc3QyBcdUJDRjVcdUMyQjUgXHVDNjA4XHVDODE1OiAke25leHREdWVDYXJkc31cdUFDMUMgXHVCMkU4XHVDNUI0YCBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdUQ1NTlcdUMyQjUgXHVEMUI1XHVBQ0M0XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXRzRWwgPSBub1Jldmlld0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0dWR5LXN0YXRzJyB9KTtcclxuICAgICAgICAgICAgc3RhdHNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ1NTlcdUMyQjUgXHVENjA0XHVENjY5JyB9KTtcclxuICAgICAgICAgICAgc3RhdHNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFx1MjAyMiBcdUMwQzggXHVCMkU4XHVDNUI0OiAke3N0YXRzLm92ZXJhbGwubmV3Q2FyZHN9XHVBQzFDYCB9KTtcclxuICAgICAgICAgICAgc3RhdHNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFx1MjAyMiBcdUQ1NTlcdUMyQjUgXHVDOTExOiAke3N0YXRzLm92ZXJhbGwubGVhcm5pbmdDYXJkc31cdUFDMUNgIH0pO1xyXG4gICAgICAgICAgICBzdGF0c0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgXHUyMDIyIFx1QzY0NFx1QjhDQzogJHtzdGF0cy5vdmVyYWxsLm1hdHVyZUNhcmRzfVx1QUMxQ2AgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbm9SZXZpZXdFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1QzVEMCBcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTVDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gbm9SZXZpZXdFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkVCXHVBRTMwJyB9KTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRDbGFzcygnY2xvc2UtYnV0dG9uJyk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0NhcmQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENhcmRJbmRleCA+PSB0aGlzLmNhcmRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDb21wbGV0aW9uTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjdXJyZW50Q2FyZCA9IHRoaXMuY2FyZHNbdGhpcy5jdXJyZW50Q2FyZEluZGV4XTtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbGVhcm5pbmctbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxyXG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZXZpZXctbW9kYWwtaGVpZ2h0JywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHR9dmhgKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FyZENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2b2NhYnVsYXJ5LWNhcmQnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzBDMVx1QjJFOCBcdUM4MTVcdUJDRjQgXHVDNjAxXHVDNUVEIChib29rIFx1QzgxNVx1QkNGNFx1QzY0MCBcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDIFx1QkM4NFx1RDJCQ1x1Qzc0NCBcdUQ1NjhcdUFFRDggXHVCQzMwXHVDRTU4KVxyXG4gICAgICAgIGNvbnN0IHRvcEluZm9Db250YWluZXIgPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NhcmQtdG9wLWluZm8nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBib29rIFx1QzgxNVx1QkNGNCBcdUQ0NUNcdUMyREMgKFx1QzY3Q1x1Q0FCRClcclxuICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRDdXJyZW50Qm9vaygpO1xyXG4gICAgICAgIGlmIChjdXJyZW50Qm9vaykge1xyXG4gICAgICAgICAgICBjb25zdCBib29rSW5mb0VsID0gdG9wSW5mb0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdib29rLWluZm8tZGlzcGxheScgfSk7XHJcbiAgICAgICAgICAgIGJvb2tJbmZvRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogY3VycmVudEJvb2submFtZSxcclxuICAgICAgICAgICAgICAgIGNsczogJ2N1cnJlbnQtYm9vay1uYW1lJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQyBcdUJDODRcdUQyQkMgKFx1QzYyNFx1Qjk3OFx1Q0FCRClcclxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0b3BJbmZvQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhcmQtZGVsZXRlLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZURlbGV0ZUNhcmQoKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDOUM0XHVENTg5XHVCOTYwIFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzRWwgPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWluZGljYXRvcicgfSk7XHJcbiAgICAgICAgcHJvZ3Jlc3NFbC50ZXh0Q29udGVudCA9IGAke3RoaXMuY3VycmVudENhcmRJbmRleCArIDF9IC8gJHt0aGlzLmNhcmRzLmxlbmd0aH1gO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUQ0NUNcdUMyREMgKFRUUyBcdUJDODRcdUQyQkMgXHVEM0VDXHVENTY4KVxyXG4gICAgICAgIGNvbnN0IHdvcmRDb250YWluZXIgPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtY29udGFpbmVyJyB9KTtcclxuICAgICAgICBjb25zdCB3b3JkRWwgPSB3b3JkQ29udGFpbmVyLmNyZWF0ZUVsKCdoMScsIHsgY2xzOiAnY2FyZC13b3JkJyB9KTtcclxuICAgICAgICBpZiAoY3VycmVudENhcmQucHJvbnVuY2lhdGlvbiAmJiBjdXJyZW50Q2FyZC5wcm9udW5jaWF0aW9uLnRyaW0oKSkge1xyXG4gICAgICAgICAgICB3b3JkRWwudGV4dENvbnRlbnQgPSBjdXJyZW50Q2FyZC53b3JkO1xyXG4gICAgICAgICAgICB3b3JkRWwuYXBwZW5kVGV4dCgnICcpO1xyXG4gICAgICAgICAgICB3b3JkRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFske2N1cnJlbnRDYXJkLnByb251bmNpYXRpb259XWAsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdwcm9udW5jaWF0aW9uJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3b3JkRWwudGV4dENvbnRlbnQgPSBjdXJyZW50Q2FyZC53b3JkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVCQzFDXHVDNzRDIFx1QzdBQ1x1QzBERCBcdUJDODRcdUQyQkNcclxuICAgICAgICBjb25zdCB3b3JkUGxheUJ1dHRvbiA9IHdvcmRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIGNsczogJ3R0cy1wbGF5LWJ1dHRvbiB3b3JkLXBsYXktYnV0dG9uJyxcclxuICAgICAgICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdcdUIyRThcdUM1QjQgXHVCQzFDXHVDNzRDIFx1QjRFM1x1QUUzMCcgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdvcmRQbGF5QnV0dG9uLnRleHRDb250ZW50ID0gJ1x1RDgzRFx1REQwQSc7XHJcbiAgICAgICAgd29yZFBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudHRzU2VydmljZS5zcGVha1dvcmQoY3VycmVudENhcmQud29yZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTRcclxuICAgICAgICBpZiAoY3VycmVudENhcmQuc2ltaWxhcldvcmRzICYmIGN1cnJlbnRDYXJkLnNpbWlsYXJXb3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJTZWN0aW9uID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzaW1pbGFyLXdvcmRzLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgICAgICBzaW1pbGFyU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0XHVCNEU0OicgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJMaXN0ID0gc2ltaWxhclNlY3Rpb24uY3JlYXRlRWwoJ3VsJywgeyBjbHM6ICdzaW1pbGFyLXdvcmRzLWxpc3QnIH0pO1xyXG4gICAgICAgICAgICBjdXJyZW50Q2FyZC5zaW1pbGFyV29yZHMuZm9yRWFjaCh3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgIHNpbWlsYXJMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogd29yZCB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUM2MDhcdUJCMzhcdUI0RTQgKFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUFDMDBcdUM4MzhcdUM2MjggXHVDNjA4XHVCQjM4IFx1QzBBQ1x1QzZBOSlcclxuICAgICAgICBpZiAoY3VycmVudENhcmQuZXhhbXBsZXMgJiYgY3VycmVudENhcmQuZXhhbXBsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlc1NlY3Rpb24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGVzLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgICAgICBleGFtcGxlc1NlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNjA4XHVCQjM4XHVCNEU0OicgfSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDYXJkLmV4YW1wbGVzLmZvckVhY2goKGV4YW1wbGUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGFtcGxlQ29udGFpbmVyID0gZXhhbXBsZXNTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGUtY29udGFpbmVyJyB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAoVFRTIFx1QkM4NFx1RDJCQyBcdUQzRUNcdUQ1NjgpXHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGFtcGxlVGV4dENvbnRhaW5lciA9IGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS10ZXh0LWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmdsaXNoRXhhbXBsZSA9IGV4YW1wbGVUZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBleGFtcGxlLmVuZ2xpc2ggfSk7XHJcbiAgICAgICAgICAgICAgICBlbmdsaXNoRXhhbXBsZS5hZGRDbGFzcygnZW5nbGlzaC1leGFtcGxlJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1QzYwOFx1QkIzOCBcdUJDMUNcdUM3NEMgXHVDN0FDXHVDMEREIFx1QkM4NFx1RDJCQ1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhhbXBsZVBsYXlCdXR0b24gPSBleGFtcGxlVGV4dENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICd0dHMtcGxheS1idXR0b24gZXhhbXBsZS1wbGF5LWJ1dHRvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdcdUM2MDhcdUJCMzggXHVCQzFDXHVDNzRDIFx1QjRFM1x1QUUzMCcgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBleGFtcGxlUGxheUJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdUQ4M0RcdUREMEEnO1xyXG4gICAgICAgICAgICAgICAgZXhhbXBsZVBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnNwZWFrRXhhbXBsZShleGFtcGxlLmVuZ2xpc2gpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgKFx1QzgxNVx1QjJGNSBcdUQ2NTVcdUM3NzggXHVENkM0XHVDNUQwXHVCOUNDIFx1RDQ1Q1x1QzJEQylcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dBbnN3ZXIgJiYgZXhhbXBsZS5rb3JlYW4gJiYgZXhhbXBsZS5rb3JlYW4udHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga29yZWFuRXhhbXBsZSA9IGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4YW1wbGUua29yZWFuIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGtvcmVhbkV4YW1wbGUuYWRkQ2xhc3MoJ2tvcmVhbi1leGFtcGxlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1QzYwOFx1QkIzOFx1Qzc3NCBcdUM1QzZcdUM3NDQgXHVCNTRDIFx1QUUzMFx1QkNGOCBcdUM2MDhcdUJCMzggXHVENDVDXHVDMkRDXHJcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzU2VjdGlvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZXMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIGV4YW1wbGVzU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzhcdUI0RTQ6JyB9KTtcclxuICAgICAgICAgICAgY29uc3QgZXhhbXBsZUNvbnRhaW5lciA9IGV4YW1wbGVzU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlLWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlVGV4dENvbnRhaW5lciA9IGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS10ZXh0LWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hFeGFtcGxlID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFRoaXMgaXMgYW4gZXhhbXBsZSBzZW50ZW5jZSB3aXRoIHRoZSB3b3JkIFwiJHtjdXJyZW50Q2FyZC53b3JkfVwiLmAgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlbmdsaXNoRXhhbXBsZS5hZGRDbGFzcygnZW5nbGlzaC1leGFtcGxlJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUFFMzBcdUJDRjggXHVDNjA4XHVCQjM4IFx1QkMxQ1x1Qzc0QyBcdUM3QUNcdUMwREQgXHVCQzg0XHVEMkJDXHJcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVQbGF5QnV0dG9uID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgICAgICBjbHM6ICd0dHMtcGxheS1idXR0b24gZXhhbXBsZS1wbGF5LWJ1dHRvbicsXHJcbiAgICAgICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1QzYwOFx1QkIzOCBcdUJDMUNcdUM3NEMgXHVCNEUzXHVBRTMwJyB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBleGFtcGxlUGxheUJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdUQ4M0RcdUREMEEnO1xyXG4gICAgICAgICAgICBleGFtcGxlUGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHRzU2VydmljZS5zcGVha0V4YW1wbGUoYFRoaXMgaXMgYW4gZXhhbXBsZSBzZW50ZW5jZSB3aXRoIHRoZSB3b3JkIFwiJHtjdXJyZW50Q2FyZC53b3JkfVwiLmApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgKFx1QzgxNVx1QjJGNSBcdUQ2NTVcdUM3NzggXHVENkM0XHVDNUQwXHVCOUNDIFx1RDQ1Q1x1QzJEQylcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0Fuc3dlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga29yZWFuRXhhbXBsZSA9IGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGBcIiR7Y3VycmVudENhcmQud29yZH1cIlx1Qjc3Q1x1QjI5NCBcdUIyRThcdUM1QjRcdUFDMDAgXHVEM0VDXHVENTY4XHVCNDFDIFx1QzYwOFx1QkIzOFx1Qzc4NVx1QjJDOFx1QjJFNC5gIFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBrb3JlYW5FeGFtcGxlLmFkZENsYXNzKCdrb3JlYW4tZXhhbXBsZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUM4MTVcdUIyRjUgXHVENjU1XHVDNzc4IFx1QkM4NFx1RDJCQ1xyXG4gICAgICAgIGlmICghdGhpcy5zaG93QW5zd2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrQnV0dG9uID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUUzMCcgfSk7XHJcbiAgICAgICAgICAgIGNoZWNrQnV0dG9uLmFkZENsYXNzKCdjaGVjay1hbnN3ZXItYnV0dG9uJyk7XHJcbiAgICAgICAgICAgIGNoZWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHVDODE1XHVCMkY1IFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgICAgICBjb25zdCBhbnN3ZXJTZWN0aW9uID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdhbnN3ZXItc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIGFuc3dlclNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVCNzNCOicgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lYW5pbmdzTGlzdCA9IGFuc3dlclNlY3Rpb24uY3JlYXRlRWwoJ3VsJywgeyBjbHM6ICdtZWFuaW5ncy1saXN0JyB9KTtcclxuICAgICAgICAgICAgY3VycmVudENhcmQubWVhbmluZ3MuZm9yRWFjaChtZWFuaW5nID0+IHtcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IG1lYW5pbmcgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QkM4NFx1RDJCQ1x1QjRFNFxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJldmlld0J1dHRvbnMoY2FyZENvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlUmV2aWV3QnV0dG9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgcmV2aWV3U2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXZpZXctYnV0dG9ucy1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBHZXQgbmV4dCByZXZpZXcgaW50ZXJ2YWxzIGZvciBjdXJyZW50IGNhcmRcclxuICAgICAgICBjb25zdCBjdXJyZW50Q2FyZCA9IHRoaXMuY2FyZHNbdGhpcy5jdXJyZW50Q2FyZEluZGV4XTtcclxuICAgICAgICBjb25zdCBpbnRlcnZhbHMgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLmdldE5leHRSZXZpZXdJbnRlcnZhbHMoY3VycmVudENhcmQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEhhcmQgYnV0dG9uIHdpdGggaW50ZXJ2YWxcclxuICAgICAgICBjb25zdCBoYXJkQnV0dG9uID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcbiAgICAgICAgaGFyZEJ1dHRvbi5hZGRDbGFzcygncmV2aWV3LWJ1dHRvbicsICdoYXJkLWJ1dHRvbicpO1xyXG4gICAgICAgIGNvbnN0IGhhcmRDb250ZW50ID0gaGFyZEJ1dHRvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tY29udGVudCcgfSk7XHJcbiAgICAgICAgaGFyZENvbnRlbnQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdcdUM1QjRcdUI4MjRcdUM2QzAnLCBjbHM6ICdidXR0b24tbGFiZWwnIH0pO1xyXG4gICAgICAgIGhhcmRDb250ZW50LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBpbnRlcnZhbHMuaGFyZC5kaXNwbGF5VGV4dCwgY2xzOiAnYnV0dG9uLWludGVydmFsJyB9KTtcclxuICAgICAgICBoYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2hhcmQnKSk7XHJcblxyXG4gICAgICAgIC8vIEdvb2QgYnV0dG9uIHdpdGggaW50ZXJ2YWxcclxuICAgICAgICBjb25zdCBnb29kQnV0dG9uID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcbiAgICAgICAgZ29vZEJ1dHRvbi5hZGRDbGFzcygncmV2aWV3LWJ1dHRvbicsICdnb29kLWJ1dHRvbicpO1xyXG4gICAgICAgIGNvbnN0IGdvb2RDb250ZW50ID0gZ29vZEJ1dHRvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tY29udGVudCcgfSk7XHJcbiAgICAgICAgZ29vZENvbnRlbnQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdcdUM4OEJcdUM3NEMnLCBjbHM6ICdidXR0b24tbGFiZWwnIH0pO1xyXG4gICAgICAgIGdvb2RDb250ZW50LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBpbnRlcnZhbHMuZ29vZC5kaXNwbGF5VGV4dCwgY2xzOiAnYnV0dG9uLWludGVydmFsJyB9KTtcclxuICAgICAgICBnb29kQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2dvb2QnKSk7XHJcblxyXG4gICAgICAgIC8vIEVhc3kgYnV0dG9uIHdpdGggaW50ZXJ2YWxcclxuICAgICAgICBjb25zdCBlYXN5QnV0dG9uID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcbiAgICAgICAgZWFzeUJ1dHRvbi5hZGRDbGFzcygncmV2aWV3LWJ1dHRvbicsICdlYXN5LWJ1dHRvbicpO1xyXG4gICAgICAgIGNvbnN0IGVhc3lDb250ZW50ID0gZWFzeUJ1dHRvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tY29udGVudCcgfSk7XHJcbiAgICAgICAgZWFzeUNvbnRlbnQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdcdUMyNkNcdUM2QzAnLCBjbHM6ICdidXR0b24tbGFiZWwnIH0pO1xyXG4gICAgICAgIGVhc3lDb250ZW50LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBpbnRlcnZhbHMuZWFzeS5kaXNwbGF5VGV4dCwgY2xzOiAnYnV0dG9uLWludGVydmFsJyB9KTtcclxuICAgICAgICBlYXN5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2Vhc3knKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVSZXZpZXcoZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudENhcmQgPSB0aGlzLmNhcmRzW3RoaXMuY3VycmVudENhcmRJbmRleF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgU3BhY2VkUmVwZXRpdGlvblNlcnZpY2UgaGFzIGFuIGFjdGl2ZSBzZXNzaW9uXHJcbiAgICAgICAgY29uc3QgYWN0aXZlU2Vzc2lvbiA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UuZ2V0Q3VycmVudFNlc3Npb24oKTtcclxuICAgICAgICBpZiAoIWFjdGl2ZVNlc3Npb24pIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gYWN0aXZlIHJldmlldyBzZXNzaW9uIGluIFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlJyk7XHJcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBzdGFydCBhIG5ldyBzZXNzaW9uIHdpdGggcmVtYWluaW5nIGNhcmRzXHJcbiAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0NhcmRzID0gdGhpcy5jYXJkcy5zbGljZSh0aGlzLmN1cnJlbnRDYXJkSW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAocmVtYWluaW5nQ2FyZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbiA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2Uuc3RhcnRSZXZpZXdTZXNzaW9uKHJlbWFpbmluZ0NhcmRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHJlbWFpbmluZyBjYXJkcyB0byByZXZpZXcnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBDb252ZXJ0IGRpZmZpY3VsdHkgdG8gUmV2aWV3UmVzcG9uc2UgZW51bVxyXG4gICAgICAgIGNvbnN0IHJldmlld1Jlc3BvbnNlID0gZGlmZmljdWx0eSBhcyBSZXZpZXdSZXNwb25zZTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBQcm9jZXNzIHJldmlldyB1c2luZyBzcGFjZWQgcmVwZXRpdGlvbiBzZXJ2aWNlXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UucHJvY2Vzc1JldmlldyhjdXJyZW50Q2FyZCwgcmV2aWV3UmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGNhcmQgaW4gZGF0YWJhc2Ugd2l0aCBuZXcgc2NoZWR1bGUgaW5mb3JtYXRpb25cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmRXaXRoU2NoZWR1bGUoXHJcbiAgICAgICAgICAgICAgICByZXN1bHQudXBkYXRlZENhcmQud29yZCwgXHJcbiAgICAgICAgICAgICAgICBkaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnVwZGF0ZWRDYXJkLnNjaGVkdWxlSW5mb1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1Q0U3NFx1QjREQ1x1Qjg1QyBcdUM3NzRcdUIzRDlcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4Kys7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDYXJkKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3Npbmcgc3BhY2VkIHJlcGV0aXRpb24gcmV2aWV3OicsIGVycm9yKTtcclxuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gb2xkIG1ldGhvZCBpZiBzcGFjZWQgcmVwZXRpdGlvbiBmYWlsc1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZChjdXJyZW50Q2FyZC53b3JkLCBkaWZmaWN1bHR5KTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4Kys7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDYXJkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50Q2FyZCA9IHRoaXMuY2FyZHNbdGhpcy5jdXJyZW50Q2FyZEluZGV4XTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxyXG4gICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMnLFxyXG4gICAgICAgICAgICBgXCIke2N1cnJlbnRDYXJkLndvcmR9XCIgXHVCMkU4XHVDNUI0XHVCOTdDIFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz9cXG5cXG5cdUM3NzQgXHVDNzkxXHVDNUM1XHVDNzQwIFx1QjQxOFx1QjNDQ1x1QjlCNCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmAsXHJcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUNcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIucmVtb3ZlV29yZChjdXJyZW50Q2FyZC53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVCMkU4XHVDNUI0IFx1QkFBOVx1Qjg1RFx1QzVEMFx1QzExQ1x1QjNDNCBcdUM4MUNcdUFDNzBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmRzLnNwbGljZSh0aGlzLmN1cnJlbnRDYXJkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUIzNTQgXHVDNzc0XHVDMEMxIFx1QzVDNlx1QzczQ1x1QkE3NCBcdUM2NDRcdUI4Q0MgXHVENjU0XHVCQTc0XHVDNzNDXHVCODVDXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FyZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbXBsZXRpb25NZXNzYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1Qzc3OFx1QjM3MVx1QzJBNFx1QUMwMCBcdUIyRThcdUM1QjQgXHVCQUE5XHVCODVEIFx1QkM5NFx1QzcwNFx1Qjk3QyBcdUJDOTdcdUM1QjRcdUIwOThcdUJBNzQgXHVDODcwXHVDODE1XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudENhcmRJbmRleCA+PSB0aGlzLmNhcmRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXggPSB0aGlzLmNhcmRzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUIyRThcdUM1QjQgXHVENDVDXHVDMkRDXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDIFx1QzkxMSBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0NvbXBsZXRpb25NZXNzYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xyXG5cclxuICAgICAgICBjb25zdCBjb21wbGV0aW9uRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29tcGxldGlvbi1tZXNzYWdlJyB9KTtcclxuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVENTU5XHVDMkI1IFx1QzY0NFx1QjhDQyEnIH0pO1xyXG4gICAgICAgIGNvbXBsZXRpb25FbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFx1QzYyNFx1QjI5OCAke3RoaXMuY2FyZHMubGVuZ3RofVx1QUMxQ1x1Qzc1OCBcdUIyRThcdUM1QjQgXHVENTU5XHVDMkI1XHVDNzQ0IFx1QzY0NFx1QjhDQ1x1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC5gIH0pO1xyXG5cclxuICAgICAgICBjb25zdCByZXN0YXJ0QnV0dG9uID0gY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRTRcdUMyREMgXHVENTU5XHVDMkI1XHVENTU4XHVBRTMwJyB9KTtcclxuICAgICAgICByZXN0YXJ0QnV0dG9uLmFkZENsYXNzKCdyZXN0YXJ0LWJ1dHRvbicpO1xyXG4gICAgICAgIHJlc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnIH0pO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZENsYXNzKCdjbG9zZS1idXR0b24nKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMua2V5ZG93bkhhbmRsZXIpIHtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleWRvd25IYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5rZXlkb3duSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUFDMDRcdUIyRThcdUQ1NUMgXHVENjU1XHVDNzc4IFx1QkFBOFx1QjJFQyBcdUQwNzRcdUI3OThcdUMyQTRcclxuY2xhc3MgQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgdGl0bGU6IHN0cmluZztcclxuICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgIG9uQ29uZmlybTogKCkgPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGl0bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBvbkNvbmZpcm06ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIHRoaXMub25Db25maXJtID0gb25Db25maXJtO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2NvbmZpcm0tbW9kYWwnKTtcclxuXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy50aXRsZSwgY2xzOiAnbW9kYWwtdGl0bGUnIH0pO1xyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlLCBjbHM6ICdtb2RhbC1tZXNzYWdlJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUQ2NTVcdUM3NzgnLFxyXG4gICAgICAgICAgICBjbHM6ICdjb25maXJtLWJ1dHRvbiBwcmltYXJ5J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25Db25maXJtKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFRUU1NlcnZpY2UgfSBmcm9tICcuL1RUU0ludGVyZmFjZSc7XHJcbmltcG9ydCB7IEF1ZGlvTWFuYWdlciwgTmV0d29ya1Jlc291cmNlTWFuYWdlciB9IGZyb20gJy4uLy4uL3NoYXJlZC9BdWRpb01hbmFnZXInO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDaGF0dGVyYm94VFRTU2V0dGluZ3Mge1xyXG4gICAgZW5hYmxlZDogYm9vbGVhbjtcclxuICAgIGFwaVVybDogc3RyaW5nO1xyXG4gICAgdm9pY2U6IHN0cmluZztcclxuICAgIHJlc3BvbnNlX2Zvcm1hdDogc3RyaW5nO1xyXG4gICAgc3BlZWQ6IG51bWJlcjtcclxuICAgIGV4YWdnZXJhdGlvbjogbnVtYmVyO1xyXG4gICAgY2ZnV2VpZ2h0OiBudW1iZXI7XHJcbiAgICB0ZW1wZXJhdHVyZTogbnVtYmVyO1xyXG4gICAgc3RyZWFtaW5nX2NodW5rX3NpemU6IG51bWJlcjtcclxuICAgIHN0cmVhbWluZ19zdHJhdGVneTogc3RyaW5nO1xyXG4gICAgc3RyZWFtaW5nX2J1ZmZlcl9zaXplOiBudW1iZXI7XHJcbiAgICBzdHJlYW1pbmdfcXVhbGl0eTogc3RyaW5nO1xyXG4gICAgYXV0b1BsYXk6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdHRlcmJveFRUU1JlcXVlc3Qge1xyXG4gICAgaW5wdXQ6IHN0cmluZztcclxuICAgIHZvaWNlPzogc3RyaW5nO1xyXG4gICAgcmVzcG9uc2VfZm9ybWF0Pzogc3RyaW5nO1xyXG4gICAgc3BlZWQ/OiBudW1iZXI7XHJcbiAgICBleGFnZ2VyYXRpb24/OiBudW1iZXI7XHJcbiAgICBjZmdfd2VpZ2h0PzogbnVtYmVyO1xyXG4gICAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XHJcbiAgICBzdHJlYW1pbmdfY2h1bmtfc2l6ZT86IG51bWJlcjtcclxuICAgIHN0cmVhbWluZ19zdHJhdGVneT86IHN0cmluZztcclxuICAgIHN0cmVhbWluZ19idWZmZXJfc2l6ZT86IG51bWJlcjtcclxuICAgIHN0cmVhbWluZ19xdWFsaXR5Pzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hhdHRlcmJveFRUU1NlcnZpY2UgaW1wbGVtZW50cyBUVFNTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgc2V0dGluZ3M6IENoYXR0ZXJib3hUVFNTZXR0aW5ncztcclxuICAgIHByaXZhdGUgYXVkaW9NYW5hZ2VyOiBBdWRpb01hbmFnZXI7XHJcbiAgICBwcml2YXRlIG5ldHdvcmtNYW5hZ2VyOiBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBhdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgY3VycmVudEF1ZGlvQ29udGV4dDogQXVkaW9Db250ZXh0IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IENoYXR0ZXJib3hUVFNTZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLmVuYWJsZWQgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgIGFwaVVybDogc2V0dGluZ3MuYXBpVXJsIHx8ICdodHRwOi8vbG9jYWxob3N0OjQxMjMnLFxyXG4gICAgICAgICAgICB2b2ljZTogc2V0dGluZ3Mudm9pY2UgfHwgJ2FsbG95JyxcclxuICAgICAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiBzZXR0aW5ncy5yZXNwb25zZV9mb3JtYXQgfHwgJ3dhdicsXHJcbiAgICAgICAgICAgIHNwZWVkOiBzZXR0aW5ncy5zcGVlZCB8fCAxLFxyXG4gICAgICAgICAgICBleGFnZ2VyYXRpb246IHNldHRpbmdzLmV4YWdnZXJhdGlvbiB8fCAwLjI1LFxyXG4gICAgICAgICAgICBjZmdXZWlnaHQ6IHNldHRpbmdzLmNmZ1dlaWdodCB8fCAxLFxyXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogc2V0dGluZ3MudGVtcGVyYXR1cmUgfHwgMC4wNSxcclxuICAgICAgICAgICAgc3RyZWFtaW5nX2NodW5rX3NpemU6IHNldHRpbmdzLnN0cmVhbWluZ19jaHVua19zaXplIHx8IDUwLFxyXG4gICAgICAgICAgICBzdHJlYW1pbmdfc3RyYXRlZ3k6IHNldHRpbmdzLnN0cmVhbWluZ19zdHJhdGVneSB8fCAnc3RyaW5nJyxcclxuICAgICAgICAgICAgc3RyZWFtaW5nX2J1ZmZlcl9zaXplOiBzZXR0aW5ncy5zdHJlYW1pbmdfYnVmZmVyX3NpemUgfHwgMSxcclxuICAgICAgICAgICAgc3RyZWFtaW5nX3F1YWxpdHk6IHNldHRpbmdzLnN0cmVhbWluZ19xdWFsaXR5IHx8ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICBhdXRvUGxheTogc2V0dGluZ3MuYXV0b1BsYXkgfHwgZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuYXVkaW9NYW5hZ2VyID0gQXVkaW9NYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgdGhpcy5uZXR3b3JrTWFuYWdlciA9IE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzcGVha1RleHQodGV4dDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnVFRTIFx1QUUzMFx1QjJBNVx1Qzc3NCBcdUJFNDRcdUQ2NUNcdUMxMzFcdUQ2NTRcdUI0MThcdUM1QjQgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRleHQgfHwgdGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVFRTOiBcdUJFNDggXHVEMTREXHVDMkE0XHVEMkI4XHVDNzg1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDN0FDXHVDMEREIFx1QzkxMVx1Qzc3OCBcdUM2MjRcdUI1MTRcdUM2MjRcdUFDMDAgXHVDNzg4XHVDNzNDXHVCQTc0IFx1QzkxMVx1QzlDMFxyXG4gICAgICAgICAgICB0aGlzLnN0b3BTcGVha2luZygpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hhdHRlcmJveCBUVFMgQVBJIFx1RDYzOFx1Q0Q5Q1xyXG4gICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSBhd2FpdCB0aGlzLmNhbGxDaGF0dGVyYm94QVBJKHRleHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERFxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsYXlBdWRpb0Jsb2IoYXVkaW9CbG9iKTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2hhdHRlcmJveCBUVFMgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnVFRTIFx1Qzc0Q1x1QzEzMSBcdUMwRERcdUMxMzFcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODRcdUFDMDAgXHVDMkU0XHVENTg5IFx1QzkxMVx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoIXdvcmQgfHwgd29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVFRTOiBcdUJFNDggXHVCMkU4XHVDNUI0XHVDNzg1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnNwZWFrVGV4dCh3b3JkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzcGVha0V4YW1wbGUoZXhhbXBsZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKCFleGFtcGxlIHx8IGV4YW1wbGUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUzogXHVCRTQ4IFx1QzYwOFx1QkIzOFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zcGVha1RleHQoZXhhbXBsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsQ2hhdHRlcmJveEFQSSh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPEJsb2I+IHtcclxuICAgICAgICAvLyBcdUQxNERcdUMyQTRcdUQyQjggXHVBRTM4XHVDNzc0IFx1QzgxQ1x1RDU1QyAoQ2hhdHRlcmJveCBcdUFEOENcdUM3QTU6IDMwMDBcdUM3OTApXHJcbiAgICAgICAgY29uc3QgdHJ1bmNhdGVkVGV4dCA9IHRleHQubGVuZ3RoID4gMzAwMCA/IHRleHQuc3Vic3RyaW5nKDAsIDMwMDApIDogdGV4dDtcclxuXHJcbiAgICAgICAgY29uc3QgcmVxdWVzdEJvZHk6IENoYXR0ZXJib3hUVFNSZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICBpbnB1dDogdHJ1bmNhdGVkVGV4dCxcclxuICAgICAgICAgICAgdm9pY2U6IHRoaXMuc2V0dGluZ3Mudm9pY2UsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlX2Zvcm1hdDogdGhpcy5zZXR0aW5ncy5yZXNwb25zZV9mb3JtYXQsXHJcbiAgICAgICAgICAgIHNwZWVkOiB0aGlzLnNldHRpbmdzLnNwZWVkLFxyXG4gICAgICAgICAgICBleGFnZ2VyYXRpb246IHRoaXMuc2V0dGluZ3MuZXhhZ2dlcmF0aW9uLFxyXG4gICAgICAgICAgICBjZmdfd2VpZ2h0OiB0aGlzLnNldHRpbmdzLmNmZ1dlaWdodCxcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHRoaXMuc2V0dGluZ3MudGVtcGVyYXR1cmUsXHJcbiAgICAgICAgICAgIHN0cmVhbWluZ19jaHVua19zaXplOiB0aGlzLnNldHRpbmdzLnN0cmVhbWluZ19jaHVua19zaXplLFxyXG4gICAgICAgICAgICBzdHJlYW1pbmdfc3RyYXRlZ3k6IHRoaXMuc2V0dGluZ3Muc3RyZWFtaW5nX3N0cmF0ZWd5LFxyXG4gICAgICAgICAgICBzdHJlYW1pbmdfYnVmZmVyX3NpemU6IHRoaXMuc2V0dGluZ3Muc3RyZWFtaW5nX2J1ZmZlcl9zaXplLFxyXG4gICAgICAgICAgICBzdHJlYW1pbmdfcXVhbGl0eTogdGhpcy5zZXR0aW5ncy5zdHJlYW1pbmdfcXVhbGl0eVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuc2V0dGluZ3MuYXBpVXJsfS92MS9hdWRpby9zcGVlY2hgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYXR0ZXJib3ggVFRTIEFQSSBcdUM2MjRcdUI5NTg6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcclxuICAgICAgICBpZiAoIWNvbnRlbnRUeXBlIHx8ICFjb250ZW50VHlwZS5pbmNsdWRlcygnYXVkaW8nKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QzYwOFx1QzBDMVx1RDU1OFx1QzlDMCBcdUJBQkJcdUQ1NUMgXHVDNzUxXHVCMkY1IFx1RDYxNVx1QzJERDogJHtjb250ZW50VHlwZX1gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5ibG9iKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBwbGF5QXVkaW9CbG9iKGF1ZGlvQmxvYjogQmxvYik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUM3NzRcdUM4MDQgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9FbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5zcmMgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUMwQzggXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzVEOFx1QjlBQ1x1QkEzQ1x1RDJCOCBcdUMwRERcdUMxMzFcclxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50ID0gbmV3IEF1ZGlvKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIEJsb2JcdUM3NDQgVVJMXHVCODVDIFx1QkNDMFx1RDY1OFxyXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5zcmMgPSBhdWRpb1VybDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzEyNFx1QzgxNVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQub25lbmRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50Lm9ubG9hZGVkZGF0YSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQucGxheSgpLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVCODVDXHVCNERDIFx1QzJEQ1x1Qzc5MVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQubG9hZCgpO1xyXG5cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdG9wU3BlYWtpbmcoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFVSTCBcdUM4MTVcdUI5QUNcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9FbGVtZW50LnNyYyAmJiB0aGlzLmF1ZGlvRWxlbWVudC5zcmMuc3RhcnRzV2l0aCgnYmxvYjonKSkge1xyXG4gICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLmF1ZGlvRWxlbWVudC5zcmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5zcmMgPSAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRBdWRpb0NvbnRleHQpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QXVkaW9Db250ZXh0LmNsb3NlKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEF1ZGlvQ29udGV4dCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzUGF1c2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5hdWRpb0VsZW1lbnQgfHwgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2VkO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc3VtZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQgJiYgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnBsYXkoKS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVBQzFDIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVBQzFDXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhdXNlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCAmJiAhdGhpcy5hdWRpb0VsZW1lbnQucGF1c2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPENoYXR0ZXJib3hUVFNTZXR0aW5ncz4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0geyAuLi50aGlzLnNldHRpbmdzLCAuLi5uZXdTZXR0aW5ncyB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzVGMFx1QUNCMCBcdUQxNENcdUMyQTRcdUQyQjhcclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RUZXh0ID0gJ0hlbGxvLCB0aGlzIGlzIGEgdGVzdC4nO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNhbGxDaGF0dGVyYm94QVBJKHRlc3RUZXh0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2hhdHRlcmJveCBUVFMgXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzBBQ1x1QzZBOSBcdUFDMDBcdUIyQTVcdUQ1NUMgXHVDNzRDXHVDMTMxIFx1QkFBOVx1Qjg1RCAoQ2hhdHRlcmJveFx1QjI5NCBjdXN0b20gdm9pY2UgXHVDOUMwXHVDNkQwKVxyXG4gICAgZ2V0QXZhaWxhYmxlVm9pY2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICAvLyBPcGVuQUkgXHVENjM4XHVENjU4IFx1Qzc0Q1x1QzEzMVx1QjRFNCArIFx1Q0VFNFx1QzJBNFx1RDE0MCBcdUM3NENcdUMxMzEgXHVDOUMwXHVDNkQwXHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgJ2FsbG95JyxcclxuICAgICAgICAgICAgJ2VjaG8nLCBcclxuICAgICAgICAgICAgJ2ZhYmxlJyxcclxuICAgICAgICAgICAgJ29ueXgnLFxyXG4gICAgICAgICAgICAnbm92YScsXHJcbiAgICAgICAgICAgICdzaGltbWVyJyxcclxuICAgICAgICAgICAgJ2N1c3RvbScgLy8gXHVDMEFDXHVDNkE5XHVDNzkwIFx1QzgxNVx1Qzc1OCBcdUM3NENcdUMxMzFcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMxMjRcdUM4MTUgXHVDODE1XHVCQ0Y0IFx1QkMxOFx1RDY1OFxyXG4gICAgZ2V0U2V0dGluZ3MoKTogQ2hhdHRlcmJveFRUU1NldHRpbmdzIHtcclxuICAgICAgICByZXR1cm4geyAuLi50aGlzLnNldHRpbmdzIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCOUFDXHVDMThDXHVDMkE0IFx1QzgxNVx1QjlBQ1xyXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0b3BTcGVha2luZygpO1xyXG4gICAgICAgIHRoaXMuYXVkaW9FbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRBdWRpb0NvbnRleHQgPSBudWxsO1xyXG4gICAgfVxyXG59IiwgIi8vIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUI5QUNcdUMxOENcdUMyQTQgXHVBRDAwXHVCOUFDIFx1QkMwRiBcdUM4MTVcdUI5QUNcclxuXHJcbmV4cG9ydCBjbGFzcyBBdWRpb01hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEF1ZGlvTWFuYWdlcjtcclxuICAgIHByaXZhdGUgYWN0aXZlQXVkaW9FbGVtZW50czogU2V0PEhUTUxBdWRpb0VsZW1lbnQ+ID0gbmV3IFNldCgpO1xyXG4gICAgcHJpdmF0ZSBhdWRpb1Bvb2w6IEhUTUxBdWRpb0VsZW1lbnRbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBtYXhQb29sU2l6ZSA9IDEwO1xyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBBdWRpb01hbmFnZXIge1xyXG4gICAgICAgIGlmICghQXVkaW9NYW5hZ2VyLmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIEF1ZGlvTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBBdWRpb01hbmFnZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEF1ZGlvTWFuYWdlci5pbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDIFx1QzBERFx1QzEzMSBcdUJDMEYgXHVBRDAwXHVCOUFDXHJcbiAgICBjcmVhdGVBdWRpbyhzcmM6IHN0cmluZyk6IEhUTUxBdWRpb0VsZW1lbnQge1xyXG4gICAgICAgIGxldCBhdWRpbzogSFRNTEF1ZGlvRWxlbWVudDtcclxuXHJcbiAgICAgICAgLy8gXHVENDgwXHVDNUQwXHVDMTFDIFx1QzdBQ1x1QzBBQ1x1QzZBOSBcdUFDMDBcdUIyQTVcdUQ1NUMgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzY5NFx1QzE4QyBcdUNDM0VcdUFFMzBcclxuICAgICAgICBjb25zdCBhdmFpbGFibGVBdWRpbyA9IHRoaXMuYXVkaW9Qb29sLmZpbmQoYSA9PiBhLmVuZGVkIHx8IGEucGF1c2VkKTtcclxuICAgICAgICBpZiAoYXZhaWxhYmxlQXVkaW8pIHtcclxuICAgICAgICAgICAgYXVkaW8gPSBhdmFpbGFibGVBdWRpbztcclxuICAgICAgICAgICAgYXVkaW8uc3JjID0gc3JjO1xyXG4gICAgICAgICAgICBhdWRpby5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXVkaW8gPSBuZXcgQXVkaW8oc3JjKTtcclxuICAgICAgICAgICAgdGhpcy5zZXR1cEF1ZGlvRWxlbWVudChhdWRpbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFjdGl2ZUF1ZGlvRWxlbWVudHMuYWRkKGF1ZGlvKTtcclxuICAgICAgICByZXR1cm4gYXVkaW87XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzY5NFx1QzE4QyBcdUMxMjRcdUM4MTVcclxuICAgIHByaXZhdGUgc2V0dXBBdWRpb0VsZW1lbnQoYXVkaW86IEhUTUxBdWRpb0VsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM3OTBcdUIzRDkgXHVDODE1XHVCOUFDIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDhcclxuICAgICAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbGVhc2VBdWRpbyhhdWRpbyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBjbGVhbnVwLCB7IG9uY2U6IHRydWUgfSk7XHJcbiAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBjbGVhbnVwLCB7IG9uY2U6IHRydWUgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QkE1NFx1QkFBOFx1QjlBQyBcdUIyMDRcdUMyMTggXHVCQzI5XHVDOUMwXHVCOTdDIFx1QzcwNFx1RDU1QyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzNcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5oYXMoYXVkaW8pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2VBdWRpbyhhdWRpbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAzMDAwMCk7IC8vIDMwXHVDRDA4IFx1RDZDNCBcdUM3OTBcdUIzRDkgXHVDODE1XHVCOUFDXHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCAoXHVDNTQ4XHVDODA0XHVENTVDIFx1Qjc5OFx1RDM3QylcclxuICAgIGFzeW5jIHBsYXlBdWRpbyhzcmM6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGF1ZGlvID0gdGhpcy5jcmVhdGVBdWRpbyhzcmMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGF1ZGlvLnBsYXkoKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlbGVhc2VBdWRpbyhhdWRpbyk7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDIFx1RDU3NFx1QzgxQ1xyXG4gICAgcmVsZWFzZUF1ZGlvKGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZUF1ZGlvRWxlbWVudHMuaGFzKGF1ZGlvKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBcdUM3QUNcdUMwREQgXHVDOTExXHVDNzc0XHVCQTc0IFx1QzgxNVx1QzlDMFxyXG4gICAgICAgIGlmICghYXVkaW8ucGF1c2VkKSB7XHJcbiAgICAgICAgICAgIGF1ZGlvLnBhdXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUQ2NUNcdUMxMzEgXHVCQUE5XHVCODVEXHVDNUQwXHVDMTFDIFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIHRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5kZWxldGUoYXVkaW8pO1xyXG5cclxuICAgICAgICAvLyBcdUQ0ODBcdUM1RDAgXHVCQzE4XHVENjU4IChcdUQwNkNcdUFFMzAgXHVDODFDXHVENTVDKVxyXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvUG9vbC5sZW5ndGggPCB0aGlzLm1heFBvb2xTaXplKSB7XHJcbiAgICAgICAgICAgIGF1ZGlvLnJlbW92ZUF0dHJpYnV0ZSgnc3JjJyk7XHJcbiAgICAgICAgICAgIGF1ZGlvLmxvYWQoKTsgLy8gXHVCQTU0XHVCQUE4XHVCOUFDIFx1RDU3NFx1QzgxQ1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvUG9vbC5wdXNoKGF1ZGlvKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdUQ0ODBcdUM3NzQgXHVBQzAwXHVCNEREIFx1Q0MyQyBcdUFDQkRcdUM2QjAgXHVDNjQ0XHVDODA0XHVENzg4IFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VBdWRpbyhhdWRpbyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM2OTRcdUMxOEMgXHVDNjQ0XHVDODA0IFx1QzgxNVx1QjlBQ1xyXG4gICAgcHJpdmF0ZSBkaXNwb3NlQXVkaW8oYXVkaW86IEhUTUxBdWRpb0VsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICBhdWRpby5wYXVzZSgpO1xyXG4gICAgICAgIGF1ZGlvLnJlbW92ZUF0dHJpYnV0ZSgnc3JjJyk7XHJcbiAgICAgICAgYXVkaW8ubG9hZCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QkFBOFx1QjRFMCBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIGNvbnN0IG5ld0F1ZGlvID0gYXVkaW8uY2xvbmVOb2RlKCkgYXMgSFRNTEF1ZGlvRWxlbWVudDtcclxuICAgICAgICBhdWRpby5wYXJlbnROb2RlPy5yZXBsYWNlQ2hpbGQobmV3QXVkaW8sIGF1ZGlvKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJBQThcdUI0RTAgXHVENjVDXHVDMTMxIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM4MTVcdUM5QzBcclxuICAgIHN0b3BBbGxBdWRpbygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZUF1ZGlvRWxlbWVudHMuZm9yRWFjaChhdWRpbyA9PiB7XHJcbiAgICAgICAgICAgIGlmICghYXVkaW8ucGF1c2VkKSB7XHJcbiAgICAgICAgICAgICAgICBhdWRpby5wYXVzZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCQUE4XHVCNEUwIFx1QjlBQ1x1QzE4Q1x1QzJBNCBcdUM4MTVcdUI5QUNcclxuICAgIGNsZWFudXAoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVCQUE4XHVCNEUwIFx1RDY1Q1x1QzEzMSBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDODE1XHVCOUFDXHJcbiAgICAgICAgdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmZvckVhY2goYXVkaW8gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VBdWRpbyhhdWRpbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIC8vIFx1RDQ4MFx1Qzc1OCBcdUJBQThcdUI0RTAgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgIHRoaXMuYXVkaW9Qb29sLmZvckVhY2goYXVkaW8gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VBdWRpbyhhdWRpbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hdWRpb1Bvb2wuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMEMxXHVEMERDIFx1QzgxNVx1QkNGNFxyXG4gICAgZ2V0U3RhdHVzKCk6IHsgYWN0aXZlOiBudW1iZXI7IHBvb2xlZDogbnVtYmVyIH0ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFjdGl2ZTogdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLnNpemUsXHJcbiAgICAgICAgICAgIHBvb2xlZDogdGhpcy5hdWRpb1Bvb2wubGVuZ3RoXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QjlBQ1x1QzE4Q1x1QzJBNCBcdUFEMDBcdUI5QUNcclxuZXhwb3J0IGNsYXNzIE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IE5ldHdvcmtSZXNvdXJjZU1hbmFnZXI7XHJcbiAgICBwcml2YXRlIGFib3J0Q29udHJvbGxlcnM6IFNldDxBYm9ydENvbnRyb2xsZXI+ID0gbmV3IFNldCgpO1xyXG4gICAgcHJpdmF0ZSBhY3RpdmVSZXF1ZXN0czogTWFwPHN0cmluZywgQWJvcnRDb250cm9sbGVyPiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogTmV0d29ya1Jlc291cmNlTWFuYWdlciB7XHJcbiAgICAgICAgaWYgKCFOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyLmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIuaW5zdGFuY2UgPSBuZXcgTmV0d29ya1Jlc291cmNlTWFuYWdlcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gTmV0d29ya1Jlc291cmNlTWFuYWdlci5pbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVDNjk0XHVDQ0FEIFx1QzBERFx1QzEzMSAoXHVDNzkwXHVCM0Q5IFx1QzgxNVx1QjlBQyBcdUQzRUNcdUQ1NjgpXHJcbiAgICBjcmVhdGVSZXF1ZXN0KGlkZW50aWZpZXI/OiBzdHJpbmcpOiBBYm9ydENvbnRyb2xsZXIge1xyXG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzLmFkZChjb250cm9sbGVyKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAvLyBcdUIzRDlcdUM3N0NcdUQ1NUMgXHVDMkREXHVCQ0M0XHVDNzkwXHVDNzU4IFx1QUUzMFx1Qzg3NCBcdUM2OTRcdUNDQUQgXHVDREU4XHVDMThDXHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQ29udHJvbGxlciA9IHRoaXMuYWN0aXZlUmVxdWVzdHMuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdDb250cm9sbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBleGlzdGluZ0NvbnRyb2xsZXIuYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5kZWxldGUoZXhpc3RpbmdDb250cm9sbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVJlcXVlc3RzLnNldChpZGVudGlmaWVyLCBjb250cm9sbGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1Qzc5MFx1QjNEOSBcdUM4MTVcdUI5QUNcdUI5N0MgXHVDNzA0XHVENTVDIFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDMyBcdUMxMjRcdUM4MTVcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWJvcnRDb250cm9sbGVycy5oYXMoY29udHJvbGxlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYW51cChjb250cm9sbGVyLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDYwMDAwKTsgLy8gNjBcdUNEMDggXHVEMEMwXHVDNzg0XHVDNTQ0XHVDNkMzXHJcblxyXG4gICAgICAgIHJldHVybiBjb250cm9sbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzY5NFx1Q0NBRCBcdUM2NDRcdUI4Q0MgXHVDMkRDIFx1QzgxNVx1QjlBQ1xyXG4gICAgY29tcGxldGVSZXF1ZXN0KGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciwgaWRlbnRpZmllcj86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2xlYW51cChjb250cm9sbGVyLCBpZGVudGlmaWVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQyQjlcdUM4MTUgXHVDNjk0XHVDQ0FEIFx1Q0RFOFx1QzE4Q1xyXG4gICAgY2FuY2VsUmVxdWVzdChpZGVudGlmaWVyOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5hY3RpdmVSZXF1ZXN0cy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFudXAoY29udHJvbGxlciwgaWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjBCNFx1QkQ4MCBcdUM4MTVcdUI5QUMgXHVCODVDXHVDOUMxXHJcbiAgICBwcml2YXRlIGNsZWFudXAoY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyLCBpZGVudGlmaWVyPzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzLmRlbGV0ZShjb250cm9sbGVyKTtcclxuICAgICAgICBpZiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVJlcXVlc3RzLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCQUE4XHVCNEUwIFx1RDY1Q1x1QzEzMSBcdUM2OTRcdUNDQUQgXHVDREU4XHVDMThDXHJcbiAgICBjYW5jZWxBbGxSZXF1ZXN0cygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlcnMuZm9yRWFjaChjb250cm9sbGVyID0+IHtcclxuICAgICAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlUmVxdWVzdHMuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGZXRjaCBcdUI3OThcdUQzN0MgKFx1Qzc5MFx1QjNEOSBcdUM4MTVcdUI5QUMgXHVEM0VDXHVENTY4KVxyXG4gICAgYXN5bmMgZmV0Y2goXHJcbiAgICAgICAgdXJsOiBzdHJpbmcsIFxyXG4gICAgICAgIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge30sIFxyXG4gICAgICAgIGlkZW50aWZpZXI/OiBzdHJpbmcsXHJcbiAgICAgICAgdGltZW91dDogbnVtYmVyID0gMzAwMDBcclxuICAgICk6IFByb21pc2U8UmVzcG9uc2U+IHtcclxuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5jcmVhdGVSZXF1ZXN0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICAgICAgfSwgdGltZW91dCk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XHJcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlUmVxdWVzdChjb250cm9sbGVyLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhbnVwKGNvbnRyb2xsZXIsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVENjA0XHVDN0FDIFx1QzBDMVx1RDBEQyBcdUM4MTVcdUJDRjRcclxuICAgIGdldFN0YXR1cygpOiB7IGFjdGl2ZTogbnVtYmVyOyBpZGVudGlmaWVkOiBudW1iZXIgfSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYWN0aXZlOiB0aGlzLmFib3J0Q29udHJvbGxlcnMuc2l6ZSxcclxuICAgICAgICAgICAgaWRlbnRpZmllZDogdGhpcy5hY3RpdmVSZXF1ZXN0cy5zaXplXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFRUU1NlcnZpY2UgfSBmcm9tICcuL1RUU0ludGVyZmFjZSc7XHJcbmltcG9ydCB7IEF1ZGlvTWFuYWdlciwgTmV0d29ya1Jlc291cmNlTWFuYWdlciB9IGZyb20gJy4uLy4uL3NoYXJlZC9BdWRpb01hbmFnZXInO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVDbG91ZFRUU1NldHRpbmdzIHtcclxuICAgIGVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgICBhcGlLZXk6IHN0cmluZztcclxuICAgIHZvaWNlOiBzdHJpbmc7XHJcbiAgICBsYW5ndWFnZUNvZGU6IHN0cmluZztcclxuICAgIHNwZWFraW5nUmF0ZTogbnVtYmVyO1xyXG4gICAgcGl0Y2g6IG51bWJlcjtcclxuICAgIGF1dG9QbGF5OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdvb2dsZUNsb3VkVFRTUmVxdWVzdCB7XHJcbiAgICBpbnB1dDoge1xyXG4gICAgICAgIHRleHQ6IHN0cmluZztcclxuICAgIH07XHJcbiAgICB2b2ljZToge1xyXG4gICAgICAgIGxhbmd1YWdlQ29kZTogc3RyaW5nO1xyXG4gICAgICAgIG5hbWU/OiBzdHJpbmc7XHJcbiAgICAgICAgc3NtbEdlbmRlcj86ICdNQUxFJyB8ICdGRU1BTEUnIHwgJ05FVVRSQUwnO1xyXG4gICAgfTtcclxuICAgIGF1ZGlvQ29uZmlnOiB7XHJcbiAgICAgICAgYXVkaW9FbmNvZGluZzogJ01QMycgfCAnTElORUFSMTYnIHwgJ09HR19PUFVTJztcclxuICAgICAgICBzcGVha2luZ1JhdGU/OiBudW1iZXI7XHJcbiAgICAgICAgcGl0Y2g/OiBudW1iZXI7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdvb2dsZUNsb3VkVFRTUmVzcG9uc2Uge1xyXG4gICAgYXVkaW9Db250ZW50OiBzdHJpbmc7IC8vIEJhc2U2NCBlbmNvZGVkIGF1ZGlvXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHb29nbGVDbG91ZFRUU1NlcnZpY2UgaW1wbGVtZW50cyBUVFNTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgc2V0dGluZ3M6IEdvb2dsZUNsb3VkVFRTU2V0dGluZ3M7XHJcbiAgICBwcml2YXRlIGF1ZGlvTWFuYWdlcjogQXVkaW9NYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBuZXR3b3JrTWFuYWdlcjogTmV0d29ya1Jlc291cmNlTWFuYWdlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogR29vZ2xlQ2xvdWRUVFNTZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLmVuYWJsZWQgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgIGFwaUtleTogc2V0dGluZ3MuYXBpS2V5IHx8ICcnLFxyXG4gICAgICAgICAgICB2b2ljZTogc2V0dGluZ3Mudm9pY2UgfHwgJ2VuLVVTLUpvdXJuZXktRicsXHJcbiAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogc2V0dGluZ3MubGFuZ3VhZ2VDb2RlIHx8ICdlbi1VUycsXHJcbiAgICAgICAgICAgIHNwZWFraW5nUmF0ZTogc2V0dGluZ3Muc3BlYWtpbmdSYXRlIHx8IDEuMCxcclxuICAgICAgICAgICAgcGl0Y2g6IHNldHRpbmdzLnBpdGNoIHx8IDAuMCxcclxuICAgICAgICAgICAgYXV0b1BsYXk6IHNldHRpbmdzLmF1dG9QbGF5IHx8IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlciA9IEF1ZGlvTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIHRoaXMubmV0d29ya01hbmFnZXIgPSBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3BlYWtUZXh0KHRleHQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVkKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RUUyBcdUFFMzBcdUIyQTVcdUM3NzQgXHVCRTQ0XHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDNUI0IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmFwaUtleSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUzogXHVCRTQ4IFx1RDE0RFx1QzJBNFx1RDJCOFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wU3BlYWtpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvRGF0YSA9IGF3YWl0IHRoaXMuY2FsbEdvb2dsZUNsb3VkQVBJKHRleHQpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsYXlBdWRpb0RhdGEoYXVkaW9EYXRhKTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIENsb3VkIFRUUyBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdUVFMgXHVDNzRDXHVDMTMxIFx1QzBERFx1QzEzMVx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTRcdUM2NDAgXHVDNzc4XHVEMTMwXHVCMTM3IFx1QzVGMFx1QUNCMFx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoIXdvcmQgfHwgd29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVFRTOiBcdUJFNDggXHVCMkU4XHVDNUI0XHVDNzg1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnNwZWFrVGV4dCh3b3JkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzcGVha0V4YW1wbGUoZXhhbXBsZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKCFleGFtcGxlIHx8IGV4YW1wbGUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUzogXHVCRTQ4IFx1QzYwOFx1QkIzOFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zcGVha1RleHQoZXhhbXBsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsR29vZ2xlQ2xvdWRBUEkodGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICBjb25zdCB0cnVuY2F0ZWRUZXh0ID0gdGV4dC5sZW5ndGggPiA1MDAwID8gdGV4dC5zdWJzdHJpbmcoMCwgNTAwMCkgOiB0ZXh0O1xyXG5cclxuICAgICAgICBjb25zdCByZXF1ZXN0Qm9keTogR29vZ2xlQ2xvdWRUVFNSZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICBpbnB1dDoge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogdHJ1bmNhdGVkVGV4dFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB2b2ljZToge1xyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiB0aGlzLnNldHRpbmdzLmxhbmd1YWdlQ29kZSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuc2V0dGluZ3Mudm9pY2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYXVkaW9Db25maWc6IHtcclxuICAgICAgICAgICAgICAgIGF1ZGlvRW5jb2Rpbmc6ICdNUDMnLFxyXG4gICAgICAgICAgICAgICAgc3BlYWtpbmdSYXRlOiB0aGlzLnNldHRpbmdzLnNwZWFraW5nUmF0ZSxcclxuICAgICAgICAgICAgICAgIHBpdGNoOiB0aGlzLnNldHRpbmdzLnBpdGNoXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm5ldHdvcmtNYW5hZ2VyLmZldGNoKFxyXG4gICAgICAgICAgICBgaHR0cHM6Ly90ZXh0dG9zcGVlY2guZ29vZ2xlYXBpcy5jb20vdjEvdGV4dDpzeW50aGVzaXplP2tleT0ke3RoaXMuc2V0dGluZ3MuYXBpS2V5fWAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGBnb29nbGUtdHRzLSR7RGF0ZS5ub3coKX1gLCAvLyBcdUFDRTBcdUM3MjAgXHVDMkREXHVCQ0M0XHVDNzkwXHJcbiAgICAgICAgICAgIDEwMDAwIC8vIDEwXHVDRDA4IFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDM1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLmdldERldGFpbGVkRXJyb3JNZXNzYWdlKHJlc3BvbnNlLnN0YXR1cywgZXJyb3JEYXRhKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkYXRhOiBHb29nbGVDbG91ZFRUU1Jlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIHJldHVybiBkYXRhLmF1ZGlvQ29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERldGFpbGVkRXJyb3JNZXNzYWdlKHN0YXR1czogbnVtYmVyLCBlcnJvckRhdGE6IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGVycm9yRGF0YT8uZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBlcnJvckRhdGEuZXJyb3I7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBUElcdUFDMDAgXHVDQzI4XHVCMkU4XHVCNDFDIFx1QUNCRFx1QzZCMCAoNDAzIFBFUk1JU1NJT05fREVOSUVEIHdpdGggQVBJX0tFWV9TRVJWSUNFX0JMT0NLRUQpXHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMyAmJiBlcnJvci5kZXRhaWxzPy5zb21lKChkZXRhaWw6IGFueSkgPT4gXHJcbiAgICAgICAgICAgICAgICBkZXRhaWwucmVhc29uID09PSAnQVBJX0tFWV9TRVJWSUNFX0JMT0NLRUQnIHx8IFxyXG4gICAgICAgICAgICAgICAgZGV0YWlsWydAdHlwZSddPy5pbmNsdWRlcygnRXJyb3JJbmZvJykgJiYgZGV0YWlsLnJlYXNvbiA9PT0gJ0FQSV9LRVlfU0VSVklDRV9CTE9DS0VEJ1xyXG4gICAgICAgICAgICApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBUZXh0LXRvLVNwZWVjaCBBUElcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4gR29vZ2xlIENsb3VkIENvbnNvbGVcdUM1RDBcdUMxMUMgVGV4dC10by1TcGVlY2ggQVBJXHVCOTdDIFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBUEkgXHVEMEE0IFx1QUQwMFx1QjgyOCBcdUM2MjRcdUI5NThcdUI0RTRcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ0FQSSBrZXkgbm90IHZhbGlkJykgfHwgZXJyb3IuY29kZSA9PT0gJ0lOVkFMSURfQVJHVU1FTlQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgQVBJIFx1RDBBNFx1QUMwMCBcdUM2MkNcdUJDMTRcdUI5NzRcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0XHVCOTdDIFx1QjJFNFx1QzJEQyBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygncXVvdGEnKSB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnUVVPVEFfRVhDRUVERUQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVENTYwXHVCMkY5XHVCN0M5XHVDNzc0IFx1Q0QwOFx1QUNGQ1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVENTYwXHVCMkY5XHVCN0M5XHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUM3MFx1QjA5OCBcdUM2OTRcdUFFMDhcdUM4MUNcdUI5N0MgXHVCQ0MwXHVBQ0JEXHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBUVFMgQVBJIFx1QzgxMVx1QURGQ1x1Qzc3NCBcdUFDNzBcdUJEODBcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTQgXHVBRDhDXHVENTVDXHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUM3NzhcdUM5OUQgXHVDNjI0XHVCOTU4ICg0MDEpXHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgQVBJIFx1RDBBNCBcdUM3NzhcdUM5OURcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNjk0XHVDQ0FEIFx1QzYyNFx1Qjk1OCAoNDAwKVxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNjk0XHVDQ0FEXHVDNzc0IFx1Qzc5OFx1QkFCQlx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDNzRDXHVDMTMxIFx1QzEyNFx1QzgxNVx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDMTFDXHVCRTQ0XHVDMkE0IFx1QzBBQ1x1QzZBOSBcdUJEODhcdUFDMDAgKDUwMylcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNTAzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0XHVBQzAwIFx1Qzc3Q1x1QzJEQ1x1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDN0EwXHVDMkRDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBgR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNjI0XHVCOTU4ICgke3N0YXR1c30pOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OCd9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGBHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUM2MjRcdUI5NTg6ICR7c3RhdHVzfSBcdUMwQzFcdUQwREMgXHVDRjU0XHVCNERDYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHBsYXlBdWRpb0RhdGEoYmFzZTY0QXVkaW86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdWRpb01hbmFnZXJcdUI5N0MgXHVDMEFDXHVDNkE5XHVENTVDIFx1QzU0OFx1QzgwNFx1RDU1QyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSB0aGlzLmJhc2U2NFRvQmxvYihiYXNlNjRBdWRpbywgJ2F1ZGlvL21wMycpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gdGhpcy5hdWRpb01hbmFnZXIuY3JlYXRlQXVkaW8oYXVkaW9VcmwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb01hbmFnZXIucmVsZWFzZUF1ZGlvKGF1ZGlvKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgYXVkaW8ub25lbmRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgYXVkaW8ub25sb2FkZWRkYXRhID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvLnBsYXkoKS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzMgXHVDMTI0XHVDODE1ICgzMFx1Q0QwOClcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXVkaW8uZW5kZWQgJiYgIWF1ZGlvLnBhdXNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDMkRDXHVBQzA0IFx1Q0QwOFx1QUNGQycpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAzMDAwMCk7XHJcblxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmFzZTY0VG9CbG9iKGJhc2U2NDogc3RyaW5nLCBtaW1lVHlwZTogc3RyaW5nKTogQmxvYiB7XHJcbiAgICAgICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZU51bWJlcnMgPSBuZXcgQXJyYXkoYnl0ZUNoYXJhY3RlcnMubGVuZ3RoKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJ5dGVOdW1iZXJzW2ldID0gYnl0ZUNoYXJhY3RlcnMuY2hhckNvZGVBdChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZU51bWJlcnMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbYnl0ZUFycmF5XSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdG9wU3BlYWtpbmcoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gQXVkaW9NYW5hZ2VyXHVCOTdDIFx1RDFCNVx1RDU3NCBcdUJBQThcdUI0RTAgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzgxNVx1QzlDMFxyXG4gICAgICAgIHRoaXMuYXVkaW9NYW5hZ2VyLnN0b3BBbGxBdWRpbygpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzUGF1c2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUQ2NUNcdUMxMzEgXHVDNjI0XHVCNTE0XHVDNjI0XHVBQzAwIFx1Qzc4OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcclxuICAgICAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmF1ZGlvTWFuYWdlci5nZXRTdGF0dXMoKTtcclxuICAgICAgICByZXR1cm4gc3RhdHVzLmFjdGl2ZSA9PT0gMDtcclxuICAgIH1cclxuXHJcbiAgICByZXN1bWUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gQXVkaW9NYW5hZ2VyXHVCMjk0IFx1QUMxQ1x1QkNDNCBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDXHVCOTdDIFx1QUQwMFx1QjlBQ1x1RDU1OFx1QkJDMFx1Qjg1QyBcclxuICAgICAgICAvLyBcdUM1RUNcdUFFMzBcdUMxMUNcdUIyOTQgXHVDMEM4XHVCODVDXHVDNkI0IFx1QzY5NFx1Q0NBRFx1QzczQ1x1Qjg1QyBcdUNDOThcdUI5QUNcclxuICAgICAgICBuZXcgTm90aWNlKCdcdUM3NENcdUMxMzFcdUM3NDQgXHVCMkU0XHVDMkRDIFx1QzdBQ1x1QzBERFx1RDU1OFx1QjgyNFx1QkE3NCBcdUJDODRcdUQyQkNcdUM3NDQgXHVCMkU0XHVDMkRDIFx1RDA3NFx1QjlBRFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXVzZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0b3BTcGVha2luZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPEdvb2dsZUNsb3VkVFRTU2V0dGluZ3M+KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUI5QUNcdUMxOENcdUMyQTQgXHVDODE1XHVCOUFDXHJcbiAgICBjbGVhbnVwKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYXVkaW9NYW5hZ2VyLmNsZWFudXAoKTtcclxuICAgICAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyLmNhbmNlbEFsbFJlcXVlc3RzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFRleHQgPSAnSGVsbG8sIHRoaXMgaXMgYSB0ZXN0Lic7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FsbEdvb2dsZUNsb3VkQVBJKHRlc3RUZXh0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIENsb3VkIFRUUyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXZhaWxhYmxlVm9pY2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAnZW4tVVMtSm91cm5leS1EJyxcclxuICAgICAgICAgICAgJ2VuLVVTLUpvdXJuZXktRicsXHJcbiAgICAgICAgICAgICdlbi1VUy1Kb3VybmV5LU8nLFxyXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1BJyxcclxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItQycsXHJcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUQnLFxyXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1FJyxcclxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItRicsXHJcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUcnLFxyXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1IJyxcclxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItSScsXHJcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUonLFxyXG4gICAgICAgICAgICAnZW4tVVMtU3RhbmRhcmQtQScsXHJcbiAgICAgICAgICAgICdlbi1VUy1TdGFuZGFyZC1CJyxcclxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUMnLFxyXG4gICAgICAgICAgICAnZW4tVVMtU3RhbmRhcmQtRCcsXHJcbiAgICAgICAgICAgICdlbi1VUy1TdGFuZGFyZC1FJyxcclxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUYnLFxyXG4gICAgICAgICAgICAnZW4tVVMtU3RhbmRhcmQtRycsXHJcbiAgICAgICAgICAgICdlbi1VUy1TdGFuZGFyZC1IJyxcclxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUknLFxyXG4gICAgICAgICAgICAnZW4tVVMtU3RhbmRhcmQtSicsXHJcbiAgICAgICAgICAgICdlbi1HQi1OZXVyYWwyLUEnLFxyXG4gICAgICAgICAgICAnZW4tR0ItTmV1cmFsMi1CJyxcclxuICAgICAgICAgICAgJ2VuLUdCLU5ldXJhbDItQycsXHJcbiAgICAgICAgICAgICdlbi1HQi1OZXVyYWwyLUQnLFxyXG4gICAgICAgICAgICAnZW4tR0ItTmV1cmFsMi1GJyxcclxuICAgICAgICAgICAgJ2VuLUFVLU5ldXJhbDItQScsXHJcbiAgICAgICAgICAgICdlbi1BVS1OZXVyYWwyLUInLFxyXG4gICAgICAgICAgICAnZW4tQVUtTmV1cmFsMi1DJyxcclxuICAgICAgICAgICAgJ2VuLUFVLU5ldXJhbDItRCdcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNldHRpbmdzKCk6IEdvb2dsZUNsb3VkVFRTU2V0dGluZ3Mge1xyXG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuc2V0dGluZ3MgfTtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RvcFNwZWFraW5nKCk7XHJcbiAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQgPSBudWxsO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IENoYXR0ZXJib3hUVFNTZXJ2aWNlLCBDaGF0dGVyYm94VFRTU2V0dGluZ3MgfSBmcm9tICcuL0NoYXR0ZXJib3hUVFNTZXJ2aWNlJztcclxuaW1wb3J0IHsgR29vZ2xlQ2xvdWRUVFNTZXJ2aWNlLCBHb29nbGVDbG91ZFRUU1NldHRpbmdzIH0gZnJvbSAnLi9Hb29nbGVDbG91ZFRUU1NlcnZpY2UnO1xyXG5pbXBvcnQgeyBUVFNTZXJ2aWNlIH0gZnJvbSAnLi9UVFNJbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XHJcbmltcG9ydCB7IGRlY3J5cHRBcGlLZXkgfSBmcm9tICcuLi8uLi91dGlscyc7XHJcblxyXG4vLyBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0IFx1RDMyOVx1RDFBMFx1QjlBQ1xyXG5leHBvcnQgY2xhc3MgVFRTU2VydmljZUZhY3Rvcnkge1xyXG4gICAgc3RhdGljIGNyZWF0ZVRUU1NlcnZpY2Uoc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IFRUU1NlcnZpY2Uge1xyXG4gICAgICAgIGlmICghc2V0dGluZ3MudHRzRW5hYmxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vT3BUVFNTZXJ2aWNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2V0dGluZ3MudHRzUHJvdmlkZXIgPT09ICdnb29nbGUtY2xvdWQnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdvb2dsZVNldHRpbmdzOiBHb29nbGVDbG91ZFRUU1NldHRpbmdzID0ge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogc2V0dGluZ3MudHRzRW5hYmxlZCxcclxuICAgICAgICAgICAgICAgIGFwaUtleTogZGVjcnlwdEFwaUtleShzZXR0aW5ncy5nb29nbGVDbG91ZFRUU0FwaUtleSksXHJcbiAgICAgICAgICAgICAgICB2b2ljZTogc2V0dGluZ3MudHRzVm9pY2UsXHJcbiAgICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHNldHRpbmdzLmdvb2dsZUNsb3VkVFRTTGFuZ3VhZ2VDb2RlLFxyXG4gICAgICAgICAgICAgICAgc3BlYWtpbmdSYXRlOiBzZXR0aW5ncy5nb29nbGVDbG91ZFRUU1NwZWFraW5nUmF0ZSxcclxuICAgICAgICAgICAgICAgIHBpdGNoOiBzZXR0aW5ncy5nb29nbGVDbG91ZFRUU1BpdGNoLFxyXG4gICAgICAgICAgICAgICAgYXV0b1BsYXk6IHNldHRpbmdzLnR0c0F1dG9QbGF5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR29vZ2xlQ2xvdWRUVFNTZXJ2aWNlKGdvb2dsZVNldHRpbmdzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdUFFMzBcdUJDRjhcdUFDMTI6IENoYXR0ZXJib3ggVFRTXHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXR0ZXJib3hTZXR0aW5nczogQ2hhdHRlcmJveFRUU1NldHRpbmdzID0ge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogc2V0dGluZ3MudHRzRW5hYmxlZCxcclxuICAgICAgICAgICAgICAgIGFwaVVybDogc2V0dGluZ3MuY2hhdHRlcmJveEFwaVVybCxcclxuICAgICAgICAgICAgICAgIHZvaWNlOiBzZXR0aW5ncy50dHNWb2ljZSxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlX2Zvcm1hdDogJ3dhdicsXHJcbiAgICAgICAgICAgICAgICBzcGVlZDogMSxcclxuICAgICAgICAgICAgICAgIGV4YWdnZXJhdGlvbjogc2V0dGluZ3MuY2hhdHRlcmJveEV4YWdnZXJhdGlvbixcclxuICAgICAgICAgICAgICAgIGNmZ1dlaWdodDogc2V0dGluZ3MuY2hhdHRlcmJveENmZ1dlaWdodCxcclxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBzZXR0aW5ncy5jaGF0dGVyYm94VGVtcGVyYXR1cmUsXHJcbiAgICAgICAgICAgICAgICBzdHJlYW1pbmdfY2h1bmtfc2l6ZTogNTAsXHJcbiAgICAgICAgICAgICAgICBzdHJlYW1pbmdfc3RyYXRlZ3k6ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICAgc3RyZWFtaW5nX2J1ZmZlcl9zaXplOiAxLFxyXG4gICAgICAgICAgICAgICAgc3RyZWFtaW5nX3F1YWxpdHk6ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICAgYXV0b1BsYXk6IHNldHRpbmdzLnR0c0F1dG9QbGF5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hhdHRlcmJveFRUU1NlcnZpY2UoY2hhdHRlcmJveFNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1QkU0NFx1RDY1Q1x1QzEzMSBcdUMwQzFcdUQwRENcdUM3NTggVFRTIFx1QzExQ1x1QkU0NFx1QzJBNCAoTm8tT3AgXHVEMzI4XHVEMTM0KVxyXG5jbGFzcyBOb09wVFRTU2VydmljZSBpbXBsZW1lbnRzIFRUU1NlcnZpY2Uge1xyXG4gICAgYXN5bmMgc3BlYWtUZXh0KHRleHQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3BlYWtXb3JkKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3BlYWtFeGFtcGxlKGV4YW1wbGU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICB9XHJcblxyXG4gICAgc3RvcFNwZWFraW5nKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICB9XHJcblxyXG4gICAgaXNQYXVzZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdW1lKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICB9XHJcblxyXG4gICAgcGF1c2UoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXZhaWxhYmxlVm9pY2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUQ2MzhcdUQ2NThcdUMxMzFcdUM3NDQgXHVDNzA0XHVENTVDIFx1QjgwOFx1QUM3MFx1QzJEQyBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTRcclxuZXhwb3J0IGludGVyZmFjZSBMZWdhY3lUVFNTZXR0aW5ncyB7XHJcbiAgICBlbmFibGVkOiBib29sZWFuO1xyXG4gICAgdm9pY2U6IHN0cmluZztcclxuICAgIHBsYXliYWNrU3BlZWQ6IG51bWJlcjtcclxuICAgIGF1dG9QbGF5OiBib29sZWFuO1xyXG59XHJcblxyXG4vLyBcdUI4MDhcdUFDNzBcdUMyREMgXHVDMTI0XHVDODE1XHVDNzQ0IENoYXR0ZXJib3ggXHVDMTI0XHVDODE1XHVDNzNDXHVCODVDIFx1QkNDMFx1RDY1OFx1RDU1OFx1QjI5NCBcdUQ1RUNcdUQzN0MgXHVENTY4XHVDMjE4XHJcbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0TGVnYWN5U2V0dGluZ3MobGVnYWN5U2V0dGluZ3M6IExlZ2FjeVRUU1NldHRpbmdzKTogQ2hhdHRlcmJveFRUU1NldHRpbmdzIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZW5hYmxlZDogbGVnYWN5U2V0dGluZ3MuZW5hYmxlZCxcclxuICAgICAgICBhcGlVcmw6ICdodHRwOi8vbG9jYWxob3N0OjQxMjMnLFxyXG4gICAgICAgIHZvaWNlOiBsZWdhY3lTZXR0aW5ncy52b2ljZSB8fCAnYWxsb3knLFxyXG4gICAgICAgIHJlc3BvbnNlX2Zvcm1hdDogJ3dhdicsXHJcbiAgICAgICAgc3BlZWQ6IDEsXHJcbiAgICAgICAgZXhhZ2dlcmF0aW9uOiAwLjI1LFxyXG4gICAgICAgIGNmZ1dlaWdodDogMSxcclxuICAgICAgICB0ZW1wZXJhdHVyZTogMC4wNSxcclxuICAgICAgICBzdHJlYW1pbmdfY2h1bmtfc2l6ZTogNTAsXHJcbiAgICAgICAgc3RyZWFtaW5nX3N0cmF0ZWd5OiAnc3RyaW5nJyxcclxuICAgICAgICBzdHJlYW1pbmdfYnVmZmVyX3NpemU6IDEsXHJcbiAgICAgICAgc3RyZWFtaW5nX3F1YWxpdHk6ICdzdHJpbmcnLFxyXG4gICAgICAgIGF1dG9QbGF5OiBsZWdhY3lTZXR0aW5ncy5hdXRvUGxheVxyXG4gICAgfTtcclxufVxyXG5cclxuLy8gXHVENjM4XHVENjU4XHVDMTMxXHVDNzQ0IFx1QzcwNFx1RDU1QyBcdUFFMzBcdUJDRjggZXhwb3J0XHJcbmV4cG9ydCB7IENoYXR0ZXJib3hUVFNTZXJ2aWNlLCBHb29nbGVDbG91ZFRUU1NlcnZpY2UgfTtcclxuZXhwb3J0IHR5cGUgeyBDaGF0dGVyYm94VFRTU2V0dGluZ3MsIEdvb2dsZUNsb3VkVFRTU2V0dGluZ3MsIFRUU1NlcnZpY2UgfTsiLCAiaW1wb3J0IHsgTW9tZW50IH0gZnJvbSAnbW9tZW50JztcclxuXHJcbmV4cG9ydCBlbnVtIFJldmlld1Jlc3BvbnNlIHtcclxuICAgIEhhcmQgPSAnaGFyZCcsICAgIC8vIHEgPSAxOiBcdUI5RTRcdUM2QjAgXHVDNUI0XHVCODM1XHVBQzhDIFx1RDY4Q1x1QzBDMVx1RDU1OFx1QUM3MFx1QjA5OCBcdUFDNzBcdUM3NTggXHVDMkU0XHVEMzI4XHVDNUQwIFx1QUMwMFx1QUU0Q1x1QzZCNCBcdUFDQkRcdUM2QjBcclxuICAgIEdvb2QgPSAnZ29vZCcsICAgIC8vIHEgPSAyOiBcdUM1N0RcdUFDMDRcdUM3NTggXHVCMTc4XHVCODI1XHVDNzQ0IFx1QjRFNFx1QzVFQyBcdUQ2OENcdUMwQzFcdUQ1NUMgXHVBQ0JEXHVDNkIwICBcclxuICAgIEVhc3kgPSAnZWFzeScgICAgIC8vIHEgPSAzOiBcdUMyN0RcdUFDOEMgXHVDNjQ0XHVDODA0IFx1RDY4Q1x1QzBDMVx1RDU1QyBcdUFDQkRcdUM2QjBcclxufVxyXG5cclxuLy8gU00tMiBcdUM1NENcdUFDRTBcdUI5QUNcdUM5OThcdUM3NTggXHVENDg4XHVDOUM4IFx1QzgxMFx1QzIxOCBcdUI5RTRcdUQ1NTFcclxuZXhwb3J0IGNvbnN0IFFVQUxJVFlfU0NPUkVTID0ge1xyXG4gICAgW1Jldmlld1Jlc3BvbnNlLkhhcmRdOiAxLFxyXG4gICAgW1Jldmlld1Jlc3BvbnNlLkdvb2RdOiAyLFxyXG4gICAgW1Jldmlld1Jlc3BvbnNlLkVhc3ldOiAzXHJcbn0gYXMgY29uc3Q7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNSU1NldHRpbmdzIHtcclxuICAgIC8vIFNNLTIgQWxnb3JpdGhtIFNldHRpbmdzXHJcbiAgICBpbml0aWFsRUZhY3RvcjogbnVtYmVyOyAgICAgLy8gU00tMiBcdUNEMDhcdUFFMzAgRS1GYWN0b3IgKDIuNSlcclxuICAgIG1pbmltdW1FRmFjdG9yOiBudW1iZXI7ICAgICAvLyBTTS0yIFx1Q0Q1Q1x1QzE4QyBFLUZhY3RvciAoMS4zKVxyXG4gICAgbWF4aW11bUludGVydmFsOiBudW1iZXI7ICAgIC8vIE1heGltdW0gaW50ZXJ2YWwgaW4gZGF5cyAoMzY1MjUgPSB+MTAwIHllYXJzKVxyXG4gICAgXHJcbiAgICAvLyBMb2FkIEJhbGFuY2luZyBTZXR0aW5nc1xyXG4gICAgbG9hZEJhbGFuY2U6IGJvb2xlYW47ICAgICAgIC8vIEVuYWJsZSByZXZpZXcgbG9hZCBiYWxhbmNpbmdcclxuICAgIG1heEZ1enppbmdEYXlzOiBudW1iZXI7ICAgICAvLyBNYXhpbXVtIGZ1enppbmcgZm9yIGxvYWQgYmFsYW5jaW5nICgzKVxyXG4gICAgXHJcbiAgICAvLyBMZWdhY3kgY29tcGF0aWJpbGl0eSAoZGVwcmVjYXRlZCBidXQga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSlcclxuICAgIGJhc2VFYXNlOiBudW1iZXI7ICAgICAgICAgICAvLyBTdGFydGluZyBlYXNlIGZhY3RvciAoMjUwJSkgLSBjb252ZXJ0ZWQgdG8gRUZhY3RvclxyXG4gICAgZWFzeUJvbnVzOiBudW1iZXI7ICAgICAgICAgIC8vIE11bHRpcGxpZXIgZm9yIGVhc3kgcmVzcG9uc2VzICgxLjMpIC0gbm90IHVzZWQgaW4gU00tMlxyXG4gICAgaGFyZFBlbmFsdHk6IG51bWJlcjsgICAgICAgIC8vIE11bHRpcGxpZXIgZm9yIGhhcmQgcmVzcG9uc2VzICgwLjUpIC0gbm90IHVzZWQgaW4gU00tMlxyXG4gICAgbWluaW11bUVhc2U6IG51bWJlcjsgICAgICAgIC8vIE1pbmltdW0gZWFzZSBmYWN0b3IgKDEzMCUpIC0gY29udmVydGVkIHRvIEVGYWN0b3JcclxuICAgIGluaXRpYWxJbnRlcnZhbDogbnVtYmVyOyAgICAvLyBTdGFydGluZyBpbnRlcnZhbCBpbiBkYXlzICgxKSAtIG5vdCB1c2VkIGluIFNNLTJcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1JTX1NFVFRJTkdTOiBTUlNTZXR0aW5ncyA9IHtcclxuICAgIC8vIFNNLTIgQWxnb3JpdGhtIFNldHRpbmdzXHJcbiAgICBpbml0aWFsRUZhY3RvcjogMi41LCAgICAgICAgLy8gU00tMiBcdUQ0NUNcdUM5MDAgXHVDRDA4XHVBRTMwIEUtRmFjdG9yXHJcbiAgICBtaW5pbXVtRUZhY3RvcjogMS4zLCAgICAgICAgLy8gU00tMiBcdUQ0NUNcdUM5MDAgXHVDRDVDXHVDMThDIEUtRmFjdG9yXHJcbiAgICBtYXhpbXVtSW50ZXJ2YWw6IDM2NTI1LCAgICAgLy8gfjEwMFx1QjE0NFxyXG4gICAgXHJcbiAgICAvLyBMb2FkIEJhbGFuY2luZyBTZXR0aW5nc1xyXG4gICAgbG9hZEJhbGFuY2U6IHRydWUsXHJcbiAgICBtYXhGdXp6aW5nRGF5czogMyxcclxuICAgIFxyXG4gICAgLy8gTGVnYWN5IGNvbXBhdGliaWxpdHkgKHdpbGwgYmUgY29udmVydGVkKVxyXG4gICAgYmFzZUVhc2U6IDI1MCwgICAgICAgICAgICAgIC8vIDIuNSAqIDEwMFxyXG4gICAgZWFzeUJvbnVzOiAxLjMsXHJcbiAgICBoYXJkUGVuYWx0eTogMC41LFxyXG4gICAgbWluaW11bUVhc2U6IDEzMCwgICAgICAgICAgIC8vIDEuMyAqIDEwMFxyXG4gICAgaW5pdGlhbEludGVydmFsOiAxXHJcbn07XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNjaGVkdWxlSW5mbyB7XHJcbiAgICBkdWVEYXRlOiBzdHJpbmc7ICAgICAgICAgICAvLyBJU08gZGF0ZSBzdHJpbmdcclxuICAgIGludGVydmFsOiBudW1iZXI7ICAgICAgICAgIC8vIERheXMgdW50aWwgbmV4dCByZXZpZXdcclxuICAgIGVhc2U6IG51bWJlcjsgICAgICAgICAgICAgIC8vIEVhc2UgZmFjdG9yIChFLUZhY3RvciAqIDEwMCwgMTMwLTUwMCspXHJcbiAgICByZXZpZXdDb3VudDogbnVtYmVyOyAgICAgICAvLyBUb3RhbCBudW1iZXIgb2YgcmV2aWV3c1xyXG4gICAgbGFwc2VDb3VudDogbnVtYmVyOyAgICAgICAgLy8gTnVtYmVyIG9mIGhhcmQgcmVzcG9uc2VzXHJcbiAgICBkZWxheWVkRGF5czogbnVtYmVyOyAgICAgICAvLyBEYXlzIGRlbGF5ZWQgYmVmb3JlIHRoaXMgcmV2aWV3XHJcbiAgICByZXBldGl0aW9uOiBudW1iZXI7ICAgICAgICAvLyBTTS0yIHJlcGV0aXRpb24gY291bnQgKFx1QzVGMFx1QzE4RCBcdUMxMzFcdUFDRjUgXHVENjhDXHVDMEMxIFx1RDY5Rlx1QzIxOClcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZXZpZXdSZXN1bHQge1xyXG4gICAgaW50ZXJ2YWw6IG51bWJlcjtcclxuICAgIGVhc2U6IG51bWJlcjtcclxuICAgIGR1ZURhdGU6IHN0cmluZztcclxuICAgIHJlcGV0aXRpb246IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0ge1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nczogU1JTU2V0dGluZ3M7XHJcbiAgICBwcml2YXRlIGR1ZURhdGVIaXN0b2dyYW06IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFNSU1NldHRpbmdzID0gREVGQVVMVF9TUlNfU0VUVElOR1MpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGUgdGhlIG5leHQgcmV2aWV3IHNjaGVkdWxlIGJhc2VkIG9uIHVzZXIgcmVzcG9uc2VcclxuICAgICAqIEltcGxlbWVudHMgdGhlIFNNLTIgYWxnb3JpdGhtIGFjY29yZGluZyB0byBsZWFybmluZ19hbGdvcml0aG0ubWQgc3BlY2lmaWNhdGlvblxyXG4gICAgICovXHJcbiAgICBzY2hlZHVsZShcclxuICAgICAgICByZXNwb25zZTogUmV2aWV3UmVzcG9uc2UsXHJcbiAgICAgICAgY3VycmVudFNjaGVkdWxlPzogU2NoZWR1bGVJbmZvXHJcbiAgICApOiBSZXZpZXdSZXN1bHQge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgcSA9IFFVQUxJVFlfU0NPUkVTW3Jlc3BvbnNlXTsgLy8gXHVENDg4XHVDOUM4IFx1QzgxMFx1QzIxODogMShoYXJkKSwgMihnb29kKSwgMyhlYXN5KVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgc2NoZWR1bGUgaW5mbyBmb3IgbmV3IGNhcmRzXHJcbiAgICAgICAgaWYgKCFjdXJyZW50U2NoZWR1bGUpIHtcclxuICAgICAgICAgICAgY3VycmVudFNjaGVkdWxlID0ge1xyXG4gICAgICAgICAgICAgICAgZHVlRGF0ZTogbm93LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogMCxcclxuICAgICAgICAgICAgICAgIGVhc2U6IE1hdGgucm91bmQodGhpcy5zZXR0aW5ncy5pbml0aWFsRUZhY3RvciAqIDEwMCksIC8vIEUtRmFjdG9yXHVCOTdDIDEwMFx1QzczQ1x1Qjg1QyBcdUFDRjFcdUQ1NzRcdUMxMUMgXHVDODAwXHVDN0E1XHJcbiAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogMCxcclxuICAgICAgICAgICAgICAgIGxhcHNlQ291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBkZWxheWVkRGF5czogMCxcclxuICAgICAgICAgICAgICAgIHJlcGV0aXRpb246IDBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBFLUZhY3RvciBcdUFDQzRcdUMwQjAgKFx1QzgwMFx1QzdBNVx1QjQxQyBcdUFDMTJcdUM3NDQgMTAwXHVDNzNDXHVCODVDIFx1QjA5OFx1QjIwNFx1QzVCNCBcdUMyRTRcdUM4MUMgRS1GYWN0b3IgXHVDNUJCXHVDNzRDKVxyXG4gICAgICAgIGxldCBjdXJyZW50RUZhY3RvciA9IGN1cnJlbnRTY2hlZHVsZS5lYXNlIC8gMTAwO1xyXG4gICAgICAgIGxldCBuZXdSZXBldGl0aW9uID0gY3VycmVudFNjaGVkdWxlLnJlcGV0aXRpb247XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU00tMiBBbGdvcml0aG0gU3RlcCAxOiBFLUZhY3RvciBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICAvLyBFRl9uZXcgPSBFRl9vbGQgKyAoMC4xIC0gKDMtcSkgKiAoMC4wOCArICgzLXEpICogMC4wMikpXHJcbiAgICAgICAgY29uc3QgZGVsdGEgPSAwLjEgLSAoMyAtIHEpICogKDAuMDggKyAoMyAtIHEpICogMC4wMik7XHJcbiAgICAgICAgbGV0IG5ld0VGYWN0b3IgPSBjdXJyZW50RUZhY3RvciArIGRlbHRhO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEUtRmFjdG9yIFx1Q0Q1Q1x1QzE4Q1x1QUMxMiBcdUM4MUNcdUQ1NUMgKDEuMylcclxuICAgICAgICBuZXdFRmFjdG9yID0gTWF0aC5tYXgodGhpcy5zZXR0aW5ncy5taW5pbXVtRUZhY3RvciwgbmV3RUZhY3Rvcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU00tMiBBbGdvcml0aG0gU3RlcCAyOiBSZXBldGl0aW9uIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGlmIChxID49IDIpIHsgLy8gZ29vZCBcdUI2MTBcdUIyOTQgZWFzeSAocSA9IDIgXHVCNjEwXHVCMjk0IDMpXHJcbiAgICAgICAgICAgIG5ld1JlcGV0aXRpb24gPSBjdXJyZW50U2NoZWR1bGUucmVwZXRpdGlvbiArIDE7XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gaGFyZCAocSA9IDEpXHJcbiAgICAgICAgICAgIG5ld1JlcGV0aXRpb24gPSAwOyAvLyByZXBldGl0aW9uIFx1QjlBQ1x1QzE0QlxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBTTS0yIEFsZ29yaXRobSBTdGVwIDM6IFx1QjJFNFx1Qzc0QyBcdUJDRjVcdUMyQjUgXHVBQzA0XHVBQ0E5IFx1QUNDNFx1QzBCMFxyXG4gICAgICAgIGxldCBuZXdJbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChxIDwgMikgeyAvLyBoYXJkIChxID0gMSlcclxuICAgICAgICAgICAgLy8gaGFyZCBcdUM3NTFcdUIyRjUgXHVDMkRDIFx1Qzk4OVx1QzJEQyBcdUJDRjVcdUMyQjUgKDFcdUM3N0MgXHVENkM0KVxyXG4gICAgICAgICAgICBuZXdJbnRlcnZhbCA9IDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZ29vZCBcdUI2MTBcdUIyOTQgZWFzeSBcdUM3NTFcdUIyRjUgXHVDMkRDIFNNLTIgXHVBQzA0XHVBQ0E5IFx1QUNGNVx1QzJERCBcdUM4MDFcdUM2QTlcclxuICAgICAgICAgICAgaWYgKG5ld1JlcGV0aXRpb24gPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIG5ld0ludGVydmFsID0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdSZXBldGl0aW9uID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdJbnRlcnZhbCA9IDY7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBuID49IDM6IElfbiA9IElfKG4tMSkgKiBFRl9uZXdcclxuICAgICAgICAgICAgICAgIG5ld0ludGVydmFsID0gTWF0aC5yb3VuZChjdXJyZW50U2NoZWR1bGUuaW50ZXJ2YWwgKiBuZXdFRmFjdG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUNENUNcdUIzMDAgXHVBQzA0XHVBQ0E5IFx1QzgxQ1x1RDU1Q1xyXG4gICAgICAgIG5ld0ludGVydmFsID0gTWF0aC5taW4obmV3SW50ZXJ2YWwsIHRoaXMuc2V0dGluZ3MubWF4aW11bUludGVydmFsKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUNENUNcdUMxOEMgXHVBQzA0XHVBQ0E5IFx1QkNGNFx1QzdBNSAoMVx1Qzc3QylcclxuICAgICAgICBuZXdJbnRlcnZhbCA9IE1hdGgubWF4KDEsIG5ld0ludGVydmFsKTtcclxuXHJcbiAgICAgICAgLy8gTG9hZCBiYWxhbmNpbmcgXHVDODAxXHVDNkE5IChcdUMxMjBcdUQwRERcdUMwQUNcdUQ1NkQpXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubG9hZEJhbGFuY2UpIHtcclxuICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSB0aGlzLmFwcGx5TG9hZEJhbGFuY2luZyhuZXdJbnRlcnZhbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUMwQzhcdUI4NUNcdUM2QjQgXHVCOUNDXHVCOENDXHVDNzdDIFx1QUNDNFx1QzBCMFxyXG4gICAgICAgIGNvbnN0IG5ld0R1ZURhdGUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgbmV3SW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuXHJcbiAgICAgICAgLy8gXHVENzg4XHVDMkE0XHVEMUEwXHVBREY4XHVCN0E4IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOCAobG9hZCBiYWxhbmNpbmdcdUM2QTkpXHJcbiAgICAgICAgdGhpcy51cGRhdGVEdWVEYXRlSGlzdG9ncmFtKG5ld0R1ZURhdGUudG9EYXRlU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbnRlcnZhbDogbmV3SW50ZXJ2YWwsXHJcbiAgICAgICAgICAgIGVhc2U6IE1hdGgucm91bmQobmV3RUZhY3RvciAqIDEwMCksIC8vIEUtRmFjdG9yXHVCOTdDIDEwMFx1QzczQ1x1Qjg1QyBcdUFDRjFcdUQ1NzRcdUMxMUMgXHVCQzE4XHVENjU4XHJcbiAgICAgICAgICAgIGR1ZURhdGU6IG5ld0R1ZURhdGUudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgcmVwZXRpdGlvbjogbmV3UmVwZXRpdGlvblxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBseSBsb2FkIGJhbGFuY2luZyB0byBkaXN0cmlidXRlIHJldmlld3MgZXZlbmx5IGFjcm9zcyBkYXlzXHJcbiAgICAgKiBCYXNlZCBvbiB0aGUgaGlzdG9ncmFtLWJhc2VkIGFwcHJvYWNoIGZyb20gb2JzaWRpYW4tc3BhY2VkLXJlcGV0aXRpb25cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhcHBseUxvYWRCYWxhbmNpbmcoaW50ZXJ2YWw6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmxvYWRCYWxhbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERpZmZlcmVudCBmdXp6aW5nIHN0cmF0ZWdpZXMgYmFzZWQgb24gaW50ZXJ2YWwgbGVuZ3RoXHJcbiAgICAgICAgbGV0IGZ1enppbmdSYW5nZTogbnVtYmVyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpbnRlcnZhbCA8PSAyMSkge1xyXG4gICAgICAgICAgICBmdXp6aW5nUmFuZ2UgPSAxOyAvLyAxIGRheSBmdXp6aW5nIGZvciBzaG9ydCBpbnRlcnZhbHNcclxuICAgICAgICB9IGVsc2UgaWYgKGludGVydmFsIDw9IDE4MCkge1xyXG4gICAgICAgICAgICBmdXp6aW5nUmFuZ2UgPSBNYXRoLm1heCgxLCBpbnRlcnZhbCAqIDAuMDUpOyAvLyA1JSBmdXp6aW5nIGZvciBtZWRpdW0gaW50ZXJ2YWxzXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZnV6emluZ1JhbmdlID0gTWF0aC5tYXgoMSwgaW50ZXJ2YWwgKiAwLjAyNSk7IC8vIDIuNSUgZnV6emluZyBmb3IgbG9uZyBpbnRlcnZhbHNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENhcCBmdXp6aW5nIGF0IG1heCBzZXR0aW5nXHJcbiAgICAgICAgZnV6emluZ1JhbmdlID0gTWF0aC5taW4oZnV6emluZ1JhbmdlLCB0aGlzLnNldHRpbmdzLm1heEZ1enppbmdEYXlzKTtcclxuXHJcbiAgICAgICAgLy8gRmluZCB0aGUgZGF0ZSB3aXRoIG1pbmltdW0gcmV2aWV3cyBpbiB0aGUgZnV6emluZyByYW5nZVxyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgbGV0IGJlc3RJbnRlcnZhbCA9IGludGVydmFsO1xyXG4gICAgICAgIGxldCBtaW5SZXZpZXdzID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XHJcblxyXG4gICAgICAgIGZvciAobGV0IG9mZnNldCA9IC1mdXp6aW5nUmFuZ2U7IG9mZnNldCA8PSBmdXp6aW5nUmFuZ2U7IG9mZnNldCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RJbnRlcnZhbCA9IGludGVydmFsICsgb2Zmc2V0O1xyXG4gICAgICAgICAgICBpZiAodGVzdEludGVydmFsIDwgMSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0ZXN0RGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyB0ZXN0SW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IHRlc3REYXRlLnRvRGF0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICBjb25zdCByZXZpZXdDb3VudCA9IHRoaXMuZHVlRGF0ZUhpc3RvZ3JhbS5nZXQoZGF0ZVN0cmluZykgfHwgMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXZpZXdDb3VudCA8IG1pblJldmlld3MpIHtcclxuICAgICAgICAgICAgICAgIG1pblJldmlld3MgPSByZXZpZXdDb3VudDtcclxuICAgICAgICAgICAgICAgIGJlc3RJbnRlcnZhbCA9IHRlc3RJbnRlcnZhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJlc3RJbnRlcnZhbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgZHVlIGRhdGUgaGlzdG9ncmFtIGZvciBsb2FkIGJhbGFuY2luZ1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZUR1ZURhdGVIaXN0b2dyYW0oZGF0ZVN0cmluZzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuZHVlRGF0ZUhpc3RvZ3JhbS5nZXQoZGF0ZVN0cmluZykgfHwgMDtcclxuICAgICAgICB0aGlzLmR1ZURhdGVIaXN0b2dyYW0uc2V0KGRhdGVTdHJpbmcsIGN1cnJlbnQgKyAxKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjYXJkcyB0aGF0IGFyZSBkdWUgZm9yIHJldmlld1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0Q2FyZHNGb3JSZXZpZXcoY2FyZHM6IEFycmF5PHsgc2NoZWR1bGVJbmZvPzogU2NoZWR1bGVJbmZvIH0+KTogQXJyYXk8eyBzY2hlZHVsZUluZm8/OiBTY2hlZHVsZUluZm8gfT4ge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGNhcmRzLmZpbHRlcihjYXJkID0+IHtcclxuICAgICAgICAgICAgaWYgKCFjYXJkLnNjaGVkdWxlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIE5ldyBjYXJkcyBhcmUgYWx3YXlzIGR1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBkdWVEYXRlID0gbmV3IERhdGUoY2FyZC5zY2hlZHVsZUluZm8uZHVlRGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkdWVEYXRlIDw9IG5vdztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGNhcmRzIGR1ZSBpbiB0aGUgbmV4dCBOIGRheXNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldENhcmRzRHVlSW5EYXlzKGNhcmRzOiBBcnJheTx7IHNjaGVkdWxlSW5mbz86IFNjaGVkdWxlSW5mbyB9PiwgZGF5czogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGZ1dHVyZURhdGUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBjYXJkcy5maWx0ZXIoY2FyZCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY2FyZC5zY2hlZHVsZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBOZXcgY2FyZHMgY291bnQgYXMgZHVlIHRvZGF5XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGR1ZURhdGUgPSBuZXcgRGF0ZShjYXJkLnNjaGVkdWxlSW5mby5kdWVEYXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGR1ZURhdGUgPD0gZnV0dXJlRGF0ZTtcclxuICAgICAgICB9KS5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgbGVhcm5pbmcgc3RhdGlzdGljcyBmb3IgYSBzZXQgb2YgY2FyZHNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFN0YXRpc3RpY3MoY2FyZHM6IEFycmF5PHsgc2NoZWR1bGVJbmZvPzogU2NoZWR1bGVJbmZvIH0+KToge1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXI7XHJcbiAgICAgICAgbmV3OiBudW1iZXI7XHJcbiAgICAgICAgbGVhcm5pbmc6IG51bWJlcjtcclxuICAgICAgICBtYXR1cmU6IG51bWJlcjtcclxuICAgICAgICBhdmVyYWdlRWFzZTogbnVtYmVyO1xyXG4gICAgICAgIGF2ZXJhZ2VJbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgfSB7XHJcbiAgICAgICAgbGV0IG5ld0NhcmRzID0gMDtcclxuICAgICAgICBsZXQgbGVhcm5pbmdDYXJkcyA9IDA7XHJcbiAgICAgICAgbGV0IG1hdHVyZUNhcmRzID0gMDtcclxuICAgICAgICBsZXQgdG90YWxFYXNlID0gMDtcclxuICAgICAgICBsZXQgdG90YWxJbnRlcnZhbCA9IDA7XHJcbiAgICAgICAgbGV0IGNhcmRzV2l0aFNjaGVkdWxlID0gMDtcclxuXHJcbiAgICAgICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcclxuICAgICAgICAgICAgaWYgKCFjYXJkLnNjaGVkdWxlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgbmV3Q2FyZHMrKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhcmRzV2l0aFNjaGVkdWxlKys7XHJcbiAgICAgICAgICAgICAgICB0b3RhbEVhc2UgKz0gY2FyZC5zY2hlZHVsZUluZm8uZWFzZTtcclxuICAgICAgICAgICAgICAgIHRvdGFsSW50ZXJ2YWwgKz0gY2FyZC5zY2hlZHVsZUluZm8uaW50ZXJ2YWw7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNhcmQuc2NoZWR1bGVJbmZvLmludGVydmFsIDwgMjEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZWFybmluZ0NhcmRzKys7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHVyZUNhcmRzKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG90YWw6IGNhcmRzLmxlbmd0aCxcclxuICAgICAgICAgICAgbmV3OiBuZXdDYXJkcyxcclxuICAgICAgICAgICAgbGVhcm5pbmc6IGxlYXJuaW5nQ2FyZHMsXHJcbiAgICAgICAgICAgIG1hdHVyZTogbWF0dXJlQ2FyZHMsXHJcbiAgICAgICAgICAgIGF2ZXJhZ2VFYXNlOiBjYXJkc1dpdGhTY2hlZHVsZSA+IDAgPyBNYXRoLnJvdW5kKHRvdGFsRWFzZSAvIGNhcmRzV2l0aFNjaGVkdWxlKSA6IDAsXHJcbiAgICAgICAgICAgIGF2ZXJhZ2VJbnRlcnZhbDogY2FyZHNXaXRoU2NoZWR1bGUgPiAwID8gTWF0aC5yb3VuZCh0b3RhbEludGVydmFsIC8gY2FyZHNXaXRoU2NoZWR1bGUpIDogMFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgYWxnb3JpdGhtIHNldHRpbmdzXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPFNSU1NldHRpbmdzPik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIC4uLm5ld1NldHRpbmdzIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY3VycmVudCBzZXR0aW5nc1xyXG4gICAgICovXHJcbiAgICBnZXRTZXR0aW5ncygpOiBTUlNTZXR0aW5ncyB7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5zZXR0aW5ncyB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXIgdGhlIGR1ZSBkYXRlIGhpc3RvZ3JhbSAodXNlZnVsIGZvciB0ZXN0aW5nIG9yIHJlc2V0KVxyXG4gICAgICovXHJcbiAgICBjbGVhckhpc3RvZ3JhbSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmR1ZURhdGVIaXN0b2dyYW0uY2xlYXIoKTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBcclxuICAgIFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0sIFxyXG4gICAgUmV2aWV3UmVzcG9uc2UsIFxyXG4gICAgU1JTU2V0dGluZ3MsIFxyXG4gICAgREVGQVVMVF9TUlNfU0VUVElOR1MsXHJcbiAgICBTY2hlZHVsZUluZm8gXHJcbn0gZnJvbSAnLi4vYWxnb3JpdGhtcy9TcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1Nlc3Npb24ge1xyXG4gICAgc2Vzc2lvbklkOiBzdHJpbmc7XHJcbiAgICBzdGFydFRpbWU6IHN0cmluZztcclxuICAgIGNhcmRzUmV2aWV3ZWQ6IG51bWJlcjtcclxuICAgIHRvdGFsQ2FyZHM6IG51bWJlcjtcclxuICAgIGNvbXBsZXRlZENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdO1xyXG4gICAgY3VycmVudENhcmQ/OiBWb2NhYnVsYXJ5Q2FyZDtcclxuICAgIHJlbWFpbmluZ0NhcmRzPzogVm9jYWJ1bGFyeUNhcmRbXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdHVkeVN0YXRpc3RpY3Mge1xyXG4gICAgdG9kYXk6IHtcclxuICAgICAgICBuZXdDYXJkczogbnVtYmVyO1xyXG4gICAgICAgIHJldmlld2VkQ2FyZHM6IG51bWJlcjtcclxuICAgICAgICB0b3RhbFRpbWU6IG51bWJlcjsgLy8gbWludXRlc1xyXG4gICAgfTtcclxuICAgIHN0cmVhazoge1xyXG4gICAgICAgIGN1cnJlbnREYXlzOiBudW1iZXI7XHJcbiAgICAgICAgbG9uZ2VzdERheXM6IG51bWJlcjtcclxuICAgICAgICBsYXN0U3R1ZHlEYXRlOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgfTtcclxuICAgIG92ZXJhbGw6IHtcclxuICAgICAgICB0b3RhbENhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgbmV3Q2FyZHM6IG51bWJlcjtcclxuICAgICAgICBsZWFybmluZ0NhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgbWF0dXJlQ2FyZHM6IG51bWJlcjtcclxuICAgICAgICBhdmVyYWdlRWFzZTogbnVtYmVyO1xyXG4gICAgICAgIGF2ZXJhZ2VJbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgYWxnb3JpdGhtOiBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50U2Vzc2lvbjogUmV2aWV3U2Vzc2lvbiB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBQYXJ0aWFsPFNSU1NldHRpbmdzPiA9IHt9KSB7XHJcbiAgICAgICAgY29uc3Qgc3JzU2V0dGluZ3MgPSB7IC4uLkRFRkFVTFRfU1JTX1NFVFRJTkdTLCAuLi5zZXR0aW5ncyB9O1xyXG4gICAgICAgIHRoaXMuYWxnb3JpdGhtID0gbmV3IFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0oc3JzU2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGNhcmRzIHRoYXQgYXJlIGR1ZSBmb3IgcmV2aWV3IHRvZGF5XHJcbiAgICAgKi9cclxuICAgIGdldENhcmRzRm9yUmV2aWV3KGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgcmV0dXJuIFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0uZ2V0Q2FyZHNGb3JSZXZpZXcoYWxsQ2FyZHMpIGFzIFZvY2FidWxhcnlDYXJkW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgbmV3IGNhcmRzIChuZXZlciByZXZpZXdlZClcclxuICAgICAqL1xyXG4gICAgZ2V0TmV3Q2FyZHMoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcclxuICAgICAgICByZXR1cm4gYWxsQ2FyZHMuZmlsdGVyKGNhcmQgPT4gIWNhcmQuc2NoZWR1bGVJbmZvIHx8IGNhcmQucmV2aWV3Q291bnQgPT09IDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGxlYXJuaW5nIGNhcmRzIChyZXZpZXdlZCBidXQgbm90IG1hdHVyZSlcclxuICAgICAqL1xyXG4gICAgZ2V0TGVhcm5pbmdDYXJkcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIHJldHVybiBhbGxDYXJkcy5maWx0ZXIoY2FyZCA9PiBcclxuICAgICAgICAgICAgY2FyZC5zY2hlZHVsZUluZm8gJiYgXHJcbiAgICAgICAgICAgIGNhcmQucmV2aWV3Q291bnQgPiAwICYmIFxyXG4gICAgICAgICAgICBjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbCA8IDIxXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBtYXR1cmUgY2FyZHMgKGludGVydmFsID49IDIxIGRheXMpXHJcbiAgICAgKi9cclxuICAgIGdldE1hdHVyZUNhcmRzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgcmV0dXJuIGFsbENhcmRzLmZpbHRlcihjYXJkID0+IFxyXG4gICAgICAgICAgICBjYXJkLnNjaGVkdWxlSW5mbyAmJiBcclxuICAgICAgICAgICAgY2FyZC5zY2hlZHVsZUluZm8uaW50ZXJ2YWwgPj0gMjFcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgYSBuZXcgcmV2aWV3IHNlc3Npb25cclxuICAgICAqL1xyXG4gICAgc3RhcnRSZXZpZXdTZXNzaW9uKGR1ZUNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdLCBtYXhDYXJkcz86IG51bWJlcik6IFJldmlld1Nlc3Npb24ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRzVG9SZXZpZXcgPSBtYXhDYXJkcyA/IGR1ZUNhcmRzLnNsaWNlKDAsIG1heENhcmRzKSA6IGR1ZUNhcmRzO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24gPSB7XHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogdGhpcy5nZW5lcmF0ZVNlc3Npb25JZCgpLFxyXG4gICAgICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgY2FyZHNSZXZpZXdlZDogMCxcclxuICAgICAgICAgICAgdG90YWxDYXJkczogY2FyZHNUb1Jldmlldy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGNvbXBsZXRlZENhcmRzOiBbXSxcclxuICAgICAgICAgICAgY3VycmVudENhcmQ6IGNhcmRzVG9SZXZpZXdbMF0sXHJcbiAgICAgICAgICAgIHJlbWFpbmluZ0NhcmRzOiBjYXJkc1RvUmV2aWV3IC8vIEFkZCByZW1haW5pbmcgY2FyZHMgdG8gdHJhY2sgcHJvZ3Jlc3NcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50U2Vzc2lvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb2Nlc3MgYSByZXZpZXcgcmVzcG9uc2UgYW5kIGdldCB0aGUgbmV4dCBjYXJkXHJcbiAgICAgKi9cclxuICAgIHByb2Nlc3NSZXZpZXcoXHJcbiAgICAgICAgY2FyZDogVm9jYWJ1bGFyeUNhcmQsIFxyXG4gICAgICAgIHJlc3BvbnNlOiBSZXZpZXdSZXNwb25zZVxyXG4gICAgKTogeyBcclxuICAgICAgICB1cGRhdGVkQ2FyZDogVm9jYWJ1bGFyeUNhcmQ7IFxyXG4gICAgICAgIG5leHRDYXJkPzogVm9jYWJ1bGFyeUNhcmQ7IFxyXG4gICAgICAgIHNlc3Npb25Db21wbGV0ZTogYm9vbGVhbiBcclxuICAgIH0ge1xyXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50U2Vzc2lvbikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjdGl2ZSByZXZpZXcgc2Vzc2lvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXBwbHkgc3BhY2VkIHJlcGV0aXRpb24gYWxnb3JpdGhtXHJcbiAgICAgICAgY29uc3QgcmV2aWV3UmVzdWx0ID0gdGhpcy5hbGdvcml0aG0uc2NoZWR1bGUocmVzcG9uc2UsIGNhcmQuc2NoZWR1bGVJbmZvKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBVcGRhdGUgY2FyZCB3aXRoIG5ldyBzY2hlZHVsZVxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDYXJkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcclxuICAgICAgICAgICAgLi4uY2FyZCxcclxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IChjYXJkLnNjaGVkdWxlSW5mbz8ucmV2aWV3Q291bnQgfHwgMCkgKyAxLFxyXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiByZXNwb25zZSxcclxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHNjaGVkdWxlSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgZHVlRGF0ZTogcmV2aWV3UmVzdWx0LmR1ZURhdGUsXHJcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogcmV2aWV3UmVzdWx0LmludGVydmFsLFxyXG4gICAgICAgICAgICAgICAgZWFzZTogcmV2aWV3UmVzdWx0LmVhc2UsXHJcbiAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogKGNhcmQuc2NoZWR1bGVJbmZvPy5yZXZpZXdDb3VudCB8fCAwKSArIDEsXHJcbiAgICAgICAgICAgICAgICBsYXBzZUNvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LmxhcHNlQ291bnQgfHwgMCkgKyAocmVzcG9uc2UgPT09IFJldmlld1Jlc3BvbnNlLkhhcmQgPyAxIDogMCksXHJcbiAgICAgICAgICAgICAgICBkZWxheWVkRGF5czogY2FyZC5zY2hlZHVsZUluZm8/LmRlbGF5ZWREYXlzIHx8IDAsXHJcbiAgICAgICAgICAgICAgICByZXBldGl0aW9uOiByZXZpZXdSZXN1bHQucmVwZXRpdGlvblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHNlc3Npb25cclxuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uLmNhcmRzUmV2aWV3ZWQrKztcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uLmNvbXBsZXRlZENhcmRzLnB1c2godXBkYXRlZENhcmQpO1xyXG5cclxuICAgICAgICAvLyBHZXQgbmV4dCBjYXJkIGZyb20gcmVtYWluaW5nIGNhcmRzXHJcbiAgICAgICAgY29uc3QgcmVtYWluaW5nQ2FyZHMgPSB0aGlzLmN1cnJlbnRTZXNzaW9uLnJlbWFpbmluZ0NhcmRzIHx8IFtdO1xyXG4gICAgICAgIGNvbnN0IG5leHRDYXJkID0gdGhpcy5jdXJyZW50U2Vzc2lvbi5jYXJkc1Jldmlld2VkIDwgcmVtYWluaW5nQ2FyZHMubGVuZ3RoIFxyXG4gICAgICAgICAgICA/IHJlbWFpbmluZ0NhcmRzW3RoaXMuY3VycmVudFNlc3Npb24uY2FyZHNSZXZpZXdlZF0gXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uLmN1cnJlbnRDYXJkID0gbmV4dENhcmQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHNlc3Npb25Db21wbGV0ZSA9ICFuZXh0Q2FyZCB8fCB0aGlzLmN1cnJlbnRTZXNzaW9uLmNhcmRzUmV2aWV3ZWQgPj0gdGhpcy5jdXJyZW50U2Vzc2lvbi50b3RhbENhcmRzO1xyXG5cclxuICAgICAgICBpZiAoc2Vzc2lvbkNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kUmV2aWV3U2Vzc2lvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdXBkYXRlZENhcmQsXHJcbiAgICAgICAgICAgIG5leHRDYXJkLFxyXG4gICAgICAgICAgICBzZXNzaW9uQ29tcGxldGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW5kIHRoZSBjdXJyZW50IHJldmlldyBzZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIGVuZFJldmlld1Nlc3Npb24oKTogUmV2aWV3U2Vzc2lvbiB8IG51bGwge1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLmN1cnJlbnRTZXNzaW9uO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24gPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBzZXNzaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGN1cnJlbnQgc2Vzc2lvbiBpbmZvXHJcbiAgICAgKi9cclxuICAgIGdldEN1cnJlbnRTZXNzaW9uKCk6IFJldmlld1Nlc3Npb24gfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50U2Vzc2lvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZSBzdHVkeSBzdGF0aXN0aWNzXHJcbiAgICAgKi9cclxuICAgIGNhbGN1bGF0ZVN0YXRpc3RpY3MoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10sIHN0dWR5SGlzdG9yeT86IGFueVtdKTogU3R1ZHlTdGF0aXN0aWNzIHtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbm93LnRvRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE92ZXJhbGwgc3RhdGlzdGljcyB1c2luZyB0aGUgYWxnb3JpdGhtJ3Mgc3RhdGljIG1ldGhvZFxyXG4gICAgICAgIGNvbnN0IG92ZXJhbGxTdGF0cyA9IFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0uZ2V0U3RhdGlzdGljcyhhbGxDYXJkcyk7XHJcblxyXG4gICAgICAgIC8vIFRvZGF5J3Mgc3RhdGlzdGljcyAod291bGQgbmVlZCB0byBiZSB0cmFja2VkIHNlcGFyYXRlbHkpXHJcbiAgICAgICAgY29uc3QgdG9kYXlTdGF0cyA9IHtcclxuICAgICAgICAgICAgbmV3Q2FyZHM6IDAsIC8vIFdvdWxkIHRyYWNrIGZyb20gc2Vzc2lvbiBkYXRhXHJcbiAgICAgICAgICAgIHJldmlld2VkQ2FyZHM6IDAsIC8vIFdvdWxkIHRyYWNrIGZyb20gc2Vzc2lvbiBkYXRhXHJcbiAgICAgICAgICAgIHRvdGFsVGltZTogMCAvLyBXb3VsZCB0cmFjayBmcm9tIHNlc3Npb24gdGltaW5nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gU3RyZWFrIGNhbGN1bGF0aW9uICh3b3VsZCBuZWVkIHBlcnNpc3RlbnQgc3RvcmFnZSlcclxuICAgICAgICBjb25zdCBzdHJlYWtTdGF0cyA9IHtcclxuICAgICAgICAgICAgY3VycmVudERheXM6IDAsIC8vIFdvdWxkIGNhbGN1bGF0ZSBmcm9tIHN0dWR5IGhpc3RvcnlcclxuICAgICAgICAgICAgbG9uZ2VzdERheXM6IDAsIC8vIFdvdWxkIGNhbGN1bGF0ZSBmcm9tIHN0dWR5IGhpc3RvcnlcclxuICAgICAgICAgICAgbGFzdFN0dWR5RGF0ZTogbnVsbCBhcyBzdHJpbmcgfCBudWxsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG9kYXk6IHRvZGF5U3RhdHMsXHJcbiAgICAgICAgICAgIHN0cmVhazogc3RyZWFrU3RhdHMsXHJcbiAgICAgICAgICAgIG92ZXJhbGw6IG92ZXJhbGxTdGF0c1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY2FyZHMgZHVlIGluIHRoZSBuZXh0IE4gZGF5c1xyXG4gICAgICovXHJcbiAgICBnZXRDYXJkc0R1ZUluRGF5cyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSwgZGF5czogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobS5nZXRDYXJkc0R1ZUluRGF5cyhhbGxDYXJkcywgZGF5cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldCBhIGNhcmQncyBzY2hlZHVsZSAoZm9yIHRlc3Rpbmcgb3IgbWFudWFsIGludGVydmVudGlvbilcclxuICAgICAqL1xyXG4gICAgcmVzZXRDYXJkU2NoZWR1bGUoY2FyZDogVm9jYWJ1bGFyeUNhcmQpOiBWb2NhYnVsYXJ5Q2FyZCB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgLi4uY2FyZCxcclxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IDAsXHJcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbnVsbCxcclxuICAgICAgICAgICAgc2NoZWR1bGVJbmZvOiB1bmRlZmluZWRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWFudWFsbHkgc2V0IGNhcmQgZGlmZmljdWx0eSAoZm9yIGJ1bGsgb3BlcmF0aW9ucylcclxuICAgICAqL1xyXG4gICAgc2V0Q2FyZERpZmZpY3VsdHkoY2FyZDogVm9jYWJ1bGFyeUNhcmQsIGRpZmZpY3VsdHk6IFJldmlld1Jlc3BvbnNlKTogVm9jYWJ1bGFyeUNhcmQge1xyXG4gICAgICAgIGNvbnN0IHJldmlld1Jlc3VsdCA9IHRoaXMuYWxnb3JpdGhtLnNjaGVkdWxlKGRpZmZpY3VsdHksIGNhcmQuc2NoZWR1bGVJbmZvKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAuLi5jYXJkLFxyXG4gICAgICAgICAgICBkaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICBzY2hlZHVsZUluZm86IHtcclxuICAgICAgICAgICAgICAgIGR1ZURhdGU6IHJldmlld1Jlc3VsdC5kdWVEYXRlLFxyXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IHJldmlld1Jlc3VsdC5pbnRlcnZhbCxcclxuICAgICAgICAgICAgICAgIGVhc2U6IHJldmlld1Jlc3VsdC5lYXNlLFxyXG4gICAgICAgICAgICAgICAgcmV2aWV3Q291bnQ6IChjYXJkLnNjaGVkdWxlSW5mbz8ucmV2aWV3Q291bnQgfHwgMCkgKyAxLFxyXG4gICAgICAgICAgICAgICAgbGFwc2VDb3VudDogKGNhcmQuc2NoZWR1bGVJbmZvPy5sYXBzZUNvdW50IHx8IDApICsgKGRpZmZpY3VsdHkgPT09IFJldmlld1Jlc3BvbnNlLkhhcmQgPyAxIDogMCksXHJcbiAgICAgICAgICAgICAgICBkZWxheWVkRGF5czogMCxcclxuICAgICAgICAgICAgICAgIHJlcGV0aXRpb246IHJldmlld1Jlc3VsdC5yZXBldGl0aW9uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGFsZ29yaXRobSBzZXR0aW5nc1xyXG4gICAgICovXHJcbiAgICB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogUGFydGlhbDxTUlNTZXR0aW5ncz4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFsZ29yaXRobS51cGRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY3VycmVudCBhbGdvcml0aG0gc2V0dGluZ3NcclxuICAgICAqL1xyXG4gICAgZ2V0U2V0dGluZ3MoKTogU1JTU2V0dGluZ3Mge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFsZ29yaXRobS5nZXRTZXR0aW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgYSB1bmlxdWUgc2Vzc2lvbiBJRFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdlbmVyYXRlU2Vzc2lvbklkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGBzZXNzaW9uXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCByZWNvbW1lbmRlZCBkYWlseSBzdHVkeSBsb2FkXHJcbiAgICAgKi9cclxuICAgIGdldFJlY29tbWVuZGVkRGFpbHlDYXJkcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IHtcclxuICAgICAgICBuZXdDYXJkczogbnVtYmVyO1xyXG4gICAgICAgIHJldmlld0NhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgdG90YWw6IG51bWJlcjtcclxuICAgIH0ge1xyXG4gICAgICAgIGNvbnN0IGR1ZUNhcmRzID0gdGhpcy5nZXRDYXJkc0ZvclJldmlldyhhbGxDYXJkcyk7XHJcbiAgICAgICAgY29uc3QgbmV3Q2FyZHMgPSB0aGlzLmdldE5ld0NhcmRzKGFsbENhcmRzKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBSZWNvbW1lbmRlZCBsaW1pdHMgKGNvbmZpZ3VyYWJsZSlcclxuICAgICAgICBjb25zdCBtYXhOZXdDYXJkc1BlckRheSA9IDIwO1xyXG4gICAgICAgIGNvbnN0IG1heFJldmlld0NhcmRzUGVyRGF5ID0gMTAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGVkTmV3ID0gTWF0aC5taW4obmV3Q2FyZHMubGVuZ3RoLCBtYXhOZXdDYXJkc1BlckRheSk7XHJcbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWRSZXZpZXcgPSBNYXRoLm1pbihkdWVDYXJkcy5sZW5ndGggLSByZWNvbW1lbmRlZE5ldywgbWF4UmV2aWV3Q2FyZHNQZXJEYXkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5ld0NhcmRzOiByZWNvbW1lbmRlZE5ldyxcclxuICAgICAgICAgICAgcmV2aWV3Q2FyZHM6IHJlY29tbWVuZGVkUmV2aWV3LFxyXG4gICAgICAgICAgICB0b3RhbDogcmVjb21tZW5kZWROZXcgKyByZWNvbW1lbmRlZFJldmlld1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHBvcnQgY2FyZHMgZm9yIGRhdGEgYW5hbHlzaXMgb3IgYmFja3VwXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydFNjaGVkdWxlRGF0YShhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IGFueVtdIHtcclxuICAgICAgICByZXR1cm4gYWxsQ2FyZHMubWFwKGNhcmQgPT4gKHtcclxuICAgICAgICAgICAgd29yZDogY2FyZC53b3JkLFxyXG4gICAgICAgICAgICByZXZpZXdDb3VudDogY2FyZC5yZXZpZXdDb3VudCxcclxuICAgICAgICAgICAgZGlmZmljdWx0eTogY2FyZC5kaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IGNhcmQubGFzdFJldmlld2VkLFxyXG4gICAgICAgICAgICBzY2hlZHVsZUluZm86IGNhcmQuc2NoZWR1bGVJbmZvLFxyXG4gICAgICAgICAgICBhZGRlZERhdGU6IGNhcmQuYWRkZWREYXRlXHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBuZXh0IHJldmlldyBpbnRlcnZhbHMgZm9yIGVhY2ggZGlmZmljdWx0eSBsZXZlbFxyXG4gICAgICogU2hvd3MgdGhlIGV4YWN0IFNNLTIgYWxnb3JpdGhtIHJlc3VsdHMgd2l0aCBFLUZhY3RvciBpbmZvcm1hdGlvblxyXG4gICAgICovXHJcbiAgICBnZXROZXh0UmV2aWV3SW50ZXJ2YWxzKGNhcmQ6IFZvY2FidWxhcnlDYXJkKToge1xyXG4gICAgICAgIGhhcmQ6IHsgaW50ZXJ2YWw6IG51bWJlcjsgZGlzcGxheVRleHQ6IHN0cmluZzsgZUZhY3RvcjogbnVtYmVyOyByZXBldGl0aW9uOiBudW1iZXIgfTtcclxuICAgICAgICBnb29kOiB7IGludGVydmFsOiBudW1iZXI7IGRpc3BsYXlUZXh0OiBzdHJpbmc7IGVGYWN0b3I6IG51bWJlcjsgcmVwZXRpdGlvbjogbnVtYmVyIH07XHJcbiAgICAgICAgZWFzeTogeyBpbnRlcnZhbDogbnVtYmVyOyBkaXNwbGF5VGV4dDogc3RyaW5nOyBlRmFjdG9yOiBudW1iZXI7IHJlcGV0aXRpb246IG51bWJlciB9O1xyXG4gICAgfSB7XHJcbiAgICAgICAgY29uc3QgaGFyZFJlc3VsdCA9IHRoaXMuYWxnb3JpdGhtLnNjaGVkdWxlKFJldmlld1Jlc3BvbnNlLkhhcmQsIGNhcmQuc2NoZWR1bGVJbmZvKTtcclxuICAgICAgICBjb25zdCBnb29kUmVzdWx0ID0gdGhpcy5hbGdvcml0aG0uc2NoZWR1bGUoUmV2aWV3UmVzcG9uc2UuR29vZCwgY2FyZC5zY2hlZHVsZUluZm8pO1xyXG4gICAgICAgIGNvbnN0IGVhc3lSZXN1bHQgPSB0aGlzLmFsZ29yaXRobS5zY2hlZHVsZShSZXZpZXdSZXNwb25zZS5FYXN5LCBjYXJkLnNjaGVkdWxlSW5mbyk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGhhcmQ6IHtcclxuICAgICAgICAgICAgICAgIGludGVydmFsOiBoYXJkUmVzdWx0LmludGVydmFsLFxyXG4gICAgICAgICAgICAgICAgZGlzcGxheVRleHQ6IHRoaXMuZm9ybWF0SW50ZXJ2YWwoaGFyZFJlc3VsdC5pbnRlcnZhbCksXHJcbiAgICAgICAgICAgICAgICBlRmFjdG9yOiBoYXJkUmVzdWx0LmVhc2UgLyAxMDAsIC8vIENvbnZlcnQgYmFjayB0byBFLUZhY3RvclxyXG4gICAgICAgICAgICAgICAgcmVwZXRpdGlvbjogaGFyZFJlc3VsdC5yZXBldGl0aW9uXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdvb2Q6IHtcclxuICAgICAgICAgICAgICAgIGludGVydmFsOiBnb29kUmVzdWx0LmludGVydmFsLFxyXG4gICAgICAgICAgICAgICAgZGlzcGxheVRleHQ6IHRoaXMuZm9ybWF0SW50ZXJ2YWwoZ29vZFJlc3VsdC5pbnRlcnZhbCksXHJcbiAgICAgICAgICAgICAgICBlRmFjdG9yOiBnb29kUmVzdWx0LmVhc2UgLyAxMDAsXHJcbiAgICAgICAgICAgICAgICByZXBldGl0aW9uOiBnb29kUmVzdWx0LnJlcGV0aXRpb25cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZWFzeToge1xyXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IGVhc3lSZXN1bHQuaW50ZXJ2YWwsXHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dDogdGhpcy5mb3JtYXRJbnRlcnZhbChlYXN5UmVzdWx0LmludGVydmFsKSxcclxuICAgICAgICAgICAgICAgIGVGYWN0b3I6IGVhc3lSZXN1bHQuZWFzZSAvIDEwMCxcclxuICAgICAgICAgICAgICAgIHJlcGV0aXRpb246IGVhc3lSZXN1bHQucmVwZXRpdGlvblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvcm1hdCBpbnRlcnZhbCBhcyBodW1hbi1yZWFkYWJsZSB0ZXh0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZm9ybWF0SW50ZXJ2YWwoZGF5czogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoZGF5cyA8IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICd0b2RheSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXlzID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnMSBkYXknO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF5cyA8IDMwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHtkYXlzfSBkYXkke2RheXMgPiAxID8gJ3MnIDogJyd9YDtcclxuICAgICAgICB9IGVsc2UgaWYgKGRheXMgPCAzNjUpIHtcclxuICAgICAgICAgICAgY29uc3QgbW9udGhzID0gTWF0aC5yb3VuZChkYXlzIC8gMzAgKiAxMCkgLyAxMDtcclxuICAgICAgICAgICAgcmV0dXJuIGAke21vbnRoc30gbW9udGgke21vbnRocyA+IDEgPyAncycgOiAnJ31gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHllYXJzID0gTWF0aC5yb3VuZChkYXlzIC8gMzY1ICogMTApIC8gMTA7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHt5ZWFyc30geWVhciR7eWVhcnMgPiAxID8gJ3MnIDogJyd9YDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgZGV0YWlsZWQgU00tMiBhbGdvcml0aG0gc3RhdGlzdGljc1xyXG4gICAgICovXHJcbiAgICBnZXRTTTJTdGF0aXN0aWNzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKToge1xyXG4gICAgICAgIG92ZXJ2aWV3OiB7XHJcbiAgICAgICAgICAgIHRvdGFsQ2FyZHM6IG51bWJlcjtcclxuICAgICAgICAgICAgbmV3Q2FyZHM6IG51bWJlcjtcclxuICAgICAgICAgICAgbGVhcm5pbmdDYXJkczogbnVtYmVyO1xyXG4gICAgICAgICAgICBtYXR1cmVDYXJkczogbnVtYmVyO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVwZXRpdGlvbnM6IHtcclxuICAgICAgICAgICAgcmVwMDogbnVtYmVyOyAvLyBcdUMwQzggXHVDRTc0XHVCNERDXHJcbiAgICAgICAgICAgIHJlcDE6IG51bWJlcjsgLy8gXHVDQ0FCIFx1QkM4OFx1QzlGOCBcdUJDRjVcdUMyQjVcclxuICAgICAgICAgICAgcmVwMjogbnVtYmVyOyAvLyBcdUI0NTAgXHVCQzg4XHVDOUY4IFx1QkNGNVx1QzJCNVxyXG4gICAgICAgICAgICByZXAzUGx1czogbnVtYmVyOyAvLyBcdUMxMzggXHVCQzg4XHVDOUY4IFx1Qzc3NFx1QzBDMSBcdUJDRjVcdUMyQjVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGVGYWN0b3JzOiB7XHJcbiAgICAgICAgICAgIGF2ZXJhZ2U6IG51bWJlcjtcclxuICAgICAgICAgICAgZGlzdHJpYnV0aW9uOiB7IHJhbmdlOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfVtdO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaW50ZXJ2YWxzOiB7XHJcbiAgICAgICAgICAgIGF2ZXJhZ2U6IG51bWJlcjtcclxuICAgICAgICAgICAgZGlzdHJpYnV0aW9uOiB7IHJhbmdlOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfVtdO1xyXG4gICAgICAgIH07XHJcbiAgICB9IHtcclxuICAgICAgICBjb25zdCBzdGF0cyA9IHtcclxuICAgICAgICAgICAgb3ZlcnZpZXc6IHsgdG90YWxDYXJkczogMCwgbmV3Q2FyZHM6IDAsIGxlYXJuaW5nQ2FyZHM6IDAsIG1hdHVyZUNhcmRzOiAwIH0sXHJcbiAgICAgICAgICAgIHJlcGV0aXRpb25zOiB7IHJlcDA6IDAsIHJlcDE6IDAsIHJlcDI6IDAsIHJlcDNQbHVzOiAwIH0sXHJcbiAgICAgICAgICAgIGVGYWN0b3JzOiB7IGF2ZXJhZ2U6IDAsIGRpc3RyaWJ1dGlvbjogW10gYXMgeyByYW5nZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXSB9LFxyXG4gICAgICAgICAgICBpbnRlcnZhbHM6IHsgYXZlcmFnZTogMCwgZGlzdHJpYnV0aW9uOiBbXSBhcyB7IHJhbmdlOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfVtdIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgdG90YWxFRmFjdG9yID0gMDtcclxuICAgICAgICBsZXQgdG90YWxJbnRlcnZhbCA9IDA7XHJcbiAgICAgICAgbGV0IGNhcmRzV2l0aFNjaGVkdWxlID0gMDtcclxuICAgICAgICBjb25zdCBlRmFjdG9yQnVja2V0cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcbiAgICAgICAgY29uc3QgaW50ZXJ2YWxCdWNrZXRzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcclxuXHJcbiAgICAgICAgYWxsQ2FyZHMuZm9yRWFjaChjYXJkID0+IHtcclxuICAgICAgICAgICAgc3RhdHMub3ZlcnZpZXcudG90YWxDYXJkcysrO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFjYXJkLnNjaGVkdWxlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgc3RhdHMub3ZlcnZpZXcubmV3Q2FyZHMrKztcclxuICAgICAgICAgICAgICAgIHN0YXRzLnJlcGV0aXRpb25zLnJlcDArKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhcmRzV2l0aFNjaGVkdWxlKys7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXBldGl0aW9uID0gY2FyZC5zY2hlZHVsZUluZm8ucmVwZXRpdGlvbiB8fCAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZUZhY3RvciA9IGNhcmQuc2NoZWR1bGVJbmZvLmVhc2UgLyAxMDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IGNhcmQuc2NoZWR1bGVJbmZvLmludGVydmFsO1xyXG5cclxuICAgICAgICAgICAgICAgIHRvdGFsRUZhY3RvciArPSBlRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgdG90YWxJbnRlcnZhbCArPSBpbnRlcnZhbDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZXBldGl0aW9uIFx1QkQ4NFx1RDNFQ1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcGV0aXRpb24gPT09IDEpIHN0YXRzLnJlcGV0aXRpb25zLnJlcDErKztcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlcGV0aXRpb24gPT09IDIpIHN0YXRzLnJlcGV0aXRpb25zLnJlcDIrKztcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlcGV0aXRpb24gPj0gMykgc3RhdHMucmVwZXRpdGlvbnMucmVwM1BsdXMrKztcclxuICAgICAgICAgICAgICAgIGVsc2Ugc3RhdHMucmVwZXRpdGlvbnMucmVwMCsrO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1hdHVyZS9MZWFybmluZyBcdUJEODRcdUI5NThcclxuICAgICAgICAgICAgICAgIGlmIChpbnRlcnZhbCA+PSAyMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRzLm92ZXJ2aWV3Lm1hdHVyZUNhcmRzKys7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRzLm92ZXJ2aWV3LmxlYXJuaW5nQ2FyZHMrKztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBFLUZhY3RvciBcdUJEODRcdUQzRUNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVGYWN0b3JSYW5nZSA9IHRoaXMuZ2V0RUZhY3RvclJhbmdlKGVGYWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgZUZhY3RvckJ1Y2tldHMuc2V0KGVGYWN0b3JSYW5nZSwgKGVGYWN0b3JCdWNrZXRzLmdldChlRmFjdG9yUmFuZ2UpIHx8IDApICsgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSW50ZXJ2YWwgXHVCRDg0XHVEM0VDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnZhbFJhbmdlID0gdGhpcy5nZXRJbnRlcnZhbFJhbmdlKGludGVydmFsKTtcclxuICAgICAgICAgICAgICAgIGludGVydmFsQnVja2V0cy5zZXQoaW50ZXJ2YWxSYW5nZSwgKGludGVydmFsQnVja2V0cy5nZXQoaW50ZXJ2YWxSYW5nZSkgfHwgMCkgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUQzQzlcdUFERTAgXHVBQ0M0XHVDMEIwXHJcbiAgICAgICAgc3RhdHMuZUZhY3RvcnMuYXZlcmFnZSA9IGNhcmRzV2l0aFNjaGVkdWxlID4gMCA/IE1hdGgucm91bmQoKHRvdGFsRUZhY3RvciAvIGNhcmRzV2l0aFNjaGVkdWxlKSAqIDEwMCkgLyAxMDAgOiAwO1xyXG4gICAgICAgIHN0YXRzLmludGVydmFscy5hdmVyYWdlID0gY2FyZHNXaXRoU2NoZWR1bGUgPiAwID8gTWF0aC5yb3VuZCh0b3RhbEludGVydmFsIC8gY2FyZHNXaXRoU2NoZWR1bGUpIDogMDtcclxuXHJcbiAgICAgICAgLy8gXHVCRDg0XHVEM0VDIFx1QkMzMFx1QzVGNCBcdUMwRERcdUMxMzFcclxuICAgICAgICBzdGF0cy5lRmFjdG9ycy5kaXN0cmlidXRpb24gPSBBcnJheS5mcm9tKGVGYWN0b3JCdWNrZXRzLmVudHJpZXMoKSlcclxuICAgICAgICAgICAgLm1hcCgoW3JhbmdlLCBjb3VudF0pID0+ICh7IHJhbmdlLCBjb3VudCB9KSlcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHBhcnNlRmxvYXQoYS5yYW5nZS5zcGxpdCgnLScpWzBdKSAtIHBhcnNlRmxvYXQoYi5yYW5nZS5zcGxpdCgnLScpWzBdKSk7XHJcblxyXG4gICAgICAgIHN0YXRzLmludGVydmFscy5kaXN0cmlidXRpb24gPSBBcnJheS5mcm9tKGludGVydmFsQnVja2V0cy5lbnRyaWVzKCkpXHJcbiAgICAgICAgICAgIC5tYXAoKFtyYW5nZSwgY291bnRdKSA9PiAoeyByYW5nZSwgY291bnQgfSkpXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB0aGlzLmNvbXBhcmVJbnRlcnZhbFJhbmdlcyhhLnJhbmdlLCBiLnJhbmdlKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBzdGF0cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBFLUZhY3RvciByYW5nZSBmb3IgZ3JvdXBpbmdcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRFRmFjdG9yUmFuZ2UoZUZhY3RvcjogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoZUZhY3RvciA8IDEuNSkgcmV0dXJuICcxLjMtMS41JztcclxuICAgICAgICBpZiAoZUZhY3RvciA8IDIuMCkgcmV0dXJuICcxLjUtMi4wJztcclxuICAgICAgICBpZiAoZUZhY3RvciA8IDIuNSkgcmV0dXJuICcyLjAtMi41JztcclxuICAgICAgICBpZiAoZUZhY3RvciA8IDMuMCkgcmV0dXJuICcyLjUtMy4wJztcclxuICAgICAgICBpZiAoZUZhY3RvciA8IDMuNSkgcmV0dXJuICczLjAtMy41JztcclxuICAgICAgICByZXR1cm4gJzMuNSsnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGludGVydmFsIHJhbmdlIGZvciBncm91cGluZ1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldEludGVydmFsUmFuZ2UoaW50ZXJ2YWw6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGludGVydmFsID09PSAxKSByZXR1cm4gJzEgZGF5JztcclxuICAgICAgICBpZiAoaW50ZXJ2YWwgPD0gNikgcmV0dXJuICcyLTYgZGF5cyc7XHJcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDIwKSByZXR1cm4gJzctMjAgZGF5cyc7XHJcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDYwKSByZXR1cm4gJzIxLTYwIGRheXMnO1xyXG4gICAgICAgIGlmIChpbnRlcnZhbCA8PSAxODApIHJldHVybiAnMi02IG1vbnRocyc7XHJcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDM2NSkgcmV0dXJuICc2LTEyIG1vbnRocyc7XHJcbiAgICAgICAgcmV0dXJuICcxKyB5ZWFycyc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wYXJlIGludGVydmFsIHJhbmdlcyBmb3Igc29ydGluZ1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbXBhcmVJbnRlcnZhbFJhbmdlcyhhOiBzdHJpbmcsIGI6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBbJzEgZGF5JywgJzItNiBkYXlzJywgJzctMjAgZGF5cycsICcyMS02MCBkYXlzJywgJzItNiBtb250aHMnLCAnNi0xMiBtb250aHMnLCAnMSsgeWVhcnMnXTtcclxuICAgICAgICByZXR1cm4gb3JkZXIuaW5kZXhPZihhKSAtIG9yZGVyLmluZGV4T2YoYik7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZnJvbSAnLi4vLi4vLi4vbWFpbic7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkLCBCb29rIH0gZnJvbSAnLi4vLi4vLi4vVm9jYWJ1bGFyeUNhcmQnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvc3RvcmFnZS9Wb2NhYnVsYXJ5RGF0YWJhc2UnO1xyXG5pbXBvcnQgeyBXb3JkU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2V4dGVybmFsL1dvcmRTZXJ2aWNlJztcclxuaW1wb3J0IHsgTExNU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2xsbS9MTE1TZXJ2aWNlJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeU1vZGFsIH0gZnJvbSAnLi4vLi4vdm9jYWJ1bGFyeS1sZWFybmluZy91aS9Wb2NhYnVsYXJ5TW9kYWwnO1xyXG5pbXBvcnQgeyBBZGRCb29rTW9kYWwgfSBmcm9tICcuL0FkZEJvb2tNb2RhbCc7XHJcbmltcG9ydCB7IEFkZFdvcmRzTW9kYWwgfSBmcm9tICcuLi8uLi93b3JkLW1hbmFnZW1lbnQvdWkvQWRkV29yZHNNb2RhbCc7XHJcbmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICcuLi8uLi8uLi91dGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XHJcbiAgICBkYXRhYmFzZU1hbmFnZXI6IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXI7XHJcbiAgICB3b3JkU2VydmljZTogV29yZFNlcnZpY2U7XHJcbiAgICBsbG1TZXJ2aWNlOiBMTE1TZXJ2aWNlO1xyXG4gICAgY3VycmVudFZpZXc6ICdsaXN0JyB8ICdzdGF0aXN0aWNzJyB8ICdhZGQnID0gJ2xpc3QnO1xyXG4gICAgc2VsZWN0ZWRXb3JkczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XHJcbiAgICBzZWxlY3RlZEJvb2tJZDogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMuZGF0YWJhc2VNYW5hZ2VyID0gcGx1Z2luLmRhdGFiYXNlTWFuYWdlcjtcclxuICAgICAgICB0aGlzLndvcmRTZXJ2aWNlID0gbmV3IFdvcmRTZXJ2aWNlKCk7XHJcbiAgICAgICAgdGhpcy5sbG1TZXJ2aWNlID0gcGx1Z2luLmxsbVNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEN1cnJlbnRCb29rKCk/LmlkIHx8ICdkZWZhdWx0JztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhc1ZhbGlkQXBpS2V5KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXI7XHJcbiAgICAgICAgc3dpdGNoIChwcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpQXBpS2V5O1xyXG4gICAgICAgICAgICBjYXNlICdhbnRocm9waWMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljQXBpS2V5O1xyXG4gICAgICAgICAgICBjYXNlICdnb29nbGUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQXBpS2V5O1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2b2NhYnVsYXJ5LW1hbmFnZXItbW9kYWwnKTtcclxuICAgICAgICBjb250ZW50RWwuY2xhc3NMaXN0LmFkZCgnd2lkZS1tYW5hZ2VyLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUNENUNcdUMyRTAgXHVCMzcwXHVDNzc0XHVEMTMwIFx1Qjg1Q1x1QjREQ1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMxMjBcdUQwRERcdUI0MUMgXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRDdXJyZW50Qm9vaygpPy5pZCB8fCAnZGVmYXVsdCc7XHJcblxyXG4gICAgICAgIHRoaXMuY3JlYXRlQm9va1NlbGVjdG9ySGVhZGVyKCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVOYXZpZ2F0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMSBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Jvb2tDcmVhdGVkJywgdGhpcy5oYW5kbGVCb29rQ3JlYXRlZC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUJvb2tDcmVhdGVkKGV2ZW50OiBDdXN0b21FdmVudCkge1xyXG4gICAgICAgIGNvbnN0IG5ld0Jvb2sgPSBldmVudC5kZXRhaWw7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IG5ld0Jvb2suaWQ7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoQm9va1NlbGVjdG9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVCb29rU2VsZWN0b3JIZWFkZXIoKSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyRWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtYW5hZ2VyLWhlYWRlcicgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJvb2tzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsQm9va3MoKTtcclxuICAgICAgICBjb25zdCBib29rU2VsZWN0ID0gaGVhZGVyRWwuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnYm9vay1zZWxlY3QtZHJvcGRvd24nIH0pO1xyXG4gICAgICAgIGJvb2tzLmZvckVhY2goYm9vayA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBib29rLmlkO1xyXG4gICAgICAgICAgICBvcHRpb24udGV4dCA9IGJvb2submFtZTtcclxuICAgICAgICAgICAgaWYgKGJvb2suaWQgPT09IHRoaXMuc2VsZWN0ZWRCb29rSWQpIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGJvb2tTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBib29rU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSAoZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5zZXRDdXJyZW50Qm9vayh0aGlzLnNlbGVjdGVkQm9va0lkKTtcclxuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkQm9va0J0biA9IGhlYWRlckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUMwQzggXHVCMkU4XHVDNUI0XHVDN0E1IFx1Q0Q5NFx1QUMwMCcsIGNsczogJ2Jvb2stbWFuYWdlLWJ1dHRvbicgfSk7XHJcbiAgICAgICAgYWRkQm9va0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYWRkQm9va01vZGFsID0gbmV3IEFkZEJvb2tNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pO1xyXG4gICAgICAgICAgICBhZGRCb29rTW9kYWwub25DbG9zZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUMwRERcdUMxMzFcdUI0MThcdUJBNzQgXHVCNERDXHVCODZEXHVCMkU0XHVDNkI0XHVBQ0ZDIFx1QzEyMFx1RDBERFx1Qzc0NCBcdUMwQzhcdUI4NUNcdUFDRTBcdUNFNjhcclxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEJvb2tTZWxlY3RvcigpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhZGRCb29rTW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBkZWxCb29rQnRuID0gaGVhZGVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1RDYwNFx1QzdBQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEFEXHVDODFDJywgY2xzOiAnYm9vay1kZWxldGUtYnV0dG9uJyB9KTtcclxuICAgICAgICBjb25zdCBpc0RlZmF1bHQgPSB0aGlzLnNlbGVjdGVkQm9va0lkID09PSAnZGVmYXVsdCc7XHJcbiAgICAgICAgaWYgKGlzRGVmYXVsdCkge1xyXG4gICAgICAgICAgICBkZWxCb29rQnRuLnNldEF0dHIoJ2Rpc2FibGVkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgZGVsQm9va0J0bi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsQm9va0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzRGVmYXVsdCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDODE1XHVCQ0Y0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEJvb2sodGhpcy5zZWxlY3RlZEJvb2tJZCk7XHJcbiAgICAgICAgICAgIGlmICghY3VycmVudEJvb2spIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MTVcdUJDRjRcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc1OCBcdUIyRThcdUM1QjQgXHVDMjE4IFx1RDY1NVx1Qzc3OFxyXG4gICAgICAgICAgICBjb25zdCB3b3Jkc0luQm9vayA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmRzQnlCb29rKHRoaXMuc2VsZWN0ZWRCb29rSWQpO1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkQ291bnQgPSB3b3Jkc0luQm9vay5sZW5ndGg7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUMwQzFcdUMxMzhcdUQ1NUMgXHVENjU1XHVDNzc4IFx1QkFBOFx1QjJFQyBcdUQ0NUNcdUMyRENcclxuICAgICAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAgICAgJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMwQURcdUM4MUMgXHVENjU1XHVDNzc4JyxcclxuICAgICAgICAgICAgICAgIGBcdUM4MTVcdUI5RDBcdUI4NUMgXCIke2N1cnJlbnRCb29rLm5hbWV9XCIgXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQ0IFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz9cXG5cXG5gICtcclxuICAgICAgICAgICAgICAgIGBcdTIwMjIgXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NDogJHtjdXJyZW50Qm9vay5uYW1lfVxcbmAgK1xyXG4gICAgICAgICAgICAgICAgYFx1MjAyMiBcdUQzRUNcdUQ1NjhcdUI0MUMgXHVCMkU4XHVDNUI0IFx1QzIxODogJHt3b3JkQ291bnR9XHVBQzFDXFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXHUyMDIyIFx1QzBERFx1QzEzMVx1Qzc3QzogJHtuZXcgRGF0ZShjdXJyZW50Qm9vay5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygna28tS1InKX1cXG5cXG5gICtcclxuICAgICAgICAgICAgICAgIGBcdTI2QTBcdUZFMEYgXHVDNzc0IFx1Qzc5MVx1QzVDNVx1Qzc0MCBcdUI0MThcdUIzQ0NcdUI5QjQgXHVDMjE4IFx1QzVDNlx1QzczQ1x1QkE3MCwgXHVCMkU4XHVDNUI0XHVDN0E1XHVBQ0ZDIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNjAxXHVBRDZDXHVDODAxXHVDNzNDXHVCODVDIFx1QzBBRFx1QzgxQ1x1QjQyOVx1QjJDOFx1QjJFNC5gLFxyXG4gICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmRlbGV0ZUJvb2sodGhpcy5zZWxlY3RlZEJvb2tJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSAnZGVmYXVsdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNldEN1cnJlbnRCb29rKCdkZWZhdWx0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHtjdXJyZW50Qm9vay5uYW1lfVwiIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEFEXHVDODFDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBBRFx1QzgxQyBcdUMyRTRcdUQzMjg6ICcgKyBlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZU5hdmlnYXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgbmF2RWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtYW5hZ2VyLW5hdmlnYXRpb24nIH0pO1xyXG4gICAgICAgIGNvbnN0IGxpc3RCdG4gPSBuYXZFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1QkFBOVx1Qjg1RCcsIGNsczogJ25hdi1idXR0b24nIH0pO1xyXG4gICAgICAgIGxpc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXcgPSAnbGlzdCc7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgc3RhdHNCdG4gPSBuYXZFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVEMUI1XHVBQ0M0JywgY2xzOiAnbmF2LWJ1dHRvbicgfSk7XHJcbiAgICAgICAgc3RhdHNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXcgPSAnc3RhdGlzdGljcyc7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgYWRkQnRuID0gbmF2RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLCBjbHM6ICduYXYtYnV0dG9uJyB9KTtcclxuICAgICAgICBhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgbmV3IEFkZFdvcmRzTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCB0aGlzLnNlbGVjdGVkQm9va0lkKS5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRMZWFybmluZ0J1dHRvbiA9IG5hdkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDODA0XHVDQ0I0IFx1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjQgXHVENTU5XHVDMkI1IFx1QzJEQ1x1Qzc5MScsXHJcbiAgICAgICAgICAgIGNsczogJ25hdi1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3RhcnRMZWFybmluZ0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0N1cnJlbnRWaWV3KCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5tYW5hZ2VyLWNvbnRlbnQnKSB8fCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21hbmFnZXItY29udGVudCcgfSk7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnRWaWV3KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xpc3QnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93V29yZExpc3QoY29udGVudEVsIGFzIEhUTUxFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzdGF0aXN0aWNzJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N0YXRpc3RpY3MoY29udGVudEVsIGFzIEhUTUxFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhZGQnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QWRkV29yZChjb250ZW50RWwgYXMgSFRNTEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1dvcmRMaXN0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCB3b3JkcyA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHdvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUJFNDRcdUM1QjRcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NzRcdUJDRjRcdUMxMzhcdUM2OTQhJyxcclxuICAgICAgICAgICAgICAgIGNsczogJ2VtcHR5LW1lc3NhZ2UnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzZWFyY2hFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZWFyY2gtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzZWFyY2hFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdUIyRThcdUM1QjQgXHVBQzgwXHVDMEM5Li4uJyxcclxuICAgICAgICAgICAgY2xzOiAnc2VhcmNoLWlucHV0J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBzZWxlY3Rpb25Db250cm9scyA9IHNlYXJjaEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NlbGVjdGlvbi1jb250cm9scycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYWxsU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkV29yZHMuc2l6ZSA9PT0gd29yZHMubGVuZ3RoICYmIHdvcmRzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gc2VsZWN0aW9uQ29udHJvbHMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IGFsbFNlbGVjdGVkID8gJ1x1QzgwNFx1Q0NCNCBcdUQ1NzRcdUM4MUMnIDogJ1x1QzgwNFx1Q0NCNCBcdUMxMjBcdUQwREQnLFxyXG4gICAgICAgICAgICBjbHM6ICdzZWxlY3Rpb24tYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRXb3Jkcy5zaXplID09PSB3b3Jkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5jbGVhcigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4gdGhpcy5zZWxlY3RlZFdvcmRzLmFkZCh3b3JkLndvcmQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBmZXRjaFNlbGVjdGVkQnV0dG9uID0gc2VsZWN0aW9uQ29udHJvbHMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUMxMjBcdUQwREQgXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxyXG4gICAgICAgICAgICBjbHM6ICdmZXRjaC1zZWxlY3RlZC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZmV0Y2hTZWxlY3RlZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRXb3Jkcy5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUMxMjBcdUQwRERcdUI0MUMgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNob3dGZXRjaFNlbGVjdGVkTWVhbmluZ3NNb2RhbCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB3b3JkTGlzdEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtbGlzdCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcmVuZGVyV29yZHMgPSAoZmlsdGVyZWRXb3JkczogVm9jYWJ1bGFyeUNhcmRbXSkgPT4ge1xyXG4gICAgICAgICAgICB3b3JkTGlzdEVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIGZpbHRlcmVkV29yZHMuZm9yRWFjaCh3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlV29yZEl0ZW0od29yZExpc3RFbCwgd29yZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcXVlcnkgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkV29yZHMgPSBxdWVyeSA/IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2VhcmNoV29yZHMocXVlcnkpIDogd29yZHM7XHJcbiAgICAgICAgICAgIHJlbmRlcldvcmRzKGZpbHRlcmVkV29yZHMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZW5kZXJXb3Jkcyh3b3Jkcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVXb3JkSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCB3b3JkOiBWb2NhYnVsYXJ5Q2FyZCkge1xyXG4gICAgICAgIGNvbnN0IHdvcmRFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWl0ZW0nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gd29yZEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcclxuICAgICAgICAgICAgY2xzOiAnd29yZC1jaGVja2JveCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZFdvcmRzLmhhcyh3b3JkLndvcmQpO1xyXG4gICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkO1xyXG4gICAgICAgICAgICBpZiAoaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuYWRkKHdvcmQud29yZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuZGVsZXRlKHdvcmQud29yZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB3b3JkSGVhZGVyID0gd29yZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtaGVhZGVyJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB3b3JkVGl0bGVFbCA9IHdvcmRIZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyBjbHM6ICd3b3JkLXRpdGxlJyB9KTtcclxuICAgICAgICBpZiAod29yZC5wcm9udW5jaWF0aW9uICYmIHdvcmQucHJvbnVuY2lhdGlvbi50cmltKCkpIHtcclxuICAgICAgICAgICAgd29yZFRpdGxlRWwudGV4dENvbnRlbnQgPSB3b3JkLndvcmQ7XHJcbiAgICAgICAgICAgIHdvcmRUaXRsZUVsLmFwcGVuZFRleHQoJyAnKTtcclxuICAgICAgICAgICAgd29yZFRpdGxlRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFske3dvcmQucHJvbnVuY2lhdGlvbn1dYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Byb251bmNpYXRpb24nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdvcmRUaXRsZUVsLnRleHRDb250ZW50ID0gd29yZC53b3JkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5QmFkZ2UgPSB3b3JkSGVhZGVyLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgdGV4dDogdGhpcy5nZXREaWZmaWN1bHR5VGV4dCh3b3JkLmRpZmZpY3VsdHkpLFxyXG4gICAgICAgICAgICBjbHM6IGBkaWZmaWN1bHR5LWJhZGdlICR7d29yZC5kaWZmaWN1bHR5fWBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZENvbnRlbnQgPSB3b3JkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1jb250ZW50JyB9KTtcclxuICAgICAgICB3b3JkQ29udGVudC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IGBcdUI3M0I6ICR7d29yZC5tZWFuaW5ncy5qb2luKCcsICcpfWAsXHJcbiAgICAgICAgICAgIGNsczogJ3dvcmQtbWVhbmluZ3MnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgd29yZENvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiBgXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxODogJHt3b3JkLnJldmlld0NvdW50fVx1RDY4Q2AsXHJcbiAgICAgICAgICAgIGNsczogJ3Jldmlldy1jb3VudCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHdvcmQubGFzdFJldmlld2VkKSB7XHJcbiAgICAgICAgICAgIHdvcmRDb250ZW50LmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQ0Y1XHVDMkI1OiAke2Zvcm1hdERhdGUod29yZC5sYXN0UmV2aWV3ZWQpfWAsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdsYXN0LXJldmlld2VkJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmRBY3Rpb25zID0gd29yZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtYWN0aW9ucycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUFkdmFuY2VkRmVhdHVyZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgZmV0Y2hCdXR0b24gPSB3b3JkQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjQgXHVCNzNCIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCcsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdhY3Rpb24tYnV0dG9uIGZldGNoLXNpbmdsZS1idXR0b24nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmZXRjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hTaW5nbGVXb3JkTWVhbmluZyh3b3JkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkZWxldGVCdG4gPSB3b3JkQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QzBBRFx1QzgxQycsXHJcbiAgICAgICAgICAgIGNsczogJ2FjdGlvbi1idXR0b24gZGVsZXRlLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgICAgICdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDJyxcclxuICAgICAgICAgICAgICAgIGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUMwQURcdUM4MUNcdUQ1NThcdUMyRENcdUFDQTBcdUMyQjVcdUIyQzhcdUFFNEM/YCxcclxuICAgICAgICAgICAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5yZW1vdmVXb3JkKHdvcmQud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dTdGF0aXN0aWNzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBzdGF0cyA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFN0YXRpc3RpY3MoKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdGF0c0dyaWQgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3RhdHMtZ3JpZCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYmFzaWNTdGF0cyA9IHN0YXRzR3JpZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0cy1zZWN0aW9uJyB9KTtcclxuICAgICAgICBiYXNpY1N0YXRzLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QUUzMFx1QkNGOCBcdUQxQjVcdUFDQzQnLCBjbHM6ICdzdGF0cy10aXRsZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShiYXNpY1N0YXRzLCAnXHVDRDFEIFx1QjJFOFx1QzVCNCBcdUMyMTgnLCBzdGF0cy50b3RhbFdvcmRzLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oYmFzaWNTdGF0cywgJ1x1Q0QxRCBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4Jywgc3RhdHMudG90YWxSZXZpZXdzLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oYmFzaWNTdGF0cywgJ1x1QzVGMFx1QzE4RCBcdUQ1NTlcdUMyQjVcdUM3N0MnLCBgJHtzdGF0cy5zdHJlYWtEYXlzfVx1Qzc3Q2ApO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oYmFzaWNTdGF0cywgJ1x1RDNDOVx1QURFMCBcdUIwOUNcdUM3NzRcdUIzQzQnLCBzdGF0cy5hdmVyYWdlRGlmZmljdWx0eS50b0ZpeGVkKDEpKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGlmZmljdWx0eVN0YXRzID0gc3RhdHNHcmlkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXRzLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIGRpZmZpY3VsdHlTdGF0cy5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUIwOUNcdUM3NzRcdUIzQzRcdUJDQzQgXHVCRDg0XHVEM0VDJywgY2xzOiAnc3RhdHMtdGl0bGUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oZGlmZmljdWx0eVN0YXRzLCAnXHVDMjZDXHVDNkMwJywgc3RhdHMud29yZHNCeURpZmZpY3VsdHkuZWFzeS50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGRpZmZpY3VsdHlTdGF0cywgJ1x1Qzg4Qlx1Qzc0QycsIHN0YXRzLndvcmRzQnlEaWZmaWN1bHR5Lmdvb2QudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShkaWZmaWN1bHR5U3RhdHMsICdcdUM1QjRcdUI4MjRcdUM2QzAnLCBzdGF0cy53b3Jkc0J5RGlmZmljdWx0eS5oYXJkLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICBjb25zdCBhY3Rpdml0eVN0YXRzID0gc3RhdHNHcmlkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXRzLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIGFjdGl2aXR5U3RhdHMuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDRDVDXHVBREZDIDdcdUM3N0MgXHVENjVDXHVCM0Q5JywgY2xzOiAnc3RhdHMtdGl0bGUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHN0YXRzLnJlY2VudEFjdGl2aXR5LmZvckVhY2goYWN0aXZpdHkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoYWN0aXZpdHkuZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdrby1LUicsIHsgXHJcbiAgICAgICAgICAgICAgICBtb250aDogJ3Nob3J0JywgXHJcbiAgICAgICAgICAgICAgICBkYXk6ICdudW1lcmljJyBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oYWN0aXZpdHlTdGF0cywgZGF0ZSwgXHJcbiAgICAgICAgICAgICAgICBgXHVENTU5XHVDMkI1OiAke2FjdGl2aXR5LndvcmRzU3R1ZGllZH0sIFx1QkNGNVx1QzJCNTogJHthY3Rpdml0eS5yZXZpZXdzQ29tcGxldGVkfWApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlU3RhdEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHN0YXRFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0LWl0ZW0nIH0pO1xyXG4gICAgICAgIHN0YXRFbC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogbGFiZWwsIGNsczogJ3N0YXQtbGFiZWwnIH0pO1xyXG4gICAgICAgIHN0YXRFbC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogdmFsdWUsIGNsczogJ3N0YXQtdmFsdWUnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0FkZFdvcmQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IGFkZFNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYWRkLXdvcmQtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYWRkU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUMwQzggXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsIGNsczogJ3NlY3Rpb24tdGl0bGUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGlucHV0RWwgPSBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtaW5wdXQtZ3JvdXAnIH0pO1xyXG4gICAgICAgIGNvbnN0IHdvcmRJbnB1dCA9IGlucHV0RWwuY3JlYXRlRWwoJ2lucHV0Jywge1xyXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnXHVDNjAxXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NCAoXHVDNjA4OiBiZWF1dGlmdWwpJyxcclxuICAgICAgICAgICAgY2xzOiAnd29yZC1pbnB1dCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gaW5wdXRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLFxyXG4gICAgICAgICAgICBjbHM6ICdhZGQtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhZGRXb3JkID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkID0gd29yZElucHV0LnZhbHVlLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKCF3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ2Vycm9yLW1lc3NhZ2UnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhID0gYXdhaXQgdGhpcy53b3JkU2VydmljZS5nZXRXb3JkRGF0YSh3b3JkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZvY2FidWxhcnlDYXJkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAuLi53b3JkRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5OiAnZ29vZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJldmlld2VkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGFkZGVkRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tJZDogdGhpcy5zZWxlY3RlZEJvb2tJZFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQodm9jYWJ1bGFyeUNhcmQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB3b3JkSW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGBcIiR7d29yZH1cIiBcdUIyRThcdUM1QjRcdUFDMDAgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1Q0Q5NFx1QUMwMFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3N1Y2Nlc3MtbWVzc2FnZSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzTXNnID0gYWRkU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc3VjY2Vzcy1tZXNzYWdlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3NNc2cpIHN1Y2Nlc3NNc2cucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTU4XHVCMjk0IFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnZXJyb3ItbWVzc2FnZSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkV29yZCk7XHJcbiAgICAgICAgd29yZElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRXb3JkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERpZmZpY3VsdHlUZXh0KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJyk6IHN0cmluZyB7XHJcbiAgICAgICAgc3dpdGNoIChkaWZmaWN1bHR5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Vhc3knOiByZXR1cm4gJ1x1QzI2Q1x1QzZDMCc7XHJcbiAgICAgICAgICAgIGNhc2UgJ2dvb2QnOiByZXR1cm4gJ1x1Qzg4Qlx1Qzc0Qyc7XHJcbiAgICAgICAgICAgIGNhc2UgJ2hhcmQnOiByZXR1cm4gJ1x1QzVCNFx1QjgyNFx1QzZDMCc7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiAnXHVDODhCXHVDNzRDJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGFydFJldmlldyh3b3JkczogVm9jYWJ1bGFyeUNhcmRbXSkge1xyXG4gICAgICAgIGNvbnN0IHJldmlld01vZGFsID0gbmV3IFZvY2FidWxhcnlSZXZpZXdNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIHdvcmRzKTtcclxuICAgICAgICByZXZpZXdNb2RhbC5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93RmV0Y2hTZWxlY3RlZE1lYW5pbmdzTW9kYWwoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRXb3JkTGlzdCA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFdvcmRzKTtcclxuICAgICAgICBuZXcgRmV0Y2hTZWxlY3RlZE1lYW5pbmdzTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBzZWxlY3RlZFdvcmRMaXN0KS5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZmV0Y2hTaW5nbGVXb3JkTWVhbmluZyh3b3JkOiBWb2NhYnVsYXJ5Q2FyZCkge1xyXG4gICAgICAgIGlmICghdGhpcy5oYXNWYWxpZEFwaUtleSgpKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0xMTSBBUEkgXHVEMEE0XHVBQzAwIFx1QzEyNFx1QzgxNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QzEyNFx1QzgxNVx1QzVEMFx1QzExQyBBUEkgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcclxuICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICdcdUIyRThcdUM1QjQgXHVCNzNCIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCcsXHJcbiAgICAgICAgICAgIGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNFx1Qzc1OCBcdUI3M0JcdUM3NDQgXHVDMEM4XHVCODVDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz8gXHVBRTMwXHVDODc0IFx1QzgxNVx1QkNGNFx1QUMwMFx1QzVCNFx1QzUwQ1x1QzZDQ1x1QzlEMVx1QjJDOFx1QjJFNC5gLFxyXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTQgXHVDOTExLi4uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGxtUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5sbG1TZXJ2aWNlLmdldFdvcmREZXRhaWxzKHdvcmQud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxsbVJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZERldGFpbCA9IGxsbVJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhID0gdGhpcy5wbHVnaW4ubGxtU2VydmljZS5jb252ZXJ0VG9Xb3JkRGF0YSh3b3JkRGV0YWlsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRXb3JkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ud29yZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiB3b3JkRGF0YS5tZWFuaW5ncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGF0YS5leGFtcGxlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3Jkczogd29yZERhdGEuc2ltaWxhcldvcmRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZERhdGEod29yZC53b3JkLCB1cGRhdGVkV29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1QUMwMCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0IWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwIFx1QzJFNFx1RDMyODogJHtsbG1SZXNwb25zZS5lcnJvcn1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZC53b3JkfVwiIFx1Q0M5OFx1QjlBQyBcdUMyRTRcdUQzMjg6YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHJlZnJlc2hCb29rU2VsZWN0b3IoKSB7XHJcbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc0NCBcdUIyRTRcdUMyREMgXHVCODVDXHVCNERDXHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENUU0XHVCMzU0XHVDNzU4IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjBcdUQwREQgXHVCNERDXHVCODZEXHVCMkU0XHVDNkI0XHVDNzQ0IFx1QzBDOFx1Qjg1Q1x1QUNFMFx1Q0U2OFxyXG4gICAgICAgIGNvbnN0IGhlYWRlckVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLm1hbmFnZXItaGVhZGVyJyk7XHJcbiAgICAgICAgaWYgKGhlYWRlckVsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2tTZWxlY3QgPSBoZWFkZXJFbC5xdWVyeVNlbGVjdG9yKCcuYm9vay1zZWxlY3QtZHJvcGRvd24nKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGJvb2tTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGJvb2tTZWxlY3QudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib29rcyA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEFsbEJvb2tzKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBcdUM2MzVcdUMxNThcdUI0RTQgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgICAgICAgICBib29rU2VsZWN0LmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1QzBDOFx1Qjg1Q1x1QzZCNCBcdUM2MzVcdUMxNThcdUI0RTQgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgICAgICAgICBib29rcy5mb3JFYWNoKGJvb2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGJvb2suaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHQgPSBib29rLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvb2suaWQgPT09IGN1cnJlbnRWYWx1ZSB8fCBib29rLmlkID09PSB0aGlzLnNlbGVjdGVkQm9va0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSBib29rLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBib29rU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVCREYwIFx1QzBDOFx1Qjg1Q1x1QUNFMFx1Q0U2OFxyXG4gICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Jvb2tDcmVhdGVkJywgdGhpcy5oYW5kbGVCb29rQ3JlYXRlZC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmNsYXNzIFZvY2FidWxhcnlSZXZpZXdNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XHJcbiAgICB3b3JkczogVm9jYWJ1bGFyeUNhcmRbXTtcclxuICAgIGN1cnJlbnRJbmRleCA9IDA7XHJcbiAgICBzaG93QW5zd2VyID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4sIHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLndvcmRzID0gd29yZHM7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd0N1cnJlbnRXb3JkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q3VycmVudFdvcmQoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2b2NhYnVsYXJ5LWxlYXJuaW5nLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNVx1QjQxQyBcdUIxOTJcdUM3NzRcdUI5N0MgQ1NTIFx1QkNDMFx1QzIxOFx1Qjg1QyBcdUM4MDFcdUM2QTlcclxuICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmV2aWV3LW1vZGFsLWhlaWdodCcsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0fXZoYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRXb3JkID0gdGhpcy53b3Jkc1t0aGlzLmN1cnJlbnRJbmRleF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXZpZXctcHJvZ3Jlc3MnIH0pO1xyXG4gICAgICAgIHByb2dyZXNzRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiBgJHt0aGlzLmN1cnJlbnRJbmRleCArIDF9IC8gJHt0aGlzLndvcmRzLmxlbmd0aH1gLFxyXG4gICAgICAgICAgICBjbHM6ICdwcm9ncmVzcy10ZXh0J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjYXJkRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmV2aWV3LWNhcmQnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Q0U3NFx1QjREQyBcdUMwQURcdUM4MUMgXHVCQzg0XHVEMkJDIChcdUM2MjRcdUI5NzhcdUNBQkQgXHVDMEMxXHVCMkU4KVxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNhcmRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1Q0U3NFx1QjREQyBcdUMwQURcdUM4MUMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYXJkLWRlbGV0ZS1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVEZWxldGVDYXJkKCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHdvcmRFbCA9IGNhcmRFbC5jcmVhdGVFbCgnaDEnLCB7IGNsczogJ3Jldmlldy13b3JkJyB9KTtcclxuICAgICAgICBpZiAoY3VycmVudFdvcmQucHJvbnVuY2lhdGlvbiAmJiBjdXJyZW50V29yZC5wcm9udW5jaWF0aW9uLnRyaW0oKSkge1xyXG4gICAgICAgICAgICB3b3JkRWwudGV4dENvbnRlbnQgPSBjdXJyZW50V29yZC53b3JkO1xyXG4gICAgICAgICAgICB3b3JkRWwuYXBwZW5kVGV4dCgnICcpO1xyXG4gICAgICAgICAgICB3b3JkRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFske2N1cnJlbnRXb3JkLnByb251bmNpYXRpb259XWAsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdwcm9udW5jaWF0aW9uJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3b3JkRWwudGV4dENvbnRlbnQgPSBjdXJyZW50V29yZC53b3JkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRXb3JkLnNpbWlsYXJXb3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaW1pbGFyRWwgPSBjYXJkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2ltaWxhci13b3JkcycgfSk7XHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNDonIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2ltaWxhckxpc3QgPSBzaW1pbGFyRWwuY3JlYXRlRWwoJ3VsJyk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50V29yZC5zaW1pbGFyV29yZHMuZm9yRWFjaCh3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IHdvcmQgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRXb3JkLmV4YW1wbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzRWwgPSBjYXJkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZXMnIH0pO1xyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzhcdUI0RTQ6JyB9KTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkLmV4YW1wbGVzLmZvckVhY2goZXhhbXBsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogZXhhbXBsZS5lbmdsaXNoLCBjbHM6ICdleGFtcGxlJyB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaGVja0J0biA9IGNhcmRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6ICdcdUM4MTVcdUIyRjUgXHVENjU1XHVDNzc4XHVENTU4XHVBRTMwJyxcclxuICAgICAgICAgICAgICAgIGNsczogJ2NoZWNrLWFuc3dlci1idXR0b24nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjaGVja0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50V29yZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBhbnN3ZXJFbCA9IGNhcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdhbnN3ZXItc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIGFuc3dlckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QjczQjonIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBtZWFuaW5nc0xpc3QgPSBhbnN3ZXJFbC5jcmVhdGVFbCgndWwnKTtcclxuICAgICAgICAgICAgY3VycmVudFdvcmQubWVhbmluZ3MuZm9yRWFjaChtZWFuaW5nID0+IHtcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IG1lYW5pbmcgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRXb3JkLmV4YW1wbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFuc3dlckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzYwOFx1QkIzOCBcdUJDODhcdUM1RUQ6JyB9KTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkLmV4YW1wbGVzLmZvckVhY2goZXhhbXBsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5zd2VyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4YW1wbGUua29yZWFuLCBjbHM6ICd0cmFuc2xhdGlvbicgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZXZpZXdCdXR0b25zKGNhcmRFbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlUmV2aWV3QnV0dG9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgcmV2aWV3U2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXZpZXctYnV0dG9ucycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaGFyZEJ0biA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzVCNFx1QjgyNFx1QzZDMCcsIGNsczogJ3Jldmlldy1idG4gaGFyZCcgfSk7XHJcbiAgICAgICAgY29uc3QgZ29vZEJ0biA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1Qzg4Qlx1Qzc0QycsIGNsczogJ3Jldmlldy1idG4gZ29vZCcgfSk7XHJcbiAgICAgICAgY29uc3QgZWFzeUJ0biA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzI2Q1x1QzZDMCcsIGNsczogJ3Jldmlldy1idG4gZWFzeScgfSk7XHJcblxyXG4gICAgICAgIGhhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnaGFyZCcpKTtcclxuICAgICAgICBnb29kQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2dvb2QnKSk7XHJcbiAgICAgICAgZWFzeUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdlYXN5JykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUmV2aWV3KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJykge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRXb3JkID0gdGhpcy53b3Jkc1t0aGlzLmN1cnJlbnRJbmRleF07XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmQoY3VycmVudFdvcmQud29yZCwgZGlmZmljdWx0eSk7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4Kys7XHJcbiAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA+PSB0aGlzLndvcmRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDb21wbGV0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFdvcmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRXb3JkID0gdGhpcy53b3Jkc1t0aGlzLmN1cnJlbnRJbmRleF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcclxuICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDJyxcclxuICAgICAgICAgICAgYFwiJHtjdXJyZW50V29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUMwQURcdUM4MUNcdUQ1NThcdUMyRENcdUFDQTBcdUMyQjVcdUIyQzhcdUFFNEM/XFxuXFxuXHVDNzc0IFx1Qzc5MVx1QzVDNVx1Qzc0MCBcdUI0MThcdUIzQ0NcdUI5QjQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gLFxyXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5yZW1vdmVXb3JkKGN1cnJlbnRXb3JkLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud29yZHMuc3BsaWNlKHRoaXMuY3VycmVudEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53b3Jkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA+PSB0aGlzLndvcmRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHRoaXMud29yZHMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFdvcmQoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQyBcdUM5MTEgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQyBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dDb21wbGV0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICBjb25zdCBjb21wbGV0aW9uRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29tcGxldGlvbicgfSk7XHJcbiAgICAgICAgY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1QkNGNVx1QzJCNSBcdUM2NDRcdUI4Q0MhJyB9KTtcclxuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0XHVCOTdDIFx1QkNGNVx1QzJCNVx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjbG9zZUJ0biA9IGNvbXBsZXRpb25FbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkVCXHVBRTMwJywgY2xzOiAnY2xvc2UtYnRuJyB9KTtcclxuICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgRmV0Y2hTZWxlY3RlZE1lYW5pbmdzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG4gICAgc2VsZWN0ZWRXb3Jkczogc3RyaW5nW107XHJcbiAgICBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiwgc2VsZWN0ZWRXb3Jkczogc3RyaW5nW10pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRXb3JkcyA9IHNlbGVjdGVkV29yZHM7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnZmV0Y2gtc2VsZWN0ZWQtbWVhbmluZ3MtbW9kYWwnKTtcclxuXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IGBcdUMxMjBcdUQwRERcdUI0MUMgJHt0aGlzLnNlbGVjdGVkV29yZHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjQgXHVCNzNCIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMGAsXHJcbiAgICAgICAgICAgIGNsczogJ21vZGFsLXRpdGxlJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiBgXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc1OCBcdUMwQzFcdUMxMzggXHVDODE1XHVCQ0Y0XHVCOTdDIExMTSBBUElcdUI5N0MgXHVEMUI1XHVENTc0IFx1QUMwMFx1QzgzOFx1QzYzNVx1QjJDOFx1QjJFNC5gLFxyXG4gICAgICAgICAgICBjbHM6ICdtb2RhbC1kZXNjcmlwdGlvbidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZExpc3RFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZWxlY3RlZC13b3Jkcy1saXN0JyB9KTtcclxuICAgICAgICB3b3JkTGlzdEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUI0RTQ6JyB9KTtcclxuICAgICAgICBjb25zdCB3b3Jkc0NvbnRhaW5lciA9IHdvcmRMaXN0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZHMtY29udGFpbmVyJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuZm9yRWFjaCh3b3JkID0+IHtcclxuICAgICAgICAgICAgd29yZHNDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogd29yZCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3NlbGVjdGVkLXdvcmQtdGFnJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZmV0Y2hCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCNzNCIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2ZldGNoLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBmZXRjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mZXRjaFNlbGVjdGVkTWVhbmluZ3MoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1zZWN0aW9uIGRpc3BsYXktbm9uZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLXRleHQnIH0pO1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gcHJvZ3Jlc3NTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWJhcicgfSk7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gcHJvZ3Jlc3NCYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtZmlsbCcgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LXNlY3Rpb24gZGlzcGxheS1ub25lJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGZldGNoU2VsZWN0ZWRNZWFuaW5ncygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zaG93UHJvZ3Jlc3ModGhpcy5zZWxlY3RlZFdvcmRzLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucGx1Z2luLmxsbVNlcnZpY2UuZ2V0TXVsdGlwbGVXb3JkRGV0YWlscyh0aGlzLnNlbGVjdGVkV29yZHMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIEFycmF5LmlzQXJyYXkocmVzdWx0LmRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzV29yZHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmYWlsZWRXb3Jkczogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmREYXRhIG9mIHJlc3VsdC5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmREYXRhLndvcmQgJiYgd29yZERhdGEubWVhbmluZ3MgJiYgd29yZERhdGEubWVhbmluZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdXb3JkID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmQod29yZERhdGEud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdXb3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFdvcmQ6IFZvY2FidWxhcnlDYXJkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1dvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmREYXRhLnByb251bmNpYXRpb24gfHwgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiB3b3JkRGF0YS5tZWFuaW5ncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IHdvcmREYXRhLmV4YW1wbGVzIHx8IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREYXRhLnNpbWlsYXJXb3JkcyB8fCBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmREYXRhKHdvcmREYXRhLndvcmQsIHVwZGF0ZWRXb3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzV29yZHMucHVzaCh3b3JkRGF0YS53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZFdvcmRzLnB1c2god29yZERhdGEud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmREYXRhLndvcmR9XCIgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IFx1QzJFNFx1RDMyODpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZFdvcmRzLnB1c2god29yZERhdGEud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dSZXN1bHRzKHsgc3VjY2Vzczogc3VjY2Vzc1dvcmRzLCBmYWlsZWQ6IGZhaWxlZFdvcmRzIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzc1dvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGAke3N1Y2Nlc3NXb3Jkcy5sZW5ndGh9XHVBQzFDXHVDNzU4IFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NFx1QjM3MCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQ6ICcgKyAocmVzdWx0LmVycm9yIHx8ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTgnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVQcm9ncmVzcygpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NFx1QjM3MCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQ6ICcgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dQcm9ncmVzcyh0b3RhbFdvcmRzOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IHByb2dyZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3MtdGV4dCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5yZW1vdmVDbGFzcygnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLmFkZENsYXNzKCdkaXNwbGF5LWJsb2NrJyk7XHJcbiAgICAgICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMS4uLiAoMC8ke3RvdGFsV29yZHN9KWA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoaWRlUHJvZ3Jlc3MoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBpZiAocHJvZ3Jlc3NTZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzU2VjdGlvbi5yZW1vdmVDbGFzcygnZGlzcGxheS1ibG9jaycpO1xyXG4gICAgICAgICAgICBwcm9ncmVzc1NlY3Rpb24uYWRkQ2xhc3MoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dSZXN1bHRzKHJlc3VsdHM6IHsgc3VjY2Vzczogc3RyaW5nW107IGZhaWxlZDogc3RyaW5nW10gfSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICByZXN1bHRTZWN0aW9uLnJlbW92ZUNsYXNzKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICByZXN1bHRTZWN0aW9uLmFkZENsYXNzKCdkaXNwbGF5LWJsb2NrJyk7XHJcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5lbXB0eSgpO1xyXG5cclxuICAgICAgICBjb25zdCBzdW1tYXJ5RWwgPSByZXN1bHRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdHMtc3VtbWFyeScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSBzdWNjZXNzJyB9KTtcclxuICAgICAgICAgICAgc3VjY2Vzc0VsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI3MDUgXHVDMTMxXHVBQ0Y1OiAke3Jlc3VsdHMuc3VjY2Vzcy5sZW5ndGh9XHVBQzFDYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoIDw9IDEwKSB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuc3VjY2Vzcy5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVzdWx0cy5mYWlsZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBmYWlsZWRFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSBlcnJvcicgfSk7XHJcbiAgICAgICAgICAgIGZhaWxlZEVsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI3NEMgXHVDMkU0XHVEMzI4OiAke3Jlc3VsdHMuZmFpbGVkLmxlbmd0aH1cdUFDMUNgLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LWNvdW50J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdHMuZmFpbGVkLmxlbmd0aCA8PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgZmFpbGVkRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuZmFpbGVkLmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSByZXN1bHRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1idXR0b25zJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFQlx1QUUzMCcsIGNsczogJ2Nsb3NlLWJ1dHRvbicgfSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVBQzA0XHVCMkU4XHVENTVDIFx1RDY1NVx1Qzc3OCBcdUJBQThcdUIyRUMgXHVEMDc0XHVCNzk4XHVDMkE0XHJcbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICBvbkNvbmZpcm06ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgb25Db25maXJtOiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICB0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybTtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdjb25maXJtLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMudGl0bGUsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSwgY2xzOiAnbW9kYWwtbWVzc2FnZScgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVENjU1XHVDNzc4JyxcclxuICAgICAgICAgICAgY2xzOiAnY29uZmlybS1idXR0b24gcHJpbWFyeSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlybSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgV29yZERhdGEgfSBmcm9tICcuLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcblxyXG5leHBvcnQgY2xhc3MgV29yZFNlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSBhcGlCYXNlVXJsID0gJ2h0dHBzOi8vYXBpLmRpY3Rpb25hcnlhcGkuZGV2L2FwaS92Mi9lbnRyaWVzL2VuJztcclxuXHJcbiAgICBhc3luYyBnZXRXb3JkRGF0YSh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmREYXRhPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHVDMkU0XHVDODFDIEFQSSBcdUQ2MzhcdUNEOUMgXHVCMzAwXHVDMkUwIFx1QzBEOFx1RDUwQyBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVCQzE4XHVENjU4XHJcbiAgICAgICAgICAgIC8vIFx1QzJFNFx1QzgxQyBcdUFENkNcdUQ2MDRcdUM1RDBcdUMxMUNcdUIyOTQgRGljdGlvbmFyeSBBUElcdUIwOTggXHVCMkU0XHVCOTc4IEFQSVx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNFxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTYW1wbGVXb3JkRGF0YSh3b3JkKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyQyBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFNhbXBsZVdvcmREYXRhKHdvcmQ6IHN0cmluZyk6IFdvcmREYXRhIHtcclxuICAgICAgICAvLyBcdUMwRDhcdUQ1MEMgXHVCMzcwXHVDNzc0XHVEMTMwIC0gXHVDMkU0XHVDODFDXHVCODVDXHVCMjk0IEFQSVx1QzVEMFx1QzExQyBcdUFDMDBcdUM4MzhcdUM2NDBcdUM1N0MgXHVENTY4XHJcbiAgICAgICAgY29uc3Qgc2FtcGxlRGF0YTogeyBba2V5OiBzdHJpbmddOiBXb3JkRGF0YSB9ID0ge1xyXG4gICAgICAgICAgICAnYmVhdXRpZnVsJzoge1xyXG4gICAgICAgICAgICAgICAgd29yZDogJ2JlYXV0aWZ1bCcsXHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnL1x1MDJDOGJqdVx1MDJEMHRcdTAyNkFmXHUwMjU5bC8nLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVDNTQ0XHVCOTg0XHVCMkU0XHVDNkI0JywgJ1x1QzYwOFx1QzA1QycsICdcdUQ2Q0NcdUI5NkRcdUQ1NUMnXSxcclxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogWydwcmV0dHknLCAnZ29yZ2VvdXMnLCAnc3R1bm5pbmcnLCAnYXR0cmFjdGl2ZSddLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdTaGUgaXMgYSBiZWF1dGlmdWwgd29tYW4uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVBREY4XHVCMTQwXHVCMjk0IFx1QzU0NFx1Qjk4NFx1QjJFNFx1QzZCNCBcdUM1RUNcdUMxMzFcdUM3ODVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnVGhlIHN1bnNldCB3YXMgYmVhdXRpZnVsLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1Qzc3Q1x1QkFCMFx1Qzc3NCBcdUM1NDRcdUI5ODRcdUIyRTRcdUM2RTBcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnV2hhdCBhIGJlYXV0aWZ1bCBkYXkhJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDODE1XHVCOUQwIFx1QzU0NFx1Qjk4NFx1QjJFNFx1QzZCNCBcdUQ1NThcdUI4RThcdUIxMjRcdUM2OTQhJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2hhcHB5Jzoge1xyXG4gICAgICAgICAgICAgICAgd29yZDogJ2hhcHB5JyxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcvXHUwMkM4aFx1MDBFNnBpLycsXHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUQ1ODlcdUJDRjVcdUQ1NUMnLCAnXHVBRTMwXHVDMDVDJywgJ1x1Qzk5MFx1QUM3MFx1QzZCNCddLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbJ2pveWZ1bCcsICdjaGVlcmZ1bCcsICdnbGFkJywgJ3BsZWFzZWQnXSxcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnSSBhbSBoYXBweSB0byBzZWUgeW91LicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QjJGOVx1QzJFMFx1Qzc0NCBcdUI5Q0NcdUIwOThcdUMxMUMgXHVBRTMwXHVDMDY5XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1NoZSBoYXMgYSBoYXBweSBmYW1pbHkuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVBREY4XHVCMTQwXHVCMjk0IFx1RDU4OVx1QkNGNVx1RDU1QyBcdUFDMDBcdUM4NzFcdUM3NDQgXHVBQzAwXHVDOUMwXHVBQ0UwIFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdIYXBweSBiaXJ0aGRheSEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUMwRERcdUM3N0MgXHVDRDk1XHVENTU4XHVENTY5XHVCMkM4XHVCMkU0ISdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdsZWFybic6IHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6ICdsZWFybicsXHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnL2xcdTAyNUNcdTAyRDBybi8nLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVCQzMwXHVDNkIwXHVCMkU0JywgJ1x1RDU1OVx1QzJCNVx1RDU1OFx1QjJFNCcsICdcdUM3NzVcdUQ3ODhcdUIyRTQnXSxcclxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogWydzdHVkeScsICdhY3F1aXJlJywgJ2dyYXNwJywgJ3VuZGVyc3RhbmQnXSxcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnSSB3YW50IHRvIGxlYXJuIEVuZ2xpc2guJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDODAwXHVCMjk0IFx1QzYwMVx1QzVCNFx1Qjk3QyBcdUJDMzBcdUM2QjBcdUFDRTAgXHVDMkY2XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ0NoaWxkcmVuIGxlYXJuIHF1aWNrbHkuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDNTQ0XHVDNzc0XHVCNEU0XHVDNzQwIFx1QkU2OFx1QjlBQyBcdUJDMzBcdUM2QzFcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnWW91IGNhbiBsZWFybiBmcm9tIHlvdXIgbWlzdGFrZXMuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDMkU0XHVDMjE4XHVCODVDXHVCRDgwXHVEMTMwIFx1QkMzMFx1QzZCOCBcdUMyMTggXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBcdUM3ODVcdUI4MjVcdUI0MUMgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzBEOFx1RDUwQyBcdUIzNzBcdUM3NzRcdUQxMzBcdUM1RDAgXHVDNzg4XHVDNzNDXHVCQTc0IFx1QkMxOFx1RDY1OCwgXHVDNUM2XHVDNzNDXHVCQTc0IFx1QUUzMFx1QkNGOCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgaWYgKHNhbXBsZURhdGFbd29yZC50b0xvd2VyQ2FzZSgpXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlRGF0YVt3b3JkLnRvTG93ZXJDYXNlKCldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUJDMThcdUQ2NThcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3b3JkOiB3b3JkLFxyXG4gICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnL3Byb251bmNpYXRpb24vJyxcclxuICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVDNzU4XHVCQkY4XHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LiddLFxyXG4gICAgICAgICAgICBzaW1pbGFyV29yZHM6IFtdLFxyXG4gICAgICAgICAgICBleGFtcGxlczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6IGBUaGlzIGlzIGFuIGV4YW1wbGUgc2VudGVuY2Ugd2l0aCB0aGUgd29yZCBcIiR7d29yZH1cIi5gLFxyXG4gICAgICAgICAgICAgICAgICAgIGtvcmVhbjogYFwiJHt3b3JkfVwiXHVCNzdDXHVCMjk0IFx1QjJFOFx1QzVCNFx1QUMwMCBcdUQzRUNcdUQ1NjhcdUI0MUMgXHVDNjA4XHVCQjM4XHVDNzg1XHVCMkM4XHVCMkU0LmBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDMkU0XHVDODFDIEFQSSBcdUQ2MzhcdUNEOUNcdUM3NDQgXHVDNzA0XHVENTVDIFx1QkE1NFx1QzExQ1x1QjREQyAoXHVENUE1XHVENkM0IFx1QUQ2Q1x1RDYwNClcclxuICAgIHByaXZhdGUgYXN5bmMgZmV0Y2hGcm9tQVBJKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmFwaUJhc2VVcmx9LyR7d29yZH1gKTtcclxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIFx1QzY5NFx1Q0NBRCBcdUMyRTRcdUQzMjg6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRCb29rTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdhZGQtYm9vay1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUM4MUNcdUJBQTlcclxuICAgICAgICBjb25zdCB0aXRsZUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUNEOTRcdUFDMDAnLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMTI0XHVCQTg1XHJcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUMwQzhcdUI4NUNcdUM2QjQgXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQ0IFx1QzBERFx1QzEzMVx1RDU2OVx1QjJDOFx1QjJFNC4nLFxyXG4gICAgICAgICAgICBjbHM6ICdtb2RhbC1kZXNjcmlwdGlvbidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVDNzg1XHVCODI1IFx1RDNGQ1xyXG4gICAgICAgIGNvbnN0IGZvcm1FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZm9ybScsIHsgY2xzOiAnYm9vay1mb3JtJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0IFx1Qzc4NVx1QjgyNVxyXG4gICAgICAgIGNvbnN0IG5hbWVTZWN0aW9uID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Zvcm0tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgY29uc3QgbmFtZUxhYmVsID0gbmFtZVNlY3Rpb24uY3JlYXRlRWwoJ2xhYmVsJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODQgKicsXHJcbiAgICAgICAgICAgIGNsczogJ2Zvcm0tbGFiZWwnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbmFtZUlucHV0ID0gbmFtZVNlY3Rpb24uY3JlYXRlRWwoJ2lucHV0Jywge1xyXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnXHVDNjA4OiBUT0VJQyBcdUIyRThcdUM1QjRcdUM3QTUsIFx1Qzc3Q1x1QzBDMVx1QzBERFx1RDY1QyBcdUIyRThcdUM1QjRcdUM3QTUnLFxyXG4gICAgICAgICAgICBjbHM6ICdmb3JtLWlucHV0J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5hbWVJbnB1dC5yZXF1aXJlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjRcdUJBODUgXHVDNzg1XHVCODI1XHJcbiAgICAgICAgY29uc3QgZGVzY1NlY3Rpb24gPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm9ybS1zZWN0aW9uJyB9KTtcclxuICAgICAgICBjb25zdCBkZXNjTGFiZWwgPSBkZXNjU2VjdGlvbi5jcmVhdGVFbCgnbGFiZWwnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDMTI0XHVCQTg1IChcdUMxMjBcdUQwRERcdUMwQUNcdUQ1NkQpJyxcclxuICAgICAgICAgICAgY2xzOiAnZm9ybS1sYWJlbCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBkZXNjSW5wdXQgPSBkZXNjU2VjdGlvbi5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnXHVCMkU4XHVDNUI0XHVDN0E1XHVDNUQwIFx1QjMwMFx1RDU1QyBcdUMxMjRcdUJBODVcdUM3NDQgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LicsXHJcbiAgICAgICAgICAgIGNsczogJ2Zvcm0tdGV4dGFyZWEnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVzY0lucHV0LnJvd3MgPSAzO1xyXG5cclxuICAgICAgICAvLyBcdUJDODRcdUQyQkMgXHVDNjAxXHVDNUVEXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY3JlYXRlQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzEnLFxyXG4gICAgICAgICAgICBjbHM6ICdjcmVhdGUtYnV0dG9uIHByaW1hcnknLFxyXG4gICAgICAgICAgICB0eXBlOiAnc3VibWl0J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDREU4XHVDMThDJyxcclxuICAgICAgICAgICAgY2xzOiAnY2FuY2VsLWJ1dHRvbicsXHJcbiAgICAgICAgICAgIHR5cGU6ICdidXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcbiAgICAgICAgLy8gXHVEM0ZDIFx1QzgxQ1x1Q0Q5QyBcdUM3NzRcdUJDQTRcdUQyQjhcclxuICAgICAgICBmb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgYXN5bmMgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUJvb2sobmFtZUlucHV0LnZhbHVlLnRyaW0oKSwgZGVzY0lucHV0LnZhbHVlLnRyaW0oKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEVudGVyIFx1RDBBNFx1Qjg1QyBcdUM4MUNcdUNEOUMgXHVBQzAwXHVCMkE1XHVENTU4XHVCM0M0XHVCODVEXHJcbiAgICAgICAgbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGZvcm1FbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnc3VibWl0JykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1RDNFQ1x1Q0VFNFx1QzJBNCBcdUMxMjRcdUM4MTVcclxuICAgICAgICBuYW1lSW5wdXQuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZUJvb2sobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKCFuYW1lLnRyaW0oKSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1QjJFOFx1QzVCNFx1QzdBNVx1QUNGQyBcdUM3NzRcdUI5ODQgXHVDOTExXHVCQ0Y1IFx1RDY1NVx1Qzc3OFxyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0Jvb2tzID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbEJvb2tzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRHVwbGljYXRlID0gZXhpc3RpbmdCb29rcy5zb21lKGJvb2sgPT4gXHJcbiAgICAgICAgICAgICAgICBib29rLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNEdXBsaWNhdGUpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTQgXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMVxyXG4gICAgICAgICAgICBjb25zdCBuZXdCb29rID0gYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmNyZWF0ZUJvb2sobmFtZSwgZGVzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke25hbWV9XCIgXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwRERcdUMxMzFcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQhYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUJBQThcdUIyRUMgXHVCMkVCXHVBRTMwXHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QkFBOFx1QjRFMCBcdUJBQThcdUIyRUNcdUM1RDBcdUMxMUMgXHVDMjE4XHVDMkUwXHVENTYwIFx1QzIxOCBcdUM3ODhcdUIzQzRcdUI4NUQgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERFxyXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnYm9va0NyZWF0ZWQnLCB7IGRldGFpbDogbmV3Qm9vayB9KTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMVx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBXb3JkU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2V4dGVybmFsL1dvcmRTZXJ2aWNlJztcclxuaW1wb3J0IHsgQWRkQm9va01vZGFsIH0gZnJvbSAnLi4vLi4vYm9vay1tYW5hZ2VtZW50L3VpL0FkZEJvb2tNb2RhbCc7XHJcbmltcG9ydCB7IHZhbGlkYXRlV29yZCwgdmFsaWRhdGVCYXRjaCwgc2FuaXRpemVNYXJrZG93biB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC92YWxpZGF0aW9uJztcclxuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UsIENhbmNlbGxhdGlvbkVycm9yLCBwcm9jZXNzQmF0Y2hXaXRoQ2FuY2VsbGF0aW9uIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL0NhbmNlbGxhdGlvblRva2VuJztcclxuaW1wb3J0IHsgZ2V0Q29uZmlnVmFsdWUsIENPTkZJR19QQVRIUyB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9Db25maWcnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFkZFdvcmRzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG4gICAgd29yZFNlcnZpY2U6IFdvcmRTZXJ2aWNlO1xyXG4gICAgaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGJvb2tTZWxlY3Q6IEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjYW5jZWxsYXRpb25Ub2tlblNvdXJjZTogQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgc2VsZWN0ZWRCb29rSWQ6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiwgc2VsZWN0ZWRCb29rSWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMud29yZFNlcnZpY2UgPSBuZXcgV29yZFNlcnZpY2UoKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gc2VsZWN0ZWRCb29rSWQgfHwgJ2RlZmF1bHQnO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2FkZC13b3Jkcy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVDRDVDXHVDMkUwIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0RENcclxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjBcdUQwREQgXHVCNERDXHVCODZEXHVCMkU0XHVDNkI0XHJcbiAgICAgICAgY29uc3QgYm9va1NlbGVjdFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYm9vay1zZWxlY3Qtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgY29uc3QgYm9va0xhYmVsID0gYm9va1NlbGVjdFNlY3Rpb24uY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyMFx1RDBERCcsIGNsczogJ2Jvb2stc2VsZWN0LWxhYmVsJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBib29rU2VsZWN0Q29udGFpbmVyID0gYm9va1NlbGVjdFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYm9vay1zZWxlY3QtY29udGFpbmVyJyB9KTtcclxuICAgICAgICB0aGlzLmJvb2tTZWxlY3QgPSBib29rU2VsZWN0Q29udGFpbmVyLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2Jvb2stc2VsZWN0LWRyb3Bkb3duJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDRDk0XHVBQzAwIFx1QkM4NFx1RDJCQ1xyXG4gICAgICAgIGNvbnN0IGFkZEJvb2tCdXR0b24gPSBib29rU2VsZWN0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVDRDk0XHVBQzAwJyxcclxuICAgICAgICAgICAgY2xzOiAnYWRkLWJvb2stYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFkZEJvb2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLm9wZW5BZGRCb29rTW9kYWwoKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVCb29rU2VsZWN0KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5ib29rU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQm9va0lkID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IHNlbGVjdGVkQm9va0lkO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuc2V0Q3VycmVudEJvb2soc2VsZWN0ZWRCb29rSWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDhcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdib29rQ3JlYXRlZCcsIHRoaXMuaGFuZGxlQm9va0NyZWF0ZWQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIC8vIFx1QzgxQ1x1QkFBOVxyXG4gICAgICAgIGNvbnN0IHRpdGxlRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUMxMjRcdUJBODVcclxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbkVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1Q0Q5NFx1QUMwMFx1RDU2MCBcdUM2MDFcdUIyRThcdUM1QjRcdUI0RTRcdUM3NDQgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LiBcdUFDMDEgXHVCMkU4XHVDNUI0XHVCMjk0IFx1QzBDOCBcdUM5MDRcdUI4NUMgXHVBRDZDXHVCRDg0XHVCNDI5XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgIGNsczogJ21vZGFsLWRlc2NyaXB0aW9uJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUM3ODVcdUI4MjUgXHVDNjAxXHVDNUVEXHJcbiAgICAgICAgY29uc3QgaW5wdXRTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2lucHV0LXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRleHRhcmVhID0gaW5wdXRTZWN0aW9uLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdiZWF1dGlmdWxcXG5oYXBweVxcbmxlYXJuXFxuc3R1ZHlcXG53b3JrXFxuLi4uJyxcclxuICAgICAgICAgICAgY2xzOiAnd29yZHMtdGV4dGFyZWEnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGV4dGFyZWEuc2V0QXR0cmlidXRlKCdyb3dzJywgJzEwJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QzYwOFx1QzJEQyBcdUJDODRcdUQyQkNcclxuICAgICAgICBjb25zdCBleGFtcGxlQnRuID0gaW5wdXRTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDNjA4XHVDMkRDIFx1QjJFOFx1QzVCNFx1QjRFNCBcdUJEODhcdUI3RUNcdUM2MjRcdUFFMzAnLFxyXG4gICAgICAgICAgICBjbHM6ICdleGFtcGxlLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBleGFtcGxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICdiZWF1dGlmdWxcXG5oYXBweVxcbmxlYXJuXFxuc3R1ZHlcXG53b3JrXFxuaW1wb3J0YW50XFxuc3VjY2Vzc1xcbmtub3dsZWRnZVxcbmV4cGVyaWVuY2VcXG5mcmVlZG9tJztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVCQzg0XHVEMkJDIFx1QzYwMVx1QzVFRFxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJyxcclxuICAgICAgICAgICAgY2xzOiAnYWRkLWJ1dHRvbiBwcmltYXJ5J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuYWRkV29yZHModGV4dGFyZWEudmFsdWUsIHRoaXMuc2VsZWN0ZWRCb29rSWQpKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsT3BlcmF0aW9uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVDOUM0XHVENTg5IFx1QzBDMVx1RDY2OSBcdUQ0NUNcdUMyREMgXHVDNjAxXHVDNUVEXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLXNlY3Rpb24gZGlzcGxheS1ub25lJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1OFx1QjI5NCBcdUM5MTEuLi4nLFxyXG4gICAgICAgICAgICBjbHM6ICdwcm9ncmVzcy10ZXh0J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gcHJvZ3Jlc3NTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWJhcicgfSk7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gcHJvZ3Jlc3NCYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtZmlsbCcgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QUNCMFx1QUNGQyBcdUQ0NUNcdUMyREMgXHVDNjAxXHVDNUVEXHJcbiAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtc2VjdGlvbiBkaXNwbGF5LW5vbmUnIH0pO1xyXG5cclxuICAgICAgICAvLyBFbnRlciBcdUQwQTRcdUI4NUMgXHVDRDk0XHVBQzAwIFx1QUMwMFx1QjJBNVx1RDU1OFx1QjNDNFx1Qjg1RFxyXG4gICAgICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5jdHJsS2V5ICYmIGUua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFdvcmRzKHRleHRhcmVhLnZhbHVlLCB0aGlzLnNlbGVjdGVkQm9va0lkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUQzRUNcdUNFRTRcdUMyQTQgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGFkZFdvcmRzKGlucHV0VGV4dDogc3RyaW5nLCBib29rSWQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZykgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCB3b3JkcyA9IHRoaXMucGFyc2VXb3JkcyhpbnB1dFRleHQpO1xyXG4gICAgICAgIGlmICh3b3Jkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDRDk0XHVBQzAwXHVENTYwIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlID0gbmV3IENhbmNlbGxhdGlvblRva2VuU291cmNlKCk7XHJcbiAgICAgICAgdGhpcy5zaG93UHJvZ3Jlc3Mod29yZHMubGVuZ3RoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNhbmNlbEJ1dHRvbih0cnVlKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHtcclxuICAgICAgICAgICAgc3VjY2VzczogW10gYXMgc3RyaW5nW10sXHJcbiAgICAgICAgICAgIGZhaWxlZDogW10gYXMgc3RyaW5nW10sXHJcbiAgICAgICAgICAgIGFscmVhZHlFeGlzdHM6IFtdIGFzIHN0cmluZ1tdXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc0JhdGNoV2l0aENhbmNlbGxhdGlvbihcclxuICAgICAgICAgICAgICAgIHdvcmRzLFxyXG4gICAgICAgICAgICAgICAgYXN5bmMgKHdvcmQ6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTRcdUM5QzAgXHVENjU1XHVDNzc4XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdXb3JkID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmQod29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nV29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLmFscmVhZHlFeGlzdHMucHVzaCh3b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZERhdGEgPSBhd2FpdCB0aGlzLndvcmRTZXJ2aWNlLmdldFdvcmREYXRhKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV29yZERhdGFcdUI5N0MgVm9jYWJ1bGFyeUNhcmRcdUI4NUMgXHVCQ0MwXHVENjU4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZvY2FidWxhcnlDYXJkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ud29yZERhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6ICdnb29kJyBhcyBjb25zdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va0lkOiBib29rSWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMCBcdUNEOTRcdUFDMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQodm9jYWJ1bGFyeUNhcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnN1Y2Nlc3MucHVzaCh3b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCIgXHVDRDk0XHVBQzAwIFx1QzJFNFx1RDMyODpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXRjaFNpemU6IGdldENvbmZpZ1ZhbHVlPG51bWJlcj4oQ09ORklHX1BBVEhTLkJBVENIX0RFRkFVTFRfU0laRSksXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IGdldENvbmZpZ1ZhbHVlPG51bWJlcj4oQ09ORklHX1BBVEhTLkJBVENIX0RFTEFZKSxcclxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbjogdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZS50b2tlbixcclxuICAgICAgICAgICAgICAgICAgICBvblByb2dyZXNzOiAoY3VycmVudCwgdG90YWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9ncmVzcyhjdXJyZW50LCB0b3RhbCwgYFx1Q0M5OFx1QjlBQyBcdUM5MTEuLi4gKCR7Y3VycmVudH0vJHt0b3RhbH0pYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIENhbmNlbGxhdGlvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3OTFcdUM1QzVcdUM3NzQgXHVDREU4XHVDMThDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCQzMwXHVDRTU4IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlPy5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVQcm9ncmVzcygpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNhbmNlbEJ1dHRvbihmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdHMocmVzdWx0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VXb3JkcyhpbnB1dFRleHQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICAgICAgICAvLyBcdUM3ODVcdUI4MjUgXHVEMTREXHVDMkE0XHVEMkI4IFx1QzgxNVx1QzgxQ1xyXG4gICAgICAgIGNvbnN0IHNhbml0aXplZElucHV0ID0gc2FuaXRpemVNYXJrZG93bihpbnB1dFRleHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJhd1dvcmRzID0gc2FuaXRpemVkSW5wdXRcclxuICAgICAgICAgICAgLnNwbGl0KCdcXG4nKVxyXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gd29yZC50cmltKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDApO1xyXG5cclxuICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVBQzgwXHVDOTlEIFx1QkMwRiBcdUM4MTVcdUM4MUNcclxuICAgICAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGVCYXRjaChyYXdXb3JkcywgKHdvcmQpID0+IHZhbGlkYXRlV29yZCh3b3JkKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDNzIwXHVENkE4XHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNzg4XHVDNzNDXHVCQTc0IFx1QzBBQ1x1QzZBOVx1Qzc5MFx1QzVEMFx1QUM4QyBcdUM1NENcdUI5QkNcclxuICAgICAgICBpZiAodmFsaWRhdGlvbi5pbnZhbGlkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgaW52YWxpZFdvcmRzID0gdmFsaWRhdGlvbi5pbnZhbGlkLnNsaWNlKDAsIDUpLm1hcChpdGVtID0+IGl0ZW0uaXRlbSkuam9pbignLCAnKTtcclxuICAgICAgICAgICAgY29uc3QgbW9yZUNvdW50ID0gdmFsaWRhdGlvbi5pbnZhbGlkLmxlbmd0aCA+IDUgPyBgIFx1QzY3OCAke3ZhbGlkYXRpb24uaW52YWxpZC5sZW5ndGggLSA1fVx1QUMxQ2AgOiAnJztcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHVDNzIwXHVENkE4XHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDODFDXHVDNjc4XHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0OiAke2ludmFsaWRXb3Jkc30ke21vcmVDb3VudH1gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QzcyMFx1RDZBOFx1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTRcdUI5Q0MgXHVCQzE4XHVENjU4IChcdUM5MTFcdUJDRjUgXHVDODFDXHVBQzcwKVxyXG4gICAgICAgIGNvbnN0IHZhbGlkV29yZHMgPSB2YWxpZGF0aW9uLnZhbGlkXHJcbiAgICAgICAgICAgIC5tYXAod29yZCA9PiB2YWxpZGF0ZVdvcmQod29yZCkuc2FuaXRpemVkISlcclxuICAgICAgICAgICAgLm1hcCh3b3JkID0+IHdvcmQudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICAgICAgLmZpbHRlcigod29yZCwgaW5kZXgsIGFycmF5KSA9PiBhcnJheS5pbmRleE9mKHdvcmQpID09PSBpbmRleCk7XHJcblxyXG4gICAgICAgIHJldHVybiB2YWxpZFdvcmRzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1Byb2dyZXNzKHRvdGFsV29yZHM6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnJlbW92ZUNsYXNzKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24uYWRkQ2xhc3MoJ2Rpc3BsYXktYmxvY2snKTtcclxuICAgICAgICBwcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSBgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1OFx1QjI5NCBcdUM5MTEuLi4gKDAvJHt0b3RhbFdvcmRzfSlgO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlUHJvZ3Jlc3MoY3VycmVudDogbnVtYmVyLCB0b3RhbDogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IHByb2dyZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3MtdGV4dCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzRmlsbCA9IHByb2dyZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3MtZmlsbCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSAoY3VycmVudCAvIHRvdGFsKSAqIDEwMDtcclxuICAgICAgICBwcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSBgJHttZXNzYWdlfSAoJHtjdXJyZW50fS8ke3RvdGFsfSlgO1xyXG4gICAgICAgIHByb2dyZXNzRmlsbC5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnRhZ2V9JWA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoaWRlUHJvZ3Jlc3MoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24ucmVtb3ZlQ2xhc3MoJ2Rpc3BsYXktYmxvY2snKTtcclxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24uYWRkQ2xhc3MoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1Jlc3VsdHMocmVzdWx0czogeyBzdWNjZXNzOiBzdHJpbmdbXTsgZmFpbGVkOiBzdHJpbmdbXTsgYWxyZWFkeUV4aXN0czogc3RyaW5nW10gfSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICByZXN1bHRTZWN0aW9uLnJlbW92ZUNsYXNzKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICByZXN1bHRTZWN0aW9uLmFkZENsYXNzKCdkaXNwbGF5LWJsb2NrJyk7XHJcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5lbXB0eSgpO1xyXG5cclxuICAgICAgICBjb25zdCB0b3RhbFByb2Nlc3NlZCA9IHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggKyByZXN1bHRzLmZhaWxlZC5sZW5ndGggKyByZXN1bHRzLmFscmVhZHlFeGlzdHMubGVuZ3RoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QUNCMFx1QUNGQyBcdUM2OTRcdUM1N0RcclxuICAgICAgICBjb25zdCBzdW1tYXJ5RWwgPSByZXN1bHRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdHMtc3VtbWFyeScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSBzdWNjZXNzJyB9KTtcclxuICAgICAgICAgICAgc3VjY2Vzc0VsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI3MDUgXHVDMTMxXHVBQ0Y1OiAke3Jlc3VsdHMuc3VjY2Vzcy5sZW5ndGh9XHVBQzFDYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoIDw9IDUpIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5zdWNjZXNzLmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZXN1bHRzLmFscmVhZHlFeGlzdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdHNFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSB3YXJuaW5nJyB9KTtcclxuICAgICAgICAgICAgZXhpc3RzRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1MjZBMFx1RkUwRiBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDOiAke3Jlc3VsdHMuYWxyZWFkeUV4aXN0cy5sZW5ndGh9XHVBQzFDYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmFscmVhZHlFeGlzdHMubGVuZ3RoIDw9IDUpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0c0VsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLmFscmVhZHlFeGlzdHMuam9pbignLCAnKSxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtd29yZHMnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlc3VsdHMuZmFpbGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZmFpbGVkRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gZXJyb3InIH0pO1xyXG4gICAgICAgICAgICBmYWlsZWRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNzRDIFx1QzJFNFx1RDMyODogJHtyZXN1bHRzLmZhaWxlZC5sZW5ndGh9XHVBQzFDYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmZhaWxlZC5sZW5ndGggPD0gNSkge1xyXG4gICAgICAgICAgICAgICAgZmFpbGVkRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuZmFpbGVkLmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QkM4NFx1RDJCQ1x1QjRFNFxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSByZXN1bHRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1idXR0b25zJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRUJcdUFFMzAnLFxyXG4gICAgICAgICAgICBjbHM6ICdjbG9zZS1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG5cclxuICAgICAgICBjb25zdCBhZGRNb3JlQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjM1NCBcdUNEOTRcdUFDMDBcdUQ1NThcdUFFMzAnLFxyXG4gICAgICAgICAgICBjbHM6ICdhZGQtbW9yZS1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYWRkTW9yZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgcmVzdWx0U2VjdGlvbi5yZW1vdmVDbGFzcygnZGlzcGxheS1ibG9jaycpO1xyXG4gICAgICAgICAgICByZXN1bHRTZWN0aW9uLmFkZENsYXNzKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcud29yZHMtdGV4dGFyZWEnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUMxMzFcdUFDRjVcdUQ1NUMgXHVCMkU4XHVDNUI0XHVBQzAwIFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM1NENcdUI5QkNcclxuICAgICAgICBpZiAocmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgJHtyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RofVx1QUMxQ1x1Qzc1OCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1Q0Q5NFx1QUMwMFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjYW5jZWxPcGVyYXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZS5jYW5jZWwoKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzkxXHVDNUM1IFx1Q0RFOFx1QzE4QyBcdUM5MTEuLi4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVDYW5jZWxCdXR0b24oaXNQcm9jZXNzaW5nOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLmNhbmNlbC1idXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBpZiAoY2FuY2VsQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi50ZXh0Q29udGVudCA9IGlzUHJvY2Vzc2luZyA/ICdcdUM3OTFcdUM1QzUgXHVDREU4XHVDMThDJyA6ICdcdUNERThcdUMxOEMnO1xyXG4gICAgICAgICAgICBjYW5jZWxCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZGFuZ2VyJywgaXNQcm9jZXNzaW5nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICAvLyBcdUM5QzRcdUQ1ODkgXHVDOTExXHVDNzc4IFx1Qzc5MVx1QzVDNSBcdUNERThcdUMxOENcclxuICAgICAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcgJiYgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlLmNhbmNlbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2U/LmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlID0gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Jvb2tDcmVhdGVkJywgdGhpcy5oYW5kbGVCb29rQ3JlYXRlZC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9wZW5BZGRCb29rTW9kYWwoKSB7XHJcbiAgICAgICAgbmV3IEFkZEJvb2tNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUJvb2tDcmVhdGVkKGV2ZW50OiBDdXN0b21FdmVudCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQm9va1NlbGVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQm9va1NlbGVjdCgpIHtcclxuICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVDRDVDXHVDMkUwIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0RENcclxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYm9va3MgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsQm9va3MoKTtcclxuICAgICAgICB0aGlzLmJvb2tTZWxlY3QuZW1wdHkoKTtcclxuICAgICAgICBib29rcy5mb3JFYWNoKGJvb2sgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gYm9vay5pZDtcclxuICAgICAgICAgICAgb3B0aW9uLnRleHQgPSBib29rLm5hbWU7XHJcbiAgICAgICAgICAgIGlmIChib29rLmlkID09PSB0aGlzLnNlbGVjdGVkQm9va0lkKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYm9va1NlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59ICIsICIvLyBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEIFx1QkMwRiBcdUM4MTVcdUM4MUMgXHVDNzIwXHVEMkY4XHVCOUFDXHVEMkYwXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRpb25SZXN1bHQge1xyXG4gICAgaXNWYWxpZDogYm9vbGVhbjtcclxuICAgIGVycm9yPzogc3RyaW5nO1xyXG4gICAgc2FuaXRpemVkPzogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBcdUJCMzhcdUM3OTBcdUM1RjQgXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RFxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTdHJpbmcoaW5wdXQ6IHN0cmluZywgb3B0aW9uczoge1xyXG4gICAgbWluTGVuZ3RoPzogbnVtYmVyO1xyXG4gICAgbWF4TGVuZ3RoPzogbnVtYmVyO1xyXG4gICAgYWxsb3dFbXB0eT86IGJvb2xlYW47XHJcbiAgICBwYXR0ZXJuPzogUmVnRXhwO1xyXG4gICAgZmllbGROYW1lPzogc3RyaW5nO1xyXG59ID0ge30pOiBWYWxpZGF0aW9uUmVzdWx0IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgICBtaW5MZW5ndGggPSAwLFxyXG4gICAgICAgIG1heExlbmd0aCA9IDEwMDAsXHJcbiAgICAgICAgYWxsb3dFbXB0eSA9IGZhbHNlLFxyXG4gICAgICAgIHBhdHRlcm4sXHJcbiAgICAgICAgZmllbGROYW1lID0gJ1x1Qzc4NVx1QjgyNVx1QUMxMidcclxuICAgIH0gPSBvcHRpb25zO1xyXG5cclxuICAgIGlmICghaW5wdXQgfHwgaW5wdXQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGlmIChhbGxvd0VtcHR5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIHNhbml0aXplZDogJycgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgXHVENTQ0XHVDMjE4IFx1Qzc4NVx1QjgyNVx1QUMxMlx1Qzc4NVx1QjJDOFx1QjJFNC5gIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdHJpbW1lZCA9IGlucHV0LnRyaW0oKTtcclxuXHJcbiAgICBpZiAodHJpbW1lZC5sZW5ndGggPCBtaW5MZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgICAgaXNWYWxpZDogZmFsc2UsIFxyXG4gICAgICAgICAgICBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpIFx1Q0Q1Q1x1QzE4QyAke21pbkxlbmd0aH1cdUM3OTAgXHVDNzc0XHVDMEMxXHVDNzc0XHVDNUI0XHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5gIFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRyaW1tZWQubGVuZ3RoID4gbWF4TGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLCBcclxuICAgICAgICAgICAgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NDAoXHVCMjk0KSBcdUNENUNcdUIzMDAgJHttYXhMZW5ndGh9XHVDNzkwIFx1Qzc3NFx1RDU1OFx1QzVFQ1x1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuYCBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwYXR0ZXJuICYmICFwYXR0ZXJuLnRlc3QodHJpbW1lZCkpIHtcclxuICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgICAgaXNWYWxpZDogZmFsc2UsIFxyXG4gICAgICAgICAgICBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc1OCBcdUQ2MTVcdUMyRERcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC5gIFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgc2FuaXRpemVkOiB0cmltbWVkIH07XHJcbn1cclxuXHJcbi8vIEFQSSBcdUQwQTQgXHVBQzgwXHVDOTlEXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFwaUtleShhcGlLZXk6IHN0cmluZywgcHJvdmlkZXI6IHN0cmluZyk6IFZhbGlkYXRpb25SZXN1bHQge1xyXG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlU3RyaW5nKGFwaUtleSwge1xyXG4gICAgICAgIG1pbkxlbmd0aDogMTAsXHJcbiAgICAgICAgbWF4TGVuZ3RoOiAyMDAsXHJcbiAgICAgICAgZmllbGROYW1lOiBgJHtwcm92aWRlcn0gQVBJIFx1RDBBNGBcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVBQzAxIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1QkNDNCBBUEkgXHVEMEE0IFx1RDYxNVx1QzJERCBcdUFDODBcdUM5OURcclxuICAgIGNvbnN0IHBhdHRlcm5zID0ge1xyXG4gICAgICAgIG9wZW5haTogL15zay1bYS16QS1aMC05XXs0OCx9JC8sXHJcbiAgICAgICAgYW50aHJvcGljOiAvXnNrLWFudC1bYS16QS1aMC05LV9dezk1LH0kLyxcclxuICAgICAgICBnb29nbGU6IC9eW2EtekEtWjAtOV8tXXszOX0kL1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBwYXR0ZXJuID0gcGF0dGVybnNbcHJvdmlkZXIudG9Mb3dlckNhc2UoKSBhcyBrZXlvZiB0eXBlb2YgcGF0dGVybnNdO1xyXG4gICAgaWYgKHBhdHRlcm4gJiYgIXBhdHRlcm4udGVzdCh2YWxpZGF0aW9uLnNhbml0aXplZCEpKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaXNWYWxpZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGVycm9yOiBgJHtwcm92aWRlcn0gQVBJIFx1RDBBNCBcdUQ2MTVcdUMyRERcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC5gXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsaWRhdGlvbjtcclxufVxyXG5cclxuLy8gXHVCMkU4XHVDNUI0IFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OURcclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlV29yZCh3b3JkOiBzdHJpbmcpOiBWYWxpZGF0aW9uUmVzdWx0IHtcclxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZVN0cmluZyh3b3JkLCB7XHJcbiAgICAgICAgbWluTGVuZ3RoOiAxLFxyXG4gICAgICAgIG1heExlbmd0aDogNTAsXHJcbiAgICAgICAgcGF0dGVybjogL15bYS16QS1aXFxzJy1dKyQvLFxyXG4gICAgICAgIGZpZWxkTmFtZTogJ1x1QjJFOFx1QzVCNCdcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDRDk0XHVBQzAwIFx1QUM4MFx1Qzk5RDogXHVEMkI5XHVDMjE4IFx1QkIzOFx1Qzc5MCBcdUM4MUNcdUQ1NUNcclxuICAgIGNvbnN0IHNhbml0aXplZCA9IHZhbGlkYXRpb24uc2FuaXRpemVkIVxyXG4gICAgICAgIC5yZXBsYWNlKC9bXlxcd1xccyctXS9nLCAnJykgLy8gXHVENUM4XHVDNkE5XHVCNDE4XHVDOUMwIFx1QzU0QVx1QjI5NCBcdUQyQjlcdUMyMThcdUJCMzhcdUM3OTAgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKTsgLy8gXHVDNUYwXHVDMThEXHVCNDFDIFx1QUNGNVx1QkMzMVx1Qzc0NCBcdUQ1NThcdUIwOThcdUI4NUNcclxuXHJcbiAgICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBzYW5pdGl6ZWQgfTtcclxufVxyXG5cclxuLy8gXHVCOUM4XHVEMDZDXHVCMkU0XHVDNkI0IFx1RDE0RFx1QzJBNFx1RDJCOCBcdUM4MTVcdUM4MUNcclxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplTWFya2Rvd24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmICghdGV4dCkgcmV0dXJuICcnO1xyXG5cclxuICAgIHJldHVybiB0ZXh0XHJcbiAgICAgICAgLnJlcGxhY2UoLzxzY3JpcHRbXj5dKj5bXFxzXFxTXSo/PFxcL3NjcmlwdD4vZ2ksICcnKSAvLyBcdUMyQTRcdUQwNkNcdUI5QkRcdUQyQjggXHVEMERDXHVBREY4IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIC5yZXBsYWNlKC88aWZyYW1lW14+XSo+W1xcc1xcU10qPzxcXC9pZnJhbWU+L2dpLCAnJykgLy8gaWZyYW1lIFx1RDBEQ1x1QURGOCBcdUM4MUNcdUFDNzBcclxuICAgICAgICAucmVwbGFjZSgvamF2YXNjcmlwdDovZ2ksICcnKSAvLyBqYXZhc2NyaXB0OiBcdUQ1MDRcdUI4NUNcdUQxQTBcdUNGNUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgLnJlcGxhY2UoL29uXFx3K1xccyo9L2dpLCAnJykgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1RDU3OFx1QjRFNFx1QjdFQyBcdUM4MUNcdUFDNzBcclxuICAgICAgICAudHJpbSgpO1xyXG59XHJcblxyXG4vLyBVUkwgXHVBQzgwXHVDOTlEXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVVybCh1cmw6IHN0cmluZyk6IFZhbGlkYXRpb25SZXN1bHQge1xyXG4gICAgaWYgKCF1cmwpIHtcclxuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6ICdVUkxcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTY5XHVCMkM4XHVCMkU0LicgfTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVybE9iaiA9IG5ldyBVUkwodXJsKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBIVFRQU1x1QjlDQyBcdUQ1QzhcdUM2QTlcclxuICAgICAgICBpZiAodXJsT2JqLnByb3RvY29sICE9PSAnaHR0cHM6Jykge1xyXG4gICAgICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6ICdIVFRQUyBVUkxcdUI5Q0MgXHVENUM4XHVDNkE5XHVCNDI5XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1RDVDOFx1QzZBOVx1QjQxQyBcdUIzQzRcdUJBNTRcdUM3NzggXHVENjU1XHVDNzc4IChcdUQ1NDRcdUM2OTRcdUMyREMpXHJcbiAgICAgICAgY29uc3QgYWxsb3dlZERvbWFpbnMgPSBbXHJcbiAgICAgICAgICAgICdhcGkub3BlbmFpLmNvbScsXHJcbiAgICAgICAgICAgICdhcGkuYW50aHJvcGljLmNvbScsXHJcbiAgICAgICAgICAgICdnZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20nXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgLy8gXHVCM0M0XHVCQTU0XHVDNzc4IFx1QUM4MFx1Qzk5RFx1Qzc0MCBcdUMxMjBcdUQwRERcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMjE4XHVENTg5XHJcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgc2FuaXRpemVkOiB1cmwgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiAnXHVDNzIwXHVENkE4XHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0MCBVUkwgXHVENjE1XHVDMkREXHVDNzg1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVDMjJCXHVDNzkwIFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OURcclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlTnVtYmVyKHZhbHVlOiBhbnksIG9wdGlvbnM6IHtcclxuICAgIG1pbj86IG51bWJlcjtcclxuICAgIG1heD86IG51bWJlcjtcclxuICAgIGludGVnZXI/OiBib29sZWFuO1xyXG4gICAgZmllbGROYW1lPzogc3RyaW5nO1xyXG59ID0ge30pOiBWYWxpZGF0aW9uUmVzdWx0IHtcclxuICAgIGNvbnN0IHsgbWluLCBtYXgsIGludGVnZXIgPSBmYWxzZSwgZmllbGROYW1lID0gJ1x1QzIyQlx1Qzc5MCcgfSA9IG9wdGlvbnM7XHJcblxyXG4gICAgY29uc3QgbnVtID0gTnVtYmVyKHZhbHVlKTtcclxuICAgIFxyXG4gICAgaWYgKGlzTmFOKG51bSkpIHtcclxuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NDAoXHVCMjk0KSBcdUM3MjBcdUQ2QThcdUQ1NUMgXHVDMjJCXHVDNzkwXHVDNUVDXHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5gIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGludGVnZXIgJiYgIU51bWJlci5pc0ludGVnZXIobnVtKSkge1xyXG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpIFx1QzgxNVx1QzIxOFx1QzVFQ1x1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuYCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChtaW4gIT09IHVuZGVmaW5lZCAmJiBudW0gPCBtaW4pIHtcclxuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NDAoXHVCMjk0KSAke21pbn0gXHVDNzc0XHVDMEMxXHVDNzc0XHVDNUI0XHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5gIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG1heCAhPT0gdW5kZWZpbmVkICYmIG51bSA+IG1heCkge1xyXG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpICR7bWF4fSBcdUM3NzRcdUQ1NThcdUM1RUNcdUM1N0MgXHVENTY5XHVCMkM4XHVCMkU0LmAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBzYW5pdGl6ZWQ6IG51bS50b1N0cmluZygpIH07XHJcbn1cclxuXHJcbi8vIFx1QkMzMFx1Q0U1OCBcdUFDODBcdUM5OUQgXHVENTY4XHVDMjE4XHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUJhdGNoPFQ+KFxyXG4gICAgaXRlbXM6IFRbXSxcclxuICAgIHZhbGlkYXRvcjogKGl0ZW06IFQpID0+IFZhbGlkYXRpb25SZXN1bHRcclxuKTogeyB2YWxpZDogVFtdOyBpbnZhbGlkOiBBcnJheTx7IGl0ZW06IFQ7IGVycm9yOiBzdHJpbmcgfT4gfSB7XHJcbiAgICBjb25zdCB2YWxpZDogVFtdID0gW107XHJcbiAgICBjb25zdCBpbnZhbGlkOiBBcnJheTx7IGl0ZW06IFQ7IGVycm9yOiBzdHJpbmcgfT4gPSBbXTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IoaXRlbSk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5pc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIHZhbGlkLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW52YWxpZC5wdXNoKHsgaXRlbSwgZXJyb3I6IHJlc3VsdC5lcnJvciB8fCAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4JyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgdmFsaWQsIGludmFsaWQgfTtcclxufSIsICIvLyBcdUM3OTFcdUM1QzUgXHVDREU4XHVDMThDXHVCOTdDIFx1QzcwNFx1RDU1QyBcdUQxQTBcdUQwNzAgXHVDMkRDXHVDMkE0XHVEMTVDXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhbmNlbGxhdGlvblRva2VuIHtcclxuICAgIHJlYWRvbmx5IGlzQ2FuY2VsbGVkOiBib29sZWFuO1xyXG4gICAgdGhyb3dJZkNhbmNlbGxlZCgpOiB2b2lkO1xyXG4gICAgb25DYW5jZWxsZWQoY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2Uge1xyXG4gICAgcHJpdmF0ZSBfaXNDYW5jZWxsZWQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX2NhbGxiYWNrczogKCgpID0+IHZvaWQpW10gPSBbXTtcclxuXHJcbiAgICBnZXQgdG9rZW4oKTogQ2FuY2VsbGF0aW9uVG9rZW4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGdldCBpc0NhbmNlbGxlZCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc0NhbmNlbGxlZDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGhyb3dJZkNhbmNlbGxlZDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzQ2FuY2VsbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENhbmNlbGxhdGlvbkVycm9yKCdPcGVyYXRpb24gd2FzIGNhbmNlbGxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNhbmNlbGxlZDogKGNhbGxiYWNrOiAoKSA9PiB2b2lkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNDYW5jZWxsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNhbmNlbCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5faXNDYW5jZWxsZWQpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9pc0NhbmNlbGxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNhbmNlbGxhdGlvbiBjYWxsYmFjazonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9jYWxsYmFja3MubGVuZ3RoID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcy5sZW5ndGggPSAwO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FuY2VsbGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSAnT3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQnKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gJ0NhbmNlbGxhdGlvbkVycm9yJztcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVDNzIwXHVEMkY4XHVCOUFDXHVEMkYwIFx1RDU2OFx1QzIxOFx1QjRFNFxyXG5leHBvcnQgZnVuY3Rpb24gZGVsYXkobXM6IG51bWJlciwgY2FuY2VsbGF0aW9uVG9rZW4/OiBDYW5jZWxsYXRpb25Ub2tlbik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBpZiAoY2FuY2VsbGF0aW9uVG9rZW4/LmlzQ2FuY2VsbGVkKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfSwgbXMpO1xyXG5cclxuICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbj8ub25DYW5jZWxsZWQoKCkgPT4ge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldyBDYW5jZWxsYXRpb25FcnJvcigpKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2l0aENhbmNlbGxhdGlvbjxUPihcclxuICAgIHByb21pc2U6IFByb21pc2U8VD4sXHJcbiAgICBjYW5jZWxsYXRpb25Ub2tlbj86IENhbmNlbGxhdGlvblRva2VuXHJcbik6IFByb21pc2U8VD4ge1xyXG4gICAgaWYgKCFjYW5jZWxsYXRpb25Ub2tlbikge1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaWYgKGNhbmNlbGxhdGlvblRva2VuLmlzQ2FuY2VsbGVkKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpc1Jlc29sdmVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHByb21pc2UudGhlbihcclxuICAgICAgICAgICAgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUmVzb2x2ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc1Jlc29sdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUmVzb2x2ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc1Jlc29sdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW4ub25DYW5jZWxsZWQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWlzUmVzb2x2ZWQpIHtcclxuICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBDYW5jZWxsYXRpb25FcnJvcigpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIFx1QkMzMFx1Q0U1OCBcdUNDOThcdUI5QUNcdUM2QTkgXHVDREU4XHVDMThDIFx1QUMwMFx1QjJBNVx1RDU1QyBcdUQ1NjhcdUMyMThcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NCYXRjaFdpdGhDYW5jZWxsYXRpb248VCwgUj4oXHJcbiAgICBpdGVtczogVFtdLFxyXG4gICAgcHJvY2Vzc29yOiAoaXRlbTogVCwgaW5kZXg6IG51bWJlcikgPT4gUHJvbWlzZTxSPixcclxuICAgIG9wdGlvbnM6IHtcclxuICAgICAgICBiYXRjaFNpemU/OiBudW1iZXI7XHJcbiAgICAgICAgZGVsYXk/OiBudW1iZXI7XHJcbiAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW4/OiBDYW5jZWxsYXRpb25Ub2tlbjtcclxuICAgICAgICBvblByb2dyZXNzPzogKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlcikgPT4gdm9pZDtcclxuICAgIH0gPSB7fVxyXG4pOiBQcm9taXNlPFJbXT4ge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICAgIGJhdGNoU2l6ZSA9IDEwLFxyXG4gICAgICAgIGRlbGF5OiBkZWxheU1zID0gMTAwLFxyXG4gICAgICAgIGNhbmNlbGxhdGlvblRva2VuLFxyXG4gICAgICAgIG9uUHJvZ3Jlc3NcclxuICAgIH0gPSBvcHRpb25zO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdHM6IFJbXSA9IFtdO1xyXG4gICAgXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcclxuICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbj8udGhyb3dJZkNhbmNlbGxlZCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGJhdGNoID0gaXRlbXMuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgYmF0Y2hQcm9taXNlcyA9IGJhdGNoLm1hcCgoaXRlbSwgYmF0Y2hJbmRleCkgPT5cclxuICAgICAgICAgICAgcHJvY2Vzc29yKGl0ZW0sIGkgKyBiYXRjaEluZGV4KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoUmVzdWx0cyA9IGF3YWl0IHdpdGhDYW5jZWxsYXRpb24oXHJcbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChiYXRjaFByb21pc2VzKSxcclxuICAgICAgICAgICAgICAgIGNhbmNlbGxhdGlvblRva2VuXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCguLi5iYXRjaFJlc3VsdHMpO1xyXG5cclxuICAgICAgICAgICAgLy8gXHVDOUM0XHVENTg5XHVCOTYwIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgICAgICBvblByb2dyZXNzPy4oTWF0aC5taW4oaSArIGJhdGNoU2l6ZSwgaXRlbXMubGVuZ3RoKSwgaXRlbXMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUJDMzBcdUNFNTggXHVDODA0IFx1QjMwMFx1QUUzMCAoXHVCOUM4XHVDOUMwXHVCOUM5IFx1QkMzMFx1Q0U1OFx1QUMwMCBcdUM1NDRcdUIyQ0MgXHVBQ0JEXHVDNkIwKVxyXG4gICAgICAgICAgICBpZiAoaSArIGJhdGNoU2l6ZSA8IGl0ZW1zLmxlbmd0aCAmJiBkZWxheU1zID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgZGVsYXkoZGVsYXlNcywgY2FuY2VsbGF0aW9uVG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQ2FuY2VsbGF0aW9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFx1QjJFNFx1Qjk3OCBcdUM1RDBcdUI3RUNcdUIyOTQgXHVBQ0IwXHVBQ0ZDXHVDNUQwIFx1RDNFQ1x1RDU2OFx1RDU1OFx1QUM3MFx1QjA5OCBcdUM3QUNcdUMyRENcdUIzQzQgXHVCODVDXHVDOUMxIFx1Q0Q5NFx1QUMwMCBcdUFDMDBcdUIyQTVcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHRzO1xyXG59IiwgImV4cG9ydCB0eXBlIENvbnN0cnVjdG9yPFQgPSB7fT4gPSBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xyXG5leHBvcnQgdHlwZSBGYWN0b3J5PFQgPSBhbnk+ID0gKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTZXJ2aWNlRGVmaW5pdGlvbjxUID0gYW55PiB7XHJcbiAgICBpbXBsZW1lbnRhdGlvbjogQ29uc3RydWN0b3I8VD4gfCBGYWN0b3J5PFQ+O1xyXG4gICAgc2luZ2xldG9uPzogYm9vbGVhbjtcclxuICAgIGRlcGVuZGVuY2llcz86IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRElDb250YWluZXIge1xyXG4gICAgcHJpdmF0ZSBzZXJ2aWNlcyA9IG5ldyBNYXA8c3RyaW5nLCBTZXJ2aWNlRGVmaW5pdGlvbj4oKTtcclxuICAgIHByaXZhdGUgaW5zdGFuY2VzID0gbmV3IE1hcDxzdHJpbmcsIGFueT4oKTtcclxuXHJcbiAgICByZWdpc3RlcjxUPihcclxuICAgICAgICBuYW1lOiBzdHJpbmcsIFxyXG4gICAgICAgIGltcGxlbWVudGF0aW9uOiBDb25zdHJ1Y3RvcjxUPiB8IEZhY3Rvcnk8VD4sXHJcbiAgICAgICAgb3B0aW9uczogeyBzaW5nbGV0b24/OiBib29sZWFuOyBkZXBlbmRlbmNpZXM/OiBzdHJpbmdbXSB9ID0ge31cclxuICAgICk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VydmljZXMuc2V0KG5hbWUsIHtcclxuICAgICAgICAgICAgaW1wbGVtZW50YXRpb24sXHJcbiAgICAgICAgICAgIHNpbmdsZXRvbjogb3B0aW9ucy5zaW5nbGV0b24gPz8gdHJ1ZSxcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBvcHRpb25zLmRlcGVuZGVuY2llcyA/PyBbXVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc29sdmU8VD4obmFtZTogc3RyaW5nKTogVCB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZSA9IHRoaXMuc2VydmljZXMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIGlmICghc2VydmljZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNlcnZpY2UgJyR7bmFtZX0nIG5vdCByZWdpc3RlcmVkYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUMyRjFcdUFFMDBcdUQxQTRcdUM3NzRcdUFDRTAgXHVDNzc0XHVCQkY4IFx1Qzc3OFx1QzJBNFx1RDEzNFx1QzJBNFx1QUMwMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVCQzE4XHVENjU4XHJcbiAgICAgICAgaWYgKHNlcnZpY2Uuc2luZ2xldG9uICYmIHRoaXMuaW5zdGFuY2VzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDNzU4XHVDODc0XHVDMTMxIFx1RDU3NFx1QUNCMFxyXG4gICAgICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IHNlcnZpY2UuZGVwZW5kZW5jaWVzLm1hcChkZXAgPT4gdGhpcy5yZXNvbHZlKGRlcCkpO1xyXG5cclxuICAgICAgICAvLyBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTQgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgbGV0IGluc3RhbmNlOiBUO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ29uc3RydWN0b3Ioc2VydmljZS5pbXBsZW1lbnRhdGlvbikpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSBuZXcgc2VydmljZS5pbXBsZW1lbnRhdGlvbiguLi5kZXBlbmRlbmNpZXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gc2VydmljZS5pbXBsZW1lbnRhdGlvbiguLi5kZXBlbmRlbmNpZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDMkYxXHVBRTAwXHVEMUE0XHVDNzc0XHVCQTc0IFx1Qzc3OFx1QzJBNFx1RDEzNFx1QzJBNCBcdUM4MDBcdUM3QTVcclxuICAgICAgICBpZiAoc2VydmljZS5zaW5nbGV0b24pIHtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KG5hbWUsIGluc3RhbmNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICByZWdpc3Rlckluc3RhbmNlPFQ+KG5hbWU6IHN0cmluZywgaW5zdGFuY2U6IFQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQobmFtZSwgaW5zdGFuY2UpO1xyXG4gICAgICAgIHRoaXMuc2VydmljZXMuc2V0KG5hbWUsIHtcclxuICAgICAgICAgICAgaW1wbGVtZW50YXRpb246ICgpID0+IGluc3RhbmNlLFxyXG4gICAgICAgICAgICBzaW5nbGV0b246IHRydWUsXHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogW11cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYXMobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZXMuaGFzKG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VydmljZXMuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcy5jbGVhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNDb25zdHJ1Y3RvcihpbXBsZW1lbnRhdGlvbjogYW55KTogaW1wbGVtZW50YXRpb24gaXMgQ29uc3RydWN0b3Ige1xyXG4gICAgICAgIHJldHVybiBpbXBsZW1lbnRhdGlvbi5wcm90b3R5cGUgJiYgaW1wbGVtZW50YXRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID09PSBpbXBsZW1lbnRhdGlvbjtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVBRTAwXHVCODVDXHVCQzhDIFx1Q0VFOFx1RDE0Q1x1Qzc3NFx1QjEwOCBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTRcclxuZXhwb3J0IGNvbnN0IGNvbnRhaW5lciA9IG5ldyBESUNvbnRhaW5lcigpOyIsICJpbXBvcnQgeyBEaWZmaWN1bHR5LCBFeGFtcGxlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi90eXBlcyc7XHJcblxyXG4vLyBcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNCBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTRcclxuZXhwb3J0IGludGVyZmFjZSBXb3JkRGF0YSB7XHJcbiAgICB3b3JkOiBzdHJpbmc7XHJcbiAgICBwcm9udW5jaWF0aW9uOiBzdHJpbmc7XHJcbiAgICBtZWFuaW5nczogc3RyaW5nW107XHJcbiAgICBzaW1pbGFyV29yZHM6IHN0cmluZ1tdO1xyXG4gICAgZXhhbXBsZXM6IEV4YW1wbGVbXTtcclxufVxyXG5cclxuLy8gXHVCMkU4XHVDNUI0IFx1Q0U3NFx1QjREQyBcdUM1RDRcdUQyRjBcdUQyRjBcclxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSB3b3JkOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHByb251bmNpYXRpb246IHN0cmluZyxcclxuICAgICAgICBwdWJsaWMgbWVhbmluZ3M6IHN0cmluZ1tdLFxyXG4gICAgICAgIHB1YmxpYyBzaW1pbGFyV29yZHM6IHN0cmluZ1tdLFxyXG4gICAgICAgIHB1YmxpYyBleGFtcGxlczogRXhhbXBsZVtdLFxyXG4gICAgICAgIHB1YmxpYyByZXZpZXdDb3VudDogbnVtYmVyLFxyXG4gICAgICAgIHB1YmxpYyBkaWZmaWN1bHR5OiBEaWZmaWN1bHR5LFxyXG4gICAgICAgIHB1YmxpYyBsYXN0UmV2aWV3ZWQ6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGFkZGVkRGF0ZTogc3RyaW5nLFxyXG4gICAgICAgIHB1YmxpYyBib29rSWQ6IHN0cmluZ1xyXG4gICAgKSB7fVxyXG5cclxuICAgIC8vIFx1RDMyOVx1RDFBMFx1QjlBQyBcdUJBNTRcdUMxMUNcdUI0REM6IFdvcmREYXRhXHVCODVDXHVCRDgwXHVEMTMwIFZvY2FidWxhcnlDYXJkIFx1QzBERFx1QzEzMVxyXG4gICAgc3RhdGljIGZyb21Xb3JkRGF0YSh3b3JkRGF0YTogV29yZERhdGEsIGJvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmQge1xyXG4gICAgICAgIHJldHVybiBuZXcgVm9jYWJ1bGFyeUNhcmQoXHJcbiAgICAgICAgICAgIHdvcmREYXRhLndvcmQsXHJcbiAgICAgICAgICAgIHdvcmREYXRhLnByb251bmNpYXRpb24sXHJcbiAgICAgICAgICAgIHdvcmREYXRhLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICB3b3JkRGF0YS5zaW1pbGFyV29yZHMsXHJcbiAgICAgICAgICAgIHdvcmREYXRhLmV4YW1wbGVzLFxyXG4gICAgICAgICAgICAwLCAvLyBcdUNEMDhcdUFFMzAgXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxOFxyXG4gICAgICAgICAgICAnZ29vZCcsIC8vIFx1Q0QwOFx1QUUzMCBcdUIwOUNcdUM3NzRcdUIzQzRcclxuICAgICAgICAgICAgbnVsbCwgLy8gXHVDRDA4XHVBRTMwIFx1QkNGNVx1QzJCNSBcdUIwQTBcdUM5RENcclxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCAvLyBcdUNEOTRcdUFDMDAgXHVCMEEwXHVDOURDXHJcbiAgICAgICAgICAgIGJvb2tJZFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCQ0Y1XHVDMkI1IFx1QzIxOFx1RDU4OVxyXG4gICAgcmV2aWV3KG5ld0RpZmZpY3VsdHk6IERpZmZpY3VsdHkpOiBWb2NhYnVsYXJ5Q2FyZCB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcclxuICAgICAgICAgICAgdGhpcy53b3JkLFxyXG4gICAgICAgICAgICB0aGlzLnByb251bmNpYXRpb24sXHJcbiAgICAgICAgICAgIHRoaXMubWVhbmluZ3MsXHJcbiAgICAgICAgICAgIHRoaXMuc2ltaWxhcldvcmRzLFxyXG4gICAgICAgICAgICB0aGlzLmV4YW1wbGVzLFxyXG4gICAgICAgICAgICB0aGlzLnJldmlld0NvdW50ICsgMSxcclxuICAgICAgICAgICAgbmV3RGlmZmljdWx0eSxcclxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICB0aGlzLmFkZGVkRGF0ZSxcclxuICAgICAgICAgICAgdGhpcy5ib29rSWRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICB1cGRhdGVXb3JkRGF0YSh3b3JkRGF0YTogUGFydGlhbDxXb3JkRGF0YT4pOiBWb2NhYnVsYXJ5Q2FyZCB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcclxuICAgICAgICAgICAgdGhpcy53b3JkLFxyXG4gICAgICAgICAgICB3b3JkRGF0YS5wcm9udW5jaWF0aW9uID8/IHRoaXMucHJvbnVuY2lhdGlvbixcclxuICAgICAgICAgICAgd29yZERhdGEubWVhbmluZ3MgPz8gdGhpcy5tZWFuaW5ncyxcclxuICAgICAgICAgICAgd29yZERhdGEuc2ltaWxhcldvcmRzID8/IHRoaXMuc2ltaWxhcldvcmRzLFxyXG4gICAgICAgICAgICB3b3JkRGF0YS5leGFtcGxlcyA/PyB0aGlzLmV4YW1wbGVzLFxyXG4gICAgICAgICAgICB0aGlzLnJldmlld0NvdW50LFxyXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIHRoaXMubGFzdFJldmlld2VkLFxyXG4gICAgICAgICAgICB0aGlzLmFkZGVkRGF0ZSxcclxuICAgICAgICAgICAgdGhpcy5ib29rSWRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUIzRDlcclxuICAgIG1vdmVUb0Jvb2sobmV3Qm9va0lkOiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZCB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcclxuICAgICAgICAgICAgdGhpcy53b3JkLFxyXG4gICAgICAgICAgICB0aGlzLnByb251bmNpYXRpb24sXHJcbiAgICAgICAgICAgIHRoaXMubWVhbmluZ3MsXHJcbiAgICAgICAgICAgIHRoaXMuc2ltaWxhcldvcmRzLFxyXG4gICAgICAgICAgICB0aGlzLmV4YW1wbGVzLFxyXG4gICAgICAgICAgICB0aGlzLnJldmlld0NvdW50LFxyXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIHRoaXMubGFzdFJldmlld2VkLFxyXG4gICAgICAgICAgICB0aGlzLmFkZGVkRGF0ZSxcclxuICAgICAgICAgICAgbmV3Qm9va0lkXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUJDRjVcdUMyQjVcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTVDXHVDOUMwIFx1RDY1NVx1Qzc3OFxyXG4gICAgbmVlZHNSZXZpZXcocmV2aWV3SW50ZXJ2YWw6IG51bWJlciA9IDEpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIXRoaXMubGFzdFJldmlld2VkKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBsYXN0UmV2aWV3RGF0ZSA9IG5ldyBEYXRlKHRoaXMubGFzdFJldmlld2VkKTtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGRheXNEaWZmID0gTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIGxhc3RSZXZpZXdEYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjA5Q1x1Qzc3NFx1QjNDNFx1QzVEMCBcdUI1MzBcdUI5NzggXHVCQ0Y1XHVDMkI1IFx1QzhGQ1x1QUUzMCBcdUM4NzBcdUM4MTVcclxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5TXVsdGlwbGllciA9IHtcclxuICAgICAgICAgICAgJ2hhcmQnOiAwLjUsXHJcbiAgICAgICAgICAgICdnb29kJzogMSxcclxuICAgICAgICAgICAgJ2Vhc3knOiAyXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBhZGp1c3RlZEludGVydmFsID0gcmV2aWV3SW50ZXJ2YWwgKiBkaWZmaWN1bHR5TXVsdGlwbGllclt0aGlzLmRpZmZpY3VsdHldO1xyXG4gICAgICAgIHJldHVybiBkYXlzRGlmZiA+PSBhZGp1c3RlZEludGVydmFsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1RDU1OVx1QzJCNSBcdUM5QzRcdUQ1ODlcdUIzQzQgXHVBQ0M0XHVDMEIwICgwLTEwMClcclxuICAgIGdldFByb2dyZXNzUGVyY2VudGFnZSgpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IG1heFJldmlld3MgPSAxMDsgLy8gXHVDRDVDXHVCMzAwIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMThcclxuICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKHRoaXMucmV2aWV3Q291bnQgLyBtYXhSZXZpZXdzLCAxKSAqIDEwMDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUIwOUNcdUM3NzRcdUIzQzQgXHVCQ0Y0XHVCMTA4XHVDMkE0XHJcbiAgICAgICAgY29uc3QgZGlmZmljdWx0eUJvbnVzID0ge1xyXG4gICAgICAgICAgICAnZWFzeSc6IDIwLFxyXG4gICAgICAgICAgICAnZ29vZCc6IDEwLFxyXG4gICAgICAgICAgICAnaGFyZCc6IDBcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBNYXRoLm1pbihwcm9ncmVzcyArIGRpZmZpY3VsdHlCb251c1t0aGlzLmRpZmZpY3VsdHldLCAxMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM5QzFcdUI4MkNcdUQ2NTRcdUI5N0MgXHVDNzA0XHVENTVDIFx1QkE1NFx1QzExQ1x1QjREQ1xyXG4gICAgdG9QbGFpbk9iamVjdCgpOiBWb2NhYnVsYXJ5Q2FyZERhdGEge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdvcmQ6IHRoaXMud29yZCxcclxuICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogdGhpcy5wcm9udW5jaWF0aW9uLFxyXG4gICAgICAgICAgICBtZWFuaW5nczogdGhpcy5tZWFuaW5ncyxcclxuICAgICAgICAgICAgc2ltaWxhcldvcmRzOiB0aGlzLnNpbWlsYXJXb3JkcyxcclxuICAgICAgICAgICAgZXhhbXBsZXM6IHRoaXMuZXhhbXBsZXMsXHJcbiAgICAgICAgICAgIHJldmlld0NvdW50OiB0aGlzLnJldmlld0NvdW50LFxyXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogdGhpcy5sYXN0UmV2aWV3ZWQsXHJcbiAgICAgICAgICAgIGFkZGVkRGF0ZTogdGhpcy5hZGRlZERhdGUsXHJcbiAgICAgICAgICAgIGJvb2tJZDogdGhpcy5ib29rSWRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QUM4MFx1Qzk5RCBcdUI4NUNcdUM5QzFcclxuICAgIHZhbGlkYXRlKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF0aGlzLndvcmQgfHwgdGhpcy53b3JkLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1QUMwMCBcdUM3ODVcdUI4MjVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5tZWFuaW5ncy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1Qzc1OCBcdUI3M0JcdUM3NzQgXHVENTU4XHVCMDk4IFx1Qzc3NFx1QzBDMSBcdUQ1NDRcdUM2OTRcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghdGhpcy5ib29rSWQgfHwgdGhpcy5ib29rSWQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVDN0E1IElEXHVBQzAwIFx1RDU0NFx1QzY5NFx1RDU2OVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGVycm9ycztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlKGRhdGE6IHtcclxuICAgICAgICB3b3JkOiBzdHJpbmc7XHJcbiAgICAgICAgbWVhbmluZzogc3RyaW5nO1xyXG4gICAgICAgIHByb251bmNpYXRpb24/OiBzdHJpbmc7XHJcbiAgICAgICAgZXhhbXBsZXM/OiBzdHJpbmdbXTtcclxuICAgICAgICBib29rSWQ/OiBzdHJpbmc7XHJcbiAgICB9KTogVm9jYWJ1bGFyeUNhcmQge1xyXG4gICAgICAgIHJldHVybiBuZXcgVm9jYWJ1bGFyeUNhcmQoXHJcbiAgICAgICAgICAgIGRhdGEud29yZCxcclxuICAgICAgICAgICAgZGF0YS5wcm9udW5jaWF0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgICBbZGF0YS5tZWFuaW5nXSwgLy8gbWVhbmluZ3MgYXJyYXlcclxuICAgICAgICAgICAgW10sIC8vIHNpbWlsYXJXb3Jkc1xyXG4gICAgICAgICAgICBkYXRhLmV4YW1wbGVzPy5tYXAoZXggPT4gKHsgZW5nbGlzaDogZXgsIGtvcmVhbjogJycgfSkpIHx8IFtdLCAvLyBleGFtcGxlcyB3aXRoIEV4YW1wbGUgdHlwZVxyXG4gICAgICAgICAgICAwLCAvLyByZXZpZXdDb3VudFxyXG4gICAgICAgICAgICAnZ29vZCcsIC8vIGRpZmZpY3VsdHlcclxuICAgICAgICAgICAgbnVsbCwgLy8gbGFzdFJldmlld2VkXHJcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgLy8gYWRkZWREYXRlXHJcbiAgICAgICAgICAgIGRhdGEuYm9va0lkIHx8ICdkZWZhdWx0J1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM4MDRcdUMxQTFcdUM2QTkgXHVDNzc4XHVEMTMwXHVEMzk4XHVDNzc0XHVDMkE0IChcdUFFMzBcdUM4NzQgXHVENjM4XHVENjU4XHVDMTMxIFx1QzcyMFx1QzlDMClcclxuZXhwb3J0IGludGVyZmFjZSBWb2NhYnVsYXJ5Q2FyZERhdGEgZXh0ZW5kcyBXb3JkRGF0YSB7XHJcbiAgICByZXZpZXdDb3VudDogbnVtYmVyO1xyXG4gICAgZGlmZmljdWx0eTogRGlmZmljdWx0eTtcclxuICAgIGxhc3RSZXZpZXdlZDogc3RyaW5nIHwgbnVsbDtcclxuICAgIGFkZGVkRGF0ZTogc3RyaW5nO1xyXG4gICAgYm9va0lkOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vIFx1QUM4MFx1QzBDOSBcdUFDQjBcdUFDRkMgXHVEMEMwXHVDNzg1XHJcbmV4cG9ydCBpbnRlcmZhY2UgU2VhcmNoUmVzdWx0IHtcclxuICAgIGNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdO1xyXG4gICAgdG90YWxDb3VudDogbnVtYmVyO1xyXG4gICAgaGFzTW9yZTogYm9vbGVhbjtcclxufSAiLCAiaW1wb3J0IHsgSVZvY2FidWxhcnlSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcG9ydHMvcmVwb3NpdG9yaWVzL0lWb2NhYnVsYXJ5UmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IElCb29rUmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL3JlcG9zaXRvcmllcy9JQm9va1JlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBJV29yZFNlcnZpY2UgfSBmcm9tICcuLi9wb3J0cy9zZXJ2aWNlcy9JV29yZFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCB9IGZyb20gJy4uL2VudGl0aWVzL1ZvY2FidWxhcnknO1xyXG5pbXBvcnQgeyBXb3JkQWRkZWRFdmVudCB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWIvdHlwZXMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBZGRXb3JkUmVxdWVzdCB7XHJcbiAgICB3b3JkOiBzdHJpbmc7XHJcbiAgICBib29rSWQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWRkV29yZFJlc3BvbnNlIHtcclxuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICBjYXJkPzogVm9jYWJ1bGFyeUNhcmQ7XHJcbiAgICBlcnJvcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFkZFdvcmRVc2VDYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgdm9jYWJ1bGFyeVJlcG9zaXRvcnk6IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSxcclxuICAgICAgICBwcml2YXRlIGJvb2tSZXBvc2l0b3J5OiBJQm9va1JlcG9zaXRvcnksXHJcbiAgICAgICAgcHJpdmF0ZSB3b3JkU2VydmljZTogSVdvcmRTZXJ2aWNlXHJcbiAgICApIHt9XHJcblxyXG4gICAgYXN5bmMgZXhlY3V0ZShyZXF1ZXN0OiBBZGRXb3JkUmVxdWVzdCk6IFByb21pc2U8QWRkV29yZFJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gMS4gXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RFxyXG4gICAgICAgICAgICBpZiAoIXJlcXVlc3Qud29yZCB8fCByZXF1ZXN0LndvcmQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHJlcXVlc3Qud29yZC50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIDIuIFx1QzkxMVx1QkNGNSBcdUQ2NTVcdUM3NzhcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdXb3JkID0gYXdhaXQgdGhpcy52b2NhYnVsYXJ5UmVwb3NpdG9yeS5maW5kQnlXb3JkKHdvcmQpO1xyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdXb3JkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUIyRThcdUM1QjRcdUM3ODVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gMy4gXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDY1NVx1Qzc3OCBcdUJDMEYgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgICAgIGxldCBib29rSWQgPSByZXF1ZXN0LmJvb2tJZDtcclxuICAgICAgICAgICAgaWYgKCFib29rSWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCb29rID0gYXdhaXQgdGhpcy5ib29rUmVwb3NpdG9yeS5nZXRDdXJyZW50Qm9vaygpO1xyXG4gICAgICAgICAgICAgICAgYm9va0lkID0gY3VycmVudEJvb2s/LmlkIHx8ICdkZWZhdWx0JztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgYm9vayA9IGF3YWl0IHRoaXMuYm9va1JlcG9zaXRvcnkuZmluZEJ5SWQoYm9va0lkKTtcclxuICAgICAgICAgICAgaWYgKCFib29rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQ0IFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDQuIFx1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhID0gYXdhaXQgdGhpcy53b3JkU2VydmljZS5nZXRXb3JkRGF0YSh3b3JkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIDUuIFZvY2FidWxhcnlDYXJkIFx1QzBERFx1QzEzMVxyXG4gICAgICAgICAgICBjb25zdCB2b2NhYnVsYXJ5Q2FyZCA9IFZvY2FidWxhcnlDYXJkLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiB3b3JkRGF0YS53b3JkLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZzogd29yZERhdGEubWVhbmluZyxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmREYXRhLnByb251bmNpYXRpb24gfHwgJycsXHJcbiAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZERhdGEuZXhhbXBsZXMgfHwgW10sXHJcbiAgICAgICAgICAgICAgICBib29rSWQ6IGJvb2tJZFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIDYuIFx1QUM4MFx1Qzk5RFxyXG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0gdm9jYWJ1bGFyeUNhcmQudmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25FcnJvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogdmFsaWRhdGlvbkVycm9ycy5qb2luKCcsICcpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyA3LiBcdUM4MDBcdUM3QTVcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy52b2NhYnVsYXJ5UmVwb3NpdG9yeS5hZGQodm9jYWJ1bGFyeUNhcmQpO1xyXG5cclxuICAgICAgICAgICAgLy8gOC4gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERFxyXG4gICAgICAgICAgICBjb25zdCBldmVudDogV29yZEFkZGVkRXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnV09SRF9BRERFRCcsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkOiB2b2NhYnVsYXJ5Q2FyZC53b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tJZDogdm9jYWJ1bGFyeUNhcmQuYm9va0lkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCQzFDXHVDMEREIChcdUMyRTRcdUM4MUMgXHVBRDZDXHVENjA0XHVDNUQwXHVDMTFDXHVCMjk0IEV2ZW50QnVzIFx1QzBBQ1x1QzZBOSlcclxuICAgICAgICAgICAgdGhpcy5wdWJsaXNoRXZlbnQoZXZlbnQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYXJkOiB2b2NhYnVsYXJ5Q2FyZFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBZGRXb3JkVXNlQ2FzZSBcdUMyRTRcdUQ1ODkgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwdWJsaXNoRXZlbnQoZXZlbnQ6IFdvcmRBZGRlZEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNzg0XHVDMkRDIFx1QUQ2Q1x1RDYwNCAtIFx1QjA5OFx1QzkxMVx1QzVEMCBFdmVudEJ1c1x1Qjg1QyBcdUFENTBcdUNDQjRcclxuICAgICAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnd29yZEFkZGVkJywgeyBkZXRhaWw6IGV2ZW50LmRhdGEgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XHJcbiAgICB9XHJcbn0gIiwgIi8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM1RDRcdUQyRjBcdUQyRjBcclxuZXhwb3J0IGNsYXNzIEJvb2sge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGlkOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIG5hbWU6IHN0cmluZyxcclxuICAgICAgICBwdWJsaWMgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgY3JlYXRlZEF0OiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZWRBdDogc3RyaW5nLFxyXG4gICAgICAgIHB1YmxpYyB3b3JkQ291bnQ6IG51bWJlcixcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaXNEZWZhdWx0OiBib29sZWFuXHJcbiAgICApIHt9XHJcblxyXG4gICAgLy8gXHVEMzI5XHVEMUEwXHVCOUFDIFx1QkE1NFx1QzExQ1x1QjREQzogXHVDMEM4IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzFcclxuICAgIHN0YXRpYyBjcmVhdGUobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nID0gJycsIGlzRGVmYXVsdDogYm9vbGVhbiA9IGZhbHNlKTogQm9vayB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IGlkID0gaXNEZWZhdWx0ID8gJ2RlZmF1bHQnIDogQm9vay5nZW5lcmF0ZUlkKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIG5vdyxcclxuICAgICAgICAgICAgbm93LFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICBpc0RlZmF1bHRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDMyOVx1RDFBMFx1QjlBQyBcdUJBNTRcdUMxMUNcdUI0REM6IFx1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxXHJcbiAgICBzdGF0aWMgY3JlYXRlRGVmYXVsdCgpOiBCb29rIHtcclxuICAgICAgICByZXR1cm4gQm9vay5jcmVhdGUoJ1x1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTUnLCAnXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc4NVx1QjJDOFx1QjJFNC4nLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjRcdUM3QTUgXHVDODE1XHVCQ0Y0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgdXBkYXRlSW5mbyhuYW1lPzogc3RyaW5nLCBkZXNjcmlwdGlvbj86IHN0cmluZyk6IEJvb2sge1xyXG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcclxuICAgICAgICAgICAgdGhpcy5pZCxcclxuICAgICAgICAgICAgbmFtZSA/PyB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID8/IHRoaXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHRoaXMud29yZENvdW50LFxyXG4gICAgICAgICAgICB0aGlzLmlzRGVmYXVsdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0IFx1QzIxOCBcdUM5OURcdUFDMDBcclxuICAgIGluY3JlbWVudFdvcmRDb3VudCgpOiBCb29rIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJvb2soXHJcbiAgICAgICAgICAgIHRoaXMuaWQsXHJcbiAgICAgICAgICAgIHRoaXMubmFtZSxcclxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgdGhpcy53b3JkQ291bnQgKyAxLFxyXG4gICAgICAgICAgICB0aGlzLmlzRGVmYXVsdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0IFx1QzIxOCBcdUFDMTBcdUMxOENcclxuICAgIGRlY3JlbWVudFdvcmRDb3VudCgpOiBCb29rIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJvb2soXHJcbiAgICAgICAgICAgIHRoaXMuaWQsXHJcbiAgICAgICAgICAgIHRoaXMubmFtZSxcclxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgTWF0aC5tYXgoMCwgdGhpcy53b3JkQ291bnQgLSAxKSxcclxuICAgICAgICAgICAgdGhpcy5pc0RlZmF1bHRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVDN0FDXHVDMTI0XHVDODE1XHJcbiAgICB1cGRhdGVXb3JkQ291bnQoY291bnQ6IG51bWJlcik6IEJvb2sge1xyXG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcclxuICAgICAgICAgICAgdGhpcy5pZCxcclxuICAgICAgICAgICAgdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICBNYXRoLm1heCgwLCBjb3VudCksXHJcbiAgICAgICAgICAgIHRoaXMuaXNEZWZhdWx0XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUMwQURcdUM4MUMgXHVBQzAwXHVCMkE1IFx1QzVFQ1x1QkQ4MCBcdUQ2NTVcdUM3NzhcclxuICAgIGNhbkJlRGVsZXRlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuaXNEZWZhdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUJFNDRcdUM1QjRcdUM3ODhcdUIyOTRcdUM5QzAgXHVENjU1XHVDNzc4XHJcbiAgICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndvcmRDb3VudCA9PT0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUFDODBcdUM5OUQgXHVCODVDXHVDOUMxXHJcbiAgICB2YWxpZGF0ZSgpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghdGhpcy5uYW1lIHx8IHRoaXMubmFtZS50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU2OVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMubmFtZS50cmltKCkubGVuZ3RoID4gMTAwKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzQwIDEwMFx1Qzc5MFx1Qjk3QyBcdUNEMDhcdUFDRkNcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAwKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTI0XHVCQTg1XHVDNzQwIDUwMFx1Qzc5MFx1Qjk3QyBcdUNEMDhcdUFDRkNcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMud29yZENvdW50IDwgMCkge1xyXG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0IFx1QzIxOFx1QjI5NCAwIFx1Qzc3NFx1QzBDMVx1Qzc3NFx1QzVCNFx1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBlcnJvcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzlDMVx1QjgyQ1x1RDY1NFx1Qjk3QyBcdUM3MDRcdUQ1NUMgXHVCQTU0XHVDMTFDXHVCNERDXHJcbiAgICB0b1BsYWluT2JqZWN0KCk6IEJvb2tEYXRhIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogdGhpcy5pZCxcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiB0aGlzLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgdXBkYXRlZEF0OiB0aGlzLnVwZGF0ZWRBdCxcclxuICAgICAgICAgICAgd29yZENvdW50OiB0aGlzLndvcmRDb3VudCxcclxuICAgICAgICAgICAgaXNEZWZhdWx0OiB0aGlzLmlzRGVmYXVsdFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVDMEREXHVDMTMxXHVDNzdDXHVCODVDXHVCRDgwXHVEMTMwIFx1QUNCRFx1QUNGQyBcdUM3N0NcdUMyMTggXHVBQ0M0XHVDMEIwXHJcbiAgICBnZXREYXlzRnJvbUNyZWF0aW9uKCk6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZERhdGUgPSBuZXcgRGF0ZSh0aGlzLmNyZWF0ZWRBdCk7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIGNyZWF0ZWREYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjlDOFx1QzlDMFx1QjlDOSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcdUI4NUNcdUJEODBcdUQxMzAgXHVBQ0JEXHVBQ0ZDIFx1Qzc3Q1x1QzIxOCBcdUFDQzRcdUMwQjBcclxuICAgIGdldERheXNGcm9tTGFzdFVwZGF0ZSgpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWREYXRlID0gbmV3IERhdGUodGhpcy51cGRhdGVkQXQpO1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKG5vdy5nZXRUaW1lKCkgLSB1cGRhdGVkRGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJRCBcdUMwRERcdUMxMzEgXHVDNzIwXHVEMkY4XHVCOUFDXHVEMkYwXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGBib29rXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwNFx1QzFBMVx1QzZBOSBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTQgKFx1QUUzMFx1Qzg3NCBcdUQ2MzhcdUQ2NThcdUMxMzEgXHVDNzIwXHVDOUMwKVxyXG5leHBvcnQgaW50ZXJmYWNlIEJvb2tEYXRhIHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgY3JlYXRlZEF0OiBzdHJpbmc7XHJcbiAgICB1cGRhdGVkQXQ6IHN0cmluZztcclxuICAgIHdvcmRDb3VudDogbnVtYmVyO1xyXG4gICAgaXNEZWZhdWx0OiBib29sZWFuO1xyXG59XHJcblxyXG4vLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVEMUI1XHVBQ0M0IFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNFxyXG5leHBvcnQgaW50ZXJmYWNlIEJvb2tTdGF0aXN0aWNzIHtcclxuICAgIGJvb2s6IEJvb2s7XHJcbiAgICB0b3RhbFdvcmRzOiBudW1iZXI7XHJcbiAgICB3b3Jkc0J5RGlmZmljdWx0eToge1xyXG4gICAgICAgIGVhc3k6IG51bWJlcjtcclxuICAgICAgICBnb29kOiBudW1iZXI7XHJcbiAgICAgICAgaGFyZDogbnVtYmVyO1xyXG4gICAgfTtcclxuICAgIGF2ZXJhZ2VSZXZpZXdDb3VudDogbnVtYmVyO1xyXG4gICAgbGFzdEFjdGl2aXR5RGF0ZTogc3RyaW5nIHwgbnVsbDtcclxuICAgIGNvbXBsZXRpb25QZXJjZW50YWdlOiBudW1iZXI7XHJcbn1cclxuXHJcbi8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUJBQTlcdUI4NUQgXHVDNjM1XHVDMTU4XHJcbmV4cG9ydCBpbnRlcmZhY2UgQm9va0xpc3RPcHRpb25zIHtcclxuICAgIGluY2x1ZGVFbXB0eT86IGJvb2xlYW47XHJcbiAgICBzb3J0Qnk/OiAnbmFtZScgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnIHwgJ3dvcmRDb3VudCc7XHJcbiAgICBzb3J0T3JkZXI/OiAnYXNjJyB8ICdkZXNjJztcclxuICAgIGxpbWl0PzogbnVtYmVyO1xyXG4gICAgb2Zmc2V0PzogbnVtYmVyO1xyXG59ICIsICJpbXBvcnQgeyBJQm9va1JlcG9zaXRvcnkgfSBmcm9tICcuLi9wb3J0cy9yZXBvc2l0b3JpZXMvSUJvb2tSZXBvc2l0b3J5JztcclxuaW1wb3J0IHsgQm9vayB9IGZyb20gJy4uL2VudGl0aWVzL0Jvb2snO1xyXG5pbXBvcnQgeyBCb29rQ3JlYXRlZEV2ZW50IH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi90eXBlcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUJvb2tSZXF1ZXN0IHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUJvb2tSZXNwb25zZSB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgYm9vaz86IEJvb2s7XHJcbiAgICBlcnJvcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENyZWF0ZUJvb2tVc2VDYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgYm9va1JlcG9zaXRvcnk6IElCb29rUmVwb3NpdG9yeVxyXG4gICAgKSB7fVxyXG5cclxuICAgIGFzeW5jIGV4ZWN1dGUocmVxdWVzdDogQ3JlYXRlQm9va1JlcXVlc3QpOiBQcm9taXNlPENyZWF0ZUJvb2tSZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIDEuIFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OURcclxuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0Lm5hbWUgfHwgcmVxdWVzdC5uYW1lLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gcmVxdWVzdC5uYW1lLnRyaW0oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDIuIFx1Qzc3NFx1Qjk4NCBcdUM5MTFcdUJDRjUgXHVENjU1XHVDNzc4XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQm9va3MgPSBhd2FpdCB0aGlzLmJvb2tSZXBvc2l0b3J5LmZpbmRBbGwoKTtcclxuICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlQm9vayA9IGV4aXN0aW5nQm9va3MuZmluZChib29rID0+IFxyXG4gICAgICAgICAgICAgICAgYm9vay5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGR1cGxpY2F0ZUJvb2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODRcdUM3ODVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gMy4gQm9vayBcdUM1RDRcdUQyRjBcdUQyRjAgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2sgPSBCb29rLmNyZWF0ZShcclxuICAgICAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmRlc2NyaXB0aW9uIHx8ICcnXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyA0LiBcdUFDODBcdUM5OURcclxuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9ycyA9IGJvb2sudmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25FcnJvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogdmFsaWRhdGlvbkVycm9ycy5qb2luKCcsICcpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyA1LiBcdUM4MDBcdUM3QTVcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ib29rUmVwb3NpdG9yeS5hZGQoYm9vayk7XHJcblxyXG4gICAgICAgICAgICAvLyA2LiBcdUM3NzRcdUJDQTRcdUQyQjggXHVCQzFDXHVDMEREXHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50OiBCb29rQ3JlYXRlZEV2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ0JPT0tfQ1JFQVRFRCcsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBib29rSWQ6IGJvb2suaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogYm9vay5uYW1lXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hFdmVudChldmVudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGJvb2s6IGJvb2tcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ3JlYXRlQm9va1VzZUNhc2UgXHVDMkU0XHVENTg5IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHVibGlzaEV2ZW50KGV2ZW50OiBCb29rQ3JlYXRlZEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNzg0XHVDMkRDIFx1QUQ2Q1x1RDYwNCAtIFx1QjA5OFx1QzkxMVx1QzVEMCBFdmVudEJ1c1x1Qjg1QyBcdUFENTBcdUNDQjRcclxuICAgICAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnYm9va0NyZWF0ZWQnLCB7IGRldGFpbDogZXZlbnQuZGF0YSB9KTtcclxuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgSVZvY2FidWxhcnlSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcG9ydHMvSVZvY2FidWxhcnlSZXBvc2l0b3J5JztcclxuaW1wb3J0IHsgSUJvb2tSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcG9ydHMvSUJvb2tSZXBvc2l0b3J5JztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuLi9lbnRpdGllcy9Wb2NhYnVsYXJ5JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgR2V0V29yZHNGb3JSZXZpZXdSZXF1ZXN0IHtcclxuICAgIGJvb2tJZD86IHN0cmluZztcclxuICAgIGxpbWl0PzogbnVtYmVyO1xyXG4gICAgcmV2aWV3SW50ZXJ2YWw/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgR2V0V29yZHNGb3JSZXZpZXdSZXNwb25zZSB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgd29yZHM/OiBWb2NhYnVsYXJ5Q2FyZFtdO1xyXG4gICAgdG90YWxDb3VudD86IG51bWJlcjtcclxuICAgIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgR2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgdm9jYWJ1bGFyeVJlcG9zaXRvcnk6IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSxcclxuICAgICAgICBwcml2YXRlIGJvb2tSZXBvc2l0b3J5OiBJQm9va1JlcG9zaXRvcnlcclxuICAgICkge31cclxuXHJcbiAgICBhc3luYyBleGVjdXRlKHJlcXVlc3Q6IEdldFdvcmRzRm9yUmV2aWV3UmVxdWVzdCA9IHt9KTogUHJvbWlzZTxHZXRXb3Jkc0ZvclJldmlld1Jlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gMS4gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyNFx1QzgxNVxyXG4gICAgICAgICAgICBsZXQgYm9va0lkID0gcmVxdWVzdC5ib29rSWQ7XHJcbiAgICAgICAgICAgIGlmICghYm9va0lkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IGF3YWl0IHRoaXMuYm9va1JlcG9zaXRvcnkuZ2V0Q3VycmVudEJvb2soKTtcclxuICAgICAgICAgICAgICAgIGJvb2tJZCA9IGN1cnJlbnRCb29rPy5pZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gMi4gXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OENcclxuICAgICAgICAgICAgY29uc3QgYWxsV29yZHMgPSBhd2FpdCB0aGlzLnZvY2FidWxhcnlSZXBvc2l0b3J5LmZpbmRCeUJvb2tJZChib29rSWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGFsbFdvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmRzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50OiAwXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAzLiBcdUJDRjVcdUMyQjVcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTVDIFx1QjJFOFx1QzVCNCBcdUQ1NDRcdUQxMzBcdUI5QzFcclxuICAgICAgICAgICAgY29uc3QgcmV2aWV3SW50ZXJ2YWwgPSByZXF1ZXN0LnJldmlld0ludGVydmFsIHx8IDE7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRzTmVlZGluZ1JldmlldyA9IGFsbFdvcmRzLmZpbHRlcih3b3JkID0+IFxyXG4gICAgICAgICAgICAgICAgd29yZC5uZWVkc1JldmlldyhyZXZpZXdJbnRlcnZhbClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8vIDQuIFx1QzgxNVx1QjgyQyAoXHVDNkIwXHVDMTIwXHVDMjFDXHVDNzA0OiBcdUM2MjRcdUI3OThcdUI0MUMgXHVCQ0Y1XHVDMkI1ID4gXHVDNUI0XHVCODI0XHVDNkI0IFx1QjJFOFx1QzVCNCA+IFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTggXHVDODAxXHVDNzQwIFx1QjJFOFx1QzVCNClcclxuICAgICAgICAgICAgd29yZHNOZWVkaW5nUmV2aWV3LnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIDFcdUMyMUNcdUM3MDQ6IFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDRjVcdUMyQjVcdUM3N0MgKFx1QzYyNFx1Qjc5OFx1QjQxQyBcdUFDODNcdUJEODBcdUQxMzApXHJcbiAgICAgICAgICAgICAgICBpZiAoYS5sYXN0UmV2aWV3ZWQgJiYgYi5sYXN0UmV2aWV3ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhRGF0ZSA9IG5ldyBEYXRlKGEubGFzdFJldmlld2VkKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYkRhdGUgPSBuZXcgRGF0ZShiLmxhc3RSZXZpZXdlZCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhRGF0ZSAhPT0gYkRhdGUpIHJldHVybiBhRGF0ZSAtIGJEYXRlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhLmxhc3RSZXZpZXdlZCAmJiAhYi5sYXN0UmV2aWV3ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFhLmxhc3RSZXZpZXdlZCAmJiBiLmxhc3RSZXZpZXdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIDJcdUMyMUNcdUM3MDQ6IFx1QjA5Q1x1Qzc3NFx1QjNDNCAoXHVDNUI0XHVCODI0XHVDNkI0IFx1QUM4M1x1QkQ4MFx1RDEzMClcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmZpY3VsdHlPcmRlciA9IHsgJ2hhcmQnOiAzLCAnZ29vZCc6IDIsICdlYXN5JzogMSB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZmljdWx0eURpZmYgPSBkaWZmaWN1bHR5T3JkZXJbYi5kaWZmaWN1bHR5XSAtIGRpZmZpY3VsdHlPcmRlclthLmRpZmZpY3VsdHldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpZmZpY3VsdHlEaWZmICE9PSAwKSByZXR1cm4gZGlmZmljdWx0eURpZmY7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gM1x1QzIxQ1x1QzcwNDogXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxOCAoXHVDODAxXHVDNzQwIFx1QUM4M1x1QkQ4MFx1RDEzMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLnJldmlld0NvdW50IC0gYi5yZXZpZXdDb3VudDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyA1LiBcdUM4MUNcdUQ1NUMgXHVDODAxXHVDNkE5XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0ID0gcmVxdWVzdC5saW1pdCB8fCAyMDtcclxuICAgICAgICAgICAgY29uc3QgbGltaXRlZFdvcmRzID0gd29yZHNOZWVkaW5nUmV2aWV3LnNsaWNlKDAsIGxpbWl0KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgd29yZHM6IGxpbWl0ZWRXb3JkcyxcclxuICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IHdvcmRzTmVlZGluZ1Jldmlldy5sZW5ndGhcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlIFx1QzJFNFx1RDU4OSBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgSVZvY2FidWxhcnlSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcG9ydHMvSVZvY2FidWxhcnlSZXBvc2l0b3J5JztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuLi9lbnRpdGllcy9Wb2NhYnVsYXJ5JztcclxuaW1wb3J0IHsgRGlmZmljdWx0eSwgV29yZFJldmlld2VkRXZlbnQgfSBmcm9tICcuLi8uLi9zaGFyZWQvbGliL3R5cGVzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmV2aWV3V29yZFJlcXVlc3Qge1xyXG4gICAgd29yZDogc3RyaW5nO1xyXG4gICAgZGlmZmljdWx0eTogRGlmZmljdWx0eTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZXZpZXdXb3JkUmVzcG9uc2Uge1xyXG4gICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgIGNhcmQ/OiBWb2NhYnVsYXJ5Q2FyZDtcclxuICAgIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUmV2aWV3V29yZFVzZUNhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSB2b2NhYnVsYXJ5UmVwb3NpdG9yeTogSVZvY2FidWxhcnlSZXBvc2l0b3J5XHJcbiAgICApIHt9XHJcblxyXG4gICAgYXN5bmMgZXhlY3V0ZShyZXF1ZXN0OiBSZXZpZXdXb3JkUmVxdWVzdCk6IFByb21pc2U8UmV2aWV3V29yZFJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gMS4gXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RFxyXG4gICAgICAgICAgICBpZiAoIXJlcXVlc3Qud29yZCB8fCByZXF1ZXN0LndvcmQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFbJ2Vhc3knLCAnZ29vZCcsICdoYXJkJ10uaW5jbHVkZXMocmVxdWVzdC5kaWZmaWN1bHR5KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1QzYyQ1x1QkMxNFx1Qjk3OCBcdUIwOUNcdUM3NzRcdUIzQzRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDIuIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OENcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHJlcXVlc3Qud29yZC50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDYXJkID0gYXdhaXQgdGhpcy52b2NhYnVsYXJ5UmVwb3NpdG9yeS5maW5kQnlXb3JkKHdvcmQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFleGlzdGluZ0NhcmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gMy4gXHVCQ0Y1XHVDMkI1IFx1QzIxOFx1RDU4OSAoXHVDNUQ0XHVEMkYwXHVEMkYwXHVDNzU4IFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzEgXHVENjVDXHVDNkE5KVxyXG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c0RpZmZpY3VsdHkgPSBleGlzdGluZ0NhcmQuZGlmZmljdWx0eTtcclxuICAgICAgICAgICAgY29uc3QgcmV2aWV3ZWRDYXJkID0gZXhpc3RpbmdDYXJkLnJldmlldyhyZXF1ZXN0LmRpZmZpY3VsdHkpO1xyXG5cclxuICAgICAgICAgICAgLy8gNC4gXHVDODAwXHVDN0E1XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudm9jYWJ1bGFyeVJlcG9zaXRvcnkudXBkYXRlKHJldmlld2VkQ2FyZCk7XHJcblxyXG4gICAgICAgICAgICAvLyA1LiBcdUM3NzRcdUJDQTRcdUQyQjggXHVCQzFDXHVDMEREXHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50OiBXb3JkUmV2aWV3ZWRFdmVudCA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdXT1JEX1JFVklFV0VEJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IHJldmlld2VkQ2FyZC53b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IHJlcXVlc3QuZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0RpZmZpY3VsdHk6IHByZXZpb3VzRGlmZmljdWx0eVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5wdWJsaXNoRXZlbnQoZXZlbnQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYXJkOiByZXZpZXdlZENhcmRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignUmV2aWV3V29yZFVzZUNhc2UgXHVDMkU0XHVENTg5IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHVibGlzaEV2ZW50KGV2ZW50OiBXb3JkUmV2aWV3ZWRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Qzc4NFx1QzJEQyBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgRXZlbnRCdXNcdUI4NUMgXHVBRDUwXHVDQ0I0XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3dvcmRSZXZpZXdlZCcsIHsgZGV0YWlsOiBldmVudC5kYXRhIH0pO1xyXG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBJVm9jYWJ1bGFyeVJlcG9zaXRvcnkgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3BvcnRzL3JlcG9zaXRvcmllcy9JVm9jYWJ1bGFyeVJlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCwgU2VhcmNoUmVzdWx0IH0gZnJvbSAnLi4vLi4vLi4vY29yZS9lbnRpdGllcy9Wb2NhYnVsYXJ5JztcclxuaW1wb3J0IHsgU2VhcmNoT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9saWIvdHlwZXMnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc3RvcmFnZS9Wb2NhYnVsYXJ5RGF0YWJhc2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlSZXBvc2l0b3J5QWRhcHRlciBpbXBsZW1lbnRzIElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGFiYXNlTWFuYWdlcjogVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcikge31cclxuXHJcbiAgICBhc3luYyBhZGQoY2FyZDogVm9jYWJ1bGFyeUNhcmQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5hZGRXb3JkKGNhcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmUoY2FyZDogVm9jYWJ1bGFyeUNhcmQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5hZGRXb3JkKGNhcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbmRCeVdvcmQod29yZDogc3RyaW5nKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZCB8IG51bGw+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZCh3b3JkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kQWxsKCk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmRbXT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxXb3JkcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbmRCeUJvb2tJZChib29rSWQ6IHN0cmluZyk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmRbXT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRXb3Jkc0J5Qm9vayhib29rSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZSh3b3JkOiBzdHJpbmcsIGNhcmQ6IFZvY2FidWxhcnlDYXJkKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZCh3b3JkLCBjYXJkLmRpZmZpY3VsdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZSh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5yZW1vdmVXb3JkKHdvcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNlYXJjaChvcHRpb25zOiBTZWFyY2hPcHRpb25zKTogUHJvbWlzZTxTZWFyY2hSZXN1bHQ+IHtcclxuICAgICAgICBjb25zdCBhbGxXb3JkcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xyXG4gICAgICAgIC8vIFx1QUUzMFx1QkNGOFx1QzgwMVx1Qzc3OCBcdUFDODBcdUMwQzkgXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIFx1QUNFMFx1QjNDNFx1RDY1NCBcdUFDMDBcdUIyQTVcclxuICAgICAgICBjb25zdCBmaWx0ZXJlZFdvcmRzID0gYWxsV29yZHMuZmlsdGVyKHdvcmQgPT4gXHJcbiAgICAgICAgICAgIHdvcmQud29yZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG9wdGlvbnMucXVlcnk/LnRvTG93ZXJDYXNlKCkgfHwgJycpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3b3JkczogZmlsdGVyZWRXb3JkcyxcclxuICAgICAgICAgICAgdG90YWw6IGZpbHRlcmVkV29yZHMubGVuZ3RoLFxyXG4gICAgICAgICAgICBoYXNNb3JlOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2VhcmNoQnlUZXh0KHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkW10+IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNlYXJjaCh7IHF1ZXJ5IH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQud29yZHM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmluZENhcmRzRm9yUmV2aWV3KGJvb2tJZD86IHN0cmluZyk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmRbXT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRXb3Jkc0ZvclJldmlldyhib29rSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbmRDYXJkc0J5RGlmZmljdWx0eShkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcsIGJvb2tJZD86IHN0cmluZyk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmRbXT4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gYm9va0lkID8gXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZmluZEJ5Qm9va0lkKGJvb2tJZCkgOiBcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5maW5kQWxsKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHdvcmRzLmZpbHRlcih3b3JkID0+IHdvcmQuZGlmZmljdWx0eSA9PT0gZGlmZmljdWx0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY291bnQoKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgICAgICBjb25zdCB3b3JkcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xyXG4gICAgICAgIHJldHVybiB3b3Jkcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY291bnRCeUJvb2tJZChib29rSWQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSBhd2FpdCB0aGlzLmZpbmRCeUJvb2tJZChib29rSWQpO1xyXG4gICAgICAgIHJldHVybiB3b3Jkcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY291bnRCeURpZmZpY3VsdHkoZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgICAgICBjb25zdCB3b3JkcyA9IGF3YWl0IHRoaXMuZmluZENhcmRzQnlEaWZmaWN1bHR5KGRpZmZpY3VsdHkpO1xyXG4gICAgICAgIHJldHVybiB3b3Jkcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2F2ZU1hbnkoY2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IGNhcmQgb2YgY2FyZHMpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGQoY2FyZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZU1hbnkod29yZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlKHdvcmQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5zYXZlQWxsRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRGF0YUNoYW5nZWQoY2FsbGJhY2s6IChjYXJkczogVm9jYWJ1bGFyeUNhcmRbXSkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIEV2ZW50RW1pdHRlciBcdUQzMjhcdUQxMzRcdUM3M0NcdUI4NUMgXHVBRDZDXHVENjA0XHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcclxuICAgIH1cclxuXHJcbiAgICBvZmZEYXRhQ2hhbmdlZChjYWxsYmFjazogKGNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzAgXHVBRDZDXHVENjA0XHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBJQm9va1JlcG9zaXRvcnkgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3BvcnRzL3JlcG9zaXRvcmllcy9JQm9va1JlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBCb29rLCBCb29rU3RhdGlzdGljcywgQm9va0xpc3RPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9lbnRpdGllcy9Cb29rJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB9IGZyb20gJy4uLy4uL3N0b3JhZ2UvVm9jYWJ1bGFyeURhdGFiYXNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCb29rUmVwb3NpdG9yeUFkYXB0ZXIgaW1wbGVtZW50cyBJQm9va1JlcG9zaXRvcnkge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhYmFzZU1hbmFnZXI6IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIpIHt9XHJcblxyXG4gICAgYXN5bmMgYWRkKGJvb2s6IEJvb2spOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5jcmVhdGVCb29rKGJvb2sudG9QbGFpbk9iamVjdCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlKGJvb2s6IEJvb2spOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5jcmVhdGVCb29rKGJvb2sudG9QbGFpbk9iamVjdCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxCb29rIHwgbnVsbD4ge1xyXG4gICAgICAgIGNvbnN0IGJvb2tEYXRhID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0Qm9vayhpZCk7XHJcbiAgICAgICAgaWYgKCFib29rRGF0YSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxyXG4gICAgICAgICAgICBib29rRGF0YS5pZCxcclxuICAgICAgICAgICAgYm9va0RhdGEubmFtZSxcclxuICAgICAgICAgICAgYm9va0RhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgYm9va0RhdGEudXBkYXRlZEF0LFxyXG4gICAgICAgICAgICBib29rRGF0YS53b3JkQ291bnQsXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLmlzRGVmYXVsdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmluZEFsbChvcHRpb25zPzogQm9va0xpc3RPcHRpb25zKTogUHJvbWlzZTxCb29rW10+IHtcclxuICAgICAgICBjb25zdCBib29rc0RhdGEgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xyXG4gICAgICAgIGxldCBib29rcyA9IGJvb2tzRGF0YS5tYXAoYm9va0RhdGEgPT4gbmV3IEJvb2soXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLmlkLFxyXG4gICAgICAgICAgICBib29rRGF0YS5uYW1lLFxyXG4gICAgICAgICAgICBib29rRGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgYm9va0RhdGEuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBib29rRGF0YS51cGRhdGVkQXQsXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLndvcmRDb3VudCxcclxuICAgICAgICAgICAgYm9va0RhdGEuaXNEZWZhdWx0XHJcbiAgICAgICAgKSk7XHJcblxyXG4gICAgICAgIC8vIFx1QzYzNVx1QzE1OFx1QzVEMCBcdUI1MzBcdUI5NzggXHVENTQ0XHVEMTMwXHVCOUMxXHJcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5jbHVkZUVtcHR5ID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgYm9va3MgPSBib29rcy5maWx0ZXIoYm9vayA9PiAhYm9vay5pc0VtcHR5KCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdUM4MTVcdUI4MkNcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc29ydEJ5KSB7XHJcbiAgICAgICAgICAgICAgICBib29rcy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYVZhbHVlID0gYVtvcHRpb25zLnNvcnRCeSFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJWYWx1ZSA9IGJbb3B0aW9ucy5zb3J0QnkhXTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFWYWx1ZSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGJWYWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuc29ydE9yZGVyID09PSAnZGVzYycgPyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJWYWx1ZS5sb2NhbGVDb21wYXJlKGFWYWx1ZSkgOiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFWYWx1ZS5sb2NhbGVDb21wYXJlKGJWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYVZhbHVlID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgYlZhbHVlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5zb3J0T3JkZXIgPT09ICdkZXNjJyA/IGJWYWx1ZSAtIGFWYWx1ZSA6IGFWYWx1ZSAtIGJWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHVEMzk4XHVDNzc0XHVDOUMwXHVCMTI0XHVDNzc0XHVDMTU4XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm9mZnNldCB8fCBvcHRpb25zLmxpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IG9wdGlvbnMub2Zmc2V0IHx8IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBvcHRpb25zLmxpbWl0ID8gc3RhcnQgKyBvcHRpb25zLmxpbWl0IDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgYm9va3MgPSBib29rcy5zbGljZShzdGFydCwgZW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJvb2tzO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZShpZDogc3RyaW5nLCBib29rOiBCb29rKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIudXBkYXRlQm9vayhpZCwgYm9vay50b1BsYWluT2JqZWN0KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZShpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuZGVsZXRlQm9vayhpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmluZERlZmF1bHQoKTogUHJvbWlzZTxCb29rIHwgbnVsbD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRCeUlkKCdkZWZhdWx0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmluZEJ5TmFtZShuYW1lOiBzdHJpbmcpOiBQcm9taXNlPEJvb2sgfCBudWxsPiB7XHJcbiAgICAgICAgY29uc3QgYm9va3MgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcclxuICAgICAgICByZXR1cm4gYm9va3MuZmluZChib29rID0+IGJvb2submFtZSA9PT0gbmFtZSkgfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBleGlzdHMoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCB0aGlzLmZpbmRCeUlkKGlkKTtcclxuICAgICAgICByZXR1cm4gYm9vayAhPT0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjb3VudCgpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgICAgIGNvbnN0IGJvb2tzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XHJcbiAgICAgICAgcmV0dXJuIGJvb2tzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRTdGF0aXN0aWNzKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTxCb29rU3RhdGlzdGljcyB8IG51bGw+IHtcclxuICAgICAgICBjb25zdCBib29rID0gYXdhaXQgdGhpcy5maW5kQnlJZChib29rSWQpO1xyXG4gICAgICAgIGlmICghYm9vaykgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZHNCeUJvb2soYm9va0lkKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB3b3Jkc0J5RGlmZmljdWx0eSA9IHtcclxuICAgICAgICAgICAgZWFzeTogd29yZHMuZmlsdGVyKHcgPT4gdy5kaWZmaWN1bHR5ID09PSAnZWFzeScpLmxlbmd0aCxcclxuICAgICAgICAgICAgZ29vZDogd29yZHMuZmlsdGVyKHcgPT4gdy5kaWZmaWN1bHR5ID09PSAnZ29vZCcpLmxlbmd0aCxcclxuICAgICAgICAgICAgaGFyZDogd29yZHMuZmlsdGVyKHcgPT4gdy5kaWZmaWN1bHR5ID09PSAnaGFyZCcpLmxlbmd0aFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHRvdGFsUmV2aWV3cyA9IHdvcmRzLnJlZHVjZSgoc3VtLCB3b3JkKSA9PiBzdW0gKyB3b3JkLnJldmlld0NvdW50LCAwKTtcclxuICAgICAgICBjb25zdCBhdmVyYWdlUmV2aWV3Q291bnQgPSB3b3Jkcy5sZW5ndGggPiAwID8gdG90YWxSZXZpZXdzIC8gd29yZHMubGVuZ3RoIDogMDtcclxuXHJcbiAgICAgICAgY29uc3QgbGFzdEFjdGl2aXR5RGF0ZSA9IHdvcmRzLmxlbmd0aCA+IDAgPyBcclxuICAgICAgICAgICAgTWF0aC5tYXgoLi4ud29yZHMubWFwKHcgPT4gbmV3IERhdGUody5sYXN0UmV2aWV3ZWQgfHwgdy5hZGRlZERhdGUpLmdldFRpbWUoKSkpIDpcclxuICAgICAgICAgICAgbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgY29tcGxldGlvblBlcmNlbnRhZ2UgPSB3b3Jkcy5sZW5ndGggPiAwID9cclxuICAgICAgICAgICAgKHdvcmRzQnlEaWZmaWN1bHR5LmVhc3kgLyB3b3Jkcy5sZW5ndGgpICogMTAwIDogMDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYm9vayxcclxuICAgICAgICAgICAgdG90YWxXb3Jkczogd29yZHMubGVuZ3RoLFxyXG4gICAgICAgICAgICB3b3Jkc0J5RGlmZmljdWx0eSxcclxuICAgICAgICAgICAgYXZlcmFnZVJldmlld0NvdW50LFxyXG4gICAgICAgICAgICBsYXN0QWN0aXZpdHlEYXRlOiBsYXN0QWN0aXZpdHlEYXRlID8gbmV3IERhdGUobGFzdEFjdGl2aXR5RGF0ZSkudG9JU09TdHJpbmcoKSA6IG51bGwsXHJcbiAgICAgICAgICAgIGNvbXBsZXRpb25QZXJjZW50YWdlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRBbGxTdGF0aXN0aWNzKCk6IFByb21pc2U8Qm9va1N0YXRpc3RpY3NbXT4ge1xyXG4gICAgICAgIGNvbnN0IGJvb2tzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XHJcbiAgICAgICAgY29uc3Qgc3RhdGlzdGljczogQm9va1N0YXRpc3RpY3NbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3QgYm9vayBvZiBib29rcykge1xyXG4gICAgICAgICAgICBjb25zdCBzdGF0ID0gYXdhaXQgdGhpcy5nZXRTdGF0aXN0aWNzKGJvb2suaWQpO1xyXG4gICAgICAgICAgICBpZiAoc3RhdCkge1xyXG4gICAgICAgICAgICAgICAgc3RhdGlzdGljcy5wdXNoKHN0YXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBzdGF0aXN0aWNzO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldEN1cnJlbnRCb29rKCk6IFByb21pc2U8Qm9vayB8IG51bGw+IHtcclxuICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEN1cnJlbnRCb29rKCk7XHJcbiAgICAgICAgaWYgKCFjdXJyZW50Qm9vaykgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcclxuICAgICAgICAgICAgY3VycmVudEJvb2suaWQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLm5hbWUsXHJcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBjdXJyZW50Qm9vay5jcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLnVwZGF0ZWRBdCxcclxuICAgICAgICAgICAgY3VycmVudEJvb2sud29yZENvdW50LFxyXG4gICAgICAgICAgICBjdXJyZW50Qm9vay5pc0RlZmF1bHRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNldEN1cnJlbnRCb29rKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2V0Q3VycmVudEJvb2soYm9va0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5zYXZlQWxsRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHZhbGlkYXRlQm9va05hbWUobmFtZTogc3RyaW5nLCBleGNsdWRlSWQ/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBjb25zdCBib29rcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xyXG4gICAgICAgIHJldHVybiAhYm9va3Muc29tZShib29rID0+IFxyXG4gICAgICAgICAgICBib29rLm5hbWUgPT09IG5hbWUgJiYgXHJcbiAgICAgICAgICAgICghZXhjbHVkZUlkIHx8IGJvb2suaWQgIT09IGV4Y2x1ZGVJZClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRGF0YUNoYW5nZWQoY2FsbGJhY2s6IChib29rczogQm9va1tdKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgRXZlbnRFbWl0dGVyIFx1RDMyOFx1RDEzNFx1QzczQ1x1Qjg1QyBcdUFENkNcdUQ2MDRcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxyXG4gICAgfVxyXG5cclxuICAgIG9mZkRhdGFDaGFuZ2VkKGNhbGxiYWNrOiAoYm9va3M6IEJvb2tbXSkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwIFx1QUQ2Q1x1RDYwNFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XHJcbiAgICB9XHJcblxyXG4gICAgb25DdXJyZW50Qm9va0NoYW5nZWQoY2FsbGJhY2s6IChib29rOiBCb29rIHwgbnVsbCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0MwXHVBQ0JEIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDhcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxyXG4gICAgfVxyXG5cclxuICAgIG9mZkN1cnJlbnRCb29rQ2hhbmdlZChjYWxsYmFjazogKGJvb2s6IEJvb2sgfCBudWxsKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUJDQzBcdUFDQkQgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzBcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IFZvY2FidWxhcnlDYXJkLCBCb29rIH0gZnJvbSAnLi4vLi4vVm9jYWJ1bGFyeUNhcmQnO1xyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEYXRhYmFzZURhdGEge1xyXG4gICAgYm9va3M6IEJvb2tbXTtcclxuICAgIHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdO1xyXG4gICAgc2V0dGluZ3M6IHtcclxuICAgICAgICBkYWlseUdvYWw6IG51bWJlcjtcclxuICAgICAgICByZXZpZXdJbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgICAgIGN1cnJlbnRCb29rSWQ6IHN0cmluZztcclxuICAgIH07XHJcbiAgICBzdGF0aXN0aWNzOiB7XHJcbiAgICAgICAgdG90YWxSZXZpZXdzOiBudW1iZXI7XHJcbiAgICAgICAgc3RyZWFrRGF5czogbnVtYmVyO1xyXG4gICAgICAgIGxhc3RTdHVkeURhdGU6IHN0cmluZyB8IG51bGw7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBib29rczogTWFwPHN0cmluZywgQm9vaz4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHdvcmRzOiBNYXA8c3RyaW5nLCBWb2NhYnVsYXJ5Q2FyZD4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHNldHRpbmdzID0ge1xyXG4gICAgICAgIGRhaWx5R29hbDogMTAsXHJcbiAgICAgICAgcmV2aWV3SW50ZXJ2YWw6IDEsXHJcbiAgICAgICAgY3VycmVudEJvb2tJZDogJ2RlZmF1bHQnXHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBzdGF0aXN0aWNzID0ge1xyXG4gICAgICAgIHRvdGFsUmV2aWV3czogMCxcclxuICAgICAgICBzdHJlYWtEYXlzOiAwLFxyXG4gICAgICAgIGxhc3RTdHVkeURhdGU6IG51bGwgYXMgc3RyaW5nIHwgbnVsbFxyXG4gICAgfTtcclxuICAgIHByaXZhdGUgc2F2ZUNhbGxiYWNrOiAoKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSB2b2NhYnVsYXJ5Rm9sZGVyUGF0aCA9ICdWb2NhYnVsYXJ5JztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2F2ZUNhbGxiYWNrOiAoKSA9PiB2b2lkLCBmb2xkZXJQYXRoPzogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2sgPSBzYXZlQ2FsbGJhY2s7XHJcbiAgICAgICAgaWYgKGZvbGRlclBhdGgpIHtcclxuICAgICAgICAgICAgdGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCA9IGZvbGRlclBhdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVZvY2FidWxhcnlGb2xkZXIoKTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVEZWZhdWx0Qm9vaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVDRDA4XHVBRTMwXHVENjU0XHJcbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVWb2NhYnVsYXJ5Rm9sZGVyKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1RDNGNFx1QjM1NFx1QUMwMCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVBQ0UwIFRGb2xkZXIgXHVDNzc4XHVDMkE0XHVEMTM0XHVDMkE0XHVDNzc4IFx1QUNCRFx1QzZCMFxyXG4gICAgICAgICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCQkMwXHVCODVDIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1RDNGNFx1QjM1NFx1QUMwMCBcdUM4NzRcdUM3QUNcdUQ1NThcdUM5QzAgXHVDNTRBXHVCMjk0IFx1QUNCRFx1QzZCMFx1QzVEMFx1QjlDQyBcdUMwRERcdUMxMzFcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBcdUQzRjRcdUIzNTRcdUFDMDAgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUFDQkRcdUM2QjBcdUIyOTQgXHVDODE1XHVDMEMxXHVDODAxXHVDNzc4IFx1QzBDMVx1RDY2OVx1Qzc3NFx1QkJDMFx1Qjg1QyBcdUFDQkRcdUFDRTBcdUI5Q0MgXHVDRDlDXHVCODI1XHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdhbHJlYWR5IGV4aXN0cycpIHx8IFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZm9sZGVyIGFscmVhZHkgZXhpc3RzJykgfHxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2FscmVhZHkgcHJlc2VudCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NFx1QUMwMCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0IFx1QUNCRFx1QzZCMCAoXHVDODE1XHVDMEMxKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVDMEREXHVDMTMxIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVDMEREXHVDMTMxIFx1QzkxMSBcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREOicsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUFFMzBcdUJDRjggYm9vayBcdUNEMDhcdUFFMzBcdUQ2NTRcclxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZURlZmF1bHRCb29rKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ib29rcy5oYXMoJ2RlZmF1bHQnKSkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0Qm9vazogQm9vayA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiAnZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNScsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1x1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTVcdUM3ODVcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB3b3JkQ291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IHRydWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5ib29rcy5zZXQoJ2RlZmF1bHQnLCBkZWZhdWx0Qm9vayk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoZGVmYXVsdEJvb2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBCb29rXHVDNzQ0IE1EIFx1RDMwQ1x1Qzc3Q1x1Qjg1QyBcdUM4MDBcdUM3QTVcclxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZUJvb2tUb0ZpbGUoYm9vazogQm9vayk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7Ym9vay5uYW1lLnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCAnXycpfS5tZGA7XHJcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGAke3RoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2tcdUM3NTggXHVCMkU4XHVDNUI0XHVCNEU0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgIGNvbnN0IGJvb2tXb3JkcyA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSBib29rLmlkKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS53b3JkLmxvY2FsZUNvbXBhcmUoYi53b3JkKSk7XHJcblxyXG4gICAgICAgIC8vIFlBTUwgZnJvbnRtYXR0ZXIgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBbXHJcbiAgICAgICAgICAgICctLS0nLFxyXG4gICAgICAgICAgICBgYm9va0lkOiAke2Jvb2suaWR9YCxcclxuICAgICAgICAgICAgYG5hbWU6IFwiJHtib29rLm5hbWV9XCJgLFxyXG4gICAgICAgICAgICBgZGVzY3JpcHRpb246IFwiJHtib29rLmRlc2NyaXB0aW9ufVwiYCxcclxuICAgICAgICAgICAgYGNyZWF0ZWRBdDogJHtib29rLmNyZWF0ZWRBdH1gLFxyXG4gICAgICAgICAgICBgdXBkYXRlZEF0OiAke2Jvb2sudXBkYXRlZEF0fWAsXHJcbiAgICAgICAgICAgIGB3b3JkQ291bnQ6ICR7Ym9va1dvcmRzLmxlbmd0aH1gLFxyXG4gICAgICAgICAgICBgaXNEZWZhdWx0OiAke2Jvb2suaXNEZWZhdWx0fWAsXHJcbiAgICAgICAgICAgICctLS0nLFxyXG4gICAgICAgICAgICAnJ1xyXG4gICAgICAgIF0uam9pbignXFxuJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUNGNThcdUQxNTBcdUNFMjAgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBmcm9udG1hdHRlcjtcclxuICAgICAgICBjb250ZW50ICs9IGAjICR7Ym9vay5uYW1lfVxcblxcbmA7XHJcbiAgICAgICAgY29udGVudCArPSBgJHtib29rLmRlc2NyaXB0aW9ufVxcblxcbmA7XHJcbiAgICAgICAgY29udGVudCArPSBgIyMgXHVCMkU4XHVDNUI0IFx1QkFBOVx1Qjg1RCAoJHtib29rV29yZHMubGVuZ3RofVx1QUMxQylcXG5cXG5gO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgYm9va1dvcmRzKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCMjIyAke3dvcmQud29yZH1cXG5cXG5gO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHdvcmQucHJvbnVuY2lhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgKipcdUJDMUNcdUM3NEM6KiogJHt3b3JkLnByb251bmNpYXRpb259XFxuXFxuYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29udGVudCArPSBgKipcdUI3M0I6KipcXG5gO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1lYW5pbmcgb2Ygd29yZC5tZWFuaW5ncykge1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSAke21lYW5pbmd9XFxuYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250ZW50ICs9ICdcXG4nO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHdvcmQuc2ltaWxhcldvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCoqXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNDoqKiAke3dvcmQuc2ltaWxhcldvcmRzLmpvaW4oJywgJyl9XFxuXFxuYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHdvcmQuZXhhbXBsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgKipcdUM2MDhcdUJCMzg6KipcXG5gO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBleGFtcGxlIG9mIHdvcmQuZXhhbXBsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtICR7ZXhhbXBsZS5lbmdsaXNofVxcbmA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgICAtICR7ZXhhbXBsZS5rb3JlYW59XFxuYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gJ1xcbic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QkNGNVx1QzJCNSBcdUM4MTVcdUJDRjRcclxuICAgICAgICAgICAgY29udGVudCArPSBgKipcdUJDRjVcdUMyQjUgXHVDODE1XHVCQ0Y0OioqXFxuYDtcclxuICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4OiAke3dvcmQucmV2aWV3Q291bnR9XFxuYDtcclxuICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUIwOUNcdUM3NzRcdUIzQzQ6ICR7d29yZC5kaWZmaWN1bHR5fVxcbmA7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QkNGNVx1QzJCNTogJHt3b3JkLmxhc3RSZXZpZXdlZCB8fCAnXHVDNUM2XHVDNzRDJ31cXG5gO1xyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1Q0Q5NFx1QUMwMFx1Qzc3QzogJHt3b3JkLmFkZGVkRGF0ZX1cXG5gO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDMkE0XHVEMzk4XHVDNzc0XHVDMkE0XHVCNERDIFx1QjlBQ1x1RDUzQ1x1RDJGMFx1QzE1OCBcdUM4MTVcdUJDRjRcclxuICAgICAgICAgICAgaWYgKHdvcmQuc2NoZWR1bGVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGBcXG4qKlx1QzJBNFx1RDM5OFx1Qzc3NFx1QzJBNFx1QjREQyBcdUI5QUNcdUQ1M0NcdUQyRjBcdUMxNTg6KipcXG5gO1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUIyRTRcdUM3NEMgXHVCQ0Y1XHVDMkI1XHVDNzdDOiAke3dvcmQuc2NoZWR1bGVJbmZvLmR1ZURhdGV9XFxuYDtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVCQ0Y1XHVDMkI1IFx1QUMwNFx1QUNBOTogJHt3b3JkLnNjaGVkdWxlSW5mby5pbnRlcnZhbH1cdUM3N0NcXG5gO1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUM2QTlcdUM3NzRcdUIzQzQ6ICR7d29yZC5zY2hlZHVsZUluZm8uZWFzZX1cXG5gO1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUMyRTRcdUQzMjggXHVENjlGXHVDMjE4OiAke3dvcmQuc2NoZWR1bGVJbmZvLmxhcHNlQ291bnR9XFxuYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29udGVudCArPSAnXFxuLS0tXFxuXFxuJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nRmlsZSwgY29udGVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1RDMwQ1x1Qzc3Q1x1Qzc3NCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTVDXHVCMkU0XHVCQTc0IG1vZGlmeVx1Qjg1QyBcdUM3QUNcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdhbHJlYWR5IGV4aXN0cycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUQzMENcdUM3N0NcdUM3NzQgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QzlDMFx1QjlDQyBURmlsZVx1Qzc3NCBcdUM1NDRcdUIyQ0MgXHVBQ0JEXHVDNkIwIChcdUM2MDg6IFx1RDNGNFx1QjM1NClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1Qzc3NFx1QjI5NCBcdUM4MTVcdUMwQzFcdUM4MDFcdUM3NzggXHVDMEMxXHVENjY5XHVDNzdDIFx1QzIxOCBcdUM3ODhcdUM3M0NcdUJCQzBcdUI4NUMgXHVDODcwXHVDNkE5XHVENzg4IFx1Q0M5OFx1QjlBQ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDMwQ1x1Qzc3QyBcdUM4MDBcdUM3QTUgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDIFx1QzgwMFx1QzdBNSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBNRCBcdUQzMENcdUM3N0NcdUM1RDBcdUMxMUMgQm9va1x1QUNGQyBcdUIyRThcdUM1QjRcdUI0RTQgXHVCODVDXHVCNERDXHJcbiAgICBwcml2YXRlIGFzeW5jIGxvYWRCb29rRnJvbUZpbGUoZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgICAgICAgICAgY29uc3QgeyBmcm9udG1hdHRlciwgYm9keSB9ID0gdGhpcy5wYXJzZU1ERmlsZShjb250ZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghZnJvbnRtYXR0ZXIuYm9va0lkKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAvLyBCb29rIFx1QzgxNVx1QkNGNCBcdUJDRjVcdUM2RDBcclxuICAgICAgICAgICAgY29uc3QgYm9vazogQm9vayA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBmcm9udG1hdHRlci5ib29rSWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBmcm9udG1hdHRlci5uYW1lIHx8IGZpbGUuYmFzZW5hbWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZnJvbnRtYXR0ZXIuZGVzY3JpcHRpb24gfHwgJycsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGZyb250bWF0dGVyLmNyZWF0ZWRBdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGZyb250bWF0dGVyLnVwZGF0ZWRBdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB3b3JkQ291bnQ6IGZyb250bWF0dGVyLndvcmRDb3VudCB8fCAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBmcm9udG1hdHRlci5pc0RlZmF1bHQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuYm9va3Muc2V0KGJvb2suaWQsIGJvb2spO1xyXG5cclxuICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVCNEU0IFx1RDMwQ1x1QzJGMVxyXG4gICAgICAgICAgICBjb25zdCB3b3JkcyA9IHRoaXMucGFyc2VXb3Jkc0Zyb21NYXJrZG93bihib2R5LCBib29rLmlkKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndvcmRzLnNldCh3b3JkLndvcmQudG9Mb3dlckNhc2UoKSwgd29yZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDIFx1Qjg1Q1x1QjREQyBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBNRCBcdUQzMENcdUM3N0MgXHVEMzBDXHVDMkYxIChmcm9udG1hdHRlclx1QzY0MCBib2R5IFx1QkQ4NFx1QjlBQylcclxuICAgIHByaXZhdGUgcGFyc2VNREZpbGUoY29udGVudDogc3RyaW5nKTogeyBmcm9udG1hdHRlcjogYW55LCBib2R5OiBzdHJpbmcgfSB7XHJcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXJSZWdleCA9IC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tXFxuKFtcXHNcXFNdKikkLztcclxuICAgICAgICBjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goZnJvbnRtYXR0ZXJSZWdleCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFtYXRjaCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBmcm9udG1hdHRlcjoge30sIGJvZHk6IGNvbnRlbnQgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXJUZXh0ID0gbWF0Y2hbMV07XHJcbiAgICAgICAgY29uc3QgYm9keSA9IG1hdGNoWzJdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QUMwNFx1QjJFOFx1RDU1QyBZQU1MIFx1RDMwQ1x1QzJGMVxyXG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyOiBhbnkgPSB7fTtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IGZyb250bWF0dGVyVGV4dC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbG9uSW5kZXggPSBsaW5lLmluZGV4T2YoJzonKTtcclxuICAgICAgICAgICAgaWYgKGNvbG9uSW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBsaW5lLnN1YnN0cmluZygwLCBjb2xvbkluZGV4KS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBsaW5lLnN1YnN0cmluZyhjb2xvbkluZGV4ICsgMSkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUI1MzBcdUM2MzRcdUQ0NUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnXCInKSAmJiB2YWx1ZS5lbmRzV2l0aCgnXCInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSwgLTEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUQwQzBcdUM3ODUgXHVCQ0MwXHVENjU4XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICd0cnVlJykgZnJvbnRtYXR0ZXJba2V5XSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykgZnJvbnRtYXR0ZXJba2V5XSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzTmFOKE51bWJlcih2YWx1ZSkpKSBmcm9udG1hdHRlcltrZXldID0gTnVtYmVyKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgZnJvbnRtYXR0ZXJba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7IGZyb250bWF0dGVyLCBib2R5IH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCOUM4XHVEMDZDXHVCMkU0XHVDNkI0XHVDNUQwXHVDMTFDIFx1QjJFOFx1QzVCNFx1QjRFNCBcdUQzMENcdUMyRjFcclxuICAgIHByaXZhdGUgcGFyc2VXb3Jkc0Zyb21NYXJrZG93bihtYXJrZG93bjogc3RyaW5nLCBib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIGNvbnN0IHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdID0gW107XHJcbiAgICAgICAgY29uc3Qgd29yZFNlY3Rpb25zID0gbWFya2Rvd24uc3BsaXQoJy0tLScpLmZpbHRlcihzZWN0aW9uID0+IHNlY3Rpb24udHJpbSgpKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb24gb2Ygd29yZFNlY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmQgPSB0aGlzLnBhcnNlV29yZFNlY3Rpb24oc2VjdGlvbiwgYm9va0lkKTtcclxuICAgICAgICAgICAgaWYgKHdvcmQpIHtcclxuICAgICAgICAgICAgICAgIHdvcmRzLnB1c2god29yZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHdvcmRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUIyRThcdUM1QjQgXHVDMTM5XHVDMTU4IFx1RDMwQ1x1QzJGMVxyXG4gICAgcHJpdmF0ZSBwYXJzZVdvcmRTZWN0aW9uKHNlY3Rpb246IHN0cmluZywgYm9va0lkOiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZCB8IG51bGwge1xyXG4gICAgICAgIGNvbnN0IGxpbmVzID0gc2VjdGlvbi5zcGxpdCgnXFxuJykuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkpO1xyXG4gICAgICAgIGlmIChsaW5lcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB3b3JkID0gJyc7XHJcbiAgICAgICAgbGV0IHByb251bmNpYXRpb24gPSAnJztcclxuICAgICAgICBjb25zdCBtZWFuaW5nczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBjb25zdCBzaW1pbGFyV29yZHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgY29uc3QgZXhhbXBsZXM6IHsgZW5nbGlzaDogc3RyaW5nOyBrb3JlYW46IHN0cmluZyB9W10gPSBbXTtcclxuICAgICAgICBsZXQgcmV2aWV3Q291bnQgPSAwO1xyXG4gICAgICAgIGxldCBkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcgPSAnZ29vZCc7XHJcbiAgICAgICAgbGV0IGxhc3RSZXZpZXdlZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgICAgICAgbGV0IGFkZGVkRGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICBsZXQgc2NoZWR1bGVJbmZvOiBhbnkgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGN1cnJlbnRTZWN0aW9uID0gJyc7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRFeGFtcGxlOiB7IGVuZ2xpc2g/OiBzdHJpbmc7IGtvcmVhbj86IHN0cmluZyB9ID0ge307XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRMaW5lID0gbGluZS50cmltKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUJBODUgXHVDRDk0XHVDRDlDICgjIyMgXHVENUU0XHVCMzU0KVxyXG4gICAgICAgICAgICBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnIyMjICcpKSB7XHJcbiAgICAgICAgICAgICAgICB3b3JkID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDQpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUMxMzlcdUMxNTggXHVBRDZDXHVCRDg0XHJcbiAgICAgICAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcqKlx1QkMxQ1x1Qzc0QzoqKicpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDcpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ3Byb251bmNpYXRpb24nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVCNzNCOioqJykpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ21lYW5pbmdzJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcqKlx1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjQ6KionKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2ltaWxhcldvcmRzVGV4dCA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZygxMikudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzLnB1c2goLi4uc2ltaWxhcldvcmRzVGV4dC5zcGxpdCgnLCcpLm1hcCh3ID0+IHcudHJpbSgpKSk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdzaW1pbGFyJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcqKlx1QzYwOFx1QkIzODoqKicpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdleGFtcGxlcyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUJDRjVcdUMyQjUgXHVDODE1XHVCQ0Y0OioqJykpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ3Jldmlldyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUMyQTRcdUQzOThcdUM3NzRcdUMyQTRcdUI0REMgXHVCOUFDXHVENTNDXHVEMkYwXHVDMTU4OioqJykpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ3NwYWNlZC1yZXBldGl0aW9uJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U2VjdGlvbiA9PT0gJ21lYW5pbmdzJyAmJiB0cmltbWVkTGluZS5zdGFydHNXaXRoKCctICcpKSB7XHJcbiAgICAgICAgICAgICAgICBtZWFuaW5ncy5wdXNoKHRyaW1tZWRMaW5lLnN1YnN0cmluZygyKS50cmltKCkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnZXhhbXBsZXMnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUI0RTRcdUM1RUNcdUM0RjBcdUFFMzBcdUI5N0MgXHVBQ0UwXHVCODI0XHVENTVDIFx1QzYwOFx1QkIzOCBcdUQzMENcdUMyRjFcclxuICAgICAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJy0gJykgJiYgIWxpbmUuc3RhcnRzV2l0aCgnICAtICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAoXHVCNEU0XHVDNUVDXHVDNEYwXHVBRTMwIFx1QzVDNlx1Qzc0QylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEV4YW1wbGUuZW5nbGlzaCAmJiBjdXJyZW50RXhhbXBsZS5rb3JlYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiBjdXJyZW50RXhhbXBsZS5lbmdsaXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiBjdXJyZW50RXhhbXBsZS5rb3JlYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFeGFtcGxlID0geyBlbmdsaXNoOiBsaW5lLnN1YnN0cmluZygyKS50cmltKCkgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCcgIC0gJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEICgyXHVDRTc4IFx1QjRFNFx1QzVFQ1x1QzRGMFx1QUUzMClcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RXhhbXBsZS5rb3JlYW4gPSBsaW5lLnN1YnN0cmluZyg0KS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdyZXZpZXcnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4OiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldmlld0NvdW50ID0gcGFyc2VJbnQodHJpbW1lZExpbmUuc3Vic3RyaW5nKDkpLnRyaW0oKSkgfHwgMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSBcdUIwOUNcdUM3NzRcdUIzQzQ6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlmZiA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZyg3KS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYgPT09ICdlYXN5JyB8fCBkaWZmID09PSAnZ29vZCcgfHwgZGlmZiA9PT0gJ2hhcmQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHkgPSBkaWZmO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSBcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQ0Y1XHVDMkI1OiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RSZXYgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoMTEpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0UmV2aWV3ZWQgPSBsYXN0UmV2ID09PSAnXHVDNUM2XHVDNzRDJyA/IG51bGwgOiBsYXN0UmV2O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1Q0Q5NFx1QUMwMFx1Qzc3QzogJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRlZERhdGUgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoNykudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnc3BhY2VkLXJlcGV0aXRpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNjaGVkdWxlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlSW5mbyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVCMkU0XHVDNzRDIFx1QkNGNVx1QzJCNVx1Qzc3QzogJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUluZm8uZHVlRGF0ZSA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZygxMCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QkNGNVx1QzJCNSBcdUFDMDRcdUFDQTk6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWxUZXh0ID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDgpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUluZm8uaW50ZXJ2YWwgPSBwYXJzZUludChpbnRlcnZhbFRleHQucmVwbGFjZSgnXHVDNzdDJywgJycpKSB8fCAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QzZBOVx1Qzc3NFx1QjNDNDogJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUluZm8uZWFzZSA9IHBhcnNlSW50KHRyaW1tZWRMaW5lLnN1YnN0cmluZyg3KS50cmltKCkpIHx8IDI1MDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSBcdUMyRTRcdUQzMjggXHVENjlGXHVDMjE4OiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlSW5mby5sYXBzZUNvdW50ID0gcGFyc2VJbnQodHJpbW1lZExpbmUuc3Vic3RyaW5nKDkpLnRyaW0oKSkgfHwgMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUI5QzhcdUM5QzBcdUI5QzkgXHVDNjA4XHVCQjM4IFx1Q0M5OFx1QjlBQ1xyXG4gICAgICAgIGlmIChjdXJyZW50RXhhbXBsZS5lbmdsaXNoICYmIGN1cnJlbnRFeGFtcGxlLmtvcmVhbikge1xyXG4gICAgICAgICAgICBleGFtcGxlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGVuZ2xpc2g6IGN1cnJlbnRFeGFtcGxlLmVuZ2xpc2gsXHJcbiAgICAgICAgICAgICAgICBrb3JlYW46IGN1cnJlbnRFeGFtcGxlLmtvcmVhblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghd29yZCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd29yZDogd29yZC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICBwcm9udW5jaWF0aW9uLFxyXG4gICAgICAgICAgICBtZWFuaW5ncyxcclxuICAgICAgICAgICAgc2ltaWxhcldvcmRzLFxyXG4gICAgICAgICAgICBleGFtcGxlcyxcclxuICAgICAgICAgICAgcmV2aWV3Q291bnQsXHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZCxcclxuICAgICAgICAgICAgYWRkZWREYXRlLFxyXG4gICAgICAgICAgICBib29rSWQsXHJcbiAgICAgICAgICAgIHNjaGVkdWxlSW5mb1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQzMENcdUM3N0MgXHVCODVDXHVCNERDXHJcbiAgICBhc3luYyBsb2FkQWxsQm9va3MoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5ib29rcy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMud29yZHMuY2xlYXIoKTtcclxuICAgICAgICBcclxuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVWb2NhYnVsYXJ5Rm9sZGVyKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplRGVmYXVsdEJvb2soKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCk7XHJcbiAgICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZvbGRlci5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZEJvb2tGcm9tRmlsZShmaWxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVEMzBDXHVDNzdDIFx1Qjg1Q1x1QjREQ1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDMTI0XHVDODE1IFx1RDMwQ1x1Qzc3QyBcdUM4MDBcdUM3QTUvXHVCODVDXHVCNERDXHJcbiAgICBwcml2YXRlIGFzeW5jIHNhdmVTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBzZXR0aW5nc1BhdGggPSBub3JtYWxpemVQYXRoKGAke3RoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGh9L3NldHRpbmdzLmpzb25gKTtcclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5zZXR0aW5ncyxcclxuICAgICAgICAgICAgc3RhdGlzdGljczogdGhpcy5zdGF0aXN0aWNzXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc2V0dGluZ3NQYXRoKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmdGaWxlLCBjb250ZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShzZXR0aW5nc1BhdGgsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDMTI0XHVDODE1IFx1RDMwQ1x1Qzc3QyBcdUM4MDBcdUM3QTUgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRofS9zZXR0aW5ncy5qc29uYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzZXR0aW5nc1BhdGgpO1xyXG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIC4uLmRhdGEuc2V0dGluZ3MgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXRpc3RpY3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRpc3RpY3MgPSB7IC4uLnRoaXMuc3RhdGlzdGljcywgLi4uZGF0YS5zdGF0aXN0aWNzIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1QzEyNFx1QzgxNSBcdUQzMENcdUM3N0MgXHVCODVDXHVCNERDIFx1QzJFNFx1RDMyOCwgXHVBRTMwXHVCQ0Y4XHVBQzEyIFx1QzBBQ1x1QzZBOTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEJvb2sgXHVBRDAwXHVCOUFDIFx1QkE1NFx1QzExQ1x1QjREQ1x1QjRFNFxyXG4gICAgYXN5bmMgY3JlYXRlQm9vayhuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcgPSAnJyk6IFByb21pc2U8Qm9vaz4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gYGJvb2tfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xyXG4gICAgICAgIGNvbnN0IGJvb2s6IEJvb2sgPSB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICB3b3JkQ291bnQ6IDAsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuYm9va3Muc2V0KGlkLCBib29rKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGJvb2spO1xyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICAgICAgcmV0dXJuIGJvb2s7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBkYXRlQm9vayhib29rSWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxCb29rPik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldChib29rSWQpO1xyXG4gICAgICAgIGlmICghYm9vaykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJvb2sgXCIke2Jvb2tJZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRCb29rOiBCb29rID0ge1xyXG4gICAgICAgICAgICAuLi5ib29rLFxyXG4gICAgICAgICAgICAuLi51cGRhdGVzLFxyXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuYm9va3Muc2V0KGJvb2tJZCwgdXBkYXRlZEJvb2spO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUodXBkYXRlZEJvb2spO1xyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVsZXRlQm9vayhib29rSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmIChib29rSWQgPT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDAgXHVDMEFEXHVDODFDXHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQoYm9va0lkKTtcclxuICAgICAgICBpZiAoIWJvb2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCb29rIFwiJHtib29rSWR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBib29rXHVDNUQwIFx1QzE4RFx1RDU1QyBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQ1xyXG4gICAgICAgIGNvbnN0IHdvcmRzVG9EZWxldGUgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gYm9va0lkKVxyXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gd29yZC53b3JkKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHNUb0RlbGV0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLndvcmRzLmRlbGV0ZSh3b3JkLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYm9vayBcdUMwQURcdUM4MUNcclxuICAgICAgICB0aGlzLmJvb2tzLmRlbGV0ZShib29rSWQpO1xyXG5cclxuICAgICAgICAvLyBcdUQzMENcdUM3N0MgXHVDMEFEXHVDODFDXHJcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtib29rLm5hbWUucmVwbGFjZSgvWzw+OlwiL1xcXFx8PypdL2csICdfJyl9Lm1kYDtcclxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gKTtcclxuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnRyYXNoRmlsZShmaWxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBib29rXHVDNzc0IFx1QzBBRFx1QzgxQ1x1QjQxQyBib29rXHVDNzc0XHVCQTc0IFx1QUUzMFx1QkNGOCBib29rXHVDNzNDXHVCODVDIFx1QkNDMFx1QUNCRFxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQgPT09IGJvb2tJZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQgPSAnZGVmYXVsdCc7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbEJvb2tzKCk6IEJvb2tbXSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5ib29rcy52YWx1ZXMoKSkuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYS5pc0RlZmF1bHQpIHJldHVybiAtMTtcclxuICAgICAgICAgICAgaWYgKGIuaXNEZWZhdWx0KSByZXR1cm4gMTtcclxuICAgICAgICAgICAgcmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Qm9vayhib29rSWQ6IHN0cmluZyk6IEJvb2sgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJvb2tzLmdldChib29rSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEN1cnJlbnRCb29rKCk6IEJvb2sgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJvb2tzLmdldCh0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNldEN1cnJlbnRCb29rKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJvb2tzLmhhcyhib29rSWQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQm9vayBcIiR7Ym9va0lkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQgPSBib29rSWQ7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJvb2tcdUJDQzQgXHVCMkU4XHVDNUI0IFx1QzIxOCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHByaXZhdGUgdXBkYXRlQm9va1dvcmRDb3VudChib29rSWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHdvcmRDb3VudCA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSBib29rSWQpLmxlbmd0aDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQoYm9va0lkKTtcclxuICAgICAgICBpZiAoYm9vaykge1xyXG4gICAgICAgICAgICBib29rLndvcmRDb3VudCA9IHdvcmRDb3VudDtcclxuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDBcclxuICAgIGFzeW5jIGFkZFdvcmQod29yZERhdGE6IFZvY2FidWxhcnlDYXJkKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgd29yZCA9IHdvcmREYXRhLndvcmQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBpZiAodGhpcy53b3Jkcy5oYXMod29yZCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmREYXRhLndvcmR9XCJcdUIyOTQgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU2OVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld1dvcmQ6IFZvY2FidWxhcnlDYXJkID0ge1xyXG4gICAgICAgICAgICAuLi53b3JkRGF0YSxcclxuICAgICAgICAgICAgd29yZDogd29yZERhdGEud29yZC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICByZXZpZXdDb3VudDogMCxcclxuICAgICAgICAgICAgZGlmZmljdWx0eTogJ2dvb2QnLFxyXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IG51bGwsXHJcbiAgICAgICAgICAgIGFkZGVkRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICBib29rSWQ6IHdvcmREYXRhLmJvb2tJZCB8fCB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLndvcmRzLnNldCh3b3JkLCBuZXdXb3JkKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9vayBcdUQzMENcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KG5ld1dvcmQuYm9va0lkKTtcclxuICAgICAgICBpZiAoYm9vaykge1xyXG4gICAgICAgICAgICBib29rLndvcmRDb3VudCsrO1xyXG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDXHJcbiAgICBhc3luYyByZW1vdmVXb3JkKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmRLZXkgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3Qgd29yZERhdGEgPSB0aGlzLndvcmRzLmdldCh3b3JkS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXdvcmREYXRhKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYm9va0lkID0gd29yZERhdGEuYm9va0lkO1xyXG4gICAgICAgIHRoaXMud29yZHMuZGVsZXRlKHdvcmRLZXkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQoYm9va0lkKTtcclxuICAgICAgICBpZiAoYm9vaykge1xyXG4gICAgICAgICAgICBib29rLndvcmRDb3VudC0tO1xyXG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IChcdUJDRjVcdUMyQjUgXHVBQ0IwXHVBQ0ZDKVxyXG4gICAgYXN5bmMgdXBkYXRlV29yZCh3b3JkOiBzdHJpbmcsIGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmRLZXkgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3Qgd29yZERhdGEgPSB0aGlzLndvcmRzLmdldCh3b3JkS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXdvcmREYXRhKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd29yZERhdGEucmV2aWV3Q291bnQrKztcclxuICAgICAgICB3b3JkRGF0YS5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eTtcclxuICAgICAgICB3b3JkRGF0YS5sYXN0UmV2aWV3ZWQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIC8vIFx1RDFCNVx1QUNDNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICB0aGlzLnN0YXRpc3RpY3MudG90YWxSZXZpZXdzKys7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdHJlYWsoKTtcclxuXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2sgXHVEMzBDXHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldCh3b3JkRGF0YS5ib29rSWQpO1xyXG4gICAgICAgIGlmIChib29rKSB7XHJcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGJvb2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOCAoXHVCQ0Y1XHVDMkI1IFx1QUNCMFx1QUNGQyArIFx1QzJBNFx1RDM5OFx1Qzc3NFx1QzJBNFx1QjREQyBcdUI5QUNcdUQ1M0NcdUQyRjBcdUMxNTggXHVDODE1XHVCQ0Y0KVxyXG4gICAgYXN5bmMgdXBkYXRlV29yZFdpdGhTY2hlZHVsZShcclxuICAgICAgICB3b3JkOiBzdHJpbmcsIFxyXG4gICAgICAgIGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJywgXHJcbiAgICAgICAgc2NoZWR1bGVJbmZvPzogYW55XHJcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB3b3JkS2V5ID0gd29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IHdvcmREYXRhID0gdGhpcy53b3Jkcy5nZXQod29yZEtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF3b3JkRGF0YSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdvcmREYXRhLnJldmlld0NvdW50Kys7XHJcbiAgICAgICAgd29yZERhdGEuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHk7XHJcbiAgICAgICAgd29yZERhdGEubGFzdFJldmlld2VkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzJBNFx1RDM5OFx1Qzc3NFx1QzJBNFx1QjREQyBcdUI5QUNcdUQ1M0NcdUQyRjBcdUMxNTggXHVDODE1XHVCQ0Y0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGlmIChzY2hlZHVsZUluZm8pIHtcclxuICAgICAgICAgICAgd29yZERhdGEuc2NoZWR1bGVJbmZvID0gc2NoZWR1bGVJbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVEMUI1XHVBQ0M0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIHRoaXMuc3RhdGlzdGljcy50b3RhbFJldmlld3MrKztcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0cmVhaygpO1xyXG5cclxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9vayBcdUQzMENcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KHdvcmREYXRhLmJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDODA0XHVDQ0I0IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggKExMTSBBUElcdUI4NUMgXHVBQzAwXHVDODM4XHVDNjI4IFx1QzgxNVx1QkNGNFx1Qjg1QyBcdUIzNkVcdUM1QjRcdUM0RjBcdUFFMzApXHJcbiAgICBhc3luYyB1cGRhdGVXb3JkRGF0YSh3b3JkOiBzdHJpbmcsIHVwZGF0ZWRXb3JkRGF0YTogVm9jYWJ1bGFyeUNhcmQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB3b3JkS2V5ID0gd29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nV29yZCA9IHRoaXMud29yZHMuZ2V0KHdvcmRLZXkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghZXhpc3RpbmdXb3JkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1QjJFOFx1QzVCNFx1Qzc1OCBcdUJDRjVcdUMyQjUgXHVBRDAwXHVCODI4IFx1QzgxNVx1QkNGNFx1QjI5NCBcdUM3MjBcdUM5QzBcdUQ1NThcdUFDRTAsIFx1QjczQiBcdUM4MTVcdUJDRjRcdUI5Q0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZFdvcmQ6IFZvY2FidWxhcnlDYXJkID0ge1xyXG4gICAgICAgICAgICAuLi51cGRhdGVkV29yZERhdGEsXHJcbiAgICAgICAgICAgIHdvcmQ6IHdvcmRLZXksXHJcbiAgICAgICAgICAgIHJldmlld0NvdW50OiBleGlzdGluZ1dvcmQucmV2aWV3Q291bnQsXHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IGV4aXN0aW5nV29yZC5kaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IGV4aXN0aW5nV29yZC5sYXN0UmV2aWV3ZWQsXHJcbiAgICAgICAgICAgIGFkZGVkRGF0ZTogZXhpc3RpbmdXb3JkLmFkZGVkRGF0ZSxcclxuICAgICAgICAgICAgYm9va0lkOiBleGlzdGluZ1dvcmQuYm9va0lkXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy53b3Jkcy5zZXQod29yZEtleSwgdXBkYXRlZFdvcmQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQodXBkYXRlZFdvcmQuYm9va0lkKTtcclxuICAgICAgICBpZiAoYm9vaykge1xyXG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXHJcbiAgICBnZXRXb3JkKHdvcmQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53b3Jkcy5nZXQod29yZC50b0xvd2VyQ2FzZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQ2MDRcdUM3QUMgYm9va1x1Qzc1OCBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4Q1xyXG4gICAgZ2V0QWxsV29yZHMoKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLndvcmQubG9jYWxlQ29tcGFyZShiLndvcmQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQyQjlcdUM4MTUgYm9va1x1Qzc1OCBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4Q1xyXG4gICAgZ2V0V29yZHNCeUJvb2soYm9va0lkOiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IGJvb2tJZClcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEud29yZC5sb2NhbGVDb21wYXJlKGIud29yZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkNGNVx1QzJCNSBcdUIzMDBcdUMwQzEgXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4QyAoXHVENjA0XHVDN0FDIGJvb2spXHJcbiAgICBnZXRXb3Jkc0ZvclJldmlldygpOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IHJldmlld0ludGVydmFsTXMgPSB0aGlzLnNldHRpbmdzLnJldmlld0ludGVydmFsICogMjQgKiA2MCAqIDYwICogMTAwMDtcclxuXHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFJldmlldyA9IG5ldyBEYXRlKHdvcmQubGFzdFJldmlld2VkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RSZXZpZXcgPSBub3cuZ2V0VGltZSgpIC0gbGFzdFJldmlldy5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aW1lU2luY2VMYXN0UmV2aWV3ID49IHJldmlld0ludGVydmFsTXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUFDODBcdUMwQzkgKFx1RDYwNFx1QzdBQyBib29rKVxyXG4gICAgc2VhcmNoV29yZHMocXVlcnk6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT5cclxuICAgICAgICAgICAgICAgIHdvcmQud29yZC5pbmNsdWRlcyhsb3dlclF1ZXJ5KSB8fFxyXG4gICAgICAgICAgICAgICAgd29yZC5tZWFuaW5ncy5zb21lKG1lYW5pbmcgPT4gbWVhbmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDFCNVx1QUNDNCBcdUM4NzBcdUQ2OEMgKFx1RDYwNFx1QzdBQyBib29rKVxyXG4gICAgZ2V0U3RhdGlzdGljcygpIHtcclxuICAgICAgICBjb25zdCB3b3JkcyA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsV29yZHMgPSB3b3Jkcy5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgdG90YWxSZXZpZXdzID0gdGhpcy5zdGF0aXN0aWNzLnRvdGFsUmV2aWV3cztcclxuICAgICAgICBjb25zdCBhdmVyYWdlRGlmZmljdWx0eSA9IHdvcmRzLmxlbmd0aCA+IDAgXHJcbiAgICAgICAgICAgID8gd29yZHMucmVkdWNlKChzdW0sIHdvcmQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmZpY3VsdHlWYWx1ZSA9IHdvcmQuZGlmZmljdWx0eSA9PT0gJ2Vhc3knID8gMSA6IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQuZGlmZmljdWx0eSA9PT0gJ2dvb2QnID8gMiA6IDM7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VtICsgZGlmZmljdWx0eVZhbHVlO1xyXG4gICAgICAgICAgICB9LCAwKSAvIHdvcmRzLmxlbmd0aFxyXG4gICAgICAgICAgICA6IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmRzQnlEaWZmaWN1bHR5ID0ge1xyXG4gICAgICAgICAgICBlYXN5OiB3b3Jkcy5maWx0ZXIodyA9PiB3LmRpZmZpY3VsdHkgPT09ICdlYXN5JykubGVuZ3RoLFxyXG4gICAgICAgICAgICBnb29kOiB3b3Jkcy5maWx0ZXIodyA9PiB3LmRpZmZpY3VsdHkgPT09ICdnb29kJykubGVuZ3RoLFxyXG4gICAgICAgICAgICBoYXJkOiB3b3Jkcy5maWx0ZXIodyA9PiB3LmRpZmZpY3VsdHkgPT09ICdoYXJkJykubGVuZ3RoXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gXHVDRDVDXHVBREZDIDdcdUM3N0MgXHVENjVDXHVCM0Q5IFx1QUNDNFx1QzBCMFxyXG4gICAgICAgIGNvbnN0IHJlY2VudEFjdGl2aXR5ID0gdGhpcy5jYWxjdWxhdGVSZWNlbnRBY3Rpdml0eSgpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b3RhbFdvcmRzLFxyXG4gICAgICAgICAgICB0b3RhbFJldmlld3MsXHJcbiAgICAgICAgICAgIHN0cmVha0RheXM6IHRoaXMuc3RhdGlzdGljcy5zdHJlYWtEYXlzLFxyXG4gICAgICAgICAgICBhdmVyYWdlRGlmZmljdWx0eSxcclxuICAgICAgICAgICAgd29yZHNCeURpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIHJlY2VudEFjdGl2aXR5XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM3N0NcdUM3N0MgXHVCQUE5XHVENDVDIFx1QzlDNFx1RDU4OVx1Qjk2MCBcdUM4NzBcdUQ2OEMgKFx1RDYwNFx1QzdBQyBib29rKVxyXG4gICAgZ2V0RGFpbHlHb2FsUHJvZ3Jlc3MoKSB7XHJcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IHRvZGF5V29yZHMgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3b3JkLmxhc3RSZXZpZXdlZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHdvcmQubGFzdFJldmlld2VkKS50b0RhdGVTdHJpbmcoKSA9PT0gdG9kYXk7XHJcbiAgICAgICAgICAgIH0pLmxlbmd0aDtcclxuXHJcbiAgICAgICAgY29uc3QgZ29hbCA9IHRoaXMuc2V0dGluZ3MuZGFpbHlHb2FsO1xyXG4gICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBnb2FsID4gMCA/IE1hdGgubWluKCh0b2RheVdvcmRzIC8gZ29hbCkgKiAxMDAsIDEwMCkgOiAwO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjdXJyZW50OiB0b2RheVdvcmRzLFxyXG4gICAgICAgICAgICBnb2FsOiBnb2FsLFxyXG4gICAgICAgICAgICBwZXJjZW50YWdlOiBwZXJjZW50YWdlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUMxMjRcdUM4MTUgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICBhc3luYyB1cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5nczogUGFydGlhbDx0eXBlb2YgdGhpcy5zZXR0aW5ncz4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0geyAuLi50aGlzLnNldHRpbmdzLCAuLi5uZXdTZXR0aW5ncyB9O1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDODAwXHVDN0E1XHVDNkE5IFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUJDQzBcdUQ2NTggKFx1RDYzOFx1RDY1OFx1QzEzMSBcdUM3MjBcdUM5QzApXHJcbiAgICBnZXREYXRhRm9yU2F2ZSgpOiBEYXRhYmFzZURhdGEge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGJvb2tzOiBBcnJheS5mcm9tKHRoaXMuYm9va3MudmFsdWVzKCkpLFxyXG4gICAgICAgICAgICB3b3JkczogQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKSxcclxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuc2V0dGluZ3MsXHJcbiAgICAgICAgICAgIHN0YXRpc3RpY3M6IHRoaXMuc3RhdGlzdGljc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDODAwXHVDN0E1XHVCNDFDIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QzVEMFx1QzExQyBcdUI4NUNcdUI0REMgKFx1RDYzOFx1RDY1OFx1QzEzMSBcdUM3MjBcdUM5QzApXHJcbiAgICBhc3luYyBsb2FkRnJvbURhdGEoZGF0YTogRGF0YWJhc2VEYXRhKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8gTUQgXHVEMzBDXHVDNzdDIFx1QzJEQ1x1QzJBNFx1RDE1Q1x1QzVEMFx1QzExQ1x1QjI5NCBcdUM3NzQgXHVCQTU0XHVDMTFDXHVCNERDIFx1QjMwMFx1QzJFMCBsb2FkQWxsQm9va3MoKVx1Qjk3QyBcdUMwQUNcdUM2QTlcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRBbGxCb29rcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzVGMFx1QzE4RCBcdUQ1NTlcdUMyQjVcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICBwcml2YXRlIHVwZGF0ZVN0cmVhaygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgbGFzdFN0dWR5RGF0ZSA9IHRoaXMuc3RhdGlzdGljcy5sYXN0U3R1ZHlEYXRlIFxyXG4gICAgICAgICAgICA/IG5ldyBEYXRlKHRoaXMuc3RhdGlzdGljcy5sYXN0U3R1ZHlEYXRlKS50b0RhdGVTdHJpbmcoKVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChsYXN0U3R1ZHlEYXRlID09PSB0b2RheSkge1xyXG4gICAgICAgICAgICAvLyBcdUM2MjRcdUIyOTggXHVDNzc0XHVCQkY4IFx1RDU1OVx1QzJCNVx1RDU4OFx1QzczQ1x1QkE3NCBcdUM1RjBcdUMxOERcdUM3N0MgXHVDOTlEXHVBQzAwXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWxhc3RTdHVkeURhdGUpIHtcclxuICAgICAgICAgICAgLy8gXHVDQzk4XHVDNzRDIFx1RDU1OVx1QzJCNVx1RDU1OFx1QjI5NCBcdUFDQkRcdUM2QjBcclxuICAgICAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMgPSAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIHllc3RlcmRheS5zZXREYXRlKHllc3RlcmRheS5nZXREYXRlKCkgLSAxKTtcclxuICAgICAgICAgICAgY29uc3QgeWVzdGVyZGF5U3RyID0geWVzdGVyZGF5LnRvRGF0ZVN0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxhc3RTdHVkeURhdGUgPT09IHllc3RlcmRheVN0cikge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVDNUI0XHVDODFDIFx1RDU1OVx1QzJCNVx1RDU4OFx1QzczQ1x1QkE3NCBcdUM1RjBcdUMxOERcdUM3N0MgXHVDOTlEXHVBQzAwXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRpc3RpY3Muc3RyZWFrRGF5cysrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVDNUYwXHVDMThEXHVDNzc0IFx1QjA0QVx1QzVCNFx1QzlDNCBcdUFDQkRcdUM2QjAgMVx1Qjg1QyBcdUI5QUNcdUMxNEJcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGlzdGljcy5zdHJlYWtEYXlzID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zdGF0aXN0aWNzLmxhc3RTdHVkeURhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDRDVDXHVBREZDIDdcdUM3N0MgXHVENjVDXHVCM0Q5IFx1QUNDNFx1QzBCMFxyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVSZWNlbnRBY3Rpdml0eSgpIHtcclxuICAgICAgICBjb25zdCBhY3Rpdml0eSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDY7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0b2RheSk7XHJcbiAgICAgICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGkpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZGF0ZS50b0RhdGVTdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRzU3R1ZGllZCA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSkuZmlsdGVyKHdvcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3b3JkLmxhc3RSZXZpZXdlZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHdvcmQubGFzdFJldmlld2VkKS50b0RhdGVTdHJpbmcoKSA9PT0gZGF0ZVN0cjtcclxuICAgICAgICAgICAgfSkubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmV2aWV3c0NvbXBsZXRlZCA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSkuZmlsdGVyKHdvcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3b3JkLmxhc3RSZXZpZXdlZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmV2aWV3RGF0ZSA9IG5ldyBEYXRlKHdvcmQubGFzdFJldmlld2VkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXZpZXdEYXRlLnRvRGF0ZVN0cmluZygpID09PSBkYXRlU3RyO1xyXG4gICAgICAgICAgICB9KS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBhY3Rpdml0eS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGRhdGU6IGRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxyXG4gICAgICAgICAgICAgICAgd29yZHNTdHVkaWVkLFxyXG4gICAgICAgICAgICAgICAgcmV2aWV3c0NvbXBsZXRlZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhY3Rpdml0eTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVEM0Y0XHVCMzU0IFx1QUNCRFx1Qjg1QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHVwZGF0ZVZvY2FidWxhcnlGb2xkZXJQYXRoKG5ld1BhdGg6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGggPSBuZXdQYXRoO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVZvY2FidWxhcnlGb2xkZXIoKTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgSUxMTVNlcnZpY2UsIFdvcmREYXRhUmVxdWVzdCwgV29yZERhdGFSZXNwb25zZSB9IGZyb20gJy4uLy4uL2NvcmUvcG9ydHMvc2VydmljZXMvSUxMTVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBMTE1TZXJ2aWNlIH0gZnJvbSAnLi9MTE1TZXJ2aWNlJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIExMTVNlcnZpY2VBZGFwdGVyIGltcGxlbWVudHMgSUxMTVNlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSBsbG1TZXJ2aWNlOiBMTE1TZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLmxsbVNlcnZpY2UgPSBuZXcgTExNU2VydmljZShzZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0V29yZERhdGEocmVxdWVzdDogV29yZERhdGFSZXF1ZXN0KTogUHJvbWlzZTxXb3JkRGF0YVJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZEluZm8gPSBhd2FpdCB0aGlzLmxsbVNlcnZpY2UuZ2V0V29yZEluZm8ocmVxdWVzdC53b3JkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmRJbmZvLndvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVhbmluZzogd29yZEluZm8ubWVhbmluZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZEluZm8ucHJvbnVuY2lhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZEluZm8uZXhhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiB3b3JkSW5mby5zaW1pbGFyV29yZHNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sbG1TZXJ2aWNlLnRlc3RDb25uZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHNldHRpbmdzKTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBJV29yZFNlcnZpY2UsIFdvcmREYXRhUmVxdWVzdCwgV29yZERhdGFSZXNwb25zZSB9IGZyb20gJy4uLy4uL2NvcmUvcG9ydHMvc2VydmljZXMvSVdvcmRTZXJ2aWNlJztcclxuaW1wb3J0IHsgV29yZFNlcnZpY2UgfSBmcm9tICcuL1dvcmRTZXJ2aWNlJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFdvcmRTZXJ2aWNlQWRhcHRlciBpbXBsZW1lbnRzIElXb3JkU2VydmljZSB7XHJcbiAgICBwcml2YXRlIHdvcmRTZXJ2aWNlOiBXb3JkU2VydmljZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKSB7XHJcbiAgICAgICAgdGhpcy53b3JkU2VydmljZSA9IG5ldyBXb3JkU2VydmljZShzZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0V29yZERhdGEocmVxdWVzdDogV29yZERhdGFSZXF1ZXN0KTogUHJvbWlzZTxXb3JkRGF0YVJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZERhdGEgPSBhd2FpdCB0aGlzLndvcmRTZXJ2aWNlLmdldFdvcmREYXRhKHJlcXVlc3Qud29yZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkOiB3b3JkRGF0YS53b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lYW5pbmc6IHdvcmREYXRhLm1lYW5pbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZERhdGEucHJvbnVuY2lhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZERhdGEuZXhhbXBsZXMgfHwgW10sXHJcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiB3b3JkRGF0YS5zaW1pbGFyV29yZHMgfHwgW11cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMud29yZFNlcnZpY2UgPSBuZXcgV29yZFNlcnZpY2Uoc2V0dGluZ3MpO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IElUVFNTZXJ2aWNlIH0gZnJvbSAnLi9JVFRTU2VydmljZSc7XHJcbmltcG9ydCB7IFRUU1NlcnZpY2UsIFRUU1NlcnZpY2VGYWN0b3J5IH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvdHRzL1RUU1NlcnZpY2UnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVFRTU2VydmljZUFkYXB0ZXIgaW1wbGVtZW50cyBJVFRTU2VydmljZSB7XHJcbiAgICBwcml2YXRlIHR0c1NlcnZpY2U6IFRUU1NlcnZpY2U7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMudHRzU2VydmljZSA9IFRUU1NlcnZpY2VGYWN0b3J5LmNyZWF0ZVRUU1NlcnZpY2Uoc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtUZXh0KHRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtXb3JkKHdvcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrRXhhbXBsZShleGFtcGxlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtFeGFtcGxlKGV4YW1wbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0b3BTcGVha2luZygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnR0c1NlcnZpY2Uuc3RvcFNwZWFraW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0IFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgIHRoaXMudHRzU2VydmljZS5kZXN0cm95KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMEM4IFx1QzEyNFx1QzgxNVx1QzczQ1x1Qjg1QyBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0IFx1QzdBQ1x1QzBERFx1QzEzMVxyXG4gICAgICAgIHRoaXMudHRzU2VydmljZSA9IFRUU1NlcnZpY2VGYWN0b3J5LmNyZWF0ZVRUU1NlcnZpY2Uoc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRW5hYmxlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gXHVEMzI5XHVEMUEwXHVCOUFDXHVDNUQwXHVDMTFDIFx1Qzc3NFx1QkJGOCBlbmFibGVkIFx1Q0NCNFx1RDA2Q1x1Qjk3QyBcdUQ1NjhcclxuICAgIH1cclxuXHJcbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogU3BlZWNoU3ludGhlc2lzVm9pY2VbXSB7XHJcbiAgICAgICAgY29uc3Qgdm9pY2VzID0gdGhpcy50dHNTZXJ2aWNlLmdldEF2YWlsYWJsZVZvaWNlcygpO1xyXG4gICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTQgXHVENjM4XHVENjU4XHVDNzQ0IFx1QzcwNFx1RDU3NCBcdUJFNDggXHVCQzMwXHVDNUY0IFx1QkMxOFx1RDY1OCAoXHVDMkU0XHVDODFDIFx1Qzc0Q1x1QzEzMVx1Qzc0MCBcdUFDMDEgXHVDMTFDXHVCRTQ0XHVDMkE0XHVBQzAwIFx1Q0M5OFx1QjlBQylcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudHRzU2VydmljZS50ZXN0Q29ubmVjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzUGF1c2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR0c1NlcnZpY2UuaXNQYXVzZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXN1bWUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnJlc3VtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhdXNlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudHRzU2VydmljZS5wYXVzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlLmRlc3Ryb3koKTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IERJQ29udGFpbmVyIH0gZnJvbSAnLi9ESUNvbnRhaW5lcic7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcclxuXHJcbi8vIENvcmUgU2VydmljZXNcclxuaW1wb3J0IHsgQWRkV29yZFVzZUNhc2UgfSBmcm9tICcuLi8uLi9jb3JlL3VzZS1jYXNlcy9BZGRXb3JkVXNlQ2FzZSc7XHJcbmltcG9ydCB7IENyZWF0ZUJvb2tVc2VDYXNlIH0gZnJvbSAnLi4vLi4vY29yZS91c2UtY2FzZXMvQ3JlYXRlQm9va1VzZUNhc2UnO1xyXG5pbXBvcnQgeyBHZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UgfSBmcm9tICcuLi8uLi9jb3JlL3VzZS1jYXNlcy9HZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UnO1xyXG5pbXBvcnQgeyBSZXZpZXdXb3JkVXNlQ2FzZSB9IGZyb20gJy4uLy4uL2NvcmUvdXNlLWNhc2VzL1Jldmlld1dvcmRVc2VDYXNlJztcclxuXHJcbi8vIEluZnJhc3RydWN0dXJlIFNlcnZpY2VzXHJcbmltcG9ydCB7IFZvY2FidWxhcnlSZXBvc2l0b3J5QWRhcHRlciB9IGZyb20gJy4uLy4uL2luZnJhc3RydWN0dXJlL29ic2lkaWFuL3JlcG9zaXRvcmllcy9Wb2NhYnVsYXJ5UmVwb3NpdG9yeUFkYXB0ZXInO1xyXG5pbXBvcnQgeyBCb29rUmVwb3NpdG9yeUFkYXB0ZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvQm9va1JlcG9zaXRvcnlBZGFwdGVyJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB9IGZyb20gJy4uLy4uL2luZnJhc3RydWN0dXJlL3N0b3JhZ2UvVm9jYWJ1bGFyeURhdGFiYXNlJztcclxuaW1wb3J0IHsgTExNU2VydmljZUFkYXB0ZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZUFkYXB0ZXInO1xyXG5cclxuLy8gRXh0ZXJuYWwgU2VydmljZXNcclxuaW1wb3J0IHsgV29yZFNlcnZpY2VBZGFwdGVyIH0gZnJvbSAnLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2VBZGFwdGVyJztcclxuaW1wb3J0IHsgVFRTU2VydmljZUFkYXB0ZXIgfSBmcm9tICcuLi8uLi9jb3JlL3BvcnRzL3NlcnZpY2VzL0lUVFNTZXJ2aWNlQWRhcHRlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgU2VydmljZVJlZ2lzdHJ5IHtcclxuICAgIHN0YXRpYyByZWdpc3RlclNlcnZpY2VzKGNvbnRhaW5lcjogRElDb250YWluZXIsIGFwcDogQXBwLCBzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKTogdm9pZCB7XHJcbiAgICAgICAgLy8gRXh0ZXJuYWwgZGVwZW5kZW5jaWVzXHJcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVySW5zdGFuY2UoJ2FwcCcsIGFwcCk7XHJcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVySW5zdGFuY2UoJ3NldHRpbmdzJywgc2V0dGluZ3MpO1xyXG5cclxuICAgICAgICAvLyBJbmZyYXN0cnVjdHVyZSBMYXllclxyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignZGF0YWJhc2VNYW5hZ2VyJywgKGFwcDogQXBwKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcihcclxuICAgICAgICAgICAgICAgIGFwcCxcclxuICAgICAgICAgICAgICAgICgpID0+IHt9LCAvLyBzYXZlQ2FsbGJhY2sgLSBESVx1QzVEMFx1QzExQ1x1QjI5NCBcdUJFNDggXHVENTY4XHVDMjE4XHVCODVDIFx1Q0M5OFx1QjlBQ1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mudm9jYWJ1bGFyeUZvbGRlclBhdGhcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydhcHAnXSxcclxuICAgICAgICAgICAgc2luZ2xldG9uOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlcigndm9jYWJ1bGFyeVJlcG9zaXRvcnknLCBWb2NhYnVsYXJ5UmVwb3NpdG9yeUFkYXB0ZXIsIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ2RhdGFiYXNlTWFuYWdlciddXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignYm9va1JlcG9zaXRvcnknLCBCb29rUmVwb3NpdG9yeUFkYXB0ZXIsIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ2RhdGFiYXNlTWFuYWdlciddXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlcignd29yZFNlcnZpY2UnLCBXb3JkU2VydmljZUFkYXB0ZXIsIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3NldHRpbmdzJ11cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdsbG1TZXJ2aWNlJywgTExNU2VydmljZUFkYXB0ZXIsIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3NldHRpbmdzJ11cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCd0dHNTZXJ2aWNlJywgVFRTU2VydmljZUFkYXB0ZXIsIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3NldHRpbmdzJ11cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQ29yZSBVc2UgQ2FzZXNcclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2FkZFdvcmRVc2VDYXNlJywgQWRkV29yZFVzZUNhc2UsIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3ZvY2FidWxhcnlSZXBvc2l0b3J5JywgJ2Jvb2tSZXBvc2l0b3J5JywgJ3dvcmRTZXJ2aWNlJ11cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdjcmVhdGVCb29rVXNlQ2FzZScsIENyZWF0ZUJvb2tVc2VDYXNlLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydib29rUmVwb3NpdG9yeSddXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignZ2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlJywgR2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWyd2b2NhYnVsYXJ5UmVwb3NpdG9yeScsICdib29rUmVwb3NpdG9yeSddXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcigncmV2aWV3V29yZFVzZUNhc2UnLCBSZXZpZXdXb3JkVXNlQ2FzZSwge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsndm9jYWJ1bGFyeVJlcG9zaXRvcnknXVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB1cGRhdGVTZXR0aW5ncyhjb250YWluZXI6IERJQ29udGFpbmVyLCBzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKTogdm9pZCB7XHJcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVySW5zdGFuY2UoJ3NldHRpbmdzJywgc2V0dGluZ3MpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzVCNFx1QjMxMVx1RDEzMCBcdUMxMUNcdUJFNDRcdUMyQTRcdUI0RTQgXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGlmIChjb250YWluZXIuaGFzKCd0dHNTZXJ2aWNlJykpIHtcclxuICAgICAgICAgICAgY29uc3QgdHRzU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlPFRUU1NlcnZpY2VBZGFwdGVyPigndHRzU2VydmljZScpO1xyXG4gICAgICAgICAgICB0dHNTZXJ2aWNlLnVwZGF0ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGNvbnRhaW5lci5oYXMoJ2xsbVNlcnZpY2UnKSkge1xyXG4gICAgICAgICAgICBjb25zdCBsbG1TZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmU8TExNU2VydmljZUFkYXB0ZXI+KCdsbG1TZXJ2aWNlJyk7XHJcbiAgICAgICAgICAgIGxsbVNlcnZpY2UudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoY29udGFpbmVyLmhhcygnd29yZFNlcnZpY2UnKSkge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlPFdvcmRTZXJ2aWNlQWRhcHRlcj4oJ3dvcmRTZXJ2aWNlJyk7XHJcbiAgICAgICAgICAgIHdvcmRTZXJ2aWNlLnVwZGF0ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCAiLy8gXHVDODA0XHVDNUVEIFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUMgXHVCQzBGIFx1QUNCRFx1QUNDNCBcdUFEMDBcdUI5QUNcclxuXHJcbmltcG9ydCB7IE5vdGljZSwgcmVxdWVzdFVybCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JJbmZvIHtcclxuICAgIGVycm9yOiBFcnJvcjtcclxuICAgIGNvbnRleHQ/OiBzdHJpbmc7XHJcbiAgICB1c2VySWQ/OiBzdHJpbmc7XHJcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcclxuICAgIHN0YWNrVHJhY2U/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFcnJvckJvdW5kYXJ5IHtcclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBFcnJvckJvdW5kYXJ5O1xyXG4gICAgcHJpdmF0ZSBlcnJvckhhbmRsZXJzOiBNYXA8c3RyaW5nLCAoZXJyb3I6IEVycm9ySW5mbykgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRXJyb3JCb3VuZGFyeSB7XHJcbiAgICAgICAgaWYgKCFFcnJvckJvdW5kYXJ5Lmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yQm91bmRhcnkuaW5zdGFuY2UgPSBuZXcgRXJyb3JCb3VuZGFyeSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gRXJyb3JCb3VuZGFyeS5pbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM4MDRcdUM1RUQgXHVDNUQwXHVCN0VDIFx1RDU3OFx1QjRFNFx1QjdFQyBcdUNEMDhcdUFFMzBcdUQ2NTRcclxuICAgIGluaXRpYWxpemUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBcdUM4MDRcdUM1RUQgXHVDNUQwXHVCN0VDIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDhcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXZlbnQuZXJyb3IgfHwgbmV3IEVycm9yKGV2ZW50Lm1lc3NhZ2UpLFxyXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ0dsb2JhbCBFcnJvcicsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICBzdGFja1RyYWNlOiBldmVudC5lcnJvcj8uc3RhY2tcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFByb21pc2UgcmVqZWN0aW9uIFx1RDU3OFx1QjRFNFx1QjdFQ1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXZlbnQucmVhc29uIGluc3RhbmNlb2YgRXJyb3IgPyBldmVudC5yZWFzb24gOiBuZXcgRXJyb3IoU3RyaW5nKGV2ZW50LnJlYXNvbikpLFxyXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ1VuaGFuZGxlZCBQcm9taXNlIFJlamVjdGlvbicsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICBzdGFja1RyYWNlOiBldmVudC5yZWFzb24/LnN0YWNrXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzVEMFx1QjdFQyBcdUQ1NzhcdUI0RTRcdUI3RUMgXHVCNEYxXHVCODVEXHJcbiAgICByZWdpc3RlckhhbmRsZXIoY29udGV4dDogc3RyaW5nLCBoYW5kbGVyOiAoZXJyb3I6IEVycm9ySW5mbykgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXJyb3JIYW5kbGVycy5zZXQoY29udGV4dCwgaGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNUQwXHVCN0VDIFx1RDU3OFx1QjRFNFx1QjdFQyBcdUM4MUNcdUFDNzBcclxuICAgIHVucmVnaXN0ZXJIYW5kbGVyKGNvbnRleHQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXJyb3JIYW5kbGVycy5kZWxldGUoY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQ1xyXG4gICAgaGFuZGxlRXJyb3IoZXJyb3JJbmZvOiBFcnJvckluZm8pOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUNGNThcdUMxOTRcdUM1RDAgXHVDNUQwXHVCN0VDIFx1Qjg1Q1x1QURGOFxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhdWdodCBieSBFcnJvckJvdW5kYXJ5OicsIGVycm9ySW5mbyk7XHJcblxyXG4gICAgICAgIC8vIFx1QzBBQ1x1QzZBOVx1Qzc5MFx1QzVEMFx1QUM4QyBcdUNFNUNcdUQ2NTRcdUM4MDFcdUM3NzggXHVDNUQwXHVCN0VDIFx1QkE1NFx1QzJEQ1x1QzlDMCBcdUQ0NUNcdUMyRENcclxuICAgICAgICBjb25zdCB1c2VyTWVzc2FnZSA9IHRoaXMuZ2V0VXNlckZyaWVuZGx5TWVzc2FnZShlcnJvckluZm8uZXJyb3IpO1xyXG4gICAgICAgIG5ldyBOb3RpY2UodXNlck1lc3NhZ2UsIDApO1xyXG5cclxuICAgICAgICAvLyBcdUI0RjFcdUI4NURcdUI0MUMgXHVENTc4XHVCNEU0XHVCN0VDXHVCNEU0IFx1QzJFNFx1RDU4OVxyXG4gICAgICAgIHRoaXMuZXJyb3JIYW5kbGVycy5mb3JFYWNoKChoYW5kbGVyLCBjb250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyKGVycm9ySW5mbyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGhhbmRsZXJFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciBmb3IgY29udGV4dCAke2NvbnRleHR9OmAsIGhhbmRsZXJFcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVENTY4XHVDMjE4IFx1QzJFNFx1RDU4OSBcdUI3OThcdUQzN0NcclxuICAgIGFzeW5jIHNhZmVFeGVjdXRlPFQ+KFxyXG4gICAgICAgIGZuOiAoKSA9PiBQcm9taXNlPFQ+IHwgVCxcclxuICAgICAgICBjb250ZXh0OiBzdHJpbmcsXHJcbiAgICAgICAgZmFsbGJhY2s/OiBUXHJcbiAgICApOiBQcm9taXNlPFQgfCB1bmRlZmluZWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZm4oKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSksXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgc3RhY2tUcmFjZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsbGJhY2s7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjNEOVx1QUUzMCBcdUQ1NjhcdUMyMThcdUM2QTkgXHVDNTQ4XHVDODA0XHVENTVDIFx1QzJFNFx1RDU4OVxyXG4gICAgc2FmZUV4ZWN1dGVTeW5jPFQ+KFxyXG4gICAgICAgIGZuOiAoKSA9PiBULFxyXG4gICAgICAgIGNvbnRleHQ6IHN0cmluZyxcclxuICAgICAgICBmYWxsYmFjaz86IFRcclxuICAgICk6IFQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmbigpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKSxcclxuICAgICAgICAgICAgICAgIGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICBzdGFja1RyYWNlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDMEFDXHVDNkE5XHVDNzkwIFx1Q0U1Q1x1RDY1NFx1QzgwMVx1Qzc3OCBcdUM1RDBcdUI3RUMgXHVCQTU0XHVDMkRDXHVDOUMwIFx1QzBERFx1QzEzMVxyXG4gICAgcHJpdmF0ZSBnZXRVc2VyRnJpZW5kbHlNZXNzYWdlKGVycm9yOiBFcnJvcik6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JUeXBlID0gZXJyb3IubmFtZTtcclxuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG5cclxuICAgICAgICAvLyBcdUM1RDBcdUI3RUMgXHVEMEMwXHVDNzg1XHVCQ0M0IFx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUNFNUNcdUQ2NTRcdUM4MDEgXHVCQTU0XHVDMkRDXHVDOUMwXHJcbiAgICAgICAgY29uc3QgZnJpZW5kbHlNZXNzYWdlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuICAgICAgICAgICAgJ05ldHdvcmtFcnJvcic6ICdcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVDNUYwXHVBQ0IwXHVDNUQwIFx1QkIzOFx1QzgxQ1x1QUMwMCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1Qzc3OFx1RDEzMFx1QjEzNyBcdUM1RjBcdUFDQjBcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicsXHJcbiAgICAgICAgICAgICdUeXBlRXJyb3InOiAnXHVCMzcwXHVDNzc0XHVEMTMwIFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nLFxyXG4gICAgICAgICAgICAnUmVmZXJlbmNlRXJyb3InOiAnXHVENTQ0XHVDNjk0XHVENTVDIFx1QjM3MFx1Qzc3NFx1RDEzMFx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nLFxyXG4gICAgICAgICAgICAnU3ludGF4RXJyb3InOiAnXHVCMzcwXHVDNzc0XHVEMTMwIFx1RDYxNVx1QzJERFx1QzVEMCBcdUM2MjRcdUI5NThcdUFDMDAgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgICdRdW90YUV4Y2VlZGVkRXJyb3InOiAnXHVDODAwXHVDN0E1IFx1QUNGNVx1QUMwNFx1Qzc3NCBcdUJEODBcdUM4NzFcdUQ1NjlcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICAgICAgJ1NlY3VyaXR5RXJyb3InOiAnXHVCQ0Y0XHVDNTQ4IFx1QzgxNVx1Q0M0NVx1QzczQ1x1Qjg1QyBcdUM3NzhcdUQ1NzQgXHVDNzkxXHVDNUM1XHVDNzQ0IFx1QzIxOFx1RDU4OVx1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQVBJIFx1QUQwMFx1QjgyOCBcdUM1RDBcdUI3RUMgXHVDQzk4XHVCOUFDXHJcbiAgICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnQVBJJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdmZXRjaCcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnQVBJIFx1QzExQ1x1QkU0NFx1QzJBNFx1QzVEMCBcdUM3N0NcdUMyRENcdUM4MDFcdUM3NzggXHVCQjM4XHVDODFDXHVBQzAwIFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDN0EwXHVDMkRDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUQzMENcdUM3N0MgXHVBRDAwXHVCODI4IFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUNcclxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdmaWxlJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdGaWxlJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdcdUQzMENcdUM3N0MgXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUQzMENcdUM3N0NcdUM3NzQgXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDNTU0XHVENjM4XHVENjU0IFx1QUQwMFx1QjgyOCBcdUM1RDBcdUI3RUMgXHVDQzk4XHVCOUFDXHJcbiAgICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZW5jcnlwdCcpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZGVjcnlwdCcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnQVBJIFx1RDBBNCBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QzEyNFx1QzgxNVx1Qzc0NCBcdUIyRTRcdUMyREMgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZnJpZW5kbHlNZXNzYWdlc1tlcnJvclR5cGVdIHx8IFxyXG4gICAgICAgICAgICAgICBgXHVDNjA4XHVDMEMxXHVDRTU4IFx1QkFCQlx1RDU1QyBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0OiAke2Vycm9yTWVzc2FnZX1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzVEMFx1QjdFQyBcdUJDRjVcdUFENkMgXHVDMkRDXHVCM0M0XHJcbiAgICBhc3luYyBhdHRlbXB0UmVjb3ZlcnkoZXJyb3I6IEVycm9yLCBjb250ZXh0OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICAvLyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVDNUQwXHVCN0VDXHVDNzU4IFx1QUNCRFx1QzZCMCBcdUM3QUNcdUMyRENcdUIzQzRcclxuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrJykpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QUMwNFx1QjJFOFx1RDU1QyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVEMTRDXHVDMkE0XHVEMkI4XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZXF1ZXN0VXJsKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9mYXZpY29uLmljbycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnSEVBRCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUM4MDBcdUM3QTVcdUMxOEMgXHVDNUQwXHVCN0VDXHVDNzU4IFx1QUNCRFx1QzZCMCBcdUQwNzRcdUI5QUNcdUM1QjQgXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdRdW90YUV4Y2VlZGVkRXJyb3InKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUM3ODRcdUMyREMgXHVCMzcwXHVDNzc0XHVEMTMwIFx1RDA3NFx1QjlBQ1x1QzVCNCAoXHVDMkU0XHVDODFDIFx1QUQ2Q1x1RDYwNFx1QzVEMFx1QzExQ1x1QjI5NCBcdUIzNTQgXHVDMkUwXHVDOTExXHVENTU4XHVBQzhDKVxyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3RlbXAtZGF0YScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDODE1XHVCOUFDXHJcbiAgICBjbGVhbnVwKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXJyb3JIYW5kbGVycy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUQzQjhcdUM3NTggXHVENTY4XHVDMjE4XHVCNEU0XHJcbmV4cG9ydCBjb25zdCBzYWZlQXN5bmMgPSBhc3luYyA8VD4oXHJcbiAgICBmbjogKCkgPT4gUHJvbWlzZTxUPixcclxuICAgIGNvbnRleHQ6IHN0cmluZyxcclxuICAgIGZhbGxiYWNrPzogVFxyXG4pOiBQcm9taXNlPFQgfCB1bmRlZmluZWQ+ID0+IHtcclxuICAgIHJldHVybiBFcnJvckJvdW5kYXJ5LmdldEluc3RhbmNlKCkuc2FmZUV4ZWN1dGUoZm4sIGNvbnRleHQsIGZhbGxiYWNrKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzYWZlU3luYyA9IDxUPihcclxuICAgIGZuOiAoKSA9PiBULFxyXG4gICAgY29udGV4dDogc3RyaW5nLFxyXG4gICAgZmFsbGJhY2s/OiBUXHJcbik6IFQgfCB1bmRlZmluZWQgPT4ge1xyXG4gICAgcmV0dXJuIEVycm9yQm91bmRhcnkuZ2V0SW5zdGFuY2UoKS5zYWZlRXhlY3V0ZVN5bmMoZm4sIGNvbnRleHQsIGZhbGxiYWNrKTtcclxufTtcclxuXHJcbi8vIFx1QjM3MFx1Q0Y1NFx1QjgwOFx1Qzc3NFx1RDEzMCBcdUQ1NjhcdUMyMTggKFR5cGVTY3JpcHQgXHVCMzcwXHVDRjU0XHVCODA4XHVDNzc0XHVEMTMwIFx1QjMwMFx1QzJFMCBcdUMwQUNcdUM2QTkpXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoRXJyb3JCb3VuZGFyeTxUIGV4dGVuZHMgYW55W10sIFI+KFxyXG4gICAgZm46ICguLi5hcmdzOiBUKSA9PiBSIHwgUHJvbWlzZTxSPixcclxuICAgIGNvbnRleHQ6IHN0cmluZ1xyXG4pIHtcclxuICAgIHJldHVybiBhc3luYyAoLi4uYXJnczogVCk6IFByb21pc2U8UiB8IHVuZGVmaW5lZD4gPT4ge1xyXG4gICAgICAgIGNvbnN0IGVycm9yQm91bmRhcnkgPSBFcnJvckJvdW5kYXJ5LmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgaWYgKGZuLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdBc3luY0Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZXJyb3JCb3VuZGFyeS5zYWZlRXhlY3V0ZSgoKSA9PiBmbiguLi5hcmdzKSwgY29udGV4dCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVycm9yQm91bmRhcnkuc2FmZUV4ZWN1dGVTeW5jKCgpID0+IGZuKC4uLmFyZ3MpLCBjb250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxvQkFBdUI7OztBQ0F2QixJQUFBQyxtQkFBNEU7OztBQ0c1RSxTQUFTLGtCQUFrQixRQUF5QjtBQUNoRCxNQUFJLENBQUM7QUFBUSxXQUFPO0FBR3BCLFFBQU0saUJBQWlCO0FBQUEsSUFDbkI7QUFBQTtBQUFBLElBQ0E7QUFBQTtBQUFBLElBQ0E7QUFBQTtBQUFBLElBQ0E7QUFBQTtBQUFBLEVBQ0o7QUFFQSxTQUFPLGVBQWUsS0FBSyxhQUFXLFFBQVEsS0FBSyxNQUFNLENBQUM7QUFDOUQ7QUFzSE8sU0FBUyxjQUFjLFFBQXdCO0FBQ2xELE1BQUksQ0FBQztBQUFRLFdBQU87QUFHcEIsTUFBSSxDQUFDLGtCQUFr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SDtBQUFBLEVBQ0o7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixVQUFNLEtBQUssWUFBWTtBQUd2QixRQUFJLEtBQUssWUFBWTtBQUNqQixXQUFLLGFBQWEsSUFBSSxXQUFXLEtBQUssUUFBUTtBQUFBLElBQ2xEO0FBR0EsUUFBSSxLQUFLLFdBQVc7QUFDaEIsc0JBQWdCLGVBQWUsS0FBSyxXQUFXLEtBQUssUUFBUTtBQUFBLElBQ2hFO0FBQUEsRUFDSjtBQUFBO0FBQUEsRUFHQSxNQUFjLHdCQUF3QjtBQUNsQyxRQUFJO0FBQ0EsWUFBTSxZQUFZLE1BQU0sS0FBSyxTQUFTO0FBQ3RDLFVBQUksYUFBYSxVQUFVLFlBQVksTUFBTSxRQUFRLFVBQVUsU0FBUyxLQUFLLEdBQUc7QUFDNUUsY0FBTSxhQUFhLFVBQVU7QUFHN0IsWUFBSSxXQUFXLFNBQVMsV0FBVyxNQUFNLFNBQVMsR0FBRztBQUNqRCxxQkFBVyxRQUFRLFdBQVcsT0FBTztBQUNqQyxnQkFBSTtBQUNBLG9CQUFNLEtBQUssZ0JBQWdCLFFBQVE7QUFBQSxnQkFDL0IsR0FBRztBQUFBLGdCQUNILFFBQVE7QUFBQSxnQkFDUixlQUFlLEtBQUssaUJBQWlCO0FBQUEsY0FDekMsQ0FBQztBQUFBLFlBQ0wsU0FBUyxPQUFPO0FBQ1osc0JBQVEsS0FBSyxtRUFBaUIsS0FBSyxJQUFJLElBQUksS0FBSztBQUFBLFlBQ3BEO0FBQUEsVUFDSjtBQUFBLFFBQ0o7QUFHQSxZQUFJLFdBQVcsVUFBVTtBQUNyQixnQkFBTSxLQUFLLGdCQUFnQixlQUFlLFdBQVcsUUFBUTtBQUFBLFFBQ2pFO0FBQUEsTUFDSjtBQUFBLElBQ0osU0FBUyxPQUFPO0FBQ1osY0FBUSxNQUFNLHNEQUFjLEtBQUs7QUFBQSxJQUNyQztBQUFBLEVBQ0o7QUFBQTtBQUFBLEVBR0EsTUFBTSxjQUFjO0FBQ2hCLFVBQU0sT0FBTztBQUFBLE1BQ1QsVUFBVSxLQUFLO0FBQUEsSUFDbkI7QUFDQSxVQUFNLEtBQUssU0FBUyxJQUFJO0FBQUEsRUFDNUI7QUFDSjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJkZWxheSIsICJqc29uRGF0YSIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJjb250YWluZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiQ29uZmlybU1vZGFsIiwgImNvbnRhaW5lciIsICJib29rIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250YWluZXIiLCAiYXBwIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
