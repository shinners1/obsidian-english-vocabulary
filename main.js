/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all3) => {
  for (var name in all3)
    __defProp(target, name, { get: all3[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  AddBookModal: () => AddBookModal,
  EnglishVocabularyPlugin: () => EnglishVocabularyPlugin,
  default: () => EnglishVocabularyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/features/settings/ui/settings.ts
var import_obsidian = require("obsidian");

// src/utils.ts
async function generateEncryptionKey() {
  const pluginId = "obsidian-english-vocabulary";
  const version = "0.1";
  const userAgent = navigator.userAgent;
  const timestamp = Date.now().toString();
  const keyMaterial = pluginId + version + userAgent + timestamp;
  const encoder = new TextEncoder();
  const keyData = encoder.encode(keyMaterial);
  const baseKey = await crypto.subtle.importKey(
    "raw",
    keyData,
    { name: "PBKDF2" },
    false,
    ["deriveBits", "deriveKey"]
  );
  const derivedKey = await crypto.subtle.deriveKey(
    {
      name: "PBKDF2",
      salt: encoder.encode("obsidian-vocabulary-salt-2024"),
      iterations: 1e5,
      hash: "SHA-256"
    },
    baseKey,
    { name: "AES-GCM", length: 256 },
    false,
    ["encrypt", "decrypt"]
  );
  return derivedKey;
}
async function encryptApiKey(apiKey) {
  if (!apiKey)
    return "";
  try {
    const key = await generateEncryptionKey();
    const encoder = new TextEncoder();
    const data = encoder.encode(apiKey);
    const iv = crypto.getRandomValues(new Uint8Array(12));
    const encrypted = await crypto.subtle.encrypt(
      { name: "AES-GCM", iv },
      key,
      data
    );
    const encryptedArray = new Uint8Array(encrypted);
    const combined = new Uint8Array(iv.length + encryptedArray.length);
    combined.set(iv);
    combined.set(encryptedArray, iv.length);
    return btoa(String.fromCharCode(...combined));
  } catch (error) {
    throw new Error("API \uD0A4 \uC554\uD638\uD654 \uC2E4\uD328: " + error.message);
  }
}
async function decryptApiKey(encryptedApiKey) {
  if (!encryptedApiKey)
    return "";
  try {
    const key = await generateEncryptionKey();
    const combined = new Uint8Array(
      atob(encryptedApiKey).split("").map((char) => char.charCodeAt(0))
    );
    const iv = combined.slice(0, 12);
    const encrypted = combined.slice(12);
    const decrypted = await crypto.subtle.decrypt(
      { name: "AES-GCM", iv },
      key,
      encrypted
    );
    const decoder = new TextDecoder();
    return decoder.decode(decrypted);
  } catch (error) {
    throw new Error("API \uD0A4 \uBCF5\uD638\uD654 \uC2E4\uD328: " + error.message);
  }
}
function encryptApiKeySync(apiKey) {
  if (!apiKey)
    return "";
  try {
    const key = "obsidian-vocab-temp-key-2024";
    let encrypted = "";
    for (let i = 0; i < apiKey.length; i++) {
      const charCode = apiKey.charCodeAt(i) ^ key.charCodeAt(i % key.length);
      encrypted += String.fromCharCode(charCode);
    }
    return btoa(encrypted);
  } catch (error) {
    console.error("\uB3D9\uAE30 \uC554\uD638\uD654 \uC2E4\uD328:", error);
    return "";
  }
}
function decryptApiKeySync(encryptedApiKey) {
  if (!encryptedApiKey)
    return "";
  try {
    const key = "obsidian-vocab-temp-key-2024";
    const decoded = atob(encryptedApiKey);
    let decrypted = "";
    for (let i = 0; i < decoded.length; i++) {
      const charCode = decoded.charCodeAt(i) ^ key.charCodeAt(i % key.length);
      decrypted += String.fromCharCode(charCode);
    }
    return decrypted;
  } catch (error) {
    console.error("\uB3D9\uAE30 \uBCF5\uD638\uD654 \uC2E4\uD328:", error);
    return "";
  }
}
function maskApiKey(apiKey) {
  if (!apiKey)
    return "";
  if (apiKey.length <= 8)
    return "*".repeat(apiKey.length);
  return apiKey.substring(0, 4) + "*".repeat(apiKey.length - 8) + apiKey.substring(apiKey.length - 4);
}
function formatDate(dateString) {
  if (!dateString) {
    return "\uC5C6\uC74C";
  }
  const date = new Date(dateString);
  if (isNaN(date.getTime())) {
    return "\uC798\uBABB\uB41C \uB0A0\uC9DC";
  }
  return date.toLocaleDateString("ko-KR", {
    year: "numeric",
    month: "long",
    day: "numeric"
  });
}

// src/shared/Config.ts
var DEFAULT_CONFIG = {
  api: {
    timeouts: {
      default: 3e4,
      // 30초
      llm: 6e4,
      // 60초
      tts: 15e3
      // 15초
    },
    retries: {
      maxAttempts: 3,
      delayMs: 1e3,
      exponentialBackoff: true
    },
    rateLimiting: {
      requestsPerMinute: 60,
      burstLimit: 10
    }
  },
  batch: {
    defaultSize: 5,
    maxSize: 20,
    delayBetweenBatches: 200,
    maxConcurrentBatches: 3
  },
  audio: {
    maxPoolSize: 10,
    autoCleanupTimeoutMs: 3e4,
    // 30초
    maxDurationMs: 3e5
    // 5분
  },
  database: {
    autoSaveInterval: 5e3,
    // 5초
    backupEnabled: true,
    maxFileSize: 10485760,
    // 10MB
    compressionEnabled: false
  },
  learning: {
    spaced_repetition: {
      initialInterval: 1,
      // 1일
      easyBonus: 1.3,
      hardPenalty: 0.8,
      maxInterval: 365,
      // 1년
      minInterval: 1
      // 1일
    },
    load_balancing: {
      maxDailyReviews: 100,
      fuzzingPercentage: 5,
      distributionWindow: 7
      // 7일
    }
  },
  ui: {
    animationDuration: 300,
    // 300ms
    progressUpdateInterval: 100,
    // 100ms
    notificationTimeout: 5e3,
    // 5초
    modalCloseDelay: 500
    // 500ms
  },
  security: {
    apiKeyEncryption: {
      iterations: 1e4,
      keyLength: 32,
      saltLength: 16
    },
    sessionTimeout: 36e5,
    // 1시간
    maxLoginAttempts: 5
  }
};
var DEVELOPMENT_CONFIG = {
  api: {
    timeouts: {
      default: 1e4,
      llm: 2e4,
      tts: 5e3
    },
    retries: {
      maxAttempts: 1,
      delayMs: 500,
      exponentialBackoff: false
    }
  },
  batch: {
    defaultSize: 2,
    maxSize: 5,
    delayBetweenBatches: 100
  },
  database: {
    autoSaveInterval: 1e3,
    backupEnabled: false
  }
};
var PRODUCTION_CONFIG = {
  api: {
    retries: {
      maxAttempts: 5,
      delayMs: 2e3,
      exponentialBackoff: true
    }
  },
  batch: {
    defaultSize: 10,
    maxSize: 50,
    delayBetweenBatches: 500
  },
  database: {
    autoSaveInterval: 1e4,
    backupEnabled: true,
    compressionEnabled: true
  }
};
var ConfigManager = class _ConfigManager {
  constructor() {
    this.config = this.mergeConfigs(DEFAULT_CONFIG, this.getEnvironmentConfig());
  }
  static getInstance() {
    if (!_ConfigManager.instance) {
      _ConfigManager.instance = new _ConfigManager();
    }
    return _ConfigManager.instance;
  }
  getConfig() {
    return { ...this.config };
  }
  getValue(path) {
    return this.getNestedValue(this.config, path);
  }
  updateConfig(updates) {
    this.config = this.mergeConfigs(this.config, updates);
  }
  getEnvironmentConfig() {
    const isDevelopment = true;
    return isDevelopment ? DEVELOPMENT_CONFIG : PRODUCTION_CONFIG;
  }
  mergeConfigs(base, override) {
    const result = { ...base };
    for (const [key, value] of Object.entries(override)) {
      if (value && typeof value === "object" && !Array.isArray(value)) {
        result[key] = {
          ...result[key],
          ...value
        };
      } else {
        result[key] = value;
      }
    }
    return result;
  }
  getNestedValue(obj, path) {
    return path.split(".").reduce((current, key) => current == null ? void 0 : current[key], obj);
  }
};
function getConfigValue(path) {
  return ConfigManager.getInstance().getValue(path);
}
var CONFIG_PATHS = {
  API_TIMEOUT_DEFAULT: "api.timeouts.default",
  API_TIMEOUT_LLM: "api.timeouts.llm",
  API_TIMEOUT_TTS: "api.timeouts.tts",
  API_RETRY_MAX_ATTEMPTS: "api.retries.maxAttempts",
  API_RETRY_DELAY: "api.retries.delayMs",
  BATCH_DEFAULT_SIZE: "batch.defaultSize",
  BATCH_MAX_SIZE: "batch.maxSize",
  BATCH_DELAY: "batch.delayBetweenBatches",
  AUDIO_MAX_POOL_SIZE: "audio.maxPoolSize",
  AUDIO_CLEANUP_TIMEOUT: "audio.autoCleanupTimeoutMs",
  LEARNING_INITIAL_INTERVAL: "learning.spaced_repetition.initialInterval",
  LEARNING_EASY_BONUS: "learning.spaced_repetition.easyBonus",
  LEARNING_HARD_PENALTY: "learning.spaced_repetition.hardPenalty",
  UI_ANIMATION_DURATION: "ui.animationDuration",
  UI_NOTIFICATION_TIMEOUT: "ui.notificationTimeout"
};

// src/shared/RetryPolicy.ts
var RetryPolicy = class {
  constructor(options = {}) {
    var _a, _b, _c, _d, _e, _f;
    this.options = {
      maxAttempts: (_a = options.maxAttempts) != null ? _a : getConfigValue(CONFIG_PATHS.API_RETRY_MAX_ATTEMPTS),
      delayMs: (_b = options.delayMs) != null ? _b : getConfigValue(CONFIG_PATHS.API_RETRY_DELAY),
      exponentialBackoff: (_c = options.exponentialBackoff) != null ? _c : true,
      maxDelayMs: (_d = options.maxDelayMs) != null ? _d : 3e4,
      // 30초
      backoffMultiplier: (_e = options.backoffMultiplier) != null ? _e : 2,
      retryCondition: (_f = options.retryCondition) != null ? _f : this.defaultRetryCondition
    };
  }
  // 기본 재시도 조건
  defaultRetryCondition(error) {
    const retryableErrors = [
      "NetworkError",
      "TimeoutError",
      "fetch",
      "502",
      "503",
      "504",
      // 서버 에러
      "ECONNRESET",
      "ETIMEDOUT",
      "ENOTFOUND"
    ];
    const errorMessage = error.message.toLowerCase();
    const errorName = error.name.toLowerCase();
    return retryableErrors.some(
      (pattern) => errorMessage.includes(pattern.toLowerCase()) || errorName.includes(pattern.toLowerCase())
    );
  }
  // 지수 백오프 계산
  calculateDelay(attempt) {
    if (!this.options.exponentialBackoff) {
      return this.options.delayMs;
    }
    const delay2 = this.options.delayMs * Math.pow(this.options.backoffMultiplier, attempt - 1);
    const jitter = delay2 * 0.2 * (Math.random() - 0.5);
    const finalDelay = Math.floor(delay2 + jitter);
    return Math.min(finalDelay, this.options.maxDelayMs);
  }
  // 비동기 함수 재시도
  async execute(fn) {
    const startTime = Date.now();
    let lastError;
    for (let attempt = 1; attempt <= this.options.maxAttempts; attempt++) {
      try {
        const result = await fn();
        return {
          success: true,
          result,
          attempts: attempt,
          totalDuration: Date.now() - startTime
        };
      } catch (error) {
        lastError = error instanceof Error ? error : new Error(String(error));
        if (attempt === this.options.maxAttempts || !this.options.retryCondition(lastError)) {
          break;
        }
        const delay2 = this.calculateDelay(attempt);
        await this.delay(delay2);
      }
    }
    return {
      success: false,
      error: lastError,
      attempts: this.options.maxAttempts,
      totalDuration: Date.now() - startTime
    };
  }
  // 동기 함수 재시도
  executeSync(fn) {
    const startTime = Date.now();
    let lastError;
    for (let attempt = 1; attempt <= this.options.maxAttempts; attempt++) {
      try {
        const result = fn();
        return {
          success: true,
          result,
          attempts: attempt,
          totalDuration: Date.now() - startTime
        };
      } catch (error) {
        lastError = error instanceof Error ? error : new Error(String(error));
        if (attempt === this.options.maxAttempts || !this.options.retryCondition(lastError)) {
          break;
        }
      }
    }
    return {
      success: false,
      error: lastError,
      attempts: this.options.maxAttempts,
      totalDuration: Date.now() - startTime
    };
  }
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  // 설정 업데이트
  updateOptions(options) {
    this.options = { ...this.options, ...options };
  }
  // 현재 설정 반환
  getOptions() {
    return { ...this.options };
  }
};
var APIRetryPolicy = class extends RetryPolicy {
  constructor(options = {}) {
    super({
      maxAttempts: 3,
      delayMs: 2e3,
      exponentialBackoff: true,
      maxDelayMs: 15e3,
      retryCondition: (error) => {
        const retryableErrors = [
          "429",
          // Rate limit
          "502",
          "503",
          "504",
          // Server errors
          "timeout",
          "network"
        ];
        const errorText = error.message.toLowerCase();
        return retryableErrors.some((pattern) => errorText.includes(pattern));
      },
      ...options
    });
  }
};
async function retryAPICall(fn, options) {
  const policy = new APIRetryPolicy(options);
  const result = await policy.execute(fn);
  if (result.success) {
    return result.result;
  } else {
    throw result.error;
  }
}

// node_modules/axios/lib/helpers/bind.js
function bind(fn, thisArg) {
  return function wrap() {
    return fn.apply(thisArg, arguments);
  };
}

// node_modules/axios/lib/utils.js
var { toString } = Object.prototype;
var { getPrototypeOf } = Object;
var { iterator, toStringTag } = Symbol;
var kindOf = /* @__PURE__ */ ((cache) => (thing) => {
  const str = toString.call(thing);
  return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());
})(/* @__PURE__ */ Object.create(null));
var kindOfTest = (type) => {
  type = type.toLowerCase();
  return (thing) => kindOf(thing) === type;
};
var typeOfTest = (type) => (thing) => typeof thing === type;
var { isArray } = Array;
var isUndefined = typeOfTest("undefined");
function isBuffer(val) {
  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor) && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);
}
var isArrayBuffer = kindOfTest("ArrayBuffer");
function isArrayBufferView(val) {
  let result;
  if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) {
    result = ArrayBuffer.isView(val);
  } else {
    result = val && val.buffer && isArrayBuffer(val.buffer);
  }
  return result;
}
var isString = typeOfTest("string");
var isFunction = typeOfTest("function");
var isNumber = typeOfTest("number");
var isObject = (thing) => thing !== null && typeof thing === "object";
var isBoolean = (thing) => thing === true || thing === false;
var isPlainObject = (val) => {
  if (kindOf(val) !== "object") {
    return false;
  }
  const prototype3 = getPrototypeOf(val);
  return (prototype3 === null || prototype3 === Object.prototype || Object.getPrototypeOf(prototype3) === null) && !(toStringTag in val) && !(iterator in val);
};
var isDate = kindOfTest("Date");
var isFile = kindOfTest("File");
var isBlob = kindOfTest("Blob");
var isFileList = kindOfTest("FileList");
var isStream = (val) => isObject(val) && isFunction(val.pipe);
var isFormData = (thing) => {
  let kind;
  return thing && (typeof FormData === "function" && thing instanceof FormData || isFunction(thing.append) && ((kind = kindOf(thing)) === "formdata" || // detect form-data instance
  kind === "object" && isFunction(thing.toString) && thing.toString() === "[object FormData]"));
};
var isURLSearchParams = kindOfTest("URLSearchParams");
var [isReadableStream, isRequest, isResponse, isHeaders] = ["ReadableStream", "Request", "Response", "Headers"].map(kindOfTest);
var trim = (str) => str.trim ? str.trim() : str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
function forEach(obj, fn, { allOwnKeys = false } = {}) {
  if (obj === null || typeof obj === "undefined") {
    return;
  }
  let i;
  let l;
  if (typeof obj !== "object") {
    obj = [obj];
  }
  if (isArray(obj)) {
    for (i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);
    const len = keys.length;
    let key;
    for (i = 0; i < len; i++) {
      key = keys[i];
      fn.call(null, obj[key], key, obj);
    }
  }
}
function findKey(obj, key) {
  key = key.toLowerCase();
  const keys = Object.keys(obj);
  let i = keys.length;
  let _key;
  while (i-- > 0) {
    _key = keys[i];
    if (key === _key.toLowerCase()) {
      return _key;
    }
  }
  return null;
}
var _global = (() => {
  if (typeof globalThis !== "undefined")
    return globalThis;
  return typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : global;
})();
var isContextDefined = (context) => !isUndefined(context) && context !== _global;
function merge() {
  const { caseless } = isContextDefined(this) && this || {};
  const result = {};
  const assignValue = (val, key) => {
    const targetKey = caseless && findKey(result, key) || key;
    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {
      result[targetKey] = merge(result[targetKey], val);
    } else if (isPlainObject(val)) {
      result[targetKey] = merge({}, val);
    } else if (isArray(val)) {
      result[targetKey] = val.slice();
    } else {
      result[targetKey] = val;
    }
  };
  for (let i = 0, l = arguments.length; i < l; i++) {
    arguments[i] && forEach(arguments[i], assignValue);
  }
  return result;
}
var extend = (a, b, thisArg, { allOwnKeys } = {}) => {
  forEach(b, (val, key) => {
    if (thisArg && isFunction(val)) {
      a[key] = bind(val, thisArg);
    } else {
      a[key] = val;
    }
  }, { allOwnKeys });
  return a;
};
var stripBOM = (content) => {
  if (content.charCodeAt(0) === 65279) {
    content = content.slice(1);
  }
  return content;
};
var inherits = (constructor, superConstructor, props, descriptors2) => {
  constructor.prototype = Object.create(superConstructor.prototype, descriptors2);
  constructor.prototype.constructor = constructor;
  Object.defineProperty(constructor, "super", {
    value: superConstructor.prototype
  });
  props && Object.assign(constructor.prototype, props);
};
var toFlatObject = (sourceObj, destObj, filter2, propFilter) => {
  let props;
  let i;
  let prop;
  const merged = {};
  destObj = destObj || {};
  if (sourceObj == null)
    return destObj;
  do {
    props = Object.getOwnPropertyNames(sourceObj);
    i = props.length;
    while (i-- > 0) {
      prop = props[i];
      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {
        destObj[prop] = sourceObj[prop];
        merged[prop] = true;
      }
    }
    sourceObj = filter2 !== false && getPrototypeOf(sourceObj);
  } while (sourceObj && (!filter2 || filter2(sourceObj, destObj)) && sourceObj !== Object.prototype);
  return destObj;
};
var endsWith = (str, searchString, position) => {
  str = String(str);
  if (position === void 0 || position > str.length) {
    position = str.length;
  }
  position -= searchString.length;
  const lastIndex = str.indexOf(searchString, position);
  return lastIndex !== -1 && lastIndex === position;
};
var toArray = (thing) => {
  if (!thing)
    return null;
  if (isArray(thing))
    return thing;
  let i = thing.length;
  if (!isNumber(i))
    return null;
  const arr = new Array(i);
  while (i-- > 0) {
    arr[i] = thing[i];
  }
  return arr;
};
var isTypedArray = /* @__PURE__ */ ((TypedArray) => {
  return (thing) => {
    return TypedArray && thing instanceof TypedArray;
  };
})(typeof Uint8Array !== "undefined" && getPrototypeOf(Uint8Array));
var forEachEntry = (obj, fn) => {
  const generator = obj && obj[iterator];
  const _iterator = generator.call(obj);
  let result;
  while ((result = _iterator.next()) && !result.done) {
    const pair = result.value;
    fn.call(obj, pair[0], pair[1]);
  }
};
var matchAll = (regExp, str) => {
  let matches;
  const arr = [];
  while ((matches = regExp.exec(str)) !== null) {
    arr.push(matches);
  }
  return arr;
};
var isHTMLForm = kindOfTest("HTMLFormElement");
var toCamelCase = (str) => {
  return str.toLowerCase().replace(
    /[-_\s]([a-z\d])(\w*)/g,
    function replacer(m, p1, p2) {
      return p1.toUpperCase() + p2;
    }
  );
};
var hasOwnProperty = (({ hasOwnProperty: hasOwnProperty2 }) => (obj, prop) => hasOwnProperty2.call(obj, prop))(Object.prototype);
var isRegExp = kindOfTest("RegExp");
var reduceDescriptors = (obj, reducer) => {
  const descriptors2 = Object.getOwnPropertyDescriptors(obj);
  const reducedDescriptors = {};
  forEach(descriptors2, (descriptor, name) => {
    let ret;
    if ((ret = reducer(descriptor, name, obj)) !== false) {
      reducedDescriptors[name] = ret || descriptor;
    }
  });
  Object.defineProperties(obj, reducedDescriptors);
};
var freezeMethods = (obj) => {
  reduceDescriptors(obj, (descriptor, name) => {
    if (isFunction(obj) && ["arguments", "caller", "callee"].indexOf(name) !== -1) {
      return false;
    }
    const value = obj[name];
    if (!isFunction(value))
      return;
    descriptor.enumerable = false;
    if ("writable" in descriptor) {
      descriptor.writable = false;
      return;
    }
    if (!descriptor.set) {
      descriptor.set = () => {
        throw Error("Can not rewrite read-only method '" + name + "'");
      };
    }
  });
};
var toObjectSet = (arrayOrString, delimiter) => {
  const obj = {};
  const define = (arr) => {
    arr.forEach((value) => {
      obj[value] = true;
    });
  };
  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));
  return obj;
};
var noop = () => {
};
var toFiniteNumber = (value, defaultValue) => {
  return value != null && Number.isFinite(value = +value) ? value : defaultValue;
};
function isSpecCompliantForm(thing) {
  return !!(thing && isFunction(thing.append) && thing[toStringTag] === "FormData" && thing[iterator]);
}
var toJSONObject = (obj) => {
  const stack = new Array(10);
  const visit = (source, i) => {
    if (isObject(source)) {
      if (stack.indexOf(source) >= 0) {
        return;
      }
      if (!("toJSON" in source)) {
        stack[i] = source;
        const target = isArray(source) ? [] : {};
        forEach(source, (value, key) => {
          const reducedValue = visit(value, i + 1);
          !isUndefined(reducedValue) && (target[key] = reducedValue);
        });
        stack[i] = void 0;
        return target;
      }
    }
    return source;
  };
  return visit(obj, 0);
};
var isAsyncFn = kindOfTest("AsyncFunction");
var isThenable = (thing) => thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);
var _setImmediate = ((setImmediateSupported, postMessageSupported) => {
  if (setImmediateSupported) {
    return setImmediate;
  }
  return postMessageSupported ? ((token, callbacks) => {
    _global.addEventListener("message", ({ source, data }) => {
      if (source === _global && data === token) {
        callbacks.length && callbacks.shift()();
      }
    }, false);
    return (cb) => {
      callbacks.push(cb);
      _global.postMessage(token, "*");
    };
  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);
})(
  typeof setImmediate === "function",
  isFunction(_global.postMessage)
);
var asap = typeof queueMicrotask !== "undefined" ? queueMicrotask.bind(_global) : typeof process !== "undefined" && process.nextTick || _setImmediate;
var isIterable = (thing) => thing != null && isFunction(thing[iterator]);
var utils_default = {
  isArray,
  isArrayBuffer,
  isBuffer,
  isFormData,
  isArrayBufferView,
  isString,
  isNumber,
  isBoolean,
  isObject,
  isPlainObject,
  isReadableStream,
  isRequest,
  isResponse,
  isHeaders,
  isUndefined,
  isDate,
  isFile,
  isBlob,
  isRegExp,
  isFunction,
  isStream,
  isURLSearchParams,
  isTypedArray,
  isFileList,
  forEach,
  merge,
  extend,
  trim,
  stripBOM,
  inherits,
  toFlatObject,
  kindOf,
  kindOfTest,
  endsWith,
  toArray,
  forEachEntry,
  matchAll,
  isHTMLForm,
  hasOwnProperty,
  hasOwnProp: hasOwnProperty,
  // an alias to avoid ESLint no-prototype-builtins detection
  reduceDescriptors,
  freezeMethods,
  toObjectSet,
  toCamelCase,
  noop,
  toFiniteNumber,
  findKey,
  global: _global,
  isContextDefined,
  isSpecCompliantForm,
  toJSONObject,
  isAsyncFn,
  isThenable,
  setImmediate: _setImmediate,
  asap,
  isIterable
};

// node_modules/axios/lib/core/AxiosError.js
function AxiosError(message, code, config, request, response) {
  Error.call(this);
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, this.constructor);
  } else {
    this.stack = new Error().stack;
  }
  this.message = message;
  this.name = "AxiosError";
  code && (this.code = code);
  config && (this.config = config);
  request && (this.request = request);
  if (response) {
    this.response = response;
    this.status = response.status ? response.status : null;
  }
}
utils_default.inherits(AxiosError, Error, {
  toJSON: function toJSON() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: utils_default.toJSONObject(this.config),
      code: this.code,
      status: this.status
    };
  }
});
var prototype = AxiosError.prototype;
var descriptors = {};
[
  "ERR_BAD_OPTION_VALUE",
  "ERR_BAD_OPTION",
  "ECONNABORTED",
  "ETIMEDOUT",
  "ERR_NETWORK",
  "ERR_FR_TOO_MANY_REDIRECTS",
  "ERR_DEPRECATED",
  "ERR_BAD_RESPONSE",
  "ERR_BAD_REQUEST",
  "ERR_CANCELED",
  "ERR_NOT_SUPPORT",
  "ERR_INVALID_URL"
  // eslint-disable-next-line func-names
].forEach((code) => {
  descriptors[code] = { value: code };
});
Object.defineProperties(AxiosError, descriptors);
Object.defineProperty(prototype, "isAxiosError", { value: true });
AxiosError.from = (error, code, config, request, response, customProps) => {
  const axiosError = Object.create(prototype);
  utils_default.toFlatObject(error, axiosError, function filter2(obj) {
    return obj !== Error.prototype;
  }, (prop) => {
    return prop !== "isAxiosError";
  });
  AxiosError.call(axiosError, error.message, code, config, request, response);
  axiosError.cause = error;
  axiosError.name = error.name;
  customProps && Object.assign(axiosError, customProps);
  return axiosError;
};
var AxiosError_default = AxiosError;

// node_modules/axios/lib/helpers/null.js
var null_default = null;

// node_modules/axios/lib/helpers/toFormData.js
function isVisitable(thing) {
  return utils_default.isPlainObject(thing) || utils_default.isArray(thing);
}
function removeBrackets(key) {
  return utils_default.endsWith(key, "[]") ? key.slice(0, -2) : key;
}
function renderKey(path, key, dots) {
  if (!path)
    return key;
  return path.concat(key).map(function each(token, i) {
    token = removeBrackets(token);
    return !dots && i ? "[" + token + "]" : token;
  }).join(dots ? "." : "");
}
function isFlatArray(arr) {
  return utils_default.isArray(arr) && !arr.some(isVisitable);
}
var predicates = utils_default.toFlatObject(utils_default, {}, null, function filter(prop) {
  return /^is[A-Z]/.test(prop);
});
function toFormData(obj, formData, options) {
  if (!utils_default.isObject(obj)) {
    throw new TypeError("target must be an object");
  }
  formData = formData || new (null_default || FormData)();
  options = utils_default.toFlatObject(options, {
    metaTokens: true,
    dots: false,
    indexes: false
  }, false, function defined(option, source) {
    return !utils_default.isUndefined(source[option]);
  });
  const metaTokens = options.metaTokens;
  const visitor = options.visitor || defaultVisitor;
  const dots = options.dots;
  const indexes = options.indexes;
  const _Blob = options.Blob || typeof Blob !== "undefined" && Blob;
  const useBlob = _Blob && utils_default.isSpecCompliantForm(formData);
  if (!utils_default.isFunction(visitor)) {
    throw new TypeError("visitor must be a function");
  }
  function convertValue(value) {
    if (value === null)
      return "";
    if (utils_default.isDate(value)) {
      return value.toISOString();
    }
    if (utils_default.isBoolean(value)) {
      return value.toString();
    }
    if (!useBlob && utils_default.isBlob(value)) {
      throw new AxiosError_default("Blob is not supported. Use a Buffer instead.");
    }
    if (utils_default.isArrayBuffer(value) || utils_default.isTypedArray(value)) {
      return useBlob && typeof Blob === "function" ? new Blob([value]) : Buffer.from(value);
    }
    return value;
  }
  function defaultVisitor(value, key, path) {
    let arr = value;
    if (value && !path && typeof value === "object") {
      if (utils_default.endsWith(key, "{}")) {
        key = metaTokens ? key : key.slice(0, -2);
        value = JSON.stringify(value);
      } else if (utils_default.isArray(value) && isFlatArray(value) || (utils_default.isFileList(value) || utils_default.endsWith(key, "[]")) && (arr = utils_default.toArray(value))) {
        key = removeBrackets(key);
        arr.forEach(function each(el, index) {
          !(utils_default.isUndefined(el) || el === null) && formData.append(
            // eslint-disable-next-line no-nested-ternary
            indexes === true ? renderKey([key], index, dots) : indexes === null ? key : key + "[]",
            convertValue(el)
          );
        });
        return false;
      }
    }
    if (isVisitable(value)) {
      return true;
    }
    formData.append(renderKey(path, key, dots), convertValue(value));
    return false;
  }
  const stack = [];
  const exposedHelpers = Object.assign(predicates, {
    defaultVisitor,
    convertValue,
    isVisitable
  });
  function build(value, path) {
    if (utils_default.isUndefined(value))
      return;
    if (stack.indexOf(value) !== -1) {
      throw Error("Circular reference detected in " + path.join("."));
    }
    stack.push(value);
    utils_default.forEach(value, function each(el, key) {
      const result = !(utils_default.isUndefined(el) || el === null) && visitor.call(
        formData,
        el,
        utils_default.isString(key) ? key.trim() : key,
        path,
        exposedHelpers
      );
      if (result === true) {
        build(el, path ? path.concat(key) : [key]);
      }
    });
    stack.pop();
  }
  if (!utils_default.isObject(obj)) {
    throw new TypeError("data must be an object");
  }
  build(obj);
  return formData;
}
var toFormData_default = toFormData;

// node_modules/axios/lib/helpers/AxiosURLSearchParams.js
function encode(str) {
  const charMap = {
    "!": "%21",
    "'": "%27",
    "(": "%28",
    ")": "%29",
    "~": "%7E",
    "%20": "+",
    "%00": "\0"
  };
  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {
    return charMap[match];
  });
}
function AxiosURLSearchParams(params, options) {
  this._pairs = [];
  params && toFormData_default(params, this, options);
}
var prototype2 = AxiosURLSearchParams.prototype;
prototype2.append = function append(name, value) {
  this._pairs.push([name, value]);
};
prototype2.toString = function toString2(encoder) {
  const _encode = encoder ? function(value) {
    return encoder.call(this, value, encode);
  } : encode;
  return this._pairs.map(function each(pair) {
    return _encode(pair[0]) + "=" + _encode(pair[1]);
  }, "").join("&");
};
var AxiosURLSearchParams_default = AxiosURLSearchParams;

// node_modules/axios/lib/helpers/buildURL.js
function encode2(val) {
  return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
function buildURL(url, params, options) {
  if (!params) {
    return url;
  }
  const _encode = options && options.encode || encode2;
  if (utils_default.isFunction(options)) {
    options = {
      serialize: options
    };
  }
  const serializeFn = options && options.serialize;
  let serializedParams;
  if (serializeFn) {
    serializedParams = serializeFn(params, options);
  } else {
    serializedParams = utils_default.isURLSearchParams(params) ? params.toString() : new AxiosURLSearchParams_default(params, options).toString(_encode);
  }
  if (serializedParams) {
    const hashmarkIndex = url.indexOf("#");
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }
    url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
  }
  return url;
}

// node_modules/axios/lib/core/InterceptorManager.js
var InterceptorManager = class {
  constructor() {
    this.handlers = [];
  }
  /**
   * Add a new interceptor to the stack
   *
   * @param {Function} fulfilled The function to handle `then` for a `Promise`
   * @param {Function} rejected The function to handle `reject` for a `Promise`
   *
   * @return {Number} An ID used to remove interceptor later
   */
  use(fulfilled, rejected, options) {
    this.handlers.push({
      fulfilled,
      rejected,
      synchronous: options ? options.synchronous : false,
      runWhen: options ? options.runWhen : null
    });
    return this.handlers.length - 1;
  }
  /**
   * Remove an interceptor from the stack
   *
   * @param {Number} id The ID that was returned by `use`
   *
   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise
   */
  eject(id) {
    if (this.handlers[id]) {
      this.handlers[id] = null;
    }
  }
  /**
   * Clear all interceptors from the stack
   *
   * @returns {void}
   */
  clear() {
    if (this.handlers) {
      this.handlers = [];
    }
  }
  /**
   * Iterate over all the registered interceptors
   *
   * This method is particularly useful for skipping over any
   * interceptors that may have become `null` calling `eject`.
   *
   * @param {Function} fn The function to call for each interceptor
   *
   * @returns {void}
   */
  forEach(fn) {
    utils_default.forEach(this.handlers, function forEachHandler(h) {
      if (h !== null) {
        fn(h);
      }
    });
  }
};
var InterceptorManager_default = InterceptorManager;

// node_modules/axios/lib/defaults/transitional.js
var transitional_default = {
  silentJSONParsing: true,
  forcedJSONParsing: true,
  clarifyTimeoutError: false
};

// node_modules/axios/lib/platform/browser/classes/URLSearchParams.js
var URLSearchParams_default = typeof URLSearchParams !== "undefined" ? URLSearchParams : AxiosURLSearchParams_default;

// node_modules/axios/lib/platform/browser/classes/FormData.js
var FormData_default = typeof FormData !== "undefined" ? FormData : null;

// node_modules/axios/lib/platform/browser/classes/Blob.js
var Blob_default = typeof Blob !== "undefined" ? Blob : null;

// node_modules/axios/lib/platform/browser/index.js
var browser_default = {
  isBrowser: true,
  classes: {
    URLSearchParams: URLSearchParams_default,
    FormData: FormData_default,
    Blob: Blob_default
  },
  protocols: ["http", "https", "file", "blob", "url", "data"]
};

// node_modules/axios/lib/platform/common/utils.js
var utils_exports = {};
__export(utils_exports, {
  hasBrowserEnv: () => hasBrowserEnv,
  hasStandardBrowserEnv: () => hasStandardBrowserEnv,
  hasStandardBrowserWebWorkerEnv: () => hasStandardBrowserWebWorkerEnv,
  navigator: () => _navigator,
  origin: () => origin
});
var hasBrowserEnv = typeof window !== "undefined" && typeof document !== "undefined";
var _navigator = typeof navigator === "object" && navigator || void 0;
var hasStandardBrowserEnv = hasBrowserEnv && (!_navigator || ["ReactNative", "NativeScript", "NS"].indexOf(_navigator.product) < 0);
var hasStandardBrowserWebWorkerEnv = (() => {
  return typeof WorkerGlobalScope !== "undefined" && // eslint-disable-next-line no-undef
  self instanceof WorkerGlobalScope && typeof self.importScripts === "function";
})();
var origin = hasBrowserEnv && window.location.href || "http://localhost";

// node_modules/axios/lib/platform/index.js
var platform_default = {
  ...utils_exports,
  ...browser_default
};

// node_modules/axios/lib/helpers/toURLEncodedForm.js
function toURLEncodedForm(data, options) {
  return toFormData_default(data, new platform_default.classes.URLSearchParams(), Object.assign({
    visitor: function(value, key, path, helpers) {
      if (platform_default.isNode && utils_default.isBuffer(value)) {
        this.append(key, value.toString("base64"));
        return false;
      }
      return helpers.defaultVisitor.apply(this, arguments);
    }
  }, options));
}

// node_modules/axios/lib/helpers/formDataToJSON.js
function parsePropPath(name) {
  return utils_default.matchAll(/\w+|\[(\w*)]/g, name).map((match) => {
    return match[0] === "[]" ? "" : match[1] || match[0];
  });
}
function arrayToObject(arr) {
  const obj = {};
  const keys = Object.keys(arr);
  let i;
  const len = keys.length;
  let key;
  for (i = 0; i < len; i++) {
    key = keys[i];
    obj[key] = arr[key];
  }
  return obj;
}
function formDataToJSON(formData) {
  function buildPath(path, value, target, index) {
    let name = path[index++];
    if (name === "__proto__")
      return true;
    const isNumericKey = Number.isFinite(+name);
    const isLast = index >= path.length;
    name = !name && utils_default.isArray(target) ? target.length : name;
    if (isLast) {
      if (utils_default.hasOwnProp(target, name)) {
        target[name] = [target[name], value];
      } else {
        target[name] = value;
      }
      return !isNumericKey;
    }
    if (!target[name] || !utils_default.isObject(target[name])) {
      target[name] = [];
    }
    const result = buildPath(path, value, target[name], index);
    if (result && utils_default.isArray(target[name])) {
      target[name] = arrayToObject(target[name]);
    }
    return !isNumericKey;
  }
  if (utils_default.isFormData(formData) && utils_default.isFunction(formData.entries)) {
    const obj = {};
    utils_default.forEachEntry(formData, (name, value) => {
      buildPath(parsePropPath(name), value, obj, 0);
    });
    return obj;
  }
  return null;
}
var formDataToJSON_default = formDataToJSON;

// node_modules/axios/lib/defaults/index.js
function stringifySafely(rawValue, parser, encoder) {
  if (utils_default.isString(rawValue)) {
    try {
      (parser || JSON.parse)(rawValue);
      return utils_default.trim(rawValue);
    } catch (e) {
      if (e.name !== "SyntaxError") {
        throw e;
      }
    }
  }
  return (encoder || JSON.stringify)(rawValue);
}
var defaults = {
  transitional: transitional_default,
  adapter: ["xhr", "http", "fetch"],
  transformRequest: [function transformRequest(data, headers) {
    const contentType = headers.getContentType() || "";
    const hasJSONContentType = contentType.indexOf("application/json") > -1;
    const isObjectPayload = utils_default.isObject(data);
    if (isObjectPayload && utils_default.isHTMLForm(data)) {
      data = new FormData(data);
    }
    const isFormData2 = utils_default.isFormData(data);
    if (isFormData2) {
      return hasJSONContentType ? JSON.stringify(formDataToJSON_default(data)) : data;
    }
    if (utils_default.isArrayBuffer(data) || utils_default.isBuffer(data) || utils_default.isStream(data) || utils_default.isFile(data) || utils_default.isBlob(data) || utils_default.isReadableStream(data)) {
      return data;
    }
    if (utils_default.isArrayBufferView(data)) {
      return data.buffer;
    }
    if (utils_default.isURLSearchParams(data)) {
      headers.setContentType("application/x-www-form-urlencoded;charset=utf-8", false);
      return data.toString();
    }
    let isFileList2;
    if (isObjectPayload) {
      if (contentType.indexOf("application/x-www-form-urlencoded") > -1) {
        return toURLEncodedForm(data, this.formSerializer).toString();
      }
      if ((isFileList2 = utils_default.isFileList(data)) || contentType.indexOf("multipart/form-data") > -1) {
        const _FormData = this.env && this.env.FormData;
        return toFormData_default(
          isFileList2 ? { "files[]": data } : data,
          _FormData && new _FormData(),
          this.formSerializer
        );
      }
    }
    if (isObjectPayload || hasJSONContentType) {
      headers.setContentType("application/json", false);
      return stringifySafely(data);
    }
    return data;
  }],
  transformResponse: [function transformResponse(data) {
    const transitional2 = this.transitional || defaults.transitional;
    const forcedJSONParsing = transitional2 && transitional2.forcedJSONParsing;
    const JSONRequested = this.responseType === "json";
    if (utils_default.isResponse(data) || utils_default.isReadableStream(data)) {
      return data;
    }
    if (data && utils_default.isString(data) && (forcedJSONParsing && !this.responseType || JSONRequested)) {
      const silentJSONParsing = transitional2 && transitional2.silentJSONParsing;
      const strictJSONParsing = !silentJSONParsing && JSONRequested;
      try {
        return JSON.parse(data);
      } catch (e) {
        if (strictJSONParsing) {
          if (e.name === "SyntaxError") {
            throw AxiosError_default.from(e, AxiosError_default.ERR_BAD_RESPONSE, this, null, this.response);
          }
          throw e;
        }
      }
    }
    return data;
  }],
  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  env: {
    FormData: platform_default.classes.FormData,
    Blob: platform_default.classes.Blob
  },
  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  },
  headers: {
    common: {
      "Accept": "application/json, text/plain, */*",
      "Content-Type": void 0
    }
  }
};
utils_default.forEach(["delete", "get", "head", "post", "put", "patch"], (method) => {
  defaults.headers[method] = {};
});
var defaults_default = defaults;

// node_modules/axios/lib/helpers/parseHeaders.js
var ignoreDuplicateOf = utils_default.toObjectSet([
  "age",
  "authorization",
  "content-length",
  "content-type",
  "etag",
  "expires",
  "from",
  "host",
  "if-modified-since",
  "if-unmodified-since",
  "last-modified",
  "location",
  "max-forwards",
  "proxy-authorization",
  "referer",
  "retry-after",
  "user-agent"
]);
var parseHeaders_default = (rawHeaders) => {
  const parsed = {};
  let key;
  let val;
  let i;
  rawHeaders && rawHeaders.split("\n").forEach(function parser(line) {
    i = line.indexOf(":");
    key = line.substring(0, i).trim().toLowerCase();
    val = line.substring(i + 1).trim();
    if (!key || parsed[key] && ignoreDuplicateOf[key]) {
      return;
    }
    if (key === "set-cookie") {
      if (parsed[key]) {
        parsed[key].push(val);
      } else {
        parsed[key] = [val];
      }
    } else {
      parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
    }
  });
  return parsed;
};

// node_modules/axios/lib/core/AxiosHeaders.js
var $internals = Symbol("internals");
function normalizeHeader(header) {
  return header && String(header).trim().toLowerCase();
}
function normalizeValue(value) {
  if (value === false || value == null) {
    return value;
  }
  return utils_default.isArray(value) ? value.map(normalizeValue) : String(value);
}
function parseTokens(str) {
  const tokens = /* @__PURE__ */ Object.create(null);
  const tokensRE = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;
  let match;
  while (match = tokensRE.exec(str)) {
    tokens[match[1]] = match[2];
  }
  return tokens;
}
var isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());
function matchHeaderValue(context, value, header, filter2, isHeaderNameFilter) {
  if (utils_default.isFunction(filter2)) {
    return filter2.call(this, value, header);
  }
  if (isHeaderNameFilter) {
    value = header;
  }
  if (!utils_default.isString(value))
    return;
  if (utils_default.isString(filter2)) {
    return value.indexOf(filter2) !== -1;
  }
  if (utils_default.isRegExp(filter2)) {
    return filter2.test(value);
  }
}
function formatHeader(header) {
  return header.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (w, char, str) => {
    return char.toUpperCase() + str;
  });
}
function buildAccessors(obj, header) {
  const accessorName = utils_default.toCamelCase(" " + header);
  ["get", "set", "has"].forEach((methodName) => {
    Object.defineProperty(obj, methodName + accessorName, {
      value: function(arg1, arg2, arg3) {
        return this[methodName].call(this, header, arg1, arg2, arg3);
      },
      configurable: true
    });
  });
}
var AxiosHeaders = class {
  constructor(headers) {
    headers && this.set(headers);
  }
  set(header, valueOrRewrite, rewrite) {
    const self2 = this;
    function setHeader(_value, _header, _rewrite) {
      const lHeader = normalizeHeader(_header);
      if (!lHeader) {
        throw new Error("header name must be a non-empty string");
      }
      const key = utils_default.findKey(self2, lHeader);
      if (!key || self2[key] === void 0 || _rewrite === true || _rewrite === void 0 && self2[key] !== false) {
        self2[key || _header] = normalizeValue(_value);
      }
    }
    const setHeaders = (headers, _rewrite) => utils_default.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));
    if (utils_default.isPlainObject(header) || header instanceof this.constructor) {
      setHeaders(header, valueOrRewrite);
    } else if (utils_default.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {
      setHeaders(parseHeaders_default(header), valueOrRewrite);
    } else if (utils_default.isObject(header) && utils_default.isIterable(header)) {
      let obj = {}, dest, key;
      for (const entry of header) {
        if (!utils_default.isArray(entry)) {
          throw TypeError("Object iterator must return a key-value pair");
        }
        obj[key = entry[0]] = (dest = obj[key]) ? utils_default.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]] : entry[1];
      }
      setHeaders(obj, valueOrRewrite);
    } else {
      header != null && setHeader(valueOrRewrite, header, rewrite);
    }
    return this;
  }
  get(header, parser) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils_default.findKey(this, header);
      if (key) {
        const value = this[key];
        if (!parser) {
          return value;
        }
        if (parser === true) {
          return parseTokens(value);
        }
        if (utils_default.isFunction(parser)) {
          return parser.call(this, value, key);
        }
        if (utils_default.isRegExp(parser)) {
          return parser.exec(value);
        }
        throw new TypeError("parser must be boolean|regexp|function");
      }
    }
  }
  has(header, matcher) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils_default.findKey(this, header);
      return !!(key && this[key] !== void 0 && (!matcher || matchHeaderValue(this, this[key], key, matcher)));
    }
    return false;
  }
  delete(header, matcher) {
    const self2 = this;
    let deleted = false;
    function deleteHeader(_header) {
      _header = normalizeHeader(_header);
      if (_header) {
        const key = utils_default.findKey(self2, _header);
        if (key && (!matcher || matchHeaderValue(self2, self2[key], key, matcher))) {
          delete self2[key];
          deleted = true;
        }
      }
    }
    if (utils_default.isArray(header)) {
      header.forEach(deleteHeader);
    } else {
      deleteHeader(header);
    }
    return deleted;
  }
  clear(matcher) {
    const keys = Object.keys(this);
    let i = keys.length;
    let deleted = false;
    while (i--) {
      const key = keys[i];
      if (!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {
        delete this[key];
        deleted = true;
      }
    }
    return deleted;
  }
  normalize(format) {
    const self2 = this;
    const headers = {};
    utils_default.forEach(this, (value, header) => {
      const key = utils_default.findKey(headers, header);
      if (key) {
        self2[key] = normalizeValue(value);
        delete self2[header];
        return;
      }
      const normalized = format ? formatHeader(header) : String(header).trim();
      if (normalized !== header) {
        delete self2[header];
      }
      self2[normalized] = normalizeValue(value);
      headers[normalized] = true;
    });
    return this;
  }
  concat(...targets) {
    return this.constructor.concat(this, ...targets);
  }
  toJSON(asStrings) {
    const obj = /* @__PURE__ */ Object.create(null);
    utils_default.forEach(this, (value, header) => {
      value != null && value !== false && (obj[header] = asStrings && utils_default.isArray(value) ? value.join(", ") : value);
    });
    return obj;
  }
  [Symbol.iterator]() {
    return Object.entries(this.toJSON())[Symbol.iterator]();
  }
  toString() {
    return Object.entries(this.toJSON()).map(([header, value]) => header + ": " + value).join("\n");
  }
  getSetCookie() {
    return this.get("set-cookie") || [];
  }
  get [Symbol.toStringTag]() {
    return "AxiosHeaders";
  }
  static from(thing) {
    return thing instanceof this ? thing : new this(thing);
  }
  static concat(first, ...targets) {
    const computed = new this(first);
    targets.forEach((target) => computed.set(target));
    return computed;
  }
  static accessor(header) {
    const internals = this[$internals] = this[$internals] = {
      accessors: {}
    };
    const accessors = internals.accessors;
    const prototype3 = this.prototype;
    function defineAccessor(_header) {
      const lHeader = normalizeHeader(_header);
      if (!accessors[lHeader]) {
        buildAccessors(prototype3, _header);
        accessors[lHeader] = true;
      }
    }
    utils_default.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);
    return this;
  }
};
AxiosHeaders.accessor(["Content-Type", "Content-Length", "Accept", "Accept-Encoding", "User-Agent", "Authorization"]);
utils_default.reduceDescriptors(AxiosHeaders.prototype, ({ value }, key) => {
  let mapped = key[0].toUpperCase() + key.slice(1);
  return {
    get: () => value,
    set(headerValue) {
      this[mapped] = headerValue;
    }
  };
});
utils_default.freezeMethods(AxiosHeaders);
var AxiosHeaders_default = AxiosHeaders;

// node_modules/axios/lib/core/transformData.js
function transformData(fns, response) {
  const config = this || defaults_default;
  const context = response || config;
  const headers = AxiosHeaders_default.from(context.headers);
  let data = context.data;
  utils_default.forEach(fns, function transform(fn) {
    data = fn.call(config, data, headers.normalize(), response ? response.status : void 0);
  });
  headers.normalize();
  return data;
}

// node_modules/axios/lib/cancel/isCancel.js
function isCancel(value) {
  return !!(value && value.__CANCEL__);
}

// node_modules/axios/lib/cancel/CanceledError.js
function CanceledError(message, config, request) {
  AxiosError_default.call(this, message == null ? "canceled" : message, AxiosError_default.ERR_CANCELED, config, request);
  this.name = "CanceledError";
}
utils_default.inherits(CanceledError, AxiosError_default, {
  __CANCEL__: true
});
var CanceledError_default = CanceledError;

// node_modules/axios/lib/core/settle.js
function settle(resolve, reject, response) {
  const validateStatus2 = response.config.validateStatus;
  if (!response.status || !validateStatus2 || validateStatus2(response.status)) {
    resolve(response);
  } else {
    reject(new AxiosError_default(
      "Request failed with status code " + response.status,
      [AxiosError_default.ERR_BAD_REQUEST, AxiosError_default.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],
      response.config,
      response.request,
      response
    ));
  }
}

// node_modules/axios/lib/helpers/parseProtocol.js
function parseProtocol(url) {
  const match = /^([-+\w]{1,25})(:?\/\/|:)/.exec(url);
  return match && match[1] || "";
}

// node_modules/axios/lib/helpers/speedometer.js
function speedometer(samplesCount, min) {
  samplesCount = samplesCount || 10;
  const bytes = new Array(samplesCount);
  const timestamps = new Array(samplesCount);
  let head = 0;
  let tail = 0;
  let firstSampleTS;
  min = min !== void 0 ? min : 1e3;
  return function push(chunkLength) {
    const now = Date.now();
    const startedAt = timestamps[tail];
    if (!firstSampleTS) {
      firstSampleTS = now;
    }
    bytes[head] = chunkLength;
    timestamps[head] = now;
    let i = tail;
    let bytesCount = 0;
    while (i !== head) {
      bytesCount += bytes[i++];
      i = i % samplesCount;
    }
    head = (head + 1) % samplesCount;
    if (head === tail) {
      tail = (tail + 1) % samplesCount;
    }
    if (now - firstSampleTS < min) {
      return;
    }
    const passed = startedAt && now - startedAt;
    return passed ? Math.round(bytesCount * 1e3 / passed) : void 0;
  };
}
var speedometer_default = speedometer;

// node_modules/axios/lib/helpers/throttle.js
function throttle(fn, freq) {
  let timestamp = 0;
  let threshold = 1e3 / freq;
  let lastArgs;
  let timer;
  const invoke = (args, now = Date.now()) => {
    timestamp = now;
    lastArgs = null;
    if (timer) {
      clearTimeout(timer);
      timer = null;
    }
    fn.apply(null, args);
  };
  const throttled = (...args) => {
    const now = Date.now();
    const passed = now - timestamp;
    if (passed >= threshold) {
      invoke(args, now);
    } else {
      lastArgs = args;
      if (!timer) {
        timer = setTimeout(() => {
          timer = null;
          invoke(lastArgs);
        }, threshold - passed);
      }
    }
  };
  const flush = () => lastArgs && invoke(lastArgs);
  return [throttled, flush];
}
var throttle_default = throttle;

// node_modules/axios/lib/helpers/progressEventReducer.js
var progressEventReducer = (listener, isDownloadStream, freq = 3) => {
  let bytesNotified = 0;
  const _speedometer = speedometer_default(50, 250);
  return throttle_default((e) => {
    const loaded = e.loaded;
    const total = e.lengthComputable ? e.total : void 0;
    const progressBytes = loaded - bytesNotified;
    const rate = _speedometer(progressBytes);
    const inRange = loaded <= total;
    bytesNotified = loaded;
    const data = {
      loaded,
      total,
      progress: total ? loaded / total : void 0,
      bytes: progressBytes,
      rate: rate ? rate : void 0,
      estimated: rate && total && inRange ? (total - loaded) / rate : void 0,
      event: e,
      lengthComputable: total != null,
      [isDownloadStream ? "download" : "upload"]: true
    };
    listener(data);
  }, freq);
};
var progressEventDecorator = (total, throttled) => {
  const lengthComputable = total != null;
  return [(loaded) => throttled[0]({
    lengthComputable,
    total,
    loaded
  }), throttled[1]];
};
var asyncDecorator = (fn) => (...args) => utils_default.asap(() => fn(...args));

// node_modules/axios/lib/helpers/isURLSameOrigin.js
var isURLSameOrigin_default = platform_default.hasStandardBrowserEnv ? /* @__PURE__ */ ((origin2, isMSIE) => (url) => {
  url = new URL(url, platform_default.origin);
  return origin2.protocol === url.protocol && origin2.host === url.host && (isMSIE || origin2.port === url.port);
})(
  new URL(platform_default.origin),
  platform_default.navigator && /(msie|trident)/i.test(platform_default.navigator.userAgent)
) : () => true;

// node_modules/axios/lib/helpers/cookies.js
var cookies_default = platform_default.hasStandardBrowserEnv ? (
  // Standard browser envs support document.cookie
  {
    write(name, value, expires, path, domain, secure) {
      const cookie = [name + "=" + encodeURIComponent(value)];
      utils_default.isNumber(expires) && cookie.push("expires=" + new Date(expires).toGMTString());
      utils_default.isString(path) && cookie.push("path=" + path);
      utils_default.isString(domain) && cookie.push("domain=" + domain);
      secure === true && cookie.push("secure");
      document.cookie = cookie.join("; ");
    },
    read(name) {
      const match = document.cookie.match(new RegExp("(^|;\\s*)(" + name + ")=([^;]*)"));
      return match ? decodeURIComponent(match[3]) : null;
    },
    remove(name) {
      this.write(name, "", Date.now() - 864e5);
    }
  }
) : (
  // Non-standard browser env (web workers, react-native) lack needed support.
  {
    write() {
    },
    read() {
      return null;
    },
    remove() {
    }
  }
);

// node_modules/axios/lib/helpers/isAbsoluteURL.js
function isAbsoluteURL(url) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
}

// node_modules/axios/lib/helpers/combineURLs.js
function combineURLs(baseURL, relativeURL) {
  return relativeURL ? baseURL.replace(/\/?\/$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
}

// node_modules/axios/lib/core/buildFullPath.js
function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {
  let isRelativeUrl = !isAbsoluteURL(requestedURL);
  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
}

// node_modules/axios/lib/core/mergeConfig.js
var headersToObject = (thing) => thing instanceof AxiosHeaders_default ? { ...thing } : thing;
function mergeConfig(config1, config2) {
  config2 = config2 || {};
  const config = {};
  function getMergedValue(target, source, prop, caseless) {
    if (utils_default.isPlainObject(target) && utils_default.isPlainObject(source)) {
      return utils_default.merge.call({ caseless }, target, source);
    } else if (utils_default.isPlainObject(source)) {
      return utils_default.merge({}, source);
    } else if (utils_default.isArray(source)) {
      return source.slice();
    }
    return source;
  }
  function mergeDeepProperties(a, b, prop, caseless) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(a, b, prop, caseless);
    } else if (!utils_default.isUndefined(a)) {
      return getMergedValue(void 0, a, prop, caseless);
    }
  }
  function valueFromConfig2(a, b) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(void 0, b);
    }
  }
  function defaultToConfig2(a, b) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(void 0, b);
    } else if (!utils_default.isUndefined(a)) {
      return getMergedValue(void 0, a);
    }
  }
  function mergeDirectKeys(a, b, prop) {
    if (prop in config2) {
      return getMergedValue(a, b);
    } else if (prop in config1) {
      return getMergedValue(void 0, a);
    }
  }
  const mergeMap = {
    url: valueFromConfig2,
    method: valueFromConfig2,
    data: valueFromConfig2,
    baseURL: defaultToConfig2,
    transformRequest: defaultToConfig2,
    transformResponse: defaultToConfig2,
    paramsSerializer: defaultToConfig2,
    timeout: defaultToConfig2,
    timeoutMessage: defaultToConfig2,
    withCredentials: defaultToConfig2,
    withXSRFToken: defaultToConfig2,
    adapter: defaultToConfig2,
    responseType: defaultToConfig2,
    xsrfCookieName: defaultToConfig2,
    xsrfHeaderName: defaultToConfig2,
    onUploadProgress: defaultToConfig2,
    onDownloadProgress: defaultToConfig2,
    decompress: defaultToConfig2,
    maxContentLength: defaultToConfig2,
    maxBodyLength: defaultToConfig2,
    beforeRedirect: defaultToConfig2,
    transport: defaultToConfig2,
    httpAgent: defaultToConfig2,
    httpsAgent: defaultToConfig2,
    cancelToken: defaultToConfig2,
    socketPath: defaultToConfig2,
    responseEncoding: defaultToConfig2,
    validateStatus: mergeDirectKeys,
    headers: (a, b, prop) => mergeDeepProperties(headersToObject(a), headersToObject(b), prop, true)
  };
  utils_default.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {
    const merge2 = mergeMap[prop] || mergeDeepProperties;
    const configValue = merge2(config1[prop], config2[prop], prop);
    utils_default.isUndefined(configValue) && merge2 !== mergeDirectKeys || (config[prop] = configValue);
  });
  return config;
}

// node_modules/axios/lib/helpers/resolveConfig.js
var resolveConfig_default = (config) => {
  const newConfig = mergeConfig({}, config);
  let { data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth } = newConfig;
  newConfig.headers = headers = AxiosHeaders_default.from(headers);
  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);
  if (auth) {
    headers.set(
      "Authorization",
      "Basic " + btoa((auth.username || "") + ":" + (auth.password ? unescape(encodeURIComponent(auth.password)) : ""))
    );
  }
  let contentType;
  if (utils_default.isFormData(data)) {
    if (platform_default.hasStandardBrowserEnv || platform_default.hasStandardBrowserWebWorkerEnv) {
      headers.setContentType(void 0);
    } else if ((contentType = headers.getContentType()) !== false) {
      const [type, ...tokens] = contentType ? contentType.split(";").map((token) => token.trim()).filter(Boolean) : [];
      headers.setContentType([type || "multipart/form-data", ...tokens].join("; "));
    }
  }
  if (platform_default.hasStandardBrowserEnv) {
    withXSRFToken && utils_default.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));
    if (withXSRFToken || withXSRFToken !== false && isURLSameOrigin_default(newConfig.url)) {
      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies_default.read(xsrfCookieName);
      if (xsrfValue) {
        headers.set(xsrfHeaderName, xsrfValue);
      }
    }
  }
  return newConfig;
};

// node_modules/axios/lib/adapters/xhr.js
var isXHRAdapterSupported = typeof XMLHttpRequest !== "undefined";
var xhr_default = isXHRAdapterSupported && function(config) {
  return new Promise(function dispatchXhrRequest(resolve, reject) {
    const _config = resolveConfig_default(config);
    let requestData = _config.data;
    const requestHeaders = AxiosHeaders_default.from(_config.headers).normalize();
    let { responseType, onUploadProgress, onDownloadProgress } = _config;
    let onCanceled;
    let uploadThrottled, downloadThrottled;
    let flushUpload, flushDownload;
    function done() {
      flushUpload && flushUpload();
      flushDownload && flushDownload();
      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);
      _config.signal && _config.signal.removeEventListener("abort", onCanceled);
    }
    let request = new XMLHttpRequest();
    request.open(_config.method.toUpperCase(), _config.url, true);
    request.timeout = _config.timeout;
    function onloadend() {
      if (!request) {
        return;
      }
      const responseHeaders = AxiosHeaders_default.from(
        "getAllResponseHeaders" in request && request.getAllResponseHeaders()
      );
      const responseData = !responseType || responseType === "text" || responseType === "json" ? request.responseText : request.response;
      const response = {
        data: responseData,
        status: request.status,
        statusText: request.statusText,
        headers: responseHeaders,
        config,
        request
      };
      settle(function _resolve(value) {
        resolve(value);
        done();
      }, function _reject(err) {
        reject(err);
        done();
      }, response);
      request = null;
    }
    if ("onloadend" in request) {
      request.onloadend = onloadend;
    } else {
      request.onreadystatechange = function handleLoad() {
        if (!request || request.readyState !== 4) {
          return;
        }
        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf("file:") === 0)) {
          return;
        }
        setTimeout(onloadend);
      };
    }
    request.onabort = function handleAbort() {
      if (!request) {
        return;
      }
      reject(new AxiosError_default("Request aborted", AxiosError_default.ECONNABORTED, config, request));
      request = null;
    };
    request.onerror = function handleError() {
      reject(new AxiosError_default("Network Error", AxiosError_default.ERR_NETWORK, config, request));
      request = null;
    };
    request.ontimeout = function handleTimeout() {
      let timeoutErrorMessage = _config.timeout ? "timeout of " + _config.timeout + "ms exceeded" : "timeout exceeded";
      const transitional2 = _config.transitional || transitional_default;
      if (_config.timeoutErrorMessage) {
        timeoutErrorMessage = _config.timeoutErrorMessage;
      }
      reject(new AxiosError_default(
        timeoutErrorMessage,
        transitional2.clarifyTimeoutError ? AxiosError_default.ETIMEDOUT : AxiosError_default.ECONNABORTED,
        config,
        request
      ));
      request = null;
    };
    requestData === void 0 && requestHeaders.setContentType(null);
    if ("setRequestHeader" in request) {
      utils_default.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {
        request.setRequestHeader(key, val);
      });
    }
    if (!utils_default.isUndefined(_config.withCredentials)) {
      request.withCredentials = !!_config.withCredentials;
    }
    if (responseType && responseType !== "json") {
      request.responseType = _config.responseType;
    }
    if (onDownloadProgress) {
      [downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true);
      request.addEventListener("progress", downloadThrottled);
    }
    if (onUploadProgress && request.upload) {
      [uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress);
      request.upload.addEventListener("progress", uploadThrottled);
      request.upload.addEventListener("loadend", flushUpload);
    }
    if (_config.cancelToken || _config.signal) {
      onCanceled = (cancel) => {
        if (!request) {
          return;
        }
        reject(!cancel || cancel.type ? new CanceledError_default(null, config, request) : cancel);
        request.abort();
        request = null;
      };
      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);
      if (_config.signal) {
        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener("abort", onCanceled);
      }
    }
    const protocol = parseProtocol(_config.url);
    if (protocol && platform_default.protocols.indexOf(protocol) === -1) {
      reject(new AxiosError_default("Unsupported protocol " + protocol + ":", AxiosError_default.ERR_BAD_REQUEST, config));
      return;
    }
    request.send(requestData || null);
  });
};

// node_modules/axios/lib/helpers/composeSignals.js
var composeSignals = (signals, timeout) => {
  const { length } = signals = signals ? signals.filter(Boolean) : [];
  if (timeout || length) {
    let controller = new AbortController();
    let aborted;
    const onabort = function(reason) {
      if (!aborted) {
        aborted = true;
        unsubscribe();
        const err = reason instanceof Error ? reason : this.reason;
        controller.abort(err instanceof AxiosError_default ? err : new CanceledError_default(err instanceof Error ? err.message : err));
      }
    };
    let timer = timeout && setTimeout(() => {
      timer = null;
      onabort(new AxiosError_default(`timeout ${timeout} of ms exceeded`, AxiosError_default.ETIMEDOUT));
    }, timeout);
    const unsubscribe = () => {
      if (signals) {
        timer && clearTimeout(timer);
        timer = null;
        signals.forEach((signal2) => {
          signal2.unsubscribe ? signal2.unsubscribe(onabort) : signal2.removeEventListener("abort", onabort);
        });
        signals = null;
      }
    };
    signals.forEach((signal2) => signal2.addEventListener("abort", onabort));
    const { signal } = controller;
    signal.unsubscribe = () => utils_default.asap(unsubscribe);
    return signal;
  }
};
var composeSignals_default = composeSignals;

// node_modules/axios/lib/helpers/trackStream.js
var streamChunk = function* (chunk, chunkSize) {
  let len = chunk.byteLength;
  if (!chunkSize || len < chunkSize) {
    yield chunk;
    return;
  }
  let pos = 0;
  let end;
  while (pos < len) {
    end = pos + chunkSize;
    yield chunk.slice(pos, end);
    pos = end;
  }
};
var readBytes = async function* (iterable, chunkSize) {
  for await (const chunk of readStream(iterable)) {
    yield* streamChunk(chunk, chunkSize);
  }
};
var readStream = async function* (stream) {
  if (stream[Symbol.asyncIterator]) {
    yield* stream;
    return;
  }
  const reader = stream.getReader();
  try {
    for (; ; ) {
      const { done, value } = await reader.read();
      if (done) {
        break;
      }
      yield value;
    }
  } finally {
    await reader.cancel();
  }
};
var trackStream = (stream, chunkSize, onProgress, onFinish) => {
  const iterator2 = readBytes(stream, chunkSize);
  let bytes = 0;
  let done;
  let _onFinish = (e) => {
    if (!done) {
      done = true;
      onFinish && onFinish(e);
    }
  };
  return new ReadableStream({
    async pull(controller) {
      try {
        const { done: done2, value } = await iterator2.next();
        if (done2) {
          _onFinish();
          controller.close();
          return;
        }
        let len = value.byteLength;
        if (onProgress) {
          let loadedBytes = bytes += len;
          onProgress(loadedBytes);
        }
        controller.enqueue(new Uint8Array(value));
      } catch (err) {
        _onFinish(err);
        throw err;
      }
    },
    cancel(reason) {
      _onFinish(reason);
      return iterator2.return();
    }
  }, {
    highWaterMark: 2
  });
};

// node_modules/axios/lib/adapters/fetch.js
var isFetchSupported = typeof fetch === "function" && typeof Request === "function" && typeof Response === "function";
var isReadableStreamSupported = isFetchSupported && typeof ReadableStream === "function";
var encodeText = isFetchSupported && (typeof TextEncoder === "function" ? /* @__PURE__ */ ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) : async (str) => new Uint8Array(await new Response(str).arrayBuffer()));
var test = (fn, ...args) => {
  try {
    return !!fn(...args);
  } catch (e) {
    return false;
  }
};
var supportsRequestStream = isReadableStreamSupported && test(() => {
  let duplexAccessed = false;
  const hasContentType = new Request(platform_default.origin, {
    body: new ReadableStream(),
    method: "POST",
    get duplex() {
      duplexAccessed = true;
      return "half";
    }
  }).headers.has("Content-Type");
  return duplexAccessed && !hasContentType;
});
var DEFAULT_CHUNK_SIZE = 64 * 1024;
var supportsResponseStream = isReadableStreamSupported && test(() => utils_default.isReadableStream(new Response("").body));
var resolvers = {
  stream: supportsResponseStream && ((res) => res.body)
};
isFetchSupported && ((res) => {
  ["text", "arrayBuffer", "blob", "formData", "stream"].forEach((type) => {
    !resolvers[type] && (resolvers[type] = utils_default.isFunction(res[type]) ? (res2) => res2[type]() : (_, config) => {
      throw new AxiosError_default(`Response type '${type}' is not supported`, AxiosError_default.ERR_NOT_SUPPORT, config);
    });
  });
})(new Response());
var getBodyLength = async (body) => {
  if (body == null) {
    return 0;
  }
  if (utils_default.isBlob(body)) {
    return body.size;
  }
  if (utils_default.isSpecCompliantForm(body)) {
    const _request = new Request(platform_default.origin, {
      method: "POST",
      body
    });
    return (await _request.arrayBuffer()).byteLength;
  }
  if (utils_default.isArrayBufferView(body) || utils_default.isArrayBuffer(body)) {
    return body.byteLength;
  }
  if (utils_default.isURLSearchParams(body)) {
    body = body + "";
  }
  if (utils_default.isString(body)) {
    return (await encodeText(body)).byteLength;
  }
};
var resolveBodyLength = async (headers, body) => {
  const length = utils_default.toFiniteNumber(headers.getContentLength());
  return length == null ? getBodyLength(body) : length;
};
var fetch_default = isFetchSupported && (async (config) => {
  let {
    url,
    method,
    data,
    signal,
    cancelToken,
    timeout,
    onDownloadProgress,
    onUploadProgress,
    responseType,
    headers,
    withCredentials = "same-origin",
    fetchOptions
  } = resolveConfig_default(config);
  responseType = responseType ? (responseType + "").toLowerCase() : "text";
  let composedSignal = composeSignals_default([signal, cancelToken && cancelToken.toAbortSignal()], timeout);
  let request;
  const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {
    composedSignal.unsubscribe();
  });
  let requestContentLength;
  try {
    if (onUploadProgress && supportsRequestStream && method !== "get" && method !== "head" && (requestContentLength = await resolveBodyLength(headers, data)) !== 0) {
      let _request = new Request(url, {
        method: "POST",
        body: data,
        duplex: "half"
      });
      let contentTypeHeader;
      if (utils_default.isFormData(data) && (contentTypeHeader = _request.headers.get("content-type"))) {
        headers.setContentType(contentTypeHeader);
      }
      if (_request.body) {
        const [onProgress, flush] = progressEventDecorator(
          requestContentLength,
          progressEventReducer(asyncDecorator(onUploadProgress))
        );
        data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);
      }
    }
    if (!utils_default.isString(withCredentials)) {
      withCredentials = withCredentials ? "include" : "omit";
    }
    const isCredentialsSupported = "credentials" in Request.prototype;
    request = new Request(url, {
      ...fetchOptions,
      signal: composedSignal,
      method: method.toUpperCase(),
      headers: headers.normalize().toJSON(),
      body: data,
      duplex: "half",
      credentials: isCredentialsSupported ? withCredentials : void 0
    });
    let response = await fetch(request, fetchOptions);
    const isStreamResponse = supportsResponseStream && (responseType === "stream" || responseType === "response");
    if (supportsResponseStream && (onDownloadProgress || isStreamResponse && unsubscribe)) {
      const options = {};
      ["status", "statusText", "headers"].forEach((prop) => {
        options[prop] = response[prop];
      });
      const responseContentLength = utils_default.toFiniteNumber(response.headers.get("content-length"));
      const [onProgress, flush] = onDownloadProgress && progressEventDecorator(
        responseContentLength,
        progressEventReducer(asyncDecorator(onDownloadProgress), true)
      ) || [];
      response = new Response(
        trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {
          flush && flush();
          unsubscribe && unsubscribe();
        }),
        options
      );
    }
    responseType = responseType || "text";
    let responseData = await resolvers[utils_default.findKey(resolvers, responseType) || "text"](response, config);
    !isStreamResponse && unsubscribe && unsubscribe();
    return await new Promise((resolve, reject) => {
      settle(resolve, reject, {
        data: responseData,
        headers: AxiosHeaders_default.from(response.headers),
        status: response.status,
        statusText: response.statusText,
        config,
        request
      });
    });
  } catch (err) {
    unsubscribe && unsubscribe();
    if (err && err.name === "TypeError" && /Load failed|fetch/i.test(err.message)) {
      throw Object.assign(
        new AxiosError_default("Network Error", AxiosError_default.ERR_NETWORK, config, request),
        {
          cause: err.cause || err
        }
      );
    }
    throw AxiosError_default.from(err, err && err.code, config, request);
  }
});

// node_modules/axios/lib/adapters/adapters.js
var knownAdapters = {
  http: null_default,
  xhr: xhr_default,
  fetch: fetch_default
};
utils_default.forEach(knownAdapters, (fn, value) => {
  if (fn) {
    try {
      Object.defineProperty(fn, "name", { value });
    } catch (e) {
    }
    Object.defineProperty(fn, "adapterName", { value });
  }
});
var renderReason = (reason) => `- ${reason}`;
var isResolvedHandle = (adapter) => utils_default.isFunction(adapter) || adapter === null || adapter === false;
var adapters_default = {
  getAdapter: (adapters) => {
    adapters = utils_default.isArray(adapters) ? adapters : [adapters];
    const { length } = adapters;
    let nameOrAdapter;
    let adapter;
    const rejectedReasons = {};
    for (let i = 0; i < length; i++) {
      nameOrAdapter = adapters[i];
      let id;
      adapter = nameOrAdapter;
      if (!isResolvedHandle(nameOrAdapter)) {
        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];
        if (adapter === void 0) {
          throw new AxiosError_default(`Unknown adapter '${id}'`);
        }
      }
      if (adapter) {
        break;
      }
      rejectedReasons[id || "#" + i] = adapter;
    }
    if (!adapter) {
      const reasons = Object.entries(rejectedReasons).map(
        ([id, state]) => `adapter ${id} ` + (state === false ? "is not supported by the environment" : "is not available in the build")
      );
      let s = length ? reasons.length > 1 ? "since :\n" + reasons.map(renderReason).join("\n") : " " + renderReason(reasons[0]) : "as no adapter specified";
      throw new AxiosError_default(
        `There is no suitable adapter to dispatch the request ` + s,
        "ERR_NOT_SUPPORT"
      );
    }
    return adapter;
  },
  adapters: knownAdapters
};

// node_modules/axios/lib/core/dispatchRequest.js
function throwIfCancellationRequested(config) {
  if (config.cancelToken) {
    config.cancelToken.throwIfRequested();
  }
  if (config.signal && config.signal.aborted) {
    throw new CanceledError_default(null, config);
  }
}
function dispatchRequest(config) {
  throwIfCancellationRequested(config);
  config.headers = AxiosHeaders_default.from(config.headers);
  config.data = transformData.call(
    config,
    config.transformRequest
  );
  if (["post", "put", "patch"].indexOf(config.method) !== -1) {
    config.headers.setContentType("application/x-www-form-urlencoded", false);
  }
  const adapter = adapters_default.getAdapter(config.adapter || defaults_default.adapter);
  return adapter(config).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config);
    response.data = transformData.call(
      config,
      config.transformResponse,
      response
    );
    response.headers = AxiosHeaders_default.from(response.headers);
    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config);
      if (reason && reason.response) {
        reason.response.data = transformData.call(
          config,
          config.transformResponse,
          reason.response
        );
        reason.response.headers = AxiosHeaders_default.from(reason.response.headers);
      }
    }
    return Promise.reject(reason);
  });
}

// node_modules/axios/lib/env/data.js
var VERSION = "1.10.0";

// node_modules/axios/lib/helpers/validator.js
var validators = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach((type, i) => {
  validators[type] = function validator(thing) {
    return typeof thing === type || "a" + (i < 1 ? "n " : " ") + type;
  };
});
var deprecatedWarnings = {};
validators.transitional = function transitional(validator, version, message) {
  function formatMessage(opt, desc) {
    return "[Axios v" + VERSION + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
  }
  return (value, opt, opts) => {
    if (validator === false) {
      throw new AxiosError_default(
        formatMessage(opt, " has been removed" + (version ? " in " + version : "")),
        AxiosError_default.ERR_DEPRECATED
      );
    }
    if (version && !deprecatedWarnings[opt]) {
      deprecatedWarnings[opt] = true;
      console.warn(
        formatMessage(
          opt,
          " has been deprecated since v" + version + " and will be removed in the near future"
        )
      );
    }
    return validator ? validator(value, opt, opts) : true;
  };
};
validators.spelling = function spelling(correctSpelling) {
  return (value, opt) => {
    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);
    return true;
  };
};
function assertOptions(options, schema, allowUnknown) {
  if (typeof options !== "object") {
    throw new AxiosError_default("options must be an object", AxiosError_default.ERR_BAD_OPTION_VALUE);
  }
  const keys = Object.keys(options);
  let i = keys.length;
  while (i-- > 0) {
    const opt = keys[i];
    const validator = schema[opt];
    if (validator) {
      const value = options[opt];
      const result = value === void 0 || validator(value, opt, options);
      if (result !== true) {
        throw new AxiosError_default("option " + opt + " must be " + result, AxiosError_default.ERR_BAD_OPTION_VALUE);
      }
      continue;
    }
    if (allowUnknown !== true) {
      throw new AxiosError_default("Unknown option " + opt, AxiosError_default.ERR_BAD_OPTION);
    }
  }
}
var validator_default = {
  assertOptions,
  validators
};

// node_modules/axios/lib/core/Axios.js
var validators2 = validator_default.validators;
var Axios = class {
  constructor(instanceConfig) {
    this.defaults = instanceConfig || {};
    this.interceptors = {
      request: new InterceptorManager_default(),
      response: new InterceptorManager_default()
    };
  }
  /**
   * Dispatch a request
   *
   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)
   * @param {?Object} config
   *
   * @returns {Promise} The Promise to be fulfilled
   */
  async request(configOrUrl, config) {
    try {
      return await this._request(configOrUrl, config);
    } catch (err) {
      if (err instanceof Error) {
        let dummy = {};
        Error.captureStackTrace ? Error.captureStackTrace(dummy) : dummy = new Error();
        const stack = dummy.stack ? dummy.stack.replace(/^.+\n/, "") : "";
        try {
          if (!err.stack) {
            err.stack = stack;
          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\n.+\n/, ""))) {
            err.stack += "\n" + stack;
          }
        } catch (e) {
        }
      }
      throw err;
    }
  }
  _request(configOrUrl, config) {
    if (typeof configOrUrl === "string") {
      config = config || {};
      config.url = configOrUrl;
    } else {
      config = configOrUrl || {};
    }
    config = mergeConfig(this.defaults, config);
    const { transitional: transitional2, paramsSerializer, headers } = config;
    if (transitional2 !== void 0) {
      validator_default.assertOptions(transitional2, {
        silentJSONParsing: validators2.transitional(validators2.boolean),
        forcedJSONParsing: validators2.transitional(validators2.boolean),
        clarifyTimeoutError: validators2.transitional(validators2.boolean)
      }, false);
    }
    if (paramsSerializer != null) {
      if (utils_default.isFunction(paramsSerializer)) {
        config.paramsSerializer = {
          serialize: paramsSerializer
        };
      } else {
        validator_default.assertOptions(paramsSerializer, {
          encode: validators2.function,
          serialize: validators2.function
        }, true);
      }
    }
    if (config.allowAbsoluteUrls !== void 0) {
    } else if (this.defaults.allowAbsoluteUrls !== void 0) {
      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;
    } else {
      config.allowAbsoluteUrls = true;
    }
    validator_default.assertOptions(config, {
      baseUrl: validators2.spelling("baseURL"),
      withXsrfToken: validators2.spelling("withXSRFToken")
    }, true);
    config.method = (config.method || this.defaults.method || "get").toLowerCase();
    let contextHeaders = headers && utils_default.merge(
      headers.common,
      headers[config.method]
    );
    headers && utils_default.forEach(
      ["delete", "get", "head", "post", "put", "patch", "common"],
      (method) => {
        delete headers[method];
      }
    );
    config.headers = AxiosHeaders_default.concat(contextHeaders, headers);
    const requestInterceptorChain = [];
    let synchronousRequestInterceptors = true;
    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
      if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config) === false) {
        return;
      }
      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
    });
    const responseInterceptorChain = [];
    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
    });
    let promise;
    let i = 0;
    let len;
    if (!synchronousRequestInterceptors) {
      const chain = [dispatchRequest.bind(this), void 0];
      chain.unshift.apply(chain, requestInterceptorChain);
      chain.push.apply(chain, responseInterceptorChain);
      len = chain.length;
      promise = Promise.resolve(config);
      while (i < len) {
        promise = promise.then(chain[i++], chain[i++]);
      }
      return promise;
    }
    len = requestInterceptorChain.length;
    let newConfig = config;
    i = 0;
    while (i < len) {
      const onFulfilled = requestInterceptorChain[i++];
      const onRejected = requestInterceptorChain[i++];
      try {
        newConfig = onFulfilled(newConfig);
      } catch (error) {
        onRejected.call(this, error);
        break;
      }
    }
    try {
      promise = dispatchRequest.call(this, newConfig);
    } catch (error) {
      return Promise.reject(error);
    }
    i = 0;
    len = responseInterceptorChain.length;
    while (i < len) {
      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);
    }
    return promise;
  }
  getUri(config) {
    config = mergeConfig(this.defaults, config);
    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);
    return buildURL(fullPath, config.params, config.paramsSerializer);
  }
};
utils_default.forEach(["delete", "get", "head", "options"], function forEachMethodNoData(method) {
  Axios.prototype[method] = function(url, config) {
    return this.request(mergeConfig(config || {}, {
      method,
      url,
      data: (config || {}).data
    }));
  };
});
utils_default.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
  function generateHTTPMethod(isForm) {
    return function httpMethod(url, data, config) {
      return this.request(mergeConfig(config || {}, {
        method,
        headers: isForm ? {
          "Content-Type": "multipart/form-data"
        } : {},
        url,
        data
      }));
    };
  }
  Axios.prototype[method] = generateHTTPMethod();
  Axios.prototype[method + "Form"] = generateHTTPMethod(true);
});
var Axios_default = Axios;

// node_modules/axios/lib/cancel/CancelToken.js
var CancelToken = class _CancelToken {
  constructor(executor) {
    if (typeof executor !== "function") {
      throw new TypeError("executor must be a function.");
    }
    let resolvePromise;
    this.promise = new Promise(function promiseExecutor(resolve) {
      resolvePromise = resolve;
    });
    const token = this;
    this.promise.then((cancel) => {
      if (!token._listeners)
        return;
      let i = token._listeners.length;
      while (i-- > 0) {
        token._listeners[i](cancel);
      }
      token._listeners = null;
    });
    this.promise.then = (onfulfilled) => {
      let _resolve;
      const promise = new Promise((resolve) => {
        token.subscribe(resolve);
        _resolve = resolve;
      }).then(onfulfilled);
      promise.cancel = function reject() {
        token.unsubscribe(_resolve);
      };
      return promise;
    };
    executor(function cancel(message, config, request) {
      if (token.reason) {
        return;
      }
      token.reason = new CanceledError_default(message, config, request);
      resolvePromise(token.reason);
    });
  }
  /**
   * Throws a `CanceledError` if cancellation has been requested.
   */
  throwIfRequested() {
    if (this.reason) {
      throw this.reason;
    }
  }
  /**
   * Subscribe to the cancel signal
   */
  subscribe(listener) {
    if (this.reason) {
      listener(this.reason);
      return;
    }
    if (this._listeners) {
      this._listeners.push(listener);
    } else {
      this._listeners = [listener];
    }
  }
  /**
   * Unsubscribe from the cancel signal
   */
  unsubscribe(listener) {
    if (!this._listeners) {
      return;
    }
    const index = this._listeners.indexOf(listener);
    if (index !== -1) {
      this._listeners.splice(index, 1);
    }
  }
  toAbortSignal() {
    const controller = new AbortController();
    const abort = (err) => {
      controller.abort(err);
    };
    this.subscribe(abort);
    controller.signal.unsubscribe = () => this.unsubscribe(abort);
    return controller.signal;
  }
  /**
   * Returns an object that contains a new `CancelToken` and a function that, when called,
   * cancels the `CancelToken`.
   */
  static source() {
    let cancel;
    const token = new _CancelToken(function executor(c) {
      cancel = c;
    });
    return {
      token,
      cancel
    };
  }
};
var CancelToken_default = CancelToken;

// node_modules/axios/lib/helpers/spread.js
function spread(callback) {
  return function wrap(arr) {
    return callback.apply(null, arr);
  };
}

// node_modules/axios/lib/helpers/isAxiosError.js
function isAxiosError(payload) {
  return utils_default.isObject(payload) && payload.isAxiosError === true;
}

// node_modules/axios/lib/helpers/HttpStatusCode.js
var HttpStatusCode = {
  Continue: 100,
  SwitchingProtocols: 101,
  Processing: 102,
  EarlyHints: 103,
  Ok: 200,
  Created: 201,
  Accepted: 202,
  NonAuthoritativeInformation: 203,
  NoContent: 204,
  ResetContent: 205,
  PartialContent: 206,
  MultiStatus: 207,
  AlreadyReported: 208,
  ImUsed: 226,
  MultipleChoices: 300,
  MovedPermanently: 301,
  Found: 302,
  SeeOther: 303,
  NotModified: 304,
  UseProxy: 305,
  Unused: 306,
  TemporaryRedirect: 307,
  PermanentRedirect: 308,
  BadRequest: 400,
  Unauthorized: 401,
  PaymentRequired: 402,
  Forbidden: 403,
  NotFound: 404,
  MethodNotAllowed: 405,
  NotAcceptable: 406,
  ProxyAuthenticationRequired: 407,
  RequestTimeout: 408,
  Conflict: 409,
  Gone: 410,
  LengthRequired: 411,
  PreconditionFailed: 412,
  PayloadTooLarge: 413,
  UriTooLong: 414,
  UnsupportedMediaType: 415,
  RangeNotSatisfiable: 416,
  ExpectationFailed: 417,
  ImATeapot: 418,
  MisdirectedRequest: 421,
  UnprocessableEntity: 422,
  Locked: 423,
  FailedDependency: 424,
  TooEarly: 425,
  UpgradeRequired: 426,
  PreconditionRequired: 428,
  TooManyRequests: 429,
  RequestHeaderFieldsTooLarge: 431,
  UnavailableForLegalReasons: 451,
  InternalServerError: 500,
  NotImplemented: 501,
  BadGateway: 502,
  ServiceUnavailable: 503,
  GatewayTimeout: 504,
  HttpVersionNotSupported: 505,
  VariantAlsoNegotiates: 506,
  InsufficientStorage: 507,
  LoopDetected: 508,
  NotExtended: 510,
  NetworkAuthenticationRequired: 511
};
Object.entries(HttpStatusCode).forEach(([key, value]) => {
  HttpStatusCode[value] = key;
});
var HttpStatusCode_default = HttpStatusCode;

// node_modules/axios/lib/axios.js
function createInstance(defaultConfig) {
  const context = new Axios_default(defaultConfig);
  const instance = bind(Axios_default.prototype.request, context);
  utils_default.extend(instance, Axios_default.prototype, context, { allOwnKeys: true });
  utils_default.extend(instance, context, null, { allOwnKeys: true });
  instance.create = function create(instanceConfig) {
    return createInstance(mergeConfig(defaultConfig, instanceConfig));
  };
  return instance;
}
var axios = createInstance(defaults_default);
axios.Axios = Axios_default;
axios.CanceledError = CanceledError_default;
axios.CancelToken = CancelToken_default;
axios.isCancel = isCancel;
axios.VERSION = VERSION;
axios.toFormData = toFormData_default;
axios.AxiosError = AxiosError_default;
axios.Cancel = axios.CanceledError;
axios.all = function all(promises) {
  return Promise.all(promises);
};
axios.spread = spread;
axios.isAxiosError = isAxiosError;
axios.mergeConfig = mergeConfig;
axios.AxiosHeaders = AxiosHeaders_default;
axios.formToJSON = (thing) => formDataToJSON_default(utils_default.isHTMLForm(thing) ? new FormData(thing) : thing);
axios.getAdapter = adapters_default.getAdapter;
axios.HttpStatusCode = HttpStatusCode_default;
axios.default = axios;
var axios_default = axios;

// node_modules/axios/index.js
var {
  Axios: Axios2,
  AxiosError: AxiosError2,
  CanceledError: CanceledError2,
  isCancel: isCancel2,
  CancelToken: CancelToken2,
  VERSION: VERSION2,
  all: all2,
  Cancel,
  isAxiosError: isAxiosError2,
  spread: spread2,
  toFormData: toFormData2,
  AxiosHeaders: AxiosHeaders2,
  HttpStatusCode: HttpStatusCode2,
  formToJSON,
  getAdapter,
  mergeConfig: mergeConfig2
} = axios_default;

// src/infrastructure/llm/LLMService.ts
var LLMService = class {
  constructor(settings) {
    this.settings = settings;
    this.retryPolicy = new APIRetryPolicy({
      maxAttempts: 3,
      delayMs: 2e3,
      exponentialBackoff: true
    });
  }
  // 현재 선택된 제공업체의 API 키를 가져오는 메서드
  getCurrentApiKey() {
    const provider = this.settings.llmProvider;
    let encryptedKey = "";
    switch (provider) {
      case "openai":
        encryptedKey = this.settings.openaiApiKey;
        break;
      case "anthropic":
        encryptedKey = this.settings.anthropicApiKey;
        break;
      case "google":
        encryptedKey = this.settings.googleApiKey;
        break;
    }
    return decryptApiKey(encryptedKey);
  }
  async testConnection() {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const testPrompt = 'Hello, this is a test message. Please respond with "OK" if you can read this.';
      const response = await this.callLLM(testPrompt);
      if (response.success) {
        return { success: true, data: "API \uC5F0\uACB0 \uC131\uACF5" };
      } else {
        return { success: false, error: response.error || "API \uC5F0\uACB0 \uC2E4\uD328" };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getWordDetails(word) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const prompt = this.createWordDetailPrompt(word);
      const response = await this.callLLM(prompt);
      if (response.success) {
        const parsedData = this.parseWordDetailResponse(response.data, word);
        return { success: true, data: parsedData };
      } else {
        return { success: false, error: response.error || "\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getMultipleWordDetails(words, progressCallback) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      if (words.length === 0) {
        return { success: false, error: "\uCC98\uB9AC\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      const BATCH_SIZE = 20;
      const allResults = [];
      const totalBatches = Math.ceil(words.length / BATCH_SIZE);
      if (progressCallback) {
        progressCallback(0, words.length, `\uCD1D ${words.length}\uAC1C \uB2E8\uC5B4\uB97C ${totalBatches}\uAC1C \uBC30\uCE58\uB85C \uB098\uB204\uC5B4 \uCC98\uB9AC\uD569\uB2C8\uB2E4.`);
      }
      for (let i = 0; i < words.length; i += BATCH_SIZE) {
        const batchNumber = Math.floor(i / BATCH_SIZE) + 1;
        const batchWords = words.slice(i, i + BATCH_SIZE);
        if (progressCallback) {
          progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber}/${totalBatches} \uCC98\uB9AC \uC911... (${batchWords.length}\uAC1C \uB2E8\uC5B4)`);
        }
        try {
          const prompt = this.createMultipleWordDetailPrompt(batchWords);
          const response = await this.callLLM(prompt);
          if (response.success) {
            const parsedData = this.parseMultipleWordDetailResponse(response.data, batchWords);
            allResults.push(...parsedData);
            if (progressCallback) {
              progressCallback(i + batchWords.length, words.length, `\uBC30\uCE58 ${batchNumber} \uC644\uB8CC: ${parsedData.length}\uAC1C \uB2E8\uC5B4 \uCC98\uB9AC\uB428`);
            }
          } else {
            console.error(`\uBC30\uCE58 ${batchNumber} \uC2E4\uD328:`, response.error);
            if (progressCallback) {
              progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC2E4\uD328, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
            }
            const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
            allResults.push(...individualResults);
          }
        } catch (error) {
          console.error(`\uBC30\uCE58 ${batchNumber} \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
          if (progressCallback) {
            progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC624\uB958, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
          }
          const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
          allResults.push(...individualResults);
        }
        if (i + BATCH_SIZE < words.length) {
          await this.delay(1e3);
        }
      }
      if (progressCallback) {
        progressCallback(words.length, words.length, `\uBAA8\uB4E0 \uBC30\uCE58 \uCC98\uB9AC \uC644\uB8CC. \uCD1D ${allResults.length}\uAC1C \uB2E8\uC5B4 \uB370\uC774\uD130 \uC218\uC9D1\uB428`);
      }
      return { success: true, data: allResults };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  // 개별 단어 처리 (배치 실패 시 폴백)
  async processWordsIndividually(words, progressCallback, startIndex = 0) {
    const results = [];
    for (let i = 0; i < words.length; i++) {
      const word = words[i];
      const currentIndex = startIndex + i;
      try {
        if (progressCallback) {
          progressCallback(currentIndex, startIndex + words.length, `\uAC1C\uBCC4 \uCC98\uB9AC: "${word}"`);
        }
        const response = await this.getWordDetails(word);
        if (response.success && response.data) {
          results.push(response.data);
        } else {
          console.warn(`\uB2E8\uC5B4 "${word}" \uCC98\uB9AC \uC2E4\uD328:`, response.error);
          results.push({
            word: word.toLowerCase(),
            pronunciation: "",
            meanings: ["\uCC98\uB9AC \uC2E4\uD328"],
            examples: [],
            similarWords: []
          });
        }
        await this.delay(500);
      } catch (error) {
        console.error(`\uB2E8\uC5B4 "${word}" \uAC1C\uBCC4 \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
        results.push({
          word: word.toLowerCase(),
          pronunciation: "",
          meanings: ["\uCC98\uB9AC \uC624\uB958"],
          examples: [],
          similarWords: []
        });
      }
    }
    return results;
  }
  // 지연 함수
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  createWordDetailPrompt(word) {
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4 "${word}"\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
1. \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD)
2. \uD55C\uAE00 \uB73B\uB4E4 (\uC5EC\uB7EC \uAC1C\uC77C \uC218 \uC788\uC74C)
3. \uAC01 \uB73B\uBCC4\uB85C \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED (\uAC01 \uB73B\uB2F9 2-3\uAC1C\uC758 \uC608\uBB38 \uC81C\uACF5)
4. \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4

\uC751\uB2F5 \uD615\uC2DD:
{
  "word": "${word}",
  "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
  "meanings": ["\uB73B1", "\uB73B2", "\uB73B3"],
  "examples": [
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 1",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 2", 
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 3",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
    }
  ],
  "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42", "\uC720\uC0AC\uB2E8\uC5B43"]
}

JSON \uD615\uC2DD\uC73C\uB85C\uB9CC \uC751\uB2F5\uD574\uC8FC\uC138\uC694. \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  createMultipleWordDetailPrompt(words) {
    const wordList = words.join(", ");
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C \uC815\uD655\uD55C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694: ${wordList}

\uC694\uAD6C\uC0AC\uD56D:
- \uAC01 \uB2E8\uC5B4\uC5D0 \uB300\uD574 \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD), \uD55C\uAE00 \uB73B\uB4E4, \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED, \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC744 \uD3EC\uD568
- \uAC01 \uB73B\uBCC4\uB85C 2-3\uAC1C\uC758 \uC608\uBB38\uC744 \uC81C\uACF5\uD574\uC8FC\uC138\uC694
- JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694
- \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uC774\uC911 \uB530\uC634\uD45C\uB85C \uAC10\uC2F8\uC8FC\uC138\uC694
- \uBC30\uC5F4\uACFC \uAC1D\uCCB4\uB294 \uC815\uD655\uD55C JSON \uBB38\uBC95\uC744 \uB530\uB974\uC138\uC694

\uC751\uB2F5 \uD615\uC2DD:
[
  {
    "word": "\uB2E8\uC5B41",
    "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
    "meanings": ["\uB73B1", "\uB73B2"],
    "examples": [
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 1",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 2",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 3",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
      }
    ],
    "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42"]
  }
]

\uC911\uC694: JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uD14D\uC2A4\uD2B8\uB294 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  async callLLM(prompt) {
    try {
      const provider = this.settings.llmProvider;
      switch (provider) {
        case "openai":
          return await this.callOpenAI(prompt);
        case "anthropic":
          return await this.callAnthropic(prompt);
        case "google":
          return await this.callGoogle(prompt);
        default:
          return { success: false, error: "\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 LLM \uC81C\uACF5\uC5C5\uCCB4\uC785\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callOpenAI(prompt) {
    var _a, _b, _c;
    try {
      const response = await retryAPICall(async () => {
        return fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${this.getCurrentApiKey()}`
          },
          body: JSON.stringify({
            model: this.settings.llmModel,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ],
            temperature: 0.3,
            max_tokens: 4e3
          })
        });
      });
      if (!response.ok) {
        const errorData = await response.json();
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "OpenAI API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = await response.json();
      const content = (_c = (_b = data.choices[0]) == null ? void 0 : _b.message) == null ? void 0 : _c.content;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callAnthropic(prompt) {
    var _a, _b;
    if (typeof window === "undefined" || typeof window !== "undefined" && ((_a = window == null ? void 0 : window.process) == null ? void 0 : _a.type) === "renderer") {
      try {
        const response = await axios_default.post(
          "https://api.anthropic.com/v1/messages",
          {
            model: this.settings.llmModel,
            max_tokens: 3e4,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ]
          },
          {
            headers: {
              "Content-Type": "application/json",
              "x-api-key": this.getCurrentApiKey(),
              "anthropic-version": "2023-06-01"
            }
          }
        );
        const content = (_b = response.data.content[0]) == null ? void 0 : _b.text;
        if (!content) {
          return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
        }
        return { success: true, data: content };
      } catch (error) {
        return { success: false, error: error.message };
      }
    } else {
      return {
        success: false,
        error: "Anthropic API\uB294 \uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD\uC5D0\uC11C \uC9C1\uC811 \uD638\uCD9C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uB370\uC2A4\uD06C\uD1B1 \uC571(Obsidian)\uC5D0\uC11C\uB9CC \uB3D9\uC791\uD569\uB2C8\uB2E4."
      };
    }
  }
  async callGoogle(prompt) {
    var _a, _b, _c, _d;
    try {
      const response = await retryAPICall(async () => {
        return fetch(`https://generativelanguage.googleapis.com/v1beta/models/${this.settings.llmModel}:generateContent?key=${this.getCurrentApiKey()}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            contents: [
              {
                parts: [
                  {
                    text: prompt
                  }
                ]
              }
            ],
            generationConfig: {
              temperature: 0.3,
              maxOutputTokens: 4e3
            }
          })
        });
      });
      if (!response.ok) {
        const errorData = await response.json();
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "Google API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = await response.json();
      const content = (_d = (_c = (_b = data.candidates[0]) == null ? void 0 : _b.content) == null ? void 0 : _c.parts[0]) == null ? void 0 : _d.text;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  parseWordDetailResponse(response, originalWord) {
    try {
      const jsonMatch = response.match(/\{[\s\S]*\}/);
      if (!jsonMatch) {
        throw new Error("JSON \uD615\uC2DD\uC758 \uC751\uB2F5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      }
      const jsonData = JSON.parse(jsonMatch[0]);
      const validatedExamples = this.validateExamples(jsonData.examples);
      return {
        word: jsonData.word || originalWord,
        pronunciation: jsonData.pronunciation || "",
        meanings: jsonData.meanings || [],
        examples: validatedExamples,
        similarWords: jsonData.similarWords || []
      };
    } catch (error) {
      return {
        word: originalWord,
        pronunciation: "",
        meanings: ["\uC758\uBBF8\uB97C \uD30C\uC2F1\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
        examples: [],
        similarWords: []
      };
    }
  }
  // 예문 데이터 검증 및 정리
  validateExamples(examples) {
    if (!Array.isArray(examples)) {
      return [];
    }
    const validatedExamples = [];
    for (const example of examples) {
      if (example && typeof example === "object") {
        const english = example.english || example.english_text || example.text || "";
        const korean = example.korean || example.korean_text || example.translation || "";
        if (english.trim() && korean.trim()) {
          validatedExamples.push({
            english: english.trim(),
            korean: korean.trim()
          });
        }
      }
    }
    return validatedExamples;
  }
  parseMultipleWordDetailResponse(response, originalWords) {
    try {
      let jsonMatch = response.match(/\[[\s\S]*\]/);
      if (!jsonMatch) {
        const objectMatches = response.match(/\{[^{}]*"word"[^{}]*\}/g);
        if (objectMatches && objectMatches.length > 0) {
          const jsonString = "[" + objectMatches.join(",") + "]";
          try {
            const jsonData2 = JSON.parse(jsonString);
            if (Array.isArray(jsonData2)) {
              return this.processJsonData(jsonData2, originalWords);
            }
          } catch (e) {
          }
        }
        const lastCompleteMatch = response.match(/\[[\s\S]*\}(?=\s*$)/);
        if (lastCompleteMatch) {
          jsonMatch = [lastCompleteMatch[0] + "]"];
        } else {
          throw new Error("JSON \uBC30\uC5F4\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        }
      }
      let jsonData;
      let parsedLength = 0;
      try {
        jsonData = JSON.parse(jsonMatch[0]);
      } catch (parseError) {
        const results = this.parseIncrementalJson(response);
        if (results.length > 0) {
          return results;
        }
        const fixedJson = this.fixJsonString(jsonMatch[0]);
        try {
          jsonData = JSON.parse(fixedJson);
        } catch (secondError) {
          throw new Error("JSON \uD30C\uC2F1 \uBC0F \uBCF5\uAD6C \uC2E4\uD328");
        }
      }
      if (!Array.isArray(jsonData)) {
        throw new Error("\uC751\uB2F5\uC774 \uBC30\uC5F4 \uD615\uC2DD\uC774 \uC544\uB2D9\uB2C8\uB2E4.");
      }
      return this.processJsonData(jsonData, originalWords);
    } catch (error) {
      console.error("\uC5EC\uB7EC \uB2E8\uC5B4 \uC751\uB2F5 \uD30C\uC2F1 \uC624\uB958:", error);
      console.error("\uC6D0\uBCF8 \uC751\uB2F5:", response);
      return originalWords.map((word) => ({
        word: word.toLowerCase(),
        pronunciation: "",
        meanings: [],
        examples: [],
        similarWords: []
      }));
    }
  }
  // 점진적 JSON 파싱 - 완전한 객체들만 파싱
  parseIncrementalJson(response) {
    const results = [];
    const objectRegex = /\{[^{}]*"word"[^{}]*"pronunciation"[^{}]*"meanings"[^{}]*"examples"[^{}]*"similarWords"[^{}]*\}/g;
    let match;
    while ((match = objectRegex.exec(response)) !== null) {
      try {
        const objectData = JSON.parse(match[0]);
        if (objectData && objectData.word) {
          const validatedExamples = this.validateExamples(objectData.examples);
          const wordData = {
            word: objectData.word.toLowerCase(),
            pronunciation: objectData.pronunciation || "",
            meanings: Array.isArray(objectData.meanings) ? objectData.meanings : [],
            examples: validatedExamples,
            similarWords: Array.isArray(objectData.similarWords) ? objectData.similarWords : []
          };
          results.push(wordData);
        }
      } catch (e) {
        continue;
      }
    }
    return results;
  }
  // WordDetailData를 WordData로 변환하는 메서드
  convertToWordData(wordDetail) {
    return {
      word: wordDetail.word,
      pronunciation: wordDetail.pronunciation,
      meanings: wordDetail.meanings,
      similarWords: wordDetail.similarWords,
      examples: wordDetail.examples
    };
  }
  // JSON 데이터 처리
  processJsonData(jsonData, originalWords) {
    const results = [];
    for (const item of jsonData) {
      if (item && typeof item === "object" && item.word) {
        const validatedExamples = this.validateExamples(item.examples);
        const wordData = {
          word: item.word.toLowerCase(),
          pronunciation: item.pronunciation || "",
          meanings: Array.isArray(item.meanings) ? item.meanings : [],
          examples: validatedExamples,
          similarWords: Array.isArray(item.similarWords) ? item.similarWords : []
        };
        results.push(wordData);
      }
    }
    return results;
  }
  // JSON 문자열 복구
  fixJsonString(jsonString) {
    let fixed = jsonString;
    const lastCompleteObject = fixed.match(/.*\}(?=,?\s*$)/);
    if (lastCompleteObject) {
      fixed = lastCompleteObject[0] + "]";
    }
    fixed = fixed.replace(/,\s*,/g, ",");
    fixed = fixed.replace(/,\s*\]/g, "]");
    fixed = fixed.replace(/,\s*\}/g, "}");
    fixed = fixed.replace(/(?<!\\)"/g, (match, offset) => {
      const before = fixed.substring(0, offset);
      const quoteCount = (before.match(/"/g) || []).length;
      return quoteCount % 2 === 0 ? match : '\\"';
    });
    return fixed;
  }
};

// src/features/settings/ui/settings.ts
var DEFAULT_SETTINGS = {
  apiKey: "",
  defaultLanguage: "ko",
  showSimilarWords: true,
  showExamples: true,
  examplesCount: 3,
  openaiApiKey: "",
  anthropicApiKey: "",
  googleApiKey: "",
  llmProvider: "openai",
  llmModel: "gemini-1.0-pro-latest",
  enableAdvancedFeatures: false,
  reviewModalHeight: 85,
  vocabularyFolderPath: "Vocabulary",
  ttsEnabled: true,
  ttsProvider: "chatterbox",
  ttsVoice: "alloy",
  ttsPlaybackSpeed: 1,
  ttsAutoPlay: false,
  // Chatterbox TTS 기본값
  chatterboxApiUrl: "http://localhost:4123",
  // 경고: HTTP는 보안에 취약합니다. 가능하면 HTTPS를 사용하세요.
  chatterboxExaggeration: 0.7,
  chatterboxCfgWeight: 0.4,
  chatterboxTemperature: 0.9,
  // Google Cloud TTS 기본값
  googleCloudTTSApiKey: "",
  googleCloudTTSLanguageCode: "en-US",
  googleCloudTTSSpeakingRate: 1,
  googleCloudTTSPitch: 0
};
var VocabularySettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uD50C\uB7EC\uADF8\uC778 \uC124\uC815" });
    this.createBasicSettings(containerEl);
    this.createLLMSettings(containerEl);
    this.createTTSSettings(containerEl);
    this.createAdvancedSettings(containerEl);
  }
  createBasicSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uAE30\uBCF8 \uC124\uC815" });
    new import_obsidian.Setting(containerEl).setName("\uAE30\uBCF8 \uC5B8\uC5B4").setDesc("\uB2E8\uC5B4 \uB73B\uC744 \uD45C\uC2DC\uD560 \uC5B8\uC5B4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("ko", "\uD55C\uAD6D\uC5B4").addOption("en", "English").addOption("ja", "\u65E5\u672C\u8A9E").setValue(this.plugin.settings.defaultLanguage).onChange(async (value) => {
      this.plugin.settings.defaultLanguage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC720\uC0AC\uD55C \uB2E8\uC5B4 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showSimilarWords).onChange(async (value) => {
      this.plugin.settings.showSimilarWords = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC608\uBB38 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC608\uBB38\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showExamples).onChange(async (value) => {
      this.plugin.settings.showExamples = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC608\uBB38 \uAC1C\uC218").setDesc("\uD45C\uC2DC\uD560 \uC608\uBB38\uC758 \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => slider.setLimits(1, 10, 1).setValue(this.plugin.settings.examplesCount).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.examplesCount = value;
      await this.plugin.saveSettings();
    }));
  }
  createLLMSettings(containerEl) {
    containerEl.createEl("h3", { text: "LLM API \uC124\uC815" });
    new import_obsidian.Setting(containerEl).setName("\uACE0\uAE09 \uAE30\uB2A5 \uD65C\uC131\uD654").setDesc("LLM API\uB97C \uC0AC\uC6A9\uD55C \uACE0\uAE09 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableAdvancedFeatures).onChange(async (value) => {
      this.plugin.settings.enableAdvancedFeatures = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("LLM \uC81C\uACF5\uC5C5\uCCB4").setDesc("\uC0AC\uC6A9\uD560 LLM API \uC81C\uACF5\uC5C5\uCCB4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("openai", "OpenAI (GPT)").addOption("anthropic", "Anthropic (Claude)").addOption("google", "Google (Gemini)").setValue(this.plugin.settings.llmProvider).onChange(async (value) => {
      this.plugin.settings.llmProvider = value;
      if (value === "openai") {
        this.plugin.settings.llmModel = "gpt-4.1";
      } else if (value === "anthropic") {
        this.plugin.settings.llmModel = "claude-3-5-sonnet";
      } else if (value === "google") {
        this.plugin.settings.llmModel = "gemini-2.5-flash";
      }
      await this.plugin.saveSettings();
      this.display();
    }));
    this.createModelSelection(containerEl);
    this.createApiKeySettings(containerEl);
    new import_obsidian.Setting(containerEl).setName("API \uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setDesc("\uD604\uC7AC \uC120\uD0DD\uB41C \uC81C\uACF5\uC5C5\uCCB4\uC758 API \uD0A4\uAC00 \uC62C\uBC14\uB974\uAC8C \uC124\uC815\uB418\uC5C8\uB294\uC9C0 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4.").addButton((button) => button.setButtonText("\uD14C\uC2A4\uD2B8").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        const llmService = new LLMService(this.plugin.settings);
        const result = await llmService.testConnection();
        if (result.success) {
          new import_obsidian.Notice("\u2705 API \uC5F0\uACB0 \uC131\uACF5!");
        } else {
          new import_obsidian.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + result.error);
        }
      } catch (error) {
        new import_obsidian.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + error.message);
      } finally {
        button.setButtonText("\uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
  }
  createModelSelection(containerEl) {
    new import_obsidian.Setting(containerEl).setName("API \uBAA8\uB378").setDesc("\uC0AC\uC6A9\uD560 LLM \uBAA8\uB378\uC744 \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => {
      const provider = this.plugin.settings.llmProvider;
      if (provider === "openai") {
        dropdown.addOption("gpt-4.1", "GPT-4.1").addOption("gpt-4o", "GPT-4o").addOption("gpt-4o-mini", "GPT-4o Mini").addOption("gpt-4.1-long", "GPT-4.1 (Long Context)").addOption("gpt-4.5-preview", "GPT-4.5 Preview").addOption("gpt-4.5-preview-2", "GPT-4.5 Preview 2");
      } else if (provider === "anthropic") {
        dropdown.addOption("claude-3-5-sonnet", "Claude 3.5 Sonnet").addOption("claude-3-5-haiku", "Claude 3.5 Haiku").addOption("claude-3-5-opus", "Claude 3.5 Opus").addOption("claude-3-7-sonnet", "Claude 3.7 Sonnet").addOption("claude-3-7-haiku", "Claude 3.7 Haiku").addOption("claude-3-7-opus", "Claude 3.7 Opus").addOption("claude-3-5-flash", "Claude 3.5 Flash");
      } else if (provider === "google") {
        dropdown.addOption("gemini-1.5-pro-latest", "Gemini 1.5 Pro").addOption("gemini-2.5-flash", "Gemini 2.5 Flash").addOption("gemini-2.5-pro", "Gemini 2.5 Pro").addOption("gemini-1.5-flash-latest", "Gemini 1.5 Flash");
      }
      return dropdown.setValue(this.plugin.settings.llmModel).onChange(async (value) => {
        this.plugin.settings.llmModel = value;
        await this.plugin.saveSettings();
      });
    });
  }
  createApiKeySettings(containerEl) {
    new import_obsidian.Setting(containerEl).setName("OpenAI API \uD0A4").setDesc("OpenAI API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.openaiApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.openaiApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian.Setting(containerEl).setName("Anthropic API \uD0A4").setDesc("Anthropic API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-ant-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.anthropicApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-ant-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.anthropicApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian.Setting(containerEl).setName("Google API \uD0A4").setDesc("Google API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").addText((text) => {
      const currentKey = this.plugin.settings.googleApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
  }
  createAdvancedSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uACE0\uAE09 \uC124\uC815" });
    const folders = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian.TFolder);
    new import_obsidian.Setting(containerEl).setName("\uB2E8\uC5B4\uC7A5 \uC800\uC7A5 \uD3F4\uB354").setDesc("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C\uB4E4\uC774 \uC800\uC7A5\uB420 \uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: Vocabulary)").addDropdown((dropdown) => {
      folders.forEach((folder) => {
        dropdown.addOption(folder.path, folder.path);
      });
      dropdown.setValue(this.plugin.settings.vocabularyFolderPath);
      dropdown.onChange(async (value) => {
        this.plugin.settings.vocabularyFolderPath = value;
        await this.plugin.saveSettings();
        if (this.plugin.databaseManager) {
          this.plugin.databaseManager.updateVocabularyFolderPath(value);
        }
      });
      return dropdown;
    });
    new import_obsidian.Setting(containerEl).setName("\uBCF5\uC2B5 \uD654\uBA74 \uB192\uC774").setDesc("\uBCF5\uC2B5 \uBAA8\uB2EC\uC758 \uB192\uC774\uB97C \uD654\uBA74 \uB192\uC774\uC758 \uBC31\uBD84\uC728\uB85C \uC124\uC815\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: 85%)").addSlider((slider) => slider.setLimits(50, 95, 5).setValue(this.plugin.settings.reviewModalHeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.reviewModalHeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC77C\uC77C \uD559\uC2B5 \uBAA9\uD45C").setDesc("\uD558\uB8E8\uC5D0 \uD559\uC2B5\uD560 \uB2E8\uC5B4\uC758 \uBAA9\uD45C \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(5, 50, 5).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.dailyGoal) || 10).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ dailyGoal: value }));
      });
    });
    new import_obsidian.Setting(containerEl).setName("\uBCF5\uC2B5 \uAC04\uACA9 (\uC77C)").setDesc("\uB2E8\uC5B4\uB97C \uB2E4\uC2DC \uBCF5\uC2B5\uD560 \uAC04\uACA9\uC744 \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(1, 30, 1).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.reviewInterval) || 1).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ reviewInterval: value }));
      });
    });
  }
  createTTSSettings(containerEl) {
    containerEl.createEl("h3", { text: "TTS (\uC74C\uC131 \uC77D\uAE30) \uC124\uC815" });
    const ttsToggleSetting = new import_obsidian.Setting(containerEl).setName("TTS \uD65C\uC131\uD654").setDesc("\uB2E8\uC5B4\uC640 \uC608\uBB38\uC744 \uC74C\uC131\uC73C\uB85C \uC77D\uC5B4\uC8FC\uB294 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsEnabled).onChange(async (value) => {
      this.plugin.settings.ttsEnabled = value;
      await this.plugin.saveSettings();
      this.updateTTSSettingsVisibility();
    }));
    new import_obsidian.Setting(containerEl).setName("TTS \uC81C\uACF5\uC790").setDesc("\uC0AC\uC6A9\uD560 TTS \uC11C\uBE44\uC2A4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").setClass("tts-provider-setting").addDropdown((dropdown) => dropdown.addOption("chatterbox", "Chatterbox TTS (\uB85C\uCEEC)").addOption("google-cloud", "Google Cloud Text-to-Speech").setValue(this.plugin.settings.ttsProvider).onChange(async (value) => {
      this.plugin.settings.ttsProvider = value;
      await this.plugin.saveSettings();
      this.updateTTSProviderSettings();
    }));
    this.createChatterboxTTSSettings(containerEl);
    this.createGoogleCloudTTSSettings(containerEl);
    const autoPlaySetting = new import_obsidian.Setting(containerEl).setName("\uC790\uB3D9 \uC7AC\uC0DD").setDesc("\uB2E8\uC5B4 \uCE74\uB4DC\uAC00 \uD45C\uC2DC\uB420 \uB54C \uC790\uB3D9\uC73C\uB85C \uB2E8\uC5B4\uB97C \uC77D\uC5B4\uC90D\uB2C8\uB2E4.").setClass("tts-autoplay-setting").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsAutoPlay).onChange(async (value) => {
      this.plugin.settings.ttsAutoPlay = value;
      await this.plugin.saveSettings();
    }));
    this.updateTTSSettingsVisibility();
    this.updateTTSProviderSettings();
  }
  populateChatterboxVoiceDropdown(dropdown) {
    const chatterboxVoices = [
      { value: "alloy", name: "Alloy (\uC911\uC131\uC801)" },
      { value: "echo", name: "Echo (\uB0A8\uC131)" },
      { value: "fable", name: "Fable (\uC601\uAD6D\uC2DD)" },
      { value: "onyx", name: "Onyx (\uAE4A\uC740 \uB0A8\uC131)" },
      { value: "nova", name: "Nova (\uC5EC\uC131)" },
      { value: "shimmer", name: "Shimmer (\uBD80\uB4DC\uB7EC\uC6B4 \uC5EC\uC131)" },
      { value: "custom", name: "Custom (\uC0AC\uC6A9\uC790 \uC815\uC758)" }
    ];
    chatterboxVoices.forEach((option) => {
      dropdown.addOption(option.value, option.name);
    });
    try {
      const voices = speechSynthesis.getVoices();
      const englishVoices = voices.filter(
        (voice) => voice.lang.startsWith("en-") && !voice.lang.includes("ko") && !chatterboxVoices.some((opt) => opt.value === voice.name)
      );
      if (englishVoices.length > 0) {
        dropdown.addOption("---", "--- \uC2DC\uC2A4\uD15C \uC74C\uC131 ---");
        englishVoices.forEach((voice) => {
          const displayName = `${voice.name} (${voice.lang})`;
          dropdown.addOption(voice.name, displayName);
        });
      }
    } catch (error) {
      console.warn("\uC74C\uC131 \uBAA9\uB85D\uC744 \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
    }
  }
  updateTTSSettingsVisibility() {
    const isEnabled = this.plugin.settings.ttsEnabled;
    const allTtsSettings = this.containerEl.querySelectorAll(
      ".tts-provider-setting, .chatterbox-api-url-setting, .chatterbox-voice-setting, .chatterbox-exaggeration-setting, .chatterbox-cfg-setting, .chatterbox-temperature-setting, .google-cloud-tts-guide, .google-cloud-api-key-setting, .google-cloud-language-setting, .google-cloud-voice-setting, .google-cloud-speaking-rate-setting, .google-cloud-pitch-setting, .tts-autoplay-setting"
    );
    allTtsSettings.forEach((setting) => {
      const element = setting;
      if (isEnabled) {
        element.style.opacity = "1";
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        const inputs = element.querySelectorAll('input[type="text"]');
        buttons.forEach((btn) => btn.disabled = false);
        dropdowns.forEach((dd) => dd.disabled = false);
        sliders.forEach((slider) => slider.disabled = false);
        toggles.forEach((toggle) => toggle.disabled = false);
        inputs.forEach((input) => input.disabled = false);
      } else {
        element.style.opacity = "0.5";
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        const inputs = element.querySelectorAll('input[type="text"]');
        buttons.forEach((btn) => btn.disabled = true);
        dropdowns.forEach((dd) => dd.disabled = true);
        sliders.forEach((slider) => slider.disabled = true);
        toggles.forEach((toggle) => toggle.disabled = true);
        inputs.forEach((input) => input.disabled = true);
      }
    });
    if (isEnabled) {
      this.updateTTSProviderSettings();
    }
  }
  async testChatterboxConnection() {
    try {
      const response = await fetch(`${this.plugin.settings.chatterboxApiUrl}/v1/audio/speech`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: "Connection test",
          voice: "alloy"
        })
      });
      if (response.ok) {
        new import_obsidian.Notice("\u2705 Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0 \uC131\uACF5!");
      } else {
        throw new Error(`\uC11C\uBC84 \uC751\uB2F5 \uC624\uB958: ${response.status}`);
      }
    } catch (error) {
      console.error("Chatterbox TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      new import_obsidian.Notice("\u274C Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0 \uC2E4\uD328. \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      throw error;
    }
  }
  createChatterboxTTSSettings(containerEl) {
    new import_obsidian.Setting(containerEl).setName("Chatterbox TTS API URL").setDesc("Chatterbox TTS \uC11C\uBC84\uC758 URL\uC744 \uC785\uB825\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: http://localhost:4123)").setClass("chatterbox-api-url-setting").addText((text) => text.setPlaceholder("http://localhost:4123").setValue(this.plugin.settings.chatterboxApiUrl).onChange(async (value) => {
      this.plugin.settings.chatterboxApiUrl = value || "http://localhost:4123";
      await this.plugin.saveSettings();
    })).addButton((button) => button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setTooltip("Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0\uC744 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        await this.testChatterboxConnection();
      } finally {
        button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
    new import_obsidian.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("Chatterbox TTS\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").setClass("chatterbox-voice-setting").addDropdown((dropdown) => {
      this.populateChatterboxVoiceDropdown(dropdown);
      return dropdown.setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
        this.plugin.settings.ttsVoice = value;
        await this.plugin.saveSettings();
      });
    }).addButton((button) => button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30").setTooltip("\uC120\uD0DD\uD55C \uC74C\uC131\uC73C\uB85C \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uB97C \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playChatterboxVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
        new import_obsidian.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30");
        button.setDisabled(false);
      }
    }));
    new import_obsidian.Setting(containerEl).setName("\uAC10\uC815 \uD45C\uD604 \uAC15\uB3C4 (Exaggeration)").setDesc("\uC74C\uC131\uC758 \uAC10\uC815 \uD45C\uD604 \uAC15\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.25 = \uC57D\uD568, 2.0 = \uAC15\uD568)").setClass("chatterbox-exaggeration-setting").addSlider((slider) => slider.setLimits(0.25, 2, 0.05).setValue(this.plugin.settings.chatterboxExaggeration).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxExaggeration = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("CFG \uAC00\uC911\uCE58 (CFG Weight)").setDesc("\uC74C\uC131 \uC0DD\uC131\uC758 \uAC00\uC774\uB358\uC2A4 \uAC15\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.0 = \uC57D\uD568, 1.0 = \uAC15\uD568)").setClass("chatterbox-cfg-setting").addSlider((slider) => slider.setLimits(0, 1, 0.05).setValue(this.plugin.settings.chatterboxCfgWeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxCfgWeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC628\uB3C4 (Temperature)").setDesc("\uC74C\uC131 \uC0DD\uC131\uC758 \uCC3D\uC758\uC131\uC744 \uC870\uC808\uD569\uB2C8\uB2E4. (0.05 = \uC77C\uAD00\uC131, 5.0 = \uCC3D\uC758\uC131)").setClass("chatterbox-temperature-setting").addSlider((slider) => slider.setLimits(0.05, 5, 0.05).setValue(this.plugin.settings.chatterboxTemperature).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxTemperature = value;
      await this.plugin.saveSettings();
    }));
  }
  createGoogleCloudTTSSettings(containerEl) {
    const guideEl = containerEl.createEl("div", {
      cls: "google-cloud-tts-guide google-cloud-api-key-setting",
      attr: { style: "margin-bottom: 15px; padding: 10px; background-color: var(--background-secondary); border-radius: 5px; border-left: 3px solid var(--interactive-accent);" }
    });
    guideEl.createEl("h4", { text: "\u{1F527} Google Cloud TTS \uC124\uC815 \uAC00\uC774\uB4DC", attr: { style: "margin: 0 0 10px 0; color: var(--interactive-accent);" } });
    const stepsList = guideEl.createEl("ol", { attr: { style: "margin: 0; padding-left: 20px; line-height: 1.6;" } });
    const step1 = stepsList.createEl("li");
    step1.innerHTML = "<strong>Google Cloud Console \uC811\uC18D:</strong> ";
    const step1Link = step1.createEl("a", {
      text: "console.cloud.google.com",
      href: "https://console.cloud.google.com",
      attr: { style: "color: var(--interactive-accent);" }
    });
    step1Link.addEventListener("click", () => {
      window.open("https://console.cloud.google.com", "_blank");
    });
    const step2 = stepsList.createEl("li");
    step2.innerHTML = "<strong>\uD504\uB85C\uC81D\uD2B8 \uC120\uD0DD/\uC0DD\uC131:</strong> \uAE30\uC874 \uD504\uB85C\uC81D\uD2B8\uB97C \uC120\uD0DD\uD558\uAC70\uB098 \uC0C8 \uD504\uB85C\uC81D\uD2B8\uB97C \uC0DD\uC131\uD569\uB2C8\uB2E4.";
    const step3 = stepsList.createEl("li");
    step3.innerHTML = "<strong>Text-to-Speech API \uD65C\uC131\uD654:</strong> ";
    const step3Link = step3.createEl("a", {
      text: "API \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uD65C\uC131\uD654",
      href: "https://console.cloud.google.com/apis/library/texttospeech.googleapis.com",
      attr: { style: "color: var(--interactive-accent);" }
    });
    step3Link.addEventListener("click", () => {
      window.open("https://console.cloud.google.com/apis/library/texttospeech.googleapis.com", "_blank");
    });
    const step4 = stepsList.createEl("li");
    step4.innerHTML = "<strong>API \uD0A4 \uC0DD\uC131:</strong> \uC0AC\uC6A9\uC790 \uC778\uC99D \uC815\uBCF4 > API \uD0A4 > \uC0C8 API \uD0A4 \uC0DD\uC131";
    const step5 = stepsList.createEl("li");
    step5.innerHTML = "<strong>API \uD0A4 \uC81C\uD55C \uC124\uC815 (\uAD8C\uC7A5):</strong> \uD0A4 \uC81C\uD55C > API \uC81C\uD55C > Cloud Text-to-Speech API \uC120\uD0DD";
    const warningEl = guideEl.createEl("div", {
      attr: { style: "margin-top: 10px; padding: 8px; background-color: var(--background-modifier-error-rgb); border-radius: 3px; font-size: 0.9em;" }
    });
    warningEl.innerHTML = '\u26A0\uFE0F <strong>\uC911\uC694:</strong> Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC740 \uACBD\uC6B0 "API_KEY_SERVICE_BLOCKED" \uC624\uB958\uAC00 \uBC1C\uC0DD\uD569\uB2C8\uB2E4.';
    new import_obsidian.Setting(containerEl).setName("Google Cloud TTS API \uD0A4").setDesc("Google Cloud Text-to-Speech API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").setClass("google-cloud-api-key-setting").addText((text) => {
      const currentKey = this.plugin.settings.googleCloudTTSApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleCloudTTSApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    }).addButton((button) => button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setTooltip("Google Cloud TTS API \uC5F0\uACB0\uC744 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        await this.testGoogleCloudConnection();
      } finally {
        button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
    new import_obsidian.Setting(containerEl).setName("\uC5B8\uC5B4 \uCF54\uB4DC").setDesc("\uC0AC\uC6A9\uD560 \uC5B8\uC5B4 \uCF54\uB4DC\uB97C \uC120\uD0DD\uD558\uC138\uC694.").setClass("google-cloud-language-setting").addDropdown((dropdown) => dropdown.addOption("en-US", "English (US)").addOption("en-GB", "English (UK)").addOption("en-AU", "English (AU)").addOption("en-IN", "English (India)").setValue(this.plugin.settings.googleCloudTTSLanguageCode).onChange(async (value) => {
      this.plugin.settings.googleCloudTTSLanguageCode = value;
      await this.plugin.saveSettings();
      this.updateGoogleCloudVoices();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("Google Cloud TTS\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").setClass("google-cloud-voice-setting").addDropdown((dropdown) => {
      this.populateGoogleCloudVoiceDropdown(dropdown);
      return dropdown.setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
        this.plugin.settings.ttsVoice = value;
        await this.plugin.saveSettings();
      });
    }).addButton((button) => button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30").setTooltip("\uC120\uD0DD\uD55C \uC74C\uC131\uC73C\uB85C \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uB97C \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playGoogleCloudVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
        new import_obsidian.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30");
        button.setDisabled(false);
      }
    }));
    new import_obsidian.Setting(containerEl).setName("\uB9D0\uD558\uAE30 \uC18D\uB3C4 (Speaking Rate)").setDesc("\uC74C\uC131\uC758 \uB9D0\uD558\uAE30 \uC18D\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.25 = \uB290\uB9BC, 4.0 = \uBE60\uB984)").setClass("google-cloud-speaking-rate-setting").addSlider((slider) => slider.setLimits(0.25, 4, 0.25).setValue(this.plugin.settings.googleCloudTTSSpeakingRate).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.googleCloudTTSSpeakingRate = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC74C\uC131 \uB192\uB0AE\uC774 (Pitch)").setDesc("\uC74C\uC131\uC758 \uB192\uB0AE\uC774\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (-20.0 = \uB0AE\uC74C, 20.0 = \uB192\uC74C)").setClass("google-cloud-pitch-setting").addSlider((slider) => slider.setLimits(-20, 20, 1).setValue(this.plugin.settings.googleCloudTTSPitch).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.googleCloudTTSPitch = value;
      await this.plugin.saveSettings();
    }));
  }
  populateGoogleCloudVoiceDropdown(dropdown) {
    const languageCode = this.plugin.settings.googleCloudTTSLanguageCode;
    if (languageCode === "en-US") {
      dropdown.addOption("en-US-Journey-D", "Journey-D (Male)").addOption("en-US-Journey-F", "Journey-F (Female)").addOption("en-US-Journey-O", "Journey-O (Male)").addOption("en-US-Neural2-A", "Neural2-A (Male)").addOption("en-US-Neural2-C", "Neural2-C (Female)").addOption("en-US-Neural2-D", "Neural2-D (Male)").addOption("en-US-Neural2-E", "Neural2-E (Female)").addOption("en-US-Neural2-F", "Neural2-F (Female)").addOption("en-US-Neural2-G", "Neural2-G (Female)").addOption("en-US-Neural2-H", "Neural2-H (Female)").addOption("en-US-Neural2-I", "Neural2-I (Male)").addOption("en-US-Neural2-J", "Neural2-J (Male)");
    } else if (languageCode === "en-GB") {
      dropdown.addOption("en-GB-Neural2-A", "Neural2-A (Female)").addOption("en-GB-Neural2-B", "Neural2-B (Male)").addOption("en-GB-Neural2-C", "Neural2-C (Female)").addOption("en-GB-Neural2-D", "Neural2-D (Male)").addOption("en-GB-Neural2-F", "Neural2-F (Female)");
    } else if (languageCode === "en-AU") {
      dropdown.addOption("en-AU-Neural2-A", "Neural2-A (Female)").addOption("en-AU-Neural2-B", "Neural2-B (Male)").addOption("en-AU-Neural2-C", "Neural2-C (Female)").addOption("en-AU-Neural2-D", "Neural2-D (Male)");
    } else {
      dropdown.addOption("en-US-Journey-F", "Journey-F (Female)");
    }
  }
  updateGoogleCloudVoices() {
    const voiceDropdown = this.containerEl.querySelector(".google-cloud-voice-setting select");
    if (voiceDropdown) {
      voiceDropdown.innerHTML = "";
      const dropdown = { addOption: (value, text) => {
        const option = document.createElement("option");
        option.value = value;
        option.text = text;
        voiceDropdown.appendChild(option);
      } };
      this.populateGoogleCloudVoiceDropdown(dropdown);
      const languageCode = this.plugin.settings.googleCloudTTSLanguageCode;
      let defaultVoice = "en-US-Journey-F";
      if (languageCode === "en-GB")
        defaultVoice = "en-GB-Neural2-A";
      else if (languageCode === "en-AU")
        defaultVoice = "en-AU-Neural2-A";
      voiceDropdown.value = defaultVoice;
      this.plugin.settings.ttsVoice = defaultVoice;
      this.plugin.saveSettings();
    }
  }
  updateTTSProviderSettings() {
    const provider = this.plugin.settings.ttsProvider;
    const chatterboxSettings = this.containerEl.querySelectorAll(".chatterbox-api-url-setting, .chatterbox-voice-setting, .chatterbox-exaggeration-setting, .chatterbox-cfg-setting, .chatterbox-temperature-setting");
    const googleCloudSettings = this.containerEl.querySelectorAll(".google-cloud-tts-guide, .google-cloud-api-key-setting, .google-cloud-language-setting, .google-cloud-voice-setting, .google-cloud-speaking-rate-setting, .google-cloud-pitch-setting");
    chatterboxSettings.forEach((setting) => {
      setting.style.display = "none";
    });
    googleCloudSettings.forEach((setting) => {
      setting.style.display = "none";
    });
    if (provider === "chatterbox") {
      chatterboxSettings.forEach((setting) => {
        setting.style.display = "";
      });
    } else if (provider === "google-cloud") {
      googleCloudSettings.forEach((setting) => {
        setting.style.display = "";
      });
    }
  }
  async playChatterboxVoicePreview() {
    try {
      const sampleTexts = [
        "Hello, this is a sample voice preview.",
        "Welcome to English vocabulary learning.",
        "This voice will help you learn pronunciation.",
        "Beautiful words make beautiful sentences."
      ];
      const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
      const response = await fetch(`${this.plugin.settings.chatterboxApiUrl}/v1/audio/speech`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: randomText,
          voice: this.plugin.settings.ttsVoice,
          exaggeration: this.plugin.settings.chatterboxExaggeration,
          cfg_weight: this.plugin.settings.chatterboxCfgWeight,
          temperature: this.plugin.settings.chatterboxTemperature
        })
      });
      if (!response.ok) {
        throw new Error(`Chatterbox TTS API \uC624\uB958: ${response.status} ${response.statusText}`);
      }
      const audioBlob = await response.blob();
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      return new Promise((resolve, reject) => {
        audio.onended = () => {
          URL.revokeObjectURL(audioUrl);
          new import_obsidian.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC644\uB8CC!");
          resolve();
        };
        audio.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.play().catch(reject);
      });
    } catch (error) {
      console.error("Chatterbox TTS \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
      new import_obsidian.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. Chatterbox TTS \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      throw error;
    }
  }
  async playGoogleCloudVoicePreview() {
    try {
      const sampleTexts = [
        "Hello, this is a sample voice preview.",
        "Welcome to English vocabulary learning.",
        "This voice will help you learn pronunciation.",
        "Beautiful words make beautiful sentences."
      ];
      const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
      const apiKey = decryptApiKey(this.plugin.settings.googleCloudTTSApiKey);
      if (!apiKey) {
        throw new Error("Google Cloud TTS API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
      }
      const requestBody = {
        input: { text: randomText },
        voice: {
          languageCode: this.plugin.settings.googleCloudTTSLanguageCode,
          name: this.plugin.settings.ttsVoice
        },
        audioConfig: {
          audioEncoding: "MP3",
          speakingRate: this.plugin.settings.googleCloudTTSSpeakingRate,
          pitch: this.plugin.settings.googleCloudTTSPitch
        }
      };
      const response = await fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(requestBody)
      });
      if (!response.ok) {
        const errorData = await response.json().catch(() => ({}));
        const detailedError = this.getDetailedGoogleCloudError(response.status, errorData);
        throw new Error(detailedError);
      }
      const data = await response.json();
      const audioBlob = this.base64ToBlob(data.audioContent, "audio/mp3");
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      return new Promise((resolve, reject) => {
        audio.onended = () => {
          URL.revokeObjectURL(audioUrl);
          new import_obsidian.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC644\uB8CC!");
          resolve();
        };
        audio.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.play().catch(reject);
      });
    } catch (error) {
      console.error("Google Cloud TTS \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
      if (error.message.includes("API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4")) {
        new import_obsidian.Notice(`\u274C ${error.message}`);
      } else if (error.message.includes("API \uD0A4")) {
        new import_obsidian.Notice(`\u274C ${error.message}`);
      } else {
        new import_obsidian.Notice("\u274C \uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uC640 \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      }
      throw error;
    }
  }
  base64ToBlob(base64, mimeType) {
    const byteCharacters = atob(base64);
    const byteNumbers = new Array(byteCharacters.length);
    for (let i = 0; i < byteCharacters.length; i++) {
      byteNumbers[i] = byteCharacters.charCodeAt(i);
    }
    const byteArray = new Uint8Array(byteNumbers);
    return new Blob([byteArray], { type: mimeType });
  }
  async testGoogleCloudConnection() {
    try {
      const apiKey = decryptApiKey(this.plugin.settings.googleCloudTTSApiKey);
      if (!apiKey) {
        new import_obsidian.Notice("\u274C Google Cloud TTS API \uD0A4\uB97C \uBA3C\uC800 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
        return;
      }
      const response = await fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: { text: "Connection test" },
          voice: {
            languageCode: "en-US",
            name: "en-US-Journey-F"
          },
          audioConfig: {
            audioEncoding: "MP3"
          }
        })
      });
      if (response.ok) {
        new import_obsidian.Notice("\u2705 Google Cloud TTS API \uC5F0\uACB0 \uC131\uACF5!");
      } else {
        const errorData = await response.json().catch(() => ({}));
        const detailedError = this.getDetailedGoogleCloudError(response.status, errorData);
        new import_obsidian.Notice(`\u274C ${detailedError}`);
      }
    } catch (error) {
      console.error("Google Cloud TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      if (error.message.includes("\uB124\uD2B8\uC6CC\uD06C") || error.message.includes("fetch")) {
        new import_obsidian.Notice("\u274C \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      } else {
        new import_obsidian.Notice(`\u274C ${error.message}`);
      }
    }
  }
  getDetailedGoogleCloudError(status, errorData) {
    var _a, _b, _c, _d;
    if (errorData == null ? void 0 : errorData.error) {
      const error = errorData.error;
      if (status === 403 && ((_a = error.details) == null ? void 0 : _a.some(
        (detail) => {
          var _a2;
          return detail.reason === "API_KEY_SERVICE_BLOCKED" || ((_a2 = detail["@type"]) == null ? void 0 : _a2.includes("ErrorInfo")) && detail.reason === "API_KEY_SERVICE_BLOCKED";
        }
      ))) {
        return "Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC704\uC758 \uAC00\uC774\uB4DC\uB97C \uCC38\uACE0\uD558\uC5EC API\uB97C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 403) {
        if (((_b = error.message) == null ? void 0 : _b.includes("API key not valid")) || error.code === "INVALID_ARGUMENT") {
          return "API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uD0A4\uB97C \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        if (((_c = error.message) == null ? void 0 : _c.includes("quota")) || ((_d = error.message) == null ? void 0 : _d.includes("QUOTA_EXCEEDED"))) {
          return "API \uD560\uB2F9\uB7C9\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. Google Cloud Console\uC5D0\uC11C \uD560\uB2F9\uB7C9\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        return "API \uC811\uADFC\uC774 \uAC70\uBD80\uB418\uC5C8\uC2B5\uB2C8\uB2E4. API \uD0A4 \uAD8C\uD55C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 401) {
        return "API \uD0A4 \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uAC00 \uC62C\uBC14\uB978\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 400) {
        return "API \uC694\uCCAD\uC774 \uC798\uBABB\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC74C\uC131 \uC124\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 503) {
        return "Google Cloud TTS \uC11C\uBE44\uC2A4\uAC00 \uC77C\uC2DC\uC801\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
      }
      return `API \uC624\uB958 (${status}): ${error.message || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`;
    }
    return `API \uC624\uB958: ${status} \uC0C1\uD0DC \uCF54\uB4DC`;
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var import_obsidian4 = require("obsidian");

// src/infrastructure/tts/ChatterboxTTSService.ts
var import_obsidian2 = require("obsidian");

// src/shared/AudioManager.ts
var AudioManager = class _AudioManager {
  constructor() {
    this.activeAudioElements = /* @__PURE__ */ new Set();
    this.audioPool = [];
    this.maxPoolSize = 10;
  }
  static getInstance() {
    if (!_AudioManager.instance) {
      _AudioManager.instance = new _AudioManager();
    }
    return _AudioManager.instance;
  }
  // 오디오 요소 생성 및 관리
  createAudio(src) {
    let audio;
    const availableAudio = this.audioPool.find((a) => a.ended || a.paused);
    if (availableAudio) {
      audio = availableAudio;
      audio.src = src;
      audio.currentTime = 0;
    } else {
      audio = new Audio(src);
      this.setupAudioElement(audio);
    }
    this.activeAudioElements.add(audio);
    return audio;
  }
  // 오디오 요소 설정
  setupAudioElement(audio) {
    const cleanup = () => {
      this.releaseAudio(audio);
    };
    audio.addEventListener("ended", cleanup, { once: true });
    audio.addEventListener("error", cleanup, { once: true });
    setTimeout(() => {
      if (this.activeAudioElements.has(audio)) {
        this.releaseAudio(audio);
      }
    }, 3e4);
  }
  // 오디오 재생 (안전한 래퍼)
  async playAudio(src) {
    const audio = this.createAudio(src);
    try {
      await audio.play();
    } catch (error) {
      this.releaseAudio(audio);
      throw error;
    }
  }
  // 오디오 요소 해제
  releaseAudio(audio) {
    if (!this.activeAudioElements.has(audio))
      return;
    if (!audio.paused) {
      audio.pause();
    }
    this.activeAudioElements.delete(audio);
    if (this.audioPool.length < this.maxPoolSize) {
      audio.removeAttribute("src");
      audio.load();
      this.audioPool.push(audio);
    } else {
      this.disposeAudio(audio);
    }
  }
  // 오디오 요소 완전 정리
  disposeAudio(audio) {
    var _a;
    audio.pause();
    audio.removeAttribute("src");
    audio.load();
    const newAudio = audio.cloneNode();
    (_a = audio.parentNode) == null ? void 0 : _a.replaceChild(newAudio, audio);
  }
  // 모든 활성 오디오 정지
  stopAllAudio() {
    this.activeAudioElements.forEach((audio) => {
      if (!audio.paused) {
        audio.pause();
      }
    });
  }
  // 모든 리소스 정리
  cleanup() {
    this.activeAudioElements.forEach((audio) => {
      this.disposeAudio(audio);
    });
    this.activeAudioElements.clear();
    this.audioPool.forEach((audio) => {
      this.disposeAudio(audio);
    });
    this.audioPool.clear();
  }
  // 현재 상태 정보
  getStatus() {
    return {
      active: this.activeAudioElements.size,
      pooled: this.audioPool.length
    };
  }
};
var NetworkResourceManager = class _NetworkResourceManager {
  constructor() {
    this.abortControllers = /* @__PURE__ */ new Set();
    this.activeRequests = /* @__PURE__ */ new Map();
  }
  static getInstance() {
    if (!_NetworkResourceManager.instance) {
      _NetworkResourceManager.instance = new _NetworkResourceManager();
    }
    return _NetworkResourceManager.instance;
  }
  // 네트워크 요청 생성 (자동 정리 포함)
  createRequest(identifier) {
    const controller = new AbortController();
    this.abortControllers.add(controller);
    if (identifier) {
      const existingController = this.activeRequests.get(identifier);
      if (existingController) {
        existingController.abort();
        this.abortControllers.delete(existingController);
      }
      this.activeRequests.set(identifier, controller);
    }
    setTimeout(() => {
      if (this.abortControllers.has(controller)) {
        controller.abort();
        this.cleanup(controller, identifier);
      }
    }, 6e4);
    return controller;
  }
  // 요청 완료 시 정리
  completeRequest(controller, identifier) {
    this.cleanup(controller, identifier);
  }
  // 특정 요청 취소
  cancelRequest(identifier) {
    const controller = this.activeRequests.get(identifier);
    if (controller) {
      controller.abort();
      this.cleanup(controller, identifier);
    }
  }
  // 내부 정리 로직
  cleanup(controller, identifier) {
    this.abortControllers.delete(controller);
    if (identifier) {
      this.activeRequests.delete(identifier);
    }
  }
  // 모든 활성 요청 취소
  cancelAllRequests() {
    this.abortControllers.forEach((controller) => {
      controller.abort();
    });
    this.abortControllers.clear();
    this.activeRequests.clear();
  }
  // Fetch 래퍼 (자동 정리 포함)
  async fetch(url, options = {}, identifier, timeout = 3e4) {
    const controller = this.createRequest(identifier);
    const timeoutId = setTimeout(() => {
      controller.abort();
    }, timeout);
    try {
      const response = await fetch(url, {
        ...options,
        signal: controller.signal
      });
      clearTimeout(timeoutId);
      this.completeRequest(controller, identifier);
      return response;
    } catch (error) {
      clearTimeout(timeoutId);
      this.cleanup(controller, identifier);
      throw error;
    }
  }
  // 현재 상태 정보
  getStatus() {
    return {
      active: this.abortControllers.size,
      identified: this.activeRequests.size
    };
  }
};

// src/infrastructure/tts/ChatterboxTTSService.ts
var ChatterboxTTSService = class {
  constructor(settings) {
    this.settings = {
      enabled: settings.enabled || false,
      apiUrl: settings.apiUrl || "http://localhost:4123",
      voice: settings.voice || "alloy",
      exaggeration: settings.exaggeration || 0.7,
      cfgWeight: settings.cfgWeight || 0.4,
      temperature: settings.temperature || 0.9,
      autoPlay: settings.autoPlay || false
    };
    this.audioManager = AudioManager.getInstance();
    this.networkManager = NetworkResourceManager.getInstance();
  }
  async speakText(text) {
    if (!this.settings.enabled) {
      new import_obsidian2.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!text || text.trim().length === 0) {
      console.warn("TTS: \uBE48 \uD14D\uC2A4\uD2B8\uC785\uB2C8\uB2E4.");
      return;
    }
    try {
      this.stopSpeaking();
      const audioBlob = await this.callChatterboxAPI(text);
      await this.playAudioBlob(audioBlob);
    } catch (error) {
      console.error("Chatterbox TTS \uC624\uB958:", error);
      new import_obsidian2.Notice("TTS \uC74C\uC131 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. Chatterbox TTS \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
    }
  }
  async speakWord(word) {
    if (!word || word.trim().length === 0) {
      console.warn("TTS: \uBE48 \uB2E8\uC5B4\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(word);
  }
  async speakExample(example) {
    if (!example || example.trim().length === 0) {
      console.warn("TTS: \uBE48 \uC608\uBB38\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(example);
  }
  async callChatterboxAPI(text) {
    const truncatedText = text.length > 3e3 ? text.substring(0, 3e3) : text;
    const requestBody = {
      input: truncatedText,
      voice: this.settings.voice,
      exaggeration: this.settings.exaggeration,
      cfg_weight: this.settings.cfgWeight,
      temperature: this.settings.temperature
    };
    const response = await fetch(`${this.settings.apiUrl}/v1/audio/speech`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(requestBody)
    });
    if (!response.ok) {
      throw new Error(`Chatterbox TTS API \uC624\uB958: ${response.status} ${response.statusText}`);
    }
    const contentType = response.headers.get("content-type");
    if (!contentType || !contentType.includes("audio")) {
      throw new Error(`\uC608\uC0C1\uD558\uC9C0 \uBABB\uD55C \uC751\uB2F5 \uD615\uC2DD: ${contentType}`);
    }
    return await response.blob();
  }
  async playAudioBlob(audioBlob) {
    return new Promise((resolve, reject) => {
      try {
        if (this.audioElement) {
          this.audioElement.pause();
          this.audioElement.src = "";
        }
        this.audioElement = new Audio();
        const audioUrl = URL.createObjectURL(audioBlob);
        this.audioElement.src = audioUrl;
        this.audioElement.onended = () => {
          URL.revokeObjectURL(audioUrl);
          resolve();
        };
        this.audioElement.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        this.audioElement.onloadeddata = () => {
          if (this.audioElement) {
            this.audioElement.play().catch((error) => {
              console.error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
              URL.revokeObjectURL(audioUrl);
              reject(error);
            });
          }
        };
        this.audioElement.load();
      } catch (error) {
        reject(error);
      }
    });
  }
  stopSpeaking() {
    if (this.audioElement) {
      this.audioElement.pause();
      this.audioElement.currentTime = 0;
      if (this.audioElement.src && this.audioElement.src.startsWith("blob:")) {
        URL.revokeObjectURL(this.audioElement.src);
      }
      this.audioElement.src = "";
    }
    if (this.currentAudioContext) {
      this.currentAudioContext.close().catch(console.error);
      this.currentAudioContext = null;
    }
  }
  isPaused() {
    return !this.audioElement || this.audioElement.paused;
  }
  resume() {
    if (this.audioElement && this.audioElement.paused) {
      this.audioElement.play().catch((error) => {
        console.error("\uC624\uB514\uC624 \uC7AC\uAC1C \uC2E4\uD328:", error);
        new import_obsidian2.Notice("\uC624\uB514\uC624 \uC7AC\uAC1C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      });
    }
  }
  pause() {
    if (this.audioElement && !this.audioElement.paused) {
      this.audioElement.pause();
    }
  }
  // 설정 업데이트
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  // 연결 테스트
  async testConnection() {
    try {
      const testText = "Hello, this is a test.";
      await this.callChatterboxAPI(testText);
      return true;
    } catch (error) {
      console.error("Chatterbox TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      return false;
    }
  }
  // 사용 가능한 음성 목록 (Chatterbox는 custom voice 지원)
  getAvailableVoices() {
    return [
      "alloy",
      "echo",
      "fable",
      "onyx",
      "nova",
      "shimmer",
      "custom"
      // 사용자 정의 음성
    ];
  }
  // 현재 설정 정보 반환
  getSettings() {
    return { ...this.settings };
  }
  // 리소스 정리
  destroy() {
    this.stopSpeaking();
    this.audioElement = null;
    this.currentAudioContext = null;
  }
};

// src/infrastructure/tts/GoogleCloudTTSService.ts
var import_obsidian3 = require("obsidian");
var GoogleCloudTTSService = class {
  constructor(settings) {
    this.settings = {
      enabled: settings.enabled || false,
      apiKey: settings.apiKey || "",
      voice: settings.voice || "en-US-Journey-F",
      languageCode: settings.languageCode || "en-US",
      speakingRate: settings.speakingRate || 1,
      pitch: settings.pitch || 0,
      autoPlay: settings.autoPlay || false
    };
    this.audioManager = AudioManager.getInstance();
    this.networkManager = NetworkResourceManager.getInstance();
  }
  async speakText(text) {
    if (!this.settings.enabled) {
      new import_obsidian3.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!this.settings.apiKey) {
      new import_obsidian3.Notice("Google Cloud TTS API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!text || text.trim().length === 0) {
      console.warn("TTS: \uBE48 \uD14D\uC2A4\uD2B8\uC785\uB2C8\uB2E4.");
      return;
    }
    try {
      this.stopSpeaking();
      const audioData = await this.callGoogleCloudAPI(text);
      await this.playAudioData(audioData);
    } catch (error) {
      console.error("Google Cloud TTS \uC624\uB958:", error);
      new import_obsidian3.Notice("TTS \uC74C\uC131 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uC640 \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
    }
  }
  async speakWord(word) {
    if (!word || word.trim().length === 0) {
      console.warn("TTS: \uBE48 \uB2E8\uC5B4\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(word);
  }
  async speakExample(example) {
    if (!example || example.trim().length === 0) {
      console.warn("TTS: \uBE48 \uC608\uBB38\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(example);
  }
  async callGoogleCloudAPI(text) {
    const truncatedText = text.length > 5e3 ? text.substring(0, 5e3) : text;
    const requestBody = {
      input: {
        text: truncatedText
      },
      voice: {
        languageCode: this.settings.languageCode,
        name: this.settings.voice
      },
      audioConfig: {
        audioEncoding: "MP3",
        speakingRate: this.settings.speakingRate,
        pitch: this.settings.pitch
      }
    };
    const response = await this.networkManager.fetch(
      `https://texttospeech.googleapis.com/v1/text:synthesize?key=${this.settings.apiKey}`,
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(requestBody)
      },
      `google-tts-${Date.now()}`,
      // 고유 식별자
      1e4
      // 10초 타임아웃
    );
    if (!response.ok) {
      const errorData = await response.json().catch(() => ({}));
      const errorMessage = this.getDetailedErrorMessage(response.status, errorData);
      throw new Error(errorMessage);
    }
    const data = await response.json();
    return data.audioContent;
  }
  getDetailedErrorMessage(status, errorData) {
    var _a, _b, _c, _d;
    if (errorData == null ? void 0 : errorData.error) {
      const error = errorData.error;
      if (status === 403 && ((_a = error.details) == null ? void 0 : _a.some(
        (detail) => {
          var _a2;
          return detail.reason === "API_KEY_SERVICE_BLOCKED" || ((_a2 = detail["@type"]) == null ? void 0 : _a2.includes("ErrorInfo")) && detail.reason === "API_KEY_SERVICE_BLOCKED";
        }
      ))) {
        return "Google Cloud Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. Google Cloud Console\uC5D0\uC11C Text-to-Speech API\uB97C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 403) {
        if (((_b = error.message) == null ? void 0 : _b.includes("API key not valid")) || error.code === "INVALID_ARGUMENT") {
          return "Google Cloud API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. API \uD0A4\uB97C \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        if (((_c = error.message) == null ? void 0 : _c.includes("quota")) || ((_d = error.message) == null ? void 0 : _d.includes("QUOTA_EXCEEDED"))) {
          return "Google Cloud TTS API \uD560\uB2F9\uB7C9\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD560\uB2F9\uB7C9\uC744 \uD655\uC778\uD558\uAC70\uB098 \uC694\uAE08\uC81C\uB97C \uBCC0\uACBD\uD574\uC8FC\uC138\uC694.";
        }
        return "Google Cloud TTS API \uC811\uADFC\uC774 \uAC70\uBD80\uB418\uC5C8\uC2B5\uB2C8\uB2E4. API \uD0A4 \uAD8C\uD55C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 401) {
        return "Google Cloud API \uD0A4 \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uAC00 \uC62C\uBC14\uB978\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 400) {
        return "Google Cloud TTS API \uC694\uCCAD\uC774 \uC798\uBABB\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC74C\uC131 \uC124\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 503) {
        return "Google Cloud TTS \uC11C\uBE44\uC2A4\uAC00 \uC77C\uC2DC\uC801\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
      }
      return `Google Cloud TTS API \uC624\uB958 (${status}): ${error.message || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`;
    }
    return `Google Cloud TTS API \uC624\uB958: ${status} \uC0C1\uD0DC \uCF54\uB4DC`;
  }
  async playAudioData(base64Audio) {
    return new Promise((resolve, reject) => {
      try {
        const audioBlob = this.base64ToBlob(base64Audio, "audio/mp3");
        const audioUrl = URL.createObjectURL(audioBlob);
        const audio = this.audioManager.createAudio(audioUrl);
        const cleanup = () => {
          URL.revokeObjectURL(audioUrl);
          this.audioManager.releaseAudio(audio);
        };
        audio.onended = () => {
          cleanup();
          resolve();
        };
        audio.onerror = () => {
          cleanup();
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.onloadeddata = () => {
          audio.play().catch((error) => {
            console.error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
            cleanup();
            reject(error);
          });
        };
        setTimeout(() => {
          if (!audio.ended && !audio.paused) {
            cleanup();
            reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2DC\uAC04 \uCD08\uACFC"));
          }
        }, 3e4);
      } catch (error) {
        reject(error);
      }
    });
  }
  base64ToBlob(base64, mimeType) {
    const byteCharacters = atob(base64);
    const byteNumbers = new Array(byteCharacters.length);
    for (let i = 0; i < byteCharacters.length; i++) {
      byteNumbers[i] = byteCharacters.charCodeAt(i);
    }
    const byteArray = new Uint8Array(byteNumbers);
    return new Blob([byteArray], { type: mimeType });
  }
  stopSpeaking() {
    this.audioManager.stopAllAudio();
  }
  isPaused() {
    const status = this.audioManager.getStatus();
    return status.active === 0;
  }
  resume() {
    new import_obsidian3.Notice("\uC74C\uC131\uC744 \uB2E4\uC2DC \uC7AC\uC0DD\uD558\uB824\uBA74 \uBC84\uD2BC\uC744 \uB2E4\uC2DC \uD074\uB9AD\uD574\uC8FC\uC138\uC694.");
  }
  pause() {
    this.stopSpeaking();
  }
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  // 리소스 정리
  cleanup() {
    this.audioManager.cleanup();
    this.networkManager.cancelAllRequests();
  }
  async testConnection() {
    try {
      const testText = "Hello, this is a test.";
      await this.callGoogleCloudAPI(testText);
      return true;
    } catch (error) {
      console.error("Google Cloud TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      return false;
    }
  }
  getAvailableVoices() {
    return [
      "en-US-Journey-D",
      "en-US-Journey-F",
      "en-US-Journey-O",
      "en-US-Neural2-A",
      "en-US-Neural2-C",
      "en-US-Neural2-D",
      "en-US-Neural2-E",
      "en-US-Neural2-F",
      "en-US-Neural2-G",
      "en-US-Neural2-H",
      "en-US-Neural2-I",
      "en-US-Neural2-J",
      "en-US-Standard-A",
      "en-US-Standard-B",
      "en-US-Standard-C",
      "en-US-Standard-D",
      "en-US-Standard-E",
      "en-US-Standard-F",
      "en-US-Standard-G",
      "en-US-Standard-H",
      "en-US-Standard-I",
      "en-US-Standard-J",
      "en-GB-Neural2-A",
      "en-GB-Neural2-B",
      "en-GB-Neural2-C",
      "en-GB-Neural2-D",
      "en-GB-Neural2-F",
      "en-AU-Neural2-A",
      "en-AU-Neural2-B",
      "en-AU-Neural2-C",
      "en-AU-Neural2-D"
    ];
  }
  getSettings() {
    return { ...this.settings };
  }
  destroy() {
    this.stopSpeaking();
    this.audioElement = null;
  }
};

// src/infrastructure/tts/TTSService.ts
var TTSServiceFactory = class {
  static createTTSService(settings) {
    if (!settings.ttsEnabled) {
      return new NoOpTTSService();
    }
    if (settings.ttsProvider === "google-cloud") {
      const googleSettings = {
        enabled: settings.ttsEnabled,
        apiKey: decryptApiKey(settings.googleCloudTTSApiKey),
        voice: settings.ttsVoice,
        languageCode: settings.googleCloudTTSLanguageCode,
        speakingRate: settings.googleCloudTTSSpeakingRate,
        pitch: settings.googleCloudTTSPitch,
        autoPlay: settings.ttsAutoPlay
      };
      return new GoogleCloudTTSService(googleSettings);
    } else {
      const chatterboxSettings = {
        enabled: settings.ttsEnabled,
        apiUrl: settings.chatterboxApiUrl,
        voice: settings.ttsVoice,
        exaggeration: settings.chatterboxExaggeration,
        cfgWeight: settings.chatterboxCfgWeight,
        temperature: settings.chatterboxTemperature,
        autoPlay: settings.ttsAutoPlay
      };
      return new ChatterboxTTSService(chatterboxSettings);
    }
  }
};
var NoOpTTSService = class {
  async speakText(text) {
  }
  async speakWord(word) {
  }
  async speakExample(example) {
  }
  stopSpeaking() {
  }
  isPaused() {
    return true;
  }
  resume() {
  }
  pause() {
  }
  async testConnection() {
    return false;
  }
  getAvailableVoices() {
    return [];
  }
  destroy() {
  }
};

// src/core/algorithms/SpacedRepetitionAlgorithm.ts
var QUALITY_SCORES = {
  ["hard" /* Hard */]: 1,
  ["good" /* Good */]: 2,
  ["easy" /* Easy */]: 3
};
var DEFAULT_SRS_SETTINGS = {
  // SM-2 Algorithm Settings
  initialEFactor: 2.5,
  // SM-2 표준 초기 E-Factor
  minimumEFactor: 1.3,
  // SM-2 표준 최소 E-Factor
  maximumInterval: 36525,
  // ~100년
  // Load Balancing Settings
  loadBalance: true,
  maxFuzzingDays: 3,
  // Legacy compatibility (will be converted)
  baseEase: 250,
  // 2.5 * 100
  easyBonus: 1.3,
  hardPenalty: 0.5,
  minimumEase: 130,
  // 1.3 * 100
  initialInterval: 1
};
var SpacedRepetitionAlgorithm = class {
  constructor(settings = DEFAULT_SRS_SETTINGS) {
    this.dueDateHistogram = /* @__PURE__ */ new Map();
    this.settings = settings;
  }
  /**
   * Calculate the next review schedule based on user response
   * Implements the SM-2 algorithm according to learning_algorithm.md specification
   */
  schedule(response, currentSchedule) {
    const now = /* @__PURE__ */ new Date();
    const q = QUALITY_SCORES[response];
    if (!currentSchedule) {
      currentSchedule = {
        dueDate: now.toISOString(),
        interval: 0,
        ease: Math.round(this.settings.initialEFactor * 100),
        // E-Factor를 100으로 곱해서 저장
        reviewCount: 0,
        lapseCount: 0,
        delayedDays: 0,
        repetition: 0
      };
    }
    let currentEFactor = currentSchedule.ease / 100;
    let newRepetition = currentSchedule.repetition;
    const delta = 0.1 - (3 - q) * (0.08 + (3 - q) * 0.02);
    let newEFactor = currentEFactor + delta;
    newEFactor = Math.max(this.settings.minimumEFactor, newEFactor);
    if (q >= 2) {
      newRepetition = currentSchedule.repetition + 1;
    } else {
      newRepetition = 0;
    }
    let newInterval;
    if (q < 2) {
      newInterval = 1;
    } else {
      if (newRepetition === 1) {
        newInterval = 1;
      } else if (newRepetition === 2) {
        newInterval = 6;
      } else {
        newInterval = Math.round(currentSchedule.interval * newEFactor);
      }
    }
    newInterval = Math.min(newInterval, this.settings.maximumInterval);
    newInterval = Math.max(1, newInterval);
    if (this.settings.loadBalance) {
      newInterval = this.applyLoadBalancing(newInterval);
    }
    const newDueDate = new Date(now.getTime() + newInterval * 24 * 60 * 60 * 1e3);
    this.updateDueDateHistogram(newDueDate.toDateString());
    return {
      interval: newInterval,
      ease: Math.round(newEFactor * 100),
      // E-Factor를 100으로 곱해서 반환
      dueDate: newDueDate.toISOString(),
      repetition: newRepetition
    };
  }
  /**
   * Apply load balancing to distribute reviews evenly across days
   * Based on the histogram-based approach from obsidian-spaced-repetition
   */
  applyLoadBalancing(interval) {
    if (!this.settings.loadBalance) {
      return interval;
    }
    let fuzzingRange;
    if (interval <= 21) {
      fuzzingRange = 1;
    } else if (interval <= 180) {
      fuzzingRange = Math.max(1, interval * 0.05);
    } else {
      fuzzingRange = Math.max(1, interval * 0.025);
    }
    fuzzingRange = Math.min(fuzzingRange, this.settings.maxFuzzingDays);
    const now = /* @__PURE__ */ new Date();
    let bestInterval = interval;
    let minReviews = Number.MAX_SAFE_INTEGER;
    for (let offset = -fuzzingRange; offset <= fuzzingRange; offset++) {
      const testInterval = interval + offset;
      if (testInterval < 1)
        continue;
      const testDate = new Date(now.getTime() + testInterval * 24 * 60 * 60 * 1e3);
      const dateString = testDate.toDateString();
      const reviewCount = this.dueDateHistogram.get(dateString) || 0;
      if (reviewCount < minReviews) {
        minReviews = reviewCount;
        bestInterval = testInterval;
      }
    }
    return bestInterval;
  }
  /**
   * Update the due date histogram for load balancing
   */
  updateDueDateHistogram(dateString) {
    const current = this.dueDateHistogram.get(dateString) || 0;
    this.dueDateHistogram.set(dateString, current + 1);
  }
  /**
   * Get cards that are due for review
   */
  static getCardsForReview(cards) {
    const now = /* @__PURE__ */ new Date();
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= now;
    });
  }
  /**
   * Calculate the number of cards due in the next N days
   */
  static getCardsDueInDays(cards, days) {
    const now = /* @__PURE__ */ new Date();
    const futureDate = new Date(now.getTime() + days * 24 * 60 * 60 * 1e3);
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= futureDate;
    }).length;
  }
  /**
   * Get learning statistics for a set of cards
   */
  static getStatistics(cards) {
    let newCards = 0;
    let learningCards = 0;
    let matureCards = 0;
    let totalEase = 0;
    let totalInterval = 0;
    let cardsWithSchedule = 0;
    cards.forEach((card) => {
      if (!card.scheduleInfo) {
        newCards++;
      } else {
        cardsWithSchedule++;
        totalEase += card.scheduleInfo.ease;
        totalInterval += card.scheduleInfo.interval;
        if (card.scheduleInfo.interval < 21) {
          learningCards++;
        } else {
          matureCards++;
        }
      }
    });
    return {
      total: cards.length,
      new: newCards,
      learning: learningCards,
      mature: matureCards,
      averageEase: cardsWithSchedule > 0 ? Math.round(totalEase / cardsWithSchedule) : 0,
      averageInterval: cardsWithSchedule > 0 ? Math.round(totalInterval / cardsWithSchedule) : 0
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  /**
   * Get current settings
   */
  getSettings() {
    return { ...this.settings };
  }
  /**
   * Clear the due date histogram (useful for testing or reset)
   */
  clearHistogram() {
    this.dueDateHistogram.clear();
  }
};

// src/core/services/SpacedRepetitionService.ts
var SpacedRepetitionService = class {
  constructor(settings = {}) {
    this.currentSession = null;
    const srsSettings = { ...DEFAULT_SRS_SETTINGS, ...settings };
    this.algorithm = new SpacedRepetitionAlgorithm(srsSettings);
  }
  /**
   * Get cards that are due for review today
   */
  getCardsForReview(allCards) {
    return SpacedRepetitionAlgorithm.getCardsForReview(allCards);
  }
  /**
   * Get new cards (never reviewed)
   */
  getNewCards(allCards) {
    return allCards.filter((card) => !card.scheduleInfo || card.reviewCount === 0);
  }
  /**
   * Get learning cards (reviewed but not mature)
   */
  getLearningCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.reviewCount > 0 && card.scheduleInfo.interval < 21
    );
  }
  /**
   * Get mature cards (interval >= 21 days)
   */
  getMatureCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.scheduleInfo.interval >= 21
    );
  }
  /**
   * Start a new review session
   */
  startReviewSession(dueCards, maxCards) {
    const cardsToReview = maxCards ? dueCards.slice(0, maxCards) : dueCards;
    this.currentSession = {
      sessionId: this.generateSessionId(),
      startTime: (/* @__PURE__ */ new Date()).toISOString(),
      cardsReviewed: 0,
      totalCards: cardsToReview.length,
      completedCards: [],
      currentCard: cardsToReview[0]
    };
    return this.currentSession;
  }
  /**
   * Process a review response and get the next card
   */
  processReview(card, response) {
    var _a, _b, _c, _d;
    if (!this.currentSession) {
      throw new Error("No active review session");
    }
    const reviewResult = this.algorithm.schedule(response, card.scheduleInfo);
    const updatedCard = {
      ...card,
      reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
      difficulty: response,
      lastReviewed: (/* @__PURE__ */ new Date()).toISOString(),
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.reviewCount) || 0) + 1,
        lapseCount: (((_c = card.scheduleInfo) == null ? void 0 : _c.lapseCount) || 0) + (response === "hard" /* Hard */ ? 1 : 0),
        delayedDays: ((_d = card.scheduleInfo) == null ? void 0 : _d.delayedDays) || 0,
        repetition: reviewResult.repetition
      }
    };
    this.currentSession.cardsReviewed++;
    this.currentSession.completedCards.push(updatedCard);
    const dueCards = this.getCardsForReview([card]);
    const nextCard = this.currentSession.cardsReviewed < this.currentSession.totalCards ? dueCards[this.currentSession.cardsReviewed] : void 0;
    this.currentSession.currentCard = nextCard;
    const sessionComplete = !nextCard || this.currentSession.cardsReviewed >= this.currentSession.totalCards;
    if (sessionComplete) {
      this.endReviewSession();
    }
    return {
      updatedCard,
      nextCard,
      sessionComplete
    };
  }
  /**
   * End the current review session
   */
  endReviewSession() {
    const session = this.currentSession;
    this.currentSession = null;
    return session;
  }
  /**
   * Get current session info
   */
  getCurrentSession() {
    return this.currentSession;
  }
  /**
   * Calculate study statistics
   */
  calculateStatistics(allCards, studyHistory) {
    const now = /* @__PURE__ */ new Date();
    const today = now.toDateString();
    const overallStats = SpacedRepetitionAlgorithm.getStatistics(allCards);
    const todayStats = {
      newCards: 0,
      // Would track from session data
      reviewedCards: 0,
      // Would track from session data
      totalTime: 0
      // Would track from session timing
    };
    const streakStats = {
      currentDays: 0,
      // Would calculate from study history
      longestDays: 0,
      // Would calculate from study history
      lastStudyDate: null
    };
    return {
      today: todayStats,
      streak: streakStats,
      overall: overallStats
    };
  }
  /**
   * Get cards due in the next N days
   */
  getCardsDueInDays(allCards, days) {
    return SpacedRepetitionAlgorithm.getCardsDueInDays(allCards, days);
  }
  /**
   * Reset a card's schedule (for testing or manual intervention)
   */
  resetCardSchedule(card) {
    return {
      ...card,
      reviewCount: 0,
      lastReviewed: null,
      scheduleInfo: void 0
    };
  }
  /**
   * Manually set card difficulty (for bulk operations)
   */
  setCardDifficulty(card, difficulty) {
    var _a, _b;
    const reviewResult = this.algorithm.schedule(difficulty, card.scheduleInfo);
    return {
      ...card,
      difficulty,
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
        lapseCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.lapseCount) || 0) + (difficulty === "hard" /* Hard */ ? 1 : 0),
        delayedDays: 0,
        repetition: reviewResult.repetition
      }
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(settings) {
    this.algorithm.updateSettings(settings);
  }
  /**
   * Get current algorithm settings
   */
  getSettings() {
    return this.algorithm.getSettings();
  }
  /**
   * Generate a unique session ID
   */
  generateSessionId() {
    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * Get recommended daily study load
   */
  getRecommendedDailyCards(allCards) {
    const dueCards = this.getCardsForReview(allCards);
    const newCards = this.getNewCards(allCards);
    const maxNewCardsPerDay = 20;
    const maxReviewCardsPerDay = 100;
    const recommendedNew = Math.min(newCards.length, maxNewCardsPerDay);
    const recommendedReview = Math.min(dueCards.length - recommendedNew, maxReviewCardsPerDay);
    return {
      newCards: recommendedNew,
      reviewCards: recommendedReview,
      total: recommendedNew + recommendedReview
    };
  }
  /**
   * Export cards for data analysis or backup
   */
  exportScheduleData(allCards) {
    return allCards.map((card) => ({
      word: card.word,
      reviewCount: card.reviewCount,
      difficulty: card.difficulty,
      lastReviewed: card.lastReviewed,
      scheduleInfo: card.scheduleInfo,
      addedDate: card.addedDate
    }));
  }
  /**
   * Get the next review intervals for each difficulty level
   * Shows the exact SM-2 algorithm results with E-Factor information
   */
  getNextReviewIntervals(card) {
    const hardResult = this.algorithm.schedule("hard" /* Hard */, card.scheduleInfo);
    const goodResult = this.algorithm.schedule("good" /* Good */, card.scheduleInfo);
    const easyResult = this.algorithm.schedule("easy" /* Easy */, card.scheduleInfo);
    return {
      hard: {
        interval: hardResult.interval,
        displayText: this.formatInterval(hardResult.interval),
        eFactor: hardResult.ease / 100,
        // Convert back to E-Factor
        repetition: hardResult.repetition
      },
      good: {
        interval: goodResult.interval,
        displayText: this.formatInterval(goodResult.interval),
        eFactor: goodResult.ease / 100,
        repetition: goodResult.repetition
      },
      easy: {
        interval: easyResult.interval,
        displayText: this.formatInterval(easyResult.interval),
        eFactor: easyResult.ease / 100,
        repetition: easyResult.repetition
      }
    };
  }
  /**
   * Format interval as human-readable text
   */
  formatInterval(days) {
    if (days < 1) {
      return "today";
    } else if (days === 1) {
      return "1 day";
    } else if (days < 30) {
      return `${days} day${days > 1 ? "s" : ""}`;
    } else if (days < 365) {
      const months = Math.round(days / 30 * 10) / 10;
      return `${months} month${months > 1 ? "s" : ""}`;
    } else {
      const years = Math.round(days / 365 * 10) / 10;
      return `${years} year${years > 1 ? "s" : ""}`;
    }
  }
  /**
   * Get detailed SM-2 algorithm statistics
   */
  getSM2Statistics(allCards) {
    const stats = {
      overview: { totalCards: 0, newCards: 0, learningCards: 0, matureCards: 0 },
      repetitions: { rep0: 0, rep1: 0, rep2: 0, rep3Plus: 0 },
      eFactors: { average: 0, distribution: [] },
      intervals: { average: 0, distribution: [] }
    };
    let totalEFactor = 0;
    let totalInterval = 0;
    let cardsWithSchedule = 0;
    const eFactorBuckets = /* @__PURE__ */ new Map();
    const intervalBuckets = /* @__PURE__ */ new Map();
    allCards.forEach((card) => {
      stats.overview.totalCards++;
      if (!card.scheduleInfo) {
        stats.overview.newCards++;
        stats.repetitions.rep0++;
      } else {
        cardsWithSchedule++;
        const repetition = card.scheduleInfo.repetition || 0;
        const eFactor = card.scheduleInfo.ease / 100;
        const interval = card.scheduleInfo.interval;
        totalEFactor += eFactor;
        totalInterval += interval;
        if (repetition === 1)
          stats.repetitions.rep1++;
        else if (repetition === 2)
          stats.repetitions.rep2++;
        else if (repetition >= 3)
          stats.repetitions.rep3Plus++;
        else
          stats.repetitions.rep0++;
        if (interval >= 21) {
          stats.overview.matureCards++;
        } else {
          stats.overview.learningCards++;
        }
        const eFactorRange = this.getEFactorRange(eFactor);
        eFactorBuckets.set(eFactorRange, (eFactorBuckets.get(eFactorRange) || 0) + 1);
        const intervalRange = this.getIntervalRange(interval);
        intervalBuckets.set(intervalRange, (intervalBuckets.get(intervalRange) || 0) + 1);
      }
    });
    stats.eFactors.average = cardsWithSchedule > 0 ? Math.round(totalEFactor / cardsWithSchedule * 100) / 100 : 0;
    stats.intervals.average = cardsWithSchedule > 0 ? Math.round(totalInterval / cardsWithSchedule) : 0;
    stats.eFactors.distribution = Array.from(eFactorBuckets.entries()).map(([range, count]) => ({ range, count })).sort((a, b) => parseFloat(a.range.split("-")[0]) - parseFloat(b.range.split("-")[0]));
    stats.intervals.distribution = Array.from(intervalBuckets.entries()).map(([range, count]) => ({ range, count })).sort((a, b) => this.compareIntervalRanges(a.range, b.range));
    return stats;
  }
  /**
   * Get E-Factor range for grouping
   */
  getEFactorRange(eFactor) {
    if (eFactor < 1.5)
      return "1.3-1.5";
    if (eFactor < 2)
      return "1.5-2.0";
    if (eFactor < 2.5)
      return "2.0-2.5";
    if (eFactor < 3)
      return "2.5-3.0";
    if (eFactor < 3.5)
      return "3.0-3.5";
    return "3.5+";
  }
  /**
   * Get interval range for grouping
   */
  getIntervalRange(interval) {
    if (interval === 1)
      return "1 day";
    if (interval <= 6)
      return "2-6 days";
    if (interval <= 20)
      return "7-20 days";
    if (interval <= 60)
      return "21-60 days";
    if (interval <= 180)
      return "2-6 months";
    if (interval <= 365)
      return "6-12 months";
    return "1+ years";
  }
  /**
   * Compare interval ranges for sorting
   */
  compareIntervalRanges(a, b) {
    const order = ["1 day", "2-6 days", "7-20 days", "21-60 days", "2-6 months", "6-12 months", "1+ years"];
    return order.indexOf(a) - order.indexOf(b);
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var VocabularyModal = class extends import_obsidian4.Modal {
  constructor(app, plugin) {
    super(app);
    this.currentCardIndex = 0;
    this.cards = [];
    this.showAnswer = false;
    this.keydownHandler = null;
    this.currentSession = null;
    this.plugin = plugin;
    this.ttsService = TTSServiceFactory.createTTSService(plugin.settings);
    this.spacedRepetitionService = new SpacedRepetitionService();
  }
  onOpen() {
    const allCards = this.plugin.databaseManager.getAllWords();
    this.cards = this.spacedRepetitionService.getCardsForReview(allCards);
    if (this.cards.length === 0) {
      this.showNoCardsForReview(allCards.length);
      return;
    }
    this.currentSession = this.spacedRepetitionService.startReviewSession(this.cards);
    this.shuffleCards();
    this.currentCardIndex = 0;
    this.showAnswer = false;
    this.showCard();
    this.keydownHandler = (e) => {
      if (!this.showAnswer) {
        if (e.code === "Space" || e.key === " ") {
          e.preventDefault();
          this.showAnswer = true;
          this.showCard();
        }
      } else {
        if (e.key === "1") {
          this.handleReview("hard");
        } else if (e.key === "2") {
          this.handleReview("good");
        } else if (e.key === "3") {
          this.handleReview("easy");
        }
      }
    };
    window.addEventListener("keydown", this.keydownHandler);
  }
  shuffleCards() {
    for (let i = this.cards.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [this.cards[i], this.cards[j]] = [this.cards[j], this.cards[i]];
    }
  }
  showNoWordsMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noWordsEl = contentEl.createEl("div", { cls: "no-words-message" });
    noWordsEl.createEl("h2", { text: "\uD559\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4" });
    noWordsEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    const closeButton = noWordsEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showNoCardsForReview(totalCards) {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noReviewEl = contentEl.createEl("div", { cls: "no-review-message" });
    noReviewEl.createEl("h2", { text: "\u{1F389} \uC624\uB298\uC758 \uBCF5\uC2B5 \uC644\uB8CC!" });
    if (totalCards > 0) {
      const stats = this.spacedRepetitionService.calculateStatistics(this.plugin.databaseManager.getAllWords());
      noReviewEl.createEl("p", {
        text: `\uCD1D ${totalCards}\uAC1C\uC758 \uB2E8\uC5B4 \uC911 \uC624\uB298 \uBCF5\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`
      });
      const nextDueCards = this.spacedRepetitionService.getCardsDueInDays(
        this.plugin.databaseManager.getAllWords(),
        1
      );
      if (nextDueCards > 0) {
        noReviewEl.createEl("p", {
          text: `\uB0B4\uC77C \uBCF5\uC2B5 \uC608\uC815: ${nextDueCards}\uAC1C \uB2E8\uC5B4`
        });
      }
      const statsEl = noReviewEl.createEl("div", { cls: "study-stats" });
      statsEl.createEl("h3", { text: "\uD559\uC2B5 \uD604\uD669" });
      statsEl.createEl("p", { text: `\u2022 \uC0C8 \uB2E8\uC5B4: ${stats.overall.newCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uD559\uC2B5 \uC911: ${stats.overall.learningCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uC644\uB8CC: ${stats.overall.matureCards}\uAC1C` });
    } else {
      noReviewEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    }
    const closeButton = noReviewEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showCard() {
    if (this.currentCardIndex >= this.cards.length) {
      this.showCompletionMessage();
      return;
    }
    const currentCard = this.cards[this.currentCardIndex];
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const cardContainer = contentEl.createEl("div", { cls: "vocabulary-card" });
    const topInfoContainer = cardContainer.createEl("div", { cls: "card-top-info" });
    const currentBook = this.plugin.databaseManager.getCurrentBook();
    if (currentBook) {
      const bookInfoEl = topInfoContainer.createEl("div", { cls: "book-info-display" });
      bookInfoEl.createEl("span", {
        text: currentBook.name,
        cls: "current-book-name"
      });
    }
    const deleteButton = topInfoContainer.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const progressEl = cardContainer.createEl("div", { cls: "progress-indicator" });
    progressEl.textContent = `${this.currentCardIndex + 1} / ${this.cards.length}`;
    const wordContainer = cardContainer.createEl("div", { cls: "word-container" });
    const wordEl = wordContainer.createEl("h1", { cls: "card-word" });
    if (currentCard.pronunciation && currentCard.pronunciation.trim()) {
      wordEl.innerHTML = `${currentCard.word} <span class="pronunciation">[${currentCard.pronunciation}]</span>`;
    } else {
      wordEl.textContent = currentCard.word;
    }
    const wordPlayButton = wordContainer.createEl("button", {
      cls: "tts-play-button word-play-button",
      attr: { "aria-label": "\uB2E8\uC5B4 \uBC1C\uC74C \uB4E3\uAE30" }
    });
    wordPlayButton.innerHTML = "\u{1F50A}";
    wordPlayButton.addEventListener("click", () => {
      this.ttsService.speakWord(currentCard.word);
    });
    if (currentCard.similarWords && currentCard.similarWords.length > 0) {
      const similarSection = cardContainer.createEl("div", { cls: "similar-words-section" });
      similarSection.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
      const similarList = similarSection.createEl("ul", { cls: "similar-words-list" });
      currentCard.similarWords.forEach((word) => {
        similarList.createEl("li", { text: word });
      });
    }
    if (currentCard.examples && currentCard.examples.length > 0) {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      currentCard.examples.forEach((example, index) => {
        const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
        const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
        const englishExample = exampleTextContainer.createEl("p", { text: example.english });
        englishExample.addClass("english-example");
        const examplePlayButton = exampleTextContainer.createEl("button", {
          cls: "tts-play-button example-play-button",
          attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
        });
        examplePlayButton.innerHTML = "\u{1F50A}";
        examplePlayButton.addEventListener("click", () => {
          this.ttsService.speakExample(example.english);
        });
        if (this.showAnswer && example.korean && example.korean.trim()) {
          const koreanExample = exampleContainer.createEl("p", { text: example.korean });
          koreanExample.addClass("korean-example");
        }
      });
    } else {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
      const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
      const englishExample = exampleTextContainer.createEl("p", {
        text: `This is an example sentence with the word "${currentCard.word}".`
      });
      englishExample.addClass("english-example");
      const examplePlayButton = exampleTextContainer.createEl("button", {
        cls: "tts-play-button example-play-button",
        attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
      });
      examplePlayButton.innerHTML = "\u{1F50A}";
      examplePlayButton.addEventListener("click", () => {
        this.ttsService.speakExample(`This is an example sentence with the word "${currentCard.word}".`);
      });
      if (this.showAnswer) {
        const koreanExample = exampleContainer.createEl("p", {
          text: `"${currentCard.word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        });
        koreanExample.addClass("korean-example");
      }
    }
    if (!this.showAnswer) {
      const checkButton = cardContainer.createEl("button", { text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30" });
      checkButton.addClass("check-answer-button");
      checkButton.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCard();
      });
    } else {
      const answerSection = cardContainer.createEl("div", { cls: "answer-section" });
      answerSection.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerSection.createEl("ul", { cls: "meanings-list" });
      currentCard.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      this.createReviewButtons(cardContainer);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons-section" });
    const currentCard = this.cards[this.currentCardIndex];
    const intervals = this.spacedRepetitionService.getNextReviewIntervals(currentCard);
    const hardButton = reviewSection.createEl("button");
    hardButton.addClass("review-button", "hard-button");
    const hardContent = hardButton.createEl("div", { cls: "button-content" });
    hardContent.createEl("span", { text: "\uC5B4\uB824\uC6C0", cls: "button-label" });
    hardContent.createEl("span", { text: intervals.hard.displayText, cls: "button-interval" });
    hardButton.addEventListener("click", () => this.handleReview("hard"));
    const goodButton = reviewSection.createEl("button");
    goodButton.addClass("review-button", "good-button");
    const goodContent = goodButton.createEl("div", { cls: "button-content" });
    goodContent.createEl("span", { text: "\uC88B\uC74C", cls: "button-label" });
    goodContent.createEl("span", { text: intervals.good.displayText, cls: "button-interval" });
    goodButton.addEventListener("click", () => this.handleReview("good"));
    const easyButton = reviewSection.createEl("button");
    easyButton.addClass("review-button", "easy-button");
    const easyContent = easyButton.createEl("div", { cls: "button-content" });
    easyContent.createEl("span", { text: "\uC26C\uC6C0", cls: "button-label" });
    easyContent.createEl("span", { text: intervals.easy.displayText, cls: "button-interval" });
    easyButton.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentCard = this.cards[this.currentCardIndex];
    if (!this.currentSession) {
      console.error("No active review session");
      return;
    }
    const reviewResponse = difficulty;
    try {
      const result = this.spacedRepetitionService.processReview(currentCard, reviewResponse);
      await this.plugin.databaseManager.updateWordWithSchedule(
        result.updatedCard.word,
        difficulty,
        result.updatedCard.scheduleInfo
      );
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    } catch (error) {
      console.error("Error processing spaced repetition review:", error);
      await this.plugin.databaseManager.updateWord(currentCard.word, difficulty);
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    }
  }
  async handleDeleteCard() {
    const currentCard = this.cards[this.currentCardIndex];
    const confirmModal = new ConfirmModal(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentCard.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentCard.word);
          this.cards.splice(this.currentCardIndex, 1);
          if (this.cards.length === 0) {
            this.showCompletionMessage();
            return;
          }
          if (this.currentCardIndex >= this.cards.length) {
            this.currentCardIndex = this.cards.length - 1;
          }
          this.showAnswer = false;
          this.showCard();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian4.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletionMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const completionEl = contentEl.createEl("div", { cls: "completion-message" });
    completionEl.createEl("h2", { text: "\uD559\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: `\uC624\uB298 ${this.cards.length}\uAC1C\uC758 \uB2E8\uC5B4 \uD559\uC2B5\uC744 \uC644\uB8CC\uD588\uC2B5\uB2C8\uB2E4.` });
    const restartButton = completionEl.createEl("button", { text: "\uB2E4\uC2DC \uD559\uC2B5\uD558\uAE30" });
    restartButton.addClass("restart-button");
    restartButton.addEventListener("click", () => {
      this.onOpen();
    });
    const closeButton = completionEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => {
      this.close();
    });
  }
  onClose() {
    if (this.keydownHandler) {
      window.removeEventListener("keydown", this.keydownHandler);
      this.keydownHandler = null;
    }
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal = class extends import_obsidian4.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var import_obsidian6 = require("obsidian");

// src/infrastructure/external/WordService.ts
var WordService = class {
  constructor() {
    this.apiBaseUrl = "https://api.dictionaryapi.dev/api/v2/entries/en";
  }
  async getWordData(word) {
    try {
      return this.getSampleWordData(word);
    } catch (error) {
      console.error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
      throw new Error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
  }
  getSampleWordData(word) {
    const sampleData = {
      "beautiful": {
        word: "beautiful",
        pronunciation: "/\u02C8bju\u02D0t\u026Af\u0259l/",
        meanings: ["\uC544\uB984\uB2E4\uC6B4", "\uC608\uC05C", "\uD6CC\uB96D\uD55C"],
        similarWords: ["pretty", "gorgeous", "stunning", "attractive"],
        examples: [
          {
            english: "She is a beautiful woman.",
            korean: "\uADF8\uB140\uB294 \uC544\uB984\uB2E4\uC6B4 \uC5EC\uC131\uC785\uB2C8\uB2E4."
          },
          {
            english: "The sunset was beautiful.",
            korean: "\uC77C\uBAB0\uC774 \uC544\uB984\uB2E4\uC6E0\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "What a beautiful day!",
            korean: "\uC815\uB9D0 \uC544\uB984\uB2E4\uC6B4 \uD558\uB8E8\uB124\uC694!"
          }
        ]
      },
      "happy": {
        word: "happy",
        pronunciation: "/\u02C8h\xE6pi/",
        meanings: ["\uD589\uBCF5\uD55C", "\uAE30\uC05C", "\uC990\uAC70\uC6B4"],
        similarWords: ["joyful", "cheerful", "glad", "pleased"],
        examples: [
          {
            english: "I am happy to see you.",
            korean: "\uB2F9\uC2E0\uC744 \uB9CC\uB098\uC11C \uAE30\uC069\uB2C8\uB2E4."
          },
          {
            english: "She has a happy family.",
            korean: "\uADF8\uB140\uB294 \uD589\uBCF5\uD55C \uAC00\uC871\uC744 \uAC00\uC9C0\uACE0 \uC788\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Happy birthday!",
            korean: "\uC0DD\uC77C \uCD95\uD558\uD569\uB2C8\uB2E4!"
          }
        ]
      },
      "learn": {
        word: "learn",
        pronunciation: "/l\u025C\u02D0rn/",
        meanings: ["\uBC30\uC6B0\uB2E4", "\uD559\uC2B5\uD558\uB2E4", "\uC775\uD788\uB2E4"],
        similarWords: ["study", "acquire", "grasp", "understand"],
        examples: [
          {
            english: "I want to learn English.",
            korean: "\uC800\uB294 \uC601\uC5B4\uB97C \uBC30\uC6B0\uACE0 \uC2F6\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Children learn quickly.",
            korean: "\uC544\uC774\uB4E4\uC740 \uBE68\uB9AC \uBC30\uC6C1\uB2C8\uB2E4."
          },
          {
            english: "You can learn from your mistakes.",
            korean: "\uC2E4\uC218\uB85C\uBD80\uD130 \uBC30\uC6B8 \uC218 \uC788\uC2B5\uB2C8\uB2E4."
          }
        ]
      }
    };
    if (sampleData[word.toLowerCase()]) {
      return sampleData[word.toLowerCase()];
    }
    return {
      word,
      pronunciation: "/pronunciation/",
      meanings: ["\uC758\uBBF8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
      similarWords: [],
      examples: [
        {
          english: `This is an example sentence with the word "${word}".`,
          korean: `"${word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        }
      ]
    };
  }
  // 실제 API 호출을 위한 메서드 (향후 구현)
  async fetchFromAPI(word) {
    const response = await fetch(`${this.apiBaseUrl}/${word}`);
    if (!response.ok) {
      throw new Error(`API \uC694\uCCAD \uC2E4\uD328: ${response.status}`);
    }
    return await response.json();
  }
};

// src/features/book-management/ui/AddBookModal.ts
var import_obsidian5 = require("obsidian");
var AddBookModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-book-modal");
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uC0C8\uB85C\uC6B4 \uB2E8\uC5B4\uC7A5\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const formEl = contentEl.createEl("form", { cls: "book-form" });
    const nameSection = formEl.createEl("div", { cls: "form-section" });
    const nameLabel = nameSection.createEl("label", {
      text: "\uB2E8\uC5B4\uC7A5 \uC774\uB984 *",
      cls: "form-label"
    });
    const nameInput = nameSection.createEl("input", {
      type: "text",
      placeholder: "\uC608: TOEIC \uB2E8\uC5B4\uC7A5, \uC77C\uC0C1\uC0DD\uD65C \uB2E8\uC5B4\uC7A5",
      cls: "form-input"
    });
    nameInput.required = true;
    const descSection = formEl.createEl("div", { cls: "form-section" });
    const descLabel = descSection.createEl("label", {
      text: "\uC124\uBA85 (\uC120\uD0DD\uC0AC\uD56D)",
      cls: "form-label"
    });
    const descInput = descSection.createEl("textarea", {
      placeholder: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB300\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694.",
      cls: "form-textarea"
    });
    descInput.rows = 3;
    const buttonSection = formEl.createEl("div", { cls: "button-section" });
    const createButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uC0DD\uC131",
      cls: "create-button primary",
      type: "submit"
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button",
      type: "button"
    });
    cancelButton.addEventListener("click", () => this.close());
    formEl.addEventListener("submit", async (e) => {
      e.preventDefault();
      await this.createBook(nameInput.value.trim(), descInput.value.trim());
    });
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        formEl.dispatchEvent(new Event("submit"));
      }
    });
    nameInput.focus();
  }
  async createBook(name, description) {
    if (!name.trim()) {
      new import_obsidian5.Notice("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    try {
      const existingBooks = this.plugin.databaseManager.getAllBooks();
      const isDuplicate = existingBooks.some(
        (book) => book.name.toLowerCase() === name.toLowerCase()
      );
      if (isDuplicate) {
        new import_obsidian5.Notice("\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4.");
        return;
      }
      const newBook = await this.plugin.databaseManager.createBook(name, description);
      new import_obsidian5.Notice(`"${name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
      this.close();
      const event = new CustomEvent("bookCreated", { detail: newBook });
      document.dispatchEvent(event);
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131 \uC2E4\uD328:", error);
      new import_obsidian5.Notice("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var VocabularyManagerModal = class extends import_obsidian6.Modal {
  constructor(app, plugin) {
    var _a;
    super(app);
    this.currentView = "list";
    this.selectedWords = /* @__PURE__ */ new Set();
    this.selectedBookId = "";
    this.plugin = plugin;
    this.databaseManager = plugin.databaseManager;
    this.wordService = new WordService();
    this.llmService = plugin.llmService;
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
  }
  hasValidApiKey() {
    const provider = this.plugin.settings.llmProvider;
    switch (provider) {
      case "openai":
        return !!this.plugin.settings.openaiApiKey;
      case "anthropic":
        return !!this.plugin.settings.anthropicApiKey;
      case "google":
        return !!this.plugin.settings.googleApiKey;
      default:
        return false;
    }
  }
  async onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-manager-modal");
    contentEl.classList.add("wide-manager-modal");
    await this.databaseManager.loadAllBooks();
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
    this.createBookSelectorHeader();
    this.createNavigation();
    this.showCurrentView();
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  async handleBookCreated(event) {
    const newBook = event.detail;
    this.selectedBookId = newBook.id;
    await this.refreshBookSelector();
  }
  createBookSelectorHeader() {
    const headerEl = this.contentEl.createEl("div", { cls: "manager-header" });
    headerEl.style.display = "flex";
    headerEl.style.alignItems = "center";
    headerEl.style.gap = "18px";
    headerEl.style.marginBottom = "18px";
    const books = this.databaseManager.getAllBooks();
    const bookSelect = headerEl.createEl("select", { cls: "book-select-dropdown" });
    bookSelect.style.height = "38px";
    bookSelect.style.fontSize = "16px";
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      if (book.id === this.selectedBookId)
        option.selected = true;
      bookSelect.appendChild(option);
    });
    bookSelect.addEventListener("change", async (e) => {
      this.selectedBookId = e.target.value;
      await this.databaseManager.setCurrentBook(this.selectedBookId);
      this.showCurrentView();
    });
    const addBookBtn = headerEl.createEl("button", { text: "\uC0C8 \uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "book-manage-button" });
    addBookBtn.addEventListener("click", () => {
      const addBookModal = new AddBookModal(this.app, this.plugin);
      addBookModal.onClose = () => {
        this.refreshBookSelector();
      };
      addBookModal.open();
    });
    const delBookBtn = headerEl.createEl("button", { text: "\uD604\uC7AC \uB2E8\uC5B4\uC7A5 \uC0AD\uC81C", cls: "book-delete-button" });
    const isDefault = this.selectedBookId === "default";
    if (isDefault) {
      delBookBtn.setAttr("disabled", "true");
      delBookBtn.addClass("disabled");
    }
    delBookBtn.addEventListener("click", async () => {
      if (isDefault)
        return;
      const currentBook = this.databaseManager.getBook(this.selectedBookId);
      if (!currentBook) {
        new import_obsidian6.Notice("\uB2E8\uC5B4\uC7A5 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      const wordsInBook = this.databaseManager.getWordsByBook(this.selectedBookId);
      const wordCount = wordsInBook.length;
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uD655\uC778",
        `\uC815\uB9D0\uB85C "${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\u2022 \uB2E8\uC5B4\uC7A5 \uC774\uB984: ${currentBook.name}
\u2022 \uD3EC\uD568\uB41C \uB2E8\uC5B4 \uC218: ${wordCount}\uAC1C
\u2022 \uC0DD\uC131\uC77C: ${new Date(currentBook.createdAt).toLocaleDateString("ko-KR")}

\u26A0\uFE0F \uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC73C\uBA70, \uB2E8\uC5B4\uC7A5\uACFC \uBAA8\uB4E0 \uB2E8\uC5B4\uAC00 \uC601\uAD6C\uC801\uC73C\uB85C \uC0AD\uC81C\uB429\uB2C8\uB2E4.`,
        async () => {
          try {
            await this.databaseManager.deleteBook(this.selectedBookId);
            this.selectedBookId = "default";
            await this.databaseManager.setCurrentBook("default");
            new import_obsidian6.Notice(`"${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`);
            this.onOpen();
          } catch (e) {
            new import_obsidian6.Notice("\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uC2E4\uD328: " + e.message);
          }
        }
      );
      confirmModal.open();
    });
  }
  createNavigation() {
    const navEl = this.contentEl.createEl("div", { cls: "manager-navigation" });
    const listBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uBAA9\uB85D", cls: "nav-button" });
    listBtn.addEventListener("click", () => {
      this.currentView = "list";
      this.showCurrentView();
    });
    const statsBtn = navEl.createEl("button", { text: "\uD1B5\uACC4", cls: "nav-button" });
    statsBtn.addEventListener("click", () => {
      this.currentView = "statistics";
      this.showCurrentView();
    });
    const addBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "nav-button" });
    addBtn.addEventListener("click", () => {
      this.currentView = "add";
      this.showCurrentView();
    });
    const startLearningButton = navEl.createEl("button", {
      text: "\uC804\uCCB4 \uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      cls: "nav-button"
    });
    startLearningButton.addEventListener("click", () => {
      this.close();
      new VocabularyModal(this.app, this.plugin).open();
    });
  }
  showCurrentView() {
    const contentEl = this.contentEl.querySelector(".manager-content") || this.contentEl.createEl("div", { cls: "manager-content" });
    contentEl.empty();
    switch (this.currentView) {
      case "list":
        this.showWordList(contentEl);
        break;
      case "statistics":
        this.showStatistics(contentEl);
        break;
      case "add":
        this.showAddWord(contentEl);
        break;
    }
  }
  showWordList(container2) {
    const words = this.databaseManager.getAllWords();
    if (words.length === 0) {
      container2.createEl("p", {
        text: "\uB2E8\uC5B4\uC7A5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4. \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD574\uBCF4\uC138\uC694!",
        cls: "empty-message"
      });
      return;
    }
    const searchEl = container2.createEl("div", { cls: "search-section" });
    const searchInput = searchEl.createEl("input", {
      type: "text",
      placeholder: "\uB2E8\uC5B4 \uAC80\uC0C9...",
      cls: "search-input"
    });
    const selectionControls = searchEl.createEl("div", { cls: "selection-controls" });
    const allSelected = this.selectedWords.size === words.length && words.length > 0;
    const selectAllBtn = selectionControls.createEl("button", {
      text: allSelected ? "\uC804\uCCB4 \uD574\uC81C" : "\uC804\uCCB4 \uC120\uD0DD",
      cls: "selection-button"
    });
    selectAllBtn.addEventListener("click", () => {
      if (this.selectedWords.size === words.length) {
        this.selectedWords.clear();
      } else {
        this.selectedWords.clear();
        words.forEach((word) => this.selectedWords.add(word.word));
      }
      this.showCurrentView();
    });
    const fetchSelectedButton = selectionControls.createEl("button", {
      text: "\uC120\uD0DD \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-selected-button"
    });
    fetchSelectedButton.addEventListener("click", () => {
      if (this.selectedWords.size === 0) {
        new import_obsidian6.Notice("\uC120\uD0DD\uB41C \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      this.showFetchSelectedMeaningsModal();
    });
    const wordListEl = container2.createEl("div", { cls: "word-list" });
    const renderWords = (filteredWords) => {
      wordListEl.empty();
      filteredWords.forEach((word) => {
        this.createWordItem(wordListEl, word);
      });
    };
    searchInput.addEventListener("input", (e) => {
      const query = e.target.value;
      const filteredWords = query ? this.databaseManager.searchWords(query) : words;
      renderWords(filteredWords);
    });
    renderWords(words);
  }
  createWordItem(container2, word) {
    const wordEl = container2.createEl("div", { cls: "word-item" });
    const checkbox = wordEl.createEl("input", {
      type: "checkbox",
      cls: "word-checkbox"
    });
    checkbox.checked = this.selectedWords.has(word.word);
    checkbox.addEventListener("change", (e) => {
      const isChecked = e.target.checked;
      if (isChecked) {
        this.selectedWords.add(word.word);
      } else {
        this.selectedWords.delete(word.word);
      }
    });
    const wordHeader = wordEl.createEl("div", { cls: "word-header" });
    const wordTitleEl = wordHeader.createEl("h3", { cls: "word-title" });
    if (word.pronunciation && word.pronunciation.trim()) {
      wordTitleEl.innerHTML = `${word.word} <span class="pronunciation">[${word.pronunciation}]</span>`;
    } else {
      wordTitleEl.textContent = word.word;
    }
    const difficultyBadge = wordHeader.createEl("span", {
      text: this.getDifficultyText(word.difficulty),
      cls: `difficulty-badge ${word.difficulty}`
    });
    const wordContent = wordEl.createEl("div", { cls: "word-content" });
    wordContent.createEl("p", {
      text: `\uB73B: ${word.meanings.join(", ")}`,
      cls: "word-meanings"
    });
    wordContent.createEl("p", {
      text: `\uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}\uD68C`,
      cls: "review-count"
    });
    if (word.lastReviewed) {
      wordContent.createEl("p", {
        text: `\uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${formatDate(word.lastReviewed)}`,
        cls: "last-reviewed"
      });
    }
    const wordActions = wordEl.createEl("div", { cls: "word-actions" });
    if (this.plugin.settings.enableAdvancedFeatures) {
      const fetchButton = wordActions.createEl("button", {
        text: "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
        cls: "action-button fetch-single-button"
      });
      fetchButton.addEventListener("click", () => {
        this.fetchSingleWordMeaning(word);
      });
    }
    const deleteBtn = wordActions.createEl("button", {
      text: "\uC0AD\uC81C",
      cls: "action-button delete-button"
    });
    deleteBtn.addEventListener("click", async () => {
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4 \uC0AD\uC81C",
        `"${word.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,
        async () => {
          await this.databaseManager.removeWord(word.word);
          this.showCurrentView();
        }
      );
      confirmModal.open();
    });
  }
  showStatistics(container2) {
    const stats = this.databaseManager.getStatistics();
    const statsGrid = container2.createEl("div", { cls: "stats-grid" });
    const basicStats = statsGrid.createEl("div", { cls: "stats-section" });
    basicStats.createEl("h3", { text: "\uAE30\uBCF8 \uD1B5\uACC4", cls: "stats-title" });
    this.createStatItem(basicStats, "\uCD1D \uB2E8\uC5B4 \uC218", stats.totalWords.toString());
    this.createStatItem(basicStats, "\uCD1D \uBCF5\uC2B5 \uD69F\uC218", stats.totalReviews.toString());
    this.createStatItem(basicStats, "\uC5F0\uC18D \uD559\uC2B5\uC77C", `${stats.streakDays}\uC77C`);
    this.createStatItem(basicStats, "\uD3C9\uADE0 \uB09C\uC774\uB3C4", stats.averageDifficulty.toFixed(1));
    const difficultyStats = statsGrid.createEl("div", { cls: "stats-section" });
    difficultyStats.createEl("h3", { text: "\uB09C\uC774\uB3C4\uBCC4 \uBD84\uD3EC", cls: "stats-title" });
    this.createStatItem(difficultyStats, "\uC26C\uC6C0", stats.wordsByDifficulty.easy.toString());
    this.createStatItem(difficultyStats, "\uC88B\uC74C", stats.wordsByDifficulty.good.toString());
    this.createStatItem(difficultyStats, "\uC5B4\uB824\uC6C0", stats.wordsByDifficulty.hard.toString());
    const activityStats = statsGrid.createEl("div", { cls: "stats-section" });
    activityStats.createEl("h3", { text: "\uCD5C\uADFC 7\uC77C \uD65C\uB3D9", cls: "stats-title" });
    stats.recentActivity.forEach((activity) => {
      const date = new Date(activity.date).toLocaleDateString("ko-KR", {
        month: "short",
        day: "numeric"
      });
      this.createStatItem(
        activityStats,
        date,
        `\uD559\uC2B5: ${activity.wordsStudied}, \uBCF5\uC2B5: ${activity.reviewsCompleted}`
      );
    });
  }
  createStatItem(container2, label, value) {
    const statEl = container2.createEl("div", { cls: "stat-item" });
    statEl.createEl("span", { text: label, cls: "stat-label" });
    statEl.createEl("span", { text: value, cls: "stat-value" });
  }
  showAddWord(container2) {
    const addSection = container2.createEl("div", { cls: "add-word-section" });
    addSection.createEl("h3", { text: "\uC0C8 \uB2E8\uC5B4 \uCD94\uAC00", cls: "section-title" });
    const inputEl = addSection.createEl("div", { cls: "word-input-group" });
    const wordInput = inputEl.createEl("input", {
      type: "text",
      placeholder: "\uC601\uB2E8\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694 (\uC608: beautiful)",
      cls: "word-input"
    });
    const addButton = inputEl.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button"
    });
    const addWord = async () => {
      const word = wordInput.value.trim();
      if (!word) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",
          cls: "error-message"
        });
        return;
      }
      try {
        const wordData = await this.wordService.getWordData(word);
        const vocabularyCard = {
          ...wordData,
          reviewCount: 0,
          difficulty: "good",
          lastReviewed: null,
          addedDate: (/* @__PURE__ */ new Date()).toISOString(),
          bookId: this.selectedBookId
        };
        await this.databaseManager.addWord(vocabularyCard);
        wordInput.value = "";
        addSection.createEl("p", {
          text: `"${word}" \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`,
          cls: "success-message"
        });
        setTimeout(() => {
          const successMsg = addSection.querySelector(".success-message");
          if (successMsg)
            successMsg.remove();
        }, 3e3);
      } catch (error) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
          cls: "error-message"
        });
      }
    };
    addButton.addEventListener("click", addWord);
    wordInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        addWord();
      }
    });
  }
  getDifficultyText(difficulty) {
    switch (difficulty) {
      case "easy":
        return "\uC26C\uC6C0";
      case "good":
        return "\uC88B\uC74C";
      case "hard":
        return "\uC5B4\uB824\uC6C0";
      default:
        return "\uC88B\uC74C";
    }
  }
  startReview(words) {
    const reviewModal = new VocabularyReviewModal(this.app, this.plugin, words);
    reviewModal.open();
  }
  showFetchSelectedMeaningsModal() {
    const selectedWordList = Array.from(this.selectedWords);
    new FetchSelectedMeaningsModal(this.app, this.plugin, selectedWordList).open();
  }
  async fetchSingleWordMeaning(word) {
    if (!this.hasValidApiKey()) {
      new import_obsidian6.Notice("LLM API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      `"${word.word}" \uB2E8\uC5B4\uC758 \uB73B\uC744 \uC0C8\uB85C \uAC00\uC838\uC624\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? \uAE30\uC874 \uC815\uBCF4\uAC00\uC5B4\uC50C\uC6CC\uC9D1\uB2C8\uB2E4.`,
      async () => {
        try {
          new import_obsidian6.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911...`);
          const llmResponse = await this.plugin.llmService.getWordDetails(word.word);
          if (llmResponse.success) {
            const wordDetail = llmResponse.data;
            const wordData = this.plugin.llmService.convertToWordData(wordDetail);
            const updatedWord = {
              ...word,
              meanings: wordData.meanings,
              examples: wordData.examples,
              similarWords: wordData.similarWords
            };
            await this.plugin.databaseManager.updateWordData(word.word, updatedWord);
            new import_obsidian6.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
            this.showCurrentView();
          } else {
            new import_obsidian6.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328: ${llmResponse.error}`);
          }
        } catch (error) {
          console.error(`\uB2E8\uC5B4 "${word.word}" \uCC98\uB9AC \uC2E4\uD328:`, error);
          new import_obsidian6.Notice(`"${word.word}" \uB2E8\uC5B4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.`);
        }
      }
    );
    confirmModal.open();
  }
  async refreshBookSelector() {
    await this.databaseManager.loadAllBooks();
    const headerEl = this.contentEl.querySelector(".manager-header");
    if (headerEl) {
      const bookSelect = headerEl.querySelector(".book-select-dropdown");
      if (bookSelect) {
        const currentValue = bookSelect.value;
        const books = this.databaseManager.getAllBooks();
        bookSelect.innerHTML = "";
        books.forEach((book) => {
          const option = document.createElement("option");
          option.value = book.id;
          option.text = book.name;
          if (book.id === currentValue || book.id === this.selectedBookId) {
            option.selected = true;
            this.selectedBookId = book.id;
          }
          bookSelect.appendChild(option);
        });
      }
    }
    this.showCurrentView();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
};
var VocabularyReviewModal = class extends import_obsidian6.Modal {
  constructor(app, plugin, words) {
    super(app);
    this.currentIndex = 0;
    this.showAnswer = false;
    this.plugin = plugin;
    this.words = words;
  }
  onOpen() {
    if (this.words.length === 0) {
      this.close();
      return;
    }
    this.showCurrentWord();
  }
  showCurrentWord() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const currentWord = this.words[this.currentIndex];
    const progressEl = contentEl.createEl("div", { cls: "review-progress" });
    progressEl.createEl("span", {
      text: `${this.currentIndex + 1} / ${this.words.length}`,
      cls: "progress-text"
    });
    const cardEl = contentEl.createEl("div", { cls: "review-card" });
    const deleteButton = cardEl.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const wordEl = cardEl.createEl("h1", { cls: "review-word" });
    if (currentWord.pronunciation && currentWord.pronunciation.trim()) {
      wordEl.innerHTML = `${currentWord.word} <span class="pronunciation">[${currentWord.pronunciation}]</span>`;
    } else {
      wordEl.textContent = currentWord.word;
    }
    if (!this.showAnswer) {
      if (currentWord.similarWords.length > 0) {
        const similarEl = cardEl.createEl("div", { cls: "similar-words" });
        similarEl.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
        const similarList = similarEl.createEl("ul");
        currentWord.similarWords.forEach((word) => {
          similarList.createEl("li", { text: word });
        });
      }
      if (currentWord.examples.length > 0) {
        const examplesEl = cardEl.createEl("div", { cls: "examples" });
        examplesEl.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
        currentWord.examples.forEach((example) => {
          examplesEl.createEl("p", { text: example.english, cls: "example" });
        });
      }
      const checkBtn = cardEl.createEl("button", {
        text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30",
        cls: "check-answer-button"
      });
      checkBtn.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCurrentWord();
      });
    } else {
      const answerEl = cardEl.createEl("div", { cls: "answer-section" });
      answerEl.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerEl.createEl("ul");
      currentWord.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      if (currentWord.examples.length > 0) {
        answerEl.createEl("h3", { text: "\uC608\uBB38 \uBC88\uC5ED:" });
        currentWord.examples.forEach((example) => {
          answerEl.createEl("p", { text: example.korean, cls: "translation" });
        });
      }
      this.createReviewButtons(cardEl);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons" });
    const hardBtn = reviewSection.createEl("button", { text: "\uC5B4\uB824\uC6C0", cls: "review-btn hard" });
    const goodBtn = reviewSection.createEl("button", { text: "\uC88B\uC74C", cls: "review-btn good" });
    const easyBtn = reviewSection.createEl("button", { text: "\uC26C\uC6C0", cls: "review-btn easy" });
    hardBtn.addEventListener("click", () => this.handleReview("hard"));
    goodBtn.addEventListener("click", () => this.handleReview("good"));
    easyBtn.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentWord = this.words[this.currentIndex];
    await this.plugin.databaseManager.updateWord(currentWord.word, difficulty);
    this.currentIndex++;
    this.showAnswer = false;
    if (this.currentIndex >= this.words.length) {
      this.showCompletion();
    } else {
      this.showCurrentWord();
    }
  }
  async handleDeleteCard() {
    const currentWord = this.words[this.currentIndex];
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentWord.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentWord.word);
          this.words.splice(this.currentIndex, 1);
          if (this.words.length === 0) {
            this.showCompletion();
            return;
          }
          if (this.currentIndex >= this.words.length) {
            this.currentIndex = this.words.length - 1;
          }
          this.showAnswer = false;
          this.showCurrentWord();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian6.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletion() {
    const { contentEl } = this;
    contentEl.empty();
    const completionEl = contentEl.createEl("div", { cls: "completion" });
    completionEl.createEl("h2", { text: "\uBCF5\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: "\uBAA8\uB4E0 \uB2E8\uC5B4\uB97C \uBCF5\uC2B5\uD588\uC2B5\uB2C8\uB2E4." });
    const closeBtn = completionEl.createEl("button", { text: "\uB2EB\uAE30", cls: "close-btn" });
    closeBtn.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FetchSelectedMeaningsModal = class extends import_obsidian6.Modal {
  constructor(app, plugin, selectedWords) {
    super(app);
    this.isProcessing = false;
    this.plugin = plugin;
    this.selectedWords = selectedWords;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("fetch-selected-meanings-modal");
    contentEl.createEl("h2", {
      text: `\uC120\uD0DD\uB41C ${this.selectedWords.length}\uAC1C \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30`,
      cls: "modal-title"
    });
    contentEl.createEl("p", {
      text: `\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4\uC758 \uC0C1\uC138 \uC815\uBCF4\uB97C LLM API\uB97C \uD1B5\uD574 \uAC00\uC838\uC635\uB2C8\uB2E4.`,
      cls: "modal-description"
    });
    const wordListEl = contentEl.createEl("div", { cls: "selected-words-list" });
    wordListEl.createEl("h3", { text: "\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4:" });
    const wordsContainer = wordListEl.createEl("div", { cls: "words-container" });
    this.selectedWords.forEach((word) => {
      wordsContainer.createEl("span", {
        text: word,
        cls: "selected-word-tag"
      });
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const fetchButton = buttonSection.createEl("button", {
      text: "\uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-button"
    });
    fetchButton.addEventListener("click", () => {
      this.fetchSelectedMeanings();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      this.close();
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section" });
    progressSection.style.display = "none";
    const progressText = progressSection.createEl("div", { cls: "progress-text" });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section" });
    resultSection.style.display = "none";
  }
  async fetchSelectedMeanings() {
    if (this.isProcessing)
      return;
    this.isProcessing = true;
    this.showProgress(this.selectedWords.length);
    try {
      const result = await this.plugin.llmService.getMultipleWordDetails(this.selectedWords);
      if (result.success && Array.isArray(result.data)) {
        const successWords = [];
        const failedWords = [];
        for (const wordData of result.data) {
          try {
            if (wordData.word && wordData.meanings && wordData.meanings.length > 0) {
              const existingWord = this.plugin.databaseManager.getWord(wordData.word);
              if (existingWord) {
                const updatedWord = {
                  ...existingWord,
                  pronunciation: wordData.pronunciation || "",
                  meanings: wordData.meanings,
                  examples: wordData.examples || [],
                  similarWords: wordData.similarWords || []
                };
                await this.plugin.databaseManager.updateWordData(wordData.word, updatedWord);
                successWords.push(wordData.word);
              }
            } else {
              failedWords.push(wordData.word);
            }
          } catch (error) {
            console.error(`\uB2E8\uC5B4 "${wordData.word}" \uC5C5\uB370\uC774\uD2B8 \uC2E4\uD328:`, error);
            failedWords.push(wordData.word);
          }
        }
        this.hideProgress();
        this.showResults({ success: successWords, failed: failedWords });
        if (successWords.length > 0) {
          new import_obsidian6.Notice(`${successWords.length}\uAC1C\uC758 \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD588\uC2B5\uB2C8\uB2E4!`);
        }
      } else {
        this.hideProgress();
        new import_obsidian6.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + (result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"));
      }
    } catch (error) {
      this.hideProgress();
      new import_obsidian6.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + error.message);
    } finally {
      this.isProcessing = false;
    }
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.style.display = "block";
    progressText.textContent = `\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911... (0/${totalWords})`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    if (progressSection) {
      progressSection.style.display = "none";
    }
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.style.display = "block";
    resultSection.empty();
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 10) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 10) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", { text: "\uB2EB\uAE30", cls: "close-button" });
    closeButton.addEventListener("click", () => this.close());
  }
  onClose() {
    this.isProcessing = false;
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal2 = class extends import_obsidian6.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/word-management/ui/AddWordsModal.ts
var import_obsidian7 = require("obsidian");

// src/shared/validation.ts
function validateString(input, options = {}) {
  const {
    minLength = 0,
    maxLength = 1e3,
    allowEmpty = false,
    pattern,
    fieldName = "\uC785\uB825\uAC12"
  } = options;
  if (!input || input.trim().length === 0) {
    if (allowEmpty) {
      return { isValid: true, sanitized: "" };
    }
    return { isValid: false, error: `${fieldName}\uC740(\uB294) \uD544\uC218 \uC785\uB825\uAC12\uC785\uB2C8\uB2E4.` };
  }
  const trimmed = input.trim();
  if (trimmed.length < minLength) {
    return {
      isValid: false,
      error: `${fieldName}\uC740(\uB294) \uCD5C\uC18C ${minLength}\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.`
    };
  }
  if (trimmed.length > maxLength) {
    return {
      isValid: false,
      error: `${fieldName}\uC740(\uB294) \uCD5C\uB300 ${maxLength}\uC790 \uC774\uD558\uC5EC\uC57C \uD569\uB2C8\uB2E4.`
    };
  }
  if (pattern && !pattern.test(trimmed)) {
    return {
      isValid: false,
      error: `${fieldName}\uC758 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.`
    };
  }
  return { isValid: true, sanitized: trimmed };
}
function validateWord(word) {
  const validation = validateString(word, {
    minLength: 1,
    maxLength: 50,
    pattern: /^[a-zA-Z\s'-]+$/,
    fieldName: "\uB2E8\uC5B4"
  });
  if (!validation.isValid) {
    return validation;
  }
  const sanitized = validation.sanitized.replace(/[^\w\s'-]/g, "").replace(/\s+/g, " ");
  return { isValid: true, sanitized };
}
function sanitizeMarkdown(text) {
  if (!text)
    return "";
  return text.replace(/<script[^>]*>[\s\S]*?<\/script>/gi, "").replace(/<iframe[^>]*>[\s\S]*?<\/iframe>/gi, "").replace(/javascript:/gi, "").replace(/on\w+\s*=/gi, "").trim();
}
function validateBatch(items, validator) {
  const valid = [];
  const invalid = [];
  for (const item of items) {
    const result = validator(item);
    if (result.isValid) {
      valid.push(item);
    } else {
      invalid.push({ item, error: result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958" });
    }
  }
  return { valid, invalid };
}

// src/shared/CancellationToken.ts
var CancellationTokenSource = class {
  constructor() {
    this._isCancelled = false;
    this._callbacks = [];
  }
  get token() {
    return {
      get isCancelled() {
        return this._isCancelled;
      },
      throwIfCancelled: () => {
        if (this._isCancelled) {
          throw new CancellationError("Operation was cancelled");
        }
      },
      onCancelled: (callback) => {
        if (this._isCancelled) {
          callback();
        } else {
          this._callbacks.push(callback);
        }
      }
    };
  }
  cancel() {
    if (this._isCancelled)
      return;
    this._isCancelled = true;
    this._callbacks.forEach((callback) => {
      try {
        callback();
      } catch (error) {
        console.error("Error in cancellation callback:", error);
      }
    });
    this._callbacks.clear();
  }
  dispose() {
    this._callbacks.clear();
  }
};
var CancellationError = class extends Error {
  constructor(message = "Operation was cancelled") {
    super(message);
    this.name = "CancellationError";
  }
};
function delay(ms, cancellationToken) {
  return new Promise((resolve, reject) => {
    if (cancellationToken == null ? void 0 : cancellationToken.isCancelled) {
      reject(new CancellationError());
      return;
    }
    const timeoutId = setTimeout(() => {
      resolve();
    }, ms);
    cancellationToken == null ? void 0 : cancellationToken.onCancelled(() => {
      clearTimeout(timeoutId);
      reject(new CancellationError());
    });
  });
}
async function withCancellation(promise, cancellationToken) {
  if (!cancellationToken) {
    return promise;
  }
  return new Promise((resolve, reject) => {
    if (cancellationToken.isCancelled) {
      reject(new CancellationError());
      return;
    }
    let isResolved = false;
    promise.then(
      (value) => {
        if (!isResolved) {
          isResolved = true;
          resolve(value);
        }
      },
      (error) => {
        if (!isResolved) {
          isResolved = true;
          reject(error);
        }
      }
    );
    cancellationToken.onCancelled(() => {
      if (!isResolved) {
        isResolved = true;
        reject(new CancellationError());
      }
    });
  });
}
async function processBatchWithCancellation(items, processor, options = {}) {
  const {
    batchSize = 10,
    delay: delayMs = 100,
    cancellationToken,
    onProgress
  } = options;
  const results = [];
  for (let i = 0; i < items.length; i += batchSize) {
    cancellationToken == null ? void 0 : cancellationToken.throwIfCancelled();
    const batch = items.slice(i, i + batchSize);
    const batchPromises = batch.map(
      (item, batchIndex) => processor(item, i + batchIndex)
    );
    try {
      const batchResults = await withCancellation(
        Promise.all(batchPromises),
        cancellationToken
      );
      results.push(...batchResults);
      onProgress == null ? void 0 : onProgress(Math.min(i + batchSize, items.length), items.length);
      if (i + batchSize < items.length && delayMs > 0) {
        await delay(delayMs, cancellationToken);
      }
    } catch (error) {
      if (error instanceof CancellationError) {
        throw error;
      }
      throw error;
    }
  }
  return results;
}

// src/features/word-management/ui/AddWordsModal.ts
var AddWordsModal = class extends import_obsidian7.Modal {
  constructor(app, plugin) {
    super(app);
    this.isProcessing = false;
    this.cancellationTokenSource = null;
    this.plugin = plugin;
    this.wordService = new WordService();
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-words-modal");
    await this.plugin.databaseManager.loadAllBooks();
    const bookSelectSection = contentEl.createEl("div", { cls: "book-select-section" });
    const bookLabel = bookSelectSection.createEl("label", { text: "\uB2E8\uC5B4\uC7A5 \uC120\uD0DD", cls: "book-select-label" });
    const bookSelectContainer = bookSelectSection.createEl("div", { cls: "book-select-container" });
    this.bookSelect = bookSelectContainer.createEl("select", { cls: "book-select-dropdown" });
    const addBookButton = bookSelectContainer.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00",
      cls: "add-book-button"
    });
    addBookButton.addEventListener("click", () => this.openAddBookModal());
    await this.updateBookSelect();
    this.bookSelect.addEventListener("change", (e) => {
      const selectedBookId = e.target.value;
      this.plugin.databaseManager.setCurrentBook(selectedBookId);
    });
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uCD94\uAC00\uD560 \uC601\uB2E8\uC5B4\uB4E4\uC744 \uC785\uB825\uD558\uC138\uC694. \uAC01 \uB2E8\uC5B4\uB294 \uC0C8 \uC904\uB85C \uAD6C\uBD84\uB429\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const inputSection = contentEl.createEl("div", { cls: "input-section" });
    const textarea = inputSection.createEl("textarea", {
      placeholder: "beautiful\nhappy\nlearn\nstudy\nwork\n...",
      cls: "words-textarea"
    });
    textarea.setAttribute("rows", "10");
    const exampleBtn = inputSection.createEl("button", {
      text: "\uC608\uC2DC \uB2E8\uC5B4\uB4E4 \uBD88\uB7EC\uC624\uAE30",
      cls: "example-button"
    });
    exampleBtn.addEventListener("click", () => {
      textarea.value = "beautiful\nhappy\nlearn\nstudy\nwork\nimportant\nsuccess\nknowledge\nexperience\nfreedom";
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const addButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button primary"
    });
    addButton.addEventListener("click", () => this.addWords(textarea.value, this.bookSelect.value));
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      if (this.isProcessing) {
        this.cancelOperation();
      } else {
        this.close();
      }
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section" });
    progressSection.style.display = "none";
    const progressText = progressSection.createEl("p", {
      text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911...",
      cls: "progress-text"
    });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section" });
    resultSection.style.display = "none";
    textarea.addEventListener("keydown", (e) => {
      if (e.ctrlKey && e.key === "Enter") {
        this.addWords(textarea.value, this.bookSelect.value);
      }
    });
    textarea.focus();
  }
  async addWords(inputText, bookId) {
    var _a;
    if (this.isProcessing)
      return;
    const words = this.parseWords(inputText);
    if (words.length === 0) {
      new import_obsidian7.Notice("\uCD94\uAC00\uD560 \uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    this.isProcessing = true;
    this.cancellationTokenSource = new CancellationTokenSource();
    this.showProgress(words.length);
    this.updateCancelButton(true);
    const results = {
      success: [],
      failed: [],
      alreadyExists: []
    };
    try {
      await processBatchWithCancellation(
        words,
        async (word, index) => {
          const existingWord = this.plugin.databaseManager.getWord(word);
          if (existingWord) {
            results.alreadyExists.push(word);
            return;
          }
          try {
            const wordData = await this.wordService.getWordData(word);
            const vocabularyCard = {
              ...wordData,
              reviewCount: 0,
              difficulty: "good",
              lastReviewed: null,
              addedDate: (/* @__PURE__ */ new Date()).toISOString(),
              bookId
            };
            await this.plugin.databaseManager.addWord(vocabularyCard);
            results.success.push(word);
          } catch (error) {
            results.failed.push(word);
            console.error(`\uB2E8\uC5B4 "${word}" \uCD94\uAC00 \uC2E4\uD328:`, error);
          }
        },
        {
          batchSize: getConfigValue(CONFIG_PATHS.BATCH_DEFAULT_SIZE),
          delay: getConfigValue(CONFIG_PATHS.BATCH_DELAY),
          cancellationToken: this.cancellationTokenSource.token,
          onProgress: (current, total) => {
            this.updateProgress(current, total, `\uCC98\uB9AC \uC911... (${current}/${total})`);
          }
        }
      );
    } catch (error) {
      if (error instanceof CancellationError) {
        new import_obsidian7.Notice("\uC791\uC5C5\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
      } else {
        console.error("\uBC30\uCE58 \uCC98\uB9AC \uC911 \uC624\uB958:", error);
        new import_obsidian7.Notice("\uB2E8\uC5B4 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      }
    } finally {
      this.isProcessing = false;
      (_a = this.cancellationTokenSource) == null ? void 0 : _a.dispose();
      this.cancellationTokenSource = null;
      this.hideProgress();
      this.updateCancelButton(false);
      this.showResults(results);
    }
  }
  parseWords(inputText) {
    const sanitizedInput = sanitizeMarkdown(inputText);
    const rawWords = sanitizedInput.split("\n").map((word) => word.trim()).filter((word) => word.length > 0);
    const validation = validateBatch(rawWords, (word) => validateWord(word));
    if (validation.invalid.length > 0) {
      const invalidWords = validation.invalid.slice(0, 5).map((item) => item.item).join(", ");
      const moreCount = validation.invalid.length > 5 ? ` \uC678 ${validation.invalid.length - 5}\uAC1C` : "";
      new import_obsidian7.Notice(`\uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uB2E8\uC5B4\uAC00 \uC81C\uC678\uB418\uC5C8\uC2B5\uB2C8\uB2E4: ${invalidWords}${moreCount}`);
    }
    const validWords = validation.valid.map((word) => validateWord(word).sanitized).map((word) => word.toLowerCase()).filter((word, index, array) => array.indexOf(word) === index);
    return validWords;
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.style.display = "block";
    progressText.textContent = `\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911... (0/${totalWords})`;
  }
  updateProgress(current, total, message) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    const progressFill = progressSection.querySelector(".progress-fill");
    const percentage = current / total * 100;
    progressText.textContent = `${message} (${current}/${total})`;
    progressFill.style.width = `${percentage}%`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    progressSection.style.display = "none";
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.style.display = "block";
    resultSection.empty();
    const totalProcessed = results.success.length + results.failed.length + results.alreadyExists.length;
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 5) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.alreadyExists.length > 0) {
      const existsEl = summaryEl.createEl("div", { cls: "result-item warning" });
      existsEl.createEl("span", {
        text: `\u26A0\uFE0F \uC774\uBBF8 \uC874\uC7AC: ${results.alreadyExists.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.alreadyExists.length <= 5) {
        existsEl.createEl("p", {
          text: results.alreadyExists.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 5) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", {
      text: "\uB2EB\uAE30",
      cls: "close-button"
    });
    closeButton.addEventListener("click", () => this.close());
    const addMoreButton = buttonSection.createEl("button", {
      text: "\uB354 \uCD94\uAC00\uD558\uAE30",
      cls: "add-more-button"
    });
    addMoreButton.addEventListener("click", () => {
      resultSection.style.display = "none";
      const textarea = this.contentEl.querySelector(".words-textarea");
      textarea.value = "";
      textarea.focus();
    });
    if (results.success.length > 0) {
      new import_obsidian7.Notice(`${results.success.length}\uAC1C\uC758 \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
    }
  }
  cancelOperation() {
    if (this.cancellationTokenSource) {
      this.cancellationTokenSource.cancel();
      new import_obsidian7.Notice("\uC791\uC5C5 \uCDE8\uC18C \uC911...");
    }
  }
  updateCancelButton(isProcessing) {
    const cancelButton = this.contentEl.querySelector(".cancel-button");
    if (cancelButton) {
      cancelButton.textContent = isProcessing ? "\uC791\uC5C5 \uCDE8\uC18C" : "\uCDE8\uC18C";
      cancelButton.classList.toggle("danger", isProcessing);
    }
  }
  onClose() {
    var _a;
    if (this.isProcessing && this.cancellationTokenSource) {
      this.cancellationTokenSource.cancel();
    }
    this.isProcessing = false;
    (_a = this.cancellationTokenSource) == null ? void 0 : _a.dispose();
    this.cancellationTokenSource = null;
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  openAddBookModal() {
    new AddBookModal(this.app, this.plugin).open();
  }
  async handleBookCreated(event) {
    await this.updateBookSelect();
  }
  async updateBookSelect() {
    await this.plugin.databaseManager.loadAllBooks();
    const books = this.plugin.databaseManager.getAllBooks();
    this.bookSelect.innerHTML = "";
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      this.bookSelect.appendChild(option);
    });
  }
};

// src/shared/container/DIContainer.ts
var DIContainer = class {
  constructor() {
    this.services = /* @__PURE__ */ new Map();
    this.instances = /* @__PURE__ */ new Map();
  }
  register(name, implementation, options = {}) {
    var _a, _b;
    this.services.set(name, {
      implementation,
      singleton: (_a = options.singleton) != null ? _a : true,
      dependencies: (_b = options.dependencies) != null ? _b : []
    });
  }
  resolve(name) {
    const service = this.services.get(name);
    if (!service) {
      throw new Error(`Service '${name}' not registered`);
    }
    if (service.singleton && this.instances.has(name)) {
      return this.instances.get(name);
    }
    const dependencies = service.dependencies.map((dep) => this.resolve(dep));
    let instance;
    if (this.isConstructor(service.implementation)) {
      instance = new service.implementation(...dependencies);
    } else {
      instance = service.implementation(...dependencies);
    }
    if (service.singleton) {
      this.instances.set(name, instance);
    }
    return instance;
  }
  registerInstance(name, instance) {
    this.instances.set(name, instance);
    this.services.set(name, {
      implementation: () => instance,
      singleton: true,
      dependencies: []
    });
  }
  has(name) {
    return this.services.has(name);
  }
  clear() {
    this.services.clear();
    this.instances.clear();
  }
  isConstructor(implementation) {
    return implementation.prototype && implementation.prototype.constructor === implementation;
  }
};
var container = new DIContainer();

// src/core/entities/Vocabulary.ts
var VocabularyCard = class _VocabularyCard {
  constructor(word, pronunciation, meanings, similarWords, examples, reviewCount, difficulty, lastReviewed, addedDate, bookId) {
    this.word = word;
    this.pronunciation = pronunciation;
    this.meanings = meanings;
    this.similarWords = similarWords;
    this.examples = examples;
    this.reviewCount = reviewCount;
    this.difficulty = difficulty;
    this.lastReviewed = lastReviewed;
    this.addedDate = addedDate;
    this.bookId = bookId;
  }
  // 팩토리 메서드: WordData로부터 VocabularyCard 생성
  static fromWordData(wordData, bookId) {
    return new _VocabularyCard(
      wordData.word,
      wordData.pronunciation,
      wordData.meanings,
      wordData.similarWords,
      wordData.examples,
      0,
      // 초기 복습 횟수
      "good",
      // 초기 난이도
      null,
      // 초기 복습 날짜
      (/* @__PURE__ */ new Date()).toISOString(),
      // 추가 날짜
      bookId
    );
  }
  // 비즈니스 로직: 복습 수행
  review(newDifficulty) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount + 1,
      newDifficulty,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어 정보 업데이트
  updateWordData(wordData) {
    var _a, _b, _c, _d;
    return new _VocabularyCard(
      this.word,
      (_a = wordData.pronunciation) != null ? _a : this.pronunciation,
      (_b = wordData.meanings) != null ? _b : this.meanings,
      (_c = wordData.similarWords) != null ? _c : this.similarWords,
      (_d = wordData.examples) != null ? _d : this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어장 이동
  moveToBook(newBookId) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      newBookId
    );
  }
  // 비즈니스 로직: 복습이 필요한지 확인
  needsReview(reviewInterval = 1) {
    if (!this.lastReviewed)
      return true;
    const lastReviewDate = new Date(this.lastReviewed);
    const now = /* @__PURE__ */ new Date();
    const daysDiff = Math.floor((now.getTime() - lastReviewDate.getTime()) / (1e3 * 60 * 60 * 24));
    const difficultyMultiplier = {
      "hard": 0.5,
      "good": 1,
      "easy": 2
    };
    const adjustedInterval = reviewInterval * difficultyMultiplier[this.difficulty];
    return daysDiff >= adjustedInterval;
  }
  // 비즈니스 로직: 학습 진행도 계산 (0-100)
  getProgressPercentage() {
    const maxReviews = 10;
    const progress = Math.min(this.reviewCount / maxReviews, 1) * 100;
    const difficultyBonus = {
      "easy": 20,
      "good": 10,
      "hard": 0
    };
    return Math.min(progress + difficultyBonus[this.difficulty], 100);
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      word: this.word,
      pronunciation: this.pronunciation,
      meanings: this.meanings,
      similarWords: this.similarWords,
      examples: this.examples,
      reviewCount: this.reviewCount,
      difficulty: this.difficulty,
      lastReviewed: this.lastReviewed,
      addedDate: this.addedDate,
      bookId: this.bookId
    };
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.word || this.word.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uAC00 \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
    }
    if (this.meanings.length === 0) {
      errors.push("\uB2E8\uC5B4\uC758 \uB73B\uC774 \uD558\uB098 \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (!this.bookId || this.bookId.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 ID\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  static create(data) {
    var _a;
    return new _VocabularyCard(
      data.word,
      data.pronunciation || "",
      [data.meaning],
      // meanings array
      [],
      // similarWords
      ((_a = data.examples) == null ? void 0 : _a.map((ex) => ({ english: ex, korean: "" }))) || [],
      // examples with Example type
      0,
      // reviewCount
      "good",
      // difficulty
      null,
      // lastReviewed
      (/* @__PURE__ */ new Date()).toISOString(),
      // addedDate
      data.bookId || "default"
    );
  }
};

// src/core/use-cases/AddWordUseCase.ts
var AddWordUseCase = class {
  constructor(vocabularyRepository, bookRepository, wordService) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
    this.wordService = wordService;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingWord = await this.vocabularyRepository.findByWord(word);
      if (existingWord) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC785\uB2C8\uB2E4."
        };
      }
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = (currentBook == null ? void 0 : currentBook.id) || "default";
      }
      const book = await this.bookRepository.findById(bookId);
      if (!book) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const wordData = await this.wordService.getWordData(word);
      const vocabularyCard = VocabularyCard.create({
        word: wordData.word,
        meaning: wordData.meaning,
        pronunciation: wordData.pronunciation || "",
        examples: wordData.examples || [],
        bookId
      });
      const validationErrors = vocabularyCard.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.vocabularyRepository.add(vocabularyCard);
      const event = {
        type: "WORD_ADDED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: vocabularyCard.word,
          bookId: vocabularyCard.bookId
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: vocabularyCard
      };
    } catch (error) {
      console.error("AddWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordAdded", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/entities/Book.ts
var Book = class _Book {
  constructor(id, name, description, createdAt, updatedAt, wordCount, isDefault) {
    this.id = id;
    this.name = name;
    this.description = description;
    this.createdAt = createdAt;
    this.updatedAt = updatedAt;
    this.wordCount = wordCount;
    this.isDefault = isDefault;
  }
  // 팩토리 메서드: 새 단어장 생성
  static create(name, description = "", isDefault = false) {
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const id = isDefault ? "default" : _Book.generateId();
    return new _Book(
      id,
      name,
      description,
      now,
      now,
      0,
      isDefault
    );
  }
  // 팩토리 메서드: 기본 단어장 생성
  static createDefault() {
    return _Book.create("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5", "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.", true);
  }
  // 비즈니스 로직: 단어장 정보 업데이트
  updateInfo(name, description) {
    return new _Book(
      this.id,
      name != null ? name : this.name,
      description != null ? description : this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 증가
  incrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount + 1,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 감소
  decrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, this.wordCount - 1),
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 재설정
  updateWordCount(count) {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, count),
      this.isDefault
    );
  }
  // 비즈니스 로직: 삭제 가능 여부 확인
  canBeDeleted() {
    return !this.isDefault;
  }
  // 비즈니스 로직: 단어장이 비어있는지 확인
  isEmpty() {
    return this.wordCount === 0;
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.name || this.name.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (this.name.trim().length > 100) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC740 100\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.description.length > 500) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC124\uBA85\uC740 500\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.wordCount < 0) {
      errors.push("\uB2E8\uC5B4 \uC218\uB294 0 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      id: this.id,
      name: this.name,
      description: this.description,
      createdAt: this.createdAt,
      updatedAt: this.updatedAt,
      wordCount: this.wordCount,
      isDefault: this.isDefault
    };
  }
  // 비즈니스 로직: 생성일로부터 경과 일수 계산
  getDaysFromCreation() {
    const createdDate = new Date(this.createdAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - createdDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // 비즈니스 로직: 마지막 업데이트로부터 경과 일수 계산
  getDaysFromLastUpdate() {
    const updatedDate = new Date(this.updatedAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - updatedDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // ID 생성 유틸리티
  static generateId() {
    return `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/core/use-cases/CreateBookUseCase.ts
var CreateBookUseCase = class {
  constructor(bookRepository) {
    this.bookRepository = bookRepository;
  }
  async execute(request) {
    try {
      if (!request.name || request.name.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const name = request.name.trim();
      const existingBooks = await this.bookRepository.findAll();
      const duplicateBook = existingBooks.find(
        (book2) => book2.name.toLowerCase() === name.toLowerCase()
      );
      if (duplicateBook) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4."
        };
      }
      const book = Book.create(
        name,
        request.description || ""
      );
      const validationErrors = book.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.bookRepository.add(book);
      const event = {
        type: "BOOK_CREATED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          bookId: book.id,
          name: book.name
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        book
      };
    } catch (error) {
      console.error("CreateBookUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("bookCreated", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/use-cases/GetWordsForReviewUseCase.ts
var GetWordsForReviewUseCase = class {
  constructor(vocabularyRepository, bookRepository) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
  }
  async execute(request = {}) {
    try {
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = currentBook == null ? void 0 : currentBook.id;
      }
      const allWords = await this.vocabularyRepository.findByBookId(bookId);
      if (allWords.length === 0) {
        return {
          success: true,
          words: [],
          totalCount: 0
        };
      }
      const reviewInterval = request.reviewInterval || 1;
      const wordsNeedingReview = allWords.filter(
        (word) => word.needsReview(reviewInterval)
      );
      wordsNeedingReview.sort((a, b) => {
        if (a.lastReviewed && b.lastReviewed) {
          const aDate = new Date(a.lastReviewed).getTime();
          const bDate = new Date(b.lastReviewed).getTime();
          if (aDate !== bDate)
            return aDate - bDate;
        } else if (a.lastReviewed && !b.lastReviewed) {
          return -1;
        } else if (!a.lastReviewed && b.lastReviewed) {
          return 1;
        }
        const difficultyOrder = { "hard": 3, "good": 2, "easy": 1 };
        const difficultyDiff = difficultyOrder[b.difficulty] - difficultyOrder[a.difficulty];
        if (difficultyDiff !== 0)
          return difficultyDiff;
        return a.reviewCount - b.reviewCount;
      });
      const limit = request.limit || 20;
      const limitedWords = wordsNeedingReview.slice(0, limit);
      return {
        success: true,
        words: limitedWords,
        totalCount: wordsNeedingReview.length
      };
    } catch (error) {
      console.error("GetWordsForReviewUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
};

// src/core/use-cases/ReviewWordUseCase.ts
var ReviewWordUseCase = class {
  constructor(vocabularyRepository) {
    this.vocabularyRepository = vocabularyRepository;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      if (!["easy", "good", "hard"].includes(request.difficulty)) {
        return {
          success: false,
          error: "\uC62C\uBC14\uB978 \uB09C\uC774\uB3C4\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingCard = await this.vocabularyRepository.findByWord(word);
      if (!existingCard) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const previousDifficulty = existingCard.difficulty;
      const reviewedCard = existingCard.review(request.difficulty);
      await this.vocabularyRepository.update(reviewedCard);
      const event = {
        type: "WORD_REVIEWED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: reviewedCard.word,
          difficulty: request.difficulty,
          previousDifficulty
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: reviewedCard
      };
    } catch (error) {
      console.error("ReviewWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordReviewed", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/infrastructure/obsidian/repositories/VocabularyRepositoryAdapter.ts
var VocabularyRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(card) {
    await this.databaseManager.addWord(card);
  }
  async save(card) {
    await this.databaseManager.addWord(card);
  }
  async findByWord(word) {
    return this.databaseManager.getWord(word);
  }
  async findAll() {
    return this.databaseManager.getAllWords();
  }
  async findByBookId(bookId) {
    return this.databaseManager.getWordsByBook(bookId);
  }
  async update(word, card) {
    await this.databaseManager.updateWord(word, card.difficulty);
  }
  async delete(word) {
    await this.databaseManager.removeWord(word);
  }
  async search(options) {
    const allWords = await this.findAll();
    const filteredWords = allWords.filter(
      (word) => {
        var _a;
        return word.word.toLowerCase().includes(((_a = options.query) == null ? void 0 : _a.toLowerCase()) || "");
      }
    );
    return {
      words: filteredWords,
      total: filteredWords.length,
      hasMore: false
    };
  }
  async searchByText(query) {
    const result = await this.search({ query });
    return result.words;
  }
  async findCardsForReview(bookId) {
    return this.databaseManager.getWordsForReview(bookId);
  }
  async findCardsByDifficulty(difficulty, bookId) {
    const words = bookId ? await this.findByBookId(bookId) : await this.findAll();
    return words.filter((word) => word.difficulty === difficulty);
  }
  async count() {
    const words = await this.findAll();
    return words.length;
  }
  async countByBookId(bookId) {
    const words = await this.findByBookId(bookId);
    return words.length;
  }
  async countByDifficulty(difficulty) {
    const words = await this.findCardsByDifficulty(difficulty);
    return words.length;
  }
  async saveMany(cards) {
    for (const card of cards) {
      await this.add(card);
    }
  }
  async deleteMany(words) {
    for (const word of words) {
      await this.delete(word);
    }
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
};

// src/infrastructure/obsidian/repositories/BookRepositoryAdapter.ts
var BookRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async save(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async findById(id) {
    const bookData = this.databaseManager.getBook(id);
    if (!bookData)
      return null;
    return new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    );
  }
  async findAll(options) {
    const booksData = this.databaseManager.getAllBooks();
    let books = booksData.map((bookData) => new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    ));
    if (options) {
      if (options.includeEmpty === false) {
        books = books.filter((book) => !book.isEmpty());
      }
      if (options.sortBy) {
        books.sort((a, b) => {
          const aValue = a[options.sortBy];
          const bValue = b[options.sortBy];
          if (typeof aValue === "string" && typeof bValue === "string") {
            return options.sortOrder === "desc" ? bValue.localeCompare(aValue) : aValue.localeCompare(bValue);
          }
          if (typeof aValue === "number" && typeof bValue === "number") {
            return options.sortOrder === "desc" ? bValue - aValue : aValue - bValue;
          }
          return 0;
        });
      }
      if (options.offset || options.limit) {
        const start = options.offset || 0;
        const end = options.limit ? start + options.limit : void 0;
        books = books.slice(start, end);
      }
    }
    return books;
  }
  async update(id, book) {
    await this.databaseManager.updateBook(id, book.toPlainObject());
  }
  async delete(id) {
    await this.databaseManager.deleteBook(id);
  }
  async findDefault() {
    return this.findById("default");
  }
  async findByName(name) {
    const books = await this.findAll();
    return books.find((book) => book.name === name) || null;
  }
  async exists(id) {
    const book = await this.findById(id);
    return book !== null;
  }
  async count() {
    const books = await this.findAll();
    return books.length;
  }
  async getStatistics(bookId) {
    const book = await this.findById(bookId);
    if (!book)
      return null;
    const words = this.databaseManager.getWordsByBook(bookId);
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const totalReviews = words.reduce((sum, word) => sum + word.reviewCount, 0);
    const averageReviewCount = words.length > 0 ? totalReviews / words.length : 0;
    const lastActivityDate = words.length > 0 ? Math.max(...words.map((w) => new Date(w.lastReviewed || w.addedDate).getTime())) : null;
    const completionPercentage = words.length > 0 ? wordsByDifficulty.easy / words.length * 100 : 0;
    return {
      book,
      totalWords: words.length,
      wordsByDifficulty,
      averageReviewCount,
      lastActivityDate: lastActivityDate ? new Date(lastActivityDate).toISOString() : null,
      completionPercentage
    };
  }
  async getAllStatistics() {
    const books = await this.findAll();
    const statistics = [];
    for (const book of books) {
      const stat = await this.getStatistics(book.id);
      if (stat) {
        statistics.push(stat);
      }
    }
    return statistics;
  }
  async getCurrentBook() {
    const currentBook = this.databaseManager.getCurrentBook();
    if (!currentBook)
      return null;
    return new Book(
      currentBook.id,
      currentBook.name,
      currentBook.description,
      currentBook.createdAt,
      currentBook.updatedAt,
      currentBook.wordCount,
      currentBook.isDefault
    );
  }
  async setCurrentBook(bookId) {
    await this.databaseManager.setCurrentBook(bookId);
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  async validateBookName(name, excludeId) {
    const books = await this.findAll();
    return !books.some(
      (book) => book.name === name && (!excludeId || book.id !== excludeId)
    );
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
  onCurrentBookChanged(callback) {
  }
  offCurrentBookChanged(callback) {
  }
};

// src/infrastructure/storage/VocabularyDatabase.ts
var import_obsidian8 = require("obsidian");
var VocabularyDatabaseManager = class {
  constructor(app, saveCallback, folderPath) {
    this.books = /* @__PURE__ */ new Map();
    this.words = /* @__PURE__ */ new Map();
    this.settings = {
      dailyGoal: 10,
      reviewInterval: 1,
      currentBookId: "default"
    };
    this.statistics = {
      totalReviews: 0,
      streakDays: 0,
      lastStudyDate: null
    };
    this.vocabularyFolderPath = "Vocabulary";
    this.app = app;
    this.saveCallback = saveCallback;
    if (folderPath) {
      this.vocabularyFolderPath = folderPath;
    }
    this.initializeVocabularyFolder();
    this.initializeDefaultBook();
  }
  // 단어장 폴더 초기화
  async initializeVocabularyFolder() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
      if (folder instanceof import_obsidian8.TFolder) {
        return;
      }
      await this.app.vault.createFolder(this.vocabularyFolderPath);
    } catch (error) {
      if (error instanceof Error) {
        const errorMessage = error.message.toLowerCase();
        if (errorMessage.includes("already exists") || errorMessage.includes("folder already exists") || errorMessage.includes("already present")) {
        } else {
          console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC2E4\uD328:", error);
        }
      } else {
        console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC911 \uC54C \uC218 \uC5C6\uB294 \uC624\uB958 \uBC1C\uC0DD:", error);
      }
    }
  }
  // 기본 book 초기화
  async initializeDefaultBook() {
    if (!this.books.has("default")) {
      const defaultBook = {
        id: "default",
        name: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5",
        description: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.",
        createdAt: (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: 0,
        isDefault: true
      };
      this.books.set("default", defaultBook);
      await this.saveBookToFile(defaultBook);
    }
  }
  // Book을 MD 파일로 저장
  async saveBookToFile(book) {
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian8.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const bookWords = Array.from(this.words.values()).filter((word) => word.bookId === book.id).sort((a, b) => a.word.localeCompare(b.word));
    const frontmatter = [
      "---",
      `bookId: ${book.id}`,
      `name: "${book.name}"`,
      `description: "${book.description}"`,
      `createdAt: ${book.createdAt}`,
      `updatedAt: ${book.updatedAt}`,
      `wordCount: ${bookWords.length}`,
      `isDefault: ${book.isDefault}`,
      "---",
      ""
    ].join("\n");
    let content = frontmatter;
    content += `# ${book.name}

`;
    content += `${book.description}

`;
    content += `## \uB2E8\uC5B4 \uBAA9\uB85D (${bookWords.length}\uAC1C)

`;
    for (const word of bookWords) {
      content += `### ${word.word}

`;
      if (word.pronunciation) {
        content += `**\uBC1C\uC74C:** ${word.pronunciation}

`;
      }
      content += `**\uB73B:**
`;
      for (const meaning of word.meanings) {
        content += `- ${meaning}
`;
      }
      content += "\n";
      if (word.similarWords.length > 0) {
        content += `**\uC720\uC0AC\uD55C \uB2E8\uC5B4:** ${word.similarWords.join(", ")}

`;
      }
      if (word.examples.length > 0) {
        content += `**\uC608\uBB38:**
`;
        for (const example of word.examples) {
          content += `- ${example.english}
`;
          content += `  - ${example.korean}
`;
        }
        content += "\n";
      }
      content += `**\uBCF5\uC2B5 \uC815\uBCF4:**
`;
      content += `- \uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}
`;
      content += `- \uB09C\uC774\uB3C4: ${word.difficulty}
`;
      content += `- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${word.lastReviewed || "\uC5C6\uC74C"}
`;
      content += `- \uCD94\uAC00\uC77C: ${word.addedDate}
`;
      if (word.scheduleInfo) {
        content += `
**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**
`;
        content += `- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ${word.scheduleInfo.dueDate}
`;
        content += `- \uBCF5\uC2B5 \uAC04\uACA9: ${word.scheduleInfo.interval}\uC77C
`;
        content += `- \uC6A9\uC774\uB3C4: ${word.scheduleInfo.ease}
`;
        content += `- \uC2E4\uD328 \uD69F\uC218: ${word.scheduleInfo.lapseCount}
`;
      }
      content += "\n---\n\n";
    }
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian8.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        try {
          await this.app.vault.create(filePath, content);
        } catch (error) {
          if (error instanceof Error && error.message.includes("already exists")) {
            const file = this.app.vault.getAbstractFileByPath(filePath);
            if (file instanceof import_obsidian8.TFile) {
              await this.app.vault.modify(file, content);
            } else {
              console.error("\uD30C\uC77C\uC774 \uC774\uBBF8 \uC874\uC7AC\uD558\uC9C0\uB9CC TFile\uC774 \uC544\uB2D8:", filePath);
            }
          } else {
            console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
          }
        }
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  // MD 파일에서 Book과 단어들 로드
  async loadBookFromFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const { frontmatter, body } = this.parseMDFile(content);
      if (!frontmatter.bookId)
        return;
      const book = {
        id: frontmatter.bookId,
        name: frontmatter.name || file.basename,
        description: frontmatter.description || "",
        createdAt: frontmatter.createdAt || (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: frontmatter.updatedAt || (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: frontmatter.wordCount || 0,
        isDefault: frontmatter.isDefault || false
      };
      this.books.set(book.id, book);
      const words = this.parseWordsFromMarkdown(body, book.id);
      for (const word of words) {
        this.words.set(word.word.toLowerCase(), word);
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:", error);
    }
  }
  // MD 파일 파싱 (frontmatter와 body 분리)
  parseMDFile(content) {
    const frontmatterRegex = /^---\n([\s\S]*?)\n---\n([\s\S]*)$/;
    const match = content.match(frontmatterRegex);
    if (!match) {
      return { frontmatter: {}, body: content };
    }
    const frontmatterText = match[1];
    const body = match[2];
    const frontmatter = {};
    const lines = frontmatterText.split("\n");
    for (const line of lines) {
      const colonIndex = line.indexOf(":");
      if (colonIndex > 0) {
        const key = line.substring(0, colonIndex).trim();
        let value = line.substring(colonIndex + 1).trim();
        if (value.startsWith('"') && value.endsWith('"')) {
          value = value.slice(1, -1);
        }
        if (value === "true")
          frontmatter[key] = true;
        else if (value === "false")
          frontmatter[key] = false;
        else if (!isNaN(Number(value)))
          frontmatter[key] = Number(value);
        else
          frontmatter[key] = value;
      }
    }
    return { frontmatter, body };
  }
  // 마크다운에서 단어들 파싱
  parseWordsFromMarkdown(markdown, bookId) {
    const words = [];
    const wordSections = markdown.split("---").filter((section) => section.trim());
    for (const section of wordSections) {
      const word = this.parseWordSection(section, bookId);
      if (word) {
        words.push(word);
      }
    }
    return words;
  }
  // 개별 단어 섹션 파싱
  parseWordSection(section, bookId) {
    const lines = section.split("\n").filter((line) => line.trim());
    if (lines.length === 0)
      return null;
    let word = "";
    let pronunciation = "";
    const meanings = [];
    const similarWords = [];
    const examples = [];
    let reviewCount = 0;
    let difficulty = "good";
    let lastReviewed = null;
    let addedDate = (/* @__PURE__ */ new Date()).toISOString();
    let scheduleInfo = void 0;
    let currentSection = "";
    let currentExample = {};
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const trimmedLine = line.trim();
      if (trimmedLine.startsWith("### ")) {
        word = trimmedLine.substring(4).trim();
        continue;
      }
      if (trimmedLine.startsWith("**\uBC1C\uC74C:**")) {
        pronunciation = trimmedLine.substring(7).trim();
        currentSection = "pronunciation";
      } else if (trimmedLine.startsWith("**\uB73B:**")) {
        currentSection = "meanings";
      } else if (trimmedLine.startsWith("**\uC720\uC0AC\uD55C \uB2E8\uC5B4:**")) {
        const similarWordsText = trimmedLine.substring(12).trim();
        similarWords.push(...similarWordsText.split(",").map((w) => w.trim()));
        currentSection = "similar";
      } else if (trimmedLine.startsWith("**\uC608\uBB38:**")) {
        currentSection = "examples";
      } else if (trimmedLine.startsWith("**\uBCF5\uC2B5 \uC815\uBCF4:**")) {
        currentSection = "review";
      } else if (trimmedLine.startsWith("**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**")) {
        currentSection = "spaced-repetition";
      } else if (currentSection === "meanings" && trimmedLine.startsWith("- ")) {
        meanings.push(trimmedLine.substring(2).trim());
      } else if (currentSection === "examples") {
        if (line.startsWith("- ") && !line.startsWith("  - ")) {
          if (currentExample.english && currentExample.korean) {
            examples.push({
              english: currentExample.english,
              korean: currentExample.korean
            });
          }
          currentExample = { english: line.substring(2).trim() };
        } else if (line.startsWith("  - ")) {
          currentExample.korean = line.substring(4).trim();
        }
      } else if (currentSection === "review") {
        if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uD69F\uC218: ")) {
          reviewCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        } else if (trimmedLine.startsWith("- \uB09C\uC774\uB3C4: ")) {
          const diff = trimmedLine.substring(7).trim();
          if (diff === "easy" || diff === "good" || diff === "hard") {
            difficulty = diff;
          }
        } else if (trimmedLine.startsWith("- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ")) {
          const lastRev = trimmedLine.substring(11).trim();
          lastReviewed = lastRev === "\uC5C6\uC74C" ? null : lastRev;
        } else if (trimmedLine.startsWith("- \uCD94\uAC00\uC77C: ")) {
          addedDate = trimmedLine.substring(7).trim();
        }
      } else if (currentSection === "spaced-repetition") {
        if (!scheduleInfo) {
          scheduleInfo = {};
        }
        if (trimmedLine.startsWith("- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ")) {
          scheduleInfo.dueDate = trimmedLine.substring(10).trim();
        } else if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uAC04\uACA9: ")) {
          const intervalText = trimmedLine.substring(8).trim();
          scheduleInfo.interval = parseInt(intervalText.replace("\uC77C", "")) || 1;
        } else if (trimmedLine.startsWith("- \uC6A9\uC774\uB3C4: ")) {
          scheduleInfo.ease = parseInt(trimmedLine.substring(7).trim()) || 250;
        } else if (trimmedLine.startsWith("- \uC2E4\uD328 \uD69F\uC218: ")) {
          scheduleInfo.lapseCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        }
      }
    }
    if (currentExample.english && currentExample.korean) {
      examples.push({
        english: currentExample.english,
        korean: currentExample.korean
      });
    }
    if (!word)
      return null;
    return {
      word: word.toLowerCase(),
      pronunciation,
      meanings,
      similarWords,
      examples,
      reviewCount,
      difficulty,
      lastReviewed,
      addedDate,
      bookId,
      scheduleInfo
    };
  }
  // 모든 단어장 파일 로드
  async loadAllBooks() {
    this.books.clear();
    this.words.clear();
    await this.initializeVocabularyFolder();
    await this.initializeDefaultBook();
    const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
    if (folder instanceof import_obsidian8.TFolder) {
      for (const file of folder.children) {
        if (file instanceof import_obsidian8.TFile && file.extension === "md") {
          await this.loadBookFromFile(file);
        }
      }
    }
    await this.loadSettings();
  }
  // 설정 파일 저장/로드
  async saveSettings() {
    const settingsPath = (0, import_obsidian8.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    const data = {
      settings: this.settings,
      statistics: this.statistics
    };
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(settingsPath);
      const content = JSON.stringify(data, null, 2);
      if (existingFile instanceof import_obsidian8.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        await this.app.vault.create(settingsPath, content);
      }
    } catch (error) {
      console.error("\uC124\uC815 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  async loadSettings() {
    const settingsPath = (0, import_obsidian8.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    try {
      const file = this.app.vault.getAbstractFileByPath(settingsPath);
      if (file instanceof import_obsidian8.TFile) {
        const content = await this.app.vault.read(file);
        const data = JSON.parse(content);
        if (data.settings) {
          this.settings = { ...this.settings, ...data.settings };
        }
        if (data.statistics) {
          this.statistics = { ...this.statistics, ...data.statistics };
        }
      }
    } catch (error) {
      console.warn("\uC124\uC815 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:", error);
    }
  }
  // Book 관리 메서드들
  async createBook(name, description = "") {
    const id = `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    const book = {
      id,
      name,
      description,
      createdAt: (/* @__PURE__ */ new Date()).toISOString(),
      updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
      wordCount: 0,
      isDefault: false
    };
    this.books.set(id, book);
    await this.saveBookToFile(book);
    this.saveCallback();
    return book;
  }
  async updateBook(bookId, updates) {
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedBook = {
      ...book,
      ...updates,
      updatedAt: (/* @__PURE__ */ new Date()).toISOString()
    };
    this.books.set(bookId, updatedBook);
    await this.saveBookToFile(updatedBook);
    this.saveCallback();
  }
  async deleteBook(bookId) {
    if (bookId === "default") {
      throw new Error("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC740 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const wordsToDelete = Array.from(this.words.values()).filter((word) => word.bookId === bookId).map((word) => word.word);
    for (const word of wordsToDelete) {
      this.words.delete(word.toLowerCase());
    }
    this.books.delete(bookId);
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian8.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian8.TFile) {
      await this.app.vault.delete(file);
    }
    if (this.settings.currentBookId === bookId) {
      this.settings.currentBookId = "default";
      await this.saveSettings();
    }
    this.saveCallback();
  }
  getAllBooks() {
    return Array.from(this.books.values()).sort((a, b) => {
      if (a.isDefault)
        return -1;
      if (b.isDefault)
        return 1;
      return a.name.localeCompare(b.name);
    });
  }
  getBook(bookId) {
    return this.books.get(bookId);
  }
  getCurrentBook() {
    return this.books.get(this.settings.currentBookId);
  }
  async setCurrentBook(bookId) {
    if (!this.books.has(bookId)) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    this.settings.currentBookId = bookId;
    await this.saveSettings();
    this.saveCallback();
  }
  // Book별 단어 수 업데이트
  updateBookWordCount(bookId) {
    const wordCount = Array.from(this.words.values()).filter((word) => word.bookId === bookId).length;
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount = wordCount;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
    }
  }
  // 단어 추가
  async addWord(wordData) {
    const word = wordData.word.toLowerCase();
    if (this.words.has(word)) {
      throw new Error(`\uB2E8\uC5B4 "${wordData.word}"\uB294 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4.`);
    }
    const newWord = {
      ...wordData,
      word: wordData.word.toLowerCase(),
      reviewCount: 0,
      difficulty: "good",
      lastReviewed: null,
      addedDate: (/* @__PURE__ */ new Date()).toISOString(),
      bookId: wordData.bookId || this.settings.currentBookId
    };
    this.words.set(word, newWord);
    const book = this.books.get(newWord.bookId);
    if (book) {
      book.wordCount++;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 삭제
  async removeWord(word) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const bookId = wordData.bookId;
    this.words.delete(wordKey);
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount--;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과)
  async updateWord(word, difficulty) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과 + 스페이스드 리피티션 정보)
  async updateWordWithSchedule(word, difficulty, scheduleInfo) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    if (scheduleInfo) {
      wordData.scheduleInfo = scheduleInfo;
    }
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 전체 데이터 업데이트 (LLM API로 가져온 정보로 덮어쓰기)
  async updateWordData(word, updatedWordData) {
    const wordKey = word.toLowerCase();
    const existingWord = this.words.get(wordKey);
    if (!existingWord) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedWord = {
      ...updatedWordData,
      word: wordKey,
      reviewCount: existingWord.reviewCount,
      difficulty: existingWord.difficulty,
      lastReviewed: existingWord.lastReviewed,
      addedDate: existingWord.addedDate,
      bookId: existingWord.bookId
    };
    this.words.set(wordKey, updatedWord);
    const book = this.books.get(updatedWord.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 조회
  getWord(word) {
    return this.words.get(word.toLowerCase());
  }
  // 현재 book의 모든 단어 조회
  getAllWords() {
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 특정 book의 모든 단어 조회
  getWordsByBook(bookId) {
    return Array.from(this.words.values()).filter((word) => word.bookId === bookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 복습 대상 단어 조회 (현재 book)
  getWordsForReview() {
    const now = /* @__PURE__ */ new Date();
    const reviewIntervalMs = this.settings.reviewInterval * 24 * 60 * 60 * 1e3;
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return true;
      const lastReview = new Date(word.lastReviewed);
      const timeSinceLastReview = now.getTime() - lastReview.getTime();
      return timeSinceLastReview >= reviewIntervalMs;
    });
  }
  // 단어 검색 (현재 book)
  searchWords(query) {
    const lowerQuery = query.toLowerCase();
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter(
      (word) => word.word.includes(lowerQuery) || word.meanings.some((meaning) => meaning.toLowerCase().includes(lowerQuery))
    );
  }
  // 통계 조회 (현재 book)
  getStatistics() {
    const words = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId);
    const totalWords = words.length;
    const totalReviews = this.statistics.totalReviews;
    const averageDifficulty = words.length > 0 ? words.reduce((sum, word) => {
      const difficultyValue = word.difficulty === "easy" ? 1 : word.difficulty === "good" ? 2 : 3;
      return sum + difficultyValue;
    }, 0) / words.length : 0;
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const recentActivity = this.calculateRecentActivity();
    return {
      totalWords,
      totalReviews,
      streakDays: this.statistics.streakDays,
      averageDifficulty,
      wordsByDifficulty,
      recentActivity
    };
  }
  // 일일 목표 진행률 조회 (현재 book)
  getDailyGoalProgress() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const todayWords = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return false;
      return new Date(word.lastReviewed).toDateString() === today;
    }).length;
    const goal = this.settings.dailyGoal;
    const percentage = goal > 0 ? Math.min(todayWords / goal * 100, 100) : 0;
    return {
      current: todayWords,
      goal,
      percentage
    };
  }
  // 설정 업데이트
  async updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
    await this.saveSettings();
    this.saveCallback();
  }
  // 데이터 저장용 형식으로 변환 (호환성 유지)
  getDataForSave() {
    return {
      books: Array.from(this.books.values()),
      words: Array.from(this.words.values()),
      settings: this.settings,
      statistics: this.statistics
    };
  }
  // 저장된 데이터에서 로드 (호환성 유지)
  async loadFromData(data) {
    await this.loadAllBooks();
  }
  // 연속 학습일 업데이트
  updateStreak() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const lastStudyDate = this.statistics.lastStudyDate ? new Date(this.statistics.lastStudyDate).toDateString() : null;
    if (lastStudyDate === today) {
      return;
    }
    if (!lastStudyDate) {
      this.statistics.streakDays = 1;
    } else {
      const yesterday = /* @__PURE__ */ new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      const yesterdayStr = yesterday.toDateString();
      if (lastStudyDate === yesterdayStr) {
        this.statistics.streakDays++;
      } else {
        this.statistics.streakDays = 1;
      }
    }
    this.statistics.lastStudyDate = (/* @__PURE__ */ new Date()).toISOString();
  }
  // 최근 7일 활동 계산
  calculateRecentActivity() {
    const activity = [];
    const today = /* @__PURE__ */ new Date();
    for (let i = 6; i >= 0; i--) {
      const date = new Date(today);
      date.setDate(date.getDate() - i);
      const dateStr = date.toDateString();
      const wordsStudied = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        return new Date(word.lastReviewed).toDateString() === dateStr;
      }).length;
      const reviewsCompleted = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        const reviewDate = new Date(word.lastReviewed);
        return reviewDate.toDateString() === dateStr;
      }).length;
      activity.push({
        date: date.toISOString().split("T")[0],
        wordsStudied,
        reviewsCompleted
      });
    }
    return activity;
  }
  // 단어장 폴더 경로 업데이트
  updateVocabularyFolderPath(newPath) {
    this.vocabularyFolderPath = newPath;
    this.initializeVocabularyFolder();
  }
};

// src/infrastructure/llm/LLMServiceAdapter.ts
var LLMServiceAdapter = class {
  constructor(settings) {
    this.llmService = new LLMService(settings);
  }
  async getWordData(request) {
    try {
      const wordInfo = await this.llmService.getWordInfo(request.word);
      return {
        success: true,
        data: {
          word: wordInfo.word,
          meaning: wordInfo.meanings,
          pronunciation: wordInfo.pronunciation,
          examples: wordInfo.examples,
          similarWords: wordInfo.similarWords
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  async testConnection() {
    return await this.llmService.testConnection();
  }
  updateSettings(settings) {
    this.llmService = new LLMService(settings);
  }
};

// src/infrastructure/external/WordServiceAdapter.ts
var WordServiceAdapter = class {
  constructor(settings) {
    this.wordService = new WordService(settings);
  }
  async getWordData(request) {
    try {
      const wordData = await this.wordService.getWordData(request.word);
      return {
        success: true,
        data: {
          word: wordData.word,
          meaning: wordData.meaning,
          pronunciation: wordData.pronunciation,
          examples: wordData.examples || [],
          similarWords: wordData.similarWords || []
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  updateSettings(settings) {
    this.wordService = new WordService(settings);
  }
};

// src/core/ports/services/ITTSServiceAdapter.ts
var TTSServiceAdapter = class {
  constructor(settings) {
    this.ttsService = TTSServiceFactory.createTTSService(settings);
  }
  async speakText(text) {
    await this.ttsService.speakText(text);
  }
  async speakWord(word) {
    await this.ttsService.speakWord(word);
  }
  async speakExample(example) {
    await this.ttsService.speakExample(example);
  }
  stopSpeaking() {
    this.ttsService.stopSpeaking();
  }
  updateSettings(settings) {
    this.ttsService.destroy();
    this.ttsService = TTSServiceFactory.createTTSService(settings);
  }
  isEnabled() {
    return true;
  }
  getAvailableVoices() {
    const voices = this.ttsService.getAvailableVoices();
    return [];
  }
  async testConnection() {
    return await this.ttsService.testConnection();
  }
  isPaused() {
    return this.ttsService.isPaused();
  }
  resume() {
    this.ttsService.resume();
  }
  pause() {
    this.ttsService.pause();
  }
  destroy() {
    this.ttsService.destroy();
  }
};

// src/shared/container/ServiceRegistry.ts
var ServiceRegistry = class {
  static registerServices(container2, app, settings) {
    container2.registerInstance("app", app);
    container2.registerInstance("settings", settings);
    container2.register("databaseManager", (app2) => {
      return new VocabularyDatabaseManager(
        app2,
        () => {
        },
        // saveCallback - DI에서는 빈 함수로 처리
        settings.vocabularyFolderPath
      );
    }, {
      dependencies: ["app"],
      singleton: true
    });
    container2.register("vocabularyRepository", VocabularyRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("bookRepository", BookRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("wordService", WordServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("llmService", LLMServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("ttsService", TTSServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("addWordUseCase", AddWordUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository", "wordService"]
    });
    container2.register("createBookUseCase", CreateBookUseCase, {
      dependencies: ["bookRepository"]
    });
    container2.register("getWordsForReviewUseCase", GetWordsForReviewUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository"]
    });
    container2.register("reviewWordUseCase", ReviewWordUseCase, {
      dependencies: ["vocabularyRepository"]
    });
  }
  static updateSettings(container2, settings) {
    container2.registerInstance("settings", settings);
    if (container2.has("ttsService")) {
      const ttsService = container2.resolve("ttsService");
      ttsService.updateSettings(settings);
    }
    if (container2.has("llmService")) {
      const llmService = container2.resolve("llmService");
      llmService.updateSettings(settings);
    }
    if (container2.has("wordService")) {
      const wordService = container2.resolve("wordService");
      wordService.updateSettings(settings);
    }
  }
};

// src/shared/ErrorBoundary.ts
var import_obsidian9 = require("obsidian");
var ErrorBoundary = class _ErrorBoundary {
  constructor() {
    this.errorHandlers = /* @__PURE__ */ new Map();
    this.isInitialized = false;
  }
  static getInstance() {
    if (!_ErrorBoundary.instance) {
      _ErrorBoundary.instance = new _ErrorBoundary();
    }
    return _ErrorBoundary.instance;
  }
  // 전역 에러 핸들러 초기화
  initialize() {
    if (this.isInitialized)
      return;
    window.addEventListener("error", (event) => {
      var _a;
      this.handleError({
        error: event.error || new Error(event.message),
        context: "Global Error",
        timestamp: Date.now(),
        stackTrace: (_a = event.error) == null ? void 0 : _a.stack
      });
    });
    window.addEventListener("unhandledrejection", (event) => {
      var _a;
      this.handleError({
        error: event.reason instanceof Error ? event.reason : new Error(String(event.reason)),
        context: "Unhandled Promise Rejection",
        timestamp: Date.now(),
        stackTrace: (_a = event.reason) == null ? void 0 : _a.stack
      });
    });
    this.isInitialized = true;
  }
  // 에러 핸들러 등록
  registerHandler(context, handler) {
    this.errorHandlers.set(context, handler);
  }
  // 에러 핸들러 제거
  unregisterHandler(context) {
    this.errorHandlers.delete(context);
  }
  // 에러 처리
  handleError(errorInfo) {
    console.error("Error caught by ErrorBoundary:", errorInfo);
    const userMessage = this.getUserFriendlyMessage(errorInfo.error);
    new import_obsidian9.Notice(userMessage, 0);
    this.errorHandlers.forEach((handler, context) => {
      try {
        handler(errorInfo);
      } catch (handlerError) {
        console.error(`Error in handler for context ${context}:`, handlerError);
      }
    });
  }
  // 안전한 함수 실행 래퍼
  async safeExecute(fn, context, fallback) {
    try {
      return await fn();
    } catch (error) {
      this.handleError({
        error: error instanceof Error ? error : new Error(String(error)),
        context,
        timestamp: Date.now(),
        stackTrace: error instanceof Error ? error.stack : void 0
      });
      return fallback;
    }
  }
  // 동기 함수용 안전한 실행
  safeExecuteSync(fn, context, fallback) {
    try {
      return fn();
    } catch (error) {
      this.handleError({
        error: error instanceof Error ? error : new Error(String(error)),
        context,
        timestamp: Date.now(),
        stackTrace: error instanceof Error ? error.stack : void 0
      });
      return fallback;
    }
  }
  // 사용자 친화적인 에러 메시지 생성
  getUserFriendlyMessage(error) {
    const errorType = error.name;
    const errorMessage = error.message;
    const friendlyMessages = {
      "NetworkError": "\uB124\uD2B8\uC6CC\uD06C \uC5F0\uACB0\uC5D0 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.",
      "TypeError": "\uB370\uC774\uD130 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
      "ReferenceError": "\uD544\uC694\uD55C \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",
      "SyntaxError": "\uB370\uC774\uD130 \uD615\uC2DD\uC5D0 \uC624\uB958\uAC00 \uC788\uC2B5\uB2C8\uB2E4.",
      "QuotaExceededError": "\uC800\uC7A5 \uACF5\uAC04\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4.",
      "SecurityError": "\uBCF4\uC548 \uC815\uCC45\uC73C\uB85C \uC778\uD574 \uC791\uC5C5\uC744 \uC218\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
    };
    if (errorMessage.includes("API") || errorMessage.includes("fetch")) {
      return "API \uC11C\uBE44\uC2A4\uC5D0 \uC77C\uC2DC\uC801\uC778 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
    }
    if (errorMessage.includes("file") || errorMessage.includes("File")) {
      return "\uD30C\uC77C \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uD30C\uC77C\uC774 \uC874\uC7AC\uD558\uB294\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
    }
    if (errorMessage.includes("encrypt") || errorMessage.includes("decrypt")) {
      return "API \uD0A4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC744 \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
    }
    return friendlyMessages[errorType] || `\uC608\uC0C1\uCE58 \uBABB\uD55C \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${errorMessage}`;
  }
  // 에러 복구 시도
  async attemptRecovery(error, context) {
    if (error.message.includes("fetch") || error.message.includes("network")) {
      try {
        await fetch("https://www.google.com/favicon.ico", {
          method: "HEAD",
          mode: "no-cors"
        });
        return true;
      } catch (e) {
        return false;
      }
    }
    if (error.name === "QuotaExceededError") {
      try {
        localStorage.removeItem("temp-data");
        return true;
      } catch (e) {
        return false;
      }
    }
    return false;
  }
  // 정리
  cleanup() {
    this.errorHandlers.clear();
    this.isInitialized = false;
  }
};

// src/main.ts
var EnglishVocabularyPlugin = class extends import_obsidian10.Plugin {
  async onload() {
    const errorBoundary = ErrorBoundary.getInstance();
    errorBoundary.initialize();
    errorBoundary.registerHandler("VocabularyPlugin", (errorInfo) => {
      var _a;
      if ((_a = errorInfo.context) == null ? void 0 : _a.includes("API")) {
        console.warn("API \uC5D0\uB7EC \uAC10\uC9C0, \uD3F4\uBC31 \uBAA8\uB4DC\uB85C \uC804\uD658");
      }
    });
    await this.loadSettings();
    this.container = container;
    ServiceRegistry.registerServices(this.container, this.app, this.settings);
    this.databaseManager = this.container.resolve("databaseManager");
    this.llmService = new LLMService(this.settings);
    try {
      await this.databaseManager.loadAllBooks();
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uB370\uC774\uD130 \uB85C\uB4DC \uC2E4\uD328:", error);
      await this.migrateFromLegacyData();
    }
    this.addSettingTab(new VocabularySettingTab(this.app, this));
    this.addCommand({
      id: "open-vocabulary-modal",
      name: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      callback: () => {
        new VocabularyModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "open-vocabulary-manager",
      name: "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30",
      callback: () => {
        new VocabularyManagerModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "add-words",
      name: "\uB2E8\uC5B4 \uCD94\uAC00",
      callback: () => {
        new AddWordsModal(this.app, this).open();
      }
    });
    this.addRibbonIcon("book", "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30", () => {
      new VocabularyManagerModal(this.app, this).open();
    });
  }
  onunload() {
    const errorBoundary = ErrorBoundary.getInstance();
    errorBoundary.unregisterHandler("VocabularyPlugin");
    errorBoundary.cleanup();
  }
  async loadSettings() {
    const data = await this.loadData();
    if (data && typeof data === "object" && "settings" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data.settings);
    } else if (data && typeof data === "object" && "apiKey" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
    } else {
      this.settings = Object.assign({}, DEFAULT_SETTINGS);
    }
    await this.migrateApiKeys();
  }
  // API 키 암호화 마이그레이션
  async migrateApiKeys() {
    let needsSave = false;
    if (this.settings.llmApiKey && this.isPlainTextApiKey(this.settings.llmApiKey)) {
      const plainKey = this.settings.llmApiKey;
      this.settings.llmApiKey = encryptApiKeySync(plainKey);
      needsSave = true;
    }
    if (this.settings.openaiApiKey && this.isPlainTextApiKey(this.settings.openaiApiKey)) {
      const plainKey = this.settings.openaiApiKey;
      this.settings.openaiApiKey = encryptApiKeySync(plainKey);
      needsSave = true;
    }
    if (this.settings.anthropicApiKey && this.isPlainTextApiKey(this.settings.anthropicApiKey)) {
      const plainKey = this.settings.anthropicApiKey;
      this.settings.anthropicApiKey = encryptApiKeySync(plainKey);
      needsSave = true;
    }
    if (this.settings.googleApiKey && this.isPlainTextApiKey(this.settings.googleApiKey)) {
      const plainKey = this.settings.googleApiKey;
      this.settings.googleApiKey = encryptApiKeySync(plainKey);
      needsSave = true;
    }
    if (needsSave) {
      await this.saveSettings();
    }
  }
  // API 키가 평문인지 확인하는 헬퍼 함수
  isPlainTextApiKey(apiKey) {
    if (!apiKey)
      return false;
    try {
      const decrypted = decryptApiKeySync(apiKey);
      return decrypted === apiKey;
    } catch (error) {
      return apiKey.startsWith("sk-") || apiKey.startsWith("sk-ant-") || apiKey.startsWith("AIza") || apiKey.length > 20;
    }
  }
  async saveSettings() {
    await this.saveAllData();
    if (this.llmService) {
      this.llmService = new LLMService(this.settings);
    }
    if (this.container) {
      ServiceRegistry.updateSettings(this.container, this.settings);
    }
  }
  // 기존 data.json에서 MD 파일로 마이그레이션
  async migrateFromLegacyData() {
    try {
      const savedData = await this.loadData();
      if (savedData && savedData.database && Array.isArray(savedData.database.words)) {
        const legacyData = savedData.database;
        if (legacyData.words && legacyData.words.length > 0) {
          for (const word of legacyData.words) {
            try {
              await this.databaseManager.addWord({
                ...word,
                bookId: "default",
                pronunciation: word.pronunciation || ""
              });
            } catch (error) {
              console.warn(`\uB2E8\uC5B4 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328: ${word.word}`, error);
            }
          }
        }
        if (legacyData.settings) {
          await this.databaseManager.updateSettings(legacyData.settings);
        }
      }
    } catch (error) {
      console.error("\uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328:", error);
    }
  }
  // 모든 데이터 저장 (설정만 저장, 단어장 데이터는 MD 파일로 자동 저장됨)
  async saveAllData() {
    const data = {
      settings: this.settings
    };
    await this.saveData(data);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzLnRzIiwgInNyYy91dGlscy50cyIsICJzcmMvc2hhcmVkL0NvbmZpZy50cyIsICJzcmMvc2hhcmVkL1JldHJ5UG9saWN5LnRzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9iaW5kLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvdXRpbHMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zRXJyb3IuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL251bGwuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3RvRm9ybURhdGEuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL0F4aW9zVVJMU2VhcmNoUGFyYW1zLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9idWlsZFVSTC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvSW50ZXJjZXB0b3JNYW5hZ2VyLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvZGVmYXVsdHMvdHJhbnNpdGlvbmFsLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvcGxhdGZvcm0vYnJvd3Nlci9jbGFzc2VzL1VSTFNlYXJjaFBhcmFtcy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvY2xhc3Nlcy9Gb3JtRGF0YS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvY2xhc3Nlcy9CbG9iLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvcGxhdGZvcm0vYnJvd3Nlci9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2NvbW1vbi91dGlscy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy90b1VSTEVuY29kZWRGb3JtLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9mb3JtRGF0YVRvSlNPTi5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2RlZmF1bHRzL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9wYXJzZUhlYWRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zSGVhZGVycy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9pc0NhbmNlbC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxlZEVycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9zZXR0bGUuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlUHJvdG9jb2wuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwZWVkb21ldGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy90aHJvdHRsZS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcHJvZ3Jlc3NFdmVudFJlZHVjZXIuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbi5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29va2llcy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2J1aWxkRnVsbFBhdGguanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL21lcmdlQ29uZmlnLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9yZXNvbHZlQ29uZmlnLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb21wb3NlU2lnbmFscy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdHJhY2tTdHJlYW0uanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9hZGFwdGVycy9mZXRjaC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL2FkYXB0ZXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9kaXNwYXRjaFJlcXVlc3QuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9lbnYvZGF0YS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdmFsaWRhdG9yLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvcy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvc3ByZWFkLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0F4aW9zRXJyb3IuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL0h0dHBTdGF0dXNDb2RlLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvYXhpb3MuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2luZGV4LmpzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZS50cyIsICJzcmMvZmVhdHVyZXMvdm9jYWJ1bGFyeS1sZWFybmluZy91aS9Wb2NhYnVsYXJ5TW9kYWwudHMiLCAic3JjL2luZnJhc3RydWN0dXJlL3R0cy9DaGF0dGVyYm94VFRTU2VydmljZS50cyIsICJzcmMvc2hhcmVkL0F1ZGlvTWFuYWdlci50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL0dvb2dsZUNsb3VkVFRTU2VydmljZS50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL1RUU1NlcnZpY2UudHMiLCAic3JjL2NvcmUvYWxnb3JpdGhtcy9TcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLnRzIiwgInNyYy9jb3JlL3NlcnZpY2VzL1NwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnRzIiwgInNyYy9mZWF0dXJlcy9ib29rLW1hbmFnZW1lbnQvdWkvVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbC50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2UudHMiLCAic3JjL2ZlYXR1cmVzL2Jvb2stbWFuYWdlbWVudC91aS9BZGRCb29rTW9kYWwudHMiLCAic3JjL2ZlYXR1cmVzL3dvcmQtbWFuYWdlbWVudC91aS9BZGRXb3Jkc01vZGFsLnRzIiwgInNyYy9zaGFyZWQvdmFsaWRhdGlvbi50cyIsICJzcmMvc2hhcmVkL0NhbmNlbGxhdGlvblRva2VuLnRzIiwgInNyYy9zaGFyZWQvY29udGFpbmVyL0RJQ29udGFpbmVyLnRzIiwgInNyYy9jb3JlL2VudGl0aWVzL1ZvY2FidWxhcnkudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL0FkZFdvcmRVc2VDYXNlLnRzIiwgInNyYy9jb3JlL2VudGl0aWVzL0Jvb2sudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL0NyZWF0ZUJvb2tVc2VDYXNlLnRzIiwgInNyYy9jb3JlL3VzZS1jYXNlcy9HZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL1Jldmlld1dvcmRVc2VDYXNlLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvQm9va1JlcG9zaXRvcnlBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZS50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2VBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9leHRlcm5hbC9Xb3JkU2VydmljZUFkYXB0ZXIudHMiLCAic3JjL2NvcmUvcG9ydHMvc2VydmljZXMvSVRUU1NlcnZpY2VBZGFwdGVyLnRzIiwgInNyYy9zaGFyZWQvY29udGFpbmVyL1NlcnZpY2VSZWdpc3RyeS50cyIsICJzcmMvc2hhcmVkL0Vycm9yQm91bmRhcnkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUywgVm9jYWJ1bGFyeVNldHRpbmdUYWIgfSBmcm9tICcuL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcbmltcG9ydCB7IFZvY2FidWxhcnlNb2RhbCB9IGZyb20gJy4vZmVhdHVyZXMvdm9jYWJ1bGFyeS1sZWFybmluZy91aS9Wb2NhYnVsYXJ5TW9kYWwnO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuL1ZvY2FidWxhcnlDYXJkJztcbmltcG9ydCB7IFZvY2FidWxhcnlNYW5hZ2VyTW9kYWwgfSBmcm9tICcuL2ZlYXR1cmVzL2Jvb2stbWFuYWdlbWVudC91aS9Wb2NhYnVsYXJ5TWFuYWdlck1vZGFsJztcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuL2luZnJhc3RydWN0dXJlL3N0b3JhZ2UvVm9jYWJ1bGFyeURhdGFiYXNlJztcbmltcG9ydCB7IEFkZFdvcmRzTW9kYWwgfSBmcm9tICcuL2ZlYXR1cmVzL3dvcmQtbWFuYWdlbWVudC91aS9BZGRXb3Jkc01vZGFsJztcbmltcG9ydCB7IEFkZEJvb2tNb2RhbCB9IGZyb20gJy4vZmVhdHVyZXMvYm9vay1tYW5hZ2VtZW50L3VpL0FkZEJvb2tNb2RhbCc7XG5pbXBvcnQgeyBMTE1TZXJ2aWNlIH0gZnJvbSAnLi9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZSc7XG5pbXBvcnQgeyBlbmNyeXB0QXBpS2V5U3luYyBhcyBlbmNyeXB0QXBpS2V5LCBkZWNyeXB0QXBpS2V5U3luYyBhcyBkZWNyeXB0QXBpS2V5IH0gZnJvbSAnLi91dGlscyc7XG5cbi8vIERJIENvbnRhaW5lclxuaW1wb3J0IHsgRElDb250YWluZXIsIGNvbnRhaW5lciB9IGZyb20gJy4vc2hhcmVkL2NvbnRhaW5lci9ESUNvbnRhaW5lcic7XG5pbXBvcnQgeyBTZXJ2aWNlUmVnaXN0cnkgfSBmcm9tICcuL3NoYXJlZC9jb250YWluZXIvU2VydmljZVJlZ2lzdHJ5JztcblxuLy8gRXJyb3IgQm91bmRhcnlcbmltcG9ydCB7IEVycm9yQm91bmRhcnkgfSBmcm9tICcuL3NoYXJlZC9FcnJvckJvdW5kYXJ5JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3M7XG4gICAgZGF0YWJhc2VNYW5hZ2VyOiBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyO1xuICAgIGxsbVNlcnZpY2U6IExMTVNlcnZpY2U7XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IERJQ29udGFpbmVyO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICAvLyBFcnJvciBCb3VuZGFyeSBcdUNEMDhcdUFFMzBcdUQ2NTRcbiAgICAgICAgY29uc3QgZXJyb3JCb3VuZGFyeSA9IEVycm9yQm91bmRhcnkuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgZXJyb3JCb3VuZGFyeS5pbml0aWFsaXplKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzhcdUJDQzQgXHVDNUQwXHVCN0VDIFx1RDU3OFx1QjRFNFx1QjdFQyBcdUI0RjFcdUI4NURcbiAgICAgICAgZXJyb3JCb3VuZGFyeS5yZWdpc3RlckhhbmRsZXIoJ1ZvY2FidWxhcnlQbHVnaW4nLCAoZXJyb3JJbmZvKSA9PiB7XG4gICAgICAgICAgICAvLyBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzggXHVBRDAwXHVCODI4IFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUMgXHVCODVDXHVDOUMxXG4gICAgICAgICAgICBpZiAoZXJyb3JJbmZvLmNvbnRleHQ/LmluY2x1ZGVzKCdBUEknKSkge1xuICAgICAgICAgICAgICAgIC8vIEFQSSBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDXHVCMjk0IFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUI2MTBcdUIyOTQgXHVEM0Y0XHVCQzMxIFx1Q0M5OFx1QjlBQ1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQVBJIFx1QzVEMFx1QjdFQyBcdUFDMTBcdUM5QzAsIFx1RDNGNFx1QkMzMSBcdUJBQThcdUI0RENcdUI4NUMgXHVDODA0XHVENjU4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAgICAgLy8gREkgQ29udGFpbmVyIFx1Q0QwOFx1QUUzMFx1RDY1NFxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgU2VydmljZVJlZ2lzdHJ5LnJlZ2lzdGVyU2VydmljZXModGhpcy5jb250YWluZXIsIHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcblxuICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTQgXHVCOUU0XHVCMkM4XHVDODAwIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxuICAgICAgICB0aGlzLmRhdGFiYXNlTWFuYWdlciA9IHRoaXMuY29udGFpbmVyLnJlc29sdmU8Vm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcj4oJ2RhdGFiYXNlTWFuYWdlcicpO1xuICAgICAgICBcbiAgICAgICAgLy8gTExNIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUNEMDhcdUFFMzBcdUQ2NTRcbiAgICAgICAgdGhpcy5sbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2UodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIFxuICAgICAgICAvLyBNRCBcdUQzMENcdUM3N0MgXHVBRTMwXHVCQzE4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0RENcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0REMgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBkYXRhLmpzb25cdUM1RDBcdUMxMUMgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4IFx1QzJEQ1x1QjNDNFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5taWdyYXRlRnJvbUxlZ2FjeURhdGEoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNSBcdUQwRUQgXHVDRDk0XHVBQzAwXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVm9jYWJ1bGFyeVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICAvLyBcdUJBODVcdUI4MzlcdUM1QjQgXHVDRDk0XHVBQzAwXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ29wZW4tdm9jYWJ1bGFyeS1tb2RhbCcsXG4gICAgICAgICAgICBuYW1lOiAnXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjUgXHVDMkRDXHVDNzkxJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IFZvY2FidWxhcnlNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0Y0XHVBRTMwIFx1QkE4NVx1QjgzOVx1QzVCNCBcdUNEOTRcdUFDMDBcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnb3Blbi12b2NhYnVsYXJ5LW1hbmFnZXInLFxuICAgICAgICAgICAgbmFtZTogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUJDRjRcdUFFMzAnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwIFx1QkE4NVx1QjgzOVx1QzVCNCBcdUNEOTRcdUFDMDBcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnYWRkLXdvcmRzJyxcbiAgICAgICAgICAgIG5hbWU6ICdcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IEFkZFdvcmRzTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHVCOUFDXHVCQ0Y4IFx1QzU0NFx1Qzc3NFx1Q0Y1OCBcdUNEOTRcdUFDMDAgKFx1Q0M0NSBcdUM1NDRcdUM3NzRcdUNGNTgpXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignYm9vaycsICdcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0Y0XHVBRTMwJywgKCkgPT4ge1xuICAgICAgICAgICAgbmV3IFZvY2FidWxhcnlNYW5hZ2VyTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb251bmxvYWQoKSB7XG4gICAgICAgIC8vIEVycm9yIEJvdW5kYXJ5IFx1QzgxNVx1QjlBQ1xuICAgICAgICBjb25zdCBlcnJvckJvdW5kYXJ5ID0gRXJyb3JCb3VuZGFyeS5nZXRJbnN0YW5jZSgpO1xuICAgICAgICBlcnJvckJvdW5kYXJ5LnVucmVnaXN0ZXJIYW5kbGVyKCdWb2NhYnVsYXJ5UGx1Z2luJyk7XG4gICAgICAgIGVycm9yQm91bmRhcnkuY2xlYW51cCgpO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QjlDQyBcdUI4NUNcdUI0REMgKFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUIzNzBcdUM3NzRcdUQxMzBcdUM2NDAgXHVCRDg0XHVCOUFDKVxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICAgICAgICBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgJ3NldHRpbmdzJyBpbiBkYXRhKSB7XG4gICAgICAgICAgICAvLyBcdUQxQjVcdUQ1NjlcdUI0MUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNUQwXHVDMTFDIFx1QzEyNFx1QzgxNSBcdUJEODBcdUJEODRcdUI5Q0MgXHVDRDk0XHVDRDlDXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgZGF0YS5zZXR0aW5ncyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgJ2FwaUtleScgaW4gZGF0YSkge1xuICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1RDYxNVx1QzJERFx1Qzc1OCBcdUMxMjRcdUM4MTUgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNzc4IFx1QUNCRFx1QzZCMFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QUMwMCBcdUM1QzZcdUIyOTQgXHVBQ0JEXHVDNkIwIFx1QUUzMFx1QkNGOFx1QUMxMiBcdUMwQUNcdUM2QTlcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFQSSBcdUQwQTQgXHVDNTU0XHVENjM4XHVENjU0IFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OFxuICAgICAgICBhd2FpdCB0aGlzLm1pZ3JhdGVBcGlLZXlzKCk7XG4gICAgfVxuXG4gICAgLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XG4gICAgcHJpdmF0ZSBhc3luYyBtaWdyYXRlQXBpS2V5cygpIHtcbiAgICAgICAgbGV0IG5lZWRzU2F2ZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIGxsbUFwaUtleVx1QUMwMCBcdUQzQzlcdUJCMzhcdUM3M0NcdUI4NUMgXHVDODAwXHVDN0E1XHVCNDE4XHVDNUI0IFx1Qzc4OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NThcdUFDRTAgXHVDNTU0XHVENjM4XHVENjU0XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmxsbUFwaUtleSAmJiB0aGlzLmlzUGxhaW5UZXh0QXBpS2V5KHRoaXMuc2V0dGluZ3MubGxtQXBpS2V5KSkge1xuICAgICAgICAgICAgY29uc3QgcGxhaW5LZXkgPSB0aGlzLnNldHRpbmdzLmxsbUFwaUtleTtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MubGxtQXBpS2V5ID0gZW5jcnlwdEFwaUtleShwbGFpbktleSk7XG4gICAgICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVCMkU0XHVCOTc4IEFQSSBcdUQwQTRcdUI0RTRcdUIzQzQgXHVEM0M5XHVCQjM4XHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUNFMCBcdUM1NTRcdUQ2MzhcdUQ2NTQgKFx1QUUzMFx1Qzg3NFx1QzVEMCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNzQwIFx1QUNCRFx1QzZCMClcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5ICYmIHRoaXMuaXNQbGFpblRleHRBcGlLZXkodGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXkpKSB7XG4gICAgICAgICAgICBjb25zdCBwbGFpbktleSA9IHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5O1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXkgPSBlbmNyeXB0QXBpS2V5KHBsYWluS2V5KTtcbiAgICAgICAgICAgIG5lZWRzU2F2ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkgJiYgdGhpcy5pc1BsYWluVGV4dEFwaUtleSh0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHBsYWluS2V5ID0gdGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXk7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSA9IGVuY3J5cHRBcGlLZXkocGxhaW5LZXkpO1xuICAgICAgICAgICAgbmVlZHNTYXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleSAmJiB0aGlzLmlzUGxhaW5UZXh0QXBpS2V5KHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5KSkge1xuICAgICAgICAgICAgY29uc3QgcGxhaW5LZXkgPSB0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleTtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5ID0gZW5jcnlwdEFwaUtleShwbGFpbktleSk7XG4gICAgICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVCQ0MwXHVBQ0JEXHVDMEFDXHVENTZEXHVDNzc0IFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM4MDBcdUM3QTVcbiAgICAgICAgaWYgKG5lZWRzU2F2ZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFQSSBcdUQwQTRcdUFDMDAgXHVEM0M5XHVCQjM4XHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QjI5NCBcdUQ1RUNcdUQzN0MgXHVENTY4XHVDMjE4XG4gICAgcHJpdmF0ZSBpc1BsYWluVGV4dEFwaUtleShhcGlLZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIWFwaUtleSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUQwQTRcdUI5N0MgXHVCQ0Y1XHVENjM4XHVENjU0XHVENTc0XHVCQ0Y0XHVBQ0UwIFx1QzZEMFx1QkNGOFx1QUNGQyBcdUIyRTRcdUI5NzRcdUJBNzQgXHVEM0M5XHVCQjM4XHVDNzNDXHVCODVDIFx1QUMwNFx1QzhGQ1xuICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gZGVjcnlwdEFwaUtleShhcGlLZXkpO1xuICAgICAgICAgICAgcmV0dXJuIGRlY3J5cHRlZCA9PT0gYXBpS2V5OyAvLyBcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVBQ0IwXHVBQ0ZDXHVBQzAwIFx1QzZEMFx1QkNGOFx1QUNGQyBcdUFDMTlcdUM3M0NcdUJBNzQgXHVEM0M5XHVCQjM4XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4XHVENTU4XHVCQTc0IFx1RDNDOVx1QkIzOFx1Qzc3QyBcdUFDMDBcdUIyQTVcdUMxMzFcdUM3NzQgXHVDNzg4XHVDNzRDXG4gICAgICAgICAgICAvLyBcdUM3N0NcdUJDMThcdUM4MDFcdUM3NzggQVBJIFx1RDBBNCBcdUQzMjhcdUQxMzQgXHVENjU1XHVDNzc4XG4gICAgICAgICAgICByZXR1cm4gYXBpS2V5LnN0YXJ0c1dpdGgoJ3NrLScpIHx8IGFwaUtleS5zdGFydHNXaXRoKCdzay1hbnQtJykgfHwgYXBpS2V5LnN0YXJ0c1dpdGgoJ0FJemEnKSB8fCBhcGlLZXkubGVuZ3RoID4gMjA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFsbERhdGEoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIExMTSBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIGlmICh0aGlzLmxsbVNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMubGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBESSBDb250YWluZXJcdUM1RDAgXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIFNlcnZpY2VSZWdpc3RyeS51cGRhdGVTZXR0aW5ncyh0aGlzLmNvbnRhaW5lciwgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdUFFMzBcdUM4NzQgZGF0YS5qc29uXHVDNUQwXHVDMTFDIE1EIFx1RDMwQ1x1Qzc3Q1x1Qjg1QyBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNThcbiAgICBwcml2YXRlIGFzeW5jIG1pZ3JhdGVGcm9tTGVnYWN5RGF0YSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcbiAgICAgICAgICAgIGlmIChzYXZlZERhdGEgJiYgc2F2ZWREYXRhLmRhdGFiYXNlICYmIEFycmF5LmlzQXJyYXkoc2F2ZWREYXRhLmRhdGFiYXNlLndvcmRzKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlZ2FjeURhdGEgPSBzYXZlZERhdGEuZGF0YWJhc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNUQwIFx1Q0Q5NFx1QUMwMFxuICAgICAgICAgICAgICAgIGlmIChsZWdhY3lEYXRhLndvcmRzICYmIGxlZ2FjeURhdGEud29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgbGVnYWN5RGF0YS53b3Jkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5hZGRXb3JkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ud29yZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va0lkOiAnZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmQucHJvbnVuY2lhdGlvbiB8fCAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFx1QjJFOFx1QzVCNCBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNTggXHVDMkU0XHVEMzI4OiAke3dvcmQud29yZH1gLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OFxuICAgICAgICAgICAgICAgIGlmIChsZWdhY3lEYXRhLnNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVNldHRpbmdzKGxlZ2FjeURhdGEuc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVCQUE4XHVCNEUwIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM4MDBcdUM3QTUgKFx1QzEyNFx1QzgxNVx1QjlDQyBcdUM4MDBcdUM3QTUsIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUIzNzBcdUM3NzRcdUQxMzBcdUIyOTQgTUQgXHVEMzBDXHVDNzdDXHVCODVDIFx1Qzc5MFx1QjNEOSBcdUM4MDBcdUM3QTVcdUI0MjgpXG4gICAgYXN5bmMgc2F2ZUFsbERhdGEoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5zZXR0aW5nc1xuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKGRhdGEpO1xuICAgIH1cbn1cblxuLy8gXHVEMEMwXHVDNzg1IFx1QzEyMFx1QzVCOCBcdUNEOTRcdUFDMDBcbmV4cG9ydCB7IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luLCBBZGRCb29rTW9kYWwgfTsgIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTm90aWNlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xuaW1wb3J0IHsgTExNU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2xsbS9MTE1TZXJ2aWNlJztcbmltcG9ydCB7IGVuY3J5cHRBcGlLZXksIGRlY3J5cHRBcGlLZXksIG1hc2tBcGlLZXkgfSBmcm9tICcuLi8uLi8uLi91dGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVm9jYWJ1bGFyeVNldHRpbmdzIHtcbiAgICBhcGlLZXk6IHN0cmluZztcbiAgICBkZWZhdWx0TGFuZ3VhZ2U6IHN0cmluZztcbiAgICBzaG93U2ltaWxhcldvcmRzOiBib29sZWFuO1xuICAgIHNob3dFeGFtcGxlczogYm9vbGVhbjtcbiAgICBleGFtcGxlc0NvdW50OiBudW1iZXI7XG4gICAgLy8gXHVBQzAxIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1QkNDNCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgQVBJIFx1RDBBNFxuICAgIG9wZW5haUFwaUtleTogc3RyaW5nO1xuICAgIGFudGhyb3BpY0FwaUtleTogc3RyaW5nO1xuICAgIGdvb2dsZUFwaUtleTogc3RyaW5nO1xuICAgIGxsbVByb3ZpZGVyOiAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dvb2dsZSc7XG4gICAgbGxtTW9kZWw6IHN0cmluZztcbiAgICBlbmFibGVBZHZhbmNlZEZlYXR1cmVzOiBib29sZWFuO1xuICAgIC8vIFx1QkNGNVx1QzJCNSBcdUQ2NTRcdUJBNzQgXHVCMTkyXHVDNzc0IFx1QzEyNFx1QzgxNVxuICAgIHJldmlld01vZGFsSGVpZ2h0OiBudW1iZXI7XG4gICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzgwMFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVBQ0JEXHVCODVDXG4gICAgdm9jYWJ1bGFyeUZvbGRlclBhdGg6IHN0cmluZztcbiAgICAvLyBUVFMgXHVDMTI0XHVDODE1XG4gICAgdHRzRW5hYmxlZDogYm9vbGVhbjtcbiAgICB0dHNQcm92aWRlcjogJ2NoYXR0ZXJib3gnIHwgJ2dvb2dsZS1jbG91ZCc7XG4gICAgdHRzVm9pY2U6IHN0cmluZztcbiAgICB0dHNQbGF5YmFja1NwZWVkOiBudW1iZXI7XG4gICAgdHRzQXV0b1BsYXk6IGJvb2xlYW47XG4gICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVxuICAgIGNoYXR0ZXJib3hBcGlVcmw6IHN0cmluZztcbiAgICBjaGF0dGVyYm94RXhhZ2dlcmF0aW9uOiBudW1iZXI7XG4gICAgY2hhdHRlcmJveENmZ1dlaWdodDogbnVtYmVyO1xuICAgIGNoYXR0ZXJib3hUZW1wZXJhdHVyZTogbnVtYmVyO1xuICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVxuICAgIGdvb2dsZUNsb3VkVFRTQXBpS2V5OiBzdHJpbmc7XG4gICAgZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGU6IHN0cmluZztcbiAgICBnb29nbGVDbG91ZFRUU1NwZWFraW5nUmF0ZTogbnVtYmVyO1xuICAgIGdvb2dsZUNsb3VkVFRTUGl0Y2g6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFZvY2FidWxhcnlTZXR0aW5ncyA9IHtcbiAgICBhcGlLZXk6ICcnLFxuICAgIGRlZmF1bHRMYW5ndWFnZTogJ2tvJyxcbiAgICBzaG93U2ltaWxhcldvcmRzOiB0cnVlLFxuICAgIHNob3dFeGFtcGxlczogdHJ1ZSxcbiAgICBleGFtcGxlc0NvdW50OiAzLFxuICAgIG9wZW5haUFwaUtleTogJycsXG4gICAgYW50aHJvcGljQXBpS2V5OiAnJyxcbiAgICBnb29nbGVBcGlLZXk6ICcnLFxuICAgIGxsbVByb3ZpZGVyOiAnb3BlbmFpJyxcbiAgICBsbG1Nb2RlbDogJ2dlbWluaS0xLjAtcHJvLWxhdGVzdCcsXG4gICAgZW5hYmxlQWR2YW5jZWRGZWF0dXJlczogZmFsc2UsXG4gICAgcmV2aWV3TW9kYWxIZWlnaHQ6IDg1LFxuICAgIHZvY2FidWxhcnlGb2xkZXJQYXRoOiAnVm9jYWJ1bGFyeScsXG4gICAgdHRzRW5hYmxlZDogdHJ1ZSxcbiAgICB0dHNQcm92aWRlcjogJ2NoYXR0ZXJib3gnLFxuICAgIHR0c1ZvaWNlOiAnYWxsb3knLFxuICAgIHR0c1BsYXliYWNrU3BlZWQ6IDEuMCxcbiAgICB0dHNBdXRvUGxheTogZmFsc2UsXG4gICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVBRTMwXHVCQ0Y4XHVBQzEyXG4gICAgY2hhdHRlcmJveEFwaVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMycsIC8vIFx1QUNCRFx1QUNFMDogSFRUUFx1QjI5NCBcdUJDRjRcdUM1NDhcdUM1RDAgXHVDREU4XHVDNTdEXHVENTY5XHVCMkM4XHVCMkU0LiBcdUFDMDBcdUIyQTVcdUQ1NThcdUJBNzQgSFRUUFNcdUI5N0MgXHVDMEFDXHVDNkE5XHVENTU4XHVDMTM4XHVDNjk0LlxuICAgIGNoYXR0ZXJib3hFeGFnZ2VyYXRpb246IDAuNyxcbiAgICBjaGF0dGVyYm94Q2ZnV2VpZ2h0OiAwLjQsXG4gICAgY2hhdHRlcmJveFRlbXBlcmF0dXJlOiAwLjksXG4gICAgLy8gR29vZ2xlIENsb3VkIFRUUyBcdUFFMzBcdUJDRjhcdUFDMTJcbiAgICBnb29nbGVDbG91ZFRUU0FwaUtleTogJycsXG4gICAgZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGU6ICdlbi1VUycsXG4gICAgZ29vZ2xlQ2xvdWRUVFNTcGVha2luZ1JhdGU6IDEuMCxcbiAgICBnb29nbGVDbG91ZFRUU1BpdGNoOiAwLjBcbn07XG5cbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjUgXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4IFx1QzEyNFx1QzgxNScgfSk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVCYXNpY1NldHRpbmdzKGNvbnRhaW5lckVsKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY3JlYXRlTExNU2V0dGluZ3MoY29udGFpbmVyRWwpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jcmVhdGVUVFNTZXR0aW5ncyhjb250YWluZXJFbCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNyZWF0ZUFkdmFuY2VkU2V0dGluZ3MoY29udGFpbmVyRWwpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQmFzaWNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVBRTMwXHVCQ0Y4IFx1QzEyNFx1QzgxNScgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVBRTMwXHVCQ0Y4IFx1QzVCOFx1QzVCNCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0IFx1QjczQlx1Qzc0NCBcdUQ0NUNcdUMyRENcdUQ1NjAgXHVDNUI4XHVDNUI0XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbigna28nLCAnXHVENTVDXHVBRDZEXHVDNUI0JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbicsICdFbmdsaXNoJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdqYScsICdcdTY1RTVcdTY3MkNcdThBOUUnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TGFuZ3VhZ2UpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TGFuZ3VhZ2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjQgXHVENDVDXHVDMkRDJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ1NTlcdUMyQjVcdUQ1NjAgXHVCNTRDIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NDQgXHVENTY4XHVBRUQ4IFx1RDQ1Q1x1QzJEQ1x1RDU2OVx1QjJDOFx1QjJFNC4nKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTaW1pbGFyV29yZHMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U2ltaWxhcldvcmRzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM2MDhcdUJCMzggXHVENDVDXHVDMkRDJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ1NTlcdUMyQjVcdUQ1NjAgXHVCNTRDIFx1QzYwOFx1QkIzOFx1QjRFNFx1Qzc0NCBcdUQ1NjhcdUFFRDggXHVENDVDXHVDMkRDXHVENTY5XHVCMkM4XHVCMkU0LicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0V4YW1wbGVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0V4YW1wbGVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM2MDhcdUJCMzggXHVBQzFDXHVDMjE4JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ0NUNcdUMyRENcdUQ1NjAgXHVDNjA4XHVCQjM4XHVDNzU4IFx1QUMxQ1x1QzIxOFx1Qjk3QyBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMSwgMTAsIDEpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YW1wbGVzQ291bnQpXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YW1wbGVzQ291bnQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlTExNU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0xMTSBBUEkgXHVDMTI0XHVDODE1JyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUFDRTBcdUFFMDkgXHVBRTMwXHVCMkE1IFx1RDY1Q1x1QzEzMVx1RDY1NCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnTExNIEFQSVx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NUMgXHVBQ0UwXHVBRTA5IFx1QUUzMFx1QjJBNVx1Qzc0NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBZHZhbmNlZEZlYXR1cmVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQWR2YW5jZWRGZWF0dXJlcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTExNIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDMEFDXHVDNkE5XHVENTYwIExMTSBBUEkgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignb3BlbmFpJywgJ09wZW5BSSAoR1BUKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignYW50aHJvcGljJywgJ0FudGhyb3BpYyAoQ2xhdWRlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ29vZ2xlJywgJ0dvb2dsZSAoR2VtaW5pKScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVByb3ZpZGVyKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXIgPSB2YWx1ZSBhcyAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dvb2dsZSc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ29wZW5haScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbU1vZGVsID0gJ2dwdC00LjEnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnYW50aHJvcGljJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnY2xhdWRlLTMtNS1zb25uZXQnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnZ29vZ2xlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnZ2VtaW5pLTIuNS1mbGFzaCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZU1vZGVsU2VsZWN0aW9uKGNvbnRhaW5lckVsKTtcblxuICAgICAgICAvLyBcdUFDMDEgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVCQ0M0IEFQSSBcdUQwQTQgXHVDMTI0XHVDODE1XG4gICAgICAgIHRoaXMuY3JlYXRlQXBpS2V5U2V0dGluZ3MoY29udGFpbmVyRWwpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FQSSBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc1OCBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QUM4QyBcdUMxMjRcdUM4MTVcdUI0MThcdUM1QzhcdUIyOTRcdUM5QzAgXHVEMTRDXHVDMkE0XHVEMkI4XHVENTY5XHVCMkM4XHVCMkU0LicpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4JylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUQxNENcdUMyQTRcdUQyQjggXHVDOTExLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2UodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbGxtU2VydmljZS50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgQVBJIFx1QzVGMFx1QUNCMCBcdUMxMzFcdUFDRjUhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBBUEkgXHVDNUYwXHVBQ0IwIFx1QzJFNFx1RDMyODogJyArIHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQVBJIFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjg6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUQxNENcdUMyQTRcdUQyQjgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVNb2RlbFNlbGVjdGlvbihjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQVBJIFx1QkFBOFx1QjM3OCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDMEFDXHVDNkE5XHVENTYwIExMTSBcdUJBQThcdUIzNzhcdUM3NDQgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXI7XG4gICAgICAgICAgICAgICAgaWYgKHByb3ZpZGVyID09PSAnb3BlbmFpJykge1xuICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuMScsICdHUFQtNC4xJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dwdC00bycsICdHUFQtNG8nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTRvLW1pbmknLCAnR1BULTRvIE1pbmknKSAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuMS1sb25nJywgJ0dQVC00LjEgKExvbmcgQ29udGV4dCknKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuNS1wcmV2aWV3JywgJ0dQVC00LjUgUHJldmlldycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNC41LXByZXZpZXctMicsICdHUFQtNC41IFByZXZpZXcgMicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdhbnRocm9waWMnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGF1ZGUgMy41IFx1QkFBOFx1QjM3OFx1QjRFNFxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNS1zb25uZXQnLCAnQ2xhdWRlIDMuNSBTb25uZXQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNS1oYWlrdScsICdDbGF1ZGUgMy41IEhhaWt1JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTUtb3B1cycsICdDbGF1ZGUgMy41IE9wdXMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xhdWRlIDMuNyBcdUJBQThcdUIzNzhcdUI0RTRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTctc29ubmV0JywgJ0NsYXVkZSAzLjcgU29ubmV0JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTctaGFpa3UnLCAnQ2xhdWRlIDMuNyBIYWlrdScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy03LW9wdXMnLCAnQ2xhdWRlIDMuNyBPcHVzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTUtZmxhc2gnLCAnQ2xhdWRlIDMuNSBGbGFzaCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdnb29nbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdnZW1pbmktMS41LXByby1sYXRlc3QnLCAnR2VtaW5pIDEuNSBQcm8nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ2VtaW5pLTIuNS1mbGFzaCcsICdHZW1pbmkgMi41IEZsYXNoJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0yLjUtcHJvJywgJ0dlbWluaSAyLjUgUHJvJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0xLjUtZmxhc2gtbGF0ZXN0JywgJ0dlbWluaSAxLjUgRmxhc2gnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Nb2RlbClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQXBpS2V5U2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIE9wZW5BSSBBUEkgXHVEMEE0XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ09wZW5BSSBBUEkgXHVEMEE0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdPcGVuQUkgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIChzay0uLi5cdUI4NUMgXHVDMkRDXHVDNzkxKScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpQXBpS2V5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY3J5cHRlZEtleSA9IGRlY3J5cHRBcGlLZXkoY3VycmVudEtleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignc2stLi4uJylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVDMEFDXHVDNkE5XHVDNzkwXHVBQzAwIFx1Qzc4NVx1QjgyNVx1RDU1QyBcdUFDMTJcdUM3NzQgXHVCOUM4XHVDMkE0XHVEMEI5XHVCNDFDIFx1QUMxMlx1QUNGQyBcdUIyRTRcdUI5NzRcdUJBNzQgXHVDMEM4XHVCODVDXHVDNkI0IFx1RDBBNFx1Qjg1QyBcdUFDMDRcdUM4RkNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkS2V5ID0gZW5jcnlwdEFwaUtleSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpQXBpS2V5ID0gZW5jcnlwdGVkS2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFudGhyb3BpYyBBUEkgXHVEMEE0XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FudGhyb3BpYyBBUEkgXHVEMEE0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdBbnRocm9waWMgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIChzay1hbnQtLi4uXHVCODVDIFx1QzJEQ1x1Qzc5MSknKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEtleSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hc2tlZEtleSA9IG1hc2tBcGlLZXkoZGVjcnlwdGVkS2V5KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3NrLWFudC0uLi4nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFza2VkS2V5KVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IG1hc2tlZEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZEtleSA9IGVuY3J5cHRBcGlLZXkodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSA9IGVuY3J5cHRlZEtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBHb29nbGUgQVBJIFx1RDBBNFxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdHb29nbGUgQVBJIFx1RDBBNCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnR29vZ2xlIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQXBpS2V5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY3J5cHRlZEtleSA9IGRlY3J5cHRBcGlLZXkoY3VycmVudEtleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQUl6YS4uLicpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShtYXNrZWRLZXkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkS2V5ID0gZW5jcnlwdEFwaUtleSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQXBpS2V5ID0gZW5jcnlwdGVkS2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQWR2YW5jZWRTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVBQ0UwXHVBRTA5IFx1QzEyNFx1QzgxNScgfSk7XG5cbiAgICAgICAgLy8gXHVEM0Y0XHVCMzU0IFx1QkFBOVx1Qjg1RCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcbiAgICAgICAgY29uc3QgZm9sZGVycyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKClcbiAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcikgYXMgVEZvbGRlcltdO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MDBcdUM3QTUgXHVEM0Y0XHVCMzU0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDXHVCNEU0XHVDNzc0IFx1QzgwMFx1QzdBNVx1QjQyMCBcdUQzRjRcdUIzNTRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LiAoXHVBRTMwXHVCQ0Y4XHVBQzEyOiBWb2NhYnVsYXJ5KScpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIGZvbGRlcnMuZm9yRWFjaChmb2xkZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oZm9sZGVyLnBhdGgsIGZvbGRlci5wYXRoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnZvY2FidWxhcnlGb2xkZXJQYXRoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlVm9jYWJ1bGFyeUZvbGRlclBhdGgodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVCQ0Y1XHVDMkI1IFx1RDY1NFx1QkE3NCBcdUIxOTJcdUM3NzQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QkNGNVx1QzJCNSBcdUJBQThcdUIyRUNcdUM3NTggXHVCMTkyXHVDNzc0XHVCOTdDIFx1RDY1NFx1QkE3NCBcdUIxOTJcdUM3NzRcdUM3NTggXHVCQzMxXHVCRDg0XHVDNzI4XHVCODVDIFx1QzEyNFx1QzgxNVx1RDU1OFx1QzEzOFx1QzY5NC4gKFx1QUUzMFx1QkNGOFx1QUMxMjogODUlKScpXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDUwLCA5NSwgNSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHQpXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3N0NcdUM3N0MgXHVENTU5XHVDMkI1IFx1QkFBOVx1RDQ1QycpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVENTU4XHVCOEU4XHVDNUQwIFx1RDU1OVx1QzJCNVx1RDU2MCBcdUIyRThcdUM1QjRcdUM3NTggXHVCQUE5XHVENDVDIFx1QUMxQ1x1QzIxOFx1Qjk3QyBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoNSwgNTAsIDUpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8uZ2V0RGF0YUZvclNhdmUoKT8uc2V0dGluZ3M/LmRhaWx5R29hbCB8fCAxMClcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyPy51cGRhdGVTZXR0aW5ncyh7IGRhaWx5R29hbDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QkNGNVx1QzJCNSBcdUFDMDRcdUFDQTkgKFx1Qzc3QyknKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUIyRTRcdUMyREMgXHVCQ0Y1XHVDMkI1XHVENTYwIFx1QUMwNFx1QUNBOVx1Qzc0NCBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMSwgMzAsIDEpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8uZ2V0RGF0YUZvclNhdmUoKT8uc2V0dGluZ3M/LnJldmlld0ludGVydmFsIHx8IDEpXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8udXBkYXRlU2V0dGluZ3MoeyByZXZpZXdJbnRlcnZhbDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlVFRTU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1RUUyAoXHVDNzRDXHVDMTMxIFx1Qzc3RFx1QUUzMCkgXHVDMTI0XHVDODE1JyB9KTtcblxuICAgICAgICBjb25zdCB0dHNUb2dnbGVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnVFRTIFx1RDY1Q1x1QzEzMVx1RDY1NCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0XHVDNjQwIFx1QzYwOFx1QkIzOFx1Qzc0NCBcdUM3NENcdUMxMzFcdUM3M0NcdUI4NUMgXHVDNzdEXHVDNUI0XHVDOEZDXHVCMjk0IFx1QUUzMFx1QjJBNVx1Qzc0NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNFbmFibGVkKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzRW5hYmxlZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVFRTIFx1QzEyNFx1QzgxNSBVSSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUVFNTZXR0aW5nc1Zpc2liaWxpdHkoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gVFRTIFx1QzgxQ1x1QUNGNVx1Qzc5MCBcdUMxMjBcdUQwRERcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnVFRTIFx1QzgxQ1x1QUNGNVx1Qzc5MCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDMEFDXHVDNkE5XHVENTYwIFRUUyBcdUMxMUNcdUJFNDRcdUMyQTRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3R0cy1wcm92aWRlci1zZXR0aW5nJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NoYXR0ZXJib3gnLCAnQ2hhdHRlcmJveCBUVFMgKFx1Qjg1Q1x1Q0VFQyknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dvb2dsZS1jbG91ZCcsICdHb29nbGUgQ2xvdWQgVGV4dC10by1TcGVlY2gnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQcm92aWRlcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c1Byb3ZpZGVyID0gdmFsdWUgYXMgJ2NoYXR0ZXJib3gnIHwgJ2dvb2dsZS1jbG91ZCc7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRUU1Byb3ZpZGVyU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDMTI0XHVDODE1XG4gICAgICAgIHRoaXMuY3JlYXRlQ2hhdHRlcmJveFRUU1NldHRpbmdzKGNvbnRhaW5lckVsKTtcblxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzEyNFx1QzgxNVxuICAgICAgICB0aGlzLmNyZWF0ZUdvb2dsZUNsb3VkVFRTU2V0dGluZ3MoY29udGFpbmVyRWwpO1xuXG4gICAgICAgIC8vIFx1Qzc5MFx1QjNEOSBcdUM3QUNcdUMwREQgXHVDMTI0XHVDODE1IChcdUFDRjVcdUQxQjUpXG4gICAgICAgIGNvbnN0IGF1dG9QbGF5U2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Qzc5MFx1QjNEOSBcdUM3QUNcdUMwREQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNCBcdUNFNzRcdUI0RENcdUFDMDAgXHVENDVDXHVDMkRDXHVCNDIwIFx1QjU0QyBcdUM3OTBcdUIzRDlcdUM3M0NcdUI4NUMgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc3RFx1QzVCNFx1QzkwRFx1QjJDOFx1QjJFNC4nKVxuICAgICAgICAgICAgLnNldENsYXNzKCd0dHMtYXV0b3BsYXktc2V0dGluZycpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzQXV0b1BsYXkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNBdXRvUGxheSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUNEMDhcdUFFMzAgXHVDMEMxXHVEMERDIFx1QzEyNFx1QzgxNVxuICAgICAgICB0aGlzLnVwZGF0ZVRUU1NldHRpbmdzVmlzaWJpbGl0eSgpO1xuICAgICAgICAvLyBcdUM4MUNcdUFDRjVcdUM3OTBcdUJDQzQgXHVDMTI0XHVDODE1IFx1Q0QwOFx1QUUzMFx1RDY1NFxuICAgICAgICB0aGlzLnVwZGF0ZVRUU1Byb3ZpZGVyU2V0dGluZ3MoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHBvcHVsYXRlQ2hhdHRlcmJveFZvaWNlRHJvcGRvd24oZHJvcGRvd246IGFueSk6IHZvaWQge1xuICAgICAgICAvLyBDaGF0dGVyYm94IFRUUyBcdUM5QzBcdUM2RDAgXHVDNzRDXHVDMTMxXHVCNEU0IChPcGVuQUkgXHVENjM4XHVENjU4KVxuICAgICAgICBjb25zdCBjaGF0dGVyYm94Vm9pY2VzID0gW1xuICAgICAgICAgICAgeyB2YWx1ZTogJ2FsbG95JywgbmFtZTogJ0FsbG95IChcdUM5MTFcdUMxMzFcdUM4MDEpJyB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ2VjaG8nLCBuYW1lOiAnRWNobyAoXHVCMEE4XHVDMTMxKScgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdmYWJsZScsIG5hbWU6ICdGYWJsZSAoXHVDNjAxXHVBRDZEXHVDMkREKScgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdvbnl4JywgbmFtZTogJ09ueXggKFx1QUU0QVx1Qzc0MCBcdUIwQThcdUMxMzEpJyB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ25vdmEnLCBuYW1lOiAnTm92YSAoXHVDNUVDXHVDMTMxKScgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdzaGltbWVyJywgbmFtZTogJ1NoaW1tZXIgKFx1QkQ4MFx1QjREQ1x1QjdFQ1x1QzZCNCBcdUM1RUNcdUMxMzEpJyB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ2N1c3RvbScsIG5hbWU6ICdDdXN0b20gKFx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUM4MTVcdUM3NTgpJyB9XG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gQ2hhdHRlcmJveCBcdUM3NENcdUMxMzFcdUI0RTQgXHVDRDk0XHVBQzAwXG4gICAgICAgIGNoYXR0ZXJib3hWb2ljZXMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG9wdGlvbi52YWx1ZSwgb3B0aW9uLm5hbWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUMyRTRcdUM4MUMgXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOSBcdUFDMDBcdUIyQTVcdUQ1NUMgXHVDNjAxXHVDNUI0IFx1Qzc0Q1x1QzEzMVx1QjRFNCBcdUNEOTRcdUFDMDBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHZvaWNlcyA9IHNwZWVjaFN5bnRoZXNpcy5nZXRWb2ljZXMoKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hWb2ljZXMgPSB2b2ljZXMuZmlsdGVyKHZvaWNlID0+IFxuICAgICAgICAgICAgICAgIHZvaWNlLmxhbmcuc3RhcnRzV2l0aCgnZW4tJykgJiYgXG4gICAgICAgICAgICAgICAgIXZvaWNlLmxhbmcuaW5jbHVkZXMoJ2tvJykgJiZcbiAgICAgICAgICAgICAgICAhY2hhdHRlcmJveFZvaWNlcy5zb21lKG9wdCA9PiBvcHQudmFsdWUgPT09IHZvaWNlLm5hbWUpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoZW5nbGlzaFZvaWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gXHVBRDZDXHVCRDg0XHVDMTIwIFx1Q0Q5NFx1QUMwMFxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignLS0tJywgJy0tLSBcdUMyRENcdUMyQTRcdUQxNUMgXHVDNzRDXHVDMTMxIC0tLScpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGVuZ2xpc2hWb2ljZXMuZm9yRWFjaCh2b2ljZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gYCR7dm9pY2UubmFtZX0gKCR7dm9pY2UubGFuZ30pYDtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKHZvaWNlLm5hbWUsIGRpc3BsYXlOYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignXHVDNzRDXHVDMTMxIFx1QkFBOVx1Qjg1RFx1Qzc0NCBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTQgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVRUU1NldHRpbmdzVmlzaWJpbGl0eSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaXNFbmFibGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzRW5hYmxlZDtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QkFBOFx1QjRFMCBUVFMgXHVBRDAwXHVCODI4IFx1QzEyNFx1QzgxNVx1QjRFNFxuICAgICAgICBjb25zdCBhbGxUdHNTZXR0aW5ncyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgICAgICcudHRzLXByb3ZpZGVyLXNldHRpbmcsIC5jaGF0dGVyYm94LWFwaS11cmwtc2V0dGluZywgLmNoYXR0ZXJib3gtdm9pY2Utc2V0dGluZywgLmNoYXR0ZXJib3gtZXhhZ2dlcmF0aW9uLXNldHRpbmcsIC5jaGF0dGVyYm94LWNmZy1zZXR0aW5nLCAuY2hhdHRlcmJveC10ZW1wZXJhdHVyZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXR0cy1ndWlkZSwgLmdvb2dsZS1jbG91ZC1hcGkta2V5LXNldHRpbmcsIC5nb29nbGUtY2xvdWQtbGFuZ3VhZ2Utc2V0dGluZywgLmdvb2dsZS1jbG91ZC12b2ljZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXNwZWFraW5nLXJhdGUtc2V0dGluZywgLmdvb2dsZS1jbG91ZC1waXRjaC1zZXR0aW5nLCAudHRzLWF1dG9wbGF5LXNldHRpbmcnXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBhbGxUdHNTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmcgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHNldHRpbmcgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoaXNFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3ducyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVycyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInJhbmdlXCJdJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9nZ2xlcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4gKGJ0biBhcyBIVE1MQnV0dG9uRWxlbWVudCkuZGlzYWJsZWQgPSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd25zLmZvckVhY2goZGQgPT4gKGRkIGFzIEhUTUxTZWxlY3RFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzbGlkZXJzLmZvckVhY2goc2xpZGVyID0+IChzbGlkZXIgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlcy5mb3JFYWNoKHRvZ2dsZSA9PiAodG9nZ2xlIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZHJvcGRvd25zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXJzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2dnbGVzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ0biA9PiAoYnRuIGFzIEhUTUxCdXR0b25FbGVtZW50KS5kaXNhYmxlZCA9IHRydWUpO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3ducy5mb3JFYWNoKGRkID0+IChkZCBhcyBIVE1MU2VsZWN0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcbiAgICAgICAgICAgICAgICBzbGlkZXJzLmZvckVhY2goc2xpZGVyID0+IChzbGlkZXIgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcbiAgICAgICAgICAgICAgICB0b2dnbGVzLmZvckVhY2godG9nZ2xlID0+ICh0b2dnbGUgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcbiAgICAgICAgICAgICAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiAoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUVFNcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDFDIFx1QUNCRFx1QzZCMCBcdUM4MUNcdUFDRjVcdUM3OTBcdUJDQzQgXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICBpZiAoaXNFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRUU1Byb3ZpZGVyU2V0dGluZ3MoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBhc3luYyB0ZXN0Q2hhdHRlcmJveENvbm5lY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hBcGlVcmx9L3YxL2F1ZGlvL3NwZWVjaGAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiAnQ29ubmVjdGlvbiB0ZXN0JyxcbiAgICAgICAgICAgICAgICAgICAgdm9pY2U6ICdhbGxveSdcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODQgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNSEnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUMxMUNcdUJDODQgXHVDNzUxXHVCMkY1IFx1QzYyNFx1Qjk1ODogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaGF0dGVyYm94IFRUUyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0IFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjguIFx1QzExQ1x1QkM4NFx1QUMwMCBcdUMyRTRcdUQ1ODkgXHVDOTExXHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVDaGF0dGVyYm94VFRTU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIENoYXR0ZXJib3ggQVBJIFVSTCBcdUMxMjRcdUM4MTVcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2hhdHRlcmJveCBUVFMgQVBJIFVSTCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0XHVDNzU4IFVSTFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIChcdUFFMzBcdUJDRjhcdUFDMTI6IGh0dHA6Ly9sb2NhbGhvc3Q6NDEyMyknKVxuICAgICAgICAgICAgLnNldENsYXNzKCdjaGF0dGVyYm94LWFwaS11cmwtc2V0dGluZycpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMycpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hBcGlVcmwpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94QXBpVXJsID0gdmFsdWUgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMyc7IC8vIFx1QUUzMFx1QkNGOFx1QUMxMjogSFRUUCAoXHVCQ0Y0XHVDNTQ4IFx1QzcwNFx1RDVEOClcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ0NoYXR0ZXJib3ggVFRTIFx1QzExQ1x1QkM4NCBcdUM1RjBcdUFDQjBcdUM3NDQgXHVEMTRDXHVDMkE0XHVEMkI4XHVENTY5XHVCMkM4XHVCMkU0JylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUQxNENcdUMyQTRcdUQyQjggXHVDOTExLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnRlc3RDaGF0dGVyYm94Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1QzVGMFx1QUNCMCBcdUQxNENcdUMyQTRcdUQyQjgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQ2hhdHRlcmJveCBcdUM3NENcdUMxMzEgXHVDMTIwXHVEMEREXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Qzc0Q1x1QzEzMSBcdUMxMjBcdUQwREQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0NoYXR0ZXJib3ggVFRTXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUM3NENcdUMxMzFcdUM3NDQgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2NoYXR0ZXJib3gtdm9pY2Utc2V0dGluZycpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVDaGF0dGVyYm94Vm9pY2VEcm9wZG93bihkcm9wZG93bik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJylcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnXHVDMTIwXHVEMEREXHVENTVDIFx1Qzc0Q1x1QzEzMVx1QzczQ1x1Qjg1QyBcdUMwRDhcdUQ1MEMgXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1QzdBQ1x1QzBERFx1RDU2OVx1QjJDOFx1QjJFNCcpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDN0FDXHVDMEREIFx1QzkxMS4uLicpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbGF5Q2hhdHRlcmJveFZvaWNlUHJldmlldygpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNzRDXHVDMTMxIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzRDXHVDMTMxIFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVx1QjRFNFxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUFDMTBcdUM4MTUgXHVENDVDXHVENjA0IFx1QUMxNVx1QjNDNCAoRXhhZ2dlcmF0aW9uKScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxXHVDNzU4IFx1QUMxMFx1QzgxNSBcdUQ0NUNcdUQ2MDQgXHVBQzE1XHVCM0M0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKDAuMjUgPSBcdUM1N0RcdUQ1NjgsIDIuMCA9IFx1QUMxNVx1RDU2OCknKVxuICAgICAgICAgICAgLnNldENsYXNzKCdjaGF0dGVyYm94LWV4YWdnZXJhdGlvbi1zZXR0aW5nJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMC4yNSwgMi4wLCAwLjA1KVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94RXhhZ2dlcmF0aW9uKVxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94RXhhZ2dlcmF0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdDRkcgXHVBQzAwXHVDOTExXHVDRTU4IChDRkcgV2VpZ2h0KScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxIFx1QzBERFx1QzEzMVx1Qzc1OCBcdUFDMDBcdUM3NzRcdUIzNThcdUMyQTQgXHVBQzE1XHVCM0M0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKDAuMCA9IFx1QzU3RFx1RDU2OCwgMS4wID0gXHVBQzE1XHVENTY4KScpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2NoYXR0ZXJib3gtY2ZnLXNldHRpbmcnKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLjAsIDEuMCwgMC4wNSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveENmZ1dlaWdodClcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveENmZ1dlaWdodCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNjI4XHVCM0M0IChUZW1wZXJhdHVyZSknKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1Qzc0Q1x1QzEzMSBcdUMwRERcdUMxMzFcdUM3NTggXHVDQzNEXHVDNzU4XHVDMTMxXHVDNzQ0IFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKDAuMDUgPSBcdUM3N0NcdUFEMDBcdUMxMzEsIDUuMCA9IFx1Q0MzRFx1Qzc1OFx1QzEzMSknKVxuICAgICAgICAgICAgLnNldENsYXNzKCdjaGF0dGVyYm94LXRlbXBlcmF0dXJlLXNldHRpbmcnKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLjA1LCA1LjAsIDAuMDUpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hUZW1wZXJhdHVyZSlcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveFRlbXBlcmF0dXJlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUdvb2dsZUNsb3VkVFRTU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVDMEFDXHVDNkE5IFx1QUMwMFx1Qzc3NFx1QjREQ1xuICAgICAgICBjb25zdCBndWlkZUVsID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICAgICAgICBjbHM6ICdnb29nbGUtY2xvdWQtdHRzLWd1aWRlIGdvb2dsZS1jbG91ZC1hcGkta2V5LXNldHRpbmcnLFxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbi1ib3R0b206IDE1cHg7IHBhZGRpbmc6IDEwcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgYm9yZGVyLXJhZGl1czogNXB4OyBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7JyB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgZ3VpZGVFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdcdUQ4M0RcdUREMjcgR29vZ2xlIENsb3VkIFRUUyBcdUMxMjRcdUM4MTUgXHVBQzAwXHVDNzc0XHVCNERDJywgYXR0cjogeyBzdHlsZTogJ21hcmdpbjogMCAwIDEwcHggMDsgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7JyB9IH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RlcHNMaXN0ID0gZ3VpZGVFbC5jcmVhdGVFbCgnb2wnLCB7IGF0dHI6IHsgc3R5bGU6ICdtYXJnaW46IDA7IHBhZGRpbmctbGVmdDogMjBweDsgbGluZS1oZWlnaHQ6IDEuNjsnIH0gfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdGVwMSA9IHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknKTtcbiAgICAgICAgc3RlcDEuaW5uZXJIVE1MID0gJzxzdHJvbmc+R29vZ2xlIENsb3VkIENvbnNvbGUgXHVDODExXHVDMThEOjwvc3Ryb25nPiAnO1xuICAgICAgICBjb25zdCBzdGVwMUxpbmsgPSBzdGVwMS5jcmVhdGVFbCgnYScsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnY29uc29sZS5jbG91ZC5nb29nbGUuY29tJyxcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbScsXG4gICAgICAgICAgICBhdHRyOiB7IHN0eWxlOiAnY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7JyB9XG4gICAgICAgIH0pO1xuICAgICAgICBzdGVwMUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly9jb25zb2xlLmNsb3VkLmdvb2dsZS5jb20nLCAnX2JsYW5rJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RlcDIgPSBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XG4gICAgICAgIHN0ZXAyLmlubmVySFRNTCA9ICc8c3Ryb25nPlx1RDUwNFx1Qjg1Q1x1QzgxRFx1RDJCOCBcdUMxMjBcdUQwREQvXHVDMEREXHVDMTMxOjwvc3Ryb25nPiBcdUFFMzBcdUM4NzQgXHVENTA0XHVCODVDXHVDODFEXHVEMkI4XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QUM3MFx1QjA5OCBcdUMwQzggXHVENTA0XHVCODVDXHVDODFEXHVEMkI4XHVCOTdDIFx1QzBERFx1QzEzMVx1RDU2OVx1QjJDOFx1QjJFNC4nO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RlcDMgPSBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XG4gICAgICAgIHN0ZXAzLmlubmVySFRNTCA9ICc8c3Ryb25nPlRleHQtdG8tU3BlZWNoIEFQSSBcdUQ2NUNcdUMxMzFcdUQ2NTQ6PC9zdHJvbmc+ICc7XG4gICAgICAgIGNvbnN0IHN0ZXAzTGluayA9IHN0ZXAzLmNyZWF0ZUVsKCdhJywge1xuICAgICAgICAgICAgdGV4dDogJ0FQSSBcdUI3N0NcdUM3NzRcdUJFMENcdUI3RUNcdUI5QUNcdUM1RDBcdUMxMUMgXHVENjVDXHVDMTMxXHVENjU0JyxcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2xpYnJhcnkvdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tJyxcbiAgICAgICAgICAgIGF0dHI6IHsgc3R5bGU6ICdjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsnIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHN0ZXAzTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2xpYnJhcnkvdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tJywgJ19ibGFuaycpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0ZXA0ID0gc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScpO1xuICAgICAgICBzdGVwNC5pbm5lckhUTUwgPSAnPHN0cm9uZz5BUEkgXHVEMEE0IFx1QzBERFx1QzEzMTo8L3N0cm9uZz4gXHVDMEFDXHVDNkE5XHVDNzkwIFx1Qzc3OFx1Qzk5RCBcdUM4MTVcdUJDRjQgPiBBUEkgXHVEMEE0ID4gXHVDMEM4IEFQSSBcdUQwQTQgXHVDMEREXHVDMTMxJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0ZXA1ID0gc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScpO1xuICAgICAgICBzdGVwNS5pbm5lckhUTUwgPSAnPHN0cm9uZz5BUEkgXHVEMEE0IFx1QzgxQ1x1RDU1QyBcdUMxMjRcdUM4MTUgKFx1QUQ4Q1x1QzdBNSk6PC9zdHJvbmc+IFx1RDBBNCBcdUM4MUNcdUQ1NUMgPiBBUEkgXHVDODFDXHVENTVDID4gQ2xvdWQgVGV4dC10by1TcGVlY2ggQVBJIFx1QzEyMFx1RDBERCc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB3YXJuaW5nRWwgPSBndWlkZUVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDEwcHg7IHBhZGRpbmc6IDhweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvci1yZ2IpOyBib3JkZXItcmFkaXVzOiAzcHg7IGZvbnQtc2l6ZTogMC45ZW07JyB9XG4gICAgICAgIH0pO1xuICAgICAgICB3YXJuaW5nRWwuaW5uZXJIVE1MID0gJ1x1MjZBMFx1RkUwRiA8c3Ryb25nPlx1QzkxMVx1QzY5NDo8L3N0cm9uZz4gVGV4dC10by1TcGVlY2ggQVBJXHVBQzAwIFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM3NDAgXHVBQ0JEXHVDNkIwIFwiQVBJX0tFWV9TRVJWSUNFX0JMT0NLRURcIiBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTY5XHVCMkM4XHVCMkU0Lic7XG5cbiAgICAgICAgLy8gR29vZ2xlIENsb3VkIEFQSSBcdUQwQTQgXHVDMTI0XHVDODE1XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0dvb2dsZSBDbG91ZCBUVFMgQVBJIFx1RDBBNCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnR29vZ2xlIENsb3VkIFRleHQtdG8tU3BlZWNoIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC1hcGkta2V5LXNldHRpbmcnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEtleSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTQXBpS2V5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY3J5cHRlZEtleSA9IGRlY3J5cHRBcGlLZXkoY3VycmVudEtleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQUl6YS4uLicpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShtYXNrZWRLZXkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkS2V5ID0gZW5jcnlwdEFwaUtleSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNBcGlLZXkgPSBlbmNyeXB0ZWRLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4JylcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNUYwXHVBQ0IwXHVDNzQ0IFx1RDE0Q1x1QzJBNFx1RDJCOFx1RDU2OVx1QjJDOFx1QjJFNCcpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzkxMS4uLicpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0R29vZ2xlQ2xvdWRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgXHVDNUI4XHVDNUI0IFx1QzEyNFx1QzgxNVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM1QjhcdUM1QjQgXHVDRjU0XHVCNERDJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDNUI4XHVDNUI0IFx1Q0Y1NFx1QjREQ1x1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcbiAgICAgICAgICAgIC5zZXRDbGFzcygnZ29vZ2xlLWNsb3VkLWxhbmd1YWdlLXNldHRpbmcnKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMnLCAnRW5nbGlzaCAoVVMpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQicsICdFbmdsaXNoIChVSyknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUFVJywgJ0VuZ2xpc2ggKEFVKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tSU4nLCAnRW5nbGlzaCAoSW5kaWEpJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVHb29nbGVDbG91ZFZvaWNlcygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgXHVDNzRDXHVDMTMxIFx1QzEyMFx1RDBERFxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3NENcdUMxMzEgXHVDMTIwXHVEMEREJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdHb29nbGUgQ2xvdWQgVFRTXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUM3NENcdUMxMzFcdUM3NDQgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC12b2ljZS1zZXR0aW5nJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUdvb2dsZUNsb3VkVm9pY2VEcm9wZG93bihkcm9wZG93bik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJylcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnXHVDMTIwXHVEMEREXHVENTVDIFx1Qzc0Q1x1QzEzMVx1QzczQ1x1Qjg1QyBcdUMwRDhcdUQ1MEMgXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1QzdBQ1x1QzBERFx1RDU2OVx1QjJDOFx1QjJFNCcpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDN0FDXHVDMEREIFx1QzkxMS4uLicpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbGF5R29vZ2xlQ2xvdWRWb2ljZVByZXZpZXcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUM3QUNcdUMwREQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVx1QjRFNFxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUI5RDBcdUQ1NThcdUFFMzAgXHVDMThEXHVCM0M0IChTcGVha2luZyBSYXRlKScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxXHVDNzU4IFx1QjlEMFx1RDU1OFx1QUUzMCBcdUMxOERcdUIzQzRcdUI5N0MgXHVDODcwXHVDODA4XHVENTY5XHVCMkM4XHVCMkU0LiAoMC4yNSA9IFx1QjI5MFx1QjlCQywgNC4wID0gXHVCRTYwXHVCOTg0KScpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC1zcGVha2luZy1yYXRlLXNldHRpbmcnKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLjI1LCA0LjAsIDAuMjUpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTU3BlYWtpbmdSYXRlKVxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU1NwZWFraW5nUmF0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNzRDXHVDMTMxIFx1QjE5Mlx1QjBBRVx1Qzc3NCAoUGl0Y2gpJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUM3NENcdUMxMzFcdUM3NTggXHVCMTkyXHVCMEFFXHVDNzc0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKC0yMC4wID0gXHVCMEFFXHVDNzRDLCAyMC4wID0gXHVCMTkyXHVDNzRDKScpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC1waXRjaC1zZXR0aW5nJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoLTIwLjAsIDIwLjAsIDEuMClcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNQaXRjaClcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNQaXRjaCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwb3B1bGF0ZUdvb2dsZUNsb3VkVm9pY2VEcm9wZG93bihkcm9wZG93bjogYW55KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlQ29kZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTTGFuZ3VhZ2VDb2RlO1xuICAgICAgICBcbiAgICAgICAgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLVVTJykge1xuICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1Kb3VybmV5LUQnLCAnSm91cm5leS1EIChNYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtSm91cm5leS1GJywgJ0pvdXJuZXktRiAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtSm91cm5leS1PJywgJ0pvdXJuZXktTyAoTWFsZSknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItQScsICdOZXVyYWwyLUEgKE1hbGUpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUMnLCAnTmV1cmFsMi1DIChGZW1hbGUpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUQnLCAnTmV1cmFsMi1EIChNYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1FJywgJ05ldXJhbDItRSAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1GJywgJ05ldXJhbDItRiAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1HJywgJ05ldXJhbDItRyAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1IJywgJ05ldXJhbDItSCAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1JJywgJ05ldXJhbDItSSAoTWFsZSknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItSicsICdOZXVyYWwyLUogKE1hbGUpJyk7XG4gICAgICAgIH0gZWxzZSBpZiAobGFuZ3VhZ2VDb2RlID09PSAnZW4tR0InKSB7XG4gICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUdCLU5ldXJhbDItQScsICdOZXVyYWwyLUEgKEZlbWFsZSknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUdCLU5ldXJhbDItQicsICdOZXVyYWwyLUIgKE1hbGUpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQi1OZXVyYWwyLUMnLCAnTmV1cmFsMi1DIChGZW1hbGUpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQi1OZXVyYWwyLUQnLCAnTmV1cmFsMi1EIChNYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tR0ItTmV1cmFsMi1GJywgJ05ldXJhbDItRiAoRmVtYWxlKScpO1xuICAgICAgICB9IGVsc2UgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUFVJykge1xuICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1BVS1OZXVyYWwyLUEnLCAnTmV1cmFsMi1BIChGZW1hbGUpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1BVS1OZXVyYWwyLUInLCAnTmV1cmFsMi1CIChNYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tQVUtTmV1cmFsMi1DJywgJ05ldXJhbDItQyAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tQVUtTmV1cmFsMi1EJywgJ05ldXJhbDItRCAoTWFsZSknKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignZW4tVVMtSm91cm5leS1GJywgJ0pvdXJuZXktRiAoRmVtYWxlKScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVHb29nbGVDbG91ZFZvaWNlcygpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgdm9pY2VEcm9wZG93biA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLmdvb2dsZS1jbG91ZC12b2ljZS1zZXR0aW5nIHNlbGVjdCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgICAgICBpZiAodm9pY2VEcm9wZG93bikge1xuICAgICAgICAgICAgdm9pY2VEcm9wZG93bi5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3duID0geyBhZGRPcHRpb246ICh2YWx1ZTogc3RyaW5nLCB0ZXh0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBvcHRpb24udGV4dCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgdm9pY2VEcm9wZG93bi5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICAgICAgfX07XG4gICAgICAgICAgICB0aGlzLnBvcHVsYXRlR29vZ2xlQ2xvdWRWb2ljZURyb3Bkb3duKGRyb3Bkb3duKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVBRTMwXHVCQ0Y4IFx1Qzc0Q1x1QzEzMSBcdUMxMjRcdUM4MTVcbiAgICAgICAgICAgIGNvbnN0IGxhbmd1YWdlQ29kZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTTGFuZ3VhZ2VDb2RlO1xuICAgICAgICAgICAgbGV0IGRlZmF1bHRWb2ljZSA9ICdlbi1VUy1Kb3VybmV5LUYnO1xuICAgICAgICAgICAgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUdCJykgZGVmYXVsdFZvaWNlID0gJ2VuLUdCLU5ldXJhbDItQSc7XG4gICAgICAgICAgICBlbHNlIGlmIChsYW5ndWFnZUNvZGUgPT09ICdlbi1BVScpIGRlZmF1bHRWb2ljZSA9ICdlbi1BVS1OZXVyYWwyLUEnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2b2ljZURyb3Bkb3duLnZhbHVlID0gZGVmYXVsdFZvaWNlO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UgPSBkZWZhdWx0Vm9pY2U7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlVFRTUHJvdmlkZXJTZXR0aW5ncygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQcm92aWRlcjtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNoYXR0ZXJib3hTZXR0aW5ncyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmNoYXR0ZXJib3gtYXBpLXVybC1zZXR0aW5nLCAuY2hhdHRlcmJveC12b2ljZS1zZXR0aW5nLCAuY2hhdHRlcmJveC1leGFnZ2VyYXRpb24tc2V0dGluZywgLmNoYXR0ZXJib3gtY2ZnLXNldHRpbmcsIC5jaGF0dGVyYm94LXRlbXBlcmF0dXJlLXNldHRpbmcnKTtcbiAgICAgICAgY29uc3QgZ29vZ2xlQ2xvdWRTZXR0aW5ncyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmdvb2dsZS1jbG91ZC10dHMtZ3VpZGUsIC5nb29nbGUtY2xvdWQtYXBpLWtleS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLWxhbmd1YWdlLXNldHRpbmcsIC5nb29nbGUtY2xvdWQtdm9pY2Utc2V0dGluZywgLmdvb2dsZS1jbG91ZC1zcGVha2luZy1yYXRlLXNldHRpbmcsIC5nb29nbGUtY2xvdWQtcGl0Y2gtc2V0dGluZycpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVCQUE4XHVCNEUwIFx1QzEyNFx1QzgxNSBcdUMyMjhcdUFFNDBcbiAgICAgICAgY2hhdHRlcmJveFNldHRpbmdzLmZvckVhY2goc2V0dGluZyA9PiB7XG4gICAgICAgICAgICAoc2V0dGluZyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfSk7XG4gICAgICAgIGdvb2dsZUNsb3VkU2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nID0+IHtcbiAgICAgICAgICAgIChzZXR0aW5nIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QzEyMFx1RDBERFx1QjQxQyBcdUM4MUNcdUFDRjVcdUM3OTBcdUM3NTggXHVDMTI0XHVDODE1XHVCOUNDIFx1RDQ1Q1x1QzJEQ1xuICAgICAgICBpZiAocHJvdmlkZXIgPT09ICdjaGF0dGVyYm94Jykge1xuICAgICAgICAgICAgY2hhdHRlcmJveFNldHRpbmdzLmZvckVhY2goc2V0dGluZyA9PiB7XG4gICAgICAgICAgICAgICAgKHNldHRpbmcgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHByb3ZpZGVyID09PSAnZ29vZ2xlLWNsb3VkJykge1xuICAgICAgICAgICAgZ29vZ2xlQ2xvdWRTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmcgPT4ge1xuICAgICAgICAgICAgICAgIChzZXR0aW5nIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcGxheUNoYXR0ZXJib3hWb2ljZVByZXZpZXcoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzYW1wbGVUZXh0cyA9IFtcbiAgICAgICAgICAgICAgICAnSGVsbG8sIHRoaXMgaXMgYSBzYW1wbGUgdm9pY2UgcHJldmlldy4nLFxuICAgICAgICAgICAgICAgICdXZWxjb21lIHRvIEVuZ2xpc2ggdm9jYWJ1bGFyeSBsZWFybmluZy4nLFxuICAgICAgICAgICAgICAgICdUaGlzIHZvaWNlIHdpbGwgaGVscCB5b3UgbGVhcm4gcHJvbnVuY2lhdGlvbi4nLFxuICAgICAgICAgICAgICAgICdCZWF1dGlmdWwgd29yZHMgbWFrZSBiZWF1dGlmdWwgc2VudGVuY2VzLidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbVRleHQgPSBzYW1wbGVUZXh0c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzYW1wbGVUZXh0cy5sZW5ndGgpXTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94QXBpVXJsfS92MS9hdWRpby9zcGVlY2hgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBpbnB1dDogcmFuZG9tVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgdm9pY2U6IHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c1ZvaWNlLFxuICAgICAgICAgICAgICAgICAgICBleGFnZ2VyYXRpb246IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hFeGFnZ2VyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGNmZ193ZWlnaHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hDZmdXZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94VGVtcGVyYXR1cmVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYXR0ZXJib3ggVFRTIEFQSSBcdUM2MjRcdUI5NTg6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChhdWRpb0Jsb2IpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhhdWRpb1VybCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgYXVkaW8ub25lbmRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAgXHVDNjQ0XHVCOENDIScpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhdWRpby5wbGF5KCkuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaGF0dGVyYm94IFRUUyBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzBcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODRcdUFDMDAgXHVDMkU0XHVENTg5IFx1QzkxMVx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcGxheUdvb2dsZUNsb3VkVm9pY2VQcmV2aWV3KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlVGV4dHMgPSBbXG4gICAgICAgICAgICAgICAgJ0hlbGxvLCB0aGlzIGlzIGEgc2FtcGxlIHZvaWNlIHByZXZpZXcuJyxcbiAgICAgICAgICAgICAgICAnV2VsY29tZSB0byBFbmdsaXNoIHZvY2FidWxhcnkgbGVhcm5pbmcuJyxcbiAgICAgICAgICAgICAgICAnVGhpcyB2b2ljZSB3aWxsIGhlbHAgeW91IGxlYXJuIHByb251bmNpYXRpb24uJyxcbiAgICAgICAgICAgICAgICAnQmVhdXRpZnVsIHdvcmRzIG1ha2UgYmVhdXRpZnVsIHNlbnRlbmNlcy4nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByYW5kb21UZXh0ID0gc2FtcGxlVGV4dHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2FtcGxlVGV4dHMubGVuZ3RoKV07XG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSBkZWNyeXB0QXBpS2V5KHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTQXBpS2V5KTtcblxuICAgICAgICAgICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dvb2dsZSBDbG91ZCBUVFMgQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogeyB0ZXh0OiByYW5kb21UZXh0IH0sXG4gICAgICAgICAgICAgICAgdm9pY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGF1ZGlvQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvRW5jb2Rpbmc6ICdNUDMnLFxuICAgICAgICAgICAgICAgICAgICBzcGVha2luZ1JhdGU6IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTU3BlYWtpbmdSYXRlLFxuICAgICAgICAgICAgICAgICAgICBwaXRjaDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNQaXRjaFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tL3YxL3RleHQ6c3ludGhlc2l6ZT9rZXk9JHthcGlLZXl9YCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGV0YWlsZWRFcnJvciA9IHRoaXMuZ2V0RGV0YWlsZWRHb29nbGVDbG91ZEVycm9yKHJlc3BvbnNlLnN0YXR1cywgZXJyb3JEYXRhKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGV0YWlsZWRFcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSB0aGlzLmJhc2U2NFRvQmxvYihkYXRhLmF1ZGlvQ29udGVudCwgJ2F1ZGlvL21wMycpO1xuICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKGF1ZGlvVXJsKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVuZGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzRDXHVDMTMxIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2NDRcdUI4Q0MhJyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGF1ZGlvLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGF1ZGlvLnBsYXkoKS5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBDbG91ZCBUVFMgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XG4gICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnQVBJXHVBQzAwIFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQnKSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0FQSSBcdUQwQTQnKSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdUM3NENcdUMxMzEgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gQVBJIFx1RDBBNFx1QzY0MCBcdUM3NzhcdUQxMzBcdUIxMzcgXHVDNUYwXHVBQ0IwXHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBiYXNlNjRUb0Jsb2IoYmFzZTY0OiBzdHJpbmcsIG1pbWVUeXBlOiBzdHJpbmcpOiBCbG9iIHtcbiAgICAgICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NCk7XG4gICAgICAgIGNvbnN0IGJ5dGVOdW1iZXJzID0gbmV3IEFycmF5KGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBieXRlTnVtYmVyc1tpXSA9IGJ5dGVDaGFyYWN0ZXJzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVOdW1iZXJzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtieXRlQXJyYXldLCB7IHR5cGU6IG1pbWVUeXBlIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgdGVzdEdvb2dsZUNsb3VkQ29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IGRlY3J5cHRBcGlLZXkodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNBcGlLZXkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUQwQTRcdUI5N0MgXHVCQTNDXHVDODAwIFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tL3YxL3RleHQ6c3ludGhlc2l6ZT9rZXk9JHthcGlLZXl9YCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHsgdGV4dDogJ0Nvbm5lY3Rpb24gdGVzdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgdm9pY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogJ2VuLVVTJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdlbi1VUy1Kb3VybmV5LUYnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0VuY29kaW5nOiAnTVAzJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNSEnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbGVkRXJyb3IgPSB0aGlzLmdldERldGFpbGVkR29vZ2xlQ2xvdWRFcnJvcihyZXNwb25zZS5zdGF0dXMsIGVycm9yRGF0YSk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDICR7ZGV0YWlsZWRFcnJvcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBDbG91ZCBUVFMgXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ1x1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QycpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHVDNzc4XHVEMTMwXHVCMTM3IFx1QzVGMFx1QUNCMFx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldERldGFpbGVkR29vZ2xlQ2xvdWRFcnJvcihzdGF0dXM6IG51bWJlciwgZXJyb3JEYXRhOiBhbnkpOiBzdHJpbmcge1xuICAgICAgICBpZiAoZXJyb3JEYXRhPy5lcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBlcnJvckRhdGEuZXJyb3I7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFQSVx1QUMwMCBcdUNDMjhcdUIyRThcdUI0MUMgXHVBQ0JEXHVDNkIwICg0MDMgUEVSTUlTU0lPTl9ERU5JRUQgd2l0aCBBUElfS0VZX1NFUlZJQ0VfQkxPQ0tFRClcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMyAmJiBlcnJvci5kZXRhaWxzPy5zb21lKChkZXRhaWw6IGFueSkgPT4gXG4gICAgICAgICAgICAgICAgZGV0YWlsLnJlYXNvbiA9PT0gJ0FQSV9LRVlfU0VSVklDRV9CTE9DS0VEJyB8fCBcbiAgICAgICAgICAgICAgICBkZXRhaWxbJ0B0eXBlJ10/LmluY2x1ZGVzKCdFcnJvckluZm8nKSAmJiBkZXRhaWwucmVhc29uID09PSAnQVBJX0tFWV9TRVJWSUNFX0JMT0NLRUQnXG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdUZXh0LXRvLVNwZWVjaCBBUElcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDNzA0XHVDNzU4IFx1QUMwMFx1Qzc3NFx1QjREQ1x1Qjk3QyBcdUNDMzhcdUFDRTBcdUQ1NThcdUM1RUMgQVBJXHVCOTdDIFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBUEkgXHVEMEE0IFx1QUQwMFx1QjgyOCBcdUM2MjRcdUI5NThcdUI0RTRcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMykge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnQVBJIGtleSBub3QgdmFsaWQnKSB8fCBlcnJvci5jb2RlID09PSAnSU5WQUxJRF9BUkdVTUVOVCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTQuIFx1RDBBNFx1Qjk3QyBcdUIyRTRcdUMyREMgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygncXVvdGEnKSB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnUVVPVEFfRVhDRUVERUQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0FQSSBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NzQgXHVDRDA4XHVBQ0ZDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBHb29nbGUgQ2xvdWQgQ29uc29sZVx1QzVEMFx1QzExQyBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAnQVBJIFx1QzgxMVx1QURGQ1x1Qzc3NCBcdUFDNzBcdUJEODBcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTQgXHVBRDhDXHVENTVDXHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUM3NzhcdUM5OUQgXHVDNjI0XHVCOTU4ICg0MDEpXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0FQSSBcdUQwQTQgXHVDNzc4XHVDOTlEXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gQVBJIFx1RDBBNFx1QUMwMCBcdUM2MkNcdUJDMTRcdUI5NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QzY5NFx1Q0NBRCBcdUM2MjRcdUI5NTggKDQwMClcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnQVBJIFx1QzY5NFx1Q0NBRFx1Qzc3NCBcdUM3OThcdUJBQkJcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1Qzc0Q1x1QzEzMSBcdUMxMjRcdUM4MTVcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUMwQUNcdUM2QTkgXHVCRDg4XHVBQzAwICg1MDMpXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA1MDMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0XHVBQzAwIFx1Qzc3Q1x1QzJEQ1x1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDN0EwXHVDMkRDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBgQVBJIFx1QzYyNFx1Qjk1OCAoJHtzdGF0dXN9KTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTgnfWA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBgQVBJIFx1QzYyNFx1Qjk1ODogJHtzdGF0dXN9IFx1QzBDMVx1RDBEQyBcdUNGNTRcdUI0RENgO1xuICAgIH1cblxufSAiLCAiLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQvXHVCQ0Y1XHVENjM4XHVENjU0IFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMCAoV2ViIENyeXB0byBBUEkgXHVDMEFDXHVDNkE5KVxuXG4vLyBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVDNTU0XHVENjM4XHVENjU0XHVCOTdDIFx1QzcwNFx1RDU1QyBcdUQwQTQgXHVDMEREXHVDMTMxXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUVuY3J5cHRpb25LZXkoKTogUHJvbWlzZTxDcnlwdG9LZXk+IHtcbiAgICAvLyBcdUMwQUNcdUM2QTlcdUM3OTBcdUJDQzQgXHVBQ0UwXHVDNzIwIFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFFMzBcdUJDMThcdUM3M0NcdUI4NUMgXHVEMEE0IFx1QzBERFx1QzEzMVxuICAgIGNvbnN0IHBsdWdpbklkID0gJ29ic2lkaWFuLWVuZ2xpc2gtdm9jYWJ1bGFyeSc7XG4gICAgY29uc3QgdmVyc2lvbiA9ICcwLjEnO1xuICAgIGNvbnN0IHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG4gICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgIFxuICAgIC8vIFx1RDBBNCBcdUM3QUNcdUI4Q0MgXHVDMEREXHVDMTMxXG4gICAgY29uc3Qga2V5TWF0ZXJpYWwgPSBwbHVnaW5JZCArIHZlcnNpb24gKyB1c2VyQWdlbnQgKyB0aW1lc3RhbXA7XG4gICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIGNvbnN0IGtleURhdGEgPSBlbmNvZGVyLmVuY29kZShrZXlNYXRlcmlhbCk7XG4gICAgXG4gICAgLy8gV2ViIENyeXB0byBBUElcdUI5N0MgXHVDMEFDXHVDNkE5XHVENTVDIFx1QzU0OFx1QzgwNFx1RDU1QyBcdUQwQTQgXHVCM0M0XHVDRDlDXG4gICAgY29uc3QgYmFzZUtleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KFxuICAgICAgICAncmF3JyxcbiAgICAgICAga2V5RGF0YSxcbiAgICAgICAgeyBuYW1lOiAnUEJLREYyJyB9LFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgWydkZXJpdmVCaXRzJywgJ2Rlcml2ZUtleSddXG4gICAgKTtcbiAgICBcbiAgICAvLyBQQktERjJcdUI4NUMgXHVBQzE1XHVCODI1XHVENTVDIFx1RDBBNCBcdUIzQzRcdUNEOUNcbiAgICBjb25zdCBkZXJpdmVkS2V5ID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kZXJpdmVLZXkoXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdQQktERjInLFxuICAgICAgICAgICAgc2FsdDogZW5jb2Rlci5lbmNvZGUoJ29ic2lkaWFuLXZvY2FidWxhcnktc2FsdC0yMDI0JyksXG4gICAgICAgICAgICBpdGVyYXRpb25zOiAxMDAwMDAsXG4gICAgICAgICAgICBoYXNoOiAnU0hBLTI1NidcbiAgICAgICAgfSxcbiAgICAgICAgYmFzZUtleSxcbiAgICAgICAgeyBuYW1lOiAnQUVTLUdDTScsIGxlbmd0aDogMjU2IH0sXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBbJ2VuY3J5cHQnLCAnZGVjcnlwdCddXG4gICAgKTtcbiAgICBcbiAgICByZXR1cm4gZGVyaXZlZEtleTtcbn1cblxuLy8gV2ViIENyeXB0byBBUElcdUI5N0MgXHVDMEFDXHVDNkE5XHVENTVDIFx1QzU0OFx1QzgwNFx1RDU1QyBcdUM1NTRcdUQ2MzhcdUQ2NTRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNyeXB0QXBpS2V5KGFwaUtleTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAoIWFwaUtleSkgcmV0dXJuICcnO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IGdlbmVyYXRlRW5jcnlwdGlvbktleSgpO1xuICAgICAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBlbmNvZGVyLmVuY29kZShhcGlLZXkpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVCNzlDXHVCMzY0IElWIFx1QzBERFx1QzEzMVxuICAgICAgICBjb25zdCBpdiA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMTIpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFFUy1HQ00gXHVDNTU0XHVENjM4XHVENjU0XG4gICAgICAgIGNvbnN0IGVuY3J5cHRlZCA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZW5jcnlwdChcbiAgICAgICAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBpdjogaXYgfSxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIGRhdGFcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElWXHVDNjQwIFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVBQ0IwXHVENTY5XHVENTU4XHVDNUVDIEJhc2U2NCBcdUM3NzhcdUNGNTRcdUI1MjlcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkQXJyYXkgPSBuZXcgVWludDhBcnJheShlbmNyeXB0ZWQpO1xuICAgICAgICBjb25zdCBjb21iaW5lZCA9IG5ldyBVaW50OEFycmF5KGl2Lmxlbmd0aCArIGVuY3J5cHRlZEFycmF5Lmxlbmd0aCk7XG4gICAgICAgIGNvbWJpbmVkLnNldChpdik7XG4gICAgICAgIGNvbWJpbmVkLnNldChlbmNyeXB0ZWRBcnJheSwgaXYubGVuZ3RoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uY29tYmluZWQpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSSBcdUQwQTQgXHVDNTU0XHVENjM4XHVENjU0IFx1QzJFNFx1RDMyODogJyArIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XG4gICAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVjcnlwdEFwaUtleShlbmNyeXB0ZWRBcGlLZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgaWYgKCFlbmNyeXB0ZWRBcGlLZXkpIHJldHVybiAnJztcbiAgICBcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBnZW5lcmF0ZUVuY3J5cHRpb25LZXkoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJhc2U2NCBcdUI1MTRcdUNGNTRcdUI1MjlcbiAgICAgICAgY29uc3QgY29tYmluZWQgPSBuZXcgVWludDhBcnJheShcbiAgICAgICAgICAgIGF0b2IoZW5jcnlwdGVkQXBpS2V5KVxuICAgICAgICAgICAgICAgIC5zcGxpdCgnJylcbiAgICAgICAgICAgICAgICAubWFwKGNoYXIgPT4gY2hhci5jaGFyQ29kZUF0KDApKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gSVZcdUM2NDAgXHVDNTU0XHVENjM4XHVENjU0XHVCNDFDIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUJEODRcdUI5QUNcbiAgICAgICAgY29uc3QgaXYgPSBjb21iaW5lZC5zbGljZSgwLCAxMik7XG4gICAgICAgIGNvbnN0IGVuY3J5cHRlZCA9IGNvbWJpbmVkLnNsaWNlKDEyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFFUy1HQ00gXHVCQ0Y1XHVENjM4XHVENjU0XG4gICAgICAgIGNvbnN0IGRlY3J5cHRlZCA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVjcnlwdChcbiAgICAgICAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBpdjogaXYgfSxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIGVuY3J5cHRlZFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgICAgICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoZGVjcnlwdGVkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSSBcdUQwQTQgXHVCQ0Y1XHVENjM4XHVENjU0IFx1QzJFNFx1RDMyODogJyArIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XG4gICAgfVxufVxuXG4vLyBcdUIzRDlcdUFFMzBcdUMyREQgXHVENjM4XHVENjU4XHVDMTMxXHVDNzQ0IFx1QzcwNFx1RDU1QyBcdUI3OThcdUQzN0MgXHVENTY4XHVDMjE4XHVCNEU0XG5leHBvcnQgZnVuY3Rpb24gZW5jcnlwdEFwaUtleVN5bmMoYXBpS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghYXBpS2V5KSByZXR1cm4gJyc7XG4gICAgXG4gICAgLy8gXHVCRTQ0XHVCM0Q5XHVBRTMwIFx1RDU2OFx1QzIxOFx1Qjk3QyBcdUIzRDlcdUFFMzBcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEFDXHVDNkE5XHVENTU4XHVBRTMwIFx1QzcwNFx1RDU1QyBcdUQzRjRcdUJDMzFcbiAgICAvLyBcdUMyRTRcdUM4MUNcdUI4NUNcdUIyOTQgXHVCRTQ0XHVCM0Q5XHVBRTMwIFx1QkM4NFx1QzgwNFx1Qzc0NCBcdUMwQUNcdUM2QTlcdUQ1NThcdUIyOTQgXHVBQzgzXHVDNzQ0IFx1QUQ4Q1x1QzdBNVxuICAgIHRyeSB7XG4gICAgICAgIC8vIFx1QUMwNFx1QjJFOFx1RDU1QyBYT1IgXHVDNTU0XHVENjM4XHVENjU0IChcdUQ2MzhcdUQ2NThcdUMxMzFcdUM2QTkpXG4gICAgICAgIGNvbnN0IGtleSA9ICdvYnNpZGlhbi12b2NhYi10ZW1wLWtleS0yMDI0JztcbiAgICAgICAgbGV0IGVuY3J5cHRlZCA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFwaUtleS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2hhckNvZGUgPSBhcGlLZXkuY2hhckNvZGVBdChpKSBeIGtleS5jaGFyQ29kZUF0KGkgJSBrZXkubGVuZ3RoKTtcbiAgICAgICAgICAgIGVuY3J5cHRlZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnRvYShlbmNyeXB0ZWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjNEOVx1QUUzMCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlY3J5cHRBcGlLZXlTeW5jKGVuY3J5cHRlZEFwaUtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWVuY3J5cHRlZEFwaUtleSkgcmV0dXJuICcnO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGtleSA9ICdvYnNpZGlhbi12b2NhYi10ZW1wLWtleS0yMDI0JztcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGF0b2IoZW5jcnlwdGVkQXBpS2V5KTtcbiAgICAgICAgbGV0IGRlY3J5cHRlZCA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlY29kZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXJDb2RlID0gZGVjb2RlZC5jaGFyQ29kZUF0KGkpIF4ga2V5LmNoYXJDb2RlQXQoaSAlIGtleS5sZW5ndGgpO1xuICAgICAgICAgICAgZGVjcnlwdGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWNyeXB0ZWQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignXHVCM0Q5XHVBRTMwIFx1QkNGNVx1RDYzOFx1RDY1NCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuXG4vLyBBUEkgXHVEMEE0XHVCOTdDIFx1QjlDOFx1QzJBNFx1RDBCOVx1RDU1OFx1QzVFQyBcdUQ0NUNcdUMyRENcbmV4cG9ydCBmdW5jdGlvbiBtYXNrQXBpS2V5KGFwaUtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWFwaUtleSkgcmV0dXJuICcnO1xuICAgIGlmIChhcGlLZXkubGVuZ3RoIDw9IDgpIHJldHVybiAnKicucmVwZWF0KGFwaUtleS5sZW5ndGgpO1xuICAgIFxuICAgIHJldHVybiBhcGlLZXkuc3Vic3RyaW5nKDAsIDQpICsgJyonLnJlcGVhdChhcGlLZXkubGVuZ3RoIC0gOCkgKyBhcGlLZXkuc3Vic3RyaW5nKGFwaUtleS5sZW5ndGggLSA0KTtcbn1cblxuLy8gXHVCMEEwXHVDOURDIFx1RDNFQ1x1QjlGN1x1RDMwNSBcdUM3MjBcdUQyRjhcdUI5QUNcdUQyRjBcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGVTdHJpbmc6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICAgIGlmICghZGF0ZVN0cmluZykge1xuICAgICAgICByZXR1cm4gJ1x1QzVDNlx1Qzc0Qyc7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICAgIFxuICAgIGlmIChpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgICAgcmV0dXJuICdcdUM3OThcdUJBQkJcdUI0MUMgXHVCMEEwXHVDOURDJztcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2tvLUtSJywge1xuICAgICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICAgIG1vbnRoOiAnbG9uZycsXG4gICAgICAgIGRheTogJ251bWVyaWMnXG4gICAgfSk7XG59ICIsICIvLyBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzggXHVDMTI0XHVDODE1IFx1QzBDMVx1QzIxOCBcdUJDMEYgXHVBRDZDXHVDMTMxXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGx1Z2luQ29uZmlnIHtcbiAgICAvLyBBUEkgXHVBRDAwXHVCODI4IFx1QzEyNFx1QzgxNVxuICAgIGFwaToge1xuICAgICAgICB0aW1lb3V0czoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVtYmVyO1xuICAgICAgICAgICAgbGxtOiBudW1iZXI7XG4gICAgICAgICAgICB0dHM6IG51bWJlcjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0cmllczoge1xuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IG51bWJlcjtcbiAgICAgICAgICAgIGRlbGF5TXM6IG51bWJlcjtcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogYm9vbGVhbjtcbiAgICAgICAgfTtcbiAgICAgICAgcmF0ZUxpbWl0aW5nOiB7XG4gICAgICAgICAgICByZXF1ZXN0c1Blck1pbnV0ZTogbnVtYmVyO1xuICAgICAgICAgICAgYnVyc3RMaW1pdDogbnVtYmVyO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvLyBcdUJDMzBcdUNFNTggXHVDQzk4XHVCOUFDIFx1QzEyNFx1QzgxNVxuICAgIGJhdGNoOiB7XG4gICAgICAgIGRlZmF1bHRTaXplOiBudW1iZXI7XG4gICAgICAgIG1heFNpemU6IG51bWJlcjtcbiAgICAgICAgZGVsYXlCZXR3ZWVuQmF0Y2hlczogbnVtYmVyO1xuICAgICAgICBtYXhDb25jdXJyZW50QmF0Y2hlczogbnVtYmVyO1xuICAgIH07XG5cbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVBRDAwXHVCODI4IFx1QzEyNFx1QzgxNVxuICAgIGF1ZGlvOiB7XG4gICAgICAgIG1heFBvb2xTaXplOiBudW1iZXI7XG4gICAgICAgIGF1dG9DbGVhbnVwVGltZW91dE1zOiBudW1iZXI7XG4gICAgICAgIG1heER1cmF0aW9uTXM6IG51bWJlcjtcbiAgICB9O1xuXG4gICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QzEyNFx1QzgxNVxuICAgIGRhdGFiYXNlOiB7XG4gICAgICAgIGF1dG9TYXZlSW50ZXJ2YWw6IG51bWJlcjtcbiAgICAgICAgYmFja3VwRW5hYmxlZDogYm9vbGVhbjtcbiAgICAgICAgbWF4RmlsZVNpemU6IG51bWJlcjtcbiAgICAgICAgY29tcHJlc3Npb25FbmFibGVkOiBib29sZWFuO1xuICAgIH07XG5cbiAgICAvLyBcdUQ1NTlcdUMyQjUgXHVDNTRDXHVBQ0UwXHVCOUFDXHVDOTk4IFx1QzEyNFx1QzgxNVxuICAgIGxlYXJuaW5nOiB7XG4gICAgICAgIHNwYWNlZF9yZXBldGl0aW9uOiB7XG4gICAgICAgICAgICBpbml0aWFsSW50ZXJ2YWw6IG51bWJlcjtcbiAgICAgICAgICAgIGVhc3lCb251czogbnVtYmVyO1xuICAgICAgICAgICAgaGFyZFBlbmFsdHk6IG51bWJlcjtcbiAgICAgICAgICAgIG1heEludGVydmFsOiBudW1iZXI7XG4gICAgICAgICAgICBtaW5JbnRlcnZhbDogbnVtYmVyO1xuICAgICAgICB9O1xuICAgICAgICBsb2FkX2JhbGFuY2luZzoge1xuICAgICAgICAgICAgbWF4RGFpbHlSZXZpZXdzOiBudW1iZXI7XG4gICAgICAgICAgICBmdXp6aW5nUGVyY2VudGFnZTogbnVtYmVyO1xuICAgICAgICAgICAgZGlzdHJpYnV0aW9uV2luZG93OiBudW1iZXI7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8vIFVJIFx1QzEyNFx1QzgxNVxuICAgIHVpOiB7XG4gICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiBudW1iZXI7XG4gICAgICAgIHByb2dyZXNzVXBkYXRlSW50ZXJ2YWw6IG51bWJlcjtcbiAgICAgICAgbm90aWZpY2F0aW9uVGltZW91dDogbnVtYmVyO1xuICAgICAgICBtb2RhbENsb3NlRGVsYXk6IG51bWJlcjtcbiAgICB9O1xuXG4gICAgLy8gXHVCQ0Y0XHVDNTQ4IFx1QzEyNFx1QzgxNVxuICAgIHNlY3VyaXR5OiB7XG4gICAgICAgIGFwaUtleUVuY3J5cHRpb246IHtcbiAgICAgICAgICAgIGl0ZXJhdGlvbnM6IG51bWJlcjtcbiAgICAgICAgICAgIGtleUxlbmd0aDogbnVtYmVyO1xuICAgICAgICAgICAgc2FsdExlbmd0aDogbnVtYmVyO1xuICAgICAgICB9O1xuICAgICAgICBzZXNzaW9uVGltZW91dDogbnVtYmVyO1xuICAgICAgICBtYXhMb2dpbkF0dGVtcHRzOiBudW1iZXI7XG4gICAgfTtcbn1cblxuLy8gXHVBRTMwXHVCQ0Y4IFx1QzEyNFx1QzgxNVxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09ORklHOiBQbHVnaW5Db25maWcgPSB7XG4gICAgYXBpOiB7XG4gICAgICAgIHRpbWVvdXRzOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiAzMDAwMCwgICAgLy8gMzBcdUNEMDhcbiAgICAgICAgICAgIGxsbTogNjAwMDAsICAgICAgICAvLyA2MFx1Q0QwOFxuICAgICAgICAgICAgdHRzOiAxNTAwMCwgICAgICAgIC8vIDE1XHVDRDA4XG4gICAgICAgIH0sXG4gICAgICAgIHJldHJpZXM6IHtcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAzLFxuICAgICAgICAgICAgZGVsYXlNczogMTAwMCxcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgcmF0ZUxpbWl0aW5nOiB7XG4gICAgICAgICAgICByZXF1ZXN0c1Blck1pbnV0ZTogNjAsXG4gICAgICAgICAgICBidXJzdExpbWl0OiAxMCxcbiAgICAgICAgfSxcbiAgICB9LFxuXG4gICAgYmF0Y2g6IHtcbiAgICAgICAgZGVmYXVsdFNpemU6IDUsXG4gICAgICAgIG1heFNpemU6IDIwLFxuICAgICAgICBkZWxheUJldHdlZW5CYXRjaGVzOiAyMDAsXG4gICAgICAgIG1heENvbmN1cnJlbnRCYXRjaGVzOiAzLFxuICAgIH0sXG5cbiAgICBhdWRpbzoge1xuICAgICAgICBtYXhQb29sU2l6ZTogMTAsXG4gICAgICAgIGF1dG9DbGVhbnVwVGltZW91dE1zOiAzMDAwMCwgIC8vIDMwXHVDRDA4XG4gICAgICAgIG1heER1cmF0aW9uTXM6IDMwMDAwMCwgICAgICAgIC8vIDVcdUJEODRcbiAgICB9LFxuXG4gICAgZGF0YWJhc2U6IHtcbiAgICAgICAgYXV0b1NhdmVJbnRlcnZhbDogNTAwMCwgICAgICAgLy8gNVx1Q0QwOFxuICAgICAgICBiYWNrdXBFbmFibGVkOiB0cnVlLFxuICAgICAgICBtYXhGaWxlU2l6ZTogMTA0ODU3NjAsICAgICAgICAvLyAxME1CXG4gICAgICAgIGNvbXByZXNzaW9uRW5hYmxlZDogZmFsc2UsXG4gICAgfSxcblxuICAgIGxlYXJuaW5nOiB7XG4gICAgICAgIHNwYWNlZF9yZXBldGl0aW9uOiB7XG4gICAgICAgICAgICBpbml0aWFsSW50ZXJ2YWw6IDEsICAgICAgICAvLyAxXHVDNzdDXG4gICAgICAgICAgICBlYXN5Qm9udXM6IDEuMyxcbiAgICAgICAgICAgIGhhcmRQZW5hbHR5OiAwLjgsXG4gICAgICAgICAgICBtYXhJbnRlcnZhbDogMzY1LCAgICAgICAgICAvLyAxXHVCMTQ0XG4gICAgICAgICAgICBtaW5JbnRlcnZhbDogMSwgICAgICAgICAgICAvLyAxXHVDNzdDXG4gICAgICAgIH0sXG4gICAgICAgIGxvYWRfYmFsYW5jaW5nOiB7XG4gICAgICAgICAgICBtYXhEYWlseVJldmlld3M6IDEwMCxcbiAgICAgICAgICAgIGZ1enppbmdQZXJjZW50YWdlOiA1LFxuICAgICAgICAgICAgZGlzdHJpYnV0aW9uV2luZG93OiA3LCAgICAgLy8gN1x1Qzc3Q1xuICAgICAgICB9LFxuICAgIH0sXG5cbiAgICB1aToge1xuICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogMzAwLCAgICAgICAvLyAzMDBtc1xuICAgICAgICBwcm9ncmVzc1VwZGF0ZUludGVydmFsOiAxMDAsICAvLyAxMDBtc1xuICAgICAgICBub3RpZmljYXRpb25UaW1lb3V0OiA1MDAwLCAgICAvLyA1XHVDRDA4XG4gICAgICAgIG1vZGFsQ2xvc2VEZWxheTogNTAwLCAgICAgICAgIC8vIDUwMG1zXG4gICAgfSxcblxuICAgIHNlY3VyaXR5OiB7XG4gICAgICAgIGFwaUtleUVuY3J5cHRpb246IHtcbiAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEwMDAwLFxuICAgICAgICAgICAga2V5TGVuZ3RoOiAzMixcbiAgICAgICAgICAgIHNhbHRMZW5ndGg6IDE2LFxuICAgICAgICB9LFxuICAgICAgICBzZXNzaW9uVGltZW91dDogMzYwMDAwMCwgICAgICAvLyAxXHVDMkRDXHVBQzA0XG4gICAgICAgIG1heExvZ2luQXR0ZW1wdHM6IDUsXG4gICAgfSxcbn07XG5cbi8vIFx1RDY1OFx1QUNCRFx1QkNDNCBcdUMxMjRcdUM4MTVcbmV4cG9ydCBjb25zdCBERVZFTE9QTUVOVF9DT05GSUc6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPiA9IHtcbiAgICBhcGk6IHtcbiAgICAgICAgdGltZW91dHM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IDEwMDAwLFxuICAgICAgICAgICAgbGxtOiAyMDAwMCxcbiAgICAgICAgICAgIHR0czogNTAwMCxcbiAgICAgICAgfSxcbiAgICAgICAgcmV0cmllczoge1xuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDEsXG4gICAgICAgICAgICBkZWxheU1zOiA1MDAsXG4gICAgICAgICAgICBleHBvbmVudGlhbEJhY2tvZmY6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgYmF0Y2g6IHtcbiAgICAgICAgZGVmYXVsdFNpemU6IDIsXG4gICAgICAgIG1heFNpemU6IDUsXG4gICAgICAgIGRlbGF5QmV0d2VlbkJhdGNoZXM6IDEwMCxcbiAgICB9LFxuICAgIGRhdGFiYXNlOiB7XG4gICAgICAgIGF1dG9TYXZlSW50ZXJ2YWw6IDEwMDAsXG4gICAgICAgIGJhY2t1cEVuYWJsZWQ6IGZhbHNlLFxuICAgIH0sXG59O1xuXG5leHBvcnQgY29uc3QgUFJPRFVDVElPTl9DT05GSUc6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPiA9IHtcbiAgICBhcGk6IHtcbiAgICAgICAgcmV0cmllczoge1xuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDUsXG4gICAgICAgICAgICBkZWxheU1zOiAyMDAwLFxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiB0cnVlLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgYmF0Y2g6IHtcbiAgICAgICAgZGVmYXVsdFNpemU6IDEwLFxuICAgICAgICBtYXhTaXplOiA1MCxcbiAgICAgICAgZGVsYXlCZXR3ZWVuQmF0Y2hlczogNTAwLFxuICAgIH0sXG4gICAgZGF0YWJhc2U6IHtcbiAgICAgICAgYXV0b1NhdmVJbnRlcnZhbDogMTAwMDAsXG4gICAgICAgIGJhY2t1cEVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGNvbXByZXNzaW9uRW5hYmxlZDogdHJ1ZSxcbiAgICB9LFxufTtcblxuLy8gXHVDMTI0XHVDODE1IFx1QUQwMFx1QjlBQyBcdUQwNzRcdUI3OThcdUMyQTRcbmV4cG9ydCBjbGFzcyBDb25maWdNYW5hZ2VyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQ29uZmlnTWFuYWdlcjtcbiAgICBwcml2YXRlIGNvbmZpZzogUGx1Z2luQ29uZmlnO1xuXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlncyhERUZBVUxUX0NPTkZJRywgdGhpcy5nZXRFbnZpcm9ubWVudENvbmZpZygpKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogQ29uZmlnTWFuYWdlciB7XG4gICAgICAgIGlmICghQ29uZmlnTWFuYWdlci5pbnN0YW5jZSkge1xuICAgICAgICAgICAgQ29uZmlnTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBDb25maWdNYW5hZ2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbmZpZ01hbmFnZXIuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgZ2V0Q29uZmlnKCk6IFBsdWdpbkNvbmZpZyB7XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuY29uZmlnIH07XG4gICAgfVxuXG4gICAgZ2V0VmFsdWU8VD4ocGF0aDogc3RyaW5nKTogVCB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE5lc3RlZFZhbHVlKHRoaXMuY29uZmlnLCBwYXRoKTtcbiAgICB9XG5cbiAgICB1cGRhdGVDb25maWcodXBkYXRlczogUGFydGlhbDxQbHVnaW5Db25maWc+KTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZ3ModGhpcy5jb25maWcsIHVwZGF0ZXMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RW52aXJvbm1lbnRDb25maWcoKTogUGFydGlhbDxQbHVnaW5Db25maWc+IHtcbiAgICAgICAgLy8gXHVBQzFDXHVCQzFDIFx1RDY1OFx1QUNCRCBcdUFDMTBcdUM5QzAgKFx1QUMwNFx1QjJFOFx1RDU1QyBcdUQ3MzRcdUI5QUNcdUMyQTRcdUQyRjEpXG4gICAgICAgIGNvbnN0IGlzRGV2ZWxvcG1lbnQgPSBcbiAgICAgICAgICAgIHByb2Nlc3M/LmVudj8uTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgfHxcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbj8uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8XG4gICAgICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdEZXZlbG9wbWVudCcpO1xuXG4gICAgICAgIHJldHVybiBpc0RldmVsb3BtZW50ID8gREVWRUxPUE1FTlRfQ09ORklHIDogUFJPRFVDVElPTl9DT05GSUc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtZXJnZUNvbmZpZ3MoYmFzZTogUGx1Z2luQ29uZmlnLCBvdmVycmlkZTogUGFydGlhbDxQbHVnaW5Db25maWc+KTogUGx1Z2luQ29uZmlnIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyAuLi5iYXNlIH07XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvdmVycmlkZSkpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtrZXkgYXMga2V5b2YgUGx1Z2luQ29uZmlnXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVzdWx0W2tleSBhcyBrZXlvZiBQbHVnaW5Db25maWddLFxuICAgICAgICAgICAgICAgICAgICAuLi52YWx1ZVxuICAgICAgICAgICAgICAgIH0gYXMgYW55O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5IGFzIGtleW9mIFBsdWdpbkNvbmZpZ10gPSB2YWx1ZSBhcyBhbnk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXROZXN0ZWRWYWx1ZShvYmo6IGFueSwgcGF0aDogc3RyaW5nKTogYW55IHtcbiAgICAgICAgcmV0dXJuIHBhdGguc3BsaXQoJy4nKS5yZWR1Y2UoKGN1cnJlbnQsIGtleSkgPT4gY3VycmVudD8uW2tleV0sIG9iaik7XG4gICAgfVxufVxuXG4vLyBcdUQzQjhcdUM3NTggXHVENTY4XHVDMjE4XHVCNEU0XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnKCk6IFBsdWdpbkNvbmZpZyB7XG4gICAgcmV0dXJuIENvbmZpZ01hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRDb25maWcoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZ1ZhbHVlPFQ+KHBhdGg6IHN0cmluZyk6IFQge1xuICAgIHJldHVybiBDb25maWdNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0VmFsdWU8VD4ocGF0aCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDb25maWcodXBkYXRlczogUGFydGlhbDxQbHVnaW5Db25maWc+KTogdm9pZCB7XG4gICAgQ29uZmlnTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZUNvbmZpZyh1cGRhdGVzKTtcbn1cblxuLy8gXHVEMEMwXHVDNzg1IFx1QzU0OFx1QzgwNFx1RDU1QyBcdUMxMjRcdUM4MTUgXHVDODExXHVBREZDXHVDNzQ0IFx1QzcwNFx1RDU1QyBcdUMwQzFcdUMyMThcdUI0RTRcbmV4cG9ydCBjb25zdCBDT05GSUdfUEFUSFMgPSB7XG4gICAgQVBJX1RJTUVPVVRfREVGQVVMVDogJ2FwaS50aW1lb3V0cy5kZWZhdWx0JyxcbiAgICBBUElfVElNRU9VVF9MTE06ICdhcGkudGltZW91dHMubGxtJyxcbiAgICBBUElfVElNRU9VVF9UVFM6ICdhcGkudGltZW91dHMudHRzJyxcbiAgICBBUElfUkVUUllfTUFYX0FUVEVNUFRTOiAnYXBpLnJldHJpZXMubWF4QXR0ZW1wdHMnLFxuICAgIEFQSV9SRVRSWV9ERUxBWTogJ2FwaS5yZXRyaWVzLmRlbGF5TXMnLFxuICAgIEJBVENIX0RFRkFVTFRfU0laRTogJ2JhdGNoLmRlZmF1bHRTaXplJyxcbiAgICBCQVRDSF9NQVhfU0laRTogJ2JhdGNoLm1heFNpemUnLFxuICAgIEJBVENIX0RFTEFZOiAnYmF0Y2guZGVsYXlCZXR3ZWVuQmF0Y2hlcycsXG4gICAgQVVESU9fTUFYX1BPT0xfU0laRTogJ2F1ZGlvLm1heFBvb2xTaXplJyxcbiAgICBBVURJT19DTEVBTlVQX1RJTUVPVVQ6ICdhdWRpby5hdXRvQ2xlYW51cFRpbWVvdXRNcycsXG4gICAgTEVBUk5JTkdfSU5JVElBTF9JTlRFUlZBTDogJ2xlYXJuaW5nLnNwYWNlZF9yZXBldGl0aW9uLmluaXRpYWxJbnRlcnZhbCcsXG4gICAgTEVBUk5JTkdfRUFTWV9CT05VUzogJ2xlYXJuaW5nLnNwYWNlZF9yZXBldGl0aW9uLmVhc3lCb251cycsXG4gICAgTEVBUk5JTkdfSEFSRF9QRU5BTFRZOiAnbGVhcm5pbmcuc3BhY2VkX3JlcGV0aXRpb24uaGFyZFBlbmFsdHknLFxuICAgIFVJX0FOSU1BVElPTl9EVVJBVElPTjogJ3VpLmFuaW1hdGlvbkR1cmF0aW9uJyxcbiAgICBVSV9OT1RJRklDQVRJT05fVElNRU9VVDogJ3VpLm5vdGlmaWNhdGlvblRpbWVvdXQnLFxufSBhcyBjb25zdDsiLCAiLy8gXHVDN0FDXHVDMkRDXHVCM0M0IFx1QzgxNVx1Q0M0NSBcdUJDMEYgXHVBRDZDXHVENjA0XG5cbmltcG9ydCB7IGdldENvbmZpZ1ZhbHVlLCBDT05GSUdfUEFUSFMgfSBmcm9tICcuL0NvbmZpZyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV0cnlPcHRpb25zIHtcbiAgICBtYXhBdHRlbXB0cz86IG51bWJlcjtcbiAgICBkZWxheU1zPzogbnVtYmVyO1xuICAgIGV4cG9uZW50aWFsQmFja29mZj86IGJvb2xlYW47XG4gICAgbWF4RGVsYXlNcz86IG51bWJlcjtcbiAgICBiYWNrb2ZmTXVsdGlwbGllcj86IG51bWJlcjtcbiAgICByZXRyeUNvbmRpdGlvbj86IChlcnJvcjogRXJyb3IpID0+IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV0cnlSZXN1bHQ8VD4ge1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgcmVzdWx0PzogVDtcbiAgICBlcnJvcj86IEVycm9yO1xuICAgIGF0dGVtcHRzOiBudW1iZXI7XG4gICAgdG90YWxEdXJhdGlvbjogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgUmV0cnlQb2xpY3kge1xuICAgIHByaXZhdGUgb3B0aW9uczogUmVxdWlyZWQ8UmV0cnlPcHRpb25zPjtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFJldHJ5T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiBvcHRpb25zLm1heEF0dGVtcHRzID8/IGdldENvbmZpZ1ZhbHVlPG51bWJlcj4oQ09ORklHX1BBVEhTLkFQSV9SRVRSWV9NQVhfQVRURU1QVFMpLFxuICAgICAgICAgICAgZGVsYXlNczogb3B0aW9ucy5kZWxheU1zID8/IGdldENvbmZpZ1ZhbHVlPG51bWJlcj4oQ09ORklHX1BBVEhTLkFQSV9SRVRSWV9ERUxBWSksXG4gICAgICAgICAgICBleHBvbmVudGlhbEJhY2tvZmY6IG9wdGlvbnMuZXhwb25lbnRpYWxCYWNrb2ZmID8/IHRydWUsXG4gICAgICAgICAgICBtYXhEZWxheU1zOiBvcHRpb25zLm1heERlbGF5TXMgPz8gMzAwMDAsIC8vIDMwXHVDRDA4XG4gICAgICAgICAgICBiYWNrb2ZmTXVsdGlwbGllcjogb3B0aW9ucy5iYWNrb2ZmTXVsdGlwbGllciA/PyAyLFxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IG9wdGlvbnMucmV0cnlDb25kaXRpb24gPz8gdGhpcy5kZWZhdWx0UmV0cnlDb25kaXRpb24sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gXHVBRTMwXHVCQ0Y4IFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUM4NzBcdUFDNzRcbiAgICBwcml2YXRlIGRlZmF1bHRSZXRyeUNvbmRpdGlvbihlcnJvcjogRXJyb3IpOiBib29sZWFuIHtcbiAgICAgICAgLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QzVEMFx1QjdFQywgXHVEMEMwXHVDNzg0XHVDNTQ0XHVDNkMzLCBcdUMxMUNcdUJDODQgXHVDNUQwXHVCN0VDXHVCMjk0IFx1QzdBQ1x1QzJEQ1x1QjNDNFxuICAgICAgICBjb25zdCByZXRyeWFibGVFcnJvcnMgPSBbXG4gICAgICAgICAgICAnTmV0d29ya0Vycm9yJyxcbiAgICAgICAgICAgICdUaW1lb3V0RXJyb3InLFxuICAgICAgICAgICAgJ2ZldGNoJyxcbiAgICAgICAgICAgICc1MDInLCAnNTAzJywgJzUwNCcsIC8vIFx1QzExQ1x1QkM4NCBcdUM1RDBcdUI3RUNcbiAgICAgICAgICAgICdFQ09OTlJFU0VUJyxcbiAgICAgICAgICAgICdFVElNRURPVVQnLFxuICAgICAgICAgICAgJ0VOT1RGT1VORCdcbiAgICAgICAgXTtcblxuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGVycm9yTmFtZSA9IGVycm9yLm5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICByZXR1cm4gcmV0cnlhYmxlRXJyb3JzLnNvbWUocGF0dGVybiA9PiBcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcyhwYXR0ZXJuLnRvTG93ZXJDYXNlKCkpIHx8IFxuICAgICAgICAgICAgZXJyb3JOYW1lLmluY2x1ZGVzKHBhdHRlcm4udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBcdUM5QzBcdUMyMTggXHVCQzMxXHVDNjI0XHVENTA0IFx1QUNDNFx1QzBCMFxuICAgIHByaXZhdGUgY2FsY3VsYXRlRGVsYXkoYXR0ZW1wdDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZXhwb25lbnRpYWxCYWNrb2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRlbGF5TXM7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZWxheSA9IHRoaXMub3B0aW9ucy5kZWxheU1zICogTWF0aC5wb3codGhpcy5vcHRpb25zLmJhY2tvZmZNdWx0aXBsaWVyLCBhdHRlbXB0IC0gMSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUM5QzBcdUQxMzAgXHVDRDk0XHVBQzAwIChcdTAwQjEyMCUpXG4gICAgICAgIGNvbnN0IGppdHRlciA9IGRlbGF5ICogMC4yICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xuICAgICAgICBjb25zdCBmaW5hbERlbGF5ID0gTWF0aC5mbG9vcihkZWxheSArIGppdHRlcik7XG5cbiAgICAgICAgcmV0dXJuIE1hdGgubWluKGZpbmFsRGVsYXksIHRoaXMub3B0aW9ucy5tYXhEZWxheU1zKTtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUIzRDlcdUFFMzAgXHVENTY4XHVDMjE4IFx1QzdBQ1x1QzJEQ1x1QjNDNFxuICAgIGFzeW5jIGV4ZWN1dGU8VD4oZm46ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFJldHJ5UmVzdWx0PFQ+PiB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGxldCBsYXN0RXJyb3I6IEVycm9yIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IHRoaXMub3B0aW9ucy5tYXhBdHRlbXB0czsgYXR0ZW1wdCsrKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBhdHRlbXB0czogYXR0ZW1wdCxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxEdXJhdGlvbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGxhc3RFcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKTtcblxuICAgICAgICAgICAgICAgIC8vIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUMyRENcdUIzQzRcdUM3NzRcdUFDNzBcdUIwOTggXHVDN0FDXHVDMkRDXHVCM0M0IFx1Qzg3MFx1QUM3NFx1Qzc0NCBcdUI5Q0NcdUM4NzFcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzNDXHVCQTc0IFx1QzkxMVx1QjJFOFxuICAgICAgICAgICAgICAgIGlmIChhdHRlbXB0ID09PSB0aGlzLm9wdGlvbnMubWF4QXR0ZW1wdHMgfHwgIXRoaXMub3B0aW9ucy5yZXRyeUNvbmRpdGlvbihsYXN0RXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUMyRENcdUIzQzQgXHVDODA0IFx1QjMwMFx1QUUzMFxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGF5ID0gdGhpcy5jYWxjdWxhdGVEZWxheShhdHRlbXB0KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KGRlbGF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBsYXN0RXJyb3IsXG4gICAgICAgICAgICBhdHRlbXB0czogdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzLFxuICAgICAgICAgICAgdG90YWxEdXJhdGlvbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1QjNEOVx1QUUzMCBcdUQ1NjhcdUMyMTggXHVDN0FDXHVDMkRDXHVCM0M0XG4gICAgZXhlY3V0ZVN5bmM8VD4oZm46ICgpID0+IFQpOiBSZXRyeVJlc3VsdDxUPiB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGxldCBsYXN0RXJyb3I6IEVycm9yIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IHRoaXMub3B0aW9ucy5tYXhBdHRlbXB0czsgYXR0ZW1wdCsrKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZuKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBhdHRlbXB0czogYXR0ZW1wdCxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxEdXJhdGlvbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGxhc3RFcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKTtcblxuICAgICAgICAgICAgICAgIC8vIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUMyRENcdUIzQzRcdUM3NzRcdUFDNzBcdUIwOTggXHVDN0FDXHVDMkRDXHVCM0M0IFx1Qzg3MFx1QUM3NFx1Qzc0NCBcdUI5Q0NcdUM4NzFcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzNDXHVCQTc0IFx1QzkxMVx1QjJFOFxuICAgICAgICAgICAgICAgIGlmIChhdHRlbXB0ID09PSB0aGlzLm9wdGlvbnMubWF4QXR0ZW1wdHMgfHwgIXRoaXMub3B0aW9ucy5yZXRyeUNvbmRpdGlvbihsYXN0RXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFx1QjNEOVx1QUUzMCBcdUQ1NjhcdUMyMThcdUM1RDBcdUMxMUNcdUIyOTQgXHVDOTg5XHVDMkRDIFx1QjJFNFx1Qzc0QyBcdUMyRENcdUIzQzQgKFx1QkU0NFx1QjNEOVx1QUUzMCBcdUIzMDBcdUFFMzAgXHVCRDg4XHVBQzAwKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IGxhc3RFcnJvcixcbiAgICAgICAgICAgIGF0dGVtcHRzOiB0aGlzLm9wdGlvbnMubWF4QXR0ZW1wdHMsXG4gICAgICAgICAgICB0b3RhbER1cmF0aW9uOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbiAgICB9XG5cbiAgICAvLyBcdUMxMjRcdUM4MTUgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgdXBkYXRlT3B0aW9ucyhvcHRpb25zOiBQYXJ0aWFsPFJldHJ5T3B0aW9ucz4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcbiAgICB9XG5cbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTI0XHVDODE1IFx1QkMxOFx1RDY1OFxuICAgIGdldE9wdGlvbnMoKTogUmVxdWlyZWQ8UmV0cnlPcHRpb25zPiB7XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMub3B0aW9ucyB9O1xuICAgIH1cbn1cblxuLy8gXHVEMkI5XHVENjU0XHVCNDFDIFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUM4MTVcdUNDNDVcdUI0RTRcbmV4cG9ydCBjbGFzcyBOZXR3b3JrUmV0cnlQb2xpY3kgZXh0ZW5kcyBSZXRyeVBvbGljeSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogUmV0cnlPcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDUsXG4gICAgICAgICAgICBkZWxheU1zOiAxMDAwLFxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiB0cnVlLFxuICAgICAgICAgICAgbWF4RGVsYXlNczogMTAwMDAsXG4gICAgICAgICAgICByZXRyeUNvbmRpdGlvbjogKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QUQwMFx1QjgyOCBcdUM1RDBcdUI3RUNcdUI5Q0MgXHVDN0FDXHVDMkRDXHVCM0M0XG4gICAgICAgICAgICAgICAgY29uc3QgbmV0d29ya0Vycm9ycyA9IFtcbiAgICAgICAgICAgICAgICAgICAgJ25ldHdvcmtlcnJvcicsICdmZXRjaCcsICd0aW1lb3V0JyxcbiAgICAgICAgICAgICAgICAgICAgJ2Vjb25ucmVzZXQnLCAnZXRpbWVkb3V0JywgJ2Vub3Rmb3VuZCcsXG4gICAgICAgICAgICAgICAgICAgICc1MDInLCAnNTAzJywgJzUwNCcsICc0MDgnLCAnNDI5J1xuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXR3b3JrRXJyb3JzLnNvbWUocGF0dGVybiA9PiBlcnJvclRleHQuaW5jbHVkZXMocGF0dGVybikpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJUmV0cnlQb2xpY3kgZXh0ZW5kcyBSZXRyeVBvbGljeSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogUmV0cnlPcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDMsXG4gICAgICAgICAgICBkZWxheU1zOiAyMDAwLFxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiB0cnVlLFxuICAgICAgICAgICAgbWF4RGVsYXlNczogMTUwMDAsXG4gICAgICAgICAgICByZXRyeUNvbmRpdGlvbjogKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQVBJIFx1QUQwMFx1QjgyOCBcdUM1RDBcdUI3RUMgXHVDOTExIFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUFDMDBcdUIyQTVcdUQ1NUMgXHVBQzgzXHVCNEU0XG4gICAgICAgICAgICAgICAgY29uc3QgcmV0cnlhYmxlRXJyb3JzID0gW1xuICAgICAgICAgICAgICAgICAgICAnNDI5JywgLy8gUmF0ZSBsaW1pdFxuICAgICAgICAgICAgICAgICAgICAnNTAyJywgJzUwMycsICc1MDQnLCAvLyBTZXJ2ZXIgZXJyb3JzXG4gICAgICAgICAgICAgICAgICAgICd0aW1lb3V0JyxcbiAgICAgICAgICAgICAgICAgICAgJ25ldHdvcmsnXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHJ5YWJsZUVycm9ycy5zb21lKHBhdHRlcm4gPT4gZXJyb3JUZXh0LmluY2x1ZGVzKHBhdHRlcm4pKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIERhdGFiYXNlUmV0cnlQb2xpY3kgZXh0ZW5kcyBSZXRyeVBvbGljeSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogUmV0cnlPcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDMsXG4gICAgICAgICAgICBkZWxheU1zOiA1MDAsXG4gICAgICAgICAgICBleHBvbmVudGlhbEJhY2tvZmY6IGZhbHNlLCAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUIyOTQgXHVCRTYwXHVCOTc4IFx1QzdBQ1x1QzJEQ1x1QjNDNFxuICAgICAgICAgICAgbWF4RGVsYXlNczogMjAwMCxcbiAgICAgICAgICAgIHJldHJ5Q29uZGl0aW9uOiAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBcdUM3N0NcdUMyRENcdUM4MDFcdUM3NzggXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QzVEMFx1QjdFQ1x1QjlDQyBcdUM3QUNcdUMyRENcdUIzQzRcbiAgICAgICAgICAgICAgICBjb25zdCByZXRyeWFibGVFcnJvcnMgPSBbXG4gICAgICAgICAgICAgICAgICAgICdsb2NrJywgJ2J1c3knLCAndGltZW91dCcsXG4gICAgICAgICAgICAgICAgICAgICdjb25uZWN0aW9uJywgJ25ldHdvcmsnXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHJ5YWJsZUVycm9ycy5zb21lKHBhdHRlcm4gPT4gZXJyb3JUZXh0LmluY2x1ZGVzKHBhdHRlcm4pKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8gXHVEM0I4XHVDNzU4IFx1RDU2OFx1QzIxOFx1QjRFNFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJldHJ5QXN5bmM8VD4oXG4gICAgZm46ICgpID0+IFByb21pc2U8VD4sXG4gICAgb3B0aW9ucz86IFJldHJ5T3B0aW9uc1xuKTogUHJvbWlzZTxUPiB7XG4gICAgY29uc3QgcG9saWN5ID0gbmV3IFJldHJ5UG9saWN5KG9wdGlvbnMpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvbGljeS5leGVjdXRlKGZuKTtcbiAgICBcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQhO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXRyeVN5bmM8VD4oXG4gICAgZm46ICgpID0+IFQsXG4gICAgb3B0aW9ucz86IFJldHJ5T3B0aW9uc1xuKTogVCB7XG4gICAgY29uc3QgcG9saWN5ID0gbmV3IFJldHJ5UG9saWN5KG9wdGlvbnMpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHBvbGljeS5leGVjdXRlU3luYyhmbik7XG4gICAgXG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0ITtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxufVxuXG4vLyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVDNjk0XHVDQ0FEXHVDNkE5IFx1RDNCOFx1Qzc1OCBcdUQ1NjhcdUMyMThcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyeU5ldHdvcmtSZXF1ZXN0PFQ+KFxuICAgIGZuOiAoKSA9PiBQcm9taXNlPFQ+LFxuICAgIG9wdGlvbnM/OiBSZXRyeU9wdGlvbnNcbik6IFByb21pc2U8VD4ge1xuICAgIGNvbnN0IHBvbGljeSA9IG5ldyBOZXR3b3JrUmV0cnlQb2xpY3kob3B0aW9ucyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9saWN5LmV4ZWN1dGUoZm4pO1xuICAgIFxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdCE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbn1cblxuLy8gQVBJIFx1RDYzOFx1Q0Q5Q1x1QzZBOSBcdUQzQjhcdUM3NTggXHVENTY4XHVDMjE4XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmV0cnlBUElDYWxsPFQ+KFxuICAgIGZuOiAoKSA9PiBQcm9taXNlPFQ+LFxuICAgIG9wdGlvbnM/OiBSZXRyeU9wdGlvbnNcbik6IFByb21pc2U8VD4ge1xuICAgIGNvbnN0IHBvbGljeSA9IG5ldyBBUElSZXRyeVBvbGljeShvcHRpb25zKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb2xpY3kuZXhlY3V0ZShmbik7XG4gICAgXG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0ITtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxufVxuXG4vLyBDaXJjdWl0IEJyZWFrZXIgXHVEMzI4XHVEMTM0XHVBQ0ZDIFx1RDU2OFx1QUVEOCBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QjI5NCBcdUFDRTBcdUFFMDkgXHVDN0FDXHVDMkRDXHVCM0M0XG5leHBvcnQgY2xhc3MgQ2lyY3VpdEJyZWFrZXJSZXRyeVBvbGljeSBleHRlbmRzIFJldHJ5UG9saWN5IHtcbiAgICBwcml2YXRlIGZhaWx1cmVDb3VudCA9IDA7XG4gICAgcHJpdmF0ZSBsYXN0RmFpbHVyZVRpbWUgPSAwO1xuICAgIHByaXZhdGUgY2lyY3VpdEJyZWFrZXJUaW1lb3V0ID0gNjAwMDA7IC8vIDFcdUJEODRcbiAgICBwcml2YXRlIGZhaWx1cmVUaHJlc2hvbGQgPSA1O1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogUmV0cnlPcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZVdpdGhDaXJjdWl0QnJlYWtlcjxUPihmbjogKCkgPT4gUHJvbWlzZTxUPik6IFByb21pc2U8UmV0cnlSZXN1bHQ8VD4+IHtcbiAgICAgICAgLy8gQ2lyY3VpdCBCcmVha2VyIFx1Q0NCNFx1RDA2Q1xuICAgICAgICBpZiAodGhpcy5pc0NpcmN1aXRPcGVuKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcignQ2lyY3VpdCBicmVha2VyIGlzIG9wZW4nKSxcbiAgICAgICAgICAgICAgICBhdHRlbXB0czogMCxcbiAgICAgICAgICAgICAgICB0b3RhbER1cmF0aW9uOiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlKGZuKTtcblxuICAgICAgICAvLyBcdUFDQjBcdUFDRkNcdUM1RDAgXHVCNTMwXHVCOTc4IENpcmN1aXQgQnJlYWtlciBcdUMwQzFcdUQwREMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgdGhpcy5mYWlsdXJlQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mYWlsdXJlQ291bnQrKztcbiAgICAgICAgICAgIHRoaXMubGFzdEZhaWx1cmVUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0NpcmN1aXRPcGVuKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5mYWlsdXJlQ291bnQgPCB0aGlzLmZhaWx1cmVUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RGYWlsdXJlID0gRGF0ZS5ub3coKSAtIHRoaXMubGFzdEZhaWx1cmVUaW1lO1xuICAgICAgICBpZiAodGltZVNpbmNlTGFzdEZhaWx1cmUgPj0gdGhpcy5jaXJjdWl0QnJlYWtlclRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZUNvdW50ID0gMDsgLy8gUmVzZXQgY2lyY3VpdCBicmVha2VyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59IiwgIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcCgpIHtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgfTtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBiaW5kIGZyb20gJy4vaGVscGVycy9iaW5kLmpzJztcblxuLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3NcblxuY29uc3Qge3RvU3RyaW5nfSA9IE9iamVjdC5wcm90b3R5cGU7XG5jb25zdCB7Z2V0UHJvdG90eXBlT2Z9ID0gT2JqZWN0O1xuY29uc3Qge2l0ZXJhdG9yLCB0b1N0cmluZ1RhZ30gPSBTeW1ib2w7XG5cbmNvbnN0IGtpbmRPZiA9IChjYWNoZSA9PiB0aGluZyA9PiB7XG4gICAgY29uc3Qgc3RyID0gdG9TdHJpbmcuY2FsbCh0aGluZyk7XG4gICAgcmV0dXJuIGNhY2hlW3N0cl0gfHwgKGNhY2hlW3N0cl0gPSBzdHIuc2xpY2UoOCwgLTEpLnRvTG93ZXJDYXNlKCkpO1xufSkoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG5cbmNvbnN0IGtpbmRPZlRlc3QgPSAodHlwZSkgPT4ge1xuICB0eXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gKHRoaW5nKSA9PiBraW5kT2YodGhpbmcpID09PSB0eXBlXG59XG5cbmNvbnN0IHR5cGVPZlRlc3QgPSB0eXBlID0+IHRoaW5nID0+IHR5cGVvZiB0aGluZyA9PT0gdHlwZTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IHtpc0FycmF5fSA9IEFycmF5O1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIHVuZGVmaW5lZCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzVW5kZWZpbmVkID0gdHlwZU9mVGVzdCgndW5kZWZpbmVkJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCdWZmZXJcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCdWZmZXIodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbCkgJiYgdmFsLmNvbnN0cnVjdG9yICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwuY29uc3RydWN0b3IpXG4gICAgJiYgaXNGdW5jdGlvbih2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIpICYmIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlcih2YWwpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzQXJyYXlCdWZmZXIgPSBraW5kT2ZUZXN0KCdBcnJheUJ1ZmZlcicpO1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcbiAgbGV0IHJlc3VsdDtcbiAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAoaXNBcnJheUJ1ZmZlcih2YWwuYnVmZmVyKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZ1xuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc1N0cmluZyA9IHR5cGVPZlRlc3QoJ3N0cmluZycpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGdW5jdGlvbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRnVuY3Rpb24gPSB0eXBlT2ZUZXN0KCdmdW5jdGlvbicpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzTnVtYmVyID0gdHlwZU9mVGVzdCgnbnVtYmVyJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHsqfSB0aGluZyBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzT2JqZWN0ID0gKHRoaW5nKSA9PiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQm9vbGVhblxuICpcbiAqIEBwYXJhbSB7Kn0gdGhpbmcgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQm9vbGVhbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzQm9vbGVhbiA9IHRoaW5nID0+IHRoaW5nID09PSB0cnVlIHx8IHRoaW5nID09PSBmYWxzZTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHBsYWluIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBwbGFpbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc1BsYWluT2JqZWN0ID0gKHZhbCkgPT4ge1xuICBpZiAoa2luZE9mKHZhbCkgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgcHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YodmFsKTtcbiAgcmV0dXJuIChwcm90b3R5cGUgPT09IG51bGwgfHwgcHJvdG90eXBlID09PSBPYmplY3QucHJvdG90eXBlIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90b3R5cGUpID09PSBudWxsKSAmJiAhKHRvU3RyaW5nVGFnIGluIHZhbCkgJiYgIShpdGVyYXRvciBpbiB2YWwpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBEYXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNEYXRlID0ga2luZE9mVGVzdCgnRGF0ZScpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGaWxlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNGaWxlID0ga2luZE9mVGVzdCgnRmlsZScpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCbG9iLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNCbG9iID0ga2luZE9mVGVzdCgnQmxvYicpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZUxpc3RcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRmlsZUxpc3QgPSBraW5kT2ZUZXN0KCdGaWxlTGlzdCcpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzU3RyZWFtID0gKHZhbCkgPT4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhXG4gKlxuICogQHBhcmFtIHsqfSB0aGluZyBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEZvcm1EYXRhLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNGb3JtRGF0YSA9ICh0aGluZykgPT4ge1xuICBsZXQga2luZDtcbiAgcmV0dXJuIHRoaW5nICYmIChcbiAgICAodHlwZW9mIEZvcm1EYXRhID09PSAnZnVuY3Rpb24nICYmIHRoaW5nIGluc3RhbmNlb2YgRm9ybURhdGEpIHx8IChcbiAgICAgIGlzRnVuY3Rpb24odGhpbmcuYXBwZW5kKSAmJiAoXG4gICAgICAgIChraW5kID0ga2luZE9mKHRoaW5nKSkgPT09ICdmb3JtZGF0YScgfHxcbiAgICAgICAgLy8gZGV0ZWN0IGZvcm0tZGF0YSBpbnN0YW5jZVxuICAgICAgICAoa2luZCA9PT0gJ29iamVjdCcgJiYgaXNGdW5jdGlvbih0aGluZy50b1N0cmluZykgJiYgdGhpbmcudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgRm9ybURhdGFdJylcbiAgICAgIClcbiAgICApXG4gIClcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzVVJMU2VhcmNoUGFyYW1zID0ga2luZE9mVGVzdCgnVVJMU2VhcmNoUGFyYW1zJyk7XG5cbmNvbnN0IFtpc1JlYWRhYmxlU3RyZWFtLCBpc1JlcXVlc3QsIGlzUmVzcG9uc2UsIGlzSGVhZGVyc10gPSBbJ1JlYWRhYmxlU3RyZWFtJywgJ1JlcXVlc3QnLCAnUmVzcG9uc2UnLCAnSGVhZGVycyddLm1hcChraW5kT2ZUZXN0KTtcblxuLyoqXG4gKiBUcmltIGV4Y2VzcyB3aGl0ZXNwYWNlIG9mZiB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBTdHJpbmcgdG8gdHJpbVxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2VcbiAqL1xuY29uc3QgdHJpbSA9IChzdHIpID0+IHN0ci50cmltID9cbiAgc3RyLnRyaW0oKSA6IHN0ci5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZywgJycpO1xuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSBbYWxsT3duS2V5cyA9IGZhbHNlXVxuICogQHJldHVybnMge2FueX1cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuLCB7YWxsT3duS2V5cyA9IGZhbHNlfSA9IHt9KSB7XG4gIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZFxuICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGk7XG4gIGxldCBsO1xuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yIChpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2ldLCBpLCBvYmopO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgb2JqZWN0IGtleXNcbiAgICBjb25zdCBrZXlzID0gYWxsT3duS2V5cyA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikgOiBPYmplY3Qua2V5cyhvYmopO1xuICAgIGNvbnN0IGxlbiA9IGtleXMubGVuZ3RoO1xuICAgIGxldCBrZXk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRLZXkob2JqLCBrZXkpIHtcbiAga2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICBsZXQgaSA9IGtleXMubGVuZ3RoO1xuICBsZXQgX2tleTtcbiAgd2hpbGUgKGktLSA+IDApIHtcbiAgICBfa2V5ID0ga2V5c1tpXTtcbiAgICBpZiAoa2V5ID09PSBfa2V5LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIHJldHVybiBfa2V5O1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuY29uc3QgX2dsb2JhbCA9ICgoKSA9PiB7XG4gIC8qZXNsaW50IG5vLXVuZGVmOjAqL1xuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBnbG9iYWxUaGlzO1xuICByZXR1cm4gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogZ2xvYmFsKVxufSkoKTtcblxuY29uc3QgaXNDb250ZXh0RGVmaW5lZCA9IChjb250ZXh0KSA9PiAhaXNVbmRlZmluZWQoY29udGV4dCkgJiYgY29udGV4dCAhPT0gX2dsb2JhbDtcblxuLyoqXG4gKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG4gKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cbiAqXG4gKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG4gKlxuICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIG1lcmdlKC8qIG9iajEsIG9iajIsIG9iajMsIC4uLiAqLykge1xuICBjb25zdCB7Y2FzZWxlc3N9ID0gaXNDb250ZXh0RGVmaW5lZCh0aGlzKSAmJiB0aGlzIHx8IHt9O1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgY29uc3QgYXNzaWduVmFsdWUgPSAodmFsLCBrZXkpID0+IHtcbiAgICBjb25zdCB0YXJnZXRLZXkgPSBjYXNlbGVzcyAmJiBmaW5kS2V5KHJlc3VsdCwga2V5KSB8fCBrZXk7XG4gICAgaWYgKGlzUGxhaW5PYmplY3QocmVzdWx0W3RhcmdldEtleV0pICYmIGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSBtZXJnZShyZXN1bHRbdGFyZ2V0S2V5XSwgdmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSBtZXJnZSh7fSwgdmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSB2YWwuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgZm9yIChsZXQgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgYXJndW1lbnRzW2ldICYmIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0b1xuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FsbE93bktleXNdXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG4gKi9cbmNvbnN0IGV4dGVuZCA9IChhLCBiLCB0aGlzQXJnLCB7YWxsT3duS2V5c309IHt9KSA9PiB7XG4gIGZvckVhY2goYiwgKHZhbCwga2V5KSA9PiB7XG4gICAgaWYgKHRoaXNBcmcgJiYgaXNGdW5jdGlvbih2YWwpKSB7XG4gICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0sIHthbGxPd25LZXlzfSk7XG4gIHJldHVybiBhO1xufVxuXG4vKipcbiAqIFJlbW92ZSBieXRlIG9yZGVyIG1hcmtlci4gVGhpcyBjYXRjaGVzIEVGIEJCIEJGICh0aGUgVVRGLTggQk9NKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50IHdpdGggQk9NXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gY29udGVudCB2YWx1ZSB3aXRob3V0IEJPTVxuICovXG5jb25zdCBzdHJpcEJPTSA9IChjb250ZW50KSA9PiB7XG4gIGlmIChjb250ZW50LmNoYXJDb2RlQXQoMCkgPT09IDB4RkVGRikge1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnNsaWNlKDEpO1xuICB9XG4gIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlclxuICogQHBhcmFtIHtmdW5jdGlvbn0gY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ29uc3RydWN0b3JcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcHJvcHNdXG4gKiBAcGFyYW0ge29iamVjdH0gW2Rlc2NyaXB0b3JzXVxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5jb25zdCBpbmhlcml0cyA9IChjb25zdHJ1Y3Rvciwgc3VwZXJDb25zdHJ1Y3RvciwgcHJvcHMsIGRlc2NyaXB0b3JzKSA9PiB7XG4gIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGRlc2NyaXB0b3JzKTtcbiAgY29uc3RydWN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY29uc3RydWN0b3I7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb25zdHJ1Y3RvciwgJ3N1cGVyJywge1xuICAgIHZhbHVlOiBzdXBlckNvbnN0cnVjdG9yLnByb3RvdHlwZVxuICB9KTtcbiAgcHJvcHMgJiYgT2JqZWN0LmFzc2lnbihjb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3BzKTtcbn1cblxuLyoqXG4gKiBSZXNvbHZlIG9iamVjdCB3aXRoIGRlZXAgcHJvdG90eXBlIGNoYWluIHRvIGEgZmxhdCBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2VPYmogc291cmNlIG9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IFtkZXN0T2JqXVxuICogQHBhcmFtIHtGdW5jdGlvbnxCb29sZWFufSBbZmlsdGVyXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BGaWx0ZXJdXG4gKlxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuY29uc3QgdG9GbGF0T2JqZWN0ID0gKHNvdXJjZU9iaiwgZGVzdE9iaiwgZmlsdGVyLCBwcm9wRmlsdGVyKSA9PiB7XG4gIGxldCBwcm9wcztcbiAgbGV0IGk7XG4gIGxldCBwcm9wO1xuICBjb25zdCBtZXJnZWQgPSB7fTtcblxuICBkZXN0T2JqID0gZGVzdE9iaiB8fCB7fTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsZXFlcWVxXG4gIGlmIChzb3VyY2VPYmogPT0gbnVsbCkgcmV0dXJuIGRlc3RPYmo7XG5cbiAgZG8ge1xuICAgIHByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc291cmNlT2JqKTtcbiAgICBpID0gcHJvcHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgICBwcm9wID0gcHJvcHNbaV07XG4gICAgICBpZiAoKCFwcm9wRmlsdGVyIHx8IHByb3BGaWx0ZXIocHJvcCwgc291cmNlT2JqLCBkZXN0T2JqKSkgJiYgIW1lcmdlZFtwcm9wXSkge1xuICAgICAgICBkZXN0T2JqW3Byb3BdID0gc291cmNlT2JqW3Byb3BdO1xuICAgICAgICBtZXJnZWRbcHJvcF0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBzb3VyY2VPYmogPSBmaWx0ZXIgIT09IGZhbHNlICYmIGdldFByb3RvdHlwZU9mKHNvdXJjZU9iaik7XG4gIH0gd2hpbGUgKHNvdXJjZU9iaiAmJiAoIWZpbHRlciB8fCBmaWx0ZXIoc291cmNlT2JqLCBkZXN0T2JqKSkgJiYgc291cmNlT2JqICE9PSBPYmplY3QucHJvdG90eXBlKTtcblxuICByZXR1cm4gZGVzdE9iajtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBzdHJpbmcgZW5kcyB3aXRoIHRoZSBjaGFyYWN0ZXJzIG9mIGEgc3BlY2lmaWVkIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hTdHJpbmdcbiAqIEBwYXJhbSB7TnVtYmVyfSBbcG9zaXRpb249IDBdXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmNvbnN0IGVuZHNXaXRoID0gKHN0ciwgc2VhcmNoU3RyaW5nLCBwb3NpdGlvbikgPT4ge1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgaWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQgfHwgcG9zaXRpb24gPiBzdHIubGVuZ3RoKSB7XG4gICAgcG9zaXRpb24gPSBzdHIubGVuZ3RoO1xuICB9XG4gIHBvc2l0aW9uIC09IHNlYXJjaFN0cmluZy5sZW5ndGg7XG4gIGNvbnN0IGxhc3RJbmRleCA9IHN0ci5pbmRleE9mKHNlYXJjaFN0cmluZywgcG9zaXRpb24pO1xuICByZXR1cm4gbGFzdEluZGV4ICE9PSAtMSAmJiBsYXN0SW5kZXggPT09IHBvc2l0aW9uO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBuZXcgYXJyYXkgZnJvbSBhcnJheSBsaWtlIG9iamVjdCBvciBudWxsIGlmIGZhaWxlZFxuICpcbiAqIEBwYXJhbSB7Kn0gW3RoaW5nXVxuICpcbiAqIEByZXR1cm5zIHs/QXJyYXl9XG4gKi9cbmNvbnN0IHRvQXJyYXkgPSAodGhpbmcpID0+IHtcbiAgaWYgKCF0aGluZykgcmV0dXJuIG51bGw7XG4gIGlmIChpc0FycmF5KHRoaW5nKSkgcmV0dXJuIHRoaW5nO1xuICBsZXQgaSA9IHRoaW5nLmxlbmd0aDtcbiAgaWYgKCFpc051bWJlcihpKSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGFyciA9IG5ldyBBcnJheShpKTtcbiAgd2hpbGUgKGktLSA+IDApIHtcbiAgICBhcnJbaV0gPSB0aGluZ1tpXTtcbiAgfVxuICByZXR1cm4gYXJyO1xufVxuXG4vKipcbiAqIENoZWNraW5nIGlmIHRoZSBVaW50OEFycmF5IGV4aXN0cyBhbmQgaWYgaXQgZG9lcywgaXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGlmIHRoZVxuICogdGhpbmcgcGFzc2VkIGluIGlzIGFuIGluc3RhbmNlIG9mIFVpbnQ4QXJyYXlcbiAqXG4gKiBAcGFyYW0ge1R5cGVkQXJyYXl9XG4gKlxuICogQHJldHVybnMge0FycmF5fVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuY29uc3QgaXNUeXBlZEFycmF5ID0gKFR5cGVkQXJyYXkgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICByZXR1cm4gdGhpbmcgPT4ge1xuICAgIHJldHVybiBUeXBlZEFycmF5ICYmIHRoaW5nIGluc3RhbmNlb2YgVHlwZWRBcnJheTtcbiAgfTtcbn0pKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiBnZXRQcm90b3R5cGVPZihVaW50OEFycmF5KSk7XG5cbi8qKlxuICogRm9yIGVhY2ggZW50cnkgaW4gdGhlIG9iamVjdCwgY2FsbCB0aGUgZnVuY3Rpb24gd2l0aCB0aGUga2V5IGFuZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdDxhbnksIGFueT59IG9iaiAtIFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBlbnRyeS5cbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuY29uc3QgZm9yRWFjaEVudHJ5ID0gKG9iaiwgZm4pID0+IHtcbiAgY29uc3QgZ2VuZXJhdG9yID0gb2JqICYmIG9ialtpdGVyYXRvcl07XG5cbiAgY29uc3QgX2l0ZXJhdG9yID0gZ2VuZXJhdG9yLmNhbGwob2JqKTtcblxuICBsZXQgcmVzdWx0O1xuXG4gIHdoaWxlICgocmVzdWx0ID0gX2l0ZXJhdG9yLm5leHQoKSkgJiYgIXJlc3VsdC5kb25lKSB7XG4gICAgY29uc3QgcGFpciA9IHJlc3VsdC52YWx1ZTtcbiAgICBmbi5jYWxsKG9iaiwgcGFpclswXSwgcGFpclsxXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBJdCB0YWtlcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhbmQgYSBzdHJpbmcsIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIGFsbCB0aGUgbWF0Y2hlc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWdFeHAgLSBUaGUgcmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIGFnYWluc3QuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byBzZWFyY2guXG4gKlxuICogQHJldHVybnMge0FycmF5PGJvb2xlYW4+fVxuICovXG5jb25zdCBtYXRjaEFsbCA9IChyZWdFeHAsIHN0cikgPT4ge1xuICBsZXQgbWF0Y2hlcztcbiAgY29uc3QgYXJyID0gW107XG5cbiAgd2hpbGUgKChtYXRjaGVzID0gcmVnRXhwLmV4ZWMoc3RyKSkgIT09IG51bGwpIHtcbiAgICBhcnIucHVzaChtYXRjaGVzKTtcbiAgfVxuXG4gIHJldHVybiBhcnI7XG59XG5cbi8qIENoZWNraW5nIGlmIHRoZSBraW5kT2ZUZXN0IGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSB3aGVuIHBhc3NlZCBhbiBIVE1MRm9ybUVsZW1lbnQuICovXG5jb25zdCBpc0hUTUxGb3JtID0ga2luZE9mVGVzdCgnSFRNTEZvcm1FbGVtZW50Jyk7XG5cbmNvbnN0IHRvQ2FtZWxDYXNlID0gc3RyID0+IHtcbiAgcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1stX1xcc10oW2EtelxcZF0pKFxcdyopL2csXG4gICAgZnVuY3Rpb24gcmVwbGFjZXIobSwgcDEsIHAyKSB7XG4gICAgICByZXR1cm4gcDEudG9VcHBlckNhc2UoKSArIHAyO1xuICAgIH1cbiAgKTtcbn07XG5cbi8qIENyZWF0aW5nIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGNoZWNrIGlmIGFuIG9iamVjdCBoYXMgYSBwcm9wZXJ0eS4gKi9cbmNvbnN0IGhhc093blByb3BlcnR5ID0gKCh7aGFzT3duUHJvcGVydHl9KSA9PiAob2JqLCBwcm9wKSA9PiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpKE9iamVjdC5wcm90b3R5cGUpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBSZWdFeHAgb2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNSZWdFeHAgPSBraW5kT2ZUZXN0KCdSZWdFeHAnKTtcblxuY29uc3QgcmVkdWNlRGVzY3JpcHRvcnMgPSAob2JqLCByZWR1Y2VyKSA9PiB7XG4gIGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMob2JqKTtcbiAgY29uc3QgcmVkdWNlZERlc2NyaXB0b3JzID0ge307XG5cbiAgZm9yRWFjaChkZXNjcmlwdG9ycywgKGRlc2NyaXB0b3IsIG5hbWUpID0+IHtcbiAgICBsZXQgcmV0O1xuICAgIGlmICgocmV0ID0gcmVkdWNlcihkZXNjcmlwdG9yLCBuYW1lLCBvYmopKSAhPT0gZmFsc2UpIHtcbiAgICAgIHJlZHVjZWREZXNjcmlwdG9yc1tuYW1lXSA9IHJldCB8fCBkZXNjcmlwdG9yO1xuICAgIH1cbiAgfSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCByZWR1Y2VkRGVzY3JpcHRvcnMpO1xufVxuXG4vKipcbiAqIE1ha2VzIGFsbCBtZXRob2RzIHJlYWQtb25seVxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5cbmNvbnN0IGZyZWV6ZU1ldGhvZHMgPSAob2JqKSA9PiB7XG4gIHJlZHVjZURlc2NyaXB0b3JzKG9iaiwgKGRlc2NyaXB0b3IsIG5hbWUpID0+IHtcbiAgICAvLyBza2lwIHJlc3RyaWN0ZWQgcHJvcHMgaW4gc3RyaWN0IG1vZGVcbiAgICBpZiAoaXNGdW5jdGlvbihvYmopICYmIFsnYXJndW1lbnRzJywgJ2NhbGxlcicsICdjYWxsZWUnXS5pbmRleE9mKG5hbWUpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHZhbHVlID0gb2JqW25hbWVdO1xuXG4gICAgaWYgKCFpc0Z1bmN0aW9uKHZhbHVlKSkgcmV0dXJuO1xuXG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZmFsc2U7XG5cbiAgICBpZiAoJ3dyaXRhYmxlJyBpbiBkZXNjcmlwdG9yKSB7XG4gICAgICBkZXNjcmlwdG9yLndyaXRhYmxlID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFkZXNjcmlwdG9yLnNldCkge1xuICAgICAgZGVzY3JpcHRvci5zZXQgPSAoKSA9PiB7XG4gICAgICAgIHRocm93IEVycm9yKCdDYW4gbm90IHJld3JpdGUgcmVhZC1vbmx5IG1ldGhvZCBcXCcnICsgbmFtZSArICdcXCcnKTtcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuY29uc3QgdG9PYmplY3RTZXQgPSAoYXJyYXlPclN0cmluZywgZGVsaW1pdGVyKSA9PiB7XG4gIGNvbnN0IG9iaiA9IHt9O1xuXG4gIGNvbnN0IGRlZmluZSA9IChhcnIpID0+IHtcbiAgICBhcnIuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICBvYmpbdmFsdWVdID0gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIGlzQXJyYXkoYXJyYXlPclN0cmluZykgPyBkZWZpbmUoYXJyYXlPclN0cmluZykgOiBkZWZpbmUoU3RyaW5nKGFycmF5T3JTdHJpbmcpLnNwbGl0KGRlbGltaXRlcikpO1xuXG4gIHJldHVybiBvYmo7XG59XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fVxuXG5jb25zdCB0b0Zpbml0ZU51bWJlciA9ICh2YWx1ZSwgZGVmYXVsdFZhbHVlKSA9PiB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIE51bWJlci5pc0Zpbml0ZSh2YWx1ZSA9ICt2YWx1ZSkgPyB2YWx1ZSA6IGRlZmF1bHRWYWx1ZTtcbn1cblxuLyoqXG4gKiBJZiB0aGUgdGhpbmcgaXMgYSBGb3JtRGF0YSBvYmplY3QsIHJldHVybiB0cnVlLCBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLlxuICpcbiAqIEBwYXJhbSB7dW5rbm93bn0gdGhpbmcgLSBUaGUgdGhpbmcgdG8gY2hlY2suXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzU3BlY0NvbXBsaWFudEZvcm0odGhpbmcpIHtcbiAgcmV0dXJuICEhKHRoaW5nICYmIGlzRnVuY3Rpb24odGhpbmcuYXBwZW5kKSAmJiB0aGluZ1t0b1N0cmluZ1RhZ10gPT09ICdGb3JtRGF0YScgJiYgdGhpbmdbaXRlcmF0b3JdKTtcbn1cblxuY29uc3QgdG9KU09OT2JqZWN0ID0gKG9iaikgPT4ge1xuICBjb25zdCBzdGFjayA9IG5ldyBBcnJheSgxMCk7XG5cbiAgY29uc3QgdmlzaXQgPSAoc291cmNlLCBpKSA9PiB7XG5cbiAgICBpZiAoaXNPYmplY3Qoc291cmNlKSkge1xuICAgICAgaWYgKHN0YWNrLmluZGV4T2Yoc291cmNlKSA+PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYoISgndG9KU09OJyBpbiBzb3VyY2UpKSB7XG4gICAgICAgIHN0YWNrW2ldID0gc291cmNlO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBpc0FycmF5KHNvdXJjZSkgPyBbXSA6IHt9O1xuXG4gICAgICAgIGZvckVhY2goc291cmNlLCAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlZHVjZWRWYWx1ZSA9IHZpc2l0KHZhbHVlLCBpICsgMSk7XG4gICAgICAgICAgIWlzVW5kZWZpbmVkKHJlZHVjZWRWYWx1ZSkgJiYgKHRhcmdldFtrZXldID0gcmVkdWNlZFZhbHVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3RhY2tbaV0gPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc291cmNlO1xuICB9XG5cbiAgcmV0dXJuIHZpc2l0KG9iaiwgMCk7XG59XG5cbmNvbnN0IGlzQXN5bmNGbiA9IGtpbmRPZlRlc3QoJ0FzeW5jRnVuY3Rpb24nKTtcblxuY29uc3QgaXNUaGVuYWJsZSA9ICh0aGluZykgPT5cbiAgdGhpbmcgJiYgKGlzT2JqZWN0KHRoaW5nKSB8fCBpc0Z1bmN0aW9uKHRoaW5nKSkgJiYgaXNGdW5jdGlvbih0aGluZy50aGVuKSAmJiBpc0Z1bmN0aW9uKHRoaW5nLmNhdGNoKTtcblxuLy8gb3JpZ2luYWwgY29kZVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL0RpZ2l0YWxCcmFpbkpTL0F4aW9zUHJvbWlzZS9ibG9iLzE2ZGVhYjEzNzEwZWMwOTc3OTkyMjEzMWYzZmE1OTU0MzIwZjgzYWIvbGliL3V0aWxzLmpzI0wxMS1MMzRcblxuY29uc3QgX3NldEltbWVkaWF0ZSA9ICgoc2V0SW1tZWRpYXRlU3VwcG9ydGVkLCBwb3N0TWVzc2FnZVN1cHBvcnRlZCkgPT4ge1xuICBpZiAoc2V0SW1tZWRpYXRlU3VwcG9ydGVkKSB7XG4gICAgcmV0dXJuIHNldEltbWVkaWF0ZTtcbiAgfVxuXG4gIHJldHVybiBwb3N0TWVzc2FnZVN1cHBvcnRlZCA/ICgodG9rZW4sIGNhbGxiYWNrcykgPT4ge1xuICAgIF9nbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKHtzb3VyY2UsIGRhdGF9KSA9PiB7XG4gICAgICBpZiAoc291cmNlID09PSBfZ2xvYmFsICYmIGRhdGEgPT09IHRva2VuKSB7XG4gICAgICAgIGNhbGxiYWNrcy5sZW5ndGggJiYgY2FsbGJhY2tzLnNoaWZ0KCkoKTtcbiAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cbiAgICByZXR1cm4gKGNiKSA9PiB7XG4gICAgICBjYWxsYmFja3MucHVzaChjYik7XG4gICAgICBfZ2xvYmFsLnBvc3RNZXNzYWdlKHRva2VuLCBcIipcIik7XG4gICAgfVxuICB9KShgYXhpb3NAJHtNYXRoLnJhbmRvbSgpfWAsIFtdKSA6IChjYikgPT4gc2V0VGltZW91dChjYik7XG59KShcbiAgdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJyxcbiAgaXNGdW5jdGlvbihfZ2xvYmFsLnBvc3RNZXNzYWdlKVxuKTtcblxuY29uc3QgYXNhcCA9IHR5cGVvZiBxdWV1ZU1pY3JvdGFzayAhPT0gJ3VuZGVmaW5lZCcgP1xuICBxdWV1ZU1pY3JvdGFzay5iaW5kKF9nbG9iYWwpIDogKCB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5uZXh0VGljayB8fCBfc2V0SW1tZWRpYXRlKTtcblxuLy8gKioqKioqKioqKioqKioqKioqKioqXG5cblxuY29uc3QgaXNJdGVyYWJsZSA9ICh0aGluZykgPT4gdGhpbmcgIT0gbnVsbCAmJiBpc0Z1bmN0aW9uKHRoaW5nW2l0ZXJhdG9yXSk7XG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBpc0FycmF5LFxuICBpc0FycmF5QnVmZmVyLFxuICBpc0J1ZmZlcixcbiAgaXNGb3JtRGF0YSxcbiAgaXNBcnJheUJ1ZmZlclZpZXcsXG4gIGlzU3RyaW5nLFxuICBpc051bWJlcixcbiAgaXNCb29sZWFuLFxuICBpc09iamVjdCxcbiAgaXNQbGFpbk9iamVjdCxcbiAgaXNSZWFkYWJsZVN0cmVhbSxcbiAgaXNSZXF1ZXN0LFxuICBpc1Jlc3BvbnNlLFxuICBpc0hlYWRlcnMsXG4gIGlzVW5kZWZpbmVkLFxuICBpc0RhdGUsXG4gIGlzRmlsZSxcbiAgaXNCbG9iLFxuICBpc1JlZ0V4cCxcbiAgaXNGdW5jdGlvbixcbiAgaXNTdHJlYW0sXG4gIGlzVVJMU2VhcmNoUGFyYW1zLFxuICBpc1R5cGVkQXJyYXksXG4gIGlzRmlsZUxpc3QsXG4gIGZvckVhY2gsXG4gIG1lcmdlLFxuICBleHRlbmQsXG4gIHRyaW0sXG4gIHN0cmlwQk9NLFxuICBpbmhlcml0cyxcbiAgdG9GbGF0T2JqZWN0LFxuICBraW5kT2YsXG4gIGtpbmRPZlRlc3QsXG4gIGVuZHNXaXRoLFxuICB0b0FycmF5LFxuICBmb3JFYWNoRW50cnksXG4gIG1hdGNoQWxsLFxuICBpc0hUTUxGb3JtLFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgaGFzT3duUHJvcDogaGFzT3duUHJvcGVydHksIC8vIGFuIGFsaWFzIHRvIGF2b2lkIEVTTGludCBuby1wcm90b3R5cGUtYnVpbHRpbnMgZGV0ZWN0aW9uXG4gIHJlZHVjZURlc2NyaXB0b3JzLFxuICBmcmVlemVNZXRob2RzLFxuICB0b09iamVjdFNldCxcbiAgdG9DYW1lbENhc2UsXG4gIG5vb3AsXG4gIHRvRmluaXRlTnVtYmVyLFxuICBmaW5kS2V5LFxuICBnbG9iYWw6IF9nbG9iYWwsXG4gIGlzQ29udGV4dERlZmluZWQsXG4gIGlzU3BlY0NvbXBsaWFudEZvcm0sXG4gIHRvSlNPTk9iamVjdCxcbiAgaXNBc3luY0ZuLFxuICBpc1RoZW5hYmxlLFxuICBzZXRJbW1lZGlhdGU6IF9zZXRJbW1lZGlhdGUsXG4gIGFzYXAsXG4gIGlzSXRlcmFibGVcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZ10gVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xuZnVuY3Rpb24gQXhpb3NFcnJvcihtZXNzYWdlLCBjb2RlLCBjb25maWcsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIEVycm9yLmNhbGwodGhpcyk7XG5cbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5zdGFjayA9IChuZXcgRXJyb3IoKSkuc3RhY2s7XG4gIH1cblxuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB0aGlzLm5hbWUgPSAnQXhpb3NFcnJvcic7XG4gIGNvZGUgJiYgKHRoaXMuY29kZSA9IGNvZGUpO1xuICBjb25maWcgJiYgKHRoaXMuY29uZmlnID0gY29uZmlnKTtcbiAgcmVxdWVzdCAmJiAodGhpcy5yZXF1ZXN0ID0gcmVxdWVzdCk7XG4gIGlmIChyZXNwb25zZSkge1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cyA/IHJlc3BvbnNlLnN0YXR1cyA6IG51bGw7XG4gIH1cbn1cblxudXRpbHMuaW5oZXJpdHMoQXhpb3NFcnJvciwgRXJyb3IsIHtcbiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIFN0YW5kYXJkXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAvLyBNaWNyb3NvZnRcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgbnVtYmVyOiB0aGlzLm51bWJlcixcbiAgICAgIC8vIE1vemlsbGFcbiAgICAgIGZpbGVOYW1lOiB0aGlzLmZpbGVOYW1lLFxuICAgICAgbGluZU51bWJlcjogdGhpcy5saW5lTnVtYmVyLFxuICAgICAgY29sdW1uTnVtYmVyOiB0aGlzLmNvbHVtbk51bWJlcixcbiAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLFxuICAgICAgLy8gQXhpb3NcbiAgICAgIGNvbmZpZzogdXRpbHMudG9KU09OT2JqZWN0KHRoaXMuY29uZmlnKSxcbiAgICAgIGNvZGU6IHRoaXMuY29kZSxcbiAgICAgIHN0YXR1czogdGhpcy5zdGF0dXNcbiAgICB9O1xuICB9XG59KTtcblxuY29uc3QgcHJvdG90eXBlID0gQXhpb3NFcnJvci5wcm90b3R5cGU7XG5jb25zdCBkZXNjcmlwdG9ycyA9IHt9O1xuXG5bXG4gICdFUlJfQkFEX09QVElPTl9WQUxVRScsXG4gICdFUlJfQkFEX09QVElPTicsXG4gICdFQ09OTkFCT1JURUQnLFxuICAnRVRJTUVET1VUJyxcbiAgJ0VSUl9ORVRXT1JLJyxcbiAgJ0VSUl9GUl9UT09fTUFOWV9SRURJUkVDVFMnLFxuICAnRVJSX0RFUFJFQ0FURUQnLFxuICAnRVJSX0JBRF9SRVNQT05TRScsXG4gICdFUlJfQkFEX1JFUVVFU1QnLFxuICAnRVJSX0NBTkNFTEVEJyxcbiAgJ0VSUl9OT1RfU1VQUE9SVCcsXG4gICdFUlJfSU5WQUxJRF9VUkwnXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXS5mb3JFYWNoKGNvZGUgPT4ge1xuICBkZXNjcmlwdG9yc1tjb2RlXSA9IHt2YWx1ZTogY29kZX07XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQXhpb3NFcnJvciwgZGVzY3JpcHRvcnMpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgJ2lzQXhpb3NFcnJvcicsIHt2YWx1ZTogdHJ1ZX0pO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuQXhpb3NFcnJvci5mcm9tID0gKGVycm9yLCBjb2RlLCBjb25maWcsIHJlcXVlc3QsIHJlc3BvbnNlLCBjdXN0b21Qcm9wcykgPT4ge1xuICBjb25zdCBheGlvc0Vycm9yID0gT2JqZWN0LmNyZWF0ZShwcm90b3R5cGUpO1xuXG4gIHV0aWxzLnRvRmxhdE9iamVjdChlcnJvciwgYXhpb3NFcnJvciwgZnVuY3Rpb24gZmlsdGVyKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IEVycm9yLnByb3RvdHlwZTtcbiAgfSwgcHJvcCA9PiB7XG4gICAgcmV0dXJuIHByb3AgIT09ICdpc0F4aW9zRXJyb3InO1xuICB9KTtcblxuICBBeGlvc0Vycm9yLmNhbGwoYXhpb3NFcnJvciwgZXJyb3IubWVzc2FnZSwgY29kZSwgY29uZmlnLCByZXF1ZXN0LCByZXNwb25zZSk7XG5cbiAgYXhpb3NFcnJvci5jYXVzZSA9IGVycm9yO1xuXG4gIGF4aW9zRXJyb3IubmFtZSA9IGVycm9yLm5hbWU7XG5cbiAgY3VzdG9tUHJvcHMgJiYgT2JqZWN0LmFzc2lnbihheGlvc0Vycm9yLCBjdXN0b21Qcm9wcyk7XG5cbiAgcmV0dXJuIGF4aW9zRXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBeGlvc0Vycm9yO1xuIiwgIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBzdHJpY3RcbmV4cG9ydCBkZWZhdWx0IG51bGw7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcbi8vIHRlbXBvcmFyeSBob3RmaXggdG8gYXZvaWQgY2lyY3VsYXIgcmVmZXJlbmNlcyB1bnRpbCBBeGlvc1VSTFNlYXJjaFBhcmFtcyBpcyByZWZhY3RvcmVkXG5pbXBvcnQgUGxhdGZvcm1Gb3JtRGF0YSBmcm9tICcuLi9wbGF0Zm9ybS9ub2RlL2NsYXNzZXMvRm9ybURhdGEuanMnO1xuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGdpdmVuIHRoaW5nIGlzIGEgYXJyYXkgb3IganMgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aGluZyAtIFRoZSBvYmplY3Qgb3IgYXJyYXkgdG8gYmUgdmlzaXRlZC5cbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNWaXNpdGFibGUodGhpbmcpIHtcbiAgcmV0dXJuIHV0aWxzLmlzUGxhaW5PYmplY3QodGhpbmcpIHx8IHV0aWxzLmlzQXJyYXkodGhpbmcpO1xufVxuXG4vKipcbiAqIEl0IHJlbW92ZXMgdGhlIGJyYWNrZXRzIGZyb20gdGhlIGVuZCBvZiBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBUaGUga2V5IG9mIHRoZSBwYXJhbWV0ZXIuXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gdGhlIGtleSB3aXRob3V0IHRoZSBicmFja2V0cy5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQnJhY2tldHMoa2V5KSB7XG4gIHJldHVybiB1dGlscy5lbmRzV2l0aChrZXksICdbXScpID8ga2V5LnNsaWNlKDAsIC0yKSA6IGtleTtcbn1cblxuLyoqXG4gKiBJdCB0YWtlcyBhIHBhdGgsIGEga2V5LCBhbmQgYSBib29sZWFuLCBhbmQgcmV0dXJucyBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGggdG8gdGhlIGN1cnJlbnQga2V5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRoZSBrZXkgb2YgdGhlIGN1cnJlbnQgb2JqZWN0IGJlaW5nIGl0ZXJhdGVkIG92ZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gZG90cyAtIElmIHRydWUsIHRoZSBrZXkgd2lsbCBiZSByZW5kZXJlZCB3aXRoIGRvdHMgaW5zdGVhZCBvZiBicmFja2V0cy5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcGF0aCB0byB0aGUgY3VycmVudCBrZXkuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlcktleShwYXRoLCBrZXksIGRvdHMpIHtcbiAgaWYgKCFwYXRoKSByZXR1cm4ga2V5O1xuICByZXR1cm4gcGF0aC5jb25jYXQoa2V5KS5tYXAoZnVuY3Rpb24gZWFjaCh0b2tlbiwgaSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHRva2VuID0gcmVtb3ZlQnJhY2tldHModG9rZW4pO1xuICAgIHJldHVybiAhZG90cyAmJiBpID8gJ1snICsgdG9rZW4gKyAnXScgOiB0b2tlbjtcbiAgfSkuam9pbihkb3RzID8gJy4nIDogJycpO1xufVxuXG4vKipcbiAqIElmIHRoZSBhcnJheSBpcyBhbiBhcnJheSBhbmQgbm9uZSBvZiBpdHMgZWxlbWVudHMgYXJlIHZpc2l0YWJsZSwgdGhlbiBpdCdzIGEgZmxhdCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PGFueT59IGFyciAtIFRoZSBhcnJheSB0byBjaGVja1xuICpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0ZsYXRBcnJheShhcnIpIHtcbiAgcmV0dXJuIHV0aWxzLmlzQXJyYXkoYXJyKSAmJiAhYXJyLnNvbWUoaXNWaXNpdGFibGUpO1xufVxuXG5jb25zdCBwcmVkaWNhdGVzID0gdXRpbHMudG9GbGF0T2JqZWN0KHV0aWxzLCB7fSwgbnVsbCwgZnVuY3Rpb24gZmlsdGVyKHByb3ApIHtcbiAgcmV0dXJuIC9eaXNbQS1aXS8udGVzdChwcm9wKTtcbn0pO1xuXG4vKipcbiAqIENvbnZlcnQgYSBkYXRhIG9iamVjdCB0byBGb3JtRGF0YVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7P09iamVjdH0gW2Zvcm1EYXRhXVxuICogQHBhcmFtIHs/T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLnZpc2l0b3JdXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLm1ldGFUb2tlbnMgPSB0cnVlXVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5kb3RzID0gZmFsc2VdXG4gKiBAcGFyYW0gez9Cb29sZWFufSBbb3B0aW9ucy5pbmRleGVzID0gZmFsc2VdXG4gKlxuICogQHJldHVybnMge09iamVjdH1cbiAqKi9cblxuLyoqXG4gKiBJdCBjb252ZXJ0cyBhbiBvYmplY3QgaW50byBhIEZvcm1EYXRhIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0PGFueSwgYW55Pn0gb2JqIC0gVGhlIG9iamVjdCB0byBjb252ZXJ0IHRvIGZvcm0gZGF0YS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtRGF0YSAtIFRoZSBGb3JtRGF0YSBvYmplY3QgdG8gYXBwZW5kIHRvLlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBhbnk+fSBvcHRpb25zXG4gKlxuICogQHJldHVybnNcbiAqL1xuZnVuY3Rpb24gdG9Gb3JtRGF0YShvYmosIGZvcm1EYXRhLCBvcHRpb25zKSB7XG4gIGlmICghdXRpbHMuaXNPYmplY3Qob2JqKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3RhcmdldCBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIGZvcm1EYXRhID0gZm9ybURhdGEgfHwgbmV3IChQbGF0Zm9ybUZvcm1EYXRhIHx8IEZvcm1EYXRhKSgpO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBvcHRpb25zID0gdXRpbHMudG9GbGF0T2JqZWN0KG9wdGlvbnMsIHtcbiAgICBtZXRhVG9rZW5zOiB0cnVlLFxuICAgIGRvdHM6IGZhbHNlLFxuICAgIGluZGV4ZXM6IGZhbHNlXG4gIH0sIGZhbHNlLCBmdW5jdGlvbiBkZWZpbmVkKG9wdGlvbiwgc291cmNlKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsZXFlcWVxXG4gICAgcmV0dXJuICF1dGlscy5pc1VuZGVmaW5lZChzb3VyY2Vbb3B0aW9uXSk7XG4gIH0pO1xuXG4gIGNvbnN0IG1ldGFUb2tlbnMgPSBvcHRpb25zLm1ldGFUb2tlbnM7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICBjb25zdCB2aXNpdG9yID0gb3B0aW9ucy52aXNpdG9yIHx8IGRlZmF1bHRWaXNpdG9yO1xuICBjb25zdCBkb3RzID0gb3B0aW9ucy5kb3RzO1xuICBjb25zdCBpbmRleGVzID0gb3B0aW9ucy5pbmRleGVzO1xuICBjb25zdCBfQmxvYiA9IG9wdGlvbnMuQmxvYiB8fCB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCcgJiYgQmxvYjtcbiAgY29uc3QgdXNlQmxvYiA9IF9CbG9iICYmIHV0aWxzLmlzU3BlY0NvbXBsaWFudEZvcm0oZm9ybURhdGEpO1xuXG4gIGlmICghdXRpbHMuaXNGdW5jdGlvbih2aXNpdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Zpc2l0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBmdW5jdGlvbiBjb252ZXJ0VmFsdWUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiAnJztcblxuICAgIGlmICh1dGlscy5pc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWUudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBpZiAodXRpbHMuaXNCb29sZWFuKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VCbG9iICYmIHV0aWxzLmlzQmxvYih2YWx1ZSkpIHtcbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKCdCbG9iIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSBhIEJ1ZmZlciBpbnN0ZWFkLicpO1xuICAgIH1cblxuICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyKHZhbHVlKSB8fCB1dGlscy5pc1R5cGVkQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdXNlQmxvYiAmJiB0eXBlb2YgQmxvYiA9PT0gJ2Z1bmN0aW9uJyA/IG5ldyBCbG9iKFt2YWx1ZV0pIDogQnVmZmVyLmZyb20odmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZhdWx0IHZpc2l0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBrZXlcbiAgICogQHBhcmFtIHtBcnJheTxTdHJpbmd8TnVtYmVyPn0gcGF0aFxuICAgKiBAdGhpcyB7Rm9ybURhdGF9XG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSByZXR1cm4gdHJ1ZSB0byB2aXNpdCB0aGUgZWFjaCBwcm9wIG9mIHRoZSB2YWx1ZSByZWN1cnNpdmVseVxuICAgKi9cbiAgZnVuY3Rpb24gZGVmYXVsdFZpc2l0b3IodmFsdWUsIGtleSwgcGF0aCkge1xuICAgIGxldCBhcnIgPSB2YWx1ZTtcblxuICAgIGlmICh2YWx1ZSAmJiAhcGF0aCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAodXRpbHMuZW5kc1dpdGgoa2V5LCAne30nKSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAga2V5ID0gbWV0YVRva2VucyA/IGtleSA6IGtleS5zbGljZSgwLCAtMik7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICh1dGlscy5pc0FycmF5KHZhbHVlKSAmJiBpc0ZsYXRBcnJheSh2YWx1ZSkpIHx8XG4gICAgICAgICgodXRpbHMuaXNGaWxlTGlzdCh2YWx1ZSkgfHwgdXRpbHMuZW5kc1dpdGgoa2V5LCAnW10nKSkgJiYgKGFyciA9IHV0aWxzLnRvQXJyYXkodmFsdWUpKVxuICAgICAgICApKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBrZXkgPSByZW1vdmVCcmFja2V0cyhrZXkpO1xuXG4gICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIGVhY2goZWwsIGluZGV4KSB7XG4gICAgICAgICAgISh1dGlscy5pc1VuZGVmaW5lZChlbCkgfHwgZWwgPT09IG51bGwpICYmIGZvcm1EYXRhLmFwcGVuZChcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgICAgICAgICAgaW5kZXhlcyA9PT0gdHJ1ZSA/IHJlbmRlcktleShba2V5XSwgaW5kZXgsIGRvdHMpIDogKGluZGV4ZXMgPT09IG51bGwgPyBrZXkgOiBrZXkgKyAnW10nKSxcbiAgICAgICAgICAgIGNvbnZlcnRWYWx1ZShlbClcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc1Zpc2l0YWJsZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZvcm1EYXRhLmFwcGVuZChyZW5kZXJLZXkocGF0aCwga2V5LCBkb3RzKSwgY29udmVydFZhbHVlKHZhbHVlKSk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBzdGFjayA9IFtdO1xuXG4gIGNvbnN0IGV4cG9zZWRIZWxwZXJzID0gT2JqZWN0LmFzc2lnbihwcmVkaWNhdGVzLCB7XG4gICAgZGVmYXVsdFZpc2l0b3IsXG4gICAgY29udmVydFZhbHVlLFxuICAgIGlzVmlzaXRhYmxlXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGJ1aWxkKHZhbHVlLCBwYXRoKSB7XG4gICAgaWYgKHV0aWxzLmlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuO1xuXG4gICAgaWYgKHN0YWNrLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgICAgdGhyb3cgRXJyb3IoJ0NpcmN1bGFyIHJlZmVyZW5jZSBkZXRlY3RlZCBpbiAnICsgcGF0aC5qb2luKCcuJykpO1xuICAgIH1cblxuICAgIHN0YWNrLnB1c2godmFsdWUpO1xuXG4gICAgdXRpbHMuZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24gZWFjaChlbCwga2V5KSB7XG4gICAgICBjb25zdCByZXN1bHQgPSAhKHV0aWxzLmlzVW5kZWZpbmVkKGVsKSB8fCBlbCA9PT0gbnVsbCkgJiYgdmlzaXRvci5jYWxsKFxuICAgICAgICBmb3JtRGF0YSwgZWwsIHV0aWxzLmlzU3RyaW5nKGtleSkgPyBrZXkudHJpbSgpIDoga2V5LCBwYXRoLCBleHBvc2VkSGVscGVyc1xuICAgICAgKTtcblxuICAgICAgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICBidWlsZChlbCwgcGF0aCA/IHBhdGguY29uY2F0KGtleSkgOiBba2V5XSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzdGFjay5wb3AoKTtcbiAgfVxuXG4gIGlmICghdXRpbHMuaXNPYmplY3Qob2JqKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2RhdGEgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgfVxuXG4gIGJ1aWxkKG9iaik7XG5cbiAgcmV0dXJuIGZvcm1EYXRhO1xufVxuXG5leHBvcnQgZGVmYXVsdCB0b0Zvcm1EYXRhO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHRvRm9ybURhdGEgZnJvbSAnLi90b0Zvcm1EYXRhLmpzJztcblxuLyoqXG4gKiBJdCBlbmNvZGVzIGEgc3RyaW5nIGJ5IHJlcGxhY2luZyBhbGwgY2hhcmFjdGVycyB0aGF0IGFyZSBub3QgaW4gdGhlIHVucmVzZXJ2ZWQgc2V0IHdpdGhcbiAqIHRoZWlyIHBlcmNlbnQtZW5jb2RlZCBlcXVpdmFsZW50c1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIGVuY29kZS5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZW5jb2RlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGVuY29kZShzdHIpIHtcbiAgY29uc3QgY2hhck1hcCA9IHtcbiAgICAnISc6ICclMjEnLFxuICAgIFwiJ1wiOiAnJTI3JyxcbiAgICAnKCc6ICclMjgnLFxuICAgICcpJzogJyUyOScsXG4gICAgJ34nOiAnJTdFJyxcbiAgICAnJTIwJzogJysnLFxuICAgICclMDAnOiAnXFx4MDAnXG4gIH07XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyKS5yZXBsYWNlKC9bIScoKX5dfCUyMHwlMDAvZywgZnVuY3Rpb24gcmVwbGFjZXIobWF0Y2gpIHtcbiAgICByZXR1cm4gY2hhck1hcFttYXRjaF07XG4gIH0pO1xufVxuXG4vKipcbiAqIEl0IHRha2VzIGEgcGFyYW1zIG9iamVjdCBhbmQgY29udmVydHMgaXQgdG8gYSBGb3JtRGF0YSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIGFueT59IHBhcmFtcyAtIFRoZSBwYXJhbWV0ZXJzIHRvIGJlIGNvbnZlcnRlZCB0byBhIEZvcm1EYXRhIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIG9iamVjdCBwYXNzZWQgdG8gdGhlIEF4aW9zIGNvbnN0cnVjdG9yLlxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBBeGlvc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMsIG9wdGlvbnMpIHtcbiAgdGhpcy5fcGFpcnMgPSBbXTtcblxuICBwYXJhbXMgJiYgdG9Gb3JtRGF0YShwYXJhbXMsIHRoaXMsIG9wdGlvbnMpO1xufVxuXG5jb25zdCBwcm90b3R5cGUgPSBBeGlvc1VSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGU7XG5cbnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiBhcHBlbmQobmFtZSwgdmFsdWUpIHtcbiAgdGhpcy5fcGFpcnMucHVzaChbbmFtZSwgdmFsdWVdKTtcbn07XG5cbnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKGVuY29kZXIpIHtcbiAgY29uc3QgX2VuY29kZSA9IGVuY29kZXIgPyBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBlbmNvZGVyLmNhbGwodGhpcywgdmFsdWUsIGVuY29kZSk7XG4gIH0gOiBlbmNvZGU7XG5cbiAgcmV0dXJuIHRoaXMuX3BhaXJzLm1hcChmdW5jdGlvbiBlYWNoKHBhaXIpIHtcbiAgICByZXR1cm4gX2VuY29kZShwYWlyWzBdKSArICc9JyArIF9lbmNvZGUocGFpclsxXSk7XG4gIH0sICcnKS5qb2luKCcmJyk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBeGlvc1VSTFNlYXJjaFBhcmFtcztcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgQXhpb3NVUkxTZWFyY2hQYXJhbXMgZnJvbSAnLi4vaGVscGVycy9BeGlvc1VSTFNlYXJjaFBhcmFtcy5qcyc7XG5cbi8qKlxuICogSXQgcmVwbGFjZXMgYWxsIGluc3RhbmNlcyBvZiB0aGUgY2hhcmFjdGVycyBgOmAsIGAkYCwgYCxgLCBgK2AsIGBbYCwgYW5kIGBdYCB3aXRoIHRoZWlyXG4gKiBVUkkgZW5jb2RlZCBjb3VudGVycGFydHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsIFRoZSB2YWx1ZSB0byBiZSBlbmNvZGVkLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBlbmNvZGVkIHZhbHVlLlxuICovXG5mdW5jdGlvbiBlbmNvZGUodmFsKSB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cbiAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgcmVwbGFjZSgvJTI0L2csICckJykuXG4gICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuICAgIHJlcGxhY2UoLyUyMC9nLCAnKycpLlxuICAgIHJlcGxhY2UoLyU1Qi9naSwgJ1snKS5cbiAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuICogQHBhcmFtIHs/KG9iamVjdHxGdW5jdGlvbil9IG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgb3B0aW9ucykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIFxuICBjb25zdCBfZW5jb2RlID0gb3B0aW9ucyAmJiBvcHRpb25zLmVuY29kZSB8fCBlbmNvZGU7XG5cbiAgaWYgKHV0aWxzLmlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICBvcHRpb25zID0ge1xuICAgICAgc2VyaWFsaXplOiBvcHRpb25zXG4gICAgfTtcbiAgfSBcblxuICBjb25zdCBzZXJpYWxpemVGbiA9IG9wdGlvbnMgJiYgb3B0aW9ucy5zZXJpYWxpemU7XG5cbiAgbGV0IHNlcmlhbGl6ZWRQYXJhbXM7XG5cbiAgaWYgKHNlcmlhbGl6ZUZuKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHNlcmlhbGl6ZUZuKHBhcmFtcywgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykgP1xuICAgICAgcGFyYW1zLnRvU3RyaW5nKCkgOlxuICAgICAgbmV3IEF4aW9zVVJMU2VhcmNoUGFyYW1zKHBhcmFtcywgb3B0aW9ucykudG9TdHJpbmcoX2VuY29kZSk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIGNvbnN0IGhhc2htYXJrSW5kZXggPSB1cmwuaW5kZXhPZihcIiNcIik7XG5cbiAgICBpZiAoaGFzaG1hcmtJbmRleCAhPT0gLTEpIHtcbiAgICAgIHVybCA9IHVybC5zbGljZSgwLCBoYXNobWFya0luZGV4KTtcbiAgICB9XG4gICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcblxuY2xhc3MgSW50ZXJjZXB0b3JNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIG5ldyBpbnRlcmNlcHRvciB0byB0aGUgc3RhY2tcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVsZmlsbGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHRoZW5gIGZvciBhIGBQcm9taXNlYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGByZWplY3RgIGZvciBhIGBQcm9taXNlYFxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEFuIElEIHVzZWQgdG8gcmVtb3ZlIGludGVyY2VwdG9yIGxhdGVyXG4gICAqL1xuICB1c2UoZnVsZmlsbGVkLCByZWplY3RlZCwgb3B0aW9ucykge1xuICAgIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgICBmdWxmaWxsZWQsXG4gICAgICByZWplY3RlZCxcbiAgICAgIHN5bmNocm9ub3VzOiBvcHRpb25zID8gb3B0aW9ucy5zeW5jaHJvbm91cyA6IGZhbHNlLFxuICAgICAgcnVuV2hlbjogb3B0aW9ucyA/IG9wdGlvbnMucnVuV2hlbiA6IG51bGxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBpbnRlcmNlcHRvciBmcm9tIHRoZSBzdGFja1xuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gICAqXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIGludGVyY2VwdG9yIHdhcyByZW1vdmVkLCBgZmFsc2VgIG90aGVyd2lzZVxuICAgKi9cbiAgZWplY3QoaWQpIHtcbiAgICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICAgIHRoaXMuaGFuZGxlcnNbaWRdID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIGludGVyY2VwdG9ycyBmcm9tIHRoZSBzdGFja1xuICAgKlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGNsZWFyKCkge1xuICAgIGlmICh0aGlzLmhhbmRsZXJzKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHJlZ2lzdGVyZWQgaW50ZXJjZXB0b3JzXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIHNraXBwaW5nIG92ZXIgYW55XG4gICAqIGludGVyY2VwdG9ycyB0aGF0IG1heSBoYXZlIGJlY29tZSBgbnVsbGAgY2FsbGluZyBgZWplY3RgLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBpbnRlcmNlcHRvclxuICAgKlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGZvckVhY2goZm4pIHtcbiAgICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICAgIGlmIChoICE9PSBudWxsKSB7XG4gICAgICAgIGZuKGgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEludGVyY2VwdG9yTWFuYWdlcjtcbiIsICIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgc2lsZW50SlNPTlBhcnNpbmc6IHRydWUsXG4gIGZvcmNlZEpTT05QYXJzaW5nOiB0cnVlLFxuICBjbGFyaWZ5VGltZW91dEVycm9yOiBmYWxzZVxufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBBeGlvc1VSTFNlYXJjaFBhcmFtcyBmcm9tICcuLi8uLi8uLi9oZWxwZXJzL0F4aW9zVVJMU2VhcmNoUGFyYW1zLmpzJztcbmV4cG9ydCBkZWZhdWx0IHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICd1bmRlZmluZWQnID8gVVJMU2VhcmNoUGFyYW1zIDogQXhpb3NVUkxTZWFyY2hQYXJhbXM7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZGVmYXVsdCB0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnID8gRm9ybURhdGEgOiBudWxsO1xuIiwgIid1c2Ugc3RyaWN0J1xuXG5leHBvcnQgZGVmYXVsdCB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCcgPyBCbG9iIDogbnVsbFxuIiwgImltcG9ydCBVUkxTZWFyY2hQYXJhbXMgZnJvbSAnLi9jbGFzc2VzL1VSTFNlYXJjaFBhcmFtcy5qcydcbmltcG9ydCBGb3JtRGF0YSBmcm9tICcuL2NsYXNzZXMvRm9ybURhdGEuanMnXG5pbXBvcnQgQmxvYiBmcm9tICcuL2NsYXNzZXMvQmxvYi5qcydcblxuZXhwb3J0IGRlZmF1bHQge1xuICBpc0Jyb3dzZXI6IHRydWUsXG4gIGNsYXNzZXM6IHtcbiAgICBVUkxTZWFyY2hQYXJhbXMsXG4gICAgRm9ybURhdGEsXG4gICAgQmxvYlxuICB9LFxuICBwcm90b2NvbHM6IFsnaHR0cCcsICdodHRwcycsICdmaWxlJywgJ2Jsb2InLCAndXJsJywgJ2RhdGEnXVxufTtcbiIsICJjb25zdCBoYXNCcm93c2VyRW52ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJztcblxuY29uc3QgX25hdmlnYXRvciA9IHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvciB8fCB1bmRlZmluZWQ7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICogbmF0aXZlc2NyaXB0XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ05hdGl2ZVNjcmlwdCcgb3IgJ05TJ1xuICpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5jb25zdCBoYXNTdGFuZGFyZEJyb3dzZXJFbnYgPSBoYXNCcm93c2VyRW52ICYmXG4gICghX25hdmlnYXRvciB8fCBbJ1JlYWN0TmF0aXZlJywgJ05hdGl2ZVNjcmlwdCcsICdOUyddLmluZGV4T2YoX25hdmlnYXRvci5wcm9kdWN0KSA8IDApO1xuXG4vKipcbiAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciB3ZWJXb3JrZXIgZW52aXJvbm1lbnRcbiAqXG4gKiBBbHRob3VnaCB0aGUgYGlzU3RhbmRhcmRCcm93c2VyRW52YCBtZXRob2QgaW5kaWNhdGVzIHRoYXRcbiAqIGBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlcmAsIHRoZSBXZWJXb3JrZXIgd2lsbCBzdGlsbCBiZVxuICogZmlsdGVyZWQgb3V0IGR1ZSB0byBpdHMganVkZ21lbnQgc3RhbmRhcmRcbiAqIGB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnYC5cbiAqIFRoaXMgbGVhZHMgdG8gYSBwcm9ibGVtIHdoZW4gYXhpb3MgcG9zdCBgRm9ybURhdGFgIGluIHdlYldvcmtlclxuICovXG5jb25zdCBoYXNTdGFuZGFyZEJyb3dzZXJXZWJXb3JrZXJFbnYgPSAoKCkgPT4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUgJiZcbiAgICB0eXBlb2Ygc2VsZi5pbXBvcnRTY3JpcHRzID09PSAnZnVuY3Rpb24nXG4gICk7XG59KSgpO1xuXG5jb25zdCBvcmlnaW4gPSBoYXNCcm93c2VyRW52ICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmIHx8ICdodHRwOi8vbG9jYWxob3N0JztcblxuZXhwb3J0IHtcbiAgaGFzQnJvd3NlckVudixcbiAgaGFzU3RhbmRhcmRCcm93c2VyV2ViV29ya2VyRW52LFxuICBoYXNTdGFuZGFyZEJyb3dzZXJFbnYsXG4gIF9uYXZpZ2F0b3IgYXMgbmF2aWdhdG9yLFxuICBvcmlnaW5cbn1cbiIsICJpbXBvcnQgcGxhdGZvcm0gZnJvbSAnLi9ub2RlL2luZGV4LmpzJztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4vY29tbW9uL3V0aWxzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICAuLi51dGlscyxcbiAgLi4ucGxhdGZvcm1cbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgdG9Gb3JtRGF0YSBmcm9tICcuL3RvRm9ybURhdGEuanMnO1xuaW1wb3J0IHBsYXRmb3JtIGZyb20gJy4uL3BsYXRmb3JtL2luZGV4LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9VUkxFbmNvZGVkRm9ybShkYXRhLCBvcHRpb25zKSB7XG4gIHJldHVybiB0b0Zvcm1EYXRhKGRhdGEsIG5ldyBwbGF0Zm9ybS5jbGFzc2VzLlVSTFNlYXJjaFBhcmFtcygpLCBPYmplY3QuYXNzaWduKHtcbiAgICB2aXNpdG9yOiBmdW5jdGlvbih2YWx1ZSwga2V5LCBwYXRoLCBoZWxwZXJzKSB7XG4gICAgICBpZiAocGxhdGZvcm0uaXNOb2RlICYmIHV0aWxzLmlzQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICB0aGlzLmFwcGVuZChrZXksIHZhbHVlLnRvU3RyaW5nKCdiYXNlNjQnKSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGhlbHBlcnMuZGVmYXVsdFZpc2l0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH0sIG9wdGlvbnMpKTtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5cbi8qKlxuICogSXQgdGFrZXMgYSBzdHJpbmcgbGlrZSBgZm9vW3hdW3ldW3pdYCBhbmQgcmV0dXJucyBhbiBhcnJheSBsaWtlIGBbJ2ZvbycsICd4JywgJ3knLCAneiddXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICpcbiAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHN0cmluZ3MuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlUHJvcFBhdGgobmFtZSkge1xuICAvLyBmb29beF1beV1bel1cbiAgLy8gZm9vLngueS56XG4gIC8vIGZvby14LXktelxuICAvLyBmb28geCB5IHpcbiAgcmV0dXJuIHV0aWxzLm1hdGNoQWxsKC9cXHcrfFxcWyhcXHcqKV0vZywgbmFtZSkubWFwKG1hdGNoID0+IHtcbiAgICByZXR1cm4gbWF0Y2hbMF0gPT09ICdbXScgPyAnJyA6IG1hdGNoWzFdIHx8IG1hdGNoWzBdO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGFuIGFycmF5IHRvIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PGFueT59IGFyciAtIFRoZSBhcnJheSB0byBjb252ZXJ0IHRvIGFuIG9iamVjdC5cbiAqXG4gKiBAcmV0dXJucyBBbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBrZXlzIGFuZCB2YWx1ZXMgYXMgdGhlIGFycmF5LlxuICovXG5mdW5jdGlvbiBhcnJheVRvT2JqZWN0KGFycikge1xuICBjb25zdCBvYmogPSB7fTtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGFycik7XG4gIGxldCBpO1xuICBjb25zdCBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgbGV0IGtleTtcbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAga2V5ID0ga2V5c1tpXTtcbiAgICBvYmpba2V5XSA9IGFycltrZXldO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogSXQgdGFrZXMgYSBGb3JtRGF0YSBvYmplY3QgYW5kIHJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtRGF0YSBUaGUgRm9ybURhdGEgb2JqZWN0IHRvIGNvbnZlcnQgdG8gSlNPTi5cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0PHN0cmluZywgYW55PiB8IG51bGx9IFRoZSBjb252ZXJ0ZWQgb2JqZWN0LlxuICovXG5mdW5jdGlvbiBmb3JtRGF0YVRvSlNPTihmb3JtRGF0YSkge1xuICBmdW5jdGlvbiBidWlsZFBhdGgocGF0aCwgdmFsdWUsIHRhcmdldCwgaW5kZXgpIHtcbiAgICBsZXQgbmFtZSA9IHBhdGhbaW5kZXgrK107XG5cbiAgICBpZiAobmFtZSA9PT0gJ19fcHJvdG9fXycpIHJldHVybiB0cnVlO1xuXG4gICAgY29uc3QgaXNOdW1lcmljS2V5ID0gTnVtYmVyLmlzRmluaXRlKCtuYW1lKTtcbiAgICBjb25zdCBpc0xhc3QgPSBpbmRleCA+PSBwYXRoLmxlbmd0aDtcbiAgICBuYW1lID0gIW5hbWUgJiYgdXRpbHMuaXNBcnJheSh0YXJnZXQpID8gdGFyZ2V0Lmxlbmd0aCA6IG5hbWU7XG5cbiAgICBpZiAoaXNMYXN0KSB7XG4gICAgICBpZiAodXRpbHMuaGFzT3duUHJvcCh0YXJnZXQsIG5hbWUpKSB7XG4gICAgICAgIHRhcmdldFtuYW1lXSA9IFt0YXJnZXRbbmFtZV0sIHZhbHVlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFtuYW1lXSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gIWlzTnVtZXJpY0tleTtcbiAgICB9XG5cbiAgICBpZiAoIXRhcmdldFtuYW1lXSB8fCAhdXRpbHMuaXNPYmplY3QodGFyZ2V0W25hbWVdKSkge1xuICAgICAgdGFyZ2V0W25hbWVdID0gW107XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYnVpbGRQYXRoKHBhdGgsIHZhbHVlLCB0YXJnZXRbbmFtZV0sIGluZGV4KTtcblxuICAgIGlmIChyZXN1bHQgJiYgdXRpbHMuaXNBcnJheSh0YXJnZXRbbmFtZV0pKSB7XG4gICAgICB0YXJnZXRbbmFtZV0gPSBhcnJheVRvT2JqZWN0KHRhcmdldFtuYW1lXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICFpc051bWVyaWNLZXk7XG4gIH1cblxuICBpZiAodXRpbHMuaXNGb3JtRGF0YShmb3JtRGF0YSkgJiYgdXRpbHMuaXNGdW5jdGlvbihmb3JtRGF0YS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IG9iaiA9IHt9O1xuXG4gICAgdXRpbHMuZm9yRWFjaEVudHJ5KGZvcm1EYXRhLCAobmFtZSwgdmFsdWUpID0+IHtcbiAgICAgIGJ1aWxkUGF0aChwYXJzZVByb3BQYXRoKG5hbWUpLCB2YWx1ZSwgb2JqLCAwKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZm9ybURhdGFUb0pTT047XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcbmltcG9ydCB0cmFuc2l0aW9uYWxEZWZhdWx0cyBmcm9tICcuL3RyYW5zaXRpb25hbC5qcyc7XG5pbXBvcnQgdG9Gb3JtRGF0YSBmcm9tICcuLi9oZWxwZXJzL3RvRm9ybURhdGEuanMnO1xuaW1wb3J0IHRvVVJMRW5jb2RlZEZvcm0gZnJvbSAnLi4vaGVscGVycy90b1VSTEVuY29kZWRGb3JtLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5pbXBvcnQgZm9ybURhdGFUb0pTT04gZnJvbSAnLi4vaGVscGVycy9mb3JtRGF0YVRvSlNPTi5qcyc7XG5cbi8qKlxuICogSXQgdGFrZXMgYSBzdHJpbmcsIHRyaWVzIHRvIHBhcnNlIGl0LCBhbmQgaWYgaXQgZmFpbHMsIGl0IHJldHVybnMgdGhlIHN0cmluZ2lmaWVkIHZlcnNpb25cbiAqIG9mIHRoZSBpbnB1dFxuICpcbiAqIEBwYXJhbSB7YW55fSByYXdWYWx1ZSAtIFRoZSB2YWx1ZSB0byBiZSBzdHJpbmdpZmllZC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBhcnNlciAtIEEgZnVuY3Rpb24gdGhhdCBwYXJzZXMgYSBzdHJpbmcgaW50byBhIEphdmFTY3JpcHQgb2JqZWN0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZW5jb2RlciAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHZhbHVlIGFuZCByZXR1cm5zIGEgc3RyaW5nLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5naWZpZWQgdmVyc2lvbiBvZiB0aGUgcmF3VmFsdWUuXG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeVNhZmVseShyYXdWYWx1ZSwgcGFyc2VyLCBlbmNvZGVyKSB7XG4gIGlmICh1dGlscy5pc1N0cmluZyhyYXdWYWx1ZSkpIHtcbiAgICB0cnkge1xuICAgICAgKHBhcnNlciB8fCBKU09OLnBhcnNlKShyYXdWYWx1ZSk7XG4gICAgICByZXR1cm4gdXRpbHMudHJpbShyYXdWYWx1ZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUubmFtZSAhPT0gJ1N5bnRheEVycm9yJykge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoZW5jb2RlciB8fCBKU09OLnN0cmluZ2lmeSkocmF3VmFsdWUpO1xufVxuXG5jb25zdCBkZWZhdWx0cyA9IHtcblxuICB0cmFuc2l0aW9uYWw6IHRyYW5zaXRpb25hbERlZmF1bHRzLFxuXG4gIGFkYXB0ZXI6IFsneGhyJywgJ2h0dHAnLCAnZmV0Y2gnXSxcblxuICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG4gICAgY29uc3QgY29udGVudFR5cGUgPSBoZWFkZXJzLmdldENvbnRlbnRUeXBlKCkgfHwgJyc7XG4gICAgY29uc3QgaGFzSlNPTkNvbnRlbnRUeXBlID0gY29udGVudFR5cGUuaW5kZXhPZignYXBwbGljYXRpb24vanNvbicpID4gLTE7XG4gICAgY29uc3QgaXNPYmplY3RQYXlsb2FkID0gdXRpbHMuaXNPYmplY3QoZGF0YSk7XG5cbiAgICBpZiAoaXNPYmplY3RQYXlsb2FkICYmIHV0aWxzLmlzSFRNTEZvcm0oZGF0YSkpIHtcbiAgICAgIGRhdGEgPSBuZXcgRm9ybURhdGEoZGF0YSk7XG4gICAgfVxuXG4gICAgY29uc3QgaXNGb3JtRGF0YSA9IHV0aWxzLmlzRm9ybURhdGEoZGF0YSk7XG5cbiAgICBpZiAoaXNGb3JtRGF0YSkge1xuICAgICAgcmV0dXJuIGhhc0pTT05Db250ZW50VHlwZSA/IEpTT04uc3RyaW5naWZ5KGZvcm1EYXRhVG9KU09OKGRhdGEpKSA6IGRhdGE7XG4gICAgfVxuXG4gICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0Jsb2IoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzUmVhZGFibGVTdHJlYW0oZGF0YSlcbiAgICApIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG4gICAgICBoZWFkZXJzLnNldENvbnRlbnRUeXBlKCdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCcsIGZhbHNlKTtcbiAgICAgIHJldHVybiBkYXRhLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgbGV0IGlzRmlsZUxpc3Q7XG5cbiAgICBpZiAoaXNPYmplY3RQYXlsb2FkKSB7XG4gICAgICBpZiAoY29udGVudFR5cGUuaW5kZXhPZignYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJykgPiAtMSkge1xuICAgICAgICByZXR1cm4gdG9VUkxFbmNvZGVkRm9ybShkYXRhLCB0aGlzLmZvcm1TZXJpYWxpemVyKS50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICBpZiAoKGlzRmlsZUxpc3QgPSB1dGlscy5pc0ZpbGVMaXN0KGRhdGEpKSB8fCBjb250ZW50VHlwZS5pbmRleE9mKCdtdWx0aXBhcnQvZm9ybS1kYXRhJykgPiAtMSkge1xuICAgICAgICBjb25zdCBfRm9ybURhdGEgPSB0aGlzLmVudiAmJiB0aGlzLmVudi5Gb3JtRGF0YTtcblxuICAgICAgICByZXR1cm4gdG9Gb3JtRGF0YShcbiAgICAgICAgICBpc0ZpbGVMaXN0ID8geydmaWxlc1tdJzogZGF0YX0gOiBkYXRhLFxuICAgICAgICAgIF9Gb3JtRGF0YSAmJiBuZXcgX0Zvcm1EYXRhKCksXG4gICAgICAgICAgdGhpcy5mb3JtU2VyaWFsaXplclxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc09iamVjdFBheWxvYWQgfHwgaGFzSlNPTkNvbnRlbnRUeXBlICkge1xuICAgICAgaGVhZGVycy5zZXRDb250ZW50VHlwZSgnYXBwbGljYXRpb24vanNvbicsIGZhbHNlKTtcbiAgICAgIHJldHVybiBzdHJpbmdpZnlTYWZlbHkoZGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkge1xuICAgIGNvbnN0IHRyYW5zaXRpb25hbCA9IHRoaXMudHJhbnNpdGlvbmFsIHx8IGRlZmF1bHRzLnRyYW5zaXRpb25hbDtcbiAgICBjb25zdCBmb3JjZWRKU09OUGFyc2luZyA9IHRyYW5zaXRpb25hbCAmJiB0cmFuc2l0aW9uYWwuZm9yY2VkSlNPTlBhcnNpbmc7XG4gICAgY29uc3QgSlNPTlJlcXVlc3RlZCA9IHRoaXMucmVzcG9uc2VUeXBlID09PSAnanNvbic7XG5cbiAgICBpZiAodXRpbHMuaXNSZXNwb25zZShkYXRhKSB8fCB1dGlscy5pc1JlYWRhYmxlU3RyZWFtKGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YSAmJiB1dGlscy5pc1N0cmluZyhkYXRhKSAmJiAoKGZvcmNlZEpTT05QYXJzaW5nICYmICF0aGlzLnJlc3BvbnNlVHlwZSkgfHwgSlNPTlJlcXVlc3RlZCkpIHtcbiAgICAgIGNvbnN0IHNpbGVudEpTT05QYXJzaW5nID0gdHJhbnNpdGlvbmFsICYmIHRyYW5zaXRpb25hbC5zaWxlbnRKU09OUGFyc2luZztcbiAgICAgIGNvbnN0IHN0cmljdEpTT05QYXJzaW5nID0gIXNpbGVudEpTT05QYXJzaW5nICYmIEpTT05SZXF1ZXN0ZWQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoc3RyaWN0SlNPTlBhcnNpbmcpIHtcbiAgICAgICAgICBpZiAoZS5uYW1lID09PSAnU3ludGF4RXJyb3InKSB7XG4gICAgICAgICAgICB0aHJvdyBBeGlvc0Vycm9yLmZyb20oZSwgQXhpb3NFcnJvci5FUlJfQkFEX1JFU1BPTlNFLCB0aGlzLCBudWxsLCB0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICAvKipcbiAgICogQSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byBhYm9ydCBhIHJlcXVlc3QuIElmIHNldCB0byAwIChkZWZhdWx0KSBhXG4gICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuXG4gICAqL1xuICB0aW1lb3V0OiAwLFxuXG4gIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG4gIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblxuICBtYXhDb250ZW50TGVuZ3RoOiAtMSxcbiAgbWF4Qm9keUxlbmd0aDogLTEsXG5cbiAgZW52OiB7XG4gICAgRm9ybURhdGE6IHBsYXRmb3JtLmNsYXNzZXMuRm9ybURhdGEsXG4gICAgQmxvYjogcGxhdGZvcm0uY2xhc3Nlcy5CbG9iXG4gIH0sXG5cbiAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cykge1xuICAgIHJldHVybiBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMDtcbiAgfSxcblxuICBoZWFkZXJzOiB7XG4gICAgY29tbW9uOiB7XG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKicsXG4gICAgICAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkXG4gICAgfVxuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIChtZXRob2QpID0+IHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0ge307XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgZGVmYXVsdHM7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5cbi8vIFJhd0F4aW9zSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGVcbi8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnNcbmNvbnN0IGlnbm9yZUR1cGxpY2F0ZU9mID0gdXRpbHMudG9PYmplY3RTZXQoW1xuICAnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLFxuICAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsXG4gICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJyxcbiAgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCdcbl0pO1xuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3RcbiAqXG4gKiBgYGBcbiAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UXG4gKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cbiAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcbiAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcmF3SGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkXG4gKlxuICogQHJldHVybnMge09iamVjdH0gSGVhZGVycyBwYXJzZWQgaW50byBhbiBvYmplY3RcbiAqL1xuZXhwb3J0IGRlZmF1bHQgcmF3SGVhZGVycyA9PiB7XG4gIGNvbnN0IHBhcnNlZCA9IHt9O1xuICBsZXQga2V5O1xuICBsZXQgdmFsO1xuICBsZXQgaTtcblxuICByYXdIZWFkZXJzICYmIHJhd0hlYWRlcnMuc3BsaXQoJ1xcbicpLmZvckVhY2goZnVuY3Rpb24gcGFyc2VyKGxpbmUpIHtcbiAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAga2V5ID0gbGluZS5zdWJzdHJpbmcoMCwgaSkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gbGluZS5zdWJzdHJpbmcoaSArIDEpLnRyaW0oKTtcblxuICAgIGlmICgha2V5IHx8IChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZltrZXldKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykge1xuICAgICAgaWYgKHBhcnNlZFtrZXldKSB7XG4gICAgICAgIHBhcnNlZFtrZXldLnB1c2godmFsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnNlZFtrZXldID0gW3ZhbF07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcGFyc2VkO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgcGFyc2VIZWFkZXJzIGZyb20gJy4uL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzJztcblxuY29uc3QgJGludGVybmFscyA9IFN5bWJvbCgnaW50ZXJuYWxzJyk7XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlcihoZWFkZXIpIHtcbiAgcmV0dXJuIGhlYWRlciAmJiBTdHJpbmcoaGVhZGVyKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHV0aWxzLmlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKG5vcm1hbGl6ZVZhbHVlKSA6IFN0cmluZyh2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVG9rZW5zKHN0cikge1xuICBjb25zdCB0b2tlbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBjb25zdCB0b2tlbnNSRSA9IC8oW15cXHMsOz1dKylcXHMqKD86PVxccyooW14sO10rKSk/L2c7XG4gIGxldCBtYXRjaDtcblxuICB3aGlsZSAoKG1hdGNoID0gdG9rZW5zUkUuZXhlYyhzdHIpKSkge1xuICAgIHRva2Vuc1ttYXRjaFsxXV0gPSBtYXRjaFsyXTtcbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59XG5cbmNvbnN0IGlzVmFsaWRIZWFkZXJOYW1lID0gKHN0cikgPT4gL15bLV9hLXpBLVowLTleYHx+LCEjJCUmJyorLl0rJC8udGVzdChzdHIudHJpbSgpKTtcblxuZnVuY3Rpb24gbWF0Y2hIZWFkZXJWYWx1ZShjb250ZXh0LCB2YWx1ZSwgaGVhZGVyLCBmaWx0ZXIsIGlzSGVhZGVyTmFtZUZpbHRlcikge1xuICBpZiAodXRpbHMuaXNGdW5jdGlvbihmaWx0ZXIpKSB7XG4gICAgcmV0dXJuIGZpbHRlci5jYWxsKHRoaXMsIHZhbHVlLCBoZWFkZXIpO1xuICB9XG5cbiAgaWYgKGlzSGVhZGVyTmFtZUZpbHRlcikge1xuICAgIHZhbHVlID0gaGVhZGVyO1xuICB9XG5cbiAgaWYgKCF1dGlscy5pc1N0cmluZyh2YWx1ZSkpIHJldHVybjtcblxuICBpZiAodXRpbHMuaXNTdHJpbmcoZmlsdGVyKSkge1xuICAgIHJldHVybiB2YWx1ZS5pbmRleE9mKGZpbHRlcikgIT09IC0xO1xuICB9XG5cbiAgaWYgKHV0aWxzLmlzUmVnRXhwKGZpbHRlcikpIHtcbiAgICByZXR1cm4gZmlsdGVyLnRlc3QodmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEhlYWRlcihoZWFkZXIpIHtcbiAgcmV0dXJuIGhlYWRlci50cmltKClcbiAgICAudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8oW2EtelxcZF0pKFxcdyopL2csICh3LCBjaGFyLCBzdHIpID0+IHtcbiAgICAgIHJldHVybiBjaGFyLnRvVXBwZXJDYXNlKCkgKyBzdHI7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkQWNjZXNzb3JzKG9iaiwgaGVhZGVyKSB7XG4gIGNvbnN0IGFjY2Vzc29yTmFtZSA9IHV0aWxzLnRvQ2FtZWxDYXNlKCcgJyArIGhlYWRlcik7XG5cbiAgWydnZXQnLCAnc2V0JywgJ2hhcyddLmZvckVhY2gobWV0aG9kTmFtZSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbWV0aG9kTmFtZSArIGFjY2Vzc29yTmFtZSwge1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uKGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbbWV0aG9kTmFtZV0uY2FsbCh0aGlzLCBoZWFkZXIsIGFyZzEsIGFyZzIsIGFyZzMpO1xuICAgICAgfSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9KTtcbn1cblxuY2xhc3MgQXhpb3NIZWFkZXJzIHtcbiAgY29uc3RydWN0b3IoaGVhZGVycykge1xuICAgIGhlYWRlcnMgJiYgdGhpcy5zZXQoaGVhZGVycyk7XG4gIH1cblxuICBzZXQoaGVhZGVyLCB2YWx1ZU9yUmV3cml0ZSwgcmV3cml0ZSkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgZnVuY3Rpb24gc2V0SGVhZGVyKF92YWx1ZSwgX2hlYWRlciwgX3Jld3JpdGUpIHtcbiAgICAgIGNvbnN0IGxIZWFkZXIgPSBub3JtYWxpemVIZWFkZXIoX2hlYWRlcik7XG5cbiAgICAgIGlmICghbEhlYWRlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2hlYWRlciBuYW1lIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGtleSA9IHV0aWxzLmZpbmRLZXkoc2VsZiwgbEhlYWRlcik7XG5cbiAgICAgIGlmKCFrZXkgfHwgc2VsZltrZXldID09PSB1bmRlZmluZWQgfHwgX3Jld3JpdGUgPT09IHRydWUgfHwgKF9yZXdyaXRlID09PSB1bmRlZmluZWQgJiYgc2VsZltrZXldICE9PSBmYWxzZSkpIHtcbiAgICAgICAgc2VsZltrZXkgfHwgX2hlYWRlcl0gPSBub3JtYWxpemVWYWx1ZShfdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNldEhlYWRlcnMgPSAoaGVhZGVycywgX3Jld3JpdGUpID0+XG4gICAgICB1dGlscy5mb3JFYWNoKGhlYWRlcnMsIChfdmFsdWUsIF9oZWFkZXIpID0+IHNldEhlYWRlcihfdmFsdWUsIF9oZWFkZXIsIF9yZXdyaXRlKSk7XG5cbiAgICBpZiAodXRpbHMuaXNQbGFpbk9iamVjdChoZWFkZXIpIHx8IGhlYWRlciBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3IpIHtcbiAgICAgIHNldEhlYWRlcnMoaGVhZGVyLCB2YWx1ZU9yUmV3cml0ZSlcbiAgICB9IGVsc2UgaWYodXRpbHMuaXNTdHJpbmcoaGVhZGVyKSAmJiAoaGVhZGVyID0gaGVhZGVyLnRyaW0oKSkgJiYgIWlzVmFsaWRIZWFkZXJOYW1lKGhlYWRlcikpIHtcbiAgICAgIHNldEhlYWRlcnMocGFyc2VIZWFkZXJzKGhlYWRlciksIHZhbHVlT3JSZXdyaXRlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KGhlYWRlcikgJiYgdXRpbHMuaXNJdGVyYWJsZShoZWFkZXIpKSB7XG4gICAgICBsZXQgb2JqID0ge30sIGRlc3QsIGtleTtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgaGVhZGVyKSB7XG4gICAgICAgIGlmICghdXRpbHMuaXNBcnJheShlbnRyeSkpIHtcbiAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ09iamVjdCBpdGVyYXRvciBtdXN0IHJldHVybiBhIGtleS12YWx1ZSBwYWlyJyk7XG4gICAgICAgIH1cblxuICAgICAgICBvYmpba2V5ID0gZW50cnlbMF1dID0gKGRlc3QgPSBvYmpba2V5XSkgP1xuICAgICAgICAgICh1dGlscy5pc0FycmF5KGRlc3QpID8gWy4uLmRlc3QsIGVudHJ5WzFdXSA6IFtkZXN0LCBlbnRyeVsxXV0pIDogZW50cnlbMV07XG4gICAgICB9XG5cbiAgICAgIHNldEhlYWRlcnMob2JqLCB2YWx1ZU9yUmV3cml0ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgaGVhZGVyICE9IG51bGwgJiYgc2V0SGVhZGVyKHZhbHVlT3JSZXdyaXRlLCBoZWFkZXIsIHJld3JpdGUpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0KGhlYWRlciwgcGFyc2VyKSB7XG4gICAgaGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKGhlYWRlcik7XG5cbiAgICBpZiAoaGVhZGVyKSB7XG4gICAgICBjb25zdCBrZXkgPSB1dGlscy5maW5kS2V5KHRoaXMsIGhlYWRlcik7XG5cbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzW2tleV07XG5cbiAgICAgICAgaWYgKCFwYXJzZXIpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyc2VyID09PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlVG9rZW5zKHZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlscy5pc0Z1bmN0aW9uKHBhcnNlcikpIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VyLmNhbGwodGhpcywgdmFsdWUsIGtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNSZWdFeHAocGFyc2VyKSkge1xuICAgICAgICAgIHJldHVybiBwYXJzZXIuZXhlYyh2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwYXJzZXIgbXVzdCBiZSBib29sZWFufHJlZ2V4cHxmdW5jdGlvbicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhcyhoZWFkZXIsIG1hdGNoZXIpIHtcbiAgICBoZWFkZXIgPSBub3JtYWxpemVIZWFkZXIoaGVhZGVyKTtcblxuICAgIGlmIChoZWFkZXIpIHtcbiAgICAgIGNvbnN0IGtleSA9IHV0aWxzLmZpbmRLZXkodGhpcywgaGVhZGVyKTtcblxuICAgICAgcmV0dXJuICEhKGtleSAmJiB0aGlzW2tleV0gIT09IHVuZGVmaW5lZCAmJiAoIW1hdGNoZXIgfHwgbWF0Y2hIZWFkZXJWYWx1ZSh0aGlzLCB0aGlzW2tleV0sIGtleSwgbWF0Y2hlcikpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBkZWxldGUoaGVhZGVyLCBtYXRjaGVyKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgbGV0IGRlbGV0ZWQgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUhlYWRlcihfaGVhZGVyKSB7XG4gICAgICBfaGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKF9oZWFkZXIpO1xuXG4gICAgICBpZiAoX2hlYWRlcikge1xuICAgICAgICBjb25zdCBrZXkgPSB1dGlscy5maW5kS2V5KHNlbGYsIF9oZWFkZXIpO1xuXG4gICAgICAgIGlmIChrZXkgJiYgKCFtYXRjaGVyIHx8IG1hdGNoSGVhZGVyVmFsdWUoc2VsZiwgc2VsZltrZXldLCBrZXksIG1hdGNoZXIpKSkge1xuICAgICAgICAgIGRlbGV0ZSBzZWxmW2tleV07XG5cbiAgICAgICAgICBkZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh1dGlscy5pc0FycmF5KGhlYWRlcikpIHtcbiAgICAgIGhlYWRlci5mb3JFYWNoKGRlbGV0ZUhlYWRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZUhlYWRlcihoZWFkZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBkZWxldGVkO1xuICB9XG5cbiAgY2xlYXIobWF0Y2hlcikge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzKTtcbiAgICBsZXQgaSA9IGtleXMubGVuZ3RoO1xuICAgIGxldCBkZWxldGVkID0gZmFsc2U7XG5cbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYoIW1hdGNoZXIgfHwgbWF0Y2hIZWFkZXJWYWx1ZSh0aGlzLCB0aGlzW2tleV0sIGtleSwgbWF0Y2hlciwgdHJ1ZSkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXNba2V5XTtcbiAgICAgICAgZGVsZXRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlbGV0ZWQ7XG4gIH1cblxuICBub3JtYWxpemUoZm9ybWF0KSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgY29uc3QgaGVhZGVycyA9IHt9O1xuXG4gICAgdXRpbHMuZm9yRWFjaCh0aGlzLCAodmFsdWUsIGhlYWRlcikgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gdXRpbHMuZmluZEtleShoZWFkZXJzLCBoZWFkZXIpO1xuXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHNlbGZba2V5XSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgZGVsZXRlIHNlbGZbaGVhZGVyXTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBub3JtYWxpemVkID0gZm9ybWF0ID8gZm9ybWF0SGVhZGVyKGhlYWRlcikgOiBTdHJpbmcoaGVhZGVyKS50cmltKCk7XG5cbiAgICAgIGlmIChub3JtYWxpemVkICE9PSBoZWFkZXIpIHtcbiAgICAgICAgZGVsZXRlIHNlbGZbaGVhZGVyXTtcbiAgICAgIH1cblxuICAgICAgc2VsZltub3JtYWxpemVkXSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcblxuICAgICAgaGVhZGVyc1tub3JtYWxpemVkXSA9IHRydWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGNvbmNhdCguLi50YXJnZXRzKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuY29uY2F0KHRoaXMsIC4uLnRhcmdldHMpO1xuICB9XG5cbiAgdG9KU09OKGFzU3RyaW5ncykge1xuICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICB1dGlscy5mb3JFYWNoKHRoaXMsICh2YWx1ZSwgaGVhZGVyKSA9PiB7XG4gICAgICB2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBmYWxzZSAmJiAob2JqW2hlYWRlcl0gPSBhc1N0cmluZ3MgJiYgdXRpbHMuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5qb2luKCcsICcpIDogdmFsdWUpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyh0aGlzLnRvSlNPTigpKVtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy50b0pTT04oKSkubWFwKChbaGVhZGVyLCB2YWx1ZV0pID0+IGhlYWRlciArICc6ICcgKyB2YWx1ZSkuam9pbignXFxuJyk7XG4gIH1cblxuICBnZXRTZXRDb29raWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KFwic2V0LWNvb2tpZVwiKSB8fCBbXTtcbiAgfVxuXG4gIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcbiAgICByZXR1cm4gJ0F4aW9zSGVhZGVycyc7XG4gIH1cblxuICBzdGF0aWMgZnJvbSh0aGluZykge1xuICAgIHJldHVybiB0aGluZyBpbnN0YW5jZW9mIHRoaXMgPyB0aGluZyA6IG5ldyB0aGlzKHRoaW5nKTtcbiAgfVxuXG4gIHN0YXRpYyBjb25jYXQoZmlyc3QsIC4uLnRhcmdldHMpIHtcbiAgICBjb25zdCBjb21wdXRlZCA9IG5ldyB0aGlzKGZpcnN0KTtcblxuICAgIHRhcmdldHMuZm9yRWFjaCgodGFyZ2V0KSA9PiBjb21wdXRlZC5zZXQodGFyZ2V0KSk7XG5cbiAgICByZXR1cm4gY29tcHV0ZWQ7XG4gIH1cblxuICBzdGF0aWMgYWNjZXNzb3IoaGVhZGVyKSB7XG4gICAgY29uc3QgaW50ZXJuYWxzID0gdGhpc1skaW50ZXJuYWxzXSA9ICh0aGlzWyRpbnRlcm5hbHNdID0ge1xuICAgICAgYWNjZXNzb3JzOiB7fVxuICAgIH0pO1xuXG4gICAgY29uc3QgYWNjZXNzb3JzID0gaW50ZXJuYWxzLmFjY2Vzc29ycztcbiAgICBjb25zdCBwcm90b3R5cGUgPSB0aGlzLnByb3RvdHlwZTtcblxuICAgIGZ1bmN0aW9uIGRlZmluZUFjY2Vzc29yKF9oZWFkZXIpIHtcbiAgICAgIGNvbnN0IGxIZWFkZXIgPSBub3JtYWxpemVIZWFkZXIoX2hlYWRlcik7XG5cbiAgICAgIGlmICghYWNjZXNzb3JzW2xIZWFkZXJdKSB7XG4gICAgICAgIGJ1aWxkQWNjZXNzb3JzKHByb3RvdHlwZSwgX2hlYWRlcik7XG4gICAgICAgIGFjY2Vzc29yc1tsSGVhZGVyXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdXRpbHMuaXNBcnJheShoZWFkZXIpID8gaGVhZGVyLmZvckVhY2goZGVmaW5lQWNjZXNzb3IpIDogZGVmaW5lQWNjZXNzb3IoaGVhZGVyKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbkF4aW9zSGVhZGVycy5hY2Nlc3NvcihbJ0NvbnRlbnQtVHlwZScsICdDb250ZW50LUxlbmd0aCcsICdBY2NlcHQnLCAnQWNjZXB0LUVuY29kaW5nJywgJ1VzZXItQWdlbnQnLCAnQXV0aG9yaXphdGlvbiddKTtcblxuLy8gcmVzZXJ2ZWQgbmFtZXMgaG90Zml4XG51dGlscy5yZWR1Y2VEZXNjcmlwdG9ycyhBeGlvc0hlYWRlcnMucHJvdG90eXBlLCAoe3ZhbHVlfSwga2V5KSA9PiB7XG4gIGxldCBtYXBwZWQgPSBrZXlbMF0udG9VcHBlckNhc2UoKSArIGtleS5zbGljZSgxKTsgLy8gbWFwIGBzZXRgID0+IGBTZXRgXG4gIHJldHVybiB7XG4gICAgZ2V0OiAoKSA9PiB2YWx1ZSxcbiAgICBzZXQoaGVhZGVyVmFsdWUpIHtcbiAgICAgIHRoaXNbbWFwcGVkXSA9IGhlYWRlclZhbHVlO1xuICAgIH1cbiAgfVxufSk7XG5cbnV0aWxzLmZyZWV6ZU1ldGhvZHMoQXhpb3NIZWFkZXJzKTtcblxuZXhwb3J0IGRlZmF1bHQgQXhpb3NIZWFkZXJzO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vLi4vdXRpbHMuanMnO1xuaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4uL2RlZmF1bHRzL2luZGV4LmpzJztcbmltcG9ydCBBeGlvc0hlYWRlcnMgZnJvbSAnLi4vY29yZS9BeGlvc0hlYWRlcnMuanMnO1xuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zXG4gKiBAcGFyYW0gez9PYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZSBvYmplY3RcbiAqXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZm5zLCByZXNwb25zZSkge1xuICBjb25zdCBjb25maWcgPSB0aGlzIHx8IGRlZmF1bHRzO1xuICBjb25zdCBjb250ZXh0ID0gcmVzcG9uc2UgfHwgY29uZmlnO1xuICBjb25zdCBoZWFkZXJzID0gQXhpb3NIZWFkZXJzLmZyb20oY29udGV4dC5oZWFkZXJzKTtcbiAgbGV0IGRhdGEgPSBjb250ZXh0LmRhdGE7XG5cbiAgdXRpbHMuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikge1xuICAgIGRhdGEgPSBmbi5jYWxsKGNvbmZpZywgZGF0YSwgaGVhZGVycy5ub3JtYWxpemUoKSwgcmVzcG9uc2UgPyByZXNwb25zZS5zdGF0dXMgOiB1bmRlZmluZWQpO1xuICB9KTtcblxuICBoZWFkZXJzLm5vcm1hbGl6ZSgpO1xuXG4gIHJldHVybiBkYXRhO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlLl9fQ0FOQ0VMX18pO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5cbi8qKlxuICogQSBgQ2FuY2VsZWRFcnJvcmAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge09iamVjdD19IHJlcXVlc3QgVGhlIHJlcXVlc3QuXG4gKlxuICogQHJldHVybnMge0NhbmNlbGVkRXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5mdW5jdGlvbiBDYW5jZWxlZEVycm9yKG1lc3NhZ2UsIGNvbmZpZywgcmVxdWVzdCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXEtbnVsbCxlcWVxZXFcbiAgQXhpb3NFcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UgPT0gbnVsbCA/ICdjYW5jZWxlZCcgOiBtZXNzYWdlLCBBeGlvc0Vycm9yLkVSUl9DQU5DRUxFRCwgY29uZmlnLCByZXF1ZXN0KTtcbiAgdGhpcy5uYW1lID0gJ0NhbmNlbGVkRXJyb3InO1xufVxuXG51dGlscy5pbmhlcml0cyhDYW5jZWxlZEVycm9yLCBBeGlvc0Vycm9yLCB7XG4gIF9fQ0FOQ0VMX186IHRydWVcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDYW5jZWxlZEVycm9yO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi9BeGlvc0Vycm9yLmpzJztcblxuLyoqXG4gKiBSZXNvbHZlIG9yIHJlamVjdCBhIFByb21pc2UgYmFzZWQgb24gcmVzcG9uc2Ugc3RhdHVzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmUgQSBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IEEgZnVuY3Rpb24gdGhhdCByZWplY3RzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS5cbiAqXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBUaGUgcmVzcG9uc2UuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7XG4gIGNvbnN0IHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzO1xuICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCAhdmFsaWRhdGVTdGF0dXMgfHwgdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICB9IGVsc2Uge1xuICAgIHJlamVjdChuZXcgQXhpb3NFcnJvcihcbiAgICAgICdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsXG4gICAgICBbQXhpb3NFcnJvci5FUlJfQkFEX1JFUVVFU1QsIEF4aW9zRXJyb3IuRVJSX0JBRF9SRVNQT05TRV1bTWF0aC5mbG9vcihyZXNwb25zZS5zdGF0dXMgLyAxMDApIC0gNF0sXG4gICAgICByZXNwb25zZS5jb25maWcsXG4gICAgICByZXNwb25zZS5yZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VcbiAgICApKTtcbiAgfVxufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VQcm90b2NvbCh1cmwpIHtcbiAgY29uc3QgbWF0Y2ggPSAvXihbLStcXHddezEsMjV9KSg6P1xcL1xcL3w6KS8uZXhlYyh1cmwpO1xuICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2hbMV0gfHwgJyc7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENhbGN1bGF0ZSBkYXRhIG1heFJhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2FtcGxlc0NvdW50PSAxMF1cbiAqIEBwYXJhbSB7TnVtYmVyfSBbbWluPSAxMDAwXVxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBzcGVlZG9tZXRlcihzYW1wbGVzQ291bnQsIG1pbikge1xuICBzYW1wbGVzQ291bnQgPSBzYW1wbGVzQ291bnQgfHwgMTA7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IEFycmF5KHNhbXBsZXNDb3VudCk7XG4gIGNvbnN0IHRpbWVzdGFtcHMgPSBuZXcgQXJyYXkoc2FtcGxlc0NvdW50KTtcbiAgbGV0IGhlYWQgPSAwO1xuICBsZXQgdGFpbCA9IDA7XG4gIGxldCBmaXJzdFNhbXBsZVRTO1xuXG4gIG1pbiA9IG1pbiAhPT0gdW5kZWZpbmVkID8gbWluIDogMTAwMDtcblxuICByZXR1cm4gZnVuY3Rpb24gcHVzaChjaHVua0xlbmd0aCkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBjb25zdCBzdGFydGVkQXQgPSB0aW1lc3RhbXBzW3RhaWxdO1xuXG4gICAgaWYgKCFmaXJzdFNhbXBsZVRTKSB7XG4gICAgICBmaXJzdFNhbXBsZVRTID0gbm93O1xuICAgIH1cblxuICAgIGJ5dGVzW2hlYWRdID0gY2h1bmtMZW5ndGg7XG4gICAgdGltZXN0YW1wc1toZWFkXSA9IG5vdztcblxuICAgIGxldCBpID0gdGFpbDtcbiAgICBsZXQgYnl0ZXNDb3VudCA9IDA7XG5cbiAgICB3aGlsZSAoaSAhPT0gaGVhZCkge1xuICAgICAgYnl0ZXNDb3VudCArPSBieXRlc1tpKytdO1xuICAgICAgaSA9IGkgJSBzYW1wbGVzQ291bnQ7XG4gICAgfVxuXG4gICAgaGVhZCA9IChoZWFkICsgMSkgJSBzYW1wbGVzQ291bnQ7XG5cbiAgICBpZiAoaGVhZCA9PT0gdGFpbCkge1xuICAgICAgdGFpbCA9ICh0YWlsICsgMSkgJSBzYW1wbGVzQ291bnQ7XG4gICAgfVxuXG4gICAgaWYgKG5vdyAtIGZpcnN0U2FtcGxlVFMgPCBtaW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwYXNzZWQgPSBzdGFydGVkQXQgJiYgbm93IC0gc3RhcnRlZEF0O1xuXG4gICAgcmV0dXJuIHBhc3NlZCA/IE1hdGgucm91bmQoYnl0ZXNDb3VudCAqIDEwMDAgLyBwYXNzZWQpIDogdW5kZWZpbmVkO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBzcGVlZG9tZXRlcjtcbiIsICIvKipcbiAqIFRocm90dGxlIGRlY29yYXRvclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7TnVtYmVyfSBmcmVxXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gdGhyb3R0bGUoZm4sIGZyZXEpIHtcbiAgbGV0IHRpbWVzdGFtcCA9IDA7XG4gIGxldCB0aHJlc2hvbGQgPSAxMDAwIC8gZnJlcTtcbiAgbGV0IGxhc3RBcmdzO1xuICBsZXQgdGltZXI7XG5cbiAgY29uc3QgaW52b2tlID0gKGFyZ3MsIG5vdyA9IERhdGUubm93KCkpID0+IHtcbiAgICB0aW1lc3RhbXAgPSBub3c7XG4gICAgbGFzdEFyZ3MgPSBudWxsO1xuICAgIGlmICh0aW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gIH1cblxuICBjb25zdCB0aHJvdHRsZWQgPSAoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgcGFzc2VkID0gbm93IC0gdGltZXN0YW1wO1xuICAgIGlmICggcGFzc2VkID49IHRocmVzaG9sZCkge1xuICAgICAgaW52b2tlKGFyZ3MsIG5vdyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxhc3RBcmdzID0gYXJncztcbiAgICAgIGlmICghdGltZXIpIHtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aW1lciA9IG51bGw7XG4gICAgICAgICAgaW52b2tlKGxhc3RBcmdzKVxuICAgICAgICB9LCB0aHJlc2hvbGQgLSBwYXNzZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGZsdXNoID0gKCkgPT4gbGFzdEFyZ3MgJiYgaW52b2tlKGxhc3RBcmdzKTtcblxuICByZXR1cm4gW3Rocm90dGxlZCwgZmx1c2hdO1xufVxuXG5leHBvcnQgZGVmYXVsdCB0aHJvdHRsZTtcbiIsICJpbXBvcnQgc3BlZWRvbWV0ZXIgZnJvbSBcIi4vc3BlZWRvbWV0ZXIuanNcIjtcbmltcG9ydCB0aHJvdHRsZSBmcm9tIFwiLi90aHJvdHRsZS5qc1wiO1xuaW1wb3J0IHV0aWxzIGZyb20gXCIuLi91dGlscy5qc1wiO1xuXG5leHBvcnQgY29uc3QgcHJvZ3Jlc3NFdmVudFJlZHVjZXIgPSAobGlzdGVuZXIsIGlzRG93bmxvYWRTdHJlYW0sIGZyZXEgPSAzKSA9PiB7XG4gIGxldCBieXRlc05vdGlmaWVkID0gMDtcbiAgY29uc3QgX3NwZWVkb21ldGVyID0gc3BlZWRvbWV0ZXIoNTAsIDI1MCk7XG5cbiAgcmV0dXJuIHRocm90dGxlKGUgPT4ge1xuICAgIGNvbnN0IGxvYWRlZCA9IGUubG9hZGVkO1xuICAgIGNvbnN0IHRvdGFsID0gZS5sZW5ndGhDb21wdXRhYmxlID8gZS50b3RhbCA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBwcm9ncmVzc0J5dGVzID0gbG9hZGVkIC0gYnl0ZXNOb3RpZmllZDtcbiAgICBjb25zdCByYXRlID0gX3NwZWVkb21ldGVyKHByb2dyZXNzQnl0ZXMpO1xuICAgIGNvbnN0IGluUmFuZ2UgPSBsb2FkZWQgPD0gdG90YWw7XG5cbiAgICBieXRlc05vdGlmaWVkID0gbG9hZGVkO1xuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGxvYWRlZCxcbiAgICAgIHRvdGFsLFxuICAgICAgcHJvZ3Jlc3M6IHRvdGFsID8gKGxvYWRlZCAvIHRvdGFsKSA6IHVuZGVmaW5lZCxcbiAgICAgIGJ5dGVzOiBwcm9ncmVzc0J5dGVzLFxuICAgICAgcmF0ZTogcmF0ZSA/IHJhdGUgOiB1bmRlZmluZWQsXG4gICAgICBlc3RpbWF0ZWQ6IHJhdGUgJiYgdG90YWwgJiYgaW5SYW5nZSA/ICh0b3RhbCAtIGxvYWRlZCkgLyByYXRlIDogdW5kZWZpbmVkLFxuICAgICAgZXZlbnQ6IGUsXG4gICAgICBsZW5ndGhDb21wdXRhYmxlOiB0b3RhbCAhPSBudWxsLFxuICAgICAgW2lzRG93bmxvYWRTdHJlYW0gPyAnZG93bmxvYWQnIDogJ3VwbG9hZCddOiB0cnVlXG4gICAgfTtcblxuICAgIGxpc3RlbmVyKGRhdGEpO1xuICB9LCBmcmVxKTtcbn1cblxuZXhwb3J0IGNvbnN0IHByb2dyZXNzRXZlbnREZWNvcmF0b3IgPSAodG90YWwsIHRocm90dGxlZCkgPT4ge1xuICBjb25zdCBsZW5ndGhDb21wdXRhYmxlID0gdG90YWwgIT0gbnVsbDtcblxuICByZXR1cm4gWyhsb2FkZWQpID0+IHRocm90dGxlZFswXSh7XG4gICAgbGVuZ3RoQ29tcHV0YWJsZSxcbiAgICB0b3RhbCxcbiAgICBsb2FkZWRcbiAgfSksIHRocm90dGxlZFsxXV07XG59XG5cbmV4cG9ydCBjb25zdCBhc3luY0RlY29yYXRvciA9IChmbikgPT4gKC4uLmFyZ3MpID0+IHV0aWxzLmFzYXAoKCkgPT4gZm4oLi4uYXJncykpO1xuIiwgImltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXRmb3JtLmhhc1N0YW5kYXJkQnJvd3NlckVudiA/ICgob3JpZ2luLCBpc01TSUUpID0+ICh1cmwpID0+IHtcbiAgdXJsID0gbmV3IFVSTCh1cmwsIHBsYXRmb3JtLm9yaWdpbik7XG5cbiAgcmV0dXJuIChcbiAgICBvcmlnaW4ucHJvdG9jb2wgPT09IHVybC5wcm90b2NvbCAmJlxuICAgIG9yaWdpbi5ob3N0ID09PSB1cmwuaG9zdCAmJlxuICAgIChpc01TSUUgfHwgb3JpZ2luLnBvcnQgPT09IHVybC5wb3J0KVxuICApO1xufSkoXG4gIG5ldyBVUkwocGxhdGZvcm0ub3JpZ2luKSxcbiAgcGxhdGZvcm0ubmF2aWdhdG9yICYmIC8obXNpZXx0cmlkZW50KS9pLnRlc3QocGxhdGZvcm0ubmF2aWdhdG9yLnVzZXJBZ2VudClcbikgOiAoKSA9PiB0cnVlO1xuIiwgImltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXRmb3JtLmhhc1N0YW5kYXJkQnJvd3NlckVudiA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llXG4gIHtcbiAgICB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHtcbiAgICAgIGNvbnN0IGNvb2tpZSA9IFtuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKV07XG5cbiAgICAgIHV0aWxzLmlzTnVtYmVyKGV4cGlyZXMpICYmIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcblxuICAgICAgdXRpbHMuaXNTdHJpbmcocGF0aCkgJiYgY29va2llLnB1c2goJ3BhdGg9JyArIHBhdGgpO1xuXG4gICAgICB1dGlscy5pc1N0cmluZyhkb21haW4pICYmIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG5cbiAgICAgIHNlY3VyZSA9PT0gdHJ1ZSAmJiBjb29raWUucHVzaCgnc2VjdXJlJyk7XG5cbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpO1xuICAgIH0sXG5cbiAgICByZWFkKG5hbWUpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgIHJldHVybiAobWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbM10pIDogbnVsbCk7XG4gICAgfSxcblxuICAgIHJlbW92ZShuYW1lKSB7XG4gICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApO1xuICAgIH1cbiAgfVxuXG4gIDpcblxuICAvLyBOb24tc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gIHtcbiAgICB3cml0ZSgpIHt9LFxuICAgIHJlYWQoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHJlbW92ZSgpIHt9XG4gIH07XG5cbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG4gIC8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggXCI8c2NoZW1lPjovL1wiIG9yIFwiLy9cIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS5cbiAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkXG4gIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuICByZXR1cm4gL14oW2Etel1bYS16XFxkK1xcLS5dKjopP1xcL1xcLy9pLnRlc3QodXJsKTtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkxcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gIHJldHVybiByZWxhdGl2ZVVSTFxuICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8/XFwvJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgOiBiYXNlVVJMO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IGlzQWJzb2x1dGVVUkwgZnJvbSAnLi4vaGVscGVycy9pc0Fic29sdXRlVVJMLmpzJztcbmltcG9ydCBjb21iaW5lVVJMcyBmcm9tICcuLi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIGJhc2VVUkwgd2l0aCB0aGUgcmVxdWVzdGVkVVJMLFxuICogb25seSB3aGVuIHRoZSByZXF1ZXN0ZWRVUkwgaXMgbm90IGFscmVhZHkgYW4gYWJzb2x1dGUgVVJMLlxuICogSWYgdGhlIHJlcXVlc3RVUkwgaXMgYWJzb2x1dGUsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgcmVxdWVzdGVkVVJMIHVudG91Y2hlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0ZWRVUkwgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIHRvIGNvbWJpbmVcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgZnVsbCBwYXRoXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJ1aWxkRnVsbFBhdGgoYmFzZVVSTCwgcmVxdWVzdGVkVVJMLCBhbGxvd0Fic29sdXRlVXJscykge1xuICBsZXQgaXNSZWxhdGl2ZVVybCA9ICFpc0Fic29sdXRlVVJMKHJlcXVlc3RlZFVSTCk7XG4gIGlmIChiYXNlVVJMICYmIChpc1JlbGF0aXZlVXJsIHx8IGFsbG93QWJzb2x1dGVVcmxzID09IGZhbHNlKSkge1xuICAgIHJldHVybiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpO1xuICB9XG4gIHJldHVybiByZXF1ZXN0ZWRVUkw7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tIFwiLi9BeGlvc0hlYWRlcnMuanNcIjtcblxuY29uc3QgaGVhZGVyc1RvT2JqZWN0ID0gKHRoaW5nKSA9PiB0aGluZyBpbnN0YW5jZW9mIEF4aW9zSGVhZGVycyA/IHsgLi4udGhpbmcgfSA6IHRoaW5nO1xuXG4vKipcbiAqIENvbmZpZy1zcGVjaWZpYyBtZXJnZS1mdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgbmV3IGNvbmZpZy1vYmplY3RcbiAqIGJ5IG1lcmdpbmcgdHdvIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMVxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzJcbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBOZXcgb2JqZWN0IHJlc3VsdGluZyBmcm9tIG1lcmdpbmcgY29uZmlnMiB0byBjb25maWcxXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lcmdlQ29uZmlnKGNvbmZpZzEsIGNvbmZpZzIpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIGNvbmZpZzIgPSBjb25maWcyIHx8IHt9O1xuICBjb25zdCBjb25maWcgPSB7fTtcblxuICBmdW5jdGlvbiBnZXRNZXJnZWRWYWx1ZSh0YXJnZXQsIHNvdXJjZSwgcHJvcCwgY2FzZWxlc3MpIHtcbiAgICBpZiAodXRpbHMuaXNQbGFpbk9iamVjdCh0YXJnZXQpICYmIHV0aWxzLmlzUGxhaW5PYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHV0aWxzLm1lcmdlLmNhbGwoe2Nhc2VsZXNzfSwgdGFyZ2V0LCBzb3VyY2UpO1xuICAgIH0gZWxzZSBpZiAodXRpbHMuaXNQbGFpbk9iamVjdChzb3VyY2UpKSB7XG4gICAgICByZXR1cm4gdXRpbHMubWVyZ2Uoe30sIHNvdXJjZSk7XG4gICAgfSBlbHNlIGlmICh1dGlscy5pc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiBzb3VyY2Uuc2xpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHNvdXJjZTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiBtZXJnZURlZXBQcm9wZXJ0aWVzKGEsIGIsIHByb3AgLCBjYXNlbGVzcykge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoYikpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShhLCBiLCBwcm9wICwgY2FzZWxlc3MpO1xuICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGEpKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBhLCBwcm9wICwgY2FzZWxlc3MpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiB2YWx1ZUZyb21Db25maWcyKGEsIGIpIHtcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGIpKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBiKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gZGVmYXVsdFRvQ29uZmlnMihhLCBiKSB7XG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChiKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgYik7XG4gICAgfSBlbHNlIGlmICghdXRpbHMuaXNVbmRlZmluZWQoYSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGEpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiBtZXJnZURpcmVjdEtleXMoYSwgYiwgcHJvcCkge1xuICAgIGlmIChwcm9wIGluIGNvbmZpZzIpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShhLCBiKTtcbiAgICB9IGVsc2UgaWYgKHByb3AgaW4gY29uZmlnMSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgYSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgbWVyZ2VNYXAgPSB7XG4gICAgdXJsOiB2YWx1ZUZyb21Db25maWcyLFxuICAgIG1ldGhvZDogdmFsdWVGcm9tQ29uZmlnMixcbiAgICBkYXRhOiB2YWx1ZUZyb21Db25maWcyLFxuICAgIGJhc2VVUkw6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdHJhbnNmb3JtUmVxdWVzdDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB0cmFuc2Zvcm1SZXNwb25zZTogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBwYXJhbXNTZXJpYWxpemVyOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHRpbWVvdXQ6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdGltZW91dE1lc3NhZ2U6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgd2l0aENyZWRlbnRpYWxzOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHdpdGhYU1JGVG9rZW46IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgYWRhcHRlcjogZGVmYXVsdFRvQ29uZmlnMixcbiAgICByZXNwb25zZVR5cGU6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgeHNyZkNvb2tpZU5hbWU6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgeHNyZkhlYWRlck5hbWU6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgb25VcGxvYWRQcm9ncmVzczogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBvbkRvd25sb2FkUHJvZ3Jlc3M6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgZGVjb21wcmVzczogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBtYXhDb250ZW50TGVuZ3RoOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIG1heEJvZHlMZW5ndGg6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgYmVmb3JlUmVkaXJlY3Q6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdHJhbnNwb3J0OiBkZWZhdWx0VG9Db25maWcyLFxuICAgIGh0dHBBZ2VudDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBodHRwc0FnZW50OiBkZWZhdWx0VG9Db25maWcyLFxuICAgIGNhbmNlbFRva2VuOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHNvY2tldFBhdGg6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgcmVzcG9uc2VFbmNvZGluZzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB2YWxpZGF0ZVN0YXR1czogbWVyZ2VEaXJlY3RLZXlzLFxuICAgIGhlYWRlcnM6IChhLCBiICwgcHJvcCkgPT4gbWVyZ2VEZWVwUHJvcGVydGllcyhoZWFkZXJzVG9PYmplY3QoYSksIGhlYWRlcnNUb09iamVjdChiKSxwcm9wLCB0cnVlKVxuICB9O1xuXG4gIHV0aWxzLmZvckVhY2goT2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnMSwgY29uZmlnMikpLCBmdW5jdGlvbiBjb21wdXRlQ29uZmlnVmFsdWUocHJvcCkge1xuICAgIGNvbnN0IG1lcmdlID0gbWVyZ2VNYXBbcHJvcF0gfHwgbWVyZ2VEZWVwUHJvcGVydGllcztcbiAgICBjb25zdCBjb25maWdWYWx1ZSA9IG1lcmdlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0sIHByb3ApO1xuICAgICh1dGlscy5pc1VuZGVmaW5lZChjb25maWdWYWx1ZSkgJiYgbWVyZ2UgIT09IG1lcmdlRGlyZWN0S2V5cykgfHwgKGNvbmZpZ1twcm9wXSA9IGNvbmZpZ1ZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn1cbiIsICJpbXBvcnQgcGxhdGZvcm0gZnJvbSBcIi4uL3BsYXRmb3JtL2luZGV4LmpzXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgaXNVUkxTYW1lT3JpZ2luIGZyb20gXCIuL2lzVVJMU2FtZU9yaWdpbi5qc1wiO1xuaW1wb3J0IGNvb2tpZXMgZnJvbSBcIi4vY29va2llcy5qc1wiO1xuaW1wb3J0IGJ1aWxkRnVsbFBhdGggZnJvbSBcIi4uL2NvcmUvYnVpbGRGdWxsUGF0aC5qc1wiO1xuaW1wb3J0IG1lcmdlQ29uZmlnIGZyb20gXCIuLi9jb3JlL21lcmdlQ29uZmlnLmpzXCI7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gXCIuLi9jb3JlL0F4aW9zSGVhZGVycy5qc1wiO1xuaW1wb3J0IGJ1aWxkVVJMIGZyb20gXCIuL2J1aWxkVVJMLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IChjb25maWcpID0+IHtcbiAgY29uc3QgbmV3Q29uZmlnID0gbWVyZ2VDb25maWcoe30sIGNvbmZpZyk7XG5cbiAgbGV0IHtkYXRhLCB3aXRoWFNSRlRva2VuLCB4c3JmSGVhZGVyTmFtZSwgeHNyZkNvb2tpZU5hbWUsIGhlYWRlcnMsIGF1dGh9ID0gbmV3Q29uZmlnO1xuXG4gIG5ld0NvbmZpZy5oZWFkZXJzID0gaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKGhlYWRlcnMpO1xuXG4gIG5ld0NvbmZpZy51cmwgPSBidWlsZFVSTChidWlsZEZ1bGxQYXRoKG5ld0NvbmZpZy5iYXNlVVJMLCBuZXdDb25maWcudXJsLCBuZXdDb25maWcuYWxsb3dBYnNvbHV0ZVVybHMpLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplcik7XG5cbiAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICBpZiAoYXV0aCkge1xuICAgIGhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgJ0Jhc2ljICcgK1xuICAgICAgYnRvYSgoYXV0aC51c2VybmFtZSB8fCAnJykgKyAnOicgKyAoYXV0aC5wYXNzd29yZCA/IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhdXRoLnBhc3N3b3JkKSkgOiAnJykpXG4gICAgKTtcbiAgfVxuXG4gIGxldCBjb250ZW50VHlwZTtcblxuICBpZiAodXRpbHMuaXNGb3JtRGF0YShkYXRhKSkge1xuICAgIGlmIChwbGF0Zm9ybS5oYXNTdGFuZGFyZEJyb3dzZXJFbnYgfHwgcGxhdGZvcm0uaGFzU3RhbmRhcmRCcm93c2VyV2ViV29ya2VyRW52KSB7XG4gICAgICBoZWFkZXJzLnNldENvbnRlbnRUeXBlKHVuZGVmaW5lZCk7IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9IGVsc2UgaWYgKChjb250ZW50VHlwZSA9IGhlYWRlcnMuZ2V0Q29udGVudFR5cGUoKSkgIT09IGZhbHNlKSB7XG4gICAgICAvLyBmaXggc2VtaWNvbG9uIGR1cGxpY2F0aW9uIGlzc3VlIGZvciBSZWFjdE5hdGl2ZSBGb3JtRGF0YSBpbXBsZW1lbnRhdGlvblxuICAgICAgY29uc3QgW3R5cGUsIC4uLnRva2Vuc10gPSBjb250ZW50VHlwZSA/IGNvbnRlbnRUeXBlLnNwbGl0KCc7JykubWFwKHRva2VuID0+IHRva2VuLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pIDogW107XG4gICAgICBoZWFkZXJzLnNldENvbnRlbnRUeXBlKFt0eXBlIHx8ICdtdWx0aXBhcnQvZm9ybS1kYXRhJywgLi4udG9rZW5zXS5qb2luKCc7ICcpKTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gIC8vIFNwZWNpZmljYWxseSBub3QgaWYgd2UncmUgaW4gYSB3ZWIgd29ya2VyLCBvciByZWFjdC1uYXRpdmUuXG5cbiAgaWYgKHBsYXRmb3JtLmhhc1N0YW5kYXJkQnJvd3NlckVudikge1xuICAgIHdpdGhYU1JGVG9rZW4gJiYgdXRpbHMuaXNGdW5jdGlvbih3aXRoWFNSRlRva2VuKSAmJiAod2l0aFhTUkZUb2tlbiA9IHdpdGhYU1JGVG9rZW4obmV3Q29uZmlnKSk7XG5cbiAgICBpZiAod2l0aFhTUkZUb2tlbiB8fCAod2l0aFhTUkZUb2tlbiAhPT0gZmFsc2UgJiYgaXNVUkxTYW1lT3JpZ2luKG5ld0NvbmZpZy51cmwpKSkge1xuICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgICBjb25zdCB4c3JmVmFsdWUgPSB4c3JmSGVhZGVyTmFtZSAmJiB4c3JmQ29va2llTmFtZSAmJiBjb29raWVzLnJlYWQoeHNyZkNvb2tpZU5hbWUpO1xuXG4gICAgICBpZiAoeHNyZlZhbHVlKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KHhzcmZIZWFkZXJOYW1lLCB4c3JmVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdDb25maWc7XG59XG5cbiIsICJpbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5pbXBvcnQgc2V0dGxlIGZyb20gJy4vLi4vY29yZS9zZXR0bGUuanMnO1xuaW1wb3J0IHRyYW5zaXRpb25hbERlZmF1bHRzIGZyb20gJy4uL2RlZmF1bHRzL3RyYW5zaXRpb25hbC5qcyc7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tICcuLi9jb3JlL0F4aW9zRXJyb3IuanMnO1xuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IHBhcnNlUHJvdG9jb2wgZnJvbSAnLi4vaGVscGVycy9wYXJzZVByb3RvY29sLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gJy4uL2NvcmUvQXhpb3NIZWFkZXJzLmpzJztcbmltcG9ydCB7cHJvZ3Jlc3NFdmVudFJlZHVjZXJ9IGZyb20gJy4uL2hlbHBlcnMvcHJvZ3Jlc3NFdmVudFJlZHVjZXIuanMnO1xuaW1wb3J0IHJlc29sdmVDb25maWcgZnJvbSBcIi4uL2hlbHBlcnMvcmVzb2x2ZUNvbmZpZy5qc1wiO1xuXG5jb25zdCBpc1hIUkFkYXB0ZXJTdXBwb3J0ZWQgPSB0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnO1xuXG5leHBvcnQgZGVmYXVsdCBpc1hIUkFkYXB0ZXJTdXBwb3J0ZWQgJiYgZnVuY3Rpb24gKGNvbmZpZykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZGlzcGF0Y2hYaHJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xuICAgIGNvbnN0IF9jb25maWcgPSByZXNvbHZlQ29uZmlnKGNvbmZpZyk7XG4gICAgbGV0IHJlcXVlc3REYXRhID0gX2NvbmZpZy5kYXRhO1xuICAgIGNvbnN0IHJlcXVlc3RIZWFkZXJzID0gQXhpb3NIZWFkZXJzLmZyb20oX2NvbmZpZy5oZWFkZXJzKS5ub3JtYWxpemUoKTtcbiAgICBsZXQge3Jlc3BvbnNlVHlwZSwgb25VcGxvYWRQcm9ncmVzcywgb25Eb3dubG9hZFByb2dyZXNzfSA9IF9jb25maWc7XG4gICAgbGV0IG9uQ2FuY2VsZWQ7XG4gICAgbGV0IHVwbG9hZFRocm90dGxlZCwgZG93bmxvYWRUaHJvdHRsZWQ7XG4gICAgbGV0IGZsdXNoVXBsb2FkLCBmbHVzaERvd25sb2FkO1xuXG4gICAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICAgIGZsdXNoVXBsb2FkICYmIGZsdXNoVXBsb2FkKCk7IC8vIGZsdXNoIGV2ZW50c1xuICAgICAgZmx1c2hEb3dubG9hZCAmJiBmbHVzaERvd25sb2FkKCk7IC8vIGZsdXNoIGV2ZW50c1xuXG4gICAgICBfY29uZmlnLmNhbmNlbFRva2VuICYmIF9jb25maWcuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUob25DYW5jZWxlZCk7XG5cbiAgICAgIF9jb25maWcuc2lnbmFsICYmIF9jb25maWcuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7XG4gICAgfVxuXG4gICAgbGV0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIHJlcXVlc3Qub3BlbihfY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBfY29uZmlnLnVybCwgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xuICAgIHJlcXVlc3QudGltZW91dCA9IF9jb25maWcudGltZW91dDtcblxuICAgIGZ1bmN0aW9uIG9ubG9hZGVuZCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgY29uc3QgcmVzcG9uc2VIZWFkZXJzID0gQXhpb3NIZWFkZXJzLmZyb20oXG4gICAgICAgICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgJiYgcmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9ICFyZXNwb25zZVR5cGUgfHwgcmVzcG9uc2VUeXBlID09PSAndGV4dCcgfHwgcmVzcG9uc2VUeXBlID09PSAnanNvbicgP1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7XG4gICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1c1RleHQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICByZXF1ZXN0XG4gICAgICB9O1xuXG4gICAgICBzZXR0bGUoZnVuY3Rpb24gX3Jlc29sdmUodmFsdWUpIHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0sIGZ1bmN0aW9uIF9yZWplY3QoZXJyKSB7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCByZXNwb25zZSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICgnb25sb2FkZW5kJyBpbiByZXF1ZXN0KSB7XG4gICAgICAvLyBVc2Ugb25sb2FkZW5kIGlmIGF2YWlsYWJsZVxuICAgICAgcmVxdWVzdC5vbmxvYWRlbmQgPSBvbmxvYWRlbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIExpc3RlbiBmb3IgcmVhZHkgc3RhdGUgdG8gZW11bGF0ZSBvbmxvYWRlbmRcbiAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0IHx8IHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuICAgICAgICAvLyBoYW5kbGVkIGJ5IG9uZXJyb3IgaW5zdGVhZFxuICAgICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuICAgICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMCAmJiAhKHJlcXVlc3QucmVzcG9uc2VVUkwgJiYgcmVxdWVzdC5yZXNwb25zZVVSTC5pbmRleE9mKCdmaWxlOicpID09PSAwKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWFkeXN0YXRlIGhhbmRsZXIgaXMgY2FsbGluZyBiZWZvcmUgb25lcnJvciBvciBvbnRpbWVvdXQgaGFuZGxlcnMsXG4gICAgICAgIC8vIHNvIHdlIHNob3VsZCBjYWxsIG9ubG9hZGVuZCBvbiB0aGUgbmV4dCAndGljaydcbiAgICAgICAgc2V0VGltZW91dChvbmxvYWRlbmQpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgYnJvd3NlciByZXF1ZXN0IGNhbmNlbGxhdGlvbiAoYXMgb3Bwb3NlZCB0byBhIG1hbnVhbCBjYW5jZWxsYXRpb24pXG4gICAgcmVxdWVzdC5vbmFib3J0ID0gZnVuY3Rpb24gaGFuZGxlQWJvcnQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoJ1JlcXVlc3QgYWJvcnRlZCcsIEF4aW9zRXJyb3IuRUNPTk5BQk9SVEVELCBjb25maWcsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSBsb3cgbGV2ZWwgbmV0d29yayBlcnJvcnNcbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHtcbiAgICAgIC8vIFJlYWwgZXJyb3JzIGFyZSBoaWRkZW4gZnJvbSB1cyBieSB0aGUgYnJvd3NlclxuICAgICAgLy8gb25lcnJvciBzaG91bGQgb25seSBmaXJlIGlmIGl0J3MgYSBuZXR3b3JrIGVycm9yXG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBBeGlvc0Vycm9yLkVSUl9ORVRXT1JLLCBjb25maWcsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSB0aW1lb3V0XG4gICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge1xuICAgICAgbGV0IHRpbWVvdXRFcnJvck1lc3NhZ2UgPSBfY29uZmlnLnRpbWVvdXQgPyAndGltZW91dCBvZiAnICsgX2NvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJyA6ICd0aW1lb3V0IGV4Y2VlZGVkJztcbiAgICAgIGNvbnN0IHRyYW5zaXRpb25hbCA9IF9jb25maWcudHJhbnNpdGlvbmFsIHx8IHRyYW5zaXRpb25hbERlZmF1bHRzO1xuICAgICAgaWYgKF9jb25maWcudGltZW91dEVycm9yTWVzc2FnZSkge1xuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlID0gX2NvbmZpZy50aW1lb3V0RXJyb3JNZXNzYWdlO1xuICAgICAgfVxuICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yKFxuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlLFxuICAgICAgICB0cmFuc2l0aW9uYWwuY2xhcmlmeVRpbWVvdXRFcnJvciA/IEF4aW9zRXJyb3IuRVRJTUVET1VUIDogQXhpb3NFcnJvci5FQ09OTkFCT1JURUQsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gUmVtb3ZlIENvbnRlbnQtVHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICAgIHJlcXVlc3REYXRhID09PSB1bmRlZmluZWQgJiYgcmVxdWVzdEhlYWRlcnMuc2V0Q29udGVudFR5cGUobnVsbCk7XG5cbiAgICAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdFxuICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkge1xuICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycy50b0pTT04oKSwgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHdpdGhDcmVkZW50aWFscyB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoX2NvbmZpZy53aXRoQ3JlZGVudGlhbHMpKSB7XG4gICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9ICEhX2NvbmZpZy53aXRoQ3JlZGVudGlhbHM7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChyZXNwb25zZVR5cGUgJiYgcmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gX2NvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHByb2dyZXNzIGlmIG5lZWRlZFxuICAgIGlmIChvbkRvd25sb2FkUHJvZ3Jlc3MpIHtcbiAgICAgIChbZG93bmxvYWRUaHJvdHRsZWQsIGZsdXNoRG93bmxvYWRdID0gcHJvZ3Jlc3NFdmVudFJlZHVjZXIob25Eb3dubG9hZFByb2dyZXNzLCB0cnVlKSk7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgZG93bmxvYWRUaHJvdHRsZWQpO1xuICAgIH1cblxuICAgIC8vIE5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCB1cGxvYWQgZXZlbnRzXG4gICAgaWYgKG9uVXBsb2FkUHJvZ3Jlc3MgJiYgcmVxdWVzdC51cGxvYWQpIHtcbiAgICAgIChbdXBsb2FkVGhyb3R0bGVkLCBmbHVzaFVwbG9hZF0gPSBwcm9ncmVzc0V2ZW50UmVkdWNlcihvblVwbG9hZFByb2dyZXNzKSk7XG5cbiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgdXBsb2FkVGhyb3R0bGVkKTtcblxuICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsIGZsdXNoVXBsb2FkKTtcbiAgICB9XG5cbiAgICBpZiAoX2NvbmZpZy5jYW5jZWxUb2tlbiB8fCBfY29uZmlnLnNpZ25hbCkge1xuICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICAgIG9uQ2FuY2VsZWQgPSBjYW5jZWwgPT4ge1xuICAgICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVqZWN0KCFjYW5jZWwgfHwgY2FuY2VsLnR5cGUgPyBuZXcgQ2FuY2VsZWRFcnJvcihudWxsLCBjb25maWcsIHJlcXVlc3QpIDogY2FuY2VsKTtcbiAgICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIF9jb25maWcuY2FuY2VsVG9rZW4gJiYgX2NvbmZpZy5jYW5jZWxUb2tlbi5zdWJzY3JpYmUob25DYW5jZWxlZCk7XG4gICAgICBpZiAoX2NvbmZpZy5zaWduYWwpIHtcbiAgICAgICAgX2NvbmZpZy5zaWduYWwuYWJvcnRlZCA/IG9uQ2FuY2VsZWQoKSA6IF9jb25maWcuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcHJvdG9jb2wgPSBwYXJzZVByb3RvY29sKF9jb25maWcudXJsKTtcblxuICAgIGlmIChwcm90b2NvbCAmJiBwbGF0Zm9ybS5wcm90b2NvbHMuaW5kZXhPZihwcm90b2NvbCkgPT09IC0xKSB7XG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoJ1Vuc3VwcG9ydGVkIHByb3RvY29sICcgKyBwcm90b2NvbCArICc6JywgQXhpb3NFcnJvci5FUlJfQkFEX1JFUVVFU1QsIGNvbmZpZykpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuXG4gICAgLy8gU2VuZCB0aGUgcmVxdWVzdFxuICAgIHJlcXVlc3Quc2VuZChyZXF1ZXN0RGF0YSB8fCBudWxsKTtcbiAgfSk7XG59XG4iLCAiaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSBcIi4uL2NhbmNlbC9DYW5jZWxlZEVycm9yLmpzXCI7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tIFwiLi4vY29yZS9BeGlvc0Vycm9yLmpzXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuXG5jb25zdCBjb21wb3NlU2lnbmFscyA9IChzaWduYWxzLCB0aW1lb3V0KSA9PiB7XG4gIGNvbnN0IHtsZW5ndGh9ID0gKHNpZ25hbHMgPSBzaWduYWxzID8gc2lnbmFscy5maWx0ZXIoQm9vbGVhbikgOiBbXSk7XG5cbiAgaWYgKHRpbWVvdXQgfHwgbGVuZ3RoKSB7XG4gICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgICBsZXQgYWJvcnRlZDtcblxuICAgIGNvbnN0IG9uYWJvcnQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoIWFib3J0ZWQpIHtcbiAgICAgICAgYWJvcnRlZCA9IHRydWU7XG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIGNvbnN0IGVyciA9IHJlYXNvbiBpbnN0YW5jZW9mIEVycm9yID8gcmVhc29uIDogdGhpcy5yZWFzb247XG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoZXJyIGluc3RhbmNlb2YgQXhpb3NFcnJvciA/IGVyciA6IG5ldyBDYW5jZWxlZEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBlcnIpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdGltZXIgPSB0aW1lb3V0ICYmIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGltZXIgPSBudWxsO1xuICAgICAgb25hYm9ydChuZXcgQXhpb3NFcnJvcihgdGltZW91dCAke3RpbWVvdXR9IG9mIG1zIGV4Y2VlZGVkYCwgQXhpb3NFcnJvci5FVElNRURPVVQpKVxuICAgIH0sIHRpbWVvdXQpXG5cbiAgICBjb25zdCB1bnN1YnNjcmliZSA9ICgpID0+IHtcbiAgICAgIGlmIChzaWduYWxzKSB7XG4gICAgICAgIHRpbWVyICYmIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgICAgc2lnbmFscy5mb3JFYWNoKHNpZ25hbCA9PiB7XG4gICAgICAgICAgc2lnbmFsLnVuc3Vic2NyaWJlID8gc2lnbmFsLnVuc3Vic2NyaWJlKG9uYWJvcnQpIDogc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25hYm9ydCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzaWduYWxzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaWduYWxzLmZvckVhY2goKHNpZ25hbCkgPT4gc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25hYm9ydCkpO1xuXG4gICAgY29uc3Qge3NpZ25hbH0gPSBjb250cm9sbGVyO1xuXG4gICAgc2lnbmFsLnVuc3Vic2NyaWJlID0gKCkgPT4gdXRpbHMuYXNhcCh1bnN1YnNjcmliZSk7XG5cbiAgICByZXR1cm4gc2lnbmFsO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvc2VTaWduYWxzO1xuIiwgIlxuZXhwb3J0IGNvbnN0IHN0cmVhbUNodW5rID0gZnVuY3Rpb24qIChjaHVuaywgY2h1bmtTaXplKSB7XG4gIGxldCBsZW4gPSBjaHVuay5ieXRlTGVuZ3RoO1xuXG4gIGlmICghY2h1bmtTaXplIHx8IGxlbiA8IGNodW5rU2l6ZSkge1xuICAgIHlpZWxkIGNodW5rO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBwb3MgPSAwO1xuICBsZXQgZW5kO1xuXG4gIHdoaWxlIChwb3MgPCBsZW4pIHtcbiAgICBlbmQgPSBwb3MgKyBjaHVua1NpemU7XG4gICAgeWllbGQgY2h1bmsuc2xpY2UocG9zLCBlbmQpO1xuICAgIHBvcyA9IGVuZDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcmVhZEJ5dGVzID0gYXN5bmMgZnVuY3Rpb24qIChpdGVyYWJsZSwgY2h1bmtTaXplKSB7XG4gIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgcmVhZFN0cmVhbShpdGVyYWJsZSkpIHtcbiAgICB5aWVsZCogc3RyZWFtQ2h1bmsoY2h1bmssIGNodW5rU2l6ZSk7XG4gIH1cbn1cblxuY29uc3QgcmVhZFN0cmVhbSA9IGFzeW5jIGZ1bmN0aW9uKiAoc3RyZWFtKSB7XG4gIGlmIChzdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKSB7XG4gICAgeWllbGQqIHN0cmVhbTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG4gIHRyeSB7XG4gICAgZm9yICg7Oykge1xuICAgICAgY29uc3Qge2RvbmUsIHZhbHVlfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICBpZiAoZG9uZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHlpZWxkIHZhbHVlO1xuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCByZWFkZXIuY2FuY2VsKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHRyYWNrU3RyZWFtID0gKHN0cmVhbSwgY2h1bmtTaXplLCBvblByb2dyZXNzLCBvbkZpbmlzaCkgPT4ge1xuICBjb25zdCBpdGVyYXRvciA9IHJlYWRCeXRlcyhzdHJlYW0sIGNodW5rU2l6ZSk7XG5cbiAgbGV0IGJ5dGVzID0gMDtcbiAgbGV0IGRvbmU7XG4gIGxldCBfb25GaW5pc2ggPSAoZSkgPT4ge1xuICAgIGlmICghZG9uZSkge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBvbkZpbmlzaCAmJiBvbkZpbmlzaChlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICBhc3luYyBwdWxsKGNvbnRyb2xsZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHtkb25lLCB2YWx1ZX0gPSBhd2FpdCBpdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgIF9vbkZpbmlzaCgpO1xuICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbGVuID0gdmFsdWUuYnl0ZUxlbmd0aDtcbiAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgICBsZXQgbG9hZGVkQnl0ZXMgPSBieXRlcyArPSBsZW47XG4gICAgICAgICAgb25Qcm9ncmVzcyhsb2FkZWRCeXRlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKG5ldyBVaW50OEFycmF5KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgX29uRmluaXNoKGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNhbmNlbChyZWFzb24pIHtcbiAgICAgIF9vbkZpbmlzaChyZWFzb24pO1xuICAgICAgcmV0dXJuIGl0ZXJhdG9yLnJldHVybigpO1xuICAgIH1cbiAgfSwge1xuICAgIGhpZ2hXYXRlck1hcms6IDJcbiAgfSlcbn1cbiIsICJpbXBvcnQgcGxhdGZvcm0gZnJvbSBcIi4uL3BsYXRmb3JtL2luZGV4LmpzXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tIFwiLi4vY29yZS9BeGlvc0Vycm9yLmpzXCI7XG5pbXBvcnQgY29tcG9zZVNpZ25hbHMgZnJvbSBcIi4uL2hlbHBlcnMvY29tcG9zZVNpZ25hbHMuanNcIjtcbmltcG9ydCB7dHJhY2tTdHJlYW19IGZyb20gXCIuLi9oZWxwZXJzL3RyYWNrU3RyZWFtLmpzXCI7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gXCIuLi9jb3JlL0F4aW9zSGVhZGVycy5qc1wiO1xuaW1wb3J0IHtwcm9ncmVzc0V2ZW50UmVkdWNlciwgcHJvZ3Jlc3NFdmVudERlY29yYXRvciwgYXN5bmNEZWNvcmF0b3J9IGZyb20gXCIuLi9oZWxwZXJzL3Byb2dyZXNzRXZlbnRSZWR1Y2VyLmpzXCI7XG5pbXBvcnQgcmVzb2x2ZUNvbmZpZyBmcm9tIFwiLi4vaGVscGVycy9yZXNvbHZlQ29uZmlnLmpzXCI7XG5pbXBvcnQgc2V0dGxlIGZyb20gXCIuLi9jb3JlL3NldHRsZS5qc1wiO1xuXG5jb25zdCBpc0ZldGNoU3VwcG9ydGVkID0gdHlwZW9mIGZldGNoID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBSZXF1ZXN0ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBSZXNwb25zZSA9PT0gJ2Z1bmN0aW9uJztcbmNvbnN0IGlzUmVhZGFibGVTdHJlYW1TdXBwb3J0ZWQgPSBpc0ZldGNoU3VwcG9ydGVkICYmIHR5cGVvZiBSZWFkYWJsZVN0cmVhbSA9PT0gJ2Z1bmN0aW9uJztcblxuLy8gdXNlZCBvbmx5IGluc2lkZSB0aGUgZmV0Y2ggYWRhcHRlclxuY29uc3QgZW5jb2RlVGV4dCA9IGlzRmV0Y2hTdXBwb3J0ZWQgJiYgKHR5cGVvZiBUZXh0RW5jb2RlciA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgKChlbmNvZGVyKSA9PiAoc3RyKSA9PiBlbmNvZGVyLmVuY29kZShzdHIpKShuZXcgVGV4dEVuY29kZXIoKSkgOlxuICAgIGFzeW5jIChzdHIpID0+IG5ldyBVaW50OEFycmF5KGF3YWl0IG5ldyBSZXNwb25zZShzdHIpLmFycmF5QnVmZmVyKCkpXG4pO1xuXG5jb25zdCB0ZXN0ID0gKGZuLCAuLi5hcmdzKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuICEhZm4oLi4uYXJncyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5jb25zdCBzdXBwb3J0c1JlcXVlc3RTdHJlYW0gPSBpc1JlYWRhYmxlU3RyZWFtU3VwcG9ydGVkICYmIHRlc3QoKCkgPT4ge1xuICBsZXQgZHVwbGV4QWNjZXNzZWQgPSBmYWxzZTtcblxuICBjb25zdCBoYXNDb250ZW50VHlwZSA9IG5ldyBSZXF1ZXN0KHBsYXRmb3JtLm9yaWdpbiwge1xuICAgIGJvZHk6IG5ldyBSZWFkYWJsZVN0cmVhbSgpLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGdldCBkdXBsZXgoKSB7XG4gICAgICBkdXBsZXhBY2Nlc3NlZCA9IHRydWU7XG4gICAgICByZXR1cm4gJ2hhbGYnO1xuICAgIH0sXG4gIH0pLmhlYWRlcnMuaGFzKCdDb250ZW50LVR5cGUnKTtcblxuICByZXR1cm4gZHVwbGV4QWNjZXNzZWQgJiYgIWhhc0NvbnRlbnRUeXBlO1xufSk7XG5cbmNvbnN0IERFRkFVTFRfQ0hVTktfU0laRSA9IDY0ICogMTAyNDtcblxuY29uc3Qgc3VwcG9ydHNSZXNwb25zZVN0cmVhbSA9IGlzUmVhZGFibGVTdHJlYW1TdXBwb3J0ZWQgJiZcbiAgdGVzdCgoKSA9PiB1dGlscy5pc1JlYWRhYmxlU3RyZWFtKG5ldyBSZXNwb25zZSgnJykuYm9keSkpO1xuXG5cbmNvbnN0IHJlc29sdmVycyA9IHtcbiAgc3RyZWFtOiBzdXBwb3J0c1Jlc3BvbnNlU3RyZWFtICYmICgocmVzKSA9PiByZXMuYm9keSlcbn07XG5cbmlzRmV0Y2hTdXBwb3J0ZWQgJiYgKCgocmVzKSA9PiB7XG4gIFsndGV4dCcsICdhcnJheUJ1ZmZlcicsICdibG9iJywgJ2Zvcm1EYXRhJywgJ3N0cmVhbSddLmZvckVhY2godHlwZSA9PiB7XG4gICAgIXJlc29sdmVyc1t0eXBlXSAmJiAocmVzb2x2ZXJzW3R5cGVdID0gdXRpbHMuaXNGdW5jdGlvbihyZXNbdHlwZV0pID8gKHJlcykgPT4gcmVzW3R5cGVdKCkgOlxuICAgICAgKF8sIGNvbmZpZykgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcihgUmVzcG9uc2UgdHlwZSAnJHt0eXBlfScgaXMgbm90IHN1cHBvcnRlZGAsIEF4aW9zRXJyb3IuRVJSX05PVF9TVVBQT1JULCBjb25maWcpO1xuICAgICAgfSlcbiAgfSk7XG59KShuZXcgUmVzcG9uc2UpKTtcblxuY29uc3QgZ2V0Qm9keUxlbmd0aCA9IGFzeW5jIChib2R5KSA9PiB7XG4gIGlmIChib2R5ID09IG51bGwpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGlmKHV0aWxzLmlzQmxvYihib2R5KSkge1xuICAgIHJldHVybiBib2R5LnNpemU7XG4gIH1cblxuICBpZih1dGlscy5pc1NwZWNDb21wbGlhbnRGb3JtKGJvZHkpKSB7XG4gICAgY29uc3QgX3JlcXVlc3QgPSBuZXcgUmVxdWVzdChwbGF0Zm9ybS5vcmlnaW4sIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keSxcbiAgICB9KTtcbiAgICByZXR1cm4gKGF3YWl0IF9yZXF1ZXN0LmFycmF5QnVmZmVyKCkpLmJ5dGVMZW5ndGg7XG4gIH1cblxuICBpZih1dGlscy5pc0FycmF5QnVmZmVyVmlldyhib2R5KSB8fCB1dGlscy5pc0FycmF5QnVmZmVyKGJvZHkpKSB7XG4gICAgcmV0dXJuIGJvZHkuYnl0ZUxlbmd0aDtcbiAgfVxuXG4gIGlmKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGJvZHkpKSB7XG4gICAgYm9keSA9IGJvZHkgKyAnJztcbiAgfVxuXG4gIGlmKHV0aWxzLmlzU3RyaW5nKGJvZHkpKSB7XG4gICAgcmV0dXJuIChhd2FpdCBlbmNvZGVUZXh0KGJvZHkpKS5ieXRlTGVuZ3RoO1xuICB9XG59XG5cbmNvbnN0IHJlc29sdmVCb2R5TGVuZ3RoID0gYXN5bmMgKGhlYWRlcnMsIGJvZHkpID0+IHtcbiAgY29uc3QgbGVuZ3RoID0gdXRpbHMudG9GaW5pdGVOdW1iZXIoaGVhZGVycy5nZXRDb250ZW50TGVuZ3RoKCkpO1xuXG4gIHJldHVybiBsZW5ndGggPT0gbnVsbCA/IGdldEJvZHlMZW5ndGgoYm9keSkgOiBsZW5ndGg7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGlzRmV0Y2hTdXBwb3J0ZWQgJiYgKGFzeW5jIChjb25maWcpID0+IHtcbiAgbGV0IHtcbiAgICB1cmwsXG4gICAgbWV0aG9kLFxuICAgIGRhdGEsXG4gICAgc2lnbmFsLFxuICAgIGNhbmNlbFRva2VuLFxuICAgIHRpbWVvdXQsXG4gICAgb25Eb3dubG9hZFByb2dyZXNzLFxuICAgIG9uVXBsb2FkUHJvZ3Jlc3MsXG4gICAgcmVzcG9uc2VUeXBlLFxuICAgIGhlYWRlcnMsXG4gICAgd2l0aENyZWRlbnRpYWxzID0gJ3NhbWUtb3JpZ2luJyxcbiAgICBmZXRjaE9wdGlvbnNcbiAgfSA9IHJlc29sdmVDb25maWcoY29uZmlnKTtcblxuICByZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGUgPyAocmVzcG9uc2VUeXBlICsgJycpLnRvTG93ZXJDYXNlKCkgOiAndGV4dCc7XG5cbiAgbGV0IGNvbXBvc2VkU2lnbmFsID0gY29tcG9zZVNpZ25hbHMoW3NpZ25hbCwgY2FuY2VsVG9rZW4gJiYgY2FuY2VsVG9rZW4udG9BYm9ydFNpZ25hbCgpXSwgdGltZW91dCk7XG5cbiAgbGV0IHJlcXVlc3Q7XG5cbiAgY29uc3QgdW5zdWJzY3JpYmUgPSBjb21wb3NlZFNpZ25hbCAmJiBjb21wb3NlZFNpZ25hbC51bnN1YnNjcmliZSAmJiAoKCkgPT4ge1xuICAgICAgY29tcG9zZWRTaWduYWwudW5zdWJzY3JpYmUoKTtcbiAgfSk7XG5cbiAgbGV0IHJlcXVlc3RDb250ZW50TGVuZ3RoO1xuXG4gIHRyeSB7XG4gICAgaWYgKFxuICAgICAgb25VcGxvYWRQcm9ncmVzcyAmJiBzdXBwb3J0c1JlcXVlc3RTdHJlYW0gJiYgbWV0aG9kICE9PSAnZ2V0JyAmJiBtZXRob2QgIT09ICdoZWFkJyAmJlxuICAgICAgKHJlcXVlc3RDb250ZW50TGVuZ3RoID0gYXdhaXQgcmVzb2x2ZUJvZHlMZW5ndGgoaGVhZGVycywgZGF0YSkpICE9PSAwXG4gICAgKSB7XG4gICAgICBsZXQgX3JlcXVlc3QgPSBuZXcgUmVxdWVzdCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGRhdGEsXG4gICAgICAgIGR1cGxleDogXCJoYWxmXCJcbiAgICAgIH0pO1xuXG4gICAgICBsZXQgY29udGVudFR5cGVIZWFkZXI7XG5cbiAgICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpICYmIChjb250ZW50VHlwZUhlYWRlciA9IF9yZXF1ZXN0LmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkpIHtcbiAgICAgICAgaGVhZGVycy5zZXRDb250ZW50VHlwZShjb250ZW50VHlwZUhlYWRlcilcbiAgICAgIH1cblxuICAgICAgaWYgKF9yZXF1ZXN0LmJvZHkpIHtcbiAgICAgICAgY29uc3QgW29uUHJvZ3Jlc3MsIGZsdXNoXSA9IHByb2dyZXNzRXZlbnREZWNvcmF0b3IoXG4gICAgICAgICAgcmVxdWVzdENvbnRlbnRMZW5ndGgsXG4gICAgICAgICAgcHJvZ3Jlc3NFdmVudFJlZHVjZXIoYXN5bmNEZWNvcmF0b3Iob25VcGxvYWRQcm9ncmVzcykpXG4gICAgICAgICk7XG5cbiAgICAgICAgZGF0YSA9IHRyYWNrU3RyZWFtKF9yZXF1ZXN0LmJvZHksIERFRkFVTFRfQ0hVTktfU0laRSwgb25Qcm9ncmVzcywgZmx1c2gpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdXRpbHMuaXNTdHJpbmcod2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgd2l0aENyZWRlbnRpYWxzID0gd2l0aENyZWRlbnRpYWxzID8gJ2luY2x1ZGUnIDogJ29taXQnO1xuICAgIH1cblxuICAgIC8vIENsb3VkZmxhcmUgV29ya2VycyB0aHJvd3Mgd2hlbiBjcmVkZW50aWFscyBhcmUgZGVmaW5lZFxuICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY2xvdWRmbGFyZS93b3JrZXJkL2lzc3Vlcy85MDJcbiAgICBjb25zdCBpc0NyZWRlbnRpYWxzU3VwcG9ydGVkID0gXCJjcmVkZW50aWFsc1wiIGluIFJlcXVlc3QucHJvdG90eXBlO1xuICAgIHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh1cmwsIHtcbiAgICAgIC4uLmZldGNoT3B0aW9ucyxcbiAgICAgIHNpZ25hbDogY29tcG9zZWRTaWduYWwsXG4gICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLFxuICAgICAgaGVhZGVyczogaGVhZGVycy5ub3JtYWxpemUoKS50b0pTT04oKSxcbiAgICAgIGJvZHk6IGRhdGEsXG4gICAgICBkdXBsZXg6IFwiaGFsZlwiLFxuICAgICAgY3JlZGVudGlhbHM6IGlzQ3JlZGVudGlhbHNTdXBwb3J0ZWQgPyB3aXRoQ3JlZGVudGlhbHMgOiB1bmRlZmluZWRcbiAgICB9KTtcblxuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlcXVlc3QsIGZldGNoT3B0aW9ucyk7XG5cbiAgICBjb25zdCBpc1N0cmVhbVJlc3BvbnNlID0gc3VwcG9ydHNSZXNwb25zZVN0cmVhbSAmJiAocmVzcG9uc2VUeXBlID09PSAnc3RyZWFtJyB8fCByZXNwb25zZVR5cGUgPT09ICdyZXNwb25zZScpO1xuXG4gICAgaWYgKHN1cHBvcnRzUmVzcG9uc2VTdHJlYW0gJiYgKG9uRG93bmxvYWRQcm9ncmVzcyB8fCAoaXNTdHJlYW1SZXNwb25zZSAmJiB1bnN1YnNjcmliZSkpKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0ge307XG5cbiAgICAgIFsnc3RhdHVzJywgJ3N0YXR1c1RleHQnLCAnaGVhZGVycyddLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICAgIG9wdGlvbnNbcHJvcF0gPSByZXNwb25zZVtwcm9wXTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZUNvbnRlbnRMZW5ndGggPSB1dGlscy50b0Zpbml0ZU51bWJlcihyZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC1sZW5ndGgnKSk7XG5cbiAgICAgIGNvbnN0IFtvblByb2dyZXNzLCBmbHVzaF0gPSBvbkRvd25sb2FkUHJvZ3Jlc3MgJiYgcHJvZ3Jlc3NFdmVudERlY29yYXRvcihcbiAgICAgICAgcmVzcG9uc2VDb250ZW50TGVuZ3RoLFxuICAgICAgICBwcm9ncmVzc0V2ZW50UmVkdWNlcihhc3luY0RlY29yYXRvcihvbkRvd25sb2FkUHJvZ3Jlc3MpLCB0cnVlKVxuICAgICAgKSB8fCBbXTtcblxuICAgICAgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoXG4gICAgICAgIHRyYWNrU3RyZWFtKHJlc3BvbnNlLmJvZHksIERFRkFVTFRfQ0hVTktfU0laRSwgb25Qcm9ncmVzcywgKCkgPT4ge1xuICAgICAgICAgIGZsdXNoICYmIGZsdXNoKCk7XG4gICAgICAgICAgdW5zdWJzY3JpYmUgJiYgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfSksXG4gICAgICAgIG9wdGlvbnNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlIHx8ICd0ZXh0JztcblxuICAgIGxldCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNvbHZlcnNbdXRpbHMuZmluZEtleShyZXNvbHZlcnMsIHJlc3BvbnNlVHlwZSkgfHwgJ3RleHQnXShyZXNwb25zZSwgY29uZmlnKTtcblxuICAgICFpc1N0cmVhbVJlc3BvbnNlICYmIHVuc3Vic2NyaWJlICYmIHVuc3Vic2NyaWJlKCk7XG5cbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwge1xuICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgIGhlYWRlcnM6IEF4aW9zSGVhZGVycy5mcm9tKHJlc3BvbnNlLmhlYWRlcnMpLFxuICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICByZXF1ZXN0XG4gICAgICB9KVxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHVuc3Vic2NyaWJlICYmIHVuc3Vic2NyaWJlKCk7XG5cbiAgICBpZiAoZXJyICYmIGVyci5uYW1lID09PSAnVHlwZUVycm9yJyAmJiAvTG9hZCBmYWlsZWR8ZmV0Y2gvaS50ZXN0KGVyci5tZXNzYWdlKSkge1xuICAgICAgdGhyb3cgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IEF4aW9zRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBBeGlvc0Vycm9yLkVSUl9ORVRXT1JLLCBjb25maWcsIHJlcXVlc3QpLFxuICAgICAgICB7XG4gICAgICAgICAgY2F1c2U6IGVyci5jYXVzZSB8fCBlcnJcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIHRocm93IEF4aW9zRXJyb3IuZnJvbShlcnIsIGVyciAmJiBlcnIuY29kZSwgY29uZmlnLCByZXF1ZXN0KTtcbiAgfVxufSk7XG5cblxuIiwgImltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgaHR0cEFkYXB0ZXIgZnJvbSAnLi9odHRwLmpzJztcbmltcG9ydCB4aHJBZGFwdGVyIGZyb20gJy4veGhyLmpzJztcbmltcG9ydCBmZXRjaEFkYXB0ZXIgZnJvbSAnLi9mZXRjaC5qcyc7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tIFwiLi4vY29yZS9BeGlvc0Vycm9yLmpzXCI7XG5cbmNvbnN0IGtub3duQWRhcHRlcnMgPSB7XG4gIGh0dHA6IGh0dHBBZGFwdGVyLFxuICB4aHI6IHhockFkYXB0ZXIsXG4gIGZldGNoOiBmZXRjaEFkYXB0ZXJcbn1cblxudXRpbHMuZm9yRWFjaChrbm93bkFkYXB0ZXJzLCAoZm4sIHZhbHVlKSA9PiB7XG4gIGlmIChmbikge1xuICAgIHRyeSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sICduYW1lJywge3ZhbHVlfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgJ2FkYXB0ZXJOYW1lJywge3ZhbHVlfSk7XG4gIH1cbn0pO1xuXG5jb25zdCByZW5kZXJSZWFzb24gPSAocmVhc29uKSA9PiBgLSAke3JlYXNvbn1gO1xuXG5jb25zdCBpc1Jlc29sdmVkSGFuZGxlID0gKGFkYXB0ZXIpID0+IHV0aWxzLmlzRnVuY3Rpb24oYWRhcHRlcikgfHwgYWRhcHRlciA9PT0gbnVsbCB8fCBhZGFwdGVyID09PSBmYWxzZTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBnZXRBZGFwdGVyOiAoYWRhcHRlcnMpID0+IHtcbiAgICBhZGFwdGVycyA9IHV0aWxzLmlzQXJyYXkoYWRhcHRlcnMpID8gYWRhcHRlcnMgOiBbYWRhcHRlcnNdO1xuXG4gICAgY29uc3Qge2xlbmd0aH0gPSBhZGFwdGVycztcbiAgICBsZXQgbmFtZU9yQWRhcHRlcjtcbiAgICBsZXQgYWRhcHRlcjtcblxuICAgIGNvbnN0IHJlamVjdGVkUmVhc29ucyA9IHt9O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbmFtZU9yQWRhcHRlciA9IGFkYXB0ZXJzW2ldO1xuICAgICAgbGV0IGlkO1xuXG4gICAgICBhZGFwdGVyID0gbmFtZU9yQWRhcHRlcjtcblxuICAgICAgaWYgKCFpc1Jlc29sdmVkSGFuZGxlKG5hbWVPckFkYXB0ZXIpKSB7XG4gICAgICAgIGFkYXB0ZXIgPSBrbm93bkFkYXB0ZXJzWyhpZCA9IFN0cmluZyhuYW1lT3JBZGFwdGVyKSkudG9Mb3dlckNhc2UoKV07XG5cbiAgICAgICAgaWYgKGFkYXB0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKGBVbmtub3duIGFkYXB0ZXIgJyR7aWR9J2ApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChhZGFwdGVyKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICByZWplY3RlZFJlYXNvbnNbaWQgfHwgJyMnICsgaV0gPSBhZGFwdGVyO1xuICAgIH1cblxuICAgIGlmICghYWRhcHRlcikge1xuXG4gICAgICBjb25zdCByZWFzb25zID0gT2JqZWN0LmVudHJpZXMocmVqZWN0ZWRSZWFzb25zKVxuICAgICAgICAubWFwKChbaWQsIHN0YXRlXSkgPT4gYGFkYXB0ZXIgJHtpZH0gYCArXG4gICAgICAgICAgKHN0YXRlID09PSBmYWxzZSA/ICdpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBlbnZpcm9ubWVudCcgOiAnaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgYnVpbGQnKVxuICAgICAgICApO1xuXG4gICAgICBsZXQgcyA9IGxlbmd0aCA/XG4gICAgICAgIChyZWFzb25zLmxlbmd0aCA+IDEgPyAnc2luY2UgOlxcbicgKyByZWFzb25zLm1hcChyZW5kZXJSZWFzb24pLmpvaW4oJ1xcbicpIDogJyAnICsgcmVuZGVyUmVhc29uKHJlYXNvbnNbMF0pKSA6XG4gICAgICAgICdhcyBubyBhZGFwdGVyIHNwZWNpZmllZCc7XG5cbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKFxuICAgICAgICBgVGhlcmUgaXMgbm8gc3VpdGFibGUgYWRhcHRlciB0byBkaXNwYXRjaCB0aGUgcmVxdWVzdCBgICsgcyxcbiAgICAgICAgJ0VSUl9OT1RfU1VQUE9SVCdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkYXB0ZXI7XG4gIH0sXG4gIGFkYXB0ZXJzOiBrbm93bkFkYXB0ZXJzXG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHJhbnNmb3JtRGF0YSBmcm9tICcuL3RyYW5zZm9ybURhdGEuanMnO1xuaW1wb3J0IGlzQ2FuY2VsIGZyb20gJy4uL2NhbmNlbC9pc0NhbmNlbC5qcyc7XG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi4vZGVmYXVsdHMvaW5kZXguanMnO1xuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tICcuLi9jb3JlL0F4aW9zSGVhZGVycy5qcyc7XG5pbXBvcnQgYWRhcHRlcnMgZnJvbSBcIi4uL2FkYXB0ZXJzL2FkYXB0ZXJzLmpzXCI7XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGVkRXJyb3JgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7XG4gIH1cblxuICBpZiAoY29uZmlnLnNpZ25hbCAmJiBjb25maWcuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICB0aHJvdyBuZXcgQ2FuY2VsZWRFcnJvcihudWxsLCBjb25maWcpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykge1xuICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgY29uZmlnLmhlYWRlcnMgPSBBeGlvc0hlYWRlcnMuZnJvbShjb25maWcuaGVhZGVycyk7XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICBjb25maWcsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICBpZiAoWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLmluZGV4T2YoY29uZmlnLm1ldGhvZCkgIT09IC0xKSB7XG4gICAgY29uZmlnLmhlYWRlcnMuc2V0Q29udGVudFR5cGUoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsIGZhbHNlKTtcbiAgfVxuXG4gIGNvbnN0IGFkYXB0ZXIgPSBhZGFwdGVycy5nZXRBZGFwdGVyKGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXIpO1xuXG4gIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7XG4gICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICByZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YS5jYWxsKFxuICAgICAgY29uZmlnLFxuICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlLFxuICAgICAgcmVzcG9uc2VcbiAgICApO1xuXG4gICAgcmVzcG9uc2UuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKHJlc3BvbnNlLmhlYWRlcnMpO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LCBmdW5jdGlvbiBvbkFkYXB0ZXJSZWplY3Rpb24ocmVhc29uKSB7XG4gICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7XG4gICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkge1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZVxuICAgICAgICApO1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgfSk7XG59XG4iLCAiZXhwb3J0IGNvbnN0IFZFUlNJT04gPSBcIjEuMTAuMFwiOyIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7VkVSU0lPTn0gZnJvbSAnLi4vZW52L2RhdGEuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcblxuY29uc3QgdmFsaWRhdG9ycyA9IHt9O1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuWydvYmplY3QnLCAnYm9vbGVhbicsICdudW1iZXInLCAnZnVuY3Rpb24nLCAnc3RyaW5nJywgJ3N5bWJvbCddLmZvckVhY2goKHR5cGUsIGkpID0+IHtcbiAgdmFsaWRhdG9yc1t0eXBlXSA9IGZ1bmN0aW9uIHZhbGlkYXRvcih0aGluZykge1xuICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09IHR5cGUgfHwgJ2EnICsgKGkgPCAxID8gJ24gJyA6ICcgJykgKyB0eXBlO1xuICB9O1xufSk7XG5cbmNvbnN0IGRlcHJlY2F0ZWRXYXJuaW5ncyA9IHt9O1xuXG4vKipcbiAqIFRyYW5zaXRpb25hbCBvcHRpb24gdmFsaWRhdG9yXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbnxib29sZWFuP30gdmFsaWRhdG9yIC0gc2V0IHRvIGZhbHNlIGlmIHRoZSB0cmFuc2l0aW9uYWwgb3B0aW9uIGhhcyBiZWVuIHJlbW92ZWRcbiAqIEBwYXJhbSB7c3RyaW5nP30gdmVyc2lvbiAtIGRlcHJlY2F0ZWQgdmVyc2lvbiAvIHJlbW92ZWQgc2luY2UgdmVyc2lvblxuICogQHBhcmFtIHtzdHJpbmc/fSBtZXNzYWdlIC0gc29tZSBtZXNzYWdlIHdpdGggYWRkaXRpb25hbCBpbmZvXG4gKlxuICogQHJldHVybnMge2Z1bmN0aW9ufVxuICovXG52YWxpZGF0b3JzLnRyYW5zaXRpb25hbCA9IGZ1bmN0aW9uIHRyYW5zaXRpb25hbCh2YWxpZGF0b3IsIHZlcnNpb24sIG1lc3NhZ2UpIHtcbiAgZnVuY3Rpb24gZm9ybWF0TWVzc2FnZShvcHQsIGRlc2MpIHtcbiAgICByZXR1cm4gJ1tBeGlvcyB2JyArIFZFUlNJT04gKyAnXSBUcmFuc2l0aW9uYWwgb3B0aW9uIFxcJycgKyBvcHQgKyAnXFwnJyArIGRlc2MgKyAobWVzc2FnZSA/ICcuICcgKyBtZXNzYWdlIDogJycpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgcmV0dXJuICh2YWx1ZSwgb3B0LCBvcHRzKSA9PiB7XG4gICAgaWYgKHZhbGlkYXRvciA9PT0gZmFsc2UpIHtcbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKFxuICAgICAgICBmb3JtYXRNZXNzYWdlKG9wdCwgJyBoYXMgYmVlbiByZW1vdmVkJyArICh2ZXJzaW9uID8gJyBpbiAnICsgdmVyc2lvbiA6ICcnKSksXG4gICAgICAgIEF4aW9zRXJyb3IuRVJSX0RFUFJFQ0FURURcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHZlcnNpb24gJiYgIWRlcHJlY2F0ZWRXYXJuaW5nc1tvcHRdKSB7XG4gICAgICBkZXByZWNhdGVkV2FybmluZ3Nbb3B0XSA9IHRydWU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBmb3JtYXRNZXNzYWdlKFxuICAgICAgICAgIG9wdCxcbiAgICAgICAgICAnIGhhcyBiZWVuIGRlcHJlY2F0ZWQgc2luY2UgdicgKyB2ZXJzaW9uICsgJyBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZSdcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWRhdG9yID8gdmFsaWRhdG9yKHZhbHVlLCBvcHQsIG9wdHMpIDogdHJ1ZTtcbiAgfTtcbn07XG5cbnZhbGlkYXRvcnMuc3BlbGxpbmcgPSBmdW5jdGlvbiBzcGVsbGluZyhjb3JyZWN0U3BlbGxpbmcpIHtcbiAgcmV0dXJuICh2YWx1ZSwgb3B0KSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLndhcm4oYCR7b3B0fSBpcyBsaWtlbHkgYSBtaXNzcGVsbGluZyBvZiAke2NvcnJlY3RTcGVsbGluZ31gKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuLyoqXG4gKiBBc3NlcnQgb2JqZWN0J3MgcHJvcGVydGllcyB0eXBlXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7b2JqZWN0fSBzY2hlbWFcbiAqIEBwYXJhbSB7Ym9vbGVhbj99IGFsbG93VW5rbm93blxuICpcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0T3B0aW9ucyhvcHRpb25zLCBzY2hlbWEsIGFsbG93VW5rbm93bikge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoJ29wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QnLCBBeGlvc0Vycm9yLkVSUl9CQURfT1BUSU9OX1ZBTFVFKTtcbiAgfVxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gIGxldCBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgY29uc3Qgb3B0ID0ga2V5c1tpXTtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBzY2hlbWFbb3B0XTtcbiAgICBpZiAodmFsaWRhdG9yKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG9wdGlvbnNbb3B0XTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsaWRhdG9yKHZhbHVlLCBvcHQsIG9wdGlvbnMpO1xuICAgICAgaWYgKHJlc3VsdCAhPT0gdHJ1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcignb3B0aW9uICcgKyBvcHQgKyAnIG11c3QgYmUgJyArIHJlc3VsdCwgQXhpb3NFcnJvci5FUlJfQkFEX09QVElPTl9WQUxVRSk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGFsbG93VW5rbm93biAhPT0gdHJ1ZSkge1xuICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoJ1Vua25vd24gb3B0aW9uICcgKyBvcHQsIEF4aW9zRXJyb3IuRVJSX0JBRF9PUFRJT04pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGFzc2VydE9wdGlvbnMsXG4gIHZhbGlkYXRvcnNcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5pbXBvcnQgYnVpbGRVUkwgZnJvbSAnLi4vaGVscGVycy9idWlsZFVSTC5qcyc7XG5pbXBvcnQgSW50ZXJjZXB0b3JNYW5hZ2VyIGZyb20gJy4vSW50ZXJjZXB0b3JNYW5hZ2VyLmpzJztcbmltcG9ydCBkaXNwYXRjaFJlcXVlc3QgZnJvbSAnLi9kaXNwYXRjaFJlcXVlc3QuanMnO1xuaW1wb3J0IG1lcmdlQ29uZmlnIGZyb20gJy4vbWVyZ2VDb25maWcuanMnO1xuaW1wb3J0IGJ1aWxkRnVsbFBhdGggZnJvbSAnLi9idWlsZEZ1bGxQYXRoLmpzJztcbmltcG9ydCB2YWxpZGF0b3IgZnJvbSAnLi4vaGVscGVycy92YWxpZGF0b3IuanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tICcuL0F4aW9zSGVhZGVycy5qcyc7XG5cbmNvbnN0IHZhbGlkYXRvcnMgPSB2YWxpZGF0b3IudmFsaWRhdG9ycztcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuY2xhc3MgQXhpb3Mge1xuICBjb25zdHJ1Y3RvcihpbnN0YW5jZUNvbmZpZykge1xuICAgIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZyB8fCB7fTtcbiAgICB0aGlzLmludGVyY2VwdG9ycyA9IHtcbiAgICAgIHJlcXVlc3Q6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKSxcbiAgICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGNvbmZpZ09yVXJsIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcbiAgICogQHBhcmFtIHs/T2JqZWN0fSBjb25maWdcbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICAgKi9cbiAgYXN5bmMgcmVxdWVzdChjb25maWdPclVybCwgY29uZmlnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZXF1ZXN0KGNvbmZpZ09yVXJsLCBjb25maWcpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGxldCBkdW1teSA9IHt9O1xuXG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID8gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZHVtbXkpIDogKGR1bW15ID0gbmV3IEVycm9yKCkpO1xuXG4gICAgICAgIC8vIHNsaWNlIG9mZiB0aGUgRXJyb3I6IC4uLiBsaW5lXG4gICAgICAgIGNvbnN0IHN0YWNrID0gZHVtbXkuc3RhY2sgPyBkdW1teS5zdGFjay5yZXBsYWNlKC9eLitcXG4vLCAnJykgOiAnJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIWVyci5zdGFjaykge1xuICAgICAgICAgICAgZXJyLnN0YWNrID0gc3RhY2s7XG4gICAgICAgICAgICAvLyBtYXRjaCB3aXRob3V0IHRoZSAyIHRvcCBzdGFjayBsaW5lc1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3RhY2sgJiYgIVN0cmluZyhlcnIuc3RhY2spLmVuZHNXaXRoKHN0YWNrLnJlcGxhY2UoL14uK1xcbi4rXFxuLywgJycpKSkge1xuICAgICAgICAgICAgZXJyLnN0YWNrICs9ICdcXG4nICsgc3RhY2tcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpZ25vcmUgdGhlIGNhc2Ugd2hlcmUgXCJzdGFja1wiIGlzIGFuIHVuLXdyaXRhYmxlIHByb3BlcnR5XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIF9yZXF1ZXN0KGNvbmZpZ09yVXJsLCBjb25maWcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJXG4gICAgaWYgKHR5cGVvZiBjb25maWdPclVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICAgIGNvbmZpZy51cmwgPSBjb25maWdPclVybDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnID0gY29uZmlnT3JVcmwgfHwge307XG4gICAgfVxuXG4gICAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTtcblxuICAgIGNvbnN0IHt0cmFuc2l0aW9uYWwsIHBhcmFtc1NlcmlhbGl6ZXIsIGhlYWRlcnN9ID0gY29uZmlnO1xuXG4gICAgaWYgKHRyYW5zaXRpb25hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWxpZGF0b3IuYXNzZXJ0T3B0aW9ucyh0cmFuc2l0aW9uYWwsIHtcbiAgICAgICAgc2lsZW50SlNPTlBhcnNpbmc6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbiksXG4gICAgICAgIGZvcmNlZEpTT05QYXJzaW5nOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pLFxuICAgICAgICBjbGFyaWZ5VGltZW91dEVycm9yOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pXG4gICAgICB9LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIgIT0gbnVsbCkge1xuICAgICAgaWYgKHV0aWxzLmlzRnVuY3Rpb24ocGFyYW1zU2VyaWFsaXplcikpIHtcbiAgICAgICAgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIgPSB7XG4gICAgICAgICAgc2VyaWFsaXplOiBwYXJhbXNTZXJpYWxpemVyXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbGlkYXRvci5hc3NlcnRPcHRpb25zKHBhcmFtc1NlcmlhbGl6ZXIsIHtcbiAgICAgICAgICBlbmNvZGU6IHZhbGlkYXRvcnMuZnVuY3Rpb24sXG4gICAgICAgICAgc2VyaWFsaXplOiB2YWxpZGF0b3JzLmZ1bmN0aW9uXG4gICAgICAgIH0sIHRydWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCBjb25maWcuYWxsb3dBYnNvbHV0ZVVybHNcbiAgICBpZiAoY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9IGVsc2UgaWYgKHRoaXMuZGVmYXVsdHMuYWxsb3dBYnNvbHV0ZVVybHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzID0gdGhpcy5kZWZhdWx0cy5hbGxvd0Fic29sdXRlVXJscztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YWxpZGF0b3IuYXNzZXJ0T3B0aW9ucyhjb25maWcsIHtcbiAgICAgIGJhc2VVcmw6IHZhbGlkYXRvcnMuc3BlbGxpbmcoJ2Jhc2VVUkwnKSxcbiAgICAgIHdpdGhYc3JmVG9rZW46IHZhbGlkYXRvcnMuc3BlbGxpbmcoJ3dpdGhYU1JGVG9rZW4nKVxuICAgIH0sIHRydWUpO1xuXG4gICAgLy8gU2V0IGNvbmZpZy5tZXRob2RcbiAgICBjb25maWcubWV0aG9kID0gKGNvbmZpZy5tZXRob2QgfHwgdGhpcy5kZWZhdWx0cy5tZXRob2QgfHwgJ2dldCcpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgICBsZXQgY29udGV4dEhlYWRlcnMgPSBoZWFkZXJzICYmIHV0aWxzLm1lcmdlKFxuICAgICAgaGVhZGVycy5jb21tb24sXG4gICAgICBoZWFkZXJzW2NvbmZpZy5tZXRob2RdXG4gICAgKTtcblxuICAgIGhlYWRlcnMgJiYgdXRpbHMuZm9yRWFjaChcbiAgICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgICAgKG1ldGhvZCkgPT4ge1xuICAgICAgICBkZWxldGUgaGVhZGVyc1ttZXRob2RdO1xuICAgICAgfVxuICAgICk7XG5cbiAgICBjb25maWcuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5jb25jYXQoY29udGV4dEhlYWRlcnMsIGhlYWRlcnMpO1xuXG4gICAgLy8gZmlsdGVyIG91dCBza2lwcGVkIGludGVyY2VwdG9yc1xuICAgIGNvbnN0IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluID0gW107XG4gICAgbGV0IHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHRydWU7XG4gICAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgICBpZiAodHlwZW9mIGludGVyY2VwdG9yLnJ1bldoZW4gPT09ICdmdW5jdGlvbicgJiYgaW50ZXJjZXB0b3IucnVuV2hlbihjb25maWcpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyAmJiBpbnRlcmNlcHRvci5zeW5jaHJvbm91cztcblxuICAgICAgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbiA9IFtdO1xuICAgIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgICByZXNwb25zZUludGVyY2VwdG9yQ2hhaW4ucHVzaChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgICB9KTtcblxuICAgIGxldCBwcm9taXNlO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgbGVuO1xuXG4gICAgaWYgKCFzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMpIHtcbiAgICAgIGNvbnN0IGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdC5iaW5kKHRoaXMpLCB1bmRlZmluZWRdO1xuICAgICAgY2hhaW4udW5zaGlmdC5hcHBseShjaGFpbiwgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4pO1xuICAgICAgY2hhaW4ucHVzaC5hcHBseShjaGFpbiwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluKTtcbiAgICAgIGxlbiA9IGNoYWluLmxlbmd0aDtcblxuICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb25maWcpO1xuXG4gICAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluW2krK10sIGNoYWluW2krK10pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICBsZW4gPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi5sZW5ndGg7XG5cbiAgICBsZXQgbmV3Q29uZmlnID0gY29uZmlnO1xuXG4gICAgaSA9IDA7XG5cbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgY29uc3Qgb25GdWxmaWxsZWQgPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbltpKytdO1xuICAgICAgY29uc3Qgb25SZWplY3RlZCA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluW2krK107XG4gICAgICB0cnkge1xuICAgICAgICBuZXdDb25maWcgPSBvbkZ1bGZpbGxlZChuZXdDb25maWcpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgb25SZWplY3RlZC5jYWxsKHRoaXMsIGVycm9yKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHByb21pc2UgPSBkaXNwYXRjaFJlcXVlc3QuY2FsbCh0aGlzLCBuZXdDb25maWcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cblxuICAgIGkgPSAwO1xuICAgIGxlbiA9IHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbi5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihyZXNwb25zZUludGVyY2VwdG9yQ2hhaW5baSsrXSwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluW2krK10pO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgZ2V0VXJpKGNvbmZpZykge1xuICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7XG4gICAgY29uc3QgZnVsbFBhdGggPSBidWlsZEZ1bGxQYXRoKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsLCBjb25maWcuYWxsb3dBYnNvbHV0ZVVybHMpO1xuICAgIHJldHVybiBidWlsZFVSTChmdWxsUGF0aCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpO1xuICB9XG59XG5cbi8vIFByb3ZpZGUgYWxpYXNlcyBmb3Igc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kc1xudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdvcHRpb25zJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KG1lcmdlQ29uZmlnKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kLFxuICAgICAgdXJsLFxuICAgICAgZGF0YTogKGNvbmZpZyB8fCB7fSkuZGF0YVxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlSFRUUE1ldGhvZChpc0Zvcm0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaHR0cE1ldGhvZCh1cmwsIGRhdGEsIGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHtcbiAgICAgICAgbWV0aG9kLFxuICAgICAgICBoZWFkZXJzOiBpc0Zvcm0gPyB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJ1xuICAgICAgICB9IDoge30sXG4gICAgICAgIHVybCxcbiAgICAgICAgZGF0YVxuICAgICAgfSkpO1xuICAgIH07XG4gIH1cblxuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGdlbmVyYXRlSFRUUE1ldGhvZCgpO1xuXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2QgKyAnRm9ybSddID0gZ2VuZXJhdGVIVFRQTWV0aG9kKHRydWUpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEF4aW9zO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi9DYW5jZWxlZEVycm9yLmpzJztcblxuLyoqXG4gKiBBIGBDYW5jZWxUb2tlbmAgaXMgYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVxdWVzdCBjYW5jZWxsYXRpb24gb2YgYW4gb3BlcmF0aW9uLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Q2FuY2VsVG9rZW59XG4gKi9cbmNsYXNzIENhbmNlbFRva2VuIHtcbiAgY29uc3RydWN0b3IoZXhlY3V0b3IpIHtcbiAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgbGV0IHJlc29sdmVQcm9taXNlO1xuXG4gICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHRva2VuID0gdGhpcztcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgdGhpcy5wcm9taXNlLnRoZW4oY2FuY2VsID0+IHtcbiAgICAgIGlmICghdG9rZW4uX2xpc3RlbmVycykgcmV0dXJuO1xuXG4gICAgICBsZXQgaSA9IHRva2VuLl9saXN0ZW5lcnMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoaS0tID4gMCkge1xuICAgICAgICB0b2tlbi5fbGlzdGVuZXJzW2ldKGNhbmNlbCk7XG4gICAgICB9XG4gICAgICB0b2tlbi5fbGlzdGVuZXJzID0gbnVsbDtcbiAgICB9KTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgdGhpcy5wcm9taXNlLnRoZW4gPSBvbmZ1bGZpbGxlZCA9PiB7XG4gICAgICBsZXQgX3Jlc29sdmU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICB0b2tlbi5zdWJzY3JpYmUocmVzb2x2ZSk7XG4gICAgICAgIF9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgIH0pLnRoZW4ob25mdWxmaWxsZWQpO1xuXG4gICAgICBwcm9taXNlLmNhbmNlbCA9IGZ1bmN0aW9uIHJlamVjdCgpIHtcbiAgICAgICAgdG9rZW4udW5zdWJzY3JpYmUoX3Jlc29sdmUpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlLCBjb25maWcsIHJlcXVlc3QpIHtcbiAgICAgIGlmICh0b2tlbi5yZWFzb24pIHtcbiAgICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbGVkRXJyb3IobWVzc2FnZSwgY29uZmlnLCByZXF1ZXN0KTtcbiAgICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGEgYENhbmNlbGVkRXJyb3JgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gICAqL1xuICB0aHJvd0lmUmVxdWVzdGVkKCkge1xuICAgIGlmICh0aGlzLnJlYXNvbikge1xuICAgICAgdGhyb3cgdGhpcy5yZWFzb247XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byB0aGUgY2FuY2VsIHNpZ25hbFxuICAgKi9cblxuICBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICAgIGxpc3RlbmVyKHRoaXMucmVhc29uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xpc3RlbmVycyA9IFtsaXN0ZW5lcl07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVuc3Vic2NyaWJlIGZyb20gdGhlIGNhbmNlbCBzaWduYWxcbiAgICovXG5cbiAgdW5zdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICBpZiAoIXRoaXMuX2xpc3RlbmVycykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX2xpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH1cblxuICB0b0Fib3J0U2lnbmFsKCkge1xuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgICBjb25zdCBhYm9ydCA9IChlcnIpID0+IHtcbiAgICAgIGNvbnRyb2xsZXIuYWJvcnQoZXJyKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zdWJzY3JpYmUoYWJvcnQpO1xuXG4gICAgY29udHJvbGxlci5zaWduYWwudW5zdWJzY3JpYmUgPSAoKSA9PiB0aGlzLnVuc3Vic2NyaWJlKGFib3J0KTtcblxuICAgIHJldHVybiBjb250cm9sbGVyLnNpZ25hbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gICAqIGNhbmNlbHMgdGhlIGBDYW5jZWxUb2tlbmAuXG4gICAqL1xuICBzdGF0aWMgc291cmNlKCkge1xuICAgIGxldCBjYW5jZWw7XG4gICAgY29uc3QgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykge1xuICAgICAgY2FuY2VsID0gYztcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgdG9rZW4sXG4gICAgICBjYW5jZWxcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhbmNlbFRva2VuO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuICpcbiAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuXG4gKlxuICogIGBgYGpzXG4gKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fVxuICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuICogIGYuYXBwbHkobnVsbCwgYXJncyk7XG4gKiAgYGBgXG4gKlxuICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uXG4gKlxuICogIGBgYGpzXG4gKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG4gIH07XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBwYXlsb2FkIGlzIGFuIGVycm9yIHRocm93biBieSBBeGlvc1xuICpcbiAqIEBwYXJhbSB7Kn0gcGF5bG9hZCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBwYXlsb2FkIGlzIGFuIGVycm9yIHRocm93biBieSBBeGlvcywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQXhpb3NFcnJvcihwYXlsb2FkKSB7XG4gIHJldHVybiB1dGlscy5pc09iamVjdChwYXlsb2FkKSAmJiAocGF5bG9hZC5pc0F4aW9zRXJyb3IgPT09IHRydWUpO1xufVxuIiwgImNvbnN0IEh0dHBTdGF0dXNDb2RlID0ge1xuICBDb250aW51ZTogMTAwLFxuICBTd2l0Y2hpbmdQcm90b2NvbHM6IDEwMSxcbiAgUHJvY2Vzc2luZzogMTAyLFxuICBFYXJseUhpbnRzOiAxMDMsXG4gIE9rOiAyMDAsXG4gIENyZWF0ZWQ6IDIwMSxcbiAgQWNjZXB0ZWQ6IDIwMixcbiAgTm9uQXV0aG9yaXRhdGl2ZUluZm9ybWF0aW9uOiAyMDMsXG4gIE5vQ29udGVudDogMjA0LFxuICBSZXNldENvbnRlbnQ6IDIwNSxcbiAgUGFydGlhbENvbnRlbnQ6IDIwNixcbiAgTXVsdGlTdGF0dXM6IDIwNyxcbiAgQWxyZWFkeVJlcG9ydGVkOiAyMDgsXG4gIEltVXNlZDogMjI2LFxuICBNdWx0aXBsZUNob2ljZXM6IDMwMCxcbiAgTW92ZWRQZXJtYW5lbnRseTogMzAxLFxuICBGb3VuZDogMzAyLFxuICBTZWVPdGhlcjogMzAzLFxuICBOb3RNb2RpZmllZDogMzA0LFxuICBVc2VQcm94eTogMzA1LFxuICBVbnVzZWQ6IDMwNixcbiAgVGVtcG9yYXJ5UmVkaXJlY3Q6IDMwNyxcbiAgUGVybWFuZW50UmVkaXJlY3Q6IDMwOCxcbiAgQmFkUmVxdWVzdDogNDAwLFxuICBVbmF1dGhvcml6ZWQ6IDQwMSxcbiAgUGF5bWVudFJlcXVpcmVkOiA0MDIsXG4gIEZvcmJpZGRlbjogNDAzLFxuICBOb3RGb3VuZDogNDA0LFxuICBNZXRob2ROb3RBbGxvd2VkOiA0MDUsXG4gIE5vdEFjY2VwdGFibGU6IDQwNixcbiAgUHJveHlBdXRoZW50aWNhdGlvblJlcXVpcmVkOiA0MDcsXG4gIFJlcXVlc3RUaW1lb3V0OiA0MDgsXG4gIENvbmZsaWN0OiA0MDksXG4gIEdvbmU6IDQxMCxcbiAgTGVuZ3RoUmVxdWlyZWQ6IDQxMSxcbiAgUHJlY29uZGl0aW9uRmFpbGVkOiA0MTIsXG4gIFBheWxvYWRUb29MYXJnZTogNDEzLFxuICBVcmlUb29Mb25nOiA0MTQsXG4gIFVuc3VwcG9ydGVkTWVkaWFUeXBlOiA0MTUsXG4gIFJhbmdlTm90U2F0aXNmaWFibGU6IDQxNixcbiAgRXhwZWN0YXRpb25GYWlsZWQ6IDQxNyxcbiAgSW1BVGVhcG90OiA0MTgsXG4gIE1pc2RpcmVjdGVkUmVxdWVzdDogNDIxLFxuICBVbnByb2Nlc3NhYmxlRW50aXR5OiA0MjIsXG4gIExvY2tlZDogNDIzLFxuICBGYWlsZWREZXBlbmRlbmN5OiA0MjQsXG4gIFRvb0Vhcmx5OiA0MjUsXG4gIFVwZ3JhZGVSZXF1aXJlZDogNDI2LFxuICBQcmVjb25kaXRpb25SZXF1aXJlZDogNDI4LFxuICBUb29NYW55UmVxdWVzdHM6IDQyOSxcbiAgUmVxdWVzdEhlYWRlckZpZWxkc1Rvb0xhcmdlOiA0MzEsXG4gIFVuYXZhaWxhYmxlRm9yTGVnYWxSZWFzb25zOiA0NTEsXG4gIEludGVybmFsU2VydmVyRXJyb3I6IDUwMCxcbiAgTm90SW1wbGVtZW50ZWQ6IDUwMSxcbiAgQmFkR2F0ZXdheTogNTAyLFxuICBTZXJ2aWNlVW5hdmFpbGFibGU6IDUwMyxcbiAgR2F0ZXdheVRpbWVvdXQ6IDUwNCxcbiAgSHR0cFZlcnNpb25Ob3RTdXBwb3J0ZWQ6IDUwNSxcbiAgVmFyaWFudEFsc29OZWdvdGlhdGVzOiA1MDYsXG4gIEluc3VmZmljaWVudFN0b3JhZ2U6IDUwNyxcbiAgTG9vcERldGVjdGVkOiA1MDgsXG4gIE5vdEV4dGVuZGVkOiA1MTAsXG4gIE5ldHdvcmtBdXRoZW50aWNhdGlvblJlcXVpcmVkOiA1MTEsXG59O1xuXG5PYmplY3QuZW50cmllcyhIdHRwU3RhdHVzQ29kZSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gIEh0dHBTdGF0dXNDb2RlW3ZhbHVlXSA9IGtleTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBIdHRwU3RhdHVzQ29kZTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuL3V0aWxzLmpzJztcbmltcG9ydCBiaW5kIGZyb20gJy4vaGVscGVycy9iaW5kLmpzJztcbmltcG9ydCBBeGlvcyBmcm9tICcuL2NvcmUvQXhpb3MuanMnO1xuaW1wb3J0IG1lcmdlQ29uZmlnIGZyb20gJy4vY29yZS9tZXJnZUNvbmZpZy5qcyc7XG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi9kZWZhdWx0cy9pbmRleC5qcyc7XG5pbXBvcnQgZm9ybURhdGFUb0pTT04gZnJvbSAnLi9oZWxwZXJzL2Zvcm1EYXRhVG9KU09OLmpzJztcbmltcG9ydCBDYW5jZWxlZEVycm9yIGZyb20gJy4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IENhbmNlbFRva2VuIGZyb20gJy4vY2FuY2VsL0NhbmNlbFRva2VuLmpzJztcbmltcG9ydCBpc0NhbmNlbCBmcm9tICcuL2NhbmNlbC9pc0NhbmNlbC5qcyc7XG5pbXBvcnQge1ZFUlNJT059IGZyb20gJy4vZW52L2RhdGEuanMnO1xuaW1wb3J0IHRvRm9ybURhdGEgZnJvbSAnLi9oZWxwZXJzL3RvRm9ybURhdGEuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi9jb3JlL0F4aW9zRXJyb3IuanMnO1xuaW1wb3J0IHNwcmVhZCBmcm9tICcuL2hlbHBlcnMvc3ByZWFkLmpzJztcbmltcG9ydCBpc0F4aW9zRXJyb3IgZnJvbSAnLi9oZWxwZXJzL2lzQXhpb3NFcnJvci5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gXCIuL2NvcmUvQXhpb3NIZWFkZXJzLmpzXCI7XG5pbXBvcnQgYWRhcHRlcnMgZnJvbSAnLi9hZGFwdGVycy9hZGFwdGVycy5qcyc7XG5pbXBvcnQgSHR0cFN0YXR1c0NvZGUgZnJvbSAnLi9oZWxwZXJzL0h0dHBTdGF0dXNDb2RlLmpzJztcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdENvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICpcbiAqIEByZXR1cm5zIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICBjb25zdCBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuICBjb25zdCBpbnN0YW5jZSA9IGJpbmQoQXhpb3MucHJvdG90eXBlLnJlcXVlc3QsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgYXhpb3MucHJvdG90eXBlIHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgQXhpb3MucHJvdG90eXBlLCBjb250ZXh0LCB7YWxsT3duS2V5czogdHJ1ZX0pO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQsIG51bGwsIHthbGxPd25LZXlzOiB0cnVlfSk7XG5cbiAgLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuICBpbnN0YW5jZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHtcbiAgICByZXR1cm4gY3JlYXRlSW5zdGFuY2UobWVyZ2VDb25maWcoZGVmYXVsdENvbmZpZywgaW5zdGFuY2VDb25maWcpKTtcbiAgfTtcblxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbi8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZFxuY29uc3QgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cbi8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuYXhpb3MuQXhpb3MgPSBBeGlvcztcblxuLy8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuXG5heGlvcy5DYW5jZWxlZEVycm9yID0gQ2FuY2VsZWRFcnJvcjtcbmF4aW9zLkNhbmNlbFRva2VuID0gQ2FuY2VsVG9rZW47XG5heGlvcy5pc0NhbmNlbCA9IGlzQ2FuY2VsO1xuYXhpb3MuVkVSU0lPTiA9IFZFUlNJT047XG5heGlvcy50b0Zvcm1EYXRhID0gdG9Gb3JtRGF0YTtcblxuLy8gRXhwb3NlIEF4aW9zRXJyb3IgY2xhc3NcbmF4aW9zLkF4aW9zRXJyb3IgPSBBeGlvc0Vycm9yO1xuXG4vLyBhbGlhcyBmb3IgQ2FuY2VsZWRFcnJvciBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuYXhpb3MuQ2FuY2VsID0gYXhpb3MuQ2FuY2VsZWRFcnJvcjtcblxuLy8gRXhwb3NlIGFsbC9zcHJlYWRcbmF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufTtcblxuYXhpb3Muc3ByZWFkID0gc3ByZWFkO1xuXG4vLyBFeHBvc2UgaXNBeGlvc0Vycm9yXG5heGlvcy5pc0F4aW9zRXJyb3IgPSBpc0F4aW9zRXJyb3I7XG5cbi8vIEV4cG9zZSBtZXJnZUNvbmZpZ1xuYXhpb3MubWVyZ2VDb25maWcgPSBtZXJnZUNvbmZpZztcblxuYXhpb3MuQXhpb3NIZWFkZXJzID0gQXhpb3NIZWFkZXJzO1xuXG5heGlvcy5mb3JtVG9KU09OID0gdGhpbmcgPT4gZm9ybURhdGFUb0pTT04odXRpbHMuaXNIVE1MRm9ybSh0aGluZykgPyBuZXcgRm9ybURhdGEodGhpbmcpIDogdGhpbmcpO1xuXG5heGlvcy5nZXRBZGFwdGVyID0gYWRhcHRlcnMuZ2V0QWRhcHRlcjtcblxuYXhpb3MuSHR0cFN0YXR1c0NvZGUgPSBIdHRwU3RhdHVzQ29kZTtcblxuYXhpb3MuZGVmYXVsdCA9IGF4aW9zO1xuXG4vLyB0aGlzIG1vZHVsZSBzaG91bGQgb25seSBoYXZlIGEgZGVmYXVsdCBleHBvcnRcbmV4cG9ydCBkZWZhdWx0IGF4aW9zXG4iLCAiaW1wb3J0IGF4aW9zIGZyb20gJy4vbGliL2F4aW9zLmpzJztcblxuLy8gVGhpcyBtb2R1bGUgaXMgaW50ZW5kZWQgdG8gdW53cmFwIEF4aW9zIGRlZmF1bHQgZXhwb3J0IGFzIG5hbWVkLlxuLy8gS2VlcCB0b3AtbGV2ZWwgZXhwb3J0IHNhbWUgd2l0aCBzdGF0aWMgcHJvcGVydGllc1xuLy8gc28gdGhhdCBpdCBjYW4ga2VlcCBzYW1lIHdpdGggZXMgbW9kdWxlIG9yIGNqc1xuY29uc3Qge1xuICBBeGlvcyxcbiAgQXhpb3NFcnJvcixcbiAgQ2FuY2VsZWRFcnJvcixcbiAgaXNDYW5jZWwsXG4gIENhbmNlbFRva2VuLFxuICBWRVJTSU9OLFxuICBhbGwsXG4gIENhbmNlbCxcbiAgaXNBeGlvc0Vycm9yLFxuICBzcHJlYWQsXG4gIHRvRm9ybURhdGEsXG4gIEF4aW9zSGVhZGVycyxcbiAgSHR0cFN0YXR1c0NvZGUsXG4gIGZvcm1Ub0pTT04sXG4gIGdldEFkYXB0ZXIsXG4gIG1lcmdlQ29uZmlnXG59ID0gYXhpb3M7XG5cbmV4cG9ydCB7XG4gIGF4aW9zIGFzIGRlZmF1bHQsXG4gIEF4aW9zLFxuICBBeGlvc0Vycm9yLFxuICBDYW5jZWxlZEVycm9yLFxuICBpc0NhbmNlbCxcbiAgQ2FuY2VsVG9rZW4sXG4gIFZFUlNJT04sXG4gIGFsbCxcbiAgQ2FuY2VsLFxuICBpc0F4aW9zRXJyb3IsXG4gIHNwcmVhZCxcbiAgdG9Gb3JtRGF0YSxcbiAgQXhpb3NIZWFkZXJzLFxuICBIdHRwU3RhdHVzQ29kZSxcbiAgZm9ybVRvSlNPTixcbiAgZ2V0QWRhcHRlcixcbiAgbWVyZ2VDb25maWdcbn1cbiIsICJpbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XG5pbXBvcnQgeyBXb3JkRGF0YSB9IGZyb20gJy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcbmltcG9ydCB7IGRlY3J5cHRBcGlLZXkgfSBmcm9tICcuLi8uLi91dGlscyc7XG5pbXBvcnQgeyByZXRyeUFQSUNhbGwsIEFQSVJldHJ5UG9saWN5IH0gZnJvbSAnLi4vLi4vc2hhcmVkL1JldHJ5UG9saWN5JztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTExNUmVzcG9uc2Uge1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgZGF0YT86IGFueTtcbiAgICBlcnJvcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9ncmVzc0NhbGxiYWNrIHtcbiAgICAoY3VycmVudDogbnVtYmVyLCB0b3RhbDogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdvcmREZXRhaWxEYXRhIHtcbiAgICB3b3JkOiBzdHJpbmc7XG4gICAgcHJvbnVuY2lhdGlvbjogc3RyaW5nO1xuICAgIG1lYW5pbmdzOiBzdHJpbmdbXTtcbiAgICBleGFtcGxlczoge1xuICAgICAgICBlbmdsaXNoOiBzdHJpbmc7XG4gICAgICAgIGtvcmVhbjogc3RyaW5nO1xuICAgIH1bXTtcbiAgICBzaW1pbGFyV29yZHM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgY2xhc3MgTExNU2VydmljZSB7XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzO1xuICAgIHByaXZhdGUgcmV0cnlQb2xpY3k6IEFQSVJldHJ5UG9saWN5O1xuXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncykge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIHRoaXMucmV0cnlQb2xpY3kgPSBuZXcgQVBJUmV0cnlQb2xpY3koe1xuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDMsXG4gICAgICAgICAgICBkZWxheU1zOiAyMDAwLFxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMxMjBcdUQwRERcdUI0MUMgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVDNzU4IEFQSSBcdUQwQTRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QkE1NFx1QzExQ1x1QjREQ1xuICAgIHByaXZhdGUgZ2V0Q3VycmVudEFwaUtleSgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuc2V0dGluZ3MubGxtUHJvdmlkZXI7XG4gICAgICAgIGxldCBlbmNyeXB0ZWRLZXkgPSAnJztcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAocHJvdmlkZXIpIHtcbiAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6XG4gICAgICAgICAgICAgICAgZW5jcnlwdGVkS2V5ID0gdGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhbnRocm9waWMnOlxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZEtleSA9IHRoaXMuc2V0dGluZ3MuYW50aHJvcGljQXBpS2V5O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZ29vZ2xlJzpcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRLZXkgPSB0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGRlY3J5cHRBcGlLZXkoZW5jcnlwdGVkS2V5KTtcbiAgICB9XG5cbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPExMTVJlc3BvbnNlPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKTtcbiAgICAgICAgICAgIGlmICghYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdGVzdFByb21wdCA9ICdIZWxsbywgdGhpcyBpcyBhIHRlc3QgbWVzc2FnZS4gUGxlYXNlIHJlc3BvbmQgd2l0aCBcIk9LXCIgaWYgeW91IGNhbiByZWFkIHRoaXMuJztcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsTExNKHRlc3RQcm9tcHQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6ICdBUEkgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNScgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiByZXNwb25zZS5lcnJvciB8fCAnQVBJIFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjgnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldFdvcmREZXRhaWxzKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IHRoaXMuZ2V0Q3VycmVudEFwaUtleSgpO1xuICAgICAgICAgICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBUEkgXHVEMEE0XHVBQzAwIFx1QzEyNFx1QzgxNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwcm9tcHQgPSB0aGlzLmNyZWF0ZVdvcmREZXRhaWxQcm9tcHQod29yZCk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbExMTShwcm9tcHQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSB0aGlzLnBhcnNlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlLmRhdGEsIHdvcmQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHBhcnNlZERhdGEgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiByZXNwb25zZS5lcnJvciB8fCAnXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTRcdUIzNzAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0TXVsdGlwbGVXb3JkRGV0YWlscyh3b3Jkczogc3RyaW5nW10sIHByb2dyZXNzQ2FsbGJhY2s/OiBQcm9ncmVzc0NhbGxiYWNrKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYXBpS2V5ID0gdGhpcy5nZXRDdXJyZW50QXBpS2V5KCk7XG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh3b3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdUNDOThcdUI5QUNcdUQ1NjAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IEJBVENIX1NJWkUgPSAyMDtcbiAgICAgICAgICAgIGNvbnN0IGFsbFJlc3VsdHM6IFdvcmREZXRhaWxEYXRhW10gPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsQmF0Y2hlcyA9IE1hdGguY2VpbCh3b3Jkcy5sZW5ndGggLyBCQVRDSF9TSVpFKTtcblxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soMCwgd29yZHMubGVuZ3RoLCBgXHVDRDFEICR7d29yZHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjRcdUI5N0MgJHt0b3RhbEJhdGNoZXN9XHVBQzFDIFx1QkMzMFx1Q0U1OFx1Qjg1QyBcdUIwOThcdUIyMDRcdUM1QjQgXHVDQzk4XHVCOUFDXHVENTY5XHVCMkM4XHVCMkU0LmApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSArPSBCQVRDSF9TSVpFKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmF0Y2hOdW1iZXIgPSBNYXRoLmZsb29yKGkgLyBCQVRDSF9TSVpFKSArIDE7XG4gICAgICAgICAgICAgICAgY29uc3QgYmF0Y2hXb3JkcyA9IHdvcmRzLnNsaWNlKGksIGkgKyBCQVRDSF9TSVpFKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGksIHdvcmRzLmxlbmd0aCwgYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfS8ke3RvdGFsQmF0Y2hlc30gXHVDQzk4XHVCOUFDIFx1QzkxMS4uLiAoJHtiYXRjaFdvcmRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0KWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHQgPSB0aGlzLmNyZWF0ZU11bHRpcGxlV29yZERldGFpbFByb21wdChiYXRjaFdvcmRzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxMTE0ocHJvbXB0KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gdGhpcy5wYXJzZU11bHRpcGxlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlLmRhdGEsIGJhdGNoV29yZHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLnBhcnNlZERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soaSArIGJhdGNoV29yZHMubGVuZ3RoLCB3b3Jkcy5sZW5ndGgsIGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0gXHVDNjQ0XHVCOENDOiAke3BhcnNlZERhdGEubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjQgXHVDQzk4XHVCOUFDXHVCNDI4YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0gXHVDMkU0XHVEMzI4OmAsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhpLCB3b3Jkcy5sZW5ndGgsIGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0gXHVDMkU0XHVEMzI4LCBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDXHVCODVDIFx1QzgwNFx1RDY1OC4uLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVDMkU0XHVEMzI4XHVENTVDIFx1QkMzMFx1Q0U1OFx1Qzc1OCBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NDQgXHVBQzFDXHVCQ0M0XHVDODAxXHVDNzNDXHVCODVDIFx1Q0M5OFx1QjlBQyBcdUMyRENcdUIzQzRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGl2aWR1YWxSZXN1bHRzID0gYXdhaXQgdGhpcy5wcm9jZXNzV29yZHNJbmRpdmlkdWFsbHkoYmF0Y2hXb3JkcywgcHJvZ3Jlc3NDYWxsYmFjaywgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxSZXN1bHRzLnB1c2goLi4uaW5kaXZpZHVhbFJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soaSwgd29yZHMubGVuZ3RoLCBgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzYyNFx1Qjk1OCwgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQ1x1Qjg1QyBcdUM4MDRcdUQ2NTguLi5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREIFx1QzJEQyBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDXHVCODVDIFx1RDNGNFx1QkMzMVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRpdmlkdWFsUmVzdWx0cyA9IGF3YWl0IHRoaXMucHJvY2Vzc1dvcmRzSW5kaXZpZHVhbGx5KGJhdGNoV29yZHMsIHByb2dyZXNzQ2FsbGJhY2ssIGkpO1xuICAgICAgICAgICAgICAgICAgICBhbGxSZXN1bHRzLnB1c2goLi4uaW5kaXZpZHVhbFJlc3VsdHMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFx1QkMzMFx1Q0U1OCBcdUFDMDQgXHVDOUU3XHVDNzQwIFx1QzlDMFx1QzVGMCAoQVBJIFx1QzgxQ1x1RDU1QyBcdUJDMjlcdUM5QzApXG4gICAgICAgICAgICAgICAgaWYgKGkgKyBCQVRDSF9TSVpFIDwgd29yZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsYXkoMTAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2sod29yZHMubGVuZ3RoLCB3b3Jkcy5sZW5ndGgsIGBcdUJBQThcdUI0RTAgXHVCQzMwXHVDRTU4IFx1Q0M5OFx1QjlBQyBcdUM2NDRcdUI4Q0MuIFx1Q0QxRCAke2FsbFJlc3VsdHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzIxOFx1QzlEMVx1QjQyOGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogYWxsUmVzdWx0cyB9O1xuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUIyRThcdUM1QjQgXHVDQzk4XHVCOUFDIChcdUJDMzBcdUNFNTggXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUQzRjRcdUJDMzEpXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzV29yZHNJbmRpdmlkdWFsbHkod29yZHM6IHN0cmluZ1tdLCBwcm9ncmVzc0NhbGxiYWNrPzogUHJvZ3Jlc3NDYWxsYmFjaywgc3RhcnRJbmRleDogbnVtYmVyID0gMCk6IFByb21pc2U8V29yZERldGFpbERhdGFbXT4ge1xuICAgICAgICBjb25zdCByZXN1bHRzOiBXb3JkRGV0YWlsRGF0YVtdID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB3b3JkID0gd29yZHNbaV07XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBzdGFydEluZGV4ICsgaTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGN1cnJlbnRJbmRleCwgc3RhcnRJbmRleCArIHdvcmRzLmxlbmd0aCwgYFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUM6IFwiJHt3b3JkfVwiYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRXb3JkRGV0YWlscyh3b3JkKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIiBcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4OmAsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVDMkU0XHVEMzI4XHVENTVDIFx1QjJFOFx1QzVCNFx1QzVEMCBcdUIzMDBcdUQ1NUMgXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMwRERcdUMxMzFcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmQudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVDQzk4XHVCOUFDIFx1QzJFNFx1RDMyOCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQyBcdUFDMDQgXHVDOUU3XHVDNzQwIFx1QzlDMFx1QzVGMFxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsYXkoNTAwKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1ODpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgd29yZDogd29yZC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVDQzk4XHVCOUFDIFx1QzYyNFx1Qjk1OCddLFxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogW10sXG4gICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogW11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuXG4gICAgLy8gXHVDOUMwXHVDNUYwIFx1RDU2OFx1QzIxOFxuICAgIHByaXZhdGUgZGVsYXkobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVXb3JkRGV0YWlsUHJvbXB0KHdvcmQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgXHVCMkU0XHVDNzRDIFx1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUM1RDAgXHVCMzAwXHVENTVDIFx1QzBDMVx1QzEzOCBcdUM4MTVcdUJDRjRcdUI5N0MgSlNPTiBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUMgXHVDODFDXHVBQ0Y1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LlxuXG5cdUM2OTRcdUFENkNcdUMwQUNcdUQ1NkQ6XG4xLiBcdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzggKElQQSBcdUQ2MTVcdUMyREQpXG4yLiBcdUQ1NUNcdUFFMDAgXHVCNzNCXHVCNEU0IChcdUM1RUNcdUI3RUMgXHVBQzFDXHVDNzdDIFx1QzIxOCBcdUM3ODhcdUM3NEMpXG4zLiBcdUFDMDEgXHVCNzNCXHVCQ0M0XHVCODVDIFx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzhcdUFDRkMgXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAoXHVBQzAxIFx1QjczQlx1QjJGOSAyLTNcdUFDMUNcdUM3NTggXHVDNjA4XHVCQjM4IFx1QzgxQ1x1QUNGNSlcbjQuIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0XHVCNEU0XG5cblx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyREQ6XG57XG4gIFwid29yZFwiOiBcIiR7d29yZH1cIixcbiAgXCJwcm9udW5jaWF0aW9uXCI6IFwiL1x1QkMxQ1x1Qzc0Q1x1QUUzMFx1RDYzOC9cIixcbiAgXCJtZWFuaW5nc1wiOiBbXCJcdUI3M0IxXCIsIFwiXHVCNzNCMlwiLCBcIlx1QjczQjNcIl0sXG4gIFwiZXhhbXBsZXNcIjogW1xuICAgIHtcbiAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggMVwiLFxuICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDFcIlxuICAgIH0sXG4gICAge1xuICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAyXCIsIFxuICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDJcIlxuICAgIH0sXG4gICAge1xuICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAzXCIsXG4gICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgM1wiXG4gICAgfVxuICBdLFxuICBcInNpbWlsYXJXb3Jkc1wiOiBbXCJcdUM3MjBcdUMwQUNcdUIyRThcdUM1QjQxXCIsIFwiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0MlwiLCBcIlx1QzcyMFx1QzBBQ1x1QjJFOFx1QzVCNDNcIl1cbn1cblxuSlNPTiBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUNcdUI5Q0MgXHVDNzUxXHVCMkY1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LiBcdUIyRTRcdUI5NzggXHVDMTI0XHVCQTg1XHVDNzQwIFx1RDNFQ1x1RDU2OFx1RDU1OFx1QzlDMCBcdUI5QzhcdUMxMzhcdUM2OTQuYDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZU11bHRpcGxlV29yZERldGFpbFByb21wdCh3b3Jkczogc3RyaW5nW10pOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB3b3JkTGlzdCA9IHdvcmRzLmpvaW4oJywgJyk7XG4gICAgICAgIHJldHVybiBgXHVCMkU0XHVDNzRDIFx1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjRcdUI0RTRcdUM1RDAgXHVCMzAwXHVENTVDIFx1QzBDMVx1QzEzOCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVDODE1XHVENjU1XHVENTVDIEpTT04gXHVENjE1XHVDMkREXHVDNzNDXHVCODVDIFx1QzgxQ1x1QUNGNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NDogJHt3b3JkTGlzdH1cblxuXHVDNjk0XHVBRDZDXHVDMEFDXHVENTZEOlxuLSBcdUFDMDEgXHVCMkU4XHVDNUI0XHVDNUQwIFx1QjMwMFx1RDU3NCBcdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzggKElQQSBcdUQ2MTVcdUMyREQpLCBcdUQ1NUNcdUFFMDAgXHVCNzNCXHVCNEU0LCBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4XHVBQ0ZDIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQsIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0XHVCNEU0XHVDNzQ0IFx1RDNFQ1x1RDU2OFxuLSBcdUFDMDEgXHVCNzNCXHVCQ0M0XHVCODVDIDItM1x1QUMxQ1x1Qzc1OCBcdUM2MDhcdUJCMzhcdUM3NDQgXHVDODFDXHVBQ0Y1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0XG4tIEpTT04gXHVENjE1XHVDMkREXHVCOUNDIFx1Qzc1MVx1QjJGNVx1RDU1OFx1QUNFMCBcdUIyRTRcdUI5NzggXHVDMTI0XHVCQTg1XHVDNzQwIFx1RDNFQ1x1RDU2OFx1RDU1OFx1QzlDMCBcdUI5QzhcdUMxMzhcdUM2OTRcbi0gXHVCQUE4XHVCNEUwIFx1QkIzOFx1Qzc5MFx1QzVGNFx1Qzc0MCBcdUM3NzRcdUM5MTEgXHVCNTMwXHVDNjM0XHVENDVDXHVCODVDIFx1QUMxMFx1QzJGOFx1QzhGQ1x1QzEzOFx1QzY5NFxuLSBcdUJDMzBcdUM1RjRcdUFDRkMgXHVBQzFEXHVDQ0I0XHVCMjk0IFx1QzgxNVx1RDY1NVx1RDU1QyBKU09OIFx1QkIzOFx1QkM5NVx1Qzc0NCBcdUI1MzBcdUI5NzRcdUMxMzhcdUM2OTRcblxuXHVDNzUxXHVCMkY1IFx1RDYxNVx1QzJERDpcbltcbiAge1xuICAgIFwid29yZFwiOiBcIlx1QjJFOFx1QzVCNDFcIixcbiAgICBcInByb251bmNpYXRpb25cIjogXCIvXHVCQzFDXHVDNzRDXHVBRTMwXHVENjM4L1wiLFxuICAgIFwibWVhbmluZ3NcIjogW1wiXHVCNzNCMVwiLCBcIlx1QjczQjJcIl0sXG4gICAgXCJleGFtcGxlc1wiOiBbXG4gICAgICB7XG4gICAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggMVwiLFxuICAgICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgMVwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDJcIixcbiAgICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDJcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAzXCIsXG4gICAgICAgIFwia29yZWFuXCI6IFwiXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAzXCJcbiAgICAgIH1cbiAgICBdLFxuICAgIFwic2ltaWxhcldvcmRzXCI6IFtcIlx1QzcyMFx1QzBBQ1x1QjJFOFx1QzVCNDFcIiwgXCJcdUM3MjBcdUMwQUNcdUIyRThcdUM1QjQyXCJdXG4gIH1cbl1cblxuXHVDOTExXHVDNjk0OiBKU09OIFx1RDYxNVx1QzJERFx1QjlDQyBcdUM3NTFcdUIyRjVcdUQ1NThcdUFDRTAgXHVCMkU0XHVCOTc4IFx1RDE0RFx1QzJBNFx1RDJCOFx1QjI5NCBcdUQzRUNcdUQ1NjhcdUQ1NThcdUM5QzAgXHVCOUM4XHVDMTM4XHVDNjk0LmA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsTExNKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnNldHRpbmdzLmxsbVByb3ZpZGVyO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnb3BlbmFpJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2FsbE9wZW5BSShwcm9tcHQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNhbGxBbnRocm9waWMocHJvbXB0KTtcbiAgICAgICAgICAgICAgICBjYXNlICdnb29nbGUnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jYWxsR29vZ2xlKHByb21wdCk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDOUMwXHVDNkQwXHVENTU4XHVDOUMwIFx1QzU0QVx1QjI5NCBMTE0gXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVDNzg1XHVCMkM4XHVCMkU0LicgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsT3BlbkFJKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXRyeUFQSUNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5nZXRDdXJyZW50QXBpS2V5KCl9YFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5zZXR0aW5ncy5sbG1Nb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBwcm9tcHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiA0MDAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCAnT3BlbkFJIEFQSSBcdUQ2MzhcdUNEOUMgXHVDMkU0XHVEMzI4JyB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGRhdGEuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDNzUxXHVCMkY1IFx1QjBCNFx1QzZBOVx1Qzc3NCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjb250ZW50IH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY2FsbEFudGhyb3BpYyhwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcbiAgICAgICAgLy8gTm9kZS5qcyBcdUQ2NThcdUFDQkRcdUM1RDBcdUMxMUNcdUI5Q0MgXHVCM0Q5XHVDNzkxXHVENTU4XHVCM0M0XHVCODVEIFx1Q0M5OFx1QjlBQ1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KT8ucHJvY2Vzcz8udHlwZSA9PT0gJ3JlbmRlcmVyJykpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KFxuICAgICAgICAgICAgICAgICAgICAnaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbS92MS9tZXNzYWdlcycsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLnNldHRpbmdzLmxsbU1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3Rva2VuczogMzAwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBwcm9tcHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd4LWFwaS1rZXknOiB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYW50aHJvcGljLXZlcnNpb24nOiAnMjAyMy0wNi0wMSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHJlc3BvbnNlLmRhdGEuY29udGVudFswXT8udGV4dDtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDNzUxXHVCMkY1IFx1QjBCNFx1QzZBOVx1Qzc3NCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjb250ZW50IH07XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwIFx1RDY1OFx1QUNCRFx1QzVEMFx1QzExQ1x1QjI5NCBcdUM1NDhcdUIwQjQgXHVCQTU0XHVDMkRDXHVDOUMwIFx1QkMxOFx1RDY1OFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogJ0FudGhyb3BpYyBBUElcdUIyOTQgXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwIFx1RDY1OFx1QUNCRFx1QzVEMFx1QzExQyBcdUM5QzFcdUM4MTEgXHVENjM4XHVDRDlDXHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QjM3MFx1QzJBNFx1RDA2Q1x1RDFCMSBcdUM1NzEoT2JzaWRpYW4pXHVDNUQwXHVDMTFDXHVCOUNDIFx1QjNEOVx1Qzc5MVx1RDU2OVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsR29vZ2xlKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXRyeUFQSUNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goYGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvJHt0aGlzLnNldHRpbmdzLmxsbU1vZGVsfTpnZW5lcmF0ZUNvbnRlbnQ/a2V5PSR7dGhpcy5nZXRDdXJyZW50QXBpS2V5KCl9YCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50czogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0czogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcHJvbXB0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLjMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heE91dHB1dFRva2VuczogNDAwMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JEYXRhLmVycm9yPy5tZXNzYWdlIHx8ICdHb29nbGUgQVBJIFx1RDYzOFx1Q0Q5QyBcdUMyRTRcdUQzMjgnIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YS5jYW5kaWRhdGVzWzBdPy5jb250ZW50Py5wYXJ0c1swXT8udGV4dDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDNzUxXHVCMkY1IFx1QjBCNFx1QzZBOVx1Qzc3NCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjb250ZW50IH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcGFyc2VXb3JkRGV0YWlsUmVzcG9uc2UocmVzcG9uc2U6IHN0cmluZywgb3JpZ2luYWxXb3JkOiBzdHJpbmcpOiBXb3JkRGV0YWlsRGF0YSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBKU09OIFx1Qzc1MVx1QjJGNVx1QzVEMFx1QzExQyBKU09OIFx1QkQ4MFx1QkQ4NFx1QjlDQyBcdUNEOTRcdUNEOUNcbiAgICAgICAgICAgIGNvbnN0IGpzb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKTtcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKU09OIFx1RDYxNVx1QzJERFx1Qzc1OCBcdUM3NTFcdUIyRjVcdUM3NDQgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUM2MDhcdUJCMzggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUM4MFx1Qzk5RCBcdUJDMEYgXHVDODE1XHVCOUFDXG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0ZWRFeGFtcGxlcyA9IHRoaXMudmFsaWRhdGVFeGFtcGxlcyhqc29uRGF0YS5leGFtcGxlcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgd29yZDoganNvbkRhdGEud29yZCB8fCBvcmlnaW5hbFdvcmQsXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjoganNvbkRhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcbiAgICAgICAgICAgICAgICBtZWFuaW5nczoganNvbkRhdGEubWVhbmluZ3MgfHwgW10sXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IHZhbGlkYXRlZEV4YW1wbGVzLFxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczoganNvbkRhdGEuc2ltaWxhcldvcmRzIHx8IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gSlNPTiBcdUQzMENcdUMyRjEgXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUFFMzBcdUJDRjggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QkMxOFx1RDY1OFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB3b3JkOiBvcmlnaW5hbFdvcmQsXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJycsXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVDNzU4XHVCQkY4XHVCOTdDIFx1RDMwQ1x1QzJGMVx1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LiddLFxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXSxcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVDNjA4XHVCQjM4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUFDODBcdUM5OUQgXHVCQzBGIFx1QzgxNVx1QjlBQ1xuICAgIHByaXZhdGUgdmFsaWRhdGVFeGFtcGxlcyhleGFtcGxlczogYW55W10pOiB7IGVuZ2xpc2g6IHN0cmluZzsga29yZWFuOiBzdHJpbmc7IH1bXSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShleGFtcGxlcykpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzOiB7IGVuZ2xpc2g6IHN0cmluZzsga29yZWFuOiBzdHJpbmc7IH1bXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBleGFtcGxlIG9mIGV4YW1wbGVzKSB7XG4gICAgICAgICAgICBpZiAoZXhhbXBsZSAmJiB0eXBlb2YgZXhhbXBsZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmdsaXNoID0gZXhhbXBsZS5lbmdsaXNoIHx8IGV4YW1wbGUuZW5nbGlzaF90ZXh0IHx8IGV4YW1wbGUudGV4dCB8fCAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBrb3JlYW4gPSBleGFtcGxlLmtvcmVhbiB8fCBleGFtcGxlLmtvcmVhbl90ZXh0IHx8IGV4YW1wbGUudHJhbnNsYXRpb24gfHwgJyc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGVuZ2xpc2gudHJpbSgpICYmIGtvcmVhbi50cmltKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVkRXhhbXBsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiBlbmdsaXNoLnRyaW0oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjoga29yZWFuLnRyaW0oKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRFeGFtcGxlcztcbiAgICB9XG5cbiAgICBwcml2YXRlIHBhcnNlTXVsdGlwbGVXb3JkRGV0YWlsUmVzcG9uc2UocmVzcG9uc2U6IHN0cmluZywgb3JpZ2luYWxXb3Jkczogc3RyaW5nW10pOiBXb3JkRGV0YWlsRGF0YVtdIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gMS4gXHVDNjQ0XHVDODA0XHVENTVDIEpTT04gXHVCQzMwXHVDNUY0XHVDNzQ0IFx1Q0MzRVx1QzU0NFx1QkNGNFx1QUUzMFxuICAgICAgICAgICAgbGV0IGpzb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXFtbXFxzXFxTXSpcXF0vKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFqc29uTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAvLyAyLiBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVCQzMwXHVDNUY0XHVDNzc0IFx1QzVDNlx1QzczQ1x1QkE3NCBcdUFDMUNcdUJDQzQgXHVBQzFEXHVDQ0I0XHVCNEU0XHVDNzQ0IFx1Q0MzRVx1QzU0NFx1QzExQyBcdUJDMzBcdUM1RjRcdUI4NUMgXHVCOUNDXHVCNEU0XHVBRTMwXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0TWF0Y2hlcyA9IHJlc3BvbnNlLm1hdGNoKC9cXHtbXnt9XSpcIndvcmRcIltee31dKlxcfS9nKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0TWF0Y2hlcyAmJiBvYmplY3RNYXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QganNvblN0cmluZyA9ICdbJyArIG9iamVjdE1hdGNoZXMuam9pbignLCcpICsgJ10nO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbkRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0pzb25EYXRhKGpzb25EYXRhLCBvcmlnaW5hbFdvcmRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVCQjM0XHVDMkRDXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gMy4gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjRcdUFFNENcdUM5QzAgXHVDQzNFXHVBRTMwXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdENvbXBsZXRlTWF0Y2ggPSByZXNwb25zZS5tYXRjaCgvXFxbW1xcc1xcU10qXFx9KD89XFxzKiQpLyk7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RDb21wbGV0ZU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb25NYXRjaCA9IFtsYXN0Q29tcGxldGVNYXRjaFswXSArICddJ107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKU09OIFx1QkMzMFx1QzVGNFx1Qzc0NCBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDQuIEpTT04gXHVEMzBDXHVDMkYxIFx1QzJEQ1x1QjNDNCAtIFx1QzgxMFx1QzlDNFx1QzgwMVx1QzczQ1x1Qjg1QyBcdUMyRENcdUIzQzRcbiAgICAgICAgICAgIGxldCBqc29uRGF0YTtcbiAgICAgICAgICAgIGxldCBwYXJzZWRMZW5ndGggPSAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGpzb25EYXRhID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pO1xuICAgICAgICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIEpTT04gXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVDODEwXHVDOUM0XHVDODAxIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyA1LiBcdUM4MTBcdUM5QzRcdUM4MDEgXHVEMzBDXHVDMkYxIFx1QzJEQ1x1QjNDNCAtIFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjRcdUI0RTRcdUI5Q0MgXHVEMzBDXHVDMkYxXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMucGFyc2VJbmNyZW1lbnRhbEpzb24ocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIDYuIEpTT04gXHVCQ0Y1XHVBRDZDIFx1QzJEQ1x1QjNDNFxuICAgICAgICAgICAgICAgIGNvbnN0IGZpeGVkSnNvbiA9IHRoaXMuZml4SnNvblN0cmluZyhqc29uTWF0Y2hbMF0pO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb25EYXRhID0gSlNPTi5wYXJzZShmaXhlZEpzb24pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHNlY29uZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSlNPTiBcdUQzMENcdUMyRjEgXHVCQzBGIFx1QkNGNVx1QUQ2QyBcdUMyRTRcdUQzMjgnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShqc29uRGF0YSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1Qzc1MVx1QjJGNVx1Qzc3NCBcdUJDMzBcdUM1RjQgXHVENjE1XHVDMkREXHVDNzc0IFx1QzU0NFx1QjJEOVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0pzb25EYXRhKGpzb25EYXRhLCBvcmlnaW5hbFdvcmRzKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNUVDXHVCN0VDIFx1QjJFOFx1QzVCNCBcdUM3NTFcdUIyRjUgXHVEMzBDXHVDMkYxIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUM2RDBcdUJDRjggXHVDNzUxXHVCMkY1OicsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERCBcdUMyREMgXHVCRTQ4IFx1QUNCMFx1QUNGQyBcdUJDMThcdUQ2NThcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbFdvcmRzLm1hcCh3b3JkID0+ICh7XG4gICAgICAgICAgICAgICAgd29yZDogd29yZC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbXSxcbiAgICAgICAgICAgICAgICBleGFtcGxlczogW10sXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVDODEwXHVDOUM0XHVDODAxIEpTT04gXHVEMzBDXHVDMkYxIC0gXHVDNjQ0XHVDODA0XHVENTVDIFx1QUMxRFx1Q0NCNFx1QjRFNFx1QjlDQyBcdUQzMENcdUMyRjFcbiAgICBwcml2YXRlIHBhcnNlSW5jcmVtZW50YWxKc29uKHJlc3BvbnNlOiBzdHJpbmcpOiBXb3JkRGV0YWlsRGF0YVtdIHtcbiAgICAgICAgY29uc3QgcmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVDNjQ0XHVDODA0XHVENTVDIFx1QUMxRFx1Q0NCNFx1QjRFNFx1Qzc0NCBcdUNDM0VcdUFFMzAgKFx1QzYwOFx1QkIzOCBcdUQ1NDRcdUI0REMgXHVEM0VDXHVENTY4KVxuICAgICAgICBjb25zdCBvYmplY3RSZWdleCA9IC9cXHtbXnt9XSpcIndvcmRcIltee31dKlwicHJvbnVuY2lhdGlvblwiW157fV0qXCJtZWFuaW5nc1wiW157fV0qXCJleGFtcGxlc1wiW157fV0qXCJzaW1pbGFyV29yZHNcIltee31dKlxcfS9nO1xuICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgIFxuICAgICAgICB3aGlsZSAoKG1hdGNoID0gb2JqZWN0UmVnZXguZXhlYyhyZXNwb25zZSkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdERhdGEgPSBKU09OLnBhcnNlKG1hdGNoWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0RGF0YSAmJiBvYmplY3REYXRhLndvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsaWRhdGVkRXhhbXBsZXMgPSB0aGlzLnZhbGlkYXRlRXhhbXBsZXMob2JqZWN0RGF0YS5leGFtcGxlcyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YTogV29yZERldGFpbERhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JkOiBvYmplY3REYXRhLndvcmQudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IG9iamVjdERhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBBcnJheS5pc0FycmF5KG9iamVjdERhdGEubWVhbmluZ3MpID8gb2JqZWN0RGF0YS5tZWFuaW5ncyA6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IHZhbGlkYXRlZEV4YW1wbGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBBcnJheS5pc0FycmF5KG9iamVjdERhdGEuc2ltaWxhcldvcmRzKSA/IG9iamVjdERhdGEuc2ltaWxhcldvcmRzIDogW11cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHdvcmREYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gXHVBQzFDXHVCQ0M0IFx1QUMxRFx1Q0NCNCBcdUQzMENcdUMyRjEgXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUJCMzRcdUMyRENcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuXG4gICAgLy8gV29yZERldGFpbERhdGFcdUI5N0MgV29yZERhdGFcdUI4NUMgXHVCQ0MwXHVENjU4XHVENTU4XHVCMjk0IFx1QkE1NFx1QzExQ1x1QjREQ1xuICAgIGNvbnZlcnRUb1dvcmREYXRhKHdvcmREZXRhaWw6IFdvcmREZXRhaWxEYXRhKTogV29yZERhdGEge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd29yZDogd29yZERldGFpbC53b3JkLFxuICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZERldGFpbC5wcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgbWVhbmluZ3M6IHdvcmREZXRhaWwubWVhbmluZ3MsXG4gICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREZXRhaWwuc2ltaWxhcldvcmRzLFxuICAgICAgICAgICAgZXhhbXBsZXM6IHdvcmREZXRhaWwuZXhhbXBsZXNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBKU09OIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUNDOThcdUI5QUNcbiAgICBwcml2YXRlIHByb2Nlc3NKc29uRGF0YShqc29uRGF0YTogYW55W10sIG9yaWdpbmFsV29yZHM6IHN0cmluZ1tdKTogV29yZERldGFpbERhdGFbXSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHM6IFdvcmREZXRhaWxEYXRhW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBqc29uRGF0YSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmIGl0ZW0ud29yZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzID0gdGhpcy52YWxpZGF0ZUV4YW1wbGVzKGl0ZW0uZXhhbXBsZXMpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhOiBXb3JkRGV0YWlsRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgd29yZDogaXRlbS53b3JkLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IGl0ZW0ucHJvbnVuY2lhdGlvbiB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IEFycmF5LmlzQXJyYXkoaXRlbS5tZWFuaW5ncykgPyBpdGVtLm1lYW5pbmdzIDogW10sXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB2YWxpZGF0ZWRFeGFtcGxlcyxcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBBcnJheS5pc0FycmF5KGl0ZW0uc2ltaWxhcldvcmRzKSA/IGl0ZW0uc2ltaWxhcldvcmRzIDogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh3b3JkRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG5cbiAgICAvLyBKU09OIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUJDRjVcdUFENkNcbiAgICBwcml2YXRlIGZpeEpzb25TdHJpbmcoanNvblN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGZpeGVkID0ganNvblN0cmluZztcbiAgICAgICAgXG4gICAgICAgIC8vIDEuIFx1QkQ4OFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjQgXHVDODFDXHVBQzcwIChcdUI5QzhcdUM5QzBcdUI5QzkgXHVDMjdDXHVENDVDIFx1QjRBNFx1Qzc1OCBcdUJEODhcdUM2NDRcdUM4MDRcdUQ1NUMgXHVCRDgwXHVCRDg0KVxuICAgICAgICBjb25zdCBsYXN0Q29tcGxldGVPYmplY3QgPSBmaXhlZC5tYXRjaCgvLipcXH0oPz0sP1xccyokKS8pO1xuICAgICAgICBpZiAobGFzdENvbXBsZXRlT2JqZWN0KSB7XG4gICAgICAgICAgICBmaXhlZCA9IGxhc3RDb21wbGV0ZU9iamVjdFswXSArICddJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gMi4gXHVDOTExXHVCQ0Y1XHVCNDFDIFx1QzI3Q1x1RDQ1QyBcdUM4MUNcdUFDNzBcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8sXFxzKiwvZywgJywnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDMuIFx1QkMzMFx1QzVGNCBcdUIwNURcdUM3NTggXHVDMjdDXHVENDVDIFx1QzgxQ1x1QUM3MFxuICAgICAgICBmaXhlZCA9IGZpeGVkLnJlcGxhY2UoLyxcXHMqXFxdL2csICddJyk7XG4gICAgICAgIFxuICAgICAgICAvLyA0LiBcdUFDMURcdUNDQjQgXHVCMDVEXHVDNzU4IFx1QzI3Q1x1RDQ1QyBcdUM4MUNcdUFDNzBcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8sXFxzKlxcfS9nLCAnfScpO1xuICAgICAgICBcbiAgICAgICAgLy8gNS4gXHVCQjM4XHVDNzkwXHVDNUY0IFx1QjBCNFx1Qzc1OCBcdUM3NzRcdUMyQTRcdUNGMDBcdUM3NzRcdUQ1MDRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNzQwIFx1QjUzMFx1QzYzNFx1RDQ1QyBcdUNDOThcdUI5QUNcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8oPzwhXFxcXClcIi9nLCAobWF0Y2gsIG9mZnNldCkgPT4ge1xuICAgICAgICAgICAgLy8gXHVCQjM4XHVDNzkwXHVDNUY0IFx1QjBCNFx1QkQ4MFx1Qzc1OCBcdUI1MzBcdUM2MzRcdUQ0NUNcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XG4gICAgICAgICAgICBjb25zdCBiZWZvcmUgPSBmaXhlZC5zdWJzdHJpbmcoMCwgb2Zmc2V0KTtcbiAgICAgICAgICAgIGNvbnN0IHF1b3RlQ291bnQgPSAoYmVmb3JlLm1hdGNoKC9cIi9nKSB8fCBbXSkubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIHF1b3RlQ291bnQgJSAyID09PSAwID8gbWF0Y2ggOiAnXFxcXFwiJztcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZml4ZWQ7XG4gICAgfVxuXG59ICIsICJpbXBvcnQgeyBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZnJvbSAnLi4vLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCB9IGZyb20gJy4uLy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcbmltcG9ydCB7IFRUU1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS90dHMvVFRTSW50ZXJmYWNlJztcbmltcG9ydCB7IFRUU1NlcnZpY2VGYWN0b3J5IH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvdHRzL1RUU1NlcnZpY2UnO1xuaW1wb3J0IHsgU3BhY2VkUmVwZXRpdGlvblNlcnZpY2UsIFJldmlld1Nlc3Npb24gfSBmcm9tICcuLi8uLi8uLi9jb3JlL3NlcnZpY2VzL1NwYWNlZFJlcGV0aXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFJldmlld1Jlc3BvbnNlIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9hbGdvcml0aG1zL1NwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0nO1xuXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XG4gICAgY3VycmVudENhcmRJbmRleCA9IDA7XG4gICAgY2FyZHM6IFZvY2FidWxhcnlDYXJkW10gPSBbXTtcbiAgICBzaG93QW5zd2VyID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBrZXlkb3duSGFuZGxlcjogKChlOiBLZXlib2FyZEV2ZW50KSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgdHRzU2VydmljZTogVFRTU2VydmljZTtcbiAgICBwcml2YXRlIHNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlOiBTcGFjZWRSZXBldGl0aW9uU2VydmljZTtcbiAgICBwcml2YXRlIGN1cnJlbnRTZXNzaW9uOiBSZXZpZXdTZXNzaW9uIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlID0gVFRTU2VydmljZUZhY3RvcnkuY3JlYXRlVFRTU2VydmljZShwbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlID0gbmV3IFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlKCk7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICAvLyBcdUM4MDBcdUM3QTVcdUI0MUMgXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcbiAgICAgICAgY29uc3QgYWxsQ2FyZHMgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNwYWNlZCBSZXBldGl0aW9uOiBcdUJDRjVcdUMyQjVcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTVDIFx1Q0U3NFx1QjREQ1x1QjRFNFx1QjlDQyBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcbiAgICAgICAgdGhpcy5jYXJkcyA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UuZ2V0Q2FyZHNGb3JSZXZpZXcoYWxsQ2FyZHMpO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmNhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zaG93Tm9DYXJkc0ZvclJldmlldyhhbGxDYXJkcy5sZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QzEzOFx1QzE1OCBcdUMyRENcdUM3OTFcbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbiA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2Uuc3RhcnRSZXZpZXdTZXNzaW9uKHRoaXMuY2FyZHMpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1QzIxQ1x1QzExQyBcdUMxMUVcdUFFMzAgKFx1QzBDOCBcdUNFNzRcdUI0RENcdUFDMDAgXHVCQTNDXHVDODAwIFx1QzYyNFx1QjNDNFx1Qjg1RCBcdUM4NzBcdUM4MTUgXHVBQzAwXHVCMkE1KVxuICAgICAgICB0aGlzLnNodWZmbGVDYXJkcygpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcbiAgICAgICAgLy8gXHVEMEE0XHVCQ0Y0XHVCNERDIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI0RjFcdUI4NURcbiAgICAgICAgdGhpcy5rZXlkb3duSGFuZGxlciA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2hvd0Fuc3dlcikge1xuICAgICAgICAgICAgICAgIGlmIChlLmNvZGUgPT09ICdTcGFjZScgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmV2aWV3KCdoYXJkJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJzInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmV2aWV3KCdnb29kJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJzMnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmV2aWV3KCdlYXN5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5ZG93bkhhbmRsZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2h1ZmZsZUNhcmRzKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5jYXJkcy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgICAgICAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgICAgICAgICBbdGhpcy5jYXJkc1tpXSwgdGhpcy5jYXJkc1tqXV0gPSBbdGhpcy5jYXJkc1tqXSwgdGhpcy5jYXJkc1tpXV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dOb1dvcmRzTWVzc2FnZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbGVhcm5pbmctbW9kYWwnKTtcblxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZXZpZXctbW9kYWwtaGVpZ2h0JywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHR9dmhgKTtcblxuICAgICAgICBjb25zdCBub1dvcmRzRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbm8td29yZHMtbWVzc2FnZScgfSk7XG4gICAgICAgIG5vV29yZHNFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ1NTlcdUMyQjVcdUQ1NjAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNCcgfSk7XG4gICAgICAgIG5vV29yZHNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1QzVEMCBcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTVDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IG5vV29yZHNFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkVCXHVBRTMwJyB9KTtcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkQ2xhc3MoJ2Nsb3NlLWJ1dHRvbicpO1xuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93Tm9DYXJkc0ZvclJldmlldyh0b3RhbENhcmRzOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbGVhcm5pbmctbW9kYWwnKTtcblxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZXZpZXctbW9kYWwtaGVpZ2h0JywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHR9dmhgKTtcblxuICAgICAgICBjb25zdCBub1Jldmlld0VsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ25vLXJldmlldy1tZXNzYWdlJyB9KTtcbiAgICAgICAgbm9SZXZpZXdFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0NcdURGODkgXHVDNjI0XHVCMjk4XHVDNzU4IFx1QkNGNVx1QzJCNSBcdUM2NDRcdUI4Q0MhJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0b3RhbENhcmRzID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLmNhbGN1bGF0ZVN0YXRpc3RpY3ModGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCkpO1xuICAgICAgICAgICAgbm9SZXZpZXdFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1Q0QxRCAke3RvdGFsQ2FyZHN9XHVBQzFDXHVDNzU4IFx1QjJFOFx1QzVCNCBcdUM5MTEgXHVDNjI0XHVCMjk4IFx1QkNGNVx1QzJCNVx1RDU2MCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmAgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1QkNGNVx1QzJCNSBcdUM2MDhcdUM4MTUgXHVDODE1XHVCQ0Y0XG4gICAgICAgICAgICBjb25zdCBuZXh0RHVlQ2FyZHMgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLmdldENhcmRzRHVlSW5EYXlzKFxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxXb3JkcygpLCBcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKG5leHREdWVDYXJkcyA+IDApIHtcbiAgICAgICAgICAgICAgICBub1Jldmlld0VsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYFx1QjBCNFx1Qzc3QyBcdUJDRjVcdUMyQjUgXHVDNjA4XHVDODE1OiAke25leHREdWVDYXJkc31cdUFDMUMgXHVCMkU4XHVDNUI0YCBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gXHVENTU5XHVDMkI1IFx1RDFCNVx1QUNDNFxuICAgICAgICAgICAgY29uc3Qgc3RhdHNFbCA9IG5vUmV2aWV3RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3R1ZHktc3RhdHMnIH0pO1xuICAgICAgICAgICAgc3RhdHNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ1NTlcdUMyQjUgXHVENjA0XHVENjY5JyB9KTtcbiAgICAgICAgICAgIHN0YXRzRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBcdTIwMjIgXHVDMEM4IFx1QjJFOFx1QzVCNDogJHtzdGF0cy5vdmVyYWxsLm5ld0NhcmRzfVx1QUMxQ2AgfSk7XG4gICAgICAgICAgICBzdGF0c0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgXHUyMDIyIFx1RDU1OVx1QzJCNSBcdUM5MTE6ICR7c3RhdHMub3ZlcmFsbC5sZWFybmluZ0NhcmRzfVx1QUMxQ2AgfSk7XG4gICAgICAgICAgICBzdGF0c0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgXHUyMDIyIFx1QzY0NFx1QjhDQzogJHtzdGF0cy5vdmVyYWxsLm1hdHVyZUNhcmRzfVx1QUMxQ2AgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBub1Jldmlld0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1XHVDNUQwIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NUMgXHVENkM0IFx1QjJFNFx1QzJEQyBcdUMyRENcdUIzQzRcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBub1Jldmlld0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnIH0pO1xuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRDbGFzcygnY2xvc2UtYnV0dG9uJyk7XG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dDYXJkKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2FyZEluZGV4ID49IHRoaXMuY2FyZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dDb21wbGV0aW9uTWVzc2FnZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY3VycmVudENhcmQgPSB0aGlzLmNhcmRzW3RoaXMuY3VycmVudENhcmRJbmRleF07XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2b2NhYnVsYXJ5LWxlYXJuaW5nLW1vZGFsJyk7XG5cbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxuICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmV2aWV3LW1vZGFsLWhlaWdodCcsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0fXZoYCk7XG5cbiAgICAgICAgY29uc3QgY2FyZENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2b2NhYnVsYXJ5LWNhcmQnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVDMEMxXHVCMkU4IFx1QzgxNVx1QkNGNCBcdUM2MDFcdUM1RUQgKGJvb2sgXHVDODE1XHVCQ0Y0XHVDNjQwIFx1Q0U3NFx1QjREQyBcdUMwQURcdUM4MUMgXHVCQzg0XHVEMkJDXHVDNzQ0IFx1RDU2OFx1QUVEOCBcdUJDMzBcdUNFNTgpXG4gICAgICAgIGNvbnN0IHRvcEluZm9Db250YWluZXIgPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NhcmQtdG9wLWluZm8nIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIGJvb2sgXHVDODE1XHVCQ0Y0IFx1RDQ1Q1x1QzJEQyAoXHVDNjdDXHVDQUJEKVxuICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRDdXJyZW50Qm9vaygpO1xuICAgICAgICBpZiAoY3VycmVudEJvb2spIHtcbiAgICAgICAgICAgIGNvbnN0IGJvb2tJbmZvRWwgPSB0b3BJbmZvQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Jvb2staW5mby1kaXNwbGF5JyB9KTtcbiAgICAgICAgICAgIGJvb2tJbmZvRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6IGN1cnJlbnRCb29rLm5hbWUsXG4gICAgICAgICAgICAgICAgY2xzOiAnY3VycmVudC1ib29rLW5hbWUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQyBcdUJDODRcdUQyQkMgKFx1QzYyNFx1Qjk3OFx1Q0FCRClcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdG9wSW5mb0NvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDJyxcbiAgICAgICAgICAgIGNsczogJ2NhcmQtZGVsZXRlLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlRGVsZXRlQ2FyZCgpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QzlDNFx1RDU4OVx1Qjk2MCBcdUQ0NUNcdUMyRENcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NFbCA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtaW5kaWNhdG9yJyB9KTtcbiAgICAgICAgcHJvZ3Jlc3NFbC50ZXh0Q29udGVudCA9IGAke3RoaXMuY3VycmVudENhcmRJbmRleCArIDF9IC8gJHt0aGlzLmNhcmRzLmxlbmd0aH1gO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1RDQ1Q1x1QzJEQyAoVFRTIFx1QkM4NFx1RDJCQyBcdUQzRUNcdUQ1NjgpXG4gICAgICAgIGNvbnN0IHdvcmRDb250YWluZXIgPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtY29udGFpbmVyJyB9KTtcbiAgICAgICAgY29uc3Qgd29yZEVsID0gd29yZENvbnRhaW5lci5jcmVhdGVFbCgnaDEnLCB7IGNsczogJ2NhcmQtd29yZCcgfSk7XG4gICAgICAgIGlmIChjdXJyZW50Q2FyZC5wcm9udW5jaWF0aW9uICYmIGN1cnJlbnRDYXJkLnByb251bmNpYXRpb24udHJpbSgpKSB7XG4gICAgICAgICAgICB3b3JkRWwuaW5uZXJIVE1MID0gYCR7Y3VycmVudENhcmQud29yZH0gPHNwYW4gY2xhc3M9XCJwcm9udW5jaWF0aW9uXCI+WyR7Y3VycmVudENhcmQucHJvbnVuY2lhdGlvbn1dPC9zcGFuPmA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3b3JkRWwudGV4dENvbnRlbnQgPSBjdXJyZW50Q2FyZC53b3JkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVCQzFDXHVDNzRDIFx1QzdBQ1x1QzBERCBcdUJDODRcdUQyQkNcbiAgICAgICAgY29uc3Qgd29yZFBsYXlCdXR0b24gPSB3b3JkQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgY2xzOiAndHRzLXBsYXktYnV0dG9uIHdvcmQtcGxheS1idXR0b24nLFxuICAgICAgICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdcdUIyRThcdUM1QjQgXHVCQzFDXHVDNzRDIFx1QjRFM1x1QUUzMCcgfVxuICAgICAgICB9KTtcbiAgICAgICAgd29yZFBsYXlCdXR0b24uaW5uZXJIVE1MID0gJ1x1RDgzRFx1REQwQSc7XG4gICAgICAgIHdvcmRQbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnNwZWFrV29yZChjdXJyZW50Q2FyZC53b3JkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNFxuICAgICAgICBpZiAoY3VycmVudENhcmQuc2ltaWxhcldvcmRzICYmIGN1cnJlbnRDYXJkLnNpbWlsYXJXb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBzaW1pbGFyU2VjdGlvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2ltaWxhci13b3Jkcy1zZWN0aW9uJyB9KTtcbiAgICAgICAgICAgIHNpbWlsYXJTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTQ6JyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJMaXN0ID0gc2ltaWxhclNlY3Rpb24uY3JlYXRlRWwoJ3VsJywgeyBjbHM6ICdzaW1pbGFyLXdvcmRzLWxpc3QnIH0pO1xuICAgICAgICAgICAgY3VycmVudENhcmQuc2ltaWxhcldvcmRzLmZvckVhY2god29yZCA9PiB7XG4gICAgICAgICAgICAgICAgc2ltaWxhckxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiB3b3JkIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUM2MDhcdUJCMzhcdUI0RTQgKFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUFDMDBcdUM4MzhcdUM2MjggXHVDNjA4XHVCQjM4IFx1QzBBQ1x1QzZBOSlcbiAgICAgICAgaWYgKGN1cnJlbnRDYXJkLmV4YW1wbGVzICYmIGN1cnJlbnRDYXJkLmV4YW1wbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzU2VjdGlvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZXMtc2VjdGlvbicgfSk7XG4gICAgICAgICAgICBleGFtcGxlc1NlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNjA4XHVCQjM4XHVCNEU0OicgfSk7XG4gICAgICAgICAgICBjdXJyZW50Q2FyZC5leGFtcGxlcy5mb3JFYWNoKChleGFtcGxlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVDb250YWluZXIgPSBleGFtcGxlc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggKFRUUyBcdUJDODRcdUQyQkMgXHVEM0VDXHVENTY4KVxuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVUZXh0Q29udGFpbmVyID0gZXhhbXBsZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlLXRleHQtY29udGFpbmVyJyB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmdsaXNoRXhhbXBsZSA9IGV4YW1wbGVUZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBleGFtcGxlLmVuZ2xpc2ggfSk7XG4gICAgICAgICAgICAgICAgZW5nbGlzaEV4YW1wbGUuYWRkQ2xhc3MoJ2VuZ2xpc2gtZXhhbXBsZScpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1QzYwOFx1QkIzOCBcdUJDMUNcdUM3NEMgXHVDN0FDXHVDMEREIFx1QkM4NFx1RDJCQ1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVQbGF5QnV0dG9uID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3R0cy1wbGF5LWJ1dHRvbiBleGFtcGxlLXBsYXktYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdcdUM2MDhcdUJCMzggXHVCQzFDXHVDNzRDIFx1QjRFM1x1QUUzMCcgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGV4YW1wbGVQbGF5QnV0dG9uLmlubmVySFRNTCA9ICdcdUQ4M0RcdUREMEEnO1xuICAgICAgICAgICAgICAgIGV4YW1wbGVQbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtFeGFtcGxlKGV4YW1wbGUuZW5nbGlzaCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAoXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OCBcdUQ2QzRcdUM1RDBcdUI5Q0MgXHVENDVDXHVDMkRDKVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dBbnN3ZXIgJiYgZXhhbXBsZS5rb3JlYW4gJiYgZXhhbXBsZS5rb3JlYW4udHJpbSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtvcmVhbkV4YW1wbGUgPSBleGFtcGxlQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBleGFtcGxlLmtvcmVhbiB9KTtcbiAgICAgICAgICAgICAgICAgICAga29yZWFuRXhhbXBsZS5hZGRDbGFzcygna29yZWFuLWV4YW1wbGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1QzYwOFx1QkIzOFx1Qzc3NCBcdUM1QzZcdUM3NDQgXHVCNTRDIFx1QUUzMFx1QkNGOCBcdUM2MDhcdUJCMzggXHVENDVDXHVDMkRDXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlc1NlY3Rpb24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGVzLXNlY3Rpb24nIH0pO1xuICAgICAgICAgICAgZXhhbXBsZXNTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzYwOFx1QkIzOFx1QjRFNDonIH0pO1xuICAgICAgICAgICAgY29uc3QgZXhhbXBsZUNvbnRhaW5lciA9IGV4YW1wbGVzU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlLWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVUZXh0Q29udGFpbmVyID0gZXhhbXBsZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlLXRleHQtY29udGFpbmVyJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hFeGFtcGxlID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6IGBUaGlzIGlzIGFuIGV4YW1wbGUgc2VudGVuY2Ugd2l0aCB0aGUgd29yZCBcIiR7Y3VycmVudENhcmQud29yZH1cIi5gIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbmdsaXNoRXhhbXBsZS5hZGRDbGFzcygnZW5nbGlzaC1leGFtcGxlJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QUUzMFx1QkNGOCBcdUM2MDhcdUJCMzggXHVCQzFDXHVDNzRDIFx1QzdBQ1x1QzBERCBcdUJDODRcdUQyQkNcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVQbGF5QnV0dG9uID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICAgICAgY2xzOiAndHRzLXBsYXktYnV0dG9uIGV4YW1wbGUtcGxheS1idXR0b24nLFxuICAgICAgICAgICAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnXHVDNjA4XHVCQjM4IFx1QkMxQ1x1Qzc0QyBcdUI0RTNcdUFFMzAnIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXhhbXBsZVBsYXlCdXR0b24uaW5uZXJIVE1MID0gJ1x1RDgzRFx1REQwQSc7XG4gICAgICAgICAgICBleGFtcGxlUGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtFeGFtcGxlKGBUaGlzIGlzIGFuIGV4YW1wbGUgc2VudGVuY2Ugd2l0aCB0aGUgd29yZCBcIiR7Y3VycmVudENhcmQud29yZH1cIi5gKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIChcdUM4MTVcdUIyRjUgXHVENjU1XHVDNzc4IFx1RDZDNFx1QzVEMFx1QjlDQyBcdUQ0NUNcdUMyREMpXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93QW5zd2VyKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga29yZWFuRXhhbXBsZSA9IGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgXCIke2N1cnJlbnRDYXJkLndvcmR9XCJcdUI3N0NcdUIyOTQgXHVCMkU4XHVDNUI0XHVBQzAwIFx1RDNFQ1x1RDU2OFx1QjQxQyBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuYCBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBrb3JlYW5FeGFtcGxlLmFkZENsYXNzKCdrb3JlYW4tZXhhbXBsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OCBcdUJDODRcdUQyQkNcbiAgICAgICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrQnV0dG9uID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUUzMCcgfSk7XG4gICAgICAgICAgICBjaGVja0J1dHRvbi5hZGRDbGFzcygnY2hlY2stYW5zd2VyLWJ1dHRvbicpO1xuICAgICAgICAgICAgY2hlY2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDYXJkKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1QzgxNVx1QjJGNSBcdUQ0NUNcdUMyRENcbiAgICAgICAgICAgIGNvbnN0IGFuc3dlclNlY3Rpb24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Fuc3dlci1zZWN0aW9uJyB9KTtcbiAgICAgICAgICAgIGFuc3dlclNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVCNzNCOicgfSk7XG4gICAgICAgICAgICBjb25zdCBtZWFuaW5nc0xpc3QgPSBhbnN3ZXJTZWN0aW9uLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnbWVhbmluZ3MtbGlzdCcgfSk7XG4gICAgICAgICAgICBjdXJyZW50Q2FyZC5tZWFuaW5ncy5mb3JFYWNoKG1lYW5pbmcgPT4ge1xuICAgICAgICAgICAgICAgIG1lYW5pbmdzTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IG1lYW5pbmcgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QkM4NFx1RDJCQ1x1QjRFNFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZXZpZXdCdXR0b25zKGNhcmRDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVSZXZpZXdCdXR0b25zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgcmV2aWV3U2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXZpZXctYnV0dG9ucy1zZWN0aW9uJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBuZXh0IHJldmlldyBpbnRlcnZhbHMgZm9yIGN1cnJlbnQgY2FyZFxuICAgICAgICBjb25zdCBjdXJyZW50Q2FyZCA9IHRoaXMuY2FyZHNbdGhpcy5jdXJyZW50Q2FyZEluZGV4XTtcbiAgICAgICAgY29uc3QgaW50ZXJ2YWxzID0gdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZS5nZXROZXh0UmV2aWV3SW50ZXJ2YWxzKGN1cnJlbnRDYXJkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhcmQgYnV0dG9uIHdpdGggaW50ZXJ2YWxcbiAgICAgICAgY29uc3QgaGFyZEJ1dHRvbiA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicpO1xuICAgICAgICBoYXJkQnV0dG9uLmFkZENsYXNzKCdyZXZpZXctYnV0dG9uJywgJ2hhcmQtYnV0dG9uJyk7XG4gICAgICAgIGNvbnN0IGhhcmRDb250ZW50ID0gaGFyZEJ1dHRvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tY29udGVudCcgfSk7XG4gICAgICAgIGhhcmRDb250ZW50LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnXHVDNUI0XHVCODI0XHVDNkMwJywgY2xzOiAnYnV0dG9uLWxhYmVsJyB9KTtcbiAgICAgICAgaGFyZENvbnRlbnQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGludGVydmFscy5oYXJkLmRpc3BsYXlUZXh0LCBjbHM6ICdidXR0b24taW50ZXJ2YWwnIH0pO1xuICAgICAgICBoYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2hhcmQnKSk7XG5cbiAgICAgICAgLy8gR29vZCBidXR0b24gd2l0aCBpbnRlcnZhbFxuICAgICAgICBjb25zdCBnb29kQnV0dG9uID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJyk7XG4gICAgICAgIGdvb2RCdXR0b24uYWRkQ2xhc3MoJ3Jldmlldy1idXR0b24nLCAnZ29vZC1idXR0b24nKTtcbiAgICAgICAgY29uc3QgZ29vZENvbnRlbnQgPSBnb29kQnV0dG9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1jb250ZW50JyB9KTtcbiAgICAgICAgZ29vZENvbnRlbnQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdcdUM4OEJcdUM3NEMnLCBjbHM6ICdidXR0b24tbGFiZWwnIH0pO1xuICAgICAgICBnb29kQ29udGVudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogaW50ZXJ2YWxzLmdvb2QuZGlzcGxheVRleHQsIGNsczogJ2J1dHRvbi1pbnRlcnZhbCcgfSk7XG4gICAgICAgIGdvb2RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnZ29vZCcpKTtcblxuICAgICAgICAvLyBFYXN5IGJ1dHRvbiB3aXRoIGludGVydmFsXG4gICAgICAgIGNvbnN0IGVhc3lCdXR0b24gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nKTtcbiAgICAgICAgZWFzeUJ1dHRvbi5hZGRDbGFzcygncmV2aWV3LWJ1dHRvbicsICdlYXN5LWJ1dHRvbicpO1xuICAgICAgICBjb25zdCBlYXN5Q29udGVudCA9IGVhc3lCdXR0b24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLWNvbnRlbnQnIH0pO1xuICAgICAgICBlYXN5Q29udGVudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1x1QzI2Q1x1QzZDMCcsIGNsczogJ2J1dHRvbi1sYWJlbCcgfSk7XG4gICAgICAgIGVhc3lDb250ZW50LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBpbnRlcnZhbHMuZWFzeS5kaXNwbGF5VGV4dCwgY2xzOiAnYnV0dG9uLWludGVydmFsJyB9KTtcbiAgICAgICAgZWFzeUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdlYXN5JykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUmV2aWV3KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJykge1xuICAgICAgICBjb25zdCBjdXJyZW50Q2FyZCA9IHRoaXMuY2FyZHNbdGhpcy5jdXJyZW50Q2FyZEluZGV4XTtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50U2Vzc2lvbikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gYWN0aXZlIHJldmlldyBzZXNzaW9uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENvbnZlcnQgZGlmZmljdWx0eSB0byBSZXZpZXdSZXNwb25zZSBlbnVtXG4gICAgICAgIGNvbnN0IHJldmlld1Jlc3BvbnNlID0gZGlmZmljdWx0eSBhcyBSZXZpZXdSZXNwb25zZTtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBQcm9jZXNzIHJldmlldyB1c2luZyBzcGFjZWQgcmVwZXRpdGlvbiBzZXJ2aWNlXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnByb2Nlc3NSZXZpZXcoY3VycmVudENhcmQsIHJldmlld1Jlc3BvbnNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIGNhcmQgaW4gZGF0YWJhc2Ugd2l0aCBuZXcgc2NoZWR1bGUgaW5mb3JtYXRpb25cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkV2l0aFNjaGVkdWxlKFxuICAgICAgICAgICAgICAgIHJlc3VsdC51cGRhdGVkQ2FyZC53b3JkLCBcbiAgICAgICAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgICAgICAgIHJlc3VsdC51cGRhdGVkQ2FyZC5zY2hlZHVsZUluZm9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1Q0U3NFx1QjREQ1x1Qjg1QyBcdUM3NzRcdUIzRDlcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCsrO1xuICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNob3dDYXJkKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3Npbmcgc3BhY2VkIHJlcGV0aXRpb24gcmV2aWV3OicsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIG9sZCBtZXRob2QgaWYgc3BhY2VkIHJlcGV0aXRpb24gZmFpbHNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkKGN1cnJlbnRDYXJkLndvcmQsIGRpZmZpY3VsdHkpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4Kys7XG4gICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudENhcmQgPSB0aGlzLmNhcmRzW3RoaXMuY3VycmVudENhcmRJbmRleF07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQycsXG4gICAgICAgICAgICBgXCIke2N1cnJlbnRDYXJkLndvcmR9XCIgXHVCMkU4XHVDNUI0XHVCOTdDIFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz9cXG5cXG5cdUM3NzQgXHVDNzkxXHVDNUM1XHVDNzQwIFx1QjQxOFx1QjNDQ1x1QjlCNCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmAsXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUNcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnJlbW92ZVdvcmQoY3VycmVudENhcmQud29yZCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVCMkU4XHVDNUI0IFx1QkFBOVx1Qjg1RFx1QzVEMFx1QzExQ1x1QjNDNCBcdUM4MUNcdUFDNzBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkcy5zcGxpY2UodGhpcy5jdXJyZW50Q2FyZEluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUIzNTQgXHVDNzc0XHVDMEMxIFx1QzVDNlx1QzczQ1x1QkE3NCBcdUM2NDRcdUI4Q0MgXHVENjU0XHVCQTc0XHVDNzNDXHVCODVDXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGlvbk1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1Qzc3OFx1QjM3MVx1QzJBNFx1QUMwMCBcdUIyRThcdUM1QjQgXHVCQUE5XHVCODVEIFx1QkM5NFx1QzcwNFx1Qjk3QyBcdUJDOTdcdUM1QjRcdUIwOThcdUJBNzQgXHVDODcwXHVDODE1XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkSW5kZXggPj0gdGhpcy5jYXJkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCA9IHRoaXMuY2FyZHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1QjJFOFx1QzVCNCBcdUQ0NUNcdUMyRENcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQyBcdUM5MTEgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd0NvbXBsZXRpb25NZXNzYWdlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xuXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNVx1QjQxQyBcdUIxOTJcdUM3NzRcdUI5N0MgQ1NTIFx1QkNDMFx1QzIxOFx1Qjg1QyBcdUM4MDFcdUM2QTlcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xuXG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjb21wbGV0aW9uLW1lc3NhZ2UnIH0pO1xuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVENTU5XHVDMkI1IFx1QzY0NFx1QjhDQyEnIH0pO1xuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBcdUM2MjRcdUIyOTggJHt0aGlzLmNhcmRzLmxlbmd0aH1cdUFDMUNcdUM3NTggXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNVx1Qzc0NCBcdUM2NDRcdUI4Q0NcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuYCB9KTtcblxuICAgICAgICBjb25zdCByZXN0YXJ0QnV0dG9uID0gY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRTRcdUMyREMgXHVENTU5XHVDMkI1XHVENTU4XHVBRTMwJyB9KTtcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRDbGFzcygncmVzdGFydC1idXR0b24nKTtcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnIH0pO1xuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRDbGFzcygnY2xvc2UtYnV0dG9uJyk7XG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5rZXlkb3duSGFuZGxlcikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleWRvd25IYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMua2V5ZG93bkhhbmRsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIFx1QUMwNFx1QjJFOFx1RDU1QyBcdUQ2NTVcdUM3NzggXHVCQUE4XHVCMkVDIFx1RDA3NFx1Qjc5OFx1QzJBNFxuY2xhc3MgQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIG9uQ29uZmlybTogKCkgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0aXRsZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIG9uQ29uZmlybTogKCkgPT4gdm9pZCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMub25Db25maXJtID0gb25Db25maXJtO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2NvbmZpcm0tbW9kYWwnKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLnRpdGxlLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlLCBjbHM6ICdtb2RhbC1tZXNzYWdlJyB9KTtcblxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1RDY1NVx1Qzc3OCcsXG4gICAgICAgICAgICBjbHM6ICdjb25maXJtLWJ1dHRvbiBwcmltYXJ5J1xuICAgICAgICB9KTtcbiAgICAgICAgY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25Db25maXJtKCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVDREU4XHVDMThDJyxcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59ICIsICJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBUVFNTZXJ2aWNlIH0gZnJvbSAnLi9UVFNJbnRlcmZhY2UnO1xuaW1wb3J0IHsgQXVkaW9NYW5hZ2VyLCBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc2hhcmVkL0F1ZGlvTWFuYWdlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdHRlcmJveFRUU1NldHRpbmdzIHtcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIGFwaVVybDogc3RyaW5nO1xuICAgIHZvaWNlOiBzdHJpbmc7XG4gICAgZXhhZ2dlcmF0aW9uOiBudW1iZXI7XG4gICAgY2ZnV2VpZ2h0OiBudW1iZXI7XG4gICAgdGVtcGVyYXR1cmU6IG51bWJlcjtcbiAgICBhdXRvUGxheTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaGF0dGVyYm94VFRTUmVxdWVzdCB7XG4gICAgaW5wdXQ6IHN0cmluZztcbiAgICB2b2ljZT86IHN0cmluZztcbiAgICBleGFnZ2VyYXRpb24/OiBudW1iZXI7XG4gICAgY2ZnX3dlaWdodD86IG51bWJlcjtcbiAgICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIENoYXR0ZXJib3hUVFNTZXJ2aWNlIGltcGxlbWVudHMgVFRTU2VydmljZSB7XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogQ2hhdHRlcmJveFRUU1NldHRpbmdzO1xuICAgIHByaXZhdGUgYXVkaW9NYW5hZ2VyOiBBdWRpb01hbmFnZXI7XG4gICAgcHJpdmF0ZSBuZXR3b3JrTWFuYWdlcjogTmV0d29ya1Jlc291cmNlTWFuYWdlcjtcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBDaGF0dGVyYm94VFRTU2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLmVuYWJsZWQgfHwgZmFsc2UsXG4gICAgICAgICAgICBhcGlVcmw6IHNldHRpbmdzLmFwaVVybCB8fCAnaHR0cDovL2xvY2FsaG9zdDo0MTIzJyxcbiAgICAgICAgICAgIHZvaWNlOiBzZXR0aW5ncy52b2ljZSB8fCAnYWxsb3knLFxuICAgICAgICAgICAgZXhhZ2dlcmF0aW9uOiBzZXR0aW5ncy5leGFnZ2VyYXRpb24gfHwgMC43LFxuICAgICAgICAgICAgY2ZnV2VpZ2h0OiBzZXR0aW5ncy5jZmdXZWlnaHQgfHwgMC40LFxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHNldHRpbmdzLnRlbXBlcmF0dXJlIHx8IDAuOSxcbiAgICAgICAgICAgIGF1dG9QbGF5OiBzZXR0aW5ncy5hdXRvUGxheSB8fCBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlciA9IEF1ZGlvTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyID0gTmV0d29ya1Jlc291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RUUyBcdUFFMzBcdUIyQTVcdUM3NzQgXHVCRTQ0XHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDNUI0IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGV4dCB8fCB0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVFRTOiBcdUJFNDggXHVEMTREXHVDMkE0XHVEMkI4XHVDNzg1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUM3QUNcdUMwREQgXHVDOTExXHVDNzc4IFx1QzYyNFx1QjUxNFx1QzYyNFx1QUMwMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVDOTExXHVDOUMwXG4gICAgICAgICAgICB0aGlzLnN0b3BTcGVha2luZygpO1xuXG4gICAgICAgICAgICAvLyBDaGF0dGVyYm94IFRUUyBBUEkgXHVENjM4XHVDRDlDXG4gICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSBhd2FpdCB0aGlzLmNhbGxDaGF0dGVyYm94QVBJKHRleHQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsYXlBdWRpb0Jsb2IoYXVkaW9CbG9iKTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2hhdHRlcmJveCBUVFMgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RUUyBcdUM3NENcdUMxMzEgXHVDMEREXHVDMTMxXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0XHVBQzAwIFx1QzJFNFx1RDU4OSBcdUM5MTFcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc3BlYWtXb3JkKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXdvcmQgfHwgd29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUzogXHVCRTQ4IFx1QjJFOFx1QzVCNFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuc3BlYWtUZXh0KHdvcmQpO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrRXhhbXBsZShleGFtcGxlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFleGFtcGxlIHx8IGV4YW1wbGUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnNwZWFrVGV4dChleGFtcGxlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNhbGxDaGF0dGVyYm94QVBJKHRleHQ6IHN0cmluZyk6IFByb21pc2U8QmxvYj4ge1xuICAgICAgICAvLyBcdUQxNERcdUMyQTRcdUQyQjggXHVBRTM4XHVDNzc0IFx1QzgxQ1x1RDU1QyAoQ2hhdHRlcmJveCBcdUFEOENcdUM3QTU6IDMwMDBcdUM3OTApXG4gICAgICAgIGNvbnN0IHRydW5jYXRlZFRleHQgPSB0ZXh0Lmxlbmd0aCA+IDMwMDAgPyB0ZXh0LnN1YnN0cmluZygwLCAzMDAwKSA6IHRleHQ7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdEJvZHk6IENoYXR0ZXJib3hUVFNSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgaW5wdXQ6IHRydW5jYXRlZFRleHQsXG4gICAgICAgICAgICB2b2ljZTogdGhpcy5zZXR0aW5ncy52b2ljZSxcbiAgICAgICAgICAgIGV4YWdnZXJhdGlvbjogdGhpcy5zZXR0aW5ncy5leGFnZ2VyYXRpb24sXG4gICAgICAgICAgICBjZmdfd2VpZ2h0OiB0aGlzLnNldHRpbmdzLmNmZ1dlaWdodCxcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnNldHRpbmdzLnRlbXBlcmF0dXJlXG4gICAgICAgIH07XG5cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuc2V0dGluZ3MuYXBpVXJsfS92MS9hdWRpby9zcGVlY2hgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYXR0ZXJib3ggVFRTIEFQSSBcdUM2MjRcdUI5NTg6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgICAgICAgaWYgKCFjb250ZW50VHlwZSB8fCAhY29udGVudFR5cGUuaW5jbHVkZXMoJ2F1ZGlvJykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVDNjA4XHVDMEMxXHVENTU4XHVDOUMwIFx1QkFCQlx1RDU1QyBcdUM3NTFcdUIyRjUgXHVENjE1XHVDMkREOiAke2NvbnRlbnRUeXBlfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHBsYXlBdWRpb0Jsb2IoYXVkaW9CbG9iOiBCbG9iKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFx1Qzc3NFx1QzgwNCBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDODE1XHVCOUFDXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnNyYyA9ICcnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFx1QzBDOCBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNUQ4XHVCOUFDXHVCQTNDXHVEMkI4IFx1QzBERFx1QzEzMVxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50ID0gbmV3IEF1ZGlvKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQmxvYlx1Qzc0NCBVUkxcdUI4NUMgXHVCQ0MwXHVENjU4XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQuc3JjID0gYXVkaW9Vcmw7XG5cbiAgICAgICAgICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzEyNFx1QzgxNVxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50Lm9uZW5kZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50Lm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQub25sb2FkZWRkYXRhID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnBsYXkoKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVCODVDXHVCNERDIFx1QzJEQ1x1Qzc5MVxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LmxvYWQoKTtcblxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdG9wU3BlYWtpbmcoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVVJMIFx1QzgxNVx1QjlBQ1xuICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9FbGVtZW50LnNyYyAmJiB0aGlzLmF1ZGlvRWxlbWVudC5zcmMuc3RhcnRzV2l0aCgnYmxvYjonKSkge1xuICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5hdWRpb0VsZW1lbnQuc3JjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQuc3JjID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jdXJyZW50QXVkaW9Db250ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRBdWRpb0NvbnRleHQuY2xvc2UoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEF1ZGlvQ29udGV4dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc1BhdXNlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmF1ZGlvRWxlbWVudCB8fCB0aGlzLmF1ZGlvRWxlbWVudC5wYXVzZWQ7XG4gICAgfVxuXG4gICAgcmVzdW1lKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQgJiYgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5wbGF5KCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUFDMUMgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVBQzFDXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCAmJiAhdGhpcy5hdWRpb0VsZW1lbnQucGF1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5wYXVzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPENoYXR0ZXJib3hUVFNTZXR0aW5ncz4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICAvLyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4XG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0ZXN0VGV4dCA9ICdIZWxsbywgdGhpcyBpcyBhIHRlc3QuJztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FsbENoYXR0ZXJib3hBUEkodGVzdFRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaGF0dGVyYm94IFRUUyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdUMwQUNcdUM2QTkgXHVBQzAwXHVCMkE1XHVENTVDIFx1Qzc0Q1x1QzEzMSBcdUJBQTlcdUI4NUQgKENoYXR0ZXJib3hcdUIyOTQgY3VzdG9tIHZvaWNlIFx1QzlDMFx1QzZEMClcbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogc3RyaW5nW10ge1xuICAgICAgICAvLyBPcGVuQUkgXHVENjM4XHVENjU4IFx1Qzc0Q1x1QzEzMVx1QjRFNCArIFx1Q0VFNFx1QzJBNFx1RDE0MCBcdUM3NENcdUMxMzEgXHVDOUMwXHVDNkQwXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAnYWxsb3knLFxuICAgICAgICAgICAgJ2VjaG8nLCBcbiAgICAgICAgICAgICdmYWJsZScsXG4gICAgICAgICAgICAnb255eCcsXG4gICAgICAgICAgICAnbm92YScsXG4gICAgICAgICAgICAnc2hpbW1lcicsXG4gICAgICAgICAgICAnY3VzdG9tJyAvLyBcdUMwQUNcdUM2QTlcdUM3OTAgXHVDODE1XHVDNzU4IFx1Qzc0Q1x1QzEzMVxuICAgICAgICBdO1xuICAgIH1cblxuICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMxMjRcdUM4MTUgXHVDODE1XHVCQ0Y0IFx1QkMxOFx1RDY1OFxuICAgIGdldFNldHRpbmdzKCk6IENoYXR0ZXJib3hUVFNTZXR0aW5ncyB7XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuc2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICAvLyBcdUI5QUNcdUMxOENcdUMyQTQgXHVDODE1XHVCOUFDXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdG9wU3BlYWtpbmcoKTtcbiAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmN1cnJlbnRBdWRpb0NvbnRleHQgPSBudWxsO1xuICAgIH1cbn0iLCAiLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QjlBQ1x1QzE4Q1x1QzJBNCBcdUFEMDBcdUI5QUMgXHVCQzBGIFx1QzgxNVx1QjlBQ1xuXG5leHBvcnQgY2xhc3MgQXVkaW9NYW5hZ2VyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQXVkaW9NYW5hZ2VyO1xuICAgIHByaXZhdGUgYWN0aXZlQXVkaW9FbGVtZW50czogU2V0PEhUTUxBdWRpb0VsZW1lbnQ+ID0gbmV3IFNldCgpO1xuICAgIHByaXZhdGUgYXVkaW9Qb29sOiBIVE1MQXVkaW9FbGVtZW50W10gPSBbXTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1heFBvb2xTaXplID0gMTA7XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cblxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBBdWRpb01hbmFnZXIge1xuICAgICAgICBpZiAoIUF1ZGlvTWFuYWdlci5pbnN0YW5jZSkge1xuICAgICAgICAgICAgQXVkaW9NYW5hZ2VyLmluc3RhbmNlID0gbmV3IEF1ZGlvTWFuYWdlcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBdWRpb01hbmFnZXIuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzY5NFx1QzE4QyBcdUMwRERcdUMxMzEgXHVCQzBGIFx1QUQwMFx1QjlBQ1xuICAgIGNyZWF0ZUF1ZGlvKHNyYzogc3RyaW5nKTogSFRNTEF1ZGlvRWxlbWVudCB7XG4gICAgICAgIGxldCBhdWRpbzogSFRNTEF1ZGlvRWxlbWVudDtcblxuICAgICAgICAvLyBcdUQ0ODBcdUM1RDBcdUMxMUMgXHVDN0FDXHVDMEFDXHVDNkE5IFx1QUMwMFx1QjJBNVx1RDU1QyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDIFx1Q0MzRVx1QUUzMFxuICAgICAgICBjb25zdCBhdmFpbGFibGVBdWRpbyA9IHRoaXMuYXVkaW9Qb29sLmZpbmQoYSA9PiBhLmVuZGVkIHx8IGEucGF1c2VkKTtcbiAgICAgICAgaWYgKGF2YWlsYWJsZUF1ZGlvKSB7XG4gICAgICAgICAgICBhdWRpbyA9IGF2YWlsYWJsZUF1ZGlvO1xuICAgICAgICAgICAgYXVkaW8uc3JjID0gc3JjO1xuICAgICAgICAgICAgYXVkaW8uY3VycmVudFRpbWUgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXVkaW8gPSBuZXcgQXVkaW8oc3JjKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBBdWRpb0VsZW1lbnQoYXVkaW8pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmFkZChhdWRpbyk7XG4gICAgICAgIHJldHVybiBhdWRpbztcbiAgICB9XG5cbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDIFx1QzEyNFx1QzgxNVxuICAgIHByaXZhdGUgc2V0dXBBdWRpb0VsZW1lbnQoYXVkaW86IEhUTUxBdWRpb0VsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVDNzkwXHVCM0Q5IFx1QzgxNVx1QjlBQyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4XG4gICAgICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbGVhc2VBdWRpbyhhdWRpbyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBjbGVhbnVwLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgY2xlYW51cCwgeyBvbmNlOiB0cnVlIH0pO1xuXG4gICAgICAgIC8vIFx1QkE1NFx1QkFBOFx1QjlBQyBcdUIyMDRcdUMyMTggXHVCQzI5XHVDOUMwXHVCOTdDIFx1QzcwNFx1RDU1QyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzNcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmhhcyhhdWRpbykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2VBdWRpbyhhdWRpbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDMwMDAwKTsgLy8gMzBcdUNEMDggXHVENkM0IFx1Qzc5MFx1QjNEOSBcdUM4MTVcdUI5QUNcbiAgICB9XG5cbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIChcdUM1NDhcdUM4MDRcdUQ1NUMgXHVCNzk4XHVEMzdDKVxuICAgIGFzeW5jIHBsYXlBdWRpbyhzcmM6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhdWRpbyA9IHRoaXMuY3JlYXRlQXVkaW8oc3JjKTtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBhdWRpby5wbGF5KCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnJlbGVhc2VBdWRpbyhhdWRpbyk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM2OTRcdUMxOEMgXHVENTc0XHVDODFDXG4gICAgcmVsZWFzZUF1ZGlvKGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmhhcyhhdWRpbykpIHJldHVybjtcblxuICAgICAgICAvLyBcdUM3QUNcdUMwREQgXHVDOTExXHVDNzc0XHVCQTc0IFx1QzgxNVx1QzlDMFxuICAgICAgICBpZiAoIWF1ZGlvLnBhdXNlZCkge1xuICAgICAgICAgICAgYXVkaW8ucGF1c2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1RDY1Q1x1QzEzMSBcdUJBQTlcdUI4NURcdUM1RDBcdUMxMUMgXHVDODFDXHVBQzcwXG4gICAgICAgIHRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5kZWxldGUoYXVkaW8pO1xuXG4gICAgICAgIC8vIFx1RDQ4MFx1QzVEMCBcdUJDMThcdUQ2NTggKFx1RDA2Q1x1QUUzMCBcdUM4MUNcdUQ1NUMpXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvUG9vbC5sZW5ndGggPCB0aGlzLm1heFBvb2xTaXplKSB7XG4gICAgICAgICAgICBhdWRpby5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgICAgICAgYXVkaW8ubG9hZCgpOyAvLyBcdUJBNTRcdUJBQThcdUI5QUMgXHVENTc0XHVDODFDXG4gICAgICAgICAgICB0aGlzLmF1ZGlvUG9vbC5wdXNoKGF1ZGlvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1RDQ4MFx1Qzc3NCBcdUFDMDBcdUI0REQgXHVDQzJDIFx1QUNCRFx1QzZCMCBcdUM2NDRcdUM4MDRcdUQ3ODggXHVDODE1XHVCOUFDXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VBdWRpbyhhdWRpbyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDIFx1QzY0NFx1QzgwNCBcdUM4MTVcdUI5QUNcbiAgICBwcml2YXRlIGRpc3Bvc2VBdWRpbyhhdWRpbzogSFRNTEF1ZGlvRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBhdWRpby5wYXVzZSgpO1xuICAgICAgICBhdWRpby5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgICBhdWRpby5sb2FkKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUJBQThcdUI0RTAgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzBcbiAgICAgICAgY29uc3QgbmV3QXVkaW8gPSBhdWRpby5jbG9uZU5vZGUoKSBhcyBIVE1MQXVkaW9FbGVtZW50O1xuICAgICAgICBhdWRpby5wYXJlbnROb2RlPy5yZXBsYWNlQ2hpbGQobmV3QXVkaW8sIGF1ZGlvKTtcbiAgICB9XG5cbiAgICAvLyBcdUJBQThcdUI0RTAgXHVENjVDXHVDMTMxIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM4MTVcdUM5QzBcbiAgICBzdG9wQWxsQXVkaW8oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5mb3JFYWNoKGF1ZGlvID0+IHtcbiAgICAgICAgICAgIGlmICghYXVkaW8ucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgYXVkaW8ucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHVCQUE4XHVCNEUwIFx1QjlBQ1x1QzE4Q1x1QzJBNCBcdUM4MTVcdUI5QUNcbiAgICBjbGVhbnVwKCk6IHZvaWQge1xuICAgICAgICAvLyBcdUJBQThcdUI0RTAgXHVENjVDXHVDMTMxIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM4MTVcdUI5QUNcbiAgICAgICAgdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmZvckVhY2goYXVkaW8gPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlQXVkaW8oYXVkaW8pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmNsZWFyKCk7XG5cbiAgICAgICAgLy8gXHVENDgwXHVDNzU4IFx1QkFBOFx1QjRFMCBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDODE1XHVCOUFDXG4gICAgICAgIHRoaXMuYXVkaW9Qb29sLmZvckVhY2goYXVkaW8gPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlQXVkaW8oYXVkaW8pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hdWRpb1Bvb2wuY2xlYXIoKTtcbiAgICB9XG5cbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMEMxXHVEMERDIFx1QzgxNVx1QkNGNFxuICAgIGdldFN0YXR1cygpOiB7IGFjdGl2ZTogbnVtYmVyOyBwb29sZWQ6IG51bWJlciB9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjdGl2ZTogdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLnNpemUsXG4gICAgICAgICAgICBwb29sZWQ6IHRoaXMuYXVkaW9Qb29sLmxlbmd0aFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QjlBQ1x1QzE4Q1x1QzJBNCBcdUFEMDBcdUI5QUNcbmV4cG9ydCBjbGFzcyBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogTmV0d29ya1Jlc291cmNlTWFuYWdlcjtcbiAgICBwcml2YXRlIGFib3J0Q29udHJvbGxlcnM6IFNldDxBYm9ydENvbnRyb2xsZXI+ID0gbmV3IFNldCgpO1xuICAgIHByaXZhdGUgYWN0aXZlUmVxdWVzdHM6IE1hcDxzdHJpbmcsIEFib3J0Q29udHJvbGxlcj4gPSBuZXcgTWFwKCk7XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cblxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyIHtcbiAgICAgICAgaWYgKCFOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyLmluc3RhbmNlKSB7XG4gICAgICAgICAgICBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyLmluc3RhbmNlID0gbmV3IE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTmV0d29ya1Jlc291cmNlTWFuYWdlci5pbnN0YW5jZTtcbiAgICB9XG5cbiAgICAvLyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVDNjk0XHVDQ0FEIFx1QzBERFx1QzEzMSAoXHVDNzkwXHVCM0Q5IFx1QzgxNVx1QjlBQyBcdUQzRUNcdUQ1NjgpXG4gICAgY3JlYXRlUmVxdWVzdChpZGVudGlmaWVyPzogc3RyaW5nKTogQWJvcnRDb250cm9sbGVyIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5hZGQoY29udHJvbGxlcik7XG4gICAgICAgIFxuICAgICAgICBpZiAoaWRlbnRpZmllcikge1xuICAgICAgICAgICAgLy8gXHVCM0Q5XHVDNzdDXHVENTVDIFx1QzJERFx1QkNDNFx1Qzc5MFx1Qzc1OCBcdUFFMzBcdUM4NzQgXHVDNjk0XHVDQ0FEIFx1Q0RFOFx1QzE4Q1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDb250cm9sbGVyID0gdGhpcy5hY3RpdmVSZXF1ZXN0cy5nZXQoaWRlbnRpZmllcik7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdDb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzLmRlbGV0ZShleGlzdGluZ0NvbnRyb2xsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hY3RpdmVSZXF1ZXN0cy5zZXQoaWRlbnRpZmllciwgY29udHJvbGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUM3OTBcdUIzRDkgXHVDODE1XHVCOUFDXHVCOTdDIFx1QzcwNFx1RDU1QyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzMgXHVDMTI0XHVDODE1XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWJvcnRDb250cm9sbGVycy5oYXMoY29udHJvbGxlcikpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhbnVwKGNvbnRyb2xsZXIsIGlkZW50aWZpZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCA2MDAwMCk7IC8vIDYwXHVDRDA4IFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDM1xuXG4gICAgICAgIHJldHVybiBjb250cm9sbGVyO1xuICAgIH1cblxuICAgIC8vIFx1QzY5NFx1Q0NBRCBcdUM2NDRcdUI4Q0MgXHVDMkRDIFx1QzgxNVx1QjlBQ1xuICAgIGNvbXBsZXRlUmVxdWVzdChjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsIGlkZW50aWZpZXI/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jbGVhbnVwKGNvbnRyb2xsZXIsIGlkZW50aWZpZXIpO1xuICAgIH1cblxuICAgIC8vIFx1RDJCOVx1QzgxNSBcdUM2OTRcdUNDQUQgXHVDREU4XHVDMThDXG4gICAgY2FuY2VsUmVxdWVzdChpZGVudGlmaWVyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuYWN0aXZlUmVxdWVzdHMuZ2V0KGlkZW50aWZpZXIpO1xuICAgICAgICBpZiAoY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgdGhpcy5jbGVhbnVwKGNvbnRyb2xsZXIsIGlkZW50aWZpZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVCMEI0XHVCRDgwIFx1QzgxNVx1QjlBQyBcdUI4NUNcdUM5QzFcbiAgICBwcml2YXRlIGNsZWFudXAoY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyLCBpZGVudGlmaWVyPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5kZWxldGUoY29udHJvbGxlcik7XG4gICAgICAgIGlmIChpZGVudGlmaWVyKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVJlcXVlc3RzLmRlbGV0ZShpZGVudGlmaWVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QkFBOFx1QjRFMCBcdUQ2NUNcdUMxMzEgXHVDNjk0XHVDQ0FEIFx1Q0RFOFx1QzE4Q1xuICAgIGNhbmNlbEFsbFJlcXVlc3RzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlcnMuZm9yRWFjaChjb250cm9sbGVyID0+IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5jbGVhcigpO1xuICAgICAgICB0aGlzLmFjdGl2ZVJlcXVlc3RzLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgLy8gRmV0Y2ggXHVCNzk4XHVEMzdDIChcdUM3OTBcdUIzRDkgXHVDODE1XHVCOUFDIFx1RDNFQ1x1RDU2OClcbiAgICBhc3luYyBmZXRjaChcbiAgICAgICAgdXJsOiBzdHJpbmcsIFxuICAgICAgICBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9LCBcbiAgICAgICAgaWRlbnRpZmllcj86IHN0cmluZyxcbiAgICAgICAgdGltZW91dDogbnVtYmVyID0gMzAwMDBcbiAgICApOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSB0aGlzLmNyZWF0ZVJlcXVlc3QoaWRlbnRpZmllcik7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgfSwgdGltZW91dCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlUmVxdWVzdChjb250cm9sbGVyLCBpZGVudGlmaWVyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFudXAoY29udHJvbGxlciwgaWRlbnRpZmllcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMwQzFcdUQwREMgXHVDODE1XHVCQ0Y0XG4gICAgZ2V0U3RhdHVzKCk6IHsgYWN0aXZlOiBudW1iZXI7IGlkZW50aWZpZWQ6IG51bWJlciB9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjdGl2ZTogdGhpcy5hYm9ydENvbnRyb2xsZXJzLnNpemUsXG4gICAgICAgICAgICBpZGVudGlmaWVkOiB0aGlzLmFjdGl2ZVJlcXVlc3RzLnNpemVcbiAgICAgICAgfTtcbiAgICB9XG59IiwgImltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRUU1NlcnZpY2UgfSBmcm9tICcuL1RUU0ludGVyZmFjZSc7XG5pbXBvcnQgeyBBdWRpb01hbmFnZXIsIE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9zaGFyZWQvQXVkaW9NYW5hZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVDbG91ZFRUU1NldHRpbmdzIHtcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIGFwaUtleTogc3RyaW5nO1xuICAgIHZvaWNlOiBzdHJpbmc7XG4gICAgbGFuZ3VhZ2VDb2RlOiBzdHJpbmc7XG4gICAgc3BlYWtpbmdSYXRlOiBudW1iZXI7XG4gICAgcGl0Y2g6IG51bWJlcjtcbiAgICBhdXRvUGxheTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVDbG91ZFRUU1JlcXVlc3Qge1xuICAgIGlucHV0OiB7XG4gICAgICAgIHRleHQ6IHN0cmluZztcbiAgICB9O1xuICAgIHZvaWNlOiB7XG4gICAgICAgIGxhbmd1YWdlQ29kZTogc3RyaW5nO1xuICAgICAgICBuYW1lPzogc3RyaW5nO1xuICAgICAgICBzc21sR2VuZGVyPzogJ01BTEUnIHwgJ0ZFTUFMRScgfCAnTkVVVFJBTCc7XG4gICAgfTtcbiAgICBhdWRpb0NvbmZpZzoge1xuICAgICAgICBhdWRpb0VuY29kaW5nOiAnTVAzJyB8ICdMSU5FQVIxNicgfCAnT0dHX09QVVMnO1xuICAgICAgICBzcGVha2luZ1JhdGU/OiBudW1iZXI7XG4gICAgICAgIHBpdGNoPzogbnVtYmVyO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR29vZ2xlQ2xvdWRUVFNSZXNwb25zZSB7XG4gICAgYXVkaW9Db250ZW50OiBzdHJpbmc7IC8vIEJhc2U2NCBlbmNvZGVkIGF1ZGlvXG59XG5cbmV4cG9ydCBjbGFzcyBHb29nbGVDbG91ZFRUU1NlcnZpY2UgaW1wbGVtZW50cyBUVFNTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHNldHRpbmdzOiBHb29nbGVDbG91ZFRUU1NldHRpbmdzO1xuICAgIHByaXZhdGUgYXVkaW9NYW5hZ2VyOiBBdWRpb01hbmFnZXI7XG4gICAgcHJpdmF0ZSBuZXR3b3JrTWFuYWdlcjogTmV0d29ya1Jlc291cmNlTWFuYWdlcjtcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBHb29nbGVDbG91ZFRUU1NldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBlbmFibGVkOiBzZXR0aW5ncy5lbmFibGVkIHx8IGZhbHNlLFxuICAgICAgICAgICAgYXBpS2V5OiBzZXR0aW5ncy5hcGlLZXkgfHwgJycsXG4gICAgICAgICAgICB2b2ljZTogc2V0dGluZ3Mudm9pY2UgfHwgJ2VuLVVTLUpvdXJuZXktRicsXG4gICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHNldHRpbmdzLmxhbmd1YWdlQ29kZSB8fCAnZW4tVVMnLFxuICAgICAgICAgICAgc3BlYWtpbmdSYXRlOiBzZXR0aW5ncy5zcGVha2luZ1JhdGUgfHwgMS4wLFxuICAgICAgICAgICAgcGl0Y2g6IHNldHRpbmdzLnBpdGNoIHx8IDAuMCxcbiAgICAgICAgICAgIGF1dG9QbGF5OiBzZXR0aW5ncy5hdXRvUGxheSB8fCBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlciA9IEF1ZGlvTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyID0gTmV0d29ya1Jlc291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RUUyBcdUFFMzBcdUIyQTVcdUM3NzQgXHVCRTQ0XHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDNUI0IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hcGlLZXkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0dvb2dsZSBDbG91ZCBUVFMgQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUQxNERcdUMyQTRcdUQyQjhcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zdG9wU3BlYWtpbmcoKTtcblxuICAgICAgICAgICAgY29uc3QgYXVkaW9EYXRhID0gYXdhaXQgdGhpcy5jYWxsR29vZ2xlQ2xvdWRBUEkodGV4dCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsYXlBdWRpb0RhdGEoYXVkaW9EYXRhKTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIENsb3VkIFRUUyBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnVFRTIFx1Qzc0Q1x1QzEzMSBcdUMwRERcdUMxMzFcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0XHVDNjQwIFx1Qzc3OFx1RDEzMFx1QjEzNyBcdUM1RjBcdUFDQjBcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc3BlYWtXb3JkKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXdvcmQgfHwgd29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUzogXHVCRTQ4IFx1QjJFOFx1QzVCNFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuc3BlYWtUZXh0KHdvcmQpO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrRXhhbXBsZShleGFtcGxlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFleGFtcGxlIHx8IGV4YW1wbGUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnNwZWFrVGV4dChleGFtcGxlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNhbGxHb29nbGVDbG91ZEFQSSh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCB0cnVuY2F0ZWRUZXh0ID0gdGV4dC5sZW5ndGggPiA1MDAwID8gdGV4dC5zdWJzdHJpbmcoMCwgNTAwMCkgOiB0ZXh0O1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBHb29nbGVDbG91ZFRUU1JlcXVlc3QgPSB7XG4gICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRydW5jYXRlZFRleHRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2b2ljZToge1xuICAgICAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogdGhpcy5zZXR0aW5ncy5sYW5ndWFnZUNvZGUsXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5zZXR0aW5ncy52b2ljZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1ZGlvQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgYXVkaW9FbmNvZGluZzogJ01QMycsXG4gICAgICAgICAgICAgICAgc3BlYWtpbmdSYXRlOiB0aGlzLnNldHRpbmdzLnNwZWFraW5nUmF0ZSxcbiAgICAgICAgICAgICAgICBwaXRjaDogdGhpcy5zZXR0aW5ncy5waXRjaFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm5ldHdvcmtNYW5hZ2VyLmZldGNoKFxuICAgICAgICAgICAgYGh0dHBzOi8vdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tL3YxL3RleHQ6c3ludGhlc2l6ZT9rZXk9JHt0aGlzLnNldHRpbmdzLmFwaUtleX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGBnb29nbGUtdHRzLSR7RGF0ZS5ub3coKX1gLCAvLyBcdUFDRTBcdUM3MjAgXHVDMkREXHVCQ0M0XHVDNzkwXG4gICAgICAgICAgICAxMDAwMCAvLyAxMFx1Q0QwOCBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzNcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLmdldERldGFpbGVkRXJyb3JNZXNzYWdlKHJlc3BvbnNlLnN0YXR1cywgZXJyb3JEYXRhKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YTogR29vZ2xlQ2xvdWRUVFNSZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIGRhdGEuYXVkaW9Db250ZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RGV0YWlsZWRFcnJvck1lc3NhZ2Uoc3RhdHVzOiBudW1iZXIsIGVycm9yRGF0YTogYW55KTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGVycm9yRGF0YT8uZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZXJyb3JEYXRhLmVycm9yO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBUElcdUFDMDAgXHVDQzI4XHVCMkU4XHVCNDFDIFx1QUNCRFx1QzZCMCAoNDAzIFBFUk1JU1NJT05fREVOSUVEIHdpdGggQVBJX0tFWV9TRVJWSUNFX0JMT0NLRUQpXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDMgJiYgZXJyb3IuZGV0YWlscz8uc29tZSgoZGV0YWlsOiBhbnkpID0+IFxuICAgICAgICAgICAgICAgIGRldGFpbC5yZWFzb24gPT09ICdBUElfS0VZX1NFUlZJQ0VfQkxPQ0tFRCcgfHwgXG4gICAgICAgICAgICAgICAgZGV0YWlsWydAdHlwZSddPy5pbmNsdWRlcygnRXJyb3JJbmZvJykgJiYgZGV0YWlsLnJlYXNvbiA9PT0gJ0FQSV9LRVlfU0VSVklDRV9CTE9DS0VEJ1xuICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnR29vZ2xlIENsb3VkIFRleHQtdG8tU3BlZWNoIEFQSVx1QUMwMCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LiBHb29nbGUgQ2xvdWQgQ29uc29sZVx1QzVEMFx1QzExQyBUZXh0LXRvLVNwZWVjaCBBUElcdUI5N0MgXHVENjVDXHVDMTMxXHVENjU0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFQSSBcdUQwQTQgXHVBRDAwXHVCODI4IFx1QzYyNFx1Qjk1OFx1QjRFNFxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdBUEkga2V5IG5vdCB2YWxpZCcpIHx8IGVycm9yLmNvZGUgPT09ICdJTlZBTElEX0FSR1VNRU5UJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTRcdUI5N0MgXHVCMkU0XHVDMkRDIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3F1b3RhJykgfHwgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ1FVT1RBX0VYQ0VFREVEJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NzQgXHVDRDA4XHVBQ0ZDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NDQgXHVENjU1XHVDNzc4XHVENTU4XHVBQzcwXHVCMDk4IFx1QzY5NFx1QUUwOFx1QzgxQ1x1Qjk3QyBcdUJDQzBcdUFDQkRcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUM4MTFcdUFERkNcdUM3NzQgXHVBQzcwXHVCRDgwXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0IFx1QUQ4Q1x1RDU1Q1x1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVDNzc4XHVDOTlEIFx1QzYyNFx1Qjk1OCAoNDAxKVxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgQVBJIFx1RDBBNCBcdUM3NzhcdUM5OURcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVDNjk0XHVDQ0FEIFx1QzYyNFx1Qjk1OCAoNDAwKVxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUM2OTRcdUNDQURcdUM3NzQgXHVDNzk4XHVCQUJCXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUM3NENcdUMxMzEgXHVDMTI0XHVDODE1XHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDMEFDXHVDNkE5IFx1QkQ4OFx1QUMwMCAoNTAzKVxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNTAzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIFx1QzExQ1x1QkU0NFx1QzJBNFx1QUMwMCBcdUM3N0NcdUMyRENcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEFDXHVDNkE5XHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QzdBMFx1QzJEQyBcdUQ2QzQgXHVCMkU0XHVDMkRDIFx1QzJEQ1x1QjNDNFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gYEdvb2dsZSBDbG91ZCBUVFMgQVBJIFx1QzYyNFx1Qjk1OCAoJHtzdGF0dXN9KTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTgnfWA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBgR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNjI0XHVCOTU4OiAke3N0YXR1c30gXHVDMEMxXHVEMERDIFx1Q0Y1NFx1QjREQ2A7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwbGF5QXVkaW9EYXRhKGJhc2U2NEF1ZGlvOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQXVkaW9NYW5hZ2VyXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU1QyBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERFxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IHRoaXMuYmFzZTY0VG9CbG9iKGJhc2U2NEF1ZGlvLCAnYXVkaW8vbXAzJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW8gPSB0aGlzLmF1ZGlvTWFuYWdlci5jcmVhdGVBdWRpbyhhdWRpb1VybCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb01hbmFnZXIucmVsZWFzZUF1ZGlvKGF1ZGlvKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgYXVkaW8ub25lbmRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGF1ZGlvLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGF1ZGlvLm9ubG9hZGVkZGF0YSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW8ucGxheSgpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzMgXHVDMTI0XHVDODE1ICgzMFx1Q0QwOClcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdWRpby5lbmRlZCAmJiAhYXVkaW8ucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzJEQ1x1QUMwNCBcdUNEMDhcdUFDRkMnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAzMDAwMCk7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBiYXNlNjRUb0Jsb2IoYmFzZTY0OiBzdHJpbmcsIG1pbWVUeXBlOiBzdHJpbmcpOiBCbG9iIHtcbiAgICAgICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NCk7XG4gICAgICAgIGNvbnN0IGJ5dGVOdW1iZXJzID0gbmV3IEFycmF5KGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBieXRlTnVtYmVyc1tpXSA9IGJ5dGVDaGFyYWN0ZXJzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVOdW1iZXJzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtieXRlQXJyYXldLCB7IHR5cGU6IG1pbWVUeXBlIH0pO1xuICAgIH1cblxuICAgIHN0b3BTcGVha2luZygpOiB2b2lkIHtcbiAgICAgICAgLy8gQXVkaW9NYW5hZ2VyXHVCOTdDIFx1RDFCNVx1RDU3NCBcdUJBQThcdUI0RTAgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzgxNVx1QzlDMFxuICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlci5zdG9wQWxsQXVkaW8oKTtcbiAgICB9XG5cbiAgICBpc1BhdXNlZCgpOiBib29sZWFuIHtcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1RDY1Q1x1QzEzMSBcdUM2MjRcdUI1MTRcdUM2MjRcdUFDMDAgXHVDNzg4XHVCMjk0XHVDOUMwIFx1RDY1NVx1Qzc3OFxuICAgICAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmF1ZGlvTWFuYWdlci5nZXRTdGF0dXMoKTtcbiAgICAgICAgcmV0dXJuIHN0YXR1cy5hY3RpdmUgPT09IDA7XG4gICAgfVxuXG4gICAgcmVzdW1lKCk6IHZvaWQge1xuICAgICAgICAvLyBBdWRpb01hbmFnZXJcdUIyOTQgXHVBQzFDXHVCQ0M0IFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM2OTRcdUMxOENcdUI5N0MgXHVBRDAwXHVCOUFDXHVENTU4XHVCQkMwXHVCODVDIFxuICAgICAgICAvLyBcdUM1RUNcdUFFMzBcdUMxMUNcdUIyOTQgXHVDMEM4XHVCODVDXHVDNkI0IFx1QzY5NFx1Q0NBRFx1QzczQ1x1Qjg1QyBcdUNDOThcdUI5QUNcbiAgICAgICAgbmV3IE5vdGljZSgnXHVDNzRDXHVDMTMxXHVDNzQ0IFx1QjJFNFx1QzJEQyBcdUM3QUNcdUMwRERcdUQ1NThcdUI4MjRcdUJBNzQgXHVCQzg0XHVEMkJDXHVDNzQ0IFx1QjJFNFx1QzJEQyBcdUQwNzRcdUI5QURcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XG4gICAgfVxuXG4gICAgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcFNwZWFraW5nKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3M6IFBhcnRpYWw8R29vZ2xlQ2xvdWRUVFNTZXR0aW5ncz4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICAvLyBcdUI5QUNcdUMxOENcdUMyQTQgXHVDODE1XHVCOUFDXG4gICAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hdWRpb01hbmFnZXIuY2xlYW51cCgpO1xuICAgICAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyLmNhbmNlbEFsbFJlcXVlc3RzKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0ZXN0VGV4dCA9ICdIZWxsbywgdGhpcyBpcyBhIHRlc3QuJztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FsbEdvb2dsZUNsb3VkQVBJKHRlc3RUZXh0KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIENsb3VkIFRUUyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgJ2VuLVVTLUpvdXJuZXktRCcsXG4gICAgICAgICAgICAnZW4tVVMtSm91cm5leS1GJyxcbiAgICAgICAgICAgICdlbi1VUy1Kb3VybmV5LU8nLFxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItQScsXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1DJyxcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUQnLFxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItRScsXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1GJyxcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUcnLFxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItSCcsXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1JJyxcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUonLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUEnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUInLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUMnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUQnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUUnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUYnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUcnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUgnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUknLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUonLFxuICAgICAgICAgICAgJ2VuLUdCLU5ldXJhbDItQScsXG4gICAgICAgICAgICAnZW4tR0ItTmV1cmFsMi1CJyxcbiAgICAgICAgICAgICdlbi1HQi1OZXVyYWwyLUMnLFxuICAgICAgICAgICAgJ2VuLUdCLU5ldXJhbDItRCcsXG4gICAgICAgICAgICAnZW4tR0ItTmV1cmFsMi1GJyxcbiAgICAgICAgICAgICdlbi1BVS1OZXVyYWwyLUEnLFxuICAgICAgICAgICAgJ2VuLUFVLU5ldXJhbDItQicsXG4gICAgICAgICAgICAnZW4tQVUtTmV1cmFsMi1DJyxcbiAgICAgICAgICAgICdlbi1BVS1OZXVyYWwyLUQnXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgZ2V0U2V0dGluZ3MoKTogR29vZ2xlQ2xvdWRUVFNTZXR0aW5ncyB7XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuc2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0b3BTcGVha2luZygpO1xuICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudCA9IG51bGw7XG4gICAgfVxufSIsICJpbXBvcnQgeyBDaGF0dGVyYm94VFRTU2VydmljZSwgQ2hhdHRlcmJveFRUU1NldHRpbmdzIH0gZnJvbSAnLi9DaGF0dGVyYm94VFRTU2VydmljZSc7XG5pbXBvcnQgeyBHb29nbGVDbG91ZFRUU1NlcnZpY2UsIEdvb2dsZUNsb3VkVFRTU2V0dGluZ3MgfSBmcm9tICcuL0dvb2dsZUNsb3VkVFRTU2VydmljZSc7XG5pbXBvcnQgeyBUVFNTZXJ2aWNlIH0gZnJvbSAnLi9UVFNJbnRlcmZhY2UnO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xuaW1wb3J0IHsgZGVjcnlwdEFwaUtleSB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuLy8gVFRTIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUQzMjlcdUQxQTBcdUI5QUNcbmV4cG9ydCBjbGFzcyBUVFNTZXJ2aWNlRmFjdG9yeSB7XG4gICAgc3RhdGljIGNyZWF0ZVRUU1NlcnZpY2Uoc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IFRUU1NlcnZpY2Uge1xuICAgICAgICBpZiAoIXNldHRpbmdzLnR0c0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9PcFRUU1NlcnZpY2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZXR0aW5ncy50dHNQcm92aWRlciA9PT0gJ2dvb2dsZS1jbG91ZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGdvb2dsZVNldHRpbmdzOiBHb29nbGVDbG91ZFRUU1NldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLnR0c0VuYWJsZWQsXG4gICAgICAgICAgICAgICAgYXBpS2V5OiBkZWNyeXB0QXBpS2V5KHNldHRpbmdzLmdvb2dsZUNsb3VkVFRTQXBpS2V5KSxcbiAgICAgICAgICAgICAgICB2b2ljZTogc2V0dGluZ3MudHRzVm9pY2UsXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiBzZXR0aW5ncy5nb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZSxcbiAgICAgICAgICAgICAgICBzcGVha2luZ1JhdGU6IHNldHRpbmdzLmdvb2dsZUNsb3VkVFRTU3BlYWtpbmdSYXRlLFxuICAgICAgICAgICAgICAgIHBpdGNoOiBzZXR0aW5ncy5nb29nbGVDbG91ZFRUU1BpdGNoLFxuICAgICAgICAgICAgICAgIGF1dG9QbGF5OiBzZXR0aW5ncy50dHNBdXRvUGxheVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgR29vZ2xlQ2xvdWRUVFNTZXJ2aWNlKGdvb2dsZVNldHRpbmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1QUUzMFx1QkNGOFx1QUMxMjogQ2hhdHRlcmJveCBUVFNcbiAgICAgICAgICAgIGNvbnN0IGNoYXR0ZXJib3hTZXR0aW5nczogQ2hhdHRlcmJveFRUU1NldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLnR0c0VuYWJsZWQsXG4gICAgICAgICAgICAgICAgYXBpVXJsOiBzZXR0aW5ncy5jaGF0dGVyYm94QXBpVXJsLFxuICAgICAgICAgICAgICAgIHZvaWNlOiBzZXR0aW5ncy50dHNWb2ljZSxcbiAgICAgICAgICAgICAgICBleGFnZ2VyYXRpb246IHNldHRpbmdzLmNoYXR0ZXJib3hFeGFnZ2VyYXRpb24sXG4gICAgICAgICAgICAgICAgY2ZnV2VpZ2h0OiBzZXR0aW5ncy5jaGF0dGVyYm94Q2ZnV2VpZ2h0LFxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBzZXR0aW5ncy5jaGF0dGVyYm94VGVtcGVyYXR1cmUsXG4gICAgICAgICAgICAgICAgYXV0b1BsYXk6IHNldHRpbmdzLnR0c0F1dG9QbGF5XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGF0dGVyYm94VFRTU2VydmljZShjaGF0dGVyYm94U2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBcdUJFNDRcdUQ2NUNcdUMxMzEgXHVDMEMxXHVEMERDXHVDNzU4IFRUUyBcdUMxMUNcdUJFNDRcdUMyQTQgKE5vLU9wIFx1RDMyOFx1RDEzNClcbmNsYXNzIE5vT3BUVFNTZXJ2aWNlIGltcGxlbWVudHMgVFRTU2VydmljZSB7XG4gICAgYXN5bmMgc3BlYWtUZXh0KHRleHQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcbiAgICB9XG5cbiAgICBhc3luYyBzcGVha0V4YW1wbGUoZXhhbXBsZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXG4gICAgfVxuXG4gICAgc3RvcFNwZWFraW5nKCk6IHZvaWQge1xuICAgICAgICAvLyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xuICAgIH1cblxuICAgIGlzUGF1c2VkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXN1bWUoKTogdm9pZCB7XG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXG4gICAgfVxuXG4gICAgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXG4gICAgfVxuXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcbiAgICB9XG59XG5cbi8vIFx1RDYzOFx1RDY1OFx1QzEzMVx1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVCODA4XHVBQzcwXHVDMkRDIFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNFxuZXhwb3J0IGludGVyZmFjZSBMZWdhY3lUVFNTZXR0aW5ncyB7XG4gICAgZW5hYmxlZDogYm9vbGVhbjtcbiAgICB2b2ljZTogc3RyaW5nO1xuICAgIHBsYXliYWNrU3BlZWQ6IG51bWJlcjtcbiAgICBhdXRvUGxheTogYm9vbGVhbjtcbn1cblxuLy8gXHVCODA4XHVBQzcwXHVDMkRDIFx1QzEyNFx1QzgxNVx1Qzc0NCBDaGF0dGVyYm94IFx1QzEyNFx1QzgxNVx1QzczQ1x1Qjg1QyBcdUJDQzBcdUQ2NThcdUQ1NThcdUIyOTQgXHVENUVDXHVEMzdDIFx1RDU2OFx1QzIxOFxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRMZWdhY3lTZXR0aW5ncyhsZWdhY3lTZXR0aW5nczogTGVnYWN5VFRTU2V0dGluZ3MpOiBDaGF0dGVyYm94VFRTU2V0dGluZ3Mge1xuICAgIHJldHVybiB7XG4gICAgICAgIGVuYWJsZWQ6IGxlZ2FjeVNldHRpbmdzLmVuYWJsZWQsXG4gICAgICAgIGFwaVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMycsXG4gICAgICAgIHZvaWNlOiBsZWdhY3lTZXR0aW5ncy52b2ljZSB8fCAnYWxsb3knLFxuICAgICAgICBleGFnZ2VyYXRpb246IDAuNyxcbiAgICAgICAgY2ZnV2VpZ2h0OiAwLjQsXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjksXG4gICAgICAgIGF1dG9QbGF5OiBsZWdhY3lTZXR0aW5ncy5hdXRvUGxheVxuICAgIH07XG59XG5cbi8vIFx1RDYzOFx1RDY1OFx1QzEzMVx1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVBRTMwXHVCQ0Y4IGV4cG9ydFxuZXhwb3J0IHsgQ2hhdHRlcmJveFRUU1NlcnZpY2UsIEdvb2dsZUNsb3VkVFRTU2VydmljZSB9O1xuZXhwb3J0IHR5cGUgeyBDaGF0dGVyYm94VFRTU2V0dGluZ3MsIEdvb2dsZUNsb3VkVFRTU2V0dGluZ3MsIFRUU1NlcnZpY2UgfTsiLCAiaW1wb3J0IHsgTW9tZW50IH0gZnJvbSAnbW9tZW50JztcblxuZXhwb3J0IGVudW0gUmV2aWV3UmVzcG9uc2Uge1xuICAgIEhhcmQgPSAnaGFyZCcsICAgIC8vIHEgPSAxOiBcdUI5RTRcdUM2QjAgXHVDNUI0XHVCODM1XHVBQzhDIFx1RDY4Q1x1QzBDMVx1RDU1OFx1QUM3MFx1QjA5OCBcdUFDNzBcdUM3NTggXHVDMkU0XHVEMzI4XHVDNUQwIFx1QUMwMFx1QUU0Q1x1QzZCNCBcdUFDQkRcdUM2QjBcbiAgICBHb29kID0gJ2dvb2QnLCAgICAvLyBxID0gMjogXHVDNTdEXHVBQzA0XHVDNzU4IFx1QjE3OFx1QjgyNVx1Qzc0NCBcdUI0RTRcdUM1RUMgXHVENjhDXHVDMEMxXHVENTVDIFx1QUNCRFx1QzZCMCAgXG4gICAgRWFzeSA9ICdlYXN5JyAgICAgLy8gcSA9IDM6IFx1QzI3RFx1QUM4QyBcdUM2NDRcdUM4MDQgXHVENjhDXHVDMEMxXHVENTVDIFx1QUNCRFx1QzZCMFxufVxuXG4vLyBTTS0yIFx1QzU0Q1x1QUNFMFx1QjlBQ1x1Qzk5OFx1Qzc1OCBcdUQ0ODhcdUM5QzggXHVDODEwXHVDMjE4IFx1QjlFNFx1RDU1MVxuZXhwb3J0IGNvbnN0IFFVQUxJVFlfU0NPUkVTID0ge1xuICAgIFtSZXZpZXdSZXNwb25zZS5IYXJkXTogMSxcbiAgICBbUmV2aWV3UmVzcG9uc2UuR29vZF06IDIsXG4gICAgW1Jldmlld1Jlc3BvbnNlLkVhc3ldOiAzXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgaW50ZXJmYWNlIFNSU1NldHRpbmdzIHtcbiAgICAvLyBTTS0yIEFsZ29yaXRobSBTZXR0aW5nc1xuICAgIGluaXRpYWxFRmFjdG9yOiBudW1iZXI7ICAgICAvLyBTTS0yIFx1Q0QwOFx1QUUzMCBFLUZhY3RvciAoMi41KVxuICAgIG1pbmltdW1FRmFjdG9yOiBudW1iZXI7ICAgICAvLyBTTS0yIFx1Q0Q1Q1x1QzE4QyBFLUZhY3RvciAoMS4zKVxuICAgIG1heGltdW1JbnRlcnZhbDogbnVtYmVyOyAgICAvLyBNYXhpbXVtIGludGVydmFsIGluIGRheXMgKDM2NTI1ID0gfjEwMCB5ZWFycylcbiAgICBcbiAgICAvLyBMb2FkIEJhbGFuY2luZyBTZXR0aW5nc1xuICAgIGxvYWRCYWxhbmNlOiBib29sZWFuOyAgICAgICAvLyBFbmFibGUgcmV2aWV3IGxvYWQgYmFsYW5jaW5nXG4gICAgbWF4RnV6emluZ0RheXM6IG51bWJlcjsgICAgIC8vIE1heGltdW0gZnV6emluZyBmb3IgbG9hZCBiYWxhbmNpbmcgKDMpXG4gICAgXG4gICAgLy8gTGVnYWN5IGNvbXBhdGliaWxpdHkgKGRlcHJlY2F0ZWQgYnV0IGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXG4gICAgYmFzZUVhc2U6IG51bWJlcjsgICAgICAgICAgIC8vIFN0YXJ0aW5nIGVhc2UgZmFjdG9yICgyNTAlKSAtIGNvbnZlcnRlZCB0byBFRmFjdG9yXG4gICAgZWFzeUJvbnVzOiBudW1iZXI7ICAgICAgICAgIC8vIE11bHRpcGxpZXIgZm9yIGVhc3kgcmVzcG9uc2VzICgxLjMpIC0gbm90IHVzZWQgaW4gU00tMlxuICAgIGhhcmRQZW5hbHR5OiBudW1iZXI7ICAgICAgICAvLyBNdWx0aXBsaWVyIGZvciBoYXJkIHJlc3BvbnNlcyAoMC41KSAtIG5vdCB1c2VkIGluIFNNLTJcbiAgICBtaW5pbXVtRWFzZTogbnVtYmVyOyAgICAgICAgLy8gTWluaW11bSBlYXNlIGZhY3RvciAoMTMwJSkgLSBjb252ZXJ0ZWQgdG8gRUZhY3RvclxuICAgIGluaXRpYWxJbnRlcnZhbDogbnVtYmVyOyAgICAvLyBTdGFydGluZyBpbnRlcnZhbCBpbiBkYXlzICgxKSAtIG5vdCB1c2VkIGluIFNNLTJcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1JTX1NFVFRJTkdTOiBTUlNTZXR0aW5ncyA9IHtcbiAgICAvLyBTTS0yIEFsZ29yaXRobSBTZXR0aW5nc1xuICAgIGluaXRpYWxFRmFjdG9yOiAyLjUsICAgICAgICAvLyBTTS0yIFx1RDQ1Q1x1QzkwMCBcdUNEMDhcdUFFMzAgRS1GYWN0b3JcbiAgICBtaW5pbXVtRUZhY3RvcjogMS4zLCAgICAgICAgLy8gU00tMiBcdUQ0NUNcdUM5MDAgXHVDRDVDXHVDMThDIEUtRmFjdG9yXG4gICAgbWF4aW11bUludGVydmFsOiAzNjUyNSwgICAgIC8vIH4xMDBcdUIxNDRcbiAgICBcbiAgICAvLyBMb2FkIEJhbGFuY2luZyBTZXR0aW5nc1xuICAgIGxvYWRCYWxhbmNlOiB0cnVlLFxuICAgIG1heEZ1enppbmdEYXlzOiAzLFxuICAgIFxuICAgIC8vIExlZ2FjeSBjb21wYXRpYmlsaXR5ICh3aWxsIGJlIGNvbnZlcnRlZClcbiAgICBiYXNlRWFzZTogMjUwLCAgICAgICAgICAgICAgLy8gMi41ICogMTAwXG4gICAgZWFzeUJvbnVzOiAxLjMsXG4gICAgaGFyZFBlbmFsdHk6IDAuNSxcbiAgICBtaW5pbXVtRWFzZTogMTMwLCAgICAgICAgICAgLy8gMS4zICogMTAwXG4gICAgaW5pdGlhbEludGVydmFsOiAxXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFNjaGVkdWxlSW5mbyB7XG4gICAgZHVlRGF0ZTogc3RyaW5nOyAgICAgICAgICAgLy8gSVNPIGRhdGUgc3RyaW5nXG4gICAgaW50ZXJ2YWw6IG51bWJlcjsgICAgICAgICAgLy8gRGF5cyB1bnRpbCBuZXh0IHJldmlld1xuICAgIGVhc2U6IG51bWJlcjsgICAgICAgICAgICAgIC8vIEVhc2UgZmFjdG9yIChFLUZhY3RvciAqIDEwMCwgMTMwLTUwMCspXG4gICAgcmV2aWV3Q291bnQ6IG51bWJlcjsgICAgICAgLy8gVG90YWwgbnVtYmVyIG9mIHJldmlld3NcbiAgICBsYXBzZUNvdW50OiBudW1iZXI7ICAgICAgICAvLyBOdW1iZXIgb2YgaGFyZCByZXNwb25zZXNcbiAgICBkZWxheWVkRGF5czogbnVtYmVyOyAgICAgICAvLyBEYXlzIGRlbGF5ZWQgYmVmb3JlIHRoaXMgcmV2aWV3XG4gICAgcmVwZXRpdGlvbjogbnVtYmVyOyAgICAgICAgLy8gU00tMiByZXBldGl0aW9uIGNvdW50IChcdUM1RjBcdUMxOEQgXHVDMTMxXHVBQ0Y1IFx1RDY4Q1x1QzBDMSBcdUQ2OUZcdUMyMTgpXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV2aWV3UmVzdWx0IHtcbiAgICBpbnRlcnZhbDogbnVtYmVyO1xuICAgIGVhc2U6IG51bWJlcjtcbiAgICBkdWVEYXRlOiBzdHJpbmc7XG4gICAgcmVwZXRpdGlvbjogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobSB7XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogU1JTU2V0dGluZ3M7XG4gICAgcHJpdmF0ZSBkdWVEYXRlSGlzdG9ncmFtOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xuXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFNSU1NldHRpbmdzID0gREVGQVVMVF9TUlNfU0VUVElOR1MpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgbmV4dCByZXZpZXcgc2NoZWR1bGUgYmFzZWQgb24gdXNlciByZXNwb25zZVxuICAgICAqIEltcGxlbWVudHMgdGhlIFNNLTIgYWxnb3JpdGhtIGFjY29yZGluZyB0byBsZWFybmluZ19hbGdvcml0aG0ubWQgc3BlY2lmaWNhdGlvblxuICAgICAqL1xuICAgIHNjaGVkdWxlKFxuICAgICAgICByZXNwb25zZTogUmV2aWV3UmVzcG9uc2UsXG4gICAgICAgIGN1cnJlbnRTY2hlZHVsZT86IFNjaGVkdWxlSW5mb1xuICAgICk6IFJldmlld1Jlc3VsdCB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHEgPSBRVUFMSVRZX1NDT1JFU1tyZXNwb25zZV07IC8vIFx1RDQ4OFx1QzlDOCBcdUM4MTBcdUMyMTg6IDEoaGFyZCksIDIoZ29vZCksIDMoZWFzeSlcbiAgICAgICAgXG4gICAgICAgIC8vIEluaXRpYWxpemUgc2NoZWR1bGUgaW5mbyBmb3IgbmV3IGNhcmRzXG4gICAgICAgIGlmICghY3VycmVudFNjaGVkdWxlKSB7XG4gICAgICAgICAgICBjdXJyZW50U2NoZWR1bGUgPSB7XG4gICAgICAgICAgICAgICAgZHVlRGF0ZTogbm93LnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogTWF0aC5yb3VuZCh0aGlzLnNldHRpbmdzLmluaXRpYWxFRmFjdG9yICogMTAwKSwgLy8gRS1GYWN0b3JcdUI5N0MgMTAwXHVDNzNDXHVCODVDIFx1QUNGMVx1RDU3NFx1QzExQyBcdUM4MDBcdUM3QTVcbiAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogMCxcbiAgICAgICAgICAgICAgICBsYXBzZUNvdW50OiAwLFxuICAgICAgICAgICAgICAgIGRlbGF5ZWREYXlzOiAwLFxuICAgICAgICAgICAgICAgIHJlcGV0aXRpb246IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgRS1GYWN0b3IgXHVBQ0M0XHVDMEIwIChcdUM4MDBcdUM3QTVcdUI0MUMgXHVBQzEyXHVDNzQ0IDEwMFx1QzczQ1x1Qjg1QyBcdUIwOThcdUIyMDRcdUM1QjQgXHVDMkU0XHVDODFDIEUtRmFjdG9yIFx1QzVCQlx1Qzc0QylcbiAgICAgICAgbGV0IGN1cnJlbnRFRmFjdG9yID0gY3VycmVudFNjaGVkdWxlLmVhc2UgLyAxMDA7XG4gICAgICAgIGxldCBuZXdSZXBldGl0aW9uID0gY3VycmVudFNjaGVkdWxlLnJlcGV0aXRpb247XG4gICAgICAgIFxuICAgICAgICAvLyBTTS0yIEFsZ29yaXRobSBTdGVwIDE6IEUtRmFjdG9yIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICAvLyBFRl9uZXcgPSBFRl9vbGQgKyAoMC4xIC0gKDMtcSkgKiAoMC4wOCArICgzLXEpICogMC4wMikpXG4gICAgICAgIGNvbnN0IGRlbHRhID0gMC4xIC0gKDMgLSBxKSAqICgwLjA4ICsgKDMgLSBxKSAqIDAuMDIpO1xuICAgICAgICBsZXQgbmV3RUZhY3RvciA9IGN1cnJlbnRFRmFjdG9yICsgZGVsdGE7XG4gICAgICAgIFxuICAgICAgICAvLyBFLUZhY3RvciBcdUNENUNcdUMxOENcdUFDMTIgXHVDODFDXHVENTVDICgxLjMpXG4gICAgICAgIG5ld0VGYWN0b3IgPSBNYXRoLm1heCh0aGlzLnNldHRpbmdzLm1pbmltdW1FRmFjdG9yLCBuZXdFRmFjdG9yKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNNLTIgQWxnb3JpdGhtIFN0ZXAgMjogUmVwZXRpdGlvbiBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgaWYgKHEgPj0gMikgeyAvLyBnb29kIFx1QjYxMFx1QjI5NCBlYXN5IChxID0gMiBcdUI2MTBcdUIyOTQgMylcbiAgICAgICAgICAgIG5ld1JlcGV0aXRpb24gPSBjdXJyZW50U2NoZWR1bGUucmVwZXRpdGlvbiArIDE7XG4gICAgICAgIH0gZWxzZSB7IC8vIGhhcmQgKHEgPSAxKVxuICAgICAgICAgICAgbmV3UmVwZXRpdGlvbiA9IDA7IC8vIHJlcGV0aXRpb24gXHVCOUFDXHVDMTRCXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNNLTIgQWxnb3JpdGhtIFN0ZXAgMzogXHVCMkU0XHVDNzRDIFx1QkNGNVx1QzJCNSBcdUFDMDRcdUFDQTkgXHVBQ0M0XHVDMEIwXG4gICAgICAgIGxldCBuZXdJbnRlcnZhbDogbnVtYmVyO1xuICAgICAgICBcbiAgICAgICAgaWYgKHEgPCAyKSB7IC8vIGhhcmQgKHEgPSAxKVxuICAgICAgICAgICAgLy8gaGFyZCBcdUM3NTFcdUIyRjUgXHVDMkRDIFx1Qzk4OVx1QzJEQyBcdUJDRjVcdUMyQjUgKDFcdUM3N0MgXHVENkM0KVxuICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZ29vZCBcdUI2MTBcdUIyOTQgZWFzeSBcdUM3NTFcdUIyRjUgXHVDMkRDIFNNLTIgXHVBQzA0XHVBQ0E5IFx1QUNGNVx1QzJERCBcdUM4MDFcdUM2QTlcbiAgICAgICAgICAgIGlmIChuZXdSZXBldGl0aW9uID09PSAxKSB7XG4gICAgICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdSZXBldGl0aW9uID09PSAyKSB7XG4gICAgICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSA2O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBuID49IDM6IElfbiA9IElfKG4tMSkgKiBFRl9uZXdcbiAgICAgICAgICAgICAgICBuZXdJbnRlcnZhbCA9IE1hdGgucm91bmQoY3VycmVudFNjaGVkdWxlLmludGVydmFsICogbmV3RUZhY3Rvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1Q0Q1Q1x1QjMwMCBcdUFDMDRcdUFDQTkgXHVDODFDXHVENTVDXG4gICAgICAgIG5ld0ludGVydmFsID0gTWF0aC5taW4obmV3SW50ZXJ2YWwsIHRoaXMuc2V0dGluZ3MubWF4aW11bUludGVydmFsKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1Q0Q1Q1x1QzE4QyBcdUFDMDRcdUFDQTkgXHVCQ0Y0XHVDN0E1ICgxXHVDNzdDKVxuICAgICAgICBuZXdJbnRlcnZhbCA9IE1hdGgubWF4KDEsIG5ld0ludGVydmFsKTtcblxuICAgICAgICAvLyBMb2FkIGJhbGFuY2luZyBcdUM4MDFcdUM2QTkgKFx1QzEyMFx1RDBERFx1QzBBQ1x1RDU2RClcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubG9hZEJhbGFuY2UpIHtcbiAgICAgICAgICAgIG5ld0ludGVydmFsID0gdGhpcy5hcHBseUxvYWRCYWxhbmNpbmcobmV3SW50ZXJ2YWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDMEM4XHVCODVDXHVDNkI0IFx1QjlDQ1x1QjhDQ1x1Qzc3QyBcdUFDQzRcdUMwQjBcbiAgICAgICAgY29uc3QgbmV3RHVlRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyBuZXdJbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuXG4gICAgICAgIC8vIFx1RDc4OFx1QzJBNFx1RDFBMFx1QURGOFx1QjdBOCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggKGxvYWQgYmFsYW5jaW5nXHVDNkE5KVxuICAgICAgICB0aGlzLnVwZGF0ZUR1ZURhdGVIaXN0b2dyYW0obmV3RHVlRGF0ZS50b0RhdGVTdHJpbmcoKSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGludGVydmFsOiBuZXdJbnRlcnZhbCxcbiAgICAgICAgICAgIGVhc2U6IE1hdGgucm91bmQobmV3RUZhY3RvciAqIDEwMCksIC8vIEUtRmFjdG9yXHVCOTdDIDEwMFx1QzczQ1x1Qjg1QyBcdUFDRjFcdUQ1NzRcdUMxMUMgXHVCQzE4XHVENjU4XG4gICAgICAgICAgICBkdWVEYXRlOiBuZXdEdWVEYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICByZXBldGl0aW9uOiBuZXdSZXBldGl0aW9uXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwbHkgbG9hZCBiYWxhbmNpbmcgdG8gZGlzdHJpYnV0ZSByZXZpZXdzIGV2ZW5seSBhY3Jvc3MgZGF5c1xuICAgICAqIEJhc2VkIG9uIHRoZSBoaXN0b2dyYW0tYmFzZWQgYXBwcm9hY2ggZnJvbSBvYnNpZGlhbi1zcGFjZWQtcmVwZXRpdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgYXBwbHlMb2FkQmFsYW5jaW5nKGludGVydmFsOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MubG9hZEJhbGFuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERpZmZlcmVudCBmdXp6aW5nIHN0cmF0ZWdpZXMgYmFzZWQgb24gaW50ZXJ2YWwgbGVuZ3RoXG4gICAgICAgIGxldCBmdXp6aW5nUmFuZ2U6IG51bWJlcjtcbiAgICAgICAgXG4gICAgICAgIGlmIChpbnRlcnZhbCA8PSAyMSkge1xuICAgICAgICAgICAgZnV6emluZ1JhbmdlID0gMTsgLy8gMSBkYXkgZnV6emluZyBmb3Igc2hvcnQgaW50ZXJ2YWxzXG4gICAgICAgIH0gZWxzZSBpZiAoaW50ZXJ2YWwgPD0gMTgwKSB7XG4gICAgICAgICAgICBmdXp6aW5nUmFuZ2UgPSBNYXRoLm1heCgxLCBpbnRlcnZhbCAqIDAuMDUpOyAvLyA1JSBmdXp6aW5nIGZvciBtZWRpdW0gaW50ZXJ2YWxzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmdXp6aW5nUmFuZ2UgPSBNYXRoLm1heCgxLCBpbnRlcnZhbCAqIDAuMDI1KTsgLy8gMi41JSBmdXp6aW5nIGZvciBsb25nIGludGVydmFsc1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FwIGZ1enppbmcgYXQgbWF4IHNldHRpbmdcbiAgICAgICAgZnV6emluZ1JhbmdlID0gTWF0aC5taW4oZnV6emluZ1JhbmdlLCB0aGlzLnNldHRpbmdzLm1heEZ1enppbmdEYXlzKTtcblxuICAgICAgICAvLyBGaW5kIHRoZSBkYXRlIHdpdGggbWluaW11bSByZXZpZXdzIGluIHRoZSBmdXp6aW5nIHJhbmdlXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGxldCBiZXN0SW50ZXJ2YWwgPSBpbnRlcnZhbDtcbiAgICAgICAgbGV0IG1pblJldmlld3MgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcblxuICAgICAgICBmb3IgKGxldCBvZmZzZXQgPSAtZnV6emluZ1JhbmdlOyBvZmZzZXQgPD0gZnV6emluZ1JhbmdlOyBvZmZzZXQrKykge1xuICAgICAgICAgICAgY29uc3QgdGVzdEludGVydmFsID0gaW50ZXJ2YWwgKyBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAodGVzdEludGVydmFsIDwgMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IHRlc3REYXRlID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIHRlc3RJbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IHRlc3REYXRlLnRvRGF0ZVN0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgcmV2aWV3Q291bnQgPSB0aGlzLmR1ZURhdGVIaXN0b2dyYW0uZ2V0KGRhdGVTdHJpbmcpIHx8IDA7XG5cbiAgICAgICAgICAgIGlmIChyZXZpZXdDb3VudCA8IG1pblJldmlld3MpIHtcbiAgICAgICAgICAgICAgICBtaW5SZXZpZXdzID0gcmV2aWV3Q291bnQ7XG4gICAgICAgICAgICAgICAgYmVzdEludGVydmFsID0gdGVzdEludGVydmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJlc3RJbnRlcnZhbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGR1ZSBkYXRlIGhpc3RvZ3JhbSBmb3IgbG9hZCBiYWxhbmNpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIHVwZGF0ZUR1ZURhdGVIaXN0b2dyYW0oZGF0ZVN0cmluZzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmR1ZURhdGVIaXN0b2dyYW0uZ2V0KGRhdGVTdHJpbmcpIHx8IDA7XG4gICAgICAgIHRoaXMuZHVlRGF0ZUhpc3RvZ3JhbS5zZXQoZGF0ZVN0cmluZywgY3VycmVudCArIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjYXJkcyB0aGF0IGFyZSBkdWUgZm9yIHJldmlld1xuICAgICAqL1xuICAgIHN0YXRpYyBnZXRDYXJkc0ZvclJldmlldyhjYXJkczogQXJyYXk8eyBzY2hlZHVsZUluZm8/OiBTY2hlZHVsZUluZm8gfT4pOiBBcnJheTx7IHNjaGVkdWxlSW5mbz86IFNjaGVkdWxlSW5mbyB9PiB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY2FyZHMuZmlsdGVyKGNhcmQgPT4ge1xuICAgICAgICAgICAgaWYgKCFjYXJkLnNjaGVkdWxlSW5mbykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBOZXcgY2FyZHMgYXJlIGFsd2F5cyBkdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IG5ldyBEYXRlKGNhcmQuc2NoZWR1bGVJbmZvLmR1ZURhdGUpO1xuICAgICAgICAgICAgcmV0dXJuIGR1ZURhdGUgPD0gbm93O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIG51bWJlciBvZiBjYXJkcyBkdWUgaW4gdGhlIG5leHQgTiBkYXlzXG4gICAgICovXG4gICAgc3RhdGljIGdldENhcmRzRHVlSW5EYXlzKGNhcmRzOiBBcnJheTx7IHNjaGVkdWxlSW5mbz86IFNjaGVkdWxlSW5mbyB9PiwgZGF5czogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgZnV0dXJlRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyBkYXlzICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY2FyZHMuZmlsdGVyKGNhcmQgPT4ge1xuICAgICAgICAgICAgaWYgKCFjYXJkLnNjaGVkdWxlSW5mbykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBOZXcgY2FyZHMgY291bnQgYXMgZHVlIHRvZGF5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGR1ZURhdGUgPSBuZXcgRGF0ZShjYXJkLnNjaGVkdWxlSW5mby5kdWVEYXRlKTtcbiAgICAgICAgICAgIHJldHVybiBkdWVEYXRlIDw9IGZ1dHVyZURhdGU7XG4gICAgICAgIH0pLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGVhcm5pbmcgc3RhdGlzdGljcyBmb3IgYSBzZXQgb2YgY2FyZHNcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0U3RhdGlzdGljcyhjYXJkczogQXJyYXk8eyBzY2hlZHVsZUluZm8/OiBTY2hlZHVsZUluZm8gfT4pOiB7XG4gICAgICAgIHRvdGFsOiBudW1iZXI7XG4gICAgICAgIG5ldzogbnVtYmVyO1xuICAgICAgICBsZWFybmluZzogbnVtYmVyO1xuICAgICAgICBtYXR1cmU6IG51bWJlcjtcbiAgICAgICAgYXZlcmFnZUVhc2U6IG51bWJlcjtcbiAgICAgICAgYXZlcmFnZUludGVydmFsOiBudW1iZXI7XG4gICAgfSB7XG4gICAgICAgIGxldCBuZXdDYXJkcyA9IDA7XG4gICAgICAgIGxldCBsZWFybmluZ0NhcmRzID0gMDtcbiAgICAgICAgbGV0IG1hdHVyZUNhcmRzID0gMDtcbiAgICAgICAgbGV0IHRvdGFsRWFzZSA9IDA7XG4gICAgICAgIGxldCB0b3RhbEludGVydmFsID0gMDtcbiAgICAgICAgbGV0IGNhcmRzV2l0aFNjaGVkdWxlID0gMDtcblxuICAgICAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgICAgICAgaWYgKCFjYXJkLnNjaGVkdWxlSW5mbykge1xuICAgICAgICAgICAgICAgIG5ld0NhcmRzKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhcmRzV2l0aFNjaGVkdWxlKys7XG4gICAgICAgICAgICAgICAgdG90YWxFYXNlICs9IGNhcmQuc2NoZWR1bGVJbmZvLmVhc2U7XG4gICAgICAgICAgICAgICAgdG90YWxJbnRlcnZhbCArPSBjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbDtcblxuICAgICAgICAgICAgICAgIGlmIChjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbCA8IDIxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nQ2FyZHMrKztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXR1cmVDYXJkcysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvdGFsOiBjYXJkcy5sZW5ndGgsXG4gICAgICAgICAgICBuZXc6IG5ld0NhcmRzLFxuICAgICAgICAgICAgbGVhcm5pbmc6IGxlYXJuaW5nQ2FyZHMsXG4gICAgICAgICAgICBtYXR1cmU6IG1hdHVyZUNhcmRzLFxuICAgICAgICAgICAgYXZlcmFnZUVhc2U6IGNhcmRzV2l0aFNjaGVkdWxlID4gMCA/IE1hdGgucm91bmQodG90YWxFYXNlIC8gY2FyZHNXaXRoU2NoZWR1bGUpIDogMCxcbiAgICAgICAgICAgIGF2ZXJhZ2VJbnRlcnZhbDogY2FyZHNXaXRoU2NoZWR1bGUgPiAwID8gTWF0aC5yb3VuZCh0b3RhbEludGVydmFsIC8gY2FyZHNXaXRoU2NoZWR1bGUpIDogMFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbGdvcml0aG0gc2V0dGluZ3NcbiAgICAgKi9cbiAgICB1cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5nczogUGFydGlhbDxTUlNTZXR0aW5ncz4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBzZXR0aW5nc1xuICAgICAqL1xuICAgIGdldFNldHRpbmdzKCk6IFNSU1NldHRpbmdzIHtcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5zZXR0aW5ncyB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBkdWUgZGF0ZSBoaXN0b2dyYW0gKHVzZWZ1bCBmb3IgdGVzdGluZyBvciByZXNldClcbiAgICAgKi9cbiAgICBjbGVhckhpc3RvZ3JhbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kdWVEYXRlSGlzdG9ncmFtLmNsZWFyKCk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBcbiAgICBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLCBcbiAgICBSZXZpZXdSZXNwb25zZSwgXG4gICAgU1JTU2V0dGluZ3MsIFxuICAgIERFRkFVTFRfU1JTX1NFVFRJTkdTLFxuICAgIFNjaGVkdWxlSW5mbyBcbn0gZnJvbSAnLi4vYWxnb3JpdGhtcy9TcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtJztcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi4vLi4vVm9jYWJ1bGFyeUNhcmQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1Nlc3Npb24ge1xuICAgIHNlc3Npb25JZDogc3RyaW5nO1xuICAgIHN0YXJ0VGltZTogc3RyaW5nO1xuICAgIGNhcmRzUmV2aWV3ZWQ6IG51bWJlcjtcbiAgICB0b3RhbENhcmRzOiBudW1iZXI7XG4gICAgY29tcGxldGVkQ2FyZHM6IFZvY2FidWxhcnlDYXJkW107XG4gICAgY3VycmVudENhcmQ/OiBWb2NhYnVsYXJ5Q2FyZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHVkeVN0YXRpc3RpY3Mge1xuICAgIHRvZGF5OiB7XG4gICAgICAgIG5ld0NhcmRzOiBudW1iZXI7XG4gICAgICAgIHJldmlld2VkQ2FyZHM6IG51bWJlcjtcbiAgICAgICAgdG90YWxUaW1lOiBudW1iZXI7IC8vIG1pbnV0ZXNcbiAgICB9O1xuICAgIHN0cmVhazoge1xuICAgICAgICBjdXJyZW50RGF5czogbnVtYmVyO1xuICAgICAgICBsb25nZXN0RGF5czogbnVtYmVyO1xuICAgICAgICBsYXN0U3R1ZHlEYXRlOiBzdHJpbmcgfCBudWxsO1xuICAgIH07XG4gICAgb3ZlcmFsbDoge1xuICAgICAgICB0b3RhbENhcmRzOiBudW1iZXI7XG4gICAgICAgIG5ld0NhcmRzOiBudW1iZXI7XG4gICAgICAgIGxlYXJuaW5nQ2FyZHM6IG51bWJlcjtcbiAgICAgICAgbWF0dXJlQ2FyZHM6IG51bWJlcjtcbiAgICAgICAgYXZlcmFnZUVhc2U6IG51bWJlcjtcbiAgICAgICAgYXZlcmFnZUludGVydmFsOiBudW1iZXI7XG4gICAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlIHtcbiAgICBwcml2YXRlIGFsZ29yaXRobTogU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobTtcbiAgICBwcml2YXRlIGN1cnJlbnRTZXNzaW9uOiBSZXZpZXdTZXNzaW9uIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogUGFydGlhbDxTUlNTZXR0aW5ncz4gPSB7fSkge1xuICAgICAgICBjb25zdCBzcnNTZXR0aW5ncyA9IHsgLi4uREVGQVVMVF9TUlNfU0VUVElOR1MsIC4uLnNldHRpbmdzIH07XG4gICAgICAgIHRoaXMuYWxnb3JpdGhtID0gbmV3IFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0oc3JzU2V0dGluZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjYXJkcyB0aGF0IGFyZSBkdWUgZm9yIHJldmlldyB0b2RheVxuICAgICAqL1xuICAgIGdldENhcmRzRm9yUmV2aWV3KGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogVm9jYWJ1bGFyeUNhcmRbXSB7XG4gICAgICAgIHJldHVybiBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLmdldENhcmRzRm9yUmV2aWV3KGFsbENhcmRzKSBhcyBWb2NhYnVsYXJ5Q2FyZFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBuZXcgY2FyZHMgKG5ldmVyIHJldmlld2VkKVxuICAgICAqL1xuICAgIGdldE5ld0NhcmRzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogVm9jYWJ1bGFyeUNhcmRbXSB7XG4gICAgICAgIHJldHVybiBhbGxDYXJkcy5maWx0ZXIoY2FyZCA9PiAhY2FyZC5zY2hlZHVsZUluZm8gfHwgY2FyZC5yZXZpZXdDb3VudCA9PT0gMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGxlYXJuaW5nIGNhcmRzIChyZXZpZXdlZCBidXQgbm90IG1hdHVyZSlcbiAgICAgKi9cbiAgICBnZXRMZWFybmluZ0NhcmRzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogVm9jYWJ1bGFyeUNhcmRbXSB7XG4gICAgICAgIHJldHVybiBhbGxDYXJkcy5maWx0ZXIoY2FyZCA9PiBcbiAgICAgICAgICAgIGNhcmQuc2NoZWR1bGVJbmZvICYmIFxuICAgICAgICAgICAgY2FyZC5yZXZpZXdDb3VudCA+IDAgJiYgXG4gICAgICAgICAgICBjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbCA8IDIxXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IG1hdHVyZSBjYXJkcyAoaW50ZXJ2YWwgPj0gMjEgZGF5cylcbiAgICAgKi9cbiAgICBnZXRNYXR1cmVDYXJkcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IFZvY2FidWxhcnlDYXJkW10ge1xuICAgICAgICByZXR1cm4gYWxsQ2FyZHMuZmlsdGVyKGNhcmQgPT4gXG4gICAgICAgICAgICBjYXJkLnNjaGVkdWxlSW5mbyAmJiBcbiAgICAgICAgICAgIGNhcmQuc2NoZWR1bGVJbmZvLmludGVydmFsID49IDIxXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhcnQgYSBuZXcgcmV2aWV3IHNlc3Npb25cbiAgICAgKi9cbiAgICBzdGFydFJldmlld1Nlc3Npb24oZHVlQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10sIG1heENhcmRzPzogbnVtYmVyKTogUmV2aWV3U2Vzc2lvbiB7XG4gICAgICAgIGNvbnN0IGNhcmRzVG9SZXZpZXcgPSBtYXhDYXJkcyA/IGR1ZUNhcmRzLnNsaWNlKDAsIG1heENhcmRzKSA6IGR1ZUNhcmRzO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbiA9IHtcbiAgICAgICAgICAgIHNlc3Npb25JZDogdGhpcy5nZW5lcmF0ZVNlc3Npb25JZCgpLFxuICAgICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBjYXJkc1Jldmlld2VkOiAwLFxuICAgICAgICAgICAgdG90YWxDYXJkczogY2FyZHNUb1Jldmlldy5sZW5ndGgsXG4gICAgICAgICAgICBjb21wbGV0ZWRDYXJkczogW10sXG4gICAgICAgICAgICBjdXJyZW50Q2FyZDogY2FyZHNUb1Jldmlld1swXVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTZXNzaW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgYSByZXZpZXcgcmVzcG9uc2UgYW5kIGdldCB0aGUgbmV4dCBjYXJkXG4gICAgICovXG4gICAgcHJvY2Vzc1JldmlldyhcbiAgICAgICAgY2FyZDogVm9jYWJ1bGFyeUNhcmQsIFxuICAgICAgICByZXNwb25zZTogUmV2aWV3UmVzcG9uc2VcbiAgICApOiB7IFxuICAgICAgICB1cGRhdGVkQ2FyZDogVm9jYWJ1bGFyeUNhcmQ7IFxuICAgICAgICBuZXh0Q2FyZD86IFZvY2FidWxhcnlDYXJkOyBcbiAgICAgICAgc2Vzc2lvbkNvbXBsZXRlOiBib29sZWFuIFxuICAgIH0ge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFNlc3Npb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYWN0aXZlIHJldmlldyBzZXNzaW9uJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBcHBseSBzcGFjZWQgcmVwZXRpdGlvbiBhbGdvcml0aG1cbiAgICAgICAgY29uc3QgcmV2aWV3UmVzdWx0ID0gdGhpcy5hbGdvcml0aG0uc2NoZWR1bGUocmVzcG9uc2UsIGNhcmQuc2NoZWR1bGVJbmZvKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBjYXJkIHdpdGggbmV3IHNjaGVkdWxlXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDYXJkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcbiAgICAgICAgICAgIC4uLmNhcmQsXG4gICAgICAgICAgICByZXZpZXdDb3VudDogKGNhcmQuc2NoZWR1bGVJbmZvPy5yZXZpZXdDb3VudCB8fCAwKSArIDEsXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiByZXNwb25zZSxcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgc2NoZWR1bGVJbmZvOiB7XG4gICAgICAgICAgICAgICAgZHVlRGF0ZTogcmV2aWV3UmVzdWx0LmR1ZURhdGUsXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IHJldmlld1Jlc3VsdC5pbnRlcnZhbCxcbiAgICAgICAgICAgICAgICBlYXNlOiByZXZpZXdSZXN1bHQuZWFzZSxcbiAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogKGNhcmQuc2NoZWR1bGVJbmZvPy5yZXZpZXdDb3VudCB8fCAwKSArIDEsXG4gICAgICAgICAgICAgICAgbGFwc2VDb3VudDogKGNhcmQuc2NoZWR1bGVJbmZvPy5sYXBzZUNvdW50IHx8IDApICsgKHJlc3BvbnNlID09PSBSZXZpZXdSZXNwb25zZS5IYXJkID8gMSA6IDApLFxuICAgICAgICAgICAgICAgIGRlbGF5ZWREYXlzOiBjYXJkLnNjaGVkdWxlSW5mbz8uZGVsYXllZERheXMgfHwgMCxcbiAgICAgICAgICAgICAgICByZXBldGl0aW9uOiByZXZpZXdSZXN1bHQucmVwZXRpdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFVwZGF0ZSBzZXNzaW9uXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24uY2FyZHNSZXZpZXdlZCsrO1xuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uLmNvbXBsZXRlZENhcmRzLnB1c2godXBkYXRlZENhcmQpO1xuXG4gICAgICAgIC8vIEdldCBuZXh0IGNhcmRcbiAgICAgICAgY29uc3QgZHVlQ2FyZHMgPSB0aGlzLmdldENhcmRzRm9yUmV2aWV3KFtjYXJkXSk7IC8vIFRoaXMgd291bGQgYmUgcmVwbGFjZWQgd2l0aCByZW1haW5pbmcgY2FyZHNcbiAgICAgICAgY29uc3QgbmV4dENhcmQgPSB0aGlzLmN1cnJlbnRTZXNzaW9uLmNhcmRzUmV2aWV3ZWQgPCB0aGlzLmN1cnJlbnRTZXNzaW9uLnRvdGFsQ2FyZHMgXG4gICAgICAgICAgICA/IGR1ZUNhcmRzW3RoaXMuY3VycmVudFNlc3Npb24uY2FyZHNSZXZpZXdlZF0gXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uLmN1cnJlbnRDYXJkID0gbmV4dENhcmQ7XG5cbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbXBsZXRlID0gIW5leHRDYXJkIHx8IHRoaXMuY3VycmVudFNlc3Npb24uY2FyZHNSZXZpZXdlZCA+PSB0aGlzLmN1cnJlbnRTZXNzaW9uLnRvdGFsQ2FyZHM7XG5cbiAgICAgICAgaWYgKHNlc3Npb25Db21wbGV0ZSkge1xuICAgICAgICAgICAgdGhpcy5lbmRSZXZpZXdTZXNzaW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXBkYXRlZENhcmQsXG4gICAgICAgICAgICBuZXh0Q2FyZCxcbiAgICAgICAgICAgIHNlc3Npb25Db21wbGV0ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuZCB0aGUgY3VycmVudCByZXZpZXcgc2Vzc2lvblxuICAgICAqL1xuICAgIGVuZFJldmlld1Nlc3Npb24oKTogUmV2aWV3U2Vzc2lvbiB8IG51bGwge1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5jdXJyZW50U2Vzc2lvbjtcbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbiA9IG51bGw7XG4gICAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjdXJyZW50IHNlc3Npb24gaW5mb1xuICAgICAqL1xuICAgIGdldEN1cnJlbnRTZXNzaW9uKCk6IFJldmlld1Nlc3Npb24gfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFNlc3Npb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHN0dWR5IHN0YXRpc3RpY3NcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVTdGF0aXN0aWNzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdLCBzdHVkeUhpc3Rvcnk/OiBhbnlbXSk6IFN0dWR5U3RhdGlzdGljcyB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbm93LnRvRGF0ZVN0cmluZygpO1xuICAgICAgICBcbiAgICAgICAgLy8gT3ZlcmFsbCBzdGF0aXN0aWNzIHVzaW5nIHRoZSBhbGdvcml0aG0ncyBzdGF0aWMgbWV0aG9kXG4gICAgICAgIGNvbnN0IG92ZXJhbGxTdGF0cyA9IFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0uZ2V0U3RhdGlzdGljcyhhbGxDYXJkcyk7XG5cbiAgICAgICAgLy8gVG9kYXkncyBzdGF0aXN0aWNzICh3b3VsZCBuZWVkIHRvIGJlIHRyYWNrZWQgc2VwYXJhdGVseSlcbiAgICAgICAgY29uc3QgdG9kYXlTdGF0cyA9IHtcbiAgICAgICAgICAgIG5ld0NhcmRzOiAwLCAvLyBXb3VsZCB0cmFjayBmcm9tIHNlc3Npb24gZGF0YVxuICAgICAgICAgICAgcmV2aWV3ZWRDYXJkczogMCwgLy8gV291bGQgdHJhY2sgZnJvbSBzZXNzaW9uIGRhdGFcbiAgICAgICAgICAgIHRvdGFsVGltZTogMCAvLyBXb3VsZCB0cmFjayBmcm9tIHNlc3Npb24gdGltaW5nXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU3RyZWFrIGNhbGN1bGF0aW9uICh3b3VsZCBuZWVkIHBlcnNpc3RlbnQgc3RvcmFnZSlcbiAgICAgICAgY29uc3Qgc3RyZWFrU3RhdHMgPSB7XG4gICAgICAgICAgICBjdXJyZW50RGF5czogMCwgLy8gV291bGQgY2FsY3VsYXRlIGZyb20gc3R1ZHkgaGlzdG9yeVxuICAgICAgICAgICAgbG9uZ2VzdERheXM6IDAsIC8vIFdvdWxkIGNhbGN1bGF0ZSBmcm9tIHN0dWR5IGhpc3RvcnlcbiAgICAgICAgICAgIGxhc3RTdHVkeURhdGU6IG51bGwgYXMgc3RyaW5nIHwgbnVsbFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b2RheTogdG9kYXlTdGF0cyxcbiAgICAgICAgICAgIHN0cmVhazogc3RyZWFrU3RhdHMsXG4gICAgICAgICAgICBvdmVyYWxsOiBvdmVyYWxsU3RhdHNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY2FyZHMgZHVlIGluIHRoZSBuZXh0IE4gZGF5c1xuICAgICAqL1xuICAgIGdldENhcmRzRHVlSW5EYXlzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdLCBkYXlzOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobS5nZXRDYXJkc0R1ZUluRGF5cyhhbGxDYXJkcywgZGF5cyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgYSBjYXJkJ3Mgc2NoZWR1bGUgKGZvciB0ZXN0aW5nIG9yIG1hbnVhbCBpbnRlcnZlbnRpb24pXG4gICAgICovXG4gICAgcmVzZXRDYXJkU2NoZWR1bGUoY2FyZDogVm9jYWJ1bGFyeUNhcmQpOiBWb2NhYnVsYXJ5Q2FyZCB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jYXJkLFxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IDAsXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IG51bGwsXG4gICAgICAgICAgICBzY2hlZHVsZUluZm86IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hbnVhbGx5IHNldCBjYXJkIGRpZmZpY3VsdHkgKGZvciBidWxrIG9wZXJhdGlvbnMpXG4gICAgICovXG4gICAgc2V0Q2FyZERpZmZpY3VsdHkoY2FyZDogVm9jYWJ1bGFyeUNhcmQsIGRpZmZpY3VsdHk6IFJldmlld1Jlc3BvbnNlKTogVm9jYWJ1bGFyeUNhcmQge1xuICAgICAgICBjb25zdCByZXZpZXdSZXN1bHQgPSB0aGlzLmFsZ29yaXRobS5zY2hlZHVsZShkaWZmaWN1bHR5LCBjYXJkLnNjaGVkdWxlSW5mbyk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uY2FyZCxcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICBzY2hlZHVsZUluZm86IHtcbiAgICAgICAgICAgICAgICBkdWVEYXRlOiByZXZpZXdSZXN1bHQuZHVlRGF0ZSxcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogcmV2aWV3UmVzdWx0LmludGVydmFsLFxuICAgICAgICAgICAgICAgIGVhc2U6IHJldmlld1Jlc3VsdC5lYXNlLFxuICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LnJldmlld0NvdW50IHx8IDApICsgMSxcbiAgICAgICAgICAgICAgICBsYXBzZUNvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LmxhcHNlQ291bnQgfHwgMCkgKyAoZGlmZmljdWx0eSA9PT0gUmV2aWV3UmVzcG9uc2UuSGFyZCA/IDEgOiAwKSxcbiAgICAgICAgICAgICAgICBkZWxheWVkRGF5czogMCxcbiAgICAgICAgICAgICAgICByZXBldGl0aW9uOiByZXZpZXdSZXN1bHQucmVwZXRpdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbGdvcml0aG0gc2V0dGluZ3NcbiAgICAgKi9cbiAgICB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogUGFydGlhbDxTUlNTZXR0aW5ncz4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hbGdvcml0aG0udXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjdXJyZW50IGFsZ29yaXRobSBzZXR0aW5nc1xuICAgICAqL1xuICAgIGdldFNldHRpbmdzKCk6IFNSU1NldHRpbmdzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxnb3JpdGhtLmdldFNldHRpbmdzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgYSB1bmlxdWUgc2Vzc2lvbiBJRFxuICAgICAqL1xuICAgIHByaXZhdGUgZ2VuZXJhdGVTZXNzaW9uSWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBzZXNzaW9uXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgcmVjb21tZW5kZWQgZGFpbHkgc3R1ZHkgbG9hZFxuICAgICAqL1xuICAgIGdldFJlY29tbWVuZGVkRGFpbHlDYXJkcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IHtcbiAgICAgICAgbmV3Q2FyZHM6IG51bWJlcjtcbiAgICAgICAgcmV2aWV3Q2FyZHM6IG51bWJlcjtcbiAgICAgICAgdG90YWw6IG51bWJlcjtcbiAgICB9IHtcbiAgICAgICAgY29uc3QgZHVlQ2FyZHMgPSB0aGlzLmdldENhcmRzRm9yUmV2aWV3KGFsbENhcmRzKTtcbiAgICAgICAgY29uc3QgbmV3Q2FyZHMgPSB0aGlzLmdldE5ld0NhcmRzKGFsbENhcmRzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlY29tbWVuZGVkIGxpbWl0cyAoY29uZmlndXJhYmxlKVxuICAgICAgICBjb25zdCBtYXhOZXdDYXJkc1BlckRheSA9IDIwO1xuICAgICAgICBjb25zdCBtYXhSZXZpZXdDYXJkc1BlckRheSA9IDEwMDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGVkTmV3ID0gTWF0aC5taW4obmV3Q2FyZHMubGVuZ3RoLCBtYXhOZXdDYXJkc1BlckRheSk7XG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGVkUmV2aWV3ID0gTWF0aC5taW4oZHVlQ2FyZHMubGVuZ3RoIC0gcmVjb21tZW5kZWROZXcsIG1heFJldmlld0NhcmRzUGVyRGF5KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZXdDYXJkczogcmVjb21tZW5kZWROZXcsXG4gICAgICAgICAgICByZXZpZXdDYXJkczogcmVjb21tZW5kZWRSZXZpZXcsXG4gICAgICAgICAgICB0b3RhbDogcmVjb21tZW5kZWROZXcgKyByZWNvbW1lbmRlZFJldmlld1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9ydCBjYXJkcyBmb3IgZGF0YSBhbmFseXNpcyBvciBiYWNrdXBcbiAgICAgKi9cbiAgICBleHBvcnRTY2hlZHVsZURhdGEoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBhbnlbXSB7XG4gICAgICAgIHJldHVybiBhbGxDYXJkcy5tYXAoY2FyZCA9PiAoe1xuICAgICAgICAgICAgd29yZDogY2FyZC53b3JkLFxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IGNhcmQucmV2aWV3Q291bnQsXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiBjYXJkLmRpZmZpY3VsdHksXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IGNhcmQubGFzdFJldmlld2VkLFxuICAgICAgICAgICAgc2NoZWR1bGVJbmZvOiBjYXJkLnNjaGVkdWxlSW5mbyxcbiAgICAgICAgICAgIGFkZGVkRGF0ZTogY2FyZC5hZGRlZERhdGVcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbmV4dCByZXZpZXcgaW50ZXJ2YWxzIGZvciBlYWNoIGRpZmZpY3VsdHkgbGV2ZWxcbiAgICAgKiBTaG93cyB0aGUgZXhhY3QgU00tMiBhbGdvcml0aG0gcmVzdWx0cyB3aXRoIEUtRmFjdG9yIGluZm9ybWF0aW9uXG4gICAgICovXG4gICAgZ2V0TmV4dFJldmlld0ludGVydmFscyhjYXJkOiBWb2NhYnVsYXJ5Q2FyZCk6IHtcbiAgICAgICAgaGFyZDogeyBpbnRlcnZhbDogbnVtYmVyOyBkaXNwbGF5VGV4dDogc3RyaW5nOyBlRmFjdG9yOiBudW1iZXI7IHJlcGV0aXRpb246IG51bWJlciB9O1xuICAgICAgICBnb29kOiB7IGludGVydmFsOiBudW1iZXI7IGRpc3BsYXlUZXh0OiBzdHJpbmc7IGVGYWN0b3I6IG51bWJlcjsgcmVwZXRpdGlvbjogbnVtYmVyIH07XG4gICAgICAgIGVhc3k6IHsgaW50ZXJ2YWw6IG51bWJlcjsgZGlzcGxheVRleHQ6IHN0cmluZzsgZUZhY3RvcjogbnVtYmVyOyByZXBldGl0aW9uOiBudW1iZXIgfTtcbiAgICB9IHtcbiAgICAgICAgY29uc3QgaGFyZFJlc3VsdCA9IHRoaXMuYWxnb3JpdGhtLnNjaGVkdWxlKFJldmlld1Jlc3BvbnNlLkhhcmQsIGNhcmQuc2NoZWR1bGVJbmZvKTtcbiAgICAgICAgY29uc3QgZ29vZFJlc3VsdCA9IHRoaXMuYWxnb3JpdGhtLnNjaGVkdWxlKFJldmlld1Jlc3BvbnNlLkdvb2QsIGNhcmQuc2NoZWR1bGVJbmZvKTtcbiAgICAgICAgY29uc3QgZWFzeVJlc3VsdCA9IHRoaXMuYWxnb3JpdGhtLnNjaGVkdWxlKFJldmlld1Jlc3BvbnNlLkVhc3ksIGNhcmQuc2NoZWR1bGVJbmZvKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGFyZDoge1xuICAgICAgICAgICAgICAgIGludGVydmFsOiBoYXJkUmVzdWx0LmludGVydmFsLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0OiB0aGlzLmZvcm1hdEludGVydmFsKGhhcmRSZXN1bHQuaW50ZXJ2YWwpLFxuICAgICAgICAgICAgICAgIGVGYWN0b3I6IGhhcmRSZXN1bHQuZWFzZSAvIDEwMCwgLy8gQ29udmVydCBiYWNrIHRvIEUtRmFjdG9yXG4gICAgICAgICAgICAgICAgcmVwZXRpdGlvbjogaGFyZFJlc3VsdC5yZXBldGl0aW9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ29vZDoge1xuICAgICAgICAgICAgICAgIGludGVydmFsOiBnb29kUmVzdWx0LmludGVydmFsLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0OiB0aGlzLmZvcm1hdEludGVydmFsKGdvb2RSZXN1bHQuaW50ZXJ2YWwpLFxuICAgICAgICAgICAgICAgIGVGYWN0b3I6IGdvb2RSZXN1bHQuZWFzZSAvIDEwMCxcbiAgICAgICAgICAgICAgICByZXBldGl0aW9uOiBnb29kUmVzdWx0LnJlcGV0aXRpb25cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlYXN5OiB7XG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IGVhc3lSZXN1bHQuaW50ZXJ2YWwsXG4gICAgICAgICAgICAgICAgZGlzcGxheVRleHQ6IHRoaXMuZm9ybWF0SW50ZXJ2YWwoZWFzeVJlc3VsdC5pbnRlcnZhbCksXG4gICAgICAgICAgICAgICAgZUZhY3RvcjogZWFzeVJlc3VsdC5lYXNlIC8gMTAwLFxuICAgICAgICAgICAgICAgIHJlcGV0aXRpb246IGVhc3lSZXN1bHQucmVwZXRpdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBpbnRlcnZhbCBhcyBodW1hbi1yZWFkYWJsZSB0ZXh0XG4gICAgICovXG4gICAgcHJpdmF0ZSBmb3JtYXRJbnRlcnZhbChkYXlzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBpZiAoZGF5cyA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAndG9kYXknO1xuICAgICAgICB9IGVsc2UgaWYgKGRheXMgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAnMSBkYXknO1xuICAgICAgICB9IGVsc2UgaWYgKGRheXMgPCAzMCkge1xuICAgICAgICAgICAgcmV0dXJuIGAke2RheXN9IGRheSR7ZGF5cyA+IDEgPyAncycgOiAnJ31gO1xuICAgICAgICB9IGVsc2UgaWYgKGRheXMgPCAzNjUpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vbnRocyA9IE1hdGgucm91bmQoZGF5cyAvIDMwICogMTApIC8gMTA7XG4gICAgICAgICAgICByZXR1cm4gYCR7bW9udGhzfSBtb250aCR7bW9udGhzID4gMSA/ICdzJyA6ICcnfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB5ZWFycyA9IE1hdGgucm91bmQoZGF5cyAvIDM2NSAqIDEwKSAvIDEwO1xuICAgICAgICAgICAgcmV0dXJuIGAke3llYXJzfSB5ZWFyJHt5ZWFycyA+IDEgPyAncycgOiAnJ31gO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGRldGFpbGVkIFNNLTIgYWxnb3JpdGhtIHN0YXRpc3RpY3NcbiAgICAgKi9cbiAgICBnZXRTTTJTdGF0aXN0aWNzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKToge1xuICAgICAgICBvdmVydmlldzoge1xuICAgICAgICAgICAgdG90YWxDYXJkczogbnVtYmVyO1xuICAgICAgICAgICAgbmV3Q2FyZHM6IG51bWJlcjtcbiAgICAgICAgICAgIGxlYXJuaW5nQ2FyZHM6IG51bWJlcjtcbiAgICAgICAgICAgIG1hdHVyZUNhcmRzOiBudW1iZXI7XG4gICAgICAgIH07XG4gICAgICAgIHJlcGV0aXRpb25zOiB7XG4gICAgICAgICAgICByZXAwOiBudW1iZXI7IC8vIFx1QzBDOCBcdUNFNzRcdUI0RENcbiAgICAgICAgICAgIHJlcDE6IG51bWJlcjsgLy8gXHVDQ0FCIFx1QkM4OFx1QzlGOCBcdUJDRjVcdUMyQjVcbiAgICAgICAgICAgIHJlcDI6IG51bWJlcjsgLy8gXHVCNDUwIFx1QkM4OFx1QzlGOCBcdUJDRjVcdUMyQjVcbiAgICAgICAgICAgIHJlcDNQbHVzOiBudW1iZXI7IC8vIFx1QzEzOCBcdUJDODhcdUM5RjggXHVDNzc0XHVDMEMxIFx1QkNGNVx1QzJCNVxuICAgICAgICB9O1xuICAgICAgICBlRmFjdG9yczoge1xuICAgICAgICAgICAgYXZlcmFnZTogbnVtYmVyO1xuICAgICAgICAgICAgZGlzdHJpYnV0aW9uOiB7IHJhbmdlOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfVtdO1xuICAgICAgICB9O1xuICAgICAgICBpbnRlcnZhbHM6IHtcbiAgICAgICAgICAgIGF2ZXJhZ2U6IG51bWJlcjtcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbjogeyByYW5nZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXTtcbiAgICAgICAgfTtcbiAgICB9IHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICAgICAgICBvdmVydmlldzogeyB0b3RhbENhcmRzOiAwLCBuZXdDYXJkczogMCwgbGVhcm5pbmdDYXJkczogMCwgbWF0dXJlQ2FyZHM6IDAgfSxcbiAgICAgICAgICAgIHJlcGV0aXRpb25zOiB7IHJlcDA6IDAsIHJlcDE6IDAsIHJlcDI6IDAsIHJlcDNQbHVzOiAwIH0sXG4gICAgICAgICAgICBlRmFjdG9yczogeyBhdmVyYWdlOiAwLCBkaXN0cmlidXRpb246IFtdIGFzIHsgcmFuZ2U6IHN0cmluZzsgY291bnQ6IG51bWJlciB9W10gfSxcbiAgICAgICAgICAgIGludGVydmFsczogeyBhdmVyYWdlOiAwLCBkaXN0cmlidXRpb246IFtdIGFzIHsgcmFuZ2U6IHN0cmluZzsgY291bnQ6IG51bWJlciB9W10gfVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCB0b3RhbEVGYWN0b3IgPSAwO1xuICAgICAgICBsZXQgdG90YWxJbnRlcnZhbCA9IDA7XG4gICAgICAgIGxldCBjYXJkc1dpdGhTY2hlZHVsZSA9IDA7XG4gICAgICAgIGNvbnN0IGVGYWN0b3JCdWNrZXRzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgICAgICAgY29uc3QgaW50ZXJ2YWxCdWNrZXRzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcblxuICAgICAgICBhbGxDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgICAgICAgc3RhdHMub3ZlcnZpZXcudG90YWxDYXJkcysrO1xuXG4gICAgICAgICAgICBpZiAoIWNhcmQuc2NoZWR1bGVJbmZvKSB7XG4gICAgICAgICAgICAgICAgc3RhdHMub3ZlcnZpZXcubmV3Q2FyZHMrKztcbiAgICAgICAgICAgICAgICBzdGF0cy5yZXBldGl0aW9ucy5yZXAwKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhcmRzV2l0aFNjaGVkdWxlKys7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwZXRpdGlvbiA9IGNhcmQuc2NoZWR1bGVJbmZvLnJlcGV0aXRpb24gfHwgMDtcbiAgICAgICAgICAgICAgICBjb25zdCBlRmFjdG9yID0gY2FyZC5zY2hlZHVsZUluZm8uZWFzZSAvIDEwMDtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IGNhcmQuc2NoZWR1bGVJbmZvLmludGVydmFsO1xuXG4gICAgICAgICAgICAgICAgdG90YWxFRmFjdG9yICs9IGVGYWN0b3I7XG4gICAgICAgICAgICAgICAgdG90YWxJbnRlcnZhbCArPSBpbnRlcnZhbDtcblxuICAgICAgICAgICAgICAgIC8vIFJlcGV0aXRpb24gXHVCRDg0XHVEM0VDXG4gICAgICAgICAgICAgICAgaWYgKHJlcGV0aXRpb24gPT09IDEpIHN0YXRzLnJlcGV0aXRpb25zLnJlcDErKztcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXBldGl0aW9uID09PSAyKSBzdGF0cy5yZXBldGl0aW9ucy5yZXAyKys7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVwZXRpdGlvbiA+PSAzKSBzdGF0cy5yZXBldGl0aW9ucy5yZXAzUGx1cysrO1xuICAgICAgICAgICAgICAgIGVsc2Ugc3RhdHMucmVwZXRpdGlvbnMucmVwMCsrO1xuXG4gICAgICAgICAgICAgICAgLy8gTWF0dXJlL0xlYXJuaW5nIFx1QkQ4NFx1Qjk1OFxuICAgICAgICAgICAgICAgIGlmIChpbnRlcnZhbCA+PSAyMSkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0cy5vdmVydmlldy5tYXR1cmVDYXJkcysrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRzLm92ZXJ2aWV3LmxlYXJuaW5nQ2FyZHMrKztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBFLUZhY3RvciBcdUJEODRcdUQzRUNcbiAgICAgICAgICAgICAgICBjb25zdCBlRmFjdG9yUmFuZ2UgPSB0aGlzLmdldEVGYWN0b3JSYW5nZShlRmFjdG9yKTtcbiAgICAgICAgICAgICAgICBlRmFjdG9yQnVja2V0cy5zZXQoZUZhY3RvclJhbmdlLCAoZUZhY3RvckJ1Y2tldHMuZ2V0KGVGYWN0b3JSYW5nZSkgfHwgMCkgKyAxKTtcblxuICAgICAgICAgICAgICAgIC8vIEludGVydmFsIFx1QkQ4NFx1RDNFQ1xuICAgICAgICAgICAgICAgIGNvbnN0IGludGVydmFsUmFuZ2UgPSB0aGlzLmdldEludGVydmFsUmFuZ2UoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgIGludGVydmFsQnVja2V0cy5zZXQoaW50ZXJ2YWxSYW5nZSwgKGludGVydmFsQnVja2V0cy5nZXQoaW50ZXJ2YWxSYW5nZSkgfHwgMCkgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHVEM0M5XHVBREUwIFx1QUNDNFx1QzBCMFxuICAgICAgICBzdGF0cy5lRmFjdG9ycy5hdmVyYWdlID0gY2FyZHNXaXRoU2NoZWR1bGUgPiAwID8gTWF0aC5yb3VuZCgodG90YWxFRmFjdG9yIC8gY2FyZHNXaXRoU2NoZWR1bGUpICogMTAwKSAvIDEwMCA6IDA7XG4gICAgICAgIHN0YXRzLmludGVydmFscy5hdmVyYWdlID0gY2FyZHNXaXRoU2NoZWR1bGUgPiAwID8gTWF0aC5yb3VuZCh0b3RhbEludGVydmFsIC8gY2FyZHNXaXRoU2NoZWR1bGUpIDogMDtcblxuICAgICAgICAvLyBcdUJEODRcdUQzRUMgXHVCQzMwXHVDNUY0IFx1QzBERFx1QzEzMVxuICAgICAgICBzdGF0cy5lRmFjdG9ycy5kaXN0cmlidXRpb24gPSBBcnJheS5mcm9tKGVGYWN0b3JCdWNrZXRzLmVudHJpZXMoKSlcbiAgICAgICAgICAgIC5tYXAoKFtyYW5nZSwgY291bnRdKSA9PiAoeyByYW5nZSwgY291bnQgfSkpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gcGFyc2VGbG9hdChhLnJhbmdlLnNwbGl0KCctJylbMF0pIC0gcGFyc2VGbG9hdChiLnJhbmdlLnNwbGl0KCctJylbMF0pKTtcblxuICAgICAgICBzdGF0cy5pbnRlcnZhbHMuZGlzdHJpYnV0aW9uID0gQXJyYXkuZnJvbShpbnRlcnZhbEJ1Y2tldHMuZW50cmllcygpKVxuICAgICAgICAgICAgLm1hcCgoW3JhbmdlLCBjb3VudF0pID0+ICh7IHJhbmdlLCBjb3VudCB9KSlcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB0aGlzLmNvbXBhcmVJbnRlcnZhbFJhbmdlcyhhLnJhbmdlLCBiLnJhbmdlKSk7XG5cbiAgICAgICAgcmV0dXJuIHN0YXRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBFLUZhY3RvciByYW5nZSBmb3IgZ3JvdXBpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEVGYWN0b3JSYW5nZShlRmFjdG9yOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBpZiAoZUZhY3RvciA8IDEuNSkgcmV0dXJuICcxLjMtMS41JztcbiAgICAgICAgaWYgKGVGYWN0b3IgPCAyLjApIHJldHVybiAnMS41LTIuMCc7XG4gICAgICAgIGlmIChlRmFjdG9yIDwgMi41KSByZXR1cm4gJzIuMC0yLjUnO1xuICAgICAgICBpZiAoZUZhY3RvciA8IDMuMCkgcmV0dXJuICcyLjUtMy4wJztcbiAgICAgICAgaWYgKGVGYWN0b3IgPCAzLjUpIHJldHVybiAnMy4wLTMuNSc7XG4gICAgICAgIHJldHVybiAnMy41Kyc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGludGVydmFsIHJhbmdlIGZvciBncm91cGluZ1xuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0SW50ZXJ2YWxSYW5nZShpbnRlcnZhbDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGludGVydmFsID09PSAxKSByZXR1cm4gJzEgZGF5JztcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDYpIHJldHVybiAnMi02IGRheXMnO1xuICAgICAgICBpZiAoaW50ZXJ2YWwgPD0gMjApIHJldHVybiAnNy0yMCBkYXlzJztcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDYwKSByZXR1cm4gJzIxLTYwIGRheXMnO1xuICAgICAgICBpZiAoaW50ZXJ2YWwgPD0gMTgwKSByZXR1cm4gJzItNiBtb250aHMnO1xuICAgICAgICBpZiAoaW50ZXJ2YWwgPD0gMzY1KSByZXR1cm4gJzYtMTIgbW9udGhzJztcbiAgICAgICAgcmV0dXJuICcxKyB5ZWFycyc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGFyZSBpbnRlcnZhbCByYW5nZXMgZm9yIHNvcnRpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIGNvbXBhcmVJbnRlcnZhbFJhbmdlcyhhOiBzdHJpbmcsIGI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gWycxIGRheScsICcyLTYgZGF5cycsICc3LTIwIGRheXMnLCAnMjEtNjAgZGF5cycsICcyLTYgbW9udGhzJywgJzYtMTIgbW9udGhzJywgJzErIHllYXJzJ107XG4gICAgICAgIHJldHVybiBvcmRlci5pbmRleE9mKGEpIC0gb3JkZXIuaW5kZXhPZihiKTtcbiAgICB9XG59IiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkLCBCb29rIH0gZnJvbSAnLi4vLi4vLi4vVm9jYWJ1bGFyeUNhcmQnO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL3N0b3JhZ2UvVm9jYWJ1bGFyeURhdGFiYXNlJztcbmltcG9ydCB7IFdvcmRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2UnO1xuaW1wb3J0IHsgTExNU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2xsbS9MTE1TZXJ2aWNlJztcbmltcG9ydCB7IFZvY2FidWxhcnlNb2RhbCB9IGZyb20gJy4uLy4uL3ZvY2FidWxhcnktbGVhcm5pbmcvdWkvVm9jYWJ1bGFyeU1vZGFsJztcbmltcG9ydCB7IEFkZEJvb2tNb2RhbCB9IGZyb20gJy4vQWRkQm9va01vZGFsJztcbmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICcuLi8uLi8uLi91dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5TWFuYWdlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XG4gICAgZGF0YWJhc2VNYW5hZ2VyOiBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyO1xuICAgIHdvcmRTZXJ2aWNlOiBXb3JkU2VydmljZTtcbiAgICBsbG1TZXJ2aWNlOiBMTE1TZXJ2aWNlO1xuICAgIGN1cnJlbnRWaWV3OiAnbGlzdCcgfCAnc3RhdGlzdGljcycgfCAnYWRkJyA9ICdsaXN0JztcbiAgICBzZWxlY3RlZFdvcmRzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgICBzZWxlY3RlZEJvb2tJZDogc3RyaW5nID0gJyc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5kYXRhYmFzZU1hbmFnZXIgPSBwbHVnaW4uZGF0YWJhc2VNYW5hZ2VyO1xuICAgICAgICB0aGlzLndvcmRTZXJ2aWNlID0gbmV3IFdvcmRTZXJ2aWNlKCk7XG4gICAgICAgIHRoaXMubGxtU2VydmljZSA9IHBsdWdpbi5sbG1TZXJ2aWNlO1xuICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0Q3VycmVudEJvb2soKT8uaWQgfHwgJ2RlZmF1bHQnO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFzVmFsaWRBcGlLZXkoKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXI7XG4gICAgICAgIHN3aXRjaCAocHJvdmlkZXIpIHtcbiAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpQXBpS2V5O1xuICAgICAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXk7XG4gICAgICAgICAgICBjYXNlICdnb29nbGUnOlxuICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUFwaUtleTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1tYW5hZ2VyLW1vZGFsJyk7XG4gICAgICAgIGNvbnRlbnRFbC5jbGFzc0xpc3QuYWRkKCd3aWRlLW1hbmFnZXItbW9kYWwnKTtcblxuICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVDRDVDXHVDMkUwIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0RENcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEN1cnJlbnRCb29rKCk/LmlkIHx8ICdkZWZhdWx0JztcblxuICAgICAgICB0aGlzLmNyZWF0ZUJvb2tTZWxlY3RvckhlYWRlcigpO1xuICAgICAgICB0aGlzLmNyZWF0ZU5hdmlnYXRpb24oKTtcbiAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcblxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDRDk0XHVBQzAwXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Jvb2tDcmVhdGVkJywgdGhpcy5oYW5kbGVCb29rQ3JlYXRlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUJvb2tDcmVhdGVkKGV2ZW50OiBDdXN0b21FdmVudCkge1xuICAgICAgICBjb25zdCBuZXdCb29rID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gbmV3Qm9vay5pZDtcbiAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoQm9va1NlbGVjdG9yKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVCb29rU2VsZWN0b3JIZWFkZXIoKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlckVsID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbWFuYWdlci1oZWFkZXInIH0pO1xuICAgICAgICBoZWFkZXJFbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBoZWFkZXJFbC5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICAgIGhlYWRlckVsLnN0eWxlLmdhcCA9ICcxOHB4JztcbiAgICAgICAgaGVhZGVyRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJzE4cHgnO1xuXG4gICAgICAgIGNvbnN0IGJvb2tzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsQm9va3MoKTtcbiAgICAgICAgY29uc3QgYm9va1NlbGVjdCA9IGhlYWRlckVsLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2Jvb2stc2VsZWN0LWRyb3Bkb3duJyB9KTtcbiAgICAgICAgYm9va1NlbGVjdC5zdHlsZS5oZWlnaHQgPSAnMzhweCc7XG4gICAgICAgIGJvb2tTZWxlY3Quc3R5bGUuZm9udFNpemUgPSAnMTZweCc7XG4gICAgICAgIGJvb2tzLmZvckVhY2goYm9vayA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGJvb2suaWQ7XG4gICAgICAgICAgICBvcHRpb24udGV4dCA9IGJvb2submFtZTtcbiAgICAgICAgICAgIGlmIChib29rLmlkID09PSB0aGlzLnNlbGVjdGVkQm9va0lkKSBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgYm9va1NlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICB9KTtcbiAgICAgICAgYm9va1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5zZXRDdXJyZW50Qm9vayh0aGlzLnNlbGVjdGVkQm9va0lkKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGFkZEJvb2tCdG4gPSBoZWFkZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDMEM4IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUNEOTRcdUFDMDAnLCBjbHM6ICdib29rLW1hbmFnZS1idXR0b24nIH0pO1xuICAgICAgICBhZGRCb29rQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWRkQm9va01vZGFsID0gbmV3IEFkZEJvb2tNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYWRkQm9va01vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QzBERFx1QzEzMVx1QjQxOFx1QkE3NCBcdUI0RENcdUI4NkRcdUIyRTRcdUM2QjRcdUFDRkMgXHVDMTIwXHVEMEREXHVDNzQ0IFx1QzBDOFx1Qjg1Q1x1QUNFMFx1Q0U2OFxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEJvb2tTZWxlY3RvcigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFkZEJvb2tNb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRlbEJvb2tCdG4gPSBoZWFkZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVENjA0XHVDN0FDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwQURcdUM4MUMnLCBjbHM6ICdib29rLWRlbGV0ZS1idXR0b24nIH0pO1xuICAgICAgICBjb25zdCBpc0RlZmF1bHQgPSB0aGlzLnNlbGVjdGVkQm9va0lkID09PSAnZGVmYXVsdCc7XG4gICAgICAgIGlmIChpc0RlZmF1bHQpIHtcbiAgICAgICAgICAgIGRlbEJvb2tCdG4uc2V0QXR0cignZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgZGVsQm9va0J0bi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBkZWxCb29rQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzRGVmYXVsdCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MTVcdUJDRjQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEJvb2sodGhpcy5zZWxlY3RlZEJvb2tJZCk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRCb29rKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc1OCBcdUIyRThcdUM1QjQgXHVDMjE4IFx1RDY1NVx1Qzc3OFxuICAgICAgICAgICAgY29uc3Qgd29yZHNJbkJvb2sgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRXb3Jkc0J5Qm9vayh0aGlzLnNlbGVjdGVkQm9va0lkKTtcbiAgICAgICAgICAgIGNvbnN0IHdvcmRDb3VudCA9IHdvcmRzSW5Cb29rLmxlbmd0aDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVDMEMxXHVDMTM4XHVENTVDIFx1RDY1NVx1Qzc3OCBcdUJBQThcdUIyRUMgXHVENDVDXHVDMkRDXG4gICAgICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgICAgICdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEFEXHVDODFDIFx1RDY1NVx1Qzc3OCcsXG4gICAgICAgICAgICAgICAgYFx1QzgxNVx1QjlEMFx1Qjg1QyBcIiR7Y3VycmVudEJvb2submFtZX1cIiBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVDMEFEXHVDODFDXHVENTU4XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDP1xcblxcbmAgK1xuICAgICAgICAgICAgICAgIGBcdTIwMjIgXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NDogJHtjdXJyZW50Qm9vay5uYW1lfVxcbmAgK1xuICAgICAgICAgICAgICAgIGBcdTIwMjIgXHVEM0VDXHVENTY4XHVCNDFDIFx1QjJFOFx1QzVCNCBcdUMyMTg6ICR7d29yZENvdW50fVx1QUMxQ1xcbmAgK1xuICAgICAgICAgICAgICAgIGBcdTIwMjIgXHVDMEREXHVDMTMxXHVDNzdDOiAke25ldyBEYXRlKGN1cnJlbnRCb29rLmNyZWF0ZWRBdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdrby1LUicpfVxcblxcbmAgK1xuICAgICAgICAgICAgICAgIGBcdTI2QTBcdUZFMEYgXHVDNzc0IFx1Qzc5MVx1QzVDNVx1Qzc0MCBcdUI0MThcdUIzQ0NcdUI5QjQgXHVDMjE4IFx1QzVDNlx1QzczQ1x1QkE3MCwgXHVCMkU4XHVDNUI0XHVDN0E1XHVBQ0ZDIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNjAxXHVBRDZDXHVDODAxXHVDNzNDXHVCODVDIFx1QzBBRFx1QzgxQ1x1QjQyOVx1QjJDOFx1QjJFNC5gLFxuICAgICAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmRlbGV0ZUJvb2sodGhpcy5zZWxlY3RlZEJvb2tJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gJ2RlZmF1bHQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2V0Q3VycmVudEJvb2soJ2RlZmF1bHQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHtjdXJyZW50Qm9vay5uYW1lfVwiIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEFEXHVDODFDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBBRFx1QzgxQyBcdUMyRTRcdUQzMjg6ICcgKyBlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlTmF2aWdhdGlvbigpIHtcbiAgICAgICAgY29uc3QgbmF2RWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtYW5hZ2VyLW5hdmlnYXRpb24nIH0pO1xuICAgICAgICBjb25zdCBsaXN0QnRuID0gbmF2RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUJBQTlcdUI4NUQnLCBjbHM6ICduYXYtYnV0dG9uJyB9KTtcbiAgICAgICAgbGlzdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXcgPSAnbGlzdCc7XG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3RhdHNCdG4gPSBuYXZFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVEMUI1XHVBQ0M0JywgY2xzOiAnbmF2LWJ1dHRvbicgfSk7XG4gICAgICAgIHN0YXRzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9ICdzdGF0aXN0aWNzJztcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhZGRCdG4gPSBuYXZFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsIGNsczogJ25hdi1idXR0b24nIH0pO1xuICAgICAgICBhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3ID0gJ2FkZCc7XG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3RhcnRMZWFybmluZ0J1dHRvbiA9IG5hdkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1QzgwNFx1Q0NCNCBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNSBcdUMyRENcdUM3OTEnLFxuICAgICAgICAgICAgY2xzOiAnbmF2LWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIHN0YXJ0TGVhcm5pbmdCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dDdXJyZW50VmlldygpIHtcbiAgICAgICAgY29uc3QgY29udGVudEVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLm1hbmFnZXItY29udGVudCcpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21hbmFnZXItY29udGVudCcgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFZpZXcpIHtcbiAgICAgICAgICAgIGNhc2UgJ2xpc3QnOlxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1dvcmRMaXN0KGNvbnRlbnRFbCBhcyBIVE1MRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzdGF0aXN0aWNzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dTdGF0aXN0aWNzKGNvbnRlbnRFbCBhcyBIVE1MRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhZGQnOlxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FkZFdvcmQoY29udGVudEVsIGFzIEhUTUxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd1dvcmRMaXN0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgd29yZHMgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxXb3JkcygpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHdvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QkU0NFx1QzVCNFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU3NFx1QkNGNFx1QzEzOFx1QzY5NCEnLFxuICAgICAgICAgICAgICAgIGNsczogJ2VtcHR5LW1lc3NhZ2UnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlYXJjaEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NlYXJjaC1zZWN0aW9uJyB9KTtcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzZWFyY2hFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1x1QjJFOFx1QzVCNCBcdUFDODBcdUMwQzkuLi4nLFxuICAgICAgICAgICAgY2xzOiAnc2VhcmNoLWlucHV0J1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzZWxlY3Rpb25Db250cm9scyA9IHNlYXJjaEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NlbGVjdGlvbi1jb250cm9scycgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhbGxTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRXb3Jkcy5zaXplID09PSB3b3Jkcy5sZW5ndGggJiYgd29yZHMubGVuZ3RoID4gMDtcbiAgICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gc2VsZWN0aW9uQ29udHJvbHMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiBhbGxTZWxlY3RlZCA/ICdcdUM4MDRcdUNDQjQgXHVENTc0XHVDODFDJyA6ICdcdUM4MDRcdUNDQjQgXHVDMTIwXHVEMEREJyxcbiAgICAgICAgICAgIGNsczogJ3NlbGVjdGlvbi1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxlY3RBbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFdvcmRzLnNpemUgPT09IHdvcmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5jbGVhcigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4gdGhpcy5zZWxlY3RlZFdvcmRzLmFkZCh3b3JkLndvcmQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGZldGNoU2VsZWN0ZWRCdXR0b24gPSBzZWxlY3Rpb25Db250cm9scy5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUMxMjBcdUQwREQgXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxuICAgICAgICAgICAgY2xzOiAnZmV0Y2gtc2VsZWN0ZWQtYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgZmV0Y2hTZWxlY3RlZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkV29yZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2hvd0ZldGNoU2VsZWN0ZWRNZWFuaW5nc01vZGFsKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHdvcmRMaXN0RWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1saXN0JyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlbmRlcldvcmRzID0gKGZpbHRlcmVkV29yZHM6IFZvY2FidWxhcnlDYXJkW10pID0+IHtcbiAgICAgICAgICAgIHdvcmRMaXN0RWwuZW1wdHkoKTtcbiAgICAgICAgICAgIGZpbHRlcmVkV29yZHMuZm9yRWFjaCh3b3JkID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVdvcmRJdGVtKHdvcmRMaXN0RWwsIHdvcmQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcXVlcnkgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFdvcmRzID0gcXVlcnkgPyBcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFiYXNlTWFuYWdlci5zZWFyY2hXb3JkcyhxdWVyeSkgOiB3b3JkcztcbiAgICAgICAgICAgIHJlbmRlcldvcmRzKGZpbHRlcmVkV29yZHMpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZW5kZXJXb3Jkcyh3b3Jkcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVXb3JkSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCB3b3JkOiBWb2NhYnVsYXJ5Q2FyZCkge1xuICAgICAgICBjb25zdCB3b3JkRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1pdGVtJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gd29yZEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgICBjbHM6ICd3b3JkLWNoZWNrYm94J1xuICAgICAgICB9KTtcbiAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRXb3Jkcy5oYXMod29yZC53b3JkKTtcbiAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkO1xuICAgICAgICAgICAgaWYgKGlzQ2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5hZGQod29yZC53b3JkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzLmRlbGV0ZSh3b3JkLndvcmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHdvcmRIZWFkZXIgPSB3b3JkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1oZWFkZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgd29yZFRpdGxlRWwgPSB3b3JkSGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgY2xzOiAnd29yZC10aXRsZScgfSk7XG4gICAgICAgIGlmICh3b3JkLnByb251bmNpYXRpb24gJiYgd29yZC5wcm9udW5jaWF0aW9uLnRyaW0oKSkge1xuICAgICAgICAgICAgd29yZFRpdGxlRWwuaW5uZXJIVE1MID0gYCR7d29yZC53b3JkfSA8c3BhbiBjbGFzcz1cInByb251bmNpYXRpb25cIj5bJHt3b3JkLnByb251bmNpYXRpb259XTwvc3Bhbj5gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd29yZFRpdGxlRWwudGV4dENvbnRlbnQgPSB3b3JkLndvcmQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdHlCYWRnZSA9IHdvcmRIZWFkZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgdGV4dDogdGhpcy5nZXREaWZmaWN1bHR5VGV4dCh3b3JkLmRpZmZpY3VsdHkpLFxuICAgICAgICAgICAgY2xzOiBgZGlmZmljdWx0eS1iYWRnZSAke3dvcmQuZGlmZmljdWx0eX1gXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHdvcmRDb250ZW50ID0gd29yZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtY29udGVudCcgfSk7XG4gICAgICAgIHdvcmRDb250ZW50LmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgIHRleHQ6IGBcdUI3M0I6ICR7d29yZC5tZWFuaW5ncy5qb2luKCcsICcpfWAsXG4gICAgICAgICAgICBjbHM6ICd3b3JkLW1lYW5pbmdzJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHdvcmRDb250ZW50LmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgIHRleHQ6IGBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4OiAke3dvcmQucmV2aWV3Q291bnR9XHVENjhDYCxcbiAgICAgICAgICAgIGNsczogJ3Jldmlldy1jb3VudCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHdvcmQubGFzdFJldmlld2VkKSB7XG4gICAgICAgICAgICB3b3JkQ29udGVudC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDRjVcdUMyQjU6ICR7Zm9ybWF0RGF0ZSh3b3JkLmxhc3RSZXZpZXdlZCl9YCxcbiAgICAgICAgICAgICAgICBjbHM6ICdsYXN0LXJldmlld2VkJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB3b3JkQWN0aW9ucyA9IHdvcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWFjdGlvbnMnIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUFkdmFuY2VkRmVhdHVyZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZldGNoQnV0dG9uID0gd29yZEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwJyxcbiAgICAgICAgICAgICAgICBjbHM6ICdhY3Rpb24tYnV0dG9uIGZldGNoLXNpbmdsZS1idXR0b24nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZldGNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hTaW5nbGVXb3JkTWVhbmluZyh3b3JkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gd29yZEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVDMEFEXHVDODFDJyxcbiAgICAgICAgICAgIGNsczogJ2FjdGlvbi1idXR0b24gZGVsZXRlLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMnLFxuICAgICAgICAgICAgICAgIGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUMwQURcdUM4MUNcdUQ1NThcdUMyRENcdUFDQTBcdUMyQjVcdUIyQzhcdUFFNEM/YCxcbiAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnJlbW92ZVdvcmQod29yZC53b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93U3RhdGlzdGljcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0U3RhdGlzdGljcygpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RhdHNHcmlkID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXRzLWdyaWQnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYmFzaWNTdGF0cyA9IHN0YXRzR3JpZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0cy1zZWN0aW9uJyB9KTtcbiAgICAgICAgYmFzaWNTdGF0cy5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUFFMzBcdUJDRjggXHVEMUI1XHVBQ0M0JywgY2xzOiAnc3RhdHMtdGl0bGUnIH0pO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShiYXNpY1N0YXRzLCAnXHVDRDFEIFx1QjJFOFx1QzVCNCBcdUMyMTgnLCBzdGF0cy50b3RhbFdvcmRzLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGJhc2ljU3RhdHMsICdcdUNEMUQgXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxOCcsIHN0YXRzLnRvdGFsUmV2aWV3cy50b1N0cmluZygpKTtcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShiYXNpY1N0YXRzLCAnXHVDNUYwXHVDMThEIFx1RDU1OVx1QzJCNVx1Qzc3QycsIGAke3N0YXRzLnN0cmVha0RheXN9XHVDNzdDYCk7XG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oYmFzaWNTdGF0cywgJ1x1RDNDOVx1QURFMCBcdUIwOUNcdUM3NzRcdUIzQzQnLCBzdGF0cy5hdmVyYWdlRGlmZmljdWx0eS50b0ZpeGVkKDEpKTtcblxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5U3RhdHMgPSBzdGF0c0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3RhdHMtc2VjdGlvbicgfSk7XG4gICAgICAgIGRpZmZpY3VsdHlTdGF0cy5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUIwOUNcdUM3NzRcdUIzQzRcdUJDQzQgXHVCRDg0XHVEM0VDJywgY2xzOiAnc3RhdHMtdGl0bGUnIH0pO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShkaWZmaWN1bHR5U3RhdHMsICdcdUMyNkNcdUM2QzAnLCBzdGF0cy53b3Jkc0J5RGlmZmljdWx0eS5lYXN5LnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGRpZmZpY3VsdHlTdGF0cywgJ1x1Qzg4Qlx1Qzc0QycsIHN0YXRzLndvcmRzQnlEaWZmaWN1bHR5Lmdvb2QudG9TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oZGlmZmljdWx0eVN0YXRzLCAnXHVDNUI0XHVCODI0XHVDNkMwJywgc3RhdHMud29yZHNCeURpZmZpY3VsdHkuaGFyZC50b1N0cmluZygpKTtcblxuICAgICAgICBjb25zdCBhY3Rpdml0eVN0YXRzID0gc3RhdHNHcmlkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXRzLXNlY3Rpb24nIH0pO1xuICAgICAgICBhY3Rpdml0eVN0YXRzLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1Q0Q1Q1x1QURGQyA3XHVDNzdDIFx1RDY1Q1x1QjNEOScsIGNsczogJ3N0YXRzLXRpdGxlJyB9KTtcbiAgICAgICAgXG4gICAgICAgIHN0YXRzLnJlY2VudEFjdGl2aXR5LmZvckVhY2goYWN0aXZpdHkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGFjdGl2aXR5LmRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygna28tS1InLCB7IFxuICAgICAgICAgICAgICAgIG1vbnRoOiAnc2hvcnQnLCBcbiAgICAgICAgICAgICAgICBkYXk6ICdudW1lcmljJyBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShhY3Rpdml0eVN0YXRzLCBkYXRlLCBcbiAgICAgICAgICAgICAgICBgXHVENTU5XHVDMkI1OiAke2FjdGl2aXR5LndvcmRzU3R1ZGllZH0sIFx1QkNGNVx1QzJCNTogJHthY3Rpdml0eS5yZXZpZXdzQ29tcGxldGVkfWApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVN0YXRJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3Qgc3RhdEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXQtaXRlbScgfSk7XG4gICAgICAgIHN0YXRFbC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogbGFiZWwsIGNsczogJ3N0YXQtbGFiZWwnIH0pO1xuICAgICAgICBzdGF0RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IHZhbHVlLCBjbHM6ICdzdGF0LXZhbHVlJyB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dBZGRXb3JkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgYWRkU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdhZGQtd29yZC1zZWN0aW9uJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGFkZFNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDMEM4IFx1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLCBjbHM6ICdzZWN0aW9uLXRpdGxlJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGlucHV0RWwgPSBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtaW5wdXQtZ3JvdXAnIH0pO1xuICAgICAgICBjb25zdCB3b3JkSW5wdXQgPSBpbnB1dEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnXHVDNjAxXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NCAoXHVDNjA4OiBiZWF1dGlmdWwpJyxcbiAgICAgICAgICAgIGNsczogJ3dvcmQtaW5wdXQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGlucHV0RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsXG4gICAgICAgICAgICBjbHM6ICdhZGQtYnV0dG9uJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBhZGRXb3JkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHdvcmRJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBpZiAoIXdvcmQpIHtcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnZXJyb3ItbWVzc2FnZSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZERhdGEgPSBhd2FpdCB0aGlzLndvcmRTZXJ2aWNlLmdldFdvcmREYXRhKHdvcmQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZvY2FidWxhcnlDYXJkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ud29yZERhdGEsXG4gICAgICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5OiAnZ29vZCcsXG4gICAgICAgICAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgYWRkZWREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIGJvb2tJZDogdGhpcy5zZWxlY3RlZEJvb2tJZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuYWRkV29yZCh2b2NhYnVsYXJ5Q2FyZCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd29yZElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGBcIiR7d29yZH1cIiBcdUIyRThcdUM1QjRcdUFDMDAgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1Q0Q5NFx1QUMwMFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdzdWNjZXNzLW1lc3NhZ2UnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NNc2cgPSBhZGRTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zdWNjZXNzLW1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3NNc2cpIHN1Y2Nlc3NNc2cucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1OFx1QjI5NCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdlcnJvci1tZXNzYWdlJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFdvcmQpO1xuICAgICAgICB3b3JkSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgYWRkV29yZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldERpZmZpY3VsdHlUZXh0KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJyk6IHN0cmluZyB7XG4gICAgICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgICAgICAgICAgY2FzZSAnZWFzeSc6IHJldHVybiAnXHVDMjZDXHVDNkMwJztcbiAgICAgICAgICAgIGNhc2UgJ2dvb2QnOiByZXR1cm4gJ1x1Qzg4Qlx1Qzc0Qyc7XG4gICAgICAgICAgICBjYXNlICdoYXJkJzogcmV0dXJuICdcdUM1QjRcdUI4MjRcdUM2QzAnO1xuICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuICdcdUM4OEJcdUM3NEMnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGFydFJldmlldyh3b3JkczogVm9jYWJ1bGFyeUNhcmRbXSkge1xuICAgICAgICBjb25zdCByZXZpZXdNb2RhbCA9IG5ldyBWb2NhYnVsYXJ5UmV2aWV3TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCB3b3Jkcyk7XG4gICAgICAgIHJldmlld01vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dGZXRjaFNlbGVjdGVkTWVhbmluZ3NNb2RhbCgpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRXb3JkTGlzdCA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFdvcmRzKTtcbiAgICAgICAgbmV3IEZldGNoU2VsZWN0ZWRNZWFuaW5nc01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgc2VsZWN0ZWRXb3JkTGlzdCkub3BlbigpO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBhc3luYyBmZXRjaFNpbmdsZVdvcmRNZWFuaW5nKHdvcmQ6IFZvY2FidWxhcnlDYXJkKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNWYWxpZEFwaUtleSgpKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdMTE0gQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUMxMjRcdUM4MTVcdUM1RDBcdUMxMUMgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxuICAgICAgICAgICAgYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0XHVDNzU4IFx1QjczQlx1Qzc0NCBcdUMwQzhcdUI4NUMgXHVBQzAwXHVDODM4XHVDNjI0XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDPyBcdUFFMzBcdUM4NzQgXHVDODE1XHVCQ0Y0XHVBQzAwXHVDNUI0XHVDNTBDXHVDNkNDXHVDOUQxXHVCMkM4XHVCMkU0LmAsXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUM5MTEuLi5gKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxsbVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4ubGxtU2VydmljZS5nZXRXb3JkRGV0YWlscyh3b3JkLndvcmQpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxsbVJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREZXRhaWwgPSBsbG1SZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZERhdGEgPSB0aGlzLnBsdWdpbi5sbG1TZXJ2aWNlLmNvbnZlcnRUb1dvcmREYXRhKHdvcmREZXRhaWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkV29yZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi53b3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiB3b3JkRGF0YS5tZWFuaW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZERhdGEuZXhhbXBsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiB3b3JkRGF0YS5zaW1pbGFyV29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkRGF0YSh3b3JkLndvcmQsIHVwZGF0ZWRXb3JkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1QUMwMCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0IWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCBcdUMyRTRcdUQzMjg6ICR7bGxtUmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmQud29yZH1cIiBcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjQgXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlZnJlc2hCb29rU2VsZWN0b3IoKSB7XG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVCMkU0XHVDMkRDIFx1Qjg1Q1x1QjREQ1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1RDVFNFx1QjM1NFx1Qzc1OCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTIwXHVEMEREIFx1QjREQ1x1Qjg2RFx1QjJFNFx1QzZCNFx1Qzc0NCBcdUMwQzhcdUI4NUNcdUFDRTBcdUNFNjhcbiAgICAgICAgY29uc3QgaGVhZGVyRWwgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcubWFuYWdlci1oZWFkZXInKTtcbiAgICAgICAgaWYgKGhlYWRlckVsKSB7XG4gICAgICAgICAgICBjb25zdCBib29rU2VsZWN0ID0gaGVhZGVyRWwucXVlcnlTZWxlY3RvcignLmJvb2stc2VsZWN0LWRyb3Bkb3duJykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoYm9va1NlbGVjdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGJvb2tTZWxlY3QudmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9va3MgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBcdUM2MzVcdUMxNThcdUI0RTQgXHVDODFDXHVBQzcwXG4gICAgICAgICAgICAgICAgYm9va1NlbGVjdC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdUMwQzhcdUI4NUNcdUM2QjQgXHVDNjM1XHVDMTU4XHVCNEU0IFx1Q0Q5NFx1QUMwMFxuICAgICAgICAgICAgICAgIGJvb2tzLmZvckVhY2goYm9vayA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBib29rLmlkO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb24udGV4dCA9IGJvb2submFtZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvb2suaWQgPT09IGN1cnJlbnRWYWx1ZSB8fCBib29rLmlkID09PSB0aGlzLnNlbGVjdGVkQm9va0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IGJvb2suaWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYm9va1NlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVCREYwIFx1QzBDOFx1Qjg1Q1x1QUNFMFx1Q0U2OFxuICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Jvb2tDcmVhdGVkJywgdGhpcy5oYW5kbGVCb29rQ3JlYXRlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG59XG5cblxuY2xhc3MgVm9jYWJ1bGFyeVJldmlld01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XG4gICAgd29yZHM6IFZvY2FidWxhcnlDYXJkW107XG4gICAgY3VycmVudEluZGV4ID0gMDtcbiAgICBzaG93QW5zd2VyID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiwgd29yZHM6IFZvY2FidWxhcnlDYXJkW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMud29yZHMgPSB3b3JkcztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGlmICh0aGlzLndvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zaG93Q3VycmVudFdvcmQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dDdXJyZW50V29yZCgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbGVhcm5pbmctbW9kYWwnKTtcblxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZXZpZXctbW9kYWwtaGVpZ2h0JywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHR9dmhgKTtcblxuICAgICAgICBjb25zdCBjdXJyZW50V29yZCA9IHRoaXMud29yZHNbdGhpcy5jdXJyZW50SW5kZXhdO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXZpZXctcHJvZ3Jlc3MnIH0pO1xuICAgICAgICBwcm9ncmVzc0VsLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgICAgICAgIHRleHQ6IGAke3RoaXMuY3VycmVudEluZGV4ICsgMX0gLyAke3RoaXMud29yZHMubGVuZ3RofWAsXG4gICAgICAgICAgICBjbHM6ICdwcm9ncmVzcy10ZXh0J1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYXJkRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmV2aWV3LWNhcmQnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQyBcdUJDODRcdUQyQkMgKFx1QzYyNFx1Qjk3OFx1Q0FCRCBcdUMwQzFcdUIyRTgpXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNhcmRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDJyxcbiAgICAgICAgICAgIGNsczogJ2NhcmQtZGVsZXRlLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlRGVsZXRlQ2FyZCgpKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHdvcmRFbCA9IGNhcmRFbC5jcmVhdGVFbCgnaDEnLCB7IGNsczogJ3Jldmlldy13b3JkJyB9KTtcbiAgICAgICAgaWYgKGN1cnJlbnRXb3JkLnByb251bmNpYXRpb24gJiYgY3VycmVudFdvcmQucHJvbnVuY2lhdGlvbi50cmltKCkpIHtcbiAgICAgICAgICAgIHdvcmRFbC5pbm5lckhUTUwgPSBgJHtjdXJyZW50V29yZC53b3JkfSA8c3BhbiBjbGFzcz1cInByb251bmNpYXRpb25cIj5bJHtjdXJyZW50V29yZC5wcm9udW5jaWF0aW9ufV08L3NwYW4+YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdvcmRFbC50ZXh0Q29udGVudCA9IGN1cnJlbnRXb3JkLndvcmQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuc2hvd0Fuc3dlcikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRXb3JkLnNpbWlsYXJXb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2ltaWxhckVsID0gY2FyZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NpbWlsYXItd29yZHMnIH0pO1xuICAgICAgICAgICAgICAgIHNpbWlsYXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0XHVCNEU0OicgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2ltaWxhckxpc3QgPSBzaW1pbGFyRWwuY3JlYXRlRWwoJ3VsJyk7XG4gICAgICAgICAgICAgICAgY3VycmVudFdvcmQuc2ltaWxhcldvcmRzLmZvckVhY2god29yZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNpbWlsYXJMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogd29yZCB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRXb3JkLmV4YW1wbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGFtcGxlc0VsID0gY2FyZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGVzJyB9KTtcbiAgICAgICAgICAgICAgICBleGFtcGxlc0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzYwOFx1QkIzOFx1QjRFNDonIH0pO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkLmV4YW1wbGVzLmZvckVhY2goZXhhbXBsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4YW1wbGUuZW5nbGlzaCwgY2xzOiAnZXhhbXBsZScgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNoZWNrQnRuID0gY2FyZEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6ICdcdUM4MTVcdUIyRjUgXHVENjU1XHVDNzc4XHVENTU4XHVBRTMwJyxcbiAgICAgICAgICAgICAgICBjbHM6ICdjaGVjay1hbnN3ZXItYnV0dG9uJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjaGVja0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRXb3JkKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGFuc3dlckVsID0gY2FyZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Fuc3dlci1zZWN0aW9uJyB9KTtcbiAgICAgICAgICAgIGFuc3dlckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QjczQjonIH0pO1xuICAgICAgICAgICAgY29uc3QgbWVhbmluZ3NMaXN0ID0gYW5zd2VyRWwuY3JlYXRlRWwoJ3VsJyk7XG4gICAgICAgICAgICBjdXJyZW50V29yZC5tZWFuaW5ncy5mb3JFYWNoKG1lYW5pbmcgPT4ge1xuICAgICAgICAgICAgICAgIG1lYW5pbmdzTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IG1lYW5pbmcgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRXb3JkLmV4YW1wbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhbnN3ZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzggXHVCQzg4XHVDNUVEOicgfSk7XG4gICAgICAgICAgICAgICAgY3VycmVudFdvcmQuZXhhbXBsZXMuZm9yRWFjaChleGFtcGxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYW5zd2VyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4YW1wbGUua29yZWFuLCBjbHM6ICd0cmFuc2xhdGlvbicgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmV2aWV3QnV0dG9ucyhjYXJkRWwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVSZXZpZXdCdXR0b25zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgcmV2aWV3U2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXZpZXctYnV0dG9ucycgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBoYXJkQnRuID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDNUI0XHVCODI0XHVDNkMwJywgY2xzOiAncmV2aWV3LWJ0biBoYXJkJyB9KTtcbiAgICAgICAgY29uc3QgZ29vZEJ0biA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1Qzg4Qlx1Qzc0QycsIGNsczogJ3Jldmlldy1idG4gZ29vZCcgfSk7XG4gICAgICAgIGNvbnN0IGVhc3lCdG4gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUMyNkNcdUM2QzAnLCBjbHM6ICdyZXZpZXctYnRuIGVhc3knIH0pO1xuXG4gICAgICAgIGhhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnaGFyZCcpKTtcbiAgICAgICAgZ29vZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdnb29kJykpO1xuICAgICAgICBlYXN5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2Vhc3knKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVSZXZpZXcoZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRXb3JkID0gdGhpcy53b3Jkc1t0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkKGN1cnJlbnRXb3JkLndvcmQsIGRpZmZpY3VsdHkpO1xuXG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4Kys7XG4gICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xuXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA+PSB0aGlzLndvcmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGlvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFdvcmQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFdvcmQgPSB0aGlzLndvcmRzW3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgICdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDJyxcbiAgICAgICAgICAgIGBcIiR7Y3VycmVudFdvcmQud29yZH1cIiBcdUIyRThcdUM1QjRcdUI5N0MgXHVDMEFEXHVDODFDXHVENTU4XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDP1xcblxcblx1Qzc3NCBcdUM3OTFcdUM1QzVcdUM3NDAgXHVCNDE4XHVCM0NDXHVCOUI0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIucmVtb3ZlV29yZChjdXJyZW50V29yZC53b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud29yZHMuc3BsaWNlKHRoaXMuY3VycmVudEluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPj0gdGhpcy53b3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gdGhpcy53b3Jkcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFdvcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQyBcdUM5MTEgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd0NvbXBsZXRpb24oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb25zdCBjb21wbGV0aW9uRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29tcGxldGlvbicgfSk7XG4gICAgICAgIGNvbXBsZXRpb25FbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUJDRjVcdUMyQjUgXHVDNjQ0XHVCOENDIScgfSk7XG4gICAgICAgIGNvbXBsZXRpb25FbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjRcdUI5N0MgXHVCQ0Y1XHVDMkI1XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicgfSk7XG5cbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFQlx1QUUzMCcsIGNsczogJ2Nsb3NlLWJ0bicgfSk7XG4gICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG5jbGFzcyBGZXRjaFNlbGVjdGVkTWVhbmluZ3NNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xuICAgIHNlbGVjdGVkV29yZHM6IHN0cmluZ1tdO1xuICAgIGlzUHJvY2Vzc2luZyA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4sIHNlbGVjdGVkV29yZHM6IHN0cmluZ1tdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMgPSBzZWxlY3RlZFdvcmRzO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2ZldGNoLXNlbGVjdGVkLW1lYW5pbmdzLW1vZGFsJyk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgXG4gICAgICAgICAgICB0ZXh0OiBgXHVDMTIwXHVEMEREXHVCNDFDICR7dGhpcy5zZWxlY3RlZFdvcmRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBgLFxuICAgICAgICAgICAgY2xzOiAnbW9kYWwtdGl0bGUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiBgXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc1OCBcdUMwQzFcdUMxMzggXHVDODE1XHVCQ0Y0XHVCOTdDIExMTSBBUElcdUI5N0MgXHVEMUI1XHVENTc0IFx1QUMwMFx1QzgzOFx1QzYzNVx1QjJDOFx1QjJFNC5gLFxuICAgICAgICAgICAgY2xzOiAnbW9kYWwtZGVzY3JpcHRpb24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHdvcmRMaXN0RWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VsZWN0ZWQtd29yZHMtbGlzdCcgfSk7XG4gICAgICAgIHdvcmRMaXN0RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QjRFNDonIH0pO1xuICAgICAgICBjb25zdCB3b3Jkc0NvbnRhaW5lciA9IHdvcmRMaXN0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZHMtY29udGFpbmVyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgICAgICAgd29yZHNDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6IHdvcmQsXG4gICAgICAgICAgICAgICAgY2xzOiAnc2VsZWN0ZWQtd29yZC10YWcnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmZXRjaEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVCNzNCIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCcsXG4gICAgICAgICAgICBjbHM6ICdmZXRjaC1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBmZXRjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hTZWxlY3RlZE1lYW5pbmdzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVDREU4XHVDMThDJyxcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1zZWN0aW9uJyB9KTtcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtdGV4dCcgfSk7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gcHJvZ3Jlc3NTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWJhcicgfSk7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzRmlsbCA9IHByb2dyZXNzQmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWZpbGwnIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LXNlY3Rpb24nIH0pO1xuICAgICAgICByZXN1bHRTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBmZXRjaFNlbGVjdGVkTWVhbmluZ3MoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZykgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLnNob3dQcm9ncmVzcyh0aGlzLnNlbGVjdGVkV29yZHMubGVuZ3RoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4ubGxtU2VydmljZS5nZXRNdWx0aXBsZVdvcmREZXRhaWxzKHRoaXMuc2VsZWN0ZWRXb3Jkcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiBBcnJheS5pc0FycmF5KHJlc3VsdC5kYXRhKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NXb3Jkczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBmYWlsZWRXb3Jkczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgd29yZERhdGEgb2YgcmVzdWx0LmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JkRGF0YS53b3JkICYmIHdvcmREYXRhLm1lYW5pbmdzICYmIHdvcmREYXRhLm1lYW5pbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1dvcmQgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZCh3b3JkRGF0YS53b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdXb3JkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRXb3JkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nV29yZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmREYXRhLnByb251bmNpYXRpb24gfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogd29yZERhdGEubWVhbmluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZERhdGEuZXhhbXBsZXMgfHwgW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREYXRhLnNpbWlsYXJXb3JkcyB8fCBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZERhdGEod29yZERhdGEud29yZCwgdXBkYXRlZFdvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzV29yZHMucHVzaCh3b3JkRGF0YS53b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZFdvcmRzLnB1c2god29yZERhdGEud29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmREYXRhLndvcmR9XCIgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IFx1QzJFNFx1RDMyODpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRXb3Jkcy5wdXNoKHdvcmREYXRhLndvcmQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dSZXN1bHRzKHsgc3VjY2Vzczogc3VjY2Vzc1dvcmRzLCBmYWlsZWQ6IGZhaWxlZFdvcmRzIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzV29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGAke3N1Y2Nlc3NXb3Jkcy5sZW5ndGh9XHVBQzFDXHVDNzU4IFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTRcdUIzNzAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0OiAnICsgKHJlc3VsdC5lcnJvciB8fCAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0XHVCMzcwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNDogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd1Byb2dyZXNzKHRvdGFsV29yZHM6IG51bWJlcikge1xuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgXG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMS4uLiAoMC8ke3RvdGFsV29yZHN9KWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoaWRlUHJvZ3Jlc3MoKSB7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmIChwcm9ncmVzc1NlY3Rpb24pIHtcbiAgICAgICAgICAgIHByb2dyZXNzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93UmVzdWx0cyhyZXN1bHRzOiB7IHN1Y2Nlc3M6IHN0cmluZ1tdOyBmYWlsZWQ6IHN0cmluZ1tdIH0pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICByZXN1bHRTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICByZXN1bHRTZWN0aW9uLmVtcHR5KCk7XG5cbiAgICAgICAgY29uc3Qgc3VtbWFyeUVsID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHRzLXN1bW1hcnknIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gc3VjY2VzcycgfSk7XG4gICAgICAgICAgICBzdWNjZXNzRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI3MDUgXHVDMTMxXHVBQ0Y1OiAke3Jlc3VsdHMuc3VjY2Vzcy5sZW5ndGh9XHVBQzFDYCxcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoIDw9IDEwKSB7XG4gICAgICAgICAgICAgICAgc3VjY2Vzc0VsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5zdWNjZXNzLmpvaW4oJywgJyksXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXN1bHRzLmZhaWxlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBmYWlsZWRFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSBlcnJvcicgfSk7XG4gICAgICAgICAgICBmYWlsZWRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1Mjc0QyBcdUMyRTRcdUQzMjg6ICR7cmVzdWx0cy5mYWlsZWQubGVuZ3RofVx1QUMxQ2AsXG4gICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LWNvdW50J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0cy5mYWlsZWQubGVuZ3RoIDw9IDEwKSB7XG4gICAgICAgICAgICAgICAgZmFpbGVkRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLmZhaWxlZC5qb2luKCcsICcpLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtd29yZHMnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtYnV0dG9ucycgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFQlx1QUUzMCcsIGNsczogJ2Nsb3NlLWJ1dHRvbicgfSk7XG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG4vLyBcdUFDMDRcdUIyRThcdUQ1NUMgXHVENjU1XHVDNzc4IFx1QkFBOFx1QjJFQyBcdUQwNzRcdUI3OThcdUMyQTRcbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICBvbkNvbmZpcm06ICgpID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGl0bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBvbkNvbmZpcm06ICgpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdjb25maXJtLW1vZGFsJyk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy50aXRsZSwgY2xzOiAnbW9kYWwtdGl0bGUnIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSwgY2xzOiAnbW9kYWwtbWVzc2FnZScgfSk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb25maXJtQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUQ2NTVcdUM3NzgnLFxuICAgICAgICAgICAgY2xzOiAnY29uZmlybS1idXR0b24gcHJpbWFyeSdcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlybSgpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufSAiLCAiaW1wb3J0IHsgV29yZERhdGEgfSBmcm9tICcuLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XG5cbmV4cG9ydCBjbGFzcyBXb3JkU2VydmljZSB7XG4gICAgcHJpdmF0ZSBhcGlCYXNlVXJsID0gJ2h0dHBzOi8vYXBpLmRpY3Rpb25hcnlhcGkuZGV2L2FwaS92Mi9lbnRyaWVzL2VuJztcblxuICAgIGFzeW5jIGdldFdvcmREYXRhKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8V29yZERhdGE+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFx1QzJFNFx1QzgxQyBBUEkgXHVENjM4XHVDRDlDIFx1QjMwMFx1QzJFMCBcdUMwRDhcdUQ1MEMgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1QkMxOFx1RDY1OFxuICAgICAgICAgICAgLy8gXHVDMkU0XHVDODFDIFx1QUQ2Q1x1RDYwNFx1QzVEMFx1QzExQ1x1QjI5NCBEaWN0aW9uYXJ5IEFQSVx1QjA5OCBcdUIyRTRcdUI5NzggQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUMyMTggXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTYW1wbGVXb3JkRGF0YSh3b3JkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyQyBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRTYW1wbGVXb3JkRGF0YSh3b3JkOiBzdHJpbmcpOiBXb3JkRGF0YSB7XG4gICAgICAgIC8vIFx1QzBEOFx1RDUwQyBcdUIzNzBcdUM3NzRcdUQxMzAgLSBcdUMyRTRcdUM4MUNcdUI4NUNcdUIyOTQgQVBJXHVDNUQwXHVDMTFDIFx1QUMwMFx1QzgzOFx1QzY0MFx1QzU3QyBcdUQ1NjhcbiAgICAgICAgY29uc3Qgc2FtcGxlRGF0YTogeyBba2V5OiBzdHJpbmddOiBXb3JkRGF0YSB9ID0ge1xuICAgICAgICAgICAgJ2JlYXV0aWZ1bCc6IHtcbiAgICAgICAgICAgICAgICB3b3JkOiAnYmVhdXRpZnVsJyxcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnL1x1MDJDOGJqdVx1MDJEMHRcdTAyNkFmXHUwMjU5bC8nLFxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1QzU0NFx1Qjk4NFx1QjJFNFx1QzZCNCcsICdcdUM2MDhcdUMwNUMnLCAnXHVENkNDXHVCOTZEXHVENTVDJ10sXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbJ3ByZXR0eScsICdnb3JnZW91cycsICdzdHVubmluZycsICdhdHRyYWN0aXZlJ10sXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1NoZSBpcyBhIGJlYXV0aWZ1bCB3b21hbi4nLFxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVBREY4XHVCMTQwXHVCMjk0IFx1QzU0NFx1Qjk4NFx1QjJFNFx1QzZCNCBcdUM1RUNcdUMxMzFcdUM3ODVcdUIyQzhcdUIyRTQuJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnVGhlIHN1bnNldCB3YXMgYmVhdXRpZnVsLicsXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM3N0NcdUJBQjBcdUM3NzQgXHVDNTQ0XHVCOTg0XHVCMkU0XHVDNkUwXHVDMkI1XHVCMkM4XHVCMkU0LidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1doYXQgYSBiZWF1dGlmdWwgZGF5IScsXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM4MTVcdUI5RDAgXHVDNTQ0XHVCOTg0XHVCMkU0XHVDNkI0IFx1RDU1OFx1QjhFOFx1QjEyNFx1QzY5NCEnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2hhcHB5Jzoge1xuICAgICAgICAgICAgICAgIHdvcmQ6ICdoYXBweScsXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJy9cdTAyQzhoXHUwMEU2cGkvJyxcbiAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUQ1ODlcdUJDRjVcdUQ1NUMnLCAnXHVBRTMwXHVDMDVDJywgJ1x1Qzk5MFx1QUM3MFx1QzZCNCddLFxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogWydqb3lmdWwnLCAnY2hlZXJmdWwnLCAnZ2xhZCcsICdwbGVhc2VkJ10sXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ0kgYW0gaGFwcHkgdG8gc2VlIHlvdS4nLFxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVCMkY5XHVDMkUwXHVDNzQ0IFx1QjlDQ1x1QjA5OFx1QzExQyBcdUFFMzBcdUMwNjlcdUIyQzhcdUIyRTQuJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnU2hlIGhhcyBhIGhhcHB5IGZhbWlseS4nLFxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVBREY4XHVCMTQwXHVCMjk0IFx1RDU4OVx1QkNGNVx1RDU1QyBcdUFDMDBcdUM4NzFcdUM3NDQgXHVBQzAwXHVDOUMwXHVBQ0UwIFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdIYXBweSBiaXJ0aGRheSEnLFxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDMEREXHVDNzdDIFx1Q0Q5NVx1RDU1OFx1RDU2OVx1QjJDOFx1QjJFNCEnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2xlYXJuJzoge1xuICAgICAgICAgICAgICAgIHdvcmQ6ICdsZWFybicsXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJy9sXHUwMjVDXHUwMkQwcm4vJyxcbiAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUJDMzBcdUM2QjBcdUIyRTQnLCAnXHVENTU5XHVDMkI1XHVENTU4XHVCMkU0JywgJ1x1Qzc3NVx1RDc4OFx1QjJFNCddLFxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogWydzdHVkeScsICdhY3F1aXJlJywgJ2dyYXNwJywgJ3VuZGVyc3RhbmQnXSxcbiAgICAgICAgICAgICAgICBleGFtcGxlczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnSSB3YW50IHRvIGxlYXJuIEVuZ2xpc2guJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QzgwMFx1QjI5NCBcdUM2MDFcdUM1QjRcdUI5N0MgXHVCQzMwXHVDNkIwXHVBQ0UwIFx1QzJGNlx1QzJCNVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdDaGlsZHJlbiBsZWFybiBxdWlja2x5LicsXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM1NDRcdUM3NzRcdUI0RTRcdUM3NDAgXHVCRTY4XHVCOUFDIFx1QkMzMFx1QzZDMVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdZb3UgY2FuIGxlYXJuIGZyb20geW91ciBtaXN0YWtlcy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDMkU0XHVDMjE4XHVCODVDXHVCRDgwXHVEMTMwIFx1QkMzMFx1QzZCOCBcdUMyMTggXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBcdUM3ODVcdUI4MjVcdUI0MUMgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzBEOFx1RDUwQyBcdUIzNzBcdUM3NzRcdUQxMzBcdUM1RDAgXHVDNzg4XHVDNzNDXHVCQTc0IFx1QkMxOFx1RDY1OCwgXHVDNUM2XHVDNzNDXHVCQTc0IFx1QUUzMFx1QkNGOCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDMEREXHVDMTMxXG4gICAgICAgIGlmIChzYW1wbGVEYXRhW3dvcmQudG9Mb3dlckNhc2UoKV0pIHtcbiAgICAgICAgICAgIHJldHVybiBzYW1wbGVEYXRhW3dvcmQudG9Mb3dlckNhc2UoKV07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUFFMzBcdUJDRjggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QkMxOFx1RDY1OFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd29yZDogd29yZCxcbiAgICAgICAgICAgIHByb251bmNpYXRpb246ICcvcHJvbnVuY2lhdGlvbi8nLFxuICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVDNzU4XHVCQkY4XHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LiddLFxuICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXSxcbiAgICAgICAgICAgIGV4YW1wbGVzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiBgVGhpcyBpcyBhbiBleGFtcGxlIHNlbnRlbmNlIHdpdGggdGhlIHdvcmQgXCIke3dvcmR9XCIuYCxcbiAgICAgICAgICAgICAgICAgICAga29yZWFuOiBgXCIke3dvcmR9XCJcdUI3N0NcdUIyOTQgXHVCMkU4XHVDNUI0XHVBQzAwIFx1RDNFQ1x1RDU2OFx1QjQxQyBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuYFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBcdUMyRTRcdUM4MUMgQVBJIFx1RDYzOFx1Q0Q5Q1x1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVCQTU0XHVDMTFDXHVCNERDIChcdUQ1QTVcdUQ2QzQgXHVBRDZDXHVENjA0KVxuICAgIHByaXZhdGUgYXN5bmMgZmV0Y2hGcm9tQVBJKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5hcGlCYXNlVXJsfS8ke3dvcmR9YCk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIFx1QzY5NFx1Q0NBRCBcdUMyRTRcdUQzMjg6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxufSAiLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgQWRkQm9va01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdhZGQtYm9vay1tb2RhbCcpO1xuXG4gICAgICAgIC8vIFx1QzgxQ1x1QkFBOVxuICAgICAgICBjb25zdCB0aXRsZUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUNEOTRcdUFDMDAnLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUMxMjRcdUJBODVcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVDMEM4XHVCODVDXHVDNkI0IFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc0NCBcdUMwRERcdUMxMzFcdUQ1NjlcdUIyQzhcdUIyRTQuJyxcbiAgICAgICAgICAgIGNsczogJ21vZGFsLWRlc2NyaXB0aW9uJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUM3ODVcdUI4MjUgXHVEM0ZDXG4gICAgICAgIGNvbnN0IGZvcm1FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZm9ybScsIHsgY2xzOiAnYm9vay1mb3JtJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODQgXHVDNzg1XHVCODI1XG4gICAgICAgIGNvbnN0IG5hbWVTZWN0aW9uID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Zvcm0tc2VjdGlvbicgfSk7XG4gICAgICAgIGNvbnN0IG5hbWVMYWJlbCA9IG5hbWVTZWN0aW9uLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NCAqJyxcbiAgICAgICAgICAgIGNsczogJ2Zvcm0tbGFiZWwnXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBuYW1lSW5wdXQgPSBuYW1lU2VjdGlvbi5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1x1QzYwODogVE9FSUMgXHVCMkU4XHVDNUI0XHVDN0E1LCBcdUM3N0NcdUMwQzFcdUMwRERcdUQ2NUMgXHVCMkU4XHVDNUI0XHVDN0E1JyxcbiAgICAgICAgICAgIGNsczogJ2Zvcm0taW5wdXQnXG4gICAgICAgIH0pO1xuICAgICAgICBuYW1lSW5wdXQucmVxdWlyZWQgPSB0cnVlO1xuXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjRcdUJBODUgXHVDNzg1XHVCODI1XG4gICAgICAgIGNvbnN0IGRlc2NTZWN0aW9uID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Zvcm0tc2VjdGlvbicgfSk7XG4gICAgICAgIGNvbnN0IGRlc2NMYWJlbCA9IGRlc2NTZWN0aW9uLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVDMTI0XHVCQTg1IChcdUMxMjBcdUQwRERcdUMwQUNcdUQ1NkQpJyxcbiAgICAgICAgICAgIGNsczogJ2Zvcm0tbGFiZWwnXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBkZXNjSW5wdXQgPSBkZXNjU2VjdGlvbi5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1QzVEMCBcdUIzMDBcdUQ1NUMgXHVDMTI0XHVCQTg1XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4nLFxuICAgICAgICAgICAgY2xzOiAnZm9ybS10ZXh0YXJlYSdcbiAgICAgICAgfSk7XG4gICAgICAgIGRlc2NJbnB1dC5yb3dzID0gMztcblxuICAgICAgICAvLyBcdUJDODRcdUQyQkMgXHVDNjAxXHVDNUVEXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY3JlYXRlQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxJyxcbiAgICAgICAgICAgIGNsczogJ2NyZWF0ZS1idXR0b24gcHJpbWFyeScsXG4gICAgICAgICAgICB0eXBlOiAnc3VibWl0J1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJyxcbiAgICAgICAgICAgIHR5cGU6ICdidXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgICAgIC8vIFx1RDNGQyBcdUM4MUNcdUNEOUMgXHVDNzc0XHVCQ0E0XHVEMkI4XG4gICAgICAgIGZvcm1FbC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVCb29rKG5hbWVJbnB1dC52YWx1ZS50cmltKCksIGRlc2NJbnB1dC52YWx1ZS50cmltKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFbnRlciBcdUQwQTRcdUI4NUMgXHVDODFDXHVDRDlDIFx1QUMwMFx1QjJBNVx1RDU1OFx1QjNDNFx1Qjg1RFxuICAgICAgICBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZm9ybUVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdzdWJtaXQnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1RDNFQ1x1Q0VFNFx1QzJBNCBcdUMxMjRcdUM4MTVcbiAgICAgICAgbmFtZUlucHV0LmZvY3VzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVCb29rKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZykge1xuICAgICAgICBpZiAoIW5hbWUudHJpbSgpKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVCMkU4XHVDNUI0XHVDN0E1XHVBQ0ZDIFx1Qzc3NFx1Qjk4NCBcdUM5MTFcdUJDRjUgXHVENjU1XHVDNzc4XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0Jvb2tzID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbEJvb2tzKCk7XG4gICAgICAgICAgICBjb25zdCBpc0R1cGxpY2F0ZSA9IGV4aXN0aW5nQm9va3Muc29tZShib29rID0+IFxuICAgICAgICAgICAgICAgIGJvb2submFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChpc0R1cGxpY2F0ZSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTQgXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzFcbiAgICAgICAgICAgIGNvbnN0IG5ld0Jvb2sgPSBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuY3JlYXRlQm9vayhuYW1lLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHtuYW1lfVwiIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEREXHVDMTMxXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0IWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUJBQThcdUIyRUMgXHVCMkVCXHVBRTMwXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QkFBOFx1QjRFMCBcdUJBQThcdUIyRUNcdUM1RDBcdUMxMUMgXHVDMjE4XHVDMkUwXHVENTYwIFx1QzIxOCBcdUM3ODhcdUIzQzRcdUI4NUQgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERFxuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2Jvb2tDcmVhdGVkJywgeyBkZXRhaWw6IG5ld0Jvb2sgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMVx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufSAiLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xuaW1wb3J0IHsgV29yZFNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9leHRlcm5hbC9Xb3JkU2VydmljZSc7XG5pbXBvcnQgeyBBZGRCb29rTW9kYWwgfSBmcm9tICcuLi8uLi9ib29rLW1hbmFnZW1lbnQvdWkvQWRkQm9va01vZGFsJztcbmltcG9ydCB7IHZhbGlkYXRlV29yZCwgdmFsaWRhdGVCYXRjaCwgc2FuaXRpemVNYXJrZG93biB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC92YWxpZGF0aW9uJztcbmltcG9ydCB7IENhbmNlbGxhdGlvblRva2VuU291cmNlLCBDYW5jZWxsYXRpb25FcnJvciwgcHJvY2Vzc0JhdGNoV2l0aENhbmNlbGxhdGlvbiB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9DYW5jZWxsYXRpb25Ub2tlbic7XG5pbXBvcnQgeyBnZXRDb25maWdWYWx1ZSwgQ09ORklHX1BBVEhTIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL0NvbmZpZyc7XG5cbmV4cG9ydCBjbGFzcyBBZGRXb3Jkc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XG4gICAgd29yZFNlcnZpY2U6IFdvcmRTZXJ2aWNlO1xuICAgIGlzUHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgIHByaXZhdGUgYm9va1NlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjYW5jZWxsYXRpb25Ub2tlblNvdXJjZTogQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgfCBudWxsID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLndvcmRTZXJ2aWNlID0gbmV3IFdvcmRTZXJ2aWNlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnYWRkLXdvcmRzLW1vZGFsJyk7XG5cbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1Q0Q1Q1x1QzJFMCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcblxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTIwXHVEMEREIFx1QjREQ1x1Qjg2RFx1QjJFNFx1QzZCNFxuICAgICAgICBjb25zdCBib29rU2VsZWN0U2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdib29rLXNlbGVjdC1zZWN0aW9uJyB9KTtcbiAgICAgICAgY29uc3QgYm9va0xhYmVsID0gYm9va1NlbGVjdFNlY3Rpb24uY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyMFx1RDBERCcsIGNsczogJ2Jvb2stc2VsZWN0LWxhYmVsJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvb2tTZWxlY3RDb250YWluZXIgPSBib29rU2VsZWN0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdib29rLXNlbGVjdC1jb250YWluZXInIH0pO1xuICAgICAgICB0aGlzLmJvb2tTZWxlY3QgPSBib29rU2VsZWN0Q29udGFpbmVyLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2Jvb2stc2VsZWN0LWRyb3Bkb3duJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUNEOTRcdUFDMDAgXHVCQzg0XHVEMkJDXG4gICAgICAgIGNvbnN0IGFkZEJvb2tCdXR0b24gPSBib29rU2VsZWN0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Q0Q5NFx1QUMwMCcsXG4gICAgICAgICAgICBjbHM6ICdhZGQtYm9vay1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBhZGRCb29rQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5vcGVuQWRkQm9va01vZGFsKCkpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVCb29rU2VsZWN0KCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmJvb2tTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQm9va0lkID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5zZXRDdXJyZW50Qm9vayhzZWxlY3RlZEJvb2tJZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzEgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOFxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdib29rQ3JlYXRlZCcsIHRoaXMuaGFuZGxlQm9va0NyZWF0ZWQuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgLy8gXHVDODFDXHVCQUE5XG4gICAgICAgIGNvbnN0IHRpdGxlRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QzEyNFx1QkE4NVxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbkVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUNEOTRcdUFDMDBcdUQ1NjAgXHVDNjAxXHVCMkU4XHVDNUI0XHVCNEU0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4gXHVBQzAxIFx1QjJFOFx1QzVCNFx1QjI5NCBcdUMwQzggXHVDOTA0XHVCODVDIFx1QUQ2Q1x1QkQ4NFx1QjQyOVx1QjJDOFx1QjJFNC4nLFxuICAgICAgICAgICAgY2xzOiAnbW9kYWwtZGVzY3JpcHRpb24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1Qzc4NVx1QjgyNSBcdUM2MDFcdUM1RURcbiAgICAgICAgY29uc3QgaW5wdXRTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2lucHV0LXNlY3Rpb24nIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBpbnB1dFNlY3Rpb24uY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdiZWF1dGlmdWxcXG5oYXBweVxcbmxlYXJuXFxuc3R1ZHlcXG53b3JrXFxuLi4uJyxcbiAgICAgICAgICAgIGNsczogJ3dvcmRzLXRleHRhcmVhJ1xuICAgICAgICB9KTtcbiAgICAgICAgdGV4dGFyZWEuc2V0QXR0cmlidXRlKCdyb3dzJywgJzEwJyk7XG5cbiAgICAgICAgLy8gXHVDNjA4XHVDMkRDIFx1QkM4NFx1RDJCQ1xuICAgICAgICBjb25zdCBleGFtcGxlQnRuID0gaW5wdXRTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1QzYwOFx1QzJEQyBcdUIyRThcdUM1QjRcdUI0RTQgXHVCRDg4XHVCN0VDXHVDNjI0XHVBRTMwJyxcbiAgICAgICAgICAgIGNsczogJ2V4YW1wbGUtYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgZXhhbXBsZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gJ2JlYXV0aWZ1bFxcbmhhcHB5XFxubGVhcm5cXG5zdHVkeVxcbndvcmtcXG5pbXBvcnRhbnRcXG5zdWNjZXNzXFxua25vd2xlZGdlXFxuZXhwZXJpZW5jZVxcbmZyZWVkb20nO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUJDODRcdUQyQkMgXHVDNjAxXHVDNUVEXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJyxcbiAgICAgICAgICAgIGNsczogJ2FkZC1idXR0b24gcHJpbWFyeSdcbiAgICAgICAgfSk7XG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuYWRkV29yZHModGV4dGFyZWEudmFsdWUsIHRoaXMuYm9va1NlbGVjdC52YWx1ZSkpO1xuXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVDREU4XHVDMThDJyxcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbE9wZXJhdGlvbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1QzlDNFx1RDU4OSBcdUMwQzFcdUQ2NjkgXHVENDVDXHVDMkRDIFx1QzYwMVx1QzVFRFxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3Mtc2VjdGlvbicgfSk7XG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTU4XHVCMjk0IFx1QzkxMS4uLicsXG4gICAgICAgICAgICBjbHM6ICdwcm9ncmVzcy10ZXh0J1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gcHJvZ3Jlc3NTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWJhcicgfSk7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzRmlsbCA9IHByb2dyZXNzQmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWZpbGwnIH0pO1xuXG4gICAgICAgIC8vIFx1QUNCMFx1QUNGQyBcdUQ0NUNcdUMyREMgXHVDNjAxXHVDNUVEXG4gICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LXNlY3Rpb24nIH0pO1xuICAgICAgICByZXN1bHRTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgLy8gRW50ZXIgXHVEMEE0XHVCODVDIFx1Q0Q5NFx1QUMwMCBcdUFDMDBcdUIyQTVcdUQ1NThcdUIzQzRcdUI4NURcbiAgICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5jdHJsS2V5ICYmIGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRXb3Jkcyh0ZXh0YXJlYS52YWx1ZSwgdGhpcy5ib29rU2VsZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHVEM0VDXHVDRUU0XHVDMkE0IFx1QzEyNFx1QzgxNVxuICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgYWRkV29yZHMoaW5wdXRUZXh0OiBzdHJpbmcsIGJvb2tJZDogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5wYXJzZVdvcmRzKGlucHV0VGV4dCk7XG4gICAgICAgIGlmICh3b3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Q0Q5NFx1QUMwMFx1RDU2MCBcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlID0gbmV3IENhbmNlbGxhdGlvblRva2VuU291cmNlKCk7XG4gICAgICAgIHRoaXMuc2hvd1Byb2dyZXNzKHdvcmRzLmxlbmd0aCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FuY2VsQnV0dG9uKHRydWUpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiBbXSBhcyBzdHJpbmdbXSxcbiAgICAgICAgICAgIGZhaWxlZDogW10gYXMgc3RyaW5nW10sXG4gICAgICAgICAgICBhbHJlYWR5RXhpc3RzOiBbXSBhcyBzdHJpbmdbXVxuICAgICAgICB9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzQmF0Y2hXaXRoQ2FuY2VsbGF0aW9uKFxuICAgICAgICAgICAgICAgIHdvcmRzLFxuICAgICAgICAgICAgICAgIGFzeW5jICh3b3JkOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdXb3JkID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmQod29yZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1dvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuYWxyZWFkeUV4aXN0cy5wdXNoKHdvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IGF3YWl0IHRoaXMud29yZFNlcnZpY2UuZ2V0V29yZERhdGEod29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdvcmREYXRhXHVCOTdDIFZvY2FidWxhcnlDYXJkXHVCODVDIFx1QkNDMFx1RDY1OFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgdm9jYWJ1bGFyeUNhcmQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ud29yZERhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3Q291bnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eTogJ2dvb2QnIGFzIGNvbnN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29rSWQ6IGJvb2tJZFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwIFx1Q0Q5NFx1QUMwMFxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQodm9jYWJ1bGFyeUNhcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5zdWNjZXNzLnB1c2god29yZCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHdvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiIFx1Q0Q5NFx1QUMwMCBcdUMyRTRcdUQzMjg6YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJhdGNoU2l6ZTogZ2V0Q29uZmlnVmFsdWU8bnVtYmVyPihDT05GSUdfUEFUSFMuQkFUQ0hfREVGQVVMVF9TSVpFKSxcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IGdldENvbmZpZ1ZhbHVlPG51bWJlcj4oQ09ORklHX1BBVEhTLkJBVENIX0RFTEFZKSxcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW46IHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UudG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IChjdXJyZW50LCB0b3RhbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9ncmVzcyhjdXJyZW50LCB0b3RhbCwgYFx1Q0M5OFx1QjlBQyBcdUM5MTEuLi4gKCR7Y3VycmVudH0vJHt0b3RhbH0pYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQ2FuY2VsbGF0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3OTFcdUM1QzVcdUM3NzQgXHVDREU4XHVDMThDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUJDMzBcdUNFNTggXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZT8uZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmhpZGVQcm9ncmVzcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDYW5jZWxCdXR0b24oZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5zaG93UmVzdWx0cyhyZXN1bHRzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcGFyc2VXb3JkcyhpbnB1dFRleHQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAgICAgLy8gXHVDNzg1XHVCODI1IFx1RDE0RFx1QzJBNFx1RDJCOCBcdUM4MTVcdUM4MUNcbiAgICAgICAgY29uc3Qgc2FuaXRpemVkSW5wdXQgPSBzYW5pdGl6ZU1hcmtkb3duKGlucHV0VGV4dCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByYXdXb3JkcyA9IHNhbml0aXplZElucHV0XG4gICAgICAgICAgICAuc3BsaXQoJ1xcbicpXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gd29yZC50cmltKCkpXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5sZW5ndGggPiAwKTtcblxuICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVBQzgwXHVDOTlEIFx1QkMwRiBcdUM4MTVcdUM4MUNcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlQmF0Y2gocmF3V29yZHMsICh3b3JkKSA9PiB2YWxpZGF0ZVdvcmQod29yZCkpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVDNzIwXHVENkE4XHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNzg4XHVDNzNDXHVCQTc0IFx1QzBBQ1x1QzZBOVx1Qzc5MFx1QzVEMFx1QUM4QyBcdUM1NENcdUI5QkNcbiAgICAgICAgaWYgKHZhbGlkYXRpb24uaW52YWxpZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbnZhbGlkV29yZHMgPSB2YWxpZGF0aW9uLmludmFsaWQuc2xpY2UoMCwgNSkubWFwKGl0ZW0gPT4gaXRlbS5pdGVtKS5qb2luKCcsICcpO1xuICAgICAgICAgICAgY29uc3QgbW9yZUNvdW50ID0gdmFsaWRhdGlvbi5pbnZhbGlkLmxlbmd0aCA+IDUgPyBgIFx1QzY3OCAke3ZhbGlkYXRpb24uaW52YWxpZC5sZW5ndGggLSA1fVx1QUMxQ2AgOiAnJztcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1QzcyMFx1RDZBOFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NDAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzgxQ1x1QzY3OFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNDogJHtpbnZhbGlkV29yZHN9JHttb3JlQ291bnR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUM3MjBcdUQ2QThcdUQ1NUMgXHVCMkU4XHVDNUI0XHVCNEU0XHVCOUNDIFx1QkMxOFx1RDY1OCAoXHVDOTExXHVCQ0Y1IFx1QzgxQ1x1QUM3MClcbiAgICAgICAgY29uc3QgdmFsaWRXb3JkcyA9IHZhbGlkYXRpb24udmFsaWRcbiAgICAgICAgICAgIC5tYXAod29yZCA9PiB2YWxpZGF0ZVdvcmQod29yZCkuc2FuaXRpemVkISlcbiAgICAgICAgICAgIC5tYXAod29yZCA9PiB3b3JkLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAuZmlsdGVyKCh3b3JkLCBpbmRleCwgYXJyYXkpID0+IGFycmF5LmluZGV4T2Yod29yZCkgPT09IGluZGV4KTtcblxuICAgICAgICByZXR1cm4gdmFsaWRXb3JkcztcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dQcm9ncmVzcyh0b3RhbFdvcmRzOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIFxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IGBcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTU4XHVCMjk0IFx1QzkxMS4uLiAoMC8ke3RvdGFsV29yZHN9KWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVQcm9ncmVzcyhjdXJyZW50OiBudW1iZXIsIHRvdGFsOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1maWxsJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gKGN1cnJlbnQgLyB0b3RhbCkgKiAxMDA7XG4gICAgICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IGAke21lc3NhZ2V9ICgke2N1cnJlbnR9LyR7dG90YWx9KWA7XG4gICAgICAgIHByb2dyZXNzRmlsbC5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnRhZ2V9JWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoaWRlUHJvZ3Jlc3MoKSB7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd1Jlc3VsdHMocmVzdWx0czogeyBzdWNjZXNzOiBzdHJpbmdbXTsgZmFpbGVkOiBzdHJpbmdbXTsgYWxyZWFkeUV4aXN0czogc3RyaW5nW10gfSkge1xuICAgICAgICBjb25zdCByZXN1bHRTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnJlc3VsdC1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIHJlc3VsdFNlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHJlc3VsdFNlY3Rpb24uZW1wdHkoKTtcblxuICAgICAgICBjb25zdCB0b3RhbFByb2Nlc3NlZCA9IHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggKyByZXN1bHRzLmZhaWxlZC5sZW5ndGggKyByZXN1bHRzLmFscmVhZHlFeGlzdHMubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVBQ0IwXHVBQ0ZDIFx1QzY5NFx1QzU3RFxuICAgICAgICBjb25zdCBzdW1tYXJ5RWwgPSByZXN1bHRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdHMtc3VtbWFyeScgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSBzdWNjZXNzJyB9KTtcbiAgICAgICAgICAgIHN1Y2Nlc3NFbC5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1MjcwNSBcdUMxMzFcdUFDRjU6ICR7cmVzdWx0cy5zdWNjZXNzLmxlbmd0aH1cdUFDMUNgLFxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPD0gNSkge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3NFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuc3VjY2Vzcy5qb2luKCcsICcpLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtd29yZHMnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0cy5hbHJlYWR5RXhpc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0c0VsID0gc3VtbWFyeUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1pdGVtIHdhcm5pbmcnIH0pO1xuICAgICAgICAgICAgZXhpc3RzRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI2QTBcdUZFMEYgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQzogJHtyZXN1bHRzLmFscmVhZHlFeGlzdHMubGVuZ3RofVx1QUMxQ2AsXG4gICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LWNvdW50J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0cy5hbHJlYWR5RXhpc3RzLmxlbmd0aCA8PSA1KSB7XG4gICAgICAgICAgICAgICAgZXhpc3RzRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLmFscmVhZHlFeGlzdHMuam9pbignLCAnKSxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3VsdHMuZmFpbGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGZhaWxlZEVsID0gc3VtbWFyeUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1pdGVtIGVycm9yJyB9KTtcbiAgICAgICAgICAgIGZhaWxlZEVsLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNzRDIFx1QzJFNFx1RDMyODogJHtyZXN1bHRzLmZhaWxlZC5sZW5ndGh9XHVBQzFDYCxcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmZhaWxlZC5sZW5ndGggPD0gNSkge1xuICAgICAgICAgICAgICAgIGZhaWxlZEVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5mYWlsZWQuam9pbignLCAnKSxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVCQzg0XHVEMkJDXHVCNEU0XG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSByZXN1bHRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1idXR0b25zJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRUJcdUFFMzAnLFxuICAgICAgICAgICAgY2xzOiAnY2xvc2UtYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgICAgIGNvbnN0IGFkZE1vcmVCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1QjM1NCBcdUNEOTRcdUFDMDBcdUQ1NThcdUFFMzAnLFxuICAgICAgICAgICAgY2xzOiAnYWRkLW1vcmUtYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgYWRkTW9yZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHJlc3VsdFNlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGNvbnN0IHRleHRhcmVhID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLndvcmRzLXRleHRhcmVhJykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gJyc7XG4gICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUMxMzFcdUFDRjVcdUQ1NUMgXHVCMkU4XHVDNUI0XHVBQzAwIFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM1NENcdUI5QkNcbiAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGAke3Jlc3VsdHMuc3VjY2Vzcy5sZW5ndGh9XHVBQzFDXHVDNzU4IFx1QjJFOFx1QzVCNFx1QUMwMCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDRDk0XHVBQzAwXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0IWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYW5jZWxPcGVyYXRpb24oKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlKSB7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlLmNhbmNlbCgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzkxXHVDNUM1IFx1Q0RFOFx1QzE4QyBcdUM5MTEuLi4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlQ2FuY2VsQnV0dG9uKGlzUHJvY2Vzc2luZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWJ1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICBpZiAoY2FuY2VsQnV0dG9uKSB7XG4gICAgICAgICAgICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSBpc1Byb2Nlc3NpbmcgPyAnXHVDNzkxXHVDNUM1IFx1Q0RFOFx1QzE4QycgOiAnXHVDREU4XHVDMThDJztcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdkYW5nZXInLCBpc1Byb2Nlc3NpbmcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgLy8gXHVDOUM0XHVENTg5IFx1QzkxMVx1Qzc3OCBcdUM3OTFcdUM1QzUgXHVDREU4XHVDMThDXG4gICAgICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZyAmJiB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlKSB7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlLmNhbmNlbCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlPy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzBcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYm9va0NyZWF0ZWQnLCB0aGlzLmhhbmRsZUJvb2tDcmVhdGVkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb3BlbkFkZEJvb2tNb2RhbCgpIHtcbiAgICAgICAgbmV3IEFkZEJvb2tNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUJvb2tDcmVhdGVkKGV2ZW50OiBDdXN0b21FdmVudCkge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUJvb2tTZWxlY3QoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUJvb2tTZWxlY3QoKSB7XG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUNENUNcdUMyRTAgXHVCMzcwXHVDNzc0XHVEMTMwIFx1Qjg1Q1x1QjREQ1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBib29rcyA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xuICAgICAgICB0aGlzLmJvb2tTZWxlY3QuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGJvb2tzLmZvckVhY2goYm9vayA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGJvb2suaWQ7XG4gICAgICAgICAgICBvcHRpb24udGV4dCA9IGJvb2submFtZTtcbiAgICAgICAgICAgIHRoaXMuYm9va1NlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICB9KTtcbiAgICB9XG59ICIsICIvLyBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEIFx1QkMwRiBcdUM4MTVcdUM4MUMgXHVDNzIwXHVEMkY4XHVCOUFDXHVEMkYwXG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbiAgICBlcnJvcj86IHN0cmluZztcbiAgICBzYW5pdGl6ZWQ/OiBzdHJpbmc7XG59XG5cbi8vIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTdHJpbmcoaW5wdXQ6IHN0cmluZywgb3B0aW9uczoge1xuICAgIG1pbkxlbmd0aD86IG51bWJlcjtcbiAgICBtYXhMZW5ndGg/OiBudW1iZXI7XG4gICAgYWxsb3dFbXB0eT86IGJvb2xlYW47XG4gICAgcGF0dGVybj86IFJlZ0V4cDtcbiAgICBmaWVsZE5hbWU/OiBzdHJpbmc7XG59ID0ge30pOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgICBjb25zdCB7XG4gICAgICAgIG1pbkxlbmd0aCA9IDAsXG4gICAgICAgIG1heExlbmd0aCA9IDEwMDAsXG4gICAgICAgIGFsbG93RW1wdHkgPSBmYWxzZSxcbiAgICAgICAgcGF0dGVybixcbiAgICAgICAgZmllbGROYW1lID0gJ1x1Qzc4NVx1QjgyNVx1QUMxMidcbiAgICB9ID0gb3B0aW9ucztcblxuICAgIGlmICghaW5wdXQgfHwgaW5wdXQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAoYWxsb3dFbXB0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgc2FuaXRpemVkOiAnJyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpIFx1RDU0NFx1QzIxOCBcdUM3ODVcdUI4MjVcdUFDMTJcdUM3ODVcdUIyQzhcdUIyRTQuYCB9O1xuICAgIH1cblxuICAgIGNvbnN0IHRyaW1tZWQgPSBpbnB1dC50cmltKCk7XG5cbiAgICBpZiAodHJpbW1lZC5sZW5ndGggPCBtaW5MZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSwgXG4gICAgICAgICAgICBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpIFx1Q0Q1Q1x1QzE4QyAke21pbkxlbmd0aH1cdUM3OTAgXHVDNzc0XHVDMEMxXHVDNzc0XHVDNUI0XHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5gIFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmICh0cmltbWVkLmxlbmd0aCA+IG1heExlbmd0aCkge1xuICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLCBcbiAgICAgICAgICAgIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgXHVDRDVDXHVCMzAwICR7bWF4TGVuZ3RofVx1Qzc5MCBcdUM3NzRcdUQ1NThcdUM1RUNcdUM1N0MgXHVENTY5XHVCMkM4XHVCMkU0LmAgXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHBhdHRlcm4gJiYgIXBhdHRlcm4udGVzdCh0cmltbWVkKSkge1xuICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLCBcbiAgICAgICAgICAgIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzU4IFx1RDYxNVx1QzJERFx1Qzc3NCBcdUM2MkNcdUJDMTRcdUI5NzRcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0LmAgXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgc2FuaXRpemVkOiB0cmltbWVkIH07XG59XG5cbi8vIEFQSSBcdUQwQTQgXHVBQzgwXHVDOTlEXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVBcGlLZXkoYXBpS2V5OiBzdHJpbmcsIHByb3ZpZGVyOiBzdHJpbmcpOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGVTdHJpbmcoYXBpS2V5LCB7XG4gICAgICAgIG1pbkxlbmd0aDogMTAsXG4gICAgICAgIG1heExlbmd0aDogMjAwLFxuICAgICAgICBmaWVsZE5hbWU6IGAke3Byb3ZpZGVyfSBBUEkgXHVEMEE0YFxuICAgIH0pO1xuXG4gICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRpb247XG4gICAgfVxuXG4gICAgLy8gXHVBQzAxIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1QkNDNCBBUEkgXHVEMEE0IFx1RDYxNVx1QzJERCBcdUFDODBcdUM5OURcbiAgICBjb25zdCBwYXR0ZXJucyA9IHtcbiAgICAgICAgb3BlbmFpOiAvXnNrLVthLXpBLVowLTldezQ4LH0kLyxcbiAgICAgICAgYW50aHJvcGljOiAvXnNrLWFudC1bYS16QS1aMC05LV9dezk1LH0kLyxcbiAgICAgICAgZ29vZ2xlOiAvXlthLXpBLVowLTlfLV17Mzl9JC9cbiAgICB9O1xuXG4gICAgY29uc3QgcGF0dGVybiA9IHBhdHRlcm5zW3Byb3ZpZGVyLnRvTG93ZXJDYXNlKCkgYXMga2V5b2YgdHlwZW9mIHBhdHRlcm5zXTtcbiAgICBpZiAocGF0dGVybiAmJiAhcGF0dGVybi50ZXN0KHZhbGlkYXRpb24uc2FuaXRpemVkISkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IGAke3Byb3ZpZGVyfSBBUEkgXHVEMEE0IFx1RDYxNVx1QzJERFx1Qzc3NCBcdUM2MkNcdUJDMTRcdUI5NzRcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0LmBcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWRhdGlvbjtcbn1cblxuLy8gXHVCMkU4XHVDNUI0IFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OURcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVdvcmQod29yZDogc3RyaW5nKTogVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlU3RyaW5nKHdvcmQsIHtcbiAgICAgICAgbWluTGVuZ3RoOiAxLFxuICAgICAgICBtYXhMZW5ndGg6IDUwLFxuICAgICAgICBwYXR0ZXJuOiAvXlthLXpBLVpcXHMnLV0rJC8sXG4gICAgICAgIGZpZWxkTmFtZTogJ1x1QjJFOFx1QzVCNCdcbiAgICB9KTtcblxuICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiB2YWxpZGF0aW9uO1xuICAgIH1cblxuICAgIC8vIFx1Q0Q5NFx1QUMwMCBcdUFDODBcdUM5OUQ6IFx1RDJCOVx1QzIxOCBcdUJCMzhcdUM3OTAgXHVDODFDXHVENTVDXG4gICAgY29uc3Qgc2FuaXRpemVkID0gdmFsaWRhdGlvbi5zYW5pdGl6ZWQhXG4gICAgICAgIC5yZXBsYWNlKC9bXlxcd1xccyctXS9nLCAnJykgLy8gXHVENUM4XHVDNkE5XHVCNDE4XHVDOUMwIFx1QzU0QVx1QjI5NCBcdUQyQjlcdUMyMThcdUJCMzhcdUM3OTAgXHVDODFDXHVBQzcwXG4gICAgICAgIC5yZXBsYWNlKC9cXHMrL2csICcgJyk7IC8vIFx1QzVGMFx1QzE4RFx1QjQxQyBcdUFDRjVcdUJDMzFcdUM3NDQgXHVENTU4XHVCMDk4XHVCODVDXG5cbiAgICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBzYW5pdGl6ZWQgfTtcbn1cblxuLy8gXHVCOUM4XHVEMDZDXHVCMkU0XHVDNkI0IFx1RDE0RFx1QzJBNFx1RDJCOCBcdUM4MTVcdUM4MUNcbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZU1hcmtkb3duKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCF0ZXh0KSByZXR1cm4gJyc7XG5cbiAgICByZXR1cm4gdGV4dFxuICAgICAgICAucmVwbGFjZSgvPHNjcmlwdFtePl0qPltcXHNcXFNdKj88XFwvc2NyaXB0Pi9naSwgJycpIC8vIFx1QzJBNFx1RDA2Q1x1QjlCRFx1RDJCOCBcdUQwRENcdUFERjggXHVDODFDXHVBQzcwXG4gICAgICAgIC5yZXBsYWNlKC88aWZyYW1lW14+XSo+W1xcc1xcU10qPzxcXC9pZnJhbWU+L2dpLCAnJykgLy8gaWZyYW1lIFx1RDBEQ1x1QURGOCBcdUM4MUNcdUFDNzBcbiAgICAgICAgLnJlcGxhY2UoL2phdmFzY3JpcHQ6L2dpLCAnJykgLy8gamF2YXNjcmlwdDogXHVENTA0XHVCODVDXHVEMUEwXHVDRjVDIFx1QzgxQ1x1QUM3MFxuICAgICAgICAucmVwbGFjZSgvb25cXHcrXFxzKj0vZ2ksICcnKSAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVENTc4XHVCNEU0XHVCN0VDIFx1QzgxQ1x1QUM3MFxuICAgICAgICAudHJpbSgpO1xufVxuXG4vLyBVUkwgXHVBQzgwXHVDOTlEXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVVcmwodXJsOiBzdHJpbmcpOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgICBpZiAoIXVybCkge1xuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6ICdVUkxcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTY5XHVCMkM4XHVCMkU0LicgfTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKHVybCk7XG4gICAgICAgIFxuICAgICAgICAvLyBIVFRQU1x1QjlDQyBcdUQ1QzhcdUM2QTlcbiAgICAgICAgaWYgKHVybE9iai5wcm90b2NvbCAhPT0gJ2h0dHBzOicpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogJ0hUVFBTIFVSTFx1QjlDQyBcdUQ1QzhcdUM2QTlcdUI0MjlcdUIyQzhcdUIyRTQuJyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVENUM4XHVDNkE5XHVCNDFDIFx1QjNDNFx1QkE1NFx1Qzc3OCBcdUQ2NTVcdUM3NzggKFx1RDU0NFx1QzY5NFx1QzJEQylcbiAgICAgICAgY29uc3QgYWxsb3dlZERvbWFpbnMgPSBbXG4gICAgICAgICAgICAnYXBpLm9wZW5haS5jb20nLFxuICAgICAgICAgICAgJ2FwaS5hbnRocm9waWMuY29tJyxcbiAgICAgICAgICAgICdnZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20nXG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gXHVCM0M0XHVCQTU0XHVDNzc4IFx1QUM4MFx1Qzk5RFx1Qzc0MCBcdUMxMjBcdUQwRERcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMjE4XHVENTg5XG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIHNhbml0aXplZDogdXJsIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiAnXHVDNzIwXHVENkE4XHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0MCBVUkwgXHVENjE1XHVDMkREXHVDNzg1XHVCMkM4XHVCMkU0LicgfTtcbiAgICB9XG59XG5cbi8vIFx1QzIyQlx1Qzc5MCBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXIodmFsdWU6IGFueSwgb3B0aW9uczoge1xuICAgIG1pbj86IG51bWJlcjtcbiAgICBtYXg/OiBudW1iZXI7XG4gICAgaW50ZWdlcj86IGJvb2xlYW47XG4gICAgZmllbGROYW1lPzogc3RyaW5nO1xufSA9IHt9KTogVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgeyBtaW4sIG1heCwgaW50ZWdlciA9IGZhbHNlLCBmaWVsZE5hbWUgPSAnXHVDMjJCXHVDNzkwJyB9ID0gb3B0aW9ucztcblxuICAgIGNvbnN0IG51bSA9IE51bWJlcih2YWx1ZSk7XG4gICAgXG4gICAgaWYgKGlzTmFOKG51bSkpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgXHVDNzIwXHVENkE4XHVENTVDIFx1QzIyQlx1Qzc5MFx1QzVFQ1x1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuYCB9O1xuICAgIH1cblxuICAgIGlmIChpbnRlZ2VyICYmICFOdW1iZXIuaXNJbnRlZ2VyKG51bSkpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgXHVDODE1XHVDMjE4XHVDNUVDXHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5gIH07XG4gICAgfVxuXG4gICAgaWYgKG1pbiAhPT0gdW5kZWZpbmVkICYmIG51bSA8IG1pbikge1xuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NDAoXHVCMjk0KSAke21pbn0gXHVDNzc0XHVDMEMxXHVDNzc0XHVDNUI0XHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5gIH07XG4gICAgfVxuXG4gICAgaWYgKG1heCAhPT0gdW5kZWZpbmVkICYmIG51bSA+IG1heCkge1xuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NDAoXHVCMjk0KSAke21heH0gXHVDNzc0XHVENTU4XHVDNUVDXHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5gIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgc2FuaXRpemVkOiBudW0udG9TdHJpbmcoKSB9O1xufVxuXG4vLyBcdUJDMzBcdUNFNTggXHVBQzgwXHVDOTlEIFx1RDU2OFx1QzIxOFxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQmF0Y2g8VD4oXG4gICAgaXRlbXM6IFRbXSxcbiAgICB2YWxpZGF0b3I6IChpdGVtOiBUKSA9PiBWYWxpZGF0aW9uUmVzdWx0XG4pOiB7IHZhbGlkOiBUW107IGludmFsaWQ6IEFycmF5PHsgaXRlbTogVDsgZXJyb3I6IHN0cmluZyB9PiB9IHtcbiAgICBjb25zdCB2YWxpZDogVFtdID0gW107XG4gICAgY29uc3QgaW52YWxpZDogQXJyYXk8eyBpdGVtOiBUOyBlcnJvcjogc3RyaW5nIH0+ID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdG9yKGl0ZW0pO1xuICAgICAgICBpZiAocmVzdWx0LmlzVmFsaWQpIHtcbiAgICAgICAgICAgIHZhbGlkLnB1c2goaXRlbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnZhbGlkLnB1c2goeyBpdGVtLCBlcnJvcjogcmVzdWx0LmVycm9yIHx8ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTgnIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdmFsaWQsIGludmFsaWQgfTtcbn0iLCAiLy8gXHVDNzkxXHVDNUM1IFx1Q0RFOFx1QzE4Q1x1Qjk3QyBcdUM3MDRcdUQ1NUMgXHVEMUEwXHVEMDcwIFx1QzJEQ1x1QzJBNFx1RDE1Q1xuXG5leHBvcnQgaW50ZXJmYWNlIENhbmNlbGxhdGlvblRva2VuIHtcbiAgICByZWFkb25seSBpc0NhbmNlbGxlZDogYm9vbGVhbjtcbiAgICB0aHJvd0lmQ2FuY2VsbGVkKCk6IHZvaWQ7XG4gICAgb25DYW5jZWxsZWQoY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2Uge1xuICAgIHByaXZhdGUgX2lzQ2FuY2VsbGVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfY2FsbGJhY2tzOiAoKCkgPT4gdm9pZClbXSA9IFtdO1xuXG4gICAgZ2V0IHRva2VuKCk6IENhbmNlbGxhdGlvblRva2VuIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldCBpc0NhbmNlbGxlZCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faXNDYW5jZWxsZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhyb3dJZkNhbmNlbGxlZDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc0NhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoJ09wZXJhdGlvbiB3YXMgY2FuY2VsbGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQ2FuY2VsbGVkOiAoY2FsbGJhY2s6ICgpID0+IHZvaWQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNDYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNhbmNlbCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzQ2FuY2VsbGVkKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pc0NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gY2FuY2VsbGF0aW9uIGNhbGxiYWNrOicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcy5jbGVhcigpO1xuICAgIH1cblxuICAgIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcy5jbGVhcigpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIENhbmNlbGxhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdPcGVyYXRpb24gd2FzIGNhbmNlbGxlZCcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9ICdDYW5jZWxsYXRpb25FcnJvcic7XG4gICAgfVxufVxuXG4vLyBcdUM3MjBcdUQyRjhcdUI5QUNcdUQyRjAgXHVENTY4XHVDMjE4XHVCNEU0XG5leHBvcnQgZnVuY3Rpb24gZGVsYXkobXM6IG51bWJlciwgY2FuY2VsbGF0aW9uVG9rZW4/OiBDYW5jZWxsYXRpb25Ub2tlbik6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGlmIChjYW5jZWxsYXRpb25Ub2tlbj8uaXNDYW5jZWxsZWQpIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSwgbXMpO1xuXG4gICAgICAgIGNhbmNlbGxhdGlvblRva2VuPy5vbkNhbmNlbGxlZCgoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIHJlamVjdChuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2l0aENhbmNlbGxhdGlvbjxUPihcbiAgICBwcm9taXNlOiBQcm9taXNlPFQ+LFxuICAgIGNhbmNlbGxhdGlvblRva2VuPzogQ2FuY2VsbGF0aW9uVG9rZW5cbik6IFByb21pc2U8VD4ge1xuICAgIGlmICghY2FuY2VsbGF0aW9uVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgaWYgKGNhbmNlbGxhdGlvblRva2VuLmlzQ2FuY2VsbGVkKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IENhbmNlbGxhdGlvbkVycm9yKCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGlzUmVzb2x2ZWQgPSBmYWxzZTtcblxuICAgICAgICBwcm9taXNlLnRoZW4oXG4gICAgICAgICAgICAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzUmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzUmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIGNhbmNlbGxhdGlvblRva2VuLm9uQ2FuY2VsbGVkKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghaXNSZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG4vLyBcdUJDMzBcdUNFNTggXHVDQzk4XHVCOUFDXHVDNkE5IFx1Q0RFOFx1QzE4QyBcdUFDMDBcdUIyQTVcdUQ1NUMgXHVENTY4XHVDMjE4XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0JhdGNoV2l0aENhbmNlbGxhdGlvbjxULCBSPihcbiAgICBpdGVtczogVFtdLFxuICAgIHByb2Nlc3NvcjogKGl0ZW06IFQsIGluZGV4OiBudW1iZXIpID0+IFByb21pc2U8Uj4sXG4gICAgb3B0aW9uczoge1xuICAgICAgICBiYXRjaFNpemU/OiBudW1iZXI7XG4gICAgICAgIGRlbGF5PzogbnVtYmVyO1xuICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbj86IENhbmNlbGxhdGlvblRva2VuO1xuICAgICAgICBvblByb2dyZXNzPzogKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlcikgPT4gdm9pZDtcbiAgICB9ID0ge31cbik6IFByb21pc2U8UltdPiB7XG4gICAgY29uc3Qge1xuICAgICAgICBiYXRjaFNpemUgPSAxMCxcbiAgICAgICAgZGVsYXk6IGRlbGF5TXMgPSAxMDAsXG4gICAgICAgIGNhbmNlbGxhdGlvblRva2VuLFxuICAgICAgICBvblByb2dyZXNzXG4gICAgfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCByZXN1bHRzOiBSW10gPSBbXTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW4/LnRocm93SWZDYW5jZWxsZWQoKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJhdGNoID0gaXRlbXMuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSk7XG4gICAgICAgIGNvbnN0IGJhdGNoUHJvbWlzZXMgPSBiYXRjaC5tYXAoKGl0ZW0sIGJhdGNoSW5kZXgpID0+XG4gICAgICAgICAgICBwcm9jZXNzb3IoaXRlbSwgaSArIGJhdGNoSW5kZXgpXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoUmVzdWx0cyA9IGF3YWl0IHdpdGhDYW5jZWxsYXRpb24oXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoYmF0Y2hQcm9taXNlcyksXG4gICAgICAgICAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goLi4uYmF0Y2hSZXN1bHRzKTtcblxuICAgICAgICAgICAgLy8gXHVDOUM0XHVENTg5XHVCOTYwIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICAgICAgb25Qcm9ncmVzcz8uKE1hdGgubWluKGkgKyBiYXRjaFNpemUsIGl0ZW1zLmxlbmd0aCksIGl0ZW1zLmxlbmd0aCk7XG5cbiAgICAgICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUJDMzBcdUNFNTggXHVDODA0IFx1QjMwMFx1QUUzMCAoXHVCOUM4XHVDOUMwXHVCOUM5IFx1QkMzMFx1Q0U1OFx1QUMwMCBcdUM1NDRcdUIyQ0MgXHVBQ0JEXHVDNkIwKVxuICAgICAgICAgICAgaWYgKGkgKyBiYXRjaFNpemUgPCBpdGVtcy5sZW5ndGggJiYgZGVsYXlNcyA+IDApIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBkZWxheShkZWxheU1zLCBjYW5jZWxsYXRpb25Ub2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBDYW5jZWxsYXRpb25FcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gXHVCMkU0XHVCOTc4IFx1QzVEMFx1QjdFQ1x1QjI5NCBcdUFDQjBcdUFDRkNcdUM1RDAgXHVEM0VDXHVENTY4XHVENTU4XHVBQzcwXHVCMDk4IFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUI4NUNcdUM5QzEgXHVDRDk0XHVBQzAwIFx1QUMwMFx1QjJBNVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbn0iLCAiZXhwb3J0IHR5cGUgQ29uc3RydWN0b3I8VCA9IHt9PiA9IG5ldyAoLi4uYXJnczogYW55W10pID0+IFQ7XG5leHBvcnQgdHlwZSBGYWN0b3J5PFQgPSBhbnk+ID0gKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlcnZpY2VEZWZpbml0aW9uPFQgPSBhbnk+IHtcbiAgICBpbXBsZW1lbnRhdGlvbjogQ29uc3RydWN0b3I8VD4gfCBGYWN0b3J5PFQ+O1xuICAgIHNpbmdsZXRvbj86IGJvb2xlYW47XG4gICAgZGVwZW5kZW5jaWVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBjbGFzcyBESUNvbnRhaW5lciB7XG4gICAgcHJpdmF0ZSBzZXJ2aWNlcyA9IG5ldyBNYXA8c3RyaW5nLCBTZXJ2aWNlRGVmaW5pdGlvbj4oKTtcbiAgICBwcml2YXRlIGluc3RhbmNlcyA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XG5cbiAgICByZWdpc3RlcjxUPihcbiAgICAgICAgbmFtZTogc3RyaW5nLCBcbiAgICAgICAgaW1wbGVtZW50YXRpb246IENvbnN0cnVjdG9yPFQ+IHwgRmFjdG9yeTxUPixcbiAgICAgICAgb3B0aW9uczogeyBzaW5nbGV0b24/OiBib29sZWFuOyBkZXBlbmRlbmNpZXM/OiBzdHJpbmdbXSB9ID0ge31cbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlcy5zZXQobmFtZSwge1xuICAgICAgICAgICAgaW1wbGVtZW50YXRpb24sXG4gICAgICAgICAgICBzaW5nbGV0b246IG9wdGlvbnMuc2luZ2xldG9uID8/IHRydWUsXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IG9wdGlvbnMuZGVwZW5kZW5jaWVzID8/IFtdXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlc29sdmU8VD4obmFtZTogc3RyaW5nKTogVCB7XG4gICAgICAgIGNvbnN0IHNlcnZpY2UgPSB0aGlzLnNlcnZpY2VzLmdldChuYW1lKTtcbiAgICAgICAgaWYgKCFzZXJ2aWNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNlcnZpY2UgJyR7bmFtZX0nIG5vdCByZWdpc3RlcmVkYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUMyRjFcdUFFMDBcdUQxQTRcdUM3NzRcdUFDRTAgXHVDNzc0XHVCQkY4IFx1Qzc3OFx1QzJBNFx1RDEzNFx1QzJBNFx1QUMwMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVCQzE4XHVENjU4XG4gICAgICAgIGlmIChzZXJ2aWNlLnNpbmdsZXRvbiAmJiB0aGlzLmluc3RhbmNlcy5oYXMobmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5nZXQobmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUM3NThcdUM4NzRcdUMxMzEgXHVENTc0XHVBQ0IwXG4gICAgICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IHNlcnZpY2UuZGVwZW5kZW5jaWVzLm1hcChkZXAgPT4gdGhpcy5yZXNvbHZlKGRlcCkpO1xuXG4gICAgICAgIC8vIFx1Qzc3OFx1QzJBNFx1RDEzNFx1QzJBNCBcdUMwRERcdUMxMzFcbiAgICAgICAgbGV0IGluc3RhbmNlOiBUO1xuICAgICAgICBpZiAodGhpcy5pc0NvbnN0cnVjdG9yKHNlcnZpY2UuaW1wbGVtZW50YXRpb24pKSB7XG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBzZXJ2aWNlLmltcGxlbWVudGF0aW9uKC4uLmRlcGVuZGVuY2llcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnN0YW5jZSA9IHNlcnZpY2UuaW1wbGVtZW50YXRpb24oLi4uZGVwZW5kZW5jaWVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1QzJGMVx1QUUwMFx1RDFBNFx1Qzc3NFx1QkE3NCBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTQgXHVDODAwXHVDN0E1XG4gICAgICAgIGlmIChzZXJ2aWNlLnNpbmdsZXRvbikge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KG5hbWUsIGluc3RhbmNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG5cbiAgICByZWdpc3Rlckluc3RhbmNlPFQ+KG5hbWU6IHN0cmluZywgaW5zdGFuY2U6IFQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KG5hbWUsIGluc3RhbmNlKTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlcy5zZXQobmFtZSwge1xuICAgICAgICAgICAgaW1wbGVtZW50YXRpb246ICgpID0+IGluc3RhbmNlLFxuICAgICAgICAgICAgc2luZ2xldG9uOiB0cnVlLFxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbXVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYXMobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlcnZpY2VzLmhhcyhuYW1lKTtcbiAgICB9XG5cbiAgICBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlcy5jbGVhcigpO1xuICAgICAgICB0aGlzLmluc3RhbmNlcy5jbGVhcigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNDb25zdHJ1Y3RvcihpbXBsZW1lbnRhdGlvbjogYW55KTogaW1wbGVtZW50YXRpb24gaXMgQ29uc3RydWN0b3Ige1xuICAgICAgICByZXR1cm4gaW1wbGVtZW50YXRpb24ucHJvdG90eXBlICYmIGltcGxlbWVudGF0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9PT0gaW1wbGVtZW50YXRpb247XG4gICAgfVxufVxuXG4vLyBcdUFFMDBcdUI4NUNcdUJDOEMgXHVDRUU4XHVEMTRDXHVDNzc0XHVCMTA4IFx1Qzc3OFx1QzJBNFx1RDEzNFx1QzJBNFxuZXhwb3J0IGNvbnN0IGNvbnRhaW5lciA9IG5ldyBESUNvbnRhaW5lcigpOyIsICJpbXBvcnQgeyBEaWZmaWN1bHR5LCBFeGFtcGxlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi90eXBlcyc7XG5cbi8vIFx1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0IFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNFxuZXhwb3J0IGludGVyZmFjZSBXb3JkRGF0YSB7XG4gICAgd29yZDogc3RyaW5nO1xuICAgIHByb251bmNpYXRpb246IHN0cmluZztcbiAgICBtZWFuaW5nczogc3RyaW5nW107XG4gICAgc2ltaWxhcldvcmRzOiBzdHJpbmdbXTtcbiAgICBleGFtcGxlczogRXhhbXBsZVtdO1xufVxuXG4vLyBcdUIyRThcdUM1QjQgXHVDRTc0XHVCNERDIFx1QzVENFx1RDJGMFx1RDJGMFxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlDYXJkIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHdvcmQ6IHN0cmluZyxcbiAgICAgICAgcHVibGljIHByb251bmNpYXRpb246IHN0cmluZyxcbiAgICAgICAgcHVibGljIG1lYW5pbmdzOiBzdHJpbmdbXSxcbiAgICAgICAgcHVibGljIHNpbWlsYXJXb3Jkczogc3RyaW5nW10sXG4gICAgICAgIHB1YmxpYyBleGFtcGxlczogRXhhbXBsZVtdLFxuICAgICAgICBwdWJsaWMgcmV2aWV3Q291bnQ6IG51bWJlcixcbiAgICAgICAgcHVibGljIGRpZmZpY3VsdHk6IERpZmZpY3VsdHksXG4gICAgICAgIHB1YmxpYyBsYXN0UmV2aWV3ZWQ6IHN0cmluZyB8IG51bGwsXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBhZGRlZERhdGU6IHN0cmluZyxcbiAgICAgICAgcHVibGljIGJvb2tJZDogc3RyaW5nXG4gICAgKSB7fVxuXG4gICAgLy8gXHVEMzI5XHVEMUEwXHVCOUFDIFx1QkE1NFx1QzExQ1x1QjREQzogV29yZERhdGFcdUI4NUNcdUJEODBcdUQxMzAgVm9jYWJ1bGFyeUNhcmQgXHVDMEREXHVDMTMxXG4gICAgc3RhdGljIGZyb21Xb3JkRGF0YSh3b3JkRGF0YTogV29yZERhdGEsIGJvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmQge1xuICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlDYXJkKFxuICAgICAgICAgICAgd29yZERhdGEud29yZCxcbiAgICAgICAgICAgIHdvcmREYXRhLnByb251bmNpYXRpb24sXG4gICAgICAgICAgICB3b3JkRGF0YS5tZWFuaW5ncyxcbiAgICAgICAgICAgIHdvcmREYXRhLnNpbWlsYXJXb3JkcyxcbiAgICAgICAgICAgIHdvcmREYXRhLmV4YW1wbGVzLFxuICAgICAgICAgICAgMCwgLy8gXHVDRDA4XHVBRTMwIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMThcbiAgICAgICAgICAgICdnb29kJywgLy8gXHVDRDA4XHVBRTMwIFx1QjA5Q1x1Qzc3NFx1QjNDNFxuICAgICAgICAgICAgbnVsbCwgLy8gXHVDRDA4XHVBRTMwIFx1QkNGNVx1QzJCNSBcdUIwQTBcdUM5RENcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgLy8gXHVDRDk0XHVBQzAwIFx1QjBBMFx1QzlEQ1xuICAgICAgICAgICAgYm9va0lkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCQ0Y1XHVDMkI1IFx1QzIxOFx1RDU4OVxuICAgIHJldmlldyhuZXdEaWZmaWN1bHR5OiBEaWZmaWN1bHR5KTogVm9jYWJ1bGFyeUNhcmQge1xuICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlDYXJkKFxuICAgICAgICAgICAgdGhpcy53b3JkLFxuICAgICAgICAgICAgdGhpcy5wcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgdGhpcy5tZWFuaW5ncyxcbiAgICAgICAgICAgIHRoaXMuc2ltaWxhcldvcmRzLFxuICAgICAgICAgICAgdGhpcy5leGFtcGxlcyxcbiAgICAgICAgICAgIHRoaXMucmV2aWV3Q291bnQgKyAxLFxuICAgICAgICAgICAgbmV3RGlmZmljdWx0eSxcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIHRoaXMuYWRkZWREYXRlLFxuICAgICAgICAgICAgdGhpcy5ib29rSWRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgIHVwZGF0ZVdvcmREYXRhKHdvcmREYXRhOiBQYXJ0aWFsPFdvcmREYXRhPik6IFZvY2FidWxhcnlDYXJkIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcbiAgICAgICAgICAgIHRoaXMud29yZCxcbiAgICAgICAgICAgIHdvcmREYXRhLnByb251bmNpYXRpb24gPz8gdGhpcy5wcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgd29yZERhdGEubWVhbmluZ3MgPz8gdGhpcy5tZWFuaW5ncyxcbiAgICAgICAgICAgIHdvcmREYXRhLnNpbWlsYXJXb3JkcyA/PyB0aGlzLnNpbWlsYXJXb3JkcyxcbiAgICAgICAgICAgIHdvcmREYXRhLmV4YW1wbGVzID8/IHRoaXMuZXhhbXBsZXMsXG4gICAgICAgICAgICB0aGlzLnJldmlld0NvdW50LFxuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgdGhpcy5sYXN0UmV2aWV3ZWQsXG4gICAgICAgICAgICB0aGlzLmFkZGVkRGF0ZSxcbiAgICAgICAgICAgIHRoaXMuYm9va0lkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1QjNEOVxuICAgIG1vdmVUb0Jvb2sobmV3Qm9va0lkOiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZCB7XG4gICAgICAgIHJldHVybiBuZXcgVm9jYWJ1bGFyeUNhcmQoXG4gICAgICAgICAgICB0aGlzLndvcmQsXG4gICAgICAgICAgICB0aGlzLnByb251bmNpYXRpb24sXG4gICAgICAgICAgICB0aGlzLm1lYW5pbmdzLFxuICAgICAgICAgICAgdGhpcy5zaW1pbGFyV29yZHMsXG4gICAgICAgICAgICB0aGlzLmV4YW1wbGVzLFxuICAgICAgICAgICAgdGhpcy5yZXZpZXdDb3VudCxcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSxcbiAgICAgICAgICAgIHRoaXMubGFzdFJldmlld2VkLFxuICAgICAgICAgICAgdGhpcy5hZGRlZERhdGUsXG4gICAgICAgICAgICBuZXdCb29rSWRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUJDRjVcdUMyQjVcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTVDXHVDOUMwIFx1RDY1NVx1Qzc3OFxuICAgIG5lZWRzUmV2aWV3KHJldmlld0ludGVydmFsOiBudW1iZXIgPSAxKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghdGhpcy5sYXN0UmV2aWV3ZWQpIHJldHVybiB0cnVlO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbGFzdFJldmlld0RhdGUgPSBuZXcgRGF0ZSh0aGlzLmxhc3RSZXZpZXdlZCk7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IGRheXNEaWZmID0gTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIGxhc3RSZXZpZXdEYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVCMDlDXHVDNzc0XHVCM0M0XHVDNUQwIFx1QjUzMFx1Qjk3OCBcdUJDRjVcdUMyQjUgXHVDOEZDXHVBRTMwIFx1Qzg3MFx1QzgxNVxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5TXVsdGlwbGllciA9IHtcbiAgICAgICAgICAgICdoYXJkJzogMC41LFxuICAgICAgICAgICAgJ2dvb2QnOiAxLFxuICAgICAgICAgICAgJ2Vhc3knOiAyXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZGp1c3RlZEludGVydmFsID0gcmV2aWV3SW50ZXJ2YWwgKiBkaWZmaWN1bHR5TXVsdGlwbGllclt0aGlzLmRpZmZpY3VsdHldO1xuICAgICAgICByZXR1cm4gZGF5c0RpZmYgPj0gYWRqdXN0ZWRJbnRlcnZhbDtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUQ1NTlcdUMyQjUgXHVDOUM0XHVENTg5XHVCM0M0IFx1QUNDNFx1QzBCMCAoMC0xMDApXG4gICAgZ2V0UHJvZ3Jlc3NQZXJjZW50YWdlKCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IG1heFJldmlld3MgPSAxMDsgLy8gXHVDRDVDXHVCMzAwIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMThcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbih0aGlzLnJldmlld0NvdW50IC8gbWF4UmV2aWV3cywgMSkgKiAxMDA7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUIwOUNcdUM3NzRcdUIzQzQgXHVCQ0Y0XHVCMTA4XHVDMkE0XG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdHlCb251cyA9IHtcbiAgICAgICAgICAgICdlYXN5JzogMjAsXG4gICAgICAgICAgICAnZ29vZCc6IDEwLFxuICAgICAgICAgICAgJ2hhcmQnOiAwXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTWF0aC5taW4ocHJvZ3Jlc3MgKyBkaWZmaWN1bHR5Qm9udXNbdGhpcy5kaWZmaWN1bHR5XSwgMTAwKTtcbiAgICB9XG5cbiAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDOUMxXHVCODJDXHVENjU0XHVCOTdDIFx1QzcwNFx1RDU1QyBcdUJBNTRcdUMxMUNcdUI0RENcbiAgICB0b1BsYWluT2JqZWN0KCk6IFZvY2FidWxhcnlDYXJkRGF0YSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3b3JkOiB0aGlzLndvcmQsXG4gICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB0aGlzLnByb251bmNpYXRpb24sXG4gICAgICAgICAgICBtZWFuaW5nczogdGhpcy5tZWFuaW5ncyxcbiAgICAgICAgICAgIHNpbWlsYXJXb3JkczogdGhpcy5zaW1pbGFyV29yZHMsXG4gICAgICAgICAgICBleGFtcGxlczogdGhpcy5leGFtcGxlcyxcbiAgICAgICAgICAgIHJldmlld0NvdW50OiB0aGlzLnJldmlld0NvdW50LFxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiB0aGlzLmxhc3RSZXZpZXdlZCxcbiAgICAgICAgICAgIGFkZGVkRGF0ZTogdGhpcy5hZGRlZERhdGUsXG4gICAgICAgICAgICBib29rSWQ6IHRoaXMuYm9va0lkXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gXHVBQzgwXHVDOTlEIFx1Qjg1Q1x1QzlDMVxuICAgIHZhbGlkYXRlKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLndvcmQgfHwgdGhpcy53b3JkLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjRcdUFDMDAgXHVDNzg1XHVCODI1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMubWVhbmluZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVDNzU4IFx1QjczQlx1Qzc3NCBcdUQ1NThcdUIwOTggXHVDNzc0XHVDMEMxIFx1RDU0NFx1QzY5NFx1RDU2OVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLmJvb2tJZCB8fCB0aGlzLmJvb2tJZC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVDN0E1IElEXHVBQzAwIFx1RDU0NFx1QzY5NFx1RDU2OVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9XG5cbiAgICBzdGF0aWMgY3JlYXRlKGRhdGE6IHtcbiAgICAgICAgd29yZDogc3RyaW5nO1xuICAgICAgICBtZWFuaW5nOiBzdHJpbmc7XG4gICAgICAgIHByb251bmNpYXRpb24/OiBzdHJpbmc7XG4gICAgICAgIGV4YW1wbGVzPzogc3RyaW5nW107XG4gICAgICAgIGJvb2tJZD86IHN0cmluZztcbiAgICB9KTogVm9jYWJ1bGFyeUNhcmQge1xuICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlDYXJkKFxuICAgICAgICAgICAgZGF0YS53b3JkLFxuICAgICAgICAgICAgZGF0YS5wcm9udW5jaWF0aW9uIHx8ICcnLFxuICAgICAgICAgICAgW2RhdGEubWVhbmluZ10sIC8vIG1lYW5pbmdzIGFycmF5XG4gICAgICAgICAgICBbXSwgLy8gc2ltaWxhcldvcmRzXG4gICAgICAgICAgICBkYXRhLmV4YW1wbGVzPy5tYXAoZXggPT4gKHsgZW5nbGlzaDogZXgsIGtvcmVhbjogJycgfSkpIHx8IFtdLCAvLyBleGFtcGxlcyB3aXRoIEV4YW1wbGUgdHlwZVxuICAgICAgICAgICAgMCwgLy8gcmV2aWV3Q291bnRcbiAgICAgICAgICAgICdnb29kJywgLy8gZGlmZmljdWx0eVxuICAgICAgICAgICAgbnVsbCwgLy8gbGFzdFJldmlld2VkXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIC8vIGFkZGVkRGF0ZVxuICAgICAgICAgICAgZGF0YS5ib29rSWQgfHwgJ2RlZmF1bHQnXG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vLyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDODA0XHVDMUExXHVDNkE5IFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNCAoXHVBRTMwXHVDODc0IFx1RDYzOFx1RDY1OFx1QzEzMSBcdUM3MjBcdUM5QzApXG5leHBvcnQgaW50ZXJmYWNlIFZvY2FidWxhcnlDYXJkRGF0YSBleHRlbmRzIFdvcmREYXRhIHtcbiAgICByZXZpZXdDb3VudDogbnVtYmVyO1xuICAgIGRpZmZpY3VsdHk6IERpZmZpY3VsdHk7XG4gICAgbGFzdFJldmlld2VkOiBzdHJpbmcgfCBudWxsO1xuICAgIGFkZGVkRGF0ZTogc3RyaW5nO1xuICAgIGJvb2tJZDogc3RyaW5nO1xufVxuXG4vLyBcdUFDODBcdUMwQzkgXHVBQ0IwXHVBQ0ZDIFx1RDBDMFx1Qzc4NVxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hSZXN1bHQge1xuICAgIGNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdO1xuICAgIHRvdGFsQ291bnQ6IG51bWJlcjtcbiAgICBoYXNNb3JlOiBib29sZWFuO1xufSAiLCAiaW1wb3J0IHsgSVZvY2FidWxhcnlSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcG9ydHMvcmVwb3NpdG9yaWVzL0lWb2NhYnVsYXJ5UmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBJQm9va1JlcG9zaXRvcnkgfSBmcm9tICcuLi9wb3J0cy9yZXBvc2l0b3JpZXMvSUJvb2tSZXBvc2l0b3J5JztcbmltcG9ydCB7IElXb3JkU2VydmljZSB9IGZyb20gJy4uL3BvcnRzL3NlcnZpY2VzL0lXb3JkU2VydmljZSc7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCB9IGZyb20gJy4uL2VudGl0aWVzL1ZvY2FidWxhcnknO1xuaW1wb3J0IHsgV29yZEFkZGVkRXZlbnQgfSBmcm9tICcuLi8uLi9zaGFyZWQvbGliL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBBZGRXb3JkUmVxdWVzdCB7XG4gICAgd29yZDogc3RyaW5nO1xuICAgIGJvb2tJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZGRXb3JkUmVzcG9uc2Uge1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgY2FyZD86IFZvY2FidWxhcnlDYXJkO1xuICAgIGVycm9yPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgQWRkV29yZFVzZUNhc2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHZvY2FidWxhcnlSZXBvc2l0b3J5OiBJVm9jYWJ1bGFyeVJlcG9zaXRvcnksXG4gICAgICAgIHByaXZhdGUgYm9va1JlcG9zaXRvcnk6IElCb29rUmVwb3NpdG9yeSxcbiAgICAgICAgcHJpdmF0ZSB3b3JkU2VydmljZTogSVdvcmRTZXJ2aWNlXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgZXhlY3V0ZShyZXF1ZXN0OiBBZGRXb3JkUmVxdWVzdCk6IFByb21pc2U8QWRkV29yZFJlc3BvbnNlPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyAxLiBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXG4gICAgICAgICAgICBpZiAoIXJlcXVlc3Qud29yZCB8fCByZXF1ZXN0LndvcmQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHdvcmQgPSByZXF1ZXN0LndvcmQudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIC8vIDIuIFx1QzkxMVx1QkNGNSBcdUQ2NTVcdUM3NzhcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nV29yZCA9IGF3YWl0IHRoaXMudm9jYWJ1bGFyeVJlcG9zaXRvcnkuZmluZEJ5V29yZCh3b3JkKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1dvcmQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0IFx1QjJFOFx1QzVCNFx1Qzc4NVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gMy4gXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDY1NVx1Qzc3OCBcdUJDMEYgXHVDMTI0XHVDODE1XG4gICAgICAgICAgICBsZXQgYm9va0lkID0gcmVxdWVzdC5ib29rSWQ7XG4gICAgICAgICAgICBpZiAoIWJvb2tJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCb29rID0gYXdhaXQgdGhpcy5ib29rUmVwb3NpdG9yeS5nZXRDdXJyZW50Qm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2tJZCA9IGN1cnJlbnRCb29rPy5pZCB8fCAnZGVmYXVsdCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCB0aGlzLmJvb2tSZXBvc2l0b3J5LmZpbmRCeUlkKGJvb2tJZCk7XG4gICAgICAgICAgICBpZiAoIWJvb2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDQuIFx1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IGF3YWl0IHRoaXMud29yZFNlcnZpY2UuZ2V0V29yZERhdGEod29yZCk7XG5cbiAgICAgICAgICAgIC8vIDUuIFZvY2FidWxhcnlDYXJkIFx1QzBERFx1QzEzMVxuICAgICAgICAgICAgY29uc3Qgdm9jYWJ1bGFyeUNhcmQgPSBWb2NhYnVsYXJ5Q2FyZC5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmREYXRhLndvcmQsXG4gICAgICAgICAgICAgICAgbWVhbmluZzogd29yZERhdGEubWVhbmluZyxcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkRGF0YS5wcm9udW5jaWF0aW9uIHx8ICcnLFxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGF0YS5leGFtcGxlcyB8fCBbXSxcbiAgICAgICAgICAgICAgICBib29rSWQ6IGJvb2tJZFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIDYuIFx1QUM4MFx1Qzk5RFxuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9ycyA9IHZvY2FidWxhcnlDYXJkLnZhbGlkYXRlKCk7XG4gICAgICAgICAgICBpZiAodmFsaWRhdGlvbkVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiB2YWxpZGF0aW9uRXJyb3JzLmpvaW4oJywgJylcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyA3LiBcdUM4MDBcdUM3QTVcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudm9jYWJ1bGFyeVJlcG9zaXRvcnkuYWRkKHZvY2FidWxhcnlDYXJkKTtcblxuICAgICAgICAgICAgLy8gOC4gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERFxuICAgICAgICAgICAgY29uc3QgZXZlbnQ6IFdvcmRBZGRlZEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdXT1JEX0FEREVEJyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IHZvY2FidWxhcnlDYXJkLndvcmQsXG4gICAgICAgICAgICAgICAgICAgIGJvb2tJZDogdm9jYWJ1bGFyeUNhcmQuYm9va0lkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERCAoXHVDMkU0XHVDODFDIFx1QUQ2Q1x1RDYwNFx1QzVEMFx1QzExQ1x1QjI5NCBFdmVudEJ1cyBcdUMwQUNcdUM2QTkpXG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hFdmVudChldmVudCk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjYXJkOiB2b2NhYnVsYXJ5Q2FyZFxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQWRkV29yZFVzZUNhc2UgXHVDMkU0XHVENTg5IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwdWJsaXNoRXZlbnQoZXZlbnQ6IFdvcmRBZGRlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIC8vIFx1Qzc4NFx1QzJEQyBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgRXZlbnRCdXNcdUI4NUMgXHVBRDUwXHVDQ0I0XG4gICAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd3b3JkQWRkZWQnLCB7IGRldGFpbDogZXZlbnQuZGF0YSB9KTtcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XG4gICAgfVxufSAiLCAiLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzVENFx1RDJGMFx1RDJGMFxuZXhwb3J0IGNsYXNzIEJvb2sge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaWQ6IHN0cmluZyxcbiAgICAgICAgcHVibGljIG5hbWU6IHN0cmluZyxcbiAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBjcmVhdGVkQXQ6IHN0cmluZyxcbiAgICAgICAgcHVibGljIHVwZGF0ZWRBdDogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgd29yZENvdW50OiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBpc0RlZmF1bHQ6IGJvb2xlYW5cbiAgICApIHt9XG5cbiAgICAvLyBcdUQzMjlcdUQxQTBcdUI5QUMgXHVCQTU0XHVDMTFDXHVCNERDOiBcdUMwQzggXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMVxuICAgIHN0YXRpYyBjcmVhdGUobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nID0gJycsIGlzRGVmYXVsdDogYm9vbGVhbiA9IGZhbHNlKTogQm9vayB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgaWQgPSBpc0RlZmF1bHQgPyAnZGVmYXVsdCcgOiBCb29rLmdlbmVyYXRlSWQoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbm93LFxuICAgICAgICAgICAgbm93LFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIGlzRGVmYXVsdFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1RDMyOVx1RDFBMFx1QjlBQyBcdUJBNTRcdUMxMUNcdUI0REM6IFx1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxXG4gICAgc3RhdGljIGNyZWF0ZURlZmF1bHQoKTogQm9vayB7XG4gICAgICAgIHJldHVybiBCb29rLmNyZWF0ZSgnXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNScsICdcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzg1XHVCMkM4XHVCMkU0LicsIHRydWUpO1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MTVcdUJDRjQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgdXBkYXRlSW5mbyhuYW1lPzogc3RyaW5nLCBkZXNjcmlwdGlvbj86IHN0cmluZyk6IEJvb2sge1xuICAgICAgICByZXR1cm4gbmV3IEJvb2soXG4gICAgICAgICAgICB0aGlzLmlkLFxuICAgICAgICAgICAgbmFtZSA/PyB0aGlzLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA/PyB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkQXQsXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB0aGlzLndvcmRDb3VudCxcbiAgICAgICAgICAgIHRoaXMuaXNEZWZhdWx0XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0IFx1QzIxOCBcdUM5OURcdUFDMDBcbiAgICBpbmNyZW1lbnRXb3JkQ291bnQoKTogQm9vayB7XG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcbiAgICAgICAgICAgIHRoaXMuaWQsXG4gICAgICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkQXQsXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB0aGlzLndvcmRDb3VudCArIDEsXG4gICAgICAgICAgICB0aGlzLmlzRGVmYXVsdFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVBQzEwXHVDMThDXG4gICAgZGVjcmVtZW50V29yZENvdW50KCk6IEJvb2sge1xuICAgICAgICByZXR1cm4gbmV3IEJvb2soXG4gICAgICAgICAgICB0aGlzLmlkLFxuICAgICAgICAgICAgdGhpcy5uYW1lLFxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZEF0LFxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgTWF0aC5tYXgoMCwgdGhpcy53b3JkQ291bnQgLSAxKSxcbiAgICAgICAgICAgIHRoaXMuaXNEZWZhdWx0XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0IFx1QzIxOCBcdUM3QUNcdUMxMjRcdUM4MTVcbiAgICB1cGRhdGVXb3JkQ291bnQoY291bnQ6IG51bWJlcik6IEJvb2sge1xuICAgICAgICByZXR1cm4gbmV3IEJvb2soXG4gICAgICAgICAgICB0aGlzLmlkLFxuICAgICAgICAgICAgdGhpcy5uYW1lLFxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZEF0LFxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgTWF0aC5tYXgoMCwgY291bnQpLFxuICAgICAgICAgICAgdGhpcy5pc0RlZmF1bHRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUMwQURcdUM4MUMgXHVBQzAwXHVCMkE1IFx1QzVFQ1x1QkQ4MCBcdUQ2NTVcdUM3NzhcbiAgICBjYW5CZURlbGV0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pc0RlZmF1bHQ7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QkU0NFx1QzVCNFx1Qzc4OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcbiAgICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy53b3JkQ291bnQgPT09IDA7XG4gICAgfVxuXG4gICAgLy8gXHVBQzgwXHVDOTlEIFx1Qjg1Q1x1QzlDMVxuICAgIHZhbGlkYXRlKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLm5hbWUgfHwgdGhpcy5uYW1lLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU2OVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMubmFtZS50cmltKCkubGVuZ3RoID4gMTAwKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc0MCAxMDBcdUM3OTBcdUI5N0MgXHVDRDA4XHVBQ0ZDXHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDUwMCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjRcdUJBODVcdUM3NDAgNTAwXHVDNzkwXHVCOTdDIFx1Q0QwOFx1QUNGQ1x1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy53b3JkQ291bnQgPCAwKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0IFx1QzIxOFx1QjI5NCAwIFx1Qzc3NFx1QzBDMVx1Qzc3NFx1QzVCNFx1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxuXG4gICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzlDMVx1QjgyQ1x1RDY1NFx1Qjk3QyBcdUM3MDRcdUQ1NUMgXHVCQTU0XHVDMTFDXHVCNERDXG4gICAgdG9QbGFpbk9iamVjdCgpOiBCb29rRGF0YSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdGhpcy5pZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiB0aGlzLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogdGhpcy51cGRhdGVkQXQsXG4gICAgICAgICAgICB3b3JkQ291bnQ6IHRoaXMud29yZENvdW50LFxuICAgICAgICAgICAgaXNEZWZhdWx0OiB0aGlzLmlzRGVmYXVsdFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QzBERFx1QzEzMVx1Qzc3Q1x1Qjg1Q1x1QkQ4MFx1RDEzMCBcdUFDQkRcdUFDRkMgXHVDNzdDXHVDMjE4IFx1QUNDNFx1QzBCMFxuICAgIGdldERheXNGcm9tQ3JlYXRpb24oKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgY3JlYXRlZERhdGUgPSBuZXcgRGF0ZSh0aGlzLmNyZWF0ZWRBdCk7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKChub3cuZ2V0VGltZSgpIC0gY3JlYXRlZERhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFx1Qjg1Q1x1QkQ4MFx1RDEzMCBcdUFDQkRcdUFDRkMgXHVDNzdDXHVDMjE4IFx1QUNDNFx1QzBCMFxuICAgIGdldERheXNGcm9tTGFzdFVwZGF0ZSgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCB1cGRhdGVkRGF0ZSA9IG5ldyBEYXRlKHRoaXMudXBkYXRlZEF0KTtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKG5vdy5nZXRUaW1lKCkgLSB1cGRhdGVkRGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgICB9XG5cbiAgICAvLyBJRCBcdUMwRERcdUMxMzEgXHVDNzIwXHVEMkY4XHVCOUFDXHVEMkYwXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYGJvb2tfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICAgIH1cbn1cblxuLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwNFx1QzFBMVx1QzZBOSBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTQgKFx1QUUzMFx1Qzg3NCBcdUQ2MzhcdUQ2NThcdUMxMzEgXHVDNzIwXHVDOUMwKVxuZXhwb3J0IGludGVyZmFjZSBCb29rRGF0YSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBjcmVhdGVkQXQ6IHN0cmluZztcbiAgICB1cGRhdGVkQXQ6IHN0cmluZztcbiAgICB3b3JkQ291bnQ6IG51bWJlcjtcbiAgICBpc0RlZmF1bHQ6IGJvb2xlYW47XG59XG5cbi8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQxQjVcdUFDQzQgXHVDNzc4XHVEMTMwXHVEMzk4XHVDNzc0XHVDMkE0XG5leHBvcnQgaW50ZXJmYWNlIEJvb2tTdGF0aXN0aWNzIHtcbiAgICBib29rOiBCb29rO1xuICAgIHRvdGFsV29yZHM6IG51bWJlcjtcbiAgICB3b3Jkc0J5RGlmZmljdWx0eToge1xuICAgICAgICBlYXN5OiBudW1iZXI7XG4gICAgICAgIGdvb2Q6IG51bWJlcjtcbiAgICAgICAgaGFyZDogbnVtYmVyO1xuICAgIH07XG4gICAgYXZlcmFnZVJldmlld0NvdW50OiBudW1iZXI7XG4gICAgbGFzdEFjdGl2aXR5RGF0ZTogc3RyaW5nIHwgbnVsbDtcbiAgICBjb21wbGV0aW9uUGVyY2VudGFnZTogbnVtYmVyO1xufVxuXG4vLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVCQUE5XHVCODVEIFx1QzYzNVx1QzE1OFxuZXhwb3J0IGludGVyZmFjZSBCb29rTGlzdE9wdGlvbnMge1xuICAgIGluY2x1ZGVFbXB0eT86IGJvb2xlYW47XG4gICAgc29ydEJ5PzogJ25hbWUnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0JyB8ICd3b3JkQ291bnQnO1xuICAgIHNvcnRPcmRlcj86ICdhc2MnIHwgJ2Rlc2MnO1xuICAgIGxpbWl0PzogbnVtYmVyO1xuICAgIG9mZnNldD86IG51bWJlcjtcbn0gIiwgImltcG9ydCB7IElCb29rUmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL3JlcG9zaXRvcmllcy9JQm9va1JlcG9zaXRvcnknO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gJy4uL2VudGl0aWVzL0Jvb2snO1xuaW1wb3J0IHsgQm9va0NyZWF0ZWRFdmVudCB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWIvdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUJvb2tSZXF1ZXN0IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlQm9va1Jlc3BvbnNlIHtcbiAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgIGJvb2s/OiBCb29rO1xuICAgIGVycm9yPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgQ3JlYXRlQm9va1VzZUNhc2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGJvb2tSZXBvc2l0b3J5OiBJQm9va1JlcG9zaXRvcnlcbiAgICApIHt9XG5cbiAgICBhc3luYyBleGVjdXRlKHJlcXVlc3Q6IENyZWF0ZUJvb2tSZXF1ZXN0KTogUHJvbWlzZTxDcmVhdGVCb29rUmVzcG9uc2U+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIDEuIFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OURcbiAgICAgICAgICAgIGlmICghcmVxdWVzdC5uYW1lIHx8IHJlcXVlc3QubmFtZS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSByZXF1ZXN0Lm5hbWUudHJpbSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyAyLiBcdUM3NzRcdUI5ODQgXHVDOTExXHVCQ0Y1IFx1RDY1NVx1Qzc3OFxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdCb29rcyA9IGF3YWl0IHRoaXMuYm9va1JlcG9zaXRvcnkuZmluZEFsbCgpO1xuICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlQm9vayA9IGV4aXN0aW5nQm9va3MuZmluZChib29rID0+IFxuICAgICAgICAgICAgICAgIGJvb2submFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChkdXBsaWNhdGVCb29rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzg1XHVCMkM4XHVCMkU0LidcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAzLiBCb29rIFx1QzVENFx1RDJGMFx1RDJGMCBcdUMwRERcdUMxMzFcbiAgICAgICAgICAgIGNvbnN0IGJvb2sgPSBCb29rLmNyZWF0ZShcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuZGVzY3JpcHRpb24gfHwgJydcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIDQuIFx1QUM4MFx1Qzk5RFxuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9ycyA9IGJvb2sudmFsaWRhdGUoKTtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHZhbGlkYXRpb25FcnJvcnMuam9pbignLCAnKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDUuIFx1QzgwMFx1QzdBNVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ib29rUmVwb3NpdG9yeS5hZGQoYm9vayk7XG5cbiAgICAgICAgICAgIC8vIDYuIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUJDMUNcdUMwRERcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50OiBCb29rQ3JlYXRlZEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdCT09LX0NSRUFURUQnLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgYm9va0lkOiBib29rLmlkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBib29rLm5hbWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hFdmVudChldmVudCk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBib29rOiBib29rXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDcmVhdGVCb29rVXNlQ2FzZSBcdUMyRTRcdUQ1ODkgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LidcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHB1Ymxpc2hFdmVudChldmVudDogQm9va0NyZWF0ZWRFdmVudCk6IHZvaWQge1xuICAgICAgICAvLyBcdUM3ODRcdUMyREMgXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIEV2ZW50QnVzXHVCODVDIFx1QUQ1MFx1Q0NCNFxuICAgICAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnYm9va0NyZWF0ZWQnLCB7IGRldGFpbDogZXZlbnQuZGF0YSB9KTtcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XG4gICAgfVxufSAiLCAiaW1wb3J0IHsgSVZvY2FidWxhcnlSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcG9ydHMvSVZvY2FidWxhcnlSZXBvc2l0b3J5JztcbmltcG9ydCB7IElCb29rUmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL0lCb29rUmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCB9IGZyb20gJy4uL2VudGl0aWVzL1ZvY2FidWxhcnknO1xuXG5leHBvcnQgaW50ZXJmYWNlIEdldFdvcmRzRm9yUmV2aWV3UmVxdWVzdCB7XG4gICAgYm9va0lkPzogc3RyaW5nO1xuICAgIGxpbWl0PzogbnVtYmVyO1xuICAgIHJldmlld0ludGVydmFsPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdldFdvcmRzRm9yUmV2aWV3UmVzcG9uc2Uge1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgd29yZHM/OiBWb2NhYnVsYXJ5Q2FyZFtdO1xuICAgIHRvdGFsQ291bnQ/OiBudW1iZXI7XG4gICAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBHZXRXb3Jkc0ZvclJldmlld1VzZUNhc2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHZvY2FidWxhcnlSZXBvc2l0b3J5OiBJVm9jYWJ1bGFyeVJlcG9zaXRvcnksXG4gICAgICAgIHByaXZhdGUgYm9va1JlcG9zaXRvcnk6IElCb29rUmVwb3NpdG9yeVxuICAgICkge31cblxuICAgIGFzeW5jIGV4ZWN1dGUocmVxdWVzdDogR2V0V29yZHNGb3JSZXZpZXdSZXF1ZXN0ID0ge30pOiBQcm9taXNlPEdldFdvcmRzRm9yUmV2aWV3UmVzcG9uc2U+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIDEuIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjRcdUM4MTVcbiAgICAgICAgICAgIGxldCBib29rSWQgPSByZXF1ZXN0LmJvb2tJZDtcbiAgICAgICAgICAgIGlmICghYm9va0lkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEJvb2sgPSBhd2FpdCB0aGlzLmJvb2tSZXBvc2l0b3J5LmdldEN1cnJlbnRCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9va0lkID0gY3VycmVudEJvb2s/LmlkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAyLiBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4Q1xuICAgICAgICAgICAgY29uc3QgYWxsV29yZHMgPSBhd2FpdCB0aGlzLnZvY2FidWxhcnlSZXBvc2l0b3J5LmZpbmRCeUJvb2tJZChib29rSWQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWxsV29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd29yZHM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50OiAwXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gMy4gXHVCQ0Y1XHVDMkI1XHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU1QyBcdUIyRThcdUM1QjQgXHVENTQ0XHVEMTMwXHVCOUMxXG4gICAgICAgICAgICBjb25zdCByZXZpZXdJbnRlcnZhbCA9IHJlcXVlc3QucmV2aWV3SW50ZXJ2YWwgfHwgMTtcbiAgICAgICAgICAgIGNvbnN0IHdvcmRzTmVlZGluZ1JldmlldyA9IGFsbFdvcmRzLmZpbHRlcih3b3JkID0+IFxuICAgICAgICAgICAgICAgIHdvcmQubmVlZHNSZXZpZXcocmV2aWV3SW50ZXJ2YWwpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyA0LiBcdUM4MTVcdUI4MkMgKFx1QzZCMFx1QzEyMFx1QzIxQ1x1QzcwNDogXHVDNjI0XHVCNzk4XHVCNDFDIFx1QkNGNVx1QzJCNSA+IFx1QzVCNFx1QjgyNFx1QzZCNCBcdUIyRThcdUM1QjQgPiBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4IFx1QzgwMVx1Qzc0MCBcdUIyRThcdUM1QjQpXG4gICAgICAgICAgICB3b3Jkc05lZWRpbmdSZXZpZXcuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIDFcdUMyMUNcdUM3MDQ6IFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDRjVcdUMyQjVcdUM3N0MgKFx1QzYyNFx1Qjc5OFx1QjQxQyBcdUFDODNcdUJEODBcdUQxMzApXG4gICAgICAgICAgICAgICAgaWYgKGEubGFzdFJldmlld2VkICYmIGIubGFzdFJldmlld2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFEYXRlID0gbmV3IERhdGUoYS5sYXN0UmV2aWV3ZWQpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYkRhdGUgPSBuZXcgRGF0ZShiLmxhc3RSZXZpZXdlZCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYURhdGUgIT09IGJEYXRlKSByZXR1cm4gYURhdGUgLSBiRGF0ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEubGFzdFJldmlld2VkICYmICFiLmxhc3RSZXZpZXdlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYS5sYXN0UmV2aWV3ZWQgJiYgYi5sYXN0UmV2aWV3ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gMlx1QzIxQ1x1QzcwNDogXHVCMDlDXHVDNzc0XHVCM0M0IChcdUM1QjRcdUI4MjRcdUM2QjQgXHVBQzgzXHVCRDgwXHVEMTMwKVxuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmZpY3VsdHlPcmRlciA9IHsgJ2hhcmQnOiAzLCAnZ29vZCc6IDIsICdlYXN5JzogMSB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmZpY3VsdHlEaWZmID0gZGlmZmljdWx0eU9yZGVyW2IuZGlmZmljdWx0eV0gLSBkaWZmaWN1bHR5T3JkZXJbYS5kaWZmaWN1bHR5XTtcbiAgICAgICAgICAgICAgICBpZiAoZGlmZmljdWx0eURpZmYgIT09IDApIHJldHVybiBkaWZmaWN1bHR5RGlmZjtcblxuICAgICAgICAgICAgICAgIC8vIDNcdUMyMUNcdUM3MDQ6IFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTggKFx1QzgwMVx1Qzc0MCBcdUFDODNcdUJEODBcdUQxMzApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEucmV2aWV3Q291bnQgLSBiLnJldmlld0NvdW50O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIDUuIFx1QzgxQ1x1RDU1QyBcdUM4MDFcdUM2QTlcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0ID0gcmVxdWVzdC5saW1pdCB8fCAyMDtcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0ZWRXb3JkcyA9IHdvcmRzTmVlZGluZ1Jldmlldy5zbGljZSgwLCBsaW1pdCk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3b3JkczogbGltaXRlZFdvcmRzLFxuICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IHdvcmRzTmVlZGluZ1Jldmlldy5sZW5ndGhcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dldFdvcmRzRm9yUmV2aWV3VXNlQ2FzZSBcdUMyRTRcdUQ1ODkgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LidcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59ICIsICJpbXBvcnQgeyBJVm9jYWJ1bGFyeVJlcG9zaXRvcnkgfSBmcm9tICcuLi9wb3J0cy9JVm9jYWJ1bGFyeVJlcG9zaXRvcnknO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuLi9lbnRpdGllcy9Wb2NhYnVsYXJ5JztcbmltcG9ydCB7IERpZmZpY3VsdHksIFdvcmRSZXZpZXdlZEV2ZW50IH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV2aWV3V29yZFJlcXVlc3Qge1xuICAgIHdvcmQ6IHN0cmluZztcbiAgICBkaWZmaWN1bHR5OiBEaWZmaWN1bHR5O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1dvcmRSZXNwb25zZSB7XG4gICAgc3VjY2VzczogYm9vbGVhbjtcbiAgICBjYXJkPzogVm9jYWJ1bGFyeUNhcmQ7XG4gICAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBSZXZpZXdXb3JkVXNlQ2FzZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgdm9jYWJ1bGFyeVJlcG9zaXRvcnk6IElWb2NhYnVsYXJ5UmVwb3NpdG9yeVxuICAgICkge31cblxuICAgIGFzeW5jIGV4ZWN1dGUocmVxdWVzdDogUmV2aWV3V29yZFJlcXVlc3QpOiBQcm9taXNlPFJldmlld1dvcmRSZXNwb25zZT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gMS4gXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RFxuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0LndvcmQgfHwgcmVxdWVzdC53b3JkLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LidcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIVsnZWFzeScsICdnb29kJywgJ2hhcmQnXS5pbmNsdWRlcyhyZXF1ZXN0LmRpZmZpY3VsdHkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVDNjJDXHVCQzE0XHVCOTc4IFx1QjA5Q1x1Qzc3NFx1QjNDNFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDIuIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OENcbiAgICAgICAgICAgIGNvbnN0IHdvcmQgPSByZXF1ZXN0LndvcmQudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0NhcmQgPSBhd2FpdCB0aGlzLnZvY2FidWxhcnlSZXBvc2l0b3J5LmZpbmRCeVdvcmQod29yZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdDYXJkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LidcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAzLiBcdUJDRjVcdUMyQjUgXHVDMjE4XHVENTg5IChcdUM1RDRcdUQyRjBcdUQyRjBcdUM3NTggXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMSBcdUQ2NUNcdUM2QTkpXG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c0RpZmZpY3VsdHkgPSBleGlzdGluZ0NhcmQuZGlmZmljdWx0eTtcbiAgICAgICAgICAgIGNvbnN0IHJldmlld2VkQ2FyZCA9IGV4aXN0aW5nQ2FyZC5yZXZpZXcocmVxdWVzdC5kaWZmaWN1bHR5KTtcblxuICAgICAgICAgICAgLy8gNC4gXHVDODAwXHVDN0E1XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZvY2FidWxhcnlSZXBvc2l0b3J5LnVwZGF0ZShyZXZpZXdlZENhcmQpO1xuXG4gICAgICAgICAgICAvLyA1LiBcdUM3NzRcdUJDQTRcdUQyQjggXHVCQzFDXHVDMEREXG4gICAgICAgICAgICBjb25zdCBldmVudDogV29yZFJldmlld2VkRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ1dPUkRfUkVWSUVXRUQnLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgd29yZDogcmV2aWV3ZWRDYXJkLndvcmQsXG4gICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IHJlcXVlc3QuZGlmZmljdWx0eSxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNEaWZmaWN1bHR5OiBwcmV2aW91c0RpZmZpY3VsdHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hFdmVudChldmVudCk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjYXJkOiByZXZpZXdlZENhcmRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Jldmlld1dvcmRVc2VDYXNlIFx1QzJFNFx1RDU4OSBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcHVibGlzaEV2ZW50KGV2ZW50OiBXb3JkUmV2aWV3ZWRFdmVudCk6IHZvaWQge1xuICAgICAgICAvLyBcdUM3ODRcdUMyREMgXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIEV2ZW50QnVzXHVCODVDIFx1QUQ1MFx1Q0NCNFxuICAgICAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnd29yZFJldmlld2VkJywgeyBkZXRhaWw6IGV2ZW50LmRhdGEgfSk7XG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xuICAgIH1cbn0gIiwgImltcG9ydCB7IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvcG9ydHMvcmVwb3NpdG9yaWVzL0lWb2NhYnVsYXJ5UmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCwgU2VhcmNoUmVzdWx0IH0gZnJvbSAnLi4vLi4vLi4vY29yZS9lbnRpdGllcy9Wb2NhYnVsYXJ5JztcbmltcG9ydCB7IFNlYXJjaE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvbGliL3R5cGVzJztcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5UmVwb3NpdG9yeUFkYXB0ZXIgaW1wbGVtZW50cyBJVm9jYWJ1bGFyeVJlcG9zaXRvcnkge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0YWJhc2VNYW5hZ2VyOiBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyKSB7fVxuXG4gICAgYXN5bmMgYWRkKGNhcmQ6IFZvY2FidWxhcnlDYXJkKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQoY2FyZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZShjYXJkOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5hZGRXb3JkKGNhcmQpO1xuICAgIH1cblxuICAgIGFzeW5jIGZpbmRCeVdvcmQod29yZDogc3RyaW5nKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZCB8IG51bGw+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmQod29yZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZmluZEFsbCgpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkW10+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZmluZEJ5Qm9va0lkKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZFtdPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRXb3Jkc0J5Qm9vayhib29rSWQpO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZSh3b3JkOiBzdHJpbmcsIGNhcmQ6IFZvY2FidWxhcnlDYXJkKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmQod29yZCwgY2FyZC5kaWZmaWN1bHR5KTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWxldGUod29yZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnJlbW92ZVdvcmQod29yZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2VhcmNoKG9wdGlvbnM6IFNlYXJjaE9wdGlvbnMpOiBQcm9taXNlPFNlYXJjaFJlc3VsdD4ge1xuICAgICAgICBjb25zdCBhbGxXb3JkcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xuICAgICAgICAvLyBcdUFFMzBcdUJDRjhcdUM4MDFcdUM3NzggXHVBQzgwXHVDMEM5IFx1QUQ2Q1x1RDYwNCAtIFx1QjA5OFx1QzkxMVx1QzVEMCBcdUFDRTBcdUIzQzRcdUQ2NTQgXHVBQzAwXHVCMkE1XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkV29yZHMgPSBhbGxXb3Jkcy5maWx0ZXIod29yZCA9PiBcbiAgICAgICAgICAgIHdvcmQud29yZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG9wdGlvbnMucXVlcnk/LnRvTG93ZXJDYXNlKCkgfHwgJycpXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd29yZHM6IGZpbHRlcmVkV29yZHMsXG4gICAgICAgICAgICB0b3RhbDogZmlsdGVyZWRXb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICBoYXNNb3JlOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIHNlYXJjaEJ5VGV4dChxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZFtdPiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2VhcmNoKHsgcXVlcnkgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQud29yZHM7XG4gICAgfVxuXG4gICAgYXN5bmMgZmluZENhcmRzRm9yUmV2aWV3KGJvb2tJZD86IHN0cmluZyk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmRbXT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZHNGb3JSZXZpZXcoYm9va0lkKTtcbiAgICB9XG5cbiAgICBhc3luYyBmaW5kQ2FyZHNCeURpZmZpY3VsdHkoZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnLCBib29rSWQ/OiBzdHJpbmcpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkW10+IHtcbiAgICAgICAgY29uc3Qgd29yZHMgPSBib29rSWQgPyBcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZmluZEJ5Qm9va0lkKGJvb2tJZCkgOiBcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZmluZEFsbCgpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHdvcmRzLmZpbHRlcih3b3JkID0+IHdvcmQuZGlmZmljdWx0eSA9PT0gZGlmZmljdWx0eSk7XG4gICAgfVxuXG4gICAgYXN5bmMgY291bnQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgY29uc3Qgd29yZHMgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcbiAgICAgICAgcmV0dXJuIHdvcmRzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBhc3luYyBjb3VudEJ5Qm9va0lkKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgY29uc3Qgd29yZHMgPSBhd2FpdCB0aGlzLmZpbmRCeUJvb2tJZChib29rSWQpO1xuICAgICAgICByZXR1cm4gd29yZHMubGVuZ3RoO1xuICAgIH1cblxuICAgIGFzeW5jIGNvdW50QnlEaWZmaWN1bHR5KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgICAgIGNvbnN0IHdvcmRzID0gYXdhaXQgdGhpcy5maW5kQ2FyZHNCeURpZmZpY3VsdHkoZGlmZmljdWx0eSk7XG4gICAgICAgIHJldHVybiB3b3Jkcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZU1hbnkoY2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgZm9yIChjb25zdCBjYXJkIG9mIGNhcmRzKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZChjYXJkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZU1hbnkod29yZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxldGUod29yZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBsb2FkRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZURhdGEoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNhdmVBbGxEYXRhKCk7XG4gICAgfVxuXG4gICAgb25EYXRhQ2hhbmdlZChjYWxsYmFjazogKGNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIEV2ZW50RW1pdHRlciBcdUQzMjhcdUQxMzRcdUM3M0NcdUI4NUMgXHVBRDZDXHVENjA0XG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XG4gICAgfVxuXG4gICAgb2ZmRGF0YUNoYW5nZWQoY2FsbGJhY2s6IChjYXJkczogVm9jYWJ1bGFyeUNhcmRbXSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzgxQ1x1QUM3MCBcdUFENkNcdUQ2MDRcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcbiAgICB9XG59IiwgImltcG9ydCB7IElCb29rUmVwb3NpdG9yeSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvcG9ydHMvcmVwb3NpdG9yaWVzL0lCb29rUmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBCb29rLCBCb29rU3RhdGlzdGljcywgQm9va0xpc3RPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9lbnRpdGllcy9Cb29rJztcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBCb29rUmVwb3NpdG9yeUFkYXB0ZXIgaW1wbGVtZW50cyBJQm9va1JlcG9zaXRvcnkge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0YWJhc2VNYW5hZ2VyOiBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyKSB7fVxuXG4gICAgYXN5bmMgYWRkKGJvb2s6IEJvb2spOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuY3JlYXRlQm9vayhib29rLnRvUGxhaW5PYmplY3QoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZShib29rOiBCb29rKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmNyZWF0ZUJvb2soYm9vay50b1BsYWluT2JqZWN0KCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGZpbmRCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPEJvb2sgfCBudWxsPiB7XG4gICAgICAgIGNvbnN0IGJvb2tEYXRhID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0Qm9vayhpZCk7XG4gICAgICAgIGlmICghYm9va0RhdGEpIHJldHVybiBudWxsO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxuICAgICAgICAgICAgYm9va0RhdGEuaWQsXG4gICAgICAgICAgICBib29rRGF0YS5uYW1lLFxuICAgICAgICAgICAgYm9va0RhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBib29rRGF0YS5jcmVhdGVkQXQsXG4gICAgICAgICAgICBib29rRGF0YS51cGRhdGVkQXQsXG4gICAgICAgICAgICBib29rRGF0YS53b3JkQ291bnQsXG4gICAgICAgICAgICBib29rRGF0YS5pc0RlZmF1bHRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyBmaW5kQWxsKG9wdGlvbnM/OiBCb29rTGlzdE9wdGlvbnMpOiBQcm9taXNlPEJvb2tbXT4ge1xuICAgICAgICBjb25zdCBib29rc0RhdGEgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xuICAgICAgICBsZXQgYm9va3MgPSBib29rc0RhdGEubWFwKGJvb2tEYXRhID0+IG5ldyBCb29rKFxuICAgICAgICAgICAgYm9va0RhdGEuaWQsXG4gICAgICAgICAgICBib29rRGF0YS5uYW1lLFxuICAgICAgICAgICAgYm9va0RhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBib29rRGF0YS5jcmVhdGVkQXQsXG4gICAgICAgICAgICBib29rRGF0YS51cGRhdGVkQXQsXG4gICAgICAgICAgICBib29rRGF0YS53b3JkQ291bnQsXG4gICAgICAgICAgICBib29rRGF0YS5pc0RlZmF1bHRcbiAgICAgICAgKSk7XG5cbiAgICAgICAgLy8gXHVDNjM1XHVDMTU4XHVDNUQwIFx1QjUzMFx1Qjk3OCBcdUQ1NDRcdUQxMzBcdUI5QzFcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVFbXB0eSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBib29rcyA9IGJvb2tzLmZpbHRlcihib29rID0+ICFib29rLmlzRW1wdHkoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1QzgxNVx1QjgyQ1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc29ydEJ5KSB7XG4gICAgICAgICAgICAgICAgYm9va3Muc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhVmFsdWUgPSBhW29wdGlvbnMuc29ydEJ5IV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJWYWx1ZSA9IGJbb3B0aW9ucy5zb3J0QnkhXTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYVZhbHVlID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgYlZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuc29ydE9yZGVyID09PSAnZGVzYycgPyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiVmFsdWUubG9jYWxlQ29tcGFyZShhVmFsdWUpIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLmxvY2FsZUNvbXBhcmUoYlZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhVmFsdWUgPT09ICdudW1iZXInICYmIHR5cGVvZiBiVmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5zb3J0T3JkZXIgPT09ICdkZXNjJyA/IGJWYWx1ZSAtIGFWYWx1ZSA6IGFWYWx1ZSAtIGJWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1RDM5OFx1Qzc3NFx1QzlDMFx1QjEyNFx1Qzc3NFx1QzE1OFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMub2Zmc2V0IHx8IG9wdGlvbnMubGltaXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IG9wdGlvbnMub2Zmc2V0IHx8IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gb3B0aW9ucy5saW1pdCA/IHN0YXJ0ICsgb3B0aW9ucy5saW1pdCA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBib29rcyA9IGJvb2tzLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJvb2tzO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZShpZDogc3RyaW5nLCBib29rOiBCb29rKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZUJvb2soaWQsIGJvb2sudG9QbGFpbk9iamVjdCgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWxldGUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5kZWxldGVCb29rKGlkKTtcbiAgICB9XG5cbiAgICBhc3luYyBmaW5kRGVmYXVsdCgpOiBQcm9taXNlPEJvb2sgfCBudWxsPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRCeUlkKCdkZWZhdWx0Jyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZmluZEJ5TmFtZShuYW1lOiBzdHJpbmcpOiBQcm9taXNlPEJvb2sgfCBudWxsPiB7XG4gICAgICAgIGNvbnN0IGJvb2tzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XG4gICAgICAgIHJldHVybiBib29rcy5maW5kKGJvb2sgPT4gYm9vay5uYW1lID09PSBuYW1lKSB8fCBudWxsO1xuICAgIH1cblxuICAgIGFzeW5jIGV4aXN0cyhpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCB0aGlzLmZpbmRCeUlkKGlkKTtcbiAgICAgICAgcmV0dXJuIGJvb2sgIT09IG51bGw7XG4gICAgfVxuXG4gICAgYXN5bmMgY291bnQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgY29uc3QgYm9va3MgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcbiAgICAgICAgcmV0dXJuIGJvb2tzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRTdGF0aXN0aWNzKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTxCb29rU3RhdGlzdGljcyB8IG51bGw+IHtcbiAgICAgICAgY29uc3QgYm9vayA9IGF3YWl0IHRoaXMuZmluZEJ5SWQoYm9va0lkKTtcbiAgICAgICAgaWYgKCFib29rKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBjb25zdCB3b3JkcyA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmRzQnlCb29rKGJvb2tJZCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB3b3Jkc0J5RGlmZmljdWx0eSA9IHtcbiAgICAgICAgICAgIGVhc3k6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2Vhc3knKS5sZW5ndGgsXG4gICAgICAgICAgICBnb29kOiB3b3Jkcy5maWx0ZXIodyA9PiB3LmRpZmZpY3VsdHkgPT09ICdnb29kJykubGVuZ3RoLFxuICAgICAgICAgICAgaGFyZDogd29yZHMuZmlsdGVyKHcgPT4gdy5kaWZmaWN1bHR5ID09PSAnaGFyZCcpLmxlbmd0aFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHRvdGFsUmV2aWV3cyA9IHdvcmRzLnJlZHVjZSgoc3VtLCB3b3JkKSA9PiBzdW0gKyB3b3JkLnJldmlld0NvdW50LCAwKTtcbiAgICAgICAgY29uc3QgYXZlcmFnZVJldmlld0NvdW50ID0gd29yZHMubGVuZ3RoID4gMCA/IHRvdGFsUmV2aWV3cyAvIHdvcmRzLmxlbmd0aCA6IDA7XG5cbiAgICAgICAgY29uc3QgbGFzdEFjdGl2aXR5RGF0ZSA9IHdvcmRzLmxlbmd0aCA+IDAgPyBcbiAgICAgICAgICAgIE1hdGgubWF4KC4uLndvcmRzLm1hcCh3ID0+IG5ldyBEYXRlKHcubGFzdFJldmlld2VkIHx8IHcuYWRkZWREYXRlKS5nZXRUaW1lKCkpKSA6XG4gICAgICAgICAgICBudWxsO1xuXG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25QZXJjZW50YWdlID0gd29yZHMubGVuZ3RoID4gMCA/XG4gICAgICAgICAgICAod29yZHNCeURpZmZpY3VsdHkuZWFzeSAvIHdvcmRzLmxlbmd0aCkgKiAxMDAgOiAwO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBib29rLFxuICAgICAgICAgICAgdG90YWxXb3Jkczogd29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgd29yZHNCeURpZmZpY3VsdHksXG4gICAgICAgICAgICBhdmVyYWdlUmV2aWV3Q291bnQsXG4gICAgICAgICAgICBsYXN0QWN0aXZpdHlEYXRlOiBsYXN0QWN0aXZpdHlEYXRlID8gbmV3IERhdGUobGFzdEFjdGl2aXR5RGF0ZSkudG9JU09TdHJpbmcoKSA6IG51bGwsXG4gICAgICAgICAgICBjb21wbGV0aW9uUGVyY2VudGFnZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFsbFN0YXRpc3RpY3MoKTogUHJvbWlzZTxCb29rU3RhdGlzdGljc1tdPiB7XG4gICAgICAgIGNvbnN0IGJvb2tzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XG4gICAgICAgIGNvbnN0IHN0YXRpc3RpY3M6IEJvb2tTdGF0aXN0aWNzW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgYm9vayBvZiBib29rcykge1xuICAgICAgICAgICAgY29uc3Qgc3RhdCA9IGF3YWl0IHRoaXMuZ2V0U3RhdGlzdGljcyhib29rLmlkKTtcbiAgICAgICAgICAgIGlmIChzdGF0KSB7XG4gICAgICAgICAgICAgICAgc3RhdGlzdGljcy5wdXNoKHN0YXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc3RhdGlzdGljcztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRDdXJyZW50Qm9vaygpOiBQcm9taXNlPEJvb2sgfCBudWxsPiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRCb29rID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0Q3VycmVudEJvb2soKTtcbiAgICAgICAgaWYgKCFjdXJyZW50Qm9vaykgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxuICAgICAgICAgICAgY3VycmVudEJvb2suaWQsXG4gICAgICAgICAgICBjdXJyZW50Qm9vay5uYW1lLFxuICAgICAgICAgICAgY3VycmVudEJvb2suZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBjdXJyZW50Qm9vay5jcmVhdGVkQXQsXG4gICAgICAgICAgICBjdXJyZW50Qm9vay51cGRhdGVkQXQsXG4gICAgICAgICAgICBjdXJyZW50Qm9vay53b3JkQ291bnQsXG4gICAgICAgICAgICBjdXJyZW50Qm9vay5pc0RlZmF1bHRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZXRDdXJyZW50Qm9vayhib29rSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5zZXRDdXJyZW50Qm9vayhib29rSWQpO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWREYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2F2ZUFsbERhdGEoKTtcbiAgICB9XG5cbiAgICBhc3luYyB2YWxpZGF0ZUJvb2tOYW1lKG5hbWU6IHN0cmluZywgZXhjbHVkZUlkPzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IGJvb2tzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XG4gICAgICAgIHJldHVybiAhYm9va3Muc29tZShib29rID0+IFxuICAgICAgICAgICAgYm9vay5uYW1lID09PSBuYW1lICYmIFxuICAgICAgICAgICAgKCFleGNsdWRlSWQgfHwgYm9vay5pZCAhPT0gZXhjbHVkZUlkKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIG9uRGF0YUNoYW5nZWQoY2FsbGJhY2s6IChib29rczogQm9va1tdKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIEV2ZW50RW1pdHRlciBcdUQzMjhcdUQxMzRcdUM3M0NcdUI4NUMgXHVBRDZDXHVENjA0XG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XG4gICAgfVxuXG4gICAgb2ZmRGF0YUNoYW5nZWQoY2FsbGJhY2s6IChib29rczogQm9va1tdKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwIFx1QUQ2Q1x1RDYwNFxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxuICAgIH1cblxuICAgIG9uQ3VycmVudEJvb2tDaGFuZ2VkKGNhbGxiYWNrOiAoYm9vazogQm9vayB8IG51bGwpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUJDQzBcdUFDQkQgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOFxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxuICAgIH1cblxuICAgIG9mZkN1cnJlbnRCb29rQ2hhbmdlZChjYWxsYmFjazogKGJvb2s6IEJvb2sgfCBudWxsKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0MwXHVBQ0JEIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XG4gICAgfVxufSIsICJpbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCwgQm9vayB9IGZyb20gJy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIG5vcm1hbGl6ZVBhdGggfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGF0YWJhc2VEYXRhIHtcbiAgICBib29rczogQm9va1tdO1xuICAgIHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdO1xuICAgIHNldHRpbmdzOiB7XG4gICAgICAgIGRhaWx5R29hbDogbnVtYmVyO1xuICAgICAgICByZXZpZXdJbnRlcnZhbDogbnVtYmVyO1xuICAgICAgICBjdXJyZW50Qm9va0lkOiBzdHJpbmc7XG4gICAgfTtcbiAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgIHRvdGFsUmV2aWV3czogbnVtYmVyO1xuICAgICAgICBzdHJlYWtEYXlzOiBudW1iZXI7XG4gICAgICAgIGxhc3RTdHVkeURhdGU6IHN0cmluZyB8IG51bGw7XG4gICAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIge1xuICAgIHByaXZhdGUgYXBwOiBBcHA7XG4gICAgcHJpdmF0ZSBib29rczogTWFwPHN0cmluZywgQm9vaz4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSB3b3JkczogTWFwPHN0cmluZywgVm9jYWJ1bGFyeUNhcmQ+ID0gbmV3IE1hcCgpO1xuICAgIHByaXZhdGUgc2V0dGluZ3MgPSB7XG4gICAgICAgIGRhaWx5R29hbDogMTAsXG4gICAgICAgIHJldmlld0ludGVydmFsOiAxLFxuICAgICAgICBjdXJyZW50Qm9va0lkOiAnZGVmYXVsdCdcbiAgICB9O1xuICAgIHByaXZhdGUgc3RhdGlzdGljcyA9IHtcbiAgICAgICAgdG90YWxSZXZpZXdzOiAwLFxuICAgICAgICBzdHJlYWtEYXlzOiAwLFxuICAgICAgICBsYXN0U3R1ZHlEYXRlOiBudWxsIGFzIHN0cmluZyB8IG51bGxcbiAgICB9O1xuICAgIHByaXZhdGUgc2F2ZUNhbGxiYWNrOiAoKSA9PiB2b2lkO1xuICAgIHByaXZhdGUgdm9jYWJ1bGFyeUZvbGRlclBhdGggPSAnVm9jYWJ1bGFyeSc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2F2ZUNhbGxiYWNrOiAoKSA9PiB2b2lkLCBmb2xkZXJQYXRoPzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjayA9IHNhdmVDYWxsYmFjaztcbiAgICAgICAgaWYgKGZvbGRlclBhdGgpIHtcbiAgICAgICAgICAgIHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGggPSBmb2xkZXJQYXRoO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVZvY2FidWxhcnlGb2xkZXIoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplRGVmYXVsdEJvb2soKTtcbiAgICB9XG5cbiAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVEM0Y0XHVCMzU0IFx1Q0QwOFx1QUUzMFx1RDY1NFxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVZvY2FidWxhcnlGb2xkZXIoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1RDNGNFx1QjM1NFx1QUMwMCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVBQ0UwIFRGb2xkZXIgXHVDNzc4XHVDMkE0XHVEMTM0XHVDMkE0XHVDNzc4IFx1QUNCRFx1QzZCMFxuICAgICAgICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUJCQzBcdUI4NUMgXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVEM0Y0XHVCMzU0XHVBQzAwIFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QzlDMCBcdUM1NEFcdUIyOTQgXHVBQ0JEXHVDNkIwXHVDNUQwXHVCOUNDIFx1QzBERFx1QzEzMVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBcdUQzRjRcdUIzNTRcdUFDMDAgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUFDQkRcdUM2QjBcdUIyOTQgXHVDODE1XHVDMEMxXHVDODAxXHVDNzc4IFx1QzBDMVx1RDY2OVx1Qzc3NFx1QkJDMFx1Qjg1QyBcdUFDQkRcdUFDRTBcdUI5Q0MgXHVDRDlDXHVCODI1XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdhbHJlYWR5IGV4aXN0cycpIHx8IFxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZvbGRlciBhbHJlYWR5IGV4aXN0cycpIHx8XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnYWxyZWFkeSBwcmVzZW50JykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NFx1QUMwMCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0IFx1QUNCRFx1QzZCMCAoXHVDODE1XHVDMEMxKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NCBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NCBcdUMwRERcdUMxMzEgXHVDOTExIFx1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVBRTMwXHVCQ0Y4IGJvb2sgXHVDRDA4XHVBRTMwXHVENjU0XG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplRGVmYXVsdEJvb2soKSB7XG4gICAgICAgIGlmICghdGhpcy5ib29rcy5oYXMoJ2RlZmF1bHQnKSkge1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdEJvb2s6IEJvb2sgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICdkZWZhdWx0JyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNScsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzg1XHVCMkM4XHVCMkU0LicsXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgd29yZENvdW50OiAwLFxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYm9va3Muc2V0KCdkZWZhdWx0JywgZGVmYXVsdEJvb2spO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShkZWZhdWx0Qm9vayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBCb29rXHVDNzQ0IE1EIFx1RDMwQ1x1Qzc3Q1x1Qjg1QyBcdUM4MDBcdUM3QTVcbiAgICBwcml2YXRlIGFzeW5jIHNhdmVCb29rVG9GaWxlKGJvb2s6IEJvb2spOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtib29rLm5hbWUucmVwbGFjZSgvWzw+OlwiL1xcXFx8PypdL2csICdfJyl9Lm1kYDtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGAke3RoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9va1x1Qzc1OCBcdUIyRThcdUM1QjRcdUI0RTQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gICAgICAgIGNvbnN0IGJvb2tXb3JkcyA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gYm9vay5pZClcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLndvcmQubG9jYWxlQ29tcGFyZShiLndvcmQpKTtcblxuICAgICAgICAvLyBZQU1MIGZyb250bWF0dGVyIFx1QzBERFx1QzEzMVxuICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IFtcbiAgICAgICAgICAgICctLS0nLFxuICAgICAgICAgICAgYGJvb2tJZDogJHtib29rLmlkfWAsXG4gICAgICAgICAgICBgbmFtZTogXCIke2Jvb2submFtZX1cImAsXG4gICAgICAgICAgICBgZGVzY3JpcHRpb246IFwiJHtib29rLmRlc2NyaXB0aW9ufVwiYCxcbiAgICAgICAgICAgIGBjcmVhdGVkQXQ6ICR7Ym9vay5jcmVhdGVkQXR9YCxcbiAgICAgICAgICAgIGB1cGRhdGVkQXQ6ICR7Ym9vay51cGRhdGVkQXR9YCxcbiAgICAgICAgICAgIGB3b3JkQ291bnQ6ICR7Ym9va1dvcmRzLmxlbmd0aH1gLFxuICAgICAgICAgICAgYGlzRGVmYXVsdDogJHtib29rLmlzRGVmYXVsdH1gLFxuICAgICAgICAgICAgJy0tLScsXG4gICAgICAgICAgICAnJ1xuICAgICAgICBdLmpvaW4oJ1xcbicpO1xuXG4gICAgICAgIC8vIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUNGNThcdUQxNTBcdUNFMjAgXHVDMEREXHVDMTMxXG4gICAgICAgIGxldCBjb250ZW50ID0gZnJvbnRtYXR0ZXI7XG4gICAgICAgIGNvbnRlbnQgKz0gYCMgJHtib29rLm5hbWV9XFxuXFxuYDtcbiAgICAgICAgY29udGVudCArPSBgJHtib29rLmRlc2NyaXB0aW9ufVxcblxcbmA7XG4gICAgICAgIGNvbnRlbnQgKz0gYCMjIFx1QjJFOFx1QzVCNCBcdUJBQTlcdUI4NUQgKCR7Ym9va1dvcmRzLmxlbmd0aH1cdUFDMUMpXFxuXFxuYDtcblxuICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgYm9va1dvcmRzKSB7XG4gICAgICAgICAgICBjb250ZW50ICs9IGAjIyMgJHt3b3JkLndvcmR9XFxuXFxuYDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHdvcmQucHJvbnVuY2lhdGlvbikge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCoqXHVCQzFDXHVDNzRDOioqICR7d29yZC5wcm9udW5jaWF0aW9ufVxcblxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCoqXHVCNzNCOioqXFxuYDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbWVhbmluZyBvZiB3b3JkLm1lYW5pbmdzKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSAke21lYW5pbmd9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRlbnQgKz0gJ1xcbic7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh3b3JkLnNpbWlsYXJXb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgKipcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0OioqICR7d29yZC5zaW1pbGFyV29yZHMuam9pbignLCAnKX1cXG5cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAod29yZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgKipcdUM2MDhcdUJCMzg6KipcXG5gO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZXhhbXBsZSBvZiB3b3JkLmV4YW1wbGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gJHtleGFtcGxlLmVuZ2xpc2h9XFxuYDtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgICAtICR7ZXhhbXBsZS5rb3JlYW59XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGVudCArPSAnXFxuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QzgxNVx1QkNGNFxuICAgICAgICAgICAgY29udGVudCArPSBgKipcdUJDRjVcdUMyQjUgXHVDODE1XHVCQ0Y0OioqXFxuYDtcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxODogJHt3b3JkLnJldmlld0NvdW50fVxcbmA7XG4gICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QjA5Q1x1Qzc3NFx1QjNDNDogJHt3b3JkLmRpZmZpY3VsdHl9XFxuYDtcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QkNGNVx1QzJCNTogJHt3b3JkLmxhc3RSZXZpZXdlZCB8fCAnXHVDNUM2XHVDNzRDJ31cXG5gO1xuICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUNEOTRcdUFDMDBcdUM3N0M6ICR7d29yZC5hZGRlZERhdGV9XFxuYDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVDMkE0XHVEMzk4XHVDNzc0XHVDMkE0XHVCNERDIFx1QjlBQ1x1RDUzQ1x1RDJGMFx1QzE1OCBcdUM4MTVcdUJDRjRcbiAgICAgICAgICAgIGlmICh3b3JkLnNjaGVkdWxlSW5mbykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYFxcbioqXHVDMkE0XHVEMzk4XHVDNzc0XHVDMkE0XHVCNERDIFx1QjlBQ1x1RDUzQ1x1RDJGMFx1QzE1ODoqKlxcbmA7XG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUIyRTRcdUM3NEMgXHVCQ0Y1XHVDMkI1XHVDNzdDOiAke3dvcmQuc2NoZWR1bGVJbmZvLmR1ZURhdGV9XFxuYDtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QkNGNVx1QzJCNSBcdUFDMDRcdUFDQTk6ICR7d29yZC5zY2hlZHVsZUluZm8uaW50ZXJ2YWx9XHVDNzdDXFxuYDtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QzZBOVx1Qzc3NFx1QjNDNDogJHt3b3JkLnNjaGVkdWxlSW5mby5lYXNlfVxcbmA7XG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUMyRTRcdUQzMjggXHVENjlGXHVDMjE4OiAke3dvcmQuc2NoZWR1bGVJbmZvLmxhcHNlQ291bnR9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29udGVudCArPSAnXFxuLS0tXFxuXFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nRmlsZSwgY29udGVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVEMzBDXHVDNzdDXHVDNzc0IFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NUNcdUIyRTRcdUJBNzQgbW9kaWZ5XHVCODVDIFx1QzdBQ1x1QzJEQ1x1QjNDNFxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdhbHJlYWR5IGV4aXN0cycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1RDMwQ1x1Qzc3Q1x1Qzc3NCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVDOUMwXHVCOUNDIFRGaWxlXHVDNzc0IFx1QzU0NFx1QjJEODonLCBmaWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDIFx1QzgwMFx1QzdBNSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDMwQ1x1Qzc3QyBcdUM4MDBcdUM3QTUgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1EIFx1RDMwQ1x1Qzc3Q1x1QzVEMFx1QzExQyBCb29rXHVBQ0ZDIFx1QjJFOFx1QzVCNFx1QjRFNCBcdUI4NUNcdUI0RENcbiAgICBwcml2YXRlIGFzeW5jIGxvYWRCb29rRnJvbUZpbGUoZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgeyBmcm9udG1hdHRlciwgYm9keSB9ID0gdGhpcy5wYXJzZU1ERmlsZShjb250ZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFmcm9udG1hdHRlci5ib29rSWQpIHJldHVybjtcblxuICAgICAgICAgICAgLy8gQm9vayBcdUM4MTVcdUJDRjQgXHVCQ0Y1XHVDNkQwXG4gICAgICAgICAgICBjb25zdCBib29rOiBCb29rID0ge1xuICAgICAgICAgICAgICAgIGlkOiBmcm9udG1hdHRlci5ib29rSWQsXG4gICAgICAgICAgICAgICAgbmFtZTogZnJvbnRtYXR0ZXIubmFtZSB8fCBmaWxlLmJhc2VuYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBmcm9udG1hdHRlci5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGZyb250bWF0dGVyLmNyZWF0ZWRBdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBmcm9udG1hdHRlci51cGRhdGVkQXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHdvcmRDb3VudDogZnJvbnRtYXR0ZXIud29yZENvdW50IHx8IDAsXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBmcm9udG1hdHRlci5pc0RlZmF1bHQgfHwgZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuYm9va3Muc2V0KGJvb2suaWQsIGJvb2spO1xuXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUI0RTQgXHVEMzBDXHVDMkYxXG4gICAgICAgICAgICBjb25zdCB3b3JkcyA9IHRoaXMucGFyc2VXb3Jkc0Zyb21NYXJrZG93bihib2R5LCBib29rLmlkKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICAgICAgICAgIHRoaXMud29yZHMuc2V0KHdvcmQud29yZC50b0xvd2VyQ2FzZSgpLCB3b3JkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzMENcdUM3N0MgXHVCODVDXHVCNERDIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNRCBcdUQzMENcdUM3N0MgXHVEMzBDXHVDMkYxIChmcm9udG1hdHRlclx1QzY0MCBib2R5IFx1QkQ4NFx1QjlBQylcbiAgICBwcml2YXRlIHBhcnNlTURGaWxlKGNvbnRlbnQ6IHN0cmluZyk6IHsgZnJvbnRtYXR0ZXI6IGFueSwgYm9keTogc3RyaW5nIH0ge1xuICAgICAgICBjb25zdCBmcm9udG1hdHRlclJlZ2V4ID0gL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS1cXG4oW1xcc1xcU10qKSQvO1xuICAgICAgICBjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goZnJvbnRtYXR0ZXJSZWdleCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICByZXR1cm4geyBmcm9udG1hdHRlcjoge30sIGJvZHk6IGNvbnRlbnQgfTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXJUZXh0ID0gbWF0Y2hbMV07XG4gICAgICAgIGNvbnN0IGJvZHkgPSBtYXRjaFsyXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QUMwNFx1QjJFOFx1RDU1QyBZQU1MIFx1RDMwQ1x1QzJGMVxuICAgICAgICBjb25zdCBmcm9udG1hdHRlcjogYW55ID0ge307XG4gICAgICAgIGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXJUZXh0LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICBjb25zdCBjb2xvbkluZGV4ID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAgICAgICAgICBpZiAoY29sb25JbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBsaW5lLnN1YnN0cmluZygwLCBjb2xvbkluZGV4KS50cmltKCk7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gbGluZS5zdWJzdHJpbmcoY29sb25JbmRleCArIDEpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdUI1MzBcdUM2MzRcdUQ0NUMgXHVDODFDXHVBQzcwXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdmFsdWUuZW5kc1dpdGgoJ1wiJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgxLCAtMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1RDBDMFx1Qzc4NSBcdUJDQzBcdUQ2NThcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICd0cnVlJykgZnJvbnRtYXR0ZXJba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09ICdmYWxzZScpIGZyb250bWF0dGVyW2tleV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNOYU4oTnVtYmVyKHZhbHVlKSkpIGZyb250bWF0dGVyW2tleV0gPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgICAgIGVsc2UgZnJvbnRtYXR0ZXJba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4geyBmcm9udG1hdHRlciwgYm9keSB9O1xuICAgIH1cblxuICAgIC8vIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNFx1QzVEMFx1QzExQyBcdUIyRThcdUM1QjRcdUI0RTQgXHVEMzBDXHVDMkYxXG4gICAgcHJpdmF0ZSBwYXJzZVdvcmRzRnJvbU1hcmtkb3duKG1hcmtkb3duOiBzdHJpbmcsIGJvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmRbXSB7XG4gICAgICAgIGNvbnN0IHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdID0gW107XG4gICAgICAgIGNvbnN0IHdvcmRTZWN0aW9ucyA9IG1hcmtkb3duLnNwbGl0KCctLS0nKS5maWx0ZXIoc2VjdGlvbiA9PiBzZWN0aW9uLnRyaW0oKSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb24gb2Ygd29yZFNlY3Rpb25zKSB7XG4gICAgICAgICAgICBjb25zdCB3b3JkID0gdGhpcy5wYXJzZVdvcmRTZWN0aW9uKHNlY3Rpb24sIGJvb2tJZCk7XG4gICAgICAgICAgICBpZiAod29yZCkge1xuICAgICAgICAgICAgICAgIHdvcmRzLnB1c2god29yZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB3b3JkcztcbiAgICB9XG5cbiAgICAvLyBcdUFDMUNcdUJDQzQgXHVCMkU4XHVDNUI0IFx1QzEzOVx1QzE1OCBcdUQzMENcdUMyRjFcbiAgICBwcml2YXRlIHBhcnNlV29yZFNlY3Rpb24oc2VjdGlvbjogc3RyaW5nLCBib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gc2VjdGlvbi5zcGxpdCgnXFxuJykuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkpO1xuICAgICAgICBpZiAobGluZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIGxldCB3b3JkID0gJyc7XG4gICAgICAgIGxldCBwcm9udW5jaWF0aW9uID0gJyc7XG4gICAgICAgIGNvbnN0IG1lYW5pbmdzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBjb25zdCBzaW1pbGFyV29yZHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGNvbnN0IGV4YW1wbGVzOiB7IGVuZ2xpc2g6IHN0cmluZzsga29yZWFuOiBzdHJpbmcgfVtdID0gW107XG4gICAgICAgIGxldCByZXZpZXdDb3VudCA9IDA7XG4gICAgICAgIGxldCBkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcgPSAnZ29vZCc7XG4gICAgICAgIGxldCBsYXN0UmV2aWV3ZWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgICAgICBsZXQgYWRkZWREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICBsZXQgc2NoZWR1bGVJbmZvOiBhbnkgPSB1bmRlZmluZWQ7XG4gICAgICAgIFxuICAgICAgICBsZXQgY3VycmVudFNlY3Rpb24gPSAnJztcbiAgICAgICAgbGV0IGN1cnJlbnRFeGFtcGxlOiB7IGVuZ2xpc2g/OiBzdHJpbmc7IGtvcmVhbj86IHN0cmluZyB9ID0ge307XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XG4gICAgICAgICAgICBjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUJBODUgXHVDRDk0XHVDRDlDICgjIyMgXHVENUU0XHVCMzU0KVxuICAgICAgICAgICAgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyMjIyAnKSkge1xuICAgICAgICAgICAgICAgIHdvcmQgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoNCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUMxMzlcdUMxNTggXHVBRDZDXHVCRDg0XG4gICAgICAgICAgICBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUJDMUNcdUM3NEM6KionKSkge1xuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb24gPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoNykudHJpbSgpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ3Byb251bmNpYXRpb24nO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcqKlx1QjczQjoqKicpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAnbWVhbmluZ3MnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcqKlx1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjQ6KionKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJXb3Jkc1RleHQgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoMTIpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHMucHVzaCguLi5zaW1pbGFyV29yZHNUZXh0LnNwbGl0KCcsJykubWFwKHcgPT4gdy50cmltKCkpKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdzaW1pbGFyJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUM2MDhcdUJCMzg6KionKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ2V4YW1wbGVzJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUJDRjVcdUMyQjUgXHVDODE1XHVCQ0Y0OioqJykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdyZXZpZXcnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcqKlx1QzJBNFx1RDM5OFx1Qzc3NFx1QzJBNFx1QjREQyBcdUI5QUNcdUQ1M0NcdUQyRjBcdUMxNTg6KionKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ3NwYWNlZC1yZXBldGl0aW9uJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdtZWFuaW5ncycgJiYgdHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSAnKSkge1xuICAgICAgICAgICAgICAgIG1lYW5pbmdzLnB1c2godHJpbW1lZExpbmUuc3Vic3RyaW5nKDIpLnRyaW0oKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnZXhhbXBsZXMnKSB7XG4gICAgICAgICAgICAgICAgLy8gXHVCNEU0XHVDNUVDXHVDNEYwXHVBRTMwXHVCOTdDIFx1QUNFMFx1QjgyNFx1RDU1QyBcdUM2MDhcdUJCMzggXHVEMzBDXHVDMkYxXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnLSAnKSAmJiAhbGluZS5zdGFydHNXaXRoKCcgIC0gJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAoXHVCNEU0XHVDNUVDXHVDNEYwXHVBRTMwIFx1QzVDNlx1Qzc0QylcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRFeGFtcGxlLmVuZ2xpc2ggJiYgY3VycmVudEV4YW1wbGUua29yZWFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiBjdXJyZW50RXhhbXBsZS5lbmdsaXNoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogY3VycmVudEV4YW1wbGUua29yZWFuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RXhhbXBsZSA9IHsgZW5nbGlzaDogbGluZS5zdWJzdHJpbmcoMikudHJpbSgpIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJyAgLSAnKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEICgyXHVDRTc4IFx1QjRFNFx1QzVFQ1x1QzRGMFx1QUUzMClcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEV4YW1wbGUua29yZWFuID0gbGluZS5zdWJzdHJpbmcoNCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdyZXZpZXcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxODogJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV2aWV3Q291bnQgPSBwYXJzZUludCh0cmltbWVkTGluZS5zdWJzdHJpbmcoOSkudHJpbSgpKSB8fCAwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSBcdUIwOUNcdUM3NzRcdUIzQzQ6ICcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoNykudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZiA9PT0gJ2Vhc3knIHx8IGRpZmYgPT09ICdnb29kJyB8fCBkaWZmID09PSAnaGFyZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHkgPSBkaWZmO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDRjVcdUMyQjU6ICcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RSZXYgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoMTEpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJldmlld2VkID0gbGFzdFJldiA9PT0gJ1x1QzVDNlx1Qzc0QycgPyBudWxsIDogbGFzdFJldjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVDRDk0XHVBQzAwXHVDNzdDOiAnKSkge1xuICAgICAgICAgICAgICAgICAgICBhZGRlZERhdGUgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoNykudHJpbSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdzcGFjZWQtcmVwZXRpdGlvbicpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNjaGVkdWxlSW5mbykge1xuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUluZm8gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVCMkU0XHVDNzRDIFx1QkNGNVx1QzJCNVx1Qzc3QzogJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvLmR1ZURhdGUgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoMTApLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVCQ0Y1XHVDMkI1IFx1QUMwNFx1QUNBOTogJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWxUZXh0ID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvLmludGVydmFsID0gcGFyc2VJbnQoaW50ZXJ2YWxUZXh0LnJlcGxhY2UoJ1x1Qzc3QycsICcnKSkgfHwgMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVDNkE5XHVDNzc0XHVCM0M0OiAnKSkge1xuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUluZm8uZWFzZSA9IHBhcnNlSW50KHRyaW1tZWRMaW5lLnN1YnN0cmluZyg3KS50cmltKCkpIHx8IDI1MDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVDMkU0XHVEMzI4IFx1RDY5Rlx1QzIxODogJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvLmxhcHNlQ291bnQgPSBwYXJzZUludCh0cmltbWVkTGluZS5zdWJzdHJpbmcoOSkudHJpbSgpKSB8fCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzYwOFx1QkIzOCBcdUNDOThcdUI5QUNcbiAgICAgICAgaWYgKGN1cnJlbnRFeGFtcGxlLmVuZ2xpc2ggJiYgY3VycmVudEV4YW1wbGUua29yZWFuKSB7XG4gICAgICAgICAgICBleGFtcGxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBlbmdsaXNoOiBjdXJyZW50RXhhbXBsZS5lbmdsaXNoLFxuICAgICAgICAgICAgICAgIGtvcmVhbjogY3VycmVudEV4YW1wbGUua29yZWFuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcblxuICAgICAgICBcbiAgICAgICAgaWYgKCF3b3JkKSByZXR1cm4gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3b3JkOiB3b3JkLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICBwcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgbWVhbmluZ3MsXG4gICAgICAgICAgICBzaW1pbGFyV29yZHMsXG4gICAgICAgICAgICBleGFtcGxlcyxcbiAgICAgICAgICAgIHJldmlld0NvdW50LFxuICAgICAgICAgICAgZGlmZmljdWx0eSxcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZCxcbiAgICAgICAgICAgIGFkZGVkRGF0ZSxcbiAgICAgICAgICAgIGJvb2tJZCxcbiAgICAgICAgICAgIHNjaGVkdWxlSW5mb1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDIFx1Qjg1Q1x1QjREQ1xuICAgIGFzeW5jIGxvYWRBbGxCb29rcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5ib29rcy5jbGVhcigpO1xuICAgICAgICB0aGlzLndvcmRzLmNsZWFyKCk7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVWb2NhYnVsYXJ5Rm9sZGVyKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRCb29rKCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCk7XG4gICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRCb29rRnJvbUZpbGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVEMzBDXHVDNzdDIFx1Qjg1Q1x1QjREQ1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgIH1cblxuICAgIC8vIFx1QzEyNFx1QzgxNSBcdUQzMENcdUM3N0MgXHVDODAwXHVDN0E1L1x1Qjg1Q1x1QjREQ1xuICAgIHByaXZhdGUgYXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzZXR0aW5nc1BhdGggPSBub3JtYWxpemVQYXRoKGAke3RoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGh9L3NldHRpbmdzLmpzb25gKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzLFxuICAgICAgICAgICAgc3RhdGlzdGljczogdGhpcy5zdGF0aXN0aWNzXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNldHRpbmdzUGF0aCk7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShleGlzdGluZ0ZpbGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoc2V0dGluZ3NQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzEyNFx1QzgxNSBcdUQzMENcdUM3N0MgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRofS9zZXR0aW5ncy5qc29uYCk7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzZXR0aW5nc1BhdGgpO1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIC4uLmRhdGEuc2V0dGluZ3MgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdGlzdGljcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRpc3RpY3MgPSB7IC4uLnRoaXMuc3RhdGlzdGljcywgLi4uZGF0YS5zdGF0aXN0aWNzIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdUMxMjRcdUM4MTUgXHVEMzBDXHVDNzdDIFx1Qjg1Q1x1QjREQyBcdUMyRTRcdUQzMjgsIFx1QUUzMFx1QkNGOFx1QUMxMiBcdUMwQUNcdUM2QTk6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQm9vayBcdUFEMDBcdUI5QUMgXHVCQTU0XHVDMTFDXHVCNERDXHVCNEU0XG4gICAgYXN5bmMgY3JlYXRlQm9vayhuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcgPSAnJyk6IFByb21pc2U8Qm9vaz4ge1xuICAgICAgICBjb25zdCBpZCA9IGBib29rXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgICAgICAgY29uc3QgYm9vazogQm9vayA9IHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIHdvcmRDb3VudDogMCxcbiAgICAgICAgICAgIGlzRGVmYXVsdDogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYm9va3Muc2V0KGlkLCBib29rKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcbiAgICAgICAgcmV0dXJuIGJvb2s7XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlQm9vayhib29rSWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxCb29rPik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQoYm9va0lkKTtcbiAgICAgICAgaWYgKCFib29rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJvb2sgXCIke2Jvb2tJZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRCb29rOiBCb29rID0ge1xuICAgICAgICAgICAgLi4uYm9vayxcbiAgICAgICAgICAgIC4uLnVwZGF0ZXMsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYm9va3Muc2V0KGJvb2tJZCwgdXBkYXRlZEJvb2spO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKHVwZGF0ZWRCb29rKTtcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWxldGVCb29rKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChib29rSWQgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQwIFx1QzBBRFx1QzgxQ1x1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XG4gICAgICAgIGlmICghYm9vaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCb29rIFwiJHtib29rSWR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBib29rXHVDNUQwIFx1QzE4RFx1RDU1QyBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQ1xuICAgICAgICBjb25zdCB3b3Jkc1RvRGVsZXRlID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSBib29rSWQpXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gd29yZC53b3JkKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkc1RvRGVsZXRlKSB7XG4gICAgICAgICAgICB0aGlzLndvcmRzLmRlbGV0ZSh3b3JkLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYm9vayBcdUMwQURcdUM4MUNcbiAgICAgICAgdGhpcy5ib29rcy5kZWxldGUoYm9va0lkKTtcblxuICAgICAgICAvLyBcdUQzMENcdUM3N0MgXHVDMEFEXHVDODFDXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7Ym9vay5uYW1lLnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCAnXycpfS5tZGA7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWApO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuZGVsZXRlKGZpbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIGJvb2tcdUM3NzQgXHVDMEFEXHVDODFDXHVCNDFDIGJvb2tcdUM3NzRcdUJBNzQgXHVBRTMwXHVCQ0Y4IGJvb2tcdUM3M0NcdUI4NUMgXHVCQ0MwXHVBQ0JEXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQgPT09IGJvb2tJZCkge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkID0gJ2RlZmF1bHQnO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgZ2V0QWxsQm9va3MoKTogQm9va1tdIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5ib29rcy52YWx1ZXMoKSkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEuaXNEZWZhdWx0KSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoYi5pc0RlZmF1bHQpIHJldHVybiAxO1xuICAgICAgICAgICAgcmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldEJvb2soYm9va0lkOiBzdHJpbmcpOiBCb29rIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XG4gICAgfVxuXG4gICAgZ2V0Q3VycmVudEJvb2soKTogQm9vayB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvb2tzLmdldCh0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpO1xuICAgIH1cblxuICAgIGFzeW5jIHNldEN1cnJlbnRCb29rKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghdGhpcy5ib29rcy5oYXMoYm9va0lkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCb29rIFwiJHtib29rSWR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkID0gYm9va0lkO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8vIEJvb2tcdUJDQzQgXHVCMkU4XHVDNUI0IFx1QzIxOCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICBwcml2YXRlIHVwZGF0ZUJvb2tXb3JkQ291bnQoYm9va0lkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgd29yZENvdW50ID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSBib29rSWQpLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldChib29rSWQpO1xuICAgICAgICBpZiAoYm9vaykge1xuICAgICAgICAgICAgYm9vay53b3JkQ291bnQgPSB3b3JkQ291bnQ7XG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDBcbiAgICBhc3luYyBhZGRXb3JkKHdvcmREYXRhOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB3b3JkID0gd29yZERhdGEud29yZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAodGhpcy53b3Jkcy5oYXMod29yZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkRGF0YS53b3JkfVwiXHVCMjk0IFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NjlcdUIyQzhcdUIyRTQuYCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXdXb3JkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcbiAgICAgICAgICAgIC4uLndvcmREYXRhLFxuICAgICAgICAgICAgd29yZDogd29yZERhdGEud29yZC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IDAsXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiAnZ29vZCcsXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IG51bGwsXG4gICAgICAgICAgICBhZGRlZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGJvb2tJZDogd29yZERhdGEuYm9va0lkIHx8IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMud29yZHMuc2V0KHdvcmQsIG5ld1dvcmQpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2sgXHVEMzBDXHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQobmV3V29yZC5ib29rSWQpO1xuICAgICAgICBpZiAoYm9vaykge1xuICAgICAgICAgICAgYm9vay53b3JkQ291bnQrKztcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDXG4gICAgYXN5bmMgcmVtb3ZlV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgd29yZEtleSA9IHdvcmQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3Qgd29yZERhdGEgPSB0aGlzLndvcmRzLmdldCh3b3JkS2V5KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghd29yZERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYm9va0lkID0gd29yZERhdGEuYm9va0lkO1xuICAgICAgICB0aGlzLndvcmRzLmRlbGV0ZSh3b3JkS2V5KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XG4gICAgICAgIGlmIChib29rKSB7XG4gICAgICAgICAgICBib29rLndvcmRDb3VudC0tO1xuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGJvb2spO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggKFx1QkNGNVx1QzJCNSBcdUFDQjBcdUFDRkMpXG4gICAgYXN5bmMgdXBkYXRlV29yZCh3b3JkOiBzdHJpbmcsIGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB3b3JkS2V5ID0gd29yZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCB3b3JkRGF0YSA9IHRoaXMud29yZHMuZ2V0KHdvcmRLZXkpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF3b3JkRGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XG4gICAgICAgIH1cblxuICAgICAgICB3b3JkRGF0YS5yZXZpZXdDb3VudCsrO1xuICAgICAgICB3b3JkRGF0YS5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eTtcbiAgICAgICAgd29yZERhdGEubGFzdFJldmlld2VkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXG4gICAgICAgIC8vIFx1RDFCNVx1QUNDNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnRvdGFsUmV2aWV3cysrO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0cmVhaygpO1xuXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KHdvcmREYXRhLmJvb2tJZCk7XG4gICAgICAgIGlmIChib29rKSB7XG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOCAoXHVCQ0Y1XHVDMkI1IFx1QUNCMFx1QUNGQyArIFx1QzJBNFx1RDM5OFx1Qzc3NFx1QzJBNFx1QjREQyBcdUI5QUNcdUQ1M0NcdUQyRjBcdUMxNTggXHVDODE1XHVCQ0Y0KVxuICAgIGFzeW5jIHVwZGF0ZVdvcmRXaXRoU2NoZWR1bGUoXG4gICAgICAgIHdvcmQ6IHN0cmluZywgXG4gICAgICAgIGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJywgXG4gICAgICAgIHNjaGVkdWxlSW5mbz86IGFueVxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB3b3JkS2V5ID0gd29yZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCB3b3JkRGF0YSA9IHRoaXMud29yZHMuZ2V0KHdvcmRLZXkpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF3b3JkRGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XG4gICAgICAgIH1cblxuICAgICAgICB3b3JkRGF0YS5yZXZpZXdDb3VudCsrO1xuICAgICAgICB3b3JkRGF0YS5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eTtcbiAgICAgICAgd29yZERhdGEubGFzdFJldmlld2VkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVDMkE0XHVEMzk4XHVDNzc0XHVDMkE0XHVCNERDIFx1QjlBQ1x1RDUzQ1x1RDJGMFx1QzE1OCBcdUM4MTVcdUJDRjQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIGlmIChzY2hlZHVsZUluZm8pIHtcbiAgICAgICAgICAgIHdvcmREYXRhLnNjaGVkdWxlSW5mbyA9IHNjaGVkdWxlSW5mbztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1RDFCNVx1QUNDNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnRvdGFsUmV2aWV3cysrO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0cmVhaygpO1xuXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KHdvcmREYXRhLmJvb2tJZCk7XG4gICAgICAgIGlmIChib29rKSB7XG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzgwNFx1Q0NCNCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IChMTE0gQVBJXHVCODVDIFx1QUMwMFx1QzgzOFx1QzYyOCBcdUM4MTVcdUJDRjRcdUI4NUMgXHVCMzZFXHVDNUI0XHVDNEYwXHVBRTMwKVxuICAgIGFzeW5jIHVwZGF0ZVdvcmREYXRhKHdvcmQ6IHN0cmluZywgdXBkYXRlZFdvcmREYXRhOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB3b3JkS2V5ID0gd29yZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBleGlzdGluZ1dvcmQgPSB0aGlzLndvcmRzLmdldCh3b3JkS2V5KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghZXhpc3RpbmdXb3JkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBcdUIyRThcdUM1QjRcdUM3NTggXHVCQ0Y1XHVDMkI1IFx1QUQwMFx1QjgyOCBcdUM4MTVcdUJDRjRcdUIyOTQgXHVDNzIwXHVDOUMwXHVENTU4XHVBQ0UwLCBcdUI3M0IgXHVDODE1XHVCQ0Y0XHVCOUNDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICBjb25zdCB1cGRhdGVkV29yZDogVm9jYWJ1bGFyeUNhcmQgPSB7XG4gICAgICAgICAgICAuLi51cGRhdGVkV29yZERhdGEsXG4gICAgICAgICAgICB3b3JkOiB3b3JkS2V5LFxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IGV4aXN0aW5nV29yZC5yZXZpZXdDb3VudCxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IGV4aXN0aW5nV29yZC5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBleGlzdGluZ1dvcmQubGFzdFJldmlld2VkLFxuICAgICAgICAgICAgYWRkZWREYXRlOiBleGlzdGluZ1dvcmQuYWRkZWREYXRlLFxuICAgICAgICAgICAgYm9va0lkOiBleGlzdGluZ1dvcmQuYm9va0lkXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy53b3Jkcy5zZXQod29yZEtleSwgdXBkYXRlZFdvcmQpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2sgXHVEMzBDXHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQodXBkYXRlZFdvcmQuYm9va0lkKTtcbiAgICAgICAgaWYgKGJvb2spIHtcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXG4gICAgZ2V0V29yZCh3b3JkOiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLndvcmRzLmdldCh3b3JkLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cblxuICAgIC8vIFx1RDYwNFx1QzdBQyBib29rXHVDNzU4IFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXG4gICAgZ2V0QWxsV29yZHMoKTogVm9jYWJ1bGFyeUNhcmRbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZClcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLndvcmQubG9jYWxlQ29tcGFyZShiLndvcmQpKTtcbiAgICB9XG5cbiAgICAvLyBcdUQyQjlcdUM4MTUgYm9va1x1Qzc1OCBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4Q1xuICAgIGdldFdvcmRzQnlCb29rKGJvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmRbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IGJvb2tJZClcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLndvcmQubG9jYWxlQ29tcGFyZShiLndvcmQpKTtcbiAgICB9XG5cbiAgICAvLyBcdUJDRjVcdUMyQjUgXHVCMzAwXHVDMEMxIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OEMgKFx1RDYwNFx1QzdBQyBib29rKVxuICAgIGdldFdvcmRzRm9yUmV2aWV3KCk6IFZvY2FidWxhcnlDYXJkW10ge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCByZXZpZXdJbnRlcnZhbE1zID0gdGhpcy5zZXR0aW5ncy5yZXZpZXdJbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG5cbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKVxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmV2aWV3ID0gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RSZXZpZXcgPSBub3cuZ2V0VGltZSgpIC0gbGFzdFJldmlldy5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVTaW5jZUxhc3RSZXZpZXcgPj0gcmV2aWV3SW50ZXJ2YWxNcztcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUFDODBcdUMwQzkgKFx1RDYwNFx1QzdBQyBib29rKVxuICAgIHNlYXJjaFdvcmRzKHF1ZXJ5OiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcbiAgICAgICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZClcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PlxuICAgICAgICAgICAgICAgIHdvcmQud29yZC5pbmNsdWRlcyhsb3dlclF1ZXJ5KSB8fFxuICAgICAgICAgICAgICAgIHdvcmQubWVhbmluZ3Muc29tZShtZWFuaW5nID0+IG1lYW5pbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSlcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVEMUI1XHVBQ0M0IFx1Qzg3MFx1RDY4QyAoXHVENjA0XHVDN0FDIGJvb2spXG4gICAgZ2V0U3RhdGlzdGljcygpIHtcbiAgICAgICAgY29uc3Qgd29yZHMgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCk7XG4gICAgICAgIGNvbnN0IHRvdGFsV29yZHMgPSB3b3Jkcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRvdGFsUmV2aWV3cyA9IHRoaXMuc3RhdGlzdGljcy50b3RhbFJldmlld3M7XG4gICAgICAgIGNvbnN0IGF2ZXJhZ2VEaWZmaWN1bHR5ID0gd29yZHMubGVuZ3RoID4gMCBcbiAgICAgICAgICAgID8gd29yZHMucmVkdWNlKChzdW0sIHdvcmQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmaWN1bHR5VmFsdWUgPSB3b3JkLmRpZmZpY3VsdHkgPT09ICdlYXN5JyA/IDEgOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZC5kaWZmaWN1bHR5ID09PSAnZ29vZCcgPyAyIDogMztcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VtICsgZGlmZmljdWx0eVZhbHVlO1xuICAgICAgICAgICAgfSwgMCkgLyB3b3Jkcy5sZW5ndGhcbiAgICAgICAgICAgIDogMDtcblxuICAgICAgICBjb25zdCB3b3Jkc0J5RGlmZmljdWx0eSA9IHtcbiAgICAgICAgICAgIGVhc3k6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2Vhc3knKS5sZW5ndGgsXG4gICAgICAgICAgICBnb29kOiB3b3Jkcy5maWx0ZXIodyA9PiB3LmRpZmZpY3VsdHkgPT09ICdnb29kJykubGVuZ3RoLFxuICAgICAgICAgICAgaGFyZDogd29yZHMuZmlsdGVyKHcgPT4gdy5kaWZmaWN1bHR5ID09PSAnaGFyZCcpLmxlbmd0aFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFx1Q0Q1Q1x1QURGQyA3XHVDNzdDIFx1RDY1Q1x1QjNEOSBcdUFDQzRcdUMwQjBcbiAgICAgICAgY29uc3QgcmVjZW50QWN0aXZpdHkgPSB0aGlzLmNhbGN1bGF0ZVJlY2VudEFjdGl2aXR5KCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvdGFsV29yZHMsXG4gICAgICAgICAgICB0b3RhbFJldmlld3MsXG4gICAgICAgICAgICBzdHJlYWtEYXlzOiB0aGlzLnN0YXRpc3RpY3Muc3RyZWFrRGF5cyxcbiAgICAgICAgICAgIGF2ZXJhZ2VEaWZmaWN1bHR5LFxuICAgICAgICAgICAgd29yZHNCeURpZmZpY3VsdHksXG4gICAgICAgICAgICByZWNlbnRBY3Rpdml0eVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1Qzc3Q1x1Qzc3QyBcdUJBQTlcdUQ0NUMgXHVDOUM0XHVENTg5XHVCOTYwIFx1Qzg3MFx1RDY4QyAoXHVENjA0XHVDN0FDIGJvb2spXG4gICAgZ2V0RGFpbHlHb2FsUHJvZ3Jlc3MoKSB7XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKTtcbiAgICAgICAgY29uc3QgdG9kYXlXb3JkcyA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKVxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHdvcmQubGFzdFJldmlld2VkKS50b0RhdGVTdHJpbmcoKSA9PT0gdG9kYXk7XG4gICAgICAgICAgICB9KS5sZW5ndGg7XG5cbiAgICAgICAgY29uc3QgZ29hbCA9IHRoaXMuc2V0dGluZ3MuZGFpbHlHb2FsO1xuICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gZ29hbCA+IDAgPyBNYXRoLm1pbigodG9kYXlXb3JkcyAvIGdvYWwpICogMTAwLCAxMDApIDogMDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3VycmVudDogdG9kYXlXb3JkcyxcbiAgICAgICAgICAgIGdvYWw6IGdvYWwsXG4gICAgICAgICAgICBwZXJjZW50YWdlOiBwZXJjZW50YWdlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgIGFzeW5jIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPHR5cGVvZiB0aGlzLnNldHRpbmdzPik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0geyAuLi50aGlzLnNldHRpbmdzLCAuLi5uZXdTZXR0aW5ncyB9O1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM4MDBcdUM3QTVcdUM2QTkgXHVENjE1XHVDMkREXHVDNzNDXHVCODVDIFx1QkNDMFx1RDY1OCAoXHVENjM4XHVENjU4XHVDMTMxIFx1QzcyMFx1QzlDMClcbiAgICBnZXREYXRhRm9yU2F2ZSgpOiBEYXRhYmFzZURhdGEge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm9va3M6IEFycmF5LmZyb20odGhpcy5ib29rcy52YWx1ZXMoKSksXG4gICAgICAgICAgICB3b3JkczogQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKSxcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzLFxuICAgICAgICAgICAgc3RhdGlzdGljczogdGhpcy5zdGF0aXN0aWNzXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gXHVDODAwXHVDN0E1XHVCNDFDIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QzVEMFx1QzExQyBcdUI4NUNcdUI0REMgKFx1RDYzOFx1RDY1OFx1QzEzMSBcdUM3MjBcdUM5QzApXG4gICAgYXN5bmMgbG9hZEZyb21EYXRhKGRhdGE6IERhdGFiYXNlRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBNRCBcdUQzMENcdUM3N0MgXHVDMkRDXHVDMkE0XHVEMTVDXHVDNUQwXHVDMTFDXHVCMjk0IFx1Qzc3NCBcdUJBNTRcdUMxMUNcdUI0REMgXHVCMzAwXHVDMkUwIGxvYWRBbGxCb29rcygpXHVCOTdDIFx1QzBBQ1x1QzZBOVxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRBbGxCb29rcygpO1xuICAgIH1cblxuICAgIC8vIFx1QzVGMFx1QzE4RCBcdUQ1NTlcdUMyQjVcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgcHJpdmF0ZSB1cGRhdGVTdHJlYWsoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKTtcbiAgICAgICAgY29uc3QgbGFzdFN0dWR5RGF0ZSA9IHRoaXMuc3RhdGlzdGljcy5sYXN0U3R1ZHlEYXRlIFxuICAgICAgICAgICAgPyBuZXcgRGF0ZSh0aGlzLnN0YXRpc3RpY3MubGFzdFN0dWR5RGF0ZSkudG9EYXRlU3RyaW5nKClcbiAgICAgICAgICAgIDogbnVsbDtcblxuICAgICAgICBpZiAobGFzdFN0dWR5RGF0ZSA9PT0gdG9kYXkpIHtcbiAgICAgICAgICAgIC8vIFx1QzYyNFx1QjI5OCBcdUM3NzRcdUJCRjggXHVENTU5XHVDMkI1XHVENTg4XHVDNzNDXHVCQTc0IFx1QzVGMFx1QzE4RFx1Qzc3QyBcdUM5OURcdUFDMDBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWxhc3RTdHVkeURhdGUpIHtcbiAgICAgICAgICAgIC8vIFx1Q0M5OFx1Qzc0QyBcdUQ1NTlcdUMyQjVcdUQ1NThcdUIyOTQgXHVBQ0JEXHVDNkIwXG4gICAgICAgICAgICB0aGlzLnN0YXRpc3RpY3Muc3RyZWFrRGF5cyA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgeWVzdGVyZGF5LnNldERhdGUoeWVzdGVyZGF5LmdldERhdGUoKSAtIDEpO1xuICAgICAgICAgICAgY29uc3QgeWVzdGVyZGF5U3RyID0geWVzdGVyZGF5LnRvRGF0ZVN0cmluZygpO1xuXG4gICAgICAgICAgICBpZiAobGFzdFN0dWR5RGF0ZSA9PT0geWVzdGVyZGF5U3RyKSB7XG4gICAgICAgICAgICAgICAgLy8gXHVDNUI0XHVDODFDIFx1RDU1OVx1QzJCNVx1RDU4OFx1QzczQ1x1QkE3NCBcdUM1RjBcdUMxOERcdUM3N0MgXHVDOTlEXHVBQzAwXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gXHVDNUYwXHVDMThEXHVDNzc0IFx1QjA0QVx1QzVCNFx1QzlDNCBcdUFDQkRcdUM2QjAgMVx1Qjg1QyBcdUI5QUNcdUMxNEJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRpc3RpY3Muc3RyZWFrRGF5cyA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0YXRpc3RpY3MubGFzdFN0dWR5RGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICAvLyBcdUNENUNcdUFERkMgN1x1Qzc3QyBcdUQ2NUNcdUIzRDkgXHVBQ0M0XHVDMEIwXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVSZWNlbnRBY3Rpdml0eSgpIHtcbiAgICAgICAgY29uc3QgYWN0aXZpdHkgPSBbXTtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSA2OyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRvZGF5KTtcbiAgICAgICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGkpO1xuICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGRhdGUudG9EYXRlU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHdvcmRzU3R1ZGllZCA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSkuZmlsdGVyKHdvcmQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghd29yZC5sYXN0UmV2aWV3ZWQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpLnRvRGF0ZVN0cmluZygpID09PSBkYXRlU3RyO1xuICAgICAgICAgICAgfSkubGVuZ3RoO1xuXG4gICAgICAgICAgICBjb25zdCByZXZpZXdzQ29tcGxldGVkID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKS5maWx0ZXIod29yZCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF3b3JkLmxhc3RSZXZpZXdlZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJldmlld0RhdGUgPSBuZXcgRGF0ZSh3b3JkLmxhc3RSZXZpZXdlZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldmlld0RhdGUudG9EYXRlU3RyaW5nKCkgPT09IGRhdGVTdHI7XG4gICAgICAgICAgICB9KS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGFjdGl2aXR5LnB1c2goe1xuICAgICAgICAgICAgICAgIGRhdGU6IGRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgICAgICAgICAgIHdvcmRzU3R1ZGllZCxcbiAgICAgICAgICAgICAgICByZXZpZXdzQ29tcGxldGVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY3Rpdml0eTtcbiAgICB9XG5cbiAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVEM0Y0XHVCMzU0IFx1QUNCRFx1Qjg1QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICB1cGRhdGVWb2NhYnVsYXJ5Rm9sZGVyUGF0aChuZXdQYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCA9IG5ld1BhdGg7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVZvY2FidWxhcnlGb2xkZXIoKTtcbiAgICB9XG59ICIsICJpbXBvcnQgeyBJTExNU2VydmljZSwgV29yZERhdGFSZXF1ZXN0LCBXb3JkRGF0YVJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vY29yZS9wb3J0cy9zZXJ2aWNlcy9JTExNU2VydmljZSc7XG5pbXBvcnQgeyBMTE1TZXJ2aWNlIH0gZnJvbSAnLi9MTE1TZXJ2aWNlJztcbmltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcblxuZXhwb3J0IGNsYXNzIExMTVNlcnZpY2VBZGFwdGVyIGltcGxlbWVudHMgSUxMTVNlcnZpY2Uge1xuICAgIHByaXZhdGUgbGxtU2VydmljZTogTExNU2VydmljZTtcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5sbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2Uoc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFdvcmREYXRhKHJlcXVlc3Q6IFdvcmREYXRhUmVxdWVzdCk6IFByb21pc2U8V29yZERhdGFSZXNwb25zZT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgd29yZEluZm8gPSBhd2FpdCB0aGlzLmxsbVNlcnZpY2UuZ2V0V29yZEluZm8ocmVxdWVzdC53b3JkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgd29yZDogd29yZEluZm8ud29yZCxcbiAgICAgICAgICAgICAgICAgICAgbWVhbmluZzogd29yZEluZm8ubWVhbmluZ3MsXG4gICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmRJbmZvLnByb251bmNpYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkSW5mby5leGFtcGxlcyxcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiB3b3JkSW5mby5zaW1pbGFyV29yZHNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCdcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sbG1TZXJ2aWNlLnRlc3RDb25uZWN0aW9uKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxsbVNlcnZpY2UgPSBuZXcgTExNU2VydmljZShzZXR0aW5ncyk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBJV29yZFNlcnZpY2UsIFdvcmREYXRhUmVxdWVzdCwgV29yZERhdGFSZXNwb25zZSB9IGZyb20gJy4uLy4uL2NvcmUvcG9ydHMvc2VydmljZXMvSVdvcmRTZXJ2aWNlJztcbmltcG9ydCB7IFdvcmRTZXJ2aWNlIH0gZnJvbSAnLi9Xb3JkU2VydmljZSc7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XG5cbmV4cG9ydCBjbGFzcyBXb3JkU2VydmljZUFkYXB0ZXIgaW1wbGVtZW50cyBJV29yZFNlcnZpY2Uge1xuICAgIHByaXZhdGUgd29yZFNlcnZpY2U6IFdvcmRTZXJ2aWNlO1xuXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncykge1xuICAgICAgICB0aGlzLndvcmRTZXJ2aWNlID0gbmV3IFdvcmRTZXJ2aWNlKHNldHRpbmdzKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRXb3JkRGF0YShyZXF1ZXN0OiBXb3JkRGF0YVJlcXVlc3QpOiBQcm9taXNlPFdvcmREYXRhUmVzcG9uc2U+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhID0gYXdhaXQgdGhpcy53b3JkU2VydmljZS5nZXRXb3JkRGF0YShyZXF1ZXN0LndvcmQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICB3b3JkOiB3b3JkRGF0YS53b3JkLFxuICAgICAgICAgICAgICAgICAgICBtZWFuaW5nOiB3b3JkRGF0YS5tZWFuaW5nLFxuICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkRGF0YS5wcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZERhdGEuZXhhbXBsZXMgfHwgW10sXG4gICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3Jkczogd29yZERhdGEuc2ltaWxhcldvcmRzIHx8IFtdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xuICAgICAgICB0aGlzLndvcmRTZXJ2aWNlID0gbmV3IFdvcmRTZXJ2aWNlKHNldHRpbmdzKTtcbiAgICB9XG59IiwgImltcG9ydCB7IElUVFNTZXJ2aWNlIH0gZnJvbSAnLi9JVFRTU2VydmljZSc7XG5pbXBvcnQgeyBUVFNTZXJ2aWNlLCBUVFNTZXJ2aWNlRmFjdG9yeSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL3R0cy9UVFNTZXJ2aWNlJztcbmltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncyB9IGZyb20gJy4uLy4uLy4uL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcblxuZXhwb3J0IGNsYXNzIFRUU1NlcnZpY2VBZGFwdGVyIGltcGxlbWVudHMgSVRUU1NlcnZpY2Uge1xuICAgIHByaXZhdGUgdHRzU2VydmljZTogVFRTU2VydmljZTtcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlID0gVFRTU2VydmljZUZhY3RvcnkuY3JlYXRlVFRTU2VydmljZShzZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc3BlYWtUZXh0KHRleHQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtUZXh0KHRleHQpO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy50dHNTZXJ2aWNlLnNwZWFrV29yZCh3b3JkKTtcbiAgICB9XG5cbiAgICBhc3luYyBzcGVha0V4YW1wbGUoZXhhbXBsZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMudHRzU2VydmljZS5zcGVha0V4YW1wbGUoZXhhbXBsZSk7XG4gICAgfVxuXG4gICAgc3RvcFNwZWFraW5nKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnR0c1NlcnZpY2Uuc3RvcFNwZWFraW5nKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xuICAgICAgICAvLyBcdUFFMzBcdUM4NzQgVFRTIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUM4MTVcdUI5QUNcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlLmRlc3Ryb3koKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QzBDOCBcdUMxMjRcdUM4MTVcdUM3M0NcdUI4NUMgVFRTIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUM3QUNcdUMwRERcdUMxMzFcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlID0gVFRTU2VydmljZUZhY3RvcnkuY3JlYXRlVFRTU2VydmljZShzZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgaXNFbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gXHVEMzI5XHVEMUEwXHVCOUFDXHVDNUQwXHVDMTFDIFx1Qzc3NFx1QkJGOCBlbmFibGVkIFx1Q0NCNFx1RDA2Q1x1Qjk3QyBcdUQ1NjhcbiAgICB9XG5cbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogU3BlZWNoU3ludGhlc2lzVm9pY2VbXSB7XG4gICAgICAgIGNvbnN0IHZvaWNlcyA9IHRoaXMudHRzU2VydmljZS5nZXRBdmFpbGFibGVWb2ljZXMoKTtcbiAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNCBcdUQ2MzhcdUQ2NThcdUM3NDQgXHVDNzA0XHVENTc0IFx1QkU0OCBcdUJDMzBcdUM1RjQgXHVCQzE4XHVENjU4IChcdUMyRTRcdUM4MUMgXHVDNzRDXHVDMTMxXHVDNzQwIFx1QUMwMSBcdUMxMUNcdUJFNDRcdUMyQTRcdUFDMDAgXHVDQzk4XHVCOUFDKVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnR0c1NlcnZpY2UudGVzdENvbm5lY3Rpb24oKTtcbiAgICB9XG5cbiAgICBpc1BhdXNlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHRzU2VydmljZS5pc1BhdXNlZCgpO1xuICAgIH1cblxuICAgIHJlc3VtZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnJlc3VtZSgpO1xuICAgIH1cblxuICAgIHBhdXNlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnR0c1NlcnZpY2UucGF1c2UoKTtcbiAgICB9XG5cbiAgICBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnR0c1NlcnZpY2UuZGVzdHJveSgpO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRElDb250YWluZXIgfSBmcm9tICcuL0RJQ29udGFpbmVyJztcbmltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcblxuLy8gQ29yZSBTZXJ2aWNlc1xuaW1wb3J0IHsgQWRkV29yZFVzZUNhc2UgfSBmcm9tICcuLi8uLi9jb3JlL3VzZS1jYXNlcy9BZGRXb3JkVXNlQ2FzZSc7XG5pbXBvcnQgeyBDcmVhdGVCb29rVXNlQ2FzZSB9IGZyb20gJy4uLy4uL2NvcmUvdXNlLWNhc2VzL0NyZWF0ZUJvb2tVc2VDYXNlJztcbmltcG9ydCB7IEdldFdvcmRzRm9yUmV2aWV3VXNlQ2FzZSB9IGZyb20gJy4uLy4uL2NvcmUvdXNlLWNhc2VzL0dldFdvcmRzRm9yUmV2aWV3VXNlQ2FzZSc7XG5pbXBvcnQgeyBSZXZpZXdXb3JkVXNlQ2FzZSB9IGZyb20gJy4uLy4uL2NvcmUvdXNlLWNhc2VzL1Jldmlld1dvcmRVc2VDYXNlJztcblxuLy8gSW5mcmFzdHJ1Y3R1cmUgU2VydmljZXNcbmltcG9ydCB7IFZvY2FidWxhcnlSZXBvc2l0b3J5QWRhcHRlciB9IGZyb20gJy4uLy4uL2luZnJhc3RydWN0dXJlL29ic2lkaWFuL3JlcG9zaXRvcmllcy9Wb2NhYnVsYXJ5UmVwb3NpdG9yeUFkYXB0ZXInO1xuaW1wb3J0IHsgQm9va1JlcG9zaXRvcnlBZGFwdGVyIH0gZnJvbSAnLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvb2JzaWRpYW4vcmVwb3NpdG9yaWVzL0Jvb2tSZXBvc2l0b3J5QWRhcHRlcic7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvc3RvcmFnZS9Wb2NhYnVsYXJ5RGF0YWJhc2UnO1xuaW1wb3J0IHsgTExNU2VydmljZUFkYXB0ZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZUFkYXB0ZXInO1xuXG4vLyBFeHRlcm5hbCBTZXJ2aWNlc1xuaW1wb3J0IHsgV29yZFNlcnZpY2VBZGFwdGVyIH0gZnJvbSAnLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2VBZGFwdGVyJztcbmltcG9ydCB7IFRUU1NlcnZpY2VBZGFwdGVyIH0gZnJvbSAnLi4vLi4vY29yZS9wb3J0cy9zZXJ2aWNlcy9JVFRTU2VydmljZUFkYXB0ZXInO1xuXG5leHBvcnQgY2xhc3MgU2VydmljZVJlZ2lzdHJ5IHtcbiAgICBzdGF0aWMgcmVnaXN0ZXJTZXJ2aWNlcyhjb250YWluZXI6IERJQ29udGFpbmVyLCBhcHA6IEFwcCwgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xuICAgICAgICAvLyBFeHRlcm5hbCBkZXBlbmRlbmNpZXNcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVySW5zdGFuY2UoJ2FwcCcsIGFwcCk7XG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlckluc3RhbmNlKCdzZXR0aW5ncycsIHNldHRpbmdzKTtcblxuICAgICAgICAvLyBJbmZyYXN0cnVjdHVyZSBMYXllclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2RhdGFiYXNlTWFuYWdlcicsIChhcHA6IEFwcCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyKFxuICAgICAgICAgICAgICAgIGFwcCxcbiAgICAgICAgICAgICAgICAoKSA9PiB7fSwgLy8gc2F2ZUNhbGxiYWNrIC0gRElcdUM1RDBcdUMxMUNcdUIyOTQgXHVCRTQ4IFx1RDU2OFx1QzIxOFx1Qjg1QyBcdUNDOThcdUI5QUNcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy52b2NhYnVsYXJ5Rm9sZGVyUGF0aFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ2FwcCddLFxuICAgICAgICAgICAgc2luZ2xldG9uOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlcigndm9jYWJ1bGFyeVJlcG9zaXRvcnknLCBWb2NhYnVsYXJ5UmVwb3NpdG9yeUFkYXB0ZXIsIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydkYXRhYmFzZU1hbmFnZXInXVxuICAgICAgICB9KTtcblxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2Jvb2tSZXBvc2l0b3J5JywgQm9va1JlcG9zaXRvcnlBZGFwdGVyLCB7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnZGF0YWJhc2VNYW5hZ2VyJ11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCd3b3JkU2VydmljZScsIFdvcmRTZXJ2aWNlQWRhcHRlciwge1xuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3NldHRpbmdzJ11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdsbG1TZXJ2aWNlJywgTExNU2VydmljZUFkYXB0ZXIsIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydzZXR0aW5ncyddXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcigndHRzU2VydmljZScsIFRUU1NlcnZpY2VBZGFwdGVyLCB7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnc2V0dGluZ3MnXVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDb3JlIFVzZSBDYXNlc1xuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2FkZFdvcmRVc2VDYXNlJywgQWRkV29yZFVzZUNhc2UsIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWyd2b2NhYnVsYXJ5UmVwb3NpdG9yeScsICdib29rUmVwb3NpdG9yeScsICd3b3JkU2VydmljZSddXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignY3JlYXRlQm9va1VzZUNhc2UnLCBDcmVhdGVCb29rVXNlQ2FzZSwge1xuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ2Jvb2tSZXBvc2l0b3J5J11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdnZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UnLCBHZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UsIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWyd2b2NhYnVsYXJ5UmVwb3NpdG9yeScsICdib29rUmVwb3NpdG9yeSddXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcigncmV2aWV3V29yZFVzZUNhc2UnLCBSZXZpZXdXb3JkVXNlQ2FzZSwge1xuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3ZvY2FidWxhcnlSZXBvc2l0b3J5J11cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHVwZGF0ZVNldHRpbmdzKGNvbnRhaW5lcjogRElDb250YWluZXIsIHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpOiB2b2lkIHtcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVySW5zdGFuY2UoJ3NldHRpbmdzJywgc2V0dGluZ3MpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVDNUI0XHVCMzExXHVEMTMwIFx1QzExQ1x1QkU0NFx1QzJBNFx1QjRFNCBcdUMxMjRcdUM4MTUgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIGlmIChjb250YWluZXIuaGFzKCd0dHNTZXJ2aWNlJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHR0c1NlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZTxUVFNTZXJ2aWNlQWRhcHRlcj4oJ3R0c1NlcnZpY2UnKTtcbiAgICAgICAgICAgIHR0c1NlcnZpY2UudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoY29udGFpbmVyLmhhcygnbGxtU2VydmljZScpKSB7XG4gICAgICAgICAgICBjb25zdCBsbG1TZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmU8TExNU2VydmljZUFkYXB0ZXI+KCdsbG1TZXJ2aWNlJyk7XG4gICAgICAgICAgICBsbG1TZXJ2aWNlLnVwZGF0ZVNldHRpbmdzKHNldHRpbmdzKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGNvbnRhaW5lci5oYXMoJ3dvcmRTZXJ2aWNlJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHdvcmRTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmU8V29yZFNlcnZpY2VBZGFwdGVyPignd29yZFNlcnZpY2UnKTtcbiAgICAgICAgICAgIHdvcmRTZXJ2aWNlLnVwZGF0ZVNldHRpbmdzKHNldHRpbmdzKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiLy8gXHVDODA0XHVDNUVEIFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUMgXHVCQzBGIFx1QUNCRFx1QUNDNCBcdUFEMDBcdUI5QUNcblxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9ySW5mbyB7XG4gICAgZXJyb3I6IEVycm9yO1xuICAgIGNvbnRleHQ/OiBzdHJpbmc7XG4gICAgdXNlcklkPzogc3RyaW5nO1xuICAgIHRpbWVzdGFtcDogbnVtYmVyO1xuICAgIHN0YWNrVHJhY2U/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBFcnJvckJvdW5kYXJ5IHtcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogRXJyb3JCb3VuZGFyeTtcbiAgICBwcml2YXRlIGVycm9ySGFuZGxlcnM6IE1hcDxzdHJpbmcsIChlcnJvcjogRXJyb3JJbmZvKSA9PiB2b2lkPiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCk6IEVycm9yQm91bmRhcnkge1xuICAgICAgICBpZiAoIUVycm9yQm91bmRhcnkuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIEVycm9yQm91bmRhcnkuaW5zdGFuY2UgPSBuZXcgRXJyb3JCb3VuZGFyeSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBFcnJvckJvdW5kYXJ5Lmluc3RhbmNlO1xuICAgIH1cblxuICAgIC8vIFx1QzgwNFx1QzVFRCBcdUM1RDBcdUI3RUMgXHVENTc4XHVCNEU0XHVCN0VDIFx1Q0QwOFx1QUUzMFx1RDY1NFxuICAgIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQpIHJldHVybjtcblxuICAgICAgICAvLyBcdUM4MDRcdUM1RUQgXHVDNUQwXHVCN0VDIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDhcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcbiAgICAgICAgICAgICAgICBlcnJvcjogZXZlbnQuZXJyb3IgfHwgbmV3IEVycm9yKGV2ZW50Lm1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdHbG9iYWwgRXJyb3InLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICBzdGFja1RyYWNlOiBldmVudC5lcnJvcj8uc3RhY2tcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQcm9taXNlIHJlamVjdGlvbiBcdUQ1NzhcdUI0RTRcdUI3RUNcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VuaGFuZGxlZHJlamVjdGlvbicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgICAgICAgZXJyb3I6IGV2ZW50LnJlYXNvbiBpbnN0YW5jZW9mIEVycm9yID8gZXZlbnQucmVhc29uIDogbmV3IEVycm9yKFN0cmluZyhldmVudC5yZWFzb24pKSxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnVW5oYW5kbGVkIFByb21pc2UgUmVqZWN0aW9uJyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgc3RhY2tUcmFjZTogZXZlbnQucmVhc29uPy5zdGFja1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gXHVDNUQwXHVCN0VDIFx1RDU3OFx1QjRFNFx1QjdFQyBcdUI0RjFcdUI4NURcbiAgICByZWdpc3RlckhhbmRsZXIoY29udGV4dDogc3RyaW5nLCBoYW5kbGVyOiAoZXJyb3I6IEVycm9ySW5mbykgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVycm9ySGFuZGxlcnMuc2V0KGNvbnRleHQsIGhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8vIFx1QzVEMFx1QjdFQyBcdUQ1NzhcdUI0RTRcdUI3RUMgXHVDODFDXHVBQzcwXG4gICAgdW5yZWdpc3RlckhhbmRsZXIoY29udGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZXJyb3JIYW5kbGVycy5kZWxldGUoY29udGV4dCk7XG4gICAgfVxuXG4gICAgLy8gXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQ1xuICAgIGhhbmRsZUVycm9yKGVycm9ySW5mbzogRXJyb3JJbmZvKTogdm9pZCB7XG4gICAgICAgIC8vIFx1Q0Y1OFx1QzE5NFx1QzVEMCBcdUM1RDBcdUI3RUMgXHVCODVDXHVBREY4XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhdWdodCBieSBFcnJvckJvdW5kYXJ5OicsIGVycm9ySW5mbyk7XG5cbiAgICAgICAgLy8gXHVDMEFDXHVDNkE5XHVDNzkwXHVDNUQwXHVBQzhDIFx1Q0U1Q1x1RDY1NFx1QzgwMVx1Qzc3OCBcdUM1RDBcdUI3RUMgXHVCQTU0XHVDMkRDXHVDOUMwIFx1RDQ1Q1x1QzJEQ1xuICAgICAgICBjb25zdCB1c2VyTWVzc2FnZSA9IHRoaXMuZ2V0VXNlckZyaWVuZGx5TWVzc2FnZShlcnJvckluZm8uZXJyb3IpO1xuICAgICAgICBuZXcgTm90aWNlKHVzZXJNZXNzYWdlLCAwKTtcblxuICAgICAgICAvLyBcdUI0RjFcdUI4NURcdUI0MUMgXHVENTc4XHVCNEU0XHVCN0VDXHVCNEU0IFx1QzJFNFx1RDU4OVxuICAgICAgICB0aGlzLmVycm9ySGFuZGxlcnMuZm9yRWFjaCgoaGFuZGxlciwgY29udGV4dCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyKGVycm9ySW5mbyk7XG4gICAgICAgICAgICB9IGNhdGNoIChoYW5kbGVyRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyIGZvciBjb250ZXh0ICR7Y29udGV4dH06YCwgaGFuZGxlckVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHVDNTQ4XHVDODA0XHVENTVDIFx1RDU2OFx1QzIxOCBcdUMyRTRcdUQ1ODkgXHVCNzk4XHVEMzdDXG4gICAgYXN5bmMgc2FmZUV4ZWN1dGU8VD4oXG4gICAgICAgIGZuOiAoKSA9PiBQcm9taXNlPFQ+IHwgVCxcbiAgICAgICAgY29udGV4dDogc3RyaW5nLFxuICAgICAgICBmYWxsYmFjaz86IFRcbiAgICApOiBQcm9taXNlPFQgfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKSxcbiAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICBzdGFja1RyYWNlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVCM0Q5XHVBRTMwIFx1RDU2OFx1QzIxOFx1QzZBOSBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVDMkU0XHVENTg5XG4gICAgc2FmZUV4ZWN1dGVTeW5jPFQ+KFxuICAgICAgICBmbjogKCkgPT4gVCxcbiAgICAgICAgY29udGV4dDogc3RyaW5nLFxuICAgICAgICBmYWxsYmFjaz86IFRcbiAgICApOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBmbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKSxcbiAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICBzdGFja1RyYWNlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVDMEFDXHVDNkE5XHVDNzkwIFx1Q0U1Q1x1RDY1NFx1QzgwMVx1Qzc3OCBcdUM1RDBcdUI3RUMgXHVCQTU0XHVDMkRDXHVDOUMwIFx1QzBERFx1QzEzMVxuICAgIHByaXZhdGUgZ2V0VXNlckZyaWVuZGx5TWVzc2FnZShlcnJvcjogRXJyb3IpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBlcnJvclR5cGUgPSBlcnJvci5uYW1lO1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuXG4gICAgICAgIC8vIFx1QzVEMFx1QjdFQyBcdUQwQzBcdUM3ODVcdUJDQzQgXHVDMEFDXHVDNkE5XHVDNzkwIFx1Q0U1Q1x1RDY1NFx1QzgwMSBcdUJBNTRcdUMyRENcdUM5QzBcbiAgICAgICAgY29uc3QgZnJpZW5kbHlNZXNzYWdlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgICAgICdOZXR3b3JrRXJyb3InOiAnXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QzVGMFx1QUNCMFx1QzVEMCBcdUJCMzhcdUM4MUNcdUFDMDAgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUM3NzhcdUQxMzBcdUIxMzcgXHVDNUYwXHVBQ0IwXHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nLFxuICAgICAgICAgICAgJ1R5cGVFcnJvcic6ICdcdUIzNzBcdUM3NzRcdUQxMzAgXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicsXG4gICAgICAgICAgICAnUmVmZXJlbmNlRXJyb3InOiAnXHVENTQ0XHVDNjk0XHVENTVDIFx1QjM3MFx1Qzc3NFx1RDEzMFx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nLFxuICAgICAgICAgICAgJ1N5bnRheEVycm9yJzogJ1x1QjM3MFx1Qzc3NFx1RDEzMCBcdUQ2MTVcdUMyRERcdUM1RDAgXHVDNjI0XHVCOTU4XHVBQzAwIFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nLFxuICAgICAgICAgICAgJ1F1b3RhRXhjZWVkZWRFcnJvcic6ICdcdUM4MDBcdUM3QTUgXHVBQ0Y1XHVBQzA0XHVDNzc0IFx1QkQ4MFx1Qzg3MVx1RDU2OVx1QjJDOFx1QjJFNC4nLFxuICAgICAgICAgICAgJ1NlY3VyaXR5RXJyb3InOiAnXHVCQ0Y0XHVDNTQ4IFx1QzgxNVx1Q0M0NVx1QzczQ1x1Qjg1QyBcdUM3NzhcdUQ1NzQgXHVDNzkxXHVDNUM1XHVDNzQ0IFx1QzIxOFx1RDU4OVx1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQVBJIFx1QUQwMFx1QjgyOCBcdUM1RDBcdUI3RUMgXHVDQzk4XHVCOUFDXG4gICAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0FQSScpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSkge1xuICAgICAgICAgICAgcmV0dXJuICdBUEkgXHVDMTFDXHVCRTQ0XHVDMkE0XHVDNUQwIFx1Qzc3Q1x1QzJEQ1x1QzgwMVx1Qzc3OCBcdUJCMzhcdUM4MUNcdUFDMDAgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUM3QTBcdUMyREMgXHVENkM0IFx1QjJFNFx1QzJEQyBcdUMyRENcdUIzQzRcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1RDMwQ1x1Qzc3QyBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQ1xuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdmaWxlJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdGaWxlJykpIHtcbiAgICAgICAgICAgIHJldHVybiAnXHVEMzBDXHVDNzdDIFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVEMzBDXHVDNzdDXHVDNzc0IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1QzU1NFx1RDYzOFx1RDY1NCBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQ1xuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdlbmNyeXB0JykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdkZWNyeXB0JykpIHtcbiAgICAgICAgICAgIHJldHVybiAnQVBJIFx1RDBBNCBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QzEyNFx1QzgxNVx1Qzc0NCBcdUIyRTRcdUMyREMgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnJpZW5kbHlNZXNzYWdlc1tlcnJvclR5cGVdIHx8IFxuICAgICAgICAgICAgICAgYFx1QzYwOFx1QzBDMVx1Q0U1OCBcdUJBQkJcdUQ1NUMgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNDogJHtlcnJvck1lc3NhZ2V9YDtcbiAgICB9XG5cbiAgICAvLyBcdUM1RDBcdUI3RUMgXHVCQ0Y1XHVBRDZDIFx1QzJEQ1x1QjNDNFxuICAgIGFzeW5jIGF0dGVtcHRSZWNvdmVyeShlcnJvcjogRXJyb3IsIGNvbnRleHQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICAvLyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVDNUQwXHVCN0VDXHVDNzU4IFx1QUNCRFx1QzZCMCBcdUM3QUNcdUMyRENcdUIzQzRcbiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnbmV0d29yaycpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFx1QUMwNFx1QjJFOFx1RDU1QyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVEMTRDXHVDMkE0XHVEMkI4XG4gICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vZmF2aWNvbi5pY28nLCB7IFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdIRUFEJyxcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ25vLWNvcnMnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUM4MDBcdUM3QTVcdUMxOEMgXHVDNUQwXHVCN0VDXHVDNzU4IFx1QUNCRFx1QzZCMCBcdUQwNzRcdUI5QUNcdUM1QjQgXHVDMkRDXHVCM0M0XG4gICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnUXVvdGFFeGNlZWRlZEVycm9yJykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBcdUM3ODRcdUMyREMgXHVCMzcwXHVDNzc0XHVEMTMwIFx1RDA3NFx1QjlBQ1x1QzVCNCAoXHVDMkU0XHVDODFDIFx1QUQ2Q1x1RDYwNFx1QzVEMFx1QzExQ1x1QjI5NCBcdUIzNTQgXHVDMkUwXHVDOTExXHVENTU4XHVBQzhDKVxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0ZW1wLWRhdGEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBcdUM4MTVcdUI5QUNcbiAgICBjbGVhbnVwKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVycm9ySGFuZGxlcnMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgfVxufVxuXG4vLyBcdUQzQjhcdUM3NTggXHVENTY4XHVDMjE4XHVCNEU0XG5leHBvcnQgY29uc3Qgc2FmZUFzeW5jID0gYXN5bmMgPFQ+KFxuICAgIGZuOiAoKSA9PiBQcm9taXNlPFQ+LFxuICAgIGNvbnRleHQ6IHN0cmluZyxcbiAgICBmYWxsYmFjaz86IFRcbik6IFByb21pc2U8VCB8IHVuZGVmaW5lZD4gPT4ge1xuICAgIHJldHVybiBFcnJvckJvdW5kYXJ5LmdldEluc3RhbmNlKCkuc2FmZUV4ZWN1dGUoZm4sIGNvbnRleHQsIGZhbGxiYWNrKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzYWZlU3luYyA9IDxUPihcbiAgICBmbjogKCkgPT4gVCxcbiAgICBjb250ZXh0OiBzdHJpbmcsXG4gICAgZmFsbGJhY2s/OiBUXG4pOiBUIHwgdW5kZWZpbmVkID0+IHtcbiAgICByZXR1cm4gRXJyb3JCb3VuZGFyeS5nZXRJbnN0YW5jZSgpLnNhZmVFeGVjdXRlU3luYyhmbiwgY29udGV4dCwgZmFsbGJhY2spO1xufTtcblxuLy8gXHVCMzcwXHVDRjU0XHVCODA4XHVDNzc0XHVEMTMwIFx1RDU2OFx1QzIxOCAoVHlwZVNjcmlwdCBcdUIzNzBcdUNGNTRcdUI4MDhcdUM3NzRcdUQxMzAgXHVCMzAwXHVDMkUwIFx1QzBBQ1x1QzZBOSlcbmV4cG9ydCBmdW5jdGlvbiB3aXRoRXJyb3JCb3VuZGFyeTxUIGV4dGVuZHMgYW55W10sIFI+KFxuICAgIGZuOiAoLi4uYXJnczogVCkgPT4gUiB8IFByb21pc2U8Uj4sXG4gICAgY29udGV4dDogc3RyaW5nXG4pIHtcbiAgICByZXR1cm4gYXN5bmMgKC4uLmFyZ3M6IFQpOiBQcm9taXNlPFIgfCB1bmRlZmluZWQ+ID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JCb3VuZGFyeSA9IEVycm9yQm91bmRhcnkuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgaWYgKGZuLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdBc3luY0Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yQm91bmRhcnkuc2FmZUV4ZWN1dGUoKCkgPT4gZm4oLi4uYXJncyksIGNvbnRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yQm91bmRhcnkuc2FmZUV4ZWN1dGVTeW5jKCgpID0+IGZuKC4uLmFyZ3MpLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgIH07XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxvQkFBdUI7OztBQ0F2QixzQkFBZ0U7OztBQ0doRSxlQUFlLHdCQUE0QztBQUV2RCxRQUFNLFdBQVc7QUFDakIsUUFBTSxVQUFVO0FBQ2hCLFFBQU0sWUFBWSxVQUFVO0FBQzVCLFFBQU0sWUFBWSxLQUFLLElBQUksRUFBRSxTQUFTO0FBR3RDLFFBQU0sY0FBYyxXQUFXLFVBQVUsWUFBWTtBQUNyRCxR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LFlBQVksTUFBTSxLQUFLLFNBQVM7QUFDdEMsVUFBSSxhQUFhLFVBQVUsWUFBWSxNQUFNLFFBQVEsVUFBVSxTQUFTLEtBQUssR0FBRztBQUM1RSxjQUFNLGFBQWEsVUFBVTtBQUc3QixZQUFJLFdBQVcsU0FBUyxXQUFXLE1BQU0sU0FBUyxHQUFHO0FBQ2pELHFCQUFXLFFBQVEsV0FBVyxPQUFPO0FBQ2pDLGdCQUFJO0FBQ0Esb0JBQU0sS0FBSyxnQkFBZ0IsUUFBUTtBQUFBLGdCQUMvQixHQUFHO0FBQUEsZ0JBQ0gsUUFBUTtBQUFBLGdCQUNSLGVBQWUsS0FBSyxpQkFBaUI7QUFBQSxjQUN6QyxDQUFDO0FBQUEsWUFDTCxTQUFTLE9BQU87QUFDWixzQkFBUSxLQUFLLG1FQUFpQixLQUFLLElBQUksSUFBSSxLQUFLO0FBQUEsWUFDcEQ7QUFBQSxVQUNKO0FBQUEsUUFDSjtBQUdBLFlBQUksV0FBVyxVQUFVO0FBQ3JCLGdCQUFNLEtBQUssZ0JBQWdCLGVBQWUsV0FBVyxRQUFRO0FBQUEsUUFDakU7QUFBQSxNQUNKO0FBQUEsSUFDSixTQUFTLE9BQU87QUFDWixjQUFRLE1BQU0sc0RBQWMsS0FBSztBQUFBLElBQ3JDO0FBQUEsRUFDSjtBQUFBO0FBQUEsRUFHQSxNQUFNLGNBQWM7QUFDaEIsVUFBTSxPQUFPO0FBQUEsTUFDVCxVQUFVLEtBQUs7QUFBQSxJQUNuQjtBQUNBLFVBQU0sS0FBSyxTQUFTLElBQUk7QUFBQSxFQUM1QjtBQUNKOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiZGVsYXkiLCAicHJvdG90eXBlIiwgImRlc2NyaXB0b3JzIiwgImZpbHRlciIsICJoYXNPd25Qcm9wZXJ0eSIsICJmaWx0ZXIiLCAicHJvdG90eXBlIiwgInRvU3RyaW5nIiwgImVuY29kZSIsICJpc0Zvcm1EYXRhIiwgImlzRmlsZUxpc3QiLCAidHJhbnNpdGlvbmFsIiwgImZpbHRlciIsICJzZWxmIiwgInByb3RvdHlwZSIsICJ2YWxpZGF0ZVN0YXR1cyIsICJvcmlnaW4iLCAibWVyZ2UiLCAidHJhbnNpdGlvbmFsIiwgInNpZ25hbCIsICJpdGVyYXRvciIsICJkb25lIiwgInJlcyIsICJ2YWxpZGF0b3JzIiwgInRyYW5zaXRpb25hbCIsICJBeGlvcyIsICJBeGlvc0Vycm9yIiwgIkNhbmNlbGVkRXJyb3IiLCAiaXNDYW5jZWwiLCAiQ2FuY2VsVG9rZW4iLCAiVkVSU0lPTiIsICJhbGwiLCAiaXNBeGlvc0Vycm9yIiwgInNwcmVhZCIsICJ0b0Zvcm1EYXRhIiwgIkF4aW9zSGVhZGVycyIsICJIdHRwU3RhdHVzQ29kZSIsICJtZXJnZUNvbmZpZyIsICJqc29uRGF0YSIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJjb250YWluZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJDb25maXJtTW9kYWwiLCAiY29udGFpbmVyIiwgImltcG9ydF9vYnNpZGlhbiIsICJib29rIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250YWluZXIiLCAiYXBwIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
