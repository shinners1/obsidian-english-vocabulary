/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all3) => {
  for (var name in all3)
    __defProp(target, name, { get: all3[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  AddBookModal: () => AddBookModal,
  EnglishVocabularyPlugin: () => EnglishVocabularyPlugin,
  default: () => EnglishVocabularyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian8 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");

// src/utils.ts
var ENCRYPTION_KEY = "obsidian-vocabulary-plugin-key-2024";
function encryptApiKey(apiKey) {
  if (!apiKey)
    return "";
  try {
    let encrypted = "";
    for (let i = 0; i < apiKey.length; i++) {
      const charCode = apiKey.charCodeAt(i) ^ ENCRYPTION_KEY.charCodeAt(i % ENCRYPTION_KEY.length);
      encrypted += String.fromCharCode(charCode);
    }
    return btoa(encrypted);
  } catch (error) {
    console.error("API \uD0A4 \uC554\uD638\uD654 \uC2E4\uD328:", error);
    return "";
  }
}
function decryptApiKey(encryptedApiKey) {
  if (!encryptedApiKey)
    return "";
  try {
    const decoded = atob(encryptedApiKey);
    let decrypted = "";
    for (let i = 0; i < decoded.length; i++) {
      const charCode = decoded.charCodeAt(i) ^ ENCRYPTION_KEY.charCodeAt(i % ENCRYPTION_KEY.length);
      decrypted += String.fromCharCode(charCode);
    }
    return decrypted;
  } catch (error) {
    console.error("API \uD0A4 \uBCF5\uD638\uD654 \uC2E4\uD328:", error);
    return "";
  }
}
function maskApiKey(apiKey) {
  if (!apiKey)
    return "";
  if (apiKey.length <= 8)
    return "*".repeat(apiKey.length);
  return apiKey.substring(0, 4) + "*".repeat(apiKey.length - 8) + apiKey.substring(apiKey.length - 4);
}

// node_modules/axios/lib/helpers/bind.js
function bind(fn, thisArg) {
  return function wrap() {
    return fn.apply(thisArg, arguments);
  };
}

// node_modules/axios/lib/utils.js
var { toString } = Object.prototype;
var { getPrototypeOf } = Object;
var { iterator, toStringTag } = Symbol;
var kindOf = /* @__PURE__ */ ((cache) => (thing) => {
  const str = toString.call(thing);
  return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());
})(/* @__PURE__ */ Object.create(null));
var kindOfTest = (type) => {
  type = type.toLowerCase();
  return (thing) => kindOf(thing) === type;
};
var typeOfTest = (type) => (thing) => typeof thing === type;
var { isArray } = Array;
var isUndefined = typeOfTest("undefined");
function isBuffer(val) {
  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor) && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);
}
var isArrayBuffer = kindOfTest("ArrayBuffer");
function isArrayBufferView(val) {
  let result;
  if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) {
    result = ArrayBuffer.isView(val);
  } else {
    result = val && val.buffer && isArrayBuffer(val.buffer);
  }
  return result;
}
var isString = typeOfTest("string");
var isFunction = typeOfTest("function");
var isNumber = typeOfTest("number");
var isObject = (thing) => thing !== null && typeof thing === "object";
var isBoolean = (thing) => thing === true || thing === false;
var isPlainObject = (val) => {
  if (kindOf(val) !== "object") {
    return false;
  }
  const prototype3 = getPrototypeOf(val);
  return (prototype3 === null || prototype3 === Object.prototype || Object.getPrototypeOf(prototype3) === null) && !(toStringTag in val) && !(iterator in val);
};
var isDate = kindOfTest("Date");
var isFile = kindOfTest("File");
var isBlob = kindOfTest("Blob");
var isFileList = kindOfTest("FileList");
var isStream = (val) => isObject(val) && isFunction(val.pipe);
var isFormData = (thing) => {
  let kind;
  return thing && (typeof FormData === "function" && thing instanceof FormData || isFunction(thing.append) && ((kind = kindOf(thing)) === "formdata" || // detect form-data instance
  kind === "object" && isFunction(thing.toString) && thing.toString() === "[object FormData]"));
};
var isURLSearchParams = kindOfTest("URLSearchParams");
var [isReadableStream, isRequest, isResponse, isHeaders] = ["ReadableStream", "Request", "Response", "Headers"].map(kindOfTest);
var trim = (str) => str.trim ? str.trim() : str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
function forEach(obj, fn, { allOwnKeys = false } = {}) {
  if (obj === null || typeof obj === "undefined") {
    return;
  }
  let i;
  let l;
  if (typeof obj !== "object") {
    obj = [obj];
  }
  if (isArray(obj)) {
    for (i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);
    const len = keys.length;
    let key;
    for (i = 0; i < len; i++) {
      key = keys[i];
      fn.call(null, obj[key], key, obj);
    }
  }
}
function findKey(obj, key) {
  key = key.toLowerCase();
  const keys = Object.keys(obj);
  let i = keys.length;
  let _key;
  while (i-- > 0) {
    _key = keys[i];
    if (key === _key.toLowerCase()) {
      return _key;
    }
  }
  return null;
}
var _global = (() => {
  if (typeof globalThis !== "undefined")
    return globalThis;
  return typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : global;
})();
var isContextDefined = (context) => !isUndefined(context) && context !== _global;
function merge() {
  const { caseless } = isContextDefined(this) && this || {};
  const result = {};
  const assignValue = (val, key) => {
    const targetKey = caseless && findKey(result, key) || key;
    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {
      result[targetKey] = merge(result[targetKey], val);
    } else if (isPlainObject(val)) {
      result[targetKey] = merge({}, val);
    } else if (isArray(val)) {
      result[targetKey] = val.slice();
    } else {
      result[targetKey] = val;
    }
  };
  for (let i = 0, l = arguments.length; i < l; i++) {
    arguments[i] && forEach(arguments[i], assignValue);
  }
  return result;
}
var extend = (a, b, thisArg, { allOwnKeys } = {}) => {
  forEach(b, (val, key) => {
    if (thisArg && isFunction(val)) {
      a[key] = bind(val, thisArg);
    } else {
      a[key] = val;
    }
  }, { allOwnKeys });
  return a;
};
var stripBOM = (content) => {
  if (content.charCodeAt(0) === 65279) {
    content = content.slice(1);
  }
  return content;
};
var inherits = (constructor, superConstructor, props, descriptors2) => {
  constructor.prototype = Object.create(superConstructor.prototype, descriptors2);
  constructor.prototype.constructor = constructor;
  Object.defineProperty(constructor, "super", {
    value: superConstructor.prototype
  });
  props && Object.assign(constructor.prototype, props);
};
var toFlatObject = (sourceObj, destObj, filter2, propFilter) => {
  let props;
  let i;
  let prop;
  const merged = {};
  destObj = destObj || {};
  if (sourceObj == null)
    return destObj;
  do {
    props = Object.getOwnPropertyNames(sourceObj);
    i = props.length;
    while (i-- > 0) {
      prop = props[i];
      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {
        destObj[prop] = sourceObj[prop];
        merged[prop] = true;
      }
    }
    sourceObj = filter2 !== false && getPrototypeOf(sourceObj);
  } while (sourceObj && (!filter2 || filter2(sourceObj, destObj)) && sourceObj !== Object.prototype);
  return destObj;
};
var endsWith = (str, searchString, position) => {
  str = String(str);
  if (position === void 0 || position > str.length) {
    position = str.length;
  }
  position -= searchString.length;
  const lastIndex = str.indexOf(searchString, position);
  return lastIndex !== -1 && lastIndex === position;
};
var toArray = (thing) => {
  if (!thing)
    return null;
  if (isArray(thing))
    return thing;
  let i = thing.length;
  if (!isNumber(i))
    return null;
  const arr = new Array(i);
  while (i-- > 0) {
    arr[i] = thing[i];
  }
  return arr;
};
var isTypedArray = /* @__PURE__ */ ((TypedArray) => {
  return (thing) => {
    return TypedArray && thing instanceof TypedArray;
  };
})(typeof Uint8Array !== "undefined" && getPrototypeOf(Uint8Array));
var forEachEntry = (obj, fn) => {
  const generator = obj && obj[iterator];
  const _iterator = generator.call(obj);
  let result;
  while ((result = _iterator.next()) && !result.done) {
    const pair = result.value;
    fn.call(obj, pair[0], pair[1]);
  }
};
var matchAll = (regExp, str) => {
  let matches;
  const arr = [];
  while ((matches = regExp.exec(str)) !== null) {
    arr.push(matches);
  }
  return arr;
};
var isHTMLForm = kindOfTest("HTMLFormElement");
var toCamelCase = (str) => {
  return str.toLowerCase().replace(
    /[-_\s]([a-z\d])(\w*)/g,
    function replacer(m, p1, p2) {
      return p1.toUpperCase() + p2;
    }
  );
};
var hasOwnProperty = (({ hasOwnProperty: hasOwnProperty2 }) => (obj, prop) => hasOwnProperty2.call(obj, prop))(Object.prototype);
var isRegExp = kindOfTest("RegExp");
var reduceDescriptors = (obj, reducer) => {
  const descriptors2 = Object.getOwnPropertyDescriptors(obj);
  const reducedDescriptors = {};
  forEach(descriptors2, (descriptor, name) => {
    let ret;
    if ((ret = reducer(descriptor, name, obj)) !== false) {
      reducedDescriptors[name] = ret || descriptor;
    }
  });
  Object.defineProperties(obj, reducedDescriptors);
};
var freezeMethods = (obj) => {
  reduceDescriptors(obj, (descriptor, name) => {
    if (isFunction(obj) && ["arguments", "caller", "callee"].indexOf(name) !== -1) {
      return false;
    }
    const value = obj[name];
    if (!isFunction(value))
      return;
    descriptor.enumerable = false;
    if ("writable" in descriptor) {
      descriptor.writable = false;
      return;
    }
    if (!descriptor.set) {
      descriptor.set = () => {
        throw Error("Can not rewrite read-only method '" + name + "'");
      };
    }
  });
};
var toObjectSet = (arrayOrString, delimiter) => {
  const obj = {};
  const define = (arr) => {
    arr.forEach((value) => {
      obj[value] = true;
    });
  };
  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));
  return obj;
};
var noop = () => {
};
var toFiniteNumber = (value, defaultValue) => {
  return value != null && Number.isFinite(value = +value) ? value : defaultValue;
};
function isSpecCompliantForm(thing) {
  return !!(thing && isFunction(thing.append) && thing[toStringTag] === "FormData" && thing[iterator]);
}
var toJSONObject = (obj) => {
  const stack = new Array(10);
  const visit = (source, i) => {
    if (isObject(source)) {
      if (stack.indexOf(source) >= 0) {
        return;
      }
      if (!("toJSON" in source)) {
        stack[i] = source;
        const target = isArray(source) ? [] : {};
        forEach(source, (value, key) => {
          const reducedValue = visit(value, i + 1);
          !isUndefined(reducedValue) && (target[key] = reducedValue);
        });
        stack[i] = void 0;
        return target;
      }
    }
    return source;
  };
  return visit(obj, 0);
};
var isAsyncFn = kindOfTest("AsyncFunction");
var isThenable = (thing) => thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);
var _setImmediate = ((setImmediateSupported, postMessageSupported) => {
  if (setImmediateSupported) {
    return setImmediate;
  }
  return postMessageSupported ? ((token, callbacks) => {
    _global.addEventListener("message", ({ source, data }) => {
      if (source === _global && data === token) {
        callbacks.length && callbacks.shift()();
      }
    }, false);
    return (cb) => {
      callbacks.push(cb);
      _global.postMessage(token, "*");
    };
  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);
})(
  typeof setImmediate === "function",
  isFunction(_global.postMessage)
);
var asap = typeof queueMicrotask !== "undefined" ? queueMicrotask.bind(_global) : typeof process !== "undefined" && process.nextTick || _setImmediate;
var isIterable = (thing) => thing != null && isFunction(thing[iterator]);
var utils_default = {
  isArray,
  isArrayBuffer,
  isBuffer,
  isFormData,
  isArrayBufferView,
  isString,
  isNumber,
  isBoolean,
  isObject,
  isPlainObject,
  isReadableStream,
  isRequest,
  isResponse,
  isHeaders,
  isUndefined,
  isDate,
  isFile,
  isBlob,
  isRegExp,
  isFunction,
  isStream,
  isURLSearchParams,
  isTypedArray,
  isFileList,
  forEach,
  merge,
  extend,
  trim,
  stripBOM,
  inherits,
  toFlatObject,
  kindOf,
  kindOfTest,
  endsWith,
  toArray,
  forEachEntry,
  matchAll,
  isHTMLForm,
  hasOwnProperty,
  hasOwnProp: hasOwnProperty,
  // an alias to avoid ESLint no-prototype-builtins detection
  reduceDescriptors,
  freezeMethods,
  toObjectSet,
  toCamelCase,
  noop,
  toFiniteNumber,
  findKey,
  global: _global,
  isContextDefined,
  isSpecCompliantForm,
  toJSONObject,
  isAsyncFn,
  isThenable,
  setImmediate: _setImmediate,
  asap,
  isIterable
};

// node_modules/axios/lib/core/AxiosError.js
function AxiosError(message, code, config, request, response) {
  Error.call(this);
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, this.constructor);
  } else {
    this.stack = new Error().stack;
  }
  this.message = message;
  this.name = "AxiosError";
  code && (this.code = code);
  config && (this.config = config);
  request && (this.request = request);
  if (response) {
    this.response = response;
    this.status = response.status ? response.status : null;
  }
}
utils_default.inherits(AxiosError, Error, {
  toJSON: function toJSON() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: utils_default.toJSONObject(this.config),
      code: this.code,
      status: this.status
    };
  }
});
var prototype = AxiosError.prototype;
var descriptors = {};
[
  "ERR_BAD_OPTION_VALUE",
  "ERR_BAD_OPTION",
  "ECONNABORTED",
  "ETIMEDOUT",
  "ERR_NETWORK",
  "ERR_FR_TOO_MANY_REDIRECTS",
  "ERR_DEPRECATED",
  "ERR_BAD_RESPONSE",
  "ERR_BAD_REQUEST",
  "ERR_CANCELED",
  "ERR_NOT_SUPPORT",
  "ERR_INVALID_URL"
  // eslint-disable-next-line func-names
].forEach((code) => {
  descriptors[code] = { value: code };
});
Object.defineProperties(AxiosError, descriptors);
Object.defineProperty(prototype, "isAxiosError", { value: true });
AxiosError.from = (error, code, config, request, response, customProps) => {
  const axiosError = Object.create(prototype);
  utils_default.toFlatObject(error, axiosError, function filter2(obj) {
    return obj !== Error.prototype;
  }, (prop) => {
    return prop !== "isAxiosError";
  });
  AxiosError.call(axiosError, error.message, code, config, request, response);
  axiosError.cause = error;
  axiosError.name = error.name;
  customProps && Object.assign(axiosError, customProps);
  return axiosError;
};
var AxiosError_default = AxiosError;

// node_modules/axios/lib/helpers/null.js
var null_default = null;

// node_modules/axios/lib/helpers/toFormData.js
function isVisitable(thing) {
  return utils_default.isPlainObject(thing) || utils_default.isArray(thing);
}
function removeBrackets(key) {
  return utils_default.endsWith(key, "[]") ? key.slice(0, -2) : key;
}
function renderKey(path, key, dots) {
  if (!path)
    return key;
  return path.concat(key).map(function each(token, i) {
    token = removeBrackets(token);
    return !dots && i ? "[" + token + "]" : token;
  }).join(dots ? "." : "");
}
function isFlatArray(arr) {
  return utils_default.isArray(arr) && !arr.some(isVisitable);
}
var predicates = utils_default.toFlatObject(utils_default, {}, null, function filter(prop) {
  return /^is[A-Z]/.test(prop);
});
function toFormData(obj, formData, options) {
  if (!utils_default.isObject(obj)) {
    throw new TypeError("target must be an object");
  }
  formData = formData || new (null_default || FormData)();
  options = utils_default.toFlatObject(options, {
    metaTokens: true,
    dots: false,
    indexes: false
  }, false, function defined(option, source) {
    return !utils_default.isUndefined(source[option]);
  });
  const metaTokens = options.metaTokens;
  const visitor = options.visitor || defaultVisitor;
  const dots = options.dots;
  const indexes = options.indexes;
  const _Blob = options.Blob || typeof Blob !== "undefined" && Blob;
  const useBlob = _Blob && utils_default.isSpecCompliantForm(formData);
  if (!utils_default.isFunction(visitor)) {
    throw new TypeError("visitor must be a function");
  }
  function convertValue(value) {
    if (value === null)
      return "";
    if (utils_default.isDate(value)) {
      return value.toISOString();
    }
    if (utils_default.isBoolean(value)) {
      return value.toString();
    }
    if (!useBlob && utils_default.isBlob(value)) {
      throw new AxiosError_default("Blob is not supported. Use a Buffer instead.");
    }
    if (utils_default.isArrayBuffer(value) || utils_default.isTypedArray(value)) {
      return useBlob && typeof Blob === "function" ? new Blob([value]) : Buffer.from(value);
    }
    return value;
  }
  function defaultVisitor(value, key, path) {
    let arr = value;
    if (value && !path && typeof value === "object") {
      if (utils_default.endsWith(key, "{}")) {
        key = metaTokens ? key : key.slice(0, -2);
        value = JSON.stringify(value);
      } else if (utils_default.isArray(value) && isFlatArray(value) || (utils_default.isFileList(value) || utils_default.endsWith(key, "[]")) && (arr = utils_default.toArray(value))) {
        key = removeBrackets(key);
        arr.forEach(function each(el, index) {
          !(utils_default.isUndefined(el) || el === null) && formData.append(
            // eslint-disable-next-line no-nested-ternary
            indexes === true ? renderKey([key], index, dots) : indexes === null ? key : key + "[]",
            convertValue(el)
          );
        });
        return false;
      }
    }
    if (isVisitable(value)) {
      return true;
    }
    formData.append(renderKey(path, key, dots), convertValue(value));
    return false;
  }
  const stack = [];
  const exposedHelpers = Object.assign(predicates, {
    defaultVisitor,
    convertValue,
    isVisitable
  });
  function build(value, path) {
    if (utils_default.isUndefined(value))
      return;
    if (stack.indexOf(value) !== -1) {
      throw Error("Circular reference detected in " + path.join("."));
    }
    stack.push(value);
    utils_default.forEach(value, function each(el, key) {
      const result = !(utils_default.isUndefined(el) || el === null) && visitor.call(
        formData,
        el,
        utils_default.isString(key) ? key.trim() : key,
        path,
        exposedHelpers
      );
      if (result === true) {
        build(el, path ? path.concat(key) : [key]);
      }
    });
    stack.pop();
  }
  if (!utils_default.isObject(obj)) {
    throw new TypeError("data must be an object");
  }
  build(obj);
  return formData;
}
var toFormData_default = toFormData;

// node_modules/axios/lib/helpers/AxiosURLSearchParams.js
function encode(str) {
  const charMap = {
    "!": "%21",
    "'": "%27",
    "(": "%28",
    ")": "%29",
    "~": "%7E",
    "%20": "+",
    "%00": "\0"
  };
  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {
    return charMap[match];
  });
}
function AxiosURLSearchParams(params, options) {
  this._pairs = [];
  params && toFormData_default(params, this, options);
}
var prototype2 = AxiosURLSearchParams.prototype;
prototype2.append = function append(name, value) {
  this._pairs.push([name, value]);
};
prototype2.toString = function toString2(encoder) {
  const _encode = encoder ? function(value) {
    return encoder.call(this, value, encode);
  } : encode;
  return this._pairs.map(function each(pair) {
    return _encode(pair[0]) + "=" + _encode(pair[1]);
  }, "").join("&");
};
var AxiosURLSearchParams_default = AxiosURLSearchParams;

// node_modules/axios/lib/helpers/buildURL.js
function encode2(val) {
  return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
function buildURL(url, params, options) {
  if (!params) {
    return url;
  }
  const _encode = options && options.encode || encode2;
  if (utils_default.isFunction(options)) {
    options = {
      serialize: options
    };
  }
  const serializeFn = options && options.serialize;
  let serializedParams;
  if (serializeFn) {
    serializedParams = serializeFn(params, options);
  } else {
    serializedParams = utils_default.isURLSearchParams(params) ? params.toString() : new AxiosURLSearchParams_default(params, options).toString(_encode);
  }
  if (serializedParams) {
    const hashmarkIndex = url.indexOf("#");
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }
    url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
  }
  return url;
}

// node_modules/axios/lib/core/InterceptorManager.js
var InterceptorManager = class {
  constructor() {
    this.handlers = [];
  }
  /**
   * Add a new interceptor to the stack
   *
   * @param {Function} fulfilled The function to handle `then` for a `Promise`
   * @param {Function} rejected The function to handle `reject` for a `Promise`
   *
   * @return {Number} An ID used to remove interceptor later
   */
  use(fulfilled, rejected, options) {
    this.handlers.push({
      fulfilled,
      rejected,
      synchronous: options ? options.synchronous : false,
      runWhen: options ? options.runWhen : null
    });
    return this.handlers.length - 1;
  }
  /**
   * Remove an interceptor from the stack
   *
   * @param {Number} id The ID that was returned by `use`
   *
   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise
   */
  eject(id) {
    if (this.handlers[id]) {
      this.handlers[id] = null;
    }
  }
  /**
   * Clear all interceptors from the stack
   *
   * @returns {void}
   */
  clear() {
    if (this.handlers) {
      this.handlers = [];
    }
  }
  /**
   * Iterate over all the registered interceptors
   *
   * This method is particularly useful for skipping over any
   * interceptors that may have become `null` calling `eject`.
   *
   * @param {Function} fn The function to call for each interceptor
   *
   * @returns {void}
   */
  forEach(fn) {
    utils_default.forEach(this.handlers, function forEachHandler(h) {
      if (h !== null) {
        fn(h);
      }
    });
  }
};
var InterceptorManager_default = InterceptorManager;

// node_modules/axios/lib/defaults/transitional.js
var transitional_default = {
  silentJSONParsing: true,
  forcedJSONParsing: true,
  clarifyTimeoutError: false
};

// node_modules/axios/lib/platform/browser/classes/URLSearchParams.js
var URLSearchParams_default = typeof URLSearchParams !== "undefined" ? URLSearchParams : AxiosURLSearchParams_default;

// node_modules/axios/lib/platform/browser/classes/FormData.js
var FormData_default = typeof FormData !== "undefined" ? FormData : null;

// node_modules/axios/lib/platform/browser/classes/Blob.js
var Blob_default = typeof Blob !== "undefined" ? Blob : null;

// node_modules/axios/lib/platform/browser/index.js
var browser_default = {
  isBrowser: true,
  classes: {
    URLSearchParams: URLSearchParams_default,
    FormData: FormData_default,
    Blob: Blob_default
  },
  protocols: ["http", "https", "file", "blob", "url", "data"]
};

// node_modules/axios/lib/platform/common/utils.js
var utils_exports = {};
__export(utils_exports, {
  hasBrowserEnv: () => hasBrowserEnv,
  hasStandardBrowserEnv: () => hasStandardBrowserEnv,
  hasStandardBrowserWebWorkerEnv: () => hasStandardBrowserWebWorkerEnv,
  navigator: () => _navigator,
  origin: () => origin
});
var hasBrowserEnv = typeof window !== "undefined" && typeof document !== "undefined";
var _navigator = typeof navigator === "object" && navigator || void 0;
var hasStandardBrowserEnv = hasBrowserEnv && (!_navigator || ["ReactNative", "NativeScript", "NS"].indexOf(_navigator.product) < 0);
var hasStandardBrowserWebWorkerEnv = (() => {
  return typeof WorkerGlobalScope !== "undefined" && // eslint-disable-next-line no-undef
  self instanceof WorkerGlobalScope && typeof self.importScripts === "function";
})();
var origin = hasBrowserEnv && window.location.href || "http://localhost";

// node_modules/axios/lib/platform/index.js
var platform_default = {
  ...utils_exports,
  ...browser_default
};

// node_modules/axios/lib/helpers/toURLEncodedForm.js
function toURLEncodedForm(data, options) {
  return toFormData_default(data, new platform_default.classes.URLSearchParams(), Object.assign({
    visitor: function(value, key, path, helpers) {
      if (platform_default.isNode && utils_default.isBuffer(value)) {
        this.append(key, value.toString("base64"));
        return false;
      }
      return helpers.defaultVisitor.apply(this, arguments);
    }
  }, options));
}

// node_modules/axios/lib/helpers/formDataToJSON.js
function parsePropPath(name) {
  return utils_default.matchAll(/\w+|\[(\w*)]/g, name).map((match) => {
    return match[0] === "[]" ? "" : match[1] || match[0];
  });
}
function arrayToObject(arr) {
  const obj = {};
  const keys = Object.keys(arr);
  let i;
  const len = keys.length;
  let key;
  for (i = 0; i < len; i++) {
    key = keys[i];
    obj[key] = arr[key];
  }
  return obj;
}
function formDataToJSON(formData) {
  function buildPath(path, value, target, index) {
    let name = path[index++];
    if (name === "__proto__")
      return true;
    const isNumericKey = Number.isFinite(+name);
    const isLast = index >= path.length;
    name = !name && utils_default.isArray(target) ? target.length : name;
    if (isLast) {
      if (utils_default.hasOwnProp(target, name)) {
        target[name] = [target[name], value];
      } else {
        target[name] = value;
      }
      return !isNumericKey;
    }
    if (!target[name] || !utils_default.isObject(target[name])) {
      target[name] = [];
    }
    const result = buildPath(path, value, target[name], index);
    if (result && utils_default.isArray(target[name])) {
      target[name] = arrayToObject(target[name]);
    }
    return !isNumericKey;
  }
  if (utils_default.isFormData(formData) && utils_default.isFunction(formData.entries)) {
    const obj = {};
    utils_default.forEachEntry(formData, (name, value) => {
      buildPath(parsePropPath(name), value, obj, 0);
    });
    return obj;
  }
  return null;
}
var formDataToJSON_default = formDataToJSON;

// node_modules/axios/lib/defaults/index.js
function stringifySafely(rawValue, parser, encoder) {
  if (utils_default.isString(rawValue)) {
    try {
      (parser || JSON.parse)(rawValue);
      return utils_default.trim(rawValue);
    } catch (e) {
      if (e.name !== "SyntaxError") {
        throw e;
      }
    }
  }
  return (encoder || JSON.stringify)(rawValue);
}
var defaults = {
  transitional: transitional_default,
  adapter: ["xhr", "http", "fetch"],
  transformRequest: [function transformRequest(data, headers) {
    const contentType = headers.getContentType() || "";
    const hasJSONContentType = contentType.indexOf("application/json") > -1;
    const isObjectPayload = utils_default.isObject(data);
    if (isObjectPayload && utils_default.isHTMLForm(data)) {
      data = new FormData(data);
    }
    const isFormData2 = utils_default.isFormData(data);
    if (isFormData2) {
      return hasJSONContentType ? JSON.stringify(formDataToJSON_default(data)) : data;
    }
    if (utils_default.isArrayBuffer(data) || utils_default.isBuffer(data) || utils_default.isStream(data) || utils_default.isFile(data) || utils_default.isBlob(data) || utils_default.isReadableStream(data)) {
      return data;
    }
    if (utils_default.isArrayBufferView(data)) {
      return data.buffer;
    }
    if (utils_default.isURLSearchParams(data)) {
      headers.setContentType("application/x-www-form-urlencoded;charset=utf-8", false);
      return data.toString();
    }
    let isFileList2;
    if (isObjectPayload) {
      if (contentType.indexOf("application/x-www-form-urlencoded") > -1) {
        return toURLEncodedForm(data, this.formSerializer).toString();
      }
      if ((isFileList2 = utils_default.isFileList(data)) || contentType.indexOf("multipart/form-data") > -1) {
        const _FormData = this.env && this.env.FormData;
        return toFormData_default(
          isFileList2 ? { "files[]": data } : data,
          _FormData && new _FormData(),
          this.formSerializer
        );
      }
    }
    if (isObjectPayload || hasJSONContentType) {
      headers.setContentType("application/json", false);
      return stringifySafely(data);
    }
    return data;
  }],
  transformResponse: [function transformResponse(data) {
    const transitional2 = this.transitional || defaults.transitional;
    const forcedJSONParsing = transitional2 && transitional2.forcedJSONParsing;
    const JSONRequested = this.responseType === "json";
    if (utils_default.isResponse(data) || utils_default.isReadableStream(data)) {
      return data;
    }
    if (data && utils_default.isString(data) && (forcedJSONParsing && !this.responseType || JSONRequested)) {
      const silentJSONParsing = transitional2 && transitional2.silentJSONParsing;
      const strictJSONParsing = !silentJSONParsing && JSONRequested;
      try {
        return JSON.parse(data);
      } catch (e) {
        if (strictJSONParsing) {
          if (e.name === "SyntaxError") {
            throw AxiosError_default.from(e, AxiosError_default.ERR_BAD_RESPONSE, this, null, this.response);
          }
          throw e;
        }
      }
    }
    return data;
  }],
  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  env: {
    FormData: platform_default.classes.FormData,
    Blob: platform_default.classes.Blob
  },
  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  },
  headers: {
    common: {
      "Accept": "application/json, text/plain, */*",
      "Content-Type": void 0
    }
  }
};
utils_default.forEach(["delete", "get", "head", "post", "put", "patch"], (method) => {
  defaults.headers[method] = {};
});
var defaults_default = defaults;

// node_modules/axios/lib/helpers/parseHeaders.js
var ignoreDuplicateOf = utils_default.toObjectSet([
  "age",
  "authorization",
  "content-length",
  "content-type",
  "etag",
  "expires",
  "from",
  "host",
  "if-modified-since",
  "if-unmodified-since",
  "last-modified",
  "location",
  "max-forwards",
  "proxy-authorization",
  "referer",
  "retry-after",
  "user-agent"
]);
var parseHeaders_default = (rawHeaders) => {
  const parsed = {};
  let key;
  let val;
  let i;
  rawHeaders && rawHeaders.split("\n").forEach(function parser(line) {
    i = line.indexOf(":");
    key = line.substring(0, i).trim().toLowerCase();
    val = line.substring(i + 1).trim();
    if (!key || parsed[key] && ignoreDuplicateOf[key]) {
      return;
    }
    if (key === "set-cookie") {
      if (parsed[key]) {
        parsed[key].push(val);
      } else {
        parsed[key] = [val];
      }
    } else {
      parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
    }
  });
  return parsed;
};

// node_modules/axios/lib/core/AxiosHeaders.js
var $internals = Symbol("internals");
function normalizeHeader(header) {
  return header && String(header).trim().toLowerCase();
}
function normalizeValue(value) {
  if (value === false || value == null) {
    return value;
  }
  return utils_default.isArray(value) ? value.map(normalizeValue) : String(value);
}
function parseTokens(str) {
  const tokens = /* @__PURE__ */ Object.create(null);
  const tokensRE = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;
  let match;
  while (match = tokensRE.exec(str)) {
    tokens[match[1]] = match[2];
  }
  return tokens;
}
var isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());
function matchHeaderValue(context, value, header, filter2, isHeaderNameFilter) {
  if (utils_default.isFunction(filter2)) {
    return filter2.call(this, value, header);
  }
  if (isHeaderNameFilter) {
    value = header;
  }
  if (!utils_default.isString(value))
    return;
  if (utils_default.isString(filter2)) {
    return value.indexOf(filter2) !== -1;
  }
  if (utils_default.isRegExp(filter2)) {
    return filter2.test(value);
  }
}
function formatHeader(header) {
  return header.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (w, char, str) => {
    return char.toUpperCase() + str;
  });
}
function buildAccessors(obj, header) {
  const accessorName = utils_default.toCamelCase(" " + header);
  ["get", "set", "has"].forEach((methodName) => {
    Object.defineProperty(obj, methodName + accessorName, {
      value: function(arg1, arg2, arg3) {
        return this[methodName].call(this, header, arg1, arg2, arg3);
      },
      configurable: true
    });
  });
}
var AxiosHeaders = class {
  constructor(headers) {
    headers && this.set(headers);
  }
  set(header, valueOrRewrite, rewrite) {
    const self2 = this;
    function setHeader(_value, _header, _rewrite) {
      const lHeader = normalizeHeader(_header);
      if (!lHeader) {
        throw new Error("header name must be a non-empty string");
      }
      const key = utils_default.findKey(self2, lHeader);
      if (!key || self2[key] === void 0 || _rewrite === true || _rewrite === void 0 && self2[key] !== false) {
        self2[key || _header] = normalizeValue(_value);
      }
    }
    const setHeaders = (headers, _rewrite) => utils_default.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));
    if (utils_default.isPlainObject(header) || header instanceof this.constructor) {
      setHeaders(header, valueOrRewrite);
    } else if (utils_default.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {
      setHeaders(parseHeaders_default(header), valueOrRewrite);
    } else if (utils_default.isObject(header) && utils_default.isIterable(header)) {
      let obj = {}, dest, key;
      for (const entry of header) {
        if (!utils_default.isArray(entry)) {
          throw TypeError("Object iterator must return a key-value pair");
        }
        obj[key = entry[0]] = (dest = obj[key]) ? utils_default.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]] : entry[1];
      }
      setHeaders(obj, valueOrRewrite);
    } else {
      header != null && setHeader(valueOrRewrite, header, rewrite);
    }
    return this;
  }
  get(header, parser) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils_default.findKey(this, header);
      if (key) {
        const value = this[key];
        if (!parser) {
          return value;
        }
        if (parser === true) {
          return parseTokens(value);
        }
        if (utils_default.isFunction(parser)) {
          return parser.call(this, value, key);
        }
        if (utils_default.isRegExp(parser)) {
          return parser.exec(value);
        }
        throw new TypeError("parser must be boolean|regexp|function");
      }
    }
  }
  has(header, matcher) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils_default.findKey(this, header);
      return !!(key && this[key] !== void 0 && (!matcher || matchHeaderValue(this, this[key], key, matcher)));
    }
    return false;
  }
  delete(header, matcher) {
    const self2 = this;
    let deleted = false;
    function deleteHeader(_header) {
      _header = normalizeHeader(_header);
      if (_header) {
        const key = utils_default.findKey(self2, _header);
        if (key && (!matcher || matchHeaderValue(self2, self2[key], key, matcher))) {
          delete self2[key];
          deleted = true;
        }
      }
    }
    if (utils_default.isArray(header)) {
      header.forEach(deleteHeader);
    } else {
      deleteHeader(header);
    }
    return deleted;
  }
  clear(matcher) {
    const keys = Object.keys(this);
    let i = keys.length;
    let deleted = false;
    while (i--) {
      const key = keys[i];
      if (!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {
        delete this[key];
        deleted = true;
      }
    }
    return deleted;
  }
  normalize(format) {
    const self2 = this;
    const headers = {};
    utils_default.forEach(this, (value, header) => {
      const key = utils_default.findKey(headers, header);
      if (key) {
        self2[key] = normalizeValue(value);
        delete self2[header];
        return;
      }
      const normalized = format ? formatHeader(header) : String(header).trim();
      if (normalized !== header) {
        delete self2[header];
      }
      self2[normalized] = normalizeValue(value);
      headers[normalized] = true;
    });
    return this;
  }
  concat(...targets) {
    return this.constructor.concat(this, ...targets);
  }
  toJSON(asStrings) {
    const obj = /* @__PURE__ */ Object.create(null);
    utils_default.forEach(this, (value, header) => {
      value != null && value !== false && (obj[header] = asStrings && utils_default.isArray(value) ? value.join(", ") : value);
    });
    return obj;
  }
  [Symbol.iterator]() {
    return Object.entries(this.toJSON())[Symbol.iterator]();
  }
  toString() {
    return Object.entries(this.toJSON()).map(([header, value]) => header + ": " + value).join("\n");
  }
  getSetCookie() {
    return this.get("set-cookie") || [];
  }
  get [Symbol.toStringTag]() {
    return "AxiosHeaders";
  }
  static from(thing) {
    return thing instanceof this ? thing : new this(thing);
  }
  static concat(first, ...targets) {
    const computed = new this(first);
    targets.forEach((target) => computed.set(target));
    return computed;
  }
  static accessor(header) {
    const internals = this[$internals] = this[$internals] = {
      accessors: {}
    };
    const accessors = internals.accessors;
    const prototype3 = this.prototype;
    function defineAccessor(_header) {
      const lHeader = normalizeHeader(_header);
      if (!accessors[lHeader]) {
        buildAccessors(prototype3, _header);
        accessors[lHeader] = true;
      }
    }
    utils_default.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);
    return this;
  }
};
AxiosHeaders.accessor(["Content-Type", "Content-Length", "Accept", "Accept-Encoding", "User-Agent", "Authorization"]);
utils_default.reduceDescriptors(AxiosHeaders.prototype, ({ value }, key) => {
  let mapped = key[0].toUpperCase() + key.slice(1);
  return {
    get: () => value,
    set(headerValue) {
      this[mapped] = headerValue;
    }
  };
});
utils_default.freezeMethods(AxiosHeaders);
var AxiosHeaders_default = AxiosHeaders;

// node_modules/axios/lib/core/transformData.js
function transformData(fns, response) {
  const config = this || defaults_default;
  const context = response || config;
  const headers = AxiosHeaders_default.from(context.headers);
  let data = context.data;
  utils_default.forEach(fns, function transform(fn) {
    data = fn.call(config, data, headers.normalize(), response ? response.status : void 0);
  });
  headers.normalize();
  return data;
}

// node_modules/axios/lib/cancel/isCancel.js
function isCancel(value) {
  return !!(value && value.__CANCEL__);
}

// node_modules/axios/lib/cancel/CanceledError.js
function CanceledError(message, config, request) {
  AxiosError_default.call(this, message == null ? "canceled" : message, AxiosError_default.ERR_CANCELED, config, request);
  this.name = "CanceledError";
}
utils_default.inherits(CanceledError, AxiosError_default, {
  __CANCEL__: true
});
var CanceledError_default = CanceledError;

// node_modules/axios/lib/core/settle.js
function settle(resolve, reject, response) {
  const validateStatus2 = response.config.validateStatus;
  if (!response.status || !validateStatus2 || validateStatus2(response.status)) {
    resolve(response);
  } else {
    reject(new AxiosError_default(
      "Request failed with status code " + response.status,
      [AxiosError_default.ERR_BAD_REQUEST, AxiosError_default.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],
      response.config,
      response.request,
      response
    ));
  }
}

// node_modules/axios/lib/helpers/parseProtocol.js
function parseProtocol(url) {
  const match = /^([-+\w]{1,25})(:?\/\/|:)/.exec(url);
  return match && match[1] || "";
}

// node_modules/axios/lib/helpers/speedometer.js
function speedometer(samplesCount, min) {
  samplesCount = samplesCount || 10;
  const bytes = new Array(samplesCount);
  const timestamps = new Array(samplesCount);
  let head = 0;
  let tail = 0;
  let firstSampleTS;
  min = min !== void 0 ? min : 1e3;
  return function push(chunkLength) {
    const now = Date.now();
    const startedAt = timestamps[tail];
    if (!firstSampleTS) {
      firstSampleTS = now;
    }
    bytes[head] = chunkLength;
    timestamps[head] = now;
    let i = tail;
    let bytesCount = 0;
    while (i !== head) {
      bytesCount += bytes[i++];
      i = i % samplesCount;
    }
    head = (head + 1) % samplesCount;
    if (head === tail) {
      tail = (tail + 1) % samplesCount;
    }
    if (now - firstSampleTS < min) {
      return;
    }
    const passed = startedAt && now - startedAt;
    return passed ? Math.round(bytesCount * 1e3 / passed) : void 0;
  };
}
var speedometer_default = speedometer;

// node_modules/axios/lib/helpers/throttle.js
function throttle(fn, freq) {
  let timestamp = 0;
  let threshold = 1e3 / freq;
  let lastArgs;
  let timer;
  const invoke = (args, now = Date.now()) => {
    timestamp = now;
    lastArgs = null;
    if (timer) {
      clearTimeout(timer);
      timer = null;
    }
    fn.apply(null, args);
  };
  const throttled = (...args) => {
    const now = Date.now();
    const passed = now - timestamp;
    if (passed >= threshold) {
      invoke(args, now);
    } else {
      lastArgs = args;
      if (!timer) {
        timer = setTimeout(() => {
          timer = null;
          invoke(lastArgs);
        }, threshold - passed);
      }
    }
  };
  const flush = () => lastArgs && invoke(lastArgs);
  return [throttled, flush];
}
var throttle_default = throttle;

// node_modules/axios/lib/helpers/progressEventReducer.js
var progressEventReducer = (listener, isDownloadStream, freq = 3) => {
  let bytesNotified = 0;
  const _speedometer = speedometer_default(50, 250);
  return throttle_default((e) => {
    const loaded = e.loaded;
    const total = e.lengthComputable ? e.total : void 0;
    const progressBytes = loaded - bytesNotified;
    const rate = _speedometer(progressBytes);
    const inRange = loaded <= total;
    bytesNotified = loaded;
    const data = {
      loaded,
      total,
      progress: total ? loaded / total : void 0,
      bytes: progressBytes,
      rate: rate ? rate : void 0,
      estimated: rate && total && inRange ? (total - loaded) / rate : void 0,
      event: e,
      lengthComputable: total != null,
      [isDownloadStream ? "download" : "upload"]: true
    };
    listener(data);
  }, freq);
};
var progressEventDecorator = (total, throttled) => {
  const lengthComputable = total != null;
  return [(loaded) => throttled[0]({
    lengthComputable,
    total,
    loaded
  }), throttled[1]];
};
var asyncDecorator = (fn) => (...args) => utils_default.asap(() => fn(...args));

// node_modules/axios/lib/helpers/isURLSameOrigin.js
var isURLSameOrigin_default = platform_default.hasStandardBrowserEnv ? /* @__PURE__ */ ((origin2, isMSIE) => (url) => {
  url = new URL(url, platform_default.origin);
  return origin2.protocol === url.protocol && origin2.host === url.host && (isMSIE || origin2.port === url.port);
})(
  new URL(platform_default.origin),
  platform_default.navigator && /(msie|trident)/i.test(platform_default.navigator.userAgent)
) : () => true;

// node_modules/axios/lib/helpers/cookies.js
var cookies_default = platform_default.hasStandardBrowserEnv ? (
  // Standard browser envs support document.cookie
  {
    write(name, value, expires, path, domain, secure) {
      const cookie = [name + "=" + encodeURIComponent(value)];
      utils_default.isNumber(expires) && cookie.push("expires=" + new Date(expires).toGMTString());
      utils_default.isString(path) && cookie.push("path=" + path);
      utils_default.isString(domain) && cookie.push("domain=" + domain);
      secure === true && cookie.push("secure");
      document.cookie = cookie.join("; ");
    },
    read(name) {
      const match = document.cookie.match(new RegExp("(^|;\\s*)(" + name + ")=([^;]*)"));
      return match ? decodeURIComponent(match[3]) : null;
    },
    remove(name) {
      this.write(name, "", Date.now() - 864e5);
    }
  }
) : (
  // Non-standard browser env (web workers, react-native) lack needed support.
  {
    write() {
    },
    read() {
      return null;
    },
    remove() {
    }
  }
);

// node_modules/axios/lib/helpers/isAbsoluteURL.js
function isAbsoluteURL(url) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
}

// node_modules/axios/lib/helpers/combineURLs.js
function combineURLs(baseURL, relativeURL) {
  return relativeURL ? baseURL.replace(/\/?\/$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
}

// node_modules/axios/lib/core/buildFullPath.js
function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {
  let isRelativeUrl = !isAbsoluteURL(requestedURL);
  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
}

// node_modules/axios/lib/core/mergeConfig.js
var headersToObject = (thing) => thing instanceof AxiosHeaders_default ? { ...thing } : thing;
function mergeConfig(config1, config2) {
  config2 = config2 || {};
  const config = {};
  function getMergedValue(target, source, prop, caseless) {
    if (utils_default.isPlainObject(target) && utils_default.isPlainObject(source)) {
      return utils_default.merge.call({ caseless }, target, source);
    } else if (utils_default.isPlainObject(source)) {
      return utils_default.merge({}, source);
    } else if (utils_default.isArray(source)) {
      return source.slice();
    }
    return source;
  }
  function mergeDeepProperties(a, b, prop, caseless) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(a, b, prop, caseless);
    } else if (!utils_default.isUndefined(a)) {
      return getMergedValue(void 0, a, prop, caseless);
    }
  }
  function valueFromConfig2(a, b) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(void 0, b);
    }
  }
  function defaultToConfig2(a, b) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(void 0, b);
    } else if (!utils_default.isUndefined(a)) {
      return getMergedValue(void 0, a);
    }
  }
  function mergeDirectKeys(a, b, prop) {
    if (prop in config2) {
      return getMergedValue(a, b);
    } else if (prop in config1) {
      return getMergedValue(void 0, a);
    }
  }
  const mergeMap = {
    url: valueFromConfig2,
    method: valueFromConfig2,
    data: valueFromConfig2,
    baseURL: defaultToConfig2,
    transformRequest: defaultToConfig2,
    transformResponse: defaultToConfig2,
    paramsSerializer: defaultToConfig2,
    timeout: defaultToConfig2,
    timeoutMessage: defaultToConfig2,
    withCredentials: defaultToConfig2,
    withXSRFToken: defaultToConfig2,
    adapter: defaultToConfig2,
    responseType: defaultToConfig2,
    xsrfCookieName: defaultToConfig2,
    xsrfHeaderName: defaultToConfig2,
    onUploadProgress: defaultToConfig2,
    onDownloadProgress: defaultToConfig2,
    decompress: defaultToConfig2,
    maxContentLength: defaultToConfig2,
    maxBodyLength: defaultToConfig2,
    beforeRedirect: defaultToConfig2,
    transport: defaultToConfig2,
    httpAgent: defaultToConfig2,
    httpsAgent: defaultToConfig2,
    cancelToken: defaultToConfig2,
    socketPath: defaultToConfig2,
    responseEncoding: defaultToConfig2,
    validateStatus: mergeDirectKeys,
    headers: (a, b, prop) => mergeDeepProperties(headersToObject(a), headersToObject(b), prop, true)
  };
  utils_default.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {
    const merge2 = mergeMap[prop] || mergeDeepProperties;
    const configValue = merge2(config1[prop], config2[prop], prop);
    utils_default.isUndefined(configValue) && merge2 !== mergeDirectKeys || (config[prop] = configValue);
  });
  return config;
}

// node_modules/axios/lib/helpers/resolveConfig.js
var resolveConfig_default = (config) => {
  const newConfig = mergeConfig({}, config);
  let { data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth } = newConfig;
  newConfig.headers = headers = AxiosHeaders_default.from(headers);
  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);
  if (auth) {
    headers.set(
      "Authorization",
      "Basic " + btoa((auth.username || "") + ":" + (auth.password ? unescape(encodeURIComponent(auth.password)) : ""))
    );
  }
  let contentType;
  if (utils_default.isFormData(data)) {
    if (platform_default.hasStandardBrowserEnv || platform_default.hasStandardBrowserWebWorkerEnv) {
      headers.setContentType(void 0);
    } else if ((contentType = headers.getContentType()) !== false) {
      const [type, ...tokens] = contentType ? contentType.split(";").map((token) => token.trim()).filter(Boolean) : [];
      headers.setContentType([type || "multipart/form-data", ...tokens].join("; "));
    }
  }
  if (platform_default.hasStandardBrowserEnv) {
    withXSRFToken && utils_default.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));
    if (withXSRFToken || withXSRFToken !== false && isURLSameOrigin_default(newConfig.url)) {
      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies_default.read(xsrfCookieName);
      if (xsrfValue) {
        headers.set(xsrfHeaderName, xsrfValue);
      }
    }
  }
  return newConfig;
};

// node_modules/axios/lib/adapters/xhr.js
var isXHRAdapterSupported = typeof XMLHttpRequest !== "undefined";
var xhr_default = isXHRAdapterSupported && function(config) {
  return new Promise(function dispatchXhrRequest(resolve, reject) {
    const _config = resolveConfig_default(config);
    let requestData = _config.data;
    const requestHeaders = AxiosHeaders_default.from(_config.headers).normalize();
    let { responseType, onUploadProgress, onDownloadProgress } = _config;
    let onCanceled;
    let uploadThrottled, downloadThrottled;
    let flushUpload, flushDownload;
    function done() {
      flushUpload && flushUpload();
      flushDownload && flushDownload();
      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);
      _config.signal && _config.signal.removeEventListener("abort", onCanceled);
    }
    let request = new XMLHttpRequest();
    request.open(_config.method.toUpperCase(), _config.url, true);
    request.timeout = _config.timeout;
    function onloadend() {
      if (!request) {
        return;
      }
      const responseHeaders = AxiosHeaders_default.from(
        "getAllResponseHeaders" in request && request.getAllResponseHeaders()
      );
      const responseData = !responseType || responseType === "text" || responseType === "json" ? request.responseText : request.response;
      const response = {
        data: responseData,
        status: request.status,
        statusText: request.statusText,
        headers: responseHeaders,
        config,
        request
      };
      settle(function _resolve(value) {
        resolve(value);
        done();
      }, function _reject(err) {
        reject(err);
        done();
      }, response);
      request = null;
    }
    if ("onloadend" in request) {
      request.onloadend = onloadend;
    } else {
      request.onreadystatechange = function handleLoad() {
        if (!request || request.readyState !== 4) {
          return;
        }
        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf("file:") === 0)) {
          return;
        }
        setTimeout(onloadend);
      };
    }
    request.onabort = function handleAbort() {
      if (!request) {
        return;
      }
      reject(new AxiosError_default("Request aborted", AxiosError_default.ECONNABORTED, config, request));
      request = null;
    };
    request.onerror = function handleError() {
      reject(new AxiosError_default("Network Error", AxiosError_default.ERR_NETWORK, config, request));
      request = null;
    };
    request.ontimeout = function handleTimeout() {
      let timeoutErrorMessage = _config.timeout ? "timeout of " + _config.timeout + "ms exceeded" : "timeout exceeded";
      const transitional2 = _config.transitional || transitional_default;
      if (_config.timeoutErrorMessage) {
        timeoutErrorMessage = _config.timeoutErrorMessage;
      }
      reject(new AxiosError_default(
        timeoutErrorMessage,
        transitional2.clarifyTimeoutError ? AxiosError_default.ETIMEDOUT : AxiosError_default.ECONNABORTED,
        config,
        request
      ));
      request = null;
    };
    requestData === void 0 && requestHeaders.setContentType(null);
    if ("setRequestHeader" in request) {
      utils_default.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {
        request.setRequestHeader(key, val);
      });
    }
    if (!utils_default.isUndefined(_config.withCredentials)) {
      request.withCredentials = !!_config.withCredentials;
    }
    if (responseType && responseType !== "json") {
      request.responseType = _config.responseType;
    }
    if (onDownloadProgress) {
      [downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true);
      request.addEventListener("progress", downloadThrottled);
    }
    if (onUploadProgress && request.upload) {
      [uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress);
      request.upload.addEventListener("progress", uploadThrottled);
      request.upload.addEventListener("loadend", flushUpload);
    }
    if (_config.cancelToken || _config.signal) {
      onCanceled = (cancel) => {
        if (!request) {
          return;
        }
        reject(!cancel || cancel.type ? new CanceledError_default(null, config, request) : cancel);
        request.abort();
        request = null;
      };
      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);
      if (_config.signal) {
        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener("abort", onCanceled);
      }
    }
    const protocol = parseProtocol(_config.url);
    if (protocol && platform_default.protocols.indexOf(protocol) === -1) {
      reject(new AxiosError_default("Unsupported protocol " + protocol + ":", AxiosError_default.ERR_BAD_REQUEST, config));
      return;
    }
    request.send(requestData || null);
  });
};

// node_modules/axios/lib/helpers/composeSignals.js
var composeSignals = (signals, timeout) => {
  const { length } = signals = signals ? signals.filter(Boolean) : [];
  if (timeout || length) {
    let controller = new AbortController();
    let aborted;
    const onabort = function(reason) {
      if (!aborted) {
        aborted = true;
        unsubscribe();
        const err = reason instanceof Error ? reason : this.reason;
        controller.abort(err instanceof AxiosError_default ? err : new CanceledError_default(err instanceof Error ? err.message : err));
      }
    };
    let timer = timeout && setTimeout(() => {
      timer = null;
      onabort(new AxiosError_default(`timeout ${timeout} of ms exceeded`, AxiosError_default.ETIMEDOUT));
    }, timeout);
    const unsubscribe = () => {
      if (signals) {
        timer && clearTimeout(timer);
        timer = null;
        signals.forEach((signal2) => {
          signal2.unsubscribe ? signal2.unsubscribe(onabort) : signal2.removeEventListener("abort", onabort);
        });
        signals = null;
      }
    };
    signals.forEach((signal2) => signal2.addEventListener("abort", onabort));
    const { signal } = controller;
    signal.unsubscribe = () => utils_default.asap(unsubscribe);
    return signal;
  }
};
var composeSignals_default = composeSignals;

// node_modules/axios/lib/helpers/trackStream.js
var streamChunk = function* (chunk, chunkSize) {
  let len = chunk.byteLength;
  if (!chunkSize || len < chunkSize) {
    yield chunk;
    return;
  }
  let pos = 0;
  let end;
  while (pos < len) {
    end = pos + chunkSize;
    yield chunk.slice(pos, end);
    pos = end;
  }
};
var readBytes = async function* (iterable, chunkSize) {
  for await (const chunk of readStream(iterable)) {
    yield* streamChunk(chunk, chunkSize);
  }
};
var readStream = async function* (stream) {
  if (stream[Symbol.asyncIterator]) {
    yield* stream;
    return;
  }
  const reader = stream.getReader();
  try {
    for (; ; ) {
      const { done, value } = await reader.read();
      if (done) {
        break;
      }
      yield value;
    }
  } finally {
    await reader.cancel();
  }
};
var trackStream = (stream, chunkSize, onProgress, onFinish) => {
  const iterator2 = readBytes(stream, chunkSize);
  let bytes = 0;
  let done;
  let _onFinish = (e) => {
    if (!done) {
      done = true;
      onFinish && onFinish(e);
    }
  };
  return new ReadableStream({
    async pull(controller) {
      try {
        const { done: done2, value } = await iterator2.next();
        if (done2) {
          _onFinish();
          controller.close();
          return;
        }
        let len = value.byteLength;
        if (onProgress) {
          let loadedBytes = bytes += len;
          onProgress(loadedBytes);
        }
        controller.enqueue(new Uint8Array(value));
      } catch (err) {
        _onFinish(err);
        throw err;
      }
    },
    cancel(reason) {
      _onFinish(reason);
      return iterator2.return();
    }
  }, {
    highWaterMark: 2
  });
};

// node_modules/axios/lib/adapters/fetch.js
var isFetchSupported = typeof fetch === "function" && typeof Request === "function" && typeof Response === "function";
var isReadableStreamSupported = isFetchSupported && typeof ReadableStream === "function";
var encodeText = isFetchSupported && (typeof TextEncoder === "function" ? /* @__PURE__ */ ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) : async (str) => new Uint8Array(await new Response(str).arrayBuffer()));
var test = (fn, ...args) => {
  try {
    return !!fn(...args);
  } catch (e) {
    return false;
  }
};
var supportsRequestStream = isReadableStreamSupported && test(() => {
  let duplexAccessed = false;
  const hasContentType = new Request(platform_default.origin, {
    body: new ReadableStream(),
    method: "POST",
    get duplex() {
      duplexAccessed = true;
      return "half";
    }
  }).headers.has("Content-Type");
  return duplexAccessed && !hasContentType;
});
var DEFAULT_CHUNK_SIZE = 64 * 1024;
var supportsResponseStream = isReadableStreamSupported && test(() => utils_default.isReadableStream(new Response("").body));
var resolvers = {
  stream: supportsResponseStream && ((res) => res.body)
};
isFetchSupported && ((res) => {
  ["text", "arrayBuffer", "blob", "formData", "stream"].forEach((type) => {
    !resolvers[type] && (resolvers[type] = utils_default.isFunction(res[type]) ? (res2) => res2[type]() : (_, config) => {
      throw new AxiosError_default(`Response type '${type}' is not supported`, AxiosError_default.ERR_NOT_SUPPORT, config);
    });
  });
})(new Response());
var getBodyLength = async (body) => {
  if (body == null) {
    return 0;
  }
  if (utils_default.isBlob(body)) {
    return body.size;
  }
  if (utils_default.isSpecCompliantForm(body)) {
    const _request = new Request(platform_default.origin, {
      method: "POST",
      body
    });
    return (await _request.arrayBuffer()).byteLength;
  }
  if (utils_default.isArrayBufferView(body) || utils_default.isArrayBuffer(body)) {
    return body.byteLength;
  }
  if (utils_default.isURLSearchParams(body)) {
    body = body + "";
  }
  if (utils_default.isString(body)) {
    return (await encodeText(body)).byteLength;
  }
};
var resolveBodyLength = async (headers, body) => {
  const length = utils_default.toFiniteNumber(headers.getContentLength());
  return length == null ? getBodyLength(body) : length;
};
var fetch_default = isFetchSupported && (async (config) => {
  let {
    url,
    method,
    data,
    signal,
    cancelToken,
    timeout,
    onDownloadProgress,
    onUploadProgress,
    responseType,
    headers,
    withCredentials = "same-origin",
    fetchOptions
  } = resolveConfig_default(config);
  responseType = responseType ? (responseType + "").toLowerCase() : "text";
  let composedSignal = composeSignals_default([signal, cancelToken && cancelToken.toAbortSignal()], timeout);
  let request;
  const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {
    composedSignal.unsubscribe();
  });
  let requestContentLength;
  try {
    if (onUploadProgress && supportsRequestStream && method !== "get" && method !== "head" && (requestContentLength = await resolveBodyLength(headers, data)) !== 0) {
      let _request = new Request(url, {
        method: "POST",
        body: data,
        duplex: "half"
      });
      let contentTypeHeader;
      if (utils_default.isFormData(data) && (contentTypeHeader = _request.headers.get("content-type"))) {
        headers.setContentType(contentTypeHeader);
      }
      if (_request.body) {
        const [onProgress, flush] = progressEventDecorator(
          requestContentLength,
          progressEventReducer(asyncDecorator(onUploadProgress))
        );
        data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);
      }
    }
    if (!utils_default.isString(withCredentials)) {
      withCredentials = withCredentials ? "include" : "omit";
    }
    const isCredentialsSupported = "credentials" in Request.prototype;
    request = new Request(url, {
      ...fetchOptions,
      signal: composedSignal,
      method: method.toUpperCase(),
      headers: headers.normalize().toJSON(),
      body: data,
      duplex: "half",
      credentials: isCredentialsSupported ? withCredentials : void 0
    });
    let response = await fetch(request, fetchOptions);
    const isStreamResponse = supportsResponseStream && (responseType === "stream" || responseType === "response");
    if (supportsResponseStream && (onDownloadProgress || isStreamResponse && unsubscribe)) {
      const options = {};
      ["status", "statusText", "headers"].forEach((prop) => {
        options[prop] = response[prop];
      });
      const responseContentLength = utils_default.toFiniteNumber(response.headers.get("content-length"));
      const [onProgress, flush] = onDownloadProgress && progressEventDecorator(
        responseContentLength,
        progressEventReducer(asyncDecorator(onDownloadProgress), true)
      ) || [];
      response = new Response(
        trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {
          flush && flush();
          unsubscribe && unsubscribe();
        }),
        options
      );
    }
    responseType = responseType || "text";
    let responseData = await resolvers[utils_default.findKey(resolvers, responseType) || "text"](response, config);
    !isStreamResponse && unsubscribe && unsubscribe();
    return await new Promise((resolve, reject) => {
      settle(resolve, reject, {
        data: responseData,
        headers: AxiosHeaders_default.from(response.headers),
        status: response.status,
        statusText: response.statusText,
        config,
        request
      });
    });
  } catch (err) {
    unsubscribe && unsubscribe();
    if (err && err.name === "TypeError" && /Load failed|fetch/i.test(err.message)) {
      throw Object.assign(
        new AxiosError_default("Network Error", AxiosError_default.ERR_NETWORK, config, request),
        {
          cause: err.cause || err
        }
      );
    }
    throw AxiosError_default.from(err, err && err.code, config, request);
  }
});

// node_modules/axios/lib/adapters/adapters.js
var knownAdapters = {
  http: null_default,
  xhr: xhr_default,
  fetch: fetch_default
};
utils_default.forEach(knownAdapters, (fn, value) => {
  if (fn) {
    try {
      Object.defineProperty(fn, "name", { value });
    } catch (e) {
    }
    Object.defineProperty(fn, "adapterName", { value });
  }
});
var renderReason = (reason) => `- ${reason}`;
var isResolvedHandle = (adapter) => utils_default.isFunction(adapter) || adapter === null || adapter === false;
var adapters_default = {
  getAdapter: (adapters) => {
    adapters = utils_default.isArray(adapters) ? adapters : [adapters];
    const { length } = adapters;
    let nameOrAdapter;
    let adapter;
    const rejectedReasons = {};
    for (let i = 0; i < length; i++) {
      nameOrAdapter = adapters[i];
      let id;
      adapter = nameOrAdapter;
      if (!isResolvedHandle(nameOrAdapter)) {
        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];
        if (adapter === void 0) {
          throw new AxiosError_default(`Unknown adapter '${id}'`);
        }
      }
      if (adapter) {
        break;
      }
      rejectedReasons[id || "#" + i] = adapter;
    }
    if (!adapter) {
      const reasons = Object.entries(rejectedReasons).map(
        ([id, state]) => `adapter ${id} ` + (state === false ? "is not supported by the environment" : "is not available in the build")
      );
      let s = length ? reasons.length > 1 ? "since :\n" + reasons.map(renderReason).join("\n") : " " + renderReason(reasons[0]) : "as no adapter specified";
      throw new AxiosError_default(
        `There is no suitable adapter to dispatch the request ` + s,
        "ERR_NOT_SUPPORT"
      );
    }
    return adapter;
  },
  adapters: knownAdapters
};

// node_modules/axios/lib/core/dispatchRequest.js
function throwIfCancellationRequested(config) {
  if (config.cancelToken) {
    config.cancelToken.throwIfRequested();
  }
  if (config.signal && config.signal.aborted) {
    throw new CanceledError_default(null, config);
  }
}
function dispatchRequest(config) {
  throwIfCancellationRequested(config);
  config.headers = AxiosHeaders_default.from(config.headers);
  config.data = transformData.call(
    config,
    config.transformRequest
  );
  if (["post", "put", "patch"].indexOf(config.method) !== -1) {
    config.headers.setContentType("application/x-www-form-urlencoded", false);
  }
  const adapter = adapters_default.getAdapter(config.adapter || defaults_default.adapter);
  return adapter(config).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config);
    response.data = transformData.call(
      config,
      config.transformResponse,
      response
    );
    response.headers = AxiosHeaders_default.from(response.headers);
    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config);
      if (reason && reason.response) {
        reason.response.data = transformData.call(
          config,
          config.transformResponse,
          reason.response
        );
        reason.response.headers = AxiosHeaders_default.from(reason.response.headers);
      }
    }
    return Promise.reject(reason);
  });
}

// node_modules/axios/lib/env/data.js
var VERSION = "1.10.0";

// node_modules/axios/lib/helpers/validator.js
var validators = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach((type, i) => {
  validators[type] = function validator(thing) {
    return typeof thing === type || "a" + (i < 1 ? "n " : " ") + type;
  };
});
var deprecatedWarnings = {};
validators.transitional = function transitional(validator, version, message) {
  function formatMessage(opt, desc) {
    return "[Axios v" + VERSION + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
  }
  return (value, opt, opts) => {
    if (validator === false) {
      throw new AxiosError_default(
        formatMessage(opt, " has been removed" + (version ? " in " + version : "")),
        AxiosError_default.ERR_DEPRECATED
      );
    }
    if (version && !deprecatedWarnings[opt]) {
      deprecatedWarnings[opt] = true;
      console.warn(
        formatMessage(
          opt,
          " has been deprecated since v" + version + " and will be removed in the near future"
        )
      );
    }
    return validator ? validator(value, opt, opts) : true;
  };
};
validators.spelling = function spelling(correctSpelling) {
  return (value, opt) => {
    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);
    return true;
  };
};
function assertOptions(options, schema, allowUnknown) {
  if (typeof options !== "object") {
    throw new AxiosError_default("options must be an object", AxiosError_default.ERR_BAD_OPTION_VALUE);
  }
  const keys = Object.keys(options);
  let i = keys.length;
  while (i-- > 0) {
    const opt = keys[i];
    const validator = schema[opt];
    if (validator) {
      const value = options[opt];
      const result = value === void 0 || validator(value, opt, options);
      if (result !== true) {
        throw new AxiosError_default("option " + opt + " must be " + result, AxiosError_default.ERR_BAD_OPTION_VALUE);
      }
      continue;
    }
    if (allowUnknown !== true) {
      throw new AxiosError_default("Unknown option " + opt, AxiosError_default.ERR_BAD_OPTION);
    }
  }
}
var validator_default = {
  assertOptions,
  validators
};

// node_modules/axios/lib/core/Axios.js
var validators2 = validator_default.validators;
var Axios = class {
  constructor(instanceConfig) {
    this.defaults = instanceConfig || {};
    this.interceptors = {
      request: new InterceptorManager_default(),
      response: new InterceptorManager_default()
    };
  }
  /**
   * Dispatch a request
   *
   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)
   * @param {?Object} config
   *
   * @returns {Promise} The Promise to be fulfilled
   */
  async request(configOrUrl, config) {
    try {
      return await this._request(configOrUrl, config);
    } catch (err) {
      if (err instanceof Error) {
        let dummy = {};
        Error.captureStackTrace ? Error.captureStackTrace(dummy) : dummy = new Error();
        const stack = dummy.stack ? dummy.stack.replace(/^.+\n/, "") : "";
        try {
          if (!err.stack) {
            err.stack = stack;
          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\n.+\n/, ""))) {
            err.stack += "\n" + stack;
          }
        } catch (e) {
        }
      }
      throw err;
    }
  }
  _request(configOrUrl, config) {
    if (typeof configOrUrl === "string") {
      config = config || {};
      config.url = configOrUrl;
    } else {
      config = configOrUrl || {};
    }
    config = mergeConfig(this.defaults, config);
    const { transitional: transitional2, paramsSerializer, headers } = config;
    if (transitional2 !== void 0) {
      validator_default.assertOptions(transitional2, {
        silentJSONParsing: validators2.transitional(validators2.boolean),
        forcedJSONParsing: validators2.transitional(validators2.boolean),
        clarifyTimeoutError: validators2.transitional(validators2.boolean)
      }, false);
    }
    if (paramsSerializer != null) {
      if (utils_default.isFunction(paramsSerializer)) {
        config.paramsSerializer = {
          serialize: paramsSerializer
        };
      } else {
        validator_default.assertOptions(paramsSerializer, {
          encode: validators2.function,
          serialize: validators2.function
        }, true);
      }
    }
    if (config.allowAbsoluteUrls !== void 0) {
    } else if (this.defaults.allowAbsoluteUrls !== void 0) {
      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;
    } else {
      config.allowAbsoluteUrls = true;
    }
    validator_default.assertOptions(config, {
      baseUrl: validators2.spelling("baseURL"),
      withXsrfToken: validators2.spelling("withXSRFToken")
    }, true);
    config.method = (config.method || this.defaults.method || "get").toLowerCase();
    let contextHeaders = headers && utils_default.merge(
      headers.common,
      headers[config.method]
    );
    headers && utils_default.forEach(
      ["delete", "get", "head", "post", "put", "patch", "common"],
      (method) => {
        delete headers[method];
      }
    );
    config.headers = AxiosHeaders_default.concat(contextHeaders, headers);
    const requestInterceptorChain = [];
    let synchronousRequestInterceptors = true;
    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
      if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config) === false) {
        return;
      }
      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
    });
    const responseInterceptorChain = [];
    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
    });
    let promise;
    let i = 0;
    let len;
    if (!synchronousRequestInterceptors) {
      const chain = [dispatchRequest.bind(this), void 0];
      chain.unshift.apply(chain, requestInterceptorChain);
      chain.push.apply(chain, responseInterceptorChain);
      len = chain.length;
      promise = Promise.resolve(config);
      while (i < len) {
        promise = promise.then(chain[i++], chain[i++]);
      }
      return promise;
    }
    len = requestInterceptorChain.length;
    let newConfig = config;
    i = 0;
    while (i < len) {
      const onFulfilled = requestInterceptorChain[i++];
      const onRejected = requestInterceptorChain[i++];
      try {
        newConfig = onFulfilled(newConfig);
      } catch (error) {
        onRejected.call(this, error);
        break;
      }
    }
    try {
      promise = dispatchRequest.call(this, newConfig);
    } catch (error) {
      return Promise.reject(error);
    }
    i = 0;
    len = responseInterceptorChain.length;
    while (i < len) {
      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);
    }
    return promise;
  }
  getUri(config) {
    config = mergeConfig(this.defaults, config);
    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);
    return buildURL(fullPath, config.params, config.paramsSerializer);
  }
};
utils_default.forEach(["delete", "get", "head", "options"], function forEachMethodNoData(method) {
  Axios.prototype[method] = function(url, config) {
    return this.request(mergeConfig(config || {}, {
      method,
      url,
      data: (config || {}).data
    }));
  };
});
utils_default.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
  function generateHTTPMethod(isForm) {
    return function httpMethod(url, data, config) {
      return this.request(mergeConfig(config || {}, {
        method,
        headers: isForm ? {
          "Content-Type": "multipart/form-data"
        } : {},
        url,
        data
      }));
    };
  }
  Axios.prototype[method] = generateHTTPMethod();
  Axios.prototype[method + "Form"] = generateHTTPMethod(true);
});
var Axios_default = Axios;

// node_modules/axios/lib/cancel/CancelToken.js
var CancelToken = class _CancelToken {
  constructor(executor) {
    if (typeof executor !== "function") {
      throw new TypeError("executor must be a function.");
    }
    let resolvePromise;
    this.promise = new Promise(function promiseExecutor(resolve) {
      resolvePromise = resolve;
    });
    const token = this;
    this.promise.then((cancel) => {
      if (!token._listeners)
        return;
      let i = token._listeners.length;
      while (i-- > 0) {
        token._listeners[i](cancel);
      }
      token._listeners = null;
    });
    this.promise.then = (onfulfilled) => {
      let _resolve;
      const promise = new Promise((resolve) => {
        token.subscribe(resolve);
        _resolve = resolve;
      }).then(onfulfilled);
      promise.cancel = function reject() {
        token.unsubscribe(_resolve);
      };
      return promise;
    };
    executor(function cancel(message, config, request) {
      if (token.reason) {
        return;
      }
      token.reason = new CanceledError_default(message, config, request);
      resolvePromise(token.reason);
    });
  }
  /**
   * Throws a `CanceledError` if cancellation has been requested.
   */
  throwIfRequested() {
    if (this.reason) {
      throw this.reason;
    }
  }
  /**
   * Subscribe to the cancel signal
   */
  subscribe(listener) {
    if (this.reason) {
      listener(this.reason);
      return;
    }
    if (this._listeners) {
      this._listeners.push(listener);
    } else {
      this._listeners = [listener];
    }
  }
  /**
   * Unsubscribe from the cancel signal
   */
  unsubscribe(listener) {
    if (!this._listeners) {
      return;
    }
    const index = this._listeners.indexOf(listener);
    if (index !== -1) {
      this._listeners.splice(index, 1);
    }
  }
  toAbortSignal() {
    const controller = new AbortController();
    const abort = (err) => {
      controller.abort(err);
    };
    this.subscribe(abort);
    controller.signal.unsubscribe = () => this.unsubscribe(abort);
    return controller.signal;
  }
  /**
   * Returns an object that contains a new `CancelToken` and a function that, when called,
   * cancels the `CancelToken`.
   */
  static source() {
    let cancel;
    const token = new _CancelToken(function executor(c) {
      cancel = c;
    });
    return {
      token,
      cancel
    };
  }
};
var CancelToken_default = CancelToken;

// node_modules/axios/lib/helpers/spread.js
function spread(callback) {
  return function wrap(arr) {
    return callback.apply(null, arr);
  };
}

// node_modules/axios/lib/helpers/isAxiosError.js
function isAxiosError(payload) {
  return utils_default.isObject(payload) && payload.isAxiosError === true;
}

// node_modules/axios/lib/helpers/HttpStatusCode.js
var HttpStatusCode = {
  Continue: 100,
  SwitchingProtocols: 101,
  Processing: 102,
  EarlyHints: 103,
  Ok: 200,
  Created: 201,
  Accepted: 202,
  NonAuthoritativeInformation: 203,
  NoContent: 204,
  ResetContent: 205,
  PartialContent: 206,
  MultiStatus: 207,
  AlreadyReported: 208,
  ImUsed: 226,
  MultipleChoices: 300,
  MovedPermanently: 301,
  Found: 302,
  SeeOther: 303,
  NotModified: 304,
  UseProxy: 305,
  Unused: 306,
  TemporaryRedirect: 307,
  PermanentRedirect: 308,
  BadRequest: 400,
  Unauthorized: 401,
  PaymentRequired: 402,
  Forbidden: 403,
  NotFound: 404,
  MethodNotAllowed: 405,
  NotAcceptable: 406,
  ProxyAuthenticationRequired: 407,
  RequestTimeout: 408,
  Conflict: 409,
  Gone: 410,
  LengthRequired: 411,
  PreconditionFailed: 412,
  PayloadTooLarge: 413,
  UriTooLong: 414,
  UnsupportedMediaType: 415,
  RangeNotSatisfiable: 416,
  ExpectationFailed: 417,
  ImATeapot: 418,
  MisdirectedRequest: 421,
  UnprocessableEntity: 422,
  Locked: 423,
  FailedDependency: 424,
  TooEarly: 425,
  UpgradeRequired: 426,
  PreconditionRequired: 428,
  TooManyRequests: 429,
  RequestHeaderFieldsTooLarge: 431,
  UnavailableForLegalReasons: 451,
  InternalServerError: 500,
  NotImplemented: 501,
  BadGateway: 502,
  ServiceUnavailable: 503,
  GatewayTimeout: 504,
  HttpVersionNotSupported: 505,
  VariantAlsoNegotiates: 506,
  InsufficientStorage: 507,
  LoopDetected: 508,
  NotExtended: 510,
  NetworkAuthenticationRequired: 511
};
Object.entries(HttpStatusCode).forEach(([key, value]) => {
  HttpStatusCode[value] = key;
});
var HttpStatusCode_default = HttpStatusCode;

// node_modules/axios/lib/axios.js
function createInstance(defaultConfig) {
  const context = new Axios_default(defaultConfig);
  const instance = bind(Axios_default.prototype.request, context);
  utils_default.extend(instance, Axios_default.prototype, context, { allOwnKeys: true });
  utils_default.extend(instance, context, null, { allOwnKeys: true });
  instance.create = function create(instanceConfig) {
    return createInstance(mergeConfig(defaultConfig, instanceConfig));
  };
  return instance;
}
var axios = createInstance(defaults_default);
axios.Axios = Axios_default;
axios.CanceledError = CanceledError_default;
axios.CancelToken = CancelToken_default;
axios.isCancel = isCancel;
axios.VERSION = VERSION;
axios.toFormData = toFormData_default;
axios.AxiosError = AxiosError_default;
axios.Cancel = axios.CanceledError;
axios.all = function all(promises) {
  return Promise.all(promises);
};
axios.spread = spread;
axios.isAxiosError = isAxiosError;
axios.mergeConfig = mergeConfig;
axios.AxiosHeaders = AxiosHeaders_default;
axios.formToJSON = (thing) => formDataToJSON_default(utils_default.isHTMLForm(thing) ? new FormData(thing) : thing);
axios.getAdapter = adapters_default.getAdapter;
axios.HttpStatusCode = HttpStatusCode_default;
axios.default = axios;
var axios_default = axios;

// node_modules/axios/index.js
var {
  Axios: Axios2,
  AxiosError: AxiosError2,
  CanceledError: CanceledError2,
  isCancel: isCancel2,
  CancelToken: CancelToken2,
  VERSION: VERSION2,
  all: all2,
  Cancel,
  isAxiosError: isAxiosError2,
  spread: spread2,
  toFormData: toFormData2,
  AxiosHeaders: AxiosHeaders2,
  HttpStatusCode: HttpStatusCode2,
  formToJSON,
  getAdapter,
  mergeConfig: mergeConfig2
} = axios_default;

// src/LLMService.ts
var LLMService = class {
  constructor(settings) {
    this.settings = settings;
  }
  // 현재 선택된 제공업체의 API 키를 가져오는 메서드
  getCurrentApiKey() {
    const provider = this.settings.llmProvider;
    let encryptedKey = "";
    switch (provider) {
      case "openai":
        encryptedKey = this.settings.openaiApiKey;
        break;
      case "anthropic":
        encryptedKey = this.settings.anthropicApiKey;
        break;
      case "google":
        encryptedKey = this.settings.googleApiKey;
        break;
    }
    return decryptApiKey(encryptedKey);
  }
  async testConnection() {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const testPrompt = 'Hello, this is a test message. Please respond with "OK" if you can read this.';
      const response = await this.callLLM(testPrompt);
      if (response.success) {
        return { success: true, data: "API \uC5F0\uACB0 \uC131\uACF5" };
      } else {
        return { success: false, error: response.error || "API \uC5F0\uACB0 \uC2E4\uD328" };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getWordDetails(word) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const prompt = this.createWordDetailPrompt(word);
      const response = await this.callLLM(prompt);
      if (response.success) {
        const parsedData = this.parseWordDetailResponse(response.data, word);
        return { success: true, data: parsedData };
      } else {
        return { success: false, error: response.error || "\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getMultipleWordDetails(words, progressCallback) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      if (words.length === 0) {
        return { success: false, error: "\uCC98\uB9AC\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      const BATCH_SIZE = 20;
      const allResults = [];
      const totalBatches = Math.ceil(words.length / BATCH_SIZE);
      console.log(`\uCD1D ${words.length}\uAC1C \uB2E8\uC5B4\uB97C ${totalBatches}\uAC1C \uBC30\uCE58\uB85C \uB098\uB204\uC5B4 \uCC98\uB9AC\uD569\uB2C8\uB2E4.`);
      if (progressCallback) {
        progressCallback(0, words.length, `\uCD1D ${words.length}\uAC1C \uB2E8\uC5B4\uB97C ${totalBatches}\uAC1C \uBC30\uCE58\uB85C \uB098\uB204\uC5B4 \uCC98\uB9AC\uD569\uB2C8\uB2E4.`);
      }
      for (let i = 0; i < words.length; i += BATCH_SIZE) {
        const batchNumber = Math.floor(i / BATCH_SIZE) + 1;
        const batchWords = words.slice(i, i + BATCH_SIZE);
        console.log(`\uBC30\uCE58 ${batchNumber}/${totalBatches} \uCC98\uB9AC \uC911... (${batchWords.length}\uAC1C \uB2E8\uC5B4)`);
        if (progressCallback) {
          progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber}/${totalBatches} \uCC98\uB9AC \uC911... (${batchWords.length}\uAC1C \uB2E8\uC5B4)`);
        }
        try {
          const prompt = this.createMultipleWordDetailPrompt(batchWords);
          const response = await this.callLLM(prompt);
          if (response.success) {
            const parsedData = this.parseMultipleWordDetailResponse(response.data, batchWords);
            allResults.push(...parsedData);
            console.log(`\uBC30\uCE58 ${batchNumber} \uC644\uB8CC: ${parsedData.length}\uAC1C \uB2E8\uC5B4 \uCC98\uB9AC\uB428`);
            if (progressCallback) {
              progressCallback(i + batchWords.length, words.length, `\uBC30\uCE58 ${batchNumber} \uC644\uB8CC: ${parsedData.length}\uAC1C \uB2E8\uC5B4 \uCC98\uB9AC\uB428`);
            }
          } else {
            console.error(`\uBC30\uCE58 ${batchNumber} \uC2E4\uD328:`, response.error);
            if (progressCallback) {
              progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC2E4\uD328, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
            }
            const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
            allResults.push(...individualResults);
          }
        } catch (error) {
          console.error(`\uBC30\uCE58 ${batchNumber} \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
          if (progressCallback) {
            progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC624\uB958, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
          }
          const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
          allResults.push(...individualResults);
        }
        if (i + BATCH_SIZE < words.length) {
          await this.delay(1e3);
        }
      }
      console.log(`\uBAA8\uB4E0 \uBC30\uCE58 \uCC98\uB9AC \uC644\uB8CC. \uCD1D ${allResults.length}\uAC1C \uB2E8\uC5B4 \uB370\uC774\uD130 \uC218\uC9D1\uB428`);
      if (progressCallback) {
        progressCallback(words.length, words.length, `\uBAA8\uB4E0 \uBC30\uCE58 \uCC98\uB9AC \uC644\uB8CC. \uCD1D ${allResults.length}\uAC1C \uB2E8\uC5B4 \uB370\uC774\uD130 \uC218\uC9D1\uB428`);
      }
      return { success: true, data: allResults };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  // 개별 단어 처리 (배치 실패 시 폴백)
  async processWordsIndividually(words, progressCallback, startIndex = 0) {
    const results = [];
    for (let i = 0; i < words.length; i++) {
      const word = words[i];
      const currentIndex = startIndex + i;
      try {
        console.log(`\uAC1C\uBCC4 \uCC98\uB9AC: "${word}"`);
        if (progressCallback) {
          progressCallback(currentIndex, startIndex + words.length, `\uAC1C\uBCC4 \uCC98\uB9AC: "${word}"`);
        }
        const response = await this.getWordDetails(word);
        if (response.success && response.data) {
          results.push(response.data);
        } else {
          console.warn(`\uB2E8\uC5B4 "${word}" \uCC98\uB9AC \uC2E4\uD328:`, response.error);
          results.push({
            word: word.toLowerCase(),
            pronunciation: "",
            meanings: ["\uCC98\uB9AC \uC2E4\uD328"],
            examples: [],
            similarWords: []
          });
        }
        await this.delay(500);
      } catch (error) {
        console.error(`\uB2E8\uC5B4 "${word}" \uAC1C\uBCC4 \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
        results.push({
          word: word.toLowerCase(),
          pronunciation: "",
          meanings: ["\uCC98\uB9AC \uC624\uB958"],
          examples: [],
          similarWords: []
        });
      }
    }
    return results;
  }
  // 지연 함수
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  createWordDetailPrompt(word) {
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4 "${word}"\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
1. \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD)
2. \uD55C\uAE00 \uB73B\uB4E4 (\uC5EC\uB7EC \uAC1C\uC77C \uC218 \uC788\uC74C)
3. \uAC01 \uB73B\uBCC4\uB85C \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED (\uAC01 \uB73B\uB2F9 2-3\uAC1C\uC758 \uC608\uBB38 \uC81C\uACF5)
4. \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4

\uC751\uB2F5 \uD615\uC2DD:
{
  "word": "${word}",
  "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
  "meanings": ["\uB73B1", "\uB73B2", "\uB73B3"],
  "examples": [
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 1",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 2", 
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 3",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
    }
  ],
  "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42", "\uC720\uC0AC\uB2E8\uC5B43"]
}

JSON \uD615\uC2DD\uC73C\uB85C\uB9CC \uC751\uB2F5\uD574\uC8FC\uC138\uC694. \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  createMultipleWordDetailPrompt(words) {
    const wordList = words.join(", ");
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C \uC815\uD655\uD55C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694: ${wordList}

\uC694\uAD6C\uC0AC\uD56D:
- \uAC01 \uB2E8\uC5B4\uC5D0 \uB300\uD574 \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD), \uD55C\uAE00 \uB73B\uB4E4, \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED, \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC744 \uD3EC\uD568
- \uAC01 \uB73B\uBCC4\uB85C 2-3\uAC1C\uC758 \uC608\uBB38\uC744 \uC81C\uACF5\uD574\uC8FC\uC138\uC694
- JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694
- \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uC774\uC911 \uB530\uC634\uD45C\uB85C \uAC10\uC2F8\uC8FC\uC138\uC694
- \uBC30\uC5F4\uACFC \uAC1D\uCCB4\uB294 \uC815\uD655\uD55C JSON \uBB38\uBC95\uC744 \uB530\uB974\uC138\uC694

\uC751\uB2F5 \uD615\uC2DD:
[
  {
    "word": "\uB2E8\uC5B41",
    "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
    "meanings": ["\uB73B1", "\uB73B2"],
    "examples": [
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 1",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 2",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 3",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
      }
    ],
    "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42"]
  }
]

\uC911\uC694: JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uD14D\uC2A4\uD2B8\uB294 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  async callLLM(prompt) {
    try {
      const provider = this.settings.llmProvider;
      switch (provider) {
        case "openai":
          return await this.callOpenAI(prompt);
        case "anthropic":
          return await this.callAnthropic(prompt);
        case "google":
          return await this.callGoogle(prompt);
        default:
          return { success: false, error: "\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 LLM \uC81C\uACF5\uC5C5\uCCB4\uC785\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callOpenAI(prompt) {
    var _a, _b, _c;
    try {
      const response = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.getCurrentApiKey()}`
        },
        body: JSON.stringify({
          model: this.settings.llmModel,
          messages: [
            {
              role: "user",
              content: prompt
            }
          ],
          temperature: 0.3,
          max_tokens: 4e3
        })
      });
      if (!response.ok) {
        const errorData = await response.json();
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "OpenAI API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = await response.json();
      const content = (_c = (_b = data.choices[0]) == null ? void 0 : _b.message) == null ? void 0 : _c.content;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callAnthropic(prompt) {
    var _a, _b;
    if (typeof window === "undefined" || typeof window !== "undefined" && ((_a = window == null ? void 0 : window.process) == null ? void 0 : _a.type) === "renderer") {
      try {
        const response = await axios_default.post(
          "https://api.anthropic.com/v1/messages",
          {
            model: this.settings.llmModel,
            max_tokens: 3e4,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ]
          },
          {
            headers: {
              "Content-Type": "application/json",
              "x-api-key": this.getCurrentApiKey(),
              "anthropic-version": "2023-06-01"
            }
          }
        );
        const content = (_b = response.data.content[0]) == null ? void 0 : _b.text;
        if (!content) {
          return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
        }
        return { success: true, data: content };
      } catch (error) {
        return { success: false, error: error.message };
      }
    } else {
      return {
        success: false,
        error: "Anthropic API\uB294 \uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD\uC5D0\uC11C \uC9C1\uC811 \uD638\uCD9C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uB370\uC2A4\uD06C\uD1B1 \uC571(Obsidian)\uC5D0\uC11C\uB9CC \uB3D9\uC791\uD569\uB2C8\uB2E4."
      };
    }
  }
  async callGoogle(prompt) {
    var _a, _b, _c, _d;
    try {
      const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${this.settings.llmModel}:generateContent?key=${this.getCurrentApiKey()}`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          contents: [
            {
              parts: [
                {
                  text: prompt
                }
              ]
            }
          ],
          generationConfig: {
            temperature: 0.3,
            maxOutputTokens: 4e3
          }
        })
      });
      if (!response.ok) {
        const errorData = await response.json();
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "Google API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = await response.json();
      const content = (_d = (_c = (_b = data.candidates[0]) == null ? void 0 : _b.content) == null ? void 0 : _c.parts[0]) == null ? void 0 : _d.text;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  parseWordDetailResponse(response, originalWord) {
    try {
      const jsonMatch = response.match(/\{[\s\S]*\}/);
      if (!jsonMatch) {
        throw new Error("JSON \uD615\uC2DD\uC758 \uC751\uB2F5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      }
      const jsonData = JSON.parse(jsonMatch[0]);
      const validatedExamples = this.validateExamples(jsonData.examples);
      return {
        word: jsonData.word || originalWord,
        pronunciation: jsonData.pronunciation || "",
        meanings: jsonData.meanings || [],
        examples: validatedExamples,
        similarWords: jsonData.similarWords || []
      };
    } catch (error) {
      return {
        word: originalWord,
        pronunciation: "",
        meanings: ["\uC758\uBBF8\uB97C \uD30C\uC2F1\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
        examples: [],
        similarWords: []
      };
    }
  }
  // 예문 데이터 검증 및 정리
  validateExamples(examples) {
    if (!Array.isArray(examples)) {
      return [];
    }
    const validatedExamples = [];
    for (const example of examples) {
      if (example && typeof example === "object") {
        const english = example.english || example.english_text || example.text || "";
        const korean = example.korean || example.korean_text || example.translation || "";
        if (english.trim() && korean.trim()) {
          validatedExamples.push({
            english: english.trim(),
            korean: korean.trim()
          });
        }
      }
    }
    return validatedExamples;
  }
  parseMultipleWordDetailResponse(response, originalWords) {
    try {
      console.log("\uC6D0\uBCF8 \uC751\uB2F5:", response);
      let jsonMatch = response.match(/\[[\s\S]*\]/);
      if (!jsonMatch) {
        const objectMatches = response.match(/\{[^{}]*"word"[^{}]*\}/g);
        if (objectMatches && objectMatches.length > 0) {
          const jsonString = "[" + objectMatches.join(",") + "]";
          try {
            const jsonData2 = JSON.parse(jsonString);
            if (Array.isArray(jsonData2)) {
              return this.processJsonData(jsonData2, originalWords);
            }
          } catch (e) {
            console.log("\uAC1C\uBCC4 \uAC1D\uCCB4 \uD30C\uC2F1 \uC2E4\uD328:", e);
          }
        }
        const lastCompleteMatch = response.match(/\[[\s\S]*\}(?=\s*$)/);
        if (lastCompleteMatch) {
          jsonMatch = [lastCompleteMatch[0] + "]"];
        } else {
          throw new Error("JSON \uBC30\uC5F4\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        }
      }
      let jsonData;
      let parsedLength = 0;
      try {
        jsonData = JSON.parse(jsonMatch[0]);
      } catch (parseError) {
        console.log("JSON \uD30C\uC2F1 \uC2E4\uD328, \uC810\uC9C4\uC801 \uD30C\uC2F1 \uC2DC\uB3C4:", parseError);
        const results = this.parseIncrementalJson(response);
        if (results.length > 0) {
          return results;
        }
        const fixedJson = this.fixJsonString(jsonMatch[0]);
        try {
          jsonData = JSON.parse(fixedJson);
        } catch (secondError) {
          console.log("JSON \uBCF5\uAD6C \uC2E4\uD328:", secondError);
          throw new Error("JSON \uD30C\uC2F1 \uBC0F \uBCF5\uAD6C \uC2E4\uD328");
        }
      }
      if (!Array.isArray(jsonData)) {
        throw new Error("\uC751\uB2F5\uC774 \uBC30\uC5F4 \uD615\uC2DD\uC774 \uC544\uB2D9\uB2C8\uB2E4.");
      }
      return this.processJsonData(jsonData, originalWords);
    } catch (error) {
      console.error("\uC5EC\uB7EC \uB2E8\uC5B4 \uC751\uB2F5 \uD30C\uC2F1 \uC624\uB958:", error);
      console.error("\uC6D0\uBCF8 \uC751\uB2F5:", response);
      return originalWords.map((word) => ({
        word: word.toLowerCase(),
        pronunciation: "",
        meanings: [],
        examples: [],
        similarWords: []
      }));
    }
  }
  // 점진적 JSON 파싱 - 완전한 객체들만 파싱
  parseIncrementalJson(response) {
    const results = [];
    const objectRegex = /\{[^{}]*"word"[^{}]*"pronunciation"[^{}]*"meanings"[^{}]*"examples"[^{}]*"similarWords"[^{}]*\}/g;
    let match;
    while ((match = objectRegex.exec(response)) !== null) {
      try {
        const objectData = JSON.parse(match[0]);
        if (objectData && objectData.word) {
          const validatedExamples = this.validateExamples(objectData.examples);
          const wordData = {
            word: objectData.word.toLowerCase(),
            pronunciation: objectData.pronunciation || "",
            meanings: Array.isArray(objectData.meanings) ? objectData.meanings : [],
            examples: validatedExamples,
            similarWords: Array.isArray(objectData.similarWords) ? objectData.similarWords : []
          };
          results.push(wordData);
        }
      } catch (e) {
        console.log("\uAC1C\uBCC4 \uAC1D\uCCB4 \uD30C\uC2F1 \uC2E4\uD328:", e);
        continue;
      }
    }
    return results;
  }
  // JSON 데이터 처리
  processJsonData(jsonData, originalWords) {
    const results = [];
    for (const item of jsonData) {
      if (item && typeof item === "object" && item.word) {
        const validatedExamples = this.validateExamples(item.examples);
        const wordData = {
          word: item.word.toLowerCase(),
          pronunciation: item.pronunciation || "",
          meanings: Array.isArray(item.meanings) ? item.meanings : [],
          examples: validatedExamples,
          similarWords: Array.isArray(item.similarWords) ? item.similarWords : []
        };
        results.push(wordData);
      }
    }
    return results;
  }
  // JSON 문자열 복구
  fixJsonString(jsonString) {
    let fixed = jsonString;
    const lastCompleteObject = fixed.match(/.*\}(?=,?\s*$)/);
    if (lastCompleteObject) {
      fixed = lastCompleteObject[0] + "]";
    }
    fixed = fixed.replace(/,\s*,/g, ",");
    fixed = fixed.replace(/,\s*\]/g, "]");
    fixed = fixed.replace(/,\s*\}/g, "}");
    fixed = fixed.replace(/(?<!\\)"/g, (match, offset) => {
      const before = fixed.substring(0, offset);
      const quoteCount = (before.match(/"/g) || []).length;
      return quoteCount % 2 === 0 ? match : '\\"';
    });
    return fixed;
  }
  // WordData 형식으로 변환
  convertToWordData(wordDetail) {
    return {
      word: wordDetail.word,
      pronunciation: wordDetail.pronunciation,
      meanings: wordDetail.meanings,
      similarWords: wordDetail.similarWords,
      examples: wordDetail.examples
    };
  }
};

// src/settings.ts
var DEFAULT_SETTINGS = {
  apiKey: "",
  defaultLanguage: "ko",
  showSimilarWords: true,
  showExamples: true,
  examplesCount: 3,
  openaiApiKey: "",
  anthropicApiKey: "",
  googleApiKey: "",
  llmProvider: "openai",
  llmModel: "gemini-1.0-pro-latest",
  enableAdvancedFeatures: false,
  reviewModalHeight: 85,
  vocabularyFolderPath: "Vocabulary",
  ttsEnabled: true,
  ttsVoice: "en-US-AvaNeural",
  ttsPlaybackSpeed: 1,
  ttsAutoPlay: false
};
var VocabularySettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uD50C\uB7EC\uADF8\uC778 \uC124\uC815" });
    this.createBasicSettings(containerEl);
    this.createLLMSettings(containerEl);
    this.createTTSSettings(containerEl);
    this.createAdvancedSettings(containerEl);
  }
  createBasicSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uAE30\uBCF8 \uC124\uC815" });
    new import_obsidian.Setting(containerEl).setName("\uAE30\uBCF8 \uC5B8\uC5B4").setDesc("\uB2E8\uC5B4 \uB73B\uC744 \uD45C\uC2DC\uD560 \uC5B8\uC5B4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("ko", "\uD55C\uAD6D\uC5B4").addOption("en", "English").addOption("ja", "\u65E5\u672C\u8A9E").setValue(this.plugin.settings.defaultLanguage).onChange(async (value) => {
      this.plugin.settings.defaultLanguage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC720\uC0AC\uD55C \uB2E8\uC5B4 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showSimilarWords).onChange(async (value) => {
      this.plugin.settings.showSimilarWords = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC608\uBB38 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC608\uBB38\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showExamples).onChange(async (value) => {
      this.plugin.settings.showExamples = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC608\uBB38 \uAC1C\uC218").setDesc("\uD45C\uC2DC\uD560 \uC608\uBB38\uC758 \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => slider.setLimits(1, 10, 1).setValue(this.plugin.settings.examplesCount).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.examplesCount = value;
      await this.plugin.saveSettings();
    }));
  }
  createLLMSettings(containerEl) {
    containerEl.createEl("h3", { text: "LLM API \uC124\uC815" });
    new import_obsidian.Setting(containerEl).setName("\uACE0\uAE09 \uAE30\uB2A5 \uD65C\uC131\uD654").setDesc("LLM API\uB97C \uC0AC\uC6A9\uD55C \uACE0\uAE09 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableAdvancedFeatures).onChange(async (value) => {
      this.plugin.settings.enableAdvancedFeatures = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("LLM \uC81C\uACF5\uC5C5\uCCB4").setDesc("\uC0AC\uC6A9\uD560 LLM API \uC81C\uACF5\uC5C5\uCCB4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("openai", "OpenAI (GPT)").addOption("anthropic", "Anthropic (Claude)").addOption("google", "Google (Gemini)").setValue(this.plugin.settings.llmProvider).onChange(async (value) => {
      this.plugin.settings.llmProvider = value;
      if (value === "openai") {
        this.plugin.settings.llmModel = "gpt-4.1";
      } else if (value === "anthropic") {
        this.plugin.settings.llmModel = "claude-3-5-sonnet";
      } else if (value === "google") {
        this.plugin.settings.llmModel = "gemini-2.5-flash";
      }
      await this.plugin.saveSettings();
      this.display();
    }));
    this.createModelSelection(containerEl);
    this.createApiKeySettings(containerEl);
    new import_obsidian.Setting(containerEl).setName("API \uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setDesc("\uD604\uC7AC \uC120\uD0DD\uB41C \uC81C\uACF5\uC5C5\uCCB4\uC758 API \uD0A4\uAC00 \uC62C\uBC14\uB974\uAC8C \uC124\uC815\uB418\uC5C8\uB294\uC9C0 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4.").addButton((button) => button.setButtonText("\uD14C\uC2A4\uD2B8").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        const llmService = new LLMService(this.plugin.settings);
        const result = await llmService.testConnection();
        if (result.success) {
          new import_obsidian.Notice("\u2705 API \uC5F0\uACB0 \uC131\uACF5!");
        } else {
          new import_obsidian.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + result.error);
        }
      } catch (error) {
        new import_obsidian.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + error.message);
      } finally {
        button.setButtonText("\uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
  }
  createModelSelection(containerEl) {
    new import_obsidian.Setting(containerEl).setName("API \uBAA8\uB378").setDesc("\uC0AC\uC6A9\uD560 LLM \uBAA8\uB378\uC744 \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => {
      const provider = this.plugin.settings.llmProvider;
      if (provider === "openai") {
        dropdown.addOption("gpt-4.1", "GPT-4.1").addOption("gpt-4o", "GPT-4o").addOption("gpt-4o-mini", "GPT-4o Mini").addOption("gpt-4.1-long", "GPT-4.1 (Long Context)").addOption("gpt-4.5-preview", "GPT-4.5 Preview").addOption("gpt-4.5-preview-2", "GPT-4.5 Preview 2");
      } else if (provider === "anthropic") {
        dropdown.addOption("claude-3-5-sonnet", "Claude 3.5 Sonnet").addOption("claude-3-5-haiku", "Claude 3.5 Haiku").addOption("claude-3-5-opus", "Claude 3.5 Opus").addOption("claude-3-7-sonnet", "Claude 3.7 Sonnet").addOption("claude-3-7-haiku", "Claude 3.7 Haiku").addOption("claude-3-7-opus", "Claude 3.7 Opus").addOption("claude-3-5-flash", "Claude 3.5 Flash");
      } else if (provider === "google") {
        dropdown.addOption("gemini-1.5-pro-latest", "Gemini 1.5 Pro").addOption("gemini-2.5-flash", "Gemini 2.5 Flash").addOption("gemini-2.5-pro", "Gemini 2.5 Pro").addOption("gemini-1.5-flash-latest", "Gemini 1.5 Flash");
      }
      return dropdown.setValue(this.plugin.settings.llmModel).onChange(async (value) => {
        this.plugin.settings.llmModel = value;
        await this.plugin.saveSettings();
      });
    });
  }
  createApiKeySettings(containerEl) {
    new import_obsidian.Setting(containerEl).setName("OpenAI API \uD0A4").setDesc("OpenAI API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.openaiApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.openaiApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian.Setting(containerEl).setName("Anthropic API \uD0A4").setDesc("Anthropic API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-ant-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.anthropicApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-ant-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.anthropicApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian.Setting(containerEl).setName("Google API \uD0A4").setDesc("Google API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").addText((text) => {
      const currentKey = this.plugin.settings.googleApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
  }
  createAdvancedSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uACE0\uAE09 \uC124\uC815" });
    const folders = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian.TFolder);
    new import_obsidian.Setting(containerEl).setName("\uB2E8\uC5B4\uC7A5 \uC800\uC7A5 \uD3F4\uB354").setDesc("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C\uB4E4\uC774 \uC800\uC7A5\uB420 \uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: Vocabulary)").addDropdown((dropdown) => {
      folders.forEach((folder) => {
        dropdown.addOption(folder.path, folder.path);
      });
      dropdown.setValue(this.plugin.settings.vocabularyFolderPath);
      dropdown.onChange(async (value) => {
        this.plugin.settings.vocabularyFolderPath = value;
        await this.plugin.saveSettings();
        if (this.plugin.databaseManager) {
          this.plugin.databaseManager.updateVocabularyFolderPath(value);
        }
      });
      return dropdown;
    });
    new import_obsidian.Setting(containerEl).setName("\uBCF5\uC2B5 \uD654\uBA74 \uB192\uC774").setDesc("\uBCF5\uC2B5 \uBAA8\uB2EC\uC758 \uB192\uC774\uB97C \uD654\uBA74 \uB192\uC774\uC758 \uBC31\uBD84\uC728\uB85C \uC124\uC815\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: 85%)").addSlider((slider) => slider.setLimits(50, 95, 5).setValue(this.plugin.settings.reviewModalHeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.reviewModalHeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC77C\uC77C \uD559\uC2B5 \uBAA9\uD45C").setDesc("\uD558\uB8E8\uC5D0 \uD559\uC2B5\uD560 \uB2E8\uC5B4\uC758 \uBAA9\uD45C \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(5, 50, 5).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.dailyGoal) || 10).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ dailyGoal: value }));
      });
    });
    new import_obsidian.Setting(containerEl).setName("\uBCF5\uC2B5 \uAC04\uACA9 (\uC77C)").setDesc("\uB2E8\uC5B4\uB97C \uB2E4\uC2DC \uBCF5\uC2B5\uD560 \uAC04\uACA9\uC744 \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(1, 30, 1).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.reviewInterval) || 1).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ reviewInterval: value }));
      });
    });
  }
  createTTSSettings(containerEl) {
    containerEl.createEl("h3", { text: "TTS (\uC74C\uC131 \uC77D\uAE30) \uC124\uC815" });
    new import_obsidian.Setting(containerEl).setName("TTS \uD65C\uC131\uD654").setDesc("\uB2E8\uC5B4\uC640 \uC608\uBB38\uC744 \uC74C\uC131\uC73C\uB85C \uC77D\uC5B4\uC8FC\uB294 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsEnabled).onChange(async (value) => {
      this.plugin.settings.ttsEnabled = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("\uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("en-US-AvaNeural", "Ava (\uBBF8\uAD6D \uC601\uC5B4)").addOption("en-US-JennyNeural", "Jenny (\uBBF8\uAD6D \uC601\uC5B4)").addOption("en-GB-SoniaNeural", "Sonia (\uC601\uAD6D \uC601\uC5B4)").addOption("en-GB-RyanNeural", "Ryan (\uC601\uAD6D \uC601\uC5B4)").addOption("en-AU-NatashaNeural", "Natasha (\uD638\uC8FC \uC601\uC5B4)").setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
      this.plugin.settings.ttsVoice = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC7AC\uC0DD \uC18D\uB3C4").setDesc("\uC74C\uC131 \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uC870\uC808\uD558\uC138\uC694. (0.5 = \uB290\uB9BC, 1.0 = \uBCF4\uD1B5, 2.0 = \uBE60\uB984)").addSlider((slider) => slider.setLimits(0.5, 2, 0.1).setValue(this.plugin.settings.ttsPlaybackSpeed).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.ttsPlaybackSpeed = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC790\uB3D9 \uC7AC\uC0DD").setDesc("\uB2E8\uC5B4 \uCE74\uB4DC\uAC00 \uD45C\uC2DC\uB420 \uB54C \uC790\uB3D9\uC73C\uB85C \uB2E8\uC5B4\uB97C \uC77D\uC5B4\uC90D\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsAutoPlay).onChange(async (value) => {
      this.plugin.settings.ttsAutoPlay = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/VocabularyModal.ts
var import_obsidian3 = require("obsidian");

// src/TTSService.ts
var import_obsidian2 = require("obsidian");
var TTSService = class {
  constructor(settings) {
    this.audioElement = null;
    this.settings = settings;
  }
  async speakText(text) {
    if (!this.settings.enabled) {
      new import_obsidian2.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    try {
      if (!window.speechSynthesis) {
        new import_obsidian2.Notice("\uC774 \uBE0C\uB77C\uC6B0\uC800\uB294 \uC74C\uC131 \uD569\uC131\uC744 \uC9C0\uC6D0\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");
        return;
      }
      this.stopSpeaking();
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "en-US";
      utterance.rate = this.settings.playbackSpeed;
      utterance.volume = 1;
      const voices = speechSynthesis.getVoices();
      const selectedVoice = voices.find(
        (voice) => voice.name === this.settings.voice || voice.lang.startsWith("en")
      );
      if (selectedVoice) {
        utterance.voice = selectedVoice;
      }
      speechSynthesis.speak(utterance);
    } catch (error) {
      console.error("TTS \uC7AC\uC0DD \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
      new import_obsidian2.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
    }
  }
  async speakWord(word) {
    await this.speakText(word);
  }
  async speakExample(example) {
    await this.speakText(example);
  }
  stopSpeaking() {
    if (speechSynthesis.speaking) {
      speechSynthesis.cancel();
    }
    if (this.audioElement) {
      this.audioElement.pause();
      this.audioElement.currentTime = 0;
    }
  }
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  getAvailableVoices() {
    return speechSynthesis.getVoices().filter(
      (voice) => voice.lang.startsWith("en")
    );
  }
  isEnabled() {
    return this.settings.enabled;
  }
};

// src/VocabularyModal.ts
var VocabularyModal = class extends import_obsidian3.Modal {
  constructor(app, plugin) {
    super(app);
    this.currentCardIndex = 0;
    this.cards = [];
    this.showAnswer = false;
    this.keydownHandler = null;
    this.plugin = plugin;
    this.ttsService = new TTSService({
      enabled: plugin.settings.ttsEnabled,
      voice: plugin.settings.ttsVoice,
      playbackSpeed: plugin.settings.ttsPlaybackSpeed,
      autoPlay: plugin.settings.ttsAutoPlay
    });
  }
  onOpen() {
    this.cards = this.plugin.databaseManager.getAllWords();
    console.log("\uB85C\uB4DC\uB41C \uCE74\uB4DC \uC218:", this.cards.length);
    if (this.cards.length > 0) {
      console.log("\uCCAB \uBC88\uC9F8 \uCE74\uB4DC \uC608\uBB38:", this.cards[0].examples);
    }
    if (this.cards.length === 0) {
      this.showNoWordsMessage();
      return;
    }
    this.shuffleCards();
    this.currentCardIndex = 0;
    this.showAnswer = false;
    this.showCard();
    this.keydownHandler = (e) => {
      if (!this.showAnswer) {
        if (e.code === "Space" || e.key === " ") {
          e.preventDefault();
          this.showAnswer = true;
          this.showCard();
        }
      } else {
        if (e.key === "1") {
          this.handleReview("hard");
        } else if (e.key === "2") {
          this.handleReview("good");
        } else if (e.key === "3") {
          this.handleReview("easy");
        }
      }
    };
    window.addEventListener("keydown", this.keydownHandler);
  }
  shuffleCards() {
    for (let i = this.cards.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [this.cards[i], this.cards[j]] = [this.cards[j], this.cards[i]];
    }
  }
  showNoWordsMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noWordsEl = contentEl.createEl("div", { cls: "no-words-message" });
    noWordsEl.createEl("h2", { text: "\uD559\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4" });
    noWordsEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    const closeButton = noWordsEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showCard() {
    if (this.currentCardIndex >= this.cards.length) {
      this.showCompletionMessage();
      return;
    }
    const currentCard = this.cards[this.currentCardIndex];
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const cardContainer = contentEl.createEl("div", { cls: "vocabulary-card" });
    const topInfoContainer = cardContainer.createEl("div", { cls: "card-top-info" });
    const currentBook = this.plugin.databaseManager.getCurrentBook();
    if (currentBook) {
      const bookInfoEl = topInfoContainer.createEl("div", { cls: "book-info-display" });
      bookInfoEl.createEl("span", {
        text: currentBook.name,
        cls: "current-book-name"
      });
    }
    const deleteButton = topInfoContainer.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const progressEl = cardContainer.createEl("div", { cls: "progress-indicator" });
    progressEl.textContent = `${this.currentCardIndex + 1} / ${this.cards.length}`;
    const wordContainer = cardContainer.createEl("div", { cls: "word-container" });
    const wordEl = wordContainer.createEl("h1", { cls: "card-word" });
    if (currentCard.pronunciation && currentCard.pronunciation.trim()) {
      wordEl.innerHTML = `${currentCard.word} <span class="pronunciation">[${currentCard.pronunciation}]</span>`;
    } else {
      wordEl.textContent = currentCard.word;
    }
    const wordPlayButton = wordContainer.createEl("button", {
      cls: "tts-play-button word-play-button",
      attr: { "aria-label": "\uB2E8\uC5B4 \uBC1C\uC74C \uB4E3\uAE30" }
    });
    wordPlayButton.innerHTML = "\u{1F50A}";
    wordPlayButton.addEventListener("click", () => {
      this.ttsService.speakWord(currentCard.word);
    });
    if (currentCard.similarWords && currentCard.similarWords.length > 0) {
      const similarSection = cardContainer.createEl("div", { cls: "similar-words-section" });
      similarSection.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
      const similarList = similarSection.createEl("ul", { cls: "similar-words-list" });
      currentCard.similarWords.forEach((word) => {
        similarList.createEl("li", { text: word });
      });
    }
    console.log("\uD604\uC7AC \uCE74\uB4DC \uC608\uBB38:", currentCard.examples);
    if (currentCard.examples && currentCard.examples.length > 0) {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      currentCard.examples.forEach((example, index) => {
        console.log(`\uC608\uBB38 ${index + 1}:`, example);
        const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
        const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
        const englishExample = exampleTextContainer.createEl("p", { text: example.english });
        englishExample.addClass("english-example");
        const examplePlayButton = exampleTextContainer.createEl("button", {
          cls: "tts-play-button example-play-button",
          attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
        });
        examplePlayButton.innerHTML = "\u{1F50A}";
        examplePlayButton.addEventListener("click", () => {
          this.ttsService.speakExample(example.english);
        });
        if (example.korean && example.korean.trim()) {
          const koreanExample = exampleContainer.createEl("p", { text: example.korean });
          koreanExample.addClass("korean-example");
        }
      });
    } else {
      console.log("\uC608\uBB38\uC774 \uC5C6\uC5B4\uC11C \uAE30\uBCF8 \uC608\uBB38\uC744 \uD45C\uC2DC\uD569\uB2C8\uB2E4.");
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
      const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
      const englishExample = exampleTextContainer.createEl("p", {
        text: `This is an example sentence with the word "${currentCard.word}".`
      });
      englishExample.addClass("english-example");
      const examplePlayButton = exampleTextContainer.createEl("button", {
        cls: "tts-play-button example-play-button",
        attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
      });
      examplePlayButton.innerHTML = "\u{1F50A}";
      examplePlayButton.addEventListener("click", () => {
        this.ttsService.speakExample(`This is an example sentence with the word "${currentCard.word}".`);
      });
      const koreanExample = exampleContainer.createEl("p", {
        text: `"${currentCard.word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
      });
      koreanExample.addClass("korean-example");
    }
    if (!this.showAnswer) {
      const checkButton = cardContainer.createEl("button", { text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30" });
      checkButton.addClass("check-answer-button");
      checkButton.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCard();
      });
    } else {
      const answerSection = cardContainer.createEl("div", { cls: "answer-section" });
      answerSection.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerSection.createEl("ul", { cls: "meanings-list" });
      currentCard.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      this.createReviewButtons(cardContainer);
    }
  }
  createReviewButtons(container) {
    const reviewSection = container.createEl("div", { cls: "review-buttons-section" });
    const hardButton = reviewSection.createEl("button", { text: "\uC5B4\uB824\uC6C0" });
    hardButton.addClass("review-button", "hard-button");
    hardButton.addEventListener("click", () => this.handleReview("hard"));
    const goodButton = reviewSection.createEl("button", { text: "\uC88B\uC74C" });
    goodButton.addClass("review-button", "good-button");
    goodButton.addEventListener("click", () => this.handleReview("good"));
    const easyButton = reviewSection.createEl("button", { text: "\uC26C\uC6C0" });
    easyButton.addClass("review-button", "easy-button");
    easyButton.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentCard = this.cards[this.currentCardIndex];
    await this.plugin.databaseManager.updateWord(currentCard.word, difficulty);
    this.currentCardIndex++;
    this.showAnswer = false;
    this.showCard();
  }
  async handleDeleteCard() {
    const currentCard = this.cards[this.currentCardIndex];
    const confirmModal = new ConfirmModal(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentCard.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentCard.word);
          this.cards.splice(this.currentCardIndex, 1);
          if (this.cards.length === 0) {
            this.showCompletionMessage();
            return;
          }
          if (this.currentCardIndex >= this.cards.length) {
            this.currentCardIndex = this.cards.length - 1;
          }
          this.showAnswer = false;
          this.showCard();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian3.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletionMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const completionEl = contentEl.createEl("div", { cls: "completion-message" });
    completionEl.createEl("h2", { text: "\uD559\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: `\uC624\uB298 ${this.cards.length}\uAC1C\uC758 \uB2E8\uC5B4 \uD559\uC2B5\uC744 \uC644\uB8CC\uD588\uC2B5\uB2C8\uB2E4.` });
    const restartButton = completionEl.createEl("button", { text: "\uB2E4\uC2DC \uD559\uC2B5\uD558\uAE30" });
    restartButton.addClass("restart-button");
    restartButton.addEventListener("click", () => {
      this.onOpen();
    });
    const closeButton = completionEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => {
      this.close();
    });
  }
  onClose() {
    if (this.keydownHandler) {
      window.removeEventListener("keydown", this.keydownHandler);
      this.keydownHandler = null;
    }
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal = class extends import_obsidian3.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/VocabularyManagerModal.ts
var import_obsidian5 = require("obsidian");

// src/WordService.ts
var WordService = class {
  constructor() {
    this.apiBaseUrl = "https://api.dictionaryapi.dev/api/v2/entries/en";
  }
  async getWordData(word) {
    try {
      return this.getSampleWordData(word);
    } catch (error) {
      console.error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
      throw new Error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
  }
  getSampleWordData(word) {
    const sampleData = {
      "beautiful": {
        word: "beautiful",
        meanings: ["\uC544\uB984\uB2E4\uC6B4", "\uC608\uC05C", "\uD6CC\uB96D\uD55C"],
        similarWords: ["pretty", "gorgeous", "stunning", "attractive"],
        examples: [
          {
            english: "She is a beautiful woman.",
            korean: "\uADF8\uB140\uB294 \uC544\uB984\uB2E4\uC6B4 \uC5EC\uC131\uC785\uB2C8\uB2E4."
          },
          {
            english: "The sunset was beautiful.",
            korean: "\uC77C\uBAB0\uC774 \uC544\uB984\uB2E4\uC6E0\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "What a beautiful day!",
            korean: "\uC815\uB9D0 \uC544\uB984\uB2E4\uC6B4 \uD558\uB8E8\uB124\uC694!"
          }
        ]
      },
      "happy": {
        word: "happy",
        meanings: ["\uD589\uBCF5\uD55C", "\uAE30\uC05C", "\uC990\uAC70\uC6B4"],
        similarWords: ["joyful", "cheerful", "glad", "pleased"],
        examples: [
          {
            english: "I am happy to see you.",
            korean: "\uB2F9\uC2E0\uC744 \uB9CC\uB098\uC11C \uAE30\uC069\uB2C8\uB2E4."
          },
          {
            english: "She has a happy family.",
            korean: "\uADF8\uB140\uB294 \uD589\uBCF5\uD55C \uAC00\uC871\uC744 \uAC00\uC9C0\uACE0 \uC788\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Happy birthday!",
            korean: "\uC0DD\uC77C \uCD95\uD558\uD569\uB2C8\uB2E4!"
          }
        ]
      },
      "learn": {
        word: "learn",
        meanings: ["\uBC30\uC6B0\uB2E4", "\uD559\uC2B5\uD558\uB2E4", "\uC775\uD788\uB2E4"],
        similarWords: ["study", "acquire", "grasp", "understand"],
        examples: [
          {
            english: "I want to learn English.",
            korean: "\uC800\uB294 \uC601\uC5B4\uB97C \uBC30\uC6B0\uACE0 \uC2F6\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Children learn quickly.",
            korean: "\uC544\uC774\uB4E4\uC740 \uBE68\uB9AC \uBC30\uC6C1\uB2C8\uB2E4."
          },
          {
            english: "You can learn from your mistakes.",
            korean: "\uC2E4\uC218\uB85C\uBD80\uD130 \uBC30\uC6B8 \uC218 \uC788\uC2B5\uB2C8\uB2E4."
          }
        ]
      }
    };
    if (sampleData[word.toLowerCase()]) {
      return sampleData[word.toLowerCase()];
    }
    return {
      word,
      meanings: ["\uC758\uBBF8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
      similarWords: [],
      examples: [
        {
          english: `This is an example sentence with the word "${word}".`,
          korean: `"${word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        }
      ]
    };
  }
  // 실제 API 호출을 위한 메서드 (향후 구현)
  async fetchFromAPI(word) {
    const response = await fetch(`${this.apiBaseUrl}/${word}`);
    if (!response.ok) {
      throw new Error(`API \uC694\uCCAD \uC2E4\uD328: ${response.status}`);
    }
    return await response.json();
  }
};

// src/AddBookModal.ts
var import_obsidian4 = require("obsidian");
var AddBookModal = class extends import_obsidian4.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-book-modal");
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uC0C8\uB85C\uC6B4 \uB2E8\uC5B4\uC7A5\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const formEl = contentEl.createEl("form", { cls: "book-form" });
    const nameSection = formEl.createEl("div", { cls: "form-section" });
    const nameLabel = nameSection.createEl("label", {
      text: "\uB2E8\uC5B4\uC7A5 \uC774\uB984 *",
      cls: "form-label"
    });
    const nameInput = nameSection.createEl("input", {
      type: "text",
      placeholder: "\uC608: TOEIC \uB2E8\uC5B4\uC7A5, \uC77C\uC0C1\uC0DD\uD65C \uB2E8\uC5B4\uC7A5",
      cls: "form-input"
    });
    nameInput.required = true;
    const descSection = formEl.createEl("div", { cls: "form-section" });
    const descLabel = descSection.createEl("label", {
      text: "\uC124\uBA85 (\uC120\uD0DD\uC0AC\uD56D)",
      cls: "form-label"
    });
    const descInput = descSection.createEl("textarea", {
      placeholder: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB300\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694.",
      cls: "form-textarea"
    });
    descInput.rows = 3;
    const buttonSection = formEl.createEl("div", { cls: "button-section" });
    const createButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uC0DD\uC131",
      cls: "create-button primary",
      type: "submit"
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button",
      type: "button"
    });
    cancelButton.addEventListener("click", () => this.close());
    formEl.addEventListener("submit", async (e) => {
      e.preventDefault();
      await this.createBook(nameInput.value.trim(), descInput.value.trim());
    });
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        formEl.dispatchEvent(new Event("submit"));
      }
    });
    nameInput.focus();
  }
  async createBook(name, description) {
    if (!name.trim()) {
      new import_obsidian4.Notice("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    try {
      const existingBooks = this.plugin.databaseManager.getAllBooks();
      const isDuplicate = existingBooks.some(
        (book) => book.name.toLowerCase() === name.toLowerCase()
      );
      if (isDuplicate) {
        new import_obsidian4.Notice("\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4.");
        return;
      }
      const newBook = await this.plugin.databaseManager.createBook(name, description);
      new import_obsidian4.Notice(`"${name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
      this.close();
      const event = new CustomEvent("bookCreated", { detail: newBook });
      document.dispatchEvent(event);
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131 \uC2E4\uD328:", error);
      new import_obsidian4.Notice("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/VocabularyManagerModal.ts
var VocabularyManagerModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    var _a;
    super(app);
    this.currentView = "list";
    this.selectedWords = /* @__PURE__ */ new Set();
    this.selectedBookId = "";
    this.plugin = plugin;
    this.databaseManager = plugin.databaseManager;
    this.wordService = new WordService();
    this.llmService = plugin.llmService;
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
  }
  async onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-manager-modal");
    contentEl.classList.add("wide-manager-modal");
    await this.databaseManager.loadAllBooks();
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
    this.createBookSelectorHeader();
    this.createNavigation();
    this.showCurrentView();
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  async handleBookCreated(event) {
    const newBook = event.detail;
    this.selectedBookId = newBook.id;
    await this.refreshBookSelector();
  }
  createBookSelectorHeader() {
    const headerEl = this.contentEl.createEl("div", { cls: "manager-header" });
    headerEl.style.display = "flex";
    headerEl.style.alignItems = "center";
    headerEl.style.gap = "18px";
    headerEl.style.marginBottom = "18px";
    const books = this.databaseManager.getAllBooks();
    const bookSelect = headerEl.createEl("select", { cls: "book-select-dropdown" });
    bookSelect.style.height = "38px";
    bookSelect.style.fontSize = "16px";
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      if (book.id === this.selectedBookId)
        option.selected = true;
      bookSelect.appendChild(option);
    });
    bookSelect.addEventListener("change", async (e) => {
      this.selectedBookId = e.target.value;
      await this.databaseManager.setCurrentBook(this.selectedBookId);
      this.showCurrentView();
    });
    const addBookBtn = headerEl.createEl("button", { text: "\uC0C8 \uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "book-manage-button" });
    addBookBtn.addEventListener("click", () => {
      const addBookModal = new AddBookModal(this.app, this.plugin);
      addBookModal.onClose = () => {
        this.refreshBookSelector();
      };
      addBookModal.open();
    });
    const delBookBtn = headerEl.createEl("button", { text: "\uD604\uC7AC \uB2E8\uC5B4\uC7A5 \uC0AD\uC81C", cls: "book-delete-button" });
    const isDefault = this.selectedBookId === "default";
    if (isDefault) {
      delBookBtn.setAttr("disabled", "true");
      delBookBtn.addClass("disabled");
    }
    delBookBtn.addEventListener("click", async () => {
      if (isDefault)
        return;
      const currentBook = this.databaseManager.getBook(this.selectedBookId);
      if (!currentBook) {
        new import_obsidian5.Notice("\uB2E8\uC5B4\uC7A5 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      const wordsInBook = this.databaseManager.getWordsByBook(this.selectedBookId);
      const wordCount = wordsInBook.length;
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uD655\uC778",
        `\uC815\uB9D0\uB85C "${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\u2022 \uB2E8\uC5B4\uC7A5 \uC774\uB984: ${currentBook.name}
\u2022 \uD3EC\uD568\uB41C \uB2E8\uC5B4 \uC218: ${wordCount}\uAC1C
\u2022 \uC0DD\uC131\uC77C: ${new Date(currentBook.createdAt).toLocaleDateString("ko-KR")}

\u26A0\uFE0F \uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC73C\uBA70, \uB2E8\uC5B4\uC7A5\uACFC \uBAA8\uB4E0 \uB2E8\uC5B4\uAC00 \uC601\uAD6C\uC801\uC73C\uB85C \uC0AD\uC81C\uB429\uB2C8\uB2E4.`,
        async () => {
          try {
            await this.databaseManager.deleteBook(this.selectedBookId);
            this.selectedBookId = "default";
            await this.databaseManager.setCurrentBook("default");
            new import_obsidian5.Notice(`"${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`);
            this.onOpen();
          } catch (e) {
            new import_obsidian5.Notice("\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uC2E4\uD328: " + e.message);
          }
        }
      );
      confirmModal.open();
    });
  }
  createNavigation() {
    const navEl = this.contentEl.createEl("div", { cls: "manager-navigation" });
    const listBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uBAA9\uB85D", cls: "nav-button" });
    listBtn.addEventListener("click", () => {
      this.currentView = "list";
      this.showCurrentView();
    });
    const statsBtn = navEl.createEl("button", { text: "\uD1B5\uACC4", cls: "nav-button" });
    statsBtn.addEventListener("click", () => {
      this.currentView = "statistics";
      this.showCurrentView();
    });
    const addBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "nav-button" });
    addBtn.addEventListener("click", () => {
      this.currentView = "add";
      this.showCurrentView();
    });
    const startLearningButton = navEl.createEl("button", {
      text: "\uC804\uCCB4 \uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      cls: "nav-button"
    });
    startLearningButton.addEventListener("click", () => {
      this.close();
      new VocabularyModal(this.app, this.plugin).open();
    });
    if (this.plugin.settings.enableAdvancedFeatures) {
      const fetchAllButton = navEl.createEl("button", {
        text: "\uC804\uCCB4 \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
        cls: "nav-button"
      });
      fetchAllButton.addEventListener("click", () => {
        this.showFetchAllMeaningsModal();
      });
    }
  }
  showCurrentView() {
    const contentEl = this.contentEl.querySelector(".manager-content") || this.contentEl.createEl("div", { cls: "manager-content" });
    contentEl.empty();
    switch (this.currentView) {
      case "list":
        this.showWordList(contentEl);
        break;
      case "statistics":
        this.showStatistics(contentEl);
        break;
      case "add":
        this.showAddWord(contentEl);
        break;
    }
  }
  showWordList(container) {
    const words = this.databaseManager.getAllWords();
    if (words.length === 0) {
      container.createEl("p", {
        text: "\uB2E8\uC5B4\uC7A5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4. \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD574\uBCF4\uC138\uC694!",
        cls: "empty-message"
      });
      return;
    }
    const searchEl = container.createEl("div", { cls: "search-section" });
    const searchInput = searchEl.createEl("input", {
      type: "text",
      placeholder: "\uB2E8\uC5B4 \uAC80\uC0C9...",
      cls: "search-input"
    });
    const selectionControls = searchEl.createEl("div", { cls: "selection-controls" });
    const allSelected = this.selectedWords.size === words.length && words.length > 0;
    const selectAllBtn = selectionControls.createEl("button", {
      text: allSelected ? "\uC804\uCCB4 \uD574\uC81C" : "\uC804\uCCB4 \uC120\uD0DD",
      cls: "selection-button"
    });
    selectAllBtn.addEventListener("click", () => {
      if (this.selectedWords.size === words.length) {
        this.selectedWords.clear();
      } else {
        this.selectedWords.clear();
        words.forEach((word) => this.selectedWords.add(word.word));
      }
      this.showCurrentView();
    });
    const fetchSelectedButton = selectionControls.createEl("button", {
      text: "\uC120\uD0DD \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-selected-button"
    });
    fetchSelectedButton.addEventListener("click", () => {
      if (this.selectedWords.size === 0) {
        new import_obsidian5.Notice("\uC120\uD0DD\uB41C \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      this.showFetchSelectedMeaningsModal();
    });
    const wordListEl = container.createEl("div", { cls: "word-list" });
    const renderWords = (filteredWords) => {
      wordListEl.empty();
      filteredWords.forEach((word) => {
        this.createWordItem(wordListEl, word);
      });
    };
    searchInput.addEventListener("input", (e) => {
      const query = e.target.value;
      const filteredWords = query ? this.databaseManager.searchWords(query) : words;
      renderWords(filteredWords);
    });
    renderWords(words);
  }
  createWordItem(container, word) {
    const wordEl = container.createEl("div", { cls: "word-item" });
    const checkbox = wordEl.createEl("input", {
      type: "checkbox",
      cls: "word-checkbox"
    });
    checkbox.checked = this.selectedWords.has(word.word);
    checkbox.addEventListener("change", (e) => {
      const isChecked = e.target.checked;
      if (isChecked) {
        this.selectedWords.add(word.word);
      } else {
        this.selectedWords.delete(word.word);
      }
    });
    const wordHeader = wordEl.createEl("div", { cls: "word-header" });
    const wordTitleEl = wordHeader.createEl("h3", { cls: "word-title" });
    if (word.pronunciation && word.pronunciation.trim()) {
      wordTitleEl.innerHTML = `${word.word} <span class="pronunciation">[${word.pronunciation}]</span>`;
    } else {
      wordTitleEl.textContent = word.word;
    }
    const difficultyBadge = wordHeader.createEl("span", {
      text: this.getDifficultyText(word.difficulty),
      cls: `difficulty-badge ${word.difficulty}`
    });
    const wordContent = wordEl.createEl("div", { cls: "word-content" });
    wordContent.createEl("p", {
      text: `\uB73B: ${word.meanings.join(", ")}`,
      cls: "word-meanings"
    });
    wordContent.createEl("p", {
      text: `\uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}\uD68C`,
      cls: "review-count"
    });
    if (word.lastReviewed) {
      const lastReviewDate = new Date(word.lastReviewed).toLocaleDateString("ko-KR");
      wordContent.createEl("p", {
        text: `\uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${lastReviewDate}`,
        cls: "last-reviewed"
      });
    }
    const wordActions = wordEl.createEl("div", { cls: "word-actions" });
    if (this.plugin.settings.enableAdvancedFeatures) {
      const fetchButton = wordActions.createEl("button", {
        text: "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
        cls: "action-button fetch-single-button"
      });
      fetchButton.addEventListener("click", () => {
        this.fetchSingleWordMeaning(word);
      });
    }
    const deleteBtn = wordActions.createEl("button", {
      text: "\uC0AD\uC81C",
      cls: "action-button delete-button"
    });
    deleteBtn.addEventListener("click", async () => {
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4 \uC0AD\uC81C",
        `"${word.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,
        async () => {
          await this.databaseManager.removeWord(word.word);
          this.showCurrentView();
        }
      );
      confirmModal.open();
    });
  }
  showStatistics(container) {
    const stats = this.databaseManager.getStatistics();
    const statsGrid = container.createEl("div", { cls: "stats-grid" });
    const basicStats = statsGrid.createEl("div", { cls: "stats-section" });
    basicStats.createEl("h3", { text: "\uAE30\uBCF8 \uD1B5\uACC4", cls: "stats-title" });
    this.createStatItem(basicStats, "\uCD1D \uB2E8\uC5B4 \uC218", stats.totalWords.toString());
    this.createStatItem(basicStats, "\uCD1D \uBCF5\uC2B5 \uD69F\uC218", stats.totalReviews.toString());
    this.createStatItem(basicStats, "\uC5F0\uC18D \uD559\uC2B5\uC77C", `${stats.streakDays}\uC77C`);
    this.createStatItem(basicStats, "\uD3C9\uADE0 \uB09C\uC774\uB3C4", stats.averageDifficulty.toFixed(1));
    const difficultyStats = statsGrid.createEl("div", { cls: "stats-section" });
    difficultyStats.createEl("h3", { text: "\uB09C\uC774\uB3C4\uBCC4 \uBD84\uD3EC", cls: "stats-title" });
    this.createStatItem(difficultyStats, "\uC26C\uC6C0", stats.wordsByDifficulty.easy.toString());
    this.createStatItem(difficultyStats, "\uC88B\uC74C", stats.wordsByDifficulty.good.toString());
    this.createStatItem(difficultyStats, "\uC5B4\uB824\uC6C0", stats.wordsByDifficulty.hard.toString());
    const activityStats = statsGrid.createEl("div", { cls: "stats-section" });
    activityStats.createEl("h3", { text: "\uCD5C\uADFC 7\uC77C \uD65C\uB3D9", cls: "stats-title" });
    stats.recentActivity.forEach((activity) => {
      const date = new Date(activity.date).toLocaleDateString("ko-KR", {
        month: "short",
        day: "numeric"
      });
      this.createStatItem(
        activityStats,
        date,
        `\uD559\uC2B5: ${activity.wordsStudied}, \uBCF5\uC2B5: ${activity.reviewsCompleted}`
      );
    });
  }
  createStatItem(container, label, value) {
    const statEl = container.createEl("div", { cls: "stat-item" });
    statEl.createEl("span", { text: label, cls: "stat-label" });
    statEl.createEl("span", { text: value, cls: "stat-value" });
  }
  showAddWord(container) {
    const addSection = container.createEl("div", { cls: "add-word-section" });
    addSection.createEl("h3", { text: "\uC0C8 \uB2E8\uC5B4 \uCD94\uAC00", cls: "section-title" });
    const inputEl = addSection.createEl("div", { cls: "word-input-group" });
    const wordInput = inputEl.createEl("input", {
      type: "text",
      placeholder: "\uC601\uB2E8\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694 (\uC608: beautiful)",
      cls: "word-input"
    });
    const addButton = inputEl.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button"
    });
    const addWord = async () => {
      const word = wordInput.value.trim();
      if (!word) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",
          cls: "error-message"
        });
        return;
      }
      try {
        const wordData = await this.wordService.getWordData(word);
        const vocabularyCard = {
          ...wordData,
          reviewCount: 0,
          difficulty: "good",
          lastReviewed: null,
          addedDate: (/* @__PURE__ */ new Date()).toISOString(),
          bookId: this.selectedBookId
        };
        await this.databaseManager.addWord(vocabularyCard);
        wordInput.value = "";
        addSection.createEl("p", {
          text: `"${word}" \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`,
          cls: "success-message"
        });
        setTimeout(() => {
          const successMsg = addSection.querySelector(".success-message");
          if (successMsg)
            successMsg.remove();
        }, 3e3);
      } catch (error) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
          cls: "error-message"
        });
      }
    };
    addButton.addEventListener("click", addWord);
    wordInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        addWord();
      }
    });
  }
  getDifficultyText(difficulty) {
    switch (difficulty) {
      case "easy":
        return "\uC26C\uC6C0";
      case "good":
        return "\uC88B\uC74C";
      case "hard":
        return "\uC5B4\uB824\uC6C0";
      default:
        return "\uC88B\uC74C";
    }
  }
  startReview(words) {
    const reviewModal = new VocabularyReviewModal(this.app, this.plugin, words);
    reviewModal.open();
  }
  showFetchSelectedMeaningsModal() {
    const selectedWordList = Array.from(this.selectedWords);
    new FetchSelectedMeaningsModal(this.app, this.plugin, selectedWordList).open();
  }
  showFetchAllMeaningsModal() {
    new FetchAllMeaningsModal(this.app, this.plugin).open();
  }
  async fetchSingleWordMeaning(word) {
    if (!this.plugin.settings.apiKey) {
      new import_obsidian5.Notice("LLM API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      `"${word.word}" \uB2E8\uC5B4\uC758 \uB73B\uC744 \uC0C8\uB85C \uAC00\uC838\uC624\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? \uAE30\uC874 \uC815\uBCF4\uAC00\uC5B4\uC50C\uC6CC\uC9D1\uB2C8\uB2E4.`,
      async () => {
        try {
          new import_obsidian5.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911...`);
          const llmResponse = await this.plugin.llmService.getWordDetails(word.word);
          if (llmResponse.success) {
            const wordDetail = llmResponse.data;
            const wordData = this.plugin.llmService.convertToWordData(wordDetail);
            const updatedWord = {
              ...word,
              meanings: wordData.meanings,
              examples: wordData.examples,
              similarWords: wordData.similarWords
            };
            await this.plugin.databaseManager.updateWordData(word.word, updatedWord);
            new import_obsidian5.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
            this.showCurrentView();
          } else {
            new import_obsidian5.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328: ${llmResponse.error}`);
          }
        } catch (error) {
          console.error(`\uB2E8\uC5B4 "${word.word}" \uCC98\uB9AC \uC2E4\uD328:`, error);
          new import_obsidian5.Notice(`"${word.word}" \uB2E8\uC5B4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.`);
        }
      }
    );
    confirmModal.open();
  }
  async refreshBookSelector() {
    await this.databaseManager.loadAllBooks();
    const headerEl = this.contentEl.querySelector(".manager-header");
    if (headerEl) {
      const bookSelect = headerEl.querySelector(".book-select-dropdown");
      if (bookSelect) {
        const currentValue = bookSelect.value;
        const books = this.databaseManager.getAllBooks();
        bookSelect.innerHTML = "";
        books.forEach((book) => {
          const option = document.createElement("option");
          option.value = book.id;
          option.text = book.name;
          if (book.id === currentValue || book.id === this.selectedBookId) {
            option.selected = true;
            this.selectedBookId = book.id;
          }
          bookSelect.appendChild(option);
        });
      }
    }
    this.showCurrentView();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
};
var FetchAllMeaningsModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    super(app);
    this.isProcessing = false;
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("fetch-all-meanings-modal");
    contentEl.createEl("h2", { text: "\uC804\uCCB4 \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30", cls: "modal-title" });
    contentEl.createEl("p", {
      text: "\uC800\uC7A5\uB41C \uBAA8\uB4E0 \uB2E8\uC5B4\uC758 \uC0C1\uC138 \uC815\uBCF4\uB97C LLM API\uB97C \uD1B5\uD574 \uC0C8\uB85C \uAC00\uC838\uC635\uB2C8\uB2E4. (\uBC1C\uC74C\uAE30\uD638, \uB73B, \uC608\uBB38, \uBC88\uC5ED)",
      cls: "modal-description"
    });
    const warningEl = contentEl.createEl("div", { cls: "warning-section" });
    warningEl.createEl("p", {
      text: "\u26A0\uFE0F \uC8FC\uC758: \uC774 \uC791\uC5C5\uC740 \uC800\uC7A5\uB41C \uBAA8\uB4E0 \uB2E8\uC5B4\uC758 \uAE30\uC874 \uC815\uBCF4\uB97C \uB36E\uC5B4\uC50C\uC6C1\uB2C8\uB2E4.",
      cls: "warning-text"
    });
    const words = this.plugin.databaseManager.getAllWords();
    if (words.length > 0) {
      const previewEl = contentEl.createEl("div", { cls: "words-preview" });
      previewEl.createEl("h3", { text: "\uCC98\uB9AC\uD560 \uB2E8\uC5B4 \uBAA9\uB85D:", cls: "preview-title" });
      const wordsList = previewEl.createEl("div", { cls: "words-list" });
      words.slice(0, 10).forEach((word) => {
        wordsList.createEl("span", { text: word.word, cls: "word-preview" });
      });
      if (words.length > 10) {
        wordsList.createEl("span", {
          text: `... \uC678 ${words.length - 10}\uAC1C`,
          cls: "more-words"
        });
      }
    }
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const fetchButton = buttonSection.createEl("button", {
      text: "\uC804\uCCB4 \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-button primary"
    });
    fetchButton.addEventListener("click", () => this.fetchAllMeanings());
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
    const progressSection = contentEl.createEl("div", { cls: "progress-section" });
    progressSection.style.display = "none";
    const progressText = progressSection.createEl("p", {
      text: "\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911...",
      cls: "progress-text"
    });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section" });
    resultSection.style.display = "none";
  }
  async fetchAllMeanings() {
    if (this.isProcessing)
      return;
    const words = this.plugin.databaseManager.getAllWords();
    if (words.length === 0) {
      new import_obsidian5.Notice("\uC800\uC7A5\uB41C \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!this.plugin.settings.apiKey) {
      new import_obsidian5.Notice("LLM API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    this.isProcessing = true;
    this.showProgress(words.length);
    try {
      this.updateProgress(0, words.length, "\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911...");
      const wordList = words.map((w) => w.word);
      const llmResponse = await this.plugin.llmService.getMultipleWordDetails(wordList);
      if (llmResponse.success && llmResponse.data) {
        this.updateProgress(words.length, words.length, "\uB370\uC774\uD130\uBCA0\uC774\uC2A4\uC5D0 \uC800\uC7A5\uD558\uB294 \uC911...");
        const results = {
          success: [],
          failed: []
        };
        for (const wordDetail of llmResponse.data) {
          try {
            const wordData = this.plugin.llmService.convertToWordData(wordDetail);
            const originalWord = words.find((w) => w.word.toLowerCase() === wordDetail.word.toLowerCase());
            if (originalWord) {
              const updatedWord = {
                ...originalWord,
                meanings: wordData.meanings,
                examples: wordData.examples,
                similarWords: wordData.similarWords
              };
              await this.plugin.databaseManager.updateWordData(originalWord.word, updatedWord);
              results.success.push(originalWord.word);
            } else {
              results.failed.push(wordDetail.word);
            }
          } catch (error) {
            console.error(`\uB2E8\uC5B4 "${wordDetail.word}" \uCC98\uB9AC \uC2E4\uD328:`, error);
            results.failed.push(wordDetail.word);
          }
        }
        this.hideProgress();
        this.showResults(results);
      } else {
        this.hideProgress();
        new import_obsidian5.Notice(`\uB2E8\uC5B4 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328: ${llmResponse.error}`);
      }
    } catch (error) {
      console.error("\uC804\uCCB4 \uB2E8\uC5B4 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328:", error);
      this.hideProgress();
      new import_obsidian5.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
    } finally {
      this.isProcessing = false;
    }
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.style.display = "block";
    progressText.textContent = `\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911... (0/${totalWords})`;
  }
  updateProgress(current, total, message) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    if (!progressSection)
      return;
    const progressText = progressSection.querySelector(".progress-text");
    const progressFill = progressSection.querySelector(".progress-fill");
    if (!progressText || !progressFill)
      return;
    const percentage = current / total * 100;
    progressText.textContent = `${message} (${current}/${total})`;
    progressFill.style.width = `${percentage}%`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    if (progressSection) {
      progressSection.style.display = "none";
    }
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.style.display = "block";
    resultSection.empty();
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 10) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 10) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", { text: "\uB2EB\uAE30", cls: "close-button" });
    closeButton.addEventListener("click", () => this.close());
    if (results.success.length > 0) {
      new import_obsidian5.Notice(`${results.success.length}\uAC1C\uC758 \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD588\uC2B5\uB2C8\uB2E4!`);
    }
  }
  onClose() {
    this.isProcessing = false;
    const { contentEl } = this;
    contentEl.empty();
  }
};
var VocabularyReviewModal = class extends import_obsidian5.Modal {
  constructor(app, plugin, words) {
    super(app);
    this.currentIndex = 0;
    this.showAnswer = false;
    this.plugin = plugin;
    this.words = words;
  }
  onOpen() {
    if (this.words.length === 0) {
      this.close();
      return;
    }
    this.showCurrentWord();
  }
  showCurrentWord() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const currentWord = this.words[this.currentIndex];
    const progressEl = contentEl.createEl("div", { cls: "review-progress" });
    progressEl.createEl("span", {
      text: `${this.currentIndex + 1} / ${this.words.length}`,
      cls: "progress-text"
    });
    const cardEl = contentEl.createEl("div", { cls: "review-card" });
    const deleteButton = cardEl.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const wordEl = cardEl.createEl("h1", { cls: "review-word" });
    if (currentWord.pronunciation && currentWord.pronunciation.trim()) {
      wordEl.innerHTML = `${currentWord.word} <span class="pronunciation">[${currentWord.pronunciation}]</span>`;
    } else {
      wordEl.textContent = currentWord.word;
    }
    if (!this.showAnswer) {
      if (currentWord.similarWords.length > 0) {
        const similarEl = cardEl.createEl("div", { cls: "similar-words" });
        similarEl.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
        const similarList = similarEl.createEl("ul");
        currentWord.similarWords.forEach((word) => {
          similarList.createEl("li", { text: word });
        });
      }
      if (currentWord.examples.length > 0) {
        const examplesEl = cardEl.createEl("div", { cls: "examples" });
        examplesEl.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
        currentWord.examples.forEach((example) => {
          examplesEl.createEl("p", { text: example.english, cls: "example" });
        });
      }
      const checkBtn = cardEl.createEl("button", {
        text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30",
        cls: "check-answer-button"
      });
      checkBtn.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCurrentWord();
      });
    } else {
      const answerEl = cardEl.createEl("div", { cls: "answer-section" });
      answerEl.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerEl.createEl("ul");
      currentWord.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      if (currentWord.examples.length > 0) {
        answerEl.createEl("h3", { text: "\uC608\uBB38 \uBC88\uC5ED:" });
        currentWord.examples.forEach((example) => {
          answerEl.createEl("p", { text: example.korean, cls: "translation" });
        });
      }
      this.createReviewButtons(cardEl);
    }
  }
  createReviewButtons(container) {
    const reviewSection = container.createEl("div", { cls: "review-buttons" });
    const hardBtn = reviewSection.createEl("button", { text: "\uC5B4\uB824\uC6C0", cls: "review-btn hard" });
    const goodBtn = reviewSection.createEl("button", { text: "\uC88B\uC74C", cls: "review-btn good" });
    const easyBtn = reviewSection.createEl("button", { text: "\uC26C\uC6C0", cls: "review-btn easy" });
    hardBtn.addEventListener("click", () => this.handleReview("hard"));
    goodBtn.addEventListener("click", () => this.handleReview("good"));
    easyBtn.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentWord = this.words[this.currentIndex];
    await this.plugin.databaseManager.updateWord(currentWord.word, difficulty);
    this.currentIndex++;
    this.showAnswer = false;
    if (this.currentIndex >= this.words.length) {
      this.showCompletion();
    } else {
      this.showCurrentWord();
    }
  }
  async handleDeleteCard() {
    const currentWord = this.words[this.currentIndex];
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentWord.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentWord.word);
          this.words.splice(this.currentIndex, 1);
          if (this.words.length === 0) {
            this.showCompletion();
            return;
          }
          if (this.currentIndex >= this.words.length) {
            this.currentIndex = this.words.length - 1;
          }
          this.showAnswer = false;
          this.showCurrentWord();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian5.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletion() {
    const { contentEl } = this;
    contentEl.empty();
    const completionEl = contentEl.createEl("div", { cls: "completion" });
    completionEl.createEl("h2", { text: "\uBCF5\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: "\uBAA8\uB4E0 \uB2E8\uC5B4\uB97C \uBCF5\uC2B5\uD588\uC2B5\uB2C8\uB2E4." });
    const closeBtn = completionEl.createEl("button", { text: "\uB2EB\uAE30", cls: "close-btn" });
    closeBtn.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FetchSelectedMeaningsModal = class extends import_obsidian5.Modal {
  constructor(app, plugin, selectedWords) {
    super(app);
    this.isProcessing = false;
    this.plugin = plugin;
    this.selectedWords = selectedWords;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("fetch-selected-meanings-modal");
    contentEl.createEl("h2", {
      text: `\uC120\uD0DD\uB41C ${this.selectedWords.length}\uAC1C \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30`,
      cls: "modal-title"
    });
    contentEl.createEl("p", {
      text: `\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4\uC758 \uC0C1\uC138 \uC815\uBCF4\uB97C LLM API\uB97C \uD1B5\uD574 \uAC00\uC838\uC635\uB2C8\uB2E4.`,
      cls: "modal-description"
    });
    const wordListEl = contentEl.createEl("div", { cls: "selected-words-list" });
    wordListEl.createEl("h3", { text: "\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4:" });
    const wordsContainer = wordListEl.createEl("div", { cls: "words-container" });
    this.selectedWords.forEach((word) => {
      wordsContainer.createEl("span", {
        text: word,
        cls: "selected-word-tag"
      });
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const fetchButton = buttonSection.createEl("button", {
      text: "\uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-button"
    });
    fetchButton.addEventListener("click", () => {
      this.fetchSelectedMeanings();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      this.close();
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section" });
    progressSection.style.display = "none";
    const progressText = progressSection.createEl("div", { cls: "progress-text" });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section" });
    resultSection.style.display = "none";
  }
  async fetchSelectedMeanings() {
    if (this.isProcessing)
      return;
    this.isProcessing = true;
    this.showProgress(this.selectedWords.length);
    try {
      const result = await this.plugin.llmService.getMultipleWordDetails(this.selectedWords);
      if (result.success && Array.isArray(result.data)) {
        const successWords = [];
        const failedWords = [];
        for (const wordData of result.data) {
          try {
            if (wordData.word && wordData.meanings && wordData.meanings.length > 0) {
              const existingWord = this.plugin.databaseManager.getWord(wordData.word);
              if (existingWord) {
                const updatedWord = {
                  ...existingWord,
                  pronunciation: wordData.pronunciation || "",
                  meanings: wordData.meanings,
                  examples: wordData.examples || [],
                  similarWords: wordData.similarWords || []
                };
                await this.plugin.databaseManager.updateWordData(wordData.word, updatedWord);
                successWords.push(wordData.word);
              }
            } else {
              failedWords.push(wordData.word);
            }
          } catch (error) {
            console.error(`\uB2E8\uC5B4 "${wordData.word}" \uC5C5\uB370\uC774\uD2B8 \uC2E4\uD328:`, error);
            failedWords.push(wordData.word);
          }
        }
        this.hideProgress();
        this.showResults({ success: successWords, failed: failedWords });
        if (successWords.length > 0) {
          new import_obsidian5.Notice(`${successWords.length}\uAC1C\uC758 \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD588\uC2B5\uB2C8\uB2E4!`);
        }
      } else {
        this.hideProgress();
        new import_obsidian5.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + (result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"));
      }
    } catch (error) {
      this.hideProgress();
      new import_obsidian5.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + error.message);
    } finally {
      this.isProcessing = false;
    }
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.style.display = "block";
    progressText.textContent = `\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911... (0/${totalWords})`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    if (progressSection) {
      progressSection.style.display = "none";
    }
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.style.display = "block";
    resultSection.empty();
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 10) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 10) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", { text: "\uB2EB\uAE30", cls: "close-button" });
    closeButton.addEventListener("click", () => this.close());
  }
  onClose() {
    this.isProcessing = false;
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal2 = class extends import_obsidian5.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/VocabularyDatabase.ts
var import_obsidian6 = require("obsidian");
var VocabularyDatabaseManager = class {
  constructor(app, saveCallback, folderPath) {
    this.books = /* @__PURE__ */ new Map();
    this.words = /* @__PURE__ */ new Map();
    this.settings = {
      dailyGoal: 10,
      reviewInterval: 1,
      currentBookId: "default"
    };
    this.statistics = {
      totalReviews: 0,
      streakDays: 0,
      lastStudyDate: null
    };
    this.vocabularyFolderPath = "Vocabulary";
    this.app = app;
    this.saveCallback = saveCallback;
    if (folderPath) {
      this.vocabularyFolderPath = folderPath;
    }
    this.initializeVocabularyFolder();
    this.initializeDefaultBook();
  }
  // 단어장 폴더 초기화
  async initializeVocabularyFolder() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
      if (folder instanceof import_obsidian6.TFolder) {
        return;
      }
      await this.app.vault.createFolder(this.vocabularyFolderPath);
    } catch (error) {
      if (error instanceof Error) {
        const errorMessage = error.message.toLowerCase();
        if (errorMessage.includes("already exists") || errorMessage.includes("folder already exists") || errorMessage.includes("already present")) {
          console.log("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354\uAC00 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4:", this.vocabularyFolderPath);
        } else {
          console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC2E4\uD328:", error);
        }
      } else {
        console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC911 \uC54C \uC218 \uC5C6\uB294 \uC624\uB958 \uBC1C\uC0DD:", error);
      }
    }
  }
  // 기본 book 초기화
  async initializeDefaultBook() {
    if (!this.books.has("default")) {
      const defaultBook = {
        id: "default",
        name: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5",
        description: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.",
        createdAt: (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: 0,
        isDefault: true
      };
      this.books.set("default", defaultBook);
      await this.saveBookToFile(defaultBook);
    }
  }
  // Book을 MD 파일로 저장
  async saveBookToFile(book) {
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian6.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const bookWords = Array.from(this.words.values()).filter((word) => word.bookId === book.id).sort((a, b) => a.word.localeCompare(b.word));
    const frontmatter = [
      "---",
      `bookId: ${book.id}`,
      `name: "${book.name}"`,
      `description: "${book.description}"`,
      `createdAt: ${book.createdAt}`,
      `updatedAt: ${book.updatedAt}`,
      `wordCount: ${bookWords.length}`,
      `isDefault: ${book.isDefault}`,
      "---",
      ""
    ].join("\n");
    let content = frontmatter;
    content += `# ${book.name}

`;
    content += `${book.description}

`;
    content += `## \uB2E8\uC5B4 \uBAA9\uB85D (${bookWords.length}\uAC1C)

`;
    for (const word of bookWords) {
      content += `### ${word.word}

`;
      if (word.pronunciation) {
        content += `**\uBC1C\uC74C:** ${word.pronunciation}

`;
      }
      content += `**\uB73B:**
`;
      for (const meaning of word.meanings) {
        content += `- ${meaning}
`;
      }
      content += "\n";
      if (word.similarWords.length > 0) {
        content += `**\uC720\uC0AC\uD55C \uB2E8\uC5B4:** ${word.similarWords.join(", ")}

`;
      }
      if (word.examples.length > 0) {
        content += `**\uC608\uBB38:**
`;
        for (const example of word.examples) {
          content += `- ${example.english}
`;
          content += `  - ${example.korean}
`;
        }
        content += "\n";
      }
      content += `**\uBCF5\uC2B5 \uC815\uBCF4:**
`;
      content += `- \uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}
`;
      content += `- \uB09C\uC774\uB3C4: ${word.difficulty}
`;
      content += `- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${word.lastReviewed || "\uC5C6\uC74C"}
`;
      content += `- \uCD94\uAC00\uC77C: ${word.addedDate}

`;
      content += "---\n\n";
    }
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian6.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        try {
          await this.app.vault.create(filePath, content);
        } catch (error) {
          if (error instanceof Error && error.message.includes("already exists")) {
            const file = this.app.vault.getAbstractFileByPath(filePath);
            if (file instanceof import_obsidian6.TFile) {
              await this.app.vault.modify(file, content);
            } else {
              console.error("\uD30C\uC77C\uC774 \uC774\uBBF8 \uC874\uC7AC\uD558\uC9C0\uB9CC TFile\uC774 \uC544\uB2D8:", filePath);
            }
          } else {
            console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
          }
        }
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  // MD 파일에서 Book과 단어들 로드
  async loadBookFromFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const { frontmatter, body } = this.parseMDFile(content);
      if (!frontmatter.bookId)
        return;
      const book = {
        id: frontmatter.bookId,
        name: frontmatter.name || file.basename,
        description: frontmatter.description || "",
        createdAt: frontmatter.createdAt || (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: frontmatter.updatedAt || (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: frontmatter.wordCount || 0,
        isDefault: frontmatter.isDefault || false
      };
      this.books.set(book.id, book);
      const words = this.parseWordsFromMarkdown(body, book.id);
      for (const word of words) {
        this.words.set(word.word.toLowerCase(), word);
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:", error);
    }
  }
  // MD 파일 파싱 (frontmatter와 body 분리)
  parseMDFile(content) {
    const frontmatterRegex = /^---\n([\s\S]*?)\n---\n([\s\S]*)$/;
    const match = content.match(frontmatterRegex);
    if (!match) {
      return { frontmatter: {}, body: content };
    }
    const frontmatterText = match[1];
    const body = match[2];
    const frontmatter = {};
    const lines = frontmatterText.split("\n");
    for (const line of lines) {
      const colonIndex = line.indexOf(":");
      if (colonIndex > 0) {
        const key = line.substring(0, colonIndex).trim();
        let value = line.substring(colonIndex + 1).trim();
        if (value.startsWith('"') && value.endsWith('"')) {
          value = value.slice(1, -1);
        }
        if (value === "true")
          frontmatter[key] = true;
        else if (value === "false")
          frontmatter[key] = false;
        else if (!isNaN(Number(value)))
          frontmatter[key] = Number(value);
        else
          frontmatter[key] = value;
      }
    }
    return { frontmatter, body };
  }
  // 마크다운에서 단어들 파싱
  parseWordsFromMarkdown(markdown, bookId) {
    const words = [];
    const wordSections = markdown.split("---").filter((section) => section.trim());
    for (const section of wordSections) {
      const word = this.parseWordSection(section, bookId);
      if (word) {
        words.push(word);
      }
    }
    return words;
  }
  // 개별 단어 섹션 파싱
  parseWordSection(section, bookId) {
    const lines = section.split("\n").map((line) => line.trim()).filter((line) => line);
    if (lines.length === 0)
      return null;
    let word = "";
    let pronunciation = "";
    const meanings = [];
    const similarWords = [];
    const examples = [];
    let reviewCount = 0;
    let difficulty = "good";
    let lastReviewed = null;
    let addedDate = (/* @__PURE__ */ new Date()).toISOString();
    let currentSection = "";
    let currentExample = {};
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      if (line.startsWith("### ")) {
        word = line.substring(4).trim();
        continue;
      }
      if (line.startsWith("**\uBC1C\uC74C:**")) {
        pronunciation = line.substring(7).trim();
        currentSection = "pronunciation";
      } else if (line.startsWith("**\uB73B:**")) {
        currentSection = "meanings";
      } else if (line.startsWith("**\uC720\uC0AC\uD55C \uB2E8\uC5B4:**")) {
        const similarWordsText = line.substring(12).trim();
        similarWords.push(...similarWordsText.split(",").map((w) => w.trim()));
        currentSection = "similar";
      } else if (line.startsWith("**\uC608\uBB38:**")) {
        currentSection = "examples";
      } else if (line.startsWith("**\uBCF5\uC2B5 \uC815\uBCF4:**")) {
        currentSection = "review";
      } else if (currentSection === "meanings" && line.startsWith("- ")) {
        meanings.push(line.substring(2).trim());
      } else if (currentSection === "examples") {
        if (line.startsWith("- ") && !line.startsWith("  - ")) {
          if (currentExample.english && currentExample.korean) {
            examples.push({
              english: currentExample.english,
              korean: currentExample.korean
            });
          }
          currentExample = { english: line.substring(2).trim() };
        } else if (line.startsWith("  - ")) {
          currentExample.korean = line.substring(4).trim();
        }
      } else if (currentSection === "review") {
        if (line.startsWith("- \uBCF5\uC2B5 \uD69F\uC218: ")) {
          reviewCount = parseInt(line.substring(9).trim()) || 0;
        } else if (line.startsWith("- \uB09C\uC774\uB3C4: ")) {
          const diff = line.substring(7).trim();
          if (diff === "easy" || diff === "good" || diff === "hard") {
            difficulty = diff;
          }
        } else if (line.startsWith("- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ")) {
          const lastRev = line.substring(11).trim();
          lastReviewed = lastRev === "\uC5C6\uC74C" ? null : lastRev;
        } else if (line.startsWith("- \uCD94\uAC00\uC77C: ")) {
          addedDate = line.substring(7).trim();
        }
      }
    }
    if (currentExample.english && currentExample.korean) {
      examples.push({
        english: currentExample.english,
        korean: currentExample.korean
      });
    }
    if (!word)
      return null;
    return {
      word: word.toLowerCase(),
      pronunciation,
      meanings,
      similarWords,
      examples,
      reviewCount,
      difficulty,
      lastReviewed,
      addedDate,
      bookId
    };
  }
  // 모든 단어장 파일 로드
  async loadAllBooks() {
    this.books.clear();
    this.words.clear();
    await this.initializeVocabularyFolder();
    await this.initializeDefaultBook();
    const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
    if (folder instanceof import_obsidian6.TFolder) {
      for (const file of folder.children) {
        if (file instanceof import_obsidian6.TFile && file.extension === "md") {
          await this.loadBookFromFile(file);
        }
      }
    }
    await this.loadSettings();
  }
  // 설정 파일 저장/로드
  async saveSettings() {
    const settingsPath = (0, import_obsidian6.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    const data = {
      settings: this.settings,
      statistics: this.statistics
    };
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(settingsPath);
      const content = JSON.stringify(data, null, 2);
      if (existingFile instanceof import_obsidian6.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        await this.app.vault.create(settingsPath, content);
      }
    } catch (error) {
      console.error("\uC124\uC815 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  async loadSettings() {
    const settingsPath = (0, import_obsidian6.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    try {
      const file = this.app.vault.getAbstractFileByPath(settingsPath);
      if (file instanceof import_obsidian6.TFile) {
        const content = await this.app.vault.read(file);
        const data = JSON.parse(content);
        if (data.settings) {
          this.settings = { ...this.settings, ...data.settings };
        }
        if (data.statistics) {
          this.statistics = { ...this.statistics, ...data.statistics };
        }
      }
    } catch (error) {
      console.warn("\uC124\uC815 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:", error);
    }
  }
  // Book 관리 메서드들
  async createBook(name, description = "") {
    const id = `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    const book = {
      id,
      name,
      description,
      createdAt: (/* @__PURE__ */ new Date()).toISOString(),
      updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
      wordCount: 0,
      isDefault: false
    };
    this.books.set(id, book);
    await this.saveBookToFile(book);
    this.saveCallback();
    return book;
  }
  async updateBook(bookId, updates) {
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedBook = {
      ...book,
      ...updates,
      updatedAt: (/* @__PURE__ */ new Date()).toISOString()
    };
    this.books.set(bookId, updatedBook);
    await this.saveBookToFile(updatedBook);
    this.saveCallback();
  }
  async deleteBook(bookId) {
    if (bookId === "default") {
      throw new Error("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC740 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const wordsToDelete = Array.from(this.words.values()).filter((word) => word.bookId === bookId).map((word) => word.word);
    for (const word of wordsToDelete) {
      this.words.delete(word.toLowerCase());
    }
    this.books.delete(bookId);
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian6.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian6.TFile) {
      await this.app.vault.delete(file);
    }
    if (this.settings.currentBookId === bookId) {
      this.settings.currentBookId = "default";
      await this.saveSettings();
    }
    this.saveCallback();
  }
  getAllBooks() {
    return Array.from(this.books.values()).sort((a, b) => {
      if (a.isDefault)
        return -1;
      if (b.isDefault)
        return 1;
      return a.name.localeCompare(b.name);
    });
  }
  getBook(bookId) {
    return this.books.get(bookId);
  }
  getCurrentBook() {
    return this.books.get(this.settings.currentBookId);
  }
  async setCurrentBook(bookId) {
    if (!this.books.has(bookId)) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    this.settings.currentBookId = bookId;
    await this.saveSettings();
    this.saveCallback();
  }
  // Book별 단어 수 업데이트
  updateBookWordCount(bookId) {
    const wordCount = Array.from(this.words.values()).filter((word) => word.bookId === bookId).length;
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount = wordCount;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
    }
  }
  // 단어 추가
  async addWord(wordData) {
    const word = wordData.word.toLowerCase();
    if (this.words.has(word)) {
      throw new Error(`\uB2E8\uC5B4 "${wordData.word}"\uB294 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4.`);
    }
    const newWord = {
      ...wordData,
      word: wordData.word.toLowerCase(),
      reviewCount: 0,
      difficulty: "good",
      lastReviewed: null,
      addedDate: (/* @__PURE__ */ new Date()).toISOString(),
      bookId: wordData.bookId || this.settings.currentBookId
    };
    this.words.set(word, newWord);
    const book = this.books.get(newWord.bookId);
    if (book) {
      book.wordCount++;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 삭제
  async removeWord(word) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const bookId = wordData.bookId;
    this.words.delete(wordKey);
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount--;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과)
  async updateWord(word, difficulty) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 전체 데이터 업데이트 (LLM API로 가져온 정보로 덮어쓰기)
  async updateWordData(word, updatedWordData) {
    const wordKey = word.toLowerCase();
    const existingWord = this.words.get(wordKey);
    if (!existingWord) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedWord = {
      ...updatedWordData,
      word: wordKey,
      reviewCount: existingWord.reviewCount,
      difficulty: existingWord.difficulty,
      lastReviewed: existingWord.lastReviewed,
      addedDate: existingWord.addedDate,
      bookId: existingWord.bookId
    };
    this.words.set(wordKey, updatedWord);
    const book = this.books.get(updatedWord.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 조회
  getWord(word) {
    return this.words.get(word.toLowerCase());
  }
  // 현재 book의 모든 단어 조회
  getAllWords() {
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 특정 book의 모든 단어 조회
  getWordsByBook(bookId) {
    return Array.from(this.words.values()).filter((word) => word.bookId === bookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 복습 대상 단어 조회 (현재 book)
  getWordsForReview() {
    const now = /* @__PURE__ */ new Date();
    const reviewIntervalMs = this.settings.reviewInterval * 24 * 60 * 60 * 1e3;
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return true;
      const lastReview = new Date(word.lastReviewed);
      const timeSinceLastReview = now.getTime() - lastReview.getTime();
      return timeSinceLastReview >= reviewIntervalMs;
    });
  }
  // 단어 검색 (현재 book)
  searchWords(query) {
    const lowerQuery = query.toLowerCase();
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter(
      (word) => word.word.includes(lowerQuery) || word.meanings.some((meaning) => meaning.toLowerCase().includes(lowerQuery))
    );
  }
  // 통계 조회 (현재 book)
  getStatistics() {
    const words = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId);
    const totalWords = words.length;
    const totalReviews = this.statistics.totalReviews;
    const averageDifficulty = words.length > 0 ? words.reduce((sum, word) => {
      const difficultyValue = word.difficulty === "easy" ? 1 : word.difficulty === "good" ? 2 : 3;
      return sum + difficultyValue;
    }, 0) / words.length : 0;
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const recentActivity = this.calculateRecentActivity();
    return {
      totalWords,
      totalReviews,
      streakDays: this.statistics.streakDays,
      averageDifficulty,
      wordsByDifficulty,
      recentActivity
    };
  }
  // 일일 목표 진행률 조회 (현재 book)
  getDailyGoalProgress() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const todayWords = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return false;
      return new Date(word.lastReviewed).toDateString() === today;
    }).length;
    const goal = this.settings.dailyGoal;
    const percentage = goal > 0 ? Math.min(todayWords / goal * 100, 100) : 0;
    return {
      current: todayWords,
      goal,
      percentage
    };
  }
  // 설정 업데이트
  async updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
    await this.saveSettings();
    this.saveCallback();
  }
  // 데이터 저장용 형식으로 변환 (호환성 유지)
  getDataForSave() {
    return {
      books: Array.from(this.books.values()),
      words: Array.from(this.words.values()),
      settings: this.settings,
      statistics: this.statistics
    };
  }
  // 저장된 데이터에서 로드 (호환성 유지)
  async loadFromData(data) {
    await this.loadAllBooks();
  }
  // 연속 학습일 업데이트
  updateStreak() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const lastStudyDate = this.statistics.lastStudyDate ? new Date(this.statistics.lastStudyDate).toDateString() : null;
    if (lastStudyDate === today) {
      return;
    }
    if (!lastStudyDate) {
      this.statistics.streakDays = 1;
    } else {
      const yesterday = /* @__PURE__ */ new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      const yesterdayStr = yesterday.toDateString();
      if (lastStudyDate === yesterdayStr) {
        this.statistics.streakDays++;
      } else {
        this.statistics.streakDays = 1;
      }
    }
    this.statistics.lastStudyDate = (/* @__PURE__ */ new Date()).toISOString();
  }
  // 최근 7일 활동 계산
  calculateRecentActivity() {
    const activity = [];
    const today = /* @__PURE__ */ new Date();
    for (let i = 6; i >= 0; i--) {
      const date = new Date(today);
      date.setDate(date.getDate() - i);
      const dateStr = date.toDateString();
      const wordsStudied = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        return new Date(word.lastReviewed).toDateString() === dateStr;
      }).length;
      const reviewsCompleted = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        const reviewDate = new Date(word.lastReviewed);
        return reviewDate.toDateString() === dateStr;
      }).length;
      activity.push({
        date: date.toISOString().split("T")[0],
        wordsStudied,
        reviewsCompleted
      });
    }
    return activity;
  }
  // 단어장 폴더 경로 업데이트
  updateVocabularyFolderPath(newPath) {
    this.vocabularyFolderPath = newPath;
    this.initializeVocabularyFolder();
  }
};

// src/AddWordsModal.ts
var import_obsidian7 = require("obsidian");
var AddWordsModal = class extends import_obsidian7.Modal {
  constructor(app, plugin) {
    super(app);
    this.isProcessing = false;
    this.plugin = plugin;
    this.wordService = new WordService();
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-words-modal");
    await this.plugin.databaseManager.loadAllBooks();
    const bookSelectSection = contentEl.createEl("div", { cls: "book-select-section" });
    const bookLabel = bookSelectSection.createEl("label", { text: "\uB2E8\uC5B4\uC7A5 \uC120\uD0DD", cls: "book-select-label" });
    const bookSelectContainer = bookSelectSection.createEl("div", { cls: "book-select-container" });
    this.bookSelect = bookSelectContainer.createEl("select", { cls: "book-select-dropdown" });
    const addBookButton = bookSelectContainer.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00",
      cls: "add-book-button"
    });
    addBookButton.addEventListener("click", () => this.openAddBookModal());
    await this.updateBookSelect();
    this.bookSelect.addEventListener("change", (e) => {
      const selectedBookId = e.target.value;
      this.plugin.databaseManager.setCurrentBook(selectedBookId);
    });
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uCD94\uAC00\uD560 \uC601\uB2E8\uC5B4\uB4E4\uC744 \uC785\uB825\uD558\uC138\uC694. \uAC01 \uB2E8\uC5B4\uB294 \uC0C8 \uC904\uB85C \uAD6C\uBD84\uB429\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const inputSection = contentEl.createEl("div", { cls: "input-section" });
    const textarea = inputSection.createEl("textarea", {
      placeholder: "beautiful\nhappy\nlearn\nstudy\nwork\n...",
      cls: "words-textarea"
    });
    textarea.setAttribute("rows", "10");
    const exampleBtn = inputSection.createEl("button", {
      text: "\uC608\uC2DC \uB2E8\uC5B4\uB4E4 \uBD88\uB7EC\uC624\uAE30",
      cls: "example-button"
    });
    exampleBtn.addEventListener("click", () => {
      textarea.value = "beautiful\nhappy\nlearn\nstudy\nwork\nimportant\nsuccess\nknowledge\nexperience\nfreedom";
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const addButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button primary"
    });
    addButton.addEventListener("click", () => this.addWords(textarea.value, this.bookSelect.value));
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
    const progressSection = contentEl.createEl("div", { cls: "progress-section" });
    progressSection.style.display = "none";
    const progressText = progressSection.createEl("p", {
      text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911...",
      cls: "progress-text"
    });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section" });
    resultSection.style.display = "none";
    textarea.addEventListener("keydown", (e) => {
      if (e.ctrlKey && e.key === "Enter") {
        this.addWords(textarea.value, this.bookSelect.value);
      }
    });
    textarea.focus();
  }
  async addWords(inputText, bookId) {
    if (this.isProcessing)
      return;
    const words = this.parseWords(inputText);
    if (words.length === 0) {
      new import_obsidian7.Notice("\uCD94\uAC00\uD560 \uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    this.isProcessing = true;
    this.showProgress(words.length);
    const results = {
      success: [],
      failed: [],
      alreadyExists: []
    };
    for (let i = 0; i < words.length; i++) {
      const word = words[i];
      this.updateProgress(i + 1, words.length, `\uCC98\uB9AC \uC911: ${word}`);
      try {
        const existingWord = this.plugin.databaseManager.getWord(word);
        if (existingWord) {
          results.alreadyExists.push(word);
          continue;
        }
        const wordData = await this.wordService.getWordData(word);
        const vocabularyCard = {
          ...wordData,
          reviewCount: 0,
          difficulty: "good",
          lastReviewed: null,
          addedDate: (/* @__PURE__ */ new Date()).toISOString(),
          bookId
        };
        await this.plugin.databaseManager.addWord(vocabularyCard);
        results.success.push(word);
      } catch (error) {
        console.error(`\uB2E8\uC5B4 "${word}" \uCD94\uAC00 \uC2E4\uD328:`, error);
        results.failed.push(word);
      }
    }
    this.hideProgress();
    this.showResults(results);
  }
  parseWords(inputText) {
    return inputText.split("\n").map((word) => word.trim()).filter((word) => word.length > 0).map((word) => word.toLowerCase()).filter((word, index, array) => array.indexOf(word) === index);
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.style.display = "block";
    progressText.textContent = `\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911... (0/${totalWords})`;
  }
  updateProgress(current, total, message) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    const progressFill = progressSection.querySelector(".progress-fill");
    const percentage = current / total * 100;
    progressText.textContent = `${message} (${current}/${total})`;
    progressFill.style.width = `${percentage}%`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    progressSection.style.display = "none";
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.style.display = "block";
    resultSection.empty();
    const totalProcessed = results.success.length + results.failed.length + results.alreadyExists.length;
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 5) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.alreadyExists.length > 0) {
      const existsEl = summaryEl.createEl("div", { cls: "result-item warning" });
      existsEl.createEl("span", {
        text: `\u26A0\uFE0F \uC774\uBBF8 \uC874\uC7AC: ${results.alreadyExists.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.alreadyExists.length <= 5) {
        existsEl.createEl("p", {
          text: results.alreadyExists.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 5) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", {
      text: "\uB2EB\uAE30",
      cls: "close-button"
    });
    closeButton.addEventListener("click", () => this.close());
    const addMoreButton = buttonSection.createEl("button", {
      text: "\uB354 \uCD94\uAC00\uD558\uAE30",
      cls: "add-more-button"
    });
    addMoreButton.addEventListener("click", () => {
      resultSection.style.display = "none";
      const textarea = this.contentEl.querySelector(".words-textarea");
      textarea.value = "";
      textarea.focus();
    });
    if (results.success.length > 0) {
      new import_obsidian7.Notice(`${results.success.length}\uAC1C\uC758 \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
    }
  }
  onClose() {
    this.isProcessing = false;
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  openAddBookModal() {
    new AddBookModal(this.app, this.plugin).open();
  }
  async handleBookCreated(event) {
    await this.updateBookSelect();
  }
  async updateBookSelect() {
    await this.plugin.databaseManager.loadAllBooks();
    const books = this.plugin.databaseManager.getAllBooks();
    this.bookSelect.innerHTML = "";
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      this.bookSelect.appendChild(option);
    });
  }
};

// src/main.ts
var EnglishVocabularyPlugin = class extends import_obsidian8.Plugin {
  async onload() {
    console.log("\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uD50C\uB7EC\uADF8\uC778\uC774 \uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
    await this.loadSettings();
    this.databaseManager = new VocabularyDatabaseManager(
      this.app,
      () => this.saveAllData(),
      this.settings.vocabularyFolderPath
    );
    try {
      await this.databaseManager.loadAllBooks();
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uB370\uC774\uD130 \uB85C\uB4DC \uC2E4\uD328:", error);
      await this.migrateFromLegacyData();
    }
    this.llmService = new LLMService(this.settings);
    this.addSettingTab(new VocabularySettingTab(this.app, this));
    this.addCommand({
      id: "open-vocabulary-modal",
      name: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      callback: () => {
        new VocabularyModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "open-vocabulary-manager",
      name: "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30",
      callback: () => {
        new VocabularyManagerModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "add-words",
      name: "\uB2E8\uC5B4 \uCD94\uAC00",
      callback: () => {
        new AddWordsModal(this.app, this).open();
      }
    });
    this.addRibbonIcon("book", "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30", () => {
      new VocabularyManagerModal(this.app, this).open();
    });
  }
  onunload() {
    console.log("\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uD50C\uB7EC\uADF8\uC778\uC774 \uC5B8\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
  }
  async loadSettings() {
    const data = await this.loadData();
    if (data && typeof data === "object" && "settings" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data.settings);
    } else if (data && typeof data === "object" && "apiKey" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
    } else {
      this.settings = Object.assign({}, DEFAULT_SETTINGS);
    }
  }
  async saveSettings() {
    await this.saveAllData();
  }
  // 기존 data.json에서 MD 파일로 마이그레이션
  async migrateFromLegacyData() {
    try {
      const savedData = await this.loadData();
      if (savedData && savedData.database && Array.isArray(savedData.database.words)) {
        console.log("\uAE30\uC874 data.json\uC5D0\uC11C MD \uD30C\uC77C\uB85C \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2DC\uC791...");
        const legacyData = savedData.database;
        if (legacyData.words && legacyData.words.length > 0) {
          for (const word of legacyData.words) {
            try {
              await this.databaseManager.addWord({
                ...word,
                bookId: "default",
                pronunciation: word.pronunciation || ""
              });
            } catch (error) {
              console.warn(`\uB2E8\uC5B4 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328: ${word.word}`, error);
            }
          }
        }
        if (legacyData.settings) {
          await this.databaseManager.updateSettings(legacyData.settings);
        }
        console.log("\uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC644\uB8CC");
      }
    } catch (error) {
      console.error("\uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328:", error);
    }
  }
  // 모든 데이터 저장 (설정만 저장, 단어장 데이터는 MD 파일로 자동 저장됨)
  async saveAllData() {
    const data = {
      settings: this.settings
    };
    await this.saveData(data);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy91dGlscy50cyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYmluZC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3V0aWxzLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvc0Vycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9udWxsLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy90b0Zvcm1EYXRhLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9BeGlvc1VSTFNlYXJjaFBhcmFtcy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0ludGVyY2VwdG9yTWFuYWdlci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2RlZmF1bHRzL3RyYW5zaXRpb25hbC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvY2xhc3Nlcy9VUkxTZWFyY2hQYXJhbXMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9wbGF0Zm9ybS9icm93c2VyL2NsYXNzZXMvRm9ybURhdGEuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9wbGF0Zm9ybS9icm93c2VyL2NsYXNzZXMvQmxvYi5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9wbGF0Zm9ybS9jb21tb24vdXRpbHMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9wbGF0Zm9ybS9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdG9VUkxFbmNvZGVkRm9ybS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvZm9ybURhdGFUb0pTT04uanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9kZWZhdWx0cy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvc0hlYWRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL3RyYW5zZm9ybURhdGEuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsZWRFcnJvci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9wYXJzZVByb3RvY29sLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9zcGVlZG9tZXRlci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdGhyb3R0bGUuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3Byb2dyZXNzRXZlbnRSZWR1Y2VyLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc1VSTFNhbWVPcmlnaW4uanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2Nvb2tpZXMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9idWlsZEZ1bGxQYXRoLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9tZXJnZUNvbmZpZy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcmVzb2x2ZUNvbmZpZy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL3hoci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29tcG9zZVNpZ25hbHMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3RyYWNrU3RyZWFtLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMvZmV0Y2guanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9hZGFwdGVycy9hZGFwdGVycy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZGlzcGF0Y2hSZXF1ZXN0LmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvZW52L2RhdGEuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3ZhbGlkYXRvci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvQXhpb3MuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBeGlvc0Vycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9IdHRwU3RhdHVzQ29kZS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2F4aW9zLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9pbmRleC5qcyIsICJzcmMvTExNU2VydmljZS50cyIsICJzcmMvVm9jYWJ1bGFyeU1vZGFsLnRzIiwgInNyYy9UVFNTZXJ2aWNlLnRzIiwgInNyYy9Wb2NhYnVsYXJ5TWFuYWdlck1vZGFsLnRzIiwgInNyYy9Xb3JkU2VydmljZS50cyIsICJzcmMvQWRkQm9va01vZGFsLnRzIiwgInNyYy9Wb2NhYnVsYXJ5RGF0YWJhc2UudHMiLCAic3JjL0FkZFdvcmRzTW9kYWwudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTLCBWb2NhYnVsYXJ5U2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5TW9kYWwgfSBmcm9tICcuL1ZvY2FidWxhcnlNb2RhbCc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlNYW5hZ2VyTW9kYWwgfSBmcm9tICcuL1ZvY2FidWxhcnlNYW5hZ2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIH0gZnJvbSAnLi9Wb2NhYnVsYXJ5RGF0YWJhc2UnO1xyXG5pbXBvcnQgeyBBZGRXb3Jkc01vZGFsIH0gZnJvbSAnLi9BZGRXb3Jkc01vZGFsJztcclxuaW1wb3J0IHsgQWRkQm9va01vZGFsIH0gZnJvbSAnLi9BZGRCb29rTW9kYWwnO1xyXG5pbXBvcnQgeyBMTE1TZXJ2aWNlIH0gZnJvbSAnLi9MTE1TZXJ2aWNlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgIHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3M7XHJcbiAgICBkYXRhYmFzZU1hbmFnZXI6IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXI7XHJcbiAgICBsbG1TZXJ2aWNlOiBMTE1TZXJ2aWNlO1xyXG5cclxuICAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjUgXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4XHVDNzc0IFx1Qjg1Q1x1QjREQ1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QjlFNFx1QjJDOFx1QzgwMCBcdUNEMDhcdUFFMzBcdUQ2NTQgKEFwcCBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTQgXHVDODA0XHVCMkVDKVxyXG4gICAgICAgIHRoaXMuZGF0YWJhc2VNYW5hZ2VyID0gbmV3IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnNhdmVBbGxEYXRhKCksXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mudm9jYWJ1bGFyeUZvbGRlclBhdGhcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE1EIFx1RDMwQ1x1Qzc3QyBcdUFFMzBcdUJDMTggXHVCMzcwXHVDNzc0XHVEMTMwIFx1Qjg1Q1x1QjREQ1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBkYXRhLmpzb25cdUM1RDBcdUMxMUMgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4IFx1QzJEQ1x1QjNDNFxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1pZ3JhdGVGcm9tTGVnYWN5RGF0YSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTExNIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUNEMDhcdUFFMzBcdUQ2NTRcclxuICAgICAgICB0aGlzLmxsbVNlcnZpY2UgPSBuZXcgTExNU2VydmljZSh0aGlzLnNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1RDBFRCBcdUNEOTRcdUFDMDBcclxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFZvY2FidWxhcnlTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG4gICAgICAgIC8vIFx1QkE4NVx1QjgzOVx1QzVCNCBcdUNEOTRcdUFDMDBcclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ29wZW4tdm9jYWJ1bGFyeS1tb2RhbCcsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNSBcdUMyRENcdUM3OTEnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmV3IFZvY2FidWxhcnlNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUJDRjRcdUFFMzAgXHVCQTg1XHVCODM5XHVDNUI0IFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnb3Blbi12b2NhYnVsYXJ5LW1hbmFnZXInLFxyXG4gICAgICAgICAgICBuYW1lOiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkNGNFx1QUUzMCcsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAgXHVCQTg1XHVCODM5XHVDNUI0IFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnYWRkLXdvcmRzJyxcclxuICAgICAgICAgICAgbmFtZTogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmV3IEFkZFdvcmRzTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUI5QUNcdUJDRjggXHVDNTQ0XHVDNzc0XHVDRjU4IFx1Q0Q5NFx1QUMwMCAoXHVDQzQ1IFx1QzU0NFx1Qzc3NFx1Q0Y1OClcclxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2Jvb2snLCAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkNGNFx1QUUzMCcsICgpID0+IHtcclxuICAgICAgICAgICAgbmV3IFZvY2FidWxhcnlNYW5hZ2VyTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbnVubG9hZCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjUgXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4XHVDNzc0IFx1QzVCOFx1Qjg1Q1x1QjREQ1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QjlDQyBcdUI4NUNcdUI0REMgKFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUIzNzBcdUM3NzRcdUQxMzBcdUM2NDAgXHVCRDg0XHVCOUFDKVxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XHJcbiAgICAgICAgaWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmICdzZXR0aW5ncycgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBcdUQxQjVcdUQ1NjlcdUI0MUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNUQwXHVDMTFDIFx1QzEyNFx1QzgxNSBcdUJEODBcdUJEODRcdUI5Q0MgXHVDRDk0XHVDRDlDXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhLnNldHRpbmdzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmICdhcGlLZXknIGluIGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1RDYxNVx1QzJERFx1Qzc1OCBcdUMxMjRcdUM4MTUgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNzc4IFx1QUNCRFx1QzZCMFxyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QUMwMCBcdUM1QzZcdUIyOTQgXHVBQ0JEXHVDNkIwIFx1QUUzMFx1QkNGOFx1QUMxMiBcdUMwQUNcdUM2QTlcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlQWxsRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QUUzMFx1Qzg3NCBkYXRhLmpzb25cdUM1RDBcdUMxMUMgTUQgXHVEMzBDXHVDNzdDXHVCODVDIFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OFxyXG4gICAgcHJpdmF0ZSBhc3luYyBtaWdyYXRlRnJvbUxlZ2FjeURhdGEoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgc2F2ZWREYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xyXG4gICAgICAgICAgICBpZiAoc2F2ZWREYXRhICYmIHNhdmVkRGF0YS5kYXRhYmFzZSAmJiBBcnJheS5pc0FycmF5KHNhdmVkRGF0YS5kYXRhYmFzZS53b3JkcykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdUFFMzBcdUM4NzQgZGF0YS5qc29uXHVDNUQwXHVDMTFDIE1EIFx1RDMwQ1x1Qzc3Q1x1Qjg1QyBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNTggXHVDMkRDXHVDNzkxLi4uJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxlZ2FjeURhdGEgPSBzYXZlZERhdGEuZGF0YWJhc2U7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NDQgXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNVx1QzVEMCBcdUNEOTRcdUFDMDBcclxuICAgICAgICAgICAgICAgIGlmIChsZWdhY3lEYXRhLndvcmRzICYmIGxlZ2FjeURhdGEud29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiBsZWdhY3lEYXRhLndvcmRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5hZGRXb3JkKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi53b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tJZDogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmQucHJvbnVuY2lhdGlvbiB8fCAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFx1QjJFOFx1QzVCNCBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNTggXHVDMkU0XHVEMzI4OiAke3dvcmQud29yZH1gLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1QzEyNFx1QzgxNSBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNThcclxuICAgICAgICAgICAgICAgIGlmIChsZWdhY3lEYXRhLnNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIudXBkYXRlU2V0dGluZ3MobGVnYWN5RGF0YS5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNTggXHVDNjQ0XHVCOENDJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNTggXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCQUE4XHVCNEUwIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM4MDBcdUM3QTUgKFx1QzEyNFx1QzgxNVx1QjlDQyBcdUM4MDBcdUM3QTUsIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUIzNzBcdUM3NzRcdUQxMzBcdUIyOTQgTUQgXHVEMzBDXHVDNzdDXHVCODVDIFx1Qzc5MFx1QjNEOSBcdUM4MDBcdUM3QTVcdUI0MjgpXHJcbiAgICBhc3luYyBzYXZlQWxsRGF0YSgpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5zZXR0aW5nc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YShkYXRhKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVEMEMwXHVDNzg1IFx1QzEyMFx1QzVCOCBcdUNEOTRcdUFDMDBcclxuZXhwb3J0IHsgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4sIEFkZEJvb2tNb2RhbCB9OyAiLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBOb3RpY2UsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiBmcm9tICcuL21haW4nO1xyXG5pbXBvcnQgeyBMTE1TZXJ2aWNlIH0gZnJvbSAnLi9MTE1TZXJ2aWNlJztcclxuaW1wb3J0IHsgZW5jcnlwdEFwaUtleSwgZGVjcnlwdEFwaUtleSwgbWFza0FwaUtleSB9IGZyb20gJy4vdXRpbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWb2NhYnVsYXJ5U2V0dGluZ3Mge1xyXG4gICAgYXBpS2V5OiBzdHJpbmc7XHJcbiAgICBkZWZhdWx0TGFuZ3VhZ2U6IHN0cmluZztcclxuICAgIHNob3dTaW1pbGFyV29yZHM6IGJvb2xlYW47XHJcbiAgICBzaG93RXhhbXBsZXM6IGJvb2xlYW47XHJcbiAgICBleGFtcGxlc0NvdW50OiBudW1iZXI7XHJcbiAgICAvLyBcdUFDMDEgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVCQ0M0IFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBBUEkgXHVEMEE0XHJcbiAgICBvcGVuYWlBcGlLZXk6IHN0cmluZztcclxuICAgIGFudGhyb3BpY0FwaUtleTogc3RyaW5nO1xyXG4gICAgZ29vZ2xlQXBpS2V5OiBzdHJpbmc7XHJcbiAgICBsbG1Qcm92aWRlcjogJ29wZW5haScgfCAnYW50aHJvcGljJyB8ICdnb29nbGUnO1xyXG4gICAgbGxtTW9kZWw6IHN0cmluZztcclxuICAgIGVuYWJsZUFkdmFuY2VkRmVhdHVyZXM6IGJvb2xlYW47XHJcbiAgICAvLyBcdUJDRjVcdUMyQjUgXHVENjU0XHVCQTc0IFx1QjE5Mlx1Qzc3NCBcdUMxMjRcdUM4MTVcclxuICAgIHJldmlld01vZGFsSGVpZ2h0OiBudW1iZXI7XHJcbiAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDODAwXHVDN0E1IFx1RDNGNFx1QjM1NCBcdUFDQkRcdUI4NUNcclxuICAgIHZvY2FidWxhcnlGb2xkZXJQYXRoOiBzdHJpbmc7XHJcbiAgICAvLyBUVFMgXHVDMTI0XHVDODE1XHJcbiAgICB0dHNFbmFibGVkOiBib29sZWFuO1xyXG4gICAgdHRzVm9pY2U6IHN0cmluZztcclxuICAgIHR0c1BsYXliYWNrU3BlZWQ6IG51bWJlcjtcclxuICAgIHR0c0F1dG9QbGF5OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogVm9jYWJ1bGFyeVNldHRpbmdzID0ge1xyXG4gICAgYXBpS2V5OiAnJyxcclxuICAgIGRlZmF1bHRMYW5ndWFnZTogJ2tvJyxcclxuICAgIHNob3dTaW1pbGFyV29yZHM6IHRydWUsXHJcbiAgICBzaG93RXhhbXBsZXM6IHRydWUsXHJcbiAgICBleGFtcGxlc0NvdW50OiAzLFxyXG4gICAgb3BlbmFpQXBpS2V5OiAnJyxcclxuICAgIGFudGhyb3BpY0FwaUtleTogJycsXHJcbiAgICBnb29nbGVBcGlLZXk6ICcnLFxyXG4gICAgbGxtUHJvdmlkZXI6ICdvcGVuYWknLFxyXG4gICAgbGxtTW9kZWw6ICdnZW1pbmktMS4wLXByby1sYXRlc3QnLFxyXG4gICAgZW5hYmxlQWR2YW5jZWRGZWF0dXJlczogZmFsc2UsXHJcbiAgICByZXZpZXdNb2RhbEhlaWdodDogODUsXHJcbiAgICB2b2NhYnVsYXJ5Rm9sZGVyUGF0aDogJ1ZvY2FidWxhcnknLFxyXG4gICAgdHRzRW5hYmxlZDogdHJ1ZSxcclxuICAgIHR0c1ZvaWNlOiAnZW4tVVMtQXZhTmV1cmFsJyxcclxuICAgIHR0c1BsYXliYWNrU3BlZWQ6IDEuMCxcclxuICAgIHR0c0F1dG9QbGF5OiBmYWxzZVxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNSBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzggXHVDMTI0XHVDODE1JyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVCYXNpY1NldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZUxMTVNldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZVRUU1NldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZUFkdmFuY2VkU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQmFzaWNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUFFMzBcdUJDRjggXHVDMTI0XHVDODE1JyB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUFFMzBcdUJDRjggXHVDNUI4XHVDNUI0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNCBcdUI3M0JcdUM3NDQgXHVENDVDXHVDMkRDXHVENTYwIFx1QzVCOFx1QzVCNFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdrbycsICdcdUQ1NUNcdUFENkRcdUM1QjQnKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4nLCAnRW5nbGlzaCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdqYScsICdcdTY1RTVcdTY3MkNcdThBOUUnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRMYW5ndWFnZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TGFuZ3VhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0IFx1RDQ1Q1x1QzJEQycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ1NTlcdUMyQjVcdUQ1NjAgXHVCNTRDIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NDQgXHVENTY4XHVBRUQ4IFx1RDQ1Q1x1QzJEQ1x1RDU2OVx1QjJDOFx1QjJFNC4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U2ltaWxhcldvcmRzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTaW1pbGFyV29yZHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM2MDhcdUJCMzggXHVENDVDXHVDMkRDJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1RDU1OVx1QzJCNVx1RDU2MCBcdUI1NEMgXHVDNjA4XHVCQjM4XHVCNEU0XHVDNzQ0IFx1RDU2OFx1QUVEOCBcdUQ0NUNcdUMyRENcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0V4YW1wbGVzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFeGFtcGxlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QzYwOFx1QkIzOCBcdUFDMUNcdUMyMTgnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVENDVDXHVDMkRDXHVENTYwIFx1QzYwOFx1QkIzOFx1Qzc1OCBcdUFDMUNcdUMyMThcdUI5N0MgXHVDMTI0XHVDODE1XHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygxLCAxMCwgMSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGFtcGxlc0NvdW50KVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGFtcGxlc0NvdW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVMTE1TZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdMTE0gQVBJIFx1QzEyNFx1QzgxNScgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVBQ0UwXHVBRTA5IFx1QUUzMFx1QjJBNSBcdUQ2NUNcdUMxMzFcdUQ2NTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnTExNIEFQSVx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NUMgXHVBQ0UwXHVBRTA5IFx1QUUzMFx1QjJBNVx1Qzc0NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQWR2YW5jZWRGZWF0dXJlcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBZHZhbmNlZEZlYXR1cmVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnTExNIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgTExNIEFQSSBcdUM4MUNcdUFDRjVcdUM1QzVcdUNDQjRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignb3BlbmFpJywgJ09wZW5BSSAoR1BUKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdhbnRocm9waWMnLCAnQW50aHJvcGljIChDbGF1ZGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dvb2dsZScsICdHb29nbGUgKEdlbWluaSknKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVByb3ZpZGVyKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVByb3ZpZGVyID0gdmFsdWUgYXMgJ29wZW5haScgfCAnYW50aHJvcGljJyB8ICdnb29nbGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ29wZW5haScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnZ3B0LTQuMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ2FudGhyb3BpYycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnY2xhdWRlLTMtNS1zb25uZXQnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdnb29nbGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbU1vZGVsID0gJ2dlbWluaS0yLjUtZmxhc2gnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVNb2RlbFNlbGVjdGlvbihjb250YWluZXJFbCk7XHJcblxyXG4gICAgICAgIC8vIFx1QUMwMSBcdUM4MUNcdUFDRjVcdUM1QzVcdUNDQjRcdUJDQzQgQVBJIFx1RDBBNCBcdUMxMjRcdUM4MTVcclxuICAgICAgICB0aGlzLmNyZWF0ZUFwaUtleVNldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBUEkgXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc1OCBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QUM4QyBcdUMxMjRcdUM4MTVcdUI0MThcdUM1QzhcdUIyOTRcdUM5QzAgXHVEMTRDXHVDMkE0XHVEMkI4XHVENTY5XHVCMkM4XHVCMkU0LicpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCBcdUM5MTEuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbGxtU2VydmljZS50ZXN0Q29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgQVBJIFx1QzVGMFx1QUNCMCBcdUMxMzFcdUFDRjUhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQVBJIFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjg6ICcgKyByZXN1bHQuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEFQSSBcdUM1RjBcdUFDQjAgXHVDMkU0XHVEMzI4OiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZU1vZGVsU2VsZWN0aW9uKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQVBJIFx1QkFBOFx1QjM3OCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgTExNIFx1QkFBOFx1QjM3OFx1Qzc0NCBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvdmlkZXIgPT09ICdvcGVuYWknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuMScsICdHUFQtNC4xJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTRvJywgJ0dQVC00bycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dwdC00by1taW5pJywgJ0dQVC00byBNaW5pJykgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuMS1sb25nJywgJ0dQVC00LjEgKExvbmcgQ29udGV4dCknKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNC41LXByZXZpZXcnLCAnR1BULTQuNSBQcmV2aWV3JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuNS1wcmV2aWV3LTInLCAnR1BULTQuNSBQcmV2aWV3IDInKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdhbnRocm9waWMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xhdWRlIDMuNSBcdUJBQThcdUIzNzhcdUI0RTRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNS1zb25uZXQnLCAnQ2xhdWRlIDMuNSBTb25uZXQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy01LWhhaWt1JywgJ0NsYXVkZSAzLjUgSGFpa3UnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy01LW9wdXMnLCAnQ2xhdWRlIDMuNSBPcHVzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xhdWRlIDMuNyBcdUJBQThcdUIzNzhcdUI0RTRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNy1zb25uZXQnLCAnQ2xhdWRlIDMuNyBTb25uZXQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy03LWhhaWt1JywgJ0NsYXVkZSAzLjcgSGFpa3UnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy03LW9wdXMnLCAnQ2xhdWRlIDMuNyBPcHVzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNS1mbGFzaCcsICdDbGF1ZGUgMy41IEZsYXNoJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb3ZpZGVyID09PSAnZ29vZ2xlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0xLjUtcHJvLWxhdGVzdCcsICdHZW1pbmkgMS41IFBybycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0yLjUtZmxhc2gnLCAnR2VtaW5pIDIuNSBGbGFzaCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0yLjUtcHJvJywgJ0dlbWluaSAyLjUgUHJvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ2VtaW5pLTEuNS1mbGFzaC1sYXRlc3QnLCAnR2VtaW5pIDEuNSBGbGFzaCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbU1vZGVsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQXBpS2V5U2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gT3BlbkFJIEFQSSBcdUQwQTRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ09wZW5BSSBBUEkgXHVEMEE0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ09wZW5BSSBBUEkgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4gKHNrLS4uLlx1Qjg1QyBcdUMyRENcdUM3OTEpJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpQXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkS2V5ID0gZGVjcnlwdEFwaUtleShjdXJyZW50S2V5KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hc2tlZEtleSA9IG1hc2tBcGlLZXkoZGVjcnlwdGVkS2V5KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3NrLS4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1QzBBQ1x1QzZBOVx1Qzc5MFx1QUMwMCBcdUM3ODVcdUI4MjVcdUQ1NUMgXHVBQzEyXHVDNzc0IFx1QjlDOFx1QzJBNFx1RDBCOVx1QjQxQyBcdUFDMTJcdUFDRkMgXHVCMkU0XHVCOTc0XHVCQTc0IFx1QzBDOFx1Qjg1Q1x1QzZCNCBcdUQwQTRcdUI4NUMgXHVBQzA0XHVDOEZDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBlbmNyeXB0QXBpS2V5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haUFwaUtleSA9IGVuY3J5cHRlZEtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBbnRocm9waWMgQVBJIFx1RDBBNFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQW50aHJvcGljIEFQSSBcdUQwQTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQW50aHJvcGljIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LiAoc2stYW50LS4uLlx1Qjg1QyBcdUMyRENcdUM3OTEpJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljQXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkS2V5ID0gZGVjcnlwdEFwaUtleShjdXJyZW50S2V5KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hc2tlZEtleSA9IG1hc2tBcGlLZXkoZGVjcnlwdGVkS2V5KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3NrLWFudC0uLi4nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShtYXNrZWRLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IG1hc2tlZEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkS2V5ID0gZW5jcnlwdEFwaUtleSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkgPSBlbmNyeXB0ZWRLZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gR29vZ2xlIEFQSSBcdUQwQTRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0dvb2dsZSBBUEkgXHVEMEE0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0dvb2dsZSBBUEkgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRLZXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQUl6YS4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBlbmNyeXB0QXBpS2V5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUFwaUtleSA9IGVuY3J5cHRlZEtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQWR2YW5jZWRTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUFDRTBcdUFFMDkgXHVDMTI0XHVDODE1JyB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVEM0Y0XHVCMzU0IFx1QkFBOVx1Qjg1RCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICBjb25zdCBmb2xkZXJzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKVxyXG4gICAgICAgICAgICAuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGb2xkZXIpIGFzIFRGb2xkZXJbXTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDODAwXHVDN0E1IFx1RDNGNFx1QjM1NCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDXHVCNEU0XHVDNzc0IFx1QzgwMFx1QzdBNVx1QjQyMCBcdUQzRjRcdUIzNTRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LiAoXHVBRTMwXHVCQ0Y4XHVBQzEyOiBWb2NhYnVsYXJ5KScpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb2xkZXJzLmZvckVhY2goZm9sZGVyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oZm9sZGVyLnBhdGgsIGZvbGRlci5wYXRoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mudm9jYWJ1bGFyeUZvbGRlclBhdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVWb2NhYnVsYXJ5Rm9sZGVyUGF0aCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZHJvcGRvd247XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QkNGNVx1QzJCNSBcdUQ2NTRcdUJBNzQgXHVCMTkyXHVDNzc0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QkNGNVx1QzJCNSBcdUJBQThcdUIyRUNcdUM3NTggXHVCMTkyXHVDNzc0XHVCOTdDIFx1RDY1NFx1QkE3NCBcdUIxOTJcdUM3NzRcdUM3NTggXHVCQzMxXHVCRDg0XHVDNzI4XHVCODVDIFx1QzEyNFx1QzgxNVx1RDU1OFx1QzEzOFx1QzY5NC4gKFx1QUUzMFx1QkNGOFx1QUMxMjogODUlKScpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cyg1MCwgOTUsIDUpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNzdDXHVDNzdDIFx1RDU1OVx1QzJCNSBcdUJBQTlcdUQ0NUMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVENTU4XHVCOEU4XHVDNUQwIFx1RDU1OVx1QzJCNVx1RDU2MCBcdUIyRThcdUM1QjRcdUM3NTggXHVCQUE5XHVENDVDIFx1QUMxQ1x1QzIxOFx1Qjk3QyBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDUsIDUwLCA1KVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8uZ2V0RGF0YUZvclNhdmUoKT8uc2V0dGluZ3M/LmRhaWx5R29hbCB8fCAxMClcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyPy51cGRhdGVTZXR0aW5ncyh7IGRhaWx5R29hbDogdmFsdWUgfSk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVCQ0Y1XHVDMkI1IFx1QUMwNFx1QUNBOSAoXHVDNzdDKScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUIyRThcdUM1QjRcdUI5N0MgXHVCMkU0XHVDMkRDIFx1QkNGNVx1QzJCNVx1RDU2MCBcdUFDMDRcdUFDQTlcdUM3NDQgXHVDMTI0XHVDODE1XHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygxLCAzMCwgMSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXI/LmdldERhdGFGb3JTYXZlKCk/LnNldHRpbmdzPy5yZXZpZXdJbnRlcnZhbCB8fCAxKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXI/LnVwZGF0ZVNldHRpbmdzKHsgcmV2aWV3SW50ZXJ2YWw6IHZhbHVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlVFRTU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVFRTIChcdUM3NENcdUMxMzEgXHVDNzdEXHVBRTMwKSBcdUMxMjRcdUM4MTUnIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1RUUyBcdUQ2NUNcdUMxMzFcdUQ2NTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0XHVDNjQwIFx1QzYwOFx1QkIzOFx1Qzc0NCBcdUM3NENcdUMxMzFcdUM3M0NcdUI4NUMgXHVDNzdEXHVDNUI0XHVDOEZDXHVCMjk0IFx1QUUzMFx1QjJBNVx1Qzc0NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzRW5hYmxlZClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNFbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNzRDXHVDMTMxIFx1QzEyMFx1RDBERCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDNzRDXHVDMTMxXHVDNzQ0IFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLUF2YU5ldXJhbCcsICdBdmEgKFx1QkJGOFx1QUQ2RCBcdUM2MDFcdUM1QjQpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLUplbm55TmV1cmFsJywgJ0plbm55IChcdUJCRjhcdUFENkQgXHVDNjAxXHVDNUI0KScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQi1Tb25pYU5ldXJhbCcsICdTb25pYSAoXHVDNjAxXHVBRDZEIFx1QzYwMVx1QzVCNCknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tR0ItUnlhbk5ldXJhbCcsICdSeWFuIChcdUM2MDFcdUFENkQgXHVDNjAxXHVDNUI0KScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1BVS1OYXRhc2hhTmV1cmFsJywgJ05hdGFzaGEgKFx1RDYzOFx1QzhGQyBcdUM2MDFcdUM1QjQpJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QzdBQ1x1QzBERCBcdUMxOERcdUIzQzQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxIFx1QzdBQ1x1QzBERCBcdUMxOERcdUIzQzRcdUI5N0MgXHVDODcwXHVDODA4XHVENTU4XHVDMTM4XHVDNjk0LiAoMC41ID0gXHVCMjkwXHVCOUJDLCAxLjAgPSBcdUJDRjRcdUQxQjUsIDIuMCA9IFx1QkU2MFx1Qjk4NCknKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMC41LCAyLjAsIDAuMSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQbGF5YmFja1NwZWVkKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQbGF5YmFja1NwZWVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNzkwXHVCM0Q5IFx1QzdBQ1x1QzBERCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUIyRThcdUM1QjQgXHVDRTc0XHVCNERDXHVBQzAwIFx1RDQ1Q1x1QzJEQ1x1QjQyMCBcdUI1NEMgXHVDNzkwXHVCM0Q5XHVDNzNDXHVCODVDIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3N0RcdUM1QjRcdUM5MERcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzQXV0b1BsYXkpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzQXV0b1BsYXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxufSAiLCAiLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQvXHVCQ0Y1XHVENjM4XHVENjU0IFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMFxyXG5cclxuLy8gXHVBQzA0XHVCMkU4XHVENTVDIFx1QzU1NFx1RDYzOFx1RDY1NCBcdUQwQTQgKFx1QzJFNFx1QzgxQyBcdUQ1MDRcdUI4NUNcdUIzNTVcdUMxNThcdUM1RDBcdUMxMUNcdUIyOTQgXHVCMzU0IFx1QzU0OFx1QzgwNFx1RDU1QyBcdUJDMjlcdUJDOTUgXHVDMEFDXHVDNkE5IFx1QUQ4Q1x1QzdBNSlcclxuY29uc3QgRU5DUllQVElPTl9LRVkgPSAnb2JzaWRpYW4tdm9jYWJ1bGFyeS1wbHVnaW4ta2V5LTIwMjQnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVuY3J5cHRBcGlLZXkoYXBpS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKCFhcGlLZXkpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBcdUFDMDRcdUIyRThcdUQ1NUMgWE9SIFx1QzU1NFx1RDYzOFx1RDY1NCAoXHVDMkU0XHVDODFDXHVCODVDXHVCMjk0IFx1QjM1NCBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVCQzI5XHVCQzk1IFx1QzBBQ1x1QzZBOSBcdUFEOENcdUM3QTUpXHJcbiAgICAgICAgbGV0IGVuY3J5cHRlZCA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXBpS2V5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXJDb2RlID0gYXBpS2V5LmNoYXJDb2RlQXQoaSkgXiBFTkNSWVBUSU9OX0tFWS5jaGFyQ29kZUF0KGkgJSBFTkNSWVBUSU9OX0tFWS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBlbmNyeXB0ZWQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBidG9hKGVuY3J5cHRlZCk7IC8vIEJhc2U2NCBcdUM3NzhcdUNGNTRcdUI1MjlcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWNyeXB0QXBpS2V5KGVuY3J5cHRlZEFwaUtleTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmICghZW5jcnlwdGVkQXBpS2V5KSByZXR1cm4gJyc7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGF0b2IoZW5jcnlwdGVkQXBpS2V5KTsgLy8gQmFzZTY0IFx1QjUxNFx1Q0Y1NFx1QjUyOVxyXG4gICAgICAgIGxldCBkZWNyeXB0ZWQgPSAnJztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlY29kZWQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY2hhckNvZGUgPSBkZWNvZGVkLmNoYXJDb2RlQXQoaSkgXiBFTkNSWVBUSU9OX0tFWS5jaGFyQ29kZUF0KGkgJSBFTkNSWVBUSU9OX0tFWS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBkZWNyeXB0ZWQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkZWNyeXB0ZWQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBcdUQwQTQgXHVCQ0Y1XHVENjM4XHVENjU0IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBBUEkgXHVEMEE0XHVCOTdDIFx1QjlDOFx1QzJBNFx1RDBCOVx1RDU1OFx1QzVFQyBcdUQ0NUNcdUMyRENcclxuZXhwb3J0IGZ1bmN0aW9uIG1hc2tBcGlLZXkoYXBpS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKCFhcGlLZXkpIHJldHVybiAnJztcclxuICAgIGlmIChhcGlLZXkubGVuZ3RoIDw9IDgpIHJldHVybiAnKicucmVwZWF0KGFwaUtleS5sZW5ndGgpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gYXBpS2V5LnN1YnN0cmluZygwLCA0KSArICcqJy5yZXBlYXQoYXBpS2V5Lmxlbmd0aCAtIDgpICsgYXBpS2V5LnN1YnN0cmluZyhhcGlLZXkubGVuZ3RoIC0gNCk7XHJcbn0gIiwgIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcCgpIHtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgfTtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBiaW5kIGZyb20gJy4vaGVscGVycy9iaW5kLmpzJztcblxuLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3NcblxuY29uc3Qge3RvU3RyaW5nfSA9IE9iamVjdC5wcm90b3R5cGU7XG5jb25zdCB7Z2V0UHJvdG90eXBlT2Z9ID0gT2JqZWN0O1xuY29uc3Qge2l0ZXJhdG9yLCB0b1N0cmluZ1RhZ30gPSBTeW1ib2w7XG5cbmNvbnN0IGtpbmRPZiA9IChjYWNoZSA9PiB0aGluZyA9PiB7XG4gICAgY29uc3Qgc3RyID0gdG9TdHJpbmcuY2FsbCh0aGluZyk7XG4gICAgcmV0dXJuIGNhY2hlW3N0cl0gfHwgKGNhY2hlW3N0cl0gPSBzdHIuc2xpY2UoOCwgLTEpLnRvTG93ZXJDYXNlKCkpO1xufSkoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG5cbmNvbnN0IGtpbmRPZlRlc3QgPSAodHlwZSkgPT4ge1xuICB0eXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gKHRoaW5nKSA9PiBraW5kT2YodGhpbmcpID09PSB0eXBlXG59XG5cbmNvbnN0IHR5cGVPZlRlc3QgPSB0eXBlID0+IHRoaW5nID0+IHR5cGVvZiB0aGluZyA9PT0gdHlwZTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IHtpc0FycmF5fSA9IEFycmF5O1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIHVuZGVmaW5lZCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzVW5kZWZpbmVkID0gdHlwZU9mVGVzdCgndW5kZWZpbmVkJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCdWZmZXJcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCdWZmZXIodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbCkgJiYgdmFsLmNvbnN0cnVjdG9yICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwuY29uc3RydWN0b3IpXG4gICAgJiYgaXNGdW5jdGlvbih2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIpICYmIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlcih2YWwpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzQXJyYXlCdWZmZXIgPSBraW5kT2ZUZXN0KCdBcnJheUJ1ZmZlcicpO1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcbiAgbGV0IHJlc3VsdDtcbiAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAoaXNBcnJheUJ1ZmZlcih2YWwuYnVmZmVyKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZ1xuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc1N0cmluZyA9IHR5cGVPZlRlc3QoJ3N0cmluZycpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGdW5jdGlvbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRnVuY3Rpb24gPSB0eXBlT2ZUZXN0KCdmdW5jdGlvbicpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzTnVtYmVyID0gdHlwZU9mVGVzdCgnbnVtYmVyJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHsqfSB0aGluZyBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzT2JqZWN0ID0gKHRoaW5nKSA9PiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQm9vbGVhblxuICpcbiAqIEBwYXJhbSB7Kn0gdGhpbmcgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQm9vbGVhbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzQm9vbGVhbiA9IHRoaW5nID0+IHRoaW5nID09PSB0cnVlIHx8IHRoaW5nID09PSBmYWxzZTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHBsYWluIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBwbGFpbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc1BsYWluT2JqZWN0ID0gKHZhbCkgPT4ge1xuICBpZiAoa2luZE9mKHZhbCkgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgcHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YodmFsKTtcbiAgcmV0dXJuIChwcm90b3R5cGUgPT09IG51bGwgfHwgcHJvdG90eXBlID09PSBPYmplY3QucHJvdG90eXBlIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90b3R5cGUpID09PSBudWxsKSAmJiAhKHRvU3RyaW5nVGFnIGluIHZhbCkgJiYgIShpdGVyYXRvciBpbiB2YWwpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBEYXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNEYXRlID0ga2luZE9mVGVzdCgnRGF0ZScpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGaWxlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNGaWxlID0ga2luZE9mVGVzdCgnRmlsZScpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCbG9iLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNCbG9iID0ga2luZE9mVGVzdCgnQmxvYicpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZUxpc3RcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRmlsZUxpc3QgPSBraW5kT2ZUZXN0KCdGaWxlTGlzdCcpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzU3RyZWFtID0gKHZhbCkgPT4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhXG4gKlxuICogQHBhcmFtIHsqfSB0aGluZyBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEZvcm1EYXRhLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNGb3JtRGF0YSA9ICh0aGluZykgPT4ge1xuICBsZXQga2luZDtcbiAgcmV0dXJuIHRoaW5nICYmIChcbiAgICAodHlwZW9mIEZvcm1EYXRhID09PSAnZnVuY3Rpb24nICYmIHRoaW5nIGluc3RhbmNlb2YgRm9ybURhdGEpIHx8IChcbiAgICAgIGlzRnVuY3Rpb24odGhpbmcuYXBwZW5kKSAmJiAoXG4gICAgICAgIChraW5kID0ga2luZE9mKHRoaW5nKSkgPT09ICdmb3JtZGF0YScgfHxcbiAgICAgICAgLy8gZGV0ZWN0IGZvcm0tZGF0YSBpbnN0YW5jZVxuICAgICAgICAoa2luZCA9PT0gJ29iamVjdCcgJiYgaXNGdW5jdGlvbih0aGluZy50b1N0cmluZykgJiYgdGhpbmcudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgRm9ybURhdGFdJylcbiAgICAgIClcbiAgICApXG4gIClcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzVVJMU2VhcmNoUGFyYW1zID0ga2luZE9mVGVzdCgnVVJMU2VhcmNoUGFyYW1zJyk7XG5cbmNvbnN0IFtpc1JlYWRhYmxlU3RyZWFtLCBpc1JlcXVlc3QsIGlzUmVzcG9uc2UsIGlzSGVhZGVyc10gPSBbJ1JlYWRhYmxlU3RyZWFtJywgJ1JlcXVlc3QnLCAnUmVzcG9uc2UnLCAnSGVhZGVycyddLm1hcChraW5kT2ZUZXN0KTtcblxuLyoqXG4gKiBUcmltIGV4Y2VzcyB3aGl0ZXNwYWNlIG9mZiB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBTdHJpbmcgdG8gdHJpbVxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2VcbiAqL1xuY29uc3QgdHJpbSA9IChzdHIpID0+IHN0ci50cmltID9cbiAgc3RyLnRyaW0oKSA6IHN0ci5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZywgJycpO1xuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSBbYWxsT3duS2V5cyA9IGZhbHNlXVxuICogQHJldHVybnMge2FueX1cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuLCB7YWxsT3duS2V5cyA9IGZhbHNlfSA9IHt9KSB7XG4gIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZFxuICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGk7XG4gIGxldCBsO1xuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yIChpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2ldLCBpLCBvYmopO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgb2JqZWN0IGtleXNcbiAgICBjb25zdCBrZXlzID0gYWxsT3duS2V5cyA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikgOiBPYmplY3Qua2V5cyhvYmopO1xuICAgIGNvbnN0IGxlbiA9IGtleXMubGVuZ3RoO1xuICAgIGxldCBrZXk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRLZXkob2JqLCBrZXkpIHtcbiAga2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICBsZXQgaSA9IGtleXMubGVuZ3RoO1xuICBsZXQgX2tleTtcbiAgd2hpbGUgKGktLSA+IDApIHtcbiAgICBfa2V5ID0ga2V5c1tpXTtcbiAgICBpZiAoa2V5ID09PSBfa2V5LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIHJldHVybiBfa2V5O1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuY29uc3QgX2dsb2JhbCA9ICgoKSA9PiB7XG4gIC8qZXNsaW50IG5vLXVuZGVmOjAqL1xuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBnbG9iYWxUaGlzO1xuICByZXR1cm4gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogZ2xvYmFsKVxufSkoKTtcblxuY29uc3QgaXNDb250ZXh0RGVmaW5lZCA9IChjb250ZXh0KSA9PiAhaXNVbmRlZmluZWQoY29udGV4dCkgJiYgY29udGV4dCAhPT0gX2dsb2JhbDtcblxuLyoqXG4gKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG4gKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cbiAqXG4gKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG4gKlxuICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIG1lcmdlKC8qIG9iajEsIG9iajIsIG9iajMsIC4uLiAqLykge1xuICBjb25zdCB7Y2FzZWxlc3N9ID0gaXNDb250ZXh0RGVmaW5lZCh0aGlzKSAmJiB0aGlzIHx8IHt9O1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgY29uc3QgYXNzaWduVmFsdWUgPSAodmFsLCBrZXkpID0+IHtcbiAgICBjb25zdCB0YXJnZXRLZXkgPSBjYXNlbGVzcyAmJiBmaW5kS2V5KHJlc3VsdCwga2V5KSB8fCBrZXk7XG4gICAgaWYgKGlzUGxhaW5PYmplY3QocmVzdWx0W3RhcmdldEtleV0pICYmIGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSBtZXJnZShyZXN1bHRbdGFyZ2V0S2V5XSwgdmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSBtZXJnZSh7fSwgdmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSB2YWwuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgZm9yIChsZXQgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgYXJndW1lbnRzW2ldICYmIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0b1xuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FsbE93bktleXNdXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG4gKi9cbmNvbnN0IGV4dGVuZCA9IChhLCBiLCB0aGlzQXJnLCB7YWxsT3duS2V5c309IHt9KSA9PiB7XG4gIGZvckVhY2goYiwgKHZhbCwga2V5KSA9PiB7XG4gICAgaWYgKHRoaXNBcmcgJiYgaXNGdW5jdGlvbih2YWwpKSB7XG4gICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0sIHthbGxPd25LZXlzfSk7XG4gIHJldHVybiBhO1xufVxuXG4vKipcbiAqIFJlbW92ZSBieXRlIG9yZGVyIG1hcmtlci4gVGhpcyBjYXRjaGVzIEVGIEJCIEJGICh0aGUgVVRGLTggQk9NKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50IHdpdGggQk9NXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gY29udGVudCB2YWx1ZSB3aXRob3V0IEJPTVxuICovXG5jb25zdCBzdHJpcEJPTSA9IChjb250ZW50KSA9PiB7XG4gIGlmIChjb250ZW50LmNoYXJDb2RlQXQoMCkgPT09IDB4RkVGRikge1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnNsaWNlKDEpO1xuICB9XG4gIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlclxuICogQHBhcmFtIHtmdW5jdGlvbn0gY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ29uc3RydWN0b3JcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcHJvcHNdXG4gKiBAcGFyYW0ge29iamVjdH0gW2Rlc2NyaXB0b3JzXVxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5jb25zdCBpbmhlcml0cyA9IChjb25zdHJ1Y3Rvciwgc3VwZXJDb25zdHJ1Y3RvciwgcHJvcHMsIGRlc2NyaXB0b3JzKSA9PiB7XG4gIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGRlc2NyaXB0b3JzKTtcbiAgY29uc3RydWN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY29uc3RydWN0b3I7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb25zdHJ1Y3RvciwgJ3N1cGVyJywge1xuICAgIHZhbHVlOiBzdXBlckNvbnN0cnVjdG9yLnByb3RvdHlwZVxuICB9KTtcbiAgcHJvcHMgJiYgT2JqZWN0LmFzc2lnbihjb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3BzKTtcbn1cblxuLyoqXG4gKiBSZXNvbHZlIG9iamVjdCB3aXRoIGRlZXAgcHJvdG90eXBlIGNoYWluIHRvIGEgZmxhdCBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2VPYmogc291cmNlIG9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IFtkZXN0T2JqXVxuICogQHBhcmFtIHtGdW5jdGlvbnxCb29sZWFufSBbZmlsdGVyXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BGaWx0ZXJdXG4gKlxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuY29uc3QgdG9GbGF0T2JqZWN0ID0gKHNvdXJjZU9iaiwgZGVzdE9iaiwgZmlsdGVyLCBwcm9wRmlsdGVyKSA9PiB7XG4gIGxldCBwcm9wcztcbiAgbGV0IGk7XG4gIGxldCBwcm9wO1xuICBjb25zdCBtZXJnZWQgPSB7fTtcblxuICBkZXN0T2JqID0gZGVzdE9iaiB8fCB7fTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsZXFlcWVxXG4gIGlmIChzb3VyY2VPYmogPT0gbnVsbCkgcmV0dXJuIGRlc3RPYmo7XG5cbiAgZG8ge1xuICAgIHByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc291cmNlT2JqKTtcbiAgICBpID0gcHJvcHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgICBwcm9wID0gcHJvcHNbaV07XG4gICAgICBpZiAoKCFwcm9wRmlsdGVyIHx8IHByb3BGaWx0ZXIocHJvcCwgc291cmNlT2JqLCBkZXN0T2JqKSkgJiYgIW1lcmdlZFtwcm9wXSkge1xuICAgICAgICBkZXN0T2JqW3Byb3BdID0gc291cmNlT2JqW3Byb3BdO1xuICAgICAgICBtZXJnZWRbcHJvcF0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBzb3VyY2VPYmogPSBmaWx0ZXIgIT09IGZhbHNlICYmIGdldFByb3RvdHlwZU9mKHNvdXJjZU9iaik7XG4gIH0gd2hpbGUgKHNvdXJjZU9iaiAmJiAoIWZpbHRlciB8fCBmaWx0ZXIoc291cmNlT2JqLCBkZXN0T2JqKSkgJiYgc291cmNlT2JqICE9PSBPYmplY3QucHJvdG90eXBlKTtcblxuICByZXR1cm4gZGVzdE9iajtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBzdHJpbmcgZW5kcyB3aXRoIHRoZSBjaGFyYWN0ZXJzIG9mIGEgc3BlY2lmaWVkIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hTdHJpbmdcbiAqIEBwYXJhbSB7TnVtYmVyfSBbcG9zaXRpb249IDBdXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmNvbnN0IGVuZHNXaXRoID0gKHN0ciwgc2VhcmNoU3RyaW5nLCBwb3NpdGlvbikgPT4ge1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgaWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQgfHwgcG9zaXRpb24gPiBzdHIubGVuZ3RoKSB7XG4gICAgcG9zaXRpb24gPSBzdHIubGVuZ3RoO1xuICB9XG4gIHBvc2l0aW9uIC09IHNlYXJjaFN0cmluZy5sZW5ndGg7XG4gIGNvbnN0IGxhc3RJbmRleCA9IHN0ci5pbmRleE9mKHNlYXJjaFN0cmluZywgcG9zaXRpb24pO1xuICByZXR1cm4gbGFzdEluZGV4ICE9PSAtMSAmJiBsYXN0SW5kZXggPT09IHBvc2l0aW9uO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBuZXcgYXJyYXkgZnJvbSBhcnJheSBsaWtlIG9iamVjdCBvciBudWxsIGlmIGZhaWxlZFxuICpcbiAqIEBwYXJhbSB7Kn0gW3RoaW5nXVxuICpcbiAqIEByZXR1cm5zIHs/QXJyYXl9XG4gKi9cbmNvbnN0IHRvQXJyYXkgPSAodGhpbmcpID0+IHtcbiAgaWYgKCF0aGluZykgcmV0dXJuIG51bGw7XG4gIGlmIChpc0FycmF5KHRoaW5nKSkgcmV0dXJuIHRoaW5nO1xuICBsZXQgaSA9IHRoaW5nLmxlbmd0aDtcbiAgaWYgKCFpc051bWJlcihpKSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGFyciA9IG5ldyBBcnJheShpKTtcbiAgd2hpbGUgKGktLSA+IDApIHtcbiAgICBhcnJbaV0gPSB0aGluZ1tpXTtcbiAgfVxuICByZXR1cm4gYXJyO1xufVxuXG4vKipcbiAqIENoZWNraW5nIGlmIHRoZSBVaW50OEFycmF5IGV4aXN0cyBhbmQgaWYgaXQgZG9lcywgaXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGlmIHRoZVxuICogdGhpbmcgcGFzc2VkIGluIGlzIGFuIGluc3RhbmNlIG9mIFVpbnQ4QXJyYXlcbiAqXG4gKiBAcGFyYW0ge1R5cGVkQXJyYXl9XG4gKlxuICogQHJldHVybnMge0FycmF5fVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuY29uc3QgaXNUeXBlZEFycmF5ID0gKFR5cGVkQXJyYXkgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICByZXR1cm4gdGhpbmcgPT4ge1xuICAgIHJldHVybiBUeXBlZEFycmF5ICYmIHRoaW5nIGluc3RhbmNlb2YgVHlwZWRBcnJheTtcbiAgfTtcbn0pKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiBnZXRQcm90b3R5cGVPZihVaW50OEFycmF5KSk7XG5cbi8qKlxuICogRm9yIGVhY2ggZW50cnkgaW4gdGhlIG9iamVjdCwgY2FsbCB0aGUgZnVuY3Rpb24gd2l0aCB0aGUga2V5IGFuZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdDxhbnksIGFueT59IG9iaiAtIFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBlbnRyeS5cbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuY29uc3QgZm9yRWFjaEVudHJ5ID0gKG9iaiwgZm4pID0+IHtcbiAgY29uc3QgZ2VuZXJhdG9yID0gb2JqICYmIG9ialtpdGVyYXRvcl07XG5cbiAgY29uc3QgX2l0ZXJhdG9yID0gZ2VuZXJhdG9yLmNhbGwob2JqKTtcblxuICBsZXQgcmVzdWx0O1xuXG4gIHdoaWxlICgocmVzdWx0ID0gX2l0ZXJhdG9yLm5leHQoKSkgJiYgIXJlc3VsdC5kb25lKSB7XG4gICAgY29uc3QgcGFpciA9IHJlc3VsdC52YWx1ZTtcbiAgICBmbi5jYWxsKG9iaiwgcGFpclswXSwgcGFpclsxXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBJdCB0YWtlcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhbmQgYSBzdHJpbmcsIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIGFsbCB0aGUgbWF0Y2hlc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWdFeHAgLSBUaGUgcmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIGFnYWluc3QuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byBzZWFyY2guXG4gKlxuICogQHJldHVybnMge0FycmF5PGJvb2xlYW4+fVxuICovXG5jb25zdCBtYXRjaEFsbCA9IChyZWdFeHAsIHN0cikgPT4ge1xuICBsZXQgbWF0Y2hlcztcbiAgY29uc3QgYXJyID0gW107XG5cbiAgd2hpbGUgKChtYXRjaGVzID0gcmVnRXhwLmV4ZWMoc3RyKSkgIT09IG51bGwpIHtcbiAgICBhcnIucHVzaChtYXRjaGVzKTtcbiAgfVxuXG4gIHJldHVybiBhcnI7XG59XG5cbi8qIENoZWNraW5nIGlmIHRoZSBraW5kT2ZUZXN0IGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSB3aGVuIHBhc3NlZCBhbiBIVE1MRm9ybUVsZW1lbnQuICovXG5jb25zdCBpc0hUTUxGb3JtID0ga2luZE9mVGVzdCgnSFRNTEZvcm1FbGVtZW50Jyk7XG5cbmNvbnN0IHRvQ2FtZWxDYXNlID0gc3RyID0+IHtcbiAgcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1stX1xcc10oW2EtelxcZF0pKFxcdyopL2csXG4gICAgZnVuY3Rpb24gcmVwbGFjZXIobSwgcDEsIHAyKSB7XG4gICAgICByZXR1cm4gcDEudG9VcHBlckNhc2UoKSArIHAyO1xuICAgIH1cbiAgKTtcbn07XG5cbi8qIENyZWF0aW5nIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGNoZWNrIGlmIGFuIG9iamVjdCBoYXMgYSBwcm9wZXJ0eS4gKi9cbmNvbnN0IGhhc093blByb3BlcnR5ID0gKCh7aGFzT3duUHJvcGVydHl9KSA9PiAob2JqLCBwcm9wKSA9PiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpKE9iamVjdC5wcm90b3R5cGUpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBSZWdFeHAgb2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNSZWdFeHAgPSBraW5kT2ZUZXN0KCdSZWdFeHAnKTtcblxuY29uc3QgcmVkdWNlRGVzY3JpcHRvcnMgPSAob2JqLCByZWR1Y2VyKSA9PiB7XG4gIGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMob2JqKTtcbiAgY29uc3QgcmVkdWNlZERlc2NyaXB0b3JzID0ge307XG5cbiAgZm9yRWFjaChkZXNjcmlwdG9ycywgKGRlc2NyaXB0b3IsIG5hbWUpID0+IHtcbiAgICBsZXQgcmV0O1xuICAgIGlmICgocmV0ID0gcmVkdWNlcihkZXNjcmlwdG9yLCBuYW1lLCBvYmopKSAhPT0gZmFsc2UpIHtcbiAgICAgIHJlZHVjZWREZXNjcmlwdG9yc1tuYW1lXSA9IHJldCB8fCBkZXNjcmlwdG9yO1xuICAgIH1cbiAgfSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCByZWR1Y2VkRGVzY3JpcHRvcnMpO1xufVxuXG4vKipcbiAqIE1ha2VzIGFsbCBtZXRob2RzIHJlYWQtb25seVxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5cbmNvbnN0IGZyZWV6ZU1ldGhvZHMgPSAob2JqKSA9PiB7XG4gIHJlZHVjZURlc2NyaXB0b3JzKG9iaiwgKGRlc2NyaXB0b3IsIG5hbWUpID0+IHtcbiAgICAvLyBza2lwIHJlc3RyaWN0ZWQgcHJvcHMgaW4gc3RyaWN0IG1vZGVcbiAgICBpZiAoaXNGdW5jdGlvbihvYmopICYmIFsnYXJndW1lbnRzJywgJ2NhbGxlcicsICdjYWxsZWUnXS5pbmRleE9mKG5hbWUpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHZhbHVlID0gb2JqW25hbWVdO1xuXG4gICAgaWYgKCFpc0Z1bmN0aW9uKHZhbHVlKSkgcmV0dXJuO1xuXG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZmFsc2U7XG5cbiAgICBpZiAoJ3dyaXRhYmxlJyBpbiBkZXNjcmlwdG9yKSB7XG4gICAgICBkZXNjcmlwdG9yLndyaXRhYmxlID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFkZXNjcmlwdG9yLnNldCkge1xuICAgICAgZGVzY3JpcHRvci5zZXQgPSAoKSA9PiB7XG4gICAgICAgIHRocm93IEVycm9yKCdDYW4gbm90IHJld3JpdGUgcmVhZC1vbmx5IG1ldGhvZCBcXCcnICsgbmFtZSArICdcXCcnKTtcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuY29uc3QgdG9PYmplY3RTZXQgPSAoYXJyYXlPclN0cmluZywgZGVsaW1pdGVyKSA9PiB7XG4gIGNvbnN0IG9iaiA9IHt9O1xuXG4gIGNvbnN0IGRlZmluZSA9IChhcnIpID0+IHtcbiAgICBhcnIuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICBvYmpbdmFsdWVdID0gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIGlzQXJyYXkoYXJyYXlPclN0cmluZykgPyBkZWZpbmUoYXJyYXlPclN0cmluZykgOiBkZWZpbmUoU3RyaW5nKGFycmF5T3JTdHJpbmcpLnNwbGl0KGRlbGltaXRlcikpO1xuXG4gIHJldHVybiBvYmo7XG59XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fVxuXG5jb25zdCB0b0Zpbml0ZU51bWJlciA9ICh2YWx1ZSwgZGVmYXVsdFZhbHVlKSA9PiB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIE51bWJlci5pc0Zpbml0ZSh2YWx1ZSA9ICt2YWx1ZSkgPyB2YWx1ZSA6IGRlZmF1bHRWYWx1ZTtcbn1cblxuLyoqXG4gKiBJZiB0aGUgdGhpbmcgaXMgYSBGb3JtRGF0YSBvYmplY3QsIHJldHVybiB0cnVlLCBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLlxuICpcbiAqIEBwYXJhbSB7dW5rbm93bn0gdGhpbmcgLSBUaGUgdGhpbmcgdG8gY2hlY2suXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzU3BlY0NvbXBsaWFudEZvcm0odGhpbmcpIHtcbiAgcmV0dXJuICEhKHRoaW5nICYmIGlzRnVuY3Rpb24odGhpbmcuYXBwZW5kKSAmJiB0aGluZ1t0b1N0cmluZ1RhZ10gPT09ICdGb3JtRGF0YScgJiYgdGhpbmdbaXRlcmF0b3JdKTtcbn1cblxuY29uc3QgdG9KU09OT2JqZWN0ID0gKG9iaikgPT4ge1xuICBjb25zdCBzdGFjayA9IG5ldyBBcnJheSgxMCk7XG5cbiAgY29uc3QgdmlzaXQgPSAoc291cmNlLCBpKSA9PiB7XG5cbiAgICBpZiAoaXNPYmplY3Qoc291cmNlKSkge1xuICAgICAgaWYgKHN0YWNrLmluZGV4T2Yoc291cmNlKSA+PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYoISgndG9KU09OJyBpbiBzb3VyY2UpKSB7XG4gICAgICAgIHN0YWNrW2ldID0gc291cmNlO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBpc0FycmF5KHNvdXJjZSkgPyBbXSA6IHt9O1xuXG4gICAgICAgIGZvckVhY2goc291cmNlLCAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlZHVjZWRWYWx1ZSA9IHZpc2l0KHZhbHVlLCBpICsgMSk7XG4gICAgICAgICAgIWlzVW5kZWZpbmVkKHJlZHVjZWRWYWx1ZSkgJiYgKHRhcmdldFtrZXldID0gcmVkdWNlZFZhbHVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3RhY2tbaV0gPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc291cmNlO1xuICB9XG5cbiAgcmV0dXJuIHZpc2l0KG9iaiwgMCk7XG59XG5cbmNvbnN0IGlzQXN5bmNGbiA9IGtpbmRPZlRlc3QoJ0FzeW5jRnVuY3Rpb24nKTtcblxuY29uc3QgaXNUaGVuYWJsZSA9ICh0aGluZykgPT5cbiAgdGhpbmcgJiYgKGlzT2JqZWN0KHRoaW5nKSB8fCBpc0Z1bmN0aW9uKHRoaW5nKSkgJiYgaXNGdW5jdGlvbih0aGluZy50aGVuKSAmJiBpc0Z1bmN0aW9uKHRoaW5nLmNhdGNoKTtcblxuLy8gb3JpZ2luYWwgY29kZVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL0RpZ2l0YWxCcmFpbkpTL0F4aW9zUHJvbWlzZS9ibG9iLzE2ZGVhYjEzNzEwZWMwOTc3OTkyMjEzMWYzZmE1OTU0MzIwZjgzYWIvbGliL3V0aWxzLmpzI0wxMS1MMzRcblxuY29uc3QgX3NldEltbWVkaWF0ZSA9ICgoc2V0SW1tZWRpYXRlU3VwcG9ydGVkLCBwb3N0TWVzc2FnZVN1cHBvcnRlZCkgPT4ge1xuICBpZiAoc2V0SW1tZWRpYXRlU3VwcG9ydGVkKSB7XG4gICAgcmV0dXJuIHNldEltbWVkaWF0ZTtcbiAgfVxuXG4gIHJldHVybiBwb3N0TWVzc2FnZVN1cHBvcnRlZCA/ICgodG9rZW4sIGNhbGxiYWNrcykgPT4ge1xuICAgIF9nbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKHtzb3VyY2UsIGRhdGF9KSA9PiB7XG4gICAgICBpZiAoc291cmNlID09PSBfZ2xvYmFsICYmIGRhdGEgPT09IHRva2VuKSB7XG4gICAgICAgIGNhbGxiYWNrcy5sZW5ndGggJiYgY2FsbGJhY2tzLnNoaWZ0KCkoKTtcbiAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cbiAgICByZXR1cm4gKGNiKSA9PiB7XG4gICAgICBjYWxsYmFja3MucHVzaChjYik7XG4gICAgICBfZ2xvYmFsLnBvc3RNZXNzYWdlKHRva2VuLCBcIipcIik7XG4gICAgfVxuICB9KShgYXhpb3NAJHtNYXRoLnJhbmRvbSgpfWAsIFtdKSA6IChjYikgPT4gc2V0VGltZW91dChjYik7XG59KShcbiAgdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJyxcbiAgaXNGdW5jdGlvbihfZ2xvYmFsLnBvc3RNZXNzYWdlKVxuKTtcblxuY29uc3QgYXNhcCA9IHR5cGVvZiBxdWV1ZU1pY3JvdGFzayAhPT0gJ3VuZGVmaW5lZCcgP1xuICBxdWV1ZU1pY3JvdGFzay5iaW5kKF9nbG9iYWwpIDogKCB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5uZXh0VGljayB8fCBfc2V0SW1tZWRpYXRlKTtcblxuLy8gKioqKioqKioqKioqKioqKioqKioqXG5cblxuY29uc3QgaXNJdGVyYWJsZSA9ICh0aGluZykgPT4gdGhpbmcgIT0gbnVsbCAmJiBpc0Z1bmN0aW9uKHRoaW5nW2l0ZXJhdG9yXSk7XG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBpc0FycmF5LFxuICBpc0FycmF5QnVmZmVyLFxuICBpc0J1ZmZlcixcbiAgaXNGb3JtRGF0YSxcbiAgaXNBcnJheUJ1ZmZlclZpZXcsXG4gIGlzU3RyaW5nLFxuICBpc051bWJlcixcbiAgaXNCb29sZWFuLFxuICBpc09iamVjdCxcbiAgaXNQbGFpbk9iamVjdCxcbiAgaXNSZWFkYWJsZVN0cmVhbSxcbiAgaXNSZXF1ZXN0LFxuICBpc1Jlc3BvbnNlLFxuICBpc0hlYWRlcnMsXG4gIGlzVW5kZWZpbmVkLFxuICBpc0RhdGUsXG4gIGlzRmlsZSxcbiAgaXNCbG9iLFxuICBpc1JlZ0V4cCxcbiAgaXNGdW5jdGlvbixcbiAgaXNTdHJlYW0sXG4gIGlzVVJMU2VhcmNoUGFyYW1zLFxuICBpc1R5cGVkQXJyYXksXG4gIGlzRmlsZUxpc3QsXG4gIGZvckVhY2gsXG4gIG1lcmdlLFxuICBleHRlbmQsXG4gIHRyaW0sXG4gIHN0cmlwQk9NLFxuICBpbmhlcml0cyxcbiAgdG9GbGF0T2JqZWN0LFxuICBraW5kT2YsXG4gIGtpbmRPZlRlc3QsXG4gIGVuZHNXaXRoLFxuICB0b0FycmF5LFxuICBmb3JFYWNoRW50cnksXG4gIG1hdGNoQWxsLFxuICBpc0hUTUxGb3JtLFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgaGFzT3duUHJvcDogaGFzT3duUHJvcGVydHksIC8vIGFuIGFsaWFzIHRvIGF2b2lkIEVTTGludCBuby1wcm90b3R5cGUtYnVpbHRpbnMgZGV0ZWN0aW9uXG4gIHJlZHVjZURlc2NyaXB0b3JzLFxuICBmcmVlemVNZXRob2RzLFxuICB0b09iamVjdFNldCxcbiAgdG9DYW1lbENhc2UsXG4gIG5vb3AsXG4gIHRvRmluaXRlTnVtYmVyLFxuICBmaW5kS2V5LFxuICBnbG9iYWw6IF9nbG9iYWwsXG4gIGlzQ29udGV4dERlZmluZWQsXG4gIGlzU3BlY0NvbXBsaWFudEZvcm0sXG4gIHRvSlNPTk9iamVjdCxcbiAgaXNBc3luY0ZuLFxuICBpc1RoZW5hYmxlLFxuICBzZXRJbW1lZGlhdGU6IF9zZXRJbW1lZGlhdGUsXG4gIGFzYXAsXG4gIGlzSXRlcmFibGVcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZ10gVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xuZnVuY3Rpb24gQXhpb3NFcnJvcihtZXNzYWdlLCBjb2RlLCBjb25maWcsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIEVycm9yLmNhbGwodGhpcyk7XG5cbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5zdGFjayA9IChuZXcgRXJyb3IoKSkuc3RhY2s7XG4gIH1cblxuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB0aGlzLm5hbWUgPSAnQXhpb3NFcnJvcic7XG4gIGNvZGUgJiYgKHRoaXMuY29kZSA9IGNvZGUpO1xuICBjb25maWcgJiYgKHRoaXMuY29uZmlnID0gY29uZmlnKTtcbiAgcmVxdWVzdCAmJiAodGhpcy5yZXF1ZXN0ID0gcmVxdWVzdCk7XG4gIGlmIChyZXNwb25zZSkge1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cyA/IHJlc3BvbnNlLnN0YXR1cyA6IG51bGw7XG4gIH1cbn1cblxudXRpbHMuaW5oZXJpdHMoQXhpb3NFcnJvciwgRXJyb3IsIHtcbiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIFN0YW5kYXJkXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAvLyBNaWNyb3NvZnRcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgbnVtYmVyOiB0aGlzLm51bWJlcixcbiAgICAgIC8vIE1vemlsbGFcbiAgICAgIGZpbGVOYW1lOiB0aGlzLmZpbGVOYW1lLFxuICAgICAgbGluZU51bWJlcjogdGhpcy5saW5lTnVtYmVyLFxuICAgICAgY29sdW1uTnVtYmVyOiB0aGlzLmNvbHVtbk51bWJlcixcbiAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLFxuICAgICAgLy8gQXhpb3NcbiAgICAgIGNvbmZpZzogdXRpbHMudG9KU09OT2JqZWN0KHRoaXMuY29uZmlnKSxcbiAgICAgIGNvZGU6IHRoaXMuY29kZSxcbiAgICAgIHN0YXR1czogdGhpcy5zdGF0dXNcbiAgICB9O1xuICB9XG59KTtcblxuY29uc3QgcHJvdG90eXBlID0gQXhpb3NFcnJvci5wcm90b3R5cGU7XG5jb25zdCBkZXNjcmlwdG9ycyA9IHt9O1xuXG5bXG4gICdFUlJfQkFEX09QVElPTl9WQUxVRScsXG4gICdFUlJfQkFEX09QVElPTicsXG4gICdFQ09OTkFCT1JURUQnLFxuICAnRVRJTUVET1VUJyxcbiAgJ0VSUl9ORVRXT1JLJyxcbiAgJ0VSUl9GUl9UT09fTUFOWV9SRURJUkVDVFMnLFxuICAnRVJSX0RFUFJFQ0FURUQnLFxuICAnRVJSX0JBRF9SRVNQT05TRScsXG4gICdFUlJfQkFEX1JFUVVFU1QnLFxuICAnRVJSX0NBTkNFTEVEJyxcbiAgJ0VSUl9OT1RfU1VQUE9SVCcsXG4gICdFUlJfSU5WQUxJRF9VUkwnXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXS5mb3JFYWNoKGNvZGUgPT4ge1xuICBkZXNjcmlwdG9yc1tjb2RlXSA9IHt2YWx1ZTogY29kZX07XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQXhpb3NFcnJvciwgZGVzY3JpcHRvcnMpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgJ2lzQXhpb3NFcnJvcicsIHt2YWx1ZTogdHJ1ZX0pO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuQXhpb3NFcnJvci5mcm9tID0gKGVycm9yLCBjb2RlLCBjb25maWcsIHJlcXVlc3QsIHJlc3BvbnNlLCBjdXN0b21Qcm9wcykgPT4ge1xuICBjb25zdCBheGlvc0Vycm9yID0gT2JqZWN0LmNyZWF0ZShwcm90b3R5cGUpO1xuXG4gIHV0aWxzLnRvRmxhdE9iamVjdChlcnJvciwgYXhpb3NFcnJvciwgZnVuY3Rpb24gZmlsdGVyKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IEVycm9yLnByb3RvdHlwZTtcbiAgfSwgcHJvcCA9PiB7XG4gICAgcmV0dXJuIHByb3AgIT09ICdpc0F4aW9zRXJyb3InO1xuICB9KTtcblxuICBBeGlvc0Vycm9yLmNhbGwoYXhpb3NFcnJvciwgZXJyb3IubWVzc2FnZSwgY29kZSwgY29uZmlnLCByZXF1ZXN0LCByZXNwb25zZSk7XG5cbiAgYXhpb3NFcnJvci5jYXVzZSA9IGVycm9yO1xuXG4gIGF4aW9zRXJyb3IubmFtZSA9IGVycm9yLm5hbWU7XG5cbiAgY3VzdG9tUHJvcHMgJiYgT2JqZWN0LmFzc2lnbihheGlvc0Vycm9yLCBjdXN0b21Qcm9wcyk7XG5cbiAgcmV0dXJuIGF4aW9zRXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBeGlvc0Vycm9yO1xuIiwgIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBzdHJpY3RcbmV4cG9ydCBkZWZhdWx0IG51bGw7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcbi8vIHRlbXBvcmFyeSBob3RmaXggdG8gYXZvaWQgY2lyY3VsYXIgcmVmZXJlbmNlcyB1bnRpbCBBeGlvc1VSTFNlYXJjaFBhcmFtcyBpcyByZWZhY3RvcmVkXG5pbXBvcnQgUGxhdGZvcm1Gb3JtRGF0YSBmcm9tICcuLi9wbGF0Zm9ybS9ub2RlL2NsYXNzZXMvRm9ybURhdGEuanMnO1xuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGdpdmVuIHRoaW5nIGlzIGEgYXJyYXkgb3IganMgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aGluZyAtIFRoZSBvYmplY3Qgb3IgYXJyYXkgdG8gYmUgdmlzaXRlZC5cbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNWaXNpdGFibGUodGhpbmcpIHtcbiAgcmV0dXJuIHV0aWxzLmlzUGxhaW5PYmplY3QodGhpbmcpIHx8IHV0aWxzLmlzQXJyYXkodGhpbmcpO1xufVxuXG4vKipcbiAqIEl0IHJlbW92ZXMgdGhlIGJyYWNrZXRzIGZyb20gdGhlIGVuZCBvZiBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBUaGUga2V5IG9mIHRoZSBwYXJhbWV0ZXIuXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gdGhlIGtleSB3aXRob3V0IHRoZSBicmFja2V0cy5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQnJhY2tldHMoa2V5KSB7XG4gIHJldHVybiB1dGlscy5lbmRzV2l0aChrZXksICdbXScpID8ga2V5LnNsaWNlKDAsIC0yKSA6IGtleTtcbn1cblxuLyoqXG4gKiBJdCB0YWtlcyBhIHBhdGgsIGEga2V5LCBhbmQgYSBib29sZWFuLCBhbmQgcmV0dXJucyBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGggdG8gdGhlIGN1cnJlbnQga2V5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRoZSBrZXkgb2YgdGhlIGN1cnJlbnQgb2JqZWN0IGJlaW5nIGl0ZXJhdGVkIG92ZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gZG90cyAtIElmIHRydWUsIHRoZSBrZXkgd2lsbCBiZSByZW5kZXJlZCB3aXRoIGRvdHMgaW5zdGVhZCBvZiBicmFja2V0cy5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcGF0aCB0byB0aGUgY3VycmVudCBrZXkuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlcktleShwYXRoLCBrZXksIGRvdHMpIHtcbiAgaWYgKCFwYXRoKSByZXR1cm4ga2V5O1xuICByZXR1cm4gcGF0aC5jb25jYXQoa2V5KS5tYXAoZnVuY3Rpb24gZWFjaCh0b2tlbiwgaSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHRva2VuID0gcmVtb3ZlQnJhY2tldHModG9rZW4pO1xuICAgIHJldHVybiAhZG90cyAmJiBpID8gJ1snICsgdG9rZW4gKyAnXScgOiB0b2tlbjtcbiAgfSkuam9pbihkb3RzID8gJy4nIDogJycpO1xufVxuXG4vKipcbiAqIElmIHRoZSBhcnJheSBpcyBhbiBhcnJheSBhbmQgbm9uZSBvZiBpdHMgZWxlbWVudHMgYXJlIHZpc2l0YWJsZSwgdGhlbiBpdCdzIGEgZmxhdCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PGFueT59IGFyciAtIFRoZSBhcnJheSB0byBjaGVja1xuICpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0ZsYXRBcnJheShhcnIpIHtcbiAgcmV0dXJuIHV0aWxzLmlzQXJyYXkoYXJyKSAmJiAhYXJyLnNvbWUoaXNWaXNpdGFibGUpO1xufVxuXG5jb25zdCBwcmVkaWNhdGVzID0gdXRpbHMudG9GbGF0T2JqZWN0KHV0aWxzLCB7fSwgbnVsbCwgZnVuY3Rpb24gZmlsdGVyKHByb3ApIHtcbiAgcmV0dXJuIC9eaXNbQS1aXS8udGVzdChwcm9wKTtcbn0pO1xuXG4vKipcbiAqIENvbnZlcnQgYSBkYXRhIG9iamVjdCB0byBGb3JtRGF0YVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7P09iamVjdH0gW2Zvcm1EYXRhXVxuICogQHBhcmFtIHs/T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLnZpc2l0b3JdXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLm1ldGFUb2tlbnMgPSB0cnVlXVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5kb3RzID0gZmFsc2VdXG4gKiBAcGFyYW0gez9Cb29sZWFufSBbb3B0aW9ucy5pbmRleGVzID0gZmFsc2VdXG4gKlxuICogQHJldHVybnMge09iamVjdH1cbiAqKi9cblxuLyoqXG4gKiBJdCBjb252ZXJ0cyBhbiBvYmplY3QgaW50byBhIEZvcm1EYXRhIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0PGFueSwgYW55Pn0gb2JqIC0gVGhlIG9iamVjdCB0byBjb252ZXJ0IHRvIGZvcm0gZGF0YS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtRGF0YSAtIFRoZSBGb3JtRGF0YSBvYmplY3QgdG8gYXBwZW5kIHRvLlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBhbnk+fSBvcHRpb25zXG4gKlxuICogQHJldHVybnNcbiAqL1xuZnVuY3Rpb24gdG9Gb3JtRGF0YShvYmosIGZvcm1EYXRhLCBvcHRpb25zKSB7XG4gIGlmICghdXRpbHMuaXNPYmplY3Qob2JqKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3RhcmdldCBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIGZvcm1EYXRhID0gZm9ybURhdGEgfHwgbmV3IChQbGF0Zm9ybUZvcm1EYXRhIHx8IEZvcm1EYXRhKSgpO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBvcHRpb25zID0gdXRpbHMudG9GbGF0T2JqZWN0KG9wdGlvbnMsIHtcbiAgICBtZXRhVG9rZW5zOiB0cnVlLFxuICAgIGRvdHM6IGZhbHNlLFxuICAgIGluZGV4ZXM6IGZhbHNlXG4gIH0sIGZhbHNlLCBmdW5jdGlvbiBkZWZpbmVkKG9wdGlvbiwgc291cmNlKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsZXFlcWVxXG4gICAgcmV0dXJuICF1dGlscy5pc1VuZGVmaW5lZChzb3VyY2Vbb3B0aW9uXSk7XG4gIH0pO1xuXG4gIGNvbnN0IG1ldGFUb2tlbnMgPSBvcHRpb25zLm1ldGFUb2tlbnM7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICBjb25zdCB2aXNpdG9yID0gb3B0aW9ucy52aXNpdG9yIHx8IGRlZmF1bHRWaXNpdG9yO1xuICBjb25zdCBkb3RzID0gb3B0aW9ucy5kb3RzO1xuICBjb25zdCBpbmRleGVzID0gb3B0aW9ucy5pbmRleGVzO1xuICBjb25zdCBfQmxvYiA9IG9wdGlvbnMuQmxvYiB8fCB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCcgJiYgQmxvYjtcbiAgY29uc3QgdXNlQmxvYiA9IF9CbG9iICYmIHV0aWxzLmlzU3BlY0NvbXBsaWFudEZvcm0oZm9ybURhdGEpO1xuXG4gIGlmICghdXRpbHMuaXNGdW5jdGlvbih2aXNpdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Zpc2l0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBmdW5jdGlvbiBjb252ZXJ0VmFsdWUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiAnJztcblxuICAgIGlmICh1dGlscy5pc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWUudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBpZiAodXRpbHMuaXNCb29sZWFuKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VCbG9iICYmIHV0aWxzLmlzQmxvYih2YWx1ZSkpIHtcbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKCdCbG9iIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSBhIEJ1ZmZlciBpbnN0ZWFkLicpO1xuICAgIH1cblxuICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyKHZhbHVlKSB8fCB1dGlscy5pc1R5cGVkQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdXNlQmxvYiAmJiB0eXBlb2YgQmxvYiA9PT0gJ2Z1bmN0aW9uJyA/IG5ldyBCbG9iKFt2YWx1ZV0pIDogQnVmZmVyLmZyb20odmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZhdWx0IHZpc2l0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBrZXlcbiAgICogQHBhcmFtIHtBcnJheTxTdHJpbmd8TnVtYmVyPn0gcGF0aFxuICAgKiBAdGhpcyB7Rm9ybURhdGF9XG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSByZXR1cm4gdHJ1ZSB0byB2aXNpdCB0aGUgZWFjaCBwcm9wIG9mIHRoZSB2YWx1ZSByZWN1cnNpdmVseVxuICAgKi9cbiAgZnVuY3Rpb24gZGVmYXVsdFZpc2l0b3IodmFsdWUsIGtleSwgcGF0aCkge1xuICAgIGxldCBhcnIgPSB2YWx1ZTtcblxuICAgIGlmICh2YWx1ZSAmJiAhcGF0aCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAodXRpbHMuZW5kc1dpdGgoa2V5LCAne30nKSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAga2V5ID0gbWV0YVRva2VucyA/IGtleSA6IGtleS5zbGljZSgwLCAtMik7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICh1dGlscy5pc0FycmF5KHZhbHVlKSAmJiBpc0ZsYXRBcnJheSh2YWx1ZSkpIHx8XG4gICAgICAgICgodXRpbHMuaXNGaWxlTGlzdCh2YWx1ZSkgfHwgdXRpbHMuZW5kc1dpdGgoa2V5LCAnW10nKSkgJiYgKGFyciA9IHV0aWxzLnRvQXJyYXkodmFsdWUpKVxuICAgICAgICApKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBrZXkgPSByZW1vdmVCcmFja2V0cyhrZXkpO1xuXG4gICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIGVhY2goZWwsIGluZGV4KSB7XG4gICAgICAgICAgISh1dGlscy5pc1VuZGVmaW5lZChlbCkgfHwgZWwgPT09IG51bGwpICYmIGZvcm1EYXRhLmFwcGVuZChcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgICAgICAgICAgaW5kZXhlcyA9PT0gdHJ1ZSA/IHJlbmRlcktleShba2V5XSwgaW5kZXgsIGRvdHMpIDogKGluZGV4ZXMgPT09IG51bGwgPyBrZXkgOiBrZXkgKyAnW10nKSxcbiAgICAgICAgICAgIGNvbnZlcnRWYWx1ZShlbClcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc1Zpc2l0YWJsZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZvcm1EYXRhLmFwcGVuZChyZW5kZXJLZXkocGF0aCwga2V5LCBkb3RzKSwgY29udmVydFZhbHVlKHZhbHVlKSk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBzdGFjayA9IFtdO1xuXG4gIGNvbnN0IGV4cG9zZWRIZWxwZXJzID0gT2JqZWN0LmFzc2lnbihwcmVkaWNhdGVzLCB7XG4gICAgZGVmYXVsdFZpc2l0b3IsXG4gICAgY29udmVydFZhbHVlLFxuICAgIGlzVmlzaXRhYmxlXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGJ1aWxkKHZhbHVlLCBwYXRoKSB7XG4gICAgaWYgKHV0aWxzLmlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuO1xuXG4gICAgaWYgKHN0YWNrLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgICAgdGhyb3cgRXJyb3IoJ0NpcmN1bGFyIHJlZmVyZW5jZSBkZXRlY3RlZCBpbiAnICsgcGF0aC5qb2luKCcuJykpO1xuICAgIH1cblxuICAgIHN0YWNrLnB1c2godmFsdWUpO1xuXG4gICAgdXRpbHMuZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24gZWFjaChlbCwga2V5KSB7XG4gICAgICBjb25zdCByZXN1bHQgPSAhKHV0aWxzLmlzVW5kZWZpbmVkKGVsKSB8fCBlbCA9PT0gbnVsbCkgJiYgdmlzaXRvci5jYWxsKFxuICAgICAgICBmb3JtRGF0YSwgZWwsIHV0aWxzLmlzU3RyaW5nKGtleSkgPyBrZXkudHJpbSgpIDoga2V5LCBwYXRoLCBleHBvc2VkSGVscGVyc1xuICAgICAgKTtcblxuICAgICAgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICBidWlsZChlbCwgcGF0aCA/IHBhdGguY29uY2F0KGtleSkgOiBba2V5XSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzdGFjay5wb3AoKTtcbiAgfVxuXG4gIGlmICghdXRpbHMuaXNPYmplY3Qob2JqKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2RhdGEgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgfVxuXG4gIGJ1aWxkKG9iaik7XG5cbiAgcmV0dXJuIGZvcm1EYXRhO1xufVxuXG5leHBvcnQgZGVmYXVsdCB0b0Zvcm1EYXRhO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHRvRm9ybURhdGEgZnJvbSAnLi90b0Zvcm1EYXRhLmpzJztcblxuLyoqXG4gKiBJdCBlbmNvZGVzIGEgc3RyaW5nIGJ5IHJlcGxhY2luZyBhbGwgY2hhcmFjdGVycyB0aGF0IGFyZSBub3QgaW4gdGhlIHVucmVzZXJ2ZWQgc2V0IHdpdGhcbiAqIHRoZWlyIHBlcmNlbnQtZW5jb2RlZCBlcXVpdmFsZW50c1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIGVuY29kZS5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZW5jb2RlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGVuY29kZShzdHIpIHtcbiAgY29uc3QgY2hhck1hcCA9IHtcbiAgICAnISc6ICclMjEnLFxuICAgIFwiJ1wiOiAnJTI3JyxcbiAgICAnKCc6ICclMjgnLFxuICAgICcpJzogJyUyOScsXG4gICAgJ34nOiAnJTdFJyxcbiAgICAnJTIwJzogJysnLFxuICAgICclMDAnOiAnXFx4MDAnXG4gIH07XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyKS5yZXBsYWNlKC9bIScoKX5dfCUyMHwlMDAvZywgZnVuY3Rpb24gcmVwbGFjZXIobWF0Y2gpIHtcbiAgICByZXR1cm4gY2hhck1hcFttYXRjaF07XG4gIH0pO1xufVxuXG4vKipcbiAqIEl0IHRha2VzIGEgcGFyYW1zIG9iamVjdCBhbmQgY29udmVydHMgaXQgdG8gYSBGb3JtRGF0YSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIGFueT59IHBhcmFtcyAtIFRoZSBwYXJhbWV0ZXJzIHRvIGJlIGNvbnZlcnRlZCB0byBhIEZvcm1EYXRhIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIG9iamVjdCBwYXNzZWQgdG8gdGhlIEF4aW9zIGNvbnN0cnVjdG9yLlxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBBeGlvc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMsIG9wdGlvbnMpIHtcbiAgdGhpcy5fcGFpcnMgPSBbXTtcblxuICBwYXJhbXMgJiYgdG9Gb3JtRGF0YShwYXJhbXMsIHRoaXMsIG9wdGlvbnMpO1xufVxuXG5jb25zdCBwcm90b3R5cGUgPSBBeGlvc1VSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGU7XG5cbnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiBhcHBlbmQobmFtZSwgdmFsdWUpIHtcbiAgdGhpcy5fcGFpcnMucHVzaChbbmFtZSwgdmFsdWVdKTtcbn07XG5cbnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKGVuY29kZXIpIHtcbiAgY29uc3QgX2VuY29kZSA9IGVuY29kZXIgPyBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBlbmNvZGVyLmNhbGwodGhpcywgdmFsdWUsIGVuY29kZSk7XG4gIH0gOiBlbmNvZGU7XG5cbiAgcmV0dXJuIHRoaXMuX3BhaXJzLm1hcChmdW5jdGlvbiBlYWNoKHBhaXIpIHtcbiAgICByZXR1cm4gX2VuY29kZShwYWlyWzBdKSArICc9JyArIF9lbmNvZGUocGFpclsxXSk7XG4gIH0sICcnKS5qb2luKCcmJyk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBeGlvc1VSTFNlYXJjaFBhcmFtcztcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgQXhpb3NVUkxTZWFyY2hQYXJhbXMgZnJvbSAnLi4vaGVscGVycy9BeGlvc1VSTFNlYXJjaFBhcmFtcy5qcyc7XG5cbi8qKlxuICogSXQgcmVwbGFjZXMgYWxsIGluc3RhbmNlcyBvZiB0aGUgY2hhcmFjdGVycyBgOmAsIGAkYCwgYCxgLCBgK2AsIGBbYCwgYW5kIGBdYCB3aXRoIHRoZWlyXG4gKiBVUkkgZW5jb2RlZCBjb3VudGVycGFydHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsIFRoZSB2YWx1ZSB0byBiZSBlbmNvZGVkLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBlbmNvZGVkIHZhbHVlLlxuICovXG5mdW5jdGlvbiBlbmNvZGUodmFsKSB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cbiAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgcmVwbGFjZSgvJTI0L2csICckJykuXG4gICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuICAgIHJlcGxhY2UoLyUyMC9nLCAnKycpLlxuICAgIHJlcGxhY2UoLyU1Qi9naSwgJ1snKS5cbiAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuICogQHBhcmFtIHs/KG9iamVjdHxGdW5jdGlvbil9IG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgb3B0aW9ucykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIFxuICBjb25zdCBfZW5jb2RlID0gb3B0aW9ucyAmJiBvcHRpb25zLmVuY29kZSB8fCBlbmNvZGU7XG5cbiAgaWYgKHV0aWxzLmlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICBvcHRpb25zID0ge1xuICAgICAgc2VyaWFsaXplOiBvcHRpb25zXG4gICAgfTtcbiAgfSBcblxuICBjb25zdCBzZXJpYWxpemVGbiA9IG9wdGlvbnMgJiYgb3B0aW9ucy5zZXJpYWxpemU7XG5cbiAgbGV0IHNlcmlhbGl6ZWRQYXJhbXM7XG5cbiAgaWYgKHNlcmlhbGl6ZUZuKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHNlcmlhbGl6ZUZuKHBhcmFtcywgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykgP1xuICAgICAgcGFyYW1zLnRvU3RyaW5nKCkgOlxuICAgICAgbmV3IEF4aW9zVVJMU2VhcmNoUGFyYW1zKHBhcmFtcywgb3B0aW9ucykudG9TdHJpbmcoX2VuY29kZSk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIGNvbnN0IGhhc2htYXJrSW5kZXggPSB1cmwuaW5kZXhPZihcIiNcIik7XG5cbiAgICBpZiAoaGFzaG1hcmtJbmRleCAhPT0gLTEpIHtcbiAgICAgIHVybCA9IHVybC5zbGljZSgwLCBoYXNobWFya0luZGV4KTtcbiAgICB9XG4gICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcblxuY2xhc3MgSW50ZXJjZXB0b3JNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIG5ldyBpbnRlcmNlcHRvciB0byB0aGUgc3RhY2tcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVsZmlsbGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHRoZW5gIGZvciBhIGBQcm9taXNlYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGByZWplY3RgIGZvciBhIGBQcm9taXNlYFxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEFuIElEIHVzZWQgdG8gcmVtb3ZlIGludGVyY2VwdG9yIGxhdGVyXG4gICAqL1xuICB1c2UoZnVsZmlsbGVkLCByZWplY3RlZCwgb3B0aW9ucykge1xuICAgIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgICBmdWxmaWxsZWQsXG4gICAgICByZWplY3RlZCxcbiAgICAgIHN5bmNocm9ub3VzOiBvcHRpb25zID8gb3B0aW9ucy5zeW5jaHJvbm91cyA6IGZhbHNlLFxuICAgICAgcnVuV2hlbjogb3B0aW9ucyA/IG9wdGlvbnMucnVuV2hlbiA6IG51bGxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBpbnRlcmNlcHRvciBmcm9tIHRoZSBzdGFja1xuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gICAqXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIGludGVyY2VwdG9yIHdhcyByZW1vdmVkLCBgZmFsc2VgIG90aGVyd2lzZVxuICAgKi9cbiAgZWplY3QoaWQpIHtcbiAgICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICAgIHRoaXMuaGFuZGxlcnNbaWRdID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIGludGVyY2VwdG9ycyBmcm9tIHRoZSBzdGFja1xuICAgKlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGNsZWFyKCkge1xuICAgIGlmICh0aGlzLmhhbmRsZXJzKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHJlZ2lzdGVyZWQgaW50ZXJjZXB0b3JzXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIHNraXBwaW5nIG92ZXIgYW55XG4gICAqIGludGVyY2VwdG9ycyB0aGF0IG1heSBoYXZlIGJlY29tZSBgbnVsbGAgY2FsbGluZyBgZWplY3RgLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBpbnRlcmNlcHRvclxuICAgKlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGZvckVhY2goZm4pIHtcbiAgICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICAgIGlmIChoICE9PSBudWxsKSB7XG4gICAgICAgIGZuKGgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEludGVyY2VwdG9yTWFuYWdlcjtcbiIsICIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgc2lsZW50SlNPTlBhcnNpbmc6IHRydWUsXG4gIGZvcmNlZEpTT05QYXJzaW5nOiB0cnVlLFxuICBjbGFyaWZ5VGltZW91dEVycm9yOiBmYWxzZVxufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBBeGlvc1VSTFNlYXJjaFBhcmFtcyBmcm9tICcuLi8uLi8uLi9oZWxwZXJzL0F4aW9zVVJMU2VhcmNoUGFyYW1zLmpzJztcbmV4cG9ydCBkZWZhdWx0IHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICd1bmRlZmluZWQnID8gVVJMU2VhcmNoUGFyYW1zIDogQXhpb3NVUkxTZWFyY2hQYXJhbXM7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZGVmYXVsdCB0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnID8gRm9ybURhdGEgOiBudWxsO1xuIiwgIid1c2Ugc3RyaWN0J1xuXG5leHBvcnQgZGVmYXVsdCB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCcgPyBCbG9iIDogbnVsbFxuIiwgImltcG9ydCBVUkxTZWFyY2hQYXJhbXMgZnJvbSAnLi9jbGFzc2VzL1VSTFNlYXJjaFBhcmFtcy5qcydcbmltcG9ydCBGb3JtRGF0YSBmcm9tICcuL2NsYXNzZXMvRm9ybURhdGEuanMnXG5pbXBvcnQgQmxvYiBmcm9tICcuL2NsYXNzZXMvQmxvYi5qcydcblxuZXhwb3J0IGRlZmF1bHQge1xuICBpc0Jyb3dzZXI6IHRydWUsXG4gIGNsYXNzZXM6IHtcbiAgICBVUkxTZWFyY2hQYXJhbXMsXG4gICAgRm9ybURhdGEsXG4gICAgQmxvYlxuICB9LFxuICBwcm90b2NvbHM6IFsnaHR0cCcsICdodHRwcycsICdmaWxlJywgJ2Jsb2InLCAndXJsJywgJ2RhdGEnXVxufTtcbiIsICJjb25zdCBoYXNCcm93c2VyRW52ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJztcblxuY29uc3QgX25hdmlnYXRvciA9IHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvciB8fCB1bmRlZmluZWQ7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICogbmF0aXZlc2NyaXB0XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ05hdGl2ZVNjcmlwdCcgb3IgJ05TJ1xuICpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5jb25zdCBoYXNTdGFuZGFyZEJyb3dzZXJFbnYgPSBoYXNCcm93c2VyRW52ICYmXG4gICghX25hdmlnYXRvciB8fCBbJ1JlYWN0TmF0aXZlJywgJ05hdGl2ZVNjcmlwdCcsICdOUyddLmluZGV4T2YoX25hdmlnYXRvci5wcm9kdWN0KSA8IDApO1xuXG4vKipcbiAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciB3ZWJXb3JrZXIgZW52aXJvbm1lbnRcbiAqXG4gKiBBbHRob3VnaCB0aGUgYGlzU3RhbmRhcmRCcm93c2VyRW52YCBtZXRob2QgaW5kaWNhdGVzIHRoYXRcbiAqIGBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlcmAsIHRoZSBXZWJXb3JrZXIgd2lsbCBzdGlsbCBiZVxuICogZmlsdGVyZWQgb3V0IGR1ZSB0byBpdHMganVkZ21lbnQgc3RhbmRhcmRcbiAqIGB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnYC5cbiAqIFRoaXMgbGVhZHMgdG8gYSBwcm9ibGVtIHdoZW4gYXhpb3MgcG9zdCBgRm9ybURhdGFgIGluIHdlYldvcmtlclxuICovXG5jb25zdCBoYXNTdGFuZGFyZEJyb3dzZXJXZWJXb3JrZXJFbnYgPSAoKCkgPT4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUgJiZcbiAgICB0eXBlb2Ygc2VsZi5pbXBvcnRTY3JpcHRzID09PSAnZnVuY3Rpb24nXG4gICk7XG59KSgpO1xuXG5jb25zdCBvcmlnaW4gPSBoYXNCcm93c2VyRW52ICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmIHx8ICdodHRwOi8vbG9jYWxob3N0JztcblxuZXhwb3J0IHtcbiAgaGFzQnJvd3NlckVudixcbiAgaGFzU3RhbmRhcmRCcm93c2VyV2ViV29ya2VyRW52LFxuICBoYXNTdGFuZGFyZEJyb3dzZXJFbnYsXG4gIF9uYXZpZ2F0b3IgYXMgbmF2aWdhdG9yLFxuICBvcmlnaW5cbn1cbiIsICJpbXBvcnQgcGxhdGZvcm0gZnJvbSAnLi9ub2RlL2luZGV4LmpzJztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4vY29tbW9uL3V0aWxzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICAuLi51dGlscyxcbiAgLi4ucGxhdGZvcm1cbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgdG9Gb3JtRGF0YSBmcm9tICcuL3RvRm9ybURhdGEuanMnO1xuaW1wb3J0IHBsYXRmb3JtIGZyb20gJy4uL3BsYXRmb3JtL2luZGV4LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9VUkxFbmNvZGVkRm9ybShkYXRhLCBvcHRpb25zKSB7XG4gIHJldHVybiB0b0Zvcm1EYXRhKGRhdGEsIG5ldyBwbGF0Zm9ybS5jbGFzc2VzLlVSTFNlYXJjaFBhcmFtcygpLCBPYmplY3QuYXNzaWduKHtcbiAgICB2aXNpdG9yOiBmdW5jdGlvbih2YWx1ZSwga2V5LCBwYXRoLCBoZWxwZXJzKSB7XG4gICAgICBpZiAocGxhdGZvcm0uaXNOb2RlICYmIHV0aWxzLmlzQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICB0aGlzLmFwcGVuZChrZXksIHZhbHVlLnRvU3RyaW5nKCdiYXNlNjQnKSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGhlbHBlcnMuZGVmYXVsdFZpc2l0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH0sIG9wdGlvbnMpKTtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5cbi8qKlxuICogSXQgdGFrZXMgYSBzdHJpbmcgbGlrZSBgZm9vW3hdW3ldW3pdYCBhbmQgcmV0dXJucyBhbiBhcnJheSBsaWtlIGBbJ2ZvbycsICd4JywgJ3knLCAneiddXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICpcbiAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHN0cmluZ3MuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlUHJvcFBhdGgobmFtZSkge1xuICAvLyBmb29beF1beV1bel1cbiAgLy8gZm9vLngueS56XG4gIC8vIGZvby14LXktelxuICAvLyBmb28geCB5IHpcbiAgcmV0dXJuIHV0aWxzLm1hdGNoQWxsKC9cXHcrfFxcWyhcXHcqKV0vZywgbmFtZSkubWFwKG1hdGNoID0+IHtcbiAgICByZXR1cm4gbWF0Y2hbMF0gPT09ICdbXScgPyAnJyA6IG1hdGNoWzFdIHx8IG1hdGNoWzBdO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGFuIGFycmF5IHRvIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PGFueT59IGFyciAtIFRoZSBhcnJheSB0byBjb252ZXJ0IHRvIGFuIG9iamVjdC5cbiAqXG4gKiBAcmV0dXJucyBBbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBrZXlzIGFuZCB2YWx1ZXMgYXMgdGhlIGFycmF5LlxuICovXG5mdW5jdGlvbiBhcnJheVRvT2JqZWN0KGFycikge1xuICBjb25zdCBvYmogPSB7fTtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGFycik7XG4gIGxldCBpO1xuICBjb25zdCBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgbGV0IGtleTtcbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAga2V5ID0ga2V5c1tpXTtcbiAgICBvYmpba2V5XSA9IGFycltrZXldO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogSXQgdGFrZXMgYSBGb3JtRGF0YSBvYmplY3QgYW5kIHJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtRGF0YSBUaGUgRm9ybURhdGEgb2JqZWN0IHRvIGNvbnZlcnQgdG8gSlNPTi5cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0PHN0cmluZywgYW55PiB8IG51bGx9IFRoZSBjb252ZXJ0ZWQgb2JqZWN0LlxuICovXG5mdW5jdGlvbiBmb3JtRGF0YVRvSlNPTihmb3JtRGF0YSkge1xuICBmdW5jdGlvbiBidWlsZFBhdGgocGF0aCwgdmFsdWUsIHRhcmdldCwgaW5kZXgpIHtcbiAgICBsZXQgbmFtZSA9IHBhdGhbaW5kZXgrK107XG5cbiAgICBpZiAobmFtZSA9PT0gJ19fcHJvdG9fXycpIHJldHVybiB0cnVlO1xuXG4gICAgY29uc3QgaXNOdW1lcmljS2V5ID0gTnVtYmVyLmlzRmluaXRlKCtuYW1lKTtcbiAgICBjb25zdCBpc0xhc3QgPSBpbmRleCA+PSBwYXRoLmxlbmd0aDtcbiAgICBuYW1lID0gIW5hbWUgJiYgdXRpbHMuaXNBcnJheSh0YXJnZXQpID8gdGFyZ2V0Lmxlbmd0aCA6IG5hbWU7XG5cbiAgICBpZiAoaXNMYXN0KSB7XG4gICAgICBpZiAodXRpbHMuaGFzT3duUHJvcCh0YXJnZXQsIG5hbWUpKSB7XG4gICAgICAgIHRhcmdldFtuYW1lXSA9IFt0YXJnZXRbbmFtZV0sIHZhbHVlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFtuYW1lXSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gIWlzTnVtZXJpY0tleTtcbiAgICB9XG5cbiAgICBpZiAoIXRhcmdldFtuYW1lXSB8fCAhdXRpbHMuaXNPYmplY3QodGFyZ2V0W25hbWVdKSkge1xuICAgICAgdGFyZ2V0W25hbWVdID0gW107XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYnVpbGRQYXRoKHBhdGgsIHZhbHVlLCB0YXJnZXRbbmFtZV0sIGluZGV4KTtcblxuICAgIGlmIChyZXN1bHQgJiYgdXRpbHMuaXNBcnJheSh0YXJnZXRbbmFtZV0pKSB7XG4gICAgICB0YXJnZXRbbmFtZV0gPSBhcnJheVRvT2JqZWN0KHRhcmdldFtuYW1lXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICFpc051bWVyaWNLZXk7XG4gIH1cblxuICBpZiAodXRpbHMuaXNGb3JtRGF0YShmb3JtRGF0YSkgJiYgdXRpbHMuaXNGdW5jdGlvbihmb3JtRGF0YS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IG9iaiA9IHt9O1xuXG4gICAgdXRpbHMuZm9yRWFjaEVudHJ5KGZvcm1EYXRhLCAobmFtZSwgdmFsdWUpID0+IHtcbiAgICAgIGJ1aWxkUGF0aChwYXJzZVByb3BQYXRoKG5hbWUpLCB2YWx1ZSwgb2JqLCAwKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZm9ybURhdGFUb0pTT047XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcbmltcG9ydCB0cmFuc2l0aW9uYWxEZWZhdWx0cyBmcm9tICcuL3RyYW5zaXRpb25hbC5qcyc7XG5pbXBvcnQgdG9Gb3JtRGF0YSBmcm9tICcuLi9oZWxwZXJzL3RvRm9ybURhdGEuanMnO1xuaW1wb3J0IHRvVVJMRW5jb2RlZEZvcm0gZnJvbSAnLi4vaGVscGVycy90b1VSTEVuY29kZWRGb3JtLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5pbXBvcnQgZm9ybURhdGFUb0pTT04gZnJvbSAnLi4vaGVscGVycy9mb3JtRGF0YVRvSlNPTi5qcyc7XG5cbi8qKlxuICogSXQgdGFrZXMgYSBzdHJpbmcsIHRyaWVzIHRvIHBhcnNlIGl0LCBhbmQgaWYgaXQgZmFpbHMsIGl0IHJldHVybnMgdGhlIHN0cmluZ2lmaWVkIHZlcnNpb25cbiAqIG9mIHRoZSBpbnB1dFxuICpcbiAqIEBwYXJhbSB7YW55fSByYXdWYWx1ZSAtIFRoZSB2YWx1ZSB0byBiZSBzdHJpbmdpZmllZC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBhcnNlciAtIEEgZnVuY3Rpb24gdGhhdCBwYXJzZXMgYSBzdHJpbmcgaW50byBhIEphdmFTY3JpcHQgb2JqZWN0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZW5jb2RlciAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHZhbHVlIGFuZCByZXR1cm5zIGEgc3RyaW5nLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5naWZpZWQgdmVyc2lvbiBvZiB0aGUgcmF3VmFsdWUuXG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeVNhZmVseShyYXdWYWx1ZSwgcGFyc2VyLCBlbmNvZGVyKSB7XG4gIGlmICh1dGlscy5pc1N0cmluZyhyYXdWYWx1ZSkpIHtcbiAgICB0cnkge1xuICAgICAgKHBhcnNlciB8fCBKU09OLnBhcnNlKShyYXdWYWx1ZSk7XG4gICAgICByZXR1cm4gdXRpbHMudHJpbShyYXdWYWx1ZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUubmFtZSAhPT0gJ1N5bnRheEVycm9yJykge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoZW5jb2RlciB8fCBKU09OLnN0cmluZ2lmeSkocmF3VmFsdWUpO1xufVxuXG5jb25zdCBkZWZhdWx0cyA9IHtcblxuICB0cmFuc2l0aW9uYWw6IHRyYW5zaXRpb25hbERlZmF1bHRzLFxuXG4gIGFkYXB0ZXI6IFsneGhyJywgJ2h0dHAnLCAnZmV0Y2gnXSxcblxuICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG4gICAgY29uc3QgY29udGVudFR5cGUgPSBoZWFkZXJzLmdldENvbnRlbnRUeXBlKCkgfHwgJyc7XG4gICAgY29uc3QgaGFzSlNPTkNvbnRlbnRUeXBlID0gY29udGVudFR5cGUuaW5kZXhPZignYXBwbGljYXRpb24vanNvbicpID4gLTE7XG4gICAgY29uc3QgaXNPYmplY3RQYXlsb2FkID0gdXRpbHMuaXNPYmplY3QoZGF0YSk7XG5cbiAgICBpZiAoaXNPYmplY3RQYXlsb2FkICYmIHV0aWxzLmlzSFRNTEZvcm0oZGF0YSkpIHtcbiAgICAgIGRhdGEgPSBuZXcgRm9ybURhdGEoZGF0YSk7XG4gICAgfVxuXG4gICAgY29uc3QgaXNGb3JtRGF0YSA9IHV0aWxzLmlzRm9ybURhdGEoZGF0YSk7XG5cbiAgICBpZiAoaXNGb3JtRGF0YSkge1xuICAgICAgcmV0dXJuIGhhc0pTT05Db250ZW50VHlwZSA/IEpTT04uc3RyaW5naWZ5KGZvcm1EYXRhVG9KU09OKGRhdGEpKSA6IGRhdGE7XG4gICAgfVxuXG4gICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0Jsb2IoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzUmVhZGFibGVTdHJlYW0oZGF0YSlcbiAgICApIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG4gICAgICBoZWFkZXJzLnNldENvbnRlbnRUeXBlKCdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCcsIGZhbHNlKTtcbiAgICAgIHJldHVybiBkYXRhLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgbGV0IGlzRmlsZUxpc3Q7XG5cbiAgICBpZiAoaXNPYmplY3RQYXlsb2FkKSB7XG4gICAgICBpZiAoY29udGVudFR5cGUuaW5kZXhPZignYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJykgPiAtMSkge1xuICAgICAgICByZXR1cm4gdG9VUkxFbmNvZGVkRm9ybShkYXRhLCB0aGlzLmZvcm1TZXJpYWxpemVyKS50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICBpZiAoKGlzRmlsZUxpc3QgPSB1dGlscy5pc0ZpbGVMaXN0KGRhdGEpKSB8fCBjb250ZW50VHlwZS5pbmRleE9mKCdtdWx0aXBhcnQvZm9ybS1kYXRhJykgPiAtMSkge1xuICAgICAgICBjb25zdCBfRm9ybURhdGEgPSB0aGlzLmVudiAmJiB0aGlzLmVudi5Gb3JtRGF0YTtcblxuICAgICAgICByZXR1cm4gdG9Gb3JtRGF0YShcbiAgICAgICAgICBpc0ZpbGVMaXN0ID8geydmaWxlc1tdJzogZGF0YX0gOiBkYXRhLFxuICAgICAgICAgIF9Gb3JtRGF0YSAmJiBuZXcgX0Zvcm1EYXRhKCksXG4gICAgICAgICAgdGhpcy5mb3JtU2VyaWFsaXplclxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc09iamVjdFBheWxvYWQgfHwgaGFzSlNPTkNvbnRlbnRUeXBlICkge1xuICAgICAgaGVhZGVycy5zZXRDb250ZW50VHlwZSgnYXBwbGljYXRpb24vanNvbicsIGZhbHNlKTtcbiAgICAgIHJldHVybiBzdHJpbmdpZnlTYWZlbHkoZGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkge1xuICAgIGNvbnN0IHRyYW5zaXRpb25hbCA9IHRoaXMudHJhbnNpdGlvbmFsIHx8IGRlZmF1bHRzLnRyYW5zaXRpb25hbDtcbiAgICBjb25zdCBmb3JjZWRKU09OUGFyc2luZyA9IHRyYW5zaXRpb25hbCAmJiB0cmFuc2l0aW9uYWwuZm9yY2VkSlNPTlBhcnNpbmc7XG4gICAgY29uc3QgSlNPTlJlcXVlc3RlZCA9IHRoaXMucmVzcG9uc2VUeXBlID09PSAnanNvbic7XG5cbiAgICBpZiAodXRpbHMuaXNSZXNwb25zZShkYXRhKSB8fCB1dGlscy5pc1JlYWRhYmxlU3RyZWFtKGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YSAmJiB1dGlscy5pc1N0cmluZyhkYXRhKSAmJiAoKGZvcmNlZEpTT05QYXJzaW5nICYmICF0aGlzLnJlc3BvbnNlVHlwZSkgfHwgSlNPTlJlcXVlc3RlZCkpIHtcbiAgICAgIGNvbnN0IHNpbGVudEpTT05QYXJzaW5nID0gdHJhbnNpdGlvbmFsICYmIHRyYW5zaXRpb25hbC5zaWxlbnRKU09OUGFyc2luZztcbiAgICAgIGNvbnN0IHN0cmljdEpTT05QYXJzaW5nID0gIXNpbGVudEpTT05QYXJzaW5nICYmIEpTT05SZXF1ZXN0ZWQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoc3RyaWN0SlNPTlBhcnNpbmcpIHtcbiAgICAgICAgICBpZiAoZS5uYW1lID09PSAnU3ludGF4RXJyb3InKSB7XG4gICAgICAgICAgICB0aHJvdyBBeGlvc0Vycm9yLmZyb20oZSwgQXhpb3NFcnJvci5FUlJfQkFEX1JFU1BPTlNFLCB0aGlzLCBudWxsLCB0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICAvKipcbiAgICogQSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byBhYm9ydCBhIHJlcXVlc3QuIElmIHNldCB0byAwIChkZWZhdWx0KSBhXG4gICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuXG4gICAqL1xuICB0aW1lb3V0OiAwLFxuXG4gIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG4gIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblxuICBtYXhDb250ZW50TGVuZ3RoOiAtMSxcbiAgbWF4Qm9keUxlbmd0aDogLTEsXG5cbiAgZW52OiB7XG4gICAgRm9ybURhdGE6IHBsYXRmb3JtLmNsYXNzZXMuRm9ybURhdGEsXG4gICAgQmxvYjogcGxhdGZvcm0uY2xhc3Nlcy5CbG9iXG4gIH0sXG5cbiAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cykge1xuICAgIHJldHVybiBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMDtcbiAgfSxcblxuICBoZWFkZXJzOiB7XG4gICAgY29tbW9uOiB7XG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKicsXG4gICAgICAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkXG4gICAgfVxuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIChtZXRob2QpID0+IHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0ge307XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgZGVmYXVsdHM7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5cbi8vIFJhd0F4aW9zSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGVcbi8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnNcbmNvbnN0IGlnbm9yZUR1cGxpY2F0ZU9mID0gdXRpbHMudG9PYmplY3RTZXQoW1xuICAnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLFxuICAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsXG4gICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJyxcbiAgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCdcbl0pO1xuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3RcbiAqXG4gKiBgYGBcbiAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UXG4gKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cbiAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcbiAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcmF3SGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkXG4gKlxuICogQHJldHVybnMge09iamVjdH0gSGVhZGVycyBwYXJzZWQgaW50byBhbiBvYmplY3RcbiAqL1xuZXhwb3J0IGRlZmF1bHQgcmF3SGVhZGVycyA9PiB7XG4gIGNvbnN0IHBhcnNlZCA9IHt9O1xuICBsZXQga2V5O1xuICBsZXQgdmFsO1xuICBsZXQgaTtcblxuICByYXdIZWFkZXJzICYmIHJhd0hlYWRlcnMuc3BsaXQoJ1xcbicpLmZvckVhY2goZnVuY3Rpb24gcGFyc2VyKGxpbmUpIHtcbiAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAga2V5ID0gbGluZS5zdWJzdHJpbmcoMCwgaSkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gbGluZS5zdWJzdHJpbmcoaSArIDEpLnRyaW0oKTtcblxuICAgIGlmICgha2V5IHx8IChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZltrZXldKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykge1xuICAgICAgaWYgKHBhcnNlZFtrZXldKSB7XG4gICAgICAgIHBhcnNlZFtrZXldLnB1c2godmFsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnNlZFtrZXldID0gW3ZhbF07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcGFyc2VkO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgcGFyc2VIZWFkZXJzIGZyb20gJy4uL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzJztcblxuY29uc3QgJGludGVybmFscyA9IFN5bWJvbCgnaW50ZXJuYWxzJyk7XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlcihoZWFkZXIpIHtcbiAgcmV0dXJuIGhlYWRlciAmJiBTdHJpbmcoaGVhZGVyKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHV0aWxzLmlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKG5vcm1hbGl6ZVZhbHVlKSA6IFN0cmluZyh2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVG9rZW5zKHN0cikge1xuICBjb25zdCB0b2tlbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBjb25zdCB0b2tlbnNSRSA9IC8oW15cXHMsOz1dKylcXHMqKD86PVxccyooW14sO10rKSk/L2c7XG4gIGxldCBtYXRjaDtcblxuICB3aGlsZSAoKG1hdGNoID0gdG9rZW5zUkUuZXhlYyhzdHIpKSkge1xuICAgIHRva2Vuc1ttYXRjaFsxXV0gPSBtYXRjaFsyXTtcbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59XG5cbmNvbnN0IGlzVmFsaWRIZWFkZXJOYW1lID0gKHN0cikgPT4gL15bLV9hLXpBLVowLTleYHx+LCEjJCUmJyorLl0rJC8udGVzdChzdHIudHJpbSgpKTtcblxuZnVuY3Rpb24gbWF0Y2hIZWFkZXJWYWx1ZShjb250ZXh0LCB2YWx1ZSwgaGVhZGVyLCBmaWx0ZXIsIGlzSGVhZGVyTmFtZUZpbHRlcikge1xuICBpZiAodXRpbHMuaXNGdW5jdGlvbihmaWx0ZXIpKSB7XG4gICAgcmV0dXJuIGZpbHRlci5jYWxsKHRoaXMsIHZhbHVlLCBoZWFkZXIpO1xuICB9XG5cbiAgaWYgKGlzSGVhZGVyTmFtZUZpbHRlcikge1xuICAgIHZhbHVlID0gaGVhZGVyO1xuICB9XG5cbiAgaWYgKCF1dGlscy5pc1N0cmluZyh2YWx1ZSkpIHJldHVybjtcblxuICBpZiAodXRpbHMuaXNTdHJpbmcoZmlsdGVyKSkge1xuICAgIHJldHVybiB2YWx1ZS5pbmRleE9mKGZpbHRlcikgIT09IC0xO1xuICB9XG5cbiAgaWYgKHV0aWxzLmlzUmVnRXhwKGZpbHRlcikpIHtcbiAgICByZXR1cm4gZmlsdGVyLnRlc3QodmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEhlYWRlcihoZWFkZXIpIHtcbiAgcmV0dXJuIGhlYWRlci50cmltKClcbiAgICAudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8oW2EtelxcZF0pKFxcdyopL2csICh3LCBjaGFyLCBzdHIpID0+IHtcbiAgICAgIHJldHVybiBjaGFyLnRvVXBwZXJDYXNlKCkgKyBzdHI7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkQWNjZXNzb3JzKG9iaiwgaGVhZGVyKSB7XG4gIGNvbnN0IGFjY2Vzc29yTmFtZSA9IHV0aWxzLnRvQ2FtZWxDYXNlKCcgJyArIGhlYWRlcik7XG5cbiAgWydnZXQnLCAnc2V0JywgJ2hhcyddLmZvckVhY2gobWV0aG9kTmFtZSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbWV0aG9kTmFtZSArIGFjY2Vzc29yTmFtZSwge1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uKGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbbWV0aG9kTmFtZV0uY2FsbCh0aGlzLCBoZWFkZXIsIGFyZzEsIGFyZzIsIGFyZzMpO1xuICAgICAgfSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9KTtcbn1cblxuY2xhc3MgQXhpb3NIZWFkZXJzIHtcbiAgY29uc3RydWN0b3IoaGVhZGVycykge1xuICAgIGhlYWRlcnMgJiYgdGhpcy5zZXQoaGVhZGVycyk7XG4gIH1cblxuICBzZXQoaGVhZGVyLCB2YWx1ZU9yUmV3cml0ZSwgcmV3cml0ZSkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgZnVuY3Rpb24gc2V0SGVhZGVyKF92YWx1ZSwgX2hlYWRlciwgX3Jld3JpdGUpIHtcbiAgICAgIGNvbnN0IGxIZWFkZXIgPSBub3JtYWxpemVIZWFkZXIoX2hlYWRlcik7XG5cbiAgICAgIGlmICghbEhlYWRlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2hlYWRlciBuYW1lIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGtleSA9IHV0aWxzLmZpbmRLZXkoc2VsZiwgbEhlYWRlcik7XG5cbiAgICAgIGlmKCFrZXkgfHwgc2VsZltrZXldID09PSB1bmRlZmluZWQgfHwgX3Jld3JpdGUgPT09IHRydWUgfHwgKF9yZXdyaXRlID09PSB1bmRlZmluZWQgJiYgc2VsZltrZXldICE9PSBmYWxzZSkpIHtcbiAgICAgICAgc2VsZltrZXkgfHwgX2hlYWRlcl0gPSBub3JtYWxpemVWYWx1ZShfdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNldEhlYWRlcnMgPSAoaGVhZGVycywgX3Jld3JpdGUpID0+XG4gICAgICB1dGlscy5mb3JFYWNoKGhlYWRlcnMsIChfdmFsdWUsIF9oZWFkZXIpID0+IHNldEhlYWRlcihfdmFsdWUsIF9oZWFkZXIsIF9yZXdyaXRlKSk7XG5cbiAgICBpZiAodXRpbHMuaXNQbGFpbk9iamVjdChoZWFkZXIpIHx8IGhlYWRlciBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3IpIHtcbiAgICAgIHNldEhlYWRlcnMoaGVhZGVyLCB2YWx1ZU9yUmV3cml0ZSlcbiAgICB9IGVsc2UgaWYodXRpbHMuaXNTdHJpbmcoaGVhZGVyKSAmJiAoaGVhZGVyID0gaGVhZGVyLnRyaW0oKSkgJiYgIWlzVmFsaWRIZWFkZXJOYW1lKGhlYWRlcikpIHtcbiAgICAgIHNldEhlYWRlcnMocGFyc2VIZWFkZXJzKGhlYWRlciksIHZhbHVlT3JSZXdyaXRlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KGhlYWRlcikgJiYgdXRpbHMuaXNJdGVyYWJsZShoZWFkZXIpKSB7XG4gICAgICBsZXQgb2JqID0ge30sIGRlc3QsIGtleTtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgaGVhZGVyKSB7XG4gICAgICAgIGlmICghdXRpbHMuaXNBcnJheShlbnRyeSkpIHtcbiAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ09iamVjdCBpdGVyYXRvciBtdXN0IHJldHVybiBhIGtleS12YWx1ZSBwYWlyJyk7XG4gICAgICAgIH1cblxuICAgICAgICBvYmpba2V5ID0gZW50cnlbMF1dID0gKGRlc3QgPSBvYmpba2V5XSkgP1xuICAgICAgICAgICh1dGlscy5pc0FycmF5KGRlc3QpID8gWy4uLmRlc3QsIGVudHJ5WzFdXSA6IFtkZXN0LCBlbnRyeVsxXV0pIDogZW50cnlbMV07XG4gICAgICB9XG5cbiAgICAgIHNldEhlYWRlcnMob2JqLCB2YWx1ZU9yUmV3cml0ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgaGVhZGVyICE9IG51bGwgJiYgc2V0SGVhZGVyKHZhbHVlT3JSZXdyaXRlLCBoZWFkZXIsIHJld3JpdGUpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0KGhlYWRlciwgcGFyc2VyKSB7XG4gICAgaGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKGhlYWRlcik7XG5cbiAgICBpZiAoaGVhZGVyKSB7XG4gICAgICBjb25zdCBrZXkgPSB1dGlscy5maW5kS2V5KHRoaXMsIGhlYWRlcik7XG5cbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzW2tleV07XG5cbiAgICAgICAgaWYgKCFwYXJzZXIpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyc2VyID09PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlVG9rZW5zKHZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlscy5pc0Z1bmN0aW9uKHBhcnNlcikpIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VyLmNhbGwodGhpcywgdmFsdWUsIGtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNSZWdFeHAocGFyc2VyKSkge1xuICAgICAgICAgIHJldHVybiBwYXJzZXIuZXhlYyh2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwYXJzZXIgbXVzdCBiZSBib29sZWFufHJlZ2V4cHxmdW5jdGlvbicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhcyhoZWFkZXIsIG1hdGNoZXIpIHtcbiAgICBoZWFkZXIgPSBub3JtYWxpemVIZWFkZXIoaGVhZGVyKTtcblxuICAgIGlmIChoZWFkZXIpIHtcbiAgICAgIGNvbnN0IGtleSA9IHV0aWxzLmZpbmRLZXkodGhpcywgaGVhZGVyKTtcblxuICAgICAgcmV0dXJuICEhKGtleSAmJiB0aGlzW2tleV0gIT09IHVuZGVmaW5lZCAmJiAoIW1hdGNoZXIgfHwgbWF0Y2hIZWFkZXJWYWx1ZSh0aGlzLCB0aGlzW2tleV0sIGtleSwgbWF0Y2hlcikpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBkZWxldGUoaGVhZGVyLCBtYXRjaGVyKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgbGV0IGRlbGV0ZWQgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUhlYWRlcihfaGVhZGVyKSB7XG4gICAgICBfaGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKF9oZWFkZXIpO1xuXG4gICAgICBpZiAoX2hlYWRlcikge1xuICAgICAgICBjb25zdCBrZXkgPSB1dGlscy5maW5kS2V5KHNlbGYsIF9oZWFkZXIpO1xuXG4gICAgICAgIGlmIChrZXkgJiYgKCFtYXRjaGVyIHx8IG1hdGNoSGVhZGVyVmFsdWUoc2VsZiwgc2VsZltrZXldLCBrZXksIG1hdGNoZXIpKSkge1xuICAgICAgICAgIGRlbGV0ZSBzZWxmW2tleV07XG5cbiAgICAgICAgICBkZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh1dGlscy5pc0FycmF5KGhlYWRlcikpIHtcbiAgICAgIGhlYWRlci5mb3JFYWNoKGRlbGV0ZUhlYWRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZUhlYWRlcihoZWFkZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBkZWxldGVkO1xuICB9XG5cbiAgY2xlYXIobWF0Y2hlcikge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzKTtcbiAgICBsZXQgaSA9IGtleXMubGVuZ3RoO1xuICAgIGxldCBkZWxldGVkID0gZmFsc2U7XG5cbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYoIW1hdGNoZXIgfHwgbWF0Y2hIZWFkZXJWYWx1ZSh0aGlzLCB0aGlzW2tleV0sIGtleSwgbWF0Y2hlciwgdHJ1ZSkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXNba2V5XTtcbiAgICAgICAgZGVsZXRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlbGV0ZWQ7XG4gIH1cblxuICBub3JtYWxpemUoZm9ybWF0KSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgY29uc3QgaGVhZGVycyA9IHt9O1xuXG4gICAgdXRpbHMuZm9yRWFjaCh0aGlzLCAodmFsdWUsIGhlYWRlcikgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gdXRpbHMuZmluZEtleShoZWFkZXJzLCBoZWFkZXIpO1xuXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHNlbGZba2V5XSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgZGVsZXRlIHNlbGZbaGVhZGVyXTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBub3JtYWxpemVkID0gZm9ybWF0ID8gZm9ybWF0SGVhZGVyKGhlYWRlcikgOiBTdHJpbmcoaGVhZGVyKS50cmltKCk7XG5cbiAgICAgIGlmIChub3JtYWxpemVkICE9PSBoZWFkZXIpIHtcbiAgICAgICAgZGVsZXRlIHNlbGZbaGVhZGVyXTtcbiAgICAgIH1cblxuICAgICAgc2VsZltub3JtYWxpemVkXSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcblxuICAgICAgaGVhZGVyc1tub3JtYWxpemVkXSA9IHRydWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGNvbmNhdCguLi50YXJnZXRzKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuY29uY2F0KHRoaXMsIC4uLnRhcmdldHMpO1xuICB9XG5cbiAgdG9KU09OKGFzU3RyaW5ncykge1xuICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICB1dGlscy5mb3JFYWNoKHRoaXMsICh2YWx1ZSwgaGVhZGVyKSA9PiB7XG4gICAgICB2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBmYWxzZSAmJiAob2JqW2hlYWRlcl0gPSBhc1N0cmluZ3MgJiYgdXRpbHMuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5qb2luKCcsICcpIDogdmFsdWUpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyh0aGlzLnRvSlNPTigpKVtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy50b0pTT04oKSkubWFwKChbaGVhZGVyLCB2YWx1ZV0pID0+IGhlYWRlciArICc6ICcgKyB2YWx1ZSkuam9pbignXFxuJyk7XG4gIH1cblxuICBnZXRTZXRDb29raWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KFwic2V0LWNvb2tpZVwiKSB8fCBbXTtcbiAgfVxuXG4gIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcbiAgICByZXR1cm4gJ0F4aW9zSGVhZGVycyc7XG4gIH1cblxuICBzdGF0aWMgZnJvbSh0aGluZykge1xuICAgIHJldHVybiB0aGluZyBpbnN0YW5jZW9mIHRoaXMgPyB0aGluZyA6IG5ldyB0aGlzKHRoaW5nKTtcbiAgfVxuXG4gIHN0YXRpYyBjb25jYXQoZmlyc3QsIC4uLnRhcmdldHMpIHtcbiAgICBjb25zdCBjb21wdXRlZCA9IG5ldyB0aGlzKGZpcnN0KTtcblxuICAgIHRhcmdldHMuZm9yRWFjaCgodGFyZ2V0KSA9PiBjb21wdXRlZC5zZXQodGFyZ2V0KSk7XG5cbiAgICByZXR1cm4gY29tcHV0ZWQ7XG4gIH1cblxuICBzdGF0aWMgYWNjZXNzb3IoaGVhZGVyKSB7XG4gICAgY29uc3QgaW50ZXJuYWxzID0gdGhpc1skaW50ZXJuYWxzXSA9ICh0aGlzWyRpbnRlcm5hbHNdID0ge1xuICAgICAgYWNjZXNzb3JzOiB7fVxuICAgIH0pO1xuXG4gICAgY29uc3QgYWNjZXNzb3JzID0gaW50ZXJuYWxzLmFjY2Vzc29ycztcbiAgICBjb25zdCBwcm90b3R5cGUgPSB0aGlzLnByb3RvdHlwZTtcblxuICAgIGZ1bmN0aW9uIGRlZmluZUFjY2Vzc29yKF9oZWFkZXIpIHtcbiAgICAgIGNvbnN0IGxIZWFkZXIgPSBub3JtYWxpemVIZWFkZXIoX2hlYWRlcik7XG5cbiAgICAgIGlmICghYWNjZXNzb3JzW2xIZWFkZXJdKSB7XG4gICAgICAgIGJ1aWxkQWNjZXNzb3JzKHByb3RvdHlwZSwgX2hlYWRlcik7XG4gICAgICAgIGFjY2Vzc29yc1tsSGVhZGVyXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdXRpbHMuaXNBcnJheShoZWFkZXIpID8gaGVhZGVyLmZvckVhY2goZGVmaW5lQWNjZXNzb3IpIDogZGVmaW5lQWNjZXNzb3IoaGVhZGVyKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbkF4aW9zSGVhZGVycy5hY2Nlc3NvcihbJ0NvbnRlbnQtVHlwZScsICdDb250ZW50LUxlbmd0aCcsICdBY2NlcHQnLCAnQWNjZXB0LUVuY29kaW5nJywgJ1VzZXItQWdlbnQnLCAnQXV0aG9yaXphdGlvbiddKTtcblxuLy8gcmVzZXJ2ZWQgbmFtZXMgaG90Zml4XG51dGlscy5yZWR1Y2VEZXNjcmlwdG9ycyhBeGlvc0hlYWRlcnMucHJvdG90eXBlLCAoe3ZhbHVlfSwga2V5KSA9PiB7XG4gIGxldCBtYXBwZWQgPSBrZXlbMF0udG9VcHBlckNhc2UoKSArIGtleS5zbGljZSgxKTsgLy8gbWFwIGBzZXRgID0+IGBTZXRgXG4gIHJldHVybiB7XG4gICAgZ2V0OiAoKSA9PiB2YWx1ZSxcbiAgICBzZXQoaGVhZGVyVmFsdWUpIHtcbiAgICAgIHRoaXNbbWFwcGVkXSA9IGhlYWRlclZhbHVlO1xuICAgIH1cbiAgfVxufSk7XG5cbnV0aWxzLmZyZWV6ZU1ldGhvZHMoQXhpb3NIZWFkZXJzKTtcblxuZXhwb3J0IGRlZmF1bHQgQXhpb3NIZWFkZXJzO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vLi4vdXRpbHMuanMnO1xuaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4uL2RlZmF1bHRzL2luZGV4LmpzJztcbmltcG9ydCBBeGlvc0hlYWRlcnMgZnJvbSAnLi4vY29yZS9BeGlvc0hlYWRlcnMuanMnO1xuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zXG4gKiBAcGFyYW0gez9PYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZSBvYmplY3RcbiAqXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZm5zLCByZXNwb25zZSkge1xuICBjb25zdCBjb25maWcgPSB0aGlzIHx8IGRlZmF1bHRzO1xuICBjb25zdCBjb250ZXh0ID0gcmVzcG9uc2UgfHwgY29uZmlnO1xuICBjb25zdCBoZWFkZXJzID0gQXhpb3NIZWFkZXJzLmZyb20oY29udGV4dC5oZWFkZXJzKTtcbiAgbGV0IGRhdGEgPSBjb250ZXh0LmRhdGE7XG5cbiAgdXRpbHMuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikge1xuICAgIGRhdGEgPSBmbi5jYWxsKGNvbmZpZywgZGF0YSwgaGVhZGVycy5ub3JtYWxpemUoKSwgcmVzcG9uc2UgPyByZXNwb25zZS5zdGF0dXMgOiB1bmRlZmluZWQpO1xuICB9KTtcblxuICBoZWFkZXJzLm5vcm1hbGl6ZSgpO1xuXG4gIHJldHVybiBkYXRhO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlLl9fQ0FOQ0VMX18pO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5cbi8qKlxuICogQSBgQ2FuY2VsZWRFcnJvcmAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge09iamVjdD19IHJlcXVlc3QgVGhlIHJlcXVlc3QuXG4gKlxuICogQHJldHVybnMge0NhbmNlbGVkRXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5mdW5jdGlvbiBDYW5jZWxlZEVycm9yKG1lc3NhZ2UsIGNvbmZpZywgcmVxdWVzdCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXEtbnVsbCxlcWVxZXFcbiAgQXhpb3NFcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UgPT0gbnVsbCA/ICdjYW5jZWxlZCcgOiBtZXNzYWdlLCBBeGlvc0Vycm9yLkVSUl9DQU5DRUxFRCwgY29uZmlnLCByZXF1ZXN0KTtcbiAgdGhpcy5uYW1lID0gJ0NhbmNlbGVkRXJyb3InO1xufVxuXG51dGlscy5pbmhlcml0cyhDYW5jZWxlZEVycm9yLCBBeGlvc0Vycm9yLCB7XG4gIF9fQ0FOQ0VMX186IHRydWVcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDYW5jZWxlZEVycm9yO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi9BeGlvc0Vycm9yLmpzJztcblxuLyoqXG4gKiBSZXNvbHZlIG9yIHJlamVjdCBhIFByb21pc2UgYmFzZWQgb24gcmVzcG9uc2Ugc3RhdHVzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmUgQSBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IEEgZnVuY3Rpb24gdGhhdCByZWplY3RzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS5cbiAqXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBUaGUgcmVzcG9uc2UuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7XG4gIGNvbnN0IHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzO1xuICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCAhdmFsaWRhdGVTdGF0dXMgfHwgdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICB9IGVsc2Uge1xuICAgIHJlamVjdChuZXcgQXhpb3NFcnJvcihcbiAgICAgICdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsXG4gICAgICBbQXhpb3NFcnJvci5FUlJfQkFEX1JFUVVFU1QsIEF4aW9zRXJyb3IuRVJSX0JBRF9SRVNQT05TRV1bTWF0aC5mbG9vcihyZXNwb25zZS5zdGF0dXMgLyAxMDApIC0gNF0sXG4gICAgICByZXNwb25zZS5jb25maWcsXG4gICAgICByZXNwb25zZS5yZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VcbiAgICApKTtcbiAgfVxufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VQcm90b2NvbCh1cmwpIHtcbiAgY29uc3QgbWF0Y2ggPSAvXihbLStcXHddezEsMjV9KSg6P1xcL1xcL3w6KS8uZXhlYyh1cmwpO1xuICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2hbMV0gfHwgJyc7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENhbGN1bGF0ZSBkYXRhIG1heFJhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2FtcGxlc0NvdW50PSAxMF1cbiAqIEBwYXJhbSB7TnVtYmVyfSBbbWluPSAxMDAwXVxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBzcGVlZG9tZXRlcihzYW1wbGVzQ291bnQsIG1pbikge1xuICBzYW1wbGVzQ291bnQgPSBzYW1wbGVzQ291bnQgfHwgMTA7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IEFycmF5KHNhbXBsZXNDb3VudCk7XG4gIGNvbnN0IHRpbWVzdGFtcHMgPSBuZXcgQXJyYXkoc2FtcGxlc0NvdW50KTtcbiAgbGV0IGhlYWQgPSAwO1xuICBsZXQgdGFpbCA9IDA7XG4gIGxldCBmaXJzdFNhbXBsZVRTO1xuXG4gIG1pbiA9IG1pbiAhPT0gdW5kZWZpbmVkID8gbWluIDogMTAwMDtcblxuICByZXR1cm4gZnVuY3Rpb24gcHVzaChjaHVua0xlbmd0aCkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBjb25zdCBzdGFydGVkQXQgPSB0aW1lc3RhbXBzW3RhaWxdO1xuXG4gICAgaWYgKCFmaXJzdFNhbXBsZVRTKSB7XG4gICAgICBmaXJzdFNhbXBsZVRTID0gbm93O1xuICAgIH1cblxuICAgIGJ5dGVzW2hlYWRdID0gY2h1bmtMZW5ndGg7XG4gICAgdGltZXN0YW1wc1toZWFkXSA9IG5vdztcblxuICAgIGxldCBpID0gdGFpbDtcbiAgICBsZXQgYnl0ZXNDb3VudCA9IDA7XG5cbiAgICB3aGlsZSAoaSAhPT0gaGVhZCkge1xuICAgICAgYnl0ZXNDb3VudCArPSBieXRlc1tpKytdO1xuICAgICAgaSA9IGkgJSBzYW1wbGVzQ291bnQ7XG4gICAgfVxuXG4gICAgaGVhZCA9IChoZWFkICsgMSkgJSBzYW1wbGVzQ291bnQ7XG5cbiAgICBpZiAoaGVhZCA9PT0gdGFpbCkge1xuICAgICAgdGFpbCA9ICh0YWlsICsgMSkgJSBzYW1wbGVzQ291bnQ7XG4gICAgfVxuXG4gICAgaWYgKG5vdyAtIGZpcnN0U2FtcGxlVFMgPCBtaW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwYXNzZWQgPSBzdGFydGVkQXQgJiYgbm93IC0gc3RhcnRlZEF0O1xuXG4gICAgcmV0dXJuIHBhc3NlZCA/IE1hdGgucm91bmQoYnl0ZXNDb3VudCAqIDEwMDAgLyBwYXNzZWQpIDogdW5kZWZpbmVkO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBzcGVlZG9tZXRlcjtcbiIsICIvKipcbiAqIFRocm90dGxlIGRlY29yYXRvclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7TnVtYmVyfSBmcmVxXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gdGhyb3R0bGUoZm4sIGZyZXEpIHtcbiAgbGV0IHRpbWVzdGFtcCA9IDA7XG4gIGxldCB0aHJlc2hvbGQgPSAxMDAwIC8gZnJlcTtcbiAgbGV0IGxhc3RBcmdzO1xuICBsZXQgdGltZXI7XG5cbiAgY29uc3QgaW52b2tlID0gKGFyZ3MsIG5vdyA9IERhdGUubm93KCkpID0+IHtcbiAgICB0aW1lc3RhbXAgPSBub3c7XG4gICAgbGFzdEFyZ3MgPSBudWxsO1xuICAgIGlmICh0aW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gIH1cblxuICBjb25zdCB0aHJvdHRsZWQgPSAoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgcGFzc2VkID0gbm93IC0gdGltZXN0YW1wO1xuICAgIGlmICggcGFzc2VkID49IHRocmVzaG9sZCkge1xuICAgICAgaW52b2tlKGFyZ3MsIG5vdyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxhc3RBcmdzID0gYXJncztcbiAgICAgIGlmICghdGltZXIpIHtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aW1lciA9IG51bGw7XG4gICAgICAgICAgaW52b2tlKGxhc3RBcmdzKVxuICAgICAgICB9LCB0aHJlc2hvbGQgLSBwYXNzZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGZsdXNoID0gKCkgPT4gbGFzdEFyZ3MgJiYgaW52b2tlKGxhc3RBcmdzKTtcblxuICByZXR1cm4gW3Rocm90dGxlZCwgZmx1c2hdO1xufVxuXG5leHBvcnQgZGVmYXVsdCB0aHJvdHRsZTtcbiIsICJpbXBvcnQgc3BlZWRvbWV0ZXIgZnJvbSBcIi4vc3BlZWRvbWV0ZXIuanNcIjtcbmltcG9ydCB0aHJvdHRsZSBmcm9tIFwiLi90aHJvdHRsZS5qc1wiO1xuaW1wb3J0IHV0aWxzIGZyb20gXCIuLi91dGlscy5qc1wiO1xuXG5leHBvcnQgY29uc3QgcHJvZ3Jlc3NFdmVudFJlZHVjZXIgPSAobGlzdGVuZXIsIGlzRG93bmxvYWRTdHJlYW0sIGZyZXEgPSAzKSA9PiB7XG4gIGxldCBieXRlc05vdGlmaWVkID0gMDtcbiAgY29uc3QgX3NwZWVkb21ldGVyID0gc3BlZWRvbWV0ZXIoNTAsIDI1MCk7XG5cbiAgcmV0dXJuIHRocm90dGxlKGUgPT4ge1xuICAgIGNvbnN0IGxvYWRlZCA9IGUubG9hZGVkO1xuICAgIGNvbnN0IHRvdGFsID0gZS5sZW5ndGhDb21wdXRhYmxlID8gZS50b3RhbCA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBwcm9ncmVzc0J5dGVzID0gbG9hZGVkIC0gYnl0ZXNOb3RpZmllZDtcbiAgICBjb25zdCByYXRlID0gX3NwZWVkb21ldGVyKHByb2dyZXNzQnl0ZXMpO1xuICAgIGNvbnN0IGluUmFuZ2UgPSBsb2FkZWQgPD0gdG90YWw7XG5cbiAgICBieXRlc05vdGlmaWVkID0gbG9hZGVkO1xuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGxvYWRlZCxcbiAgICAgIHRvdGFsLFxuICAgICAgcHJvZ3Jlc3M6IHRvdGFsID8gKGxvYWRlZCAvIHRvdGFsKSA6IHVuZGVmaW5lZCxcbiAgICAgIGJ5dGVzOiBwcm9ncmVzc0J5dGVzLFxuICAgICAgcmF0ZTogcmF0ZSA/IHJhdGUgOiB1bmRlZmluZWQsXG4gICAgICBlc3RpbWF0ZWQ6IHJhdGUgJiYgdG90YWwgJiYgaW5SYW5nZSA/ICh0b3RhbCAtIGxvYWRlZCkgLyByYXRlIDogdW5kZWZpbmVkLFxuICAgICAgZXZlbnQ6IGUsXG4gICAgICBsZW5ndGhDb21wdXRhYmxlOiB0b3RhbCAhPSBudWxsLFxuICAgICAgW2lzRG93bmxvYWRTdHJlYW0gPyAnZG93bmxvYWQnIDogJ3VwbG9hZCddOiB0cnVlXG4gICAgfTtcblxuICAgIGxpc3RlbmVyKGRhdGEpO1xuICB9LCBmcmVxKTtcbn1cblxuZXhwb3J0IGNvbnN0IHByb2dyZXNzRXZlbnREZWNvcmF0b3IgPSAodG90YWwsIHRocm90dGxlZCkgPT4ge1xuICBjb25zdCBsZW5ndGhDb21wdXRhYmxlID0gdG90YWwgIT0gbnVsbDtcblxuICByZXR1cm4gWyhsb2FkZWQpID0+IHRocm90dGxlZFswXSh7XG4gICAgbGVuZ3RoQ29tcHV0YWJsZSxcbiAgICB0b3RhbCxcbiAgICBsb2FkZWRcbiAgfSksIHRocm90dGxlZFsxXV07XG59XG5cbmV4cG9ydCBjb25zdCBhc3luY0RlY29yYXRvciA9IChmbikgPT4gKC4uLmFyZ3MpID0+IHV0aWxzLmFzYXAoKCkgPT4gZm4oLi4uYXJncykpO1xuIiwgImltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXRmb3JtLmhhc1N0YW5kYXJkQnJvd3NlckVudiA/ICgob3JpZ2luLCBpc01TSUUpID0+ICh1cmwpID0+IHtcbiAgdXJsID0gbmV3IFVSTCh1cmwsIHBsYXRmb3JtLm9yaWdpbik7XG5cbiAgcmV0dXJuIChcbiAgICBvcmlnaW4ucHJvdG9jb2wgPT09IHVybC5wcm90b2NvbCAmJlxuICAgIG9yaWdpbi5ob3N0ID09PSB1cmwuaG9zdCAmJlxuICAgIChpc01TSUUgfHwgb3JpZ2luLnBvcnQgPT09IHVybC5wb3J0KVxuICApO1xufSkoXG4gIG5ldyBVUkwocGxhdGZvcm0ub3JpZ2luKSxcbiAgcGxhdGZvcm0ubmF2aWdhdG9yICYmIC8obXNpZXx0cmlkZW50KS9pLnRlc3QocGxhdGZvcm0ubmF2aWdhdG9yLnVzZXJBZ2VudClcbikgOiAoKSA9PiB0cnVlO1xuIiwgImltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXRmb3JtLmhhc1N0YW5kYXJkQnJvd3NlckVudiA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llXG4gIHtcbiAgICB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHtcbiAgICAgIGNvbnN0IGNvb2tpZSA9IFtuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKV07XG5cbiAgICAgIHV0aWxzLmlzTnVtYmVyKGV4cGlyZXMpICYmIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcblxuICAgICAgdXRpbHMuaXNTdHJpbmcocGF0aCkgJiYgY29va2llLnB1c2goJ3BhdGg9JyArIHBhdGgpO1xuXG4gICAgICB1dGlscy5pc1N0cmluZyhkb21haW4pICYmIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG5cbiAgICAgIHNlY3VyZSA9PT0gdHJ1ZSAmJiBjb29raWUucHVzaCgnc2VjdXJlJyk7XG5cbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpO1xuICAgIH0sXG5cbiAgICByZWFkKG5hbWUpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgIHJldHVybiAobWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbM10pIDogbnVsbCk7XG4gICAgfSxcblxuICAgIHJlbW92ZShuYW1lKSB7XG4gICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApO1xuICAgIH1cbiAgfVxuXG4gIDpcblxuICAvLyBOb24tc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gIHtcbiAgICB3cml0ZSgpIHt9LFxuICAgIHJlYWQoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHJlbW92ZSgpIHt9XG4gIH07XG5cbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG4gIC8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggXCI8c2NoZW1lPjovL1wiIG9yIFwiLy9cIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS5cbiAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkXG4gIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuICByZXR1cm4gL14oW2Etel1bYS16XFxkK1xcLS5dKjopP1xcL1xcLy9pLnRlc3QodXJsKTtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkxcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gIHJldHVybiByZWxhdGl2ZVVSTFxuICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8/XFwvJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgOiBiYXNlVVJMO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IGlzQWJzb2x1dGVVUkwgZnJvbSAnLi4vaGVscGVycy9pc0Fic29sdXRlVVJMLmpzJztcbmltcG9ydCBjb21iaW5lVVJMcyBmcm9tICcuLi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIGJhc2VVUkwgd2l0aCB0aGUgcmVxdWVzdGVkVVJMLFxuICogb25seSB3aGVuIHRoZSByZXF1ZXN0ZWRVUkwgaXMgbm90IGFscmVhZHkgYW4gYWJzb2x1dGUgVVJMLlxuICogSWYgdGhlIHJlcXVlc3RVUkwgaXMgYWJzb2x1dGUsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgcmVxdWVzdGVkVVJMIHVudG91Y2hlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0ZWRVUkwgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIHRvIGNvbWJpbmVcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgZnVsbCBwYXRoXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJ1aWxkRnVsbFBhdGgoYmFzZVVSTCwgcmVxdWVzdGVkVVJMLCBhbGxvd0Fic29sdXRlVXJscykge1xuICBsZXQgaXNSZWxhdGl2ZVVybCA9ICFpc0Fic29sdXRlVVJMKHJlcXVlc3RlZFVSTCk7XG4gIGlmIChiYXNlVVJMICYmIChpc1JlbGF0aXZlVXJsIHx8IGFsbG93QWJzb2x1dGVVcmxzID09IGZhbHNlKSkge1xuICAgIHJldHVybiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpO1xuICB9XG4gIHJldHVybiByZXF1ZXN0ZWRVUkw7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tIFwiLi9BeGlvc0hlYWRlcnMuanNcIjtcblxuY29uc3QgaGVhZGVyc1RvT2JqZWN0ID0gKHRoaW5nKSA9PiB0aGluZyBpbnN0YW5jZW9mIEF4aW9zSGVhZGVycyA/IHsgLi4udGhpbmcgfSA6IHRoaW5nO1xuXG4vKipcbiAqIENvbmZpZy1zcGVjaWZpYyBtZXJnZS1mdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgbmV3IGNvbmZpZy1vYmplY3RcbiAqIGJ5IG1lcmdpbmcgdHdvIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMVxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzJcbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBOZXcgb2JqZWN0IHJlc3VsdGluZyBmcm9tIG1lcmdpbmcgY29uZmlnMiB0byBjb25maWcxXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lcmdlQ29uZmlnKGNvbmZpZzEsIGNvbmZpZzIpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIGNvbmZpZzIgPSBjb25maWcyIHx8IHt9O1xuICBjb25zdCBjb25maWcgPSB7fTtcblxuICBmdW5jdGlvbiBnZXRNZXJnZWRWYWx1ZSh0YXJnZXQsIHNvdXJjZSwgcHJvcCwgY2FzZWxlc3MpIHtcbiAgICBpZiAodXRpbHMuaXNQbGFpbk9iamVjdCh0YXJnZXQpICYmIHV0aWxzLmlzUGxhaW5PYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHV0aWxzLm1lcmdlLmNhbGwoe2Nhc2VsZXNzfSwgdGFyZ2V0LCBzb3VyY2UpO1xuICAgIH0gZWxzZSBpZiAodXRpbHMuaXNQbGFpbk9iamVjdChzb3VyY2UpKSB7XG4gICAgICByZXR1cm4gdXRpbHMubWVyZ2Uoe30sIHNvdXJjZSk7XG4gICAgfSBlbHNlIGlmICh1dGlscy5pc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiBzb3VyY2Uuc2xpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHNvdXJjZTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiBtZXJnZURlZXBQcm9wZXJ0aWVzKGEsIGIsIHByb3AgLCBjYXNlbGVzcykge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoYikpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShhLCBiLCBwcm9wICwgY2FzZWxlc3MpO1xuICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGEpKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBhLCBwcm9wICwgY2FzZWxlc3MpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiB2YWx1ZUZyb21Db25maWcyKGEsIGIpIHtcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGIpKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBiKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gZGVmYXVsdFRvQ29uZmlnMihhLCBiKSB7XG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChiKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgYik7XG4gICAgfSBlbHNlIGlmICghdXRpbHMuaXNVbmRlZmluZWQoYSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGEpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiBtZXJnZURpcmVjdEtleXMoYSwgYiwgcHJvcCkge1xuICAgIGlmIChwcm9wIGluIGNvbmZpZzIpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShhLCBiKTtcbiAgICB9IGVsc2UgaWYgKHByb3AgaW4gY29uZmlnMSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgYSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgbWVyZ2VNYXAgPSB7XG4gICAgdXJsOiB2YWx1ZUZyb21Db25maWcyLFxuICAgIG1ldGhvZDogdmFsdWVGcm9tQ29uZmlnMixcbiAgICBkYXRhOiB2YWx1ZUZyb21Db25maWcyLFxuICAgIGJhc2VVUkw6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdHJhbnNmb3JtUmVxdWVzdDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB0cmFuc2Zvcm1SZXNwb25zZTogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBwYXJhbXNTZXJpYWxpemVyOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHRpbWVvdXQ6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdGltZW91dE1lc3NhZ2U6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgd2l0aENyZWRlbnRpYWxzOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHdpdGhYU1JGVG9rZW46IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgYWRhcHRlcjogZGVmYXVsdFRvQ29uZmlnMixcbiAgICByZXNwb25zZVR5cGU6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgeHNyZkNvb2tpZU5hbWU6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgeHNyZkhlYWRlck5hbWU6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgb25VcGxvYWRQcm9ncmVzczogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBvbkRvd25sb2FkUHJvZ3Jlc3M6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgZGVjb21wcmVzczogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBtYXhDb250ZW50TGVuZ3RoOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIG1heEJvZHlMZW5ndGg6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgYmVmb3JlUmVkaXJlY3Q6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdHJhbnNwb3J0OiBkZWZhdWx0VG9Db25maWcyLFxuICAgIGh0dHBBZ2VudDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBodHRwc0FnZW50OiBkZWZhdWx0VG9Db25maWcyLFxuICAgIGNhbmNlbFRva2VuOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHNvY2tldFBhdGg6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgcmVzcG9uc2VFbmNvZGluZzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB2YWxpZGF0ZVN0YXR1czogbWVyZ2VEaXJlY3RLZXlzLFxuICAgIGhlYWRlcnM6IChhLCBiICwgcHJvcCkgPT4gbWVyZ2VEZWVwUHJvcGVydGllcyhoZWFkZXJzVG9PYmplY3QoYSksIGhlYWRlcnNUb09iamVjdChiKSxwcm9wLCB0cnVlKVxuICB9O1xuXG4gIHV0aWxzLmZvckVhY2goT2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnMSwgY29uZmlnMikpLCBmdW5jdGlvbiBjb21wdXRlQ29uZmlnVmFsdWUocHJvcCkge1xuICAgIGNvbnN0IG1lcmdlID0gbWVyZ2VNYXBbcHJvcF0gfHwgbWVyZ2VEZWVwUHJvcGVydGllcztcbiAgICBjb25zdCBjb25maWdWYWx1ZSA9IG1lcmdlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0sIHByb3ApO1xuICAgICh1dGlscy5pc1VuZGVmaW5lZChjb25maWdWYWx1ZSkgJiYgbWVyZ2UgIT09IG1lcmdlRGlyZWN0S2V5cykgfHwgKGNvbmZpZ1twcm9wXSA9IGNvbmZpZ1ZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn1cbiIsICJpbXBvcnQgcGxhdGZvcm0gZnJvbSBcIi4uL3BsYXRmb3JtL2luZGV4LmpzXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgaXNVUkxTYW1lT3JpZ2luIGZyb20gXCIuL2lzVVJMU2FtZU9yaWdpbi5qc1wiO1xuaW1wb3J0IGNvb2tpZXMgZnJvbSBcIi4vY29va2llcy5qc1wiO1xuaW1wb3J0IGJ1aWxkRnVsbFBhdGggZnJvbSBcIi4uL2NvcmUvYnVpbGRGdWxsUGF0aC5qc1wiO1xuaW1wb3J0IG1lcmdlQ29uZmlnIGZyb20gXCIuLi9jb3JlL21lcmdlQ29uZmlnLmpzXCI7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gXCIuLi9jb3JlL0F4aW9zSGVhZGVycy5qc1wiO1xuaW1wb3J0IGJ1aWxkVVJMIGZyb20gXCIuL2J1aWxkVVJMLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IChjb25maWcpID0+IHtcbiAgY29uc3QgbmV3Q29uZmlnID0gbWVyZ2VDb25maWcoe30sIGNvbmZpZyk7XG5cbiAgbGV0IHtkYXRhLCB3aXRoWFNSRlRva2VuLCB4c3JmSGVhZGVyTmFtZSwgeHNyZkNvb2tpZU5hbWUsIGhlYWRlcnMsIGF1dGh9ID0gbmV3Q29uZmlnO1xuXG4gIG5ld0NvbmZpZy5oZWFkZXJzID0gaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKGhlYWRlcnMpO1xuXG4gIG5ld0NvbmZpZy51cmwgPSBidWlsZFVSTChidWlsZEZ1bGxQYXRoKG5ld0NvbmZpZy5iYXNlVVJMLCBuZXdDb25maWcudXJsLCBuZXdDb25maWcuYWxsb3dBYnNvbHV0ZVVybHMpLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplcik7XG5cbiAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICBpZiAoYXV0aCkge1xuICAgIGhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgJ0Jhc2ljICcgK1xuICAgICAgYnRvYSgoYXV0aC51c2VybmFtZSB8fCAnJykgKyAnOicgKyAoYXV0aC5wYXNzd29yZCA/IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhdXRoLnBhc3N3b3JkKSkgOiAnJykpXG4gICAgKTtcbiAgfVxuXG4gIGxldCBjb250ZW50VHlwZTtcblxuICBpZiAodXRpbHMuaXNGb3JtRGF0YShkYXRhKSkge1xuICAgIGlmIChwbGF0Zm9ybS5oYXNTdGFuZGFyZEJyb3dzZXJFbnYgfHwgcGxhdGZvcm0uaGFzU3RhbmRhcmRCcm93c2VyV2ViV29ya2VyRW52KSB7XG4gICAgICBoZWFkZXJzLnNldENvbnRlbnRUeXBlKHVuZGVmaW5lZCk7IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9IGVsc2UgaWYgKChjb250ZW50VHlwZSA9IGhlYWRlcnMuZ2V0Q29udGVudFR5cGUoKSkgIT09IGZhbHNlKSB7XG4gICAgICAvLyBmaXggc2VtaWNvbG9uIGR1cGxpY2F0aW9uIGlzc3VlIGZvciBSZWFjdE5hdGl2ZSBGb3JtRGF0YSBpbXBsZW1lbnRhdGlvblxuICAgICAgY29uc3QgW3R5cGUsIC4uLnRva2Vuc10gPSBjb250ZW50VHlwZSA/IGNvbnRlbnRUeXBlLnNwbGl0KCc7JykubWFwKHRva2VuID0+IHRva2VuLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pIDogW107XG4gICAgICBoZWFkZXJzLnNldENvbnRlbnRUeXBlKFt0eXBlIHx8ICdtdWx0aXBhcnQvZm9ybS1kYXRhJywgLi4udG9rZW5zXS5qb2luKCc7ICcpKTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gIC8vIFNwZWNpZmljYWxseSBub3QgaWYgd2UncmUgaW4gYSB3ZWIgd29ya2VyLCBvciByZWFjdC1uYXRpdmUuXG5cbiAgaWYgKHBsYXRmb3JtLmhhc1N0YW5kYXJkQnJvd3NlckVudikge1xuICAgIHdpdGhYU1JGVG9rZW4gJiYgdXRpbHMuaXNGdW5jdGlvbih3aXRoWFNSRlRva2VuKSAmJiAod2l0aFhTUkZUb2tlbiA9IHdpdGhYU1JGVG9rZW4obmV3Q29uZmlnKSk7XG5cbiAgICBpZiAod2l0aFhTUkZUb2tlbiB8fCAod2l0aFhTUkZUb2tlbiAhPT0gZmFsc2UgJiYgaXNVUkxTYW1lT3JpZ2luKG5ld0NvbmZpZy51cmwpKSkge1xuICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgICBjb25zdCB4c3JmVmFsdWUgPSB4c3JmSGVhZGVyTmFtZSAmJiB4c3JmQ29va2llTmFtZSAmJiBjb29raWVzLnJlYWQoeHNyZkNvb2tpZU5hbWUpO1xuXG4gICAgICBpZiAoeHNyZlZhbHVlKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KHhzcmZIZWFkZXJOYW1lLCB4c3JmVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdDb25maWc7XG59XG5cbiIsICJpbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5pbXBvcnQgc2V0dGxlIGZyb20gJy4vLi4vY29yZS9zZXR0bGUuanMnO1xuaW1wb3J0IHRyYW5zaXRpb25hbERlZmF1bHRzIGZyb20gJy4uL2RlZmF1bHRzL3RyYW5zaXRpb25hbC5qcyc7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tICcuLi9jb3JlL0F4aW9zRXJyb3IuanMnO1xuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IHBhcnNlUHJvdG9jb2wgZnJvbSAnLi4vaGVscGVycy9wYXJzZVByb3RvY29sLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gJy4uL2NvcmUvQXhpb3NIZWFkZXJzLmpzJztcbmltcG9ydCB7cHJvZ3Jlc3NFdmVudFJlZHVjZXJ9IGZyb20gJy4uL2hlbHBlcnMvcHJvZ3Jlc3NFdmVudFJlZHVjZXIuanMnO1xuaW1wb3J0IHJlc29sdmVDb25maWcgZnJvbSBcIi4uL2hlbHBlcnMvcmVzb2x2ZUNvbmZpZy5qc1wiO1xuXG5jb25zdCBpc1hIUkFkYXB0ZXJTdXBwb3J0ZWQgPSB0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnO1xuXG5leHBvcnQgZGVmYXVsdCBpc1hIUkFkYXB0ZXJTdXBwb3J0ZWQgJiYgZnVuY3Rpb24gKGNvbmZpZykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZGlzcGF0Y2hYaHJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xuICAgIGNvbnN0IF9jb25maWcgPSByZXNvbHZlQ29uZmlnKGNvbmZpZyk7XG4gICAgbGV0IHJlcXVlc3REYXRhID0gX2NvbmZpZy5kYXRhO1xuICAgIGNvbnN0IHJlcXVlc3RIZWFkZXJzID0gQXhpb3NIZWFkZXJzLmZyb20oX2NvbmZpZy5oZWFkZXJzKS5ub3JtYWxpemUoKTtcbiAgICBsZXQge3Jlc3BvbnNlVHlwZSwgb25VcGxvYWRQcm9ncmVzcywgb25Eb3dubG9hZFByb2dyZXNzfSA9IF9jb25maWc7XG4gICAgbGV0IG9uQ2FuY2VsZWQ7XG4gICAgbGV0IHVwbG9hZFRocm90dGxlZCwgZG93bmxvYWRUaHJvdHRsZWQ7XG4gICAgbGV0IGZsdXNoVXBsb2FkLCBmbHVzaERvd25sb2FkO1xuXG4gICAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICAgIGZsdXNoVXBsb2FkICYmIGZsdXNoVXBsb2FkKCk7IC8vIGZsdXNoIGV2ZW50c1xuICAgICAgZmx1c2hEb3dubG9hZCAmJiBmbHVzaERvd25sb2FkKCk7IC8vIGZsdXNoIGV2ZW50c1xuXG4gICAgICBfY29uZmlnLmNhbmNlbFRva2VuICYmIF9jb25maWcuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUob25DYW5jZWxlZCk7XG5cbiAgICAgIF9jb25maWcuc2lnbmFsICYmIF9jb25maWcuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7XG4gICAgfVxuXG4gICAgbGV0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIHJlcXVlc3Qub3BlbihfY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBfY29uZmlnLnVybCwgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xuICAgIHJlcXVlc3QudGltZW91dCA9IF9jb25maWcudGltZW91dDtcblxuICAgIGZ1bmN0aW9uIG9ubG9hZGVuZCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgY29uc3QgcmVzcG9uc2VIZWFkZXJzID0gQXhpb3NIZWFkZXJzLmZyb20oXG4gICAgICAgICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgJiYgcmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9ICFyZXNwb25zZVR5cGUgfHwgcmVzcG9uc2VUeXBlID09PSAndGV4dCcgfHwgcmVzcG9uc2VUeXBlID09PSAnanNvbicgP1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7XG4gICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1c1RleHQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICByZXF1ZXN0XG4gICAgICB9O1xuXG4gICAgICBzZXR0bGUoZnVuY3Rpb24gX3Jlc29sdmUodmFsdWUpIHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0sIGZ1bmN0aW9uIF9yZWplY3QoZXJyKSB7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCByZXNwb25zZSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICgnb25sb2FkZW5kJyBpbiByZXF1ZXN0KSB7XG4gICAgICAvLyBVc2Ugb25sb2FkZW5kIGlmIGF2YWlsYWJsZVxuICAgICAgcmVxdWVzdC5vbmxvYWRlbmQgPSBvbmxvYWRlbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIExpc3RlbiBmb3IgcmVhZHkgc3RhdGUgdG8gZW11bGF0ZSBvbmxvYWRlbmRcbiAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0IHx8IHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuICAgICAgICAvLyBoYW5kbGVkIGJ5IG9uZXJyb3IgaW5zdGVhZFxuICAgICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuICAgICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMCAmJiAhKHJlcXVlc3QucmVzcG9uc2VVUkwgJiYgcmVxdWVzdC5yZXNwb25zZVVSTC5pbmRleE9mKCdmaWxlOicpID09PSAwKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWFkeXN0YXRlIGhhbmRsZXIgaXMgY2FsbGluZyBiZWZvcmUgb25lcnJvciBvciBvbnRpbWVvdXQgaGFuZGxlcnMsXG4gICAgICAgIC8vIHNvIHdlIHNob3VsZCBjYWxsIG9ubG9hZGVuZCBvbiB0aGUgbmV4dCAndGljaydcbiAgICAgICAgc2V0VGltZW91dChvbmxvYWRlbmQpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgYnJvd3NlciByZXF1ZXN0IGNhbmNlbGxhdGlvbiAoYXMgb3Bwb3NlZCB0byBhIG1hbnVhbCBjYW5jZWxsYXRpb24pXG4gICAgcmVxdWVzdC5vbmFib3J0ID0gZnVuY3Rpb24gaGFuZGxlQWJvcnQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoJ1JlcXVlc3QgYWJvcnRlZCcsIEF4aW9zRXJyb3IuRUNPTk5BQk9SVEVELCBjb25maWcsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSBsb3cgbGV2ZWwgbmV0d29yayBlcnJvcnNcbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHtcbiAgICAgIC8vIFJlYWwgZXJyb3JzIGFyZSBoaWRkZW4gZnJvbSB1cyBieSB0aGUgYnJvd3NlclxuICAgICAgLy8gb25lcnJvciBzaG91bGQgb25seSBmaXJlIGlmIGl0J3MgYSBuZXR3b3JrIGVycm9yXG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBBeGlvc0Vycm9yLkVSUl9ORVRXT1JLLCBjb25maWcsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSB0aW1lb3V0XG4gICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge1xuICAgICAgbGV0IHRpbWVvdXRFcnJvck1lc3NhZ2UgPSBfY29uZmlnLnRpbWVvdXQgPyAndGltZW91dCBvZiAnICsgX2NvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJyA6ICd0aW1lb3V0IGV4Y2VlZGVkJztcbiAgICAgIGNvbnN0IHRyYW5zaXRpb25hbCA9IF9jb25maWcudHJhbnNpdGlvbmFsIHx8IHRyYW5zaXRpb25hbERlZmF1bHRzO1xuICAgICAgaWYgKF9jb25maWcudGltZW91dEVycm9yTWVzc2FnZSkge1xuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlID0gX2NvbmZpZy50aW1lb3V0RXJyb3JNZXNzYWdlO1xuICAgICAgfVxuICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yKFxuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlLFxuICAgICAgICB0cmFuc2l0aW9uYWwuY2xhcmlmeVRpbWVvdXRFcnJvciA/IEF4aW9zRXJyb3IuRVRJTUVET1VUIDogQXhpb3NFcnJvci5FQ09OTkFCT1JURUQsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gUmVtb3ZlIENvbnRlbnQtVHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICAgIHJlcXVlc3REYXRhID09PSB1bmRlZmluZWQgJiYgcmVxdWVzdEhlYWRlcnMuc2V0Q29udGVudFR5cGUobnVsbCk7XG5cbiAgICAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdFxuICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkge1xuICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycy50b0pTT04oKSwgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHdpdGhDcmVkZW50aWFscyB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoX2NvbmZpZy53aXRoQ3JlZGVudGlhbHMpKSB7XG4gICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9ICEhX2NvbmZpZy53aXRoQ3JlZGVudGlhbHM7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChyZXNwb25zZVR5cGUgJiYgcmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gX2NvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHByb2dyZXNzIGlmIG5lZWRlZFxuICAgIGlmIChvbkRvd25sb2FkUHJvZ3Jlc3MpIHtcbiAgICAgIChbZG93bmxvYWRUaHJvdHRsZWQsIGZsdXNoRG93bmxvYWRdID0gcHJvZ3Jlc3NFdmVudFJlZHVjZXIob25Eb3dubG9hZFByb2dyZXNzLCB0cnVlKSk7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgZG93bmxvYWRUaHJvdHRsZWQpO1xuICAgIH1cblxuICAgIC8vIE5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCB1cGxvYWQgZXZlbnRzXG4gICAgaWYgKG9uVXBsb2FkUHJvZ3Jlc3MgJiYgcmVxdWVzdC51cGxvYWQpIHtcbiAgICAgIChbdXBsb2FkVGhyb3R0bGVkLCBmbHVzaFVwbG9hZF0gPSBwcm9ncmVzc0V2ZW50UmVkdWNlcihvblVwbG9hZFByb2dyZXNzKSk7XG5cbiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgdXBsb2FkVGhyb3R0bGVkKTtcblxuICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsIGZsdXNoVXBsb2FkKTtcbiAgICB9XG5cbiAgICBpZiAoX2NvbmZpZy5jYW5jZWxUb2tlbiB8fCBfY29uZmlnLnNpZ25hbCkge1xuICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICAgIG9uQ2FuY2VsZWQgPSBjYW5jZWwgPT4ge1xuICAgICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVqZWN0KCFjYW5jZWwgfHwgY2FuY2VsLnR5cGUgPyBuZXcgQ2FuY2VsZWRFcnJvcihudWxsLCBjb25maWcsIHJlcXVlc3QpIDogY2FuY2VsKTtcbiAgICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIF9jb25maWcuY2FuY2VsVG9rZW4gJiYgX2NvbmZpZy5jYW5jZWxUb2tlbi5zdWJzY3JpYmUob25DYW5jZWxlZCk7XG4gICAgICBpZiAoX2NvbmZpZy5zaWduYWwpIHtcbiAgICAgICAgX2NvbmZpZy5zaWduYWwuYWJvcnRlZCA/IG9uQ2FuY2VsZWQoKSA6IF9jb25maWcuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcHJvdG9jb2wgPSBwYXJzZVByb3RvY29sKF9jb25maWcudXJsKTtcblxuICAgIGlmIChwcm90b2NvbCAmJiBwbGF0Zm9ybS5wcm90b2NvbHMuaW5kZXhPZihwcm90b2NvbCkgPT09IC0xKSB7XG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoJ1Vuc3VwcG9ydGVkIHByb3RvY29sICcgKyBwcm90b2NvbCArICc6JywgQXhpb3NFcnJvci5FUlJfQkFEX1JFUVVFU1QsIGNvbmZpZykpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuXG4gICAgLy8gU2VuZCB0aGUgcmVxdWVzdFxuICAgIHJlcXVlc3Quc2VuZChyZXF1ZXN0RGF0YSB8fCBudWxsKTtcbiAgfSk7XG59XG4iLCAiaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSBcIi4uL2NhbmNlbC9DYW5jZWxlZEVycm9yLmpzXCI7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tIFwiLi4vY29yZS9BeGlvc0Vycm9yLmpzXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuXG5jb25zdCBjb21wb3NlU2lnbmFscyA9IChzaWduYWxzLCB0aW1lb3V0KSA9PiB7XG4gIGNvbnN0IHtsZW5ndGh9ID0gKHNpZ25hbHMgPSBzaWduYWxzID8gc2lnbmFscy5maWx0ZXIoQm9vbGVhbikgOiBbXSk7XG5cbiAgaWYgKHRpbWVvdXQgfHwgbGVuZ3RoKSB7XG4gICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgICBsZXQgYWJvcnRlZDtcblxuICAgIGNvbnN0IG9uYWJvcnQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoIWFib3J0ZWQpIHtcbiAgICAgICAgYWJvcnRlZCA9IHRydWU7XG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIGNvbnN0IGVyciA9IHJlYXNvbiBpbnN0YW5jZW9mIEVycm9yID8gcmVhc29uIDogdGhpcy5yZWFzb247XG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoZXJyIGluc3RhbmNlb2YgQXhpb3NFcnJvciA/IGVyciA6IG5ldyBDYW5jZWxlZEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBlcnIpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdGltZXIgPSB0aW1lb3V0ICYmIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGltZXIgPSBudWxsO1xuICAgICAgb25hYm9ydChuZXcgQXhpb3NFcnJvcihgdGltZW91dCAke3RpbWVvdXR9IG9mIG1zIGV4Y2VlZGVkYCwgQXhpb3NFcnJvci5FVElNRURPVVQpKVxuICAgIH0sIHRpbWVvdXQpXG5cbiAgICBjb25zdCB1bnN1YnNjcmliZSA9ICgpID0+IHtcbiAgICAgIGlmIChzaWduYWxzKSB7XG4gICAgICAgIHRpbWVyICYmIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgICAgc2lnbmFscy5mb3JFYWNoKHNpZ25hbCA9PiB7XG4gICAgICAgICAgc2lnbmFsLnVuc3Vic2NyaWJlID8gc2lnbmFsLnVuc3Vic2NyaWJlKG9uYWJvcnQpIDogc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25hYm9ydCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzaWduYWxzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaWduYWxzLmZvckVhY2goKHNpZ25hbCkgPT4gc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25hYm9ydCkpO1xuXG4gICAgY29uc3Qge3NpZ25hbH0gPSBjb250cm9sbGVyO1xuXG4gICAgc2lnbmFsLnVuc3Vic2NyaWJlID0gKCkgPT4gdXRpbHMuYXNhcCh1bnN1YnNjcmliZSk7XG5cbiAgICByZXR1cm4gc2lnbmFsO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvc2VTaWduYWxzO1xuIiwgIlxuZXhwb3J0IGNvbnN0IHN0cmVhbUNodW5rID0gZnVuY3Rpb24qIChjaHVuaywgY2h1bmtTaXplKSB7XG4gIGxldCBsZW4gPSBjaHVuay5ieXRlTGVuZ3RoO1xuXG4gIGlmICghY2h1bmtTaXplIHx8IGxlbiA8IGNodW5rU2l6ZSkge1xuICAgIHlpZWxkIGNodW5rO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBwb3MgPSAwO1xuICBsZXQgZW5kO1xuXG4gIHdoaWxlIChwb3MgPCBsZW4pIHtcbiAgICBlbmQgPSBwb3MgKyBjaHVua1NpemU7XG4gICAgeWllbGQgY2h1bmsuc2xpY2UocG9zLCBlbmQpO1xuICAgIHBvcyA9IGVuZDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcmVhZEJ5dGVzID0gYXN5bmMgZnVuY3Rpb24qIChpdGVyYWJsZSwgY2h1bmtTaXplKSB7XG4gIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgcmVhZFN0cmVhbShpdGVyYWJsZSkpIHtcbiAgICB5aWVsZCogc3RyZWFtQ2h1bmsoY2h1bmssIGNodW5rU2l6ZSk7XG4gIH1cbn1cblxuY29uc3QgcmVhZFN0cmVhbSA9IGFzeW5jIGZ1bmN0aW9uKiAoc3RyZWFtKSB7XG4gIGlmIChzdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKSB7XG4gICAgeWllbGQqIHN0cmVhbTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG4gIHRyeSB7XG4gICAgZm9yICg7Oykge1xuICAgICAgY29uc3Qge2RvbmUsIHZhbHVlfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICBpZiAoZG9uZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHlpZWxkIHZhbHVlO1xuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCByZWFkZXIuY2FuY2VsKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHRyYWNrU3RyZWFtID0gKHN0cmVhbSwgY2h1bmtTaXplLCBvblByb2dyZXNzLCBvbkZpbmlzaCkgPT4ge1xuICBjb25zdCBpdGVyYXRvciA9IHJlYWRCeXRlcyhzdHJlYW0sIGNodW5rU2l6ZSk7XG5cbiAgbGV0IGJ5dGVzID0gMDtcbiAgbGV0IGRvbmU7XG4gIGxldCBfb25GaW5pc2ggPSAoZSkgPT4ge1xuICAgIGlmICghZG9uZSkge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBvbkZpbmlzaCAmJiBvbkZpbmlzaChlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICBhc3luYyBwdWxsKGNvbnRyb2xsZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHtkb25lLCB2YWx1ZX0gPSBhd2FpdCBpdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgIF9vbkZpbmlzaCgpO1xuICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbGVuID0gdmFsdWUuYnl0ZUxlbmd0aDtcbiAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgICBsZXQgbG9hZGVkQnl0ZXMgPSBieXRlcyArPSBsZW47XG4gICAgICAgICAgb25Qcm9ncmVzcyhsb2FkZWRCeXRlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKG5ldyBVaW50OEFycmF5KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgX29uRmluaXNoKGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNhbmNlbChyZWFzb24pIHtcbiAgICAgIF9vbkZpbmlzaChyZWFzb24pO1xuICAgICAgcmV0dXJuIGl0ZXJhdG9yLnJldHVybigpO1xuICAgIH1cbiAgfSwge1xuICAgIGhpZ2hXYXRlck1hcms6IDJcbiAgfSlcbn1cbiIsICJpbXBvcnQgcGxhdGZvcm0gZnJvbSBcIi4uL3BsYXRmb3JtL2luZGV4LmpzXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tIFwiLi4vY29yZS9BeGlvc0Vycm9yLmpzXCI7XG5pbXBvcnQgY29tcG9zZVNpZ25hbHMgZnJvbSBcIi4uL2hlbHBlcnMvY29tcG9zZVNpZ25hbHMuanNcIjtcbmltcG9ydCB7dHJhY2tTdHJlYW19IGZyb20gXCIuLi9oZWxwZXJzL3RyYWNrU3RyZWFtLmpzXCI7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gXCIuLi9jb3JlL0F4aW9zSGVhZGVycy5qc1wiO1xuaW1wb3J0IHtwcm9ncmVzc0V2ZW50UmVkdWNlciwgcHJvZ3Jlc3NFdmVudERlY29yYXRvciwgYXN5bmNEZWNvcmF0b3J9IGZyb20gXCIuLi9oZWxwZXJzL3Byb2dyZXNzRXZlbnRSZWR1Y2VyLmpzXCI7XG5pbXBvcnQgcmVzb2x2ZUNvbmZpZyBmcm9tIFwiLi4vaGVscGVycy9yZXNvbHZlQ29uZmlnLmpzXCI7XG5pbXBvcnQgc2V0dGxlIGZyb20gXCIuLi9jb3JlL3NldHRsZS5qc1wiO1xuXG5jb25zdCBpc0ZldGNoU3VwcG9ydGVkID0gdHlwZW9mIGZldGNoID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBSZXF1ZXN0ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBSZXNwb25zZSA9PT0gJ2Z1bmN0aW9uJztcbmNvbnN0IGlzUmVhZGFibGVTdHJlYW1TdXBwb3J0ZWQgPSBpc0ZldGNoU3VwcG9ydGVkICYmIHR5cGVvZiBSZWFkYWJsZVN0cmVhbSA9PT0gJ2Z1bmN0aW9uJztcblxuLy8gdXNlZCBvbmx5IGluc2lkZSB0aGUgZmV0Y2ggYWRhcHRlclxuY29uc3QgZW5jb2RlVGV4dCA9IGlzRmV0Y2hTdXBwb3J0ZWQgJiYgKHR5cGVvZiBUZXh0RW5jb2RlciA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgKChlbmNvZGVyKSA9PiAoc3RyKSA9PiBlbmNvZGVyLmVuY29kZShzdHIpKShuZXcgVGV4dEVuY29kZXIoKSkgOlxuICAgIGFzeW5jIChzdHIpID0+IG5ldyBVaW50OEFycmF5KGF3YWl0IG5ldyBSZXNwb25zZShzdHIpLmFycmF5QnVmZmVyKCkpXG4pO1xuXG5jb25zdCB0ZXN0ID0gKGZuLCAuLi5hcmdzKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuICEhZm4oLi4uYXJncyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5jb25zdCBzdXBwb3J0c1JlcXVlc3RTdHJlYW0gPSBpc1JlYWRhYmxlU3RyZWFtU3VwcG9ydGVkICYmIHRlc3QoKCkgPT4ge1xuICBsZXQgZHVwbGV4QWNjZXNzZWQgPSBmYWxzZTtcblxuICBjb25zdCBoYXNDb250ZW50VHlwZSA9IG5ldyBSZXF1ZXN0KHBsYXRmb3JtLm9yaWdpbiwge1xuICAgIGJvZHk6IG5ldyBSZWFkYWJsZVN0cmVhbSgpLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGdldCBkdXBsZXgoKSB7XG4gICAgICBkdXBsZXhBY2Nlc3NlZCA9IHRydWU7XG4gICAgICByZXR1cm4gJ2hhbGYnO1xuICAgIH0sXG4gIH0pLmhlYWRlcnMuaGFzKCdDb250ZW50LVR5cGUnKTtcblxuICByZXR1cm4gZHVwbGV4QWNjZXNzZWQgJiYgIWhhc0NvbnRlbnRUeXBlO1xufSk7XG5cbmNvbnN0IERFRkFVTFRfQ0hVTktfU0laRSA9IDY0ICogMTAyNDtcblxuY29uc3Qgc3VwcG9ydHNSZXNwb25zZVN0cmVhbSA9IGlzUmVhZGFibGVTdHJlYW1TdXBwb3J0ZWQgJiZcbiAgdGVzdCgoKSA9PiB1dGlscy5pc1JlYWRhYmxlU3RyZWFtKG5ldyBSZXNwb25zZSgnJykuYm9keSkpO1xuXG5cbmNvbnN0IHJlc29sdmVycyA9IHtcbiAgc3RyZWFtOiBzdXBwb3J0c1Jlc3BvbnNlU3RyZWFtICYmICgocmVzKSA9PiByZXMuYm9keSlcbn07XG5cbmlzRmV0Y2hTdXBwb3J0ZWQgJiYgKCgocmVzKSA9PiB7XG4gIFsndGV4dCcsICdhcnJheUJ1ZmZlcicsICdibG9iJywgJ2Zvcm1EYXRhJywgJ3N0cmVhbSddLmZvckVhY2godHlwZSA9PiB7XG4gICAgIXJlc29sdmVyc1t0eXBlXSAmJiAocmVzb2x2ZXJzW3R5cGVdID0gdXRpbHMuaXNGdW5jdGlvbihyZXNbdHlwZV0pID8gKHJlcykgPT4gcmVzW3R5cGVdKCkgOlxuICAgICAgKF8sIGNvbmZpZykgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcihgUmVzcG9uc2UgdHlwZSAnJHt0eXBlfScgaXMgbm90IHN1cHBvcnRlZGAsIEF4aW9zRXJyb3IuRVJSX05PVF9TVVBQT1JULCBjb25maWcpO1xuICAgICAgfSlcbiAgfSk7XG59KShuZXcgUmVzcG9uc2UpKTtcblxuY29uc3QgZ2V0Qm9keUxlbmd0aCA9IGFzeW5jIChib2R5KSA9PiB7XG4gIGlmIChib2R5ID09IG51bGwpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGlmKHV0aWxzLmlzQmxvYihib2R5KSkge1xuICAgIHJldHVybiBib2R5LnNpemU7XG4gIH1cblxuICBpZih1dGlscy5pc1NwZWNDb21wbGlhbnRGb3JtKGJvZHkpKSB7XG4gICAgY29uc3QgX3JlcXVlc3QgPSBuZXcgUmVxdWVzdChwbGF0Zm9ybS5vcmlnaW4sIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keSxcbiAgICB9KTtcbiAgICByZXR1cm4gKGF3YWl0IF9yZXF1ZXN0LmFycmF5QnVmZmVyKCkpLmJ5dGVMZW5ndGg7XG4gIH1cblxuICBpZih1dGlscy5pc0FycmF5QnVmZmVyVmlldyhib2R5KSB8fCB1dGlscy5pc0FycmF5QnVmZmVyKGJvZHkpKSB7XG4gICAgcmV0dXJuIGJvZHkuYnl0ZUxlbmd0aDtcbiAgfVxuXG4gIGlmKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGJvZHkpKSB7XG4gICAgYm9keSA9IGJvZHkgKyAnJztcbiAgfVxuXG4gIGlmKHV0aWxzLmlzU3RyaW5nKGJvZHkpKSB7XG4gICAgcmV0dXJuIChhd2FpdCBlbmNvZGVUZXh0KGJvZHkpKS5ieXRlTGVuZ3RoO1xuICB9XG59XG5cbmNvbnN0IHJlc29sdmVCb2R5TGVuZ3RoID0gYXN5bmMgKGhlYWRlcnMsIGJvZHkpID0+IHtcbiAgY29uc3QgbGVuZ3RoID0gdXRpbHMudG9GaW5pdGVOdW1iZXIoaGVhZGVycy5nZXRDb250ZW50TGVuZ3RoKCkpO1xuXG4gIHJldHVybiBsZW5ndGggPT0gbnVsbCA/IGdldEJvZHlMZW5ndGgoYm9keSkgOiBsZW5ndGg7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGlzRmV0Y2hTdXBwb3J0ZWQgJiYgKGFzeW5jIChjb25maWcpID0+IHtcbiAgbGV0IHtcbiAgICB1cmwsXG4gICAgbWV0aG9kLFxuICAgIGRhdGEsXG4gICAgc2lnbmFsLFxuICAgIGNhbmNlbFRva2VuLFxuICAgIHRpbWVvdXQsXG4gICAgb25Eb3dubG9hZFByb2dyZXNzLFxuICAgIG9uVXBsb2FkUHJvZ3Jlc3MsXG4gICAgcmVzcG9uc2VUeXBlLFxuICAgIGhlYWRlcnMsXG4gICAgd2l0aENyZWRlbnRpYWxzID0gJ3NhbWUtb3JpZ2luJyxcbiAgICBmZXRjaE9wdGlvbnNcbiAgfSA9IHJlc29sdmVDb25maWcoY29uZmlnKTtcblxuICByZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGUgPyAocmVzcG9uc2VUeXBlICsgJycpLnRvTG93ZXJDYXNlKCkgOiAndGV4dCc7XG5cbiAgbGV0IGNvbXBvc2VkU2lnbmFsID0gY29tcG9zZVNpZ25hbHMoW3NpZ25hbCwgY2FuY2VsVG9rZW4gJiYgY2FuY2VsVG9rZW4udG9BYm9ydFNpZ25hbCgpXSwgdGltZW91dCk7XG5cbiAgbGV0IHJlcXVlc3Q7XG5cbiAgY29uc3QgdW5zdWJzY3JpYmUgPSBjb21wb3NlZFNpZ25hbCAmJiBjb21wb3NlZFNpZ25hbC51bnN1YnNjcmliZSAmJiAoKCkgPT4ge1xuICAgICAgY29tcG9zZWRTaWduYWwudW5zdWJzY3JpYmUoKTtcbiAgfSk7XG5cbiAgbGV0IHJlcXVlc3RDb250ZW50TGVuZ3RoO1xuXG4gIHRyeSB7XG4gICAgaWYgKFxuICAgICAgb25VcGxvYWRQcm9ncmVzcyAmJiBzdXBwb3J0c1JlcXVlc3RTdHJlYW0gJiYgbWV0aG9kICE9PSAnZ2V0JyAmJiBtZXRob2QgIT09ICdoZWFkJyAmJlxuICAgICAgKHJlcXVlc3RDb250ZW50TGVuZ3RoID0gYXdhaXQgcmVzb2x2ZUJvZHlMZW5ndGgoaGVhZGVycywgZGF0YSkpICE9PSAwXG4gICAgKSB7XG4gICAgICBsZXQgX3JlcXVlc3QgPSBuZXcgUmVxdWVzdCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGRhdGEsXG4gICAgICAgIGR1cGxleDogXCJoYWxmXCJcbiAgICAgIH0pO1xuXG4gICAgICBsZXQgY29udGVudFR5cGVIZWFkZXI7XG5cbiAgICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpICYmIChjb250ZW50VHlwZUhlYWRlciA9IF9yZXF1ZXN0LmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkpIHtcbiAgICAgICAgaGVhZGVycy5zZXRDb250ZW50VHlwZShjb250ZW50VHlwZUhlYWRlcilcbiAgICAgIH1cblxuICAgICAgaWYgKF9yZXF1ZXN0LmJvZHkpIHtcbiAgICAgICAgY29uc3QgW29uUHJvZ3Jlc3MsIGZsdXNoXSA9IHByb2dyZXNzRXZlbnREZWNvcmF0b3IoXG4gICAgICAgICAgcmVxdWVzdENvbnRlbnRMZW5ndGgsXG4gICAgICAgICAgcHJvZ3Jlc3NFdmVudFJlZHVjZXIoYXN5bmNEZWNvcmF0b3Iob25VcGxvYWRQcm9ncmVzcykpXG4gICAgICAgICk7XG5cbiAgICAgICAgZGF0YSA9IHRyYWNrU3RyZWFtKF9yZXF1ZXN0LmJvZHksIERFRkFVTFRfQ0hVTktfU0laRSwgb25Qcm9ncmVzcywgZmx1c2gpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdXRpbHMuaXNTdHJpbmcod2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgd2l0aENyZWRlbnRpYWxzID0gd2l0aENyZWRlbnRpYWxzID8gJ2luY2x1ZGUnIDogJ29taXQnO1xuICAgIH1cblxuICAgIC8vIENsb3VkZmxhcmUgV29ya2VycyB0aHJvd3Mgd2hlbiBjcmVkZW50aWFscyBhcmUgZGVmaW5lZFxuICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY2xvdWRmbGFyZS93b3JrZXJkL2lzc3Vlcy85MDJcbiAgICBjb25zdCBpc0NyZWRlbnRpYWxzU3VwcG9ydGVkID0gXCJjcmVkZW50aWFsc1wiIGluIFJlcXVlc3QucHJvdG90eXBlO1xuICAgIHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh1cmwsIHtcbiAgICAgIC4uLmZldGNoT3B0aW9ucyxcbiAgICAgIHNpZ25hbDogY29tcG9zZWRTaWduYWwsXG4gICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLFxuICAgICAgaGVhZGVyczogaGVhZGVycy5ub3JtYWxpemUoKS50b0pTT04oKSxcbiAgICAgIGJvZHk6IGRhdGEsXG4gICAgICBkdXBsZXg6IFwiaGFsZlwiLFxuICAgICAgY3JlZGVudGlhbHM6IGlzQ3JlZGVudGlhbHNTdXBwb3J0ZWQgPyB3aXRoQ3JlZGVudGlhbHMgOiB1bmRlZmluZWRcbiAgICB9KTtcblxuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlcXVlc3QsIGZldGNoT3B0aW9ucyk7XG5cbiAgICBjb25zdCBpc1N0cmVhbVJlc3BvbnNlID0gc3VwcG9ydHNSZXNwb25zZVN0cmVhbSAmJiAocmVzcG9uc2VUeXBlID09PSAnc3RyZWFtJyB8fCByZXNwb25zZVR5cGUgPT09ICdyZXNwb25zZScpO1xuXG4gICAgaWYgKHN1cHBvcnRzUmVzcG9uc2VTdHJlYW0gJiYgKG9uRG93bmxvYWRQcm9ncmVzcyB8fCAoaXNTdHJlYW1SZXNwb25zZSAmJiB1bnN1YnNjcmliZSkpKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0ge307XG5cbiAgICAgIFsnc3RhdHVzJywgJ3N0YXR1c1RleHQnLCAnaGVhZGVycyddLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICAgIG9wdGlvbnNbcHJvcF0gPSByZXNwb25zZVtwcm9wXTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZUNvbnRlbnRMZW5ndGggPSB1dGlscy50b0Zpbml0ZU51bWJlcihyZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC1sZW5ndGgnKSk7XG5cbiAgICAgIGNvbnN0IFtvblByb2dyZXNzLCBmbHVzaF0gPSBvbkRvd25sb2FkUHJvZ3Jlc3MgJiYgcHJvZ3Jlc3NFdmVudERlY29yYXRvcihcbiAgICAgICAgcmVzcG9uc2VDb250ZW50TGVuZ3RoLFxuICAgICAgICBwcm9ncmVzc0V2ZW50UmVkdWNlcihhc3luY0RlY29yYXRvcihvbkRvd25sb2FkUHJvZ3Jlc3MpLCB0cnVlKVxuICAgICAgKSB8fCBbXTtcblxuICAgICAgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoXG4gICAgICAgIHRyYWNrU3RyZWFtKHJlc3BvbnNlLmJvZHksIERFRkFVTFRfQ0hVTktfU0laRSwgb25Qcm9ncmVzcywgKCkgPT4ge1xuICAgICAgICAgIGZsdXNoICYmIGZsdXNoKCk7XG4gICAgICAgICAgdW5zdWJzY3JpYmUgJiYgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfSksXG4gICAgICAgIG9wdGlvbnNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlIHx8ICd0ZXh0JztcblxuICAgIGxldCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNvbHZlcnNbdXRpbHMuZmluZEtleShyZXNvbHZlcnMsIHJlc3BvbnNlVHlwZSkgfHwgJ3RleHQnXShyZXNwb25zZSwgY29uZmlnKTtcblxuICAgICFpc1N0cmVhbVJlc3BvbnNlICYmIHVuc3Vic2NyaWJlICYmIHVuc3Vic2NyaWJlKCk7XG5cbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwge1xuICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgIGhlYWRlcnM6IEF4aW9zSGVhZGVycy5mcm9tKHJlc3BvbnNlLmhlYWRlcnMpLFxuICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICByZXF1ZXN0XG4gICAgICB9KVxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHVuc3Vic2NyaWJlICYmIHVuc3Vic2NyaWJlKCk7XG5cbiAgICBpZiAoZXJyICYmIGVyci5uYW1lID09PSAnVHlwZUVycm9yJyAmJiAvTG9hZCBmYWlsZWR8ZmV0Y2gvaS50ZXN0KGVyci5tZXNzYWdlKSkge1xuICAgICAgdGhyb3cgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IEF4aW9zRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBBeGlvc0Vycm9yLkVSUl9ORVRXT1JLLCBjb25maWcsIHJlcXVlc3QpLFxuICAgICAgICB7XG4gICAgICAgICAgY2F1c2U6IGVyci5jYXVzZSB8fCBlcnJcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIHRocm93IEF4aW9zRXJyb3IuZnJvbShlcnIsIGVyciAmJiBlcnIuY29kZSwgY29uZmlnLCByZXF1ZXN0KTtcbiAgfVxufSk7XG5cblxuIiwgImltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgaHR0cEFkYXB0ZXIgZnJvbSAnLi9odHRwLmpzJztcbmltcG9ydCB4aHJBZGFwdGVyIGZyb20gJy4veGhyLmpzJztcbmltcG9ydCBmZXRjaEFkYXB0ZXIgZnJvbSAnLi9mZXRjaC5qcyc7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tIFwiLi4vY29yZS9BeGlvc0Vycm9yLmpzXCI7XG5cbmNvbnN0IGtub3duQWRhcHRlcnMgPSB7XG4gIGh0dHA6IGh0dHBBZGFwdGVyLFxuICB4aHI6IHhockFkYXB0ZXIsXG4gIGZldGNoOiBmZXRjaEFkYXB0ZXJcbn1cblxudXRpbHMuZm9yRWFjaChrbm93bkFkYXB0ZXJzLCAoZm4sIHZhbHVlKSA9PiB7XG4gIGlmIChmbikge1xuICAgIHRyeSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sICduYW1lJywge3ZhbHVlfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgJ2FkYXB0ZXJOYW1lJywge3ZhbHVlfSk7XG4gIH1cbn0pO1xuXG5jb25zdCByZW5kZXJSZWFzb24gPSAocmVhc29uKSA9PiBgLSAke3JlYXNvbn1gO1xuXG5jb25zdCBpc1Jlc29sdmVkSGFuZGxlID0gKGFkYXB0ZXIpID0+IHV0aWxzLmlzRnVuY3Rpb24oYWRhcHRlcikgfHwgYWRhcHRlciA9PT0gbnVsbCB8fCBhZGFwdGVyID09PSBmYWxzZTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBnZXRBZGFwdGVyOiAoYWRhcHRlcnMpID0+IHtcbiAgICBhZGFwdGVycyA9IHV0aWxzLmlzQXJyYXkoYWRhcHRlcnMpID8gYWRhcHRlcnMgOiBbYWRhcHRlcnNdO1xuXG4gICAgY29uc3Qge2xlbmd0aH0gPSBhZGFwdGVycztcbiAgICBsZXQgbmFtZU9yQWRhcHRlcjtcbiAgICBsZXQgYWRhcHRlcjtcblxuICAgIGNvbnN0IHJlamVjdGVkUmVhc29ucyA9IHt9O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbmFtZU9yQWRhcHRlciA9IGFkYXB0ZXJzW2ldO1xuICAgICAgbGV0IGlkO1xuXG4gICAgICBhZGFwdGVyID0gbmFtZU9yQWRhcHRlcjtcblxuICAgICAgaWYgKCFpc1Jlc29sdmVkSGFuZGxlKG5hbWVPckFkYXB0ZXIpKSB7XG4gICAgICAgIGFkYXB0ZXIgPSBrbm93bkFkYXB0ZXJzWyhpZCA9IFN0cmluZyhuYW1lT3JBZGFwdGVyKSkudG9Mb3dlckNhc2UoKV07XG5cbiAgICAgICAgaWYgKGFkYXB0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKGBVbmtub3duIGFkYXB0ZXIgJyR7aWR9J2ApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChhZGFwdGVyKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICByZWplY3RlZFJlYXNvbnNbaWQgfHwgJyMnICsgaV0gPSBhZGFwdGVyO1xuICAgIH1cblxuICAgIGlmICghYWRhcHRlcikge1xuXG4gICAgICBjb25zdCByZWFzb25zID0gT2JqZWN0LmVudHJpZXMocmVqZWN0ZWRSZWFzb25zKVxuICAgICAgICAubWFwKChbaWQsIHN0YXRlXSkgPT4gYGFkYXB0ZXIgJHtpZH0gYCArXG4gICAgICAgICAgKHN0YXRlID09PSBmYWxzZSA/ICdpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBlbnZpcm9ubWVudCcgOiAnaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgYnVpbGQnKVxuICAgICAgICApO1xuXG4gICAgICBsZXQgcyA9IGxlbmd0aCA/XG4gICAgICAgIChyZWFzb25zLmxlbmd0aCA+IDEgPyAnc2luY2UgOlxcbicgKyByZWFzb25zLm1hcChyZW5kZXJSZWFzb24pLmpvaW4oJ1xcbicpIDogJyAnICsgcmVuZGVyUmVhc29uKHJlYXNvbnNbMF0pKSA6XG4gICAgICAgICdhcyBubyBhZGFwdGVyIHNwZWNpZmllZCc7XG5cbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKFxuICAgICAgICBgVGhlcmUgaXMgbm8gc3VpdGFibGUgYWRhcHRlciB0byBkaXNwYXRjaCB0aGUgcmVxdWVzdCBgICsgcyxcbiAgICAgICAgJ0VSUl9OT1RfU1VQUE9SVCdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkYXB0ZXI7XG4gIH0sXG4gIGFkYXB0ZXJzOiBrbm93bkFkYXB0ZXJzXG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHJhbnNmb3JtRGF0YSBmcm9tICcuL3RyYW5zZm9ybURhdGEuanMnO1xuaW1wb3J0IGlzQ2FuY2VsIGZyb20gJy4uL2NhbmNlbC9pc0NhbmNlbC5qcyc7XG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi4vZGVmYXVsdHMvaW5kZXguanMnO1xuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tICcuLi9jb3JlL0F4aW9zSGVhZGVycy5qcyc7XG5pbXBvcnQgYWRhcHRlcnMgZnJvbSBcIi4uL2FkYXB0ZXJzL2FkYXB0ZXJzLmpzXCI7XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGVkRXJyb3JgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7XG4gIH1cblxuICBpZiAoY29uZmlnLnNpZ25hbCAmJiBjb25maWcuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICB0aHJvdyBuZXcgQ2FuY2VsZWRFcnJvcihudWxsLCBjb25maWcpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykge1xuICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgY29uZmlnLmhlYWRlcnMgPSBBeGlvc0hlYWRlcnMuZnJvbShjb25maWcuaGVhZGVycyk7XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICBjb25maWcsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICBpZiAoWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLmluZGV4T2YoY29uZmlnLm1ldGhvZCkgIT09IC0xKSB7XG4gICAgY29uZmlnLmhlYWRlcnMuc2V0Q29udGVudFR5cGUoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsIGZhbHNlKTtcbiAgfVxuXG4gIGNvbnN0IGFkYXB0ZXIgPSBhZGFwdGVycy5nZXRBZGFwdGVyKGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXIpO1xuXG4gIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7XG4gICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICByZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YS5jYWxsKFxuICAgICAgY29uZmlnLFxuICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlLFxuICAgICAgcmVzcG9uc2VcbiAgICApO1xuXG4gICAgcmVzcG9uc2UuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKHJlc3BvbnNlLmhlYWRlcnMpO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LCBmdW5jdGlvbiBvbkFkYXB0ZXJSZWplY3Rpb24ocmVhc29uKSB7XG4gICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7XG4gICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkge1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZVxuICAgICAgICApO1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgfSk7XG59XG4iLCAiZXhwb3J0IGNvbnN0IFZFUlNJT04gPSBcIjEuMTAuMFwiOyIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7VkVSU0lPTn0gZnJvbSAnLi4vZW52L2RhdGEuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcblxuY29uc3QgdmFsaWRhdG9ycyA9IHt9O1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuWydvYmplY3QnLCAnYm9vbGVhbicsICdudW1iZXInLCAnZnVuY3Rpb24nLCAnc3RyaW5nJywgJ3N5bWJvbCddLmZvckVhY2goKHR5cGUsIGkpID0+IHtcbiAgdmFsaWRhdG9yc1t0eXBlXSA9IGZ1bmN0aW9uIHZhbGlkYXRvcih0aGluZykge1xuICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09IHR5cGUgfHwgJ2EnICsgKGkgPCAxID8gJ24gJyA6ICcgJykgKyB0eXBlO1xuICB9O1xufSk7XG5cbmNvbnN0IGRlcHJlY2F0ZWRXYXJuaW5ncyA9IHt9O1xuXG4vKipcbiAqIFRyYW5zaXRpb25hbCBvcHRpb24gdmFsaWRhdG9yXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbnxib29sZWFuP30gdmFsaWRhdG9yIC0gc2V0IHRvIGZhbHNlIGlmIHRoZSB0cmFuc2l0aW9uYWwgb3B0aW9uIGhhcyBiZWVuIHJlbW92ZWRcbiAqIEBwYXJhbSB7c3RyaW5nP30gdmVyc2lvbiAtIGRlcHJlY2F0ZWQgdmVyc2lvbiAvIHJlbW92ZWQgc2luY2UgdmVyc2lvblxuICogQHBhcmFtIHtzdHJpbmc/fSBtZXNzYWdlIC0gc29tZSBtZXNzYWdlIHdpdGggYWRkaXRpb25hbCBpbmZvXG4gKlxuICogQHJldHVybnMge2Z1bmN0aW9ufVxuICovXG52YWxpZGF0b3JzLnRyYW5zaXRpb25hbCA9IGZ1bmN0aW9uIHRyYW5zaXRpb25hbCh2YWxpZGF0b3IsIHZlcnNpb24sIG1lc3NhZ2UpIHtcbiAgZnVuY3Rpb24gZm9ybWF0TWVzc2FnZShvcHQsIGRlc2MpIHtcbiAgICByZXR1cm4gJ1tBeGlvcyB2JyArIFZFUlNJT04gKyAnXSBUcmFuc2l0aW9uYWwgb3B0aW9uIFxcJycgKyBvcHQgKyAnXFwnJyArIGRlc2MgKyAobWVzc2FnZSA/ICcuICcgKyBtZXNzYWdlIDogJycpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgcmV0dXJuICh2YWx1ZSwgb3B0LCBvcHRzKSA9PiB7XG4gICAgaWYgKHZhbGlkYXRvciA9PT0gZmFsc2UpIHtcbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKFxuICAgICAgICBmb3JtYXRNZXNzYWdlKG9wdCwgJyBoYXMgYmVlbiByZW1vdmVkJyArICh2ZXJzaW9uID8gJyBpbiAnICsgdmVyc2lvbiA6ICcnKSksXG4gICAgICAgIEF4aW9zRXJyb3IuRVJSX0RFUFJFQ0FURURcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHZlcnNpb24gJiYgIWRlcHJlY2F0ZWRXYXJuaW5nc1tvcHRdKSB7XG4gICAgICBkZXByZWNhdGVkV2FybmluZ3Nbb3B0XSA9IHRydWU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBmb3JtYXRNZXNzYWdlKFxuICAgICAgICAgIG9wdCxcbiAgICAgICAgICAnIGhhcyBiZWVuIGRlcHJlY2F0ZWQgc2luY2UgdicgKyB2ZXJzaW9uICsgJyBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZSdcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWRhdG9yID8gdmFsaWRhdG9yKHZhbHVlLCBvcHQsIG9wdHMpIDogdHJ1ZTtcbiAgfTtcbn07XG5cbnZhbGlkYXRvcnMuc3BlbGxpbmcgPSBmdW5jdGlvbiBzcGVsbGluZyhjb3JyZWN0U3BlbGxpbmcpIHtcbiAgcmV0dXJuICh2YWx1ZSwgb3B0KSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLndhcm4oYCR7b3B0fSBpcyBsaWtlbHkgYSBtaXNzcGVsbGluZyBvZiAke2NvcnJlY3RTcGVsbGluZ31gKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuLyoqXG4gKiBBc3NlcnQgb2JqZWN0J3MgcHJvcGVydGllcyB0eXBlXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7b2JqZWN0fSBzY2hlbWFcbiAqIEBwYXJhbSB7Ym9vbGVhbj99IGFsbG93VW5rbm93blxuICpcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0T3B0aW9ucyhvcHRpb25zLCBzY2hlbWEsIGFsbG93VW5rbm93bikge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoJ29wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QnLCBBeGlvc0Vycm9yLkVSUl9CQURfT1BUSU9OX1ZBTFVFKTtcbiAgfVxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gIGxldCBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgY29uc3Qgb3B0ID0ga2V5c1tpXTtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBzY2hlbWFbb3B0XTtcbiAgICBpZiAodmFsaWRhdG9yKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG9wdGlvbnNbb3B0XTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsaWRhdG9yKHZhbHVlLCBvcHQsIG9wdGlvbnMpO1xuICAgICAgaWYgKHJlc3VsdCAhPT0gdHJ1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcignb3B0aW9uICcgKyBvcHQgKyAnIG11c3QgYmUgJyArIHJlc3VsdCwgQXhpb3NFcnJvci5FUlJfQkFEX09QVElPTl9WQUxVRSk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGFsbG93VW5rbm93biAhPT0gdHJ1ZSkge1xuICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoJ1Vua25vd24gb3B0aW9uICcgKyBvcHQsIEF4aW9zRXJyb3IuRVJSX0JBRF9PUFRJT04pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGFzc2VydE9wdGlvbnMsXG4gIHZhbGlkYXRvcnNcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5pbXBvcnQgYnVpbGRVUkwgZnJvbSAnLi4vaGVscGVycy9idWlsZFVSTC5qcyc7XG5pbXBvcnQgSW50ZXJjZXB0b3JNYW5hZ2VyIGZyb20gJy4vSW50ZXJjZXB0b3JNYW5hZ2VyLmpzJztcbmltcG9ydCBkaXNwYXRjaFJlcXVlc3QgZnJvbSAnLi9kaXNwYXRjaFJlcXVlc3QuanMnO1xuaW1wb3J0IG1lcmdlQ29uZmlnIGZyb20gJy4vbWVyZ2VDb25maWcuanMnO1xuaW1wb3J0IGJ1aWxkRnVsbFBhdGggZnJvbSAnLi9idWlsZEZ1bGxQYXRoLmpzJztcbmltcG9ydCB2YWxpZGF0b3IgZnJvbSAnLi4vaGVscGVycy92YWxpZGF0b3IuanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tICcuL0F4aW9zSGVhZGVycy5qcyc7XG5cbmNvbnN0IHZhbGlkYXRvcnMgPSB2YWxpZGF0b3IudmFsaWRhdG9ycztcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuY2xhc3MgQXhpb3Mge1xuICBjb25zdHJ1Y3RvcihpbnN0YW5jZUNvbmZpZykge1xuICAgIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZyB8fCB7fTtcbiAgICB0aGlzLmludGVyY2VwdG9ycyA9IHtcbiAgICAgIHJlcXVlc3Q6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKSxcbiAgICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGNvbmZpZ09yVXJsIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcbiAgICogQHBhcmFtIHs/T2JqZWN0fSBjb25maWdcbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICAgKi9cbiAgYXN5bmMgcmVxdWVzdChjb25maWdPclVybCwgY29uZmlnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZXF1ZXN0KGNvbmZpZ09yVXJsLCBjb25maWcpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGxldCBkdW1teSA9IHt9O1xuXG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID8gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZHVtbXkpIDogKGR1bW15ID0gbmV3IEVycm9yKCkpO1xuXG4gICAgICAgIC8vIHNsaWNlIG9mZiB0aGUgRXJyb3I6IC4uLiBsaW5lXG4gICAgICAgIGNvbnN0IHN0YWNrID0gZHVtbXkuc3RhY2sgPyBkdW1teS5zdGFjay5yZXBsYWNlKC9eLitcXG4vLCAnJykgOiAnJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIWVyci5zdGFjaykge1xuICAgICAgICAgICAgZXJyLnN0YWNrID0gc3RhY2s7XG4gICAgICAgICAgICAvLyBtYXRjaCB3aXRob3V0IHRoZSAyIHRvcCBzdGFjayBsaW5lc1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3RhY2sgJiYgIVN0cmluZyhlcnIuc3RhY2spLmVuZHNXaXRoKHN0YWNrLnJlcGxhY2UoL14uK1xcbi4rXFxuLywgJycpKSkge1xuICAgICAgICAgICAgZXJyLnN0YWNrICs9ICdcXG4nICsgc3RhY2tcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpZ25vcmUgdGhlIGNhc2Ugd2hlcmUgXCJzdGFja1wiIGlzIGFuIHVuLXdyaXRhYmxlIHByb3BlcnR5XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIF9yZXF1ZXN0KGNvbmZpZ09yVXJsLCBjb25maWcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJXG4gICAgaWYgKHR5cGVvZiBjb25maWdPclVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICAgIGNvbmZpZy51cmwgPSBjb25maWdPclVybDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnID0gY29uZmlnT3JVcmwgfHwge307XG4gICAgfVxuXG4gICAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTtcblxuICAgIGNvbnN0IHt0cmFuc2l0aW9uYWwsIHBhcmFtc1NlcmlhbGl6ZXIsIGhlYWRlcnN9ID0gY29uZmlnO1xuXG4gICAgaWYgKHRyYW5zaXRpb25hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWxpZGF0b3IuYXNzZXJ0T3B0aW9ucyh0cmFuc2l0aW9uYWwsIHtcbiAgICAgICAgc2lsZW50SlNPTlBhcnNpbmc6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbiksXG4gICAgICAgIGZvcmNlZEpTT05QYXJzaW5nOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pLFxuICAgICAgICBjbGFyaWZ5VGltZW91dEVycm9yOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pXG4gICAgICB9LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIgIT0gbnVsbCkge1xuICAgICAgaWYgKHV0aWxzLmlzRnVuY3Rpb24ocGFyYW1zU2VyaWFsaXplcikpIHtcbiAgICAgICAgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIgPSB7XG4gICAgICAgICAgc2VyaWFsaXplOiBwYXJhbXNTZXJpYWxpemVyXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbGlkYXRvci5hc3NlcnRPcHRpb25zKHBhcmFtc1NlcmlhbGl6ZXIsIHtcbiAgICAgICAgICBlbmNvZGU6IHZhbGlkYXRvcnMuZnVuY3Rpb24sXG4gICAgICAgICAgc2VyaWFsaXplOiB2YWxpZGF0b3JzLmZ1bmN0aW9uXG4gICAgICAgIH0sIHRydWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCBjb25maWcuYWxsb3dBYnNvbHV0ZVVybHNcbiAgICBpZiAoY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9IGVsc2UgaWYgKHRoaXMuZGVmYXVsdHMuYWxsb3dBYnNvbHV0ZVVybHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzID0gdGhpcy5kZWZhdWx0cy5hbGxvd0Fic29sdXRlVXJscztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YWxpZGF0b3IuYXNzZXJ0T3B0aW9ucyhjb25maWcsIHtcbiAgICAgIGJhc2VVcmw6IHZhbGlkYXRvcnMuc3BlbGxpbmcoJ2Jhc2VVUkwnKSxcbiAgICAgIHdpdGhYc3JmVG9rZW46IHZhbGlkYXRvcnMuc3BlbGxpbmcoJ3dpdGhYU1JGVG9rZW4nKVxuICAgIH0sIHRydWUpO1xuXG4gICAgLy8gU2V0IGNvbmZpZy5tZXRob2RcbiAgICBjb25maWcubWV0aG9kID0gKGNvbmZpZy5tZXRob2QgfHwgdGhpcy5kZWZhdWx0cy5tZXRob2QgfHwgJ2dldCcpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgICBsZXQgY29udGV4dEhlYWRlcnMgPSBoZWFkZXJzICYmIHV0aWxzLm1lcmdlKFxuICAgICAgaGVhZGVycy5jb21tb24sXG4gICAgICBoZWFkZXJzW2NvbmZpZy5tZXRob2RdXG4gICAgKTtcblxuICAgIGhlYWRlcnMgJiYgdXRpbHMuZm9yRWFjaChcbiAgICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgICAgKG1ldGhvZCkgPT4ge1xuICAgICAgICBkZWxldGUgaGVhZGVyc1ttZXRob2RdO1xuICAgICAgfVxuICAgICk7XG5cbiAgICBjb25maWcuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5jb25jYXQoY29udGV4dEhlYWRlcnMsIGhlYWRlcnMpO1xuXG4gICAgLy8gZmlsdGVyIG91dCBza2lwcGVkIGludGVyY2VwdG9yc1xuICAgIGNvbnN0IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluID0gW107XG4gICAgbGV0IHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHRydWU7XG4gICAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgICBpZiAodHlwZW9mIGludGVyY2VwdG9yLnJ1bldoZW4gPT09ICdmdW5jdGlvbicgJiYgaW50ZXJjZXB0b3IucnVuV2hlbihjb25maWcpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyAmJiBpbnRlcmNlcHRvci5zeW5jaHJvbm91cztcblxuICAgICAgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbiA9IFtdO1xuICAgIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgICByZXNwb25zZUludGVyY2VwdG9yQ2hhaW4ucHVzaChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgICB9KTtcblxuICAgIGxldCBwcm9taXNlO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgbGVuO1xuXG4gICAgaWYgKCFzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMpIHtcbiAgICAgIGNvbnN0IGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdC5iaW5kKHRoaXMpLCB1bmRlZmluZWRdO1xuICAgICAgY2hhaW4udW5zaGlmdC5hcHBseShjaGFpbiwgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4pO1xuICAgICAgY2hhaW4ucHVzaC5hcHBseShjaGFpbiwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluKTtcbiAgICAgIGxlbiA9IGNoYWluLmxlbmd0aDtcblxuICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb25maWcpO1xuXG4gICAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluW2krK10sIGNoYWluW2krK10pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICBsZW4gPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi5sZW5ndGg7XG5cbiAgICBsZXQgbmV3Q29uZmlnID0gY29uZmlnO1xuXG4gICAgaSA9IDA7XG5cbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgY29uc3Qgb25GdWxmaWxsZWQgPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbltpKytdO1xuICAgICAgY29uc3Qgb25SZWplY3RlZCA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluW2krK107XG4gICAgICB0cnkge1xuICAgICAgICBuZXdDb25maWcgPSBvbkZ1bGZpbGxlZChuZXdDb25maWcpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgb25SZWplY3RlZC5jYWxsKHRoaXMsIGVycm9yKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHByb21pc2UgPSBkaXNwYXRjaFJlcXVlc3QuY2FsbCh0aGlzLCBuZXdDb25maWcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cblxuICAgIGkgPSAwO1xuICAgIGxlbiA9IHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbi5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihyZXNwb25zZUludGVyY2VwdG9yQ2hhaW5baSsrXSwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluW2krK10pO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgZ2V0VXJpKGNvbmZpZykge1xuICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7XG4gICAgY29uc3QgZnVsbFBhdGggPSBidWlsZEZ1bGxQYXRoKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsLCBjb25maWcuYWxsb3dBYnNvbHV0ZVVybHMpO1xuICAgIHJldHVybiBidWlsZFVSTChmdWxsUGF0aCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpO1xuICB9XG59XG5cbi8vIFByb3ZpZGUgYWxpYXNlcyBmb3Igc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kc1xudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdvcHRpb25zJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KG1lcmdlQ29uZmlnKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kLFxuICAgICAgdXJsLFxuICAgICAgZGF0YTogKGNvbmZpZyB8fCB7fSkuZGF0YVxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlSFRUUE1ldGhvZChpc0Zvcm0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaHR0cE1ldGhvZCh1cmwsIGRhdGEsIGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHtcbiAgICAgICAgbWV0aG9kLFxuICAgICAgICBoZWFkZXJzOiBpc0Zvcm0gPyB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJ1xuICAgICAgICB9IDoge30sXG4gICAgICAgIHVybCxcbiAgICAgICAgZGF0YVxuICAgICAgfSkpO1xuICAgIH07XG4gIH1cblxuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGdlbmVyYXRlSFRUUE1ldGhvZCgpO1xuXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2QgKyAnRm9ybSddID0gZ2VuZXJhdGVIVFRQTWV0aG9kKHRydWUpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEF4aW9zO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi9DYW5jZWxlZEVycm9yLmpzJztcblxuLyoqXG4gKiBBIGBDYW5jZWxUb2tlbmAgaXMgYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVxdWVzdCBjYW5jZWxsYXRpb24gb2YgYW4gb3BlcmF0aW9uLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Q2FuY2VsVG9rZW59XG4gKi9cbmNsYXNzIENhbmNlbFRva2VuIHtcbiAgY29uc3RydWN0b3IoZXhlY3V0b3IpIHtcbiAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgbGV0IHJlc29sdmVQcm9taXNlO1xuXG4gICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHRva2VuID0gdGhpcztcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgdGhpcy5wcm9taXNlLnRoZW4oY2FuY2VsID0+IHtcbiAgICAgIGlmICghdG9rZW4uX2xpc3RlbmVycykgcmV0dXJuO1xuXG4gICAgICBsZXQgaSA9IHRva2VuLl9saXN0ZW5lcnMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoaS0tID4gMCkge1xuICAgICAgICB0b2tlbi5fbGlzdGVuZXJzW2ldKGNhbmNlbCk7XG4gICAgICB9XG4gICAgICB0b2tlbi5fbGlzdGVuZXJzID0gbnVsbDtcbiAgICB9KTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgdGhpcy5wcm9taXNlLnRoZW4gPSBvbmZ1bGZpbGxlZCA9PiB7XG4gICAgICBsZXQgX3Jlc29sdmU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICB0b2tlbi5zdWJzY3JpYmUocmVzb2x2ZSk7XG4gICAgICAgIF9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgIH0pLnRoZW4ob25mdWxmaWxsZWQpO1xuXG4gICAgICBwcm9taXNlLmNhbmNlbCA9IGZ1bmN0aW9uIHJlamVjdCgpIHtcbiAgICAgICAgdG9rZW4udW5zdWJzY3JpYmUoX3Jlc29sdmUpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlLCBjb25maWcsIHJlcXVlc3QpIHtcbiAgICAgIGlmICh0b2tlbi5yZWFzb24pIHtcbiAgICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbGVkRXJyb3IobWVzc2FnZSwgY29uZmlnLCByZXF1ZXN0KTtcbiAgICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGEgYENhbmNlbGVkRXJyb3JgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gICAqL1xuICB0aHJvd0lmUmVxdWVzdGVkKCkge1xuICAgIGlmICh0aGlzLnJlYXNvbikge1xuICAgICAgdGhyb3cgdGhpcy5yZWFzb247XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byB0aGUgY2FuY2VsIHNpZ25hbFxuICAgKi9cblxuICBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICAgIGxpc3RlbmVyKHRoaXMucmVhc29uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xpc3RlbmVycyA9IFtsaXN0ZW5lcl07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVuc3Vic2NyaWJlIGZyb20gdGhlIGNhbmNlbCBzaWduYWxcbiAgICovXG5cbiAgdW5zdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICBpZiAoIXRoaXMuX2xpc3RlbmVycykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX2xpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH1cblxuICB0b0Fib3J0U2lnbmFsKCkge1xuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgICBjb25zdCBhYm9ydCA9IChlcnIpID0+IHtcbiAgICAgIGNvbnRyb2xsZXIuYWJvcnQoZXJyKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zdWJzY3JpYmUoYWJvcnQpO1xuXG4gICAgY29udHJvbGxlci5zaWduYWwudW5zdWJzY3JpYmUgPSAoKSA9PiB0aGlzLnVuc3Vic2NyaWJlKGFib3J0KTtcblxuICAgIHJldHVybiBjb250cm9sbGVyLnNpZ25hbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gICAqIGNhbmNlbHMgdGhlIGBDYW5jZWxUb2tlbmAuXG4gICAqL1xuICBzdGF0aWMgc291cmNlKCkge1xuICAgIGxldCBjYW5jZWw7XG4gICAgY29uc3QgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykge1xuICAgICAgY2FuY2VsID0gYztcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgdG9rZW4sXG4gICAgICBjYW5jZWxcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhbmNlbFRva2VuO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuICpcbiAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuXG4gKlxuICogIGBgYGpzXG4gKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fVxuICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuICogIGYuYXBwbHkobnVsbCwgYXJncyk7XG4gKiAgYGBgXG4gKlxuICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uXG4gKlxuICogIGBgYGpzXG4gKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG4gIH07XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBwYXlsb2FkIGlzIGFuIGVycm9yIHRocm93biBieSBBeGlvc1xuICpcbiAqIEBwYXJhbSB7Kn0gcGF5bG9hZCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBwYXlsb2FkIGlzIGFuIGVycm9yIHRocm93biBieSBBeGlvcywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQXhpb3NFcnJvcihwYXlsb2FkKSB7XG4gIHJldHVybiB1dGlscy5pc09iamVjdChwYXlsb2FkKSAmJiAocGF5bG9hZC5pc0F4aW9zRXJyb3IgPT09IHRydWUpO1xufVxuIiwgImNvbnN0IEh0dHBTdGF0dXNDb2RlID0ge1xuICBDb250aW51ZTogMTAwLFxuICBTd2l0Y2hpbmdQcm90b2NvbHM6IDEwMSxcbiAgUHJvY2Vzc2luZzogMTAyLFxuICBFYXJseUhpbnRzOiAxMDMsXG4gIE9rOiAyMDAsXG4gIENyZWF0ZWQ6IDIwMSxcbiAgQWNjZXB0ZWQ6IDIwMixcbiAgTm9uQXV0aG9yaXRhdGl2ZUluZm9ybWF0aW9uOiAyMDMsXG4gIE5vQ29udGVudDogMjA0LFxuICBSZXNldENvbnRlbnQ6IDIwNSxcbiAgUGFydGlhbENvbnRlbnQ6IDIwNixcbiAgTXVsdGlTdGF0dXM6IDIwNyxcbiAgQWxyZWFkeVJlcG9ydGVkOiAyMDgsXG4gIEltVXNlZDogMjI2LFxuICBNdWx0aXBsZUNob2ljZXM6IDMwMCxcbiAgTW92ZWRQZXJtYW5lbnRseTogMzAxLFxuICBGb3VuZDogMzAyLFxuICBTZWVPdGhlcjogMzAzLFxuICBOb3RNb2RpZmllZDogMzA0LFxuICBVc2VQcm94eTogMzA1LFxuICBVbnVzZWQ6IDMwNixcbiAgVGVtcG9yYXJ5UmVkaXJlY3Q6IDMwNyxcbiAgUGVybWFuZW50UmVkaXJlY3Q6IDMwOCxcbiAgQmFkUmVxdWVzdDogNDAwLFxuICBVbmF1dGhvcml6ZWQ6IDQwMSxcbiAgUGF5bWVudFJlcXVpcmVkOiA0MDIsXG4gIEZvcmJpZGRlbjogNDAzLFxuICBOb3RGb3VuZDogNDA0LFxuICBNZXRob2ROb3RBbGxvd2VkOiA0MDUsXG4gIE5vdEFjY2VwdGFibGU6IDQwNixcbiAgUHJveHlBdXRoZW50aWNhdGlvblJlcXVpcmVkOiA0MDcsXG4gIFJlcXVlc3RUaW1lb3V0OiA0MDgsXG4gIENvbmZsaWN0OiA0MDksXG4gIEdvbmU6IDQxMCxcbiAgTGVuZ3RoUmVxdWlyZWQ6IDQxMSxcbiAgUHJlY29uZGl0aW9uRmFpbGVkOiA0MTIsXG4gIFBheWxvYWRUb29MYXJnZTogNDEzLFxuICBVcmlUb29Mb25nOiA0MTQsXG4gIFVuc3VwcG9ydGVkTWVkaWFUeXBlOiA0MTUsXG4gIFJhbmdlTm90U2F0aXNmaWFibGU6IDQxNixcbiAgRXhwZWN0YXRpb25GYWlsZWQ6IDQxNyxcbiAgSW1BVGVhcG90OiA0MTgsXG4gIE1pc2RpcmVjdGVkUmVxdWVzdDogNDIxLFxuICBVbnByb2Nlc3NhYmxlRW50aXR5OiA0MjIsXG4gIExvY2tlZDogNDIzLFxuICBGYWlsZWREZXBlbmRlbmN5OiA0MjQsXG4gIFRvb0Vhcmx5OiA0MjUsXG4gIFVwZ3JhZGVSZXF1aXJlZDogNDI2LFxuICBQcmVjb25kaXRpb25SZXF1aXJlZDogNDI4LFxuICBUb29NYW55UmVxdWVzdHM6IDQyOSxcbiAgUmVxdWVzdEhlYWRlckZpZWxkc1Rvb0xhcmdlOiA0MzEsXG4gIFVuYXZhaWxhYmxlRm9yTGVnYWxSZWFzb25zOiA0NTEsXG4gIEludGVybmFsU2VydmVyRXJyb3I6IDUwMCxcbiAgTm90SW1wbGVtZW50ZWQ6IDUwMSxcbiAgQmFkR2F0ZXdheTogNTAyLFxuICBTZXJ2aWNlVW5hdmFpbGFibGU6IDUwMyxcbiAgR2F0ZXdheVRpbWVvdXQ6IDUwNCxcbiAgSHR0cFZlcnNpb25Ob3RTdXBwb3J0ZWQ6IDUwNSxcbiAgVmFyaWFudEFsc29OZWdvdGlhdGVzOiA1MDYsXG4gIEluc3VmZmljaWVudFN0b3JhZ2U6IDUwNyxcbiAgTG9vcERldGVjdGVkOiA1MDgsXG4gIE5vdEV4dGVuZGVkOiA1MTAsXG4gIE5ldHdvcmtBdXRoZW50aWNhdGlvblJlcXVpcmVkOiA1MTEsXG59O1xuXG5PYmplY3QuZW50cmllcyhIdHRwU3RhdHVzQ29kZSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gIEh0dHBTdGF0dXNDb2RlW3ZhbHVlXSA9IGtleTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBIdHRwU3RhdHVzQ29kZTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuL3V0aWxzLmpzJztcbmltcG9ydCBiaW5kIGZyb20gJy4vaGVscGVycy9iaW5kLmpzJztcbmltcG9ydCBBeGlvcyBmcm9tICcuL2NvcmUvQXhpb3MuanMnO1xuaW1wb3J0IG1lcmdlQ29uZmlnIGZyb20gJy4vY29yZS9tZXJnZUNvbmZpZy5qcyc7XG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi9kZWZhdWx0cy9pbmRleC5qcyc7XG5pbXBvcnQgZm9ybURhdGFUb0pTT04gZnJvbSAnLi9oZWxwZXJzL2Zvcm1EYXRhVG9KU09OLmpzJztcbmltcG9ydCBDYW5jZWxlZEVycm9yIGZyb20gJy4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IENhbmNlbFRva2VuIGZyb20gJy4vY2FuY2VsL0NhbmNlbFRva2VuLmpzJztcbmltcG9ydCBpc0NhbmNlbCBmcm9tICcuL2NhbmNlbC9pc0NhbmNlbC5qcyc7XG5pbXBvcnQge1ZFUlNJT059IGZyb20gJy4vZW52L2RhdGEuanMnO1xuaW1wb3J0IHRvRm9ybURhdGEgZnJvbSAnLi9oZWxwZXJzL3RvRm9ybURhdGEuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi9jb3JlL0F4aW9zRXJyb3IuanMnO1xuaW1wb3J0IHNwcmVhZCBmcm9tICcuL2hlbHBlcnMvc3ByZWFkLmpzJztcbmltcG9ydCBpc0F4aW9zRXJyb3IgZnJvbSAnLi9oZWxwZXJzL2lzQXhpb3NFcnJvci5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gXCIuL2NvcmUvQXhpb3NIZWFkZXJzLmpzXCI7XG5pbXBvcnQgYWRhcHRlcnMgZnJvbSAnLi9hZGFwdGVycy9hZGFwdGVycy5qcyc7XG5pbXBvcnQgSHR0cFN0YXR1c0NvZGUgZnJvbSAnLi9oZWxwZXJzL0h0dHBTdGF0dXNDb2RlLmpzJztcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdENvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICpcbiAqIEByZXR1cm5zIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICBjb25zdCBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuICBjb25zdCBpbnN0YW5jZSA9IGJpbmQoQXhpb3MucHJvdG90eXBlLnJlcXVlc3QsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgYXhpb3MucHJvdG90eXBlIHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgQXhpb3MucHJvdG90eXBlLCBjb250ZXh0LCB7YWxsT3duS2V5czogdHJ1ZX0pO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQsIG51bGwsIHthbGxPd25LZXlzOiB0cnVlfSk7XG5cbiAgLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuICBpbnN0YW5jZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHtcbiAgICByZXR1cm4gY3JlYXRlSW5zdGFuY2UobWVyZ2VDb25maWcoZGVmYXVsdENvbmZpZywgaW5zdGFuY2VDb25maWcpKTtcbiAgfTtcblxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbi8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZFxuY29uc3QgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cbi8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuYXhpb3MuQXhpb3MgPSBBeGlvcztcblxuLy8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuXG5heGlvcy5DYW5jZWxlZEVycm9yID0gQ2FuY2VsZWRFcnJvcjtcbmF4aW9zLkNhbmNlbFRva2VuID0gQ2FuY2VsVG9rZW47XG5heGlvcy5pc0NhbmNlbCA9IGlzQ2FuY2VsO1xuYXhpb3MuVkVSU0lPTiA9IFZFUlNJT047XG5heGlvcy50b0Zvcm1EYXRhID0gdG9Gb3JtRGF0YTtcblxuLy8gRXhwb3NlIEF4aW9zRXJyb3IgY2xhc3NcbmF4aW9zLkF4aW9zRXJyb3IgPSBBeGlvc0Vycm9yO1xuXG4vLyBhbGlhcyBmb3IgQ2FuY2VsZWRFcnJvciBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuYXhpb3MuQ2FuY2VsID0gYXhpb3MuQ2FuY2VsZWRFcnJvcjtcblxuLy8gRXhwb3NlIGFsbC9zcHJlYWRcbmF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufTtcblxuYXhpb3Muc3ByZWFkID0gc3ByZWFkO1xuXG4vLyBFeHBvc2UgaXNBeGlvc0Vycm9yXG5heGlvcy5pc0F4aW9zRXJyb3IgPSBpc0F4aW9zRXJyb3I7XG5cbi8vIEV4cG9zZSBtZXJnZUNvbmZpZ1xuYXhpb3MubWVyZ2VDb25maWcgPSBtZXJnZUNvbmZpZztcblxuYXhpb3MuQXhpb3NIZWFkZXJzID0gQXhpb3NIZWFkZXJzO1xuXG5heGlvcy5mb3JtVG9KU09OID0gdGhpbmcgPT4gZm9ybURhdGFUb0pTT04odXRpbHMuaXNIVE1MRm9ybSh0aGluZykgPyBuZXcgRm9ybURhdGEodGhpbmcpIDogdGhpbmcpO1xuXG5heGlvcy5nZXRBZGFwdGVyID0gYWRhcHRlcnMuZ2V0QWRhcHRlcjtcblxuYXhpb3MuSHR0cFN0YXR1c0NvZGUgPSBIdHRwU3RhdHVzQ29kZTtcblxuYXhpb3MuZGVmYXVsdCA9IGF4aW9zO1xuXG4vLyB0aGlzIG1vZHVsZSBzaG91bGQgb25seSBoYXZlIGEgZGVmYXVsdCBleHBvcnRcbmV4cG9ydCBkZWZhdWx0IGF4aW9zXG4iLCAiaW1wb3J0IGF4aW9zIGZyb20gJy4vbGliL2F4aW9zLmpzJztcblxuLy8gVGhpcyBtb2R1bGUgaXMgaW50ZW5kZWQgdG8gdW53cmFwIEF4aW9zIGRlZmF1bHQgZXhwb3J0IGFzIG5hbWVkLlxuLy8gS2VlcCB0b3AtbGV2ZWwgZXhwb3J0IHNhbWUgd2l0aCBzdGF0aWMgcHJvcGVydGllc1xuLy8gc28gdGhhdCBpdCBjYW4ga2VlcCBzYW1lIHdpdGggZXMgbW9kdWxlIG9yIGNqc1xuY29uc3Qge1xuICBBeGlvcyxcbiAgQXhpb3NFcnJvcixcbiAgQ2FuY2VsZWRFcnJvcixcbiAgaXNDYW5jZWwsXG4gIENhbmNlbFRva2VuLFxuICBWRVJTSU9OLFxuICBhbGwsXG4gIENhbmNlbCxcbiAgaXNBeGlvc0Vycm9yLFxuICBzcHJlYWQsXG4gIHRvRm9ybURhdGEsXG4gIEF4aW9zSGVhZGVycyxcbiAgSHR0cFN0YXR1c0NvZGUsXG4gIGZvcm1Ub0pTT04sXG4gIGdldEFkYXB0ZXIsXG4gIG1lcmdlQ29uZmlnXG59ID0gYXhpb3M7XG5cbmV4cG9ydCB7XG4gIGF4aW9zIGFzIGRlZmF1bHQsXG4gIEF4aW9zLFxuICBBeGlvc0Vycm9yLFxuICBDYW5jZWxlZEVycm9yLFxuICBpc0NhbmNlbCxcbiAgQ2FuY2VsVG9rZW4sXG4gIFZFUlNJT04sXG4gIGFsbCxcbiAgQ2FuY2VsLFxuICBpc0F4aW9zRXJyb3IsXG4gIHNwcmVhZCxcbiAgdG9Gb3JtRGF0YSxcbiAgQXhpb3NIZWFkZXJzLFxuICBIdHRwU3RhdHVzQ29kZSxcbiAgZm9ybVRvSlNPTixcbiAgZ2V0QWRhcHRlcixcbiAgbWVyZ2VDb25maWdcbn1cbiIsICJpbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHsgV29yZERhdGEgfSBmcm9tICcuL1ZvY2FidWxhcnlDYXJkJztcclxuaW1wb3J0IHsgZGVjcnlwdEFwaUtleSB9IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMTE1SZXNwb25zZSB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgZGF0YT86IGFueTtcclxuICAgIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb2dyZXNzQ2FsbGJhY2sge1xyXG4gICAgKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBXb3JkRGV0YWlsRGF0YSB7XHJcbiAgICB3b3JkOiBzdHJpbmc7XHJcbiAgICBwcm9udW5jaWF0aW9uOiBzdHJpbmc7XHJcbiAgICBtZWFuaW5nczogc3RyaW5nW107XHJcbiAgICBleGFtcGxlczoge1xyXG4gICAgICAgIGVuZ2xpc2g6IHN0cmluZztcclxuICAgICAgICBrb3JlYW46IHN0cmluZztcclxuICAgIH1bXTtcclxuICAgIHNpbWlsYXJXb3Jkczogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMTE1TZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMxMjBcdUQwRERcdUI0MUMgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVDNzU4IEFQSSBcdUQwQTRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QkE1NFx1QzExQ1x1QjREQ1xyXG4gICAgcHJpdmF0ZSBnZXRDdXJyZW50QXBpS2V5KCk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnNldHRpbmdzLmxsbVByb3ZpZGVyO1xyXG4gICAgICAgIGxldCBlbmNyeXB0ZWRLZXkgPSAnJztcclxuICAgICAgICBcclxuICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6XHJcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRLZXkgPSB0aGlzLnNldHRpbmdzLm9wZW5haUFwaUtleTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhbnRocm9waWMnOlxyXG4gICAgICAgICAgICAgICAgZW5jcnlwdGVkS2V5ID0gdGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZ29vZ2xlJzpcclxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZEtleSA9IHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBkZWNyeXB0QXBpS2V5KGVuY3J5cHRlZEtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IHRoaXMuZ2V0Q3VycmVudEFwaUtleSgpO1xyXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgdGVzdFByb21wdCA9ICdIZWxsbywgdGhpcyBpcyBhIHRlc3QgbWVzc2FnZS4gUGxlYXNlIHJlc3BvbmQgd2l0aCBcIk9LXCIgaWYgeW91IGNhbiByZWFkIHRoaXMuJztcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxMTE0odGVzdFByb21wdCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogJ0FQSSBcdUM1RjBcdUFDQjAgXHVDMTMxXHVBQ0Y1JyB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiByZXNwb25zZS5lcnJvciB8fCAnQVBJIFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjgnIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0V29yZERldGFpbHMod29yZDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IHRoaXMuZ2V0Q3VycmVudEFwaUtleSgpO1xyXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5jcmVhdGVXb3JkRGV0YWlsUHJvbXB0KHdvcmQpO1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbExMTShwcm9tcHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSB0aGlzLnBhcnNlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlLmRhdGEsIHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcGFyc2VkRGF0YSB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiByZXNwb25zZS5lcnJvciB8fCAnXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTRcdUIzNzAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRNdWx0aXBsZVdvcmREZXRhaWxzKHdvcmRzOiBzdHJpbmdbXSwgcHJvZ3Jlc3NDYWxsYmFjaz86IFByb2dyZXNzQ2FsbGJhY2spOiBQcm9taXNlPExMTVJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgYXBpS2V5ID0gdGhpcy5nZXRDdXJyZW50QXBpS2V5KCk7XHJcbiAgICAgICAgICAgIGlmICghYXBpS2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBUEkgXHVEMEE0XHVBQzAwIFx1QzEyNFx1QzgxNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAod29yZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdUNDOThcdUI5QUNcdUQ1NjAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IEJBVENIX1NJWkUgPSAyMDtcclxuICAgICAgICAgICAgY29uc3QgYWxsUmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCB0b3RhbEJhdGNoZXMgPSBNYXRoLmNlaWwod29yZHMubGVuZ3RoIC8gQkFUQ0hfU0laRSk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVDRDFEICR7d29yZHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjRcdUI5N0MgJHt0b3RhbEJhdGNoZXN9XHVBQzFDIFx1QkMzMFx1Q0U1OFx1Qjg1QyBcdUIwOThcdUIyMDRcdUM1QjQgXHVDQzk4XHVCOUFDXHVENTY5XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soMCwgd29yZHMubGVuZ3RoLCBgXHVDRDFEICR7d29yZHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjRcdUI5N0MgJHt0b3RhbEJhdGNoZXN9XHVBQzFDIFx1QkMzMFx1Q0U1OFx1Qjg1QyBcdUIwOThcdUIyMDRcdUM1QjQgXHVDQzk4XHVCOUFDXHVENTY5XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSArPSBCQVRDSF9TSVpFKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaE51bWJlciA9IE1hdGguZmxvb3IoaSAvIEJBVENIX1NJWkUpICsgMTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhdGNoV29yZHMgPSB3b3Jkcy5zbGljZShpLCBpICsgQkFUQ0hfU0laRSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0vJHt0b3RhbEJhdGNoZXN9IFx1Q0M5OFx1QjlBQyBcdUM5MTEuLi4gKCR7YmF0Y2hXb3Jkcy5sZW5ndGh9XHVBQzFDIFx1QjJFOFx1QzVCNClgKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGksIHdvcmRzLmxlbmd0aCwgYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfS8ke3RvdGFsQmF0Y2hlc30gXHVDQzk4XHVCOUFDIFx1QzkxMS4uLiAoJHtiYXRjaFdvcmRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0KWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IHRoaXMuY3JlYXRlTXVsdGlwbGVXb3JkRGV0YWlsUHJvbXB0KGJhdGNoV29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsTExNKHByb21wdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IHRoaXMucGFyc2VNdWx0aXBsZVdvcmREZXRhaWxSZXNwb25zZShyZXNwb25zZS5kYXRhLCBiYXRjaFdvcmRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLnBhcnNlZERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzY0NFx1QjhDQzogJHtwYXJzZWREYXRhLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1Q0M5OFx1QjlBQ1x1QjQyOGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soaSArIGJhdGNoV29yZHMubGVuZ3RoLCB3b3Jkcy5sZW5ndGgsIGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0gXHVDNjQ0XHVCOENDOiAke3BhcnNlZERhdGEubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjQgXHVDQzk4XHVCOUFDXHVCNDI4YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0gXHVDMkU0XHVEMzI4OmAsIHJlc3BvbnNlLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soaSwgd29yZHMubGVuZ3RoLCBgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzJFNFx1RDMyOCwgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQ1x1Qjg1QyBcdUM4MDRcdUQ2NTguLi5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUMyRTRcdUQzMjhcdUQ1NUMgXHVCQzMwXHVDRTU4XHVDNzU4IFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUFDMUNcdUJDQzRcdUM4MDFcdUM3M0NcdUI4NUMgXHVDQzk4XHVCOUFDIFx1QzJEQ1x1QjNDNFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRpdmlkdWFsUmVzdWx0cyA9IGF3YWl0IHRoaXMucHJvY2Vzc1dvcmRzSW5kaXZpZHVhbGx5KGJhdGNoV29yZHMsIHByb2dyZXNzQ2FsbGJhY2ssIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxSZXN1bHRzLnB1c2goLi4uaW5kaXZpZHVhbFJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGksIHdvcmRzLmxlbmd0aCwgYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfSBcdUM2MjRcdUI5NTgsIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUNcdUI4NUMgXHVDODA0XHVENjU4Li4uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQgXHVDMkRDIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUNcdUI4NUMgXHVEM0Y0XHVCQzMxXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kaXZpZHVhbFJlc3VsdHMgPSBhd2FpdCB0aGlzLnByb2Nlc3NXb3Jkc0luZGl2aWR1YWxseShiYXRjaFdvcmRzLCBwcm9ncmVzc0NhbGxiYWNrLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGxSZXN1bHRzLnB1c2goLi4uaW5kaXZpZHVhbFJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1QkMzMFx1Q0U1OCBcdUFDMDQgXHVDOUU3XHVDNzQwIFx1QzlDMFx1QzVGMCAoQVBJIFx1QzgxQ1x1RDU1QyBcdUJDMjlcdUM5QzApXHJcbiAgICAgICAgICAgICAgICBpZiAoaSArIEJBVENIX1NJWkUgPCB3b3Jkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVCQUE4XHVCNEUwIFx1QkMzMFx1Q0U1OCBcdUNDOThcdUI5QUMgXHVDNjQ0XHVCOENDLiBcdUNEMUQgJHthbGxSZXN1bHRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMyMThcdUM5RDFcdUI0MjhgKTtcclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2sod29yZHMubGVuZ3RoLCB3b3Jkcy5sZW5ndGgsIGBcdUJBQThcdUI0RTAgXHVCQzMwXHVDRTU4IFx1Q0M5OFx1QjlBQyBcdUM2NDRcdUI4Q0MuIFx1Q0QxRCAke2FsbFJlc3VsdHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzIxOFx1QzlEMVx1QjQyOGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGFsbFJlc3VsdHMgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUIyRThcdUM1QjQgXHVDQzk4XHVCOUFDIChcdUJDMzBcdUNFNTggXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUQzRjRcdUJDMzEpXHJcbiAgICBwcml2YXRlIGFzeW5jIHByb2Nlc3NXb3Jkc0luZGl2aWR1YWxseSh3b3Jkczogc3RyaW5nW10sIHByb2dyZXNzQ2FsbGJhY2s/OiBQcm9ncmVzc0NhbGxiYWNrLCBzdGFydEluZGV4OiBudW1iZXIgPSAwKTogUHJvbWlzZTxXb3JkRGV0YWlsRGF0YVtdPiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHdvcmRzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBzdGFydEluZGV4ICsgaTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQzogXCIke3dvcmR9XCJgKTtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhjdXJyZW50SW5kZXgsIHN0YXJ0SW5kZXggKyB3b3Jkcy5sZW5ndGgsIGBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDOiBcIiR7d29yZH1cImApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0V29yZERldGFpbHMod29yZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIiBcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4OmAsIHJlc3BvbnNlLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUMyRTRcdUQzMjhcdUQ1NUMgXHVCMkU4XHVDNUI0XHVDNUQwIFx1QjMwMFx1RDU1QyBcdUFFMzBcdUJDRjggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzBERFx1QzEzMVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmQudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Q0M5OFx1QjlBQyBcdUMyRTRcdUQzMjgnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUMgXHVBQzA0IFx1QzlFN1x1Qzc0MCBcdUM5QzBcdUM1RjBcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsYXkoNTAwKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIiBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NTg6YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkOiB3b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVDQzk4XHVCOUFDIFx1QzYyNFx1Qjk1OCddLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFtdXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM5QzBcdUM1RjAgXHVENTY4XHVDMjE4XHJcbiAgICBwcml2YXRlIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVXb3JkRGV0YWlsUHJvbXB0KHdvcmQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGBcdUIyRTRcdUM3NEMgXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1QzVEMCBcdUIzMDBcdUQ1NUMgXHVDMEMxXHVDMTM4IFx1QzgxNVx1QkNGNFx1Qjk3QyBKU09OIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUM4MUNcdUFDRjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuXHJcblxyXG5cdUM2OTRcdUFENkNcdUMwQUNcdUQ1NkQ6XHJcbjEuIFx1QkMxQ1x1Qzc0Q1x1QUUzMFx1RDYzOCAoSVBBIFx1RDYxNVx1QzJERClcclxuMi4gXHVENTVDXHVBRTAwIFx1QjczQlx1QjRFNCAoXHVDNUVDXHVCN0VDIFx1QUMxQ1x1Qzc3QyBcdUMyMTggXHVDNzg4XHVDNzRDKVxyXG4zLiBcdUFDMDEgXHVCNzNCXHVCQ0M0XHVCODVDIFx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzhcdUFDRkMgXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAoXHVBQzAxIFx1QjczQlx1QjJGOSAyLTNcdUFDMUNcdUM3NTggXHVDNjA4XHVCQjM4IFx1QzgxQ1x1QUNGNSlcclxuNC4gXHVDNzIwXHVDMEFDXHVENTVDIFx1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjRcdUI0RTRcclxuXHJcblx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyREQ6XHJcbntcclxuICBcIndvcmRcIjogXCIke3dvcmR9XCIsXHJcbiAgXCJwcm9udW5jaWF0aW9uXCI6IFwiL1x1QkMxQ1x1Qzc0Q1x1QUUzMFx1RDYzOC9cIixcclxuICBcIm1lYW5pbmdzXCI6IFtcIlx1QjczQjFcIiwgXCJcdUI3M0IyXCIsIFwiXHVCNzNCM1wiXSxcclxuICBcImV4YW1wbGVzXCI6IFtcclxuICAgIHtcclxuICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAxXCIsXHJcbiAgICAgIFwia29yZWFuXCI6IFwiXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAxXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggMlwiLCBcclxuICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDJcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAzXCIsXHJcbiAgICAgIFwia29yZWFuXCI6IFwiXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAzXCJcclxuICAgIH1cclxuICBdLFxyXG4gIFwic2ltaWxhcldvcmRzXCI6IFtcIlx1QzcyMFx1QzBBQ1x1QjJFOFx1QzVCNDFcIiwgXCJcdUM3MjBcdUMwQUNcdUIyRThcdUM1QjQyXCIsIFwiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0M1wiXVxyXG59XHJcblxyXG5KU09OIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1Q1x1QjlDQyBcdUM3NTFcdUIyRjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuIFx1QjJFNFx1Qjk3OCBcdUMxMjRcdUJBODVcdUM3NDAgXHVEM0VDXHVENTY4XHVENTU4XHVDOUMwIFx1QjlDOFx1QzEzOFx1QzY5NC5gO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlTXVsdGlwbGVXb3JkRGV0YWlsUHJvbXB0KHdvcmRzOiBzdHJpbmdbXSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3Qgd29yZExpc3QgPSB3b3Jkcy5qb2luKCcsICcpO1xyXG4gICAgICAgIHJldHVybiBgXHVCMkU0XHVDNzRDIFx1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjRcdUI0RTRcdUM1RDAgXHVCMzAwXHVENTVDIFx1QzBDMVx1QzEzOCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVDODE1XHVENjU1XHVENTVDIEpTT04gXHVENjE1XHVDMkREXHVDNzNDXHVCODVDIFx1QzgxQ1x1QUNGNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NDogJHt3b3JkTGlzdH1cclxuXHJcblx1QzY5NFx1QUQ2Q1x1QzBBQ1x1RDU2RDpcclxuLSBcdUFDMDEgXHVCMkU4XHVDNUI0XHVDNUQwIFx1QjMwMFx1RDU3NCBcdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzggKElQQSBcdUQ2MTVcdUMyREQpLCBcdUQ1NUNcdUFFMDAgXHVCNzNCXHVCNEU0LCBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4XHVBQ0ZDIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQsIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0XHVCNEU0XHVDNzQ0IFx1RDNFQ1x1RDU2OFxyXG4tIFx1QUMwMSBcdUI3M0JcdUJDQzRcdUI4NUMgMi0zXHVBQzFDXHVDNzU4IFx1QzYwOFx1QkIzOFx1Qzc0NCBcdUM4MUNcdUFDRjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTRcclxuLSBKU09OIFx1RDYxNVx1QzJERFx1QjlDQyBcdUM3NTFcdUIyRjVcdUQ1NThcdUFDRTAgXHVCMkU0XHVCOTc4IFx1QzEyNFx1QkE4NVx1Qzc0MCBcdUQzRUNcdUQ1NjhcdUQ1NThcdUM5QzAgXHVCOUM4XHVDMTM4XHVDNjk0XHJcbi0gXHVCQUE4XHVCNEUwIFx1QkIzOFx1Qzc5MFx1QzVGNFx1Qzc0MCBcdUM3NzRcdUM5MTEgXHVCNTMwXHVDNjM0XHVENDVDXHVCODVDIFx1QUMxMFx1QzJGOFx1QzhGQ1x1QzEzOFx1QzY5NFxyXG4tIFx1QkMzMFx1QzVGNFx1QUNGQyBcdUFDMURcdUNDQjRcdUIyOTQgXHVDODE1XHVENjU1XHVENTVDIEpTT04gXHVCQjM4XHVCQzk1XHVDNzQ0IFx1QjUzMFx1Qjk3NFx1QzEzOFx1QzY5NFxyXG5cclxuXHVDNzUxXHVCMkY1IFx1RDYxNVx1QzJERDpcclxuW1xyXG4gIHtcclxuICAgIFwid29yZFwiOiBcIlx1QjJFOFx1QzVCNDFcIixcclxuICAgIFwicHJvbnVuY2lhdGlvblwiOiBcIi9cdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzgvXCIsXHJcbiAgICBcIm1lYW5pbmdzXCI6IFtcIlx1QjczQjFcIiwgXCJcdUI3M0IyXCJdLFxyXG4gICAgXCJleGFtcGxlc1wiOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDFcIixcclxuICAgICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgMVwiXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDJcIixcclxuICAgICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgMlwiXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDNcIixcclxuICAgICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgM1wiXHJcbiAgICAgIH1cclxuICAgIF0sXHJcbiAgICBcInNpbWlsYXJXb3Jkc1wiOiBbXCJcdUM3MjBcdUMwQUNcdUIyRThcdUM1QjQxXCIsIFwiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0MlwiXVxyXG4gIH1cclxuXVxyXG5cclxuXHVDOTExXHVDNjk0OiBKU09OIFx1RDYxNVx1QzJERFx1QjlDQyBcdUM3NTFcdUIyRjVcdUQ1NThcdUFDRTAgXHVCMkU0XHVCOTc4IFx1RDE0RFx1QzJBNFx1RDJCOFx1QjI5NCBcdUQzRUNcdUQ1NjhcdUQ1NThcdUM5QzAgXHVCOUM4XHVDMTM4XHVDNjk0LmA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsTExNKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5zZXR0aW5ncy5sbG1Qcm92aWRlcjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHN3aXRjaCAocHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2FsbE9wZW5BSShwcm9tcHQpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jYWxsQW50aHJvcGljKHByb21wdCk7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdnb29nbGUnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNhbGxHb29nbGUocHJvbXB0KTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDOUMwXHVDNkQwXHVENTU4XHVDOUMwIFx1QzU0QVx1QjI5NCBMTE0gXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVDNzg1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNhbGxPcGVuQUkocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPExMTVJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmdldEN1cnJlbnRBcGlLZXkoKX1gXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLnNldHRpbmdzLmxsbU1vZGVsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHByb21wdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IDQwMDBcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvckRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgJ09wZW5BSSBBUEkgXHVENjM4XHVDRDlDIFx1QzJFNFx1RDMyOCcgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGRhdGEuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghY29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDNzUxXHVCMkY1IFx1QjBCNFx1QzZBOVx1Qzc3NCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjb250ZW50IH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY2FsbEFudGhyb3BpYyhwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICAvLyBOb2RlLmpzIFx1RDY1OFx1QUNCRFx1QzVEMFx1QzExQ1x1QjlDQyBcdUIzRDlcdUM3OTFcdUQ1NThcdUIzQzRcdUI4NUQgXHVDQzk4XHVCOUFDXHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAod2luZG93IGFzIGFueSk/LnByb2Nlc3M/LnR5cGUgPT09ICdyZW5kZXJlcicpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoXHJcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vYXBpLmFudGhyb3BpYy5jb20vdjEvbWVzc2FnZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMuc2V0dGluZ3MubGxtTW9kZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IDMwMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBwcm9tcHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3gtYXBpLWtleSc6IHRoaXMuZ2V0Q3VycmVudEFwaUtleSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHJlc3BvbnNlLmRhdGEuY29udGVudFswXT8udGV4dDtcclxuICAgICAgICAgICAgICAgIGlmICghY29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1Qzc1MVx1QjJGNSBcdUIwQjRcdUM2QTlcdUM3NzQgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGNvbnRlbnQgfTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwIFx1RDY1OFx1QUNCRFx1QzVEMFx1QzExQ1x1QjI5NCBcdUM1NDhcdUIwQjQgXHVCQTU0XHVDMkRDXHVDOUMwIFx1QkMxOFx1RDY1OFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogJ0FudGhyb3BpYyBBUElcdUIyOTQgXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwIFx1RDY1OFx1QUNCRFx1QzVEMFx1QzExQyBcdUM5QzFcdUM4MTEgXHVENjM4XHVDRDlDXHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QjM3MFx1QzJBNFx1RDA2Q1x1RDFCMSBcdUM1NzEoT2JzaWRpYW4pXHVDNUQwXHVDMTFDXHVCOUNDIFx1QjNEOVx1Qzc5MVx1RDU2OVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY2FsbEdvb2dsZShwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzLyR7dGhpcy5zZXR0aW5ncy5sbG1Nb2RlbH06Z2VuZXJhdGVDb250ZW50P2tleT0ke3RoaXMuZ2V0Q3VycmVudEFwaUtleSgpfWAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHByb21wdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDQwMDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JEYXRhLmVycm9yPy5tZXNzYWdlIHx8ICdHb29nbGUgQVBJIFx1RDYzOFx1Q0Q5QyBcdUMyRTRcdUQzMjgnIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLmNhbmRpZGF0ZXNbMF0/LmNvbnRlbnQ/LnBhcnRzWzBdPy50ZXh0O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdUM3NTFcdUIyRjUgXHVCMEI0XHVDNkE5XHVDNzc0IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGNvbnRlbnQgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZVdvcmREZXRhaWxSZXNwb25zZShyZXNwb25zZTogc3RyaW5nLCBvcmlnaW5hbFdvcmQ6IHN0cmluZyk6IFdvcmREZXRhaWxEYXRhIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBKU09OIFx1Qzc1MVx1QjJGNVx1QzVEMFx1QzExQyBKU09OIFx1QkQ4MFx1QkQ4NFx1QjlDQyBcdUNEOTRcdUNEOUNcclxuICAgICAgICAgICAgY29uc3QganNvbk1hdGNoID0gcmVzcG9uc2UubWF0Y2goL1xce1tcXHNcXFNdKlxcfS8pO1xyXG4gICAgICAgICAgICBpZiAoIWpzb25NYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKU09OIFx1RDYxNVx1QzJERFx1Qzc1OCBcdUM3NTFcdUIyRjVcdUM3NDQgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNjA4XHVCQjM4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUFDODBcdUM5OUQgXHVCQzBGIFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0ZWRFeGFtcGxlcyA9IHRoaXMudmFsaWRhdGVFeGFtcGxlcyhqc29uRGF0YS5leGFtcGxlcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgd29yZDoganNvbkRhdGEud29yZCB8fCBvcmlnaW5hbFdvcmQsXHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiBqc29uRGF0YS5wcm9udW5jaWF0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IGpzb25EYXRhLm1lYW5pbmdzIHx8IFtdLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IHZhbGlkYXRlZEV4YW1wbGVzLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBqc29uRGF0YS5zaW1pbGFyV29yZHMgfHwgW11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBKU09OIFx1RDMwQ1x1QzJGMSBcdUMyRTRcdUQzMjggXHVDMkRDIFx1QUUzMFx1QkNGOCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCQzE4XHVENjU4XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiBvcmlnaW5hbFdvcmQsXHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Qzc1OFx1QkJGOFx1Qjk3QyBcdUQzMENcdUMyRjFcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nXSxcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXSxcclxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogW11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNjA4XHVCQjM4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUFDODBcdUM5OUQgXHVCQzBGIFx1QzgxNVx1QjlBQ1xyXG4gICAgcHJpdmF0ZSB2YWxpZGF0ZUV4YW1wbGVzKGV4YW1wbGVzOiBhbnlbXSk6IHsgZW5nbGlzaDogc3RyaW5nOyBrb3JlYW46IHN0cmluZzsgfVtdIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXhhbXBsZXMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzOiB7IGVuZ2xpc2g6IHN0cmluZzsga29yZWFuOiBzdHJpbmc7IH1bXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3QgZXhhbXBsZSBvZiBleGFtcGxlcykge1xyXG4gICAgICAgICAgICBpZiAoZXhhbXBsZSAmJiB0eXBlb2YgZXhhbXBsZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2ggPSBleGFtcGxlLmVuZ2xpc2ggfHwgZXhhbXBsZS5lbmdsaXNoX3RleHQgfHwgZXhhbXBsZS50ZXh0IHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga29yZWFuID0gZXhhbXBsZS5rb3JlYW4gfHwgZXhhbXBsZS5rb3JlYW5fdGV4dCB8fCBleGFtcGxlLnRyYW5zbGF0aW9uIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoZW5nbGlzaC50cmltKCkgJiYga29yZWFuLnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlZEV4YW1wbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiBlbmdsaXNoLnRyaW0oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiBrb3JlYW4udHJpbSgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEV4YW1wbGVzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VNdWx0aXBsZVdvcmREZXRhaWxSZXNwb25zZShyZXNwb25zZTogc3RyaW5nLCBvcmlnaW5hbFdvcmRzOiBzdHJpbmdbXSk6IFdvcmREZXRhaWxEYXRhW10ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdUM2RDBcdUJDRjggXHVDNzUxXHVCMkY1OicsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDEuIFx1QzY0NFx1QzgwNFx1RDU1QyBKU09OIFx1QkMzMFx1QzVGNFx1Qzc0NCBcdUNDM0VcdUM1NDRcdUJDRjRcdUFFMzBcclxuICAgICAgICAgICAgbGV0IGpzb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXFtbXFxzXFxTXSpcXF0vKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAyLiBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVCQzMwXHVDNUY0XHVDNzc0IFx1QzVDNlx1QzczQ1x1QkE3NCBcdUFDMUNcdUJDQzQgXHVBQzFEXHVDQ0I0XHVCNEU0XHVDNzQ0IFx1Q0MzRVx1QzU0NFx1QzExQyBcdUJDMzBcdUM1RjRcdUI4NUMgXHVCOUNDXHVCNEU0XHVBRTMwXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmplY3RNYXRjaGVzID0gcmVzcG9uc2UubWF0Y2goL1xce1tee31dKlwid29yZFwiW157fV0qXFx9L2cpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdE1hdGNoZXMgJiYgb2JqZWN0TWF0Y2hlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QganNvblN0cmluZyA9ICdbJyArIG9iamVjdE1hdGNoZXMuam9pbignLCcpICsgJ10nO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbkRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzSnNvbkRhdGEoanNvbkRhdGEsIG9yaWdpbmFsV29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHVBQzFDXHVCQ0M0IFx1QUMxRFx1Q0NCNCBcdUQzMENcdUMyRjEgXHVDMkU0XHVEMzI4OicsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gMy4gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjRcdUFFNENcdUM5QzAgXHVDQzNFXHVBRTMwXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0Q29tcGxldGVNYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXFtbXFxzXFxTXSpcXH0oPz1cXHMqJCkvKTtcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0Q29tcGxldGVNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpzb25NYXRjaCA9IFtsYXN0Q29tcGxldGVNYXRjaFswXSArICddJ107XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSlNPTiBcdUJDMzBcdUM1RjRcdUM3NDQgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDQuIEpTT04gXHVEMzBDXHVDMkYxIFx1QzJEQ1x1QjNDNCAtIFx1QzgxMFx1QzlDNFx1QzgwMVx1QzczQ1x1Qjg1QyBcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgbGV0IGpzb25EYXRhO1xyXG4gICAgICAgICAgICBsZXQgcGFyc2VkTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBqc29uRGF0YSA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0pTT04gXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCwgXHVDODEwXHVDOUM0XHVDODAxIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzQ6JywgcGFyc2VFcnJvcik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIDUuIFx1QzgxMFx1QzlDNFx1QzgwMSBcdUQzMENcdUMyRjEgXHVDMkRDXHVCM0M0IC0gXHVDNjQ0XHVDODA0XHVENTVDIFx1QUMxRFx1Q0NCNFx1QjRFNFx1QjlDQyBcdUQzMENcdUMyRjFcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnBhcnNlSW5jcmVtZW50YWxKc29uKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gNi4gSlNPTiBcdUJDRjVcdUFENkMgXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXhlZEpzb24gPSB0aGlzLmZpeEpzb25TdHJpbmcoanNvbk1hdGNoWzBdKTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAganNvbkRhdGEgPSBKU09OLnBhcnNlKGZpeGVkSnNvbik7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChzZWNvbmRFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKU09OIFx1QkNGNVx1QUQ2QyBcdUMyRTRcdUQzMjg6Jywgc2Vjb25kRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSlNPTiBcdUQzMENcdUMyRjEgXHVCQzBGIFx1QkNGNVx1QUQ2QyBcdUMyRTRcdUQzMjgnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGpzb25EYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdUM3NTFcdUIyRjVcdUM3NzQgXHVCQzMwXHVDNUY0IFx1RDYxNVx1QzJERFx1Qzc3NCBcdUM1NDRcdUIyRDlcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NKc29uRGF0YShqc29uRGF0YSwgb3JpZ2luYWxXb3Jkcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzVFQ1x1QjdFQyBcdUIyRThcdUM1QjQgXHVDNzUxXHVCMkY1IFx1RDMwQ1x1QzJGMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUM2RDBcdUJDRjggXHVDNzUxXHVCMkY1OicsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQgXHVDMkRDIFx1QkU0OCBcdUFDQjBcdUFDRkMgXHVCQzE4XHVENjU4XHJcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbFdvcmRzLm1hcCh3b3JkID0+ICh7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiB3b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbXSxcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXSxcclxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogW11cclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM4MTBcdUM5QzRcdUM4MDEgSlNPTiBcdUQzMENcdUMyRjEgLSBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0XHVCNEU0XHVCOUNDIFx1RDMwQ1x1QzJGMVxyXG4gICAgcHJpdmF0ZSBwYXJzZUluY3JlbWVudGFsSnNvbihyZXNwb25zZTogc3RyaW5nKTogV29yZERldGFpbERhdGFbXSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjRcdUI0RTRcdUM3NDQgXHVDQzNFXHVBRTMwIChcdUM2MDhcdUJCMzggXHVENTQ0XHVCNERDIFx1RDNFQ1x1RDU2OClcclxuICAgICAgICBjb25zdCBvYmplY3RSZWdleCA9IC9cXHtbXnt9XSpcIndvcmRcIltee31dKlwicHJvbnVuY2lhdGlvblwiW157fV0qXCJtZWFuaW5nc1wiW157fV0qXCJleGFtcGxlc1wiW157fV0qXCJzaW1pbGFyV29yZHNcIltee31dKlxcfS9nO1xyXG4gICAgICAgIGxldCBtYXRjaDtcclxuICAgICAgICBcclxuICAgICAgICB3aGlsZSAoKG1hdGNoID0gb2JqZWN0UmVnZXguZXhlYyhyZXNwb25zZSkpICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmplY3REYXRhID0gSlNPTi5wYXJzZShtYXRjaFswXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0RGF0YSAmJiBvYmplY3REYXRhLndvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxpZGF0ZWRFeGFtcGxlcyA9IHRoaXMudmFsaWRhdGVFeGFtcGxlcyhvYmplY3REYXRhLmV4YW1wbGVzKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YTogV29yZERldGFpbERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQ6IG9iamVjdERhdGEud29yZC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiBvYmplY3REYXRhLnByb251bmNpYXRpb24gfHwgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBBcnJheS5pc0FycmF5KG9iamVjdERhdGEubWVhbmluZ3MpID8gb2JqZWN0RGF0YS5tZWFuaW5ncyA6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogdmFsaWRhdGVkRXhhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogQXJyYXkuaXNBcnJheShvYmplY3REYXRhLnNpbWlsYXJXb3JkcykgPyBvYmplY3REYXRhLnNpbWlsYXJXb3JkcyA6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2god29yZERhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHVBQzFDXHVCQ0M0IFx1QUMxRFx1Q0NCNCBcdUQzMENcdUMyRjEgXHVDMkU0XHVEMzI4OicsIGUpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSlNPTiBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDQzk4XHVCOUFDXHJcbiAgICBwcml2YXRlIHByb2Nlc3NKc29uRGF0YShqc29uRGF0YTogYW55W10sIG9yaWdpbmFsV29yZHM6IHN0cmluZ1tdKTogV29yZERldGFpbERhdGFbXSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBqc29uRGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgaXRlbS53b3JkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWxpZGF0ZWRFeGFtcGxlcyA9IHRoaXMudmFsaWRhdGVFeGFtcGxlcyhpdGVtLmV4YW1wbGVzKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZERhdGE6IFdvcmREZXRhaWxEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IGl0ZW0ud29yZC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IGl0ZW0ucHJvbnVuY2lhdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogQXJyYXkuaXNBcnJheShpdGVtLm1lYW5pbmdzKSA/IGl0ZW0ubWVhbmluZ3MgOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogdmFsaWRhdGVkRXhhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBBcnJheS5pc0FycmF5KGl0ZW0uc2ltaWxhcldvcmRzKSA/IGl0ZW0uc2ltaWxhcldvcmRzIDogW11cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2god29yZERhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICAvLyBKU09OIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUJDRjVcdUFENkNcclxuICAgIHByaXZhdGUgZml4SnNvblN0cmluZyhqc29uU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBmaXhlZCA9IGpzb25TdHJpbmc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gMS4gXHVCRDg4XHVDNjQ0XHVDODA0XHVENTVDIFx1QUMxRFx1Q0NCNCBcdUM4MUNcdUFDNzAgKFx1QjlDOFx1QzlDMFx1QjlDOSBcdUMyN0NcdUQ0NUMgXHVCNEE0XHVDNzU4IFx1QkQ4OFx1QzY0NFx1QzgwNFx1RDU1QyBcdUJEODBcdUJEODQpXHJcbiAgICAgICAgY29uc3QgbGFzdENvbXBsZXRlT2JqZWN0ID0gZml4ZWQubWF0Y2goLy4qXFx9KD89LD9cXHMqJCkvKTtcclxuICAgICAgICBpZiAobGFzdENvbXBsZXRlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGZpeGVkID0gbGFzdENvbXBsZXRlT2JqZWN0WzBdICsgJ10nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyAyLiBcdUM5MTFcdUJDRjVcdUI0MUMgXHVDMjdDXHVENDVDIFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIGZpeGVkID0gZml4ZWQucmVwbGFjZSgvLFxccyosL2csICcsJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gMy4gXHVCQzMwXHVDNUY0IFx1QjA1RFx1Qzc1OCBcdUMyN0NcdUQ0NUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8sXFxzKlxcXS9nLCAnXScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDQuIFx1QUMxRFx1Q0NCNCBcdUIwNURcdUM3NTggXHVDMjdDXHVENDVDIFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIGZpeGVkID0gZml4ZWQucmVwbGFjZSgvLFxccypcXH0vZywgJ30nKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyA1LiBcdUJCMzhcdUM3OTBcdUM1RjQgXHVCMEI0XHVDNzU4IFx1Qzc3NFx1QzJBNFx1Q0YwMFx1Qzc3NFx1RDUwNFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM3NDAgXHVCNTMwXHVDNjM0XHVENDVDIFx1Q0M5OFx1QjlBQ1xyXG4gICAgICAgIGZpeGVkID0gZml4ZWQucmVwbGFjZSgvKD88IVxcXFwpXCIvZywgKG1hdGNoLCBvZmZzZXQpID0+IHtcclxuICAgICAgICAgICAgLy8gXHVCQjM4XHVDNzkwXHVDNUY0IFx1QjBCNFx1QkQ4MFx1Qzc1OCBcdUI1MzBcdUM2MzRcdUQ0NUNcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZSA9IGZpeGVkLnN1YnN0cmluZygwLCBvZmZzZXQpO1xyXG4gICAgICAgICAgICBjb25zdCBxdW90ZUNvdW50ID0gKGJlZm9yZS5tYXRjaCgvXCIvZykgfHwgW10pLmxlbmd0aDtcclxuICAgICAgICAgICAgcmV0dXJuIHF1b3RlQ291bnQgJSAyID09PSAwID8gbWF0Y2ggOiAnXFxcXFwiJztcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZml4ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV29yZERhdGEgXHVENjE1XHVDMkREXHVDNzNDXHVCODVDIFx1QkNDMFx1RDY1OFxyXG4gICAgY29udmVydFRvV29yZERhdGEod29yZERldGFpbDogV29yZERldGFpbERhdGEpOiBXb3JkRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd29yZDogd29yZERldGFpbC53b3JkLFxyXG4gICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkRGV0YWlsLnByb251bmNpYXRpb24sXHJcbiAgICAgICAgICAgIG1lYW5pbmdzOiB3b3JkRGV0YWlsLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREZXRhaWwuc2ltaWxhcldvcmRzLFxyXG4gICAgICAgICAgICBleGFtcGxlczogd29yZERldGFpbC5leGFtcGxlc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcbmltcG9ydCB7IFRUU1NlcnZpY2UgfSBmcm9tICcuL1RUU1NlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XHJcbiAgICBjdXJyZW50Q2FyZEluZGV4ID0gMDtcclxuICAgIGNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdID0gW107XHJcbiAgICBzaG93QW5zd2VyID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGtleWRvd25IYW5kbGVyOiAoKGU6IEtleWJvYXJkRXZlbnQpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIHR0c1NlcnZpY2U6IFRUU1NlcnZpY2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMudHRzU2VydmljZSA9IG5ldyBUVFNTZXJ2aWNlKHtcclxuICAgICAgICAgICAgZW5hYmxlZDogcGx1Z2luLnNldHRpbmdzLnR0c0VuYWJsZWQsXHJcbiAgICAgICAgICAgIHZvaWNlOiBwbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UsXHJcbiAgICAgICAgICAgIHBsYXliYWNrU3BlZWQ6IHBsdWdpbi5zZXR0aW5ncy50dHNQbGF5YmFja1NwZWVkLFxyXG4gICAgICAgICAgICBhdXRvUGxheTogcGx1Z2luLnNldHRpbmdzLnR0c0F1dG9QbGF5XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIC8vIFx1QzgwMFx1QzdBNVx1QjQxQyBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgIHRoaXMuY2FyZHMgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUI1MTRcdUJDODRcdUFFNDU6IFx1Q0U3NFx1QjREQyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVENjU1XHVDNzc4XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1x1Qjg1Q1x1QjREQ1x1QjQxQyBcdUNFNzRcdUI0REMgXHVDMjE4OicsIHRoaXMuY2FyZHMubGVuZ3RoKTtcclxuICAgICAgICBpZiAodGhpcy5jYXJkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdUNDQUIgXHVCQzg4XHVDOUY4IFx1Q0U3NFx1QjREQyBcdUM2MDhcdUJCMzg6JywgdGhpcy5jYXJkc1swXS5leGFtcGxlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmNhcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dOb1dvcmRzTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVDMjFDXHVDMTFDIFx1QzExRVx1QUUzMFxyXG4gICAgICAgIHRoaXMuc2h1ZmZsZUNhcmRzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNob3dDYXJkKCk7XHJcbiAgICAgICAgLy8gXHVEMEE0XHVCQ0Y0XHVCNERDIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI0RjFcdUI4NURcclxuICAgICAgICB0aGlzLmtleWRvd25IYW5kbGVyID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLmNvZGUgPT09ICdTcGFjZScgfHwgZS5rZXkgPT09ICcgJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJzEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXZpZXcoJ2hhcmQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICcyJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmV2aWV3KCdnb29kJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnMycpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJldmlldygnZWFzeScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5ZG93bkhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2h1ZmZsZUNhcmRzKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmNhcmRzLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xyXG4gICAgICAgICAgICBbdGhpcy5jYXJkc1tpXSwgdGhpcy5jYXJkc1tqXV0gPSBbdGhpcy5jYXJkc1tqXSwgdGhpcy5jYXJkc1tpXV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd05vV29yZHNNZXNzYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xyXG5cclxuICAgICAgICBjb25zdCBub1dvcmRzRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbm8td29yZHMtbWVzc2FnZScgfSk7XHJcbiAgICAgICAgbm9Xb3Jkc0VsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDU1OVx1QzJCNVx1RDU2MCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0JyB9KTtcclxuICAgICAgICBub1dvcmRzRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTVcdUM1RDAgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1QyBcdUQ2QzQgXHVCMkU0XHVDMkRDIFx1QzJEQ1x1QjNDNFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gbm9Xb3Jkc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnIH0pO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZENsYXNzKCdjbG9zZS1idXR0b24nKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q2FyZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2FyZEluZGV4ID49IHRoaXMuY2FyZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbXBsZXRpb25NZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYXJkID0gdGhpcy5jYXJkc1t0aGlzLmN1cnJlbnRDYXJkSW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xyXG5cclxuICAgICAgICBjb25zdCBjYXJkQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZvY2FidWxhcnktY2FyZCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMEMxXHVCMkU4IFx1QzgxNVx1QkNGNCBcdUM2MDFcdUM1RUQgKGJvb2sgXHVDODE1XHVCQ0Y0XHVDNjQwIFx1Q0U3NFx1QjREQyBcdUMwQURcdUM4MUMgXHVCQzg0XHVEMkJDXHVDNzQ0IFx1RDU2OFx1QUVEOCBcdUJDMzBcdUNFNTgpXHJcbiAgICAgICAgY29uc3QgdG9wSW5mb0NvbnRhaW5lciA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY2FyZC10b3AtaW5mbycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIGJvb2sgXHVDODE1XHVCQ0Y0IFx1RDQ1Q1x1QzJEQyAoXHVDNjdDXHVDQUJEKVxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRCb29rID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEN1cnJlbnRCb29rKCk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRCb29rKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2tJbmZvRWwgPSB0b3BJbmZvQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Jvb2staW5mby1kaXNwbGF5JyB9KTtcclxuICAgICAgICAgICAgYm9va0luZm9FbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBjdXJyZW50Qm9vay5uYW1lLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnY3VycmVudC1ib29rLW5hbWUnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDIFx1QkM4NFx1RDJCQyAoXHVDNjI0XHVCOTc4XHVDQUJEKVxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRvcEluZm9Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDJyxcclxuICAgICAgICAgICAgY2xzOiAnY2FyZC1kZWxldGUtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlRGVsZXRlQ2FyZCgpKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUM5QzRcdUQ1ODlcdUI5NjAgXHVENDVDXHVDMkRDXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NFbCA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtaW5kaWNhdG9yJyB9KTtcclxuICAgICAgICBwcm9ncmVzc0VsLnRleHRDb250ZW50ID0gYCR7dGhpcy5jdXJyZW50Q2FyZEluZGV4ICsgMX0gLyAke3RoaXMuY2FyZHMubGVuZ3RofWA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1RDQ1Q1x1QzJEQyAoVFRTIFx1QkM4NFx1RDJCQyBcdUQzRUNcdUQ1NjgpXHJcbiAgICAgICAgY29uc3Qgd29yZENvbnRhaW5lciA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1jb250YWluZXInIH0pO1xyXG4gICAgICAgIGNvbnN0IHdvcmRFbCA9IHdvcmRDb250YWluZXIuY3JlYXRlRWwoJ2gxJywgeyBjbHM6ICdjYXJkLXdvcmQnIH0pO1xyXG4gICAgICAgIGlmIChjdXJyZW50Q2FyZC5wcm9udW5jaWF0aW9uICYmIGN1cnJlbnRDYXJkLnByb251bmNpYXRpb24udHJpbSgpKSB7XHJcbiAgICAgICAgICAgIHdvcmRFbC5pbm5lckhUTUwgPSBgJHtjdXJyZW50Q2FyZC53b3JkfSA8c3BhbiBjbGFzcz1cInByb251bmNpYXRpb25cIj5bJHtjdXJyZW50Q2FyZC5wcm9udW5jaWF0aW9ufV08L3NwYW4+YDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3b3JkRWwudGV4dENvbnRlbnQgPSBjdXJyZW50Q2FyZC53b3JkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVCQzFDXHVDNzRDIFx1QzdBQ1x1QzBERCBcdUJDODRcdUQyQkNcclxuICAgICAgICBjb25zdCB3b3JkUGxheUJ1dHRvbiA9IHdvcmRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIGNsczogJ3R0cy1wbGF5LWJ1dHRvbiB3b3JkLXBsYXktYnV0dG9uJyxcclxuICAgICAgICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdcdUIyRThcdUM1QjQgXHVCQzFDXHVDNzRDIFx1QjRFM1x1QUUzMCcgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdvcmRQbGF5QnV0dG9uLmlubmVySFRNTCA9ICdcdUQ4M0RcdUREMEEnO1xyXG4gICAgICAgIHdvcmRQbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtXb3JkKGN1cnJlbnRDYXJkLndvcmQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0XHVCNEU0XHJcbiAgICAgICAgaWYgKGN1cnJlbnRDYXJkLnNpbWlsYXJXb3JkcyAmJiBjdXJyZW50Q2FyZC5zaW1pbGFyV29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBzaW1pbGFyU2VjdGlvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2ltaWxhci13b3Jkcy1zZWN0aW9uJyB9KTtcclxuICAgICAgICAgICAgc2ltaWxhclNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNDonIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBzaW1pbGFyTGlzdCA9IHNpbWlsYXJTZWN0aW9uLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnc2ltaWxhci13b3Jkcy1saXN0JyB9KTtcclxuICAgICAgICAgICAgY3VycmVudENhcmQuc2ltaWxhcldvcmRzLmZvckVhY2god29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IHdvcmQgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDNjA4XHVCQjM4XHVCNEU0IChcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVBQzAwXHVDODM4XHVDNjI4IFx1QzYwOFx1QkIzOCBcdUMwQUNcdUM2QTkpXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1x1RDYwNFx1QzdBQyBcdUNFNzRcdUI0REMgXHVDNjA4XHVCQjM4OicsIGN1cnJlbnRDYXJkLmV4YW1wbGVzKTtcclxuICAgICAgICBpZiAoY3VycmVudENhcmQuZXhhbXBsZXMgJiYgY3VycmVudENhcmQuZXhhbXBsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlc1NlY3Rpb24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGVzLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgICAgICBleGFtcGxlc1NlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNjA4XHVCQjM4XHVCNEU0OicgfSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDYXJkLmV4YW1wbGVzLmZvckVhY2goKGV4YW1wbGUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVDNjA4XHVCQjM4ICR7aW5kZXggKyAxfTpgLCBleGFtcGxlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVDb250YWluZXIgPSBleGFtcGxlc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS1jb250YWluZXInIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IChUVFMgXHVCQzg0XHVEMkJDIFx1RDNFQ1x1RDU2OClcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVUZXh0Q29udGFpbmVyID0gZXhhbXBsZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlLXRleHQtY29udGFpbmVyJyB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hFeGFtcGxlID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4YW1wbGUuZW5nbGlzaCB9KTtcclxuICAgICAgICAgICAgICAgIGVuZ2xpc2hFeGFtcGxlLmFkZENsYXNzKCdlbmdsaXNoLWV4YW1wbGUnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVDNjA4XHVCQjM4IFx1QkMxQ1x1Qzc0QyBcdUM3QUNcdUMwREQgXHVCQzg0XHVEMkJDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGFtcGxlUGxheUJ1dHRvbiA9IGV4YW1wbGVUZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3R0cy1wbGF5LWJ1dHRvbiBleGFtcGxlLXBsYXktYnV0dG9uJyxcclxuICAgICAgICAgICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1QzYwOFx1QkIzOCBcdUJDMUNcdUM3NEMgXHVCNEUzXHVBRTMwJyB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVQbGF5QnV0dG9uLmlubmVySFRNTCA9ICdcdUQ4M0RcdUREMEEnO1xyXG4gICAgICAgICAgICAgICAgZXhhbXBsZVBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnNwZWFrRXhhbXBsZShleGFtcGxlLmVuZ2xpc2gpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RURcclxuICAgICAgICAgICAgICAgIGlmIChleGFtcGxlLmtvcmVhbiAmJiBleGFtcGxlLmtvcmVhbi50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBrb3JlYW5FeGFtcGxlID0gZXhhbXBsZUNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogZXhhbXBsZS5rb3JlYW4gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAga29yZWFuRXhhbXBsZS5hZGRDbGFzcygna29yZWFuLWV4YW1wbGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHVDNjA4XHVCQjM4XHVDNzc0IFx1QzVDNlx1Qzc0NCBcdUI1NEMgXHVBRTMwXHVCQ0Y4IFx1QzYwOFx1QkIzOCBcdUQ0NUNcdUMyRENcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1QzYwOFx1QkIzOFx1Qzc3NCBcdUM1QzZcdUM1QjRcdUMxMUMgXHVBRTMwXHVCQ0Y4IFx1QzYwOFx1QkIzOFx1Qzc0NCBcdUQ0NUNcdUMyRENcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzU2VjdGlvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZXMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIGV4YW1wbGVzU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzhcdUI0RTQ6JyB9KTtcclxuICAgICAgICAgICAgY29uc3QgZXhhbXBsZUNvbnRhaW5lciA9IGV4YW1wbGVzU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlLWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlVGV4dENvbnRhaW5lciA9IGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS10ZXh0LWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hFeGFtcGxlID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFRoaXMgaXMgYW4gZXhhbXBsZSBzZW50ZW5jZSB3aXRoIHRoZSB3b3JkIFwiJHtjdXJyZW50Q2FyZC53b3JkfVwiLmAgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlbmdsaXNoRXhhbXBsZS5hZGRDbGFzcygnZW5nbGlzaC1leGFtcGxlJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUFFMzBcdUJDRjggXHVDNjA4XHVCQjM4IFx1QkMxQ1x1Qzc0QyBcdUM3QUNcdUMwREQgXHVCQzg0XHVEMkJDXHJcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVQbGF5QnV0dG9uID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgICAgICBjbHM6ICd0dHMtcGxheS1idXR0b24gZXhhbXBsZS1wbGF5LWJ1dHRvbicsXHJcbiAgICAgICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1QzYwOFx1QkIzOCBcdUJDMUNcdUM3NEMgXHVCNEUzXHVBRTMwJyB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBleGFtcGxlUGxheUJ1dHRvbi5pbm5lckhUTUwgPSAnXHVEODNEXHVERDBBJztcclxuICAgICAgICAgICAgZXhhbXBsZVBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtFeGFtcGxlKGBUaGlzIGlzIGFuIGV4YW1wbGUgc2VudGVuY2Ugd2l0aCB0aGUgd29yZCBcIiR7Y3VycmVudENhcmQud29yZH1cIi5gKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBrb3JlYW5FeGFtcGxlID0gZXhhbXBsZUNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXCIke2N1cnJlbnRDYXJkLndvcmR9XCJcdUI3N0NcdUIyOTQgXHVCMkU4XHVDNUI0XHVBQzAwIFx1RDNFQ1x1RDU2OFx1QjQxQyBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuYCBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGtvcmVhbkV4YW1wbGUuYWRkQ2xhc3MoJ2tvcmVhbi1leGFtcGxlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUM4MTVcdUIyRjUgXHVENjU1XHVDNzc4IFx1QkM4NFx1RDJCQ1xyXG4gICAgICAgIGlmICghdGhpcy5zaG93QW5zd2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrQnV0dG9uID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUUzMCcgfSk7XHJcbiAgICAgICAgICAgIGNoZWNrQnV0dG9uLmFkZENsYXNzKCdjaGVjay1hbnN3ZXItYnV0dG9uJyk7XHJcbiAgICAgICAgICAgIGNoZWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHVDODE1XHVCMkY1IFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgICAgICBjb25zdCBhbnN3ZXJTZWN0aW9uID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdhbnN3ZXItc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIGFuc3dlclNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVCNzNCOicgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lYW5pbmdzTGlzdCA9IGFuc3dlclNlY3Rpb24uY3JlYXRlRWwoJ3VsJywgeyBjbHM6ICdtZWFuaW5ncy1saXN0JyB9KTtcclxuICAgICAgICAgICAgY3VycmVudENhcmQubWVhbmluZ3MuZm9yRWFjaChtZWFuaW5nID0+IHtcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IG1lYW5pbmcgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QkM4NFx1RDJCQ1x1QjRFNFxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJldmlld0J1dHRvbnMoY2FyZENvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlUmV2aWV3QnV0dG9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgcmV2aWV3U2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXZpZXctYnV0dG9ucy1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBoYXJkQnV0dG9uID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDNUI0XHVCODI0XHVDNkMwJyB9KTtcclxuICAgICAgICBoYXJkQnV0dG9uLmFkZENsYXNzKCdyZXZpZXctYnV0dG9uJywgJ2hhcmQtYnV0dG9uJyk7XHJcbiAgICAgICAgaGFyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdoYXJkJykpO1xyXG5cclxuICAgICAgICBjb25zdCBnb29kQnV0dG9uID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDODhCXHVDNzRDJyB9KTtcclxuICAgICAgICBnb29kQnV0dG9uLmFkZENsYXNzKCdyZXZpZXctYnV0dG9uJywgJ2dvb2QtYnV0dG9uJyk7XHJcbiAgICAgICAgZ29vZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdnb29kJykpO1xyXG5cclxuICAgICAgICBjb25zdCBlYXN5QnV0dG9uID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDMjZDXHVDNkMwJyB9KTtcclxuICAgICAgICBlYXN5QnV0dG9uLmFkZENsYXNzKCdyZXZpZXctYnV0dG9uJywgJ2Vhc3ktYnV0dG9uJyk7XHJcbiAgICAgICAgZWFzeUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdlYXN5JykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUmV2aWV3KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJykge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYXJkID0gdGhpcy5jYXJkc1t0aGlzLmN1cnJlbnRDYXJkSW5kZXhdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZChjdXJyZW50Q2FyZC53b3JkLCBkaWZmaWN1bHR5KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUIyRTRcdUM3NEMgXHVDRTc0XHVCNERDXHVCODVDIFx1Qzc3NFx1QjNEOVxyXG4gICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCsrO1xyXG4gICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudENhcmQgPSB0aGlzLmNhcmRzW3RoaXMuY3VycmVudENhcmRJbmRleF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcclxuICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDJyxcclxuICAgICAgICAgICAgYFwiJHtjdXJyZW50Q2FyZC53b3JkfVwiIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUMwQURcdUM4MUNcdUQ1NThcdUMyRENcdUFDQTBcdUMyQjVcdUIyQzhcdUFFNEM/XFxuXFxuXHVDNzc0IFx1Qzc5MVx1QzVDNVx1Qzc0MCBcdUI0MThcdUIzQ0NcdUI5QjQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gLFxyXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnJlbW92ZVdvcmQoY3VycmVudENhcmQud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QjJFOFx1QzVCNCBcdUJBQTlcdUI4NURcdUM1RDBcdUMxMUNcdUIzQzQgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkcy5zcGxpY2UodGhpcy5jdXJyZW50Q2FyZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUFDMDAgXHVCMzU0IFx1Qzc3NFx1QzBDMSBcdUM1QzZcdUM3M0NcdUJBNzQgXHVDNjQ0XHVCOENDIFx1RDY1NFx1QkE3NFx1QzczQ1x1Qjg1Q1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb21wbGV0aW9uTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUM3NzhcdUIzNzFcdUMyQTRcdUFDMDAgXHVCMkU4XHVDNUI0IFx1QkFBOVx1Qjg1RCBcdUJDOTRcdUM3MDRcdUI5N0MgXHVCQzk3XHVDNUI0XHVCMDk4XHVCQTc0IFx1Qzg3MFx1QzgxNVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkSW5kZXggPj0gdGhpcy5jYXJkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4ID0gdGhpcy5jYXJkcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUIyRTRcdUM3NEMgXHVCMkU4XHVDNUI0IFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQyBcdUM5MTEgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQyBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dDb21wbGV0aW9uTWVzc2FnZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbGVhcm5pbmctbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxyXG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZXZpZXctbW9kYWwtaGVpZ2h0JywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHR9dmhgKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29tcGxldGlvbkVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbXBsZXRpb24tbWVzc2FnZScgfSk7XHJcbiAgICAgICAgY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDU1OVx1QzJCNSBcdUM2NDRcdUI4Q0MhJyB9KTtcclxuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBcdUM2MjRcdUIyOTggJHt0aGlzLmNhcmRzLmxlbmd0aH1cdUFDMUNcdUM3NTggXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNVx1Qzc0NCBcdUM2NDRcdUI4Q0NcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuYCB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdGFydEJ1dHRvbiA9IGNvbXBsZXRpb25FbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkU0XHVDMkRDIFx1RDU1OVx1QzJCNVx1RDU1OFx1QUUzMCcgfSk7XHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRDbGFzcygncmVzdGFydC1idXR0b24nKTtcclxuICAgICAgICByZXN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGNvbXBsZXRpb25FbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkVCXHVBRTMwJyB9KTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRDbGFzcygnY2xvc2UtYnV0dG9uJyk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmtleWRvd25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlkb3duSGFuZGxlcik7XHJcbiAgICAgICAgICAgIHRoaXMua2V5ZG93bkhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVBQzA0XHVCMkU4XHVENTVDIFx1RDY1NVx1Qzc3OCBcdUJBQThcdUIyRUMgXHVEMDc0XHVCNzk4XHVDMkE0XHJcbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICBvbkNvbmZpcm06ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgb25Db25maXJtOiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICB0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybTtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdjb25maXJtLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMudGl0bGUsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSwgY2xzOiAnbW9kYWwtbWVzc2FnZScgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVENjU1XHVDNzc4JyxcclxuICAgICAgICAgICAgY2xzOiAnY29uZmlybS1idXR0b24gcHJpbWFyeSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlybSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5pbnRlcmZhY2UgVFRTU2V0dGluZ3Mge1xuICAgIGVuYWJsZWQ6IGJvb2xlYW47XG4gICAgdm9pY2U6IHN0cmluZztcbiAgICBwbGF5YmFja1NwZWVkOiBudW1iZXI7XG4gICAgYXV0b1BsYXk6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBUVFNTZXJ2aWNlIHtcbiAgICBwcml2YXRlIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgc2V0dGluZ3M6IFRUU1NldHRpbmdzO1xuXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFRUU1NldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB9XG5cbiAgICBhc3luYyBzcGVha1RleHQodGV4dDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVkKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdUVFMgXHVBRTMwXHVCMkE1XHVDNzc0IFx1QkU0NFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzVCNCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRWRnZSBUVFNcdUFDMDAgXHVDMTI0XHVDRTU4XHVCNDE4XHVDNUI0IFx1Qzc4OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcbiAgICAgICAgICAgIGlmICghd2luZG93LnNwZWVjaFN5bnRoZXNpcykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc3NCBcdUJFMENcdUI3N0NcdUM2QjBcdUM4MDBcdUIyOTQgXHVDNzRDXHVDMTMxIFx1RDU2OVx1QzEzMVx1Qzc0NCBcdUM5QzBcdUM2RDBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzdBQ1x1QzBERCBcdUM5MTFcdUM3NzggXHVDNzRDXHVDMTMxXHVDNzc0IFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM5MTFcdUM5QzBcbiAgICAgICAgICAgIHRoaXMuc3RvcFNwZWFraW5nKCk7XG5cbiAgICAgICAgICAgIC8vIFx1Qzc0Q1x1QzEzMSBcdUQ1NjlcdUMxMzEgXHVDMTI0XHVDODE1XG4gICAgICAgICAgICBjb25zdCB1dHRlcmFuY2UgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKHRleHQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUM2MDFcdUM1QjQgXHVDNzRDXHVDMTMxXHVDNzNDXHVCODVDIFx1QzEyNFx1QzgxNVxuICAgICAgICAgICAgdXR0ZXJhbmNlLmxhbmcgPSAnZW4tVVMnO1xuICAgICAgICAgICAgdXR0ZXJhbmNlLnJhdGUgPSB0aGlzLnNldHRpbmdzLnBsYXliYWNrU3BlZWQ7XG4gICAgICAgICAgICB1dHRlcmFuY2Uudm9sdW1lID0gMS4wO1xuXG4gICAgICAgICAgICAvLyBcdUMwQUNcdUM2QTkgXHVBQzAwXHVCMkE1XHVENTVDIFx1Qzc0Q1x1QzEzMSBcdUM5MTFcdUM1RDBcdUMxMUMgXHVDMTI0XHVDODE1XHVCNDFDIFx1Qzc0Q1x1QzEzMSBcdUNDM0VcdUFFMzBcbiAgICAgICAgICAgIGNvbnN0IHZvaWNlcyA9IHNwZWVjaFN5bnRoZXNpcy5nZXRWb2ljZXMoKTtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVm9pY2UgPSB2b2ljZXMuZmluZCh2b2ljZSA9PiBcbiAgICAgICAgICAgICAgICB2b2ljZS5uYW1lID09PSB0aGlzLnNldHRpbmdzLnZvaWNlIHx8IFxuICAgICAgICAgICAgICAgIHZvaWNlLmxhbmcuc3RhcnRzV2l0aCgnZW4nKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkVm9pY2UpIHtcbiAgICAgICAgICAgICAgICB1dHRlcmFuY2Uudm9pY2UgPSBzZWxlY3RlZFZvaWNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBcdUM3NENcdUMxMzEgXHVDN0FDXHVDMEREXG4gICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsodXR0ZXJhbmNlKTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVFRTIFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3NENcdUMxMzEgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc3BlYWtXb3JkKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnNwZWFrVGV4dCh3b3JkKTtcbiAgICB9XG5cbiAgICBhc3luYyBzcGVha0V4YW1wbGUoZXhhbXBsZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuc3BlYWtUZXh0KGV4YW1wbGUpO1xuICAgIH1cblxuICAgIHN0b3BTcGVha2luZygpOiB2b2lkIHtcbiAgICAgICAgaWYgKHNwZWVjaFN5bnRoZXNpcy5zcGVha2luZykge1xuICAgICAgICAgICAgc3BlZWNoU3ludGhlc2lzLmNhbmNlbCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCk7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5jdXJyZW50VGltZSA9IDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5nczogUGFydGlhbDxUVFNTZXR0aW5ncz4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogU3BlZWNoU3ludGhlc2lzVm9pY2VbXSB7XG4gICAgICAgIHJldHVybiBzcGVlY2hTeW50aGVzaXMuZ2V0Vm9pY2VzKCkuZmlsdGVyKHZvaWNlID0+IFxuICAgICAgICAgICAgdm9pY2UubGFuZy5zdGFydHNXaXRoKCdlbicpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaXNFbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5lbmFibGVkO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQsIEJvb2sgfSBmcm9tICcuL1ZvY2FidWxhcnlDYXJkJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB9IGZyb20gJy4vVm9jYWJ1bGFyeURhdGFiYXNlJztcclxuaW1wb3J0IHsgV29yZFNlcnZpY2UgfSBmcm9tICcuL1dvcmRTZXJ2aWNlJztcclxuaW1wb3J0IHsgTExNU2VydmljZSB9IGZyb20gJy4vTExNU2VydmljZSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlNb2RhbCB9IGZyb20gJy4vVm9jYWJ1bGFyeU1vZGFsJztcclxuaW1wb3J0IHsgQWRkQm9va01vZGFsIH0gZnJvbSAnLi9BZGRCb29rTW9kYWwnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlNYW5hZ2VyTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG4gICAgZGF0YWJhc2VNYW5hZ2VyOiBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyO1xyXG4gICAgd29yZFNlcnZpY2U6IFdvcmRTZXJ2aWNlO1xyXG4gICAgbGxtU2VydmljZTogTExNU2VydmljZTtcclxuICAgIGN1cnJlbnRWaWV3OiAnbGlzdCcgfCAnc3RhdGlzdGljcycgfCAnYWRkJyA9ICdsaXN0JztcclxuICAgIHNlbGVjdGVkV29yZHM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xyXG4gICAgc2VsZWN0ZWRCb29rSWQ6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlTWFuYWdlciA9IHBsdWdpbi5kYXRhYmFzZU1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy53b3JkU2VydmljZSA9IG5ldyBXb3JkU2VydmljZSgpO1xyXG4gICAgICAgIHRoaXMubGxtU2VydmljZSA9IHBsdWdpbi5sbG1TZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRDdXJyZW50Qm9vaygpPy5pZCB8fCAnZGVmYXVsdCc7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1tYW5hZ2VyLW1vZGFsJyk7XHJcbiAgICAgICAgY29udGVudEVsLmNsYXNzTGlzdC5hZGQoJ3dpZGUtbWFuYWdlci1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVDRDVDXHVDMkUwIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0RENcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0Q3VycmVudEJvb2soKT8uaWQgfHwgJ2RlZmF1bHQnO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZUJvb2tTZWxlY3RvckhlYWRlcigpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlTmF2aWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzEgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUNEOTRcdUFDMDBcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdib29rQ3JlYXRlZCcsIHRoaXMuaGFuZGxlQm9va0NyZWF0ZWQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVCb29rQ3JlYXRlZChldmVudDogQ3VzdG9tRXZlbnQpIHtcclxuICAgICAgICBjb25zdCBuZXdCb29rID0gZXZlbnQuZGV0YWlsO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSBuZXdCb29rLmlkO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEJvb2tTZWxlY3RvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQm9va1NlbGVjdG9ySGVhZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckVsID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbWFuYWdlci1oZWFkZXInIH0pO1xyXG4gICAgICAgIGhlYWRlckVsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgaGVhZGVyRWwuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG4gICAgICAgIGhlYWRlckVsLnN0eWxlLmdhcCA9ICcxOHB4JztcclxuICAgICAgICBoZWFkZXJFbC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMThweCc7XHJcblxyXG4gICAgICAgIGNvbnN0IGJvb2tzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsQm9va3MoKTtcclxuICAgICAgICBjb25zdCBib29rU2VsZWN0ID0gaGVhZGVyRWwuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnYm9vay1zZWxlY3QtZHJvcGRvd24nIH0pO1xyXG4gICAgICAgIGJvb2tTZWxlY3Quc3R5bGUuaGVpZ2h0ID0gJzM4cHgnO1xyXG4gICAgICAgIGJvb2tTZWxlY3Quc3R5bGUuZm9udFNpemUgPSAnMTZweCc7XHJcbiAgICAgICAgYm9va3MuZm9yRWFjaChib29rID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGJvb2suaWQ7XHJcbiAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gYm9vay5uYW1lO1xyXG4gICAgICAgICAgICBpZiAoYm9vay5pZCA9PT0gdGhpcy5zZWxlY3RlZEJvb2tJZCkgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgYm9va1NlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJvb2tTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNldEN1cnJlbnRCb29rKHRoaXMuc2VsZWN0ZWRCb29rSWQpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhZGRCb29rQnRuID0gaGVhZGVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzBDOCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDRDk0XHVBQzAwJywgY2xzOiAnYm9vay1tYW5hZ2UtYnV0dG9uJyB9KTtcclxuICAgICAgICBhZGRCb29rQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhZGRCb29rTW9kYWwgPSBuZXcgQWRkQm9va01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbik7XHJcbiAgICAgICAgICAgIGFkZEJvb2tNb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QzBERFx1QzEzMVx1QjQxOFx1QkE3NCBcdUI0RENcdUI4NkRcdUIyRTRcdUM2QjRcdUFDRkMgXHVDMTIwXHVEMEREXHVDNzQ0IFx1QzBDOFx1Qjg1Q1x1QUNFMFx1Q0U2OFxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQm9va1NlbGVjdG9yKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGFkZEJvb2tNb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlbEJvb2tCdG4gPSBoZWFkZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVENjA0XHVDN0FDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwQURcdUM4MUMnLCBjbHM6ICdib29rLWRlbGV0ZS1idXR0b24nIH0pO1xyXG4gICAgICAgIGNvbnN0IGlzRGVmYXVsdCA9IHRoaXMuc2VsZWN0ZWRCb29rSWQgPT09ICdkZWZhdWx0JztcclxuICAgICAgICBpZiAoaXNEZWZhdWx0KSB7XHJcbiAgICAgICAgICAgIGRlbEJvb2tCdG4uc2V0QXR0cignZGlzYWJsZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICBkZWxCb29rQnRuLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxCb29rQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNEZWZhdWx0KSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MTVcdUJDRjQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCb29rID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0Qm9vayh0aGlzLnNlbGVjdGVkQm9va0lkKTtcclxuICAgICAgICAgICAgaWYgKCFjdXJyZW50Qm9vaykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzU4IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVENjU1XHVDNzc4XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRzSW5Cb29rID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZHNCeUJvb2sodGhpcy5zZWxlY3RlZEJvb2tJZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRDb3VudCA9IHdvcmRzSW5Cb29rLmxlbmd0aDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QzBDMVx1QzEzOFx1RDU1QyBcdUQ2NTVcdUM3NzggXHVCQUE4XHVCMkVDIFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICAgICAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBBRFx1QzgxQyBcdUQ2NTVcdUM3NzgnLFxyXG4gICAgICAgICAgICAgICAgYFx1QzgxNVx1QjlEMFx1Qjg1QyBcIiR7Y3VycmVudEJvb2submFtZX1cIiBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVDMEFEXHVDODFDXHVENTU4XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDP1xcblxcbmAgK1xyXG4gICAgICAgICAgICAgICAgYFx1MjAyMiBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0OiAke2N1cnJlbnRCb29rLm5hbWV9XFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXHUyMDIyIFx1RDNFQ1x1RDU2OFx1QjQxQyBcdUIyRThcdUM1QjQgXHVDMjE4OiAke3dvcmRDb3VudH1cdUFDMUNcXG5gICtcclxuICAgICAgICAgICAgICAgIGBcdTIwMjIgXHVDMEREXHVDMTMxXHVDNzdDOiAke25ldyBEYXRlKGN1cnJlbnRCb29rLmNyZWF0ZWRBdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdrby1LUicpfVxcblxcbmAgK1xyXG4gICAgICAgICAgICAgICAgYFx1MjZBMFx1RkUwRiBcdUM3NzQgXHVDNzkxXHVDNUM1XHVDNzQwIFx1QjQxOFx1QjNDQ1x1QjlCNCBcdUMyMTggXHVDNUM2XHVDNzNDXHVCQTcwLCBcdUIyRThcdUM1QjRcdUM3QTVcdUFDRkMgXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM2MDFcdUFENkNcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEFEXHVDODFDXHVCNDI5XHVCMkM4XHVCMkU0LmAsXHJcbiAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuZGVsZXRlQm9vayh0aGlzLnNlbGVjdGVkQm9va0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9ICdkZWZhdWx0JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2V0Q3VycmVudEJvb2soJ2RlZmF1bHQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke2N1cnJlbnRCb29rLm5hbWV9XCIgXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwQURcdUM4MUNcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEFEXHVDODFDIFx1QzJFNFx1RDMyODogJyArIGUubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlTmF2aWdhdGlvbigpIHtcclxuICAgICAgICBjb25zdCBuYXZFbCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21hbmFnZXItbmF2aWdhdGlvbicgfSk7XHJcbiAgICAgICAgY29uc3QgbGlzdEJ0biA9IG5hdkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRThcdUM1QjQgXHVCQUE5XHVCODVEJywgY2xzOiAnbmF2LWJ1dHRvbicgfSk7XHJcbiAgICAgICAgbGlzdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9ICdsaXN0JztcclxuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzdGF0c0J0biA9IG5hdkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUQxQjVcdUFDQzQnLCBjbHM6ICduYXYtYnV0dG9uJyB9KTtcclxuICAgICAgICBzdGF0c0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9ICdzdGF0aXN0aWNzJztcclxuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBhZGRCdG4gPSBuYXZFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsIGNsczogJ25hdi1idXR0b24nIH0pO1xyXG4gICAgICAgIGFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9ICdhZGQnO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0TGVhcm5pbmdCdXR0b24gPSBuYXZFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QzgwNFx1Q0NCNCBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNSBcdUMyRENcdUM3OTEnLFxyXG4gICAgICAgICAgICBjbHM6ICduYXYtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN0YXJ0TGVhcm5pbmdCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgbmV3IFZvY2FidWxhcnlNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQWR2YW5jZWRGZWF0dXJlcykge1xyXG4gICAgICAgICAgICBjb25zdCBmZXRjaEFsbEJ1dHRvbiA9IG5hdkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1QzgwNFx1Q0NCNCBcdUIyRThcdUM1QjQgXHVCNzNCIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCcsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICduYXYtYnV0dG9uJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZmV0Y2hBbGxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dGZXRjaEFsbE1lYW5pbmdzTW9kYWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0N1cnJlbnRWaWV3KCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5tYW5hZ2VyLWNvbnRlbnQnKSB8fCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21hbmFnZXItY29udGVudCcgfSk7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnRWaWV3KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xpc3QnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93V29yZExpc3QoY29udGVudEVsIGFzIEhUTUxFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzdGF0aXN0aWNzJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N0YXRpc3RpY3MoY29udGVudEVsIGFzIEhUTUxFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhZGQnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QWRkV29yZChjb250ZW50RWwgYXMgSFRNTEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1dvcmRMaXN0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCB3b3JkcyA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHdvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUJFNDRcdUM1QjRcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NzRcdUJDRjRcdUMxMzhcdUM2OTQhJyxcclxuICAgICAgICAgICAgICAgIGNsczogJ2VtcHR5LW1lc3NhZ2UnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzZWFyY2hFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZWFyY2gtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzZWFyY2hFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdUIyRThcdUM1QjQgXHVBQzgwXHVDMEM5Li4uJyxcclxuICAgICAgICAgICAgY2xzOiAnc2VhcmNoLWlucHV0J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBzZWxlY3Rpb25Db250cm9scyA9IHNlYXJjaEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NlbGVjdGlvbi1jb250cm9scycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYWxsU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkV29yZHMuc2l6ZSA9PT0gd29yZHMubGVuZ3RoICYmIHdvcmRzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gc2VsZWN0aW9uQ29udHJvbHMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IGFsbFNlbGVjdGVkID8gJ1x1QzgwNFx1Q0NCNCBcdUQ1NzRcdUM4MUMnIDogJ1x1QzgwNFx1Q0NCNCBcdUMxMjBcdUQwREQnLFxyXG4gICAgICAgICAgICBjbHM6ICdzZWxlY3Rpb24tYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRXb3Jkcy5zaXplID09PSB3b3Jkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5jbGVhcigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4gdGhpcy5zZWxlY3RlZFdvcmRzLmFkZCh3b3JkLndvcmQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBmZXRjaFNlbGVjdGVkQnV0dG9uID0gc2VsZWN0aW9uQ29udHJvbHMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUMxMjBcdUQwREQgXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxyXG4gICAgICAgICAgICBjbHM6ICdmZXRjaC1zZWxlY3RlZC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZmV0Y2hTZWxlY3RlZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRXb3Jkcy5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUMxMjBcdUQwRERcdUI0MUMgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNob3dGZXRjaFNlbGVjdGVkTWVhbmluZ3NNb2RhbCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB3b3JkTGlzdEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtbGlzdCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcmVuZGVyV29yZHMgPSAoZmlsdGVyZWRXb3JkczogVm9jYWJ1bGFyeUNhcmRbXSkgPT4ge1xyXG4gICAgICAgICAgICB3b3JkTGlzdEVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIGZpbHRlcmVkV29yZHMuZm9yRWFjaCh3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlV29yZEl0ZW0od29yZExpc3RFbCwgd29yZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcXVlcnkgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkV29yZHMgPSBxdWVyeSA/IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2VhcmNoV29yZHMocXVlcnkpIDogd29yZHM7XHJcbiAgICAgICAgICAgIHJlbmRlcldvcmRzKGZpbHRlcmVkV29yZHMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZW5kZXJXb3Jkcyh3b3Jkcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVXb3JkSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCB3b3JkOiBWb2NhYnVsYXJ5Q2FyZCkge1xyXG4gICAgICAgIGNvbnN0IHdvcmRFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWl0ZW0nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gd29yZEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcclxuICAgICAgICAgICAgY2xzOiAnd29yZC1jaGVja2JveCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZFdvcmRzLmhhcyh3b3JkLndvcmQpO1xyXG4gICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkO1xyXG4gICAgICAgICAgICBpZiAoaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuYWRkKHdvcmQud29yZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuZGVsZXRlKHdvcmQud29yZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB3b3JkSGVhZGVyID0gd29yZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtaGVhZGVyJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB3b3JkVGl0bGVFbCA9IHdvcmRIZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyBjbHM6ICd3b3JkLXRpdGxlJyB9KTtcclxuICAgICAgICBpZiAod29yZC5wcm9udW5jaWF0aW9uICYmIHdvcmQucHJvbnVuY2lhdGlvbi50cmltKCkpIHtcclxuICAgICAgICAgICAgd29yZFRpdGxlRWwuaW5uZXJIVE1MID0gYCR7d29yZC53b3JkfSA8c3BhbiBjbGFzcz1cInByb251bmNpYXRpb25cIj5bJHt3b3JkLnByb251bmNpYXRpb259XTwvc3Bhbj5gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdvcmRUaXRsZUVsLnRleHRDb250ZW50ID0gd29yZC53b3JkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5QmFkZ2UgPSB3b3JkSGVhZGVyLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgdGV4dDogdGhpcy5nZXREaWZmaWN1bHR5VGV4dCh3b3JkLmRpZmZpY3VsdHkpLFxyXG4gICAgICAgICAgICBjbHM6IGBkaWZmaWN1bHR5LWJhZGdlICR7d29yZC5kaWZmaWN1bHR5fWBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZENvbnRlbnQgPSB3b3JkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1jb250ZW50JyB9KTtcclxuICAgICAgICB3b3JkQ29udGVudC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IGBcdUI3M0I6ICR7d29yZC5tZWFuaW5ncy5qb2luKCcsICcpfWAsXHJcbiAgICAgICAgICAgIGNsczogJ3dvcmQtbWVhbmluZ3MnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgd29yZENvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiBgXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxODogJHt3b3JkLnJldmlld0NvdW50fVx1RDY4Q2AsXHJcbiAgICAgICAgICAgIGNsczogJ3Jldmlldy1jb3VudCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHdvcmQubGFzdFJldmlld2VkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RSZXZpZXdEYXRlID0gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpLnRvTG9jYWxlRGF0ZVN0cmluZygna28tS1InKTtcclxuICAgICAgICAgICAgd29yZENvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDRjVcdUMyQjU6ICR7bGFzdFJldmlld0RhdGV9YCxcclxuICAgICAgICAgICAgICAgIGNsczogJ2xhc3QtcmV2aWV3ZWQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgd29yZEFjdGlvbnMgPSB3b3JkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1hY3Rpb25zJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQWR2YW5jZWRGZWF0dXJlcykge1xyXG4gICAgICAgICAgICBjb25zdCBmZXRjaEJ1dHRvbiA9IHdvcmRBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwJyxcclxuICAgICAgICAgICAgICAgIGNsczogJ2FjdGlvbi1idXR0b24gZmV0Y2gtc2luZ2xlLWJ1dHRvbidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZldGNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mZXRjaFNpbmdsZVdvcmRNZWFuaW5nKHdvcmQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IHdvcmRBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDMEFEXHVDODFDJyxcclxuICAgICAgICAgICAgY2xzOiAnYWN0aW9uLWJ1dHRvbiBkZWxldGUtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAgICAgJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMnLFxyXG4gICAgICAgICAgICAgICAgYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0XHVCOTdDIFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz9gLFxyXG4gICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnJlbW92ZVdvcmQod29yZC53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1N0YXRpc3RpY3MoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0U3RhdGlzdGljcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHN0YXRzR3JpZCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0cy1ncmlkJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBiYXNpY1N0YXRzID0gc3RhdHNHcmlkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXRzLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIGJhc2ljU3RhdHMuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVBRTMwXHVCQ0Y4IFx1RDFCNVx1QUNDNCcsIGNsczogJ3N0YXRzLXRpdGxlJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGJhc2ljU3RhdHMsICdcdUNEMUQgXHVCMkU4XHVDNUI0IFx1QzIxOCcsIHN0YXRzLnRvdGFsV29yZHMudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShiYXNpY1N0YXRzLCAnXHVDRDFEIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTgnLCBzdGF0cy50b3RhbFJldmlld3MudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShiYXNpY1N0YXRzLCAnXHVDNUYwXHVDMThEIFx1RDU1OVx1QzJCNVx1Qzc3QycsIGAke3N0YXRzLnN0cmVha0RheXN9XHVDNzdDYCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShiYXNpY1N0YXRzLCAnXHVEM0M5XHVBREUwIFx1QjA5Q1x1Qzc3NFx1QjNDNCcsIHN0YXRzLmF2ZXJhZ2VEaWZmaWN1bHR5LnRvRml4ZWQoMSkpO1xyXG5cclxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5U3RhdHMgPSBzdGF0c0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3RhdHMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgZGlmZmljdWx0eVN0YXRzLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QjA5Q1x1Qzc3NFx1QjNDNFx1QkNDNCBcdUJEODRcdUQzRUMnLCBjbHM6ICdzdGF0cy10aXRsZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShkaWZmaWN1bHR5U3RhdHMsICdcdUMyNkNcdUM2QzAnLCBzdGF0cy53b3Jkc0J5RGlmZmljdWx0eS5lYXN5LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oZGlmZmljdWx0eVN0YXRzLCAnXHVDODhCXHVDNzRDJywgc3RhdHMud29yZHNCeURpZmZpY3VsdHkuZ29vZC50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGRpZmZpY3VsdHlTdGF0cywgJ1x1QzVCNFx1QjgyNFx1QzZDMCcsIHN0YXRzLndvcmRzQnlEaWZmaWN1bHR5LmhhcmQudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGl2aXR5U3RhdHMgPSBzdGF0c0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3RhdHMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgYWN0aXZpdHlTdGF0cy5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUNENUNcdUFERkMgN1x1Qzc3QyBcdUQ2NUNcdUIzRDknLCBjbHM6ICdzdGF0cy10aXRsZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3RhdHMucmVjZW50QWN0aXZpdHkuZm9yRWFjaChhY3Rpdml0eSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShhY3Rpdml0eS5kYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoJ2tvLUtSJywgeyBcclxuICAgICAgICAgICAgICAgIG1vbnRoOiAnc2hvcnQnLCBcclxuICAgICAgICAgICAgICAgIGRheTogJ251bWVyaWMnIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShhY3Rpdml0eVN0YXRzLCBkYXRlLCBcclxuICAgICAgICAgICAgICAgIGBcdUQ1NTlcdUMyQjU6ICR7YWN0aXZpdHkud29yZHNTdHVkaWVkfSwgXHVCQ0Y1XHVDMkI1OiAke2FjdGl2aXR5LnJldmlld3NDb21wbGV0ZWR9YCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVTdGF0SXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXQtaXRlbScgfSk7XHJcbiAgICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBsYWJlbCwgY2xzOiAnc3RhdC1sYWJlbCcgfSk7XHJcbiAgICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB2YWx1ZSwgY2xzOiAnc3RhdC12YWx1ZScgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93QWRkV29yZChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgYWRkU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdhZGQtd29yZC1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzBDOCBcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJywgY2xzOiAnc2VjdGlvbi10aXRsZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaW5wdXRFbCA9IGFkZFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1pbnB1dC1ncm91cCcgfSk7XHJcbiAgICAgICAgY29uc3Qgd29yZElucHV0ID0gaW5wdXRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdUM2MDFcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0IChcdUM2MDg6IGJlYXV0aWZ1bCknLFxyXG4gICAgICAgICAgICBjbHM6ICd3b3JkLWlucHV0J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSBpbnB1dEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2FkZC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZFdvcmQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmQgPSB3b3JkSW5wdXQudmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAoIXdvcmQpIHtcclxuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnZXJyb3ItbWVzc2FnZSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZERhdGEgPSBhd2FpdCB0aGlzLndvcmRTZXJ2aWNlLmdldFdvcmREYXRhKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgdm9jYWJ1bGFyeUNhcmQ6IFZvY2FidWxhcnlDYXJkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLndvcmREYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6ICdnb29kJyxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkZWREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYm9va0lkOiB0aGlzLnNlbGVjdGVkQm9va0lkXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuYWRkV29yZCh2b2NhYnVsYXJ5Q2FyZCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHdvcmRJbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYFwiJHt3b3JkfVwiIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDRDk0XHVBQzAwXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0IWAsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnc3VjY2Vzcy1tZXNzYWdlJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NNc2cgPSBhZGRTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zdWNjZXNzLW1lc3NhZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzc01zZykgc3VjY2Vzc01zZy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NThcdUIyOTQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdlcnJvci1tZXNzYWdlJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRXb3JkKTtcclxuICAgICAgICB3b3JkSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgICAgIGFkZFdvcmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGlmZmljdWx0eVRleHQoZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnKTogc3RyaW5nIHtcclxuICAgICAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcclxuICAgICAgICAgICAgY2FzZSAnZWFzeSc6IHJldHVybiAnXHVDMjZDXHVDNkMwJztcclxuICAgICAgICAgICAgY2FzZSAnZ29vZCc6IHJldHVybiAnXHVDODhCXHVDNzRDJztcclxuICAgICAgICAgICAgY2FzZSAnaGFyZCc6IHJldHVybiAnXHVDNUI0XHVCODI0XHVDNkMwJztcclxuICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuICdcdUM4OEJcdUM3NEMnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXJ0UmV2aWV3KHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSB7XHJcbiAgICAgICAgY29uc3QgcmV2aWV3TW9kYWwgPSBuZXcgVm9jYWJ1bGFyeVJldmlld01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgd29yZHMpO1xyXG4gICAgICAgIHJldmlld01vZGFsLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dGZXRjaFNlbGVjdGVkTWVhbmluZ3NNb2RhbCgpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZFdvcmRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkV29yZHMpO1xyXG4gICAgICAgIG5ldyBGZXRjaFNlbGVjdGVkTWVhbmluZ3NNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIHNlbGVjdGVkV29yZExpc3QpLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dGZXRjaEFsbE1lYW5pbmdzTW9kYWwoKSB7XHJcbiAgICAgICAgbmV3IEZldGNoQWxsTWVhbmluZ3NNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGZldGNoU2luZ2xlV29yZE1lYW5pbmcod29yZDogVm9jYWJ1bGFyeUNhcmQpIHtcclxuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdMTE0gQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUMxMjRcdUM4MTVcdUM1RDBcdUMxMUMgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxyXG4gICAgICAgICAgICBgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjRcdUM3NTggXHVCNzNCXHVDNzQ0IFx1QzBDOFx1Qjg1QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUMyRENcdUFDQTBcdUMyQjVcdUIyQzhcdUFFNEM/IFx1QUUzMFx1Qzg3NCBcdUM4MTVcdUJDRjRcdUFDMDBcdUM1QjRcdUM1MENcdUM2Q0NcdUM5RDFcdUIyQzhcdUIyRTQuYCxcclxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMS4uLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxsbVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4ubGxtU2VydmljZS5nZXRXb3JkRGV0YWlscyh3b3JkLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsbG1SZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREZXRhaWwgPSBsbG1SZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IHRoaXMucGx1Z2luLmxsbVNlcnZpY2UuY29udmVydFRvV29yZERhdGEod29yZERldGFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkV29yZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLndvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogd29yZERhdGEubWVhbmluZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZERhdGEuZXhhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREYXRhLnNpbWlsYXJXb3Jkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmREYXRhKHdvcmQud29yZCwgdXBkYXRlZFdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUFDMDAgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCBcdUMyRTRcdUQzMjg6ICR7bGxtUmVzcG9uc2UuZXJyb3J9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmQud29yZH1cIiBcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNCBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyByZWZyZXNoQm9va1NlbGVjdG9yKCkge1xyXG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVCMkU0XHVDMkRDIFx1Qjg1Q1x1QjREQ1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDVFNFx1QjM1NFx1Qzc1OCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTIwXHVEMEREIFx1QjREQ1x1Qjg2RFx1QjJFNFx1QzZCNFx1Qzc0NCBcdUMwQzhcdUI4NUNcdUFDRTBcdUNFNjhcclxuICAgICAgICBjb25zdCBoZWFkZXJFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5tYW5hZ2VyLWhlYWRlcicpO1xyXG4gICAgICAgIGlmIChoZWFkZXJFbCkge1xyXG4gICAgICAgICAgICBjb25zdCBib29rU2VsZWN0ID0gaGVhZGVyRWwucXVlcnlTZWxlY3RvcignLmJvb2stc2VsZWN0LWRyb3Bkb3duJykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChib29rU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBib29rU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYm9va3MgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVDNjM1XHVDMTU4XHVCNEU0IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgICAgICAgICAgYm9va1NlbGVjdC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVDMEM4XHVCODVDXHVDNkI0IFx1QzYzNVx1QzE1OFx1QjRFNCBcdUNEOTRcdUFDMDBcclxuICAgICAgICAgICAgICAgIGJvb2tzLmZvckVhY2goYm9vayA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gYm9vay5pZDtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24udGV4dCA9IGJvb2submFtZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYm9vay5pZCA9PT0gY3VycmVudFZhbHVlIHx8IGJvb2suaWQgPT09IHRoaXMuc2VsZWN0ZWRCb29rSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IGJvb2suaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUJERjAgXHVDMEM4XHVCODVDXHVBQ0UwXHVDRTY4XHJcbiAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYm9va0NyZWF0ZWQnLCB0aGlzLmhhbmRsZUJvb2tDcmVhdGVkLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBGZXRjaEFsbE1lYW5pbmdzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG4gICAgaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2ZldGNoLWFsbC1tZWFuaW5ncy1tb2RhbCcpO1xyXG5cclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVDODA0XHVDQ0I0IFx1QjJFOFx1QzVCNCBcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwJywgY2xzOiAnbW9kYWwtdGl0bGUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUM4MDBcdUM3QTVcdUI0MUMgXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNFx1Qzc1OCBcdUMwQzFcdUMxMzggXHVDODE1XHVCQ0Y0XHVCOTdDIExMTSBBUElcdUI5N0MgXHVEMUI1XHVENTc0IFx1QzBDOFx1Qjg1QyBcdUFDMDBcdUM4MzhcdUM2MzVcdUIyQzhcdUIyRTQuIChcdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzgsIFx1QjczQiwgXHVDNjA4XHVCQjM4LCBcdUJDODhcdUM1RUQpJyxcclxuICAgICAgICAgICAgY2xzOiAnbW9kYWwtZGVzY3JpcHRpb24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHdhcm5pbmdFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3YXJuaW5nLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIHdhcm5pbmdFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdTI2QTBcdUZFMEYgXHVDOEZDXHVDNzU4OiBcdUM3NzQgXHVDNzkxXHVDNUM1XHVDNzQwIFx1QzgwMFx1QzdBNVx1QjQxQyBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0XHVDNzU4IFx1QUUzMFx1Qzg3NCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVCMzZFXHVDNUI0XHVDNTBDXHVDNkMxXHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgIGNsczogJ3dhcm5pbmctdGV4dCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKTtcclxuICAgICAgICBpZiAod29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBwcmV2aWV3RWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZHMtcHJldmlldycgfSk7XHJcbiAgICAgICAgICAgIHByZXZpZXdFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUNDOThcdUI5QUNcdUQ1NjAgXHVCMkU4XHVDNUI0IFx1QkFBOVx1Qjg1RDonLCBjbHM6ICdwcmV2aWV3LXRpdGxlJyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRzTGlzdCA9IHByZXZpZXdFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3Jkcy1saXN0JyB9KTtcclxuICAgICAgICAgICAgd29yZHMuc2xpY2UoMCwgMTApLmZvckVhY2god29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB3b3Jkc0xpc3QuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IHdvcmQud29yZCwgY2xzOiAnd29yZC1wcmV2aWV3JyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAod29yZHMubGVuZ3RoID4gMTApIHtcclxuICAgICAgICAgICAgICAgIHdvcmRzTGlzdC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYC4uLiBcdUM2NzggJHt3b3Jkcy5sZW5ndGggLSAxMH1cdUFDMUNgLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ21vcmUtd29yZHMnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZmV0Y2hCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDODA0XHVDQ0I0IFx1QjJFOFx1QzVCNCBcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwJyxcclxuICAgICAgICAgICAgY2xzOiAnZmV0Y2gtYnV0dG9uIHByaW1hcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZmV0Y2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmZldGNoQWxsTWVhbmluZ3MoKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1zZWN0aW9uJyB9KTtcclxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTQgXHVDOTExLi4uJyxcclxuICAgICAgICAgICAgY2xzOiAncHJvZ3Jlc3MtdGV4dCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwcm9ncmVzc0JhciA9IHByb2dyZXNzU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1iYXInIH0pO1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzRmlsbCA9IHByb2dyZXNzQmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWZpbGwnIH0pO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHRTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1zZWN0aW9uJyB9KTtcclxuICAgICAgICByZXN1bHRTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBmZXRjaEFsbE1lYW5pbmdzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZykgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCB3b3JkcyA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxXb3JkcygpO1xyXG4gICAgICAgIGlmICh3b3Jkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDODAwXHVDN0E1XHVCNDFDIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5KSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0xMTSBBUEkgXHVEMEE0XHVBQzAwIFx1QzEyNFx1QzgxNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QzEyNFx1QzgxNVx1QzVEMFx1QzExQyBBUEkgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2hvd1Byb2dyZXNzKHdvcmRzLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3MoMCwgd29yZHMubGVuZ3RoLCAnXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTQgXHVDOTExLi4uJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB3b3JkTGlzdCA9IHdvcmRzLm1hcCh3ID0+IHcud29yZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxsbVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4ubGxtU2VydmljZS5nZXRNdWx0aXBsZVdvcmREZXRhaWxzKHdvcmRMaXN0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChsbG1SZXNwb25zZS5zdWNjZXNzICYmIGxsbVJlc3BvbnNlLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3Mod29yZHMubGVuZ3RoLCB3b3Jkcy5sZW5ndGgsICdcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDAgXHVDODAwXHVDN0E1XHVENTU4XHVCMjk0IFx1QzkxMS4uLicpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogW10gYXMgc3RyaW5nW10sXHJcbiAgICAgICAgICAgICAgICAgICAgZmFpbGVkOiBbXSBhcyBzdHJpbmdbXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmREZXRhaWwgb2YgbGxtUmVzcG9uc2UuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhID0gdGhpcy5wbHVnaW4ubGxtU2VydmljZS5jb252ZXJ0VG9Xb3JkRGF0YSh3b3JkRGV0YWlsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsV29yZCA9IHdvcmRzLmZpbmQodyA9PiB3LndvcmQudG9Mb3dlckNhc2UoKSA9PT0gd29yZERldGFpbC53b3JkLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxXb3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkV29yZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5vcmlnaW5hbFdvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IHdvcmREYXRhLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGF0YS5leGFtcGxlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREYXRhLnNpbWlsYXJXb3Jkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmREYXRhKG9yaWdpbmFsV29yZC53b3JkLCB1cGRhdGVkV29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnN1Y2Nlc3MucHVzaChvcmlnaW5hbFdvcmQud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHdvcmREZXRhaWwud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmREZXRhaWwud29yZH1cIiBcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh3b3JkRGV0YWlsLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVQcm9ncmVzcygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93UmVzdWx0cyhyZXN1bHRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCBcdUMyRTRcdUQzMjg6ICR7bGxtUmVzcG9uc2UuZXJyb3J9YCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDODA0XHVDQ0I0IFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1Byb2dyZXNzKHRvdGFsV29yZHM6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IGBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUM5MTEuLi4gKDAvJHt0b3RhbFdvcmRzfSlgO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlUHJvZ3Jlc3MoY3VycmVudDogbnVtYmVyLCB0b3RhbDogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmICghcHJvZ3Jlc3NTZWN0aW9uKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1maWxsJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFwcm9ncmVzc1RleHQgfHwgIXByb2dyZXNzRmlsbCkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSAoY3VycmVudCAvIHRvdGFsKSAqIDEwMDtcclxuICAgICAgICBwcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSBgJHttZXNzYWdlfSAoJHtjdXJyZW50fS8ke3RvdGFsfSlgO1xyXG4gICAgICAgIHByb2dyZXNzRmlsbC5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnRhZ2V9JWA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoaWRlUHJvZ3Jlc3MoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBpZiAocHJvZ3Jlc3NTZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dSZXN1bHRzKHJlc3VsdHM6IHsgc3VjY2Vzczogc3RyaW5nW107IGZhaWxlZDogc3RyaW5nW10gfSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICByZXN1bHRTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIHJlc3VsdFNlY3Rpb24uZW1wdHkoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3VtbWFyeUVsID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHRzLXN1bW1hcnknIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gc3VjY2VzcycgfSk7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3NFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNzA1IFx1QzEzMVx1QUNGNTogJHtyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RofVx1QUMxQ2AsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA8PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgc3VjY2Vzc0VsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLnN1Y2Nlc3Muam9pbignLCAnKSxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtd29yZHMnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlc3VsdHMuZmFpbGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZmFpbGVkRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gZXJyb3InIH0pO1xyXG4gICAgICAgICAgICBmYWlsZWRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNzRDIFx1QzJFNFx1RDMyODogJHtyZXN1bHRzLmZhaWxlZC5sZW5ndGh9XHVBQzFDYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmZhaWxlZC5sZW5ndGggPD0gMTApIHtcclxuICAgICAgICAgICAgICAgIGZhaWxlZEVsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLmZhaWxlZC5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtYnV0dG9ucycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnLCBjbHM6ICdjbG9zZS1idXR0b24nIH0pO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcbiAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYCR7cmVzdWx0cy5zdWNjZXNzLmxlbmd0aH1cdUFDMUNcdUM3NTggXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0IWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFZvY2FidWxhcnlSZXZpZXdNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XHJcbiAgICB3b3JkczogVm9jYWJ1bGFyeUNhcmRbXTtcclxuICAgIGN1cnJlbnRJbmRleCA9IDA7XHJcbiAgICBzaG93QW5zd2VyID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4sIHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLndvcmRzID0gd29yZHM7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd0N1cnJlbnRXb3JkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q3VycmVudFdvcmQoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2b2NhYnVsYXJ5LWxlYXJuaW5nLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNVx1QjQxQyBcdUIxOTJcdUM3NzRcdUI5N0MgQ1NTIFx1QkNDMFx1QzIxOFx1Qjg1QyBcdUM4MDFcdUM2QTlcclxuICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmV2aWV3LW1vZGFsLWhlaWdodCcsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0fXZoYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRXb3JkID0gdGhpcy53b3Jkc1t0aGlzLmN1cnJlbnRJbmRleF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXZpZXctcHJvZ3Jlc3MnIH0pO1xyXG4gICAgICAgIHByb2dyZXNzRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiBgJHt0aGlzLmN1cnJlbnRJbmRleCArIDF9IC8gJHt0aGlzLndvcmRzLmxlbmd0aH1gLFxyXG4gICAgICAgICAgICBjbHM6ICdwcm9ncmVzcy10ZXh0J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjYXJkRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmV2aWV3LWNhcmQnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Q0U3NFx1QjREQyBcdUMwQURcdUM4MUMgXHVCQzg0XHVEMkJDIChcdUM2MjRcdUI5NzhcdUNBQkQgXHVDMEMxXHVCMkU4KVxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNhcmRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1Q0U3NFx1QjREQyBcdUMwQURcdUM4MUMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYXJkLWRlbGV0ZS1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVEZWxldGVDYXJkKCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHdvcmRFbCA9IGNhcmRFbC5jcmVhdGVFbCgnaDEnLCB7IGNsczogJ3Jldmlldy13b3JkJyB9KTtcclxuICAgICAgICBpZiAoY3VycmVudFdvcmQucHJvbnVuY2lhdGlvbiAmJiBjdXJyZW50V29yZC5wcm9udW5jaWF0aW9uLnRyaW0oKSkge1xyXG4gICAgICAgICAgICB3b3JkRWwuaW5uZXJIVE1MID0gYCR7Y3VycmVudFdvcmQud29yZH0gPHNwYW4gY2xhc3M9XCJwcm9udW5jaWF0aW9uXCI+WyR7Y3VycmVudFdvcmQucHJvbnVuY2lhdGlvbn1dPC9zcGFuPmA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd29yZEVsLnRleHRDb250ZW50ID0gY3VycmVudFdvcmQud29yZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zaG93QW5zd2VyKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50V29yZC5zaW1pbGFyV29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2ltaWxhckVsID0gY2FyZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NpbWlsYXItd29yZHMnIH0pO1xyXG4gICAgICAgICAgICAgICAgc2ltaWxhckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTQ6JyB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJMaXN0ID0gc2ltaWxhckVsLmNyZWF0ZUVsKCd1bCcpO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFdvcmQuc2ltaWxhcldvcmRzLmZvckVhY2god29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhckxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiB3b3JkIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50V29yZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGFtcGxlc0VsID0gY2FyZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGVzJyB9KTtcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNjA4XHVCQjM4XHVCNEU0OicgfSk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50V29yZC5leGFtcGxlcy5mb3JFYWNoKGV4YW1wbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4YW1wbGUuZW5nbGlzaCwgY2xzOiAnZXhhbXBsZScgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgY2hlY2tCdG4gPSBjYXJkRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUUzMCcsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdjaGVjay1hbnN3ZXItYnV0dG9uJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2hlY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFdvcmQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYW5zd2VyRWwgPSBjYXJkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYW5zd2VyLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgICAgICBhbnN3ZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUI3M0I6JyB9KTtcclxuICAgICAgICAgICAgY29uc3QgbWVhbmluZ3NMaXN0ID0gYW5zd2VyRWwuY3JlYXRlRWwoJ3VsJyk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRXb3JkLm1lYW5pbmdzLmZvckVhY2gobWVhbmluZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nc0xpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBtZWFuaW5nIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50V29yZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhbnN3ZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzggXHVCQzg4XHVDNUVEOicgfSk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50V29yZC5leGFtcGxlcy5mb3JFYWNoKGV4YW1wbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuc3dlckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBleGFtcGxlLmtvcmVhbiwgY2xzOiAndHJhbnNsYXRpb24nIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmV2aWV3QnV0dG9ucyhjYXJkRWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVJldmlld0J1dHRvbnMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHJldmlld1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmV2aWV3LWJ1dHRvbnMnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGhhcmRCdG4gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUM1QjRcdUI4MjRcdUM2QzAnLCBjbHM6ICdyZXZpZXctYnRuIGhhcmQnIH0pO1xyXG4gICAgICAgIGNvbnN0IGdvb2RCdG4gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUM4OEJcdUM3NEMnLCBjbHM6ICdyZXZpZXctYnRuIGdvb2QnIH0pO1xyXG4gICAgICAgIGNvbnN0IGVhc3lCdG4gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUMyNkNcdUM2QzAnLCBjbHM6ICdyZXZpZXctYnRuIGVhc3knIH0pO1xyXG5cclxuICAgICAgICBoYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2hhcmQnKSk7XHJcbiAgICAgICAgZ29vZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdnb29kJykpO1xyXG4gICAgICAgIGVhc3lCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnZWFzeScpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVJldmlldyhkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50V29yZCA9IHRoaXMud29yZHNbdGhpcy5jdXJyZW50SW5kZXhdO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkKGN1cnJlbnRXb3JkLndvcmQsIGRpZmZpY3VsdHkpO1xyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCsrO1xyXG4gICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPj0gdGhpcy53b3Jkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRXb3JkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50V29yZCA9IHRoaXMud29yZHNbdGhpcy5jdXJyZW50SW5kZXhdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQycsXHJcbiAgICAgICAgICAgIGBcIiR7Y3VycmVudFdvcmQud29yZH1cIiBcdUIyRThcdUM1QjRcdUI5N0MgXHVDMEFEXHVDODFDXHVENTU4XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDP1xcblxcblx1Qzc3NCBcdUM3OTFcdUM1QzVcdUM3NDAgXHVCNDE4XHVCM0NDXHVCOUI0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCxcclxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIucmVtb3ZlV29yZChjdXJyZW50V29yZC53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmRzLnNwbGljZSh0aGlzLmN1cnJlbnRJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud29yZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbXBsZXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPj0gdGhpcy53b3Jkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSB0aGlzLndvcmRzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRXb3JkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQ6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q29tcGxldGlvbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29tcGxldGlvbkVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbXBsZXRpb24nIH0pO1xyXG4gICAgICAgIGNvbXBsZXRpb25FbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUJDRjVcdUMyQjUgXHVDNjQ0XHVCOENDIScgfSk7XHJcbiAgICAgICAgY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUJDRjVcdUMyQjVcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFQlx1QUUzMCcsIGNsczogJ2Nsb3NlLWJ0bicgfSk7XHJcbiAgICAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEZldGNoU2VsZWN0ZWRNZWFuaW5nc01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIHNlbGVjdGVkV29yZHM6IHN0cmluZ1tdO1xyXG4gICAgaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4sIHNlbGVjdGVkV29yZHM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMgPSBzZWxlY3RlZFdvcmRzO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2ZldGNoLXNlbGVjdGVkLW1lYW5pbmdzLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiBgXHVDMTIwXHVEMEREXHVCNDFDICR7dGhpcy5zZWxlY3RlZFdvcmRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBgLFxyXG4gICAgICAgICAgICBjbHM6ICdtb2RhbC10aXRsZSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgdGV4dDogYFx1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NTggXHVDMEMxXHVDMTM4IFx1QzgxNVx1QkNGNFx1Qjk3QyBMTE0gQVBJXHVCOTdDIFx1RDFCNVx1RDU3NCBcdUFDMDBcdUM4MzhcdUM2MzVcdUIyQzhcdUIyRTQuYCxcclxuICAgICAgICAgICAgY2xzOiAnbW9kYWwtZGVzY3JpcHRpb24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmRMaXN0RWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VsZWN0ZWQtd29yZHMtbGlzdCcgfSk7XHJcbiAgICAgICAgd29yZExpc3RFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUMxMjBcdUQwRERcdUI0MUMgXHVCMkU4XHVDNUI0XHVCNEU0OicgfSk7XHJcbiAgICAgICAgY29uc3Qgd29yZHNDb250YWluZXIgPSB3b3JkTGlzdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmRzLWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzLmZvckVhY2god29yZCA9PiB7XHJcbiAgICAgICAgICAgIHdvcmRzQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IHdvcmQsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdzZWxlY3RlZC13b3JkLXRhZydcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGZldGNoQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxyXG4gICAgICAgICAgICBjbHM6ICdmZXRjaC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZmV0Y2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hTZWxlY3RlZE1lYW5pbmdzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3Mtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLXRleHQnIH0pO1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gcHJvZ3Jlc3NTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWJhcicgfSk7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gcHJvZ3Jlc3NCYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtZmlsbCcgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIHJlc3VsdFNlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGZldGNoU2VsZWN0ZWRNZWFuaW5ncygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zaG93UHJvZ3Jlc3ModGhpcy5zZWxlY3RlZFdvcmRzLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucGx1Z2luLmxsbVNlcnZpY2UuZ2V0TXVsdGlwbGVXb3JkRGV0YWlscyh0aGlzLnNlbGVjdGVkV29yZHMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIEFycmF5LmlzQXJyYXkocmVzdWx0LmRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzV29yZHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmYWlsZWRXb3Jkczogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmREYXRhIG9mIHJlc3VsdC5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmREYXRhLndvcmQgJiYgd29yZERhdGEubWVhbmluZ3MgJiYgd29yZERhdGEubWVhbmluZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdXb3JkID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmQod29yZERhdGEud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdXb3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFdvcmQ6IFZvY2FidWxhcnlDYXJkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1dvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmREYXRhLnByb251bmNpYXRpb24gfHwgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiB3b3JkRGF0YS5tZWFuaW5ncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IHdvcmREYXRhLmV4YW1wbGVzIHx8IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREYXRhLnNpbWlsYXJXb3JkcyB8fCBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmREYXRhKHdvcmREYXRhLndvcmQsIHVwZGF0ZWRXb3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzV29yZHMucHVzaCh3b3JkRGF0YS53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZFdvcmRzLnB1c2god29yZERhdGEud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmREYXRhLndvcmR9XCIgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IFx1QzJFNFx1RDMyODpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZFdvcmRzLnB1c2god29yZERhdGEud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dSZXN1bHRzKHsgc3VjY2Vzczogc3VjY2Vzc1dvcmRzLCBmYWlsZWQ6IGZhaWxlZFdvcmRzIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzc1dvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGAke3N1Y2Nlc3NXb3Jkcy5sZW5ndGh9XHVBQzFDXHVDNzU4IFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NFx1QjM3MCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQ6ICcgKyAocmVzdWx0LmVycm9yIHx8ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTgnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVQcm9ncmVzcygpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NFx1QjM3MCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQ6ICcgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dQcm9ncmVzcyh0b3RhbFdvcmRzOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IHByb2dyZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3MtdGV4dCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICBwcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSBgXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTQgXHVDOTExLi4uICgwLyR7dG90YWxXb3Jkc30pYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhpZGVQcm9ncmVzcygpIHtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmIChwcm9ncmVzc1NlY3Rpb24pIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1Jlc3VsdHMocmVzdWx0czogeyBzdWNjZXNzOiBzdHJpbmdbXTsgZmFpbGVkOiBzdHJpbmdbXSB9KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHJlc3VsdFNlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5lbXB0eSgpO1xyXG5cclxuICAgICAgICBjb25zdCBzdW1tYXJ5RWwgPSByZXN1bHRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdHMtc3VtbWFyeScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSBzdWNjZXNzJyB9KTtcclxuICAgICAgICAgICAgc3VjY2Vzc0VsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI3MDUgXHVDMTMxXHVBQ0Y1OiAke3Jlc3VsdHMuc3VjY2Vzcy5sZW5ndGh9XHVBQzFDYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoIDw9IDEwKSB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuc3VjY2Vzcy5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVzdWx0cy5mYWlsZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBmYWlsZWRFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSBlcnJvcicgfSk7XHJcbiAgICAgICAgICAgIGZhaWxlZEVsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI3NEMgXHVDMkU0XHVEMzI4OiAke3Jlc3VsdHMuZmFpbGVkLmxlbmd0aH1cdUFDMUNgLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LWNvdW50J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdHMuZmFpbGVkLmxlbmd0aCA8PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgZmFpbGVkRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuZmFpbGVkLmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSByZXN1bHRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1idXR0b25zJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFQlx1QUUzMCcsIGNsczogJ2Nsb3NlLWJ1dHRvbicgfSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVBQzA0XHVCMkU4XHVENTVDIFx1RDY1NVx1Qzc3OCBcdUJBQThcdUIyRUMgXHVEMDc0XHVCNzk4XHVDMkE0XHJcbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICBvbkNvbmZpcm06ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgb25Db25maXJtOiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICB0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybTtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdjb25maXJtLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMudGl0bGUsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSwgY2xzOiAnbW9kYWwtbWVzc2FnZScgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVENjU1XHVDNzc4JyxcclxuICAgICAgICAgICAgY2xzOiAnY29uZmlybS1idXR0b24gcHJpbWFyeSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlybSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgV29yZERhdGEgfSBmcm9tICcuL1ZvY2FidWxhcnlDYXJkJztcclxuXHJcbmV4cG9ydCBjbGFzcyBXb3JkU2VydmljZSB7XHJcbiAgICBwcml2YXRlIGFwaUJhc2VVcmwgPSAnaHR0cHM6Ly9hcGkuZGljdGlvbmFyeWFwaS5kZXYvYXBpL3YyL2VudHJpZXMvZW4nO1xyXG5cclxuICAgIGFzeW5jIGdldFdvcmREYXRhKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8V29yZERhdGE+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdUMyRTRcdUM4MUMgQVBJIFx1RDYzOFx1Q0Q5QyBcdUIzMDBcdUMyRTAgXHVDMEQ4XHVENTBDIFx1QjM3MFx1Qzc3NFx1RDEzMFx1Qjk3QyBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgLy8gXHVDMkU0XHVDODFDIFx1QUQ2Q1x1RDYwNFx1QzVEMFx1QzExQ1x1QjI5NCBEaWN0aW9uYXJ5IEFQSVx1QjA5OCBcdUIyRTRcdUI5NzggQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUMyMTggXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNhbXBsZVdvcmREYXRhKHdvcmQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjJDIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0U2FtcGxlV29yZERhdGEod29yZDogc3RyaW5nKTogV29yZERhdGEge1xyXG4gICAgICAgIC8vIFx1QzBEOFx1RDUwQyBcdUIzNzBcdUM3NzRcdUQxMzAgLSBcdUMyRTRcdUM4MUNcdUI4NUNcdUIyOTQgQVBJXHVDNUQwXHVDMTFDIFx1QUMwMFx1QzgzOFx1QzY0MFx1QzU3QyBcdUQ1NjhcclxuICAgICAgICBjb25zdCBzYW1wbGVEYXRhOiB7IFtrZXk6IHN0cmluZ106IFdvcmREYXRhIH0gPSB7XHJcbiAgICAgICAgICAgICdiZWF1dGlmdWwnOiB7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiAnYmVhdXRpZnVsJyxcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1QzU0NFx1Qjk4NFx1QjJFNFx1QzZCNCcsICdcdUM2MDhcdUMwNUMnLCAnXHVENkNDXHVCOTZEXHVENTVDJ10sXHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFsncHJldHR5JywgJ2dvcmdlb3VzJywgJ3N0dW5uaW5nJywgJ2F0dHJhY3RpdmUnXSxcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnU2hlIGlzIGEgYmVhdXRpZnVsIHdvbWFuLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QURGOFx1QjE0MFx1QjI5NCBcdUM1NDRcdUI5ODRcdUIyRTRcdUM2QjQgXHVDNUVDXHVDMTMxXHVDNzg1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1RoZSBzdW5zZXQgd2FzIGJlYXV0aWZ1bC4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM3N0NcdUJBQjBcdUM3NzQgXHVDNTQ0XHVCOTg0XHVCMkU0XHVDNkUwXHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1doYXQgYSBiZWF1dGlmdWwgZGF5IScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QzgxNVx1QjlEMCBcdUM1NDRcdUI5ODRcdUIyRTRcdUM2QjQgXHVENTU4XHVCOEU4XHVCMTI0XHVDNjk0ISdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdoYXBweSc6IHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6ICdoYXBweScsXHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUQ1ODlcdUJDRjVcdUQ1NUMnLCAnXHVBRTMwXHVDMDVDJywgJ1x1Qzk5MFx1QUM3MFx1QzZCNCddLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbJ2pveWZ1bCcsICdjaGVlcmZ1bCcsICdnbGFkJywgJ3BsZWFzZWQnXSxcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnSSBhbSBoYXBweSB0byBzZWUgeW91LicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QjJGOVx1QzJFMFx1Qzc0NCBcdUI5Q0NcdUIwOThcdUMxMUMgXHVBRTMwXHVDMDY5XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1NoZSBoYXMgYSBoYXBweSBmYW1pbHkuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVBREY4XHVCMTQwXHVCMjk0IFx1RDU4OVx1QkNGNVx1RDU1QyBcdUFDMDBcdUM4NzFcdUM3NDQgXHVBQzAwXHVDOUMwXHVBQ0UwIFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdIYXBweSBiaXJ0aGRheSEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUMwRERcdUM3N0MgXHVDRDk1XHVENTU4XHVENTY5XHVCMkM4XHVCMkU0ISdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdsZWFybic6IHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6ICdsZWFybicsXHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUJDMzBcdUM2QjBcdUIyRTQnLCAnXHVENTU5XHVDMkI1XHVENTU4XHVCMkU0JywgJ1x1Qzc3NVx1RDc4OFx1QjJFNCddLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbJ3N0dWR5JywgJ2FjcXVpcmUnLCAnZ3Jhc3AnLCAndW5kZXJzdGFuZCddLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdJIHdhbnQgdG8gbGVhcm4gRW5nbGlzaC4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM4MDBcdUIyOTQgXHVDNjAxXHVDNUI0XHVCOTdDIFx1QkMzMFx1QzZCMFx1QUNFMCBcdUMyRjZcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnQ2hpbGRyZW4gbGVhcm4gcXVpY2tseS4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM1NDRcdUM3NzRcdUI0RTRcdUM3NDAgXHVCRTY4XHVCOUFDIFx1QkMzMFx1QzZDMVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdZb3UgY2FuIGxlYXJuIGZyb20geW91ciBtaXN0YWtlcy4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUMyRTRcdUMyMThcdUI4NUNcdUJEODBcdUQxMzAgXHVCQzMwXHVDNkI4IFx1QzIxOCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFx1Qzc4NVx1QjgyNVx1QjQxQyBcdUIyRThcdUM1QjRcdUFDMDAgXHVDMEQ4XHVENTBDIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QzVEMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVCQzE4XHVENjU4LCBcdUM1QzZcdUM3M0NcdUJBNzQgXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMwRERcdUMxMzFcclxuICAgICAgICBpZiAoc2FtcGxlRGF0YVt3b3JkLnRvTG93ZXJDYXNlKCldKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzYW1wbGVEYXRhW3dvcmQudG9Mb3dlckNhc2UoKV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUFFMzBcdUJDRjggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QkMxOFx1RDY1OFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdvcmQ6IHdvcmQsXHJcbiAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Qzc1OFx1QkJGOFx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nXSxcclxuICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXSxcclxuICAgICAgICAgICAgZXhhbXBsZXM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiBgVGhpcyBpcyBhbiBleGFtcGxlIHNlbnRlbmNlIHdpdGggdGhlIHdvcmQgXCIke3dvcmR9XCIuYCxcclxuICAgICAgICAgICAgICAgICAgICBrb3JlYW46IGBcIiR7d29yZH1cIlx1Qjc3Q1x1QjI5NCBcdUIyRThcdUM1QjRcdUFDMDAgXHVEM0VDXHVENTY4XHVCNDFDIFx1QzYwOFx1QkIzOFx1Qzc4NVx1QjJDOFx1QjJFNC5gXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzJFNFx1QzgxQyBBUEkgXHVENjM4XHVDRDlDXHVDNzQ0IFx1QzcwNFx1RDU1QyBcdUJBNTRcdUMxMUNcdUI0REMgKFx1RDVBNVx1RDZDNCBcdUFENkNcdUQ2MDQpXHJcbiAgICBwcml2YXRlIGFzeW5jIGZldGNoRnJvbUFQSSh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5hcGlCYXNlVXJsfS8ke3dvcmR9YCk7XHJcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFQSSBcdUM2OTRcdUNDQUQgXHVDMkU0XHVEMzI4OiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZnJvbSAnLi9tYWluJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRCb29rTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdhZGQtYm9vay1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUM4MUNcdUJBQTlcclxuICAgICAgICBjb25zdCB0aXRsZUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUNEOTRcdUFDMDAnLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMTI0XHVCQTg1XHJcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUMwQzhcdUI4NUNcdUM2QjQgXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQ0IFx1QzBERFx1QzEzMVx1RDU2OVx1QjJDOFx1QjJFNC4nLFxyXG4gICAgICAgICAgICBjbHM6ICdtb2RhbC1kZXNjcmlwdGlvbidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVDNzg1XHVCODI1IFx1RDNGQ1xyXG4gICAgICAgIGNvbnN0IGZvcm1FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZm9ybScsIHsgY2xzOiAnYm9vay1mb3JtJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0IFx1Qzc4NVx1QjgyNVxyXG4gICAgICAgIGNvbnN0IG5hbWVTZWN0aW9uID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Zvcm0tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgY29uc3QgbmFtZUxhYmVsID0gbmFtZVNlY3Rpb24uY3JlYXRlRWwoJ2xhYmVsJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODQgKicsXHJcbiAgICAgICAgICAgIGNsczogJ2Zvcm0tbGFiZWwnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbmFtZUlucHV0ID0gbmFtZVNlY3Rpb24uY3JlYXRlRWwoJ2lucHV0Jywge1xyXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnXHVDNjA4OiBUT0VJQyBcdUIyRThcdUM1QjRcdUM3QTUsIFx1Qzc3Q1x1QzBDMVx1QzBERFx1RDY1QyBcdUIyRThcdUM1QjRcdUM3QTUnLFxyXG4gICAgICAgICAgICBjbHM6ICdmb3JtLWlucHV0J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5hbWVJbnB1dC5yZXF1aXJlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjRcdUJBODUgXHVDNzg1XHVCODI1XHJcbiAgICAgICAgY29uc3QgZGVzY1NlY3Rpb24gPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm9ybS1zZWN0aW9uJyB9KTtcclxuICAgICAgICBjb25zdCBkZXNjTGFiZWwgPSBkZXNjU2VjdGlvbi5jcmVhdGVFbCgnbGFiZWwnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDMTI0XHVCQTg1IChcdUMxMjBcdUQwRERcdUMwQUNcdUQ1NkQpJyxcclxuICAgICAgICAgICAgY2xzOiAnZm9ybS1sYWJlbCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBkZXNjSW5wdXQgPSBkZXNjU2VjdGlvbi5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnXHVCMkU4XHVDNUI0XHVDN0E1XHVDNUQwIFx1QjMwMFx1RDU1QyBcdUMxMjRcdUJBODVcdUM3NDQgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LicsXHJcbiAgICAgICAgICAgIGNsczogJ2Zvcm0tdGV4dGFyZWEnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVzY0lucHV0LnJvd3MgPSAzO1xyXG5cclxuICAgICAgICAvLyBcdUJDODRcdUQyQkMgXHVDNjAxXHVDNUVEXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY3JlYXRlQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzEnLFxyXG4gICAgICAgICAgICBjbHM6ICdjcmVhdGUtYnV0dG9uIHByaW1hcnknLFxyXG4gICAgICAgICAgICB0eXBlOiAnc3VibWl0J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDREU4XHVDMThDJyxcclxuICAgICAgICAgICAgY2xzOiAnY2FuY2VsLWJ1dHRvbicsXHJcbiAgICAgICAgICAgIHR5cGU6ICdidXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcbiAgICAgICAgLy8gXHVEM0ZDIFx1QzgxQ1x1Q0Q5QyBcdUM3NzRcdUJDQTRcdUQyQjhcclxuICAgICAgICBmb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgYXN5bmMgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUJvb2sobmFtZUlucHV0LnZhbHVlLnRyaW0oKSwgZGVzY0lucHV0LnZhbHVlLnRyaW0oKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEVudGVyIFx1RDBBNFx1Qjg1QyBcdUM4MUNcdUNEOUMgXHVBQzAwXHVCMkE1XHVENTU4XHVCM0M0XHVCODVEXHJcbiAgICAgICAgbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGZvcm1FbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnc3VibWl0JykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1RDNFQ1x1Q0VFNFx1QzJBNCBcdUMxMjRcdUM4MTVcclxuICAgICAgICBuYW1lSW5wdXQuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZUJvb2sobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKCFuYW1lLnRyaW0oKSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1QjJFOFx1QzVCNFx1QzdBNVx1QUNGQyBcdUM3NzRcdUI5ODQgXHVDOTExXHVCQ0Y1IFx1RDY1NVx1Qzc3OFxyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0Jvb2tzID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbEJvb2tzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRHVwbGljYXRlID0gZXhpc3RpbmdCb29rcy5zb21lKGJvb2sgPT4gXHJcbiAgICAgICAgICAgICAgICBib29rLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNEdXBsaWNhdGUpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTQgXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMVxyXG4gICAgICAgICAgICBjb25zdCBuZXdCb29rID0gYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmNyZWF0ZUJvb2sobmFtZSwgZGVzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke25hbWV9XCIgXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwRERcdUMxMzFcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQhYCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUJBQThcdUIyRUMgXHVCMkVCXHVBRTMwXHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QkFBOFx1QjRFMCBcdUJBQThcdUIyRUNcdUM1RDBcdUMxMUMgXHVDMjE4XHVDMkUwXHVENTYwIFx1QzIxOCBcdUM3ODhcdUIzQzRcdUI4NUQgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERFxyXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnYm9va0NyZWF0ZWQnLCB7IGRldGFpbDogbmV3Qm9vayB9KTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMVx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IFZvY2FidWxhcnlDYXJkLCBCb29rIH0gZnJvbSAnLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIG5vcm1hbGl6ZVBhdGggfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERhdGFiYXNlRGF0YSB7XHJcbiAgICBib29rczogQm9va1tdO1xyXG4gICAgd29yZHM6IFZvY2FidWxhcnlDYXJkW107XHJcbiAgICBzZXR0aW5nczoge1xyXG4gICAgICAgIGRhaWx5R29hbDogbnVtYmVyO1xyXG4gICAgICAgIHJldmlld0ludGVydmFsOiBudW1iZXI7XHJcbiAgICAgICAgY3VycmVudEJvb2tJZDogc3RyaW5nO1xyXG4gICAgfTtcclxuICAgIHN0YXRpc3RpY3M6IHtcclxuICAgICAgICB0b3RhbFJldmlld3M6IG51bWJlcjtcclxuICAgICAgICBzdHJlYWtEYXlzOiBudW1iZXI7XHJcbiAgICAgICAgbGFzdFN0dWR5RGF0ZTogc3RyaW5nIHwgbnVsbDtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcbiAgICBwcml2YXRlIGJvb2tzOiBNYXA8c3RyaW5nLCBCb29rPiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgd29yZHM6IE1hcDxzdHJpbmcsIFZvY2FidWxhcnlDYXJkPiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgZGFpbHlHb2FsOiAxMCxcclxuICAgICAgICByZXZpZXdJbnRlcnZhbDogMSxcclxuICAgICAgICBjdXJyZW50Qm9va0lkOiAnZGVmYXVsdCdcclxuICAgIH07XHJcbiAgICBwcml2YXRlIHN0YXRpc3RpY3MgPSB7XHJcbiAgICAgICAgdG90YWxSZXZpZXdzOiAwLFxyXG4gICAgICAgIHN0cmVha0RheXM6IDAsXHJcbiAgICAgICAgbGFzdFN0dWR5RGF0ZTogbnVsbCBhcyBzdHJpbmcgfCBudWxsXHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBzYXZlQ2FsbGJhY2s6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIHZvY2FidWxhcnlGb2xkZXJQYXRoID0gJ1ZvY2FidWxhcnknO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzYXZlQ2FsbGJhY2s6ICgpID0+IHZvaWQsIGZvbGRlclBhdGg/OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjayA9IHNhdmVDYWxsYmFjaztcclxuICAgICAgICBpZiAoZm9sZGVyUGF0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRoID0gZm9sZGVyUGF0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplVm9jYWJ1bGFyeUZvbGRlcigpO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRCb29rKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NCBcdUNEMDhcdUFFMzBcdUQ2NTRcclxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVZvY2FidWxhcnlGb2xkZXIoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVEM0Y0XHVCMzU0XHVBQzAwIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUFDRTAgVEZvbGRlciBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTRcdUM3NzggXHVBQ0JEXHVDNkIwXHJcbiAgICAgICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUJCQzBcdUI4NUMgXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVEM0Y0XHVCMzU0XHVBQzAwIFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QzlDMCBcdUM1NEFcdUIyOTQgXHVBQ0JEXHVDNkIwXHVDNUQwXHVCOUNDIFx1QzBERFx1QzEzMVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIodGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIFx1RDNGNFx1QjM1NFx1QUMwMCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0IFx1QUNCRFx1QzZCMFx1QjI5NCBcdUM4MTVcdUMwQzFcdUM4MDFcdUM3NzggXHVDMEMxXHVENjY5XHVDNzc0XHVCQkMwXHVCODVDIFx1QUNCRFx1QUNFMFx1QjlDQyBcdUNEOUNcdUI4MjVcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2FscmVhZHkgZXhpc3RzJykgfHwgXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdmb2xkZXIgYWxyZWFkeSBleGlzdHMnKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnYWxyZWFkeSBwcmVzZW50JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NFx1QUMwMCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTY5XHVCMkM4XHVCMkU0OicsIHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVDMEREXHVDMTMxIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVDMEREXHVDMTMxIFx1QzkxMSBcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREOicsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUFFMzBcdUJDRjggYm9vayBcdUNEMDhcdUFFMzBcdUQ2NTRcclxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZURlZmF1bHRCb29rKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ib29rcy5oYXMoJ2RlZmF1bHQnKSkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0Qm9vazogQm9vayA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiAnZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNScsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1x1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTVcdUM3ODVcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB3b3JkQ291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IHRydWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5ib29rcy5zZXQoJ2RlZmF1bHQnLCBkZWZhdWx0Qm9vayk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoZGVmYXVsdEJvb2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBCb29rXHVDNzQ0IE1EIFx1RDMwQ1x1Qzc3Q1x1Qjg1QyBcdUM4MDBcdUM3QTVcclxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZUJvb2tUb0ZpbGUoYm9vazogQm9vayk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7Ym9vay5uYW1lLnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCAnXycpfS5tZGA7XHJcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGAke3RoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2tcdUM3NTggXHVCMkU4XHVDNUI0XHVCNEU0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgIGNvbnN0IGJvb2tXb3JkcyA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSBib29rLmlkKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS53b3JkLmxvY2FsZUNvbXBhcmUoYi53b3JkKSk7XHJcblxyXG4gICAgICAgIC8vIFlBTUwgZnJvbnRtYXR0ZXIgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBbXHJcbiAgICAgICAgICAgICctLS0nLFxyXG4gICAgICAgICAgICBgYm9va0lkOiAke2Jvb2suaWR9YCxcclxuICAgICAgICAgICAgYG5hbWU6IFwiJHtib29rLm5hbWV9XCJgLFxyXG4gICAgICAgICAgICBgZGVzY3JpcHRpb246IFwiJHtib29rLmRlc2NyaXB0aW9ufVwiYCxcclxuICAgICAgICAgICAgYGNyZWF0ZWRBdDogJHtib29rLmNyZWF0ZWRBdH1gLFxyXG4gICAgICAgICAgICBgdXBkYXRlZEF0OiAke2Jvb2sudXBkYXRlZEF0fWAsXHJcbiAgICAgICAgICAgIGB3b3JkQ291bnQ6ICR7Ym9va1dvcmRzLmxlbmd0aH1gLFxyXG4gICAgICAgICAgICBgaXNEZWZhdWx0OiAke2Jvb2suaXNEZWZhdWx0fWAsXHJcbiAgICAgICAgICAgICctLS0nLFxyXG4gICAgICAgICAgICAnJ1xyXG4gICAgICAgIF0uam9pbignXFxuJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUNGNThcdUQxNTBcdUNFMjAgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBmcm9udG1hdHRlcjtcclxuICAgICAgICBjb250ZW50ICs9IGAjICR7Ym9vay5uYW1lfVxcblxcbmA7XHJcbiAgICAgICAgY29udGVudCArPSBgJHtib29rLmRlc2NyaXB0aW9ufVxcblxcbmA7XHJcbiAgICAgICAgY29udGVudCArPSBgIyMgXHVCMkU4XHVDNUI0IFx1QkFBOVx1Qjg1RCAoJHtib29rV29yZHMubGVuZ3RofVx1QUMxQylcXG5cXG5gO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgYm9va1dvcmRzKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCMjIyAke3dvcmQud29yZH1cXG5cXG5gO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHdvcmQucHJvbnVuY2lhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgKipcdUJDMUNcdUM3NEM6KiogJHt3b3JkLnByb251bmNpYXRpb259XFxuXFxuYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29udGVudCArPSBgKipcdUI3M0I6KipcXG5gO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1lYW5pbmcgb2Ygd29yZC5tZWFuaW5ncykge1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSAke21lYW5pbmd9XFxuYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250ZW50ICs9ICdcXG4nO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHdvcmQuc2ltaWxhcldvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCoqXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNDoqKiAke3dvcmQuc2ltaWxhcldvcmRzLmpvaW4oJywgJyl9XFxuXFxuYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHdvcmQuZXhhbXBsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgKipcdUM2MDhcdUJCMzg6KipcXG5gO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBleGFtcGxlIG9mIHdvcmQuZXhhbXBsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtICR7ZXhhbXBsZS5lbmdsaXNofVxcbmA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgICAtICR7ZXhhbXBsZS5rb3JlYW59XFxuYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gJ1xcbic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QkNGNVx1QzJCNSBcdUM4MTVcdUJDRjRcclxuICAgICAgICAgICAgY29udGVudCArPSBgKipcdUJDRjVcdUMyQjUgXHVDODE1XHVCQ0Y0OioqXFxuYDtcclxuICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4OiAke3dvcmQucmV2aWV3Q291bnR9XFxuYDtcclxuICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUIwOUNcdUM3NzRcdUIzQzQ6ICR7d29yZC5kaWZmaWN1bHR5fVxcbmA7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QkNGNVx1QzJCNTogJHt3b3JkLmxhc3RSZXZpZXdlZCB8fCAnXHVDNUM2XHVDNzRDJ31cXG5gO1xyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1Q0Q5NFx1QUMwMFx1Qzc3QzogJHt3b3JkLmFkZGVkRGF0ZX1cXG5cXG5gO1xyXG4gICAgICAgICAgICBjb250ZW50ICs9ICctLS1cXG5cXG4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmdGaWxlLCBjb250ZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBjb250ZW50KTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVEMzBDXHVDNzdDXHVDNzc0IFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NUNcdUIyRTRcdUJBNzQgbW9kaWZ5XHVCODVDIFx1QzdBQ1x1QzJEQ1x1QjNDNFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2FscmVhZHkgZXhpc3RzJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1RDMwQ1x1Qzc3Q1x1Qzc3NCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVDOUMwXHVCOUNDIFRGaWxlXHVDNzc0IFx1QzU0NFx1QjJEODonLCBmaWxlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDIFx1QzgwMFx1QzdBNSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzMENcdUM3N0MgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1EIFx1RDMwQ1x1Qzc3Q1x1QzVEMFx1QzExQyBCb29rXHVBQ0ZDIFx1QjJFOFx1QzVCNFx1QjRFNCBcdUI4NUNcdUI0RENcclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZEJvb2tGcm9tRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICBjb25zdCB7IGZyb250bWF0dGVyLCBib2R5IH0gPSB0aGlzLnBhcnNlTURGaWxlKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFmcm9udG1hdHRlci5ib29rSWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIC8vIEJvb2sgXHVDODE1XHVCQ0Y0IFx1QkNGNVx1QzZEMFxyXG4gICAgICAgICAgICBjb25zdCBib29rOiBCb29rID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGZyb250bWF0dGVyLmJvb2tJZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGZyb250bWF0dGVyLm5hbWUgfHwgZmlsZS5iYXNlbmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBmcm9udG1hdHRlci5kZXNjcmlwdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogZnJvbnRtYXR0ZXIuY3JlYXRlZEF0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogZnJvbnRtYXR0ZXIudXBkYXRlZEF0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHdvcmRDb3VudDogZnJvbnRtYXR0ZXIud29yZENvdW50IHx8IDAsXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGZyb250bWF0dGVyLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5ib29rcy5zZXQoYm9vay5pZCwgYm9vayk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUI0RTQgXHVEMzBDXHVDMkYxXHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5wYXJzZVdvcmRzRnJvbU1hcmtkb3duKGJvZHksIGJvb2suaWQpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud29yZHMuc2V0KHdvcmQud29yZC50b0xvd2VyQ2FzZSgpLCB3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzMENcdUM3N0MgXHVCODVDXHVCNERDIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1EIFx1RDMwQ1x1Qzc3QyBcdUQzMENcdUMyRjEgKGZyb250bWF0dGVyXHVDNjQwIGJvZHkgXHVCRDg0XHVCOUFDKVxyXG4gICAgcHJpdmF0ZSBwYXJzZU1ERmlsZShjb250ZW50OiBzdHJpbmcpOiB7IGZyb250bWF0dGVyOiBhbnksIGJvZHk6IHN0cmluZyB9IHtcclxuICAgICAgICBjb25zdCBmcm9udG1hdHRlclJlZ2V4ID0gL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS1cXG4oW1xcc1xcU10qKSQvO1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaChmcm9udG1hdHRlclJlZ2V4KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIW1hdGNoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGZyb250bWF0dGVyOiB7fSwgYm9keTogY29udGVudCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBmcm9udG1hdHRlclRleHQgPSBtYXRjaFsxXTtcclxuICAgICAgICBjb25zdCBib2R5ID0gbWF0Y2hbMl07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVBQzA0XHVCMkU4XHVENTVDIFlBTUwgXHVEMzBDXHVDMkYxXHJcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXI6IGFueSA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXJUZXh0LnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sb25JbmRleCA9IGxpbmUuaW5kZXhPZignOicpO1xyXG4gICAgICAgICAgICBpZiAoY29sb25JbmRleCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGxpbmUuc3Vic3RyaW5nKDAsIGNvbG9uSW5kZXgpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGxpbmUuc3Vic3RyaW5nKGNvbG9uSW5kZXggKyAxKS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1QjUzMFx1QzYzNFx1RDQ1QyBcdUM4MUNcdUFDNzBcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIHZhbHVlLmVuZHNXaXRoKCdcIicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgxLCAtMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1RDBDMFx1Qzc4NSBcdUJDQzBcdUQ2NThcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSBmcm9udG1hdHRlcltrZXldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSAnZmFsc2UnKSBmcm9udG1hdHRlcltrZXldID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNOYU4oTnVtYmVyKHZhbHVlKSkpIGZyb250bWF0dGVyW2tleV0gPSBOdW1iZXIodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBmcm9udG1hdHRlcltrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHsgZnJvbnRtYXR0ZXIsIGJvZHkgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUI5QzhcdUQwNkNcdUIyRTRcdUM2QjRcdUM1RDBcdUMxMUMgXHVCMkU4XHVDNUI0XHVCNEU0IFx1RDMwQ1x1QzJGMVxyXG4gICAgcHJpdmF0ZSBwYXJzZVdvcmRzRnJvbU1hcmtkb3duKG1hcmtkb3duOiBzdHJpbmcsIGJvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgY29uc3Qgd29yZHM6IFZvY2FidWxhcnlDYXJkW10gPSBbXTtcclxuICAgICAgICBjb25zdCB3b3JkU2VjdGlvbnMgPSBtYXJrZG93bi5zcGxpdCgnLS0tJykuZmlsdGVyKHNlY3Rpb24gPT4gc2VjdGlvbi50cmltKCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiB3b3JkU2VjdGlvbnMpIHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHRoaXMucGFyc2VXb3JkU2VjdGlvbihzZWN0aW9uLCBib29rSWQpO1xyXG4gICAgICAgICAgICBpZiAod29yZCkge1xyXG4gICAgICAgICAgICAgICAgd29yZHMucHVzaCh3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gd29yZHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVBQzFDXHVCQ0M0IFx1QjJFOFx1QzVCNCBcdUMxMzlcdUMxNTggXHVEMzBDXHVDMkYxXHJcbiAgICBwcml2YXRlIHBhcnNlV29yZFNlY3Rpb24oc2VjdGlvbjogc3RyaW5nLCBib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkIHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBzZWN0aW9uLnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiBsaW5lLnRyaW0oKSkuZmlsdGVyKGxpbmUgPT4gbGluZSk7XHJcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHdvcmQgPSAnJztcclxuICAgICAgICBsZXQgcHJvbnVuY2lhdGlvbiA9ICcnO1xyXG4gICAgICAgIGNvbnN0IG1lYW5pbmdzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNpbWlsYXJXb3Jkczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBjb25zdCBleGFtcGxlczogeyBlbmdsaXNoOiBzdHJpbmc7IGtvcmVhbjogc3RyaW5nIH1bXSA9IFtdO1xyXG4gICAgICAgIGxldCByZXZpZXdDb3VudCA9IDA7XHJcbiAgICAgICAgbGV0IGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJyA9ICdnb29kJztcclxuICAgICAgICBsZXQgbGFzdFJldmlld2VkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBsZXQgYWRkZWREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBjdXJyZW50U2VjdGlvbiA9ICcnO1xyXG4gICAgICAgIGxldCBjdXJyZW50RXhhbXBsZTogeyBlbmdsaXNoPzogc3RyaW5nOyBrb3JlYW4/OiBzdHJpbmcgfSA9IHt9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVCQTg1IFx1Q0Q5NFx1Q0Q5QyAoIyMjIFx1RDVFNFx1QjM1NClcclxuICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnIyMjICcpKSB7XHJcbiAgICAgICAgICAgICAgICB3b3JkID0gbGluZS5zdWJzdHJpbmcoNCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QzEzOVx1QzE1OCBcdUFENkNcdUJEODRcclxuICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnKipcdUJDMUNcdUM3NEM6KionKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbiA9IGxpbmUuc3Vic3RyaW5nKDcpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ3Byb251bmNpYXRpb24nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmUuc3RhcnRzV2l0aCgnKipcdUI3M0I6KionKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAnbWVhbmluZ3MnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmUuc3RhcnRzV2l0aCgnKipcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0OioqJykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJXb3Jkc1RleHQgPSBsaW5lLnN1YnN0cmluZygxMikudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzLnB1c2goLi4uc2ltaWxhcldvcmRzVGV4dC5zcGxpdCgnLCcpLm1hcCh3ID0+IHcudHJpbSgpKSk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdzaW1pbGFyJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJyoqXHVDNjA4XHVCQjM4OioqJykpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ2V4YW1wbGVzJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJyoqXHVCQ0Y1XHVDMkI1IFx1QzgxNVx1QkNGNDoqKicpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdyZXZpZXcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnbWVhbmluZ3MnICYmIGxpbmUuc3RhcnRzV2l0aCgnLSAnKSkge1xyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3MucHVzaChsaW5lLnN1YnN0cmluZygyKS50cmltKCkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnZXhhbXBsZXMnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKCctICcpICYmICFsaW5lLnN0YXJ0c1dpdGgoJyAgLSAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzhcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEV4YW1wbGUuZW5nbGlzaCAmJiBjdXJyZW50RXhhbXBsZS5rb3JlYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiBjdXJyZW50RXhhbXBsZS5lbmdsaXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiBjdXJyZW50RXhhbXBsZS5rb3JlYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFeGFtcGxlID0geyBlbmdsaXNoOiBsaW5lLnN1YnN0cmluZygyKS50cmltKCkgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCcgIC0gJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEV4YW1wbGUua29yZWFuID0gbGluZS5zdWJzdHJpbmcoNCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAncmV2aWV3Jykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnLSBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4OiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldmlld0NvdW50ID0gcGFyc2VJbnQobGluZS5zdWJzdHJpbmcoOSkudHJpbSgpKSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJy0gXHVCMDlDXHVDNzc0XHVCM0M0OiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBsaW5lLnN1YnN0cmluZyg3KS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYgPT09ICdlYXN5JyB8fCBkaWZmID09PSAnZ29vZCcgfHwgZGlmZiA9PT0gJ2hhcmQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHkgPSBkaWZmO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCctIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDRjVcdUMyQjU6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFJldiA9IGxpbmUuc3Vic3RyaW5nKDExKS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJldmlld2VkID0gbGFzdFJldiA9PT0gJ1x1QzVDNlx1Qzc0QycgPyBudWxsIDogbGFzdFJldjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCctIFx1Q0Q5NFx1QUMwMFx1Qzc3QzogJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRlZERhdGUgPSBsaW5lLnN1YnN0cmluZyg3KS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzYwOFx1QkIzOCBcdUNDOThcdUI5QUNcclxuICAgICAgICBpZiAoY3VycmVudEV4YW1wbGUuZW5nbGlzaCAmJiBjdXJyZW50RXhhbXBsZS5rb3JlYW4pIHtcclxuICAgICAgICAgICAgZXhhbXBsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBlbmdsaXNoOiBjdXJyZW50RXhhbXBsZS5lbmdsaXNoLFxyXG4gICAgICAgICAgICAgICAga29yZWFuOiBjdXJyZW50RXhhbXBsZS5rb3JlYW5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghd29yZCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd29yZDogd29yZC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICBwcm9udW5jaWF0aW9uLFxyXG4gICAgICAgICAgICBtZWFuaW5ncyxcclxuICAgICAgICAgICAgc2ltaWxhcldvcmRzLFxyXG4gICAgICAgICAgICBleGFtcGxlcyxcclxuICAgICAgICAgICAgcmV2aWV3Q291bnQsXHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZCxcclxuICAgICAgICAgICAgYWRkZWREYXRlLFxyXG4gICAgICAgICAgICBib29rSWRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDIFx1Qjg1Q1x1QjREQ1xyXG4gICAgYXN5bmMgbG9hZEFsbEJvb2tzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMuYm9va3MuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLndvcmRzLmNsZWFyKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplVm9jYWJ1bGFyeUZvbGRlcigpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRCb29rKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xyXG4gICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRCb29rRnJvbUZpbGUoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1RDMwQ1x1Qzc3QyBcdUI4NUNcdUI0RENcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzEyNFx1QzgxNSBcdUQzMENcdUM3N0MgXHVDODAwXHVDN0E1L1x1Qjg1Q1x1QjREQ1xyXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRofS9zZXR0aW5ncy5qc29uYCk7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuc2V0dGluZ3MsXHJcbiAgICAgICAgICAgIHN0YXRpc3RpY3M6IHRoaXMuc3RhdGlzdGljc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNldHRpbmdzUGF0aCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nRmlsZSwgY29udGVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoc2V0dGluZ3NQYXRoLCBjb250ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzEyNFx1QzgxNSBcdUQzMENcdUM3N0MgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aH0vc2V0dGluZ3MuanNvbmApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc2V0dGluZ3NQYXRoKTtcclxuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShjb250ZW50KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzID0geyAuLi50aGlzLnNldHRpbmdzLCAuLi5kYXRhLnNldHRpbmdzIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0aXN0aWNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0aXN0aWNzID0geyAuLi50aGlzLnN0YXRpc3RpY3MsIC4uLmRhdGEuc3RhdGlzdGljcyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdUMxMjRcdUM4MTUgXHVEMzBDXHVDNzdDIFx1Qjg1Q1x1QjREQyBcdUMyRTRcdUQzMjgsIFx1QUUzMFx1QkNGOFx1QUMxMiBcdUMwQUNcdUM2QTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBCb29rIFx1QUQwMFx1QjlBQyBcdUJBNTRcdUMxMUNcdUI0RENcdUI0RTRcclxuICAgIGFzeW5jIGNyZWF0ZUJvb2sobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nID0gJycpOiBQcm9taXNlPEJvb2s+IHtcclxuICAgICAgICBjb25zdCBpZCA9IGBib29rXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcclxuICAgICAgICBjb25zdCBib29rOiBCb29rID0ge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgd29yZENvdW50OiAwLFxyXG4gICAgICAgICAgICBpc0RlZmF1bHQ6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmJvb2tzLnNldChpZCwgYm9vayk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgICAgIHJldHVybiBib29rO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZUJvb2soYm9va0lkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8Qm9vaz4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQoYm9va0lkKTtcclxuICAgICAgICBpZiAoIWJvb2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCb29rIFwiJHtib29rSWR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVkQm9vazogQm9vayA9IHtcclxuICAgICAgICAgICAgLi4uYm9vayxcclxuICAgICAgICAgICAgLi4udXBkYXRlcyxcclxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmJvb2tzLnNldChib29rSWQsIHVwZGF0ZWRCb29rKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKHVwZGF0ZWRCb29rKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZUJvb2soYm9va0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoYm9va0lkID09PSAnZGVmYXVsdCcpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQwIFx1QzBBRFx1QzgxQ1x1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XHJcbiAgICAgICAgaWYgKCFib29rKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQm9vayBcIiR7Ym9va0lkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYm9va1x1QzVEMCBcdUMxOERcdUQ1NUMgXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUNcclxuICAgICAgICBjb25zdCB3b3Jkc1RvRGVsZXRlID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IGJvb2tJZClcclxuICAgICAgICAgICAgLm1hcCh3b3JkID0+IHdvcmQud29yZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzVG9EZWxldGUpIHtcclxuICAgICAgICAgICAgdGhpcy53b3Jkcy5kZWxldGUod29yZC50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGJvb2sgXHVDMEFEXHVDODFDXHJcbiAgICAgICAgdGhpcy5ib29rcy5kZWxldGUoYm9va0lkKTtcclxuXHJcbiAgICAgICAgLy8gXHVEMzBDXHVDNzdDIFx1QzBBRFx1QzgxQ1xyXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7Ym9vay5uYW1lLnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCAnXycpfS5tZGA7XHJcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGAke3RoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YCk7XHJcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5kZWxldGUoZmlsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgYm9va1x1Qzc3NCBcdUMwQURcdUM4MUNcdUI0MUMgYm9va1x1Qzc3NFx1QkE3NCBcdUFFMzBcdUJDRjggYm9va1x1QzczQ1x1Qjg1QyBcdUJDQzBcdUFDQkRcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkID09PSBib29rSWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkID0gJ2RlZmF1bHQnO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxCb29rcygpOiBCb29rW10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYm9va3MudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEuaXNEZWZhdWx0KSByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIGlmIChiLmlzRGVmYXVsdCkgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEJvb2soYm9va0lkOiBzdHJpbmcpOiBCb29rIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib29rcy5nZXQoYm9va0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXJyZW50Qm9vaygpOiBCb29rIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib29rcy5nZXQodGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZXRDdXJyZW50Qm9vayhib29rSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghdGhpcy5ib29rcy5oYXMoYm9va0lkKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJvb2sgXCIke2Jvb2tJZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkID0gYm9va0lkO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBCb29rXHVCQ0M0IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICBwcml2YXRlIHVwZGF0ZUJvb2tXb3JkQ291bnQoYm9va0lkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB3b3JkQ291bnQgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gYm9va0lkKS5sZW5ndGg7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay53b3JkQ291bnQgPSB3b3JkQ291bnQ7XHJcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwXHJcbiAgICBhc3luYyBhZGRXb3JkKHdvcmREYXRhOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmQgPSB3b3JkRGF0YS53b3JkLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMud29yZHMuaGFzKHdvcmQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkRGF0YS53b3JkfVwiXHVCMjk0IFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NjlcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBuZXdXb3JkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcclxuICAgICAgICAgICAgLi4ud29yZERhdGEsXHJcbiAgICAgICAgICAgIHdvcmQ6IHdvcmREYXRhLndvcmQudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IDAsXHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6ICdnb29kJyxcclxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBudWxsLFxyXG4gICAgICAgICAgICBhZGRlZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgYm9va0lkOiB3b3JkRGF0YS5ib29rSWQgfHwgdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy53b3Jkcy5zZXQod29yZCwgbmV3V29yZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2sgXHVEMzBDXHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldChuZXdXb3JkLmJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay53b3JkQ291bnQrKztcclxuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQ1xyXG4gICAgYXN5bmMgcmVtb3ZlV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB3b3JkS2V5ID0gd29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IHdvcmREYXRhID0gdGhpcy53b3Jkcy5nZXQod29yZEtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF3b3JkRGF0YSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJvb2tJZCA9IHdvcmREYXRhLmJvb2tJZDtcclxuICAgICAgICB0aGlzLndvcmRzLmRlbGV0ZSh3b3JkS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9vayBcdUQzMENcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay53b3JkQ291bnQtLTtcclxuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOCAoXHVCQ0Y1XHVDMkI1IFx1QUNCMFx1QUNGQylcclxuICAgIGFzeW5jIHVwZGF0ZVdvcmQod29yZDogc3RyaW5nLCBkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB3b3JkS2V5ID0gd29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IHdvcmREYXRhID0gdGhpcy53b3Jkcy5nZXQod29yZEtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF3b3JkRGF0YSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdvcmREYXRhLnJldmlld0NvdW50Kys7XHJcbiAgICAgICAgd29yZERhdGEuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHk7XHJcbiAgICAgICAgd29yZERhdGEubGFzdFJldmlld2VkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG5cclxuICAgICAgICAvLyBcdUQxQjVcdUFDQzQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnRvdGFsUmV2aWV3cysrO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RyZWFrKCk7XHJcblxyXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQod29yZERhdGEuYm9va0lkKTtcclxuICAgICAgICBpZiAoYm9vaykge1xyXG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUM4MDRcdUNDQjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOCAoTExNIEFQSVx1Qjg1QyBcdUFDMDBcdUM4MzhcdUM2MjggXHVDODE1XHVCQ0Y0XHVCODVDIFx1QjM2RVx1QzVCNFx1QzRGMFx1QUUzMClcclxuICAgIGFzeW5jIHVwZGF0ZVdvcmREYXRhKHdvcmQ6IHN0cmluZywgdXBkYXRlZFdvcmREYXRhOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmRLZXkgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdXb3JkID0gdGhpcy53b3Jkcy5nZXQod29yZEtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFleGlzdGluZ1dvcmQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVCMkU4XHVDNUI0XHVDNzU4IFx1QkNGNVx1QzJCNSBcdUFEMDBcdUI4MjggXHVDODE1XHVCQ0Y0XHVCMjk0IFx1QzcyMFx1QzlDMFx1RDU1OFx1QUNFMCwgXHVCNzNCIFx1QzgxNVx1QkNGNFx1QjlDQyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBjb25zdCB1cGRhdGVkV29yZDogVm9jYWJ1bGFyeUNhcmQgPSB7XHJcbiAgICAgICAgICAgIC4uLnVwZGF0ZWRXb3JkRGF0YSxcclxuICAgICAgICAgICAgd29yZDogd29yZEtleSxcclxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IGV4aXN0aW5nV29yZC5yZXZpZXdDb3VudCxcclxuICAgICAgICAgICAgZGlmZmljdWx0eTogZXhpc3RpbmdXb3JkLmRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogZXhpc3RpbmdXb3JkLmxhc3RSZXZpZXdlZCxcclxuICAgICAgICAgICAgYWRkZWREYXRlOiBleGlzdGluZ1dvcmQuYWRkZWREYXRlLFxyXG4gICAgICAgICAgICBib29rSWQ6IGV4aXN0aW5nV29yZC5ib29rSWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLndvcmRzLnNldCh3b3JkS2V5LCB1cGRhdGVkV29yZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2sgXHVEMzBDXHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldCh1cGRhdGVkV29yZC5ib29rSWQpO1xyXG4gICAgICAgIGlmIChib29rKSB7XHJcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGJvb2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OENcclxuICAgIGdldFdvcmQod29yZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndvcmRzLmdldCh3b3JkLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDYwNFx1QzdBQyBib29rXHVDNzU4IFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXHJcbiAgICBnZXRBbGxXb3JkcygpOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZClcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEud29yZC5sb2NhbGVDb21wYXJlKGIud29yZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDJCOVx1QzgxNSBib29rXHVDNzU4IFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXHJcbiAgICBnZXRXb3Jkc0J5Qm9vayhib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gYm9va0lkKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS53b3JkLmxvY2FsZUNvbXBhcmUoYi53b3JkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QjMwMFx1QzBDMSBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDIChcdUQ2MDRcdUM3QUMgYm9vaylcclxuICAgIGdldFdvcmRzRm9yUmV2aWV3KCk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgcmV2aWV3SW50ZXJ2YWxNcyA9IHRoaXMuc2V0dGluZ3MucmV2aWV3SW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG5cclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZClcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghd29yZC5sYXN0UmV2aWV3ZWQpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmV2aWV3ID0gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdFJldmlldyA9IG5vdy5nZXRUaW1lKCkgLSBsYXN0UmV2aWV3LmdldFRpbWUoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVTaW5jZUxhc3RSZXZpZXcgPj0gcmV2aWV3SW50ZXJ2YWxNcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QUM4MFx1QzBDOSAoXHVENjA0XHVDN0FDIGJvb2spXHJcbiAgICBzZWFyY2hXb3JkcyhxdWVyeTogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PlxyXG4gICAgICAgICAgICAgICAgd29yZC53b3JkLmluY2x1ZGVzKGxvd2VyUXVlcnkpIHx8XHJcbiAgICAgICAgICAgICAgICB3b3JkLm1lYW5pbmdzLnNvbWUobWVhbmluZyA9PiBtZWFuaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVEMUI1XHVBQ0M0IFx1Qzg3MFx1RDY4QyAoXHVENjA0XHVDN0FDIGJvb2spXHJcbiAgICBnZXRTdGF0aXN0aWNzKCkge1xyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCk7XHJcbiAgICAgICAgY29uc3QgdG90YWxXb3JkcyA9IHdvcmRzLmxlbmd0aDtcclxuICAgICAgICBjb25zdCB0b3RhbFJldmlld3MgPSB0aGlzLnN0YXRpc3RpY3MudG90YWxSZXZpZXdzO1xyXG4gICAgICAgIGNvbnN0IGF2ZXJhZ2VEaWZmaWN1bHR5ID0gd29yZHMubGVuZ3RoID4gMCBcclxuICAgICAgICAgICAgPyB3b3Jkcy5yZWR1Y2UoKHN1bSwgd29yZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZmljdWx0eVZhbHVlID0gd29yZC5kaWZmaWN1bHR5ID09PSAnZWFzeScgPyAxIDogXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZC5kaWZmaWN1bHR5ID09PSAnZ29vZCcgPyAyIDogMztcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyBkaWZmaWN1bHR5VmFsdWU7XHJcbiAgICAgICAgICAgIH0sIDApIC8gd29yZHMubGVuZ3RoXHJcbiAgICAgICAgICAgIDogMDtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZHNCeURpZmZpY3VsdHkgPSB7XHJcbiAgICAgICAgICAgIGVhc3k6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2Vhc3knKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGdvb2Q6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2dvb2QnKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGhhcmQ6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2hhcmQnKS5sZW5ndGhcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBcdUNENUNcdUFERkMgN1x1Qzc3QyBcdUQ2NUNcdUIzRDkgXHVBQ0M0XHVDMEIwXHJcbiAgICAgICAgY29uc3QgcmVjZW50QWN0aXZpdHkgPSB0aGlzLmNhbGN1bGF0ZVJlY2VudEFjdGl2aXR5KCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvdGFsV29yZHMsXHJcbiAgICAgICAgICAgIHRvdGFsUmV2aWV3cyxcclxuICAgICAgICAgICAgc3RyZWFrRGF5czogdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMsXHJcbiAgICAgICAgICAgIGF2ZXJhZ2VEaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICB3b3Jkc0J5RGlmZmljdWx0eSxcclxuICAgICAgICAgICAgcmVjZW50QWN0aXZpdHlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1Qzc3Q1x1Qzc3QyBcdUJBQTlcdUQ0NUMgXHVDOUM0XHVENTg5XHVCOTYwIFx1Qzg3MFx1RDY4QyAoXHVENjA0XHVDN0FDIGJvb2spXHJcbiAgICBnZXREYWlseUdvYWxQcm9ncmVzcygpIHtcclxuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgdG9kYXlXb3JkcyA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpLnRvRGF0ZVN0cmluZygpID09PSB0b2RheTtcclxuICAgICAgICAgICAgfSkubGVuZ3RoO1xyXG5cclxuICAgICAgICBjb25zdCBnb2FsID0gdGhpcy5zZXR0aW5ncy5kYWlseUdvYWw7XHJcbiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IGdvYWwgPiAwID8gTWF0aC5taW4oKHRvZGF5V29yZHMgLyBnb2FsKSAqIDEwMCwgMTAwKSA6IDA7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IHRvZGF5V29yZHMsXHJcbiAgICAgICAgICAgIGdvYWw6IGdvYWwsXHJcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IHBlcmNlbnRhZ2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIGFzeW5jIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPHR5cGVvZiB0aGlzLnNldHRpbmdzPik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIC4uLm5ld1NldHRpbmdzIH07XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM4MDBcdUM3QTVcdUM2QTkgXHVENjE1XHVDMkREXHVDNzNDXHVCODVDIFx1QkNDMFx1RDY1OCAoXHVENjM4XHVENjU4XHVDMTMxIFx1QzcyMFx1QzlDMClcclxuICAgIGdldERhdGFGb3JTYXZlKCk6IERhdGFiYXNlRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYm9va3M6IEFycmF5LmZyb20odGhpcy5ib29rcy52YWx1ZXMoKSksXHJcbiAgICAgICAgICAgIHdvcmRzOiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpLFxyXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5zZXR0aW5ncyxcclxuICAgICAgICAgICAgc3RhdGlzdGljczogdGhpcy5zdGF0aXN0aWNzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM4MDBcdUM3QTVcdUI0MUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNUQwXHVDMTFDIFx1Qjg1Q1x1QjREQyAoXHVENjM4XHVENjU4XHVDMTMxIFx1QzcyMFx1QzlDMClcclxuICAgIGFzeW5jIGxvYWRGcm9tRGF0YShkYXRhOiBEYXRhYmFzZURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyBNRCBcdUQzMENcdUM3N0MgXHVDMkRDXHVDMkE0XHVEMTVDXHVDNUQwXHVDMTFDXHVCMjk0IFx1Qzc3NCBcdUJBNTRcdUMxMUNcdUI0REMgXHVCMzAwXHVDMkUwIGxvYWRBbGxCb29rcygpXHVCOTdDIFx1QzBBQ1x1QzZBOVxyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZEFsbEJvb2tzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNUYwXHVDMThEIFx1RDU1OVx1QzJCNVx1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHByaXZhdGUgdXBkYXRlU3RyZWFrKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBsYXN0U3R1ZHlEYXRlID0gdGhpcy5zdGF0aXN0aWNzLmxhc3RTdHVkeURhdGUgXHJcbiAgICAgICAgICAgID8gbmV3IERhdGUodGhpcy5zdGF0aXN0aWNzLmxhc3RTdHVkeURhdGUpLnRvRGF0ZVN0cmluZygpXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGxhc3RTdHVkeURhdGUgPT09IHRvZGF5KSB7XHJcbiAgICAgICAgICAgIC8vIFx1QzYyNFx1QjI5OCBcdUM3NzRcdUJCRjggXHVENTU5XHVDMkI1XHVENTg4XHVDNzNDXHVCQTc0IFx1QzVGMFx1QzE4RFx1Qzc3QyBcdUM5OURcdUFDMDBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghbGFzdFN0dWR5RGF0ZSkge1xyXG4gICAgICAgICAgICAvLyBcdUNDOThcdUM3NEMgXHVENTU5XHVDMkI1XHVENTU4XHVCMjk0IFx1QUNCRFx1QzZCMFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRpc3RpY3Muc3RyZWFrRGF5cyA9IDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgeWVzdGVyZGF5LnNldERhdGUoeWVzdGVyZGF5LmdldERhdGUoKSAtIDEpO1xyXG4gICAgICAgICAgICBjb25zdCB5ZXN0ZXJkYXlTdHIgPSB5ZXN0ZXJkYXkudG9EYXRlU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobGFzdFN0dWR5RGF0ZSA9PT0geWVzdGVyZGF5U3RyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUM1QjRcdUM4MUMgXHVENTU5XHVDMkI1XHVENTg4XHVDNzNDXHVCQTc0IFx1QzVGMFx1QzE4RFx1Qzc3QyBcdUM5OURcdUFDMDBcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGlzdGljcy5zdHJlYWtEYXlzKys7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUM1RjBcdUMxOERcdUM3NzQgXHVCMDRBXHVDNUI0XHVDOUM0IFx1QUNCRFx1QzZCMCAxXHVCODVDIFx1QjlBQ1x1QzE0QlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN0YXRpc3RpY3MubGFzdFN0dWR5RGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUNENUNcdUFERkMgN1x1Qzc3QyBcdUQ2NUNcdUIzRDkgXHVBQ0M0XHVDMEIwXHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZVJlY2VudEFjdGl2aXR5KCkge1xyXG4gICAgICAgIGNvbnN0IGFjdGl2aXR5ID0gW107XHJcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gNjsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRvZGF5KTtcclxuICAgICAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBkYXRlLnRvRGF0ZVN0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgd29yZHNTdHVkaWVkID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKS5maWx0ZXIod29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpLnRvRGF0ZVN0cmluZygpID09PSBkYXRlU3RyO1xyXG4gICAgICAgICAgICB9KS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXZpZXdzQ29tcGxldGVkID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKS5maWx0ZXIod29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXZpZXdEYXRlID0gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldmlld0RhdGUudG9EYXRlU3RyaW5nKCkgPT09IGRhdGVTdHI7XHJcbiAgICAgICAgICAgIH0pLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGFjdGl2aXR5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZGF0ZTogZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXHJcbiAgICAgICAgICAgICAgICB3b3Jkc1N0dWRpZWQsXHJcbiAgICAgICAgICAgICAgICByZXZpZXdzQ29tcGxldGVkXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGFjdGl2aXR5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVBQ0JEXHVCODVDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgdXBkYXRlVm9jYWJ1bGFyeUZvbGRlclBhdGgobmV3UGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCA9IG5ld1BhdGg7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplVm9jYWJ1bGFyeUZvbGRlcigpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiBmcm9tICcuL21haW4nO1xyXG5pbXBvcnQgeyBXb3JkU2VydmljZSB9IGZyb20gJy4vV29yZFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBBZGRCb29rTW9kYWwgfSBmcm9tICcuL0FkZEJvb2tNb2RhbCc7XHJcblxyXG5leHBvcnQgY2xhc3MgQWRkV29yZHNNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XHJcbiAgICB3b3JkU2VydmljZTogV29yZFNlcnZpY2U7XHJcbiAgICBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgYm9va1NlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMud29yZFNlcnZpY2UgPSBuZXcgV29yZFNlcnZpY2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdhZGQtd29yZHMtbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1Q0Q1Q1x1QzJFMCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG5cclxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTIwXHVEMEREIFx1QjREQ1x1Qjg2RFx1QjJFNFx1QzZCNFxyXG4gICAgICAgIGNvbnN0IGJvb2tTZWxlY3RTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Jvb2stc2VsZWN0LXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIGNvbnN0IGJvb2tMYWJlbCA9IGJvb2tTZWxlY3RTZWN0aW9uLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjBcdUQwREQnLCBjbHM6ICdib29rLXNlbGVjdC1sYWJlbCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYm9va1NlbGVjdENvbnRhaW5lciA9IGJvb2tTZWxlY3RTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Jvb2stc2VsZWN0LWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgdGhpcy5ib29rU2VsZWN0ID0gYm9va1NlbGVjdENvbnRhaW5lci5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdib29rLXNlbGVjdC1kcm9wZG93bicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1Q0Q5NFx1QUMwMCBcdUJDODRcdUQyQkNcclxuICAgICAgICBjb25zdCBhZGRCb29rQnV0dG9uID0gYm9va1NlbGVjdENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Q0Q5NFx1QUMwMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2FkZC1ib29rLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBhZGRCb29rQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5vcGVuQWRkQm9va01vZGFsKCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQm9va1NlbGVjdCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuYm9va1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEJvb2tJZCA9IChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5zZXRDdXJyZW50Qm9vayhzZWxlY3RlZEJvb2tJZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzEgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOFxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Jvb2tDcmVhdGVkJywgdGhpcy5oYW5kbGVCb29rQ3JlYXRlZC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gXHVDODFDXHVCQUE5XHJcbiAgICAgICAgY29uc3QgdGl0bGVFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJywgY2xzOiAnbW9kYWwtdGl0bGUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzEyNFx1QkE4NVxyXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDRDk0XHVBQzAwXHVENTYwIFx1QzYwMVx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIFx1QUMwMSBcdUIyRThcdUM1QjRcdUIyOTQgXHVDMEM4IFx1QzkwNFx1Qjg1QyBcdUFENkNcdUJEODRcdUI0MjlcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICAgICAgY2xzOiAnbW9kYWwtZGVzY3JpcHRpb24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1Qzc4NVx1QjgyNSBcdUM2MDFcdUM1RURcclxuICAgICAgICBjb25zdCBpbnB1dFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnaW5wdXQtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBpbnB1dFNlY3Rpb24uY3JlYXRlRWwoJ3RleHRhcmVhJywge1xyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ2JlYXV0aWZ1bFxcbmhhcHB5XFxubGVhcm5cXG5zdHVkeVxcbndvcmtcXG4uLi4nLFxyXG4gICAgICAgICAgICBjbHM6ICd3b3Jkcy10ZXh0YXJlYSdcclxuICAgICAgICB9KTtcclxuICAgICAgICB0ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ3Jvd3MnLCAnMTAnKTtcclxuXHJcbiAgICAgICAgLy8gXHVDNjA4XHVDMkRDIFx1QkM4NFx1RDJCQ1xyXG4gICAgICAgIGNvbnN0IGV4YW1wbGVCdG4gPSBpbnB1dFNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUM2MDhcdUMyREMgXHVCMkU4XHVDNUI0XHVCNEU0IFx1QkQ4OFx1QjdFQ1x1QzYyNFx1QUUzMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2V4YW1wbGUtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV4YW1wbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gJ2JlYXV0aWZ1bFxcbmhhcHB5XFxubGVhcm5cXG5zdHVkeVxcbndvcmtcXG5pbXBvcnRhbnRcXG5zdWNjZXNzXFxua25vd2xlZGdlXFxuZXhwZXJpZW5jZVxcbmZyZWVkb20nO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUJDODRcdUQyQkMgXHVDNjAxXHVDNUVEXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLFxyXG4gICAgICAgICAgICBjbHM6ICdhZGQtYnV0dG9uIHByaW1hcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5hZGRXb3Jkcyh0ZXh0YXJlYS52YWx1ZSwgdGhpcy5ib29rU2VsZWN0LnZhbHVlKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG4gICAgICAgIC8vIFx1QzlDNFx1RDU4OSBcdUMwQzFcdUQ2NjkgXHVENDVDXHVDMkRDIFx1QzYwMVx1QzVFRFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1zZWN0aW9uJyB9KTtcclxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1OFx1QjI5NCBcdUM5MTEuLi4nLFxyXG4gICAgICAgICAgICBjbHM6ICdwcm9ncmVzcy10ZXh0J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gcHJvZ3Jlc3NTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWJhcicgfSk7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gcHJvZ3Jlc3NCYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtZmlsbCcgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QUNCMFx1QUNGQyBcdUQ0NUNcdUMyREMgXHVDNjAxXHVDNUVEXHJcbiAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICAgICAgICAvLyBFbnRlciBcdUQwQTRcdUI4NUMgXHVDRDk0XHVBQzAwIFx1QUMwMFx1QjJBNVx1RDU1OFx1QjNDNFx1Qjg1RFxyXG4gICAgICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5jdHJsS2V5ICYmIGUua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFdvcmRzKHRleHRhcmVhLnZhbHVlLCB0aGlzLmJvb2tTZWxlY3QudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1RDNFQ1x1Q0VFNFx1QzJBNCBcdUMxMjRcdUM4MTVcclxuICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgYWRkV29yZHMoaW5wdXRUZXh0OiBzdHJpbmcsIGJvb2tJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5wYXJzZVdvcmRzKGlucHV0VGV4dCk7XHJcbiAgICAgICAgaWYgKHdvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUNEOTRcdUFDMDBcdUQ1NjAgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2hvd1Byb2dyZXNzKHdvcmRzLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IFtdIGFzIHN0cmluZ1tdLFxyXG4gICAgICAgICAgICBmYWlsZWQ6IFtdIGFzIHN0cmluZ1tdLFxyXG4gICAgICAgICAgICBhbHJlYWR5RXhpc3RzOiBbXSBhcyBzdHJpbmdbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHdvcmRzW2ldO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDOUM0XHVENTg5XHVCOTYwIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzKGkgKyAxLCB3b3Jkcy5sZW5ndGgsIGBcdUNDOThcdUI5QUMgXHVDOTExOiAke3dvcmR9YCk7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nV29yZCA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRXb3JkKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nV29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuYWxyZWFkeUV4aXN0cy5wdXNoKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXHJcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IGF3YWl0IHRoaXMud29yZFNlcnZpY2UuZ2V0V29yZERhdGEod29yZCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFdvcmREYXRhXHVCOTdDIFZvY2FidWxhcnlDYXJkXHVCODVDIFx1QkNDMFx1RDY1OFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgdm9jYWJ1bGFyeUNhcmQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4ud29yZERhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV2aWV3Q291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eTogJ2dvb2QnIGFzIGNvbnN0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBhZGRlZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBib29rSWQ6IGJvb2tJZFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwIFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQodm9jYWJ1bGFyeUNhcmQpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5zdWNjZXNzLnB1c2god29yZCk7XHJcblxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiIFx1Q0Q5NFx1QUMwMCBcdUMyRTRcdUQzMjg6YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoKTtcclxuICAgICAgICB0aGlzLnNob3dSZXN1bHRzKHJlc3VsdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VXb3JkcyhpbnB1dFRleHQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gaW5wdXRUZXh0XHJcbiAgICAgICAgICAgIC5zcGxpdCgnXFxuJylcclxuICAgICAgICAgICAgLm1hcCh3b3JkID0+IHdvcmQudHJpbSgpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gd29yZC50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKCh3b3JkLCBpbmRleCwgYXJyYXkpID0+IGFycmF5LmluZGV4T2Yod29yZCkgPT09IGluZGV4KTsgLy8gXHVDOTExXHVCQ0Y1IFx1QzgxQ1x1QUM3MFxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1Byb2dyZXNzKHRvdGFsV29yZHM6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IGBcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTU4XHVCMjk0IFx1QzkxMS4uLiAoMC8ke3RvdGFsV29yZHN9KWA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVQcm9ncmVzcyhjdXJyZW50OiBudW1iZXIsIHRvdGFsOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1maWxsJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IChjdXJyZW50IC8gdG90YWwpICogMTAwO1xyXG4gICAgICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IGAke21lc3NhZ2V9ICgke2N1cnJlbnR9LyR7dG90YWx9KWA7XHJcbiAgICAgICAgcHJvZ3Jlc3NGaWxsLnN0eWxlLndpZHRoID0gYCR7cGVyY2VudGFnZX0lYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhpZGVQcm9ncmVzcygpIHtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1Jlc3VsdHMocmVzdWx0czogeyBzdWNjZXNzOiBzdHJpbmdbXTsgZmFpbGVkOiBzdHJpbmdbXTsgYWxyZWFkeUV4aXN0czogc3RyaW5nW10gfSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICByZXN1bHRTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIHJlc3VsdFNlY3Rpb24uZW1wdHkoKTtcclxuXHJcbiAgICAgICAgY29uc3QgdG90YWxQcm9jZXNzZWQgPSByZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoICsgcmVzdWx0cy5mYWlsZWQubGVuZ3RoICsgcmVzdWx0cy5hbHJlYWR5RXhpc3RzLmxlbmd0aDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUFDQjBcdUFDRkMgXHVDNjk0XHVDNTdEXHJcbiAgICAgICAgY29uc3Qgc3VtbWFyeUVsID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHRzLXN1bW1hcnknIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gc3VjY2VzcycgfSk7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3NFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNzA1IFx1QzEzMVx1QUNGNTogJHtyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RofVx1QUMxQ2AsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA8PSA1KSB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuc3VjY2Vzcy5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVzdWx0cy5hbHJlYWR5RXhpc3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RzRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gd2FybmluZycgfSk7XHJcbiAgICAgICAgICAgIGV4aXN0c0VsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI2QTBcdUZFMEYgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQzogJHtyZXN1bHRzLmFscmVhZHlFeGlzdHMubGVuZ3RofVx1QUMxQ2AsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5hbHJlYWR5RXhpc3RzLmxlbmd0aCA8PSA1KSB7XHJcbiAgICAgICAgICAgICAgICBleGlzdHNFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5hbHJlYWR5RXhpc3RzLmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZXN1bHRzLmZhaWxlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhaWxlZEVsID0gc3VtbWFyeUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1pdGVtIGVycm9yJyB9KTtcclxuICAgICAgICAgICAgZmFpbGVkRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1Mjc0QyBcdUMyRTRcdUQzMjg6ICR7cmVzdWx0cy5mYWlsZWQubGVuZ3RofVx1QUMxQ2AsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5mYWlsZWQubGVuZ3RoIDw9IDUpIHtcclxuICAgICAgICAgICAgICAgIGZhaWxlZEVsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLmZhaWxlZC5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUJDODRcdUQyQkNcdUI0RTRcclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtYnV0dG9ucycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkVCXHVBRTMwJyxcclxuICAgICAgICAgICAgY2xzOiAnY2xvc2UtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkTW9yZUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIzNTQgXHVDRDk0XHVBQzAwXHVENTU4XHVBRTMwJyxcclxuICAgICAgICAgICAgY2xzOiAnYWRkLW1vcmUtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFkZE1vcmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc3VsdFNlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcud29yZHMtdGV4dGFyZWEnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUMxMzFcdUFDRjVcdUQ1NUMgXHVCMkU4XHVDNUI0XHVBQzAwIFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM1NENcdUI5QkNcclxuICAgICAgICBpZiAocmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgJHtyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RofVx1QUMxQ1x1Qzc1OCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1Q0Q5NFx1QUMwMFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYm9va0NyZWF0ZWQnLCB0aGlzLmhhbmRsZUJvb2tDcmVhdGVkLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb3BlbkFkZEJvb2tNb2RhbCgpIHtcclxuICAgICAgICBuZXcgQWRkQm9va01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQm9va0NyZWF0ZWQoZXZlbnQ6IEN1c3RvbUV2ZW50KSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVCb29rU2VsZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVCb29rU2VsZWN0KCkge1xyXG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUNENUNcdUMyRTAgXHVCMzcwXHVDNzc0XHVEMTMwIFx1Qjg1Q1x1QjREQ1xyXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBib29rcyA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xyXG4gICAgICAgIHRoaXMuYm9va1NlbGVjdC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBib29rcy5mb3JFYWNoKGJvb2sgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gYm9vay5pZDtcclxuICAgICAgICAgICAgb3B0aW9uLnRleHQgPSBib29rLm5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuYm9va1NlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59ICJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQXVCOzs7QUNBdkIsc0JBQWdFOzs7QUNHaEUsSUFBTSxpQkFBaUI7QUFFaEIsU0FBUyxjQUFjLFFBQXdCO0FBQ2xELE1BQUksQ0FBQztBQUFRLFdBQU87QUFFcEIsTUFBSTtBQUVBLFFBQUksWUFBWTtBQUNoQixhQUFTLElBQUksR0FBRyxJQUFJLE9BQU8sUUFBUSxLQUFLO0FBQ3BDLFlBQU0sV0FBVyxPQUFPLFdBQVcsQ0FBQyxJQUFJLGVBQWUsV0FBVyxJQUFJLGVBQWUsTUFBTTtBQUMzRixtQkFBYSxPQUFPLGFBQWEsUUFBUTtBQUFBLElBQzdDO0FBQ0EsV0FBTyxLQUFLLFNBQVM7QUFBQSxFQUN6QixTQUFTLE9BQU87QUFDWixZQUFRLE1BQU0sK0NBQWlCLEtBQUs7QUFDcEMsV0FBTztBQUFBLEVBQ1g7QUFDSjtBQUVPLFNBQVMsY0FBYyxpQkFBaUM7QUFDM0QsTUFBSSxDQUFDO0FBQWlCLFdBQU87QUFFN0IsTUFBSTtBQUNBLFVBQU0sVUFBVSxLQUFLLGVBQWU7QUFDcEMsUUFBSSxZQUFZO0FBQ2hCLGFBQVMsSUFBSSxHQUFHLElBQUksUUFBUSxRQUFRLEtBQUs7QUFDckMsWUFB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LGdCQUMvQixHQUFHO0FBQUEsZ0JBQ0gsUUFBUTtBQUFBLGdCQUNSLGVBQWUsS0FBSyxpQkFBaUI7QUFBQSxjQUN6QyxDQUFDO0FBQUEsWUFDTCxTQUFTLE9BQU87QUFDWixzQkFBUSxLQUFLLG1FQUFpQixLQUFLLElBQUksSUFBSSxLQUFLO0FBQUEsWUFDcEQ7QUFBQSxVQUNKO0FBQUEsUUFDSjtBQUdBLFlBQUksV0FBVyxVQUFVO0FBQ3JCLGdCQUFNLEtBQUssZ0JBQWdCLGVBQWUsV0FBVyxRQUFRO0FBQUEsUUFDakU7QUFFQSxnQkFBUSxJQUFJLG1EQUFXO0FBQUEsTUFDM0I7QUFBQSxJQUNKLFNBQVMsT0FBTztBQUNaLGNBQVEsTUFBTSxzREFBYyxLQUFLO0FBQUEsSUFDckM7QUFBQSxFQUNKO0FBQUE7QUFBQSxFQUdBLE1BQU0sY0FBYztBQUNoQixVQUFNLE9BQU87QUFBQSxNQUNULFVBQVUsS0FBSztBQUFBLElBQ25CO0FBQ0EsVUFBTSxLQUFLLFNBQVMsSUFBSTtBQUFBLEVBQzVCO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJwcm90b3R5cGUiLCAiZGVzY3JpcHRvcnMiLCAiZmlsdGVyIiwgImhhc093blByb3BlcnR5IiwgImZpbHRlciIsICJwcm90b3R5cGUiLCAidG9TdHJpbmciLCAiZW5jb2RlIiwgImlzRm9ybURhdGEiLCAiaXNGaWxlTGlzdCIsICJ0cmFuc2l0aW9uYWwiLCAiZmlsdGVyIiwgInNlbGYiLCAicHJvdG90eXBlIiwgInZhbGlkYXRlU3RhdHVzIiwgIm9yaWdpbiIsICJtZXJnZSIsICJ0cmFuc2l0aW9uYWwiLCAic2lnbmFsIiwgIml0ZXJhdG9yIiwgImRvbmUiLCAicmVzIiwgInZhbGlkYXRvcnMiLCAidHJhbnNpdGlvbmFsIiwgIkF4aW9zIiwgIkF4aW9zRXJyb3IiLCAiQ2FuY2VsZWRFcnJvciIsICJpc0NhbmNlbCIsICJDYW5jZWxUb2tlbiIsICJWRVJTSU9OIiwgImFsbCIsICJpc0F4aW9zRXJyb3IiLCAic3ByZWFkIiwgInRvRm9ybURhdGEiLCAiQXhpb3NIZWFkZXJzIiwgIkh0dHBTdGF0dXNDb2RlIiwgIm1lcmdlQ29uZmlnIiwgImpzb25EYXRhIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJDb25maXJtTW9kYWwiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
