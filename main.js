/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all3) => {
  for (var name in all3)
    __defProp(target, name, { get: all3[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  AddBookModal: () => AddBookModal,
  EnglishVocabularyPlugin: () => EnglishVocabularyPlugin,
  default: () => EnglishVocabularyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/features/settings/ui/settings.ts
var import_obsidian = require("obsidian");

// src/utils.ts
function isPlainTextApiKey(apiKey) {
  if (!apiKey)
    return false;
  const apiKeyPatterns = [
    /^sk-[a-zA-Z0-9]{32,}$/,
    // OpenAI API 키
    /^sk-ant-[a-zA-Z0-9-_]{95}$/,
    // Anthropic API 키
    /^AIza[a-zA-Z0-9-_]{35}$/,
    // Google API 키
    /^[a-zA-Z0-9-_]{20,}$/
    // 일반적인 긴 토큰
  ];
  return apiKeyPatterns.some((pattern) => pattern.test(apiKey));
}
function encryptApiKey(apiKey) {
  if (!apiKey)
    return "";
  if (!isPlainTextApiKey(apiKey)) {
    return apiKey;
  }
  try {
    const key = "obsidian-vocab-temp-key-2024";
    let encrypted = "";
    for (let i = 0; i < apiKey.length; i++) {
      const charCode = apiKey.charCodeAt(i) ^ key.charCodeAt(i % key.length);
      encrypted += String.fromCharCode(charCode);
    }
    return btoa(encrypted);
  } catch (error) {
    console.error("\uB3D9\uAE30 \uC554\uD638\uD654 \uC2E4\uD328:", error);
    return "";
  }
}
function decryptApiKey(encryptedApiKey) {
  if (!encryptedApiKey)
    return "";
  if (isPlainTextApiKey(encryptedApiKey)) {
    return encryptedApiKey;
  }
  try {
    const key = "obsidian-vocab-temp-key-2024";
    const decoded = atob(encryptedApiKey);
    let decrypted = "";
    for (let i = 0; i < decoded.length; i++) {
      const charCode = decoded.charCodeAt(i) ^ key.charCodeAt(i % key.length);
      decrypted += String.fromCharCode(charCode);
    }
    return decrypted;
  } catch (error) {
    console.warn("\uBCF5\uD638\uD654 \uC2E4\uD328, \uD3C9\uBB38\uC73C\uB85C \uAC04\uC8FC:", error.message);
    return encryptedApiKey;
  }
}
function maskApiKey(apiKey) {
  if (!apiKey || typeof apiKey !== "string")
    return "";
  if (apiKey.length <= 8)
    return "*".repeat(apiKey.length);
  return apiKey.substring(0, 4) + "*".repeat(apiKey.length - 8) + apiKey.substring(apiKey.length - 4);
}
function formatDate(dateString) {
  if (!dateString) {
    return "\uC5C6\uC74C";
  }
  const date = new Date(dateString);
  if (isNaN(date.getTime())) {
    return "\uC798\uBABB\uB41C \uB0A0\uC9DC";
  }
  return date.toLocaleDateString("ko-KR", {
    year: "numeric",
    month: "long",
    day: "numeric"
  });
}

// src/shared/Config.ts
var DEFAULT_CONFIG = {
  api: {
    timeouts: {
      default: 3e4,
      // 30초
      llm: 6e4,
      // 60초
      tts: 15e3
      // 15초
    },
    retries: {
      maxAttempts: 3,
      delayMs: 1e3,
      exponentialBackoff: true
    },
    rateLimiting: {
      requestsPerMinute: 60,
      burstLimit: 10
    }
  },
  batch: {
    defaultSize: 5,
    maxSize: 20,
    delayBetweenBatches: 200,
    maxConcurrentBatches: 3
  },
  audio: {
    maxPoolSize: 10,
    autoCleanupTimeoutMs: 3e4,
    // 30초
    maxDurationMs: 3e5
    // 5분
  },
  database: {
    autoSaveInterval: 5e3,
    // 5초
    backupEnabled: true,
    maxFileSize: 10485760,
    // 10MB
    compressionEnabled: false
  },
  learning: {
    spaced_repetition: {
      initialInterval: 1,
      // 1일
      easyBonus: 1.3,
      hardPenalty: 0.8,
      maxInterval: 365,
      // 1년
      minInterval: 1
      // 1일
    },
    load_balancing: {
      maxDailyReviews: 100,
      fuzzingPercentage: 5,
      distributionWindow: 7
      // 7일
    }
  },
  ui: {
    animationDuration: 300,
    // 300ms
    progressUpdateInterval: 100,
    // 100ms
    notificationTimeout: 5e3,
    // 5초
    modalCloseDelay: 500
    // 500ms
  },
  security: {
    apiKeyEncryption: {
      iterations: 1e4,
      keyLength: 32,
      saltLength: 16
    },
    sessionTimeout: 36e5,
    // 1시간
    maxLoginAttempts: 5
  }
};
var DEVELOPMENT_CONFIG = {
  api: {
    timeouts: {
      default: 1e4,
      llm: 2e4,
      tts: 5e3
    },
    retries: {
      maxAttempts: 1,
      delayMs: 500,
      exponentialBackoff: false
    }
  },
  batch: {
    defaultSize: 2,
    maxSize: 5,
    delayBetweenBatches: 100
  },
  database: {
    autoSaveInterval: 1e3,
    backupEnabled: false
  }
};
var PRODUCTION_CONFIG = {
  api: {
    retries: {
      maxAttempts: 5,
      delayMs: 2e3,
      exponentialBackoff: true
    }
  },
  batch: {
    defaultSize: 10,
    maxSize: 50,
    delayBetweenBatches: 500
  },
  database: {
    autoSaveInterval: 1e4,
    backupEnabled: true,
    compressionEnabled: true
  }
};
var ConfigManager = class _ConfigManager {
  constructor() {
    this.config = this.mergeConfigs(DEFAULT_CONFIG, this.getEnvironmentConfig());
  }
  static getInstance() {
    if (!_ConfigManager.instance) {
      _ConfigManager.instance = new _ConfigManager();
    }
    return _ConfigManager.instance;
  }
  getConfig() {
    return { ...this.config };
  }
  getValue(path) {
    return this.getNestedValue(this.config, path);
  }
  updateConfig(updates) {
    this.config = this.mergeConfigs(this.config, updates);
  }
  getEnvironmentConfig() {
    const isDevelopment = true;
    return isDevelopment ? DEVELOPMENT_CONFIG : PRODUCTION_CONFIG;
  }
  mergeConfigs(base, override) {
    const result = { ...base };
    for (const [key, value] of Object.entries(override)) {
      if (value && typeof value === "object" && !Array.isArray(value)) {
        result[key] = {
          ...result[key],
          ...value
        };
      } else {
        result[key] = value;
      }
    }
    return result;
  }
  getNestedValue(obj, path) {
    return path.split(".").reduce((current, key) => current == null ? void 0 : current[key], obj);
  }
};
function getConfigValue(path) {
  return ConfigManager.getInstance().getValue(path);
}
var CONFIG_PATHS = {
  API_TIMEOUT_DEFAULT: "api.timeouts.default",
  API_TIMEOUT_LLM: "api.timeouts.llm",
  API_TIMEOUT_TTS: "api.timeouts.tts",
  API_RETRY_MAX_ATTEMPTS: "api.retries.maxAttempts",
  API_RETRY_DELAY: "api.retries.delayMs",
  BATCH_DEFAULT_SIZE: "batch.defaultSize",
  BATCH_MAX_SIZE: "batch.maxSize",
  BATCH_DELAY: "batch.delayBetweenBatches",
  AUDIO_MAX_POOL_SIZE: "audio.maxPoolSize",
  AUDIO_CLEANUP_TIMEOUT: "audio.autoCleanupTimeoutMs",
  LEARNING_INITIAL_INTERVAL: "learning.spaced_repetition.initialInterval",
  LEARNING_EASY_BONUS: "learning.spaced_repetition.easyBonus",
  LEARNING_HARD_PENALTY: "learning.spaced_repetition.hardPenalty",
  UI_ANIMATION_DURATION: "ui.animationDuration",
  UI_NOTIFICATION_TIMEOUT: "ui.notificationTimeout"
};

// src/shared/RetryPolicy.ts
var RetryPolicy = class {
  constructor(options = {}) {
    var _a, _b, _c, _d, _e, _f;
    this.options = {
      maxAttempts: (_a = options.maxAttempts) != null ? _a : getConfigValue(CONFIG_PATHS.API_RETRY_MAX_ATTEMPTS),
      delayMs: (_b = options.delayMs) != null ? _b : getConfigValue(CONFIG_PATHS.API_RETRY_DELAY),
      exponentialBackoff: (_c = options.exponentialBackoff) != null ? _c : true,
      maxDelayMs: (_d = options.maxDelayMs) != null ? _d : 3e4,
      // 30초
      backoffMultiplier: (_e = options.backoffMultiplier) != null ? _e : 2,
      retryCondition: (_f = options.retryCondition) != null ? _f : this.defaultRetryCondition
    };
  }
  // 기본 재시도 조건
  defaultRetryCondition(error) {
    const retryableErrors = [
      "NetworkError",
      "TimeoutError",
      "fetch",
      "502",
      "503",
      "504",
      // 서버 에러
      "ECONNRESET",
      "ETIMEDOUT",
      "ENOTFOUND"
    ];
    const errorMessage = error.message.toLowerCase();
    const errorName = error.name.toLowerCase();
    return retryableErrors.some(
      (pattern) => errorMessage.includes(pattern.toLowerCase()) || errorName.includes(pattern.toLowerCase())
    );
  }
  // 지수 백오프 계산
  calculateDelay(attempt) {
    if (!this.options.exponentialBackoff) {
      return this.options.delayMs;
    }
    const delay2 = this.options.delayMs * Math.pow(this.options.backoffMultiplier, attempt - 1);
    const jitter = delay2 * 0.2 * (Math.random() - 0.5);
    const finalDelay = Math.floor(delay2 + jitter);
    return Math.min(finalDelay, this.options.maxDelayMs);
  }
  // 비동기 함수 재시도
  async execute(fn) {
    const startTime = Date.now();
    let lastError;
    for (let attempt = 1; attempt <= this.options.maxAttempts; attempt++) {
      try {
        const result = await fn();
        return {
          success: true,
          result,
          attempts: attempt,
          totalDuration: Date.now() - startTime
        };
      } catch (error) {
        lastError = error instanceof Error ? error : new Error(String(error));
        if (attempt === this.options.maxAttempts || !this.options.retryCondition(lastError)) {
          break;
        }
        const delay2 = this.calculateDelay(attempt);
        await this.delay(delay2);
      }
    }
    return {
      success: false,
      error: lastError,
      attempts: this.options.maxAttempts,
      totalDuration: Date.now() - startTime
    };
  }
  // 동기 함수 재시도
  executeSync(fn) {
    const startTime = Date.now();
    let lastError;
    for (let attempt = 1; attempt <= this.options.maxAttempts; attempt++) {
      try {
        const result = fn();
        return {
          success: true,
          result,
          attempts: attempt,
          totalDuration: Date.now() - startTime
        };
      } catch (error) {
        lastError = error instanceof Error ? error : new Error(String(error));
        if (attempt === this.options.maxAttempts || !this.options.retryCondition(lastError)) {
          break;
        }
      }
    }
    return {
      success: false,
      error: lastError,
      attempts: this.options.maxAttempts,
      totalDuration: Date.now() - startTime
    };
  }
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  // 설정 업데이트
  updateOptions(options) {
    this.options = { ...this.options, ...options };
  }
  // 현재 설정 반환
  getOptions() {
    return { ...this.options };
  }
};
var APIRetryPolicy = class extends RetryPolicy {
  constructor(options = {}) {
    super({
      maxAttempts: 3,
      delayMs: 2e3,
      exponentialBackoff: true,
      maxDelayMs: 15e3,
      retryCondition: (error) => {
        const retryableErrors = [
          "429",
          // Rate limit
          "502",
          "503",
          "504",
          // Server errors
          "timeout",
          "network"
        ];
        const errorText = error.message.toLowerCase();
        return retryableErrors.some((pattern) => errorText.includes(pattern));
      },
      ...options
    });
  }
};
async function retryAPICall(fn, options) {
  const policy = new APIRetryPolicy(options);
  const result = await policy.execute(fn);
  if (result.success) {
    return result.result;
  } else {
    throw result.error;
  }
}

// node_modules/axios/lib/helpers/bind.js
function bind(fn, thisArg) {
  return function wrap() {
    return fn.apply(thisArg, arguments);
  };
}

// node_modules/axios/lib/utils.js
var { toString } = Object.prototype;
var { getPrototypeOf } = Object;
var { iterator, toStringTag } = Symbol;
var kindOf = /* @__PURE__ */ ((cache) => (thing) => {
  const str = toString.call(thing);
  return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());
})(/* @__PURE__ */ Object.create(null));
var kindOfTest = (type) => {
  type = type.toLowerCase();
  return (thing) => kindOf(thing) === type;
};
var typeOfTest = (type) => (thing) => typeof thing === type;
var { isArray } = Array;
var isUndefined = typeOfTest("undefined");
function isBuffer(val) {
  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor) && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);
}
var isArrayBuffer = kindOfTest("ArrayBuffer");
function isArrayBufferView(val) {
  let result;
  if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) {
    result = ArrayBuffer.isView(val);
  } else {
    result = val && val.buffer && isArrayBuffer(val.buffer);
  }
  return result;
}
var isString = typeOfTest("string");
var isFunction = typeOfTest("function");
var isNumber = typeOfTest("number");
var isObject = (thing) => thing !== null && typeof thing === "object";
var isBoolean = (thing) => thing === true || thing === false;
var isPlainObject = (val) => {
  if (kindOf(val) !== "object") {
    return false;
  }
  const prototype3 = getPrototypeOf(val);
  return (prototype3 === null || prototype3 === Object.prototype || Object.getPrototypeOf(prototype3) === null) && !(toStringTag in val) && !(iterator in val);
};
var isDate = kindOfTest("Date");
var isFile = kindOfTest("File");
var isBlob = kindOfTest("Blob");
var isFileList = kindOfTest("FileList");
var isStream = (val) => isObject(val) && isFunction(val.pipe);
var isFormData = (thing) => {
  let kind;
  return thing && (typeof FormData === "function" && thing instanceof FormData || isFunction(thing.append) && ((kind = kindOf(thing)) === "formdata" || // detect form-data instance
  kind === "object" && isFunction(thing.toString) && thing.toString() === "[object FormData]"));
};
var isURLSearchParams = kindOfTest("URLSearchParams");
var [isReadableStream, isRequest, isResponse, isHeaders] = ["ReadableStream", "Request", "Response", "Headers"].map(kindOfTest);
var trim = (str) => str.trim ? str.trim() : str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
function forEach(obj, fn, { allOwnKeys = false } = {}) {
  if (obj === null || typeof obj === "undefined") {
    return;
  }
  let i;
  let l;
  if (typeof obj !== "object") {
    obj = [obj];
  }
  if (isArray(obj)) {
    for (i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);
    const len = keys.length;
    let key;
    for (i = 0; i < len; i++) {
      key = keys[i];
      fn.call(null, obj[key], key, obj);
    }
  }
}
function findKey(obj, key) {
  key = key.toLowerCase();
  const keys = Object.keys(obj);
  let i = keys.length;
  let _key;
  while (i-- > 0) {
    _key = keys[i];
    if (key === _key.toLowerCase()) {
      return _key;
    }
  }
  return null;
}
var _global = (() => {
  if (typeof globalThis !== "undefined")
    return globalThis;
  return typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : global;
})();
var isContextDefined = (context) => !isUndefined(context) && context !== _global;
function merge() {
  const { caseless } = isContextDefined(this) && this || {};
  const result = {};
  const assignValue = (val, key) => {
    const targetKey = caseless && findKey(result, key) || key;
    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {
      result[targetKey] = merge(result[targetKey], val);
    } else if (isPlainObject(val)) {
      result[targetKey] = merge({}, val);
    } else if (isArray(val)) {
      result[targetKey] = val.slice();
    } else {
      result[targetKey] = val;
    }
  };
  for (let i = 0, l = arguments.length; i < l; i++) {
    arguments[i] && forEach(arguments[i], assignValue);
  }
  return result;
}
var extend = (a, b, thisArg, { allOwnKeys } = {}) => {
  forEach(b, (val, key) => {
    if (thisArg && isFunction(val)) {
      a[key] = bind(val, thisArg);
    } else {
      a[key] = val;
    }
  }, { allOwnKeys });
  return a;
};
var stripBOM = (content) => {
  if (content.charCodeAt(0) === 65279) {
    content = content.slice(1);
  }
  return content;
};
var inherits = (constructor, superConstructor, props, descriptors2) => {
  constructor.prototype = Object.create(superConstructor.prototype, descriptors2);
  constructor.prototype.constructor = constructor;
  Object.defineProperty(constructor, "super", {
    value: superConstructor.prototype
  });
  props && Object.assign(constructor.prototype, props);
};
var toFlatObject = (sourceObj, destObj, filter2, propFilter) => {
  let props;
  let i;
  let prop;
  const merged = {};
  destObj = destObj || {};
  if (sourceObj == null)
    return destObj;
  do {
    props = Object.getOwnPropertyNames(sourceObj);
    i = props.length;
    while (i-- > 0) {
      prop = props[i];
      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {
        destObj[prop] = sourceObj[prop];
        merged[prop] = true;
      }
    }
    sourceObj = filter2 !== false && getPrototypeOf(sourceObj);
  } while (sourceObj && (!filter2 || filter2(sourceObj, destObj)) && sourceObj !== Object.prototype);
  return destObj;
};
var endsWith = (str, searchString, position) => {
  str = String(str);
  if (position === void 0 || position > str.length) {
    position = str.length;
  }
  position -= searchString.length;
  const lastIndex = str.indexOf(searchString, position);
  return lastIndex !== -1 && lastIndex === position;
};
var toArray = (thing) => {
  if (!thing)
    return null;
  if (isArray(thing))
    return thing;
  let i = thing.length;
  if (!isNumber(i))
    return null;
  const arr = new Array(i);
  while (i-- > 0) {
    arr[i] = thing[i];
  }
  return arr;
};
var isTypedArray = /* @__PURE__ */ ((TypedArray) => {
  return (thing) => {
    return TypedArray && thing instanceof TypedArray;
  };
})(typeof Uint8Array !== "undefined" && getPrototypeOf(Uint8Array));
var forEachEntry = (obj, fn) => {
  const generator = obj && obj[iterator];
  const _iterator = generator.call(obj);
  let result;
  while ((result = _iterator.next()) && !result.done) {
    const pair = result.value;
    fn.call(obj, pair[0], pair[1]);
  }
};
var matchAll = (regExp, str) => {
  let matches;
  const arr = [];
  while ((matches = regExp.exec(str)) !== null) {
    arr.push(matches);
  }
  return arr;
};
var isHTMLForm = kindOfTest("HTMLFormElement");
var toCamelCase = (str) => {
  return str.toLowerCase().replace(
    /[-_\s]([a-z\d])(\w*)/g,
    function replacer(m, p1, p2) {
      return p1.toUpperCase() + p2;
    }
  );
};
var hasOwnProperty = (({ hasOwnProperty: hasOwnProperty2 }) => (obj, prop) => hasOwnProperty2.call(obj, prop))(Object.prototype);
var isRegExp = kindOfTest("RegExp");
var reduceDescriptors = (obj, reducer) => {
  const descriptors2 = Object.getOwnPropertyDescriptors(obj);
  const reducedDescriptors = {};
  forEach(descriptors2, (descriptor, name) => {
    let ret;
    if ((ret = reducer(descriptor, name, obj)) !== false) {
      reducedDescriptors[name] = ret || descriptor;
    }
  });
  Object.defineProperties(obj, reducedDescriptors);
};
var freezeMethods = (obj) => {
  reduceDescriptors(obj, (descriptor, name) => {
    if (isFunction(obj) && ["arguments", "caller", "callee"].indexOf(name) !== -1) {
      return false;
    }
    const value = obj[name];
    if (!isFunction(value))
      return;
    descriptor.enumerable = false;
    if ("writable" in descriptor) {
      descriptor.writable = false;
      return;
    }
    if (!descriptor.set) {
      descriptor.set = () => {
        throw Error("Can not rewrite read-only method '" + name + "'");
      };
    }
  });
};
var toObjectSet = (arrayOrString, delimiter) => {
  const obj = {};
  const define = (arr) => {
    arr.forEach((value) => {
      obj[value] = true;
    });
  };
  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));
  return obj;
};
var noop = () => {
};
var toFiniteNumber = (value, defaultValue) => {
  return value != null && Number.isFinite(value = +value) ? value : defaultValue;
};
function isSpecCompliantForm(thing) {
  return !!(thing && isFunction(thing.append) && thing[toStringTag] === "FormData" && thing[iterator]);
}
var toJSONObject = (obj) => {
  const stack = new Array(10);
  const visit = (source, i) => {
    if (isObject(source)) {
      if (stack.indexOf(source) >= 0) {
        return;
      }
      if (!("toJSON" in source)) {
        stack[i] = source;
        const target = isArray(source) ? [] : {};
        forEach(source, (value, key) => {
          const reducedValue = visit(value, i + 1);
          !isUndefined(reducedValue) && (target[key] = reducedValue);
        });
        stack[i] = void 0;
        return target;
      }
    }
    return source;
  };
  return visit(obj, 0);
};
var isAsyncFn = kindOfTest("AsyncFunction");
var isThenable = (thing) => thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);
var _setImmediate = ((setImmediateSupported, postMessageSupported) => {
  if (setImmediateSupported) {
    return setImmediate;
  }
  return postMessageSupported ? ((token, callbacks) => {
    _global.addEventListener("message", ({ source, data }) => {
      if (source === _global && data === token) {
        callbacks.length && callbacks.shift()();
      }
    }, false);
    return (cb) => {
      callbacks.push(cb);
      _global.postMessage(token, "*");
    };
  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);
})(
  typeof setImmediate === "function",
  isFunction(_global.postMessage)
);
var asap = typeof queueMicrotask !== "undefined" ? queueMicrotask.bind(_global) : typeof process !== "undefined" && process.nextTick || _setImmediate;
var isIterable = (thing) => thing != null && isFunction(thing[iterator]);
var utils_default = {
  isArray,
  isArrayBuffer,
  isBuffer,
  isFormData,
  isArrayBufferView,
  isString,
  isNumber,
  isBoolean,
  isObject,
  isPlainObject,
  isReadableStream,
  isRequest,
  isResponse,
  isHeaders,
  isUndefined,
  isDate,
  isFile,
  isBlob,
  isRegExp,
  isFunction,
  isStream,
  isURLSearchParams,
  isTypedArray,
  isFileList,
  forEach,
  merge,
  extend,
  trim,
  stripBOM,
  inherits,
  toFlatObject,
  kindOf,
  kindOfTest,
  endsWith,
  toArray,
  forEachEntry,
  matchAll,
  isHTMLForm,
  hasOwnProperty,
  hasOwnProp: hasOwnProperty,
  // an alias to avoid ESLint no-prototype-builtins detection
  reduceDescriptors,
  freezeMethods,
  toObjectSet,
  toCamelCase,
  noop,
  toFiniteNumber,
  findKey,
  global: _global,
  isContextDefined,
  isSpecCompliantForm,
  toJSONObject,
  isAsyncFn,
  isThenable,
  setImmediate: _setImmediate,
  asap,
  isIterable
};

// node_modules/axios/lib/core/AxiosError.js
function AxiosError(message, code, config, request, response) {
  Error.call(this);
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, this.constructor);
  } else {
    this.stack = new Error().stack;
  }
  this.message = message;
  this.name = "AxiosError";
  code && (this.code = code);
  config && (this.config = config);
  request && (this.request = request);
  if (response) {
    this.response = response;
    this.status = response.status ? response.status : null;
  }
}
utils_default.inherits(AxiosError, Error, {
  toJSON: function toJSON() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: utils_default.toJSONObject(this.config),
      code: this.code,
      status: this.status
    };
  }
});
var prototype = AxiosError.prototype;
var descriptors = {};
[
  "ERR_BAD_OPTION_VALUE",
  "ERR_BAD_OPTION",
  "ECONNABORTED",
  "ETIMEDOUT",
  "ERR_NETWORK",
  "ERR_FR_TOO_MANY_REDIRECTS",
  "ERR_DEPRECATED",
  "ERR_BAD_RESPONSE",
  "ERR_BAD_REQUEST",
  "ERR_CANCELED",
  "ERR_NOT_SUPPORT",
  "ERR_INVALID_URL"
  // eslint-disable-next-line func-names
].forEach((code) => {
  descriptors[code] = { value: code };
});
Object.defineProperties(AxiosError, descriptors);
Object.defineProperty(prototype, "isAxiosError", { value: true });
AxiosError.from = (error, code, config, request, response, customProps) => {
  const axiosError = Object.create(prototype);
  utils_default.toFlatObject(error, axiosError, function filter2(obj) {
    return obj !== Error.prototype;
  }, (prop) => {
    return prop !== "isAxiosError";
  });
  AxiosError.call(axiosError, error.message, code, config, request, response);
  axiosError.cause = error;
  axiosError.name = error.name;
  customProps && Object.assign(axiosError, customProps);
  return axiosError;
};
var AxiosError_default = AxiosError;

// node_modules/axios/lib/helpers/null.js
var null_default = null;

// node_modules/axios/lib/helpers/toFormData.js
function isVisitable(thing) {
  return utils_default.isPlainObject(thing) || utils_default.isArray(thing);
}
function removeBrackets(key) {
  return utils_default.endsWith(key, "[]") ? key.slice(0, -2) : key;
}
function renderKey(path, key, dots) {
  if (!path)
    return key;
  return path.concat(key).map(function each(token, i) {
    token = removeBrackets(token);
    return !dots && i ? "[" + token + "]" : token;
  }).join(dots ? "." : "");
}
function isFlatArray(arr) {
  return utils_default.isArray(arr) && !arr.some(isVisitable);
}
var predicates = utils_default.toFlatObject(utils_default, {}, null, function filter(prop) {
  return /^is[A-Z]/.test(prop);
});
function toFormData(obj, formData, options) {
  if (!utils_default.isObject(obj)) {
    throw new TypeError("target must be an object");
  }
  formData = formData || new (null_default || FormData)();
  options = utils_default.toFlatObject(options, {
    metaTokens: true,
    dots: false,
    indexes: false
  }, false, function defined(option, source) {
    return !utils_default.isUndefined(source[option]);
  });
  const metaTokens = options.metaTokens;
  const visitor = options.visitor || defaultVisitor;
  const dots = options.dots;
  const indexes = options.indexes;
  const _Blob = options.Blob || typeof Blob !== "undefined" && Blob;
  const useBlob = _Blob && utils_default.isSpecCompliantForm(formData);
  if (!utils_default.isFunction(visitor)) {
    throw new TypeError("visitor must be a function");
  }
  function convertValue(value) {
    if (value === null)
      return "";
    if (utils_default.isDate(value)) {
      return value.toISOString();
    }
    if (utils_default.isBoolean(value)) {
      return value.toString();
    }
    if (!useBlob && utils_default.isBlob(value)) {
      throw new AxiosError_default("Blob is not supported. Use a Buffer instead.");
    }
    if (utils_default.isArrayBuffer(value) || utils_default.isTypedArray(value)) {
      return useBlob && typeof Blob === "function" ? new Blob([value]) : Buffer.from(value);
    }
    return value;
  }
  function defaultVisitor(value, key, path) {
    let arr = value;
    if (value && !path && typeof value === "object") {
      if (utils_default.endsWith(key, "{}")) {
        key = metaTokens ? key : key.slice(0, -2);
        value = JSON.stringify(value);
      } else if (utils_default.isArray(value) && isFlatArray(value) || (utils_default.isFileList(value) || utils_default.endsWith(key, "[]")) && (arr = utils_default.toArray(value))) {
        key = removeBrackets(key);
        arr.forEach(function each(el, index) {
          !(utils_default.isUndefined(el) || el === null) && formData.append(
            // eslint-disable-next-line no-nested-ternary
            indexes === true ? renderKey([key], index, dots) : indexes === null ? key : key + "[]",
            convertValue(el)
          );
        });
        return false;
      }
    }
    if (isVisitable(value)) {
      return true;
    }
    formData.append(renderKey(path, key, dots), convertValue(value));
    return false;
  }
  const stack = [];
  const exposedHelpers = Object.assign(predicates, {
    defaultVisitor,
    convertValue,
    isVisitable
  });
  function build(value, path) {
    if (utils_default.isUndefined(value))
      return;
    if (stack.indexOf(value) !== -1) {
      throw Error("Circular reference detected in " + path.join("."));
    }
    stack.push(value);
    utils_default.forEach(value, function each(el, key) {
      const result = !(utils_default.isUndefined(el) || el === null) && visitor.call(
        formData,
        el,
        utils_default.isString(key) ? key.trim() : key,
        path,
        exposedHelpers
      );
      if (result === true) {
        build(el, path ? path.concat(key) : [key]);
      }
    });
    stack.pop();
  }
  if (!utils_default.isObject(obj)) {
    throw new TypeError("data must be an object");
  }
  build(obj);
  return formData;
}
var toFormData_default = toFormData;

// node_modules/axios/lib/helpers/AxiosURLSearchParams.js
function encode(str) {
  const charMap = {
    "!": "%21",
    "'": "%27",
    "(": "%28",
    ")": "%29",
    "~": "%7E",
    "%20": "+",
    "%00": "\0"
  };
  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {
    return charMap[match];
  });
}
function AxiosURLSearchParams(params, options) {
  this._pairs = [];
  params && toFormData_default(params, this, options);
}
var prototype2 = AxiosURLSearchParams.prototype;
prototype2.append = function append(name, value) {
  this._pairs.push([name, value]);
};
prototype2.toString = function toString2(encoder) {
  const _encode = encoder ? function(value) {
    return encoder.call(this, value, encode);
  } : encode;
  return this._pairs.map(function each(pair) {
    return _encode(pair[0]) + "=" + _encode(pair[1]);
  }, "").join("&");
};
var AxiosURLSearchParams_default = AxiosURLSearchParams;

// node_modules/axios/lib/helpers/buildURL.js
function encode2(val) {
  return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
function buildURL(url, params, options) {
  if (!params) {
    return url;
  }
  const _encode = options && options.encode || encode2;
  if (utils_default.isFunction(options)) {
    options = {
      serialize: options
    };
  }
  const serializeFn = options && options.serialize;
  let serializedParams;
  if (serializeFn) {
    serializedParams = serializeFn(params, options);
  } else {
    serializedParams = utils_default.isURLSearchParams(params) ? params.toString() : new AxiosURLSearchParams_default(params, options).toString(_encode);
  }
  if (serializedParams) {
    const hashmarkIndex = url.indexOf("#");
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }
    url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
  }
  return url;
}

// node_modules/axios/lib/core/InterceptorManager.js
var InterceptorManager = class {
  constructor() {
    this.handlers = [];
  }
  /**
   * Add a new interceptor to the stack
   *
   * @param {Function} fulfilled The function to handle `then` for a `Promise`
   * @param {Function} rejected The function to handle `reject` for a `Promise`
   *
   * @return {Number} An ID used to remove interceptor later
   */
  use(fulfilled, rejected, options) {
    this.handlers.push({
      fulfilled,
      rejected,
      synchronous: options ? options.synchronous : false,
      runWhen: options ? options.runWhen : null
    });
    return this.handlers.length - 1;
  }
  /**
   * Remove an interceptor from the stack
   *
   * @param {Number} id The ID that was returned by `use`
   *
   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise
   */
  eject(id) {
    if (this.handlers[id]) {
      this.handlers[id] = null;
    }
  }
  /**
   * Clear all interceptors from the stack
   *
   * @returns {void}
   */
  clear() {
    if (this.handlers) {
      this.handlers = [];
    }
  }
  /**
   * Iterate over all the registered interceptors
   *
   * This method is particularly useful for skipping over any
   * interceptors that may have become `null` calling `eject`.
   *
   * @param {Function} fn The function to call for each interceptor
   *
   * @returns {void}
   */
  forEach(fn) {
    utils_default.forEach(this.handlers, function forEachHandler(h) {
      if (h !== null) {
        fn(h);
      }
    });
  }
};
var InterceptorManager_default = InterceptorManager;

// node_modules/axios/lib/defaults/transitional.js
var transitional_default = {
  silentJSONParsing: true,
  forcedJSONParsing: true,
  clarifyTimeoutError: false
};

// node_modules/axios/lib/platform/browser/classes/URLSearchParams.js
var URLSearchParams_default = typeof URLSearchParams !== "undefined" ? URLSearchParams : AxiosURLSearchParams_default;

// node_modules/axios/lib/platform/browser/classes/FormData.js
var FormData_default = typeof FormData !== "undefined" ? FormData : null;

// node_modules/axios/lib/platform/browser/classes/Blob.js
var Blob_default = typeof Blob !== "undefined" ? Blob : null;

// node_modules/axios/lib/platform/browser/index.js
var browser_default = {
  isBrowser: true,
  classes: {
    URLSearchParams: URLSearchParams_default,
    FormData: FormData_default,
    Blob: Blob_default
  },
  protocols: ["http", "https", "file", "blob", "url", "data"]
};

// node_modules/axios/lib/platform/common/utils.js
var utils_exports = {};
__export(utils_exports, {
  hasBrowserEnv: () => hasBrowserEnv,
  hasStandardBrowserEnv: () => hasStandardBrowserEnv,
  hasStandardBrowserWebWorkerEnv: () => hasStandardBrowserWebWorkerEnv,
  navigator: () => _navigator,
  origin: () => origin
});
var hasBrowserEnv = typeof window !== "undefined" && typeof document !== "undefined";
var _navigator = typeof navigator === "object" && navigator || void 0;
var hasStandardBrowserEnv = hasBrowserEnv && (!_navigator || ["ReactNative", "NativeScript", "NS"].indexOf(_navigator.product) < 0);
var hasStandardBrowserWebWorkerEnv = (() => {
  return typeof WorkerGlobalScope !== "undefined" && // eslint-disable-next-line no-undef
  self instanceof WorkerGlobalScope && typeof self.importScripts === "function";
})();
var origin = hasBrowserEnv && window.location.href || "http://localhost";

// node_modules/axios/lib/platform/index.js
var platform_default = {
  ...utils_exports,
  ...browser_default
};

// node_modules/axios/lib/helpers/toURLEncodedForm.js
function toURLEncodedForm(data, options) {
  return toFormData_default(data, new platform_default.classes.URLSearchParams(), Object.assign({
    visitor: function(value, key, path, helpers) {
      if (platform_default.isNode && utils_default.isBuffer(value)) {
        this.append(key, value.toString("base64"));
        return false;
      }
      return helpers.defaultVisitor.apply(this, arguments);
    }
  }, options));
}

// node_modules/axios/lib/helpers/formDataToJSON.js
function parsePropPath(name) {
  return utils_default.matchAll(/\w+|\[(\w*)]/g, name).map((match) => {
    return match[0] === "[]" ? "" : match[1] || match[0];
  });
}
function arrayToObject(arr) {
  const obj = {};
  const keys = Object.keys(arr);
  let i;
  const len = keys.length;
  let key;
  for (i = 0; i < len; i++) {
    key = keys[i];
    obj[key] = arr[key];
  }
  return obj;
}
function formDataToJSON(formData) {
  function buildPath(path, value, target, index) {
    let name = path[index++];
    if (name === "__proto__")
      return true;
    const isNumericKey = Number.isFinite(+name);
    const isLast = index >= path.length;
    name = !name && utils_default.isArray(target) ? target.length : name;
    if (isLast) {
      if (utils_default.hasOwnProp(target, name)) {
        target[name] = [target[name], value];
      } else {
        target[name] = value;
      }
      return !isNumericKey;
    }
    if (!target[name] || !utils_default.isObject(target[name])) {
      target[name] = [];
    }
    const result = buildPath(path, value, target[name], index);
    if (result && utils_default.isArray(target[name])) {
      target[name] = arrayToObject(target[name]);
    }
    return !isNumericKey;
  }
  if (utils_default.isFormData(formData) && utils_default.isFunction(formData.entries)) {
    const obj = {};
    utils_default.forEachEntry(formData, (name, value) => {
      buildPath(parsePropPath(name), value, obj, 0);
    });
    return obj;
  }
  return null;
}
var formDataToJSON_default = formDataToJSON;

// node_modules/axios/lib/defaults/index.js
function stringifySafely(rawValue, parser, encoder) {
  if (utils_default.isString(rawValue)) {
    try {
      (parser || JSON.parse)(rawValue);
      return utils_default.trim(rawValue);
    } catch (e) {
      if (e.name !== "SyntaxError") {
        throw e;
      }
    }
  }
  return (encoder || JSON.stringify)(rawValue);
}
var defaults = {
  transitional: transitional_default,
  adapter: ["xhr", "http", "fetch"],
  transformRequest: [function transformRequest(data, headers) {
    const contentType = headers.getContentType() || "";
    const hasJSONContentType = contentType.indexOf("application/json") > -1;
    const isObjectPayload = utils_default.isObject(data);
    if (isObjectPayload && utils_default.isHTMLForm(data)) {
      data = new FormData(data);
    }
    const isFormData2 = utils_default.isFormData(data);
    if (isFormData2) {
      return hasJSONContentType ? JSON.stringify(formDataToJSON_default(data)) : data;
    }
    if (utils_default.isArrayBuffer(data) || utils_default.isBuffer(data) || utils_default.isStream(data) || utils_default.isFile(data) || utils_default.isBlob(data) || utils_default.isReadableStream(data)) {
      return data;
    }
    if (utils_default.isArrayBufferView(data)) {
      return data.buffer;
    }
    if (utils_default.isURLSearchParams(data)) {
      headers.setContentType("application/x-www-form-urlencoded;charset=utf-8", false);
      return data.toString();
    }
    let isFileList2;
    if (isObjectPayload) {
      if (contentType.indexOf("application/x-www-form-urlencoded") > -1) {
        return toURLEncodedForm(data, this.formSerializer).toString();
      }
      if ((isFileList2 = utils_default.isFileList(data)) || contentType.indexOf("multipart/form-data") > -1) {
        const _FormData = this.env && this.env.FormData;
        return toFormData_default(
          isFileList2 ? { "files[]": data } : data,
          _FormData && new _FormData(),
          this.formSerializer
        );
      }
    }
    if (isObjectPayload || hasJSONContentType) {
      headers.setContentType("application/json", false);
      return stringifySafely(data);
    }
    return data;
  }],
  transformResponse: [function transformResponse(data) {
    const transitional2 = this.transitional || defaults.transitional;
    const forcedJSONParsing = transitional2 && transitional2.forcedJSONParsing;
    const JSONRequested = this.responseType === "json";
    if (utils_default.isResponse(data) || utils_default.isReadableStream(data)) {
      return data;
    }
    if (data && utils_default.isString(data) && (forcedJSONParsing && !this.responseType || JSONRequested)) {
      const silentJSONParsing = transitional2 && transitional2.silentJSONParsing;
      const strictJSONParsing = !silentJSONParsing && JSONRequested;
      try {
        return JSON.parse(data);
      } catch (e) {
        if (strictJSONParsing) {
          if (e.name === "SyntaxError") {
            throw AxiosError_default.from(e, AxiosError_default.ERR_BAD_RESPONSE, this, null, this.response);
          }
          throw e;
        }
      }
    }
    return data;
  }],
  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  env: {
    FormData: platform_default.classes.FormData,
    Blob: platform_default.classes.Blob
  },
  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  },
  headers: {
    common: {
      "Accept": "application/json, text/plain, */*",
      "Content-Type": void 0
    }
  }
};
utils_default.forEach(["delete", "get", "head", "post", "put", "patch"], (method) => {
  defaults.headers[method] = {};
});
var defaults_default = defaults;

// node_modules/axios/lib/helpers/parseHeaders.js
var ignoreDuplicateOf = utils_default.toObjectSet([
  "age",
  "authorization",
  "content-length",
  "content-type",
  "etag",
  "expires",
  "from",
  "host",
  "if-modified-since",
  "if-unmodified-since",
  "last-modified",
  "location",
  "max-forwards",
  "proxy-authorization",
  "referer",
  "retry-after",
  "user-agent"
]);
var parseHeaders_default = (rawHeaders) => {
  const parsed = {};
  let key;
  let val;
  let i;
  rawHeaders && rawHeaders.split("\n").forEach(function parser(line) {
    i = line.indexOf(":");
    key = line.substring(0, i).trim().toLowerCase();
    val = line.substring(i + 1).trim();
    if (!key || parsed[key] && ignoreDuplicateOf[key]) {
      return;
    }
    if (key === "set-cookie") {
      if (parsed[key]) {
        parsed[key].push(val);
      } else {
        parsed[key] = [val];
      }
    } else {
      parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
    }
  });
  return parsed;
};

// node_modules/axios/lib/core/AxiosHeaders.js
var $internals = Symbol("internals");
function normalizeHeader(header) {
  return header && String(header).trim().toLowerCase();
}
function normalizeValue(value) {
  if (value === false || value == null) {
    return value;
  }
  return utils_default.isArray(value) ? value.map(normalizeValue) : String(value);
}
function parseTokens(str) {
  const tokens = /* @__PURE__ */ Object.create(null);
  const tokensRE = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;
  let match;
  while (match = tokensRE.exec(str)) {
    tokens[match[1]] = match[2];
  }
  return tokens;
}
var isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());
function matchHeaderValue(context, value, header, filter2, isHeaderNameFilter) {
  if (utils_default.isFunction(filter2)) {
    return filter2.call(this, value, header);
  }
  if (isHeaderNameFilter) {
    value = header;
  }
  if (!utils_default.isString(value))
    return;
  if (utils_default.isString(filter2)) {
    return value.indexOf(filter2) !== -1;
  }
  if (utils_default.isRegExp(filter2)) {
    return filter2.test(value);
  }
}
function formatHeader(header) {
  return header.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (w, char, str) => {
    return char.toUpperCase() + str;
  });
}
function buildAccessors(obj, header) {
  const accessorName = utils_default.toCamelCase(" " + header);
  ["get", "set", "has"].forEach((methodName) => {
    Object.defineProperty(obj, methodName + accessorName, {
      value: function(arg1, arg2, arg3) {
        return this[methodName].call(this, header, arg1, arg2, arg3);
      },
      configurable: true
    });
  });
}
var AxiosHeaders = class {
  constructor(headers) {
    headers && this.set(headers);
  }
  set(header, valueOrRewrite, rewrite) {
    const self2 = this;
    function setHeader(_value, _header, _rewrite) {
      const lHeader = normalizeHeader(_header);
      if (!lHeader) {
        throw new Error("header name must be a non-empty string");
      }
      const key = utils_default.findKey(self2, lHeader);
      if (!key || self2[key] === void 0 || _rewrite === true || _rewrite === void 0 && self2[key] !== false) {
        self2[key || _header] = normalizeValue(_value);
      }
    }
    const setHeaders = (headers, _rewrite) => utils_default.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));
    if (utils_default.isPlainObject(header) || header instanceof this.constructor) {
      setHeaders(header, valueOrRewrite);
    } else if (utils_default.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {
      setHeaders(parseHeaders_default(header), valueOrRewrite);
    } else if (utils_default.isObject(header) && utils_default.isIterable(header)) {
      let obj = {}, dest, key;
      for (const entry of header) {
        if (!utils_default.isArray(entry)) {
          throw TypeError("Object iterator must return a key-value pair");
        }
        obj[key = entry[0]] = (dest = obj[key]) ? utils_default.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]] : entry[1];
      }
      setHeaders(obj, valueOrRewrite);
    } else {
      header != null && setHeader(valueOrRewrite, header, rewrite);
    }
    return this;
  }
  get(header, parser) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils_default.findKey(this, header);
      if (key) {
        const value = this[key];
        if (!parser) {
          return value;
        }
        if (parser === true) {
          return parseTokens(value);
        }
        if (utils_default.isFunction(parser)) {
          return parser.call(this, value, key);
        }
        if (utils_default.isRegExp(parser)) {
          return parser.exec(value);
        }
        throw new TypeError("parser must be boolean|regexp|function");
      }
    }
  }
  has(header, matcher) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils_default.findKey(this, header);
      return !!(key && this[key] !== void 0 && (!matcher || matchHeaderValue(this, this[key], key, matcher)));
    }
    return false;
  }
  delete(header, matcher) {
    const self2 = this;
    let deleted = false;
    function deleteHeader(_header) {
      _header = normalizeHeader(_header);
      if (_header) {
        const key = utils_default.findKey(self2, _header);
        if (key && (!matcher || matchHeaderValue(self2, self2[key], key, matcher))) {
          delete self2[key];
          deleted = true;
        }
      }
    }
    if (utils_default.isArray(header)) {
      header.forEach(deleteHeader);
    } else {
      deleteHeader(header);
    }
    return deleted;
  }
  clear(matcher) {
    const keys = Object.keys(this);
    let i = keys.length;
    let deleted = false;
    while (i--) {
      const key = keys[i];
      if (!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {
        delete this[key];
        deleted = true;
      }
    }
    return deleted;
  }
  normalize(format) {
    const self2 = this;
    const headers = {};
    utils_default.forEach(this, (value, header) => {
      const key = utils_default.findKey(headers, header);
      if (key) {
        self2[key] = normalizeValue(value);
        delete self2[header];
        return;
      }
      const normalized = format ? formatHeader(header) : String(header).trim();
      if (normalized !== header) {
        delete self2[header];
      }
      self2[normalized] = normalizeValue(value);
      headers[normalized] = true;
    });
    return this;
  }
  concat(...targets) {
    return this.constructor.concat(this, ...targets);
  }
  toJSON(asStrings) {
    const obj = /* @__PURE__ */ Object.create(null);
    utils_default.forEach(this, (value, header) => {
      value != null && value !== false && (obj[header] = asStrings && utils_default.isArray(value) ? value.join(", ") : value);
    });
    return obj;
  }
  [Symbol.iterator]() {
    return Object.entries(this.toJSON())[Symbol.iterator]();
  }
  toString() {
    return Object.entries(this.toJSON()).map(([header, value]) => header + ": " + value).join("\n");
  }
  getSetCookie() {
    return this.get("set-cookie") || [];
  }
  get [Symbol.toStringTag]() {
    return "AxiosHeaders";
  }
  static from(thing) {
    return thing instanceof this ? thing : new this(thing);
  }
  static concat(first, ...targets) {
    const computed = new this(first);
    targets.forEach((target) => computed.set(target));
    return computed;
  }
  static accessor(header) {
    const internals = this[$internals] = this[$internals] = {
      accessors: {}
    };
    const accessors = internals.accessors;
    const prototype3 = this.prototype;
    function defineAccessor(_header) {
      const lHeader = normalizeHeader(_header);
      if (!accessors[lHeader]) {
        buildAccessors(prototype3, _header);
        accessors[lHeader] = true;
      }
    }
    utils_default.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);
    return this;
  }
};
AxiosHeaders.accessor(["Content-Type", "Content-Length", "Accept", "Accept-Encoding", "User-Agent", "Authorization"]);
utils_default.reduceDescriptors(AxiosHeaders.prototype, ({ value }, key) => {
  let mapped = key[0].toUpperCase() + key.slice(1);
  return {
    get: () => value,
    set(headerValue) {
      this[mapped] = headerValue;
    }
  };
});
utils_default.freezeMethods(AxiosHeaders);
var AxiosHeaders_default = AxiosHeaders;

// node_modules/axios/lib/core/transformData.js
function transformData(fns, response) {
  const config = this || defaults_default;
  const context = response || config;
  const headers = AxiosHeaders_default.from(context.headers);
  let data = context.data;
  utils_default.forEach(fns, function transform(fn) {
    data = fn.call(config, data, headers.normalize(), response ? response.status : void 0);
  });
  headers.normalize();
  return data;
}

// node_modules/axios/lib/cancel/isCancel.js
function isCancel(value) {
  return !!(value && value.__CANCEL__);
}

// node_modules/axios/lib/cancel/CanceledError.js
function CanceledError(message, config, request) {
  AxiosError_default.call(this, message == null ? "canceled" : message, AxiosError_default.ERR_CANCELED, config, request);
  this.name = "CanceledError";
}
utils_default.inherits(CanceledError, AxiosError_default, {
  __CANCEL__: true
});
var CanceledError_default = CanceledError;

// node_modules/axios/lib/core/settle.js
function settle(resolve, reject, response) {
  const validateStatus2 = response.config.validateStatus;
  if (!response.status || !validateStatus2 || validateStatus2(response.status)) {
    resolve(response);
  } else {
    reject(new AxiosError_default(
      "Request failed with status code " + response.status,
      [AxiosError_default.ERR_BAD_REQUEST, AxiosError_default.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],
      response.config,
      response.request,
      response
    ));
  }
}

// node_modules/axios/lib/helpers/parseProtocol.js
function parseProtocol(url) {
  const match = /^([-+\w]{1,25})(:?\/\/|:)/.exec(url);
  return match && match[1] || "";
}

// node_modules/axios/lib/helpers/speedometer.js
function speedometer(samplesCount, min) {
  samplesCount = samplesCount || 10;
  const bytes = new Array(samplesCount);
  const timestamps = new Array(samplesCount);
  let head = 0;
  let tail = 0;
  let firstSampleTS;
  min = min !== void 0 ? min : 1e3;
  return function push(chunkLength) {
    const now = Date.now();
    const startedAt = timestamps[tail];
    if (!firstSampleTS) {
      firstSampleTS = now;
    }
    bytes[head] = chunkLength;
    timestamps[head] = now;
    let i = tail;
    let bytesCount = 0;
    while (i !== head) {
      bytesCount += bytes[i++];
      i = i % samplesCount;
    }
    head = (head + 1) % samplesCount;
    if (head === tail) {
      tail = (tail + 1) % samplesCount;
    }
    if (now - firstSampleTS < min) {
      return;
    }
    const passed = startedAt && now - startedAt;
    return passed ? Math.round(bytesCount * 1e3 / passed) : void 0;
  };
}
var speedometer_default = speedometer;

// node_modules/axios/lib/helpers/throttle.js
function throttle(fn, freq) {
  let timestamp = 0;
  let threshold = 1e3 / freq;
  let lastArgs;
  let timer;
  const invoke = (args, now = Date.now()) => {
    timestamp = now;
    lastArgs = null;
    if (timer) {
      clearTimeout(timer);
      timer = null;
    }
    fn.apply(null, args);
  };
  const throttled = (...args) => {
    const now = Date.now();
    const passed = now - timestamp;
    if (passed >= threshold) {
      invoke(args, now);
    } else {
      lastArgs = args;
      if (!timer) {
        timer = setTimeout(() => {
          timer = null;
          invoke(lastArgs);
        }, threshold - passed);
      }
    }
  };
  const flush = () => lastArgs && invoke(lastArgs);
  return [throttled, flush];
}
var throttle_default = throttle;

// node_modules/axios/lib/helpers/progressEventReducer.js
var progressEventReducer = (listener, isDownloadStream, freq = 3) => {
  let bytesNotified = 0;
  const _speedometer = speedometer_default(50, 250);
  return throttle_default((e) => {
    const loaded = e.loaded;
    const total = e.lengthComputable ? e.total : void 0;
    const progressBytes = loaded - bytesNotified;
    const rate = _speedometer(progressBytes);
    const inRange = loaded <= total;
    bytesNotified = loaded;
    const data = {
      loaded,
      total,
      progress: total ? loaded / total : void 0,
      bytes: progressBytes,
      rate: rate ? rate : void 0,
      estimated: rate && total && inRange ? (total - loaded) / rate : void 0,
      event: e,
      lengthComputable: total != null,
      [isDownloadStream ? "download" : "upload"]: true
    };
    listener(data);
  }, freq);
};
var progressEventDecorator = (total, throttled) => {
  const lengthComputable = total != null;
  return [(loaded) => throttled[0]({
    lengthComputable,
    total,
    loaded
  }), throttled[1]];
};
var asyncDecorator = (fn) => (...args) => utils_default.asap(() => fn(...args));

// node_modules/axios/lib/helpers/isURLSameOrigin.js
var isURLSameOrigin_default = platform_default.hasStandardBrowserEnv ? /* @__PURE__ */ ((origin2, isMSIE) => (url) => {
  url = new URL(url, platform_default.origin);
  return origin2.protocol === url.protocol && origin2.host === url.host && (isMSIE || origin2.port === url.port);
})(
  new URL(platform_default.origin),
  platform_default.navigator && /(msie|trident)/i.test(platform_default.navigator.userAgent)
) : () => true;

// node_modules/axios/lib/helpers/cookies.js
var cookies_default = platform_default.hasStandardBrowserEnv ? (
  // Standard browser envs support document.cookie
  {
    write(name, value, expires, path, domain, secure) {
      const cookie = [name + "=" + encodeURIComponent(value)];
      utils_default.isNumber(expires) && cookie.push("expires=" + new Date(expires).toGMTString());
      utils_default.isString(path) && cookie.push("path=" + path);
      utils_default.isString(domain) && cookie.push("domain=" + domain);
      secure === true && cookie.push("secure");
      document.cookie = cookie.join("; ");
    },
    read(name) {
      const match = document.cookie.match(new RegExp("(^|;\\s*)(" + name + ")=([^;]*)"));
      return match ? decodeURIComponent(match[3]) : null;
    },
    remove(name) {
      this.write(name, "", Date.now() - 864e5);
    }
  }
) : (
  // Non-standard browser env (web workers, react-native) lack needed support.
  {
    write() {
    },
    read() {
      return null;
    },
    remove() {
    }
  }
);

// node_modules/axios/lib/helpers/isAbsoluteURL.js
function isAbsoluteURL(url) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
}

// node_modules/axios/lib/helpers/combineURLs.js
function combineURLs(baseURL, relativeURL) {
  return relativeURL ? baseURL.replace(/\/?\/$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
}

// node_modules/axios/lib/core/buildFullPath.js
function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {
  let isRelativeUrl = !isAbsoluteURL(requestedURL);
  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
}

// node_modules/axios/lib/core/mergeConfig.js
var headersToObject = (thing) => thing instanceof AxiosHeaders_default ? { ...thing } : thing;
function mergeConfig(config1, config2) {
  config2 = config2 || {};
  const config = {};
  function getMergedValue(target, source, prop, caseless) {
    if (utils_default.isPlainObject(target) && utils_default.isPlainObject(source)) {
      return utils_default.merge.call({ caseless }, target, source);
    } else if (utils_default.isPlainObject(source)) {
      return utils_default.merge({}, source);
    } else if (utils_default.isArray(source)) {
      return source.slice();
    }
    return source;
  }
  function mergeDeepProperties(a, b, prop, caseless) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(a, b, prop, caseless);
    } else if (!utils_default.isUndefined(a)) {
      return getMergedValue(void 0, a, prop, caseless);
    }
  }
  function valueFromConfig2(a, b) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(void 0, b);
    }
  }
  function defaultToConfig2(a, b) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(void 0, b);
    } else if (!utils_default.isUndefined(a)) {
      return getMergedValue(void 0, a);
    }
  }
  function mergeDirectKeys(a, b, prop) {
    if (prop in config2) {
      return getMergedValue(a, b);
    } else if (prop in config1) {
      return getMergedValue(void 0, a);
    }
  }
  const mergeMap = {
    url: valueFromConfig2,
    method: valueFromConfig2,
    data: valueFromConfig2,
    baseURL: defaultToConfig2,
    transformRequest: defaultToConfig2,
    transformResponse: defaultToConfig2,
    paramsSerializer: defaultToConfig2,
    timeout: defaultToConfig2,
    timeoutMessage: defaultToConfig2,
    withCredentials: defaultToConfig2,
    withXSRFToken: defaultToConfig2,
    adapter: defaultToConfig2,
    responseType: defaultToConfig2,
    xsrfCookieName: defaultToConfig2,
    xsrfHeaderName: defaultToConfig2,
    onUploadProgress: defaultToConfig2,
    onDownloadProgress: defaultToConfig2,
    decompress: defaultToConfig2,
    maxContentLength: defaultToConfig2,
    maxBodyLength: defaultToConfig2,
    beforeRedirect: defaultToConfig2,
    transport: defaultToConfig2,
    httpAgent: defaultToConfig2,
    httpsAgent: defaultToConfig2,
    cancelToken: defaultToConfig2,
    socketPath: defaultToConfig2,
    responseEncoding: defaultToConfig2,
    validateStatus: mergeDirectKeys,
    headers: (a, b, prop) => mergeDeepProperties(headersToObject(a), headersToObject(b), prop, true)
  };
  utils_default.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {
    const merge2 = mergeMap[prop] || mergeDeepProperties;
    const configValue = merge2(config1[prop], config2[prop], prop);
    utils_default.isUndefined(configValue) && merge2 !== mergeDirectKeys || (config[prop] = configValue);
  });
  return config;
}

// node_modules/axios/lib/helpers/resolveConfig.js
var resolveConfig_default = (config) => {
  const newConfig = mergeConfig({}, config);
  let { data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth } = newConfig;
  newConfig.headers = headers = AxiosHeaders_default.from(headers);
  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);
  if (auth) {
    headers.set(
      "Authorization",
      "Basic " + btoa((auth.username || "") + ":" + (auth.password ? unescape(encodeURIComponent(auth.password)) : ""))
    );
  }
  let contentType;
  if (utils_default.isFormData(data)) {
    if (platform_default.hasStandardBrowserEnv || platform_default.hasStandardBrowserWebWorkerEnv) {
      headers.setContentType(void 0);
    } else if ((contentType = headers.getContentType()) !== false) {
      const [type, ...tokens] = contentType ? contentType.split(";").map((token) => token.trim()).filter(Boolean) : [];
      headers.setContentType([type || "multipart/form-data", ...tokens].join("; "));
    }
  }
  if (platform_default.hasStandardBrowserEnv) {
    withXSRFToken && utils_default.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));
    if (withXSRFToken || withXSRFToken !== false && isURLSameOrigin_default(newConfig.url)) {
      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies_default.read(xsrfCookieName);
      if (xsrfValue) {
        headers.set(xsrfHeaderName, xsrfValue);
      }
    }
  }
  return newConfig;
};

// node_modules/axios/lib/adapters/xhr.js
var isXHRAdapterSupported = typeof XMLHttpRequest !== "undefined";
var xhr_default = isXHRAdapterSupported && function(config) {
  return new Promise(function dispatchXhrRequest(resolve, reject) {
    const _config = resolveConfig_default(config);
    let requestData = _config.data;
    const requestHeaders = AxiosHeaders_default.from(_config.headers).normalize();
    let { responseType, onUploadProgress, onDownloadProgress } = _config;
    let onCanceled;
    let uploadThrottled, downloadThrottled;
    let flushUpload, flushDownload;
    function done() {
      flushUpload && flushUpload();
      flushDownload && flushDownload();
      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);
      _config.signal && _config.signal.removeEventListener("abort", onCanceled);
    }
    let request = new XMLHttpRequest();
    request.open(_config.method.toUpperCase(), _config.url, true);
    request.timeout = _config.timeout;
    function onloadend() {
      if (!request) {
        return;
      }
      const responseHeaders = AxiosHeaders_default.from(
        "getAllResponseHeaders" in request && request.getAllResponseHeaders()
      );
      const responseData = !responseType || responseType === "text" || responseType === "json" ? request.responseText : request.response;
      const response = {
        data: responseData,
        status: request.status,
        statusText: request.statusText,
        headers: responseHeaders,
        config,
        request
      };
      settle(function _resolve(value) {
        resolve(value);
        done();
      }, function _reject(err) {
        reject(err);
        done();
      }, response);
      request = null;
    }
    if ("onloadend" in request) {
      request.onloadend = onloadend;
    } else {
      request.onreadystatechange = function handleLoad() {
        if (!request || request.readyState !== 4) {
          return;
        }
        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf("file:") === 0)) {
          return;
        }
        setTimeout(onloadend);
      };
    }
    request.onabort = function handleAbort() {
      if (!request) {
        return;
      }
      reject(new AxiosError_default("Request aborted", AxiosError_default.ECONNABORTED, config, request));
      request = null;
    };
    request.onerror = function handleError() {
      reject(new AxiosError_default("Network Error", AxiosError_default.ERR_NETWORK, config, request));
      request = null;
    };
    request.ontimeout = function handleTimeout() {
      let timeoutErrorMessage = _config.timeout ? "timeout of " + _config.timeout + "ms exceeded" : "timeout exceeded";
      const transitional2 = _config.transitional || transitional_default;
      if (_config.timeoutErrorMessage) {
        timeoutErrorMessage = _config.timeoutErrorMessage;
      }
      reject(new AxiosError_default(
        timeoutErrorMessage,
        transitional2.clarifyTimeoutError ? AxiosError_default.ETIMEDOUT : AxiosError_default.ECONNABORTED,
        config,
        request
      ));
      request = null;
    };
    requestData === void 0 && requestHeaders.setContentType(null);
    if ("setRequestHeader" in request) {
      utils_default.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {
        request.setRequestHeader(key, val);
      });
    }
    if (!utils_default.isUndefined(_config.withCredentials)) {
      request.withCredentials = !!_config.withCredentials;
    }
    if (responseType && responseType !== "json") {
      request.responseType = _config.responseType;
    }
    if (onDownloadProgress) {
      [downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true);
      request.addEventListener("progress", downloadThrottled);
    }
    if (onUploadProgress && request.upload) {
      [uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress);
      request.upload.addEventListener("progress", uploadThrottled);
      request.upload.addEventListener("loadend", flushUpload);
    }
    if (_config.cancelToken || _config.signal) {
      onCanceled = (cancel) => {
        if (!request) {
          return;
        }
        reject(!cancel || cancel.type ? new CanceledError_default(null, config, request) : cancel);
        request.abort();
        request = null;
      };
      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);
      if (_config.signal) {
        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener("abort", onCanceled);
      }
    }
    const protocol = parseProtocol(_config.url);
    if (protocol && platform_default.protocols.indexOf(protocol) === -1) {
      reject(new AxiosError_default("Unsupported protocol " + protocol + ":", AxiosError_default.ERR_BAD_REQUEST, config));
      return;
    }
    request.send(requestData || null);
  });
};

// node_modules/axios/lib/helpers/composeSignals.js
var composeSignals = (signals, timeout) => {
  const { length } = signals = signals ? signals.filter(Boolean) : [];
  if (timeout || length) {
    let controller = new AbortController();
    let aborted;
    const onabort = function(reason) {
      if (!aborted) {
        aborted = true;
        unsubscribe();
        const err = reason instanceof Error ? reason : this.reason;
        controller.abort(err instanceof AxiosError_default ? err : new CanceledError_default(err instanceof Error ? err.message : err));
      }
    };
    let timer = timeout && setTimeout(() => {
      timer = null;
      onabort(new AxiosError_default(`timeout ${timeout} of ms exceeded`, AxiosError_default.ETIMEDOUT));
    }, timeout);
    const unsubscribe = () => {
      if (signals) {
        timer && clearTimeout(timer);
        timer = null;
        signals.forEach((signal2) => {
          signal2.unsubscribe ? signal2.unsubscribe(onabort) : signal2.removeEventListener("abort", onabort);
        });
        signals = null;
      }
    };
    signals.forEach((signal2) => signal2.addEventListener("abort", onabort));
    const { signal } = controller;
    signal.unsubscribe = () => utils_default.asap(unsubscribe);
    return signal;
  }
};
var composeSignals_default = composeSignals;

// node_modules/axios/lib/helpers/trackStream.js
var streamChunk = function* (chunk, chunkSize) {
  let len = chunk.byteLength;
  if (!chunkSize || len < chunkSize) {
    yield chunk;
    return;
  }
  let pos = 0;
  let end;
  while (pos < len) {
    end = pos + chunkSize;
    yield chunk.slice(pos, end);
    pos = end;
  }
};
var readBytes = async function* (iterable, chunkSize) {
  for await (const chunk of readStream(iterable)) {
    yield* streamChunk(chunk, chunkSize);
  }
};
var readStream = async function* (stream) {
  if (stream[Symbol.asyncIterator]) {
    yield* stream;
    return;
  }
  const reader = stream.getReader();
  try {
    for (; ; ) {
      const { done, value } = await reader.read();
      if (done) {
        break;
      }
      yield value;
    }
  } finally {
    await reader.cancel();
  }
};
var trackStream = (stream, chunkSize, onProgress, onFinish) => {
  const iterator2 = readBytes(stream, chunkSize);
  let bytes = 0;
  let done;
  let _onFinish = (e) => {
    if (!done) {
      done = true;
      onFinish && onFinish(e);
    }
  };
  return new ReadableStream({
    async pull(controller) {
      try {
        const { done: done2, value } = await iterator2.next();
        if (done2) {
          _onFinish();
          controller.close();
          return;
        }
        let len = value.byteLength;
        if (onProgress) {
          let loadedBytes = bytes += len;
          onProgress(loadedBytes);
        }
        controller.enqueue(new Uint8Array(value));
      } catch (err) {
        _onFinish(err);
        throw err;
      }
    },
    cancel(reason) {
      _onFinish(reason);
      return iterator2.return();
    }
  }, {
    highWaterMark: 2
  });
};

// node_modules/axios/lib/adapters/fetch.js
var isFetchSupported = typeof fetch === "function" && typeof Request === "function" && typeof Response === "function";
var isReadableStreamSupported = isFetchSupported && typeof ReadableStream === "function";
var encodeText = isFetchSupported && (typeof TextEncoder === "function" ? /* @__PURE__ */ ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) : async (str) => new Uint8Array(await new Response(str).arrayBuffer()));
var test = (fn, ...args) => {
  try {
    return !!fn(...args);
  } catch (e) {
    return false;
  }
};
var supportsRequestStream = isReadableStreamSupported && test(() => {
  let duplexAccessed = false;
  const hasContentType = new Request(platform_default.origin, {
    body: new ReadableStream(),
    method: "POST",
    get duplex() {
      duplexAccessed = true;
      return "half";
    }
  }).headers.has("Content-Type");
  return duplexAccessed && !hasContentType;
});
var DEFAULT_CHUNK_SIZE = 64 * 1024;
var supportsResponseStream = isReadableStreamSupported && test(() => utils_default.isReadableStream(new Response("").body));
var resolvers = {
  stream: supportsResponseStream && ((res) => res.body)
};
isFetchSupported && ((res) => {
  ["text", "arrayBuffer", "blob", "formData", "stream"].forEach((type) => {
    !resolvers[type] && (resolvers[type] = utils_default.isFunction(res[type]) ? (res2) => res2[type]() : (_, config) => {
      throw new AxiosError_default(`Response type '${type}' is not supported`, AxiosError_default.ERR_NOT_SUPPORT, config);
    });
  });
})(new Response());
var getBodyLength = async (body) => {
  if (body == null) {
    return 0;
  }
  if (utils_default.isBlob(body)) {
    return body.size;
  }
  if (utils_default.isSpecCompliantForm(body)) {
    const _request = new Request(platform_default.origin, {
      method: "POST",
      body
    });
    return (await _request.arrayBuffer()).byteLength;
  }
  if (utils_default.isArrayBufferView(body) || utils_default.isArrayBuffer(body)) {
    return body.byteLength;
  }
  if (utils_default.isURLSearchParams(body)) {
    body = body + "";
  }
  if (utils_default.isString(body)) {
    return (await encodeText(body)).byteLength;
  }
};
var resolveBodyLength = async (headers, body) => {
  const length = utils_default.toFiniteNumber(headers.getContentLength());
  return length == null ? getBodyLength(body) : length;
};
var fetch_default = isFetchSupported && (async (config) => {
  let {
    url,
    method,
    data,
    signal,
    cancelToken,
    timeout,
    onDownloadProgress,
    onUploadProgress,
    responseType,
    headers,
    withCredentials = "same-origin",
    fetchOptions
  } = resolveConfig_default(config);
  responseType = responseType ? (responseType + "").toLowerCase() : "text";
  let composedSignal = composeSignals_default([signal, cancelToken && cancelToken.toAbortSignal()], timeout);
  let request;
  const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {
    composedSignal.unsubscribe();
  });
  let requestContentLength;
  try {
    if (onUploadProgress && supportsRequestStream && method !== "get" && method !== "head" && (requestContentLength = await resolveBodyLength(headers, data)) !== 0) {
      let _request = new Request(url, {
        method: "POST",
        body: data,
        duplex: "half"
      });
      let contentTypeHeader;
      if (utils_default.isFormData(data) && (contentTypeHeader = _request.headers.get("content-type"))) {
        headers.setContentType(contentTypeHeader);
      }
      if (_request.body) {
        const [onProgress, flush] = progressEventDecorator(
          requestContentLength,
          progressEventReducer(asyncDecorator(onUploadProgress))
        );
        data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);
      }
    }
    if (!utils_default.isString(withCredentials)) {
      withCredentials = withCredentials ? "include" : "omit";
    }
    const isCredentialsSupported = "credentials" in Request.prototype;
    request = new Request(url, {
      ...fetchOptions,
      signal: composedSignal,
      method: method.toUpperCase(),
      headers: headers.normalize().toJSON(),
      body: data,
      duplex: "half",
      credentials: isCredentialsSupported ? withCredentials : void 0
    });
    let response = await fetch(request, fetchOptions);
    const isStreamResponse = supportsResponseStream && (responseType === "stream" || responseType === "response");
    if (supportsResponseStream && (onDownloadProgress || isStreamResponse && unsubscribe)) {
      const options = {};
      ["status", "statusText", "headers"].forEach((prop) => {
        options[prop] = response[prop];
      });
      const responseContentLength = utils_default.toFiniteNumber(response.headers.get("content-length"));
      const [onProgress, flush] = onDownloadProgress && progressEventDecorator(
        responseContentLength,
        progressEventReducer(asyncDecorator(onDownloadProgress), true)
      ) || [];
      response = new Response(
        trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {
          flush && flush();
          unsubscribe && unsubscribe();
        }),
        options
      );
    }
    responseType = responseType || "text";
    let responseData = await resolvers[utils_default.findKey(resolvers, responseType) || "text"](response, config);
    !isStreamResponse && unsubscribe && unsubscribe();
    return await new Promise((resolve, reject) => {
      settle(resolve, reject, {
        data: responseData,
        headers: AxiosHeaders_default.from(response.headers),
        status: response.status,
        statusText: response.statusText,
        config,
        request
      });
    });
  } catch (err) {
    unsubscribe && unsubscribe();
    if (err && err.name === "TypeError" && /Load failed|fetch/i.test(err.message)) {
      throw Object.assign(
        new AxiosError_default("Network Error", AxiosError_default.ERR_NETWORK, config, request),
        {
          cause: err.cause || err
        }
      );
    }
    throw AxiosError_default.from(err, err && err.code, config, request);
  }
});

// node_modules/axios/lib/adapters/adapters.js
var knownAdapters = {
  http: null_default,
  xhr: xhr_default,
  fetch: fetch_default
};
utils_default.forEach(knownAdapters, (fn, value) => {
  if (fn) {
    try {
      Object.defineProperty(fn, "name", { value });
    } catch (e) {
    }
    Object.defineProperty(fn, "adapterName", { value });
  }
});
var renderReason = (reason) => `- ${reason}`;
var isResolvedHandle = (adapter) => utils_default.isFunction(adapter) || adapter === null || adapter === false;
var adapters_default = {
  getAdapter: (adapters) => {
    adapters = utils_default.isArray(adapters) ? adapters : [adapters];
    const { length } = adapters;
    let nameOrAdapter;
    let adapter;
    const rejectedReasons = {};
    for (let i = 0; i < length; i++) {
      nameOrAdapter = adapters[i];
      let id;
      adapter = nameOrAdapter;
      if (!isResolvedHandle(nameOrAdapter)) {
        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];
        if (adapter === void 0) {
          throw new AxiosError_default(`Unknown adapter '${id}'`);
        }
      }
      if (adapter) {
        break;
      }
      rejectedReasons[id || "#" + i] = adapter;
    }
    if (!adapter) {
      const reasons = Object.entries(rejectedReasons).map(
        ([id, state]) => `adapter ${id} ` + (state === false ? "is not supported by the environment" : "is not available in the build")
      );
      let s = length ? reasons.length > 1 ? "since :\n" + reasons.map(renderReason).join("\n") : " " + renderReason(reasons[0]) : "as no adapter specified";
      throw new AxiosError_default(
        `There is no suitable adapter to dispatch the request ` + s,
        "ERR_NOT_SUPPORT"
      );
    }
    return adapter;
  },
  adapters: knownAdapters
};

// node_modules/axios/lib/core/dispatchRequest.js
function throwIfCancellationRequested(config) {
  if (config.cancelToken) {
    config.cancelToken.throwIfRequested();
  }
  if (config.signal && config.signal.aborted) {
    throw new CanceledError_default(null, config);
  }
}
function dispatchRequest(config) {
  throwIfCancellationRequested(config);
  config.headers = AxiosHeaders_default.from(config.headers);
  config.data = transformData.call(
    config,
    config.transformRequest
  );
  if (["post", "put", "patch"].indexOf(config.method) !== -1) {
    config.headers.setContentType("application/x-www-form-urlencoded", false);
  }
  const adapter = adapters_default.getAdapter(config.adapter || defaults_default.adapter);
  return adapter(config).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config);
    response.data = transformData.call(
      config,
      config.transformResponse,
      response
    );
    response.headers = AxiosHeaders_default.from(response.headers);
    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config);
      if (reason && reason.response) {
        reason.response.data = transformData.call(
          config,
          config.transformResponse,
          reason.response
        );
        reason.response.headers = AxiosHeaders_default.from(reason.response.headers);
      }
    }
    return Promise.reject(reason);
  });
}

// node_modules/axios/lib/env/data.js
var VERSION = "1.10.0";

// node_modules/axios/lib/helpers/validator.js
var validators = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach((type, i) => {
  validators[type] = function validator(thing) {
    return typeof thing === type || "a" + (i < 1 ? "n " : " ") + type;
  };
});
var deprecatedWarnings = {};
validators.transitional = function transitional(validator, version, message) {
  function formatMessage(opt, desc) {
    return "[Axios v" + VERSION + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
  }
  return (value, opt, opts) => {
    if (validator === false) {
      throw new AxiosError_default(
        formatMessage(opt, " has been removed" + (version ? " in " + version : "")),
        AxiosError_default.ERR_DEPRECATED
      );
    }
    if (version && !deprecatedWarnings[opt]) {
      deprecatedWarnings[opt] = true;
      console.warn(
        formatMessage(
          opt,
          " has been deprecated since v" + version + " and will be removed in the near future"
        )
      );
    }
    return validator ? validator(value, opt, opts) : true;
  };
};
validators.spelling = function spelling(correctSpelling) {
  return (value, opt) => {
    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);
    return true;
  };
};
function assertOptions(options, schema, allowUnknown) {
  if (typeof options !== "object") {
    throw new AxiosError_default("options must be an object", AxiosError_default.ERR_BAD_OPTION_VALUE);
  }
  const keys = Object.keys(options);
  let i = keys.length;
  while (i-- > 0) {
    const opt = keys[i];
    const validator = schema[opt];
    if (validator) {
      const value = options[opt];
      const result = value === void 0 || validator(value, opt, options);
      if (result !== true) {
        throw new AxiosError_default("option " + opt + " must be " + result, AxiosError_default.ERR_BAD_OPTION_VALUE);
      }
      continue;
    }
    if (allowUnknown !== true) {
      throw new AxiosError_default("Unknown option " + opt, AxiosError_default.ERR_BAD_OPTION);
    }
  }
}
var validator_default = {
  assertOptions,
  validators
};

// node_modules/axios/lib/core/Axios.js
var validators2 = validator_default.validators;
var Axios = class {
  constructor(instanceConfig) {
    this.defaults = instanceConfig || {};
    this.interceptors = {
      request: new InterceptorManager_default(),
      response: new InterceptorManager_default()
    };
  }
  /**
   * Dispatch a request
   *
   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)
   * @param {?Object} config
   *
   * @returns {Promise} The Promise to be fulfilled
   */
  async request(configOrUrl, config) {
    try {
      return await this._request(configOrUrl, config);
    } catch (err) {
      if (err instanceof Error) {
        let dummy = {};
        Error.captureStackTrace ? Error.captureStackTrace(dummy) : dummy = new Error();
        const stack = dummy.stack ? dummy.stack.replace(/^.+\n/, "") : "";
        try {
          if (!err.stack) {
            err.stack = stack;
          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\n.+\n/, ""))) {
            err.stack += "\n" + stack;
          }
        } catch (e) {
        }
      }
      throw err;
    }
  }
  _request(configOrUrl, config) {
    if (typeof configOrUrl === "string") {
      config = config || {};
      config.url = configOrUrl;
    } else {
      config = configOrUrl || {};
    }
    config = mergeConfig(this.defaults, config);
    const { transitional: transitional2, paramsSerializer, headers } = config;
    if (transitional2 !== void 0) {
      validator_default.assertOptions(transitional2, {
        silentJSONParsing: validators2.transitional(validators2.boolean),
        forcedJSONParsing: validators2.transitional(validators2.boolean),
        clarifyTimeoutError: validators2.transitional(validators2.boolean)
      }, false);
    }
    if (paramsSerializer != null) {
      if (utils_default.isFunction(paramsSerializer)) {
        config.paramsSerializer = {
          serialize: paramsSerializer
        };
      } else {
        validator_default.assertOptions(paramsSerializer, {
          encode: validators2.function,
          serialize: validators2.function
        }, true);
      }
    }
    if (config.allowAbsoluteUrls !== void 0) {
    } else if (this.defaults.allowAbsoluteUrls !== void 0) {
      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;
    } else {
      config.allowAbsoluteUrls = true;
    }
    validator_default.assertOptions(config, {
      baseUrl: validators2.spelling("baseURL"),
      withXsrfToken: validators2.spelling("withXSRFToken")
    }, true);
    config.method = (config.method || this.defaults.method || "get").toLowerCase();
    let contextHeaders = headers && utils_default.merge(
      headers.common,
      headers[config.method]
    );
    headers && utils_default.forEach(
      ["delete", "get", "head", "post", "put", "patch", "common"],
      (method) => {
        delete headers[method];
      }
    );
    config.headers = AxiosHeaders_default.concat(contextHeaders, headers);
    const requestInterceptorChain = [];
    let synchronousRequestInterceptors = true;
    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
      if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config) === false) {
        return;
      }
      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
    });
    const responseInterceptorChain = [];
    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
    });
    let promise;
    let i = 0;
    let len;
    if (!synchronousRequestInterceptors) {
      const chain = [dispatchRequest.bind(this), void 0];
      chain.unshift.apply(chain, requestInterceptorChain);
      chain.push.apply(chain, responseInterceptorChain);
      len = chain.length;
      promise = Promise.resolve(config);
      while (i < len) {
        promise = promise.then(chain[i++], chain[i++]);
      }
      return promise;
    }
    len = requestInterceptorChain.length;
    let newConfig = config;
    i = 0;
    while (i < len) {
      const onFulfilled = requestInterceptorChain[i++];
      const onRejected = requestInterceptorChain[i++];
      try {
        newConfig = onFulfilled(newConfig);
      } catch (error) {
        onRejected.call(this, error);
        break;
      }
    }
    try {
      promise = dispatchRequest.call(this, newConfig);
    } catch (error) {
      return Promise.reject(error);
    }
    i = 0;
    len = responseInterceptorChain.length;
    while (i < len) {
      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);
    }
    return promise;
  }
  getUri(config) {
    config = mergeConfig(this.defaults, config);
    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);
    return buildURL(fullPath, config.params, config.paramsSerializer);
  }
};
utils_default.forEach(["delete", "get", "head", "options"], function forEachMethodNoData(method) {
  Axios.prototype[method] = function(url, config) {
    return this.request(mergeConfig(config || {}, {
      method,
      url,
      data: (config || {}).data
    }));
  };
});
utils_default.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
  function generateHTTPMethod(isForm) {
    return function httpMethod(url, data, config) {
      return this.request(mergeConfig(config || {}, {
        method,
        headers: isForm ? {
          "Content-Type": "multipart/form-data"
        } : {},
        url,
        data
      }));
    };
  }
  Axios.prototype[method] = generateHTTPMethod();
  Axios.prototype[method + "Form"] = generateHTTPMethod(true);
});
var Axios_default = Axios;

// node_modules/axios/lib/cancel/CancelToken.js
var CancelToken = class _CancelToken {
  constructor(executor) {
    if (typeof executor !== "function") {
      throw new TypeError("executor must be a function.");
    }
    let resolvePromise;
    this.promise = new Promise(function promiseExecutor(resolve) {
      resolvePromise = resolve;
    });
    const token = this;
    this.promise.then((cancel) => {
      if (!token._listeners)
        return;
      let i = token._listeners.length;
      while (i-- > 0) {
        token._listeners[i](cancel);
      }
      token._listeners = null;
    });
    this.promise.then = (onfulfilled) => {
      let _resolve;
      const promise = new Promise((resolve) => {
        token.subscribe(resolve);
        _resolve = resolve;
      }).then(onfulfilled);
      promise.cancel = function reject() {
        token.unsubscribe(_resolve);
      };
      return promise;
    };
    executor(function cancel(message, config, request) {
      if (token.reason) {
        return;
      }
      token.reason = new CanceledError_default(message, config, request);
      resolvePromise(token.reason);
    });
  }
  /**
   * Throws a `CanceledError` if cancellation has been requested.
   */
  throwIfRequested() {
    if (this.reason) {
      throw this.reason;
    }
  }
  /**
   * Subscribe to the cancel signal
   */
  subscribe(listener) {
    if (this.reason) {
      listener(this.reason);
      return;
    }
    if (this._listeners) {
      this._listeners.push(listener);
    } else {
      this._listeners = [listener];
    }
  }
  /**
   * Unsubscribe from the cancel signal
   */
  unsubscribe(listener) {
    if (!this._listeners) {
      return;
    }
    const index = this._listeners.indexOf(listener);
    if (index !== -1) {
      this._listeners.splice(index, 1);
    }
  }
  toAbortSignal() {
    const controller = new AbortController();
    const abort = (err) => {
      controller.abort(err);
    };
    this.subscribe(abort);
    controller.signal.unsubscribe = () => this.unsubscribe(abort);
    return controller.signal;
  }
  /**
   * Returns an object that contains a new `CancelToken` and a function that, when called,
   * cancels the `CancelToken`.
   */
  static source() {
    let cancel;
    const token = new _CancelToken(function executor(c) {
      cancel = c;
    });
    return {
      token,
      cancel
    };
  }
};
var CancelToken_default = CancelToken;

// node_modules/axios/lib/helpers/spread.js
function spread(callback) {
  return function wrap(arr) {
    return callback.apply(null, arr);
  };
}

// node_modules/axios/lib/helpers/isAxiosError.js
function isAxiosError(payload) {
  return utils_default.isObject(payload) && payload.isAxiosError === true;
}

// node_modules/axios/lib/helpers/HttpStatusCode.js
var HttpStatusCode = {
  Continue: 100,
  SwitchingProtocols: 101,
  Processing: 102,
  EarlyHints: 103,
  Ok: 200,
  Created: 201,
  Accepted: 202,
  NonAuthoritativeInformation: 203,
  NoContent: 204,
  ResetContent: 205,
  PartialContent: 206,
  MultiStatus: 207,
  AlreadyReported: 208,
  ImUsed: 226,
  MultipleChoices: 300,
  MovedPermanently: 301,
  Found: 302,
  SeeOther: 303,
  NotModified: 304,
  UseProxy: 305,
  Unused: 306,
  TemporaryRedirect: 307,
  PermanentRedirect: 308,
  BadRequest: 400,
  Unauthorized: 401,
  PaymentRequired: 402,
  Forbidden: 403,
  NotFound: 404,
  MethodNotAllowed: 405,
  NotAcceptable: 406,
  ProxyAuthenticationRequired: 407,
  RequestTimeout: 408,
  Conflict: 409,
  Gone: 410,
  LengthRequired: 411,
  PreconditionFailed: 412,
  PayloadTooLarge: 413,
  UriTooLong: 414,
  UnsupportedMediaType: 415,
  RangeNotSatisfiable: 416,
  ExpectationFailed: 417,
  ImATeapot: 418,
  MisdirectedRequest: 421,
  UnprocessableEntity: 422,
  Locked: 423,
  FailedDependency: 424,
  TooEarly: 425,
  UpgradeRequired: 426,
  PreconditionRequired: 428,
  TooManyRequests: 429,
  RequestHeaderFieldsTooLarge: 431,
  UnavailableForLegalReasons: 451,
  InternalServerError: 500,
  NotImplemented: 501,
  BadGateway: 502,
  ServiceUnavailable: 503,
  GatewayTimeout: 504,
  HttpVersionNotSupported: 505,
  VariantAlsoNegotiates: 506,
  InsufficientStorage: 507,
  LoopDetected: 508,
  NotExtended: 510,
  NetworkAuthenticationRequired: 511
};
Object.entries(HttpStatusCode).forEach(([key, value]) => {
  HttpStatusCode[value] = key;
});
var HttpStatusCode_default = HttpStatusCode;

// node_modules/axios/lib/axios.js
function createInstance(defaultConfig) {
  const context = new Axios_default(defaultConfig);
  const instance = bind(Axios_default.prototype.request, context);
  utils_default.extend(instance, Axios_default.prototype, context, { allOwnKeys: true });
  utils_default.extend(instance, context, null, { allOwnKeys: true });
  instance.create = function create(instanceConfig) {
    return createInstance(mergeConfig(defaultConfig, instanceConfig));
  };
  return instance;
}
var axios = createInstance(defaults_default);
axios.Axios = Axios_default;
axios.CanceledError = CanceledError_default;
axios.CancelToken = CancelToken_default;
axios.isCancel = isCancel;
axios.VERSION = VERSION;
axios.toFormData = toFormData_default;
axios.AxiosError = AxiosError_default;
axios.Cancel = axios.CanceledError;
axios.all = function all(promises) {
  return Promise.all(promises);
};
axios.spread = spread;
axios.isAxiosError = isAxiosError;
axios.mergeConfig = mergeConfig;
axios.AxiosHeaders = AxiosHeaders_default;
axios.formToJSON = (thing) => formDataToJSON_default(utils_default.isHTMLForm(thing) ? new FormData(thing) : thing);
axios.getAdapter = adapters_default.getAdapter;
axios.HttpStatusCode = HttpStatusCode_default;
axios.default = axios;
var axios_default = axios;

// node_modules/axios/index.js
var {
  Axios: Axios2,
  AxiosError: AxiosError2,
  CanceledError: CanceledError2,
  isCancel: isCancel2,
  CancelToken: CancelToken2,
  VERSION: VERSION2,
  all: all2,
  Cancel,
  isAxiosError: isAxiosError2,
  spread: spread2,
  toFormData: toFormData2,
  AxiosHeaders: AxiosHeaders2,
  HttpStatusCode: HttpStatusCode2,
  formToJSON,
  getAdapter,
  mergeConfig: mergeConfig2
} = axios_default;

// src/infrastructure/llm/LLMService.ts
var LLMService = class {
  constructor(settings) {
    this.settings = settings;
    this.retryPolicy = new APIRetryPolicy({
      maxAttempts: 3,
      delayMs: 2e3,
      exponentialBackoff: true
    });
  }
  // 현재 선택된 제공업체의 API 키를 가져오는 메서드
  getCurrentApiKey() {
    const provider = this.settings.llmProvider;
    let encryptedKey = "";
    switch (provider) {
      case "openai":
        encryptedKey = this.settings.openaiApiKey;
        break;
      case "anthropic":
        encryptedKey = this.settings.anthropicApiKey;
        break;
      case "google":
        encryptedKey = this.settings.googleApiKey;
        break;
    }
    return decryptApiKey(encryptedKey);
  }
  async testConnection() {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const testPrompt = 'Hello, this is a test message. Please respond with "OK" if you can read this.';
      const response = await this.callLLM(testPrompt);
      if (response.success) {
        return { success: true, data: "API \uC5F0\uACB0 \uC131\uACF5" };
      } else {
        return { success: false, error: response.error || "API \uC5F0\uACB0 \uC2E4\uD328" };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getWordDetails(word) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const prompt = this.createWordDetailPrompt(word);
      const response = await this.callLLM(prompt);
      if (response.success) {
        const parsedData = this.parseWordDetailResponse(response.data, word);
        return { success: true, data: parsedData };
      } else {
        return { success: false, error: response.error || "\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getMultipleWordDetails(words, progressCallback) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      if (words.length === 0) {
        return { success: false, error: "\uCC98\uB9AC\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      const BATCH_SIZE = 20;
      const allResults = [];
      const totalBatches = Math.ceil(words.length / BATCH_SIZE);
      if (progressCallback) {
        progressCallback(0, words.length, `\uCD1D ${words.length}\uAC1C \uB2E8\uC5B4\uB97C ${totalBatches}\uAC1C \uBC30\uCE58\uB85C \uB098\uB204\uC5B4 \uCC98\uB9AC\uD569\uB2C8\uB2E4.`);
      }
      for (let i = 0; i < words.length; i += BATCH_SIZE) {
        const batchNumber = Math.floor(i / BATCH_SIZE) + 1;
        const batchWords = words.slice(i, i + BATCH_SIZE);
        if (progressCallback) {
          progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber}/${totalBatches} \uCC98\uB9AC \uC911... (${batchWords.length}\uAC1C \uB2E8\uC5B4)`);
        }
        try {
          const prompt = this.createMultipleWordDetailPrompt(batchWords);
          const response = await this.callLLM(prompt);
          if (response.success) {
            const parsedData = this.parseMultipleWordDetailResponse(response.data, batchWords);
            allResults.push(...parsedData);
            if (progressCallback) {
              progressCallback(i + batchWords.length, words.length, `\uBC30\uCE58 ${batchNumber} \uC644\uB8CC: ${parsedData.length}\uAC1C \uB2E8\uC5B4 \uCC98\uB9AC\uB428`);
            }
          } else {
            console.error(`\uBC30\uCE58 ${batchNumber} \uC2E4\uD328:`, response.error);
            if (progressCallback) {
              progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC2E4\uD328, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
            }
            const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
            allResults.push(...individualResults);
          }
        } catch (error) {
          console.error(`\uBC30\uCE58 ${batchNumber} \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
          if (progressCallback) {
            progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC624\uB958, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
          }
          const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
          allResults.push(...individualResults);
        }
        if (i + BATCH_SIZE < words.length) {
          await this.delay(1e3);
        }
      }
      if (progressCallback) {
        progressCallback(words.length, words.length, `\uBAA8\uB4E0 \uBC30\uCE58 \uCC98\uB9AC \uC644\uB8CC. \uCD1D ${allResults.length}\uAC1C \uB2E8\uC5B4 \uB370\uC774\uD130 \uC218\uC9D1\uB428`);
      }
      return { success: true, data: allResults };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  // 개별 단어 처리 (배치 실패 시 폴백)
  async processWordsIndividually(words, progressCallback, startIndex = 0) {
    const results = [];
    for (let i = 0; i < words.length; i++) {
      const word = words[i];
      const currentIndex = startIndex + i;
      try {
        if (progressCallback) {
          progressCallback(currentIndex, startIndex + words.length, `\uAC1C\uBCC4 \uCC98\uB9AC: "${word}"`);
        }
        const response = await this.getWordDetails(word);
        if (response.success && response.data) {
          results.push(response.data);
        } else {
          console.warn(`\uB2E8\uC5B4 "${word}" \uCC98\uB9AC \uC2E4\uD328:`, response.error);
          results.push({
            word: word.toLowerCase(),
            pronunciation: "",
            meanings: ["\uCC98\uB9AC \uC2E4\uD328"],
            examples: [],
            similarWords: []
          });
        }
        await this.delay(500);
      } catch (error) {
        console.error(`\uB2E8\uC5B4 "${word}" \uAC1C\uBCC4 \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
        results.push({
          word: word.toLowerCase(),
          pronunciation: "",
          meanings: ["\uCC98\uB9AC \uC624\uB958"],
          examples: [],
          similarWords: []
        });
      }
    }
    return results;
  }
  // 지연 함수
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  createWordDetailPrompt(word) {
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4 "${word}"\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
1. \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD)
2. \uD55C\uAE00 \uB73B\uB4E4 (\uC5EC\uB7EC \uAC1C\uC77C \uC218 \uC788\uC74C)
3. \uAC01 \uB73B\uBCC4\uB85C \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED (\uAC01 \uB73B\uB2F9 2-3\uAC1C\uC758 \uC608\uBB38 \uC81C\uACF5)
4. \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4

\uC751\uB2F5 \uD615\uC2DD:
{
  "word": "${word}",
  "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
  "meanings": ["\uB73B1", "\uB73B2", "\uB73B3"],
  "examples": [
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 1",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 2", 
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 3",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
    }
  ],
  "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42", "\uC720\uC0AC\uB2E8\uC5B43"]
}

JSON \uD615\uC2DD\uC73C\uB85C\uB9CC \uC751\uB2F5\uD574\uC8FC\uC138\uC694. \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  createMultipleWordDetailPrompt(words) {
    const wordList = words.join(", ");
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C \uC815\uD655\uD55C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694: ${wordList}

\uC694\uAD6C\uC0AC\uD56D:
- \uAC01 \uB2E8\uC5B4\uC5D0 \uB300\uD574 \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD), \uD55C\uAE00 \uB73B\uB4E4, \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED, \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC744 \uD3EC\uD568
- \uAC01 \uB73B\uBCC4\uB85C 2-3\uAC1C\uC758 \uC608\uBB38\uC744 \uC81C\uACF5\uD574\uC8FC\uC138\uC694
- JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694
- \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uC774\uC911 \uB530\uC634\uD45C\uB85C \uAC10\uC2F8\uC8FC\uC138\uC694
- \uBC30\uC5F4\uACFC \uAC1D\uCCB4\uB294 \uC815\uD655\uD55C JSON \uBB38\uBC95\uC744 \uB530\uB974\uC138\uC694

\uC751\uB2F5 \uD615\uC2DD:
[
  {
    "word": "\uB2E8\uC5B41",
    "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
    "meanings": ["\uB73B1", "\uB73B2"],
    "examples": [
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 1",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 2",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 3",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
      }
    ],
    "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42"]
  }
]

\uC911\uC694: JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uD14D\uC2A4\uD2B8\uB294 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  async callLLM(prompt) {
    try {
      const provider = this.settings.llmProvider;
      switch (provider) {
        case "openai":
          return await this.callOpenAI(prompt);
        case "anthropic":
          return await this.callAnthropic(prompt);
        case "google":
          return await this.callGoogle(prompt);
        default:
          return { success: false, error: "\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 LLM \uC81C\uACF5\uC5C5\uCCB4\uC785\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callOpenAI(prompt) {
    var _a, _b, _c;
    try {
      const response = await retryAPICall(async () => {
        return fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${this.getCurrentApiKey()}`
          },
          body: JSON.stringify({
            model: this.settings.llmModel,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ],
            temperature: 0.3,
            max_tokens: 4e3
          })
        });
      });
      if (!response.ok) {
        const errorData = await response.json();
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "OpenAI API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = await response.json();
      const content = (_c = (_b = data.choices[0]) == null ? void 0 : _b.message) == null ? void 0 : _c.content;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callAnthropic(prompt) {
    var _a, _b;
    if (typeof window === "undefined" || typeof window !== "undefined" && ((_a = window == null ? void 0 : window.process) == null ? void 0 : _a.type) === "renderer") {
      try {
        const response = await axios_default.post(
          "https://api.anthropic.com/v1/messages",
          {
            model: this.settings.llmModel,
            max_tokens: 3e4,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ]
          },
          {
            headers: {
              "Content-Type": "application/json",
              "x-api-key": this.getCurrentApiKey(),
              "anthropic-version": "2023-06-01"
            }
          }
        );
        const content = (_b = response.data.content[0]) == null ? void 0 : _b.text;
        if (!content) {
          return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
        }
        return { success: true, data: content };
      } catch (error) {
        return { success: false, error: error.message };
      }
    } else {
      return {
        success: false,
        error: "Anthropic API\uB294 \uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD\uC5D0\uC11C \uC9C1\uC811 \uD638\uCD9C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uB370\uC2A4\uD06C\uD1B1 \uC571(Obsidian)\uC5D0\uC11C\uB9CC \uB3D9\uC791\uD569\uB2C8\uB2E4."
      };
    }
  }
  async callGoogle(prompt) {
    var _a, _b, _c, _d;
    try {
      const response = await retryAPICall(async () => {
        return fetch(`https://generativelanguage.googleapis.com/v1beta/models/${this.settings.llmModel}:generateContent?key=${this.getCurrentApiKey()}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            contents: [
              {
                parts: [
                  {
                    text: prompt
                  }
                ]
              }
            ],
            generationConfig: {
              temperature: 0.3,
              maxOutputTokens: 4e3
            }
          })
        });
      });
      if (!response.ok) {
        const errorData = await response.json();
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "Google API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = await response.json();
      const content = (_d = (_c = (_b = data.candidates[0]) == null ? void 0 : _b.content) == null ? void 0 : _c.parts[0]) == null ? void 0 : _d.text;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  parseWordDetailResponse(response, originalWord) {
    try {
      const jsonMatch = response.match(/\{[\s\S]*\}/);
      if (!jsonMatch) {
        throw new Error("JSON \uD615\uC2DD\uC758 \uC751\uB2F5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      }
      const jsonData = JSON.parse(jsonMatch[0]);
      const validatedExamples = this.validateExamples(jsonData.examples);
      return {
        word: jsonData.word || originalWord,
        pronunciation: jsonData.pronunciation || "",
        meanings: jsonData.meanings || [],
        examples: validatedExamples,
        similarWords: jsonData.similarWords || []
      };
    } catch (error) {
      return {
        word: originalWord,
        pronunciation: "",
        meanings: ["\uC758\uBBF8\uB97C \uD30C\uC2F1\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
        examples: [],
        similarWords: []
      };
    }
  }
  // 예문 데이터 검증 및 정리
  validateExamples(examples) {
    if (!Array.isArray(examples)) {
      return [];
    }
    const validatedExamples = [];
    for (const example of examples) {
      if (example && typeof example === "object") {
        const english = example.english || example.english_text || example.text || "";
        const korean = example.korean || example.korean_text || example.translation || "";
        if (english.trim() && korean.trim()) {
          validatedExamples.push({
            english: english.trim(),
            korean: korean.trim()
          });
        }
      }
    }
    return validatedExamples;
  }
  parseMultipleWordDetailResponse(response, originalWords) {
    try {
      let jsonMatch = response.match(/\[[\s\S]*\]/);
      if (!jsonMatch) {
        const objectMatches = response.match(/\{[^{}]*"word"[^{}]*\}/g);
        if (objectMatches && objectMatches.length > 0) {
          const jsonString = "[" + objectMatches.join(",") + "]";
          try {
            const jsonData2 = JSON.parse(jsonString);
            if (Array.isArray(jsonData2)) {
              return this.processJsonData(jsonData2, originalWords);
            }
          } catch (e) {
          }
        }
        const lastCompleteMatch = response.match(/\[[\s\S]*\}(?=\s*$)/);
        if (lastCompleteMatch) {
          jsonMatch = [lastCompleteMatch[0] + "]"];
        } else {
          throw new Error("JSON \uBC30\uC5F4\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        }
      }
      let jsonData;
      let parsedLength = 0;
      try {
        jsonData = JSON.parse(jsonMatch[0]);
      } catch (parseError) {
        const results = this.parseIncrementalJson(response);
        if (results.length > 0) {
          return results;
        }
        const fixedJson = this.fixJsonString(jsonMatch[0]);
        try {
          jsonData = JSON.parse(fixedJson);
        } catch (secondError) {
          throw new Error("JSON \uD30C\uC2F1 \uBC0F \uBCF5\uAD6C \uC2E4\uD328");
        }
      }
      if (!Array.isArray(jsonData)) {
        throw new Error("\uC751\uB2F5\uC774 \uBC30\uC5F4 \uD615\uC2DD\uC774 \uC544\uB2D9\uB2C8\uB2E4.");
      }
      return this.processJsonData(jsonData, originalWords);
    } catch (error) {
      console.error("\uC5EC\uB7EC \uB2E8\uC5B4 \uC751\uB2F5 \uD30C\uC2F1 \uC624\uB958:", error);
      console.error("\uC6D0\uBCF8 \uC751\uB2F5:", response);
      return originalWords.map((word) => ({
        word: word.toLowerCase(),
        pronunciation: "",
        meanings: [],
        examples: [],
        similarWords: []
      }));
    }
  }
  // 점진적 JSON 파싱 - 완전한 객체들만 파싱
  parseIncrementalJson(response) {
    const results = [];
    const objectRegex = /\{[^{}]*"word"[^{}]*"pronunciation"[^{}]*"meanings"[^{}]*"examples"[^{}]*"similarWords"[^{}]*\}/g;
    let match;
    while ((match = objectRegex.exec(response)) !== null) {
      try {
        const objectData = JSON.parse(match[0]);
        if (objectData && objectData.word) {
          const validatedExamples = this.validateExamples(objectData.examples);
          const wordData = {
            word: objectData.word.toLowerCase(),
            pronunciation: objectData.pronunciation || "",
            meanings: Array.isArray(objectData.meanings) ? objectData.meanings : [],
            examples: validatedExamples,
            similarWords: Array.isArray(objectData.similarWords) ? objectData.similarWords : []
          };
          results.push(wordData);
        }
      } catch (e) {
        continue;
      }
    }
    return results;
  }
  // WordDetailData를 WordData로 변환하는 메서드
  convertToWordData(wordDetail) {
    return {
      word: wordDetail.word,
      pronunciation: wordDetail.pronunciation,
      meanings: wordDetail.meanings,
      similarWords: wordDetail.similarWords,
      examples: wordDetail.examples
    };
  }
  // JSON 데이터 처리
  processJsonData(jsonData, originalWords) {
    const results = [];
    for (const item of jsonData) {
      if (item && typeof item === "object" && item.word) {
        const validatedExamples = this.validateExamples(item.examples);
        const wordData = {
          word: item.word.toLowerCase(),
          pronunciation: item.pronunciation || "",
          meanings: Array.isArray(item.meanings) ? item.meanings : [],
          examples: validatedExamples,
          similarWords: Array.isArray(item.similarWords) ? item.similarWords : []
        };
        results.push(wordData);
      }
    }
    return results;
  }
  // JSON 문자열 복구
  fixJsonString(jsonString) {
    let fixed = jsonString;
    const lastCompleteObject = fixed.match(/.*\}(?=,?\s*$)/);
    if (lastCompleteObject) {
      fixed = lastCompleteObject[0] + "]";
    }
    fixed = fixed.replace(/,\s*,/g, ",");
    fixed = fixed.replace(/,\s*\]/g, "]");
    fixed = fixed.replace(/,\s*\}/g, "}");
    fixed = fixed.replace(/(?<!\\)"/g, (match, offset) => {
      const before = fixed.substring(0, offset);
      const quoteCount = (before.match(/"/g) || []).length;
      return quoteCount % 2 === 0 ? match : '\\"';
    });
    return fixed;
  }
};

// src/features/settings/ui/settings.ts
var DEFAULT_SETTINGS = {
  apiKey: "",
  defaultLanguage: "ko",
  showSimilarWords: true,
  showExamples: true,
  examplesCount: 3,
  openaiApiKey: "",
  anthropicApiKey: "",
  googleApiKey: "",
  llmProvider: "openai",
  llmModel: "gemini-1.0-pro-latest",
  enableAdvancedFeatures: false,
  reviewModalHeight: 85,
  vocabularyFolderPath: "Vocabulary",
  ttsEnabled: true,
  ttsProvider: "chatterbox",
  ttsVoice: "alloy",
  ttsPlaybackSpeed: 1,
  ttsAutoPlay: false,
  // Chatterbox TTS 기본값
  chatterboxApiUrl: "http://localhost:4123",
  // 경고: HTTP는 보안에 취약합니다. 가능하면 HTTPS를 사용하세요.
  chatterboxExaggeration: 0.7,
  chatterboxCfgWeight: 0.4,
  chatterboxTemperature: 0.9,
  // Google Cloud TTS 기본값
  googleCloudTTSApiKey: "",
  googleCloudTTSLanguageCode: "en-US",
  googleCloudTTSSpeakingRate: 1,
  googleCloudTTSPitch: 0
};
var VocabularySettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uD50C\uB7EC\uADF8\uC778 \uC124\uC815" });
    this.createBasicSettings(containerEl);
    this.createLLMSettings(containerEl);
    this.createTTSSettings(containerEl);
    this.createAdvancedSettings(containerEl);
  }
  createBasicSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uAE30\uBCF8 \uC124\uC815" });
    new import_obsidian.Setting(containerEl).setName("\uAE30\uBCF8 \uC5B8\uC5B4").setDesc("\uB2E8\uC5B4 \uB73B\uC744 \uD45C\uC2DC\uD560 \uC5B8\uC5B4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("ko", "\uD55C\uAD6D\uC5B4").addOption("en", "English").addOption("ja", "\u65E5\u672C\u8A9E").setValue(this.plugin.settings.defaultLanguage).onChange(async (value) => {
      this.plugin.settings.defaultLanguage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC720\uC0AC\uD55C \uB2E8\uC5B4 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showSimilarWords).onChange(async (value) => {
      this.plugin.settings.showSimilarWords = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC608\uBB38 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC608\uBB38\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showExamples).onChange(async (value) => {
      this.plugin.settings.showExamples = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC608\uBB38 \uAC1C\uC218").setDesc("\uD45C\uC2DC\uD560 \uC608\uBB38\uC758 \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => slider.setLimits(1, 10, 1).setValue(this.plugin.settings.examplesCount).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.examplesCount = value;
      await this.plugin.saveSettings();
    }));
  }
  createLLMSettings(containerEl) {
    containerEl.createEl("h3", { text: "LLM API \uC124\uC815" });
    new import_obsidian.Setting(containerEl).setName("\uACE0\uAE09 \uAE30\uB2A5 \uD65C\uC131\uD654").setDesc("LLM API\uB97C \uC0AC\uC6A9\uD55C \uACE0\uAE09 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableAdvancedFeatures).onChange(async (value) => {
      this.plugin.settings.enableAdvancedFeatures = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("LLM \uC81C\uACF5\uC5C5\uCCB4").setDesc("\uC0AC\uC6A9\uD560 LLM API \uC81C\uACF5\uC5C5\uCCB4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("openai", "OpenAI (GPT)").addOption("anthropic", "Anthropic (Claude)").addOption("google", "Google (Gemini)").setValue(this.plugin.settings.llmProvider).onChange(async (value) => {
      this.plugin.settings.llmProvider = value;
      if (value === "openai") {
        this.plugin.settings.llmModel = "gpt-4.1";
      } else if (value === "anthropic") {
        this.plugin.settings.llmModel = "claude-3-5-sonnet";
      } else if (value === "google") {
        this.plugin.settings.llmModel = "gemini-2.5-flash";
      }
      await this.plugin.saveSettings();
      this.display();
    }));
    this.createModelSelection(containerEl);
    this.createApiKeySettings(containerEl);
    new import_obsidian.Setting(containerEl).setName("API \uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setDesc("\uD604\uC7AC \uC120\uD0DD\uB41C \uC81C\uACF5\uC5C5\uCCB4\uC758 API \uD0A4\uAC00 \uC62C\uBC14\uB974\uAC8C \uC124\uC815\uB418\uC5C8\uB294\uC9C0 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4.").addButton((button) => button.setButtonText("\uD14C\uC2A4\uD2B8").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        const llmService = new LLMService(this.plugin.settings);
        const result = await llmService.testConnection();
        if (result.success) {
          new import_obsidian.Notice("\u2705 API \uC5F0\uACB0 \uC131\uACF5!");
        } else {
          new import_obsidian.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + result.error);
        }
      } catch (error) {
        new import_obsidian.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + error.message);
      } finally {
        button.setButtonText("\uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
  }
  createModelSelection(containerEl) {
    new import_obsidian.Setting(containerEl).setName("API \uBAA8\uB378").setDesc("\uC0AC\uC6A9\uD560 LLM \uBAA8\uB378\uC744 \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => {
      const provider = this.plugin.settings.llmProvider;
      if (provider === "openai") {
        dropdown.addOption("gpt-4.1", "GPT-4.1").addOption("gpt-4o", "GPT-4o").addOption("gpt-4o-mini", "GPT-4o Mini").addOption("gpt-4.1-long", "GPT-4.1 (Long Context)").addOption("gpt-4.5-preview", "GPT-4.5 Preview").addOption("gpt-4.5-preview-2", "GPT-4.5 Preview 2");
      } else if (provider === "anthropic") {
        dropdown.addOption("claude-3-5-sonnet", "Claude 3.5 Sonnet").addOption("claude-3-5-haiku", "Claude 3.5 Haiku").addOption("claude-3-5-opus", "Claude 3.5 Opus").addOption("claude-3-7-sonnet", "Claude 3.7 Sonnet").addOption("claude-3-7-haiku", "Claude 3.7 Haiku").addOption("claude-3-7-opus", "Claude 3.7 Opus").addOption("claude-3-5-flash", "Claude 3.5 Flash");
      } else if (provider === "google") {
        dropdown.addOption("gemini-1.5-pro-latest", "Gemini 1.5 Pro").addOption("gemini-2.5-flash", "Gemini 2.5 Flash").addOption("gemini-2.5-pro", "Gemini 2.5 Pro").addOption("gemini-1.5-flash-latest", "Gemini 1.5 Flash");
      }
      return dropdown.setValue(this.plugin.settings.llmModel).onChange(async (value) => {
        this.plugin.settings.llmModel = value;
        await this.plugin.saveSettings();
      });
    });
  }
  createApiKeySettings(containerEl) {
    new import_obsidian.Setting(containerEl).setName("OpenAI API \uD0A4").setDesc("OpenAI API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.openaiApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.openaiApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian.Setting(containerEl).setName("Anthropic API \uD0A4").setDesc("Anthropic API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-ant-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.anthropicApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-ant-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.anthropicApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian.Setting(containerEl).setName("Google API \uD0A4").setDesc("Google API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").addText((text) => {
      const currentKey = this.plugin.settings.googleApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
  }
  createAdvancedSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uACE0\uAE09 \uC124\uC815" });
    const folders = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian.TFolder);
    new import_obsidian.Setting(containerEl).setName("\uB2E8\uC5B4\uC7A5 \uC800\uC7A5 \uD3F4\uB354").setDesc("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C\uB4E4\uC774 \uC800\uC7A5\uB420 \uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: Vocabulary)").addDropdown((dropdown) => {
      folders.forEach((folder) => {
        dropdown.addOption(folder.path, folder.path);
      });
      dropdown.setValue(this.plugin.settings.vocabularyFolderPath);
      dropdown.onChange(async (value) => {
        this.plugin.settings.vocabularyFolderPath = value;
        await this.plugin.saveSettings();
        if (this.plugin.databaseManager) {
          this.plugin.databaseManager.updateVocabularyFolderPath(value);
        }
      });
      return dropdown;
    });
    new import_obsidian.Setting(containerEl).setName("\uBCF5\uC2B5 \uD654\uBA74 \uB192\uC774").setDesc("\uBCF5\uC2B5 \uBAA8\uB2EC\uC758 \uB192\uC774\uB97C \uD654\uBA74 \uB192\uC774\uC758 \uBC31\uBD84\uC728\uB85C \uC124\uC815\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: 85%)").addSlider((slider) => slider.setLimits(50, 95, 5).setValue(this.plugin.settings.reviewModalHeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.reviewModalHeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC77C\uC77C \uD559\uC2B5 \uBAA9\uD45C").setDesc("\uD558\uB8E8\uC5D0 \uD559\uC2B5\uD560 \uB2E8\uC5B4\uC758 \uBAA9\uD45C \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(5, 50, 5).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.dailyGoal) || 10).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ dailyGoal: value }));
      });
    });
    new import_obsidian.Setting(containerEl).setName("\uBCF5\uC2B5 \uAC04\uACA9 (\uC77C)").setDesc("\uB2E8\uC5B4\uB97C \uB2E4\uC2DC \uBCF5\uC2B5\uD560 \uAC04\uACA9\uC744 \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(1, 30, 1).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.reviewInterval) || 1).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ reviewInterval: value }));
      });
    });
  }
  createTTSSettings(containerEl) {
    containerEl.createEl("h3", { text: "TTS (\uC74C\uC131 \uC77D\uAE30) \uC124\uC815" });
    const ttsToggleSetting = new import_obsidian.Setting(containerEl).setName("TTS \uD65C\uC131\uD654").setDesc("\uB2E8\uC5B4\uC640 \uC608\uBB38\uC744 \uC74C\uC131\uC73C\uB85C \uC77D\uC5B4\uC8FC\uB294 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsEnabled).onChange(async (value) => {
      this.plugin.settings.ttsEnabled = value;
      await this.plugin.saveSettings();
      this.updateTTSSettingsVisibility();
    }));
    new import_obsidian.Setting(containerEl).setName("TTS \uC81C\uACF5\uC790").setDesc("\uC0AC\uC6A9\uD560 TTS \uC11C\uBE44\uC2A4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").setClass("tts-provider-setting").addDropdown((dropdown) => dropdown.addOption("chatterbox", "Chatterbox TTS (\uB85C\uCEEC)").addOption("google-cloud", "Google Cloud Text-to-Speech").setValue(this.plugin.settings.ttsProvider).onChange(async (value) => {
      this.plugin.settings.ttsProvider = value;
      await this.plugin.saveSettings();
      this.updateTTSProviderSettings();
    }));
    this.createChatterboxTTSSettings(containerEl);
    this.createGoogleCloudTTSSettings(containerEl);
    const autoPlaySetting = new import_obsidian.Setting(containerEl).setName("\uC790\uB3D9 \uC7AC\uC0DD").setDesc("\uB2E8\uC5B4 \uCE74\uB4DC\uAC00 \uD45C\uC2DC\uB420 \uB54C \uC790\uB3D9\uC73C\uB85C \uB2E8\uC5B4\uB97C \uC77D\uC5B4\uC90D\uB2C8\uB2E4.").setClass("tts-autoplay-setting").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsAutoPlay).onChange(async (value) => {
      this.plugin.settings.ttsAutoPlay = value;
      await this.plugin.saveSettings();
    }));
    this.updateTTSSettingsVisibility();
    this.updateTTSProviderSettings();
  }
  populateChatterboxVoiceDropdown(dropdown) {
    const chatterboxVoices = [
      { value: "alloy", name: "Alloy (\uC911\uC131\uC801)" },
      { value: "echo", name: "Echo (\uB0A8\uC131)" },
      { value: "fable", name: "Fable (\uC601\uAD6D\uC2DD)" },
      { value: "onyx", name: "Onyx (\uAE4A\uC740 \uB0A8\uC131)" },
      { value: "nova", name: "Nova (\uC5EC\uC131)" },
      { value: "shimmer", name: "Shimmer (\uBD80\uB4DC\uB7EC\uC6B4 \uC5EC\uC131)" },
      { value: "custom", name: "Custom (\uC0AC\uC6A9\uC790 \uC815\uC758)" }
    ];
    chatterboxVoices.forEach((option) => {
      dropdown.addOption(option.value, option.name);
    });
    try {
      const voices = speechSynthesis.getVoices();
      const englishVoices = voices.filter(
        (voice) => voice.lang.startsWith("en-") && !voice.lang.includes("ko") && !chatterboxVoices.some((opt) => opt.value === voice.name)
      );
      if (englishVoices.length > 0) {
        dropdown.addOption("---", "--- \uC2DC\uC2A4\uD15C \uC74C\uC131 ---");
        englishVoices.forEach((voice) => {
          const displayName = `${voice.name} (${voice.lang})`;
          dropdown.addOption(voice.name, displayName);
        });
      }
    } catch (error) {
      console.warn("\uC74C\uC131 \uBAA9\uB85D\uC744 \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
    }
  }
  updateTTSSettingsVisibility() {
    const isEnabled = this.plugin.settings.ttsEnabled;
    const allTtsSettings = this.containerEl.querySelectorAll(
      ".tts-provider-setting, .chatterbox-api-url-setting, .chatterbox-voice-setting, .chatterbox-exaggeration-setting, .chatterbox-cfg-setting, .chatterbox-temperature-setting, .google-cloud-tts-guide, .google-cloud-api-key-setting, .google-cloud-language-setting, .google-cloud-voice-setting, .google-cloud-speaking-rate-setting, .google-cloud-pitch-setting, .tts-autoplay-setting"
    );
    allTtsSettings.forEach((setting) => {
      const element = setting;
      if (isEnabled) {
        element.style.opacity = "1";
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        const inputs = element.querySelectorAll('input[type="text"]');
        buttons.forEach((btn) => btn.disabled = false);
        dropdowns.forEach((dd) => dd.disabled = false);
        sliders.forEach((slider) => slider.disabled = false);
        toggles.forEach((toggle) => toggle.disabled = false);
        inputs.forEach((input) => input.disabled = false);
      } else {
        element.style.opacity = "0.5";
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        const inputs = element.querySelectorAll('input[type="text"]');
        buttons.forEach((btn) => btn.disabled = true);
        dropdowns.forEach((dd) => dd.disabled = true);
        sliders.forEach((slider) => slider.disabled = true);
        toggles.forEach((toggle) => toggle.disabled = true);
        inputs.forEach((input) => input.disabled = true);
      }
    });
    if (isEnabled) {
      this.updateTTSProviderSettings();
    }
  }
  async testChatterboxConnection() {
    try {
      const response = await fetch(`${this.plugin.settings.chatterboxApiUrl}/v1/audio/speech`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: "Connection test",
          voice: "alloy"
        })
      });
      if (response.ok) {
        new import_obsidian.Notice("\u2705 Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0 \uC131\uACF5!");
      } else {
        throw new Error(`\uC11C\uBC84 \uC751\uB2F5 \uC624\uB958: ${response.status}`);
      }
    } catch (error) {
      console.error("Chatterbox TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      new import_obsidian.Notice("\u274C Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0 \uC2E4\uD328. \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      throw error;
    }
  }
  createChatterboxTTSSettings(containerEl) {
    new import_obsidian.Setting(containerEl).setName("Chatterbox TTS API URL").setDesc("Chatterbox TTS \uC11C\uBC84\uC758 URL\uC744 \uC785\uB825\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: http://localhost:4123)").setClass("chatterbox-api-url-setting").addText((text) => text.setPlaceholder("http://localhost:4123").setValue(this.plugin.settings.chatterboxApiUrl).onChange(async (value) => {
      this.plugin.settings.chatterboxApiUrl = value || "http://localhost:4123";
      await this.plugin.saveSettings();
    })).addButton((button) => button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setTooltip("Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0\uC744 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        await this.testChatterboxConnection();
      } finally {
        button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
    new import_obsidian.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("Chatterbox TTS\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").setClass("chatterbox-voice-setting").addDropdown((dropdown) => {
      this.populateChatterboxVoiceDropdown(dropdown);
      return dropdown.setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
        this.plugin.settings.ttsVoice = value;
        await this.plugin.saveSettings();
      });
    }).addButton((button) => button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30").setTooltip("\uC120\uD0DD\uD55C \uC74C\uC131\uC73C\uB85C \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uB97C \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playChatterboxVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
        new import_obsidian.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30");
        button.setDisabled(false);
      }
    }));
    new import_obsidian.Setting(containerEl).setName("\uAC10\uC815 \uD45C\uD604 \uAC15\uB3C4 (Exaggeration)").setDesc("\uC74C\uC131\uC758 \uAC10\uC815 \uD45C\uD604 \uAC15\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.25 = \uC57D\uD568, 2.0 = \uAC15\uD568)").setClass("chatterbox-exaggeration-setting").addSlider((slider) => slider.setLimits(0.25, 2, 0.05).setValue(this.plugin.settings.chatterboxExaggeration).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxExaggeration = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("CFG \uAC00\uC911\uCE58 (CFG Weight)").setDesc("\uC74C\uC131 \uC0DD\uC131\uC758 \uAC00\uC774\uB358\uC2A4 \uAC15\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.0 = \uC57D\uD568, 1.0 = \uAC15\uD568)").setClass("chatterbox-cfg-setting").addSlider((slider) => slider.setLimits(0, 1, 0.05).setValue(this.plugin.settings.chatterboxCfgWeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxCfgWeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC628\uB3C4 (Temperature)").setDesc("\uC74C\uC131 \uC0DD\uC131\uC758 \uCC3D\uC758\uC131\uC744 \uC870\uC808\uD569\uB2C8\uB2E4. (0.05 = \uC77C\uAD00\uC131, 5.0 = \uCC3D\uC758\uC131)").setClass("chatterbox-temperature-setting").addSlider((slider) => slider.setLimits(0.05, 5, 0.05).setValue(this.plugin.settings.chatterboxTemperature).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxTemperature = value;
      await this.plugin.saveSettings();
    }));
  }
  createGoogleCloudTTSSettings(containerEl) {
    const guideEl = containerEl.createEl("div", {
      cls: "google-cloud-tts-guide google-cloud-api-key-setting",
      attr: { style: "margin-bottom: 15px; padding: 10px; background-color: var(--background-secondary); border-radius: 5px; border-left: 3px solid var(--interactive-accent);" }
    });
    guideEl.createEl("h4", { text: "\u{1F527} Google Cloud TTS \uC124\uC815 \uAC00\uC774\uB4DC", attr: { style: "margin: 0 0 10px 0; color: var(--interactive-accent);" } });
    const stepsList = guideEl.createEl("ol", { attr: { style: "margin: 0; padding-left: 20px; line-height: 1.6;" } });
    const step1 = stepsList.createEl("li");
    step1.innerHTML = "<strong>Google Cloud Console \uC811\uC18D:</strong> ";
    const step1Link = step1.createEl("a", {
      text: "console.cloud.google.com",
      href: "https://console.cloud.google.com",
      attr: { style: "color: var(--interactive-accent);" }
    });
    step1Link.addEventListener("click", () => {
      window.open("https://console.cloud.google.com", "_blank");
    });
    const step2 = stepsList.createEl("li");
    step2.innerHTML = "<strong>\uD504\uB85C\uC81D\uD2B8 \uC120\uD0DD/\uC0DD\uC131:</strong> \uAE30\uC874 \uD504\uB85C\uC81D\uD2B8\uB97C \uC120\uD0DD\uD558\uAC70\uB098 \uC0C8 \uD504\uB85C\uC81D\uD2B8\uB97C \uC0DD\uC131\uD569\uB2C8\uB2E4.";
    const step3 = stepsList.createEl("li");
    step3.innerHTML = "<strong>Text-to-Speech API \uD65C\uC131\uD654:</strong> ";
    const step3Link = step3.createEl("a", {
      text: "API \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uD65C\uC131\uD654",
      href: "https://console.cloud.google.com/apis/library/texttospeech.googleapis.com",
      attr: { style: "color: var(--interactive-accent);" }
    });
    step3Link.addEventListener("click", () => {
      window.open("https://console.cloud.google.com/apis/library/texttospeech.googleapis.com", "_blank");
    });
    const step4 = stepsList.createEl("li");
    step4.innerHTML = "<strong>API \uD0A4 \uC0DD\uC131:</strong> \uC0AC\uC6A9\uC790 \uC778\uC99D \uC815\uBCF4 > API \uD0A4 > \uC0C8 API \uD0A4 \uC0DD\uC131";
    const step5 = stepsList.createEl("li");
    step5.innerHTML = "<strong>API \uD0A4 \uC81C\uD55C \uC124\uC815 (\uAD8C\uC7A5):</strong> \uD0A4 \uC81C\uD55C > API \uC81C\uD55C > Cloud Text-to-Speech API \uC120\uD0DD";
    const warningEl = guideEl.createEl("div", {
      attr: { style: "margin-top: 10px; padding: 8px; background-color: var(--background-modifier-error-rgb); border-radius: 3px; font-size: 0.9em;" }
    });
    warningEl.innerHTML = '\u26A0\uFE0F <strong>\uC911\uC694:</strong> Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC740 \uACBD\uC6B0 "API_KEY_SERVICE_BLOCKED" \uC624\uB958\uAC00 \uBC1C\uC0DD\uD569\uB2C8\uB2E4.';
    new import_obsidian.Setting(containerEl).setName("Google Cloud TTS API \uD0A4").setDesc("Google Cloud Text-to-Speech API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").setClass("google-cloud-api-key-setting").addText((text) => {
      const currentKey = this.plugin.settings.googleCloudTTSApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleCloudTTSApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    }).addButton((button) => button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setTooltip("Google Cloud TTS API \uC5F0\uACB0\uC744 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        await this.testGoogleCloudConnection();
      } finally {
        button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
    new import_obsidian.Setting(containerEl).setName("\uC5B8\uC5B4 \uCF54\uB4DC").setDesc("\uC0AC\uC6A9\uD560 \uC5B8\uC5B4 \uCF54\uB4DC\uB97C \uC120\uD0DD\uD558\uC138\uC694.").setClass("google-cloud-language-setting").addDropdown((dropdown) => dropdown.addOption("en-US", "English (US)").addOption("en-GB", "English (UK)").addOption("en-AU", "English (AU)").addOption("en-IN", "English (India)").setValue(this.plugin.settings.googleCloudTTSLanguageCode).onChange(async (value) => {
      this.plugin.settings.googleCloudTTSLanguageCode = value;
      await this.plugin.saveSettings();
      this.updateGoogleCloudVoices();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("Google Cloud TTS\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").setClass("google-cloud-voice-setting").addDropdown((dropdown) => {
      this.populateGoogleCloudVoiceDropdown(dropdown);
      return dropdown.setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
        this.plugin.settings.ttsVoice = value;
        await this.plugin.saveSettings();
      });
    }).addButton((button) => button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30").setTooltip("\uC120\uD0DD\uD55C \uC74C\uC131\uC73C\uB85C \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uB97C \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playGoogleCloudVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
        new import_obsidian.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30");
        button.setDisabled(false);
      }
    }));
    new import_obsidian.Setting(containerEl).setName("\uB9D0\uD558\uAE30 \uC18D\uB3C4 (Speaking Rate)").setDesc("\uC74C\uC131\uC758 \uB9D0\uD558\uAE30 \uC18D\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.25 = \uB290\uB9BC, 4.0 = \uBE60\uB984)").setClass("google-cloud-speaking-rate-setting").addSlider((slider) => slider.setLimits(0.25, 4, 0.25).setValue(this.plugin.settings.googleCloudTTSSpeakingRate).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.googleCloudTTSSpeakingRate = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC74C\uC131 \uB192\uB0AE\uC774 (Pitch)").setDesc("\uC74C\uC131\uC758 \uB192\uB0AE\uC774\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (-20.0 = \uB0AE\uC74C, 20.0 = \uB192\uC74C)").setClass("google-cloud-pitch-setting").addSlider((slider) => slider.setLimits(-20, 20, 1).setValue(this.plugin.settings.googleCloudTTSPitch).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.googleCloudTTSPitch = value;
      await this.plugin.saveSettings();
    }));
  }
  populateGoogleCloudVoiceDropdown(dropdown) {
    const languageCode = this.plugin.settings.googleCloudTTSLanguageCode;
    if (languageCode === "en-US") {
      dropdown.addOption("en-US-Journey-D", "Journey-D (Male)").addOption("en-US-Journey-F", "Journey-F (Female)").addOption("en-US-Journey-O", "Journey-O (Male)").addOption("en-US-Neural2-A", "Neural2-A (Male)").addOption("en-US-Neural2-C", "Neural2-C (Female)").addOption("en-US-Neural2-D", "Neural2-D (Male)").addOption("en-US-Neural2-E", "Neural2-E (Female)").addOption("en-US-Neural2-F", "Neural2-F (Female)").addOption("en-US-Neural2-G", "Neural2-G (Female)").addOption("en-US-Neural2-H", "Neural2-H (Female)").addOption("en-US-Neural2-I", "Neural2-I (Male)").addOption("en-US-Neural2-J", "Neural2-J (Male)");
    } else if (languageCode === "en-GB") {
      dropdown.addOption("en-GB-Neural2-A", "Neural2-A (Female)").addOption("en-GB-Neural2-B", "Neural2-B (Male)").addOption("en-GB-Neural2-C", "Neural2-C (Female)").addOption("en-GB-Neural2-D", "Neural2-D (Male)").addOption("en-GB-Neural2-F", "Neural2-F (Female)");
    } else if (languageCode === "en-AU") {
      dropdown.addOption("en-AU-Neural2-A", "Neural2-A (Female)").addOption("en-AU-Neural2-B", "Neural2-B (Male)").addOption("en-AU-Neural2-C", "Neural2-C (Female)").addOption("en-AU-Neural2-D", "Neural2-D (Male)");
    } else {
      dropdown.addOption("en-US-Journey-F", "Journey-F (Female)");
    }
  }
  updateGoogleCloudVoices() {
    const voiceDropdown = this.containerEl.querySelector(".google-cloud-voice-setting select");
    if (voiceDropdown) {
      voiceDropdown.innerHTML = "";
      const dropdown = { addOption: (value, text) => {
        const option = document.createElement("option");
        option.value = value;
        option.text = text;
        voiceDropdown.appendChild(option);
      } };
      this.populateGoogleCloudVoiceDropdown(dropdown);
      const languageCode = this.plugin.settings.googleCloudTTSLanguageCode;
      let defaultVoice = "en-US-Journey-F";
      if (languageCode === "en-GB")
        defaultVoice = "en-GB-Neural2-A";
      else if (languageCode === "en-AU")
        defaultVoice = "en-AU-Neural2-A";
      voiceDropdown.value = defaultVoice;
      this.plugin.settings.ttsVoice = defaultVoice;
      this.plugin.saveSettings();
    }
  }
  updateTTSProviderSettings() {
    const provider = this.plugin.settings.ttsProvider;
    const chatterboxSettings = this.containerEl.querySelectorAll(".chatterbox-api-url-setting, .chatterbox-voice-setting, .chatterbox-exaggeration-setting, .chatterbox-cfg-setting, .chatterbox-temperature-setting");
    const googleCloudSettings = this.containerEl.querySelectorAll(".google-cloud-tts-guide, .google-cloud-api-key-setting, .google-cloud-language-setting, .google-cloud-voice-setting, .google-cloud-speaking-rate-setting, .google-cloud-pitch-setting");
    chatterboxSettings.forEach((setting) => {
      setting.style.display = "none";
    });
    googleCloudSettings.forEach((setting) => {
      setting.style.display = "none";
    });
    if (provider === "chatterbox") {
      chatterboxSettings.forEach((setting) => {
        setting.style.display = "";
      });
    } else if (provider === "google-cloud") {
      googleCloudSettings.forEach((setting) => {
        setting.style.display = "";
      });
    }
  }
  async playChatterboxVoicePreview() {
    try {
      const sampleTexts = [
        "Hello, this is a sample voice preview.",
        "Welcome to English vocabulary learning.",
        "This voice will help you learn pronunciation.",
        "Beautiful words make beautiful sentences."
      ];
      const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
      const response = await fetch(`${this.plugin.settings.chatterboxApiUrl}/v1/audio/speech`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: randomText,
          voice: this.plugin.settings.ttsVoice,
          exaggeration: this.plugin.settings.chatterboxExaggeration,
          cfg_weight: this.plugin.settings.chatterboxCfgWeight,
          temperature: this.plugin.settings.chatterboxTemperature
        })
      });
      if (!response.ok) {
        throw new Error(`Chatterbox TTS API \uC624\uB958: ${response.status} ${response.statusText}`);
      }
      const audioBlob = await response.blob();
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      return new Promise((resolve, reject) => {
        audio.onended = () => {
          URL.revokeObjectURL(audioUrl);
          new import_obsidian.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC644\uB8CC!");
          resolve();
        };
        audio.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.play().catch(reject);
      });
    } catch (error) {
      console.error("Chatterbox TTS \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
      new import_obsidian.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. Chatterbox TTS \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      throw error;
    }
  }
  async playGoogleCloudVoicePreview() {
    try {
      const sampleTexts = [
        "Hello, this is a sample voice preview.",
        "Welcome to English vocabulary learning.",
        "This voice will help you learn pronunciation.",
        "Beautiful words make beautiful sentences."
      ];
      const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
      const apiKey = decryptApiKey(this.plugin.settings.googleCloudTTSApiKey);
      if (!apiKey) {
        throw new Error("Google Cloud TTS API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
      }
      const requestBody = {
        input: { text: randomText },
        voice: {
          languageCode: this.plugin.settings.googleCloudTTSLanguageCode,
          name: this.plugin.settings.ttsVoice
        },
        audioConfig: {
          audioEncoding: "MP3",
          speakingRate: this.plugin.settings.googleCloudTTSSpeakingRate,
          pitch: this.plugin.settings.googleCloudTTSPitch
        }
      };
      const response = await fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(requestBody)
      });
      if (!response.ok) {
        const errorData = await response.json().catch(() => ({}));
        const detailedError = this.getDetailedGoogleCloudError(response.status, errorData);
        throw new Error(detailedError);
      }
      const data = await response.json();
      const audioBlob = this.base64ToBlob(data.audioContent, "audio/mp3");
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      return new Promise((resolve, reject) => {
        audio.onended = () => {
          URL.revokeObjectURL(audioUrl);
          new import_obsidian.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC644\uB8CC!");
          resolve();
        };
        audio.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.play().catch(reject);
      });
    } catch (error) {
      console.error("Google Cloud TTS \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
      if (error.message.includes("API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4")) {
        new import_obsidian.Notice(`\u274C ${error.message}`);
      } else if (error.message.includes("API \uD0A4")) {
        new import_obsidian.Notice(`\u274C ${error.message}`);
      } else {
        new import_obsidian.Notice("\u274C \uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uC640 \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      }
      throw error;
    }
  }
  base64ToBlob(base64, mimeType) {
    const byteCharacters = atob(base64);
    const byteNumbers = new Array(byteCharacters.length);
    for (let i = 0; i < byteCharacters.length; i++) {
      byteNumbers[i] = byteCharacters.charCodeAt(i);
    }
    const byteArray = new Uint8Array(byteNumbers);
    return new Blob([byteArray], { type: mimeType });
  }
  async testGoogleCloudConnection() {
    try {
      const apiKey = decryptApiKey(this.plugin.settings.googleCloudTTSApiKey);
      if (!apiKey) {
        new import_obsidian.Notice("\u274C Google Cloud TTS API \uD0A4\uB97C \uBA3C\uC800 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
        return;
      }
      const response = await fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: { text: "Connection test" },
          voice: {
            languageCode: "en-US",
            name: "en-US-Journey-F"
          },
          audioConfig: {
            audioEncoding: "MP3"
          }
        })
      });
      if (response.ok) {
        new import_obsidian.Notice("\u2705 Google Cloud TTS API \uC5F0\uACB0 \uC131\uACF5!");
      } else {
        const errorData = await response.json().catch(() => ({}));
        const detailedError = this.getDetailedGoogleCloudError(response.status, errorData);
        new import_obsidian.Notice(`\u274C ${detailedError}`);
      }
    } catch (error) {
      console.error("Google Cloud TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      if (error.message.includes("\uB124\uD2B8\uC6CC\uD06C") || error.message.includes("fetch")) {
        new import_obsidian.Notice("\u274C \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      } else {
        new import_obsidian.Notice(`\u274C ${error.message}`);
      }
    }
  }
  getDetailedGoogleCloudError(status, errorData) {
    var _a, _b, _c, _d;
    if (errorData == null ? void 0 : errorData.error) {
      const error = errorData.error;
      if (status === 403 && ((_a = error.details) == null ? void 0 : _a.some(
        (detail) => {
          var _a2;
          return detail.reason === "API_KEY_SERVICE_BLOCKED" || ((_a2 = detail["@type"]) == null ? void 0 : _a2.includes("ErrorInfo")) && detail.reason === "API_KEY_SERVICE_BLOCKED";
        }
      ))) {
        return "Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC704\uC758 \uAC00\uC774\uB4DC\uB97C \uCC38\uACE0\uD558\uC5EC API\uB97C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 403) {
        if (((_b = error.message) == null ? void 0 : _b.includes("API key not valid")) || error.code === "INVALID_ARGUMENT") {
          return "API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uD0A4\uB97C \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        if (((_c = error.message) == null ? void 0 : _c.includes("quota")) || ((_d = error.message) == null ? void 0 : _d.includes("QUOTA_EXCEEDED"))) {
          return "API \uD560\uB2F9\uB7C9\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. Google Cloud Console\uC5D0\uC11C \uD560\uB2F9\uB7C9\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        return "API \uC811\uADFC\uC774 \uAC70\uBD80\uB418\uC5C8\uC2B5\uB2C8\uB2E4. API \uD0A4 \uAD8C\uD55C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 401) {
        return "API \uD0A4 \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uAC00 \uC62C\uBC14\uB978\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 400) {
        return "API \uC694\uCCAD\uC774 \uC798\uBABB\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC74C\uC131 \uC124\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 503) {
        return "Google Cloud TTS \uC11C\uBE44\uC2A4\uAC00 \uC77C\uC2DC\uC801\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
      }
      return `API \uC624\uB958 (${status}): ${error.message || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`;
    }
    return `API \uC624\uB958: ${status} \uC0C1\uD0DC \uCF54\uB4DC`;
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var import_obsidian4 = require("obsidian");

// src/infrastructure/tts/ChatterboxTTSService.ts
var import_obsidian2 = require("obsidian");

// src/shared/AudioManager.ts
var AudioManager = class _AudioManager {
  constructor() {
    this.activeAudioElements = /* @__PURE__ */ new Set();
    this.audioPool = [];
    this.maxPoolSize = 10;
  }
  static getInstance() {
    if (!_AudioManager.instance) {
      _AudioManager.instance = new _AudioManager();
    }
    return _AudioManager.instance;
  }
  // 오디오 요소 생성 및 관리
  createAudio(src) {
    let audio;
    const availableAudio = this.audioPool.find((a) => a.ended || a.paused);
    if (availableAudio) {
      audio = availableAudio;
      audio.src = src;
      audio.currentTime = 0;
    } else {
      audio = new Audio(src);
      this.setupAudioElement(audio);
    }
    this.activeAudioElements.add(audio);
    return audio;
  }
  // 오디오 요소 설정
  setupAudioElement(audio) {
    const cleanup = () => {
      this.releaseAudio(audio);
    };
    audio.addEventListener("ended", cleanup, { once: true });
    audio.addEventListener("error", cleanup, { once: true });
    setTimeout(() => {
      if (this.activeAudioElements.has(audio)) {
        this.releaseAudio(audio);
      }
    }, 3e4);
  }
  // 오디오 재생 (안전한 래퍼)
  async playAudio(src) {
    const audio = this.createAudio(src);
    try {
      await audio.play();
    } catch (error) {
      this.releaseAudio(audio);
      throw error;
    }
  }
  // 오디오 요소 해제
  releaseAudio(audio) {
    if (!this.activeAudioElements.has(audio))
      return;
    if (!audio.paused) {
      audio.pause();
    }
    this.activeAudioElements.delete(audio);
    if (this.audioPool.length < this.maxPoolSize) {
      audio.removeAttribute("src");
      audio.load();
      this.audioPool.push(audio);
    } else {
      this.disposeAudio(audio);
    }
  }
  // 오디오 요소 완전 정리
  disposeAudio(audio) {
    var _a;
    audio.pause();
    audio.removeAttribute("src");
    audio.load();
    const newAudio = audio.cloneNode();
    (_a = audio.parentNode) == null ? void 0 : _a.replaceChild(newAudio, audio);
  }
  // 모든 활성 오디오 정지
  stopAllAudio() {
    this.activeAudioElements.forEach((audio) => {
      if (!audio.paused) {
        audio.pause();
      }
    });
  }
  // 모든 리소스 정리
  cleanup() {
    this.activeAudioElements.forEach((audio) => {
      this.disposeAudio(audio);
    });
    this.activeAudioElements.clear();
    this.audioPool.forEach((audio) => {
      this.disposeAudio(audio);
    });
    this.audioPool.clear();
  }
  // 현재 상태 정보
  getStatus() {
    return {
      active: this.activeAudioElements.size,
      pooled: this.audioPool.length
    };
  }
};
var NetworkResourceManager = class _NetworkResourceManager {
  constructor() {
    this.abortControllers = /* @__PURE__ */ new Set();
    this.activeRequests = /* @__PURE__ */ new Map();
  }
  static getInstance() {
    if (!_NetworkResourceManager.instance) {
      _NetworkResourceManager.instance = new _NetworkResourceManager();
    }
    return _NetworkResourceManager.instance;
  }
  // 네트워크 요청 생성 (자동 정리 포함)
  createRequest(identifier) {
    const controller = new AbortController();
    this.abortControllers.add(controller);
    if (identifier) {
      const existingController = this.activeRequests.get(identifier);
      if (existingController) {
        existingController.abort();
        this.abortControllers.delete(existingController);
      }
      this.activeRequests.set(identifier, controller);
    }
    setTimeout(() => {
      if (this.abortControllers.has(controller)) {
        controller.abort();
        this.cleanup(controller, identifier);
      }
    }, 6e4);
    return controller;
  }
  // 요청 완료 시 정리
  completeRequest(controller, identifier) {
    this.cleanup(controller, identifier);
  }
  // 특정 요청 취소
  cancelRequest(identifier) {
    const controller = this.activeRequests.get(identifier);
    if (controller) {
      controller.abort();
      this.cleanup(controller, identifier);
    }
  }
  // 내부 정리 로직
  cleanup(controller, identifier) {
    this.abortControllers.delete(controller);
    if (identifier) {
      this.activeRequests.delete(identifier);
    }
  }
  // 모든 활성 요청 취소
  cancelAllRequests() {
    this.abortControllers.forEach((controller) => {
      controller.abort();
    });
    this.abortControllers.clear();
    this.activeRequests.clear();
  }
  // Fetch 래퍼 (자동 정리 포함)
  async fetch(url, options = {}, identifier, timeout = 3e4) {
    const controller = this.createRequest(identifier);
    const timeoutId = setTimeout(() => {
      controller.abort();
    }, timeout);
    try {
      const response = await fetch(url, {
        ...options,
        signal: controller.signal
      });
      clearTimeout(timeoutId);
      this.completeRequest(controller, identifier);
      return response;
    } catch (error) {
      clearTimeout(timeoutId);
      this.cleanup(controller, identifier);
      throw error;
    }
  }
  // 현재 상태 정보
  getStatus() {
    return {
      active: this.abortControllers.size,
      identified: this.activeRequests.size
    };
  }
};

// src/infrastructure/tts/ChatterboxTTSService.ts
var ChatterboxTTSService = class {
  constructor(settings) {
    this.settings = {
      enabled: settings.enabled || false,
      apiUrl: settings.apiUrl || "http://localhost:4123",
      voice: settings.voice || "alloy",
      exaggeration: settings.exaggeration || 0.7,
      cfgWeight: settings.cfgWeight || 0.4,
      temperature: settings.temperature || 0.9,
      autoPlay: settings.autoPlay || false
    };
    this.audioManager = AudioManager.getInstance();
    this.networkManager = NetworkResourceManager.getInstance();
  }
  async speakText(text) {
    if (!this.settings.enabled) {
      new import_obsidian2.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!text || text.trim().length === 0) {
      console.warn("TTS: \uBE48 \uD14D\uC2A4\uD2B8\uC785\uB2C8\uB2E4.");
      return;
    }
    try {
      this.stopSpeaking();
      const audioBlob = await this.callChatterboxAPI(text);
      await this.playAudioBlob(audioBlob);
    } catch (error) {
      console.error("Chatterbox TTS \uC624\uB958:", error);
      new import_obsidian2.Notice("TTS \uC74C\uC131 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. Chatterbox TTS \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
    }
  }
  async speakWord(word) {
    if (!word || word.trim().length === 0) {
      console.warn("TTS: \uBE48 \uB2E8\uC5B4\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(word);
  }
  async speakExample(example) {
    if (!example || example.trim().length === 0) {
      console.warn("TTS: \uBE48 \uC608\uBB38\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(example);
  }
  async callChatterboxAPI(text) {
    const truncatedText = text.length > 3e3 ? text.substring(0, 3e3) : text;
    const requestBody = {
      input: truncatedText,
      voice: this.settings.voice,
      exaggeration: this.settings.exaggeration,
      cfg_weight: this.settings.cfgWeight,
      temperature: this.settings.temperature
    };
    const response = await fetch(`${this.settings.apiUrl}/v1/audio/speech`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(requestBody)
    });
    if (!response.ok) {
      throw new Error(`Chatterbox TTS API \uC624\uB958: ${response.status} ${response.statusText}`);
    }
    const contentType = response.headers.get("content-type");
    if (!contentType || !contentType.includes("audio")) {
      throw new Error(`\uC608\uC0C1\uD558\uC9C0 \uBABB\uD55C \uC751\uB2F5 \uD615\uC2DD: ${contentType}`);
    }
    return await response.blob();
  }
  async playAudioBlob(audioBlob) {
    return new Promise((resolve, reject) => {
      try {
        if (this.audioElement) {
          this.audioElement.pause();
          this.audioElement.src = "";
        }
        this.audioElement = new Audio();
        const audioUrl = URL.createObjectURL(audioBlob);
        this.audioElement.src = audioUrl;
        this.audioElement.onended = () => {
          URL.revokeObjectURL(audioUrl);
          resolve();
        };
        this.audioElement.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        this.audioElement.onloadeddata = () => {
          if (this.audioElement) {
            this.audioElement.play().catch((error) => {
              console.error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
              URL.revokeObjectURL(audioUrl);
              reject(error);
            });
          }
        };
        this.audioElement.load();
      } catch (error) {
        reject(error);
      }
    });
  }
  stopSpeaking() {
    if (this.audioElement) {
      this.audioElement.pause();
      this.audioElement.currentTime = 0;
      if (this.audioElement.src && this.audioElement.src.startsWith("blob:")) {
        URL.revokeObjectURL(this.audioElement.src);
      }
      this.audioElement.src = "";
    }
    if (this.currentAudioContext) {
      this.currentAudioContext.close().catch(console.error);
      this.currentAudioContext = null;
    }
  }
  isPaused() {
    return !this.audioElement || this.audioElement.paused;
  }
  resume() {
    if (this.audioElement && this.audioElement.paused) {
      this.audioElement.play().catch((error) => {
        console.error("\uC624\uB514\uC624 \uC7AC\uAC1C \uC2E4\uD328:", error);
        new import_obsidian2.Notice("\uC624\uB514\uC624 \uC7AC\uAC1C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      });
    }
  }
  pause() {
    if (this.audioElement && !this.audioElement.paused) {
      this.audioElement.pause();
    }
  }
  // 설정 업데이트
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  // 연결 테스트
  async testConnection() {
    try {
      const testText = "Hello, this is a test.";
      await this.callChatterboxAPI(testText);
      return true;
    } catch (error) {
      console.error("Chatterbox TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      return false;
    }
  }
  // 사용 가능한 음성 목록 (Chatterbox는 custom voice 지원)
  getAvailableVoices() {
    return [
      "alloy",
      "echo",
      "fable",
      "onyx",
      "nova",
      "shimmer",
      "custom"
      // 사용자 정의 음성
    ];
  }
  // 현재 설정 정보 반환
  getSettings() {
    return { ...this.settings };
  }
  // 리소스 정리
  destroy() {
    this.stopSpeaking();
    this.audioElement = null;
    this.currentAudioContext = null;
  }
};

// src/infrastructure/tts/GoogleCloudTTSService.ts
var import_obsidian3 = require("obsidian");
var GoogleCloudTTSService = class {
  constructor(settings) {
    this.settings = {
      enabled: settings.enabled || false,
      apiKey: settings.apiKey || "",
      voice: settings.voice || "en-US-Journey-F",
      languageCode: settings.languageCode || "en-US",
      speakingRate: settings.speakingRate || 1,
      pitch: settings.pitch || 0,
      autoPlay: settings.autoPlay || false
    };
    this.audioManager = AudioManager.getInstance();
    this.networkManager = NetworkResourceManager.getInstance();
  }
  async speakText(text) {
    if (!this.settings.enabled) {
      new import_obsidian3.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!this.settings.apiKey) {
      new import_obsidian3.Notice("Google Cloud TTS API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!text || text.trim().length === 0) {
      console.warn("TTS: \uBE48 \uD14D\uC2A4\uD2B8\uC785\uB2C8\uB2E4.");
      return;
    }
    try {
      this.stopSpeaking();
      const audioData = await this.callGoogleCloudAPI(text);
      await this.playAudioData(audioData);
    } catch (error) {
      console.error("Google Cloud TTS \uC624\uB958:", error);
      new import_obsidian3.Notice("TTS \uC74C\uC131 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uC640 \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
    }
  }
  async speakWord(word) {
    if (!word || word.trim().length === 0) {
      console.warn("TTS: \uBE48 \uB2E8\uC5B4\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(word);
  }
  async speakExample(example) {
    if (!example || example.trim().length === 0) {
      console.warn("TTS: \uBE48 \uC608\uBB38\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(example);
  }
  async callGoogleCloudAPI(text) {
    const truncatedText = text.length > 5e3 ? text.substring(0, 5e3) : text;
    const requestBody = {
      input: {
        text: truncatedText
      },
      voice: {
        languageCode: this.settings.languageCode,
        name: this.settings.voice
      },
      audioConfig: {
        audioEncoding: "MP3",
        speakingRate: this.settings.speakingRate,
        pitch: this.settings.pitch
      }
    };
    const response = await this.networkManager.fetch(
      `https://texttospeech.googleapis.com/v1/text:synthesize?key=${this.settings.apiKey}`,
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(requestBody)
      },
      `google-tts-${Date.now()}`,
      // 고유 식별자
      1e4
      // 10초 타임아웃
    );
    if (!response.ok) {
      const errorData = await response.json().catch(() => ({}));
      const errorMessage = this.getDetailedErrorMessage(response.status, errorData);
      throw new Error(errorMessage);
    }
    const data = await response.json();
    return data.audioContent;
  }
  getDetailedErrorMessage(status, errorData) {
    var _a, _b, _c, _d;
    if (errorData == null ? void 0 : errorData.error) {
      const error = errorData.error;
      if (status === 403 && ((_a = error.details) == null ? void 0 : _a.some(
        (detail) => {
          var _a2;
          return detail.reason === "API_KEY_SERVICE_BLOCKED" || ((_a2 = detail["@type"]) == null ? void 0 : _a2.includes("ErrorInfo")) && detail.reason === "API_KEY_SERVICE_BLOCKED";
        }
      ))) {
        return "Google Cloud Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. Google Cloud Console\uC5D0\uC11C Text-to-Speech API\uB97C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 403) {
        if (((_b = error.message) == null ? void 0 : _b.includes("API key not valid")) || error.code === "INVALID_ARGUMENT") {
          return "Google Cloud API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. API \uD0A4\uB97C \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        if (((_c = error.message) == null ? void 0 : _c.includes("quota")) || ((_d = error.message) == null ? void 0 : _d.includes("QUOTA_EXCEEDED"))) {
          return "Google Cloud TTS API \uD560\uB2F9\uB7C9\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD560\uB2F9\uB7C9\uC744 \uD655\uC778\uD558\uAC70\uB098 \uC694\uAE08\uC81C\uB97C \uBCC0\uACBD\uD574\uC8FC\uC138\uC694.";
        }
        return "Google Cloud TTS API \uC811\uADFC\uC774 \uAC70\uBD80\uB418\uC5C8\uC2B5\uB2C8\uB2E4. API \uD0A4 \uAD8C\uD55C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 401) {
        return "Google Cloud API \uD0A4 \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uAC00 \uC62C\uBC14\uB978\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 400) {
        return "Google Cloud TTS API \uC694\uCCAD\uC774 \uC798\uBABB\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC74C\uC131 \uC124\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 503) {
        return "Google Cloud TTS \uC11C\uBE44\uC2A4\uAC00 \uC77C\uC2DC\uC801\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
      }
      return `Google Cloud TTS API \uC624\uB958 (${status}): ${error.message || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`;
    }
    return `Google Cloud TTS API \uC624\uB958: ${status} \uC0C1\uD0DC \uCF54\uB4DC`;
  }
  async playAudioData(base64Audio) {
    return new Promise((resolve, reject) => {
      try {
        const audioBlob = this.base64ToBlob(base64Audio, "audio/mp3");
        const audioUrl = URL.createObjectURL(audioBlob);
        const audio = this.audioManager.createAudio(audioUrl);
        const cleanup = () => {
          URL.revokeObjectURL(audioUrl);
          this.audioManager.releaseAudio(audio);
        };
        audio.onended = () => {
          cleanup();
          resolve();
        };
        audio.onerror = () => {
          cleanup();
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.onloadeddata = () => {
          audio.play().catch((error) => {
            console.error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
            cleanup();
            reject(error);
          });
        };
        setTimeout(() => {
          if (!audio.ended && !audio.paused) {
            cleanup();
            reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2DC\uAC04 \uCD08\uACFC"));
          }
        }, 3e4);
      } catch (error) {
        reject(error);
      }
    });
  }
  base64ToBlob(base64, mimeType) {
    const byteCharacters = atob(base64);
    const byteNumbers = new Array(byteCharacters.length);
    for (let i = 0; i < byteCharacters.length; i++) {
      byteNumbers[i] = byteCharacters.charCodeAt(i);
    }
    const byteArray = new Uint8Array(byteNumbers);
    return new Blob([byteArray], { type: mimeType });
  }
  stopSpeaking() {
    this.audioManager.stopAllAudio();
  }
  isPaused() {
    const status = this.audioManager.getStatus();
    return status.active === 0;
  }
  resume() {
    new import_obsidian3.Notice("\uC74C\uC131\uC744 \uB2E4\uC2DC \uC7AC\uC0DD\uD558\uB824\uBA74 \uBC84\uD2BC\uC744 \uB2E4\uC2DC \uD074\uB9AD\uD574\uC8FC\uC138\uC694.");
  }
  pause() {
    this.stopSpeaking();
  }
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  // 리소스 정리
  cleanup() {
    this.audioManager.cleanup();
    this.networkManager.cancelAllRequests();
  }
  async testConnection() {
    try {
      const testText = "Hello, this is a test.";
      await this.callGoogleCloudAPI(testText);
      return true;
    } catch (error) {
      console.error("Google Cloud TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      return false;
    }
  }
  getAvailableVoices() {
    return [
      "en-US-Journey-D",
      "en-US-Journey-F",
      "en-US-Journey-O",
      "en-US-Neural2-A",
      "en-US-Neural2-C",
      "en-US-Neural2-D",
      "en-US-Neural2-E",
      "en-US-Neural2-F",
      "en-US-Neural2-G",
      "en-US-Neural2-H",
      "en-US-Neural2-I",
      "en-US-Neural2-J",
      "en-US-Standard-A",
      "en-US-Standard-B",
      "en-US-Standard-C",
      "en-US-Standard-D",
      "en-US-Standard-E",
      "en-US-Standard-F",
      "en-US-Standard-G",
      "en-US-Standard-H",
      "en-US-Standard-I",
      "en-US-Standard-J",
      "en-GB-Neural2-A",
      "en-GB-Neural2-B",
      "en-GB-Neural2-C",
      "en-GB-Neural2-D",
      "en-GB-Neural2-F",
      "en-AU-Neural2-A",
      "en-AU-Neural2-B",
      "en-AU-Neural2-C",
      "en-AU-Neural2-D"
    ];
  }
  getSettings() {
    return { ...this.settings };
  }
  destroy() {
    this.stopSpeaking();
    this.audioElement = null;
  }
};

// src/infrastructure/tts/TTSService.ts
var TTSServiceFactory = class {
  static createTTSService(settings) {
    if (!settings.ttsEnabled) {
      return new NoOpTTSService();
    }
    if (settings.ttsProvider === "google-cloud") {
      const googleSettings = {
        enabled: settings.ttsEnabled,
        apiKey: decryptApiKey(settings.googleCloudTTSApiKey),
        voice: settings.ttsVoice,
        languageCode: settings.googleCloudTTSLanguageCode,
        speakingRate: settings.googleCloudTTSSpeakingRate,
        pitch: settings.googleCloudTTSPitch,
        autoPlay: settings.ttsAutoPlay
      };
      return new GoogleCloudTTSService(googleSettings);
    } else {
      const chatterboxSettings = {
        enabled: settings.ttsEnabled,
        apiUrl: settings.chatterboxApiUrl,
        voice: settings.ttsVoice,
        exaggeration: settings.chatterboxExaggeration,
        cfgWeight: settings.chatterboxCfgWeight,
        temperature: settings.chatterboxTemperature,
        autoPlay: settings.ttsAutoPlay
      };
      return new ChatterboxTTSService(chatterboxSettings);
    }
  }
};
var NoOpTTSService = class {
  async speakText(text) {
  }
  async speakWord(word) {
  }
  async speakExample(example) {
  }
  stopSpeaking() {
  }
  isPaused() {
    return true;
  }
  resume() {
  }
  pause() {
  }
  async testConnection() {
    return false;
  }
  getAvailableVoices() {
    return [];
  }
  destroy() {
  }
};

// src/core/algorithms/SpacedRepetitionAlgorithm.ts
var QUALITY_SCORES = {
  ["hard" /* Hard */]: 1,
  ["good" /* Good */]: 2,
  ["easy" /* Easy */]: 3
};
var DEFAULT_SRS_SETTINGS = {
  // SM-2 Algorithm Settings
  initialEFactor: 2.5,
  // SM-2 표준 초기 E-Factor
  minimumEFactor: 1.3,
  // SM-2 표준 최소 E-Factor
  maximumInterval: 36525,
  // ~100년
  // Load Balancing Settings
  loadBalance: true,
  maxFuzzingDays: 3,
  // Legacy compatibility (will be converted)
  baseEase: 250,
  // 2.5 * 100
  easyBonus: 1.3,
  hardPenalty: 0.5,
  minimumEase: 130,
  // 1.3 * 100
  initialInterval: 1
};
var SpacedRepetitionAlgorithm = class {
  constructor(settings = DEFAULT_SRS_SETTINGS) {
    this.dueDateHistogram = /* @__PURE__ */ new Map();
    this.settings = settings;
  }
  /**
   * Calculate the next review schedule based on user response
   * Implements the SM-2 algorithm according to learning_algorithm.md specification
   */
  schedule(response, currentSchedule) {
    const now = /* @__PURE__ */ new Date();
    const q = QUALITY_SCORES[response];
    if (!currentSchedule) {
      currentSchedule = {
        dueDate: now.toISOString(),
        interval: 0,
        ease: Math.round(this.settings.initialEFactor * 100),
        // E-Factor를 100으로 곱해서 저장
        reviewCount: 0,
        lapseCount: 0,
        delayedDays: 0,
        repetition: 0
      };
    }
    let currentEFactor = currentSchedule.ease / 100;
    let newRepetition = currentSchedule.repetition;
    const delta = 0.1 - (3 - q) * (0.08 + (3 - q) * 0.02);
    let newEFactor = currentEFactor + delta;
    newEFactor = Math.max(this.settings.minimumEFactor, newEFactor);
    if (q >= 2) {
      newRepetition = currentSchedule.repetition + 1;
    } else {
      newRepetition = 0;
    }
    let newInterval;
    if (q < 2) {
      newInterval = 1;
    } else {
      if (newRepetition === 1) {
        newInterval = 1;
      } else if (newRepetition === 2) {
        newInterval = 6;
      } else {
        newInterval = Math.round(currentSchedule.interval * newEFactor);
      }
    }
    newInterval = Math.min(newInterval, this.settings.maximumInterval);
    newInterval = Math.max(1, newInterval);
    if (this.settings.loadBalance) {
      newInterval = this.applyLoadBalancing(newInterval);
    }
    const newDueDate = new Date(now.getTime() + newInterval * 24 * 60 * 60 * 1e3);
    this.updateDueDateHistogram(newDueDate.toDateString());
    return {
      interval: newInterval,
      ease: Math.round(newEFactor * 100),
      // E-Factor를 100으로 곱해서 반환
      dueDate: newDueDate.toISOString(),
      repetition: newRepetition
    };
  }
  /**
   * Apply load balancing to distribute reviews evenly across days
   * Based on the histogram-based approach from obsidian-spaced-repetition
   */
  applyLoadBalancing(interval) {
    if (!this.settings.loadBalance) {
      return interval;
    }
    let fuzzingRange;
    if (interval <= 21) {
      fuzzingRange = 1;
    } else if (interval <= 180) {
      fuzzingRange = Math.max(1, interval * 0.05);
    } else {
      fuzzingRange = Math.max(1, interval * 0.025);
    }
    fuzzingRange = Math.min(fuzzingRange, this.settings.maxFuzzingDays);
    const now = /* @__PURE__ */ new Date();
    let bestInterval = interval;
    let minReviews = Number.MAX_SAFE_INTEGER;
    for (let offset = -fuzzingRange; offset <= fuzzingRange; offset++) {
      const testInterval = interval + offset;
      if (testInterval < 1)
        continue;
      const testDate = new Date(now.getTime() + testInterval * 24 * 60 * 60 * 1e3);
      const dateString = testDate.toDateString();
      const reviewCount = this.dueDateHistogram.get(dateString) || 0;
      if (reviewCount < minReviews) {
        minReviews = reviewCount;
        bestInterval = testInterval;
      }
    }
    return bestInterval;
  }
  /**
   * Update the due date histogram for load balancing
   */
  updateDueDateHistogram(dateString) {
    const current = this.dueDateHistogram.get(dateString) || 0;
    this.dueDateHistogram.set(dateString, current + 1);
  }
  /**
   * Get cards that are due for review
   */
  static getCardsForReview(cards) {
    const now = /* @__PURE__ */ new Date();
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= now;
    });
  }
  /**
   * Calculate the number of cards due in the next N days
   */
  static getCardsDueInDays(cards, days) {
    const now = /* @__PURE__ */ new Date();
    const futureDate = new Date(now.getTime() + days * 24 * 60 * 60 * 1e3);
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= futureDate;
    }).length;
  }
  /**
   * Get learning statistics for a set of cards
   */
  static getStatistics(cards) {
    let newCards = 0;
    let learningCards = 0;
    let matureCards = 0;
    let totalEase = 0;
    let totalInterval = 0;
    let cardsWithSchedule = 0;
    cards.forEach((card) => {
      if (!card.scheduleInfo) {
        newCards++;
      } else {
        cardsWithSchedule++;
        totalEase += card.scheduleInfo.ease;
        totalInterval += card.scheduleInfo.interval;
        if (card.scheduleInfo.interval < 21) {
          learningCards++;
        } else {
          matureCards++;
        }
      }
    });
    return {
      total: cards.length,
      new: newCards,
      learning: learningCards,
      mature: matureCards,
      averageEase: cardsWithSchedule > 0 ? Math.round(totalEase / cardsWithSchedule) : 0,
      averageInterval: cardsWithSchedule > 0 ? Math.round(totalInterval / cardsWithSchedule) : 0
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  /**
   * Get current settings
   */
  getSettings() {
    return { ...this.settings };
  }
  /**
   * Clear the due date histogram (useful for testing or reset)
   */
  clearHistogram() {
    this.dueDateHistogram.clear();
  }
};

// src/core/services/SpacedRepetitionService.ts
var SpacedRepetitionService = class {
  constructor(settings = {}) {
    this.currentSession = null;
    const srsSettings = { ...DEFAULT_SRS_SETTINGS, ...settings };
    this.algorithm = new SpacedRepetitionAlgorithm(srsSettings);
  }
  /**
   * Get cards that are due for review today
   */
  getCardsForReview(allCards) {
    return SpacedRepetitionAlgorithm.getCardsForReview(allCards);
  }
  /**
   * Get new cards (never reviewed)
   */
  getNewCards(allCards) {
    return allCards.filter((card) => !card.scheduleInfo || card.reviewCount === 0);
  }
  /**
   * Get learning cards (reviewed but not mature)
   */
  getLearningCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.reviewCount > 0 && card.scheduleInfo.interval < 21
    );
  }
  /**
   * Get mature cards (interval >= 21 days)
   */
  getMatureCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.scheduleInfo.interval >= 21
    );
  }
  /**
   * Start a new review session
   */
  startReviewSession(dueCards, maxCards) {
    const cardsToReview = maxCards ? dueCards.slice(0, maxCards) : dueCards;
    this.currentSession = {
      sessionId: this.generateSessionId(),
      startTime: (/* @__PURE__ */ new Date()).toISOString(),
      cardsReviewed: 0,
      totalCards: cardsToReview.length,
      completedCards: [],
      currentCard: cardsToReview[0],
      remainingCards: cardsToReview
      // Add remaining cards to track progress
    };
    return this.currentSession;
  }
  /**
   * Process a review response and get the next card
   */
  processReview(card, response) {
    var _a, _b, _c, _d;
    if (!this.currentSession) {
      throw new Error("No active review session");
    }
    const reviewResult = this.algorithm.schedule(response, card.scheduleInfo);
    const updatedCard = {
      ...card,
      reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
      difficulty: response,
      lastReviewed: (/* @__PURE__ */ new Date()).toISOString(),
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.reviewCount) || 0) + 1,
        lapseCount: (((_c = card.scheduleInfo) == null ? void 0 : _c.lapseCount) || 0) + (response === "hard" /* Hard */ ? 1 : 0),
        delayedDays: ((_d = card.scheduleInfo) == null ? void 0 : _d.delayedDays) || 0,
        repetition: reviewResult.repetition
      }
    };
    this.currentSession.cardsReviewed++;
    this.currentSession.completedCards.push(updatedCard);
    const remainingCards = this.currentSession.remainingCards || [];
    const nextCard = this.currentSession.cardsReviewed < remainingCards.length ? remainingCards[this.currentSession.cardsReviewed] : void 0;
    this.currentSession.currentCard = nextCard;
    const sessionComplete = !nextCard || this.currentSession.cardsReviewed >= this.currentSession.totalCards;
    if (sessionComplete) {
      this.endReviewSession();
    }
    return {
      updatedCard,
      nextCard,
      sessionComplete
    };
  }
  /**
   * End the current review session
   */
  endReviewSession() {
    const session = this.currentSession;
    this.currentSession = null;
    return session;
  }
  /**
   * Get current session info
   */
  getCurrentSession() {
    return this.currentSession;
  }
  /**
   * Calculate study statistics
   */
  calculateStatistics(allCards, studyHistory) {
    const now = /* @__PURE__ */ new Date();
    const today = now.toDateString();
    const overallStats = SpacedRepetitionAlgorithm.getStatistics(allCards);
    const todayStats = {
      newCards: 0,
      // Would track from session data
      reviewedCards: 0,
      // Would track from session data
      totalTime: 0
      // Would track from session timing
    };
    const streakStats = {
      currentDays: 0,
      // Would calculate from study history
      longestDays: 0,
      // Would calculate from study history
      lastStudyDate: null
    };
    return {
      today: todayStats,
      streak: streakStats,
      overall: overallStats
    };
  }
  /**
   * Get cards due in the next N days
   */
  getCardsDueInDays(allCards, days) {
    return SpacedRepetitionAlgorithm.getCardsDueInDays(allCards, days);
  }
  /**
   * Reset a card's schedule (for testing or manual intervention)
   */
  resetCardSchedule(card) {
    return {
      ...card,
      reviewCount: 0,
      lastReviewed: null,
      scheduleInfo: void 0
    };
  }
  /**
   * Manually set card difficulty (for bulk operations)
   */
  setCardDifficulty(card, difficulty) {
    var _a, _b;
    const reviewResult = this.algorithm.schedule(difficulty, card.scheduleInfo);
    return {
      ...card,
      difficulty,
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
        lapseCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.lapseCount) || 0) + (difficulty === "hard" /* Hard */ ? 1 : 0),
        delayedDays: 0,
        repetition: reviewResult.repetition
      }
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(settings) {
    this.algorithm.updateSettings(settings);
  }
  /**
   * Get current algorithm settings
   */
  getSettings() {
    return this.algorithm.getSettings();
  }
  /**
   * Generate a unique session ID
   */
  generateSessionId() {
    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * Get recommended daily study load
   */
  getRecommendedDailyCards(allCards) {
    const dueCards = this.getCardsForReview(allCards);
    const newCards = this.getNewCards(allCards);
    const maxNewCardsPerDay = 20;
    const maxReviewCardsPerDay = 100;
    const recommendedNew = Math.min(newCards.length, maxNewCardsPerDay);
    const recommendedReview = Math.min(dueCards.length - recommendedNew, maxReviewCardsPerDay);
    return {
      newCards: recommendedNew,
      reviewCards: recommendedReview,
      total: recommendedNew + recommendedReview
    };
  }
  /**
   * Export cards for data analysis or backup
   */
  exportScheduleData(allCards) {
    return allCards.map((card) => ({
      word: card.word,
      reviewCount: card.reviewCount,
      difficulty: card.difficulty,
      lastReviewed: card.lastReviewed,
      scheduleInfo: card.scheduleInfo,
      addedDate: card.addedDate
    }));
  }
  /**
   * Get the next review intervals for each difficulty level
   * Shows the exact SM-2 algorithm results with E-Factor information
   */
  getNextReviewIntervals(card) {
    const hardResult = this.algorithm.schedule("hard" /* Hard */, card.scheduleInfo);
    const goodResult = this.algorithm.schedule("good" /* Good */, card.scheduleInfo);
    const easyResult = this.algorithm.schedule("easy" /* Easy */, card.scheduleInfo);
    return {
      hard: {
        interval: hardResult.interval,
        displayText: this.formatInterval(hardResult.interval),
        eFactor: hardResult.ease / 100,
        // Convert back to E-Factor
        repetition: hardResult.repetition
      },
      good: {
        interval: goodResult.interval,
        displayText: this.formatInterval(goodResult.interval),
        eFactor: goodResult.ease / 100,
        repetition: goodResult.repetition
      },
      easy: {
        interval: easyResult.interval,
        displayText: this.formatInterval(easyResult.interval),
        eFactor: easyResult.ease / 100,
        repetition: easyResult.repetition
      }
    };
  }
  /**
   * Format interval as human-readable text
   */
  formatInterval(days) {
    if (days < 1) {
      return "today";
    } else if (days === 1) {
      return "1 day";
    } else if (days < 30) {
      return `${days} day${days > 1 ? "s" : ""}`;
    } else if (days < 365) {
      const months = Math.round(days / 30 * 10) / 10;
      return `${months} month${months > 1 ? "s" : ""}`;
    } else {
      const years = Math.round(days / 365 * 10) / 10;
      return `${years} year${years > 1 ? "s" : ""}`;
    }
  }
  /**
   * Get detailed SM-2 algorithm statistics
   */
  getSM2Statistics(allCards) {
    const stats = {
      overview: { totalCards: 0, newCards: 0, learningCards: 0, matureCards: 0 },
      repetitions: { rep0: 0, rep1: 0, rep2: 0, rep3Plus: 0 },
      eFactors: { average: 0, distribution: [] },
      intervals: { average: 0, distribution: [] }
    };
    let totalEFactor = 0;
    let totalInterval = 0;
    let cardsWithSchedule = 0;
    const eFactorBuckets = /* @__PURE__ */ new Map();
    const intervalBuckets = /* @__PURE__ */ new Map();
    allCards.forEach((card) => {
      stats.overview.totalCards++;
      if (!card.scheduleInfo) {
        stats.overview.newCards++;
        stats.repetitions.rep0++;
      } else {
        cardsWithSchedule++;
        const repetition = card.scheduleInfo.repetition || 0;
        const eFactor = card.scheduleInfo.ease / 100;
        const interval = card.scheduleInfo.interval;
        totalEFactor += eFactor;
        totalInterval += interval;
        if (repetition === 1)
          stats.repetitions.rep1++;
        else if (repetition === 2)
          stats.repetitions.rep2++;
        else if (repetition >= 3)
          stats.repetitions.rep3Plus++;
        else
          stats.repetitions.rep0++;
        if (interval >= 21) {
          stats.overview.matureCards++;
        } else {
          stats.overview.learningCards++;
        }
        const eFactorRange = this.getEFactorRange(eFactor);
        eFactorBuckets.set(eFactorRange, (eFactorBuckets.get(eFactorRange) || 0) + 1);
        const intervalRange = this.getIntervalRange(interval);
        intervalBuckets.set(intervalRange, (intervalBuckets.get(intervalRange) || 0) + 1);
      }
    });
    stats.eFactors.average = cardsWithSchedule > 0 ? Math.round(totalEFactor / cardsWithSchedule * 100) / 100 : 0;
    stats.intervals.average = cardsWithSchedule > 0 ? Math.round(totalInterval / cardsWithSchedule) : 0;
    stats.eFactors.distribution = Array.from(eFactorBuckets.entries()).map(([range, count]) => ({ range, count })).sort((a, b) => parseFloat(a.range.split("-")[0]) - parseFloat(b.range.split("-")[0]));
    stats.intervals.distribution = Array.from(intervalBuckets.entries()).map(([range, count]) => ({ range, count })).sort((a, b) => this.compareIntervalRanges(a.range, b.range));
    return stats;
  }
  /**
   * Get E-Factor range for grouping
   */
  getEFactorRange(eFactor) {
    if (eFactor < 1.5)
      return "1.3-1.5";
    if (eFactor < 2)
      return "1.5-2.0";
    if (eFactor < 2.5)
      return "2.0-2.5";
    if (eFactor < 3)
      return "2.5-3.0";
    if (eFactor < 3.5)
      return "3.0-3.5";
    return "3.5+";
  }
  /**
   * Get interval range for grouping
   */
  getIntervalRange(interval) {
    if (interval === 1)
      return "1 day";
    if (interval <= 6)
      return "2-6 days";
    if (interval <= 20)
      return "7-20 days";
    if (interval <= 60)
      return "21-60 days";
    if (interval <= 180)
      return "2-6 months";
    if (interval <= 365)
      return "6-12 months";
    return "1+ years";
  }
  /**
   * Compare interval ranges for sorting
   */
  compareIntervalRanges(a, b) {
    const order = ["1 day", "2-6 days", "7-20 days", "21-60 days", "2-6 months", "6-12 months", "1+ years"];
    return order.indexOf(a) - order.indexOf(b);
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var VocabularyModal = class extends import_obsidian4.Modal {
  constructor(app, plugin) {
    super(app);
    this.currentCardIndex = 0;
    this.cards = [];
    this.showAnswer = false;
    this.keydownHandler = null;
    this.currentSession = null;
    this.plugin = plugin;
    this.ttsService = TTSServiceFactory.createTTSService(plugin.settings);
    this.spacedRepetitionService = new SpacedRepetitionService();
  }
  onOpen() {
    const allCards = this.plugin.databaseManager.getAllWords();
    this.cards = this.spacedRepetitionService.getCardsForReview(allCards);
    if (this.cards.length === 0) {
      this.showNoCardsForReview(allCards.length);
      return;
    }
    this.currentSession = this.spacedRepetitionService.startReviewSession(this.cards);
    this.shuffleCards();
    this.currentCardIndex = 0;
    this.showAnswer = false;
    this.showCard();
    this.keydownHandler = (e) => {
      if (!this.showAnswer) {
        if (e.code === "Space" || e.key === " ") {
          e.preventDefault();
          this.showAnswer = true;
          this.showCard();
        }
      } else {
        if (e.key === "1") {
          this.handleReview("hard");
        } else if (e.key === "2") {
          this.handleReview("good");
        } else if (e.key === "3") {
          this.handleReview("easy");
        }
      }
    };
    window.addEventListener("keydown", this.keydownHandler);
  }
  shuffleCards() {
    for (let i = this.cards.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [this.cards[i], this.cards[j]] = [this.cards[j], this.cards[i]];
    }
  }
  showNoWordsMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noWordsEl = contentEl.createEl("div", { cls: "no-words-message" });
    noWordsEl.createEl("h2", { text: "\uD559\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4" });
    noWordsEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    const closeButton = noWordsEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showNoCardsForReview(totalCards) {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noReviewEl = contentEl.createEl("div", { cls: "no-review-message" });
    noReviewEl.createEl("h2", { text: "\u{1F389} \uC624\uB298\uC758 \uBCF5\uC2B5 \uC644\uB8CC!" });
    if (totalCards > 0) {
      const stats = this.spacedRepetitionService.calculateStatistics(this.plugin.databaseManager.getAllWords());
      noReviewEl.createEl("p", {
        text: `\uCD1D ${totalCards}\uAC1C\uC758 \uB2E8\uC5B4 \uC911 \uC624\uB298 \uBCF5\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`
      });
      const nextDueCards = this.spacedRepetitionService.getCardsDueInDays(
        this.plugin.databaseManager.getAllWords(),
        1
      );
      if (nextDueCards > 0) {
        noReviewEl.createEl("p", {
          text: `\uB0B4\uC77C \uBCF5\uC2B5 \uC608\uC815: ${nextDueCards}\uAC1C \uB2E8\uC5B4`
        });
      }
      const statsEl = noReviewEl.createEl("div", { cls: "study-stats" });
      statsEl.createEl("h3", { text: "\uD559\uC2B5 \uD604\uD669" });
      statsEl.createEl("p", { text: `\u2022 \uC0C8 \uB2E8\uC5B4: ${stats.overall.newCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uD559\uC2B5 \uC911: ${stats.overall.learningCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uC644\uB8CC: ${stats.overall.matureCards}\uAC1C` });
    } else {
      noReviewEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    }
    const closeButton = noReviewEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showCard() {
    if (this.currentCardIndex >= this.cards.length) {
      this.showCompletionMessage();
      return;
    }
    const currentCard = this.cards[this.currentCardIndex];
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const cardContainer = contentEl.createEl("div", { cls: "vocabulary-card" });
    const topInfoContainer = cardContainer.createEl("div", { cls: "card-top-info" });
    const currentBook = this.plugin.databaseManager.getCurrentBook();
    if (currentBook) {
      const bookInfoEl = topInfoContainer.createEl("div", { cls: "book-info-display" });
      bookInfoEl.createEl("span", {
        text: currentBook.name,
        cls: "current-book-name"
      });
    }
    const deleteButton = topInfoContainer.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const progressEl = cardContainer.createEl("div", { cls: "progress-indicator" });
    progressEl.textContent = `${this.currentCardIndex + 1} / ${this.cards.length}`;
    const wordContainer = cardContainer.createEl("div", { cls: "word-container" });
    const wordEl = wordContainer.createEl("h1", { cls: "card-word" });
    if (currentCard.pronunciation && currentCard.pronunciation.trim()) {
      wordEl.innerHTML = `${currentCard.word} <span class="pronunciation">[${currentCard.pronunciation}]</span>`;
    } else {
      wordEl.textContent = currentCard.word;
    }
    const wordPlayButton = wordContainer.createEl("button", {
      cls: "tts-play-button word-play-button",
      attr: { "aria-label": "\uB2E8\uC5B4 \uBC1C\uC74C \uB4E3\uAE30" }
    });
    wordPlayButton.innerHTML = "\u{1F50A}";
    wordPlayButton.addEventListener("click", () => {
      this.ttsService.speakWord(currentCard.word);
    });
    if (currentCard.similarWords && currentCard.similarWords.length > 0) {
      const similarSection = cardContainer.createEl("div", { cls: "similar-words-section" });
      similarSection.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
      const similarList = similarSection.createEl("ul", { cls: "similar-words-list" });
      currentCard.similarWords.forEach((word) => {
        similarList.createEl("li", { text: word });
      });
    }
    if (currentCard.examples && currentCard.examples.length > 0) {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      currentCard.examples.forEach((example, index) => {
        const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
        const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
        const englishExample = exampleTextContainer.createEl("p", { text: example.english });
        englishExample.addClass("english-example");
        const examplePlayButton = exampleTextContainer.createEl("button", {
          cls: "tts-play-button example-play-button",
          attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
        });
        examplePlayButton.innerHTML = "\u{1F50A}";
        examplePlayButton.addEventListener("click", () => {
          this.ttsService.speakExample(example.english);
        });
        if (this.showAnswer && example.korean && example.korean.trim()) {
          const koreanExample = exampleContainer.createEl("p", { text: example.korean });
          koreanExample.addClass("korean-example");
        }
      });
    } else {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
      const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
      const englishExample = exampleTextContainer.createEl("p", {
        text: `This is an example sentence with the word "${currentCard.word}".`
      });
      englishExample.addClass("english-example");
      const examplePlayButton = exampleTextContainer.createEl("button", {
        cls: "tts-play-button example-play-button",
        attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
      });
      examplePlayButton.innerHTML = "\u{1F50A}";
      examplePlayButton.addEventListener("click", () => {
        this.ttsService.speakExample(`This is an example sentence with the word "${currentCard.word}".`);
      });
      if (this.showAnswer) {
        const koreanExample = exampleContainer.createEl("p", {
          text: `"${currentCard.word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        });
        koreanExample.addClass("korean-example");
      }
    }
    if (!this.showAnswer) {
      const checkButton = cardContainer.createEl("button", { text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30" });
      checkButton.addClass("check-answer-button");
      checkButton.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCard();
      });
    } else {
      const answerSection = cardContainer.createEl("div", { cls: "answer-section" });
      answerSection.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerSection.createEl("ul", { cls: "meanings-list" });
      currentCard.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      this.createReviewButtons(cardContainer);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons-section" });
    const currentCard = this.cards[this.currentCardIndex];
    const intervals = this.spacedRepetitionService.getNextReviewIntervals(currentCard);
    const hardButton = reviewSection.createEl("button");
    hardButton.addClass("review-button", "hard-button");
    const hardContent = hardButton.createEl("div", { cls: "button-content" });
    hardContent.createEl("span", { text: "\uC5B4\uB824\uC6C0", cls: "button-label" });
    hardContent.createEl("span", { text: intervals.hard.displayText, cls: "button-interval" });
    hardButton.addEventListener("click", () => this.handleReview("hard"));
    const goodButton = reviewSection.createEl("button");
    goodButton.addClass("review-button", "good-button");
    const goodContent = goodButton.createEl("div", { cls: "button-content" });
    goodContent.createEl("span", { text: "\uC88B\uC74C", cls: "button-label" });
    goodContent.createEl("span", { text: intervals.good.displayText, cls: "button-interval" });
    goodButton.addEventListener("click", () => this.handleReview("good"));
    const easyButton = reviewSection.createEl("button");
    easyButton.addClass("review-button", "easy-button");
    const easyContent = easyButton.createEl("div", { cls: "button-content" });
    easyContent.createEl("span", { text: "\uC26C\uC6C0", cls: "button-label" });
    easyContent.createEl("span", { text: intervals.easy.displayText, cls: "button-interval" });
    easyButton.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentCard = this.cards[this.currentCardIndex];
    const activeSession = this.spacedRepetitionService.getCurrentSession();
    if (!activeSession) {
      console.error("No active review session in SpacedRepetitionService");
      const remainingCards = this.cards.slice(this.currentCardIndex);
      if (remainingCards.length > 0) {
        this.currentSession = this.spacedRepetitionService.startReviewSession(remainingCards);
      } else {
        console.error("No remaining cards to review");
        return;
      }
    }
    const reviewResponse = difficulty;
    try {
      const result = this.spacedRepetitionService.processReview(currentCard, reviewResponse);
      await this.plugin.databaseManager.updateWordWithSchedule(
        result.updatedCard.word,
        difficulty,
        result.updatedCard.scheduleInfo
      );
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    } catch (error) {
      console.error("Error processing spaced repetition review:", error);
      await this.plugin.databaseManager.updateWord(currentCard.word, difficulty);
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    }
  }
  async handleDeleteCard() {
    const currentCard = this.cards[this.currentCardIndex];
    const confirmModal = new ConfirmModal(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentCard.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentCard.word);
          this.cards.splice(this.currentCardIndex, 1);
          if (this.cards.length === 0) {
            this.showCompletionMessage();
            return;
          }
          if (this.currentCardIndex >= this.cards.length) {
            this.currentCardIndex = this.cards.length - 1;
          }
          this.showAnswer = false;
          this.showCard();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian4.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletionMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const completionEl = contentEl.createEl("div", { cls: "completion-message" });
    completionEl.createEl("h2", { text: "\uD559\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: `\uC624\uB298 ${this.cards.length}\uAC1C\uC758 \uB2E8\uC5B4 \uD559\uC2B5\uC744 \uC644\uB8CC\uD588\uC2B5\uB2C8\uB2E4.` });
    const restartButton = completionEl.createEl("button", { text: "\uB2E4\uC2DC \uD559\uC2B5\uD558\uAE30" });
    restartButton.addClass("restart-button");
    restartButton.addEventListener("click", () => {
      this.onOpen();
    });
    const closeButton = completionEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => {
      this.close();
    });
  }
  onClose() {
    if (this.keydownHandler) {
      window.removeEventListener("keydown", this.keydownHandler);
      this.keydownHandler = null;
    }
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal = class extends import_obsidian4.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var import_obsidian6 = require("obsidian");

// src/infrastructure/external/WordService.ts
var WordService = class {
  constructor() {
    this.apiBaseUrl = "https://api.dictionaryapi.dev/api/v2/entries/en";
  }
  async getWordData(word) {
    try {
      return this.getSampleWordData(word);
    } catch (error) {
      console.error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
      throw new Error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
  }
  getSampleWordData(word) {
    const sampleData = {
      "beautiful": {
        word: "beautiful",
        pronunciation: "/\u02C8bju\u02D0t\u026Af\u0259l/",
        meanings: ["\uC544\uB984\uB2E4\uC6B4", "\uC608\uC05C", "\uD6CC\uB96D\uD55C"],
        similarWords: ["pretty", "gorgeous", "stunning", "attractive"],
        examples: [
          {
            english: "She is a beautiful woman.",
            korean: "\uADF8\uB140\uB294 \uC544\uB984\uB2E4\uC6B4 \uC5EC\uC131\uC785\uB2C8\uB2E4."
          },
          {
            english: "The sunset was beautiful.",
            korean: "\uC77C\uBAB0\uC774 \uC544\uB984\uB2E4\uC6E0\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "What a beautiful day!",
            korean: "\uC815\uB9D0 \uC544\uB984\uB2E4\uC6B4 \uD558\uB8E8\uB124\uC694!"
          }
        ]
      },
      "happy": {
        word: "happy",
        pronunciation: "/\u02C8h\xE6pi/",
        meanings: ["\uD589\uBCF5\uD55C", "\uAE30\uC05C", "\uC990\uAC70\uC6B4"],
        similarWords: ["joyful", "cheerful", "glad", "pleased"],
        examples: [
          {
            english: "I am happy to see you.",
            korean: "\uB2F9\uC2E0\uC744 \uB9CC\uB098\uC11C \uAE30\uC069\uB2C8\uB2E4."
          },
          {
            english: "She has a happy family.",
            korean: "\uADF8\uB140\uB294 \uD589\uBCF5\uD55C \uAC00\uC871\uC744 \uAC00\uC9C0\uACE0 \uC788\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Happy birthday!",
            korean: "\uC0DD\uC77C \uCD95\uD558\uD569\uB2C8\uB2E4!"
          }
        ]
      },
      "learn": {
        word: "learn",
        pronunciation: "/l\u025C\u02D0rn/",
        meanings: ["\uBC30\uC6B0\uB2E4", "\uD559\uC2B5\uD558\uB2E4", "\uC775\uD788\uB2E4"],
        similarWords: ["study", "acquire", "grasp", "understand"],
        examples: [
          {
            english: "I want to learn English.",
            korean: "\uC800\uB294 \uC601\uC5B4\uB97C \uBC30\uC6B0\uACE0 \uC2F6\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Children learn quickly.",
            korean: "\uC544\uC774\uB4E4\uC740 \uBE68\uB9AC \uBC30\uC6C1\uB2C8\uB2E4."
          },
          {
            english: "You can learn from your mistakes.",
            korean: "\uC2E4\uC218\uB85C\uBD80\uD130 \uBC30\uC6B8 \uC218 \uC788\uC2B5\uB2C8\uB2E4."
          }
        ]
      }
    };
    if (sampleData[word.toLowerCase()]) {
      return sampleData[word.toLowerCase()];
    }
    return {
      word,
      pronunciation: "/pronunciation/",
      meanings: ["\uC758\uBBF8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
      similarWords: [],
      examples: [
        {
          english: `This is an example sentence with the word "${word}".`,
          korean: `"${word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        }
      ]
    };
  }
  // 실제 API 호출을 위한 메서드 (향후 구현)
  async fetchFromAPI(word) {
    const response = await fetch(`${this.apiBaseUrl}/${word}`);
    if (!response.ok) {
      throw new Error(`API \uC694\uCCAD \uC2E4\uD328: ${response.status}`);
    }
    return await response.json();
  }
};

// src/features/book-management/ui/AddBookModal.ts
var import_obsidian5 = require("obsidian");
var AddBookModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-book-modal");
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uC0C8\uB85C\uC6B4 \uB2E8\uC5B4\uC7A5\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const formEl = contentEl.createEl("form", { cls: "book-form" });
    const nameSection = formEl.createEl("div", { cls: "form-section" });
    const nameLabel = nameSection.createEl("label", {
      text: "\uB2E8\uC5B4\uC7A5 \uC774\uB984 *",
      cls: "form-label"
    });
    const nameInput = nameSection.createEl("input", {
      type: "text",
      placeholder: "\uC608: TOEIC \uB2E8\uC5B4\uC7A5, \uC77C\uC0C1\uC0DD\uD65C \uB2E8\uC5B4\uC7A5",
      cls: "form-input"
    });
    nameInput.required = true;
    const descSection = formEl.createEl("div", { cls: "form-section" });
    const descLabel = descSection.createEl("label", {
      text: "\uC124\uBA85 (\uC120\uD0DD\uC0AC\uD56D)",
      cls: "form-label"
    });
    const descInput = descSection.createEl("textarea", {
      placeholder: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB300\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694.",
      cls: "form-textarea"
    });
    descInput.rows = 3;
    const buttonSection = formEl.createEl("div", { cls: "button-section" });
    const createButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uC0DD\uC131",
      cls: "create-button primary",
      type: "submit"
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button",
      type: "button"
    });
    cancelButton.addEventListener("click", () => this.close());
    formEl.addEventListener("submit", async (e) => {
      e.preventDefault();
      await this.createBook(nameInput.value.trim(), descInput.value.trim());
    });
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        formEl.dispatchEvent(new Event("submit"));
      }
    });
    nameInput.focus();
  }
  async createBook(name, description) {
    if (!name.trim()) {
      new import_obsidian5.Notice("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    try {
      const existingBooks = this.plugin.databaseManager.getAllBooks();
      const isDuplicate = existingBooks.some(
        (book) => book.name.toLowerCase() === name.toLowerCase()
      );
      if (isDuplicate) {
        new import_obsidian5.Notice("\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4.");
        return;
      }
      const newBook = await this.plugin.databaseManager.createBook(name, description);
      new import_obsidian5.Notice(`"${name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
      this.close();
      const event = new CustomEvent("bookCreated", { detail: newBook });
      document.dispatchEvent(event);
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131 \uC2E4\uD328:", error);
      new import_obsidian5.Notice("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var VocabularyManagerModal = class extends import_obsidian6.Modal {
  constructor(app, plugin) {
    var _a;
    super(app);
    this.currentView = "list";
    this.selectedWords = /* @__PURE__ */ new Set();
    this.selectedBookId = "";
    this.plugin = plugin;
    this.databaseManager = plugin.databaseManager;
    this.wordService = new WordService();
    this.llmService = plugin.llmService;
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
  }
  hasValidApiKey() {
    const provider = this.plugin.settings.llmProvider;
    switch (provider) {
      case "openai":
        return !!this.plugin.settings.openaiApiKey;
      case "anthropic":
        return !!this.plugin.settings.anthropicApiKey;
      case "google":
        return !!this.plugin.settings.googleApiKey;
      default:
        return false;
    }
  }
  async onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-manager-modal");
    contentEl.classList.add("wide-manager-modal");
    await this.databaseManager.loadAllBooks();
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
    this.createBookSelectorHeader();
    this.createNavigation();
    this.showCurrentView();
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  async handleBookCreated(event) {
    const newBook = event.detail;
    this.selectedBookId = newBook.id;
    await this.refreshBookSelector();
  }
  createBookSelectorHeader() {
    const headerEl = this.contentEl.createEl("div", { cls: "manager-header" });
    headerEl.style.display = "flex";
    headerEl.style.alignItems = "center";
    headerEl.style.gap = "18px";
    headerEl.style.marginBottom = "18px";
    const books = this.databaseManager.getAllBooks();
    const bookSelect = headerEl.createEl("select", { cls: "book-select-dropdown" });
    bookSelect.style.height = "38px";
    bookSelect.style.fontSize = "16px";
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      if (book.id === this.selectedBookId)
        option.selected = true;
      bookSelect.appendChild(option);
    });
    bookSelect.addEventListener("change", async (e) => {
      this.selectedBookId = e.target.value;
      await this.databaseManager.setCurrentBook(this.selectedBookId);
      this.showCurrentView();
    });
    const addBookBtn = headerEl.createEl("button", { text: "\uC0C8 \uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "book-manage-button" });
    addBookBtn.addEventListener("click", () => {
      const addBookModal = new AddBookModal(this.app, this.plugin);
      addBookModal.onClose = () => {
        this.refreshBookSelector();
      };
      addBookModal.open();
    });
    const delBookBtn = headerEl.createEl("button", { text: "\uD604\uC7AC \uB2E8\uC5B4\uC7A5 \uC0AD\uC81C", cls: "book-delete-button" });
    const isDefault = this.selectedBookId === "default";
    if (isDefault) {
      delBookBtn.setAttr("disabled", "true");
      delBookBtn.addClass("disabled");
    }
    delBookBtn.addEventListener("click", async () => {
      if (isDefault)
        return;
      const currentBook = this.databaseManager.getBook(this.selectedBookId);
      if (!currentBook) {
        new import_obsidian6.Notice("\uB2E8\uC5B4\uC7A5 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      const wordsInBook = this.databaseManager.getWordsByBook(this.selectedBookId);
      const wordCount = wordsInBook.length;
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uD655\uC778",
        `\uC815\uB9D0\uB85C "${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\u2022 \uB2E8\uC5B4\uC7A5 \uC774\uB984: ${currentBook.name}
\u2022 \uD3EC\uD568\uB41C \uB2E8\uC5B4 \uC218: ${wordCount}\uAC1C
\u2022 \uC0DD\uC131\uC77C: ${new Date(currentBook.createdAt).toLocaleDateString("ko-KR")}

\u26A0\uFE0F \uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC73C\uBA70, \uB2E8\uC5B4\uC7A5\uACFC \uBAA8\uB4E0 \uB2E8\uC5B4\uAC00 \uC601\uAD6C\uC801\uC73C\uB85C \uC0AD\uC81C\uB429\uB2C8\uB2E4.`,
        async () => {
          try {
            await this.databaseManager.deleteBook(this.selectedBookId);
            this.selectedBookId = "default";
            await this.databaseManager.setCurrentBook("default");
            new import_obsidian6.Notice(`"${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`);
            this.onOpen();
          } catch (e) {
            new import_obsidian6.Notice("\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uC2E4\uD328: " + e.message);
          }
        }
      );
      confirmModal.open();
    });
  }
  createNavigation() {
    const navEl = this.contentEl.createEl("div", { cls: "manager-navigation" });
    const listBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uBAA9\uB85D", cls: "nav-button" });
    listBtn.addEventListener("click", () => {
      this.currentView = "list";
      this.showCurrentView();
    });
    const statsBtn = navEl.createEl("button", { text: "\uD1B5\uACC4", cls: "nav-button" });
    statsBtn.addEventListener("click", () => {
      this.currentView = "statistics";
      this.showCurrentView();
    });
    const addBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "nav-button" });
    addBtn.addEventListener("click", () => {
      this.currentView = "add";
      this.showCurrentView();
    });
    const startLearningButton = navEl.createEl("button", {
      text: "\uC804\uCCB4 \uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      cls: "nav-button"
    });
    startLearningButton.addEventListener("click", () => {
      this.close();
      new VocabularyModal(this.app, this.plugin).open();
    });
  }
  showCurrentView() {
    const contentEl = this.contentEl.querySelector(".manager-content") || this.contentEl.createEl("div", { cls: "manager-content" });
    contentEl.empty();
    switch (this.currentView) {
      case "list":
        this.showWordList(contentEl);
        break;
      case "statistics":
        this.showStatistics(contentEl);
        break;
      case "add":
        this.showAddWord(contentEl);
        break;
    }
  }
  showWordList(container2) {
    const words = this.databaseManager.getAllWords();
    if (words.length === 0) {
      container2.createEl("p", {
        text: "\uB2E8\uC5B4\uC7A5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4. \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD574\uBCF4\uC138\uC694!",
        cls: "empty-message"
      });
      return;
    }
    const searchEl = container2.createEl("div", { cls: "search-section" });
    const searchInput = searchEl.createEl("input", {
      type: "text",
      placeholder: "\uB2E8\uC5B4 \uAC80\uC0C9...",
      cls: "search-input"
    });
    const selectionControls = searchEl.createEl("div", { cls: "selection-controls" });
    const allSelected = this.selectedWords.size === words.length && words.length > 0;
    const selectAllBtn = selectionControls.createEl("button", {
      text: allSelected ? "\uC804\uCCB4 \uD574\uC81C" : "\uC804\uCCB4 \uC120\uD0DD",
      cls: "selection-button"
    });
    selectAllBtn.addEventListener("click", () => {
      if (this.selectedWords.size === words.length) {
        this.selectedWords.clear();
      } else {
        this.selectedWords.clear();
        words.forEach((word) => this.selectedWords.add(word.word));
      }
      this.showCurrentView();
    });
    const fetchSelectedButton = selectionControls.createEl("button", {
      text: "\uC120\uD0DD \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-selected-button"
    });
    fetchSelectedButton.addEventListener("click", () => {
      if (this.selectedWords.size === 0) {
        new import_obsidian6.Notice("\uC120\uD0DD\uB41C \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      this.showFetchSelectedMeaningsModal();
    });
    const wordListEl = container2.createEl("div", { cls: "word-list" });
    const renderWords = (filteredWords) => {
      wordListEl.empty();
      filteredWords.forEach((word) => {
        this.createWordItem(wordListEl, word);
      });
    };
    searchInput.addEventListener("input", (e) => {
      const query = e.target.value;
      const filteredWords = query ? this.databaseManager.searchWords(query) : words;
      renderWords(filteredWords);
    });
    renderWords(words);
  }
  createWordItem(container2, word) {
    const wordEl = container2.createEl("div", { cls: "word-item" });
    const checkbox = wordEl.createEl("input", {
      type: "checkbox",
      cls: "word-checkbox"
    });
    checkbox.checked = this.selectedWords.has(word.word);
    checkbox.addEventListener("change", (e) => {
      const isChecked = e.target.checked;
      if (isChecked) {
        this.selectedWords.add(word.word);
      } else {
        this.selectedWords.delete(word.word);
      }
    });
    const wordHeader = wordEl.createEl("div", { cls: "word-header" });
    const wordTitleEl = wordHeader.createEl("h3", { cls: "word-title" });
    if (word.pronunciation && word.pronunciation.trim()) {
      wordTitleEl.innerHTML = `${word.word} <span class="pronunciation">[${word.pronunciation}]</span>`;
    } else {
      wordTitleEl.textContent = word.word;
    }
    const difficultyBadge = wordHeader.createEl("span", {
      text: this.getDifficultyText(word.difficulty),
      cls: `difficulty-badge ${word.difficulty}`
    });
    const wordContent = wordEl.createEl("div", { cls: "word-content" });
    wordContent.createEl("p", {
      text: `\uB73B: ${word.meanings.join(", ")}`,
      cls: "word-meanings"
    });
    wordContent.createEl("p", {
      text: `\uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}\uD68C`,
      cls: "review-count"
    });
    if (word.lastReviewed) {
      wordContent.createEl("p", {
        text: `\uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${formatDate(word.lastReviewed)}`,
        cls: "last-reviewed"
      });
    }
    const wordActions = wordEl.createEl("div", { cls: "word-actions" });
    if (this.plugin.settings.enableAdvancedFeatures) {
      const fetchButton = wordActions.createEl("button", {
        text: "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
        cls: "action-button fetch-single-button"
      });
      fetchButton.addEventListener("click", () => {
        this.fetchSingleWordMeaning(word);
      });
    }
    const deleteBtn = wordActions.createEl("button", {
      text: "\uC0AD\uC81C",
      cls: "action-button delete-button"
    });
    deleteBtn.addEventListener("click", async () => {
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4 \uC0AD\uC81C",
        `"${word.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,
        async () => {
          await this.databaseManager.removeWord(word.word);
          this.showCurrentView();
        }
      );
      confirmModal.open();
    });
  }
  showStatistics(container2) {
    const stats = this.databaseManager.getStatistics();
    const statsGrid = container2.createEl("div", { cls: "stats-grid" });
    const basicStats = statsGrid.createEl("div", { cls: "stats-section" });
    basicStats.createEl("h3", { text: "\uAE30\uBCF8 \uD1B5\uACC4", cls: "stats-title" });
    this.createStatItem(basicStats, "\uCD1D \uB2E8\uC5B4 \uC218", stats.totalWords.toString());
    this.createStatItem(basicStats, "\uCD1D \uBCF5\uC2B5 \uD69F\uC218", stats.totalReviews.toString());
    this.createStatItem(basicStats, "\uC5F0\uC18D \uD559\uC2B5\uC77C", `${stats.streakDays}\uC77C`);
    this.createStatItem(basicStats, "\uD3C9\uADE0 \uB09C\uC774\uB3C4", stats.averageDifficulty.toFixed(1));
    const difficultyStats = statsGrid.createEl("div", { cls: "stats-section" });
    difficultyStats.createEl("h3", { text: "\uB09C\uC774\uB3C4\uBCC4 \uBD84\uD3EC", cls: "stats-title" });
    this.createStatItem(difficultyStats, "\uC26C\uC6C0", stats.wordsByDifficulty.easy.toString());
    this.createStatItem(difficultyStats, "\uC88B\uC74C", stats.wordsByDifficulty.good.toString());
    this.createStatItem(difficultyStats, "\uC5B4\uB824\uC6C0", stats.wordsByDifficulty.hard.toString());
    const activityStats = statsGrid.createEl("div", { cls: "stats-section" });
    activityStats.createEl("h3", { text: "\uCD5C\uADFC 7\uC77C \uD65C\uB3D9", cls: "stats-title" });
    stats.recentActivity.forEach((activity) => {
      const date = new Date(activity.date).toLocaleDateString("ko-KR", {
        month: "short",
        day: "numeric"
      });
      this.createStatItem(
        activityStats,
        date,
        `\uD559\uC2B5: ${activity.wordsStudied}, \uBCF5\uC2B5: ${activity.reviewsCompleted}`
      );
    });
  }
  createStatItem(container2, label, value) {
    const statEl = container2.createEl("div", { cls: "stat-item" });
    statEl.createEl("span", { text: label, cls: "stat-label" });
    statEl.createEl("span", { text: value, cls: "stat-value" });
  }
  showAddWord(container2) {
    const addSection = container2.createEl("div", { cls: "add-word-section" });
    addSection.createEl("h3", { text: "\uC0C8 \uB2E8\uC5B4 \uCD94\uAC00", cls: "section-title" });
    const inputEl = addSection.createEl("div", { cls: "word-input-group" });
    const wordInput = inputEl.createEl("input", {
      type: "text",
      placeholder: "\uC601\uB2E8\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694 (\uC608: beautiful)",
      cls: "word-input"
    });
    const addButton = inputEl.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button"
    });
    const addWord = async () => {
      const word = wordInput.value.trim();
      if (!word) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",
          cls: "error-message"
        });
        return;
      }
      try {
        const wordData = await this.wordService.getWordData(word);
        const vocabularyCard = {
          ...wordData,
          reviewCount: 0,
          difficulty: "good",
          lastReviewed: null,
          addedDate: (/* @__PURE__ */ new Date()).toISOString(),
          bookId: this.selectedBookId
        };
        await this.databaseManager.addWord(vocabularyCard);
        wordInput.value = "";
        addSection.createEl("p", {
          text: `"${word}" \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`,
          cls: "success-message"
        });
        setTimeout(() => {
          const successMsg = addSection.querySelector(".success-message");
          if (successMsg)
            successMsg.remove();
        }, 3e3);
      } catch (error) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
          cls: "error-message"
        });
      }
    };
    addButton.addEventListener("click", addWord);
    wordInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        addWord();
      }
    });
  }
  getDifficultyText(difficulty) {
    switch (difficulty) {
      case "easy":
        return "\uC26C\uC6C0";
      case "good":
        return "\uC88B\uC74C";
      case "hard":
        return "\uC5B4\uB824\uC6C0";
      default:
        return "\uC88B\uC74C";
    }
  }
  startReview(words) {
    const reviewModal = new VocabularyReviewModal(this.app, this.plugin, words);
    reviewModal.open();
  }
  showFetchSelectedMeaningsModal() {
    const selectedWordList = Array.from(this.selectedWords);
    new FetchSelectedMeaningsModal(this.app, this.plugin, selectedWordList).open();
  }
  async fetchSingleWordMeaning(word) {
    if (!this.hasValidApiKey()) {
      new import_obsidian6.Notice("LLM API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      `"${word.word}" \uB2E8\uC5B4\uC758 \uB73B\uC744 \uC0C8\uB85C \uAC00\uC838\uC624\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? \uAE30\uC874 \uC815\uBCF4\uAC00\uC5B4\uC50C\uC6CC\uC9D1\uB2C8\uB2E4.`,
      async () => {
        try {
          new import_obsidian6.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911...`);
          const llmResponse = await this.plugin.llmService.getWordDetails(word.word);
          if (llmResponse.success) {
            const wordDetail = llmResponse.data;
            const wordData = this.plugin.llmService.convertToWordData(wordDetail);
            const updatedWord = {
              ...word,
              meanings: wordData.meanings,
              examples: wordData.examples,
              similarWords: wordData.similarWords
            };
            await this.plugin.databaseManager.updateWordData(word.word, updatedWord);
            new import_obsidian6.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
            this.showCurrentView();
          } else {
            new import_obsidian6.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328: ${llmResponse.error}`);
          }
        } catch (error) {
          console.error(`\uB2E8\uC5B4 "${word.word}" \uCC98\uB9AC \uC2E4\uD328:`, error);
          new import_obsidian6.Notice(`"${word.word}" \uB2E8\uC5B4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.`);
        }
      }
    );
    confirmModal.open();
  }
  async refreshBookSelector() {
    await this.databaseManager.loadAllBooks();
    const headerEl = this.contentEl.querySelector(".manager-header");
    if (headerEl) {
      const bookSelect = headerEl.querySelector(".book-select-dropdown");
      if (bookSelect) {
        const currentValue = bookSelect.value;
        const books = this.databaseManager.getAllBooks();
        bookSelect.innerHTML = "";
        books.forEach((book) => {
          const option = document.createElement("option");
          option.value = book.id;
          option.text = book.name;
          if (book.id === currentValue || book.id === this.selectedBookId) {
            option.selected = true;
            this.selectedBookId = book.id;
          }
          bookSelect.appendChild(option);
        });
      }
    }
    this.showCurrentView();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
};
var VocabularyReviewModal = class extends import_obsidian6.Modal {
  constructor(app, plugin, words) {
    super(app);
    this.currentIndex = 0;
    this.showAnswer = false;
    this.plugin = plugin;
    this.words = words;
  }
  onOpen() {
    if (this.words.length === 0) {
      this.close();
      return;
    }
    this.showCurrentWord();
  }
  showCurrentWord() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const currentWord = this.words[this.currentIndex];
    const progressEl = contentEl.createEl("div", { cls: "review-progress" });
    progressEl.createEl("span", {
      text: `${this.currentIndex + 1} / ${this.words.length}`,
      cls: "progress-text"
    });
    const cardEl = contentEl.createEl("div", { cls: "review-card" });
    const deleteButton = cardEl.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const wordEl = cardEl.createEl("h1", { cls: "review-word" });
    if (currentWord.pronunciation && currentWord.pronunciation.trim()) {
      wordEl.innerHTML = `${currentWord.word} <span class="pronunciation">[${currentWord.pronunciation}]</span>`;
    } else {
      wordEl.textContent = currentWord.word;
    }
    if (!this.showAnswer) {
      if (currentWord.similarWords.length > 0) {
        const similarEl = cardEl.createEl("div", { cls: "similar-words" });
        similarEl.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
        const similarList = similarEl.createEl("ul");
        currentWord.similarWords.forEach((word) => {
          similarList.createEl("li", { text: word });
        });
      }
      if (currentWord.examples.length > 0) {
        const examplesEl = cardEl.createEl("div", { cls: "examples" });
        examplesEl.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
        currentWord.examples.forEach((example) => {
          examplesEl.createEl("p", { text: example.english, cls: "example" });
        });
      }
      const checkBtn = cardEl.createEl("button", {
        text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30",
        cls: "check-answer-button"
      });
      checkBtn.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCurrentWord();
      });
    } else {
      const answerEl = cardEl.createEl("div", { cls: "answer-section" });
      answerEl.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerEl.createEl("ul");
      currentWord.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      if (currentWord.examples.length > 0) {
        answerEl.createEl("h3", { text: "\uC608\uBB38 \uBC88\uC5ED:" });
        currentWord.examples.forEach((example) => {
          answerEl.createEl("p", { text: example.korean, cls: "translation" });
        });
      }
      this.createReviewButtons(cardEl);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons" });
    const hardBtn = reviewSection.createEl("button", { text: "\uC5B4\uB824\uC6C0", cls: "review-btn hard" });
    const goodBtn = reviewSection.createEl("button", { text: "\uC88B\uC74C", cls: "review-btn good" });
    const easyBtn = reviewSection.createEl("button", { text: "\uC26C\uC6C0", cls: "review-btn easy" });
    hardBtn.addEventListener("click", () => this.handleReview("hard"));
    goodBtn.addEventListener("click", () => this.handleReview("good"));
    easyBtn.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentWord = this.words[this.currentIndex];
    await this.plugin.databaseManager.updateWord(currentWord.word, difficulty);
    this.currentIndex++;
    this.showAnswer = false;
    if (this.currentIndex >= this.words.length) {
      this.showCompletion();
    } else {
      this.showCurrentWord();
    }
  }
  async handleDeleteCard() {
    const currentWord = this.words[this.currentIndex];
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentWord.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentWord.word);
          this.words.splice(this.currentIndex, 1);
          if (this.words.length === 0) {
            this.showCompletion();
            return;
          }
          if (this.currentIndex >= this.words.length) {
            this.currentIndex = this.words.length - 1;
          }
          this.showAnswer = false;
          this.showCurrentWord();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian6.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletion() {
    const { contentEl } = this;
    contentEl.empty();
    const completionEl = contentEl.createEl("div", { cls: "completion" });
    completionEl.createEl("h2", { text: "\uBCF5\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: "\uBAA8\uB4E0 \uB2E8\uC5B4\uB97C \uBCF5\uC2B5\uD588\uC2B5\uB2C8\uB2E4." });
    const closeBtn = completionEl.createEl("button", { text: "\uB2EB\uAE30", cls: "close-btn" });
    closeBtn.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FetchSelectedMeaningsModal = class extends import_obsidian6.Modal {
  constructor(app, plugin, selectedWords) {
    super(app);
    this.isProcessing = false;
    this.plugin = plugin;
    this.selectedWords = selectedWords;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("fetch-selected-meanings-modal");
    contentEl.createEl("h2", {
      text: `\uC120\uD0DD\uB41C ${this.selectedWords.length}\uAC1C \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30`,
      cls: "modal-title"
    });
    contentEl.createEl("p", {
      text: `\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4\uC758 \uC0C1\uC138 \uC815\uBCF4\uB97C LLM API\uB97C \uD1B5\uD574 \uAC00\uC838\uC635\uB2C8\uB2E4.`,
      cls: "modal-description"
    });
    const wordListEl = contentEl.createEl("div", { cls: "selected-words-list" });
    wordListEl.createEl("h3", { text: "\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4:" });
    const wordsContainer = wordListEl.createEl("div", { cls: "words-container" });
    this.selectedWords.forEach((word) => {
      wordsContainer.createEl("span", {
        text: word,
        cls: "selected-word-tag"
      });
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const fetchButton = buttonSection.createEl("button", {
      text: "\uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-button"
    });
    fetchButton.addEventListener("click", () => {
      this.fetchSelectedMeanings();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      this.close();
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section" });
    progressSection.style.display = "none";
    const progressText = progressSection.createEl("div", { cls: "progress-text" });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section" });
    resultSection.style.display = "none";
  }
  async fetchSelectedMeanings() {
    if (this.isProcessing)
      return;
    this.isProcessing = true;
    this.showProgress(this.selectedWords.length);
    try {
      const result = await this.plugin.llmService.getMultipleWordDetails(this.selectedWords);
      if (result.success && Array.isArray(result.data)) {
        const successWords = [];
        const failedWords = [];
        for (const wordData of result.data) {
          try {
            if (wordData.word && wordData.meanings && wordData.meanings.length > 0) {
              const existingWord = this.plugin.databaseManager.getWord(wordData.word);
              if (existingWord) {
                const updatedWord = {
                  ...existingWord,
                  pronunciation: wordData.pronunciation || "",
                  meanings: wordData.meanings,
                  examples: wordData.examples || [],
                  similarWords: wordData.similarWords || []
                };
                await this.plugin.databaseManager.updateWordData(wordData.word, updatedWord);
                successWords.push(wordData.word);
              }
            } else {
              failedWords.push(wordData.word);
            }
          } catch (error) {
            console.error(`\uB2E8\uC5B4 "${wordData.word}" \uC5C5\uB370\uC774\uD2B8 \uC2E4\uD328:`, error);
            failedWords.push(wordData.word);
          }
        }
        this.hideProgress();
        this.showResults({ success: successWords, failed: failedWords });
        if (successWords.length > 0) {
          new import_obsidian6.Notice(`${successWords.length}\uAC1C\uC758 \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD588\uC2B5\uB2C8\uB2E4!`);
        }
      } else {
        this.hideProgress();
        new import_obsidian6.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + (result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"));
      }
    } catch (error) {
      this.hideProgress();
      new import_obsidian6.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + error.message);
    } finally {
      this.isProcessing = false;
    }
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.style.display = "block";
    progressText.textContent = `\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911... (0/${totalWords})`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    if (progressSection) {
      progressSection.style.display = "none";
    }
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.style.display = "block";
    resultSection.empty();
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 10) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 10) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", { text: "\uB2EB\uAE30", cls: "close-button" });
    closeButton.addEventListener("click", () => this.close());
  }
  onClose() {
    this.isProcessing = false;
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal2 = class extends import_obsidian6.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/word-management/ui/AddWordsModal.ts
var import_obsidian7 = require("obsidian");

// src/shared/validation.ts
function validateString(input, options = {}) {
  const {
    minLength = 0,
    maxLength = 1e3,
    allowEmpty = false,
    pattern,
    fieldName = "\uC785\uB825\uAC12"
  } = options;
  if (!input || input.trim().length === 0) {
    if (allowEmpty) {
      return { isValid: true, sanitized: "" };
    }
    return { isValid: false, error: `${fieldName}\uC740(\uB294) \uD544\uC218 \uC785\uB825\uAC12\uC785\uB2C8\uB2E4.` };
  }
  const trimmed = input.trim();
  if (trimmed.length < minLength) {
    return {
      isValid: false,
      error: `${fieldName}\uC740(\uB294) \uCD5C\uC18C ${minLength}\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.`
    };
  }
  if (trimmed.length > maxLength) {
    return {
      isValid: false,
      error: `${fieldName}\uC740(\uB294) \uCD5C\uB300 ${maxLength}\uC790 \uC774\uD558\uC5EC\uC57C \uD569\uB2C8\uB2E4.`
    };
  }
  if (pattern && !pattern.test(trimmed)) {
    return {
      isValid: false,
      error: `${fieldName}\uC758 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.`
    };
  }
  return { isValid: true, sanitized: trimmed };
}
function validateWord(word) {
  const validation = validateString(word, {
    minLength: 1,
    maxLength: 50,
    pattern: /^[a-zA-Z\s'-]+$/,
    fieldName: "\uB2E8\uC5B4"
  });
  if (!validation.isValid) {
    return validation;
  }
  const sanitized = validation.sanitized.replace(/[^\w\s'-]/g, "").replace(/\s+/g, " ");
  return { isValid: true, sanitized };
}
function sanitizeMarkdown(text) {
  if (!text)
    return "";
  return text.replace(/<script[^>]*>[\s\S]*?<\/script>/gi, "").replace(/<iframe[^>]*>[\s\S]*?<\/iframe>/gi, "").replace(/javascript:/gi, "").replace(/on\w+\s*=/gi, "").trim();
}
function validateBatch(items, validator) {
  const valid = [];
  const invalid = [];
  for (const item of items) {
    const result = validator(item);
    if (result.isValid) {
      valid.push(item);
    } else {
      invalid.push({ item, error: result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958" });
    }
  }
  return { valid, invalid };
}

// src/shared/CancellationToken.ts
var CancellationTokenSource = class {
  constructor() {
    this._isCancelled = false;
    this._callbacks = [];
  }
  get token() {
    return {
      get isCancelled() {
        return this._isCancelled;
      },
      throwIfCancelled: () => {
        if (this._isCancelled) {
          throw new CancellationError("Operation was cancelled");
        }
      },
      onCancelled: (callback) => {
        if (this._isCancelled) {
          callback();
        } else {
          this._callbacks.push(callback);
        }
      }
    };
  }
  cancel() {
    if (this._isCancelled)
      return;
    this._isCancelled = true;
    this._callbacks.forEach((callback) => {
      try {
        callback();
      } catch (error) {
        console.error("Error in cancellation callback:", error);
      }
    });
    this._callbacks.length = 0;
  }
  dispose() {
    this._callbacks.length = 0;
  }
};
var CancellationError = class extends Error {
  constructor(message = "Operation was cancelled") {
    super(message);
    this.name = "CancellationError";
  }
};
function delay(ms, cancellationToken) {
  return new Promise((resolve, reject) => {
    if (cancellationToken == null ? void 0 : cancellationToken.isCancelled) {
      reject(new CancellationError());
      return;
    }
    const timeoutId = setTimeout(() => {
      resolve();
    }, ms);
    cancellationToken == null ? void 0 : cancellationToken.onCancelled(() => {
      clearTimeout(timeoutId);
      reject(new CancellationError());
    });
  });
}
async function withCancellation(promise, cancellationToken) {
  if (!cancellationToken) {
    return promise;
  }
  return new Promise((resolve, reject) => {
    if (cancellationToken.isCancelled) {
      reject(new CancellationError());
      return;
    }
    let isResolved = false;
    promise.then(
      (value) => {
        if (!isResolved) {
          isResolved = true;
          resolve(value);
        }
      },
      (error) => {
        if (!isResolved) {
          isResolved = true;
          reject(error);
        }
      }
    );
    cancellationToken.onCancelled(() => {
      if (!isResolved) {
        isResolved = true;
        reject(new CancellationError());
      }
    });
  });
}
async function processBatchWithCancellation(items, processor, options = {}) {
  const {
    batchSize = 10,
    delay: delayMs = 100,
    cancellationToken,
    onProgress
  } = options;
  const results = [];
  for (let i = 0; i < items.length; i += batchSize) {
    cancellationToken == null ? void 0 : cancellationToken.throwIfCancelled();
    const batch = items.slice(i, i + batchSize);
    const batchPromises = batch.map(
      (item, batchIndex) => processor(item, i + batchIndex)
    );
    try {
      const batchResults = await withCancellation(
        Promise.all(batchPromises),
        cancellationToken
      );
      results.push(...batchResults);
      onProgress == null ? void 0 : onProgress(Math.min(i + batchSize, items.length), items.length);
      if (i + batchSize < items.length && delayMs > 0) {
        await delay(delayMs, cancellationToken);
      }
    } catch (error) {
      if (error instanceof CancellationError) {
        throw error;
      }
      throw error;
    }
  }
  return results;
}

// src/features/word-management/ui/AddWordsModal.ts
var AddWordsModal = class extends import_obsidian7.Modal {
  constructor(app, plugin) {
    super(app);
    this.isProcessing = false;
    this.cancellationTokenSource = null;
    this.plugin = plugin;
    this.wordService = new WordService();
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-words-modal");
    await this.plugin.databaseManager.loadAllBooks();
    const bookSelectSection = contentEl.createEl("div", { cls: "book-select-section" });
    const bookLabel = bookSelectSection.createEl("label", { text: "\uB2E8\uC5B4\uC7A5 \uC120\uD0DD", cls: "book-select-label" });
    const bookSelectContainer = bookSelectSection.createEl("div", { cls: "book-select-container" });
    this.bookSelect = bookSelectContainer.createEl("select", { cls: "book-select-dropdown" });
    const addBookButton = bookSelectContainer.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00",
      cls: "add-book-button"
    });
    addBookButton.addEventListener("click", () => this.openAddBookModal());
    await this.updateBookSelect();
    this.bookSelect.addEventListener("change", (e) => {
      const selectedBookId = e.target.value;
      this.plugin.databaseManager.setCurrentBook(selectedBookId);
    });
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uCD94\uAC00\uD560 \uC601\uB2E8\uC5B4\uB4E4\uC744 \uC785\uB825\uD558\uC138\uC694. \uAC01 \uB2E8\uC5B4\uB294 \uC0C8 \uC904\uB85C \uAD6C\uBD84\uB429\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const inputSection = contentEl.createEl("div", { cls: "input-section" });
    const textarea = inputSection.createEl("textarea", {
      placeholder: "beautiful\nhappy\nlearn\nstudy\nwork\n...",
      cls: "words-textarea"
    });
    textarea.setAttribute("rows", "10");
    const exampleBtn = inputSection.createEl("button", {
      text: "\uC608\uC2DC \uB2E8\uC5B4\uB4E4 \uBD88\uB7EC\uC624\uAE30",
      cls: "example-button"
    });
    exampleBtn.addEventListener("click", () => {
      textarea.value = "beautiful\nhappy\nlearn\nstudy\nwork\nimportant\nsuccess\nknowledge\nexperience\nfreedom";
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const addButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button primary"
    });
    addButton.addEventListener("click", () => this.addWords(textarea.value, this.bookSelect.value));
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      if (this.isProcessing) {
        this.cancelOperation();
      } else {
        this.close();
      }
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section" });
    progressSection.style.display = "none";
    const progressText = progressSection.createEl("p", {
      text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911...",
      cls: "progress-text"
    });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section" });
    resultSection.style.display = "none";
    textarea.addEventListener("keydown", (e) => {
      if (e.ctrlKey && e.key === "Enter") {
        this.addWords(textarea.value, this.bookSelect.value);
      }
    });
    textarea.focus();
  }
  async addWords(inputText, bookId) {
    var _a;
    if (this.isProcessing)
      return;
    const words = this.parseWords(inputText);
    if (words.length === 0) {
      new import_obsidian7.Notice("\uCD94\uAC00\uD560 \uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    this.isProcessing = true;
    this.cancellationTokenSource = new CancellationTokenSource();
    this.showProgress(words.length);
    this.updateCancelButton(true);
    const results = {
      success: [],
      failed: [],
      alreadyExists: []
    };
    try {
      await processBatchWithCancellation(
        words,
        async (word, index) => {
          const existingWord = this.plugin.databaseManager.getWord(word);
          if (existingWord) {
            results.alreadyExists.push(word);
            return;
          }
          try {
            const wordData = await this.wordService.getWordData(word);
            const vocabularyCard = {
              ...wordData,
              reviewCount: 0,
              difficulty: "good",
              lastReviewed: null,
              addedDate: (/* @__PURE__ */ new Date()).toISOString(),
              bookId
            };
            await this.plugin.databaseManager.addWord(vocabularyCard);
            results.success.push(word);
          } catch (error) {
            results.failed.push(word);
            console.error(`\uB2E8\uC5B4 "${word}" \uCD94\uAC00 \uC2E4\uD328:`, error);
          }
        },
        {
          batchSize: getConfigValue(CONFIG_PATHS.BATCH_DEFAULT_SIZE),
          delay: getConfigValue(CONFIG_PATHS.BATCH_DELAY),
          cancellationToken: this.cancellationTokenSource.token,
          onProgress: (current, total) => {
            this.updateProgress(current, total, `\uCC98\uB9AC \uC911... (${current}/${total})`);
          }
        }
      );
    } catch (error) {
      if (error instanceof CancellationError) {
        new import_obsidian7.Notice("\uC791\uC5C5\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
      } else {
        console.error("\uBC30\uCE58 \uCC98\uB9AC \uC911 \uC624\uB958:", error);
        new import_obsidian7.Notice("\uB2E8\uC5B4 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      }
    } finally {
      this.isProcessing = false;
      (_a = this.cancellationTokenSource) == null ? void 0 : _a.dispose();
      this.cancellationTokenSource = null;
      this.hideProgress();
      this.updateCancelButton(false);
      this.showResults(results);
    }
  }
  parseWords(inputText) {
    const sanitizedInput = sanitizeMarkdown(inputText);
    const rawWords = sanitizedInput.split("\n").map((word) => word.trim()).filter((word) => word.length > 0);
    const validation = validateBatch(rawWords, (word) => validateWord(word));
    if (validation.invalid.length > 0) {
      const invalidWords = validation.invalid.slice(0, 5).map((item) => item.item).join(", ");
      const moreCount = validation.invalid.length > 5 ? ` \uC678 ${validation.invalid.length - 5}\uAC1C` : "";
      new import_obsidian7.Notice(`\uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uB2E8\uC5B4\uAC00 \uC81C\uC678\uB418\uC5C8\uC2B5\uB2C8\uB2E4: ${invalidWords}${moreCount}`);
    }
    const validWords = validation.valid.map((word) => validateWord(word).sanitized).map((word) => word.toLowerCase()).filter((word, index, array) => array.indexOf(word) === index);
    return validWords;
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.style.display = "block";
    progressText.textContent = `\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911... (0/${totalWords})`;
  }
  updateProgress(current, total, message) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    const progressFill = progressSection.querySelector(".progress-fill");
    const percentage = current / total * 100;
    progressText.textContent = `${message} (${current}/${total})`;
    progressFill.style.width = `${percentage}%`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    progressSection.style.display = "none";
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.style.display = "block";
    resultSection.empty();
    const totalProcessed = results.success.length + results.failed.length + results.alreadyExists.length;
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 5) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.alreadyExists.length > 0) {
      const existsEl = summaryEl.createEl("div", { cls: "result-item warning" });
      existsEl.createEl("span", {
        text: `\u26A0\uFE0F \uC774\uBBF8 \uC874\uC7AC: ${results.alreadyExists.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.alreadyExists.length <= 5) {
        existsEl.createEl("p", {
          text: results.alreadyExists.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 5) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", {
      text: "\uB2EB\uAE30",
      cls: "close-button"
    });
    closeButton.addEventListener("click", () => this.close());
    const addMoreButton = buttonSection.createEl("button", {
      text: "\uB354 \uCD94\uAC00\uD558\uAE30",
      cls: "add-more-button"
    });
    addMoreButton.addEventListener("click", () => {
      resultSection.style.display = "none";
      const textarea = this.contentEl.querySelector(".words-textarea");
      textarea.value = "";
      textarea.focus();
    });
    if (results.success.length > 0) {
      new import_obsidian7.Notice(`${results.success.length}\uAC1C\uC758 \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
    }
  }
  cancelOperation() {
    if (this.cancellationTokenSource) {
      this.cancellationTokenSource.cancel();
      new import_obsidian7.Notice("\uC791\uC5C5 \uCDE8\uC18C \uC911...");
    }
  }
  updateCancelButton(isProcessing) {
    const cancelButton = this.contentEl.querySelector(".cancel-button");
    if (cancelButton) {
      cancelButton.textContent = isProcessing ? "\uC791\uC5C5 \uCDE8\uC18C" : "\uCDE8\uC18C";
      cancelButton.classList.toggle("danger", isProcessing);
    }
  }
  onClose() {
    var _a;
    if (this.isProcessing && this.cancellationTokenSource) {
      this.cancellationTokenSource.cancel();
    }
    this.isProcessing = false;
    (_a = this.cancellationTokenSource) == null ? void 0 : _a.dispose();
    this.cancellationTokenSource = null;
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  openAddBookModal() {
    new AddBookModal(this.app, this.plugin).open();
  }
  async handleBookCreated(event) {
    await this.updateBookSelect();
  }
  async updateBookSelect() {
    await this.plugin.databaseManager.loadAllBooks();
    const books = this.plugin.databaseManager.getAllBooks();
    this.bookSelect.innerHTML = "";
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      this.bookSelect.appendChild(option);
    });
  }
};

// src/shared/container/DIContainer.ts
var DIContainer = class {
  constructor() {
    this.services = /* @__PURE__ */ new Map();
    this.instances = /* @__PURE__ */ new Map();
  }
  register(name, implementation, options = {}) {
    var _a, _b;
    this.services.set(name, {
      implementation,
      singleton: (_a = options.singleton) != null ? _a : true,
      dependencies: (_b = options.dependencies) != null ? _b : []
    });
  }
  resolve(name) {
    const service = this.services.get(name);
    if (!service) {
      throw new Error(`Service '${name}' not registered`);
    }
    if (service.singleton && this.instances.has(name)) {
      return this.instances.get(name);
    }
    const dependencies = service.dependencies.map((dep) => this.resolve(dep));
    let instance;
    if (this.isConstructor(service.implementation)) {
      instance = new service.implementation(...dependencies);
    } else {
      instance = service.implementation(...dependencies);
    }
    if (service.singleton) {
      this.instances.set(name, instance);
    }
    return instance;
  }
  registerInstance(name, instance) {
    this.instances.set(name, instance);
    this.services.set(name, {
      implementation: () => instance,
      singleton: true,
      dependencies: []
    });
  }
  has(name) {
    return this.services.has(name);
  }
  clear() {
    this.services.clear();
    this.instances.clear();
  }
  isConstructor(implementation) {
    return implementation.prototype && implementation.prototype.constructor === implementation;
  }
};
var container = new DIContainer();

// src/core/entities/Vocabulary.ts
var VocabularyCard = class _VocabularyCard {
  constructor(word, pronunciation, meanings, similarWords, examples, reviewCount, difficulty, lastReviewed, addedDate, bookId) {
    this.word = word;
    this.pronunciation = pronunciation;
    this.meanings = meanings;
    this.similarWords = similarWords;
    this.examples = examples;
    this.reviewCount = reviewCount;
    this.difficulty = difficulty;
    this.lastReviewed = lastReviewed;
    this.addedDate = addedDate;
    this.bookId = bookId;
  }
  // 팩토리 메서드: WordData로부터 VocabularyCard 생성
  static fromWordData(wordData, bookId) {
    return new _VocabularyCard(
      wordData.word,
      wordData.pronunciation,
      wordData.meanings,
      wordData.similarWords,
      wordData.examples,
      0,
      // 초기 복습 횟수
      "good",
      // 초기 난이도
      null,
      // 초기 복습 날짜
      (/* @__PURE__ */ new Date()).toISOString(),
      // 추가 날짜
      bookId
    );
  }
  // 비즈니스 로직: 복습 수행
  review(newDifficulty) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount + 1,
      newDifficulty,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어 정보 업데이트
  updateWordData(wordData) {
    var _a, _b, _c, _d;
    return new _VocabularyCard(
      this.word,
      (_a = wordData.pronunciation) != null ? _a : this.pronunciation,
      (_b = wordData.meanings) != null ? _b : this.meanings,
      (_c = wordData.similarWords) != null ? _c : this.similarWords,
      (_d = wordData.examples) != null ? _d : this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어장 이동
  moveToBook(newBookId) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      newBookId
    );
  }
  // 비즈니스 로직: 복습이 필요한지 확인
  needsReview(reviewInterval = 1) {
    if (!this.lastReviewed)
      return true;
    const lastReviewDate = new Date(this.lastReviewed);
    const now = /* @__PURE__ */ new Date();
    const daysDiff = Math.floor((now.getTime() - lastReviewDate.getTime()) / (1e3 * 60 * 60 * 24));
    const difficultyMultiplier = {
      "hard": 0.5,
      "good": 1,
      "easy": 2
    };
    const adjustedInterval = reviewInterval * difficultyMultiplier[this.difficulty];
    return daysDiff >= adjustedInterval;
  }
  // 비즈니스 로직: 학습 진행도 계산 (0-100)
  getProgressPercentage() {
    const maxReviews = 10;
    const progress = Math.min(this.reviewCount / maxReviews, 1) * 100;
    const difficultyBonus = {
      "easy": 20,
      "good": 10,
      "hard": 0
    };
    return Math.min(progress + difficultyBonus[this.difficulty], 100);
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      word: this.word,
      pronunciation: this.pronunciation,
      meanings: this.meanings,
      similarWords: this.similarWords,
      examples: this.examples,
      reviewCount: this.reviewCount,
      difficulty: this.difficulty,
      lastReviewed: this.lastReviewed,
      addedDate: this.addedDate,
      bookId: this.bookId
    };
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.word || this.word.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uAC00 \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
    }
    if (this.meanings.length === 0) {
      errors.push("\uB2E8\uC5B4\uC758 \uB73B\uC774 \uD558\uB098 \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (!this.bookId || this.bookId.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 ID\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  static create(data) {
    var _a;
    return new _VocabularyCard(
      data.word,
      data.pronunciation || "",
      [data.meaning],
      // meanings array
      [],
      // similarWords
      ((_a = data.examples) == null ? void 0 : _a.map((ex) => ({ english: ex, korean: "" }))) || [],
      // examples with Example type
      0,
      // reviewCount
      "good",
      // difficulty
      null,
      // lastReviewed
      (/* @__PURE__ */ new Date()).toISOString(),
      // addedDate
      data.bookId || "default"
    );
  }
};

// src/core/use-cases/AddWordUseCase.ts
var AddWordUseCase = class {
  constructor(vocabularyRepository, bookRepository, wordService) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
    this.wordService = wordService;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingWord = await this.vocabularyRepository.findByWord(word);
      if (existingWord) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC785\uB2C8\uB2E4."
        };
      }
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = (currentBook == null ? void 0 : currentBook.id) || "default";
      }
      const book = await this.bookRepository.findById(bookId);
      if (!book) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const wordData = await this.wordService.getWordData(word);
      const vocabularyCard = VocabularyCard.create({
        word: wordData.word,
        meaning: wordData.meaning,
        pronunciation: wordData.pronunciation || "",
        examples: wordData.examples || [],
        bookId
      });
      const validationErrors = vocabularyCard.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.vocabularyRepository.add(vocabularyCard);
      const event = {
        type: "WORD_ADDED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: vocabularyCard.word,
          bookId: vocabularyCard.bookId
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: vocabularyCard
      };
    } catch (error) {
      console.error("AddWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordAdded", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/entities/Book.ts
var Book = class _Book {
  constructor(id, name, description, createdAt, updatedAt, wordCount, isDefault) {
    this.id = id;
    this.name = name;
    this.description = description;
    this.createdAt = createdAt;
    this.updatedAt = updatedAt;
    this.wordCount = wordCount;
    this.isDefault = isDefault;
  }
  // 팩토리 메서드: 새 단어장 생성
  static create(name, description = "", isDefault = false) {
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const id = isDefault ? "default" : _Book.generateId();
    return new _Book(
      id,
      name,
      description,
      now,
      now,
      0,
      isDefault
    );
  }
  // 팩토리 메서드: 기본 단어장 생성
  static createDefault() {
    return _Book.create("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5", "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.", true);
  }
  // 비즈니스 로직: 단어장 정보 업데이트
  updateInfo(name, description) {
    return new _Book(
      this.id,
      name != null ? name : this.name,
      description != null ? description : this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 증가
  incrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount + 1,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 감소
  decrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, this.wordCount - 1),
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 재설정
  updateWordCount(count) {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, count),
      this.isDefault
    );
  }
  // 비즈니스 로직: 삭제 가능 여부 확인
  canBeDeleted() {
    return !this.isDefault;
  }
  // 비즈니스 로직: 단어장이 비어있는지 확인
  isEmpty() {
    return this.wordCount === 0;
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.name || this.name.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (this.name.trim().length > 100) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC740 100\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.description.length > 500) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC124\uBA85\uC740 500\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.wordCount < 0) {
      errors.push("\uB2E8\uC5B4 \uC218\uB294 0 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      id: this.id,
      name: this.name,
      description: this.description,
      createdAt: this.createdAt,
      updatedAt: this.updatedAt,
      wordCount: this.wordCount,
      isDefault: this.isDefault
    };
  }
  // 비즈니스 로직: 생성일로부터 경과 일수 계산
  getDaysFromCreation() {
    const createdDate = new Date(this.createdAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - createdDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // 비즈니스 로직: 마지막 업데이트로부터 경과 일수 계산
  getDaysFromLastUpdate() {
    const updatedDate = new Date(this.updatedAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - updatedDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // ID 생성 유틸리티
  static generateId() {
    return `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/core/use-cases/CreateBookUseCase.ts
var CreateBookUseCase = class {
  constructor(bookRepository) {
    this.bookRepository = bookRepository;
  }
  async execute(request) {
    try {
      if (!request.name || request.name.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const name = request.name.trim();
      const existingBooks = await this.bookRepository.findAll();
      const duplicateBook = existingBooks.find(
        (book2) => book2.name.toLowerCase() === name.toLowerCase()
      );
      if (duplicateBook) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4."
        };
      }
      const book = Book.create(
        name,
        request.description || ""
      );
      const validationErrors = book.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.bookRepository.add(book);
      const event = {
        type: "BOOK_CREATED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          bookId: book.id,
          name: book.name
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        book
      };
    } catch (error) {
      console.error("CreateBookUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("bookCreated", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/use-cases/GetWordsForReviewUseCase.ts
var GetWordsForReviewUseCase = class {
  constructor(vocabularyRepository, bookRepository) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
  }
  async execute(request = {}) {
    try {
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = currentBook == null ? void 0 : currentBook.id;
      }
      const allWords = await this.vocabularyRepository.findByBookId(bookId);
      if (allWords.length === 0) {
        return {
          success: true,
          words: [],
          totalCount: 0
        };
      }
      const reviewInterval = request.reviewInterval || 1;
      const wordsNeedingReview = allWords.filter(
        (word) => word.needsReview(reviewInterval)
      );
      wordsNeedingReview.sort((a, b) => {
        if (a.lastReviewed && b.lastReviewed) {
          const aDate = new Date(a.lastReviewed).getTime();
          const bDate = new Date(b.lastReviewed).getTime();
          if (aDate !== bDate)
            return aDate - bDate;
        } else if (a.lastReviewed && !b.lastReviewed) {
          return -1;
        } else if (!a.lastReviewed && b.lastReviewed) {
          return 1;
        }
        const difficultyOrder = { "hard": 3, "good": 2, "easy": 1 };
        const difficultyDiff = difficultyOrder[b.difficulty] - difficultyOrder[a.difficulty];
        if (difficultyDiff !== 0)
          return difficultyDiff;
        return a.reviewCount - b.reviewCount;
      });
      const limit = request.limit || 20;
      const limitedWords = wordsNeedingReview.slice(0, limit);
      return {
        success: true,
        words: limitedWords,
        totalCount: wordsNeedingReview.length
      };
    } catch (error) {
      console.error("GetWordsForReviewUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
};

// src/core/use-cases/ReviewWordUseCase.ts
var ReviewWordUseCase = class {
  constructor(vocabularyRepository) {
    this.vocabularyRepository = vocabularyRepository;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      if (!["easy", "good", "hard"].includes(request.difficulty)) {
        return {
          success: false,
          error: "\uC62C\uBC14\uB978 \uB09C\uC774\uB3C4\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingCard = await this.vocabularyRepository.findByWord(word);
      if (!existingCard) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const previousDifficulty = existingCard.difficulty;
      const reviewedCard = existingCard.review(request.difficulty);
      await this.vocabularyRepository.update(reviewedCard);
      const event = {
        type: "WORD_REVIEWED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: reviewedCard.word,
          difficulty: request.difficulty,
          previousDifficulty
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: reviewedCard
      };
    } catch (error) {
      console.error("ReviewWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordReviewed", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/infrastructure/obsidian/repositories/VocabularyRepositoryAdapter.ts
var VocabularyRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(card) {
    await this.databaseManager.addWord(card);
  }
  async save(card) {
    await this.databaseManager.addWord(card);
  }
  async findByWord(word) {
    return this.databaseManager.getWord(word);
  }
  async findAll() {
    return this.databaseManager.getAllWords();
  }
  async findByBookId(bookId) {
    return this.databaseManager.getWordsByBook(bookId);
  }
  async update(word, card) {
    await this.databaseManager.updateWord(word, card.difficulty);
  }
  async delete(word) {
    await this.databaseManager.removeWord(word);
  }
  async search(options) {
    const allWords = await this.findAll();
    const filteredWords = allWords.filter(
      (word) => {
        var _a;
        return word.word.toLowerCase().includes(((_a = options.query) == null ? void 0 : _a.toLowerCase()) || "");
      }
    );
    return {
      words: filteredWords,
      total: filteredWords.length,
      hasMore: false
    };
  }
  async searchByText(query) {
    const result = await this.search({ query });
    return result.words;
  }
  async findCardsForReview(bookId) {
    return this.databaseManager.getWordsForReview(bookId);
  }
  async findCardsByDifficulty(difficulty, bookId) {
    const words = bookId ? await this.findByBookId(bookId) : await this.findAll();
    return words.filter((word) => word.difficulty === difficulty);
  }
  async count() {
    const words = await this.findAll();
    return words.length;
  }
  async countByBookId(bookId) {
    const words = await this.findByBookId(bookId);
    return words.length;
  }
  async countByDifficulty(difficulty) {
    const words = await this.findCardsByDifficulty(difficulty);
    return words.length;
  }
  async saveMany(cards) {
    for (const card of cards) {
      await this.add(card);
    }
  }
  async deleteMany(words) {
    for (const word of words) {
      await this.delete(word);
    }
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
};

// src/infrastructure/obsidian/repositories/BookRepositoryAdapter.ts
var BookRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async save(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async findById(id) {
    const bookData = this.databaseManager.getBook(id);
    if (!bookData)
      return null;
    return new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    );
  }
  async findAll(options) {
    const booksData = this.databaseManager.getAllBooks();
    let books = booksData.map((bookData) => new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    ));
    if (options) {
      if (options.includeEmpty === false) {
        books = books.filter((book) => !book.isEmpty());
      }
      if (options.sortBy) {
        books.sort((a, b) => {
          const aValue = a[options.sortBy];
          const bValue = b[options.sortBy];
          if (typeof aValue === "string" && typeof bValue === "string") {
            return options.sortOrder === "desc" ? bValue.localeCompare(aValue) : aValue.localeCompare(bValue);
          }
          if (typeof aValue === "number" && typeof bValue === "number") {
            return options.sortOrder === "desc" ? bValue - aValue : aValue - bValue;
          }
          return 0;
        });
      }
      if (options.offset || options.limit) {
        const start = options.offset || 0;
        const end = options.limit ? start + options.limit : void 0;
        books = books.slice(start, end);
      }
    }
    return books;
  }
  async update(id, book) {
    await this.databaseManager.updateBook(id, book.toPlainObject());
  }
  async delete(id) {
    await this.databaseManager.deleteBook(id);
  }
  async findDefault() {
    return this.findById("default");
  }
  async findByName(name) {
    const books = await this.findAll();
    return books.find((book) => book.name === name) || null;
  }
  async exists(id) {
    const book = await this.findById(id);
    return book !== null;
  }
  async count() {
    const books = await this.findAll();
    return books.length;
  }
  async getStatistics(bookId) {
    const book = await this.findById(bookId);
    if (!book)
      return null;
    const words = this.databaseManager.getWordsByBook(bookId);
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const totalReviews = words.reduce((sum, word) => sum + word.reviewCount, 0);
    const averageReviewCount = words.length > 0 ? totalReviews / words.length : 0;
    const lastActivityDate = words.length > 0 ? Math.max(...words.map((w) => new Date(w.lastReviewed || w.addedDate).getTime())) : null;
    const completionPercentage = words.length > 0 ? wordsByDifficulty.easy / words.length * 100 : 0;
    return {
      book,
      totalWords: words.length,
      wordsByDifficulty,
      averageReviewCount,
      lastActivityDate: lastActivityDate ? new Date(lastActivityDate).toISOString() : null,
      completionPercentage
    };
  }
  async getAllStatistics() {
    const books = await this.findAll();
    const statistics = [];
    for (const book of books) {
      const stat = await this.getStatistics(book.id);
      if (stat) {
        statistics.push(stat);
      }
    }
    return statistics;
  }
  async getCurrentBook() {
    const currentBook = this.databaseManager.getCurrentBook();
    if (!currentBook)
      return null;
    return new Book(
      currentBook.id,
      currentBook.name,
      currentBook.description,
      currentBook.createdAt,
      currentBook.updatedAt,
      currentBook.wordCount,
      currentBook.isDefault
    );
  }
  async setCurrentBook(bookId) {
    await this.databaseManager.setCurrentBook(bookId);
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  async validateBookName(name, excludeId) {
    const books = await this.findAll();
    return !books.some(
      (book) => book.name === name && (!excludeId || book.id !== excludeId)
    );
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
  onCurrentBookChanged(callback) {
  }
  offCurrentBookChanged(callback) {
  }
};

// src/infrastructure/storage/VocabularyDatabase.ts
var import_obsidian8 = require("obsidian");
var VocabularyDatabaseManager = class {
  constructor(app, saveCallback, folderPath) {
    this.books = /* @__PURE__ */ new Map();
    this.words = /* @__PURE__ */ new Map();
    this.settings = {
      dailyGoal: 10,
      reviewInterval: 1,
      currentBookId: "default"
    };
    this.statistics = {
      totalReviews: 0,
      streakDays: 0,
      lastStudyDate: null
    };
    this.vocabularyFolderPath = "Vocabulary";
    this.app = app;
    this.saveCallback = saveCallback;
    if (folderPath) {
      this.vocabularyFolderPath = folderPath;
    }
    this.initializeVocabularyFolder();
    this.initializeDefaultBook();
  }
  // 단어장 폴더 초기화
  async initializeVocabularyFolder() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
      if (folder instanceof import_obsidian8.TFolder) {
        return;
      }
      await this.app.vault.createFolder(this.vocabularyFolderPath);
    } catch (error) {
      if (error instanceof Error) {
        const errorMessage = error.message.toLowerCase();
        if (errorMessage.includes("already exists") || errorMessage.includes("folder already exists") || errorMessage.includes("already present")) {
        } else {
          console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC2E4\uD328:", error);
        }
      } else {
        console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC911 \uC54C \uC218 \uC5C6\uB294 \uC624\uB958 \uBC1C\uC0DD:", error);
      }
    }
  }
  // 기본 book 초기화
  async initializeDefaultBook() {
    if (!this.books.has("default")) {
      const defaultBook = {
        id: "default",
        name: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5",
        description: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.",
        createdAt: (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: 0,
        isDefault: true
      };
      this.books.set("default", defaultBook);
      await this.saveBookToFile(defaultBook);
    }
  }
  // Book을 MD 파일로 저장
  async saveBookToFile(book) {
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian8.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const bookWords = Array.from(this.words.values()).filter((word) => word.bookId === book.id).sort((a, b) => a.word.localeCompare(b.word));
    const frontmatter = [
      "---",
      `bookId: ${book.id}`,
      `name: "${book.name}"`,
      `description: "${book.description}"`,
      `createdAt: ${book.createdAt}`,
      `updatedAt: ${book.updatedAt}`,
      `wordCount: ${bookWords.length}`,
      `isDefault: ${book.isDefault}`,
      "---",
      ""
    ].join("\n");
    let content = frontmatter;
    content += `# ${book.name}

`;
    content += `${book.description}

`;
    content += `## \uB2E8\uC5B4 \uBAA9\uB85D (${bookWords.length}\uAC1C)

`;
    for (const word of bookWords) {
      content += `### ${word.word}

`;
      if (word.pronunciation) {
        content += `**\uBC1C\uC74C:** ${word.pronunciation}

`;
      }
      content += `**\uB73B:**
`;
      for (const meaning of word.meanings) {
        content += `- ${meaning}
`;
      }
      content += "\n";
      if (word.similarWords.length > 0) {
        content += `**\uC720\uC0AC\uD55C \uB2E8\uC5B4:** ${word.similarWords.join(", ")}

`;
      }
      if (word.examples.length > 0) {
        content += `**\uC608\uBB38:**
`;
        for (const example of word.examples) {
          content += `- ${example.english}
`;
          content += `  - ${example.korean}
`;
        }
        content += "\n";
      }
      content += `**\uBCF5\uC2B5 \uC815\uBCF4:**
`;
      content += `- \uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}
`;
      content += `- \uB09C\uC774\uB3C4: ${word.difficulty}
`;
      content += `- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${word.lastReviewed || "\uC5C6\uC74C"}
`;
      content += `- \uCD94\uAC00\uC77C: ${word.addedDate}
`;
      if (word.scheduleInfo) {
        content += `
**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**
`;
        content += `- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ${word.scheduleInfo.dueDate}
`;
        content += `- \uBCF5\uC2B5 \uAC04\uACA9: ${word.scheduleInfo.interval}\uC77C
`;
        content += `- \uC6A9\uC774\uB3C4: ${word.scheduleInfo.ease}
`;
        content += `- \uC2E4\uD328 \uD69F\uC218: ${word.scheduleInfo.lapseCount}
`;
      }
      content += "\n---\n\n";
    }
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian8.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        try {
          await this.app.vault.create(filePath, content);
        } catch (error) {
          if (error instanceof Error && error.message.includes("already exists")) {
            const file = this.app.vault.getAbstractFileByPath(filePath);
            if (file instanceof import_obsidian8.TFile) {
              await this.app.vault.modify(file, content);
            } else {
              console.error("\uD30C\uC77C\uC774 \uC774\uBBF8 \uC874\uC7AC\uD558\uC9C0\uB9CC TFile\uC774 \uC544\uB2D8:", filePath);
            }
          } else {
            console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
          }
        }
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  // MD 파일에서 Book과 단어들 로드
  async loadBookFromFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const { frontmatter, body } = this.parseMDFile(content);
      if (!frontmatter.bookId)
        return;
      const book = {
        id: frontmatter.bookId,
        name: frontmatter.name || file.basename,
        description: frontmatter.description || "",
        createdAt: frontmatter.createdAt || (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: frontmatter.updatedAt || (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: frontmatter.wordCount || 0,
        isDefault: frontmatter.isDefault || false
      };
      this.books.set(book.id, book);
      const words = this.parseWordsFromMarkdown(body, book.id);
      for (const word of words) {
        this.words.set(word.word.toLowerCase(), word);
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:", error);
    }
  }
  // MD 파일 파싱 (frontmatter와 body 분리)
  parseMDFile(content) {
    const frontmatterRegex = /^---\n([\s\S]*?)\n---\n([\s\S]*)$/;
    const match = content.match(frontmatterRegex);
    if (!match) {
      return { frontmatter: {}, body: content };
    }
    const frontmatterText = match[1];
    const body = match[2];
    const frontmatter = {};
    const lines = frontmatterText.split("\n");
    for (const line of lines) {
      const colonIndex = line.indexOf(":");
      if (colonIndex > 0) {
        const key = line.substring(0, colonIndex).trim();
        let value = line.substring(colonIndex + 1).trim();
        if (value.startsWith('"') && value.endsWith('"')) {
          value = value.slice(1, -1);
        }
        if (value === "true")
          frontmatter[key] = true;
        else if (value === "false")
          frontmatter[key] = false;
        else if (!isNaN(Number(value)))
          frontmatter[key] = Number(value);
        else
          frontmatter[key] = value;
      }
    }
    return { frontmatter, body };
  }
  // 마크다운에서 단어들 파싱
  parseWordsFromMarkdown(markdown, bookId) {
    const words = [];
    const wordSections = markdown.split("---").filter((section) => section.trim());
    for (const section of wordSections) {
      const word = this.parseWordSection(section, bookId);
      if (word) {
        words.push(word);
      }
    }
    return words;
  }
  // 개별 단어 섹션 파싱
  parseWordSection(section, bookId) {
    const lines = section.split("\n").filter((line) => line.trim());
    if (lines.length === 0)
      return null;
    let word = "";
    let pronunciation = "";
    const meanings = [];
    const similarWords = [];
    const examples = [];
    let reviewCount = 0;
    let difficulty = "good";
    let lastReviewed = null;
    let addedDate = (/* @__PURE__ */ new Date()).toISOString();
    let scheduleInfo = void 0;
    let currentSection = "";
    let currentExample = {};
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const trimmedLine = line.trim();
      if (trimmedLine.startsWith("### ")) {
        word = trimmedLine.substring(4).trim();
        continue;
      }
      if (trimmedLine.startsWith("**\uBC1C\uC74C:**")) {
        pronunciation = trimmedLine.substring(7).trim();
        currentSection = "pronunciation";
      } else if (trimmedLine.startsWith("**\uB73B:**")) {
        currentSection = "meanings";
      } else if (trimmedLine.startsWith("**\uC720\uC0AC\uD55C \uB2E8\uC5B4:**")) {
        const similarWordsText = trimmedLine.substring(12).trim();
        similarWords.push(...similarWordsText.split(",").map((w) => w.trim()));
        currentSection = "similar";
      } else if (trimmedLine.startsWith("**\uC608\uBB38:**")) {
        currentSection = "examples";
      } else if (trimmedLine.startsWith("**\uBCF5\uC2B5 \uC815\uBCF4:**")) {
        currentSection = "review";
      } else if (trimmedLine.startsWith("**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**")) {
        currentSection = "spaced-repetition";
      } else if (currentSection === "meanings" && trimmedLine.startsWith("- ")) {
        meanings.push(trimmedLine.substring(2).trim());
      } else if (currentSection === "examples") {
        if (line.startsWith("- ") && !line.startsWith("  - ")) {
          if (currentExample.english && currentExample.korean) {
            examples.push({
              english: currentExample.english,
              korean: currentExample.korean
            });
          }
          currentExample = { english: line.substring(2).trim() };
        } else if (line.startsWith("  - ")) {
          currentExample.korean = line.substring(4).trim();
        }
      } else if (currentSection === "review") {
        if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uD69F\uC218: ")) {
          reviewCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        } else if (trimmedLine.startsWith("- \uB09C\uC774\uB3C4: ")) {
          const diff = trimmedLine.substring(7).trim();
          if (diff === "easy" || diff === "good" || diff === "hard") {
            difficulty = diff;
          }
        } else if (trimmedLine.startsWith("- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ")) {
          const lastRev = trimmedLine.substring(11).trim();
          lastReviewed = lastRev === "\uC5C6\uC74C" ? null : lastRev;
        } else if (trimmedLine.startsWith("- \uCD94\uAC00\uC77C: ")) {
          addedDate = trimmedLine.substring(7).trim();
        }
      } else if (currentSection === "spaced-repetition") {
        if (!scheduleInfo) {
          scheduleInfo = {};
        }
        if (trimmedLine.startsWith("- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ")) {
          scheduleInfo.dueDate = trimmedLine.substring(10).trim();
        } else if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uAC04\uACA9: ")) {
          const intervalText = trimmedLine.substring(8).trim();
          scheduleInfo.interval = parseInt(intervalText.replace("\uC77C", "")) || 1;
        } else if (trimmedLine.startsWith("- \uC6A9\uC774\uB3C4: ")) {
          scheduleInfo.ease = parseInt(trimmedLine.substring(7).trim()) || 250;
        } else if (trimmedLine.startsWith("- \uC2E4\uD328 \uD69F\uC218: ")) {
          scheduleInfo.lapseCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        }
      }
    }
    if (currentExample.english && currentExample.korean) {
      examples.push({
        english: currentExample.english,
        korean: currentExample.korean
      });
    }
    if (!word)
      return null;
    return {
      word: word.toLowerCase(),
      pronunciation,
      meanings,
      similarWords,
      examples,
      reviewCount,
      difficulty,
      lastReviewed,
      addedDate,
      bookId,
      scheduleInfo
    };
  }
  // 모든 단어장 파일 로드
  async loadAllBooks() {
    this.books.clear();
    this.words.clear();
    await this.initializeVocabularyFolder();
    await this.initializeDefaultBook();
    const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
    if (folder instanceof import_obsidian8.TFolder) {
      for (const file of folder.children) {
        if (file instanceof import_obsidian8.TFile && file.extension === "md") {
          await this.loadBookFromFile(file);
        }
      }
    }
    await this.loadSettings();
  }
  // 설정 파일 저장/로드
  async saveSettings() {
    const settingsPath = (0, import_obsidian8.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    const data = {
      settings: this.settings,
      statistics: this.statistics
    };
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(settingsPath);
      const content = JSON.stringify(data, null, 2);
      if (existingFile instanceof import_obsidian8.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        await this.app.vault.create(settingsPath, content);
      }
    } catch (error) {
      console.error("\uC124\uC815 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  async loadSettings() {
    const settingsPath = (0, import_obsidian8.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    try {
      const file = this.app.vault.getAbstractFileByPath(settingsPath);
      if (file instanceof import_obsidian8.TFile) {
        const content = await this.app.vault.read(file);
        const data = JSON.parse(content);
        if (data.settings) {
          this.settings = { ...this.settings, ...data.settings };
        }
        if (data.statistics) {
          this.statistics = { ...this.statistics, ...data.statistics };
        }
      }
    } catch (error) {
      console.warn("\uC124\uC815 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:", error);
    }
  }
  // Book 관리 메서드들
  async createBook(name, description = "") {
    const id = `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    const book = {
      id,
      name,
      description,
      createdAt: (/* @__PURE__ */ new Date()).toISOString(),
      updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
      wordCount: 0,
      isDefault: false
    };
    this.books.set(id, book);
    await this.saveBookToFile(book);
    this.saveCallback();
    return book;
  }
  async updateBook(bookId, updates) {
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedBook = {
      ...book,
      ...updates,
      updatedAt: (/* @__PURE__ */ new Date()).toISOString()
    };
    this.books.set(bookId, updatedBook);
    await this.saveBookToFile(updatedBook);
    this.saveCallback();
  }
  async deleteBook(bookId) {
    if (bookId === "default") {
      throw new Error("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC740 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const wordsToDelete = Array.from(this.words.values()).filter((word) => word.bookId === bookId).map((word) => word.word);
    for (const word of wordsToDelete) {
      this.words.delete(word.toLowerCase());
    }
    this.books.delete(bookId);
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian8.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian8.TFile) {
      await this.app.vault.delete(file);
    }
    if (this.settings.currentBookId === bookId) {
      this.settings.currentBookId = "default";
      await this.saveSettings();
    }
    this.saveCallback();
  }
  getAllBooks() {
    return Array.from(this.books.values()).sort((a, b) => {
      if (a.isDefault)
        return -1;
      if (b.isDefault)
        return 1;
      return a.name.localeCompare(b.name);
    });
  }
  getBook(bookId) {
    return this.books.get(bookId);
  }
  getCurrentBook() {
    return this.books.get(this.settings.currentBookId);
  }
  async setCurrentBook(bookId) {
    if (!this.books.has(bookId)) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    this.settings.currentBookId = bookId;
    await this.saveSettings();
    this.saveCallback();
  }
  // Book별 단어 수 업데이트
  updateBookWordCount(bookId) {
    const wordCount = Array.from(this.words.values()).filter((word) => word.bookId === bookId).length;
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount = wordCount;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
    }
  }
  // 단어 추가
  async addWord(wordData) {
    const word = wordData.word.toLowerCase();
    if (this.words.has(word)) {
      throw new Error(`\uB2E8\uC5B4 "${wordData.word}"\uB294 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4.`);
    }
    const newWord = {
      ...wordData,
      word: wordData.word.toLowerCase(),
      reviewCount: 0,
      difficulty: "good",
      lastReviewed: null,
      addedDate: (/* @__PURE__ */ new Date()).toISOString(),
      bookId: wordData.bookId || this.settings.currentBookId
    };
    this.words.set(word, newWord);
    const book = this.books.get(newWord.bookId);
    if (book) {
      book.wordCount++;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 삭제
  async removeWord(word) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const bookId = wordData.bookId;
    this.words.delete(wordKey);
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount--;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과)
  async updateWord(word, difficulty) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과 + 스페이스드 리피티션 정보)
  async updateWordWithSchedule(word, difficulty, scheduleInfo) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    if (scheduleInfo) {
      wordData.scheduleInfo = scheduleInfo;
    }
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 전체 데이터 업데이트 (LLM API로 가져온 정보로 덮어쓰기)
  async updateWordData(word, updatedWordData) {
    const wordKey = word.toLowerCase();
    const existingWord = this.words.get(wordKey);
    if (!existingWord) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedWord = {
      ...updatedWordData,
      word: wordKey,
      reviewCount: existingWord.reviewCount,
      difficulty: existingWord.difficulty,
      lastReviewed: existingWord.lastReviewed,
      addedDate: existingWord.addedDate,
      bookId: existingWord.bookId
    };
    this.words.set(wordKey, updatedWord);
    const book = this.books.get(updatedWord.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 조회
  getWord(word) {
    return this.words.get(word.toLowerCase());
  }
  // 현재 book의 모든 단어 조회
  getAllWords() {
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 특정 book의 모든 단어 조회
  getWordsByBook(bookId) {
    return Array.from(this.words.values()).filter((word) => word.bookId === bookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 복습 대상 단어 조회 (현재 book)
  getWordsForReview() {
    const now = /* @__PURE__ */ new Date();
    const reviewIntervalMs = this.settings.reviewInterval * 24 * 60 * 60 * 1e3;
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return true;
      const lastReview = new Date(word.lastReviewed);
      const timeSinceLastReview = now.getTime() - lastReview.getTime();
      return timeSinceLastReview >= reviewIntervalMs;
    });
  }
  // 단어 검색 (현재 book)
  searchWords(query) {
    const lowerQuery = query.toLowerCase();
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter(
      (word) => word.word.includes(lowerQuery) || word.meanings.some((meaning) => meaning.toLowerCase().includes(lowerQuery))
    );
  }
  // 통계 조회 (현재 book)
  getStatistics() {
    const words = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId);
    const totalWords = words.length;
    const totalReviews = this.statistics.totalReviews;
    const averageDifficulty = words.length > 0 ? words.reduce((sum, word) => {
      const difficultyValue = word.difficulty === "easy" ? 1 : word.difficulty === "good" ? 2 : 3;
      return sum + difficultyValue;
    }, 0) / words.length : 0;
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const recentActivity = this.calculateRecentActivity();
    return {
      totalWords,
      totalReviews,
      streakDays: this.statistics.streakDays,
      averageDifficulty,
      wordsByDifficulty,
      recentActivity
    };
  }
  // 일일 목표 진행률 조회 (현재 book)
  getDailyGoalProgress() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const todayWords = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return false;
      return new Date(word.lastReviewed).toDateString() === today;
    }).length;
    const goal = this.settings.dailyGoal;
    const percentage = goal > 0 ? Math.min(todayWords / goal * 100, 100) : 0;
    return {
      current: todayWords,
      goal,
      percentage
    };
  }
  // 설정 업데이트
  async updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
    await this.saveSettings();
    this.saveCallback();
  }
  // 데이터 저장용 형식으로 변환 (호환성 유지)
  getDataForSave() {
    return {
      books: Array.from(this.books.values()),
      words: Array.from(this.words.values()),
      settings: this.settings,
      statistics: this.statistics
    };
  }
  // 저장된 데이터에서 로드 (호환성 유지)
  async loadFromData(data) {
    await this.loadAllBooks();
  }
  // 연속 학습일 업데이트
  updateStreak() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const lastStudyDate = this.statistics.lastStudyDate ? new Date(this.statistics.lastStudyDate).toDateString() : null;
    if (lastStudyDate === today) {
      return;
    }
    if (!lastStudyDate) {
      this.statistics.streakDays = 1;
    } else {
      const yesterday = /* @__PURE__ */ new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      const yesterdayStr = yesterday.toDateString();
      if (lastStudyDate === yesterdayStr) {
        this.statistics.streakDays++;
      } else {
        this.statistics.streakDays = 1;
      }
    }
    this.statistics.lastStudyDate = (/* @__PURE__ */ new Date()).toISOString();
  }
  // 최근 7일 활동 계산
  calculateRecentActivity() {
    const activity = [];
    const today = /* @__PURE__ */ new Date();
    for (let i = 6; i >= 0; i--) {
      const date = new Date(today);
      date.setDate(date.getDate() - i);
      const dateStr = date.toDateString();
      const wordsStudied = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        return new Date(word.lastReviewed).toDateString() === dateStr;
      }).length;
      const reviewsCompleted = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        const reviewDate = new Date(word.lastReviewed);
        return reviewDate.toDateString() === dateStr;
      }).length;
      activity.push({
        date: date.toISOString().split("T")[0],
        wordsStudied,
        reviewsCompleted
      });
    }
    return activity;
  }
  // 단어장 폴더 경로 업데이트
  updateVocabularyFolderPath(newPath) {
    this.vocabularyFolderPath = newPath;
    this.initializeVocabularyFolder();
  }
};

// src/infrastructure/llm/LLMServiceAdapter.ts
var LLMServiceAdapter = class {
  constructor(settings) {
    this.llmService = new LLMService(settings);
  }
  async getWordData(request) {
    try {
      const wordInfo = await this.llmService.getWordInfo(request.word);
      return {
        success: true,
        data: {
          word: wordInfo.word,
          meaning: wordInfo.meanings,
          pronunciation: wordInfo.pronunciation,
          examples: wordInfo.examples,
          similarWords: wordInfo.similarWords
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  async testConnection() {
    return await this.llmService.testConnection();
  }
  updateSettings(settings) {
    this.llmService = new LLMService(settings);
  }
};

// src/infrastructure/external/WordServiceAdapter.ts
var WordServiceAdapter = class {
  constructor(settings) {
    this.wordService = new WordService(settings);
  }
  async getWordData(request) {
    try {
      const wordData = await this.wordService.getWordData(request.word);
      return {
        success: true,
        data: {
          word: wordData.word,
          meaning: wordData.meaning,
          pronunciation: wordData.pronunciation,
          examples: wordData.examples || [],
          similarWords: wordData.similarWords || []
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  updateSettings(settings) {
    this.wordService = new WordService(settings);
  }
};

// src/core/ports/services/ITTSServiceAdapter.ts
var TTSServiceAdapter = class {
  constructor(settings) {
    this.ttsService = TTSServiceFactory.createTTSService(settings);
  }
  async speakText(text) {
    await this.ttsService.speakText(text);
  }
  async speakWord(word) {
    await this.ttsService.speakWord(word);
  }
  async speakExample(example) {
    await this.ttsService.speakExample(example);
  }
  stopSpeaking() {
    this.ttsService.stopSpeaking();
  }
  updateSettings(settings) {
    this.ttsService.destroy();
    this.ttsService = TTSServiceFactory.createTTSService(settings);
  }
  isEnabled() {
    return true;
  }
  getAvailableVoices() {
    const voices = this.ttsService.getAvailableVoices();
    return [];
  }
  async testConnection() {
    return await this.ttsService.testConnection();
  }
  isPaused() {
    return this.ttsService.isPaused();
  }
  resume() {
    this.ttsService.resume();
  }
  pause() {
    this.ttsService.pause();
  }
  destroy() {
    this.ttsService.destroy();
  }
};

// src/shared/container/ServiceRegistry.ts
var ServiceRegistry = class {
  static registerServices(container2, app, settings) {
    container2.registerInstance("app", app);
    container2.registerInstance("settings", settings);
    container2.register("databaseManager", (app2) => {
      return new VocabularyDatabaseManager(
        app2,
        () => {
        },
        // saveCallback - DI에서는 빈 함수로 처리
        settings.vocabularyFolderPath
      );
    }, {
      dependencies: ["app"],
      singleton: true
    });
    container2.register("vocabularyRepository", VocabularyRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("bookRepository", BookRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("wordService", WordServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("llmService", LLMServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("ttsService", TTSServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("addWordUseCase", AddWordUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository", "wordService"]
    });
    container2.register("createBookUseCase", CreateBookUseCase, {
      dependencies: ["bookRepository"]
    });
    container2.register("getWordsForReviewUseCase", GetWordsForReviewUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository"]
    });
    container2.register("reviewWordUseCase", ReviewWordUseCase, {
      dependencies: ["vocabularyRepository"]
    });
  }
  static updateSettings(container2, settings) {
    container2.registerInstance("settings", settings);
    if (container2.has("ttsService")) {
      const ttsService = container2.resolve("ttsService");
      ttsService.updateSettings(settings);
    }
    if (container2.has("llmService")) {
      const llmService = container2.resolve("llmService");
      llmService.updateSettings(settings);
    }
    if (container2.has("wordService")) {
      const wordService = container2.resolve("wordService");
      wordService.updateSettings(settings);
    }
  }
};

// src/shared/ErrorBoundary.ts
var import_obsidian9 = require("obsidian");
var ErrorBoundary = class _ErrorBoundary {
  constructor() {
    this.errorHandlers = /* @__PURE__ */ new Map();
    this.isInitialized = false;
  }
  static getInstance() {
    if (!_ErrorBoundary.instance) {
      _ErrorBoundary.instance = new _ErrorBoundary();
    }
    return _ErrorBoundary.instance;
  }
  // 전역 에러 핸들러 초기화
  initialize() {
    if (this.isInitialized)
      return;
    window.addEventListener("error", (event) => {
      var _a;
      this.handleError({
        error: event.error || new Error(event.message),
        context: "Global Error",
        timestamp: Date.now(),
        stackTrace: (_a = event.error) == null ? void 0 : _a.stack
      });
    });
    window.addEventListener("unhandledrejection", (event) => {
      var _a;
      this.handleError({
        error: event.reason instanceof Error ? event.reason : new Error(String(event.reason)),
        context: "Unhandled Promise Rejection",
        timestamp: Date.now(),
        stackTrace: (_a = event.reason) == null ? void 0 : _a.stack
      });
    });
    this.isInitialized = true;
  }
  // 에러 핸들러 등록
  registerHandler(context, handler) {
    this.errorHandlers.set(context, handler);
  }
  // 에러 핸들러 제거
  unregisterHandler(context) {
    this.errorHandlers.delete(context);
  }
  // 에러 처리
  handleError(errorInfo) {
    console.error("Error caught by ErrorBoundary:", errorInfo);
    const userMessage = this.getUserFriendlyMessage(errorInfo.error);
    new import_obsidian9.Notice(userMessage, 0);
    this.errorHandlers.forEach((handler, context) => {
      try {
        handler(errorInfo);
      } catch (handlerError) {
        console.error(`Error in handler for context ${context}:`, handlerError);
      }
    });
  }
  // 안전한 함수 실행 래퍼
  async safeExecute(fn, context, fallback) {
    try {
      return await fn();
    } catch (error) {
      this.handleError({
        error: error instanceof Error ? error : new Error(String(error)),
        context,
        timestamp: Date.now(),
        stackTrace: error instanceof Error ? error.stack : void 0
      });
      return fallback;
    }
  }
  // 동기 함수용 안전한 실행
  safeExecuteSync(fn, context, fallback) {
    try {
      return fn();
    } catch (error) {
      this.handleError({
        error: error instanceof Error ? error : new Error(String(error)),
        context,
        timestamp: Date.now(),
        stackTrace: error instanceof Error ? error.stack : void 0
      });
      return fallback;
    }
  }
  // 사용자 친화적인 에러 메시지 생성
  getUserFriendlyMessage(error) {
    const errorType = error.name;
    const errorMessage = error.message;
    const friendlyMessages = {
      "NetworkError": "\uB124\uD2B8\uC6CC\uD06C \uC5F0\uACB0\uC5D0 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.",
      "TypeError": "\uB370\uC774\uD130 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
      "ReferenceError": "\uD544\uC694\uD55C \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",
      "SyntaxError": "\uB370\uC774\uD130 \uD615\uC2DD\uC5D0 \uC624\uB958\uAC00 \uC788\uC2B5\uB2C8\uB2E4.",
      "QuotaExceededError": "\uC800\uC7A5 \uACF5\uAC04\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4.",
      "SecurityError": "\uBCF4\uC548 \uC815\uCC45\uC73C\uB85C \uC778\uD574 \uC791\uC5C5\uC744 \uC218\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
    };
    if (errorMessage.includes("API") || errorMessage.includes("fetch")) {
      return "API \uC11C\uBE44\uC2A4\uC5D0 \uC77C\uC2DC\uC801\uC778 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
    }
    if (errorMessage.includes("file") || errorMessage.includes("File")) {
      return "\uD30C\uC77C \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uD30C\uC77C\uC774 \uC874\uC7AC\uD558\uB294\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
    }
    if (errorMessage.includes("encrypt") || errorMessage.includes("decrypt")) {
      return "API \uD0A4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC744 \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
    }
    return friendlyMessages[errorType] || `\uC608\uC0C1\uCE58 \uBABB\uD55C \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${errorMessage}`;
  }
  // 에러 복구 시도
  async attemptRecovery(error, context) {
    if (error.message.includes("fetch") || error.message.includes("network")) {
      try {
        await fetch("https://www.google.com/favicon.ico", {
          method: "HEAD",
          mode: "no-cors"
        });
        return true;
      } catch (e) {
        return false;
      }
    }
    if (error.name === "QuotaExceededError") {
      try {
        localStorage.removeItem("temp-data");
        return true;
      } catch (e) {
        return false;
      }
    }
    return false;
  }
  // 정리
  cleanup() {
    this.errorHandlers.clear();
    this.isInitialized = false;
  }
};

// src/main.ts
var EnglishVocabularyPlugin = class extends import_obsidian10.Plugin {
  async onload() {
    const errorBoundary = ErrorBoundary.getInstance();
    errorBoundary.initialize();
    errorBoundary.registerHandler("VocabularyPlugin", (errorInfo) => {
      var _a;
      if ((_a = errorInfo.context) == null ? void 0 : _a.includes("API")) {
        console.warn("API \uC5D0\uB7EC \uAC10\uC9C0, \uD3F4\uBC31 \uBAA8\uB4DC\uB85C \uC804\uD658");
      }
    });
    await this.loadSettings();
    this.container = container;
    ServiceRegistry.registerServices(this.container, this.app, this.settings);
    this.databaseManager = this.container.resolve("databaseManager");
    this.llmService = new LLMService(this.settings);
    try {
      await this.databaseManager.loadAllBooks();
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uB370\uC774\uD130 \uB85C\uB4DC \uC2E4\uD328:", error);
      await this.migrateFromLegacyData();
    }
    this.addSettingTab(new VocabularySettingTab(this.app, this));
    this.addCommand({
      id: "open-vocabulary-modal",
      name: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      callback: () => {
        new VocabularyModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "open-vocabulary-manager",
      name: "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30",
      callback: () => {
        new VocabularyManagerModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "add-words",
      name: "\uB2E8\uC5B4 \uCD94\uAC00",
      callback: () => {
        new AddWordsModal(this.app, this).open();
      }
    });
    this.addRibbonIcon("book", "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30", () => {
      new VocabularyManagerModal(this.app, this).open();
    });
  }
  onunload() {
    const errorBoundary = ErrorBoundary.getInstance();
    errorBoundary.unregisterHandler("VocabularyPlugin");
    errorBoundary.cleanup();
  }
  async loadSettings() {
    const data = await this.loadData();
    if (data && typeof data === "object" && "settings" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data.settings);
    } else if (data && typeof data === "object" && "apiKey" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
    } else {
      this.settings = Object.assign({}, DEFAULT_SETTINGS);
    }
    await this.migrateApiKeys();
  }
  // API 키 암호화 마이그레이션
  async migrateApiKeys() {
    let needsSave = false;
    if (this.settings.llmApiKey && this.isPlainTextApiKey(this.settings.llmApiKey)) {
      const plainKey = this.settings.llmApiKey;
      this.settings.llmApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.openaiApiKey && this.isPlainTextApiKey(this.settings.openaiApiKey)) {
      const plainKey = this.settings.openaiApiKey;
      this.settings.openaiApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.anthropicApiKey && this.isPlainTextApiKey(this.settings.anthropicApiKey)) {
      const plainKey = this.settings.anthropicApiKey;
      this.settings.anthropicApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.googleApiKey && this.isPlainTextApiKey(this.settings.googleApiKey)) {
      const plainKey = this.settings.googleApiKey;
      this.settings.googleApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (needsSave) {
      await this.saveSettings();
    }
  }
  // API 키가 평문인지 확인하는 헬퍼 함수
  isPlainTextApiKey(apiKey) {
    if (!apiKey)
      return false;
    try {
      const decrypted = decryptApiKey(apiKey);
      return decrypted === apiKey;
    } catch (error) {
      return apiKey.startsWith("sk-") || apiKey.startsWith("sk-ant-") || apiKey.startsWith("AIza") || apiKey.length > 20;
    }
  }
  async saveSettings() {
    await this.saveAllData();
    if (this.llmService) {
      this.llmService = new LLMService(this.settings);
    }
    if (this.container) {
      ServiceRegistry.updateSettings(this.container, this.settings);
    }
  }
  // 기존 data.json에서 MD 파일로 마이그레이션
  async migrateFromLegacyData() {
    try {
      const savedData = await this.loadData();
      if (savedData && savedData.database && Array.isArray(savedData.database.words)) {
        const legacyData = savedData.database;
        if (legacyData.words && legacyData.words.length > 0) {
          for (const word of legacyData.words) {
            try {
              await this.databaseManager.addWord({
                ...word,
                bookId: "default",
                pronunciation: word.pronunciation || ""
              });
            } catch (error) {
              console.warn(`\uB2E8\uC5B4 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328: ${word.word}`, error);
            }
          }
        }
        if (legacyData.settings) {
          await this.databaseManager.updateSettings(legacyData.settings);
        }
      }
    } catch (error) {
      console.error("\uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328:", error);
    }
  }
  // 모든 데이터 저장 (설정만 저장, 단어장 데이터는 MD 파일로 자동 저장됨)
  async saveAllData() {
    const data = {
      settings: this.settings
    };
    await this.saveData(data);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzLnRzIiwgInNyYy91dGlscy50cyIsICJzcmMvc2hhcmVkL0NvbmZpZy50cyIsICJzcmMvc2hhcmVkL1JldHJ5UG9saWN5LnRzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9iaW5kLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvdXRpbHMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zRXJyb3IuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL251bGwuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3RvRm9ybURhdGEuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL0F4aW9zVVJMU2VhcmNoUGFyYW1zLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9idWlsZFVSTC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvSW50ZXJjZXB0b3JNYW5hZ2VyLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvZGVmYXVsdHMvdHJhbnNpdGlvbmFsLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvcGxhdGZvcm0vYnJvd3Nlci9jbGFzc2VzL1VSTFNlYXJjaFBhcmFtcy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvY2xhc3Nlcy9Gb3JtRGF0YS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvY2xhc3Nlcy9CbG9iLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvcGxhdGZvcm0vYnJvd3Nlci9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2NvbW1vbi91dGlscy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy90b1VSTEVuY29kZWRGb3JtLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9mb3JtRGF0YVRvSlNPTi5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2RlZmF1bHRzL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9wYXJzZUhlYWRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zSGVhZGVycy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9pc0NhbmNlbC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxlZEVycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9zZXR0bGUuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlUHJvdG9jb2wuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwZWVkb21ldGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy90aHJvdHRsZS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcHJvZ3Jlc3NFdmVudFJlZHVjZXIuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbi5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29va2llcy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2J1aWxkRnVsbFBhdGguanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL21lcmdlQ29uZmlnLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9yZXNvbHZlQ29uZmlnLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb21wb3NlU2lnbmFscy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdHJhY2tTdHJlYW0uanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9hZGFwdGVycy9mZXRjaC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL2FkYXB0ZXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9kaXNwYXRjaFJlcXVlc3QuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9lbnYvZGF0YS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdmFsaWRhdG9yLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvcy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvc3ByZWFkLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0F4aW9zRXJyb3IuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL0h0dHBTdGF0dXNDb2RlLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvYXhpb3MuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2luZGV4LmpzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZS50cyIsICJzcmMvZmVhdHVyZXMvdm9jYWJ1bGFyeS1sZWFybmluZy91aS9Wb2NhYnVsYXJ5TW9kYWwudHMiLCAic3JjL2luZnJhc3RydWN0dXJlL3R0cy9DaGF0dGVyYm94VFRTU2VydmljZS50cyIsICJzcmMvc2hhcmVkL0F1ZGlvTWFuYWdlci50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL0dvb2dsZUNsb3VkVFRTU2VydmljZS50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL1RUU1NlcnZpY2UudHMiLCAic3JjL2NvcmUvYWxnb3JpdGhtcy9TcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLnRzIiwgInNyYy9jb3JlL3NlcnZpY2VzL1NwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnRzIiwgInNyYy9mZWF0dXJlcy9ib29rLW1hbmFnZW1lbnQvdWkvVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbC50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2UudHMiLCAic3JjL2ZlYXR1cmVzL2Jvb2stbWFuYWdlbWVudC91aS9BZGRCb29rTW9kYWwudHMiLCAic3JjL2ZlYXR1cmVzL3dvcmQtbWFuYWdlbWVudC91aS9BZGRXb3Jkc01vZGFsLnRzIiwgInNyYy9zaGFyZWQvdmFsaWRhdGlvbi50cyIsICJzcmMvc2hhcmVkL0NhbmNlbGxhdGlvblRva2VuLnRzIiwgInNyYy9zaGFyZWQvY29udGFpbmVyL0RJQ29udGFpbmVyLnRzIiwgInNyYy9jb3JlL2VudGl0aWVzL1ZvY2FidWxhcnkudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL0FkZFdvcmRVc2VDYXNlLnRzIiwgInNyYy9jb3JlL2VudGl0aWVzL0Jvb2sudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL0NyZWF0ZUJvb2tVc2VDYXNlLnRzIiwgInNyYy9jb3JlL3VzZS1jYXNlcy9HZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL1Jldmlld1dvcmRVc2VDYXNlLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvQm9va1JlcG9zaXRvcnlBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZS50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2VBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9leHRlcm5hbC9Xb3JkU2VydmljZUFkYXB0ZXIudHMiLCAic3JjL2NvcmUvcG9ydHMvc2VydmljZXMvSVRUU1NlcnZpY2VBZGFwdGVyLnRzIiwgInNyYy9zaGFyZWQvY29udGFpbmVyL1NlcnZpY2VSZWdpc3RyeS50cyIsICJzcmMvc2hhcmVkL0Vycm9yQm91bmRhcnkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUywgVm9jYWJ1bGFyeVNldHRpbmdUYWIgfSBmcm9tICcuL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcbmltcG9ydCB7IFZvY2FidWxhcnlNb2RhbCB9IGZyb20gJy4vZmVhdHVyZXMvdm9jYWJ1bGFyeS1sZWFybmluZy91aS9Wb2NhYnVsYXJ5TW9kYWwnO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuL1ZvY2FidWxhcnlDYXJkJztcbmltcG9ydCB7IFZvY2FidWxhcnlNYW5hZ2VyTW9kYWwgfSBmcm9tICcuL2ZlYXR1cmVzL2Jvb2stbWFuYWdlbWVudC91aS9Wb2NhYnVsYXJ5TWFuYWdlck1vZGFsJztcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuL2luZnJhc3RydWN0dXJlL3N0b3JhZ2UvVm9jYWJ1bGFyeURhdGFiYXNlJztcbmltcG9ydCB7IEFkZFdvcmRzTW9kYWwgfSBmcm9tICcuL2ZlYXR1cmVzL3dvcmQtbWFuYWdlbWVudC91aS9BZGRXb3Jkc01vZGFsJztcbmltcG9ydCB7IEFkZEJvb2tNb2RhbCB9IGZyb20gJy4vZmVhdHVyZXMvYm9vay1tYW5hZ2VtZW50L3VpL0FkZEJvb2tNb2RhbCc7XG5pbXBvcnQgeyBMTE1TZXJ2aWNlIH0gZnJvbSAnLi9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZSc7XG5pbXBvcnQgeyBlbmNyeXB0QXBpS2V5LCBkZWNyeXB0QXBpS2V5IH0gZnJvbSAnLi91dGlscyc7XG5cbi8vIERJIENvbnRhaW5lclxuaW1wb3J0IHsgRElDb250YWluZXIsIGNvbnRhaW5lciB9IGZyb20gJy4vc2hhcmVkL2NvbnRhaW5lci9ESUNvbnRhaW5lcic7XG5pbXBvcnQgeyBTZXJ2aWNlUmVnaXN0cnkgfSBmcm9tICcuL3NoYXJlZC9jb250YWluZXIvU2VydmljZVJlZ2lzdHJ5JztcblxuLy8gRXJyb3IgQm91bmRhcnlcbmltcG9ydCB7IEVycm9yQm91bmRhcnkgfSBmcm9tICcuL3NoYXJlZC9FcnJvckJvdW5kYXJ5JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3M7XG4gICAgZGF0YWJhc2VNYW5hZ2VyOiBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyO1xuICAgIGxsbVNlcnZpY2U6IExMTVNlcnZpY2U7XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IERJQ29udGFpbmVyO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICAvLyBFcnJvciBCb3VuZGFyeSBcdUNEMDhcdUFFMzBcdUQ2NTRcbiAgICAgICAgY29uc3QgZXJyb3JCb3VuZGFyeSA9IEVycm9yQm91bmRhcnkuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgZXJyb3JCb3VuZGFyeS5pbml0aWFsaXplKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzhcdUJDQzQgXHVDNUQwXHVCN0VDIFx1RDU3OFx1QjRFNFx1QjdFQyBcdUI0RjFcdUI4NURcbiAgICAgICAgZXJyb3JCb3VuZGFyeS5yZWdpc3RlckhhbmRsZXIoJ1ZvY2FidWxhcnlQbHVnaW4nLCAoZXJyb3JJbmZvKSA9PiB7XG4gICAgICAgICAgICAvLyBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzggXHVBRDAwXHVCODI4IFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUMgXHVCODVDXHVDOUMxXG4gICAgICAgICAgICBpZiAoZXJyb3JJbmZvLmNvbnRleHQ/LmluY2x1ZGVzKCdBUEknKSkge1xuICAgICAgICAgICAgICAgIC8vIEFQSSBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDXHVCMjk0IFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUI2MTBcdUIyOTQgXHVEM0Y0XHVCQzMxIFx1Q0M5OFx1QjlBQ1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQVBJIFx1QzVEMFx1QjdFQyBcdUFDMTBcdUM5QzAsIFx1RDNGNFx1QkMzMSBcdUJBQThcdUI0RENcdUI4NUMgXHVDODA0XHVENjU4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAgICAgLy8gREkgQ29udGFpbmVyIFx1Q0QwOFx1QUUzMFx1RDY1NFxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgU2VydmljZVJlZ2lzdHJ5LnJlZ2lzdGVyU2VydmljZXModGhpcy5jb250YWluZXIsIHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcblxuICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTQgXHVCOUU0XHVCMkM4XHVDODAwIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxuICAgICAgICB0aGlzLmRhdGFiYXNlTWFuYWdlciA9IHRoaXMuY29udGFpbmVyLnJlc29sdmU8Vm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcj4oJ2RhdGFiYXNlTWFuYWdlcicpO1xuICAgICAgICBcbiAgICAgICAgLy8gTExNIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUNEMDhcdUFFMzBcdUQ2NTRcbiAgICAgICAgdGhpcy5sbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2UodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIFxuICAgICAgICAvLyBNRCBcdUQzMENcdUM3N0MgXHVBRTMwXHVCQzE4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0RENcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0REMgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBkYXRhLmpzb25cdUM1RDBcdUMxMUMgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4IFx1QzJEQ1x1QjNDNFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5taWdyYXRlRnJvbUxlZ2FjeURhdGEoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNSBcdUQwRUQgXHVDRDk0XHVBQzAwXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVm9jYWJ1bGFyeVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICAvLyBcdUJBODVcdUI4MzlcdUM1QjQgXHVDRDk0XHVBQzAwXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ29wZW4tdm9jYWJ1bGFyeS1tb2RhbCcsXG4gICAgICAgICAgICBuYW1lOiAnXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjUgXHVDMkRDXHVDNzkxJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IFZvY2FidWxhcnlNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0Y0XHVBRTMwIFx1QkE4NVx1QjgzOVx1QzVCNCBcdUNEOTRcdUFDMDBcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnb3Blbi12b2NhYnVsYXJ5LW1hbmFnZXInLFxuICAgICAgICAgICAgbmFtZTogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUJDRjRcdUFFMzAnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwIFx1QkE4NVx1QjgzOVx1QzVCNCBcdUNEOTRcdUFDMDBcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnYWRkLXdvcmRzJyxcbiAgICAgICAgICAgIG5hbWU6ICdcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IEFkZFdvcmRzTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHVCOUFDXHVCQ0Y4IFx1QzU0NFx1Qzc3NFx1Q0Y1OCBcdUNEOTRcdUFDMDAgKFx1Q0M0NSBcdUM1NDRcdUM3NzRcdUNGNTgpXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignYm9vaycsICdcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0Y0XHVBRTMwJywgKCkgPT4ge1xuICAgICAgICAgICAgbmV3IFZvY2FidWxhcnlNYW5hZ2VyTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb251bmxvYWQoKSB7XG4gICAgICAgIC8vIEVycm9yIEJvdW5kYXJ5IFx1QzgxNVx1QjlBQ1xuICAgICAgICBjb25zdCBlcnJvckJvdW5kYXJ5ID0gRXJyb3JCb3VuZGFyeS5nZXRJbnN0YW5jZSgpO1xuICAgICAgICBlcnJvckJvdW5kYXJ5LnVucmVnaXN0ZXJIYW5kbGVyKCdWb2NhYnVsYXJ5UGx1Z2luJyk7XG4gICAgICAgIGVycm9yQm91bmRhcnkuY2xlYW51cCgpO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QjlDQyBcdUI4NUNcdUI0REMgKFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUIzNzBcdUM3NzRcdUQxMzBcdUM2NDAgXHVCRDg0XHVCOUFDKVxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICAgICAgICBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgJ3NldHRpbmdzJyBpbiBkYXRhKSB7XG4gICAgICAgICAgICAvLyBcdUQxQjVcdUQ1NjlcdUI0MUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNUQwXHVDMTFDIFx1QzEyNFx1QzgxNSBcdUJEODBcdUJEODRcdUI5Q0MgXHVDRDk0XHVDRDlDXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgZGF0YS5zZXR0aW5ncyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgJ2FwaUtleScgaW4gZGF0YSkge1xuICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1RDYxNVx1QzJERFx1Qzc1OCBcdUMxMjRcdUM4MTUgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNzc4IFx1QUNCRFx1QzZCMFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QUMwMCBcdUM1QzZcdUIyOTQgXHVBQ0JEXHVDNkIwIFx1QUUzMFx1QkNGOFx1QUMxMiBcdUMwQUNcdUM2QTlcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFQSSBcdUQwQTQgXHVDNTU0XHVENjM4XHVENjU0IFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OFxuICAgICAgICBhd2FpdCB0aGlzLm1pZ3JhdGVBcGlLZXlzKCk7XG4gICAgfVxuXG4gICAgLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XG4gICAgcHJpdmF0ZSBhc3luYyBtaWdyYXRlQXBpS2V5cygpIHtcbiAgICAgICAgbGV0IG5lZWRzU2F2ZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIGxsbUFwaUtleVx1QUMwMCBcdUQzQzlcdUJCMzhcdUM3M0NcdUI4NUMgXHVDODAwXHVDN0E1XHVCNDE4XHVDNUI0IFx1Qzc4OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NThcdUFDRTAgXHVDNTU0XHVENjM4XHVENjU0XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmxsbUFwaUtleSAmJiB0aGlzLmlzUGxhaW5UZXh0QXBpS2V5KHRoaXMuc2V0dGluZ3MubGxtQXBpS2V5KSkge1xuICAgICAgICAgICAgY29uc3QgcGxhaW5LZXkgPSB0aGlzLnNldHRpbmdzLmxsbUFwaUtleTtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MubGxtQXBpS2V5ID0gZW5jcnlwdEFwaUtleShwbGFpbktleSk7XG4gICAgICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVCMkU0XHVCOTc4IEFQSSBcdUQwQTRcdUI0RTRcdUIzQzQgXHVEM0M5XHVCQjM4XHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUNFMCBcdUM1NTRcdUQ2MzhcdUQ2NTQgKFx1QUUzMFx1Qzg3NFx1QzVEMCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNzQwIFx1QUNCRFx1QzZCMClcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5ICYmIHRoaXMuaXNQbGFpblRleHRBcGlLZXkodGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXkpKSB7XG4gICAgICAgICAgICBjb25zdCBwbGFpbktleSA9IHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5O1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXkgPSBlbmNyeXB0QXBpS2V5KHBsYWluS2V5KTtcbiAgICAgICAgICAgIG5lZWRzU2F2ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkgJiYgdGhpcy5pc1BsYWluVGV4dEFwaUtleSh0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHBsYWluS2V5ID0gdGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXk7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSA9IGVuY3J5cHRBcGlLZXkocGxhaW5LZXkpO1xuICAgICAgICAgICAgbmVlZHNTYXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleSAmJiB0aGlzLmlzUGxhaW5UZXh0QXBpS2V5KHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5KSkge1xuICAgICAgICAgICAgY29uc3QgcGxhaW5LZXkgPSB0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleTtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5ID0gZW5jcnlwdEFwaUtleShwbGFpbktleSk7XG4gICAgICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVCQ0MwXHVBQ0JEXHVDMEFDXHVENTZEXHVDNzc0IFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM4MDBcdUM3QTVcbiAgICAgICAgaWYgKG5lZWRzU2F2ZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFQSSBcdUQwQTRcdUFDMDAgXHVEM0M5XHVCQjM4XHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QjI5NCBcdUQ1RUNcdUQzN0MgXHVENTY4XHVDMjE4XG4gICAgcHJpdmF0ZSBpc1BsYWluVGV4dEFwaUtleShhcGlLZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIWFwaUtleSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUQwQTRcdUI5N0MgXHVCQ0Y1XHVENjM4XHVENjU0XHVENTc0XHVCQ0Y0XHVBQ0UwIFx1QzZEMFx1QkNGOFx1QUNGQyBcdUIyRTRcdUI5NzRcdUJBNzQgXHVEM0M5XHVCQjM4XHVDNzNDXHVCODVDIFx1QUMwNFx1QzhGQ1xuICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gZGVjcnlwdEFwaUtleShhcGlLZXkpO1xuICAgICAgICAgICAgcmV0dXJuIGRlY3J5cHRlZCA9PT0gYXBpS2V5OyAvLyBcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVBQ0IwXHVBQ0ZDXHVBQzAwIFx1QzZEMFx1QkNGOFx1QUNGQyBcdUFDMTlcdUM3M0NcdUJBNzQgXHVEM0M5XHVCQjM4XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4XHVENTU4XHVCQTc0IFx1RDNDOVx1QkIzOFx1Qzc3QyBcdUFDMDBcdUIyQTVcdUMxMzFcdUM3NzQgXHVDNzg4XHVDNzRDXG4gICAgICAgICAgICAvLyBcdUM3N0NcdUJDMThcdUM4MDFcdUM3NzggQVBJIFx1RDBBNCBcdUQzMjhcdUQxMzQgXHVENjU1XHVDNzc4XG4gICAgICAgICAgICByZXR1cm4gYXBpS2V5LnN0YXJ0c1dpdGgoJ3NrLScpIHx8IGFwaUtleS5zdGFydHNXaXRoKCdzay1hbnQtJykgfHwgYXBpS2V5LnN0YXJ0c1dpdGgoJ0FJemEnKSB8fCBhcGlLZXkubGVuZ3RoID4gMjA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFsbERhdGEoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIExMTSBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIGlmICh0aGlzLmxsbVNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMubGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBESSBDb250YWluZXJcdUM1RDAgXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIFNlcnZpY2VSZWdpc3RyeS51cGRhdGVTZXR0aW5ncyh0aGlzLmNvbnRhaW5lciwgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdUFFMzBcdUM4NzQgZGF0YS5qc29uXHVDNUQwXHVDMTFDIE1EIFx1RDMwQ1x1Qzc3Q1x1Qjg1QyBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNThcbiAgICBwcml2YXRlIGFzeW5jIG1pZ3JhdGVGcm9tTGVnYWN5RGF0YSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcbiAgICAgICAgICAgIGlmIChzYXZlZERhdGEgJiYgc2F2ZWREYXRhLmRhdGFiYXNlICYmIEFycmF5LmlzQXJyYXkoc2F2ZWREYXRhLmRhdGFiYXNlLndvcmRzKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlZ2FjeURhdGEgPSBzYXZlZERhdGEuZGF0YWJhc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNUQwIFx1Q0Q5NFx1QUMwMFxuICAgICAgICAgICAgICAgIGlmIChsZWdhY3lEYXRhLndvcmRzICYmIGxlZ2FjeURhdGEud29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgbGVnYWN5RGF0YS53b3Jkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5hZGRXb3JkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ud29yZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va0lkOiAnZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmQucHJvbnVuY2lhdGlvbiB8fCAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFx1QjJFOFx1QzVCNCBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNTggXHVDMkU0XHVEMzI4OiAke3dvcmQud29yZH1gLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OFxuICAgICAgICAgICAgICAgIGlmIChsZWdhY3lEYXRhLnNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVNldHRpbmdzKGxlZ2FjeURhdGEuc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVCQUE4XHVCNEUwIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM4MDBcdUM3QTUgKFx1QzEyNFx1QzgxNVx1QjlDQyBcdUM4MDBcdUM3QTUsIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUIzNzBcdUM3NzRcdUQxMzBcdUIyOTQgTUQgXHVEMzBDXHVDNzdDXHVCODVDIFx1Qzc5MFx1QjNEOSBcdUM4MDBcdUM3QTVcdUI0MjgpXG4gICAgYXN5bmMgc2F2ZUFsbERhdGEoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5zZXR0aW5nc1xuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKGRhdGEpO1xuICAgIH1cbn1cblxuLy8gXHVEMEMwXHVDNzg1IFx1QzEyMFx1QzVCOCBcdUNEOTRcdUFDMDBcbmV4cG9ydCB7IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luLCBBZGRCb29rTW9kYWwgfTsgIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTm90aWNlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xuaW1wb3J0IHsgTExNU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2xsbS9MTE1TZXJ2aWNlJztcbmltcG9ydCB7IGVuY3J5cHRBcGlLZXksIGRlY3J5cHRBcGlLZXksIG1hc2tBcGlLZXkgfSBmcm9tICcuLi8uLi8uLi91dGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVm9jYWJ1bGFyeVNldHRpbmdzIHtcbiAgICBhcGlLZXk6IHN0cmluZztcbiAgICBkZWZhdWx0TGFuZ3VhZ2U6IHN0cmluZztcbiAgICBzaG93U2ltaWxhcldvcmRzOiBib29sZWFuO1xuICAgIHNob3dFeGFtcGxlczogYm9vbGVhbjtcbiAgICBleGFtcGxlc0NvdW50OiBudW1iZXI7XG4gICAgLy8gXHVBQzAxIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1QkNDNCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgQVBJIFx1RDBBNFxuICAgIG9wZW5haUFwaUtleTogc3RyaW5nO1xuICAgIGFudGhyb3BpY0FwaUtleTogc3RyaW5nO1xuICAgIGdvb2dsZUFwaUtleTogc3RyaW5nO1xuICAgIGxsbVByb3ZpZGVyOiAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dvb2dsZSc7XG4gICAgbGxtTW9kZWw6IHN0cmluZztcbiAgICBlbmFibGVBZHZhbmNlZEZlYXR1cmVzOiBib29sZWFuO1xuICAgIC8vIFx1QkNGNVx1QzJCNSBcdUQ2NTRcdUJBNzQgXHVCMTkyXHVDNzc0IFx1QzEyNFx1QzgxNVxuICAgIHJldmlld01vZGFsSGVpZ2h0OiBudW1iZXI7XG4gICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzgwMFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVBQ0JEXHVCODVDXG4gICAgdm9jYWJ1bGFyeUZvbGRlclBhdGg6IHN0cmluZztcbiAgICAvLyBUVFMgXHVDMTI0XHVDODE1XG4gICAgdHRzRW5hYmxlZDogYm9vbGVhbjtcbiAgICB0dHNQcm92aWRlcjogJ2NoYXR0ZXJib3gnIHwgJ2dvb2dsZS1jbG91ZCc7XG4gICAgdHRzVm9pY2U6IHN0cmluZztcbiAgICB0dHNQbGF5YmFja1NwZWVkOiBudW1iZXI7XG4gICAgdHRzQXV0b1BsYXk6IGJvb2xlYW47XG4gICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVxuICAgIGNoYXR0ZXJib3hBcGlVcmw6IHN0cmluZztcbiAgICBjaGF0dGVyYm94RXhhZ2dlcmF0aW9uOiBudW1iZXI7XG4gICAgY2hhdHRlcmJveENmZ1dlaWdodDogbnVtYmVyO1xuICAgIGNoYXR0ZXJib3hUZW1wZXJhdHVyZTogbnVtYmVyO1xuICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVxuICAgIGdvb2dsZUNsb3VkVFRTQXBpS2V5OiBzdHJpbmc7XG4gICAgZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGU6IHN0cmluZztcbiAgICBnb29nbGVDbG91ZFRUU1NwZWFraW5nUmF0ZTogbnVtYmVyO1xuICAgIGdvb2dsZUNsb3VkVFRTUGl0Y2g6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFZvY2FidWxhcnlTZXR0aW5ncyA9IHtcbiAgICBhcGlLZXk6ICcnLFxuICAgIGRlZmF1bHRMYW5ndWFnZTogJ2tvJyxcbiAgICBzaG93U2ltaWxhcldvcmRzOiB0cnVlLFxuICAgIHNob3dFeGFtcGxlczogdHJ1ZSxcbiAgICBleGFtcGxlc0NvdW50OiAzLFxuICAgIG9wZW5haUFwaUtleTogJycsXG4gICAgYW50aHJvcGljQXBpS2V5OiAnJyxcbiAgICBnb29nbGVBcGlLZXk6ICcnLFxuICAgIGxsbVByb3ZpZGVyOiAnb3BlbmFpJyxcbiAgICBsbG1Nb2RlbDogJ2dlbWluaS0xLjAtcHJvLWxhdGVzdCcsXG4gICAgZW5hYmxlQWR2YW5jZWRGZWF0dXJlczogZmFsc2UsXG4gICAgcmV2aWV3TW9kYWxIZWlnaHQ6IDg1LFxuICAgIHZvY2FidWxhcnlGb2xkZXJQYXRoOiAnVm9jYWJ1bGFyeScsXG4gICAgdHRzRW5hYmxlZDogdHJ1ZSxcbiAgICB0dHNQcm92aWRlcjogJ2NoYXR0ZXJib3gnLFxuICAgIHR0c1ZvaWNlOiAnYWxsb3knLFxuICAgIHR0c1BsYXliYWNrU3BlZWQ6IDEuMCxcbiAgICB0dHNBdXRvUGxheTogZmFsc2UsXG4gICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVBRTMwXHVCQ0Y4XHVBQzEyXG4gICAgY2hhdHRlcmJveEFwaVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMycsIC8vIFx1QUNCRFx1QUNFMDogSFRUUFx1QjI5NCBcdUJDRjRcdUM1NDhcdUM1RDAgXHVDREU4XHVDNTdEXHVENTY5XHVCMkM4XHVCMkU0LiBcdUFDMDBcdUIyQTVcdUQ1NThcdUJBNzQgSFRUUFNcdUI5N0MgXHVDMEFDXHVDNkE5XHVENTU4XHVDMTM4XHVDNjk0LlxuICAgIGNoYXR0ZXJib3hFeGFnZ2VyYXRpb246IDAuNyxcbiAgICBjaGF0dGVyYm94Q2ZnV2VpZ2h0OiAwLjQsXG4gICAgY2hhdHRlcmJveFRlbXBlcmF0dXJlOiAwLjksXG4gICAgLy8gR29vZ2xlIENsb3VkIFRUUyBcdUFFMzBcdUJDRjhcdUFDMTJcbiAgICBnb29nbGVDbG91ZFRUU0FwaUtleTogJycsXG4gICAgZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGU6ICdlbi1VUycsXG4gICAgZ29vZ2xlQ2xvdWRUVFNTcGVha2luZ1JhdGU6IDEuMCxcbiAgICBnb29nbGVDbG91ZFRUU1BpdGNoOiAwLjBcbn07XG5cbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjUgXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4IFx1QzEyNFx1QzgxNScgfSk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVCYXNpY1NldHRpbmdzKGNvbnRhaW5lckVsKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY3JlYXRlTExNU2V0dGluZ3MoY29udGFpbmVyRWwpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jcmVhdGVUVFNTZXR0aW5ncyhjb250YWluZXJFbCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNyZWF0ZUFkdmFuY2VkU2V0dGluZ3MoY29udGFpbmVyRWwpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQmFzaWNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVBRTMwXHVCQ0Y4IFx1QzEyNFx1QzgxNScgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVBRTMwXHVCQ0Y4IFx1QzVCOFx1QzVCNCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0IFx1QjczQlx1Qzc0NCBcdUQ0NUNcdUMyRENcdUQ1NjAgXHVDNUI4XHVDNUI0XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbigna28nLCAnXHVENTVDXHVBRDZEXHVDNUI0JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbicsICdFbmdsaXNoJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdqYScsICdcdTY1RTVcdTY3MkNcdThBOUUnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TGFuZ3VhZ2UpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TGFuZ3VhZ2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjQgXHVENDVDXHVDMkRDJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ1NTlcdUMyQjVcdUQ1NjAgXHVCNTRDIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NDQgXHVENTY4XHVBRUQ4IFx1RDQ1Q1x1QzJEQ1x1RDU2OVx1QjJDOFx1QjJFNC4nKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTaW1pbGFyV29yZHMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U2ltaWxhcldvcmRzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM2MDhcdUJCMzggXHVENDVDXHVDMkRDJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ1NTlcdUMyQjVcdUQ1NjAgXHVCNTRDIFx1QzYwOFx1QkIzOFx1QjRFNFx1Qzc0NCBcdUQ1NjhcdUFFRDggXHVENDVDXHVDMkRDXHVENTY5XHVCMkM4XHVCMkU0LicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0V4YW1wbGVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0V4YW1wbGVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM2MDhcdUJCMzggXHVBQzFDXHVDMjE4JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ0NUNcdUMyRENcdUQ1NjAgXHVDNjA4XHVCQjM4XHVDNzU4IFx1QUMxQ1x1QzIxOFx1Qjk3QyBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMSwgMTAsIDEpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YW1wbGVzQ291bnQpXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YW1wbGVzQ291bnQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlTExNU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0xMTSBBUEkgXHVDMTI0XHVDODE1JyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUFDRTBcdUFFMDkgXHVBRTMwXHVCMkE1IFx1RDY1Q1x1QzEzMVx1RDY1NCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnTExNIEFQSVx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NUMgXHVBQ0UwXHVBRTA5IFx1QUUzMFx1QjJBNVx1Qzc0NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBZHZhbmNlZEZlYXR1cmVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQWR2YW5jZWRGZWF0dXJlcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTExNIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDMEFDXHVDNkE5XHVENTYwIExMTSBBUEkgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignb3BlbmFpJywgJ09wZW5BSSAoR1BUKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignYW50aHJvcGljJywgJ0FudGhyb3BpYyAoQ2xhdWRlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ29vZ2xlJywgJ0dvb2dsZSAoR2VtaW5pKScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVByb3ZpZGVyKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXIgPSB2YWx1ZSBhcyAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dvb2dsZSc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ29wZW5haScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbU1vZGVsID0gJ2dwdC00LjEnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnYW50aHJvcGljJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnY2xhdWRlLTMtNS1zb25uZXQnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnZ29vZ2xlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnZ2VtaW5pLTIuNS1mbGFzaCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZU1vZGVsU2VsZWN0aW9uKGNvbnRhaW5lckVsKTtcblxuICAgICAgICAvLyBcdUFDMDEgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVCQ0M0IEFQSSBcdUQwQTQgXHVDMTI0XHVDODE1XG4gICAgICAgIHRoaXMuY3JlYXRlQXBpS2V5U2V0dGluZ3MoY29udGFpbmVyRWwpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FQSSBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc1OCBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QUM4QyBcdUMxMjRcdUM4MTVcdUI0MThcdUM1QzhcdUIyOTRcdUM5QzAgXHVEMTRDXHVDMkE0XHVEMkI4XHVENTY5XHVCMkM4XHVCMkU0LicpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4JylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUQxNENcdUMyQTRcdUQyQjggXHVDOTExLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2UodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbGxtU2VydmljZS50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgQVBJIFx1QzVGMFx1QUNCMCBcdUMxMzFcdUFDRjUhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBBUEkgXHVDNUYwXHVBQ0IwIFx1QzJFNFx1RDMyODogJyArIHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQVBJIFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjg6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUQxNENcdUMyQTRcdUQyQjgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVNb2RlbFNlbGVjdGlvbihjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQVBJIFx1QkFBOFx1QjM3OCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDMEFDXHVDNkE5XHVENTYwIExMTSBcdUJBQThcdUIzNzhcdUM3NDQgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXI7XG4gICAgICAgICAgICAgICAgaWYgKHByb3ZpZGVyID09PSAnb3BlbmFpJykge1xuICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuMScsICdHUFQtNC4xJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dwdC00bycsICdHUFQtNG8nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTRvLW1pbmknLCAnR1BULTRvIE1pbmknKSAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuMS1sb25nJywgJ0dQVC00LjEgKExvbmcgQ29udGV4dCknKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuNS1wcmV2aWV3JywgJ0dQVC00LjUgUHJldmlldycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNC41LXByZXZpZXctMicsICdHUFQtNC41IFByZXZpZXcgMicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdhbnRocm9waWMnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGF1ZGUgMy41IFx1QkFBOFx1QjM3OFx1QjRFNFxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNS1zb25uZXQnLCAnQ2xhdWRlIDMuNSBTb25uZXQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNS1oYWlrdScsICdDbGF1ZGUgMy41IEhhaWt1JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTUtb3B1cycsICdDbGF1ZGUgMy41IE9wdXMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xhdWRlIDMuNyBcdUJBQThcdUIzNzhcdUI0RTRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTctc29ubmV0JywgJ0NsYXVkZSAzLjcgU29ubmV0JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTctaGFpa3UnLCAnQ2xhdWRlIDMuNyBIYWlrdScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy03LW9wdXMnLCAnQ2xhdWRlIDMuNyBPcHVzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTUtZmxhc2gnLCAnQ2xhdWRlIDMuNSBGbGFzaCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdnb29nbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdnZW1pbmktMS41LXByby1sYXRlc3QnLCAnR2VtaW5pIDEuNSBQcm8nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ2VtaW5pLTIuNS1mbGFzaCcsICdHZW1pbmkgMi41IEZsYXNoJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0yLjUtcHJvJywgJ0dlbWluaSAyLjUgUHJvJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0xLjUtZmxhc2gtbGF0ZXN0JywgJ0dlbWluaSAxLjUgRmxhc2gnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Nb2RlbClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQXBpS2V5U2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIE9wZW5BSSBBUEkgXHVEMEE0XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ09wZW5BSSBBUEkgXHVEMEE0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdPcGVuQUkgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIChzay0uLi5cdUI4NUMgXHVDMkRDXHVDNzkxKScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpQXBpS2V5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY3J5cHRlZEtleSA9IGRlY3J5cHRBcGlLZXkoY3VycmVudEtleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignc2stLi4uJylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVDMEFDXHVDNkE5XHVDNzkwXHVBQzAwIFx1Qzc4NVx1QjgyNVx1RDU1QyBcdUFDMTJcdUM3NzQgXHVCOUM4XHVDMkE0XHVEMEI5XHVCNDFDIFx1QUMxMlx1QUNGQyBcdUIyRTRcdUI5NzRcdUJBNzQgXHVDMEM4XHVCODVDXHVDNkI0IFx1RDBBNFx1Qjg1QyBcdUFDMDRcdUM4RkNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkS2V5ID0gZW5jcnlwdEFwaUtleSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpQXBpS2V5ID0gZW5jcnlwdGVkS2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFudGhyb3BpYyBBUEkgXHVEMEE0XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FudGhyb3BpYyBBUEkgXHVEMEE0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdBbnRocm9waWMgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIChzay1hbnQtLi4uXHVCODVDIFx1QzJEQ1x1Qzc5MSknKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEtleSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hc2tlZEtleSA9IG1hc2tBcGlLZXkoZGVjcnlwdGVkS2V5KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3NrLWFudC0uLi4nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFza2VkS2V5KVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IG1hc2tlZEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZEtleSA9IGVuY3J5cHRBcGlLZXkodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSA9IGVuY3J5cHRlZEtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBHb29nbGUgQVBJIFx1RDBBNFxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdHb29nbGUgQVBJIFx1RDBBNCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnR29vZ2xlIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQXBpS2V5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY3J5cHRlZEtleSA9IGRlY3J5cHRBcGlLZXkoY3VycmVudEtleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQUl6YS4uLicpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShtYXNrZWRLZXkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkS2V5ID0gZW5jcnlwdEFwaUtleSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQXBpS2V5ID0gZW5jcnlwdGVkS2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQWR2YW5jZWRTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVBQ0UwXHVBRTA5IFx1QzEyNFx1QzgxNScgfSk7XG5cbiAgICAgICAgLy8gXHVEM0Y0XHVCMzU0IFx1QkFBOVx1Qjg1RCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcbiAgICAgICAgY29uc3QgZm9sZGVycyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKClcbiAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcikgYXMgVEZvbGRlcltdO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MDBcdUM3QTUgXHVEM0Y0XHVCMzU0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDXHVCNEU0XHVDNzc0IFx1QzgwMFx1QzdBNVx1QjQyMCBcdUQzRjRcdUIzNTRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LiAoXHVBRTMwXHVCQ0Y4XHVBQzEyOiBWb2NhYnVsYXJ5KScpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIGZvbGRlcnMuZm9yRWFjaChmb2xkZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oZm9sZGVyLnBhdGgsIGZvbGRlci5wYXRoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnZvY2FidWxhcnlGb2xkZXJQYXRoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlVm9jYWJ1bGFyeUZvbGRlclBhdGgodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVCQ0Y1XHVDMkI1IFx1RDY1NFx1QkE3NCBcdUIxOTJcdUM3NzQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QkNGNVx1QzJCNSBcdUJBQThcdUIyRUNcdUM3NTggXHVCMTkyXHVDNzc0XHVCOTdDIFx1RDY1NFx1QkE3NCBcdUIxOTJcdUM3NzRcdUM3NTggXHVCQzMxXHVCRDg0XHVDNzI4XHVCODVDIFx1QzEyNFx1QzgxNVx1RDU1OFx1QzEzOFx1QzY5NC4gKFx1QUUzMFx1QkNGOFx1QUMxMjogODUlKScpXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDUwLCA5NSwgNSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHQpXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3N0NcdUM3N0MgXHVENTU5XHVDMkI1IFx1QkFBOVx1RDQ1QycpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVENTU4XHVCOEU4XHVDNUQwIFx1RDU1OVx1QzJCNVx1RDU2MCBcdUIyRThcdUM1QjRcdUM3NTggXHVCQUE5XHVENDVDIFx1QUMxQ1x1QzIxOFx1Qjk3QyBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoNSwgNTAsIDUpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8uZ2V0RGF0YUZvclNhdmUoKT8uc2V0dGluZ3M/LmRhaWx5R29hbCB8fCAxMClcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyPy51cGRhdGVTZXR0aW5ncyh7IGRhaWx5R29hbDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QkNGNVx1QzJCNSBcdUFDMDRcdUFDQTkgKFx1Qzc3QyknKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUIyRTRcdUMyREMgXHVCQ0Y1XHVDMkI1XHVENTYwIFx1QUMwNFx1QUNBOVx1Qzc0NCBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMSwgMzAsIDEpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8uZ2V0RGF0YUZvclNhdmUoKT8uc2V0dGluZ3M/LnJldmlld0ludGVydmFsIHx8IDEpXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8udXBkYXRlU2V0dGluZ3MoeyByZXZpZXdJbnRlcnZhbDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlVFRTU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1RUUyAoXHVDNzRDXHVDMTMxIFx1Qzc3RFx1QUUzMCkgXHVDMTI0XHVDODE1JyB9KTtcblxuICAgICAgICBjb25zdCB0dHNUb2dnbGVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnVFRTIFx1RDY1Q1x1QzEzMVx1RDY1NCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0XHVDNjQwIFx1QzYwOFx1QkIzOFx1Qzc0NCBcdUM3NENcdUMxMzFcdUM3M0NcdUI4NUMgXHVDNzdEXHVDNUI0XHVDOEZDXHVCMjk0IFx1QUUzMFx1QjJBNVx1Qzc0NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNFbmFibGVkKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzRW5hYmxlZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVFRTIFx1QzEyNFx1QzgxNSBVSSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUVFNTZXR0aW5nc1Zpc2liaWxpdHkoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gVFRTIFx1QzgxQ1x1QUNGNVx1Qzc5MCBcdUMxMjBcdUQwRERcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnVFRTIFx1QzgxQ1x1QUNGNVx1Qzc5MCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDMEFDXHVDNkE5XHVENTYwIFRUUyBcdUMxMUNcdUJFNDRcdUMyQTRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3R0cy1wcm92aWRlci1zZXR0aW5nJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NoYXR0ZXJib3gnLCAnQ2hhdHRlcmJveCBUVFMgKFx1Qjg1Q1x1Q0VFQyknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dvb2dsZS1jbG91ZCcsICdHb29nbGUgQ2xvdWQgVGV4dC10by1TcGVlY2gnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQcm92aWRlcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c1Byb3ZpZGVyID0gdmFsdWUgYXMgJ2NoYXR0ZXJib3gnIHwgJ2dvb2dsZS1jbG91ZCc7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRUU1Byb3ZpZGVyU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDMTI0XHVDODE1XG4gICAgICAgIHRoaXMuY3JlYXRlQ2hhdHRlcmJveFRUU1NldHRpbmdzKGNvbnRhaW5lckVsKTtcblxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzEyNFx1QzgxNVxuICAgICAgICB0aGlzLmNyZWF0ZUdvb2dsZUNsb3VkVFRTU2V0dGluZ3MoY29udGFpbmVyRWwpO1xuXG4gICAgICAgIC8vIFx1Qzc5MFx1QjNEOSBcdUM3QUNcdUMwREQgXHVDMTI0XHVDODE1IChcdUFDRjVcdUQxQjUpXG4gICAgICAgIGNvbnN0IGF1dG9QbGF5U2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Qzc5MFx1QjNEOSBcdUM3QUNcdUMwREQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNCBcdUNFNzRcdUI0RENcdUFDMDAgXHVENDVDXHVDMkRDXHVCNDIwIFx1QjU0QyBcdUM3OTBcdUIzRDlcdUM3M0NcdUI4NUMgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc3RFx1QzVCNFx1QzkwRFx1QjJDOFx1QjJFNC4nKVxuICAgICAgICAgICAgLnNldENsYXNzKCd0dHMtYXV0b3BsYXktc2V0dGluZycpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzQXV0b1BsYXkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNBdXRvUGxheSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUNEMDhcdUFFMzAgXHVDMEMxXHVEMERDIFx1QzEyNFx1QzgxNVxuICAgICAgICB0aGlzLnVwZGF0ZVRUU1NldHRpbmdzVmlzaWJpbGl0eSgpO1xuICAgICAgICAvLyBcdUM4MUNcdUFDRjVcdUM3OTBcdUJDQzQgXHVDMTI0XHVDODE1IFx1Q0QwOFx1QUUzMFx1RDY1NFxuICAgICAgICB0aGlzLnVwZGF0ZVRUU1Byb3ZpZGVyU2V0dGluZ3MoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHBvcHVsYXRlQ2hhdHRlcmJveFZvaWNlRHJvcGRvd24oZHJvcGRvd246IGFueSk6IHZvaWQge1xuICAgICAgICAvLyBDaGF0dGVyYm94IFRUUyBcdUM5QzBcdUM2RDAgXHVDNzRDXHVDMTMxXHVCNEU0IChPcGVuQUkgXHVENjM4XHVENjU4KVxuICAgICAgICBjb25zdCBjaGF0dGVyYm94Vm9pY2VzID0gW1xuICAgICAgICAgICAgeyB2YWx1ZTogJ2FsbG95JywgbmFtZTogJ0FsbG95IChcdUM5MTFcdUMxMzFcdUM4MDEpJyB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ2VjaG8nLCBuYW1lOiAnRWNobyAoXHVCMEE4XHVDMTMxKScgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdmYWJsZScsIG5hbWU6ICdGYWJsZSAoXHVDNjAxXHVBRDZEXHVDMkREKScgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdvbnl4JywgbmFtZTogJ09ueXggKFx1QUU0QVx1Qzc0MCBcdUIwQThcdUMxMzEpJyB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ25vdmEnLCBuYW1lOiAnTm92YSAoXHVDNUVDXHVDMTMxKScgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdzaGltbWVyJywgbmFtZTogJ1NoaW1tZXIgKFx1QkQ4MFx1QjREQ1x1QjdFQ1x1QzZCNCBcdUM1RUNcdUMxMzEpJyB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ2N1c3RvbScsIG5hbWU6ICdDdXN0b20gKFx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUM4MTVcdUM3NTgpJyB9XG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gQ2hhdHRlcmJveCBcdUM3NENcdUMxMzFcdUI0RTQgXHVDRDk0XHVBQzAwXG4gICAgICAgIGNoYXR0ZXJib3hWb2ljZXMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG9wdGlvbi52YWx1ZSwgb3B0aW9uLm5hbWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUMyRTRcdUM4MUMgXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOSBcdUFDMDBcdUIyQTVcdUQ1NUMgXHVDNjAxXHVDNUI0IFx1Qzc0Q1x1QzEzMVx1QjRFNCBcdUNEOTRcdUFDMDBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHZvaWNlcyA9IHNwZWVjaFN5bnRoZXNpcy5nZXRWb2ljZXMoKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hWb2ljZXMgPSB2b2ljZXMuZmlsdGVyKHZvaWNlID0+IFxuICAgICAgICAgICAgICAgIHZvaWNlLmxhbmcuc3RhcnRzV2l0aCgnZW4tJykgJiYgXG4gICAgICAgICAgICAgICAgIXZvaWNlLmxhbmcuaW5jbHVkZXMoJ2tvJykgJiZcbiAgICAgICAgICAgICAgICAhY2hhdHRlcmJveFZvaWNlcy5zb21lKG9wdCA9PiBvcHQudmFsdWUgPT09IHZvaWNlLm5hbWUpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoZW5nbGlzaFZvaWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gXHVBRDZDXHVCRDg0XHVDMTIwIFx1Q0Q5NFx1QUMwMFxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignLS0tJywgJy0tLSBcdUMyRENcdUMyQTRcdUQxNUMgXHVDNzRDXHVDMTMxIC0tLScpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGVuZ2xpc2hWb2ljZXMuZm9yRWFjaCh2b2ljZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gYCR7dm9pY2UubmFtZX0gKCR7dm9pY2UubGFuZ30pYDtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKHZvaWNlLm5hbWUsIGRpc3BsYXlOYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignXHVDNzRDXHVDMTMxIFx1QkFBOVx1Qjg1RFx1Qzc0NCBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTQgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVRUU1NldHRpbmdzVmlzaWJpbGl0eSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaXNFbmFibGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzRW5hYmxlZDtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QkFBOFx1QjRFMCBUVFMgXHVBRDAwXHVCODI4IFx1QzEyNFx1QzgxNVx1QjRFNFxuICAgICAgICBjb25zdCBhbGxUdHNTZXR0aW5ncyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgICAgICcudHRzLXByb3ZpZGVyLXNldHRpbmcsIC5jaGF0dGVyYm94LWFwaS11cmwtc2V0dGluZywgLmNoYXR0ZXJib3gtdm9pY2Utc2V0dGluZywgLmNoYXR0ZXJib3gtZXhhZ2dlcmF0aW9uLXNldHRpbmcsIC5jaGF0dGVyYm94LWNmZy1zZXR0aW5nLCAuY2hhdHRlcmJveC10ZW1wZXJhdHVyZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXR0cy1ndWlkZSwgLmdvb2dsZS1jbG91ZC1hcGkta2V5LXNldHRpbmcsIC5nb29nbGUtY2xvdWQtbGFuZ3VhZ2Utc2V0dGluZywgLmdvb2dsZS1jbG91ZC12b2ljZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXNwZWFraW5nLXJhdGUtc2V0dGluZywgLmdvb2dsZS1jbG91ZC1waXRjaC1zZXR0aW5nLCAudHRzLWF1dG9wbGF5LXNldHRpbmcnXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBhbGxUdHNTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmcgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHNldHRpbmcgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoaXNFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3ducyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVycyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInJhbmdlXCJdJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9nZ2xlcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4gKGJ0biBhcyBIVE1MQnV0dG9uRWxlbWVudCkuZGlzYWJsZWQgPSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd25zLmZvckVhY2goZGQgPT4gKGRkIGFzIEhUTUxTZWxlY3RFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzbGlkZXJzLmZvckVhY2goc2xpZGVyID0+IChzbGlkZXIgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlcy5mb3JFYWNoKHRvZ2dsZSA9PiAodG9nZ2xlIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZHJvcGRvd25zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXJzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2dnbGVzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ0biA9PiAoYnRuIGFzIEhUTUxCdXR0b25FbGVtZW50KS5kaXNhYmxlZCA9IHRydWUpO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3ducy5mb3JFYWNoKGRkID0+IChkZCBhcyBIVE1MU2VsZWN0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcbiAgICAgICAgICAgICAgICBzbGlkZXJzLmZvckVhY2goc2xpZGVyID0+IChzbGlkZXIgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcbiAgICAgICAgICAgICAgICB0b2dnbGVzLmZvckVhY2godG9nZ2xlID0+ICh0b2dnbGUgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcbiAgICAgICAgICAgICAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiAoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUVFNcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDFDIFx1QUNCRFx1QzZCMCBcdUM4MUNcdUFDRjVcdUM3OTBcdUJDQzQgXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICBpZiAoaXNFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRUU1Byb3ZpZGVyU2V0dGluZ3MoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBhc3luYyB0ZXN0Q2hhdHRlcmJveENvbm5lY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hBcGlVcmx9L3YxL2F1ZGlvL3NwZWVjaGAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiAnQ29ubmVjdGlvbiB0ZXN0JyxcbiAgICAgICAgICAgICAgICAgICAgdm9pY2U6ICdhbGxveSdcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODQgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNSEnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUMxMUNcdUJDODQgXHVDNzUxXHVCMkY1IFx1QzYyNFx1Qjk1ODogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaGF0dGVyYm94IFRUUyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0IFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjguIFx1QzExQ1x1QkM4NFx1QUMwMCBcdUMyRTRcdUQ1ODkgXHVDOTExXHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVDaGF0dGVyYm94VFRTU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIENoYXR0ZXJib3ggQVBJIFVSTCBcdUMxMjRcdUM4MTVcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2hhdHRlcmJveCBUVFMgQVBJIFVSTCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0XHVDNzU4IFVSTFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIChcdUFFMzBcdUJDRjhcdUFDMTI6IGh0dHA6Ly9sb2NhbGhvc3Q6NDEyMyknKVxuICAgICAgICAgICAgLnNldENsYXNzKCdjaGF0dGVyYm94LWFwaS11cmwtc2V0dGluZycpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMycpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hBcGlVcmwpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94QXBpVXJsID0gdmFsdWUgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMyc7IC8vIFx1QUUzMFx1QkNGOFx1QUMxMjogSFRUUCAoXHVCQ0Y0XHVDNTQ4IFx1QzcwNFx1RDVEOClcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ0NoYXR0ZXJib3ggVFRTIFx1QzExQ1x1QkM4NCBcdUM1RjBcdUFDQjBcdUM3NDQgXHVEMTRDXHVDMkE0XHVEMkI4XHVENTY5XHVCMkM4XHVCMkU0JylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUQxNENcdUMyQTRcdUQyQjggXHVDOTExLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnRlc3RDaGF0dGVyYm94Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1QzVGMFx1QUNCMCBcdUQxNENcdUMyQTRcdUQyQjgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQ2hhdHRlcmJveCBcdUM3NENcdUMxMzEgXHVDMTIwXHVEMEREXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Qzc0Q1x1QzEzMSBcdUMxMjBcdUQwREQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0NoYXR0ZXJib3ggVFRTXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUM3NENcdUMxMzFcdUM3NDQgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2NoYXR0ZXJib3gtdm9pY2Utc2V0dGluZycpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVDaGF0dGVyYm94Vm9pY2VEcm9wZG93bihkcm9wZG93bik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJylcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnXHVDMTIwXHVEMEREXHVENTVDIFx1Qzc0Q1x1QzEzMVx1QzczQ1x1Qjg1QyBcdUMwRDhcdUQ1MEMgXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1QzdBQ1x1QzBERFx1RDU2OVx1QjJDOFx1QjJFNCcpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDN0FDXHVDMEREIFx1QzkxMS4uLicpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbGF5Q2hhdHRlcmJveFZvaWNlUHJldmlldygpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNzRDXHVDMTMxIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzRDXHVDMTMxIFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVx1QjRFNFxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUFDMTBcdUM4MTUgXHVENDVDXHVENjA0IFx1QUMxNVx1QjNDNCAoRXhhZ2dlcmF0aW9uKScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxXHVDNzU4IFx1QUMxMFx1QzgxNSBcdUQ0NUNcdUQ2MDQgXHVBQzE1XHVCM0M0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKDAuMjUgPSBcdUM1N0RcdUQ1NjgsIDIuMCA9IFx1QUMxNVx1RDU2OCknKVxuICAgICAgICAgICAgLnNldENsYXNzKCdjaGF0dGVyYm94LWV4YWdnZXJhdGlvbi1zZXR0aW5nJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMC4yNSwgMi4wLCAwLjA1KVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94RXhhZ2dlcmF0aW9uKVxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94RXhhZ2dlcmF0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdDRkcgXHVBQzAwXHVDOTExXHVDRTU4IChDRkcgV2VpZ2h0KScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxIFx1QzBERFx1QzEzMVx1Qzc1OCBcdUFDMDBcdUM3NzRcdUIzNThcdUMyQTQgXHVBQzE1XHVCM0M0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKDAuMCA9IFx1QzU3RFx1RDU2OCwgMS4wID0gXHVBQzE1XHVENTY4KScpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2NoYXR0ZXJib3gtY2ZnLXNldHRpbmcnKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLjAsIDEuMCwgMC4wNSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveENmZ1dlaWdodClcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveENmZ1dlaWdodCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNjI4XHVCM0M0IChUZW1wZXJhdHVyZSknKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1Qzc0Q1x1QzEzMSBcdUMwRERcdUMxMzFcdUM3NTggXHVDQzNEXHVDNzU4XHVDMTMxXHVDNzQ0IFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKDAuMDUgPSBcdUM3N0NcdUFEMDBcdUMxMzEsIDUuMCA9IFx1Q0MzRFx1Qzc1OFx1QzEzMSknKVxuICAgICAgICAgICAgLnNldENsYXNzKCdjaGF0dGVyYm94LXRlbXBlcmF0dXJlLXNldHRpbmcnKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLjA1LCA1LjAsIDAuMDUpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hUZW1wZXJhdHVyZSlcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveFRlbXBlcmF0dXJlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUdvb2dsZUNsb3VkVFRTU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVDMEFDXHVDNkE5IFx1QUMwMFx1Qzc3NFx1QjREQ1xuICAgICAgICBjb25zdCBndWlkZUVsID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICAgICAgICBjbHM6ICdnb29nbGUtY2xvdWQtdHRzLWd1aWRlIGdvb2dsZS1jbG91ZC1hcGkta2V5LXNldHRpbmcnLFxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbi1ib3R0b206IDE1cHg7IHBhZGRpbmc6IDEwcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgYm9yZGVyLXJhZGl1czogNXB4OyBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7JyB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgZ3VpZGVFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdcdUQ4M0RcdUREMjcgR29vZ2xlIENsb3VkIFRUUyBcdUMxMjRcdUM4MTUgXHVBQzAwXHVDNzc0XHVCNERDJywgYXR0cjogeyBzdHlsZTogJ21hcmdpbjogMCAwIDEwcHggMDsgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7JyB9IH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RlcHNMaXN0ID0gZ3VpZGVFbC5jcmVhdGVFbCgnb2wnLCB7IGF0dHI6IHsgc3R5bGU6ICdtYXJnaW46IDA7IHBhZGRpbmctbGVmdDogMjBweDsgbGluZS1oZWlnaHQ6IDEuNjsnIH0gfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdGVwMSA9IHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknKTtcbiAgICAgICAgc3RlcDEuaW5uZXJIVE1MID0gJzxzdHJvbmc+R29vZ2xlIENsb3VkIENvbnNvbGUgXHVDODExXHVDMThEOjwvc3Ryb25nPiAnO1xuICAgICAgICBjb25zdCBzdGVwMUxpbmsgPSBzdGVwMS5jcmVhdGVFbCgnYScsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnY29uc29sZS5jbG91ZC5nb29nbGUuY29tJyxcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbScsXG4gICAgICAgICAgICBhdHRyOiB7IHN0eWxlOiAnY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7JyB9XG4gICAgICAgIH0pO1xuICAgICAgICBzdGVwMUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly9jb25zb2xlLmNsb3VkLmdvb2dsZS5jb20nLCAnX2JsYW5rJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RlcDIgPSBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XG4gICAgICAgIHN0ZXAyLmlubmVySFRNTCA9ICc8c3Ryb25nPlx1RDUwNFx1Qjg1Q1x1QzgxRFx1RDJCOCBcdUMxMjBcdUQwREQvXHVDMEREXHVDMTMxOjwvc3Ryb25nPiBcdUFFMzBcdUM4NzQgXHVENTA0XHVCODVDXHVDODFEXHVEMkI4XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QUM3MFx1QjA5OCBcdUMwQzggXHVENTA0XHVCODVDXHVDODFEXHVEMkI4XHVCOTdDIFx1QzBERFx1QzEzMVx1RDU2OVx1QjJDOFx1QjJFNC4nO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RlcDMgPSBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XG4gICAgICAgIHN0ZXAzLmlubmVySFRNTCA9ICc8c3Ryb25nPlRleHQtdG8tU3BlZWNoIEFQSSBcdUQ2NUNcdUMxMzFcdUQ2NTQ6PC9zdHJvbmc+ICc7XG4gICAgICAgIGNvbnN0IHN0ZXAzTGluayA9IHN0ZXAzLmNyZWF0ZUVsKCdhJywge1xuICAgICAgICAgICAgdGV4dDogJ0FQSSBcdUI3N0NcdUM3NzRcdUJFMENcdUI3RUNcdUI5QUNcdUM1RDBcdUMxMUMgXHVENjVDXHVDMTMxXHVENjU0JyxcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2xpYnJhcnkvdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tJyxcbiAgICAgICAgICAgIGF0dHI6IHsgc3R5bGU6ICdjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsnIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHN0ZXAzTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2xpYnJhcnkvdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tJywgJ19ibGFuaycpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0ZXA0ID0gc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScpO1xuICAgICAgICBzdGVwNC5pbm5lckhUTUwgPSAnPHN0cm9uZz5BUEkgXHVEMEE0IFx1QzBERFx1QzEzMTo8L3N0cm9uZz4gXHVDMEFDXHVDNkE5XHVDNzkwIFx1Qzc3OFx1Qzk5RCBcdUM4MTVcdUJDRjQgPiBBUEkgXHVEMEE0ID4gXHVDMEM4IEFQSSBcdUQwQTQgXHVDMEREXHVDMTMxJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0ZXA1ID0gc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScpO1xuICAgICAgICBzdGVwNS5pbm5lckhUTUwgPSAnPHN0cm9uZz5BUEkgXHVEMEE0IFx1QzgxQ1x1RDU1QyBcdUMxMjRcdUM4MTUgKFx1QUQ4Q1x1QzdBNSk6PC9zdHJvbmc+IFx1RDBBNCBcdUM4MUNcdUQ1NUMgPiBBUEkgXHVDODFDXHVENTVDID4gQ2xvdWQgVGV4dC10by1TcGVlY2ggQVBJIFx1QzEyMFx1RDBERCc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB3YXJuaW5nRWwgPSBndWlkZUVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDEwcHg7IHBhZGRpbmc6IDhweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvci1yZ2IpOyBib3JkZXItcmFkaXVzOiAzcHg7IGZvbnQtc2l6ZTogMC45ZW07JyB9XG4gICAgICAgIH0pO1xuICAgICAgICB3YXJuaW5nRWwuaW5uZXJIVE1MID0gJ1x1MjZBMFx1RkUwRiA8c3Ryb25nPlx1QzkxMVx1QzY5NDo8L3N0cm9uZz4gVGV4dC10by1TcGVlY2ggQVBJXHVBQzAwIFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM3NDAgXHVBQ0JEXHVDNkIwIFwiQVBJX0tFWV9TRVJWSUNFX0JMT0NLRURcIiBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTY5XHVCMkM4XHVCMkU0Lic7XG5cbiAgICAgICAgLy8gR29vZ2xlIENsb3VkIEFQSSBcdUQwQTQgXHVDMTI0XHVDODE1XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0dvb2dsZSBDbG91ZCBUVFMgQVBJIFx1RDBBNCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnR29vZ2xlIENsb3VkIFRleHQtdG8tU3BlZWNoIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC1hcGkta2V5LXNldHRpbmcnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEtleSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTQXBpS2V5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY3J5cHRlZEtleSA9IGRlY3J5cHRBcGlLZXkoY3VycmVudEtleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQUl6YS4uLicpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShtYXNrZWRLZXkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkS2V5ID0gZW5jcnlwdEFwaUtleSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNBcGlLZXkgPSBlbmNyeXB0ZWRLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4JylcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNUYwXHVBQ0IwXHVDNzQ0IFx1RDE0Q1x1QzJBNFx1RDJCOFx1RDU2OVx1QjJDOFx1QjJFNCcpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzkxMS4uLicpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0R29vZ2xlQ2xvdWRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgXHVDNUI4XHVDNUI0IFx1QzEyNFx1QzgxNVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM1QjhcdUM1QjQgXHVDRjU0XHVCNERDJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDNUI4XHVDNUI0IFx1Q0Y1NFx1QjREQ1x1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcbiAgICAgICAgICAgIC5zZXRDbGFzcygnZ29vZ2xlLWNsb3VkLWxhbmd1YWdlLXNldHRpbmcnKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMnLCAnRW5nbGlzaCAoVVMpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQicsICdFbmdsaXNoIChVSyknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUFVJywgJ0VuZ2xpc2ggKEFVKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tSU4nLCAnRW5nbGlzaCAoSW5kaWEpJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVHb29nbGVDbG91ZFZvaWNlcygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgXHVDNzRDXHVDMTMxIFx1QzEyMFx1RDBERFxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3NENcdUMxMzEgXHVDMTIwXHVEMEREJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdHb29nbGUgQ2xvdWQgVFRTXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUM3NENcdUMxMzFcdUM3NDQgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC12b2ljZS1zZXR0aW5nJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUdvb2dsZUNsb3VkVm9pY2VEcm9wZG93bihkcm9wZG93bik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJylcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnXHVDMTIwXHVEMEREXHVENTVDIFx1Qzc0Q1x1QzEzMVx1QzczQ1x1Qjg1QyBcdUMwRDhcdUQ1MEMgXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1QzdBQ1x1QzBERFx1RDU2OVx1QjJDOFx1QjJFNCcpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDN0FDXHVDMEREIFx1QzkxMS4uLicpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbGF5R29vZ2xlQ2xvdWRWb2ljZVByZXZpZXcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUM3QUNcdUMwREQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVx1QjRFNFxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUI5RDBcdUQ1NThcdUFFMzAgXHVDMThEXHVCM0M0IChTcGVha2luZyBSYXRlKScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxXHVDNzU4IFx1QjlEMFx1RDU1OFx1QUUzMCBcdUMxOERcdUIzQzRcdUI5N0MgXHVDODcwXHVDODA4XHVENTY5XHVCMkM4XHVCMkU0LiAoMC4yNSA9IFx1QjI5MFx1QjlCQywgNC4wID0gXHVCRTYwXHVCOTg0KScpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC1zcGVha2luZy1yYXRlLXNldHRpbmcnKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLjI1LCA0LjAsIDAuMjUpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTU3BlYWtpbmdSYXRlKVxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU1NwZWFraW5nUmF0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNzRDXHVDMTMxIFx1QjE5Mlx1QjBBRVx1Qzc3NCAoUGl0Y2gpJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUM3NENcdUMxMzFcdUM3NTggXHVCMTkyXHVCMEFFXHVDNzc0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKC0yMC4wID0gXHVCMEFFXHVDNzRDLCAyMC4wID0gXHVCMTkyXHVDNzRDKScpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC1waXRjaC1zZXR0aW5nJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoLTIwLjAsIDIwLjAsIDEuMClcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNQaXRjaClcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNQaXRjaCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwb3B1bGF0ZUdvb2dsZUNsb3VkVm9pY2VEcm9wZG93bihkcm9wZG93bjogYW55KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlQ29kZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTTGFuZ3VhZ2VDb2RlO1xuICAgICAgICBcbiAgICAgICAgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLVVTJykge1xuICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1Kb3VybmV5LUQnLCAnSm91cm5leS1EIChNYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtSm91cm5leS1GJywgJ0pvdXJuZXktRiAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtSm91cm5leS1PJywgJ0pvdXJuZXktTyAoTWFsZSknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItQScsICdOZXVyYWwyLUEgKE1hbGUpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUMnLCAnTmV1cmFsMi1DIChGZW1hbGUpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUQnLCAnTmV1cmFsMi1EIChNYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1FJywgJ05ldXJhbDItRSAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1GJywgJ05ldXJhbDItRiAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1HJywgJ05ldXJhbDItRyAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1IJywgJ05ldXJhbDItSCAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1JJywgJ05ldXJhbDItSSAoTWFsZSknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItSicsICdOZXVyYWwyLUogKE1hbGUpJyk7XG4gICAgICAgIH0gZWxzZSBpZiAobGFuZ3VhZ2VDb2RlID09PSAnZW4tR0InKSB7XG4gICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUdCLU5ldXJhbDItQScsICdOZXVyYWwyLUEgKEZlbWFsZSknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUdCLU5ldXJhbDItQicsICdOZXVyYWwyLUIgKE1hbGUpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQi1OZXVyYWwyLUMnLCAnTmV1cmFsMi1DIChGZW1hbGUpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQi1OZXVyYWwyLUQnLCAnTmV1cmFsMi1EIChNYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tR0ItTmV1cmFsMi1GJywgJ05ldXJhbDItRiAoRmVtYWxlKScpO1xuICAgICAgICB9IGVsc2UgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUFVJykge1xuICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1BVS1OZXVyYWwyLUEnLCAnTmV1cmFsMi1BIChGZW1hbGUpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1BVS1OZXVyYWwyLUInLCAnTmV1cmFsMi1CIChNYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tQVUtTmV1cmFsMi1DJywgJ05ldXJhbDItQyAoRmVtYWxlKScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tQVUtTmV1cmFsMi1EJywgJ05ldXJhbDItRCAoTWFsZSknKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignZW4tVVMtSm91cm5leS1GJywgJ0pvdXJuZXktRiAoRmVtYWxlKScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVHb29nbGVDbG91ZFZvaWNlcygpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgdm9pY2VEcm9wZG93biA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLmdvb2dsZS1jbG91ZC12b2ljZS1zZXR0aW5nIHNlbGVjdCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgICAgICBpZiAodm9pY2VEcm9wZG93bikge1xuICAgICAgICAgICAgdm9pY2VEcm9wZG93bi5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3duID0geyBhZGRPcHRpb246ICh2YWx1ZTogc3RyaW5nLCB0ZXh0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBvcHRpb24udGV4dCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgdm9pY2VEcm9wZG93bi5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICAgICAgfX07XG4gICAgICAgICAgICB0aGlzLnBvcHVsYXRlR29vZ2xlQ2xvdWRWb2ljZURyb3Bkb3duKGRyb3Bkb3duKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVBRTMwXHVCQ0Y4IFx1Qzc0Q1x1QzEzMSBcdUMxMjRcdUM4MTVcbiAgICAgICAgICAgIGNvbnN0IGxhbmd1YWdlQ29kZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTTGFuZ3VhZ2VDb2RlO1xuICAgICAgICAgICAgbGV0IGRlZmF1bHRWb2ljZSA9ICdlbi1VUy1Kb3VybmV5LUYnO1xuICAgICAgICAgICAgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUdCJykgZGVmYXVsdFZvaWNlID0gJ2VuLUdCLU5ldXJhbDItQSc7XG4gICAgICAgICAgICBlbHNlIGlmIChsYW5ndWFnZUNvZGUgPT09ICdlbi1BVScpIGRlZmF1bHRWb2ljZSA9ICdlbi1BVS1OZXVyYWwyLUEnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2b2ljZURyb3Bkb3duLnZhbHVlID0gZGVmYXVsdFZvaWNlO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UgPSBkZWZhdWx0Vm9pY2U7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlVFRTUHJvdmlkZXJTZXR0aW5ncygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQcm92aWRlcjtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNoYXR0ZXJib3hTZXR0aW5ncyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmNoYXR0ZXJib3gtYXBpLXVybC1zZXR0aW5nLCAuY2hhdHRlcmJveC12b2ljZS1zZXR0aW5nLCAuY2hhdHRlcmJveC1leGFnZ2VyYXRpb24tc2V0dGluZywgLmNoYXR0ZXJib3gtY2ZnLXNldHRpbmcsIC5jaGF0dGVyYm94LXRlbXBlcmF0dXJlLXNldHRpbmcnKTtcbiAgICAgICAgY29uc3QgZ29vZ2xlQ2xvdWRTZXR0aW5ncyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmdvb2dsZS1jbG91ZC10dHMtZ3VpZGUsIC5nb29nbGUtY2xvdWQtYXBpLWtleS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLWxhbmd1YWdlLXNldHRpbmcsIC5nb29nbGUtY2xvdWQtdm9pY2Utc2V0dGluZywgLmdvb2dsZS1jbG91ZC1zcGVha2luZy1yYXRlLXNldHRpbmcsIC5nb29nbGUtY2xvdWQtcGl0Y2gtc2V0dGluZycpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVCQUE4XHVCNEUwIFx1QzEyNFx1QzgxNSBcdUMyMjhcdUFFNDBcbiAgICAgICAgY2hhdHRlcmJveFNldHRpbmdzLmZvckVhY2goc2V0dGluZyA9PiB7XG4gICAgICAgICAgICAoc2V0dGluZyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfSk7XG4gICAgICAgIGdvb2dsZUNsb3VkU2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nID0+IHtcbiAgICAgICAgICAgIChzZXR0aW5nIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QzEyMFx1RDBERFx1QjQxQyBcdUM4MUNcdUFDRjVcdUM3OTBcdUM3NTggXHVDMTI0XHVDODE1XHVCOUNDIFx1RDQ1Q1x1QzJEQ1xuICAgICAgICBpZiAocHJvdmlkZXIgPT09ICdjaGF0dGVyYm94Jykge1xuICAgICAgICAgICAgY2hhdHRlcmJveFNldHRpbmdzLmZvckVhY2goc2V0dGluZyA9PiB7XG4gICAgICAgICAgICAgICAgKHNldHRpbmcgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHByb3ZpZGVyID09PSAnZ29vZ2xlLWNsb3VkJykge1xuICAgICAgICAgICAgZ29vZ2xlQ2xvdWRTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmcgPT4ge1xuICAgICAgICAgICAgICAgIChzZXR0aW5nIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcGxheUNoYXR0ZXJib3hWb2ljZVByZXZpZXcoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzYW1wbGVUZXh0cyA9IFtcbiAgICAgICAgICAgICAgICAnSGVsbG8sIHRoaXMgaXMgYSBzYW1wbGUgdm9pY2UgcHJldmlldy4nLFxuICAgICAgICAgICAgICAgICdXZWxjb21lIHRvIEVuZ2xpc2ggdm9jYWJ1bGFyeSBsZWFybmluZy4nLFxuICAgICAgICAgICAgICAgICdUaGlzIHZvaWNlIHdpbGwgaGVscCB5b3UgbGVhcm4gcHJvbnVuY2lhdGlvbi4nLFxuICAgICAgICAgICAgICAgICdCZWF1dGlmdWwgd29yZHMgbWFrZSBiZWF1dGlmdWwgc2VudGVuY2VzLidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbVRleHQgPSBzYW1wbGVUZXh0c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzYW1wbGVUZXh0cy5sZW5ndGgpXTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94QXBpVXJsfS92MS9hdWRpby9zcGVlY2hgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBpbnB1dDogcmFuZG9tVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgdm9pY2U6IHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c1ZvaWNlLFxuICAgICAgICAgICAgICAgICAgICBleGFnZ2VyYXRpb246IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hFeGFnZ2VyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGNmZ193ZWlnaHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hDZmdXZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94VGVtcGVyYXR1cmVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYXR0ZXJib3ggVFRTIEFQSSBcdUM2MjRcdUI5NTg6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChhdWRpb0Jsb2IpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhhdWRpb1VybCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgYXVkaW8ub25lbmRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAgXHVDNjQ0XHVCOENDIScpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhdWRpby5wbGF5KCkuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaGF0dGVyYm94IFRUUyBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzBcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODRcdUFDMDAgXHVDMkU0XHVENTg5IFx1QzkxMVx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcGxheUdvb2dsZUNsb3VkVm9pY2VQcmV2aWV3KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlVGV4dHMgPSBbXG4gICAgICAgICAgICAgICAgJ0hlbGxvLCB0aGlzIGlzIGEgc2FtcGxlIHZvaWNlIHByZXZpZXcuJyxcbiAgICAgICAgICAgICAgICAnV2VsY29tZSB0byBFbmdsaXNoIHZvY2FidWxhcnkgbGVhcm5pbmcuJyxcbiAgICAgICAgICAgICAgICAnVGhpcyB2b2ljZSB3aWxsIGhlbHAgeW91IGxlYXJuIHByb251bmNpYXRpb24uJyxcbiAgICAgICAgICAgICAgICAnQmVhdXRpZnVsIHdvcmRzIG1ha2UgYmVhdXRpZnVsIHNlbnRlbmNlcy4nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByYW5kb21UZXh0ID0gc2FtcGxlVGV4dHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2FtcGxlVGV4dHMubGVuZ3RoKV07XG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSBkZWNyeXB0QXBpS2V5KHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTQXBpS2V5KTtcblxuICAgICAgICAgICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dvb2dsZSBDbG91ZCBUVFMgQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogeyB0ZXh0OiByYW5kb21UZXh0IH0sXG4gICAgICAgICAgICAgICAgdm9pY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGF1ZGlvQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvRW5jb2Rpbmc6ICdNUDMnLFxuICAgICAgICAgICAgICAgICAgICBzcGVha2luZ1JhdGU6IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTU3BlYWtpbmdSYXRlLFxuICAgICAgICAgICAgICAgICAgICBwaXRjaDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNQaXRjaFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tL3YxL3RleHQ6c3ludGhlc2l6ZT9rZXk9JHthcGlLZXl9YCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGV0YWlsZWRFcnJvciA9IHRoaXMuZ2V0RGV0YWlsZWRHb29nbGVDbG91ZEVycm9yKHJlc3BvbnNlLnN0YXR1cywgZXJyb3JEYXRhKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGV0YWlsZWRFcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSB0aGlzLmJhc2U2NFRvQmxvYihkYXRhLmF1ZGlvQ29udGVudCwgJ2F1ZGlvL21wMycpO1xuICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKGF1ZGlvVXJsKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVuZGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzRDXHVDMTMxIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2NDRcdUI4Q0MhJyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGF1ZGlvLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGF1ZGlvLnBsYXkoKS5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBDbG91ZCBUVFMgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XG4gICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnQVBJXHVBQzAwIFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQnKSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0FQSSBcdUQwQTQnKSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdUM3NENcdUMxMzEgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gQVBJIFx1RDBBNFx1QzY0MCBcdUM3NzhcdUQxMzBcdUIxMzcgXHVDNUYwXHVBQ0IwXHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBiYXNlNjRUb0Jsb2IoYmFzZTY0OiBzdHJpbmcsIG1pbWVUeXBlOiBzdHJpbmcpOiBCbG9iIHtcbiAgICAgICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NCk7XG4gICAgICAgIGNvbnN0IGJ5dGVOdW1iZXJzID0gbmV3IEFycmF5KGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBieXRlTnVtYmVyc1tpXSA9IGJ5dGVDaGFyYWN0ZXJzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVOdW1iZXJzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtieXRlQXJyYXldLCB7IHR5cGU6IG1pbWVUeXBlIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgdGVzdEdvb2dsZUNsb3VkQ29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IGRlY3J5cHRBcGlLZXkodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNBcGlLZXkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUQwQTRcdUI5N0MgXHVCQTNDXHVDODAwIFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tL3YxL3RleHQ6c3ludGhlc2l6ZT9rZXk9JHthcGlLZXl9YCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHsgdGV4dDogJ0Nvbm5lY3Rpb24gdGVzdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgdm9pY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogJ2VuLVVTJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdlbi1VUy1Kb3VybmV5LUYnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0VuY29kaW5nOiAnTVAzJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNSEnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbGVkRXJyb3IgPSB0aGlzLmdldERldGFpbGVkR29vZ2xlQ2xvdWRFcnJvcihyZXNwb25zZS5zdGF0dXMsIGVycm9yRGF0YSk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDICR7ZGV0YWlsZWRFcnJvcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBDbG91ZCBUVFMgXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ1x1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QycpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHVDNzc4XHVEMTMwXHVCMTM3IFx1QzVGMFx1QUNCMFx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldERldGFpbGVkR29vZ2xlQ2xvdWRFcnJvcihzdGF0dXM6IG51bWJlciwgZXJyb3JEYXRhOiBhbnkpOiBzdHJpbmcge1xuICAgICAgICBpZiAoZXJyb3JEYXRhPy5lcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBlcnJvckRhdGEuZXJyb3I7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFQSVx1QUMwMCBcdUNDMjhcdUIyRThcdUI0MUMgXHVBQ0JEXHVDNkIwICg0MDMgUEVSTUlTU0lPTl9ERU5JRUQgd2l0aCBBUElfS0VZX1NFUlZJQ0VfQkxPQ0tFRClcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMyAmJiBlcnJvci5kZXRhaWxzPy5zb21lKChkZXRhaWw6IGFueSkgPT4gXG4gICAgICAgICAgICAgICAgZGV0YWlsLnJlYXNvbiA9PT0gJ0FQSV9LRVlfU0VSVklDRV9CTE9DS0VEJyB8fCBcbiAgICAgICAgICAgICAgICBkZXRhaWxbJ0B0eXBlJ10/LmluY2x1ZGVzKCdFcnJvckluZm8nKSAmJiBkZXRhaWwucmVhc29uID09PSAnQVBJX0tFWV9TRVJWSUNFX0JMT0NLRUQnXG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdUZXh0LXRvLVNwZWVjaCBBUElcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDNzA0XHVDNzU4IFx1QUMwMFx1Qzc3NFx1QjREQ1x1Qjk3QyBcdUNDMzhcdUFDRTBcdUQ1NThcdUM1RUMgQVBJXHVCOTdDIFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBUEkgXHVEMEE0IFx1QUQwMFx1QjgyOCBcdUM2MjRcdUI5NThcdUI0RTRcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMykge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnQVBJIGtleSBub3QgdmFsaWQnKSB8fCBlcnJvci5jb2RlID09PSAnSU5WQUxJRF9BUkdVTUVOVCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTQuIFx1RDBBNFx1Qjk3QyBcdUIyRTRcdUMyREMgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygncXVvdGEnKSB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnUVVPVEFfRVhDRUVERUQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0FQSSBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NzQgXHVDRDA4XHVBQ0ZDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBHb29nbGUgQ2xvdWQgQ29uc29sZVx1QzVEMFx1QzExQyBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAnQVBJIFx1QzgxMVx1QURGQ1x1Qzc3NCBcdUFDNzBcdUJEODBcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTQgXHVBRDhDXHVENTVDXHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUM3NzhcdUM5OUQgXHVDNjI0XHVCOTU4ICg0MDEpXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0FQSSBcdUQwQTQgXHVDNzc4XHVDOTlEXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gQVBJIFx1RDBBNFx1QUMwMCBcdUM2MkNcdUJDMTRcdUI5NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QzY5NFx1Q0NBRCBcdUM2MjRcdUI5NTggKDQwMClcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnQVBJIFx1QzY5NFx1Q0NBRFx1Qzc3NCBcdUM3OThcdUJBQkJcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1Qzc0Q1x1QzEzMSBcdUMxMjRcdUM4MTVcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUMwQUNcdUM2QTkgXHVCRDg4XHVBQzAwICg1MDMpXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA1MDMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0XHVBQzAwIFx1Qzc3Q1x1QzJEQ1x1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDN0EwXHVDMkRDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBgQVBJIFx1QzYyNFx1Qjk1OCAoJHtzdGF0dXN9KTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTgnfWA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBgQVBJIFx1QzYyNFx1Qjk1ODogJHtzdGF0dXN9IFx1QzBDMVx1RDBEQyBcdUNGNTRcdUI0RENgO1xuICAgIH1cblxufSAiLCAiLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQvXHVCQ0Y1XHVENjM4XHVENjU0IFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMCAoV2ViIENyeXB0byBBUEkgXHVDMEFDXHVDNkE5KVxuXG4vLyBcdUQzQzlcdUJCMzggQVBJIFx1RDBBNFx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NThcdUIyOTQgXHVENUVDXHVEMzdDIFx1RDU2OFx1QzIxOFxuZnVuY3Rpb24gaXNQbGFpblRleHRBcGlLZXkoYXBpS2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIWFwaUtleSkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIC8vIFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBBUEkgXHVEMEE0IFx1RDMyOFx1RDEzNFx1QjRFNFxuICAgIGNvbnN0IGFwaUtleVBhdHRlcm5zID0gW1xuICAgICAgICAvXnNrLVthLXpBLVowLTldezMyLH0kLywgICAgICAgICAgIC8vIE9wZW5BSSBBUEkgXHVEMEE0XG4gICAgICAgIC9ec2stYW50LVthLXpBLVowLTktX117OTV9JC8sICAgICAgLy8gQW50aHJvcGljIEFQSSBcdUQwQTRcbiAgICAgICAgL15BSXphW2EtekEtWjAtOS1fXXszNX0kLywgICAgICAgICAvLyBHb29nbGUgQVBJIFx1RDBBNFxuICAgICAgICAvXlthLXpBLVowLTktX117MjAsfSQvICAgICAgICAgICAgIC8vIFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBcdUFFMzQgXHVEMUEwXHVEMDcwXG4gICAgXTtcbiAgICBcbiAgICByZXR1cm4gYXBpS2V5UGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChhcGlLZXkpKTtcbn1cblxuLy8gXHVDNTQ4XHVDODA0XHVENTVDIFx1QzU1NFx1RDYzOFx1RDY1NFx1Qjk3QyBcdUM3MDRcdUQ1NUMgXHVEMEE0IFx1QzBERFx1QzEzMVxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVFbmNyeXB0aW9uS2V5KCk6IFByb21pc2U8Q3J5cHRvS2V5PiB7XG4gICAgLy8gXHVDMEFDXHVDNkE5XHVDNzkwXHVCQ0M0IFx1QUNFMFx1QzcyMCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBRTMwXHVCQzE4XHVDNzNDXHVCODVDIFx1RDBBNCBcdUMwRERcdUMxMzFcbiAgICBjb25zdCBwbHVnaW5JZCA9ICdvYnNpZGlhbi1lbmdsaXNoLXZvY2FidWxhcnknO1xuICAgIGNvbnN0IHZlcnNpb24gPSAnMC4xJztcbiAgICBjb25zdCB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCkudG9TdHJpbmcoKTtcbiAgICBcbiAgICAvLyBcdUQwQTQgXHVDN0FDXHVCOENDIFx1QzBERFx1QzEzMVxuICAgIGNvbnN0IGtleU1hdGVyaWFsID0gcGx1Z2luSWQgKyB2ZXJzaW9uICsgdXNlckFnZW50ICsgdGltZXN0YW1wO1xuICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICBjb25zdCBrZXlEYXRhID0gZW5jb2Rlci5lbmNvZGUoa2V5TWF0ZXJpYWwpO1xuICAgIFxuICAgIC8vIFdlYiBDcnlwdG8gQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU1QyBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVEMEE0IFx1QjNDNFx1Q0Q5Q1xuICAgIGNvbnN0IGJhc2VLZXkgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShcbiAgICAgICAgJ3JhdycsXG4gICAgICAgIGtleURhdGEsXG4gICAgICAgIHsgbmFtZTogJ1BCS0RGMicgfSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFsnZGVyaXZlQml0cycsICdkZXJpdmVLZXknXVxuICAgICk7XG4gICAgXG4gICAgLy8gUEJLREYyXHVCODVDIFx1QUMxNVx1QjgyNVx1RDU1QyBcdUQwQTQgXHVCM0M0XHVDRDlDXG4gICAgY29uc3QgZGVyaXZlZEtleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVyaXZlS2V5KFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnUEJLREYyJyxcbiAgICAgICAgICAgIHNhbHQ6IGVuY29kZXIuZW5jb2RlKCdvYnNpZGlhbi12b2NhYnVsYXJ5LXNhbHQtMjAyNCcpLFxuICAgICAgICAgICAgaXRlcmF0aW9uczogMTAwMDAwLFxuICAgICAgICAgICAgaGFzaDogJ1NIQS0yNTYnXG4gICAgICAgIH0sXG4gICAgICAgIGJhc2VLZXksXG4gICAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBsZW5ndGg6IDI1NiB9LFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgWydlbmNyeXB0JywgJ2RlY3J5cHQnXVxuICAgICk7XG4gICAgXG4gICAgcmV0dXJuIGRlcml2ZWRLZXk7XG59XG5cbi8vIFdlYiBDcnlwdG8gQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU1QyBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVDNTU0XHVENjM4XHVENjU0IChBc3luYylcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNyeXB0QXBpS2V5QXN5bmMoYXBpS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICghYXBpS2V5KSByZXR1cm4gJyc7XG4gICAgXG4gICAgLy8gXHVDNzc0XHVCQkY4IFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUQwQTRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XG4gICAgaWYgKCFpc1BsYWluVGV4dEFwaUtleShhcGlLZXkpKSB7XG4gICAgICAgIHJldHVybiBhcGlLZXk7IC8vIFx1Qzc3NFx1QkJGOCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVBQzgzXHVDNzNDXHVCODVDIFx1QUMwNFx1QzhGQ1x1RDU1OFx1QUNFMCBcdUFERjhcdUIzMDBcdUI4NUMgXHVCQzE4XHVENjU4XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IGdlbmVyYXRlRW5jcnlwdGlvbktleSgpO1xuICAgICAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBlbmNvZGVyLmVuY29kZShhcGlLZXkpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVCNzlDXHVCMzY0IElWIFx1QzBERFx1QzEzMVxuICAgICAgICBjb25zdCBpdiA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMTIpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFFUy1HQ00gXHVDNTU0XHVENjM4XHVENjU0XG4gICAgICAgIGNvbnN0IGVuY3J5cHRlZCA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZW5jcnlwdChcbiAgICAgICAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBpdjogaXYgfSxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIGRhdGFcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElWXHVDNjQwIFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVBQ0IwXHVENTY5XHVENTU4XHVDNUVDIEJhc2U2NCBcdUM3NzhcdUNGNTRcdUI1MjlcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkQXJyYXkgPSBuZXcgVWludDhBcnJheShlbmNyeXB0ZWQpO1xuICAgICAgICBjb25zdCBjb21iaW5lZCA9IG5ldyBVaW50OEFycmF5KGl2Lmxlbmd0aCArIGVuY3J5cHRlZEFycmF5Lmxlbmd0aCk7XG4gICAgICAgIGNvbWJpbmVkLnNldChpdik7XG4gICAgICAgIGNvbWJpbmVkLnNldChlbmNyeXB0ZWRBcnJheSwgaXYubGVuZ3RoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uY29tYmluZWQpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdcdUJFNDRcdUIzRDlcdUFFMzAgXHVDNTU0XHVENjM4XHVENjU0IFx1QzJFNFx1RDMyODonLCAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UpO1xuICAgICAgICAvLyBcdUMyRTRcdUQzMjggXHVDMkRDIFx1QjNEOVx1QUUzMCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI4NUMgXHVEM0Y0XHVCQzMxXG4gICAgICAgIHJldHVybiBlbmNyeXB0QXBpS2V5KGFwaUtleSk7XG4gICAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVjcnlwdEFwaUtleUFzeW5jKGVuY3J5cHRlZEFwaUtleTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAoIWVuY3J5cHRlZEFwaUtleSkgcmV0dXJuICcnO1xuICAgIFxuICAgIC8vIFx1RDNDOVx1QkIzOCBBUEkgXHVEMEE0XHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OCAoXHVDNzdDXHVCQzE4XHVDODAxXHVDNzc4IEFQSSBcdUQwQTQgXHVEMzI4XHVEMTM0KVxuICAgIGlmIChpc1BsYWluVGV4dEFwaUtleShlbmNyeXB0ZWRBcGlLZXkpKSB7XG4gICAgICAgIHJldHVybiBlbmNyeXB0ZWRBcGlLZXk7IC8vIFx1RDNDOVx1QkIzOFx1Qzc3NFx1QkE3NCBcdUFERjhcdUIzMDBcdUI4NUMgXHVCQzE4XHVENjU4XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IGdlbmVyYXRlRW5jcnlwdGlvbktleSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQmFzZTY0IFx1QjUxNFx1Q0Y1NFx1QjUyOVxuICAgICAgICBjb25zdCBjb21iaW5lZCA9IG5ldyBVaW50OEFycmF5KFxuICAgICAgICAgICAgYXRvYihlbmNyeXB0ZWRBcGlLZXkpXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcnKVxuICAgICAgICAgICAgICAgIC5tYXAoY2hhciA9PiBjaGFyLmNoYXJDb2RlQXQoMCkpXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBJVlx1QzY0MCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QkQ4NFx1QjlBQ1xuICAgICAgICBjb25zdCBpdiA9IGNvbWJpbmVkLnNsaWNlKDAsIDEyKTtcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkID0gY29tYmluZWQuc2xpY2UoMTIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQUVTLUdDTSBcdUJDRjVcdUQ2MzhcdUQ2NTRcbiAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kZWNyeXB0KFxuICAgICAgICAgICAgeyBuYW1lOiAnQUVTLUdDTScsIGl2OiBpdiB9LFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgZW5jcnlwdGVkXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICAgIHJldHVybiBkZWNvZGVyLmRlY29kZShkZWNyeXB0ZWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIGF0b2IgXHVDMkU0XHVEMzI4XHVENTU4XHVBQzcwXHVCMDk4IFx1QkNGNVx1RDYzOFx1RDY1NCBcdUMyRTRcdUQzMjhcdUQ1NThcdUJBNzQgXHVEM0M5XHVCQjM4XHVDNzdDIFx1QUMwMFx1QjJBNVx1QzEzMVx1Qzc3NCBcdUIxOTJcdUM3NENcbiAgICAgICAgY29uc29sZS53YXJuKCdcdUJFNDRcdUIzRDlcdUFFMzAgXHVCQ0Y1XHVENjM4XHVENjU0IFx1QzJFNFx1RDMyOCwgXHVEM0M5XHVCQjM4XHVDNzNDXHVCODVDIFx1QUMwNFx1QzhGQzonLCAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gZW5jcnlwdGVkQXBpS2V5O1xuICAgIH1cbn1cblxuLy8gXHVCM0Q5XHVBRTMwXHVDMkREIFx1RDYzOFx1RDY1OFx1QzEzMVx1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVCNzk4XHVEMzdDIFx1RDU2OFx1QzIxOFx1QjRFNCAoTGVnYWN5KVxuZXhwb3J0IGZ1bmN0aW9uIGVuY3J5cHRBcGlLZXkoYXBpS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghYXBpS2V5KSByZXR1cm4gJyc7XG4gICAgXG4gICAgLy8gXHVDNzc0XHVCQkY4IFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUQwQTRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XG4gICAgaWYgKCFpc1BsYWluVGV4dEFwaUtleShhcGlLZXkpKSB7XG4gICAgICAgIHJldHVybiBhcGlLZXk7IC8vIFx1Qzc3NFx1QkJGOCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVBQzgzXHVDNzNDXHVCODVDIFx1QUMwNFx1QzhGQ1x1RDU1OFx1QUNFMCBcdUFERjhcdUIzMDBcdUI4NUMgXHVCQzE4XHVENjU4XG4gICAgfVxuICAgIFxuICAgIC8vIFx1QkU0NFx1QjNEOVx1QUUzMCBcdUQ1NjhcdUMyMThcdUI5N0MgXHVCM0Q5XHVBRTMwXHVDODAxXHVDNzNDXHVCODVDIFx1QzBBQ1x1QzZBOVx1RDU1OFx1QUUzMCBcdUM3MDRcdUQ1NUMgXHVEM0Y0XHVCQzMxXG4gICAgLy8gXHVDMkU0XHVDODFDXHVCODVDXHVCMjk0IFx1QkU0NFx1QjNEOVx1QUUzMCBcdUJDODRcdUM4MDRcdUM3NDQgXHVDMEFDXHVDNkE5XHVENTU4XHVCMjk0IFx1QUM4M1x1Qzc0NCBcdUFEOENcdUM3QTVcbiAgICB0cnkge1xuICAgICAgICAvLyBcdUFDMDRcdUIyRThcdUQ1NUMgWE9SIFx1QzU1NFx1RDYzOFx1RDY1NCAoXHVENjM4XHVENjU4XHVDMTMxXHVDNkE5KVxuICAgICAgICBjb25zdCBrZXkgPSAnb2JzaWRpYW4tdm9jYWItdGVtcC1rZXktMjAyNCc7XG4gICAgICAgIGxldCBlbmNyeXB0ZWQgPSAnJztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcGlLZXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXJDb2RlID0gYXBpS2V5LmNoYXJDb2RlQXQoaSkgXiBrZXkuY2hhckNvZGVBdChpICUga2V5Lmxlbmd0aCk7XG4gICAgICAgICAgICBlbmNyeXB0ZWQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ0b2EoZW5jcnlwdGVkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIzRDlcdUFFMzAgXHVDNTU0XHVENjM4XHVENjU0IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNyeXB0QXBpS2V5KGVuY3J5cHRlZEFwaUtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWVuY3J5cHRlZEFwaUtleSkgcmV0dXJuICcnO1xuICAgIFxuICAgIC8vIFx1RDNDOVx1QkIzOCBBUEkgXHVEMEE0XHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OCAoXHVDNzdDXHVCQzE4XHVDODAxXHVDNzc4IEFQSSBcdUQwQTQgXHVEMzI4XHVEMTM0KVxuICAgIGlmIChpc1BsYWluVGV4dEFwaUtleShlbmNyeXB0ZWRBcGlLZXkpKSB7XG4gICAgICAgIHJldHVybiBlbmNyeXB0ZWRBcGlLZXk7IC8vIFx1RDNDOVx1QkIzOFx1Qzc3NFx1QkE3NCBcdUFERjhcdUIzMDBcdUI4NUMgXHVCQzE4XHVENjU4XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGtleSA9ICdvYnNpZGlhbi12b2NhYi10ZW1wLWtleS0yMDI0JztcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGF0b2IoZW5jcnlwdGVkQXBpS2V5KTtcbiAgICAgICAgbGV0IGRlY3J5cHRlZCA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlY29kZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXJDb2RlID0gZGVjb2RlZC5jaGFyQ29kZUF0KGkpIF4ga2V5LmNoYXJDb2RlQXQoaSAlIGtleS5sZW5ndGgpO1xuICAgICAgICAgICAgZGVjcnlwdGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWNyeXB0ZWQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gYXRvYiBcdUMyRTRcdUQzMjhcdUQ1NThcdUJBNzQgXHVEM0M5XHVCQjM4XHVDNzdDIFx1QUMwMFx1QjJBNVx1QzEzMVx1Qzc3NCBcdUIxOTJcdUM3NENcbiAgICAgICAgY29uc29sZS53YXJuKCdcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4LCBcdUQzQzlcdUJCMzhcdUM3M0NcdUI4NUMgXHVBQzA0XHVDOEZDOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gZW5jcnlwdGVkQXBpS2V5O1xuICAgIH1cbn1cblxuLy8gQVBJIFx1RDBBNFx1Qjk3QyBcdUI5QzhcdUMyQTRcdUQwQjlcdUQ1NThcdUM1RUMgXHVENDVDXHVDMkRDXG5leHBvcnQgZnVuY3Rpb24gbWFza0FwaUtleShhcGlLZXk6IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGwpOiBzdHJpbmcge1xuICAgIC8vIG51bGwsIHVuZGVmaW5lZCwgXHVCRTQ4IFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUNDQjRcdUQwNkNcbiAgICBpZiAoIWFwaUtleSB8fCB0eXBlb2YgYXBpS2V5ICE9PSAnc3RyaW5nJykgcmV0dXJuICcnO1xuICAgIFxuICAgIC8vIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUFFMzhcdUM3NzRcdUFDMDAgOCBcdUM3NzRcdUQ1NThcdUM3NzggXHVBQ0JEXHVDNkIwXG4gICAgaWYgKGFwaUtleS5sZW5ndGggPD0gOCkgcmV0dXJuICcqJy5yZXBlYXQoYXBpS2V5Lmxlbmd0aCk7XG4gICAgXG4gICAgLy8gXHVDODE1XHVDMEMxXHVDODAxXHVDNzc4IFx1QjlDOFx1QzJBNFx1RDBCOSBcdUNDOThcdUI5QUNcbiAgICByZXR1cm4gYXBpS2V5LnN1YnN0cmluZygwLCA0KSArICcqJy5yZXBlYXQoYXBpS2V5Lmxlbmd0aCAtIDgpICsgYXBpS2V5LnN1YnN0cmluZyhhcGlLZXkubGVuZ3RoIC0gNCk7XG59XG5cbi8vIFx1QjBBMFx1QzlEQyBcdUQzRUNcdUI5RjdcdUQzMDUgXHVDNzIwXHVEMkY4XHVCOUFDXHVEMkYwXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlU3RyaW5nOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgICBpZiAoIWRhdGVTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuICdcdUM1QzZcdUM3NEMnO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcbiAgICBcbiAgICBpZiAoaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICAgIHJldHVybiAnXHVDNzk4XHVCQUJCXHVCNDFDIFx1QjBBMFx1QzlEQyc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdrby1LUicsIHtcbiAgICAgICAgeWVhcjogJ251bWVyaWMnLFxuICAgICAgICBtb250aDogJ2xvbmcnLFxuICAgICAgICBkYXk6ICdudW1lcmljJ1xuICAgIH0pO1xufSAiLCAiLy8gXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4IFx1QzEyNFx1QzgxNSBcdUMwQzFcdUMyMTggXHVCQzBGIFx1QUQ2Q1x1QzEzMVxuXG5leHBvcnQgaW50ZXJmYWNlIFBsdWdpbkNvbmZpZyB7XG4gICAgLy8gQVBJIFx1QUQwMFx1QjgyOCBcdUMxMjRcdUM4MTVcbiAgICBhcGk6IHtcbiAgICAgICAgdGltZW91dHM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bWJlcjtcbiAgICAgICAgICAgIGxsbTogbnVtYmVyO1xuICAgICAgICAgICAgdHRzOiBudW1iZXI7XG4gICAgICAgIH07XG4gICAgICAgIHJldHJpZXM6IHtcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiBudW1iZXI7XG4gICAgICAgICAgICBkZWxheU1zOiBudW1iZXI7XG4gICAgICAgICAgICBleHBvbmVudGlhbEJhY2tvZmY6IGJvb2xlYW47XG4gICAgICAgIH07XG4gICAgICAgIHJhdGVMaW1pdGluZzoge1xuICAgICAgICAgICAgcmVxdWVzdHNQZXJNaW51dGU6IG51bWJlcjtcbiAgICAgICAgICAgIGJ1cnN0TGltaXQ6IG51bWJlcjtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLy8gXHVCQzMwXHVDRTU4IFx1Q0M5OFx1QjlBQyBcdUMxMjRcdUM4MTVcbiAgICBiYXRjaDoge1xuICAgICAgICBkZWZhdWx0U2l6ZTogbnVtYmVyO1xuICAgICAgICBtYXhTaXplOiBudW1iZXI7XG4gICAgICAgIGRlbGF5QmV0d2VlbkJhdGNoZXM6IG51bWJlcjtcbiAgICAgICAgbWF4Q29uY3VycmVudEJhdGNoZXM6IG51bWJlcjtcbiAgICB9O1xuXG4gICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QUQwMFx1QjgyOCBcdUMxMjRcdUM4MTVcbiAgICBhdWRpbzoge1xuICAgICAgICBtYXhQb29sU2l6ZTogbnVtYmVyO1xuICAgICAgICBhdXRvQ2xlYW51cFRpbWVvdXRNczogbnVtYmVyO1xuICAgICAgICBtYXhEdXJhdGlvbk1zOiBudW1iZXI7XG4gICAgfTtcblxuICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUMxMjRcdUM4MTVcbiAgICBkYXRhYmFzZToge1xuICAgICAgICBhdXRvU2F2ZUludGVydmFsOiBudW1iZXI7XG4gICAgICAgIGJhY2t1cEVuYWJsZWQ6IGJvb2xlYW47XG4gICAgICAgIG1heEZpbGVTaXplOiBudW1iZXI7XG4gICAgICAgIGNvbXByZXNzaW9uRW5hYmxlZDogYm9vbGVhbjtcbiAgICB9O1xuXG4gICAgLy8gXHVENTU5XHVDMkI1IFx1QzU0Q1x1QUNFMFx1QjlBQ1x1Qzk5OCBcdUMxMjRcdUM4MTVcbiAgICBsZWFybmluZzoge1xuICAgICAgICBzcGFjZWRfcmVwZXRpdGlvbjoge1xuICAgICAgICAgICAgaW5pdGlhbEludGVydmFsOiBudW1iZXI7XG4gICAgICAgICAgICBlYXN5Qm9udXM6IG51bWJlcjtcbiAgICAgICAgICAgIGhhcmRQZW5hbHR5OiBudW1iZXI7XG4gICAgICAgICAgICBtYXhJbnRlcnZhbDogbnVtYmVyO1xuICAgICAgICAgICAgbWluSW50ZXJ2YWw6IG51bWJlcjtcbiAgICAgICAgfTtcbiAgICAgICAgbG9hZF9iYWxhbmNpbmc6IHtcbiAgICAgICAgICAgIG1heERhaWx5UmV2aWV3czogbnVtYmVyO1xuICAgICAgICAgICAgZnV6emluZ1BlcmNlbnRhZ2U6IG51bWJlcjtcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbldpbmRvdzogbnVtYmVyO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvLyBVSSBcdUMxMjRcdUM4MTVcbiAgICB1aToge1xuICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogbnVtYmVyO1xuICAgICAgICBwcm9ncmVzc1VwZGF0ZUludGVydmFsOiBudW1iZXI7XG4gICAgICAgIG5vdGlmaWNhdGlvblRpbWVvdXQ6IG51bWJlcjtcbiAgICAgICAgbW9kYWxDbG9zZURlbGF5OiBudW1iZXI7XG4gICAgfTtcblxuICAgIC8vIFx1QkNGNFx1QzU0OCBcdUMxMjRcdUM4MTVcbiAgICBzZWN1cml0eToge1xuICAgICAgICBhcGlLZXlFbmNyeXB0aW9uOiB7XG4gICAgICAgICAgICBpdGVyYXRpb25zOiBudW1iZXI7XG4gICAgICAgICAgICBrZXlMZW5ndGg6IG51bWJlcjtcbiAgICAgICAgICAgIHNhbHRMZW5ndGg6IG51bWJlcjtcbiAgICAgICAgfTtcbiAgICAgICAgc2Vzc2lvblRpbWVvdXQ6IG51bWJlcjtcbiAgICAgICAgbWF4TG9naW5BdHRlbXB0czogbnVtYmVyO1xuICAgIH07XG59XG5cbi8vIFx1QUUzMFx1QkNGOCBcdUMxMjRcdUM4MTVcbmV4cG9ydCBjb25zdCBERUZBVUxUX0NPTkZJRzogUGx1Z2luQ29uZmlnID0ge1xuICAgIGFwaToge1xuICAgICAgICB0aW1lb3V0czoge1xuICAgICAgICAgICAgZGVmYXVsdDogMzAwMDAsICAgIC8vIDMwXHVDRDA4XG4gICAgICAgICAgICBsbG06IDYwMDAwLCAgICAgICAgLy8gNjBcdUNEMDhcbiAgICAgICAgICAgIHR0czogMTUwMDAsICAgICAgICAvLyAxNVx1Q0QwOFxuICAgICAgICB9LFxuICAgICAgICByZXRyaWVzOiB7XG4gICAgICAgICAgICBtYXhBdHRlbXB0czogMyxcbiAgICAgICAgICAgIGRlbGF5TXM6IDEwMDAsXG4gICAgICAgICAgICBleHBvbmVudGlhbEJhY2tvZmY6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHJhdGVMaW1pdGluZzoge1xuICAgICAgICAgICAgcmVxdWVzdHNQZXJNaW51dGU6IDYwLFxuICAgICAgICAgICAgYnVyc3RMaW1pdDogMTAsXG4gICAgICAgIH0sXG4gICAgfSxcblxuICAgIGJhdGNoOiB7XG4gICAgICAgIGRlZmF1bHRTaXplOiA1LFxuICAgICAgICBtYXhTaXplOiAyMCxcbiAgICAgICAgZGVsYXlCZXR3ZWVuQmF0Y2hlczogMjAwLFxuICAgICAgICBtYXhDb25jdXJyZW50QmF0Y2hlczogMyxcbiAgICB9LFxuXG4gICAgYXVkaW86IHtcbiAgICAgICAgbWF4UG9vbFNpemU6IDEwLFxuICAgICAgICBhdXRvQ2xlYW51cFRpbWVvdXRNczogMzAwMDAsICAvLyAzMFx1Q0QwOFxuICAgICAgICBtYXhEdXJhdGlvbk1zOiAzMDAwMDAsICAgICAgICAvLyA1XHVCRDg0XG4gICAgfSxcblxuICAgIGRhdGFiYXNlOiB7XG4gICAgICAgIGF1dG9TYXZlSW50ZXJ2YWw6IDUwMDAsICAgICAgIC8vIDVcdUNEMDhcbiAgICAgICAgYmFja3VwRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgbWF4RmlsZVNpemU6IDEwNDg1NzYwLCAgICAgICAgLy8gMTBNQlxuICAgICAgICBjb21wcmVzc2lvbkVuYWJsZWQ6IGZhbHNlLFxuICAgIH0sXG5cbiAgICBsZWFybmluZzoge1xuICAgICAgICBzcGFjZWRfcmVwZXRpdGlvbjoge1xuICAgICAgICAgICAgaW5pdGlhbEludGVydmFsOiAxLCAgICAgICAgLy8gMVx1Qzc3Q1xuICAgICAgICAgICAgZWFzeUJvbnVzOiAxLjMsXG4gICAgICAgICAgICBoYXJkUGVuYWx0eTogMC44LFxuICAgICAgICAgICAgbWF4SW50ZXJ2YWw6IDM2NSwgICAgICAgICAgLy8gMVx1QjE0NFxuICAgICAgICAgICAgbWluSW50ZXJ2YWw6IDEsICAgICAgICAgICAgLy8gMVx1Qzc3Q1xuICAgICAgICB9LFxuICAgICAgICBsb2FkX2JhbGFuY2luZzoge1xuICAgICAgICAgICAgbWF4RGFpbHlSZXZpZXdzOiAxMDAsXG4gICAgICAgICAgICBmdXp6aW5nUGVyY2VudGFnZTogNSxcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbldpbmRvdzogNywgICAgIC8vIDdcdUM3N0NcbiAgICAgICAgfSxcbiAgICB9LFxuXG4gICAgdWk6IHtcbiAgICAgICAgYW5pbWF0aW9uRHVyYXRpb246IDMwMCwgICAgICAgLy8gMzAwbXNcbiAgICAgICAgcHJvZ3Jlc3NVcGRhdGVJbnRlcnZhbDogMTAwLCAgLy8gMTAwbXNcbiAgICAgICAgbm90aWZpY2F0aW9uVGltZW91dDogNTAwMCwgICAgLy8gNVx1Q0QwOFxuICAgICAgICBtb2RhbENsb3NlRGVsYXk6IDUwMCwgICAgICAgICAvLyA1MDBtc1xuICAgIH0sXG5cbiAgICBzZWN1cml0eToge1xuICAgICAgICBhcGlLZXlFbmNyeXB0aW9uOiB7XG4gICAgICAgICAgICBpdGVyYXRpb25zOiAxMDAwMCxcbiAgICAgICAgICAgIGtleUxlbmd0aDogMzIsXG4gICAgICAgICAgICBzYWx0TGVuZ3RoOiAxNixcbiAgICAgICAgfSxcbiAgICAgICAgc2Vzc2lvblRpbWVvdXQ6IDM2MDAwMDAsICAgICAgLy8gMVx1QzJEQ1x1QUMwNFxuICAgICAgICBtYXhMb2dpbkF0dGVtcHRzOiA1LFxuICAgIH0sXG59O1xuXG4vLyBcdUQ2NThcdUFDQkRcdUJDQzQgXHVDMTI0XHVDODE1XG5leHBvcnQgY29uc3QgREVWRUxPUE1FTlRfQ09ORklHOiBQYXJ0aWFsPFBsdWdpbkNvbmZpZz4gPSB7XG4gICAgYXBpOiB7XG4gICAgICAgIHRpbWVvdXRzOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiAxMDAwMCxcbiAgICAgICAgICAgIGxsbTogMjAwMDAsXG4gICAgICAgICAgICB0dHM6IDUwMDAsXG4gICAgICAgIH0sXG4gICAgICAgIHJldHJpZXM6IHtcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAxLFxuICAgICAgICAgICAgZGVsYXlNczogNTAwLFxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGJhdGNoOiB7XG4gICAgICAgIGRlZmF1bHRTaXplOiAyLFxuICAgICAgICBtYXhTaXplOiA1LFxuICAgICAgICBkZWxheUJldHdlZW5CYXRjaGVzOiAxMDAsXG4gICAgfSxcbiAgICBkYXRhYmFzZToge1xuICAgICAgICBhdXRvU2F2ZUludGVydmFsOiAxMDAwLFxuICAgICAgICBiYWNrdXBFbmFibGVkOiBmYWxzZSxcbiAgICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IFBST0RVQ1RJT05fQ09ORklHOiBQYXJ0aWFsPFBsdWdpbkNvbmZpZz4gPSB7XG4gICAgYXBpOiB7XG4gICAgICAgIHJldHJpZXM6IHtcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiA1LFxuICAgICAgICAgICAgZGVsYXlNczogMjAwMCxcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGJhdGNoOiB7XG4gICAgICAgIGRlZmF1bHRTaXplOiAxMCxcbiAgICAgICAgbWF4U2l6ZTogNTAsXG4gICAgICAgIGRlbGF5QmV0d2VlbkJhdGNoZXM6IDUwMCxcbiAgICB9LFxuICAgIGRhdGFiYXNlOiB7XG4gICAgICAgIGF1dG9TYXZlSW50ZXJ2YWw6IDEwMDAwLFxuICAgICAgICBiYWNrdXBFbmFibGVkOiB0cnVlLFxuICAgICAgICBjb21wcmVzc2lvbkVuYWJsZWQ6IHRydWUsXG4gICAgfSxcbn07XG5cbi8vIFx1QzEyNFx1QzgxNSBcdUFEMDBcdUI5QUMgXHVEMDc0XHVCNzk4XHVDMkE0XG5leHBvcnQgY2xhc3MgQ29uZmlnTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IENvbmZpZ01hbmFnZXI7XG4gICAgcHJpdmF0ZSBjb25maWc6IFBsdWdpbkNvbmZpZztcblxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZ3MoREVGQVVMVF9DT05GSUcsIHRoaXMuZ2V0RW52aXJvbm1lbnRDb25maWcoKSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCk6IENvbmZpZ01hbmFnZXIge1xuICAgICAgICBpZiAoIUNvbmZpZ01hbmFnZXIuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIENvbmZpZ01hbmFnZXIuaW5zdGFuY2UgPSBuZXcgQ29uZmlnTWFuYWdlcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDb25maWdNYW5hZ2VyLmluc3RhbmNlO1xuICAgIH1cblxuICAgIGdldENvbmZpZygpOiBQbHVnaW5Db25maWcge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLmNvbmZpZyB9O1xuICAgIH1cblxuICAgIGdldFZhbHVlPFQ+KHBhdGg6IHN0cmluZyk6IFQge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXROZXN0ZWRWYWx1ZSh0aGlzLmNvbmZpZywgcGF0aCk7XG4gICAgfVxuXG4gICAgdXBkYXRlQ29uZmlnKHVwZGF0ZXM6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPik6IHZvaWQge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWdzKHRoaXMuY29uZmlnLCB1cGRhdGVzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEVudmlyb25tZW50Q29uZmlnKCk6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPiB7XG4gICAgICAgIC8vIFx1QUMxQ1x1QkMxQyBcdUQ2NThcdUFDQkQgXHVBQzEwXHVDOUMwIChcdUFDMDRcdUIyRThcdUQ1NUMgXHVENzM0XHVCOUFDXHVDMkE0XHVEMkYxKVxuICAgICAgICBjb25zdCBpc0RldmVsb3BtZW50ID0gXG4gICAgICAgICAgICBwcm9jZXNzPy5lbnY/Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnIHx8XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24/Lmhvc3RuYW1lID09PSAnbG9jYWxob3N0JyB8fFxuICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnRGV2ZWxvcG1lbnQnKTtcblxuICAgICAgICByZXR1cm4gaXNEZXZlbG9wbWVudCA/IERFVkVMT1BNRU5UX0NPTkZJRyA6IFBST0RVQ1RJT05fQ09ORklHO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWVyZ2VDb25maWdzKGJhc2U6IFBsdWdpbkNvbmZpZywgb3ZlcnJpZGU6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPik6IFBsdWdpbkNvbmZpZyB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgLi4uYmFzZSB9O1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMob3ZlcnJpZGUpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5IGFzIGtleW9mIFBsdWdpbkNvbmZpZ10gPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdFtrZXkgYXMga2V5b2YgUGx1Z2luQ29uZmlnXSxcbiAgICAgICAgICAgICAgICAgICAgLi4udmFsdWVcbiAgICAgICAgICAgICAgICB9IGFzIGFueTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleSBhcyBrZXlvZiBQbHVnaW5Db25maWddID0gdmFsdWUgYXMgYW55O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0TmVzdGVkVmFsdWUob2JqOiBhbnksIHBhdGg6IHN0cmluZyk6IGFueSB7XG4gICAgICAgIHJldHVybiBwYXRoLnNwbGl0KCcuJykucmVkdWNlKChjdXJyZW50LCBrZXkpID0+IGN1cnJlbnQ/LltrZXldLCBvYmopO1xuICAgIH1cbn1cblxuLy8gXHVEM0I4XHVDNzU4IFx1RDU2OFx1QzIxOFx1QjRFNFxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZygpOiBQbHVnaW5Db25maWcge1xuICAgIHJldHVybiBDb25maWdNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0Q29uZmlnKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25maWdWYWx1ZTxUPihwYXRoOiBzdHJpbmcpOiBUIHtcbiAgICByZXR1cm4gQ29uZmlnTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFZhbHVlPFQ+KHBhdGgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ29uZmlnKHVwZGF0ZXM6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPik6IHZvaWQge1xuICAgIENvbmZpZ01hbmFnZXIuZ2V0SW5zdGFuY2UoKS51cGRhdGVDb25maWcodXBkYXRlcyk7XG59XG5cbi8vIFx1RDBDMFx1Qzc4NSBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVDMTI0XHVDODE1IFx1QzgxMVx1QURGQ1x1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVDMEMxXHVDMjE4XHVCNEU0XG5leHBvcnQgY29uc3QgQ09ORklHX1BBVEhTID0ge1xuICAgIEFQSV9USU1FT1VUX0RFRkFVTFQ6ICdhcGkudGltZW91dHMuZGVmYXVsdCcsXG4gICAgQVBJX1RJTUVPVVRfTExNOiAnYXBpLnRpbWVvdXRzLmxsbScsXG4gICAgQVBJX1RJTUVPVVRfVFRTOiAnYXBpLnRpbWVvdXRzLnR0cycsXG4gICAgQVBJX1JFVFJZX01BWF9BVFRFTVBUUzogJ2FwaS5yZXRyaWVzLm1heEF0dGVtcHRzJyxcbiAgICBBUElfUkVUUllfREVMQVk6ICdhcGkucmV0cmllcy5kZWxheU1zJyxcbiAgICBCQVRDSF9ERUZBVUxUX1NJWkU6ICdiYXRjaC5kZWZhdWx0U2l6ZScsXG4gICAgQkFUQ0hfTUFYX1NJWkU6ICdiYXRjaC5tYXhTaXplJyxcbiAgICBCQVRDSF9ERUxBWTogJ2JhdGNoLmRlbGF5QmV0d2VlbkJhdGNoZXMnLFxuICAgIEFVRElPX01BWF9QT09MX1NJWkU6ICdhdWRpby5tYXhQb29sU2l6ZScsXG4gICAgQVVESU9fQ0xFQU5VUF9USU1FT1VUOiAnYXVkaW8uYXV0b0NsZWFudXBUaW1lb3V0TXMnLFxuICAgIExFQVJOSU5HX0lOSVRJQUxfSU5URVJWQUw6ICdsZWFybmluZy5zcGFjZWRfcmVwZXRpdGlvbi5pbml0aWFsSW50ZXJ2YWwnLFxuICAgIExFQVJOSU5HX0VBU1lfQk9OVVM6ICdsZWFybmluZy5zcGFjZWRfcmVwZXRpdGlvbi5lYXN5Qm9udXMnLFxuICAgIExFQVJOSU5HX0hBUkRfUEVOQUxUWTogJ2xlYXJuaW5nLnNwYWNlZF9yZXBldGl0aW9uLmhhcmRQZW5hbHR5JyxcbiAgICBVSV9BTklNQVRJT05fRFVSQVRJT046ICd1aS5hbmltYXRpb25EdXJhdGlvbicsXG4gICAgVUlfTk9USUZJQ0FUSU9OX1RJTUVPVVQ6ICd1aS5ub3RpZmljYXRpb25UaW1lb3V0Jyxcbn0gYXMgY29uc3Q7IiwgIi8vIFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUM4MTVcdUNDNDUgXHVCQzBGIFx1QUQ2Q1x1RDYwNFxuXG5pbXBvcnQgeyBnZXRDb25maWdWYWx1ZSwgQ09ORklHX1BBVEhTIH0gZnJvbSAnLi9Db25maWcnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJldHJ5T3B0aW9ucyB7XG4gICAgbWF4QXR0ZW1wdHM/OiBudW1iZXI7XG4gICAgZGVsYXlNcz86IG51bWJlcjtcbiAgICBleHBvbmVudGlhbEJhY2tvZmY/OiBib29sZWFuO1xuICAgIG1heERlbGF5TXM/OiBudW1iZXI7XG4gICAgYmFja29mZk11bHRpcGxpZXI/OiBudW1iZXI7XG4gICAgcmV0cnlDb25kaXRpb24/OiAoZXJyb3I6IEVycm9yKSA9PiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldHJ5UmVzdWx0PFQ+IHtcbiAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgIHJlc3VsdD86IFQ7XG4gICAgZXJyb3I/OiBFcnJvcjtcbiAgICBhdHRlbXB0czogbnVtYmVyO1xuICAgIHRvdGFsRHVyYXRpb246IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFJldHJ5UG9saWN5IHtcbiAgICBwcml2YXRlIG9wdGlvbnM6IFJlcXVpcmVkPFJldHJ5T3B0aW9ucz47XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBtYXhBdHRlbXB0czogb3B0aW9ucy5tYXhBdHRlbXB0cyA/PyBnZXRDb25maWdWYWx1ZTxudW1iZXI+KENPTkZJR19QQVRIUy5BUElfUkVUUllfTUFYX0FUVEVNUFRTKSxcbiAgICAgICAgICAgIGRlbGF5TXM6IG9wdGlvbnMuZGVsYXlNcyA/PyBnZXRDb25maWdWYWx1ZTxudW1iZXI+KENPTkZJR19QQVRIUy5BUElfUkVUUllfREVMQVkpLFxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiBvcHRpb25zLmV4cG9uZW50aWFsQmFja29mZiA/PyB0cnVlLFxuICAgICAgICAgICAgbWF4RGVsYXlNczogb3B0aW9ucy5tYXhEZWxheU1zID8/IDMwMDAwLCAvLyAzMFx1Q0QwOFxuICAgICAgICAgICAgYmFja29mZk11bHRpcGxpZXI6IG9wdGlvbnMuYmFja29mZk11bHRpcGxpZXIgPz8gMixcbiAgICAgICAgICAgIHJldHJ5Q29uZGl0aW9uOiBvcHRpb25zLnJldHJ5Q29uZGl0aW9uID8/IHRoaXMuZGVmYXVsdFJldHJ5Q29uZGl0aW9uLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1QUUzMFx1QkNGOCBcdUM3QUNcdUMyRENcdUIzQzQgXHVDODcwXHVBQzc0XG4gICAgcHJpdmF0ZSBkZWZhdWx0UmV0cnlDb25kaXRpb24oZXJyb3I6IEVycm9yKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIFx1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QyBcdUM1RDBcdUI3RUMsIFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDMywgXHVDMTFDXHVCQzg0IFx1QzVEMFx1QjdFQ1x1QjI5NCBcdUM3QUNcdUMyRENcdUIzQzRcbiAgICAgICAgY29uc3QgcmV0cnlhYmxlRXJyb3JzID0gW1xuICAgICAgICAgICAgJ05ldHdvcmtFcnJvcicsXG4gICAgICAgICAgICAnVGltZW91dEVycm9yJyxcbiAgICAgICAgICAgICdmZXRjaCcsXG4gICAgICAgICAgICAnNTAyJywgJzUwMycsICc1MDQnLCAvLyBcdUMxMUNcdUJDODQgXHVDNUQwXHVCN0VDXG4gICAgICAgICAgICAnRUNPTk5SRVNFVCcsXG4gICAgICAgICAgICAnRVRJTUVET1VUJyxcbiAgICAgICAgICAgICdFTk9URk9VTkQnXG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBlcnJvck5hbWUgPSBlcnJvci5uYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgcmV0dXJuIHJldHJ5YWJsZUVycm9ycy5zb21lKHBhdHRlcm4gPT4gXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMocGF0dGVybi50b0xvd2VyQ2FzZSgpKSB8fCBcbiAgICAgICAgICAgIGVycm9yTmFtZS5pbmNsdWRlcyhwYXR0ZXJuLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVDOUMwXHVDMjE4IFx1QkMzMVx1QzYyNFx1RDUwNCBcdUFDQzRcdUMwQjBcbiAgICBwcml2YXRlIGNhbGN1bGF0ZURlbGF5KGF0dGVtcHQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmV4cG9uZW50aWFsQmFja29mZikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kZWxheU1zO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLm9wdGlvbnMuZGVsYXlNcyAqIE1hdGgucG93KHRoaXMub3B0aW9ucy5iYWNrb2ZmTXVsdGlwbGllciwgYXR0ZW1wdCAtIDEpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVDOUMwXHVEMTMwIFx1Q0Q5NFx1QUMwMCAoXHUwMEIxMjAlKVxuICAgICAgICBjb25zdCBqaXR0ZXIgPSBkZWxheSAqIDAuMiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcbiAgICAgICAgY29uc3QgZmluYWxEZWxheSA9IE1hdGguZmxvb3IoZGVsYXkgKyBqaXR0ZXIpO1xuXG4gICAgICAgIHJldHVybiBNYXRoLm1pbihmaW5hbERlbGF5LCB0aGlzLm9wdGlvbnMubWF4RGVsYXlNcyk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVCM0Q5XHVBRTMwIFx1RDU2OFx1QzIxOCBcdUM3QUNcdUMyRENcdUIzQzRcbiAgICBhc3luYyBleGVjdXRlPFQ+KGZuOiAoKSA9PiBQcm9taXNlPFQ+KTogUHJvbWlzZTxSZXRyeVJlc3VsdDxUPj4ge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcblxuICAgICAgICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSB0aGlzLm9wdGlvbnMubWF4QXR0ZW1wdHM7IGF0dGVtcHQrKykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdHM6IGF0dGVtcHQsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBcdUI5QzhcdUM5QzBcdUI5QzkgXHVDMkRDXHVCM0M0XHVDNzc0XHVBQzcwXHVCMDk4IFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUM4NzBcdUFDNzRcdUM3NDQgXHVCOUNDXHVDODcxXHVENTU4XHVDOUMwIFx1QzU0QVx1QzczQ1x1QkE3NCBcdUM5MTFcdUIyRThcbiAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzIHx8ICF0aGlzLm9wdGlvbnMucmV0cnlDb25kaXRpb24obGFzdEVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBcdUIyRTRcdUM3NEMgXHVDMkRDXHVCM0M0IFx1QzgwNCBcdUIzMDBcdUFFMzBcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxheSA9IHRoaXMuY2FsY3VsYXRlRGVsYXkoYXR0ZW1wdCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxheShkZWxheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogbGFzdEVycm9yLFxuICAgICAgICAgICAgYXR0ZW1wdHM6IHRoaXMub3B0aW9ucy5tYXhBdHRlbXB0cyxcbiAgICAgICAgICAgIHRvdGFsRHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBcdUIzRDlcdUFFMzAgXHVENTY4XHVDMjE4IFx1QzdBQ1x1QzJEQ1x1QjNDNFxuICAgIGV4ZWN1dGVTeW5jPFQ+KGZuOiAoKSA9PiBUKTogUmV0cnlSZXN1bHQ8VD4ge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcblxuICAgICAgICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSB0aGlzLm9wdGlvbnMubWF4QXR0ZW1wdHM7IGF0dGVtcHQrKykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmbigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdHM6IGF0dGVtcHQsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBcdUI5QzhcdUM5QzBcdUI5QzkgXHVDMkRDXHVCM0M0XHVDNzc0XHVBQzcwXHVCMDk4IFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUM4NzBcdUFDNzRcdUM3NDQgXHVCOUNDXHVDODcxXHVENTU4XHVDOUMwIFx1QzU0QVx1QzczQ1x1QkE3NCBcdUM5MTFcdUIyRThcbiAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzIHx8ICF0aGlzLm9wdGlvbnMucmV0cnlDb25kaXRpb24obGFzdEVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBcdUIzRDlcdUFFMzAgXHVENTY4XHVDMjE4XHVDNUQwXHVDMTFDXHVCMjk0IFx1Qzk4OVx1QzJEQyBcdUIyRTRcdUM3NEMgXHVDMkRDXHVCM0M0IChcdUJFNDRcdUIzRDlcdUFFMzAgXHVCMzAwXHVBRTMwIFx1QkQ4OFx1QUMwMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBsYXN0RXJyb3IsXG4gICAgICAgICAgICBhdHRlbXB0czogdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzLFxuICAgICAgICAgICAgdG90YWxEdXJhdGlvbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZGVsYXkobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4gICAgfVxuXG4gICAgLy8gXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgIHVwZGF0ZU9wdGlvbnMob3B0aW9uczogUGFydGlhbDxSZXRyeU9wdGlvbnM+KTogdm9pZCB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zLCAuLi5vcHRpb25zIH07XG4gICAgfVxuXG4gICAgLy8gXHVENjA0XHVDN0FDIFx1QzEyNFx1QzgxNSBcdUJDMThcdUQ2NThcbiAgICBnZXRPcHRpb25zKCk6IFJlcXVpcmVkPFJldHJ5T3B0aW9ucz4ge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLm9wdGlvbnMgfTtcbiAgICB9XG59XG5cbi8vIFx1RDJCOVx1RDY1NFx1QjQxQyBcdUM3QUNcdUMyRENcdUIzQzQgXHVDODE1XHVDQzQ1XHVCNEU0XG5leHBvcnQgY2xhc3MgTmV0d29ya1JldHJ5UG9saWN5IGV4dGVuZHMgUmV0cnlQb2xpY3kge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFJldHJ5T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiA1LFxuICAgICAgICAgICAgZGVsYXlNczogMTAwMCxcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogdHJ1ZSxcbiAgICAgICAgICAgIG1heERlbGF5TXM6IDEwMDAwLFxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFx1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QyBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDXHVCOUNDIFx1QzdBQ1x1QzJEQ1x1QjNDNFxuICAgICAgICAgICAgICAgIGNvbnN0IG5ldHdvcmtFcnJvcnMgPSBbXG4gICAgICAgICAgICAgICAgICAgICduZXR3b3JrZXJyb3InLCAnZmV0Y2gnLCAndGltZW91dCcsXG4gICAgICAgICAgICAgICAgICAgICdlY29ubnJlc2V0JywgJ2V0aW1lZG91dCcsICdlbm90Zm91bmQnLFxuICAgICAgICAgICAgICAgICAgICAnNTAyJywgJzUwMycsICc1MDQnLCAnNDA4JywgJzQyOSdcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV0d29ya0Vycm9ycy5zb21lKHBhdHRlcm4gPT4gZXJyb3JUZXh0LmluY2x1ZGVzKHBhdHRlcm4pKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSVJldHJ5UG9saWN5IGV4dGVuZHMgUmV0cnlQb2xpY3kge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFJldHJ5T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAzLFxuICAgICAgICAgICAgZGVsYXlNczogMjAwMCxcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogdHJ1ZSxcbiAgICAgICAgICAgIG1heERlbGF5TXM6IDE1MDAwLFxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEFQSSBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1QzkxMSBcdUM3QUNcdUMyRENcdUIzQzQgXHVBQzAwXHVCMkE1XHVENTVDIFx1QUM4M1x1QjRFNFxuICAgICAgICAgICAgICAgIGNvbnN0IHJldHJ5YWJsZUVycm9ycyA9IFtcbiAgICAgICAgICAgICAgICAgICAgJzQyOScsIC8vIFJhdGUgbGltaXRcbiAgICAgICAgICAgICAgICAgICAgJzUwMicsICc1MDMnLCAnNTA0JywgLy8gU2VydmVyIGVycm9yc1xuICAgICAgICAgICAgICAgICAgICAndGltZW91dCcsXG4gICAgICAgICAgICAgICAgICAgICduZXR3b3JrJ1xuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXRyeWFibGVFcnJvcnMuc29tZShwYXR0ZXJuID0+IGVycm9yVGV4dC5pbmNsdWRlcyhwYXR0ZXJuKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZVJldHJ5UG9saWN5IGV4dGVuZHMgUmV0cnlQb2xpY3kge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFJldHJ5T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAzLFxuICAgICAgICAgICAgZGVsYXlNczogNTAwLFxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiBmYWxzZSwgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVCMjk0IFx1QkU2MFx1Qjk3OCBcdUM3QUNcdUMyRENcdUIzQzRcbiAgICAgICAgICAgIG1heERlbGF5TXM6IDIwMDAsXG4gICAgICAgICAgICByZXRyeUNvbmRpdGlvbjogKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gXHVDNzdDXHVDMkRDXHVDODAxXHVDNzc4IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUM1RDBcdUI3RUNcdUI5Q0MgXHVDN0FDXHVDMkRDXHVCM0M0XG4gICAgICAgICAgICAgICAgY29uc3QgcmV0cnlhYmxlRXJyb3JzID0gW1xuICAgICAgICAgICAgICAgICAgICAnbG9jaycsICdidXN5JywgJ3RpbWVvdXQnLFxuICAgICAgICAgICAgICAgICAgICAnY29ubmVjdGlvbicsICduZXR3b3JrJ1xuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXRyeWFibGVFcnJvcnMuc29tZShwYXR0ZXJuID0+IGVycm9yVGV4dC5pbmNsdWRlcyhwYXR0ZXJuKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIFx1RDNCOFx1Qzc1OCBcdUQ1NjhcdUMyMThcdUI0RTRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyeUFzeW5jPFQ+KFxuICAgIGZuOiAoKSA9PiBQcm9taXNlPFQ+LFxuICAgIG9wdGlvbnM/OiBSZXRyeU9wdGlvbnNcbik6IFByb21pc2U8VD4ge1xuICAgIGNvbnN0IHBvbGljeSA9IG5ldyBSZXRyeVBvbGljeShvcHRpb25zKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb2xpY3kuZXhlY3V0ZShmbik7XG4gICAgXG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0ITtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmV0cnlTeW5jPFQ+KFxuICAgIGZuOiAoKSA9PiBULFxuICAgIG9wdGlvbnM/OiBSZXRyeU9wdGlvbnNcbik6IFQge1xuICAgIGNvbnN0IHBvbGljeSA9IG5ldyBSZXRyeVBvbGljeShvcHRpb25zKTtcbiAgICBjb25zdCByZXN1bHQgPSBwb2xpY3kuZXhlY3V0ZVN5bmMoZm4pO1xuICAgIFxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdCE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbn1cblxuLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QzY5NFx1Q0NBRFx1QzZBOSBcdUQzQjhcdUM3NTggXHVENTY4XHVDMjE4XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmV0cnlOZXR3b3JrUmVxdWVzdDxUPihcbiAgICBmbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgICBvcHRpb25zPzogUmV0cnlPcHRpb25zXG4pOiBQcm9taXNlPFQ+IHtcbiAgICBjb25zdCBwb2xpY3kgPSBuZXcgTmV0d29ya1JldHJ5UG9saWN5KG9wdGlvbnMpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvbGljeS5leGVjdXRlKGZuKTtcbiAgICBcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQhO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG59XG5cbi8vIEFQSSBcdUQ2MzhcdUNEOUNcdUM2QTkgXHVEM0I4XHVDNzU4IFx1RDU2OFx1QzIxOFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJldHJ5QVBJQ2FsbDxUPihcbiAgICBmbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgICBvcHRpb25zPzogUmV0cnlPcHRpb25zXG4pOiBQcm9taXNlPFQ+IHtcbiAgICBjb25zdCBwb2xpY3kgPSBuZXcgQVBJUmV0cnlQb2xpY3kob3B0aW9ucyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9saWN5LmV4ZWN1dGUoZm4pO1xuICAgIFxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdCE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbn1cblxuLy8gQ2lyY3VpdCBCcmVha2VyIFx1RDMyOFx1RDEzNFx1QUNGQyBcdUQ1NjhcdUFFRDggXHVDMEFDXHVDNkE5XHVENTYwIFx1QzIxOCBcdUM3ODhcdUIyOTQgXHVBQ0UwXHVBRTA5IFx1QzdBQ1x1QzJEQ1x1QjNDNFxuZXhwb3J0IGNsYXNzIENpcmN1aXRCcmVha2VyUmV0cnlQb2xpY3kgZXh0ZW5kcyBSZXRyeVBvbGljeSB7XG4gICAgcHJpdmF0ZSBmYWlsdXJlQ291bnQgPSAwO1xuICAgIHByaXZhdGUgbGFzdEZhaWx1cmVUaW1lID0gMDtcbiAgICBwcml2YXRlIGNpcmN1aXRCcmVha2VyVGltZW91dCA9IDYwMDAwOyAvLyAxXHVCRDg0XG4gICAgcHJpdmF0ZSBmYWlsdXJlVGhyZXNob2xkID0gNTtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFJldHJ5T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGVXaXRoQ2lyY3VpdEJyZWFrZXI8VD4oZm46ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFJldHJ5UmVzdWx0PFQ+PiB7XG4gICAgICAgIC8vIENpcmN1aXQgQnJlYWtlciBcdUNDQjRcdUQwNkNcbiAgICAgICAgaWYgKHRoaXMuaXNDaXJjdWl0T3BlbigpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBuZXcgRXJyb3IoJ0NpcmN1aXQgYnJlYWtlciBpcyBvcGVuJyksXG4gICAgICAgICAgICAgICAgYXR0ZW1wdHM6IDAsXG4gICAgICAgICAgICAgICAgdG90YWxEdXJhdGlvbjogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZShmbik7XG5cbiAgICAgICAgLy8gXHVBQ0IwXHVBQ0ZDXHVDNUQwIFx1QjUzMFx1Qjk3OCBDaXJjdWl0IEJyZWFrZXIgXHVDMEMxXHVEMERDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZUNvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZUNvdW50Kys7XG4gICAgICAgICAgICB0aGlzLmxhc3RGYWlsdXJlVGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNDaXJjdWl0T3BlbigpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMuZmFpbHVyZUNvdW50IDwgdGhpcy5mYWlsdXJlVGhyZXNob2xkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0RmFpbHVyZSA9IERhdGUubm93KCkgLSB0aGlzLmxhc3RGYWlsdXJlVGltZTtcbiAgICAgICAgaWYgKHRpbWVTaW5jZUxhc3RGYWlsdXJlID49IHRoaXMuY2lyY3VpdEJyZWFrZXJUaW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLmZhaWx1cmVDb3VudCA9IDA7IC8vIFJlc2V0IGNpcmN1aXQgYnJlYWtlclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufSIsICIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoKSB7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50cyk7XG4gIH07XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgYmluZCBmcm9tICcuL2hlbHBlcnMvYmluZC5qcyc7XG5cbi8vIHV0aWxzIGlzIGEgbGlicmFyeSBvZiBnZW5lcmljIGhlbHBlciBmdW5jdGlvbnMgbm9uLXNwZWNpZmljIHRvIGF4aW9zXG5cbmNvbnN0IHt0b1N0cmluZ30gPSBPYmplY3QucHJvdG90eXBlO1xuY29uc3Qge2dldFByb3RvdHlwZU9mfSA9IE9iamVjdDtcbmNvbnN0IHtpdGVyYXRvciwgdG9TdHJpbmdUYWd9ID0gU3ltYm9sO1xuXG5jb25zdCBraW5kT2YgPSAoY2FjaGUgPT4gdGhpbmcgPT4ge1xuICAgIGNvbnN0IHN0ciA9IHRvU3RyaW5nLmNhbGwodGhpbmcpO1xuICAgIHJldHVybiBjYWNoZVtzdHJdIHx8IChjYWNoZVtzdHJdID0gc3RyLnNsaWNlKDgsIC0xKS50b0xvd2VyQ2FzZSgpKTtcbn0pKE9iamVjdC5jcmVhdGUobnVsbCkpO1xuXG5jb25zdCBraW5kT2ZUZXN0ID0gKHR5cGUpID0+IHtcbiAgdHlwZSA9IHR5cGUudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuICh0aGluZykgPT4ga2luZE9mKHRoaW5nKSA9PT0gdHlwZVxufVxuXG5jb25zdCB0eXBlT2ZUZXN0ID0gdHlwZSA9PiB0aGluZyA9PiB0eXBlb2YgdGhpbmcgPT09IHR5cGU7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXksIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCB7aXNBcnJheX0gPSBBcnJheTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWRcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc1VuZGVmaW5lZCA9IHR5cGVPZlRlc3QoJ3VuZGVmaW5lZCcpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQnVmZmVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQnVmZmVyKHZhbCkge1xuICByZXR1cm4gdmFsICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwpICYmIHZhbC5jb25zdHJ1Y3RvciAhPT0gbnVsbCAmJiAhaXNVbmRlZmluZWQodmFsLmNvbnN0cnVjdG9yKVxuICAgICYmIGlzRnVuY3Rpb24odmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyKSAmJiB2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIodmFsKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc0FycmF5QnVmZmVyID0ga2luZE9mVGVzdCgnQXJyYXlCdWZmZXInKTtcblxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlclZpZXcodmFsKSB7XG4gIGxldCByZXN1bHQ7XG4gIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykgJiYgKEFycmF5QnVmZmVyLmlzVmlldykpIHtcbiAgICByZXN1bHQgPSBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsKTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSAodmFsKSAmJiAodmFsLmJ1ZmZlcikgJiYgKGlzQXJyYXlCdWZmZXIodmFsLmJ1ZmZlcikpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJpbmdcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyaW5nLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNTdHJpbmcgPSB0eXBlT2ZUZXN0KCdzdHJpbmcnKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRnVuY3Rpb24sIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc0Z1bmN0aW9uID0gdHlwZU9mVGVzdCgnZnVuY3Rpb24nKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIE51bWJlclxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc051bWJlciA9IHR5cGVPZlRlc3QoJ251bWJlcicpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7Kn0gdGhpbmcgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc09iamVjdCA9ICh0aGluZykgPT4gdGhpbmcgIT09IG51bGwgJiYgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JztcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJvb2xlYW5cbiAqXG4gKiBAcGFyYW0geyp9IHRoaW5nIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJvb2xlYW4sIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc0Jvb2xlYW4gPSB0aGluZyA9PiB0aGluZyA9PT0gdHJ1ZSB8fCB0aGluZyA9PT0gZmFsc2U7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBwbGFpbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgcGxhaW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNQbGFpbk9iamVjdCA9ICh2YWwpID0+IHtcbiAgaWYgKGtpbmRPZih2YWwpICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IHByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKHZhbCk7XG4gIHJldHVybiAocHJvdG90eXBlID09PSBudWxsIHx8IHByb3RvdHlwZSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG90eXBlKSA9PT0gbnVsbCkgJiYgISh0b1N0cmluZ1RhZyBpbiB2YWwpICYmICEoaXRlcmF0b3IgaW4gdmFsKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIERhdGVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRGF0ZSA9IGtpbmRPZlRlc3QoJ0RhdGUnKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRmlsZSA9IGtpbmRPZlRlc3QoJ0ZpbGUnKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2JcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzQmxvYiA9IGtpbmRPZlRlc3QoJ0Jsb2InKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVMaXN0XG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc0ZpbGVMaXN0ID0ga2luZE9mVGVzdCgnRmlsZUxpc3QnKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmVhbVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJlYW0sIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc1N0cmVhbSA9ICh2YWwpID0+IGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwucGlwZSk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGb3JtRGF0YVxuICpcbiAqIEBwYXJhbSB7Kn0gdGhpbmcgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRm9ybURhdGEgPSAodGhpbmcpID0+IHtcbiAgbGV0IGtpbmQ7XG4gIHJldHVybiB0aGluZyAmJiAoXG4gICAgKHR5cGVvZiBGb3JtRGF0YSA9PT0gJ2Z1bmN0aW9uJyAmJiB0aGluZyBpbnN0YW5jZW9mIEZvcm1EYXRhKSB8fCAoXG4gICAgICBpc0Z1bmN0aW9uKHRoaW5nLmFwcGVuZCkgJiYgKFxuICAgICAgICAoa2luZCA9IGtpbmRPZih0aGluZykpID09PSAnZm9ybWRhdGEnIHx8XG4gICAgICAgIC8vIGRldGVjdCBmb3JtLWRhdGEgaW5zdGFuY2VcbiAgICAgICAgKGtpbmQgPT09ICdvYmplY3QnICYmIGlzRnVuY3Rpb24odGhpbmcudG9TdHJpbmcpICYmIHRoaW5nLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IEZvcm1EYXRhXScpXG4gICAgICApXG4gICAgKVxuICApXG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0XG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc1VSTFNlYXJjaFBhcmFtcyA9IGtpbmRPZlRlc3QoJ1VSTFNlYXJjaFBhcmFtcycpO1xuXG5jb25zdCBbaXNSZWFkYWJsZVN0cmVhbSwgaXNSZXF1ZXN0LCBpc1Jlc3BvbnNlLCBpc0hlYWRlcnNdID0gWydSZWFkYWJsZVN0cmVhbScsICdSZXF1ZXN0JywgJ1Jlc3BvbnNlJywgJ0hlYWRlcnMnXS5tYXAoa2luZE9mVGVzdCk7XG5cbi8qKlxuICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIHRyaW1cbiAqXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlXG4gKi9cbmNvbnN0IHRyaW0gPSAoc3RyKSA9PiBzdHIudHJpbSA/XG4gIHN0ci50cmltKCkgOiBzdHIucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csICcnKTtcblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0IGludm9raW5nIGEgZnVuY3Rpb24gZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiBgb2JqYCBpcyBhbiBBcnJheSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGluZGV4LCBhbmQgY29tcGxldGUgYXJyYXkgZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiAnb2JqJyBpcyBhbiBPYmplY3QgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBrZXksIGFuZCBjb21wbGV0ZSBvYmplY3QgZm9yIGVhY2ggcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBUaGUgb2JqZWN0IHRvIGl0ZXJhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byBpbnZva2UgZm9yIGVhY2ggaXRlbVxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FsbE93bktleXMgPSBmYWxzZV1cbiAqIEByZXR1cm5zIHthbnl9XG4gKi9cbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbiwge2FsbE93bktleXMgPSBmYWxzZX0gPSB7fSkge1xuICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWRcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBpO1xuICBsZXQgbDtcblxuICAvLyBGb3JjZSBhbiBhcnJheSBpZiBub3QgYWxyZWFkeSBzb21ldGhpbmcgaXRlcmFibGVcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgb2JqID0gW29ial07XG4gIH1cblxuICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlc1xuICAgIGZvciAoaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG4gICAgY29uc3Qga2V5cyA9IGFsbE93bktleXMgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopIDogT2JqZWN0LmtleXMob2JqKTtcbiAgICBjb25zdCBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICBsZXQga2V5O1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kS2V5KG9iaiwga2V5KSB7XG4gIGtleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgbGV0IGkgPSBrZXlzLmxlbmd0aDtcbiAgbGV0IF9rZXk7XG4gIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgX2tleSA9IGtleXNbaV07XG4gICAgaWYgKGtleSA9PT0gX2tleS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICByZXR1cm4gX2tleTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmNvbnN0IF9nbG9iYWwgPSAoKCkgPT4ge1xuICAvKmVzbGludCBuby11bmRlZjowKi9cbiAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gZ2xvYmFsVGhpcztcbiAgcmV0dXJuIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IGdsb2JhbClcbn0pKCk7XG5cbmNvbnN0IGlzQ29udGV4dERlZmluZWQgPSAoY29udGV4dCkgPT4gIWlzVW5kZWZpbmVkKGNvbnRleHQpICYmIGNvbnRleHQgIT09IF9nbG9iYWw7XG5cbi8qKlxuICogQWNjZXB0cyB2YXJhcmdzIGV4cGVjdGluZyBlYWNoIGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCwgdGhlblxuICogaW1tdXRhYmx5IG1lcmdlcyB0aGUgcHJvcGVydGllcyBvZiBlYWNoIG9iamVjdCBhbmQgcmV0dXJucyByZXN1bHQuXG4gKlxuICogV2hlbiBtdWx0aXBsZSBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUga2V5IHRoZSBsYXRlciBvYmplY3QgaW5cbiAqIHRoZSBhcmd1bWVudHMgbGlzdCB3aWxsIHRha2UgcHJlY2VkZW5jZS5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgcmVzdWx0ID0gbWVyZ2Uoe2ZvbzogMTIzfSwge2ZvbzogNDU2fSk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQuZm9vKTsgLy8gb3V0cHV0cyA0NTZcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBtZXJnZVxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgY29uc3Qge2Nhc2VsZXNzfSA9IGlzQ29udGV4dERlZmluZWQodGhpcykgJiYgdGhpcyB8fCB7fTtcbiAgY29uc3QgcmVzdWx0ID0ge307XG4gIGNvbnN0IGFzc2lnblZhbHVlID0gKHZhbCwga2V5KSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0S2V5ID0gY2FzZWxlc3MgJiYgZmluZEtleShyZXN1bHQsIGtleSkgfHwga2V5O1xuICAgIGlmIChpc1BsYWluT2JqZWN0KHJlc3VsdFt0YXJnZXRLZXldKSAmJiBpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICAgIHJlc3VsdFt0YXJnZXRLZXldID0gbWVyZ2UocmVzdWx0W3RhcmdldEtleV0sIHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICAgIHJlc3VsdFt0YXJnZXRLZXldID0gbWVyZ2Uoe30sIHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICAgIHJlc3VsdFt0YXJnZXRLZXldID0gdmFsLnNsaWNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFt0YXJnZXRLZXldID0gdmFsO1xuICAgIH1cbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGFyZ3VtZW50c1tpXSAmJiBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRXh0ZW5kcyBvYmplY3QgYSBieSBtdXRhYmx5IGFkZGluZyB0byBpdCB0aGUgcHJvcGVydGllcyBvZiBvYmplY3QgYi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkXG4gKiBAcGFyYW0ge09iamVjdH0gYiBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tXG4gKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBUaGUgb2JqZWN0IHRvIGJpbmQgZnVuY3Rpb24gdG9cbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFthbGxPd25LZXlzXVxuICogQHJldHVybnMge09iamVjdH0gVGhlIHJlc3VsdGluZyB2YWx1ZSBvZiBvYmplY3QgYVxuICovXG5jb25zdCBleHRlbmQgPSAoYSwgYiwgdGhpc0FyZywge2FsbE93bktleXN9PSB7fSkgPT4ge1xuICBmb3JFYWNoKGIsICh2YWwsIGtleSkgPT4ge1xuICAgIGlmICh0aGlzQXJnICYmIGlzRnVuY3Rpb24odmFsKSkge1xuICAgICAgYVtrZXldID0gYmluZCh2YWwsIHRoaXNBcmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhW2tleV0gPSB2YWw7XG4gICAgfVxuICB9LCB7YWxsT3duS2V5c30pO1xuICByZXR1cm4gYTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYnl0ZSBvcmRlciBtYXJrZXIuIFRoaXMgY2F0Y2hlcyBFRiBCQiBCRiAodGhlIFVURi04IEJPTSlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudCB3aXRoIEJPTVxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IGNvbnRlbnQgdmFsdWUgd2l0aG91dCBCT01cbiAqL1xuY29uc3Qgc3RyaXBCT00gPSAoY29udGVudCkgPT4ge1xuICBpZiAoY29udGVudC5jaGFyQ29kZUF0KDApID09PSAweEZFRkYpIHtcbiAgICBjb250ZW50ID0gY29udGVudC5zbGljZSgxKTtcbiAgfVxuICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdXBlckNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge29iamVjdH0gW3Byb3BzXVxuICogQHBhcmFtIHtvYmplY3R9IFtkZXNjcmlwdG9yc11cbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuY29uc3QgaW5oZXJpdHMgPSAoY29uc3RydWN0b3IsIHN1cGVyQ29uc3RydWN0b3IsIHByb3BzLCBkZXNjcmlwdG9ycykgPT4ge1xuICBjb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ29uc3RydWN0b3IucHJvdG90eXBlLCBkZXNjcmlwdG9ycyk7XG4gIGNvbnN0cnVjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNvbnN0cnVjdG9yO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29uc3RydWN0b3IsICdzdXBlcicsIHtcbiAgICB2YWx1ZTogc3VwZXJDb25zdHJ1Y3Rvci5wcm90b3R5cGVcbiAgfSk7XG4gIHByb3BzICYmIE9iamVjdC5hc3NpZ24oY29uc3RydWN0b3IucHJvdG90eXBlLCBwcm9wcyk7XG59XG5cbi8qKlxuICogUmVzb2x2ZSBvYmplY3Qgd2l0aCBkZWVwIHByb3RvdHlwZSBjaGFpbiB0byBhIGZsYXQgb2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlT2JqIHNvdXJjZSBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBbZGVzdE9ial1cbiAqIEBwYXJhbSB7RnVuY3Rpb258Qm9vbGVhbn0gW2ZpbHRlcl1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9wRmlsdGVyXVxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmNvbnN0IHRvRmxhdE9iamVjdCA9IChzb3VyY2VPYmosIGRlc3RPYmosIGZpbHRlciwgcHJvcEZpbHRlcikgPT4ge1xuICBsZXQgcHJvcHM7XG4gIGxldCBpO1xuICBsZXQgcHJvcDtcbiAgY29uc3QgbWVyZ2VkID0ge307XG5cbiAgZGVzdE9iaiA9IGRlc3RPYmogfHwge307XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lcS1udWxsLGVxZXFlcVxuICBpZiAoc291cmNlT2JqID09IG51bGwpIHJldHVybiBkZXN0T2JqO1xuXG4gIGRvIHtcbiAgICBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHNvdXJjZU9iaik7XG4gICAgaSA9IHByb3BzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tID4gMCkge1xuICAgICAgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgaWYgKCghcHJvcEZpbHRlciB8fCBwcm9wRmlsdGVyKHByb3AsIHNvdXJjZU9iaiwgZGVzdE9iaikpICYmICFtZXJnZWRbcHJvcF0pIHtcbiAgICAgICAgZGVzdE9ialtwcm9wXSA9IHNvdXJjZU9ialtwcm9wXTtcbiAgICAgICAgbWVyZ2VkW3Byb3BdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgc291cmNlT2JqID0gZmlsdGVyICE9PSBmYWxzZSAmJiBnZXRQcm90b3R5cGVPZihzb3VyY2VPYmopO1xuICB9IHdoaWxlIChzb3VyY2VPYmogJiYgKCFmaWx0ZXIgfHwgZmlsdGVyKHNvdXJjZU9iaiwgZGVzdE9iaikpICYmIHNvdXJjZU9iaiAhPT0gT2JqZWN0LnByb3RvdHlwZSk7XG5cbiAgcmV0dXJuIGRlc3RPYmo7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgc3RyaW5nIGVuZHMgd2l0aCB0aGUgY2hhcmFjdGVycyBvZiBhIHNwZWNpZmllZCBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoU3RyaW5nXG4gKiBAcGFyYW0ge051bWJlcn0gW3Bvc2l0aW9uPSAwXVxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5jb25zdCBlbmRzV2l0aCA9IChzdHIsIHNlYXJjaFN0cmluZywgcG9zaXRpb24pID0+IHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHBvc2l0aW9uID4gc3RyLmxlbmd0aCkge1xuICAgIHBvc2l0aW9uID0gc3RyLmxlbmd0aDtcbiAgfVxuICBwb3NpdGlvbiAtPSBzZWFyY2hTdHJpbmcubGVuZ3RoO1xuICBjb25zdCBsYXN0SW5kZXggPSBzdHIuaW5kZXhPZihzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKTtcbiAgcmV0dXJuIGxhc3RJbmRleCAhPT0gLTEgJiYgbGFzdEluZGV4ID09PSBwb3NpdGlvbjtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgbmV3IGFycmF5IGZyb20gYXJyYXkgbGlrZSBvYmplY3Qgb3IgbnVsbCBpZiBmYWlsZWRcbiAqXG4gKiBAcGFyYW0geyp9IFt0aGluZ11cbiAqXG4gKiBAcmV0dXJucyB7P0FycmF5fVxuICovXG5jb25zdCB0b0FycmF5ID0gKHRoaW5nKSA9PiB7XG4gIGlmICghdGhpbmcpIHJldHVybiBudWxsO1xuICBpZiAoaXNBcnJheSh0aGluZykpIHJldHVybiB0aGluZztcbiAgbGV0IGkgPSB0aGluZy5sZW5ndGg7XG4gIGlmICghaXNOdW1iZXIoaSkpIHJldHVybiBudWxsO1xuICBjb25zdCBhcnIgPSBuZXcgQXJyYXkoaSk7XG4gIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgYXJyW2ldID0gdGhpbmdbaV07XG4gIH1cbiAgcmV0dXJuIGFycjtcbn1cblxuLyoqXG4gKiBDaGVja2luZyBpZiB0aGUgVWludDhBcnJheSBleGlzdHMgYW5kIGlmIGl0IGRvZXMsIGl0IHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGNoZWNrcyBpZiB0aGVcbiAqIHRoaW5nIHBhc3NlZCBpbiBpcyBhbiBpbnN0YW5jZSBvZiBVaW50OEFycmF5XG4gKlxuICogQHBhcmFtIHtUeXBlZEFycmF5fVxuICpcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbmNvbnN0IGlzVHlwZWRBcnJheSA9IChUeXBlZEFycmF5ID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgcmV0dXJuIHRoaW5nID0+IHtcbiAgICByZXR1cm4gVHlwZWRBcnJheSAmJiB0aGluZyBpbnN0YW5jZW9mIFR5cGVkQXJyYXk7XG4gIH07XG59KSh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2V0UHJvdG90eXBlT2YoVWludDhBcnJheSkpO1xuXG4vKipcbiAqIEZvciBlYWNoIGVudHJ5IGluIHRoZSBvYmplY3QsIGNhbGwgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGtleSBhbmQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtPYmplY3Q8YW55LCBhbnk+fSBvYmogLSBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggZW50cnkuXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmNvbnN0IGZvckVhY2hFbnRyeSA9IChvYmosIGZuKSA9PiB7XG4gIGNvbnN0IGdlbmVyYXRvciA9IG9iaiAmJiBvYmpbaXRlcmF0b3JdO1xuXG4gIGNvbnN0IF9pdGVyYXRvciA9IGdlbmVyYXRvci5jYWxsKG9iaik7XG5cbiAgbGV0IHJlc3VsdDtcblxuICB3aGlsZSAoKHJlc3VsdCA9IF9pdGVyYXRvci5uZXh0KCkpICYmICFyZXN1bHQuZG9uZSkge1xuICAgIGNvbnN0IHBhaXIgPSByZXN1bHQudmFsdWU7XG4gICAgZm4uY2FsbChvYmosIHBhaXJbMF0sIHBhaXJbMV0pO1xuICB9XG59XG5cbi8qKlxuICogSXQgdGFrZXMgYSByZWd1bGFyIGV4cHJlc3Npb24gYW5kIGEgc3RyaW5nLCBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBhbGwgdGhlIG1hdGNoZXNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVnRXhwIC0gVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBhZ2FpbnN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gc2VhcmNoLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheTxib29sZWFuPn1cbiAqL1xuY29uc3QgbWF0Y2hBbGwgPSAocmVnRXhwLCBzdHIpID0+IHtcbiAgbGV0IG1hdGNoZXM7XG4gIGNvbnN0IGFyciA9IFtdO1xuXG4gIHdoaWxlICgobWF0Y2hlcyA9IHJlZ0V4cC5leGVjKHN0cikpICE9PSBudWxsKSB7XG4gICAgYXJyLnB1c2gobWF0Y2hlcyk7XG4gIH1cblxuICByZXR1cm4gYXJyO1xufVxuXG4vKiBDaGVja2luZyBpZiB0aGUga2luZE9mVGVzdCBmdW5jdGlvbiByZXR1cm5zIHRydWUgd2hlbiBwYXNzZWQgYW4gSFRNTEZvcm1FbGVtZW50LiAqL1xuY29uc3QgaXNIVE1MRm9ybSA9IGtpbmRPZlRlc3QoJ0hUTUxGb3JtRWxlbWVudCcpO1xuXG5jb25zdCB0b0NhbWVsQ2FzZSA9IHN0ciA9PiB7XG4gIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bLV9cXHNdKFthLXpcXGRdKShcXHcqKS9nLFxuICAgIGZ1bmN0aW9uIHJlcGxhY2VyKG0sIHAxLCBwMikge1xuICAgICAgcmV0dXJuIHAxLnRvVXBwZXJDYXNlKCkgKyBwMjtcbiAgICB9XG4gICk7XG59O1xuXG4vKiBDcmVhdGluZyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBjaGVjayBpZiBhbiBvYmplY3QgaGFzIGEgcHJvcGVydHkuICovXG5jb25zdCBoYXNPd25Qcm9wZXJ0eSA9ICgoe2hhc093blByb3BlcnR5fSkgPT4gKG9iaiwgcHJvcCkgPT4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKShPYmplY3QucHJvdG90eXBlKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFJlZ0V4cCBvYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzUmVnRXhwID0ga2luZE9mVGVzdCgnUmVnRXhwJyk7XG5cbmNvbnN0IHJlZHVjZURlc2NyaXB0b3JzID0gKG9iaiwgcmVkdWNlcikgPT4ge1xuICBjb25zdCBkZXNjcmlwdG9ycyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG9iaik7XG4gIGNvbnN0IHJlZHVjZWREZXNjcmlwdG9ycyA9IHt9O1xuXG4gIGZvckVhY2goZGVzY3JpcHRvcnMsIChkZXNjcmlwdG9yLCBuYW1lKSA9PiB7XG4gICAgbGV0IHJldDtcbiAgICBpZiAoKHJldCA9IHJlZHVjZXIoZGVzY3JpcHRvciwgbmFtZSwgb2JqKSkgIT09IGZhbHNlKSB7XG4gICAgICByZWR1Y2VkRGVzY3JpcHRvcnNbbmFtZV0gPSByZXQgfHwgZGVzY3JpcHRvcjtcbiAgICB9XG4gIH0pO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwgcmVkdWNlZERlc2NyaXB0b3JzKTtcbn1cblxuLyoqXG4gKiBNYWtlcyBhbGwgbWV0aG9kcyByZWFkLW9ubHlcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqL1xuXG5jb25zdCBmcmVlemVNZXRob2RzID0gKG9iaikgPT4ge1xuICByZWR1Y2VEZXNjcmlwdG9ycyhvYmosIChkZXNjcmlwdG9yLCBuYW1lKSA9PiB7XG4gICAgLy8gc2tpcCByZXN0cmljdGVkIHByb3BzIGluIHN0cmljdCBtb2RlXG4gICAgaWYgKGlzRnVuY3Rpb24ob2JqKSAmJiBbJ2FyZ3VtZW50cycsICdjYWxsZXInLCAnY2FsbGVlJ10uaW5kZXhPZihuYW1lKSAhPT0gLTEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCB2YWx1ZSA9IG9ialtuYW1lXTtcblxuICAgIGlmICghaXNGdW5jdGlvbih2YWx1ZSkpIHJldHVybjtcblxuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGZhbHNlO1xuXG4gICAgaWYgKCd3cml0YWJsZScgaW4gZGVzY3JpcHRvcikge1xuICAgICAgZGVzY3JpcHRvci53cml0YWJsZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghZGVzY3JpcHRvci5zZXQpIHtcbiAgICAgIGRlc2NyaXB0b3Iuc2V0ID0gKCkgPT4ge1xuICAgICAgICB0aHJvdyBFcnJvcignQ2FuIG5vdCByZXdyaXRlIHJlYWQtb25seSBtZXRob2QgXFwnJyArIG5hbWUgKyAnXFwnJyk7XG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG59XG5cbmNvbnN0IHRvT2JqZWN0U2V0ID0gKGFycmF5T3JTdHJpbmcsIGRlbGltaXRlcikgPT4ge1xuICBjb25zdCBvYmogPSB7fTtcblxuICBjb25zdCBkZWZpbmUgPSAoYXJyKSA9PiB7XG4gICAgYXJyLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgb2JqW3ZhbHVlXSA9IHRydWU7XG4gICAgfSk7XG4gIH1cblxuICBpc0FycmF5KGFycmF5T3JTdHJpbmcpID8gZGVmaW5lKGFycmF5T3JTdHJpbmcpIDogZGVmaW5lKFN0cmluZyhhcnJheU9yU3RyaW5nKS5zcGxpdChkZWxpbWl0ZXIpKTtcblxuICByZXR1cm4gb2JqO1xufVxuXG5jb25zdCBub29wID0gKCkgPT4ge31cblxuY29uc3QgdG9GaW5pdGVOdW1iZXIgPSAodmFsdWUsIGRlZmF1bHRWYWx1ZSkgPT4ge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBOdW1iZXIuaXNGaW5pdGUodmFsdWUgPSArdmFsdWUpID8gdmFsdWUgOiBkZWZhdWx0VmFsdWU7XG59XG5cbi8qKlxuICogSWYgdGhlIHRoaW5nIGlzIGEgRm9ybURhdGEgb2JqZWN0LCByZXR1cm4gdHJ1ZSwgb3RoZXJ3aXNlIHJldHVybiBmYWxzZS5cbiAqXG4gKiBAcGFyYW0ge3Vua25vd259IHRoaW5nIC0gVGhlIHRoaW5nIHRvIGNoZWNrLlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1NwZWNDb21wbGlhbnRGb3JtKHRoaW5nKSB7XG4gIHJldHVybiAhISh0aGluZyAmJiBpc0Z1bmN0aW9uKHRoaW5nLmFwcGVuZCkgJiYgdGhpbmdbdG9TdHJpbmdUYWddID09PSAnRm9ybURhdGEnICYmIHRoaW5nW2l0ZXJhdG9yXSk7XG59XG5cbmNvbnN0IHRvSlNPTk9iamVjdCA9IChvYmopID0+IHtcbiAgY29uc3Qgc3RhY2sgPSBuZXcgQXJyYXkoMTApO1xuXG4gIGNvbnN0IHZpc2l0ID0gKHNvdXJjZSwgaSkgPT4ge1xuXG4gICAgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIGlmIChzdGFjay5pbmRleE9mKHNvdXJjZSkgPj0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmKCEoJ3RvSlNPTicgaW4gc291cmNlKSkge1xuICAgICAgICBzdGFja1tpXSA9IHNvdXJjZTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gaXNBcnJheShzb3VyY2UpID8gW10gOiB7fTtcblxuICAgICAgICBmb3JFYWNoKHNvdXJjZSwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgICBjb25zdCByZWR1Y2VkVmFsdWUgPSB2aXNpdCh2YWx1ZSwgaSArIDEpO1xuICAgICAgICAgICFpc1VuZGVmaW5lZChyZWR1Y2VkVmFsdWUpICYmICh0YXJnZXRba2V5XSA9IHJlZHVjZWRWYWx1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN0YWNrW2ldID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNvdXJjZTtcbiAgfVxuXG4gIHJldHVybiB2aXNpdChvYmosIDApO1xufVxuXG5jb25zdCBpc0FzeW5jRm4gPSBraW5kT2ZUZXN0KCdBc3luY0Z1bmN0aW9uJyk7XG5cbmNvbnN0IGlzVGhlbmFibGUgPSAodGhpbmcpID0+XG4gIHRoaW5nICYmIChpc09iamVjdCh0aGluZykgfHwgaXNGdW5jdGlvbih0aGluZykpICYmIGlzRnVuY3Rpb24odGhpbmcudGhlbikgJiYgaXNGdW5jdGlvbih0aGluZy5jYXRjaCk7XG5cbi8vIG9yaWdpbmFsIGNvZGVcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9EaWdpdGFsQnJhaW5KUy9BeGlvc1Byb21pc2UvYmxvYi8xNmRlYWIxMzcxMGVjMDk3Nzk5MjIxMzFmM2ZhNTk1NDMyMGY4M2FiL2xpYi91dGlscy5qcyNMMTEtTDM0XG5cbmNvbnN0IF9zZXRJbW1lZGlhdGUgPSAoKHNldEltbWVkaWF0ZVN1cHBvcnRlZCwgcG9zdE1lc3NhZ2VTdXBwb3J0ZWQpID0+IHtcbiAgaWYgKHNldEltbWVkaWF0ZVN1cHBvcnRlZCkge1xuICAgIHJldHVybiBzZXRJbW1lZGlhdGU7XG4gIH1cblxuICByZXR1cm4gcG9zdE1lc3NhZ2VTdXBwb3J0ZWQgPyAoKHRva2VuLCBjYWxsYmFja3MpID0+IHtcbiAgICBfZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsICh7c291cmNlLCBkYXRhfSkgPT4ge1xuICAgICAgaWYgKHNvdXJjZSA9PT0gX2dsb2JhbCAmJiBkYXRhID09PSB0b2tlbikge1xuICAgICAgICBjYWxsYmFja3MubGVuZ3RoICYmIGNhbGxiYWNrcy5zaGlmdCgpKCk7XG4gICAgICB9XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgcmV0dXJuIChjYikgPT4ge1xuICAgICAgY2FsbGJhY2tzLnB1c2goY2IpO1xuICAgICAgX2dsb2JhbC5wb3N0TWVzc2FnZSh0b2tlbiwgXCIqXCIpO1xuICAgIH1cbiAgfSkoYGF4aW9zQCR7TWF0aC5yYW5kb20oKX1gLCBbXSkgOiAoY2IpID0+IHNldFRpbWVvdXQoY2IpO1xufSkoXG4gIHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicsXG4gIGlzRnVuY3Rpb24oX2dsb2JhbC5wb3N0TWVzc2FnZSlcbik7XG5cbmNvbnN0IGFzYXAgPSB0eXBlb2YgcXVldWVNaWNyb3Rhc2sgIT09ICd1bmRlZmluZWQnID9cbiAgcXVldWVNaWNyb3Rhc2suYmluZChfZ2xvYmFsKSA6ICggdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MubmV4dFRpY2sgfHwgX3NldEltbWVkaWF0ZSk7XG5cbi8vICoqKioqKioqKioqKioqKioqKioqKlxuXG5cbmNvbnN0IGlzSXRlcmFibGUgPSAodGhpbmcpID0+IHRoaW5nICE9IG51bGwgJiYgaXNGdW5jdGlvbih0aGluZ1tpdGVyYXRvcl0pO1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaXNBcnJheSxcbiAgaXNBcnJheUJ1ZmZlcixcbiAgaXNCdWZmZXIsXG4gIGlzRm9ybURhdGEsXG4gIGlzQXJyYXlCdWZmZXJWaWV3LFxuICBpc1N0cmluZyxcbiAgaXNOdW1iZXIsXG4gIGlzQm9vbGVhbixcbiAgaXNPYmplY3QsXG4gIGlzUGxhaW5PYmplY3QsXG4gIGlzUmVhZGFibGVTdHJlYW0sXG4gIGlzUmVxdWVzdCxcbiAgaXNSZXNwb25zZSxcbiAgaXNIZWFkZXJzLFxuICBpc1VuZGVmaW5lZCxcbiAgaXNEYXRlLFxuICBpc0ZpbGUsXG4gIGlzQmxvYixcbiAgaXNSZWdFeHAsXG4gIGlzRnVuY3Rpb24sXG4gIGlzU3RyZWFtLFxuICBpc1VSTFNlYXJjaFBhcmFtcyxcbiAgaXNUeXBlZEFycmF5LFxuICBpc0ZpbGVMaXN0LFxuICBmb3JFYWNoLFxuICBtZXJnZSxcbiAgZXh0ZW5kLFxuICB0cmltLFxuICBzdHJpcEJPTSxcbiAgaW5oZXJpdHMsXG4gIHRvRmxhdE9iamVjdCxcbiAga2luZE9mLFxuICBraW5kT2ZUZXN0LFxuICBlbmRzV2l0aCxcbiAgdG9BcnJheSxcbiAgZm9yRWFjaEVudHJ5LFxuICBtYXRjaEFsbCxcbiAgaXNIVE1MRm9ybSxcbiAgaGFzT3duUHJvcGVydHksXG4gIGhhc093blByb3A6IGhhc093blByb3BlcnR5LCAvLyBhbiBhbGlhcyB0byBhdm9pZCBFU0xpbnQgbm8tcHJvdG90eXBlLWJ1aWx0aW5zIGRldGVjdGlvblxuICByZWR1Y2VEZXNjcmlwdG9ycyxcbiAgZnJlZXplTWV0aG9kcyxcbiAgdG9PYmplY3RTZXQsXG4gIHRvQ2FtZWxDYXNlLFxuICBub29wLFxuICB0b0Zpbml0ZU51bWJlcixcbiAgZmluZEtleSxcbiAgZ2xvYmFsOiBfZ2xvYmFsLFxuICBpc0NvbnRleHREZWZpbmVkLFxuICBpc1NwZWNDb21wbGlhbnRGb3JtLFxuICB0b0pTT05PYmplY3QsXG4gIGlzQXN5bmNGbixcbiAgaXNUaGVuYWJsZSxcbiAgc2V0SW1tZWRpYXRlOiBfc2V0SW1tZWRpYXRlLFxuICBhc2FwLFxuICBpc0l0ZXJhYmxlXG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcblxuLyoqXG4gKiBDcmVhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UsIGNvbmZpZywgZXJyb3IgY29kZSwgcmVxdWVzdCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuICogQHBhcmFtIHtPYmplY3R9IFtjb25maWddIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICpcbiAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGNyZWF0ZWQgZXJyb3IuXG4gKi9cbmZ1bmN0aW9uIEF4aW9zRXJyb3IobWVzc2FnZSwgY29kZSwgY29uZmlnLCByZXF1ZXN0LCByZXNwb25zZSkge1xuICBFcnJvci5jYWxsKHRoaXMpO1xuXG4gIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuc3RhY2sgPSAobmV3IEVycm9yKCkpLnN0YWNrO1xuICB9XG5cbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgdGhpcy5uYW1lID0gJ0F4aW9zRXJyb3InO1xuICBjb2RlICYmICh0aGlzLmNvZGUgPSBjb2RlKTtcbiAgY29uZmlnICYmICh0aGlzLmNvbmZpZyA9IGNvbmZpZyk7XG4gIHJlcXVlc3QgJiYgKHRoaXMucmVxdWVzdCA9IHJlcXVlc3QpO1xuICBpZiAocmVzcG9uc2UpIHtcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy5zdGF0dXMgPSByZXNwb25zZS5zdGF0dXMgPyByZXNwb25zZS5zdGF0dXMgOiBudWxsO1xuICB9XG59XG5cbnV0aWxzLmluaGVyaXRzKEF4aW9zRXJyb3IsIEVycm9yLCB7XG4gIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBTdGFuZGFyZFxuICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgLy8gTWljcm9zb2Z0XG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgIG51bWJlcjogdGhpcy5udW1iZXIsXG4gICAgICAvLyBNb3ppbGxhXG4gICAgICBmaWxlTmFtZTogdGhpcy5maWxlTmFtZSxcbiAgICAgIGxpbmVOdW1iZXI6IHRoaXMubGluZU51bWJlcixcbiAgICAgIGNvbHVtbk51bWJlcjogdGhpcy5jb2x1bW5OdW1iZXIsXG4gICAgICBzdGFjazogdGhpcy5zdGFjayxcbiAgICAgIC8vIEF4aW9zXG4gICAgICBjb25maWc6IHV0aWxzLnRvSlNPTk9iamVjdCh0aGlzLmNvbmZpZyksXG4gICAgICBjb2RlOiB0aGlzLmNvZGUsXG4gICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzXG4gICAgfTtcbiAgfVxufSk7XG5cbmNvbnN0IHByb3RvdHlwZSA9IEF4aW9zRXJyb3IucHJvdG90eXBlO1xuY29uc3QgZGVzY3JpcHRvcnMgPSB7fTtcblxuW1xuICAnRVJSX0JBRF9PUFRJT05fVkFMVUUnLFxuICAnRVJSX0JBRF9PUFRJT04nLFxuICAnRUNPTk5BQk9SVEVEJyxcbiAgJ0VUSU1FRE9VVCcsXG4gICdFUlJfTkVUV09SSycsXG4gICdFUlJfRlJfVE9PX01BTllfUkVESVJFQ1RTJyxcbiAgJ0VSUl9ERVBSRUNBVEVEJyxcbiAgJ0VSUl9CQURfUkVTUE9OU0UnLFxuICAnRVJSX0JBRF9SRVFVRVNUJyxcbiAgJ0VSUl9DQU5DRUxFRCcsXG4gICdFUlJfTk9UX1NVUFBPUlQnLFxuICAnRVJSX0lOVkFMSURfVVJMJ1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbl0uZm9yRWFjaChjb2RlID0+IHtcbiAgZGVzY3JpcHRvcnNbY29kZV0gPSB7dmFsdWU6IGNvZGV9O1xufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEF4aW9zRXJyb3IsIGRlc2NyaXB0b3JzKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90b3R5cGUsICdpc0F4aW9zRXJyb3InLCB7dmFsdWU6IHRydWV9KTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbkF4aW9zRXJyb3IuZnJvbSA9IChlcnJvciwgY29kZSwgY29uZmlnLCByZXF1ZXN0LCByZXNwb25zZSwgY3VzdG9tUHJvcHMpID0+IHtcbiAgY29uc3QgYXhpb3NFcnJvciA9IE9iamVjdC5jcmVhdGUocHJvdG90eXBlKTtcblxuICB1dGlscy50b0ZsYXRPYmplY3QoZXJyb3IsIGF4aW9zRXJyb3IsIGZ1bmN0aW9uIGZpbHRlcihvYmopIHtcbiAgICByZXR1cm4gb2JqICE9PSBFcnJvci5wcm90b3R5cGU7XG4gIH0sIHByb3AgPT4ge1xuICAgIHJldHVybiBwcm9wICE9PSAnaXNBeGlvc0Vycm9yJztcbiAgfSk7XG5cbiAgQXhpb3NFcnJvci5jYWxsKGF4aW9zRXJyb3IsIGVycm9yLm1lc3NhZ2UsIGNvZGUsIGNvbmZpZywgcmVxdWVzdCwgcmVzcG9uc2UpO1xuXG4gIGF4aW9zRXJyb3IuY2F1c2UgPSBlcnJvcjtcblxuICBheGlvc0Vycm9yLm5hbWUgPSBlcnJvci5uYW1lO1xuXG4gIGN1c3RvbVByb3BzICYmIE9iamVjdC5hc3NpZ24oYXhpb3NFcnJvciwgY3VzdG9tUHJvcHMpO1xuXG4gIHJldHVybiBheGlvc0Vycm9yO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQXhpb3NFcnJvcjtcbiIsICIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgc3RyaWN0XG5leHBvcnQgZGVmYXVsdCBudWxsO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcbmltcG9ydCBBeGlvc0Vycm9yIGZyb20gJy4uL2NvcmUvQXhpb3NFcnJvci5qcyc7XG4vLyB0ZW1wb3JhcnkgaG90Zml4IHRvIGF2b2lkIGNpcmN1bGFyIHJlZmVyZW5jZXMgdW50aWwgQXhpb3NVUkxTZWFyY2hQYXJhbXMgaXMgcmVmYWN0b3JlZFxuaW1wb3J0IFBsYXRmb3JtRm9ybURhdGEgZnJvbSAnLi4vcGxhdGZvcm0vbm9kZS9jbGFzc2VzL0Zvcm1EYXRhLmpzJztcblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBnaXZlbiB0aGluZyBpcyBhIGFycmF5IG9yIGpzIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGhpbmcgLSBUaGUgb2JqZWN0IG9yIGFycmF5IHRvIGJlIHZpc2l0ZWQuXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzVmlzaXRhYmxlKHRoaW5nKSB7XG4gIHJldHVybiB1dGlscy5pc1BsYWluT2JqZWN0KHRoaW5nKSB8fCB1dGlscy5pc0FycmF5KHRoaW5nKTtcbn1cblxuLyoqXG4gKiBJdCByZW1vdmVzIHRoZSBicmFja2V0cyBmcm9tIHRoZSBlbmQgb2YgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIGtleSBvZiB0aGUgcGFyYW1ldGVyLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBrZXkgd2l0aG91dCB0aGUgYnJhY2tldHMuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUJyYWNrZXRzKGtleSkge1xuICByZXR1cm4gdXRpbHMuZW5kc1dpdGgoa2V5LCAnW10nKSA/IGtleS5zbGljZSgwLCAtMikgOiBrZXk7XG59XG5cbi8qKlxuICogSXQgdGFrZXMgYSBwYXRoLCBhIGtleSwgYW5kIGEgYm9vbGVhbiwgYW5kIHJldHVybnMgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFRoZSBwYXRoIHRvIHRoZSBjdXJyZW50IGtleS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBUaGUga2V5IG9mIHRoZSBjdXJyZW50IG9iamVjdCBiZWluZyBpdGVyYXRlZCBvdmVyLlxuICogQHBhcmFtIHtzdHJpbmd9IGRvdHMgLSBJZiB0cnVlLCB0aGUga2V5IHdpbGwgYmUgcmVuZGVyZWQgd2l0aCBkb3RzIGluc3RlYWQgb2YgYnJhY2tldHMuXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIHBhdGggdG8gdGhlIGN1cnJlbnQga2V5LlxuICovXG5mdW5jdGlvbiByZW5kZXJLZXkocGF0aCwga2V5LCBkb3RzKSB7XG4gIGlmICghcGF0aCkgcmV0dXJuIGtleTtcbiAgcmV0dXJuIHBhdGguY29uY2F0KGtleSkubWFwKGZ1bmN0aW9uIGVhY2godG9rZW4sIGkpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB0b2tlbiA9IHJlbW92ZUJyYWNrZXRzKHRva2VuKTtcbiAgICByZXR1cm4gIWRvdHMgJiYgaSA/ICdbJyArIHRva2VuICsgJ10nIDogdG9rZW47XG4gIH0pLmpvaW4oZG90cyA/ICcuJyA6ICcnKTtcbn1cblxuLyoqXG4gKiBJZiB0aGUgYXJyYXkgaXMgYW4gYXJyYXkgYW5kIG5vbmUgb2YgaXRzIGVsZW1lbnRzIGFyZSB2aXNpdGFibGUsIHRoZW4gaXQncyBhIGZsYXQgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheTxhbnk+fSBhcnIgLSBUaGUgYXJyYXkgdG8gY2hlY2tcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNGbGF0QXJyYXkoYXJyKSB7XG4gIHJldHVybiB1dGlscy5pc0FycmF5KGFycikgJiYgIWFyci5zb21lKGlzVmlzaXRhYmxlKTtcbn1cblxuY29uc3QgcHJlZGljYXRlcyA9IHV0aWxzLnRvRmxhdE9iamVjdCh1dGlscywge30sIG51bGwsIGZ1bmN0aW9uIGZpbHRlcihwcm9wKSB7XG4gIHJldHVybiAvXmlzW0EtWl0vLnRlc3QocHJvcCk7XG59KTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgZGF0YSBvYmplY3QgdG8gRm9ybURhdGFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0gez9PYmplY3R9IFtmb3JtRGF0YV1cbiAqIEBwYXJhbSB7P09iamVjdH0gW29wdGlvbnNdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy52aXNpdG9yXVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5tZXRhVG9rZW5zID0gdHJ1ZV1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZG90cyA9IGZhbHNlXVxuICogQHBhcmFtIHs/Qm9vbGVhbn0gW29wdGlvbnMuaW5kZXhlcyA9IGZhbHNlXVxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKiovXG5cbi8qKlxuICogSXQgY29udmVydHMgYW4gb2JqZWN0IGludG8gYSBGb3JtRGF0YSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdDxhbnksIGFueT59IG9iaiAtIFRoZSBvYmplY3QgdG8gY29udmVydCB0byBmb3JtIGRhdGEuXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9ybURhdGEgLSBUaGUgRm9ybURhdGEgb2JqZWN0IHRvIGFwcGVuZCB0by5cbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zXG4gKi9cbmZ1bmN0aW9uIHRvRm9ybURhdGEob2JqLCBmb3JtRGF0YSwgb3B0aW9ucykge1xuICBpZiAoIXV0aWxzLmlzT2JqZWN0KG9iaikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0YXJnZXQgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBmb3JtRGF0YSA9IGZvcm1EYXRhIHx8IG5ldyAoUGxhdGZvcm1Gb3JtRGF0YSB8fCBGb3JtRGF0YSkoKTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgb3B0aW9ucyA9IHV0aWxzLnRvRmxhdE9iamVjdChvcHRpb25zLCB7XG4gICAgbWV0YVRva2VuczogdHJ1ZSxcbiAgICBkb3RzOiBmYWxzZSxcbiAgICBpbmRleGVzOiBmYWxzZVxuICB9LCBmYWxzZSwgZnVuY3Rpb24gZGVmaW5lZChvcHRpb24sIHNvdXJjZSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lcS1udWxsLGVxZXFlcVxuICAgIHJldHVybiAhdXRpbHMuaXNVbmRlZmluZWQoc291cmNlW29wdGlvbl0pO1xuICB9KTtcblxuICBjb25zdCBtZXRhVG9rZW5zID0gb3B0aW9ucy5tZXRhVG9rZW5zO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgY29uc3QgdmlzaXRvciA9IG9wdGlvbnMudmlzaXRvciB8fCBkZWZhdWx0VmlzaXRvcjtcbiAgY29uc3QgZG90cyA9IG9wdGlvbnMuZG90cztcbiAgY29uc3QgaW5kZXhlcyA9IG9wdGlvbnMuaW5kZXhlcztcbiAgY29uc3QgX0Jsb2IgPSBvcHRpb25zLkJsb2IgfHwgdHlwZW9mIEJsb2IgIT09ICd1bmRlZmluZWQnICYmIEJsb2I7XG4gIGNvbnN0IHVzZUJsb2IgPSBfQmxvYiAmJiB1dGlscy5pc1NwZWNDb21wbGlhbnRGb3JtKGZvcm1EYXRhKTtcblxuICBpZiAoIXV0aWxzLmlzRnVuY3Rpb24odmlzaXRvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2aXNpdG9yIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29udmVydFZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gJyc7XG5cbiAgICBpZiAodXRpbHMuaXNEYXRlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKHV0aWxzLmlzQm9vbGVhbih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGlmICghdXNlQmxvYiAmJiB1dGlscy5pc0Jsb2IodmFsdWUpKSB7XG4gICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcignQmxvYiBpcyBub3Qgc3VwcG9ydGVkLiBVc2UgYSBCdWZmZXIgaW5zdGVhZC4nKTtcbiAgICB9XG5cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlcih2YWx1ZSkgfHwgdXRpbHMuaXNUeXBlZEFycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHVzZUJsb2IgJiYgdHlwZW9mIEJsb2IgPT09ICdmdW5jdGlvbicgPyBuZXcgQmxvYihbdmFsdWVdKSA6IEJ1ZmZlci5mcm9tKHZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogRGVmYXVsdCB2aXNpdG9yLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0ga2V5XG4gICAqIEBwYXJhbSB7QXJyYXk8U3RyaW5nfE51bWJlcj59IHBhdGhcbiAgICogQHRoaXMge0Zvcm1EYXRhfVxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gcmV0dXJuIHRydWUgdG8gdmlzaXQgdGhlIGVhY2ggcHJvcCBvZiB0aGUgdmFsdWUgcmVjdXJzaXZlbHlcbiAgICovXG4gIGZ1bmN0aW9uIGRlZmF1bHRWaXNpdG9yKHZhbHVlLCBrZXksIHBhdGgpIHtcbiAgICBsZXQgYXJyID0gdmFsdWU7XG5cbiAgICBpZiAodmFsdWUgJiYgIXBhdGggJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgaWYgKHV0aWxzLmVuZHNXaXRoKGtleSwgJ3t9JykpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgIGtleSA9IG1ldGFUb2tlbnMgPyBrZXkgOiBrZXkuc2xpY2UoMCwgLTIpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAodXRpbHMuaXNBcnJheSh2YWx1ZSkgJiYgaXNGbGF0QXJyYXkodmFsdWUpKSB8fFxuICAgICAgICAoKHV0aWxzLmlzRmlsZUxpc3QodmFsdWUpIHx8IHV0aWxzLmVuZHNXaXRoKGtleSwgJ1tdJykpICYmIChhcnIgPSB1dGlscy50b0FycmF5KHZhbHVlKSlcbiAgICAgICAgKSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAga2V5ID0gcmVtb3ZlQnJhY2tldHMoa2V5KTtcblxuICAgICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiBlYWNoKGVsLCBpbmRleCkge1xuICAgICAgICAgICEodXRpbHMuaXNVbmRlZmluZWQoZWwpIHx8IGVsID09PSBudWxsKSAmJiBmb3JtRGF0YS5hcHBlbmQoXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcbiAgICAgICAgICAgIGluZGV4ZXMgPT09IHRydWUgPyByZW5kZXJLZXkoW2tleV0sIGluZGV4LCBkb3RzKSA6IChpbmRleGVzID09PSBudWxsID8ga2V5IDoga2V5ICsgJ1tdJyksXG4gICAgICAgICAgICBjb252ZXJ0VmFsdWUoZWwpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNWaXNpdGFibGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmb3JtRGF0YS5hcHBlbmQocmVuZGVyS2V5KHBhdGgsIGtleSwgZG90cyksIGNvbnZlcnRWYWx1ZSh2YWx1ZSkpO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3Qgc3RhY2sgPSBbXTtcblxuICBjb25zdCBleHBvc2VkSGVscGVycyA9IE9iamVjdC5hc3NpZ24ocHJlZGljYXRlcywge1xuICAgIGRlZmF1bHRWaXNpdG9yLFxuICAgIGNvbnZlcnRWYWx1ZSxcbiAgICBpc1Zpc2l0YWJsZVxuICB9KTtcblxuICBmdW5jdGlvbiBidWlsZCh2YWx1ZSwgcGF0aCkge1xuICAgIGlmICh1dGlscy5pc1VuZGVmaW5lZCh2YWx1ZSkpIHJldHVybjtcblxuICAgIGlmIChzdGFjay5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcbiAgICAgIHRocm93IEVycm9yKCdDaXJjdWxhciByZWZlcmVuY2UgZGV0ZWN0ZWQgaW4gJyArIHBhdGguam9pbignLicpKTtcbiAgICB9XG5cbiAgICBzdGFjay5wdXNoKHZhbHVlKTtcblxuICAgIHV0aWxzLmZvckVhY2godmFsdWUsIGZ1bmN0aW9uIGVhY2goZWwsIGtleSkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gISh1dGlscy5pc1VuZGVmaW5lZChlbCkgfHwgZWwgPT09IG51bGwpICYmIHZpc2l0b3IuY2FsbChcbiAgICAgICAgZm9ybURhdGEsIGVsLCB1dGlscy5pc1N0cmluZyhrZXkpID8ga2V5LnRyaW0oKSA6IGtleSwgcGF0aCwgZXhwb3NlZEhlbHBlcnNcbiAgICAgICk7XG5cbiAgICAgIGlmIChyZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgYnVpbGQoZWwsIHBhdGggPyBwYXRoLmNvbmNhdChrZXkpIDogW2tleV0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc3RhY2sucG9wKCk7XG4gIH1cblxuICBpZiAoIXV0aWxzLmlzT2JqZWN0KG9iaikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdkYXRhIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gIH1cblxuICBidWlsZChvYmopO1xuXG4gIHJldHVybiBmb3JtRGF0YTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdG9Gb3JtRGF0YTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0b0Zvcm1EYXRhIGZyb20gJy4vdG9Gb3JtRGF0YS5qcyc7XG5cbi8qKlxuICogSXQgZW5jb2RlcyBhIHN0cmluZyBieSByZXBsYWNpbmcgYWxsIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IGluIHRoZSB1bnJlc2VydmVkIHNldCB3aXRoXG4gKiB0aGVpciBwZXJjZW50LWVuY29kZWQgZXF1aXZhbGVudHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byBlbmNvZGUuXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGVuY29kZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBlbmNvZGUoc3RyKSB7XG4gIGNvbnN0IGNoYXJNYXAgPSB7XG4gICAgJyEnOiAnJTIxJyxcbiAgICBcIidcIjogJyUyNycsXG4gICAgJygnOiAnJTI4JyxcbiAgICAnKSc6ICclMjknLFxuICAgICd+JzogJyU3RScsXG4gICAgJyUyMCc6ICcrJyxcbiAgICAnJTAwJzogJ1xceDAwJ1xuICB9O1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cikucmVwbGFjZSgvWyEnKCl+XXwlMjB8JTAwL2csIGZ1bmN0aW9uIHJlcGxhY2VyKG1hdGNoKSB7XG4gICAgcmV0dXJuIGNoYXJNYXBbbWF0Y2hdO1xuICB9KTtcbn1cblxuLyoqXG4gKiBJdCB0YWtlcyBhIHBhcmFtcyBvYmplY3QgYW5kIGNvbnZlcnRzIGl0IHRvIGEgRm9ybURhdGEgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBhbnk+fSBwYXJhbXMgLSBUaGUgcGFyYW1ldGVycyB0byBiZSBjb252ZXJ0ZWQgdG8gYSBGb3JtRGF0YSBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIGFueT59IG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBvYmplY3QgcGFzc2VkIHRvIHRoZSBBeGlvcyBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gQXhpb3NVUkxTZWFyY2hQYXJhbXMocGFyYW1zLCBvcHRpb25zKSB7XG4gIHRoaXMuX3BhaXJzID0gW107XG5cbiAgcGFyYW1zICYmIHRvRm9ybURhdGEocGFyYW1zLCB0aGlzLCBvcHRpb25zKTtcbn1cblxuY29uc3QgcHJvdG90eXBlID0gQXhpb3NVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlO1xuXG5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24gYXBwZW5kKG5hbWUsIHZhbHVlKSB7XG4gIHRoaXMuX3BhaXJzLnB1c2goW25hbWUsIHZhbHVlXSk7XG59O1xuXG5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhlbmNvZGVyKSB7XG4gIGNvbnN0IF9lbmNvZGUgPSBlbmNvZGVyID8gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZW5jb2Rlci5jYWxsKHRoaXMsIHZhbHVlLCBlbmNvZGUpO1xuICB9IDogZW5jb2RlO1xuXG4gIHJldHVybiB0aGlzLl9wYWlycy5tYXAoZnVuY3Rpb24gZWFjaChwYWlyKSB7XG4gICAgcmV0dXJuIF9lbmNvZGUocGFpclswXSkgKyAnPScgKyBfZW5jb2RlKHBhaXJbMV0pO1xuICB9LCAnJykuam9pbignJicpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQXhpb3NVUkxTZWFyY2hQYXJhbXM7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IEF4aW9zVVJMU2VhcmNoUGFyYW1zIGZyb20gJy4uL2hlbHBlcnMvQXhpb3NVUkxTZWFyY2hQYXJhbXMuanMnO1xuXG4vKipcbiAqIEl0IHJlcGxhY2VzIGFsbCBpbnN0YW5jZXMgb2YgdGhlIGNoYXJhY3RlcnMgYDpgLCBgJGAsIGAsYCwgYCtgLCBgW2AsIGFuZCBgXWAgd2l0aCB0aGVpclxuICogVVJJIGVuY29kZWQgY291bnRlcnBhcnRzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbCBUaGUgdmFsdWUgdG8gYmUgZW5jb2RlZC5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZW5jb2RlZCB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXG4gICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxuICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxuICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cbiAgICByZXBsYWNlKC8lMjAvZywgJysnKS5cbiAgICByZXBsYWNlKC8lNUIvZ2ksICdbJykuXG4gICAgcmVwbGFjZSgvJTVEL2dpLCAnXScpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgVVJMIGJ5IGFwcGVuZGluZyBwYXJhbXMgdG8gdGhlIGVuZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGJhc2Ugb2YgdGhlIHVybCAoZS5nLiwgaHR0cDovL3d3dy5nb29nbGUuY29tKVxuICogQHBhcmFtIHtvYmplY3R9IFtwYXJhbXNdIFRoZSBwYXJhbXMgdG8gYmUgYXBwZW5kZWRcbiAqIEBwYXJhbSB7PyhvYmplY3R8RnVuY3Rpb24pfSBvcHRpb25zXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCB1cmxcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYnVpbGRVUkwodXJsLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIGlmICghcGFyYW1zKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICBcbiAgY29uc3QgX2VuY29kZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5lbmNvZGUgfHwgZW5jb2RlO1xuXG4gIGlmICh1dGlscy5pc0Z1bmN0aW9uKG9wdGlvbnMpKSB7XG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIHNlcmlhbGl6ZTogb3B0aW9uc1xuICAgIH07XG4gIH0gXG5cbiAgY29uc3Qgc2VyaWFsaXplRm4gPSBvcHRpb25zICYmIG9wdGlvbnMuc2VyaWFsaXplO1xuXG4gIGxldCBzZXJpYWxpemVkUGFyYW1zO1xuXG4gIGlmIChzZXJpYWxpemVGbikge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBzZXJpYWxpemVGbihwYXJhbXMsIG9wdGlvbnMpO1xuICB9IGVsc2Uge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSB1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpID9cbiAgICAgIHBhcmFtcy50b1N0cmluZygpIDpcbiAgICAgIG5ldyBBeGlvc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMsIG9wdGlvbnMpLnRvU3RyaW5nKF9lbmNvZGUpO1xuICB9XG5cbiAgaWYgKHNlcmlhbGl6ZWRQYXJhbXMpIHtcbiAgICBjb25zdCBoYXNobWFya0luZGV4ID0gdXJsLmluZGV4T2YoXCIjXCIpO1xuXG4gICAgaWYgKGhhc2htYXJrSW5kZXggIT09IC0xKSB7XG4gICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgaGFzaG1hcmtJbmRleCk7XG4gICAgfVxuICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5cbmNsYXNzIEludGVyY2VwdG9yTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBuZXcgaW50ZXJjZXB0b3IgdG8gdGhlIHN0YWNrXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0ZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgcmVqZWN0YCBmb3IgYSBgUHJvbWlzZWBcbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICAgKi9cbiAgdXNlKGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmhhbmRsZXJzLnB1c2goe1xuICAgICAgZnVsZmlsbGVkLFxuICAgICAgcmVqZWN0ZWQsXG4gICAgICBzeW5jaHJvbm91czogb3B0aW9ucyA/IG9wdGlvbnMuc3luY2hyb25vdXMgOiBmYWxzZSxcbiAgICAgIHJ1bldoZW46IG9wdGlvbnMgPyBvcHRpb25zLnJ1bldoZW4gOiBudWxsXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuaGFuZGxlcnMubGVuZ3RoIC0gMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGlkIFRoZSBJRCB0aGF0IHdhcyByZXR1cm5lZCBieSBgdXNlYFxuICAgKlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBpbnRlcmNlcHRvciB3YXMgcmVtb3ZlZCwgYGZhbHNlYCBvdGhlcndpc2VcbiAgICovXG4gIGVqZWN0KGlkKSB7XG4gICAgaWYgKHRoaXMuaGFuZGxlcnNbaWRdKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCBpbnRlcmNlcHRvcnMgZnJvbSB0aGUgc3RhY2tcbiAgICpcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBjbGVhcigpIHtcbiAgICBpZiAodGhpcy5oYW5kbGVycykge1xuICAgICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlIG92ZXIgYWxsIHRoZSByZWdpc3RlcmVkIGludGVyY2VwdG9yc1xuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICAgKiBpbnRlcmNlcHRvcnMgdGhhdCBtYXkgaGF2ZSBiZWNvbWUgYG51bGxgIGNhbGxpbmcgYGVqZWN0YC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAgICpcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBmb3JFYWNoKGZuKSB7XG4gICAgdXRpbHMuZm9yRWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbiBmb3JFYWNoSGFuZGxlcihoKSB7XG4gICAgICBpZiAoaCAhPT0gbnVsbCkge1xuICAgICAgICBmbihoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBJbnRlcmNlcHRvck1hbmFnZXI7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHNpbGVudEpTT05QYXJzaW5nOiB0cnVlLFxuICBmb3JjZWRKU09OUGFyc2luZzogdHJ1ZSxcbiAgY2xhcmlmeVRpbWVvdXRFcnJvcjogZmFsc2Vcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgQXhpb3NVUkxTZWFyY2hQYXJhbXMgZnJvbSAnLi4vLi4vLi4vaGVscGVycy9BeGlvc1VSTFNlYXJjaFBhcmFtcy5qcyc7XG5leHBvcnQgZGVmYXVsdCB0eXBlb2YgVVJMU2VhcmNoUGFyYW1zICE9PSAndW5kZWZpbmVkJyA/IFVSTFNlYXJjaFBhcmFtcyA6IEF4aW9zVVJMU2VhcmNoUGFyYW1zO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgdHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJyA/IEZvcm1EYXRhIDogbnVsbDtcbiIsICIndXNlIHN0cmljdCdcblxuZXhwb3J0IGRlZmF1bHQgdHlwZW9mIEJsb2IgIT09ICd1bmRlZmluZWQnID8gQmxvYiA6IG51bGxcbiIsICJpbXBvcnQgVVJMU2VhcmNoUGFyYW1zIGZyb20gJy4vY2xhc3Nlcy9VUkxTZWFyY2hQYXJhbXMuanMnXG5pbXBvcnQgRm9ybURhdGEgZnJvbSAnLi9jbGFzc2VzL0Zvcm1EYXRhLmpzJ1xuaW1wb3J0IEJsb2IgZnJvbSAnLi9jbGFzc2VzL0Jsb2IuanMnXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaXNCcm93c2VyOiB0cnVlLFxuICBjbGFzc2VzOiB7XG4gICAgVVJMU2VhcmNoUGFyYW1zLFxuICAgIEZvcm1EYXRhLFxuICAgIEJsb2JcbiAgfSxcbiAgcHJvdG9jb2xzOiBbJ2h0dHAnLCAnaHR0cHMnLCAnZmlsZScsICdibG9iJywgJ3VybCcsICdkYXRhJ11cbn07XG4iLCAiY29uc3QgaGFzQnJvd3NlckVudiA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCc7XG5cbmNvbnN0IF9uYXZpZ2F0b3IgPSB0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3IgfHwgdW5kZWZpbmVkO1xuXG4vKipcbiAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudFxuICpcbiAqIFRoaXMgYWxsb3dzIGF4aW9zIHRvIHJ1biBpbiBhIHdlYiB3b3JrZXIsIGFuZCByZWFjdC1uYXRpdmUuXG4gKiBCb3RoIGVudmlyb25tZW50cyBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LCBidXQgbm90IGZ1bGx5IHN0YW5kYXJkIGdsb2JhbHMuXG4gKlxuICogd2ViIHdvcmtlcnM6XG4gKiAgdHlwZW9mIHdpbmRvdyAtPiB1bmRlZmluZWRcbiAqICB0eXBlb2YgZG9jdW1lbnQgLT4gdW5kZWZpbmVkXG4gKlxuICogcmVhY3QtbmF0aXZlOlxuICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdSZWFjdE5hdGl2ZSdcbiAqIG5hdGl2ZXNjcmlwdFxuICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdOYXRpdmVTY3JpcHQnIG9yICdOUydcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuY29uc3QgaGFzU3RhbmRhcmRCcm93c2VyRW52ID0gaGFzQnJvd3NlckVudiAmJlxuICAoIV9uYXZpZ2F0b3IgfHwgWydSZWFjdE5hdGl2ZScsICdOYXRpdmVTY3JpcHQnLCAnTlMnXS5pbmRleE9mKF9uYXZpZ2F0b3IucHJvZHVjdCkgPCAwKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgd2UncmUgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgd2ViV29ya2VyIGVudmlyb25tZW50XG4gKlxuICogQWx0aG91Z2ggdGhlIGBpc1N0YW5kYXJkQnJvd3NlckVudmAgbWV0aG9kIGluZGljYXRlcyB0aGF0XG4gKiBgYWxsb3dzIGF4aW9zIHRvIHJ1biBpbiBhIHdlYiB3b3JrZXJgLCB0aGUgV2ViV29ya2VyIHdpbGwgc3RpbGwgYmVcbiAqIGZpbHRlcmVkIG91dCBkdWUgdG8gaXRzIGp1ZGdtZW50IHN0YW5kYXJkXG4gKiBgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ2AuXG4gKiBUaGlzIGxlYWRzIHRvIGEgcHJvYmxlbSB3aGVuIGF4aW9zIHBvc3QgYEZvcm1EYXRhYCBpbiB3ZWJXb3JrZXJcbiAqL1xuY29uc3QgaGFzU3RhbmRhcmRCcm93c2VyV2ViV29ya2VyRW52ID0gKCgpID0+IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlICYmXG4gICAgdHlwZW9mIHNlbGYuaW1wb3J0U2NyaXB0cyA9PT0gJ2Z1bmN0aW9uJ1xuICApO1xufSkoKTtcblxuY29uc3Qgb3JpZ2luID0gaGFzQnJvd3NlckVudiAmJiB3aW5kb3cubG9jYXRpb24uaHJlZiB8fCAnaHR0cDovL2xvY2FsaG9zdCc7XG5cbmV4cG9ydCB7XG4gIGhhc0Jyb3dzZXJFbnYsXG4gIGhhc1N0YW5kYXJkQnJvd3NlcldlYldvcmtlckVudixcbiAgaGFzU3RhbmRhcmRCcm93c2VyRW52LFxuICBfbmF2aWdhdG9yIGFzIG5hdmlnYXRvcixcbiAgb3JpZ2luXG59XG4iLCAiaW1wb3J0IHBsYXRmb3JtIGZyb20gJy4vbm9kZS9pbmRleC5qcyc7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuL2NvbW1vbi91dGlscy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLi4udXRpbHMsXG4gIC4uLnBsYXRmb3JtXG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IHRvRm9ybURhdGEgZnJvbSAnLi90b0Zvcm1EYXRhLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvVVJMRW5jb2RlZEZvcm0oZGF0YSwgb3B0aW9ucykge1xuICByZXR1cm4gdG9Gb3JtRGF0YShkYXRhLCBuZXcgcGxhdGZvcm0uY2xhc3Nlcy5VUkxTZWFyY2hQYXJhbXMoKSwgT2JqZWN0LmFzc2lnbih7XG4gICAgdmlzaXRvcjogZnVuY3Rpb24odmFsdWUsIGtleSwgcGF0aCwgaGVscGVycykge1xuICAgICAgaWYgKHBsYXRmb3JtLmlzTm9kZSAmJiB1dGlscy5pc0J1ZmZlcih2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQoa2V5LCB2YWx1ZS50b1N0cmluZygnYmFzZTY0JykpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBoZWxwZXJzLmRlZmF1bHRWaXNpdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9LCBvcHRpb25zKSk7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuXG4vKipcbiAqIEl0IHRha2VzIGEgc3RyaW5nIGxpa2UgYGZvb1t4XVt5XVt6XWAgYW5kIHJldHVybnMgYW4gYXJyYXkgbGlrZSBgWydmb28nLCAneCcsICd5JywgJ3onXVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqXG4gKiBAcmV0dXJucyBBbiBhcnJheSBvZiBzdHJpbmdzLlxuICovXG5mdW5jdGlvbiBwYXJzZVByb3BQYXRoKG5hbWUpIHtcbiAgLy8gZm9vW3hdW3ldW3pdXG4gIC8vIGZvby54LnkuelxuICAvLyBmb28teC15LXpcbiAgLy8gZm9vIHggeSB6XG4gIHJldHVybiB1dGlscy5tYXRjaEFsbCgvXFx3K3xcXFsoXFx3KildL2csIG5hbWUpLm1hcChtYXRjaCA9PiB7XG4gICAgcmV0dXJuIG1hdGNoWzBdID09PSAnW10nID8gJycgOiBtYXRjaFsxXSB8fCBtYXRjaFswXTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ29udmVydCBhbiBhcnJheSB0byBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtBcnJheTxhbnk+fSBhcnIgLSBUaGUgYXJyYXkgdG8gY29udmVydCB0byBhbiBvYmplY3QuXG4gKlxuICogQHJldHVybnMgQW4gb2JqZWN0IHdpdGggdGhlIHNhbWUga2V5cyBhbmQgdmFsdWVzIGFzIHRoZSBhcnJheS5cbiAqL1xuZnVuY3Rpb24gYXJyYXlUb09iamVjdChhcnIpIHtcbiAgY29uc3Qgb2JqID0ge307XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhcnIpO1xuICBsZXQgaTtcbiAgY29uc3QgbGVuID0ga2V5cy5sZW5ndGg7XG4gIGxldCBrZXk7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGtleSA9IGtleXNbaV07XG4gICAgb2JqW2tleV0gPSBhcnJba2V5XTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIEl0IHRha2VzIGEgRm9ybURhdGEgb2JqZWN0IGFuZCByZXR1cm5zIGEgSmF2YVNjcmlwdCBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9ybURhdGEgVGhlIEZvcm1EYXRhIG9iamVjdCB0byBjb252ZXJ0IHRvIEpTT04uXG4gKlxuICogQHJldHVybnMge09iamVjdDxzdHJpbmcsIGFueT4gfCBudWxsfSBUaGUgY29udmVydGVkIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gZm9ybURhdGFUb0pTT04oZm9ybURhdGEpIHtcbiAgZnVuY3Rpb24gYnVpbGRQYXRoKHBhdGgsIHZhbHVlLCB0YXJnZXQsIGluZGV4KSB7XG4gICAgbGV0IG5hbWUgPSBwYXRoW2luZGV4KytdO1xuXG4gICAgaWYgKG5hbWUgPT09ICdfX3Byb3RvX18nKSByZXR1cm4gdHJ1ZTtcblxuICAgIGNvbnN0IGlzTnVtZXJpY0tleSA9IE51bWJlci5pc0Zpbml0ZSgrbmFtZSk7XG4gICAgY29uc3QgaXNMYXN0ID0gaW5kZXggPj0gcGF0aC5sZW5ndGg7XG4gICAgbmFtZSA9ICFuYW1lICYmIHV0aWxzLmlzQXJyYXkodGFyZ2V0KSA/IHRhcmdldC5sZW5ndGggOiBuYW1lO1xuXG4gICAgaWYgKGlzTGFzdCkge1xuICAgICAgaWYgKHV0aWxzLmhhc093blByb3AodGFyZ2V0LCBuYW1lKSkge1xuICAgICAgICB0YXJnZXRbbmFtZV0gPSBbdGFyZ2V0W25hbWVdLCB2YWx1ZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRbbmFtZV0gPSB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICFpc051bWVyaWNLZXk7XG4gICAgfVxuXG4gICAgaWYgKCF0YXJnZXRbbmFtZV0gfHwgIXV0aWxzLmlzT2JqZWN0KHRhcmdldFtuYW1lXSkpIHtcbiAgICAgIHRhcmdldFtuYW1lXSA9IFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGJ1aWxkUGF0aChwYXRoLCB2YWx1ZSwgdGFyZ2V0W25hbWVdLCBpbmRleCk7XG5cbiAgICBpZiAocmVzdWx0ICYmIHV0aWxzLmlzQXJyYXkodGFyZ2V0W25hbWVdKSkge1xuICAgICAgdGFyZ2V0W25hbWVdID0gYXJyYXlUb09iamVjdCh0YXJnZXRbbmFtZV0pO1xuICAgIH1cblxuICAgIHJldHVybiAhaXNOdW1lcmljS2V5O1xuICB9XG5cbiAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZm9ybURhdGEpICYmIHV0aWxzLmlzRnVuY3Rpb24oZm9ybURhdGEuZW50cmllcykpIHtcbiAgICBjb25zdCBvYmogPSB7fTtcblxuICAgIHV0aWxzLmZvckVhY2hFbnRyeShmb3JtRGF0YSwgKG5hbWUsIHZhbHVlKSA9PiB7XG4gICAgICBidWlsZFBhdGgocGFyc2VQcm9wUGF0aChuYW1lKSwgdmFsdWUsIG9iaiwgMCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZvcm1EYXRhVG9KU09OO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcbmltcG9ydCBBeGlvc0Vycm9yIGZyb20gJy4uL2NvcmUvQXhpb3NFcnJvci5qcyc7XG5pbXBvcnQgdHJhbnNpdGlvbmFsRGVmYXVsdHMgZnJvbSAnLi90cmFuc2l0aW9uYWwuanMnO1xuaW1wb3J0IHRvRm9ybURhdGEgZnJvbSAnLi4vaGVscGVycy90b0Zvcm1EYXRhLmpzJztcbmltcG9ydCB0b1VSTEVuY29kZWRGb3JtIGZyb20gJy4uL2hlbHBlcnMvdG9VUkxFbmNvZGVkRm9ybS5qcyc7XG5pbXBvcnQgcGxhdGZvcm0gZnJvbSAnLi4vcGxhdGZvcm0vaW5kZXguanMnO1xuaW1wb3J0IGZvcm1EYXRhVG9KU09OIGZyb20gJy4uL2hlbHBlcnMvZm9ybURhdGFUb0pTT04uanMnO1xuXG4vKipcbiAqIEl0IHRha2VzIGEgc3RyaW5nLCB0cmllcyB0byBwYXJzZSBpdCwgYW5kIGlmIGl0IGZhaWxzLCBpdCByZXR1cm5zIHRoZSBzdHJpbmdpZmllZCB2ZXJzaW9uXG4gKiBvZiB0aGUgaW5wdXRcbiAqXG4gKiBAcGFyYW0ge2FueX0gcmF3VmFsdWUgLSBUaGUgdmFsdWUgdG8gYmUgc3RyaW5naWZpZWQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwYXJzZXIgLSBBIGZ1bmN0aW9uIHRoYXQgcGFyc2VzIGEgc3RyaW5nIGludG8gYSBKYXZhU2NyaXB0IG9iamVjdC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVuY29kZXIgLSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB2YWx1ZSBhbmQgcmV0dXJucyBhIHN0cmluZy5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBIHN0cmluZ2lmaWVkIHZlcnNpb24gb2YgdGhlIHJhd1ZhbHVlLlxuICovXG5mdW5jdGlvbiBzdHJpbmdpZnlTYWZlbHkocmF3VmFsdWUsIHBhcnNlciwgZW5jb2Rlcikge1xuICBpZiAodXRpbHMuaXNTdHJpbmcocmF3VmFsdWUpKSB7XG4gICAgdHJ5IHtcbiAgICAgIChwYXJzZXIgfHwgSlNPTi5wYXJzZSkocmF3VmFsdWUpO1xuICAgICAgcmV0dXJuIHV0aWxzLnRyaW0ocmF3VmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlLm5hbWUgIT09ICdTeW50YXhFcnJvcicpIHtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gKGVuY29kZXIgfHwgSlNPTi5zdHJpbmdpZnkpKHJhd1ZhbHVlKTtcbn1cblxuY29uc3QgZGVmYXVsdHMgPSB7XG5cbiAgdHJhbnNpdGlvbmFsOiB0cmFuc2l0aW9uYWxEZWZhdWx0cyxcblxuICBhZGFwdGVyOiBbJ3hocicsICdodHRwJywgJ2ZldGNoJ10sXG5cbiAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlcXVlc3QoZGF0YSwgaGVhZGVycykge1xuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gaGVhZGVycy5nZXRDb250ZW50VHlwZSgpIHx8ICcnO1xuICAgIGNvbnN0IGhhc0pTT05Db250ZW50VHlwZSA9IGNvbnRlbnRUeXBlLmluZGV4T2YoJ2FwcGxpY2F0aW9uL2pzb24nKSA+IC0xO1xuICAgIGNvbnN0IGlzT2JqZWN0UGF5bG9hZCA9IHV0aWxzLmlzT2JqZWN0KGRhdGEpO1xuXG4gICAgaWYgKGlzT2JqZWN0UGF5bG9hZCAmJiB1dGlscy5pc0hUTUxGb3JtKGRhdGEpKSB7XG4gICAgICBkYXRhID0gbmV3IEZvcm1EYXRhKGRhdGEpO1xuICAgIH1cblxuICAgIGNvbnN0IGlzRm9ybURhdGEgPSB1dGlscy5pc0Zvcm1EYXRhKGRhdGEpO1xuXG4gICAgaWYgKGlzRm9ybURhdGEpIHtcbiAgICAgIHJldHVybiBoYXNKU09OQ29udGVudFR5cGUgPyBKU09OLnN0cmluZ2lmeShmb3JtRGF0YVRvSlNPTihkYXRhKSkgOiBkYXRhO1xuICAgIH1cblxuICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0J1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNTdHJlYW0oZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzRmlsZShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCbG9iKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1JlYWRhYmxlU3RyZWFtKGRhdGEpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YS5idWZmZXI7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhkYXRhKSkge1xuICAgICAgaGVhZGVycy5zZXRDb250ZW50VHlwZSgnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnLCBmYWxzZSk7XG4gICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGxldCBpc0ZpbGVMaXN0O1xuXG4gICAgaWYgKGlzT2JqZWN0UGF5bG9hZCkge1xuICAgICAgaWYgKGNvbnRlbnRUeXBlLmluZGV4T2YoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIHRvVVJMRW5jb2RlZEZvcm0oZGF0YSwgdGhpcy5mb3JtU2VyaWFsaXplcikudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKChpc0ZpbGVMaXN0ID0gdXRpbHMuaXNGaWxlTGlzdChkYXRhKSkgfHwgY29udGVudFR5cGUuaW5kZXhPZignbXVsdGlwYXJ0L2Zvcm0tZGF0YScpID4gLTEpIHtcbiAgICAgICAgY29uc3QgX0Zvcm1EYXRhID0gdGhpcy5lbnYgJiYgdGhpcy5lbnYuRm9ybURhdGE7XG5cbiAgICAgICAgcmV0dXJuIHRvRm9ybURhdGEoXG4gICAgICAgICAgaXNGaWxlTGlzdCA/IHsnZmlsZXNbXSc6IGRhdGF9IDogZGF0YSxcbiAgICAgICAgICBfRm9ybURhdGEgJiYgbmV3IF9Gb3JtRGF0YSgpLFxuICAgICAgICAgIHRoaXMuZm9ybVNlcmlhbGl6ZXJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNPYmplY3RQYXlsb2FkIHx8IGhhc0pTT05Db250ZW50VHlwZSApIHtcbiAgICAgIGhlYWRlcnMuc2V0Q29udGVudFR5cGUoJ2FwcGxpY2F0aW9uL2pzb24nLCBmYWxzZSk7XG4gICAgICByZXR1cm4gc3RyaW5naWZ5U2FmZWx5KGRhdGEpO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHtcbiAgICBjb25zdCB0cmFuc2l0aW9uYWwgPSB0aGlzLnRyYW5zaXRpb25hbCB8fCBkZWZhdWx0cy50cmFuc2l0aW9uYWw7XG4gICAgY29uc3QgZm9yY2VkSlNPTlBhcnNpbmcgPSB0cmFuc2l0aW9uYWwgJiYgdHJhbnNpdGlvbmFsLmZvcmNlZEpTT05QYXJzaW5nO1xuICAgIGNvbnN0IEpTT05SZXF1ZXN0ZWQgPSB0aGlzLnJlc3BvbnNlVHlwZSA9PT0gJ2pzb24nO1xuXG4gICAgaWYgKHV0aWxzLmlzUmVzcG9uc2UoZGF0YSkgfHwgdXRpbHMuaXNSZWFkYWJsZVN0cmVhbShkYXRhKSkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEgJiYgdXRpbHMuaXNTdHJpbmcoZGF0YSkgJiYgKChmb3JjZWRKU09OUGFyc2luZyAmJiAhdGhpcy5yZXNwb25zZVR5cGUpIHx8IEpTT05SZXF1ZXN0ZWQpKSB7XG4gICAgICBjb25zdCBzaWxlbnRKU09OUGFyc2luZyA9IHRyYW5zaXRpb25hbCAmJiB0cmFuc2l0aW9uYWwuc2lsZW50SlNPTlBhcnNpbmc7XG4gICAgICBjb25zdCBzdHJpY3RKU09OUGFyc2luZyA9ICFzaWxlbnRKU09OUGFyc2luZyAmJiBKU09OUmVxdWVzdGVkO1xuXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKHN0cmljdEpTT05QYXJzaW5nKSB7XG4gICAgICAgICAgaWYgKGUubmFtZSA9PT0gJ1N5bnRheEVycm9yJykge1xuICAgICAgICAgICAgdGhyb3cgQXhpb3NFcnJvci5mcm9tKGUsIEF4aW9zRXJyb3IuRVJSX0JBRF9SRVNQT05TRSwgdGhpcywgbnVsbCwgdGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgLyoqXG4gICAqIEEgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gYWJvcnQgYSByZXF1ZXN0LiBJZiBzZXQgdG8gMCAoZGVmYXVsdCkgYVxuICAgKiB0aW1lb3V0IGlzIG5vdCBjcmVhdGVkLlxuICAgKi9cbiAgdGltZW91dDogMCxcblxuICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxuICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTicsXG5cbiAgbWF4Q29udGVudExlbmd0aDogLTEsXG4gIG1heEJvZHlMZW5ndGg6IC0xLFxuXG4gIGVudjoge1xuICAgIEZvcm1EYXRhOiBwbGF0Zm9ybS5jbGFzc2VzLkZvcm1EYXRhLFxuICAgIEJsb2I6IHBsYXRmb3JtLmNsYXNzZXMuQmxvYlxuICB9LFxuXG4gIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG4gIH0sXG5cbiAgaGVhZGVyczoge1xuICAgIGNvbW1vbjoge1xuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZFxuICAgIH1cbiAgfVxufTtcblxudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCddLCAobWV0aG9kKSA9PiB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9O1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGRlZmF1bHRzO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vLi4vdXRpbHMuanMnO1xuXG4vLyBSYXdBeGlvc0hlYWRlcnMgd2hvc2UgZHVwbGljYXRlcyBhcmUgaWdub3JlZCBieSBub2RlXG4vLyBjLmYuIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfbWVzc2FnZV9oZWFkZXJzXG5jb25zdCBpZ25vcmVEdXBsaWNhdGVPZiA9IHV0aWxzLnRvT2JqZWN0U2V0KFtcbiAgJ2FnZScsICdhdXRob3JpemF0aW9uJywgJ2NvbnRlbnQtbGVuZ3RoJywgJ2NvbnRlbnQtdHlwZScsICdldGFnJyxcbiAgJ2V4cGlyZXMnLCAnZnJvbScsICdob3N0JywgJ2lmLW1vZGlmaWVkLXNpbmNlJywgJ2lmLXVubW9kaWZpZWQtc2luY2UnLFxuICAnbGFzdC1tb2RpZmllZCcsICdsb2NhdGlvbicsICdtYXgtZm9yd2FyZHMnLCAncHJveHktYXV0aG9yaXphdGlvbicsXG4gICdyZWZlcmVyJywgJ3JldHJ5LWFmdGVyJywgJ3VzZXItYWdlbnQnXG5dKTtcblxuLyoqXG4gKiBQYXJzZSBoZWFkZXJzIGludG8gYW4gb2JqZWN0XG4gKlxuICogYGBgXG4gKiBEYXRlOiBXZWQsIDI3IEF1ZyAyMDE0IDA4OjU4OjQ5IEdNVFxuICogQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uXG4gKiBDb25uZWN0aW9uOiBrZWVwLWFsaXZlXG4gKiBUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZFxuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHJhd0hlYWRlcnMgSGVhZGVycyBuZWVkaW5nIHRvIGJlIHBhcnNlZFxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHJhd0hlYWRlcnMgPT4ge1xuICBjb25zdCBwYXJzZWQgPSB7fTtcbiAgbGV0IGtleTtcbiAgbGV0IHZhbDtcbiAgbGV0IGk7XG5cbiAgcmF3SGVhZGVycyAmJiByYXdIZWFkZXJzLnNwbGl0KCdcXG4nKS5mb3JFYWNoKGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGtleSA9IGxpbmUuc3Vic3RyaW5nKDAsIGkpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IGxpbmUuc3Vic3RyaW5nKGkgKyAxKS50cmltKCk7XG5cbiAgICBpZiAoIWtleSB8fCAocGFyc2VkW2tleV0gJiYgaWdub3JlRHVwbGljYXRlT2Zba2V5XSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAnc2V0LWNvb2tpZScpIHtcbiAgICAgIGlmIChwYXJzZWRba2V5XSkge1xuICAgICAgICBwYXJzZWRba2V5XS5wdXNoKHZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJzZWRba2V5XSA9IFt2YWxdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IHBhcnNlSGVhZGVycyBmcm9tICcuLi9oZWxwZXJzL3BhcnNlSGVhZGVycy5qcyc7XG5cbmNvbnN0ICRpbnRlcm5hbHMgPSBTeW1ib2woJ2ludGVybmFscycpO1xuXG5mdW5jdGlvbiBub3JtYWxpemVIZWFkZXIoaGVhZGVyKSB7XG4gIHJldHVybiBoZWFkZXIgJiYgU3RyaW5nKGhlYWRlcikudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gZmFsc2UgfHwgdmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiB1dGlscy5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcChub3JtYWxpemVWYWx1ZSkgOiBTdHJpbmcodmFsdWUpO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRva2VucyhzdHIpIHtcbiAgY29uc3QgdG9rZW5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgY29uc3QgdG9rZW5zUkUgPSAvKFteXFxzLDs9XSspXFxzKig/Oj1cXHMqKFteLDtdKykpPy9nO1xuICBsZXQgbWF0Y2g7XG5cbiAgd2hpbGUgKChtYXRjaCA9IHRva2Vuc1JFLmV4ZWMoc3RyKSkpIHtcbiAgICB0b2tlbnNbbWF0Y2hbMV1dID0gbWF0Y2hbMl07XG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufVxuXG5jb25zdCBpc1ZhbGlkSGVhZGVyTmFtZSA9IChzdHIpID0+IC9eWy1fYS16QS1aMC05XmB8fiwhIyQlJicqKy5dKyQvLnRlc3Qoc3RyLnRyaW0oKSk7XG5cbmZ1bmN0aW9uIG1hdGNoSGVhZGVyVmFsdWUoY29udGV4dCwgdmFsdWUsIGhlYWRlciwgZmlsdGVyLCBpc0hlYWRlck5hbWVGaWx0ZXIpIHtcbiAgaWYgKHV0aWxzLmlzRnVuY3Rpb24oZmlsdGVyKSkge1xuICAgIHJldHVybiBmaWx0ZXIuY2FsbCh0aGlzLCB2YWx1ZSwgaGVhZGVyKTtcbiAgfVxuXG4gIGlmIChpc0hlYWRlck5hbWVGaWx0ZXIpIHtcbiAgICB2YWx1ZSA9IGhlYWRlcjtcbiAgfVxuXG4gIGlmICghdXRpbHMuaXNTdHJpbmcodmFsdWUpKSByZXR1cm47XG5cbiAgaWYgKHV0aWxzLmlzU3RyaW5nKGZpbHRlcikpIHtcbiAgICByZXR1cm4gdmFsdWUuaW5kZXhPZihmaWx0ZXIpICE9PSAtMTtcbiAgfVxuXG4gIGlmICh1dGlscy5pc1JlZ0V4cChmaWx0ZXIpKSB7XG4gICAgcmV0dXJuIGZpbHRlci50ZXN0KHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXRIZWFkZXIoaGVhZGVyKSB7XG4gIHJldHVybiBoZWFkZXIudHJpbSgpXG4gICAgLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvKFthLXpcXGRdKShcXHcqKS9nLCAodywgY2hhciwgc3RyKSA9PiB7XG4gICAgICByZXR1cm4gY2hhci50b1VwcGVyQ2FzZSgpICsgc3RyO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBidWlsZEFjY2Vzc29ycyhvYmosIGhlYWRlcikge1xuICBjb25zdCBhY2Nlc3Nvck5hbWUgPSB1dGlscy50b0NhbWVsQ2FzZSgnICcgKyBoZWFkZXIpO1xuXG4gIFsnZ2V0JywgJ3NldCcsICdoYXMnXS5mb3JFYWNoKG1ldGhvZE5hbWUgPT4ge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIG1ldGhvZE5hbWUgKyBhY2Nlc3Nvck5hbWUsIHtcbiAgICAgIHZhbHVlOiBmdW5jdGlvbihhcmcxLCBhcmcyLCBhcmczKSB7XG4gICAgICAgIHJldHVybiB0aGlzW21ldGhvZE5hbWVdLmNhbGwodGhpcywgaGVhZGVyLCBhcmcxLCBhcmcyLCBhcmczKTtcbiAgICAgIH0sXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfSk7XG59XG5cbmNsYXNzIEF4aW9zSGVhZGVycyB7XG4gIGNvbnN0cnVjdG9yKGhlYWRlcnMpIHtcbiAgICBoZWFkZXJzICYmIHRoaXMuc2V0KGhlYWRlcnMpO1xuICB9XG5cbiAgc2V0KGhlYWRlciwgdmFsdWVPclJld3JpdGUsIHJld3JpdGUpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgIGZ1bmN0aW9uIHNldEhlYWRlcihfdmFsdWUsIF9oZWFkZXIsIF9yZXdyaXRlKSB7XG4gICAgICBjb25zdCBsSGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKF9oZWFkZXIpO1xuXG4gICAgICBpZiAoIWxIZWFkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdoZWFkZXIgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBrZXkgPSB1dGlscy5maW5kS2V5KHNlbGYsIGxIZWFkZXIpO1xuXG4gICAgICBpZigha2V5IHx8IHNlbGZba2V5XSA9PT0gdW5kZWZpbmVkIHx8IF9yZXdyaXRlID09PSB0cnVlIHx8IChfcmV3cml0ZSA9PT0gdW5kZWZpbmVkICYmIHNlbGZba2V5XSAhPT0gZmFsc2UpKSB7XG4gICAgICAgIHNlbGZba2V5IHx8IF9oZWFkZXJdID0gbm9ybWFsaXplVmFsdWUoX3ZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZXRIZWFkZXJzID0gKGhlYWRlcnMsIF9yZXdyaXRlKSA9PlxuICAgICAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCAoX3ZhbHVlLCBfaGVhZGVyKSA9PiBzZXRIZWFkZXIoX3ZhbHVlLCBfaGVhZGVyLCBfcmV3cml0ZSkpO1xuXG4gICAgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3QoaGVhZGVyKSB8fCBoZWFkZXIgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKSB7XG4gICAgICBzZXRIZWFkZXJzKGhlYWRlciwgdmFsdWVPclJld3JpdGUpXG4gICAgfSBlbHNlIGlmKHV0aWxzLmlzU3RyaW5nKGhlYWRlcikgJiYgKGhlYWRlciA9IGhlYWRlci50cmltKCkpICYmICFpc1ZhbGlkSGVhZGVyTmFtZShoZWFkZXIpKSB7XG4gICAgICBzZXRIZWFkZXJzKHBhcnNlSGVhZGVycyhoZWFkZXIpLCB2YWx1ZU9yUmV3cml0ZSk7XG4gICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdChoZWFkZXIpICYmIHV0aWxzLmlzSXRlcmFibGUoaGVhZGVyKSkge1xuICAgICAgbGV0IG9iaiA9IHt9LCBkZXN0LCBrZXk7XG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGhlYWRlcikge1xuICAgICAgICBpZiAoIXV0aWxzLmlzQXJyYXkoZW50cnkpKSB7XG4gICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdPYmplY3QgaXRlcmF0b3IgbXVzdCByZXR1cm4gYSBrZXktdmFsdWUgcGFpcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgb2JqW2tleSA9IGVudHJ5WzBdXSA9IChkZXN0ID0gb2JqW2tleV0pID9cbiAgICAgICAgICAodXRpbHMuaXNBcnJheShkZXN0KSA/IFsuLi5kZXN0LCBlbnRyeVsxXV0gOiBbZGVzdCwgZW50cnlbMV1dKSA6IGVudHJ5WzFdO1xuICAgICAgfVxuXG4gICAgICBzZXRIZWFkZXJzKG9iaiwgdmFsdWVPclJld3JpdGUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGhlYWRlciAhPSBudWxsICYmIHNldEhlYWRlcih2YWx1ZU9yUmV3cml0ZSwgaGVhZGVyLCByZXdyaXRlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldChoZWFkZXIsIHBhcnNlcikge1xuICAgIGhlYWRlciA9IG5vcm1hbGl6ZUhlYWRlcihoZWFkZXIpO1xuXG4gICAgaWYgKGhlYWRlcikge1xuICAgICAgY29uc3Qga2V5ID0gdXRpbHMuZmluZEtleSh0aGlzLCBoZWFkZXIpO1xuXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpc1trZXldO1xuXG4gICAgICAgIGlmICghcGFyc2VyKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhcnNlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBwYXJzZVRva2Vucyh2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNGdW5jdGlvbihwYXJzZXIpKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlci5jYWxsKHRoaXMsIHZhbHVlLCBrZXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHV0aWxzLmlzUmVnRXhwKHBhcnNlcikpIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VyLmV4ZWModmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncGFyc2VyIG11c3QgYmUgYm9vbGVhbnxyZWdleHB8ZnVuY3Rpb24nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoYXMoaGVhZGVyLCBtYXRjaGVyKSB7XG4gICAgaGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKGhlYWRlcik7XG5cbiAgICBpZiAoaGVhZGVyKSB7XG4gICAgICBjb25zdCBrZXkgPSB1dGlscy5maW5kS2V5KHRoaXMsIGhlYWRlcik7XG5cbiAgICAgIHJldHVybiAhIShrZXkgJiYgdGhpc1trZXldICE9PSB1bmRlZmluZWQgJiYgKCFtYXRjaGVyIHx8IG1hdGNoSGVhZGVyVmFsdWUodGhpcywgdGhpc1trZXldLCBrZXksIG1hdGNoZXIpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZGVsZXRlKGhlYWRlciwgbWF0Y2hlcikge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGxldCBkZWxldGVkID0gZmFsc2U7XG5cbiAgICBmdW5jdGlvbiBkZWxldGVIZWFkZXIoX2hlYWRlcikge1xuICAgICAgX2hlYWRlciA9IG5vcm1hbGl6ZUhlYWRlcihfaGVhZGVyKTtcblxuICAgICAgaWYgKF9oZWFkZXIpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gdXRpbHMuZmluZEtleShzZWxmLCBfaGVhZGVyKTtcblxuICAgICAgICBpZiAoa2V5ICYmICghbWF0Y2hlciB8fCBtYXRjaEhlYWRlclZhbHVlKHNlbGYsIHNlbGZba2V5XSwga2V5LCBtYXRjaGVyKSkpIHtcbiAgICAgICAgICBkZWxldGUgc2VsZltrZXldO1xuXG4gICAgICAgICAgZGVsZXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXRpbHMuaXNBcnJheShoZWFkZXIpKSB7XG4gICAgICBoZWFkZXIuZm9yRWFjaChkZWxldGVIZWFkZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGVIZWFkZXIoaGVhZGVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVsZXRlZDtcbiAgfVxuXG4gIGNsZWFyKG1hdGNoZXIpIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcyk7XG4gICAgbGV0IGkgPSBrZXlzLmxlbmd0aDtcbiAgICBsZXQgZGVsZXRlZCA9IGZhbHNlO1xuXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmKCFtYXRjaGVyIHx8IG1hdGNoSGVhZGVyVmFsdWUodGhpcywgdGhpc1trZXldLCBrZXksIG1hdGNoZXIsIHRydWUpKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG4gICAgICAgIGRlbGV0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkZWxldGVkO1xuICB9XG5cbiAgbm9ybWFsaXplKGZvcm1hdCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcblxuICAgIHV0aWxzLmZvckVhY2godGhpcywgKHZhbHVlLCBoZWFkZXIpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IHV0aWxzLmZpbmRLZXkoaGVhZGVycywgaGVhZGVyKTtcblxuICAgICAgaWYgKGtleSkge1xuICAgICAgICBzZWxmW2tleV0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIGRlbGV0ZSBzZWxmW2hlYWRlcl07XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IGZvcm1hdCA/IGZvcm1hdEhlYWRlcihoZWFkZXIpIDogU3RyaW5nKGhlYWRlcikudHJpbSgpO1xuXG4gICAgICBpZiAobm9ybWFsaXplZCAhPT0gaGVhZGVyKSB7XG4gICAgICAgIGRlbGV0ZSBzZWxmW2hlYWRlcl07XG4gICAgICB9XG5cbiAgICAgIHNlbGZbbm9ybWFsaXplZF0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSk7XG5cbiAgICAgIGhlYWRlcnNbbm9ybWFsaXplZF0gPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjb25jYXQoLi4udGFyZ2V0cykge1xuICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmNvbmNhdCh0aGlzLCAuLi50YXJnZXRzKTtcbiAgfVxuXG4gIHRvSlNPTihhc1N0cmluZ3MpIHtcbiAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgdXRpbHMuZm9yRWFjaCh0aGlzLCAodmFsdWUsIGhlYWRlcikgPT4ge1xuICAgICAgdmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gZmFsc2UgJiYgKG9ialtoZWFkZXJdID0gYXNTdHJpbmdzICYmIHV0aWxzLmlzQXJyYXkodmFsdWUpID8gdmFsdWUuam9pbignLCAnKSA6IHZhbHVlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy50b0pTT04oKSlbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMudG9KU09OKCkpLm1hcCgoW2hlYWRlciwgdmFsdWVdKSA9PiBoZWFkZXIgKyAnOiAnICsgdmFsdWUpLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgZ2V0U2V0Q29va2llKCkge1xuICAgIHJldHVybiB0aGlzLmdldChcInNldC1jb29raWVcIikgfHwgW107XG4gIH1cblxuICBnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG4gICAgcmV0dXJuICdBeGlvc0hlYWRlcnMnO1xuICB9XG5cbiAgc3RhdGljIGZyb20odGhpbmcpIHtcbiAgICByZXR1cm4gdGhpbmcgaW5zdGFuY2VvZiB0aGlzID8gdGhpbmcgOiBuZXcgdGhpcyh0aGluZyk7XG4gIH1cblxuICBzdGF0aWMgY29uY2F0KGZpcnN0LCAuLi50YXJnZXRzKSB7XG4gICAgY29uc3QgY29tcHV0ZWQgPSBuZXcgdGhpcyhmaXJzdCk7XG5cbiAgICB0YXJnZXRzLmZvckVhY2goKHRhcmdldCkgPT4gY29tcHV0ZWQuc2V0KHRhcmdldCkpO1xuXG4gICAgcmV0dXJuIGNvbXB1dGVkO1xuICB9XG5cbiAgc3RhdGljIGFjY2Vzc29yKGhlYWRlcikge1xuICAgIGNvbnN0IGludGVybmFscyA9IHRoaXNbJGludGVybmFsc10gPSAodGhpc1skaW50ZXJuYWxzXSA9IHtcbiAgICAgIGFjY2Vzc29yczoge31cbiAgICB9KTtcblxuICAgIGNvbnN0IGFjY2Vzc29ycyA9IGludGVybmFscy5hY2Nlc3NvcnM7XG4gICAgY29uc3QgcHJvdG90eXBlID0gdGhpcy5wcm90b3R5cGU7XG5cbiAgICBmdW5jdGlvbiBkZWZpbmVBY2Nlc3NvcihfaGVhZGVyKSB7XG4gICAgICBjb25zdCBsSGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKF9oZWFkZXIpO1xuXG4gICAgICBpZiAoIWFjY2Vzc29yc1tsSGVhZGVyXSkge1xuICAgICAgICBidWlsZEFjY2Vzc29ycyhwcm90b3R5cGUsIF9oZWFkZXIpO1xuICAgICAgICBhY2Nlc3NvcnNbbEhlYWRlcl0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHV0aWxzLmlzQXJyYXkoaGVhZGVyKSA/IGhlYWRlci5mb3JFYWNoKGRlZmluZUFjY2Vzc29yKSA6IGRlZmluZUFjY2Vzc29yKGhlYWRlcik7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5BeGlvc0hlYWRlcnMuYWNjZXNzb3IoWydDb250ZW50LVR5cGUnLCAnQ29udGVudC1MZW5ndGgnLCAnQWNjZXB0JywgJ0FjY2VwdC1FbmNvZGluZycsICdVc2VyLUFnZW50JywgJ0F1dGhvcml6YXRpb24nXSk7XG5cbi8vIHJlc2VydmVkIG5hbWVzIGhvdGZpeFxudXRpbHMucmVkdWNlRGVzY3JpcHRvcnMoQXhpb3NIZWFkZXJzLnByb3RvdHlwZSwgKHt2YWx1ZX0sIGtleSkgPT4ge1xuICBsZXQgbWFwcGVkID0ga2V5WzBdLnRvVXBwZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSk7IC8vIG1hcCBgc2V0YCA9PiBgU2V0YFxuICByZXR1cm4ge1xuICAgIGdldDogKCkgPT4gdmFsdWUsXG4gICAgc2V0KGhlYWRlclZhbHVlKSB7XG4gICAgICB0aGlzW21hcHBlZF0gPSBoZWFkZXJWYWx1ZTtcbiAgICB9XG4gIH1cbn0pO1xuXG51dGlscy5mcmVlemVNZXRob2RzKEF4aW9zSGVhZGVycyk7XG5cbmV4cG9ydCBkZWZhdWx0IEF4aW9zSGVhZGVycztcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcbmltcG9ydCBkZWZhdWx0cyBmcm9tICcuLi9kZWZhdWx0cy9pbmRleC5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gJy4uL2NvcmUvQXhpb3NIZWFkZXJzLmpzJztcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHBhcmFtIHs/T2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2Ugb2JqZWN0XG4gKlxuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmFuc2Zvcm1EYXRhKGZucywgcmVzcG9uc2UpIHtcbiAgY29uc3QgY29uZmlnID0gdGhpcyB8fCBkZWZhdWx0cztcbiAgY29uc3QgY29udGV4dCA9IHJlc3BvbnNlIHx8IGNvbmZpZztcbiAgY29uc3QgaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKGNvbnRleHQuaGVhZGVycyk7XG4gIGxldCBkYXRhID0gY29udGV4dC5kYXRhO1xuXG4gIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHtcbiAgICBkYXRhID0gZm4uY2FsbChjb25maWcsIGRhdGEsIGhlYWRlcnMubm9ybWFsaXplKCksIHJlc3BvbnNlID8gcmVzcG9uc2Uuc3RhdHVzIDogdW5kZWZpbmVkKTtcbiAgfSk7XG5cbiAgaGVhZGVycy5ub3JtYWxpemUoKTtcblxuICByZXR1cm4gZGF0YTtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBBeGlvc0Vycm9yIGZyb20gJy4uL2NvcmUvQXhpb3NFcnJvci5qcyc7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuXG4vKipcbiAqIEEgYENhbmNlbGVkRXJyb3JgIGlzIGFuIG9iamVjdCB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9wZXJhdGlvbiBpcyBjYW5jZWxlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZz19IG1lc3NhZ2UgVGhlIG1lc3NhZ2UuXG4gKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtPYmplY3Q9fSByZXF1ZXN0IFRoZSByZXF1ZXN0LlxuICpcbiAqIEByZXR1cm5zIHtDYW5jZWxlZEVycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsZWRFcnJvcihtZXNzYWdlLCBjb25maWcsIHJlcXVlc3QpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsZXFlcWVxXG4gIEF4aW9zRXJyb3IuY2FsbCh0aGlzLCBtZXNzYWdlID09IG51bGwgPyAnY2FuY2VsZWQnIDogbWVzc2FnZSwgQXhpb3NFcnJvci5FUlJfQ0FOQ0VMRUQsIGNvbmZpZywgcmVxdWVzdCk7XG4gIHRoaXMubmFtZSA9ICdDYW5jZWxlZEVycm9yJztcbn1cblxudXRpbHMuaW5oZXJpdHMoQ2FuY2VsZWRFcnJvciwgQXhpb3NFcnJvciwge1xuICBfX0NBTkNFTF9fOiB0cnVlXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQ2FuY2VsZWRFcnJvcjtcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBBeGlvc0Vycm9yIGZyb20gJy4vQXhpb3NFcnJvci5qcyc7XG5cbi8qKlxuICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuXG4gKlxuICogQHJldHVybnMge29iamVjdH0gVGhlIHJlc3BvbnNlLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSkge1xuICBjb25zdCB2YWxpZGF0ZVN0YXR1cyA9IHJlc3BvbnNlLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztcbiAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgfSBlbHNlIHtcbiAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoXG4gICAgICAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgW0F4aW9zRXJyb3IuRVJSX0JBRF9SRVFVRVNULCBBeGlvc0Vycm9yLkVSUl9CQURfUkVTUE9OU0VdW01hdGguZmxvb3IocmVzcG9uc2Uuc3RhdHVzIC8gMTAwKSAtIDRdLFxuICAgICAgcmVzcG9uc2UuY29uZmlnLFxuICAgICAgcmVzcG9uc2UucmVxdWVzdCxcbiAgICAgIHJlc3BvbnNlXG4gICAgKSk7XG4gIH1cbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhcnNlUHJvdG9jb2wodXJsKSB7XG4gIGNvbnN0IG1hdGNoID0gL14oWy0rXFx3XXsxLDI1fSkoOj9cXC9cXC98OikvLmV4ZWModXJsKTtcbiAgcmV0dXJuIG1hdGNoICYmIG1hdGNoWzFdIHx8ICcnO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDYWxjdWxhdGUgZGF0YSBtYXhSYXRlXG4gKiBAcGFyYW0ge051bWJlcn0gW3NhbXBsZXNDb3VudD0gMTBdXG4gKiBAcGFyYW0ge051bWJlcn0gW21pbj0gMTAwMF1cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gc3BlZWRvbWV0ZXIoc2FtcGxlc0NvdW50LCBtaW4pIHtcbiAgc2FtcGxlc0NvdW50ID0gc2FtcGxlc0NvdW50IHx8IDEwO1xuICBjb25zdCBieXRlcyA9IG5ldyBBcnJheShzYW1wbGVzQ291bnQpO1xuICBjb25zdCB0aW1lc3RhbXBzID0gbmV3IEFycmF5KHNhbXBsZXNDb3VudCk7XG4gIGxldCBoZWFkID0gMDtcbiAgbGV0IHRhaWwgPSAwO1xuICBsZXQgZmlyc3RTYW1wbGVUUztcblxuICBtaW4gPSBtaW4gIT09IHVuZGVmaW5lZCA/IG1pbiA6IDEwMDA7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHB1c2goY2h1bmtMZW5ndGgpIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgY29uc3Qgc3RhcnRlZEF0ID0gdGltZXN0YW1wc1t0YWlsXTtcblxuICAgIGlmICghZmlyc3RTYW1wbGVUUykge1xuICAgICAgZmlyc3RTYW1wbGVUUyA9IG5vdztcbiAgICB9XG5cbiAgICBieXRlc1toZWFkXSA9IGNodW5rTGVuZ3RoO1xuICAgIHRpbWVzdGFtcHNbaGVhZF0gPSBub3c7XG5cbiAgICBsZXQgaSA9IHRhaWw7XG4gICAgbGV0IGJ5dGVzQ291bnQgPSAwO1xuXG4gICAgd2hpbGUgKGkgIT09IGhlYWQpIHtcbiAgICAgIGJ5dGVzQ291bnQgKz0gYnl0ZXNbaSsrXTtcbiAgICAgIGkgPSBpICUgc2FtcGxlc0NvdW50O1xuICAgIH1cblxuICAgIGhlYWQgPSAoaGVhZCArIDEpICUgc2FtcGxlc0NvdW50O1xuXG4gICAgaWYgKGhlYWQgPT09IHRhaWwpIHtcbiAgICAgIHRhaWwgPSAodGFpbCArIDEpICUgc2FtcGxlc0NvdW50O1xuICAgIH1cblxuICAgIGlmIChub3cgLSBmaXJzdFNhbXBsZVRTIDwgbWluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcGFzc2VkID0gc3RhcnRlZEF0ICYmIG5vdyAtIHN0YXJ0ZWRBdDtcblxuICAgIHJldHVybiBwYXNzZWQgPyBNYXRoLnJvdW5kKGJ5dGVzQ291bnQgKiAxMDAwIC8gcGFzc2VkKSA6IHVuZGVmaW5lZDtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc3BlZWRvbWV0ZXI7XG4iLCAiLyoqXG4gKiBUaHJvdHRsZSBkZWNvcmF0b3JcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge051bWJlcn0gZnJlcVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIHRocm90dGxlKGZuLCBmcmVxKSB7XG4gIGxldCB0aW1lc3RhbXAgPSAwO1xuICBsZXQgdGhyZXNob2xkID0gMTAwMCAvIGZyZXE7XG4gIGxldCBsYXN0QXJncztcbiAgbGV0IHRpbWVyO1xuXG4gIGNvbnN0IGludm9rZSA9IChhcmdzLCBub3cgPSBEYXRlLm5vdygpKSA9PiB7XG4gICAgdGltZXN0YW1wID0gbm93O1xuICAgIGxhc3RBcmdzID0gbnVsbDtcbiAgICBpZiAodGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICB0aW1lciA9IG51bGw7XG4gICAgfVxuICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICB9XG5cbiAgY29uc3QgdGhyb3R0bGVkID0gKC4uLmFyZ3MpID0+IHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHBhc3NlZCA9IG5vdyAtIHRpbWVzdGFtcDtcbiAgICBpZiAoIHBhc3NlZCA+PSB0aHJlc2hvbGQpIHtcbiAgICAgIGludm9rZShhcmdzLCBub3cpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYXN0QXJncyA9IGFyZ3M7XG4gICAgICBpZiAoIXRpbWVyKSB7XG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGltZXIgPSBudWxsO1xuICAgICAgICAgIGludm9rZShsYXN0QXJncylcbiAgICAgICAgfSwgdGhyZXNob2xkIC0gcGFzc2VkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBmbHVzaCA9ICgpID0+IGxhc3RBcmdzICYmIGludm9rZShsYXN0QXJncyk7XG5cbiAgcmV0dXJuIFt0aHJvdHRsZWQsIGZsdXNoXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdGhyb3R0bGU7XG4iLCAiaW1wb3J0IHNwZWVkb21ldGVyIGZyb20gXCIuL3NwZWVkb21ldGVyLmpzXCI7XG5pbXBvcnQgdGhyb3R0bGUgZnJvbSBcIi4vdGhyb3R0bGUuanNcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiLi4vdXRpbHMuanNcIjtcblxuZXhwb3J0IGNvbnN0IHByb2dyZXNzRXZlbnRSZWR1Y2VyID0gKGxpc3RlbmVyLCBpc0Rvd25sb2FkU3RyZWFtLCBmcmVxID0gMykgPT4ge1xuICBsZXQgYnl0ZXNOb3RpZmllZCA9IDA7XG4gIGNvbnN0IF9zcGVlZG9tZXRlciA9IHNwZWVkb21ldGVyKDUwLCAyNTApO1xuXG4gIHJldHVybiB0aHJvdHRsZShlID0+IHtcbiAgICBjb25zdCBsb2FkZWQgPSBlLmxvYWRlZDtcbiAgICBjb25zdCB0b3RhbCA9IGUubGVuZ3RoQ29tcHV0YWJsZSA/IGUudG90YWwgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgcHJvZ3Jlc3NCeXRlcyA9IGxvYWRlZCAtIGJ5dGVzTm90aWZpZWQ7XG4gICAgY29uc3QgcmF0ZSA9IF9zcGVlZG9tZXRlcihwcm9ncmVzc0J5dGVzKTtcbiAgICBjb25zdCBpblJhbmdlID0gbG9hZGVkIDw9IHRvdGFsO1xuXG4gICAgYnl0ZXNOb3RpZmllZCA9IGxvYWRlZDtcblxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBsb2FkZWQsXG4gICAgICB0b3RhbCxcbiAgICAgIHByb2dyZXNzOiB0b3RhbCA/IChsb2FkZWQgLyB0b3RhbCkgOiB1bmRlZmluZWQsXG4gICAgICBieXRlczogcHJvZ3Jlc3NCeXRlcyxcbiAgICAgIHJhdGU6IHJhdGUgPyByYXRlIDogdW5kZWZpbmVkLFxuICAgICAgZXN0aW1hdGVkOiByYXRlICYmIHRvdGFsICYmIGluUmFuZ2UgPyAodG90YWwgLSBsb2FkZWQpIC8gcmF0ZSA6IHVuZGVmaW5lZCxcbiAgICAgIGV2ZW50OiBlLFxuICAgICAgbGVuZ3RoQ29tcHV0YWJsZTogdG90YWwgIT0gbnVsbCxcbiAgICAgIFtpc0Rvd25sb2FkU3RyZWFtID8gJ2Rvd25sb2FkJyA6ICd1cGxvYWQnXTogdHJ1ZVxuICAgIH07XG5cbiAgICBsaXN0ZW5lcihkYXRhKTtcbiAgfSwgZnJlcSk7XG59XG5cbmV4cG9ydCBjb25zdCBwcm9ncmVzc0V2ZW50RGVjb3JhdG9yID0gKHRvdGFsLCB0aHJvdHRsZWQpID0+IHtcbiAgY29uc3QgbGVuZ3RoQ29tcHV0YWJsZSA9IHRvdGFsICE9IG51bGw7XG5cbiAgcmV0dXJuIFsobG9hZGVkKSA9PiB0aHJvdHRsZWRbMF0oe1xuICAgIGxlbmd0aENvbXB1dGFibGUsXG4gICAgdG90YWwsXG4gICAgbG9hZGVkXG4gIH0pLCB0aHJvdHRsZWRbMV1dO1xufVxuXG5leHBvcnQgY29uc3QgYXN5bmNEZWNvcmF0b3IgPSAoZm4pID0+ICguLi5hcmdzKSA9PiB1dGlscy5hc2FwKCgpID0+IGZuKC4uLmFyZ3MpKTtcbiIsICJpbXBvcnQgcGxhdGZvcm0gZnJvbSAnLi4vcGxhdGZvcm0vaW5kZXguanMnO1xuXG5leHBvcnQgZGVmYXVsdCBwbGF0Zm9ybS5oYXNTdGFuZGFyZEJyb3dzZXJFbnYgPyAoKG9yaWdpbiwgaXNNU0lFKSA9PiAodXJsKSA9PiB7XG4gIHVybCA9IG5ldyBVUkwodXJsLCBwbGF0Zm9ybS5vcmlnaW4pO1xuXG4gIHJldHVybiAoXG4gICAgb3JpZ2luLnByb3RvY29sID09PSB1cmwucHJvdG9jb2wgJiZcbiAgICBvcmlnaW4uaG9zdCA9PT0gdXJsLmhvc3QgJiZcbiAgICAoaXNNU0lFIHx8IG9yaWdpbi5wb3J0ID09PSB1cmwucG9ydClcbiAgKTtcbn0pKFxuICBuZXcgVVJMKHBsYXRmb3JtLm9yaWdpbiksXG4gIHBsYXRmb3JtLm5hdmlnYXRvciAmJiAvKG1zaWV8dHJpZGVudCkvaS50ZXN0KHBsYXRmb3JtLm5hdmlnYXRvci51c2VyQWdlbnQpXG4pIDogKCkgPT4gdHJ1ZTtcbiIsICJpbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5pbXBvcnQgcGxhdGZvcm0gZnJvbSAnLi4vcGxhdGZvcm0vaW5kZXguanMnO1xuXG5leHBvcnQgZGVmYXVsdCBwbGF0Zm9ybS5oYXNTdGFuZGFyZEJyb3dzZXJFbnYgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBzdXBwb3J0IGRvY3VtZW50LmNvb2tpZVxuICB7XG4gICAgd3JpdGUobmFtZSwgdmFsdWUsIGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlKSB7XG4gICAgICBjb25zdCBjb29raWUgPSBbbmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSldO1xuXG4gICAgICB1dGlscy5pc051bWJlcihleHBpcmVzKSAmJiBjb29raWUucHVzaCgnZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7XG5cbiAgICAgIHV0aWxzLmlzU3RyaW5nKHBhdGgpICYmIGNvb2tpZS5wdXNoKCdwYXRoPScgKyBwYXRoKTtcblxuICAgICAgdXRpbHMuaXNTdHJpbmcoZG9tYWluKSAmJiBjb29raWUucHVzaCgnZG9tYWluPScgKyBkb21haW4pO1xuXG4gICAgICBzZWN1cmUgPT09IHRydWUgJiYgY29va2llLnB1c2goJ3NlY3VyZScpO1xuXG4gICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWUuam9pbignOyAnKTtcbiAgICB9LFxuXG4gICAgcmVhZChuYW1lKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCcoXnw7XFxcXHMqKSgnICsgbmFtZSArICcpPShbXjtdKiknKSk7XG4gICAgICByZXR1cm4gKG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKSA6IG51bGwpO1xuICAgIH0sXG5cbiAgICByZW1vdmUobmFtZSkge1xuICAgICAgdGhpcy53cml0ZShuYW1lLCAnJywgRGF0ZS5ub3coKSAtIDg2NDAwMDAwKTtcbiAgICB9XG4gIH1cblxuICA6XG5cbiAgLy8gTm9uLXN0YW5kYXJkIGJyb3dzZXIgZW52ICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICB7XG4gICAgd3JpdGUoKSB7fSxcbiAgICByZWFkKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICByZW1vdmUoKSB7fVxuICB9O1xuXG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0Fic29sdXRlVVJMKHVybCkge1xuICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoIFwiPHNjaGVtZT46Ly9cIiBvciBcIi8vXCIgKHByb3RvY29sLXJlbGF0aXZlIFVSTCkuXG4gIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuICAvLyBieSBhbnkgY29tYmluYXRpb24gb2YgbGV0dGVycywgZGlnaXRzLCBwbHVzLCBwZXJpb2QsIG9yIGh5cGhlbi5cbiAgcmV0dXJuIC9eKFthLXpdW2EtelxcZCtcXC0uXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgc3BlY2lmaWVkIFVSTHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVSTCBUaGUgcmVsYXRpdmUgVVJMXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIFVSTFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZWxhdGl2ZVVSTCkge1xuICByZXR1cm4gcmVsYXRpdmVVUkxcbiAgICA/IGJhc2VVUkwucmVwbGFjZSgvXFwvP1xcLyQvLCAnJykgKyAnLycgKyByZWxhdGl2ZVVSTC5yZXBsYWNlKC9eXFwvKy8sICcnKVxuICAgIDogYmFzZVVSTDtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBpc0Fic29sdXRlVVJMIGZyb20gJy4uL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyc7XG5pbXBvcnQgY29tYmluZVVSTHMgZnJvbSAnLi4vaGVscGVycy9jb21iaW5lVVJMcy5qcyc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBiYXNlVVJMIHdpdGggdGhlIHJlcXVlc3RlZFVSTCxcbiAqIG9ubHkgd2hlbiB0aGUgcmVxdWVzdGVkVVJMIGlzIG5vdCBhbHJlYWR5IGFuIGFic29sdXRlIFVSTC5cbiAqIElmIHRoZSByZXF1ZXN0VVJMIGlzIGFic29sdXRlLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHJlcXVlc3RlZFVSTCB1bnRvdWNoZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdGVkVVJMIEFic29sdXRlIG9yIHJlbGF0aXZlIFVSTCB0byBjb21iaW5lXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIGZ1bGwgcGF0aFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBidWlsZEZ1bGxQYXRoKGJhc2VVUkwsIHJlcXVlc3RlZFVSTCwgYWxsb3dBYnNvbHV0ZVVybHMpIHtcbiAgbGV0IGlzUmVsYXRpdmVVcmwgPSAhaXNBYnNvbHV0ZVVSTChyZXF1ZXN0ZWRVUkwpO1xuICBpZiAoYmFzZVVSTCAmJiAoaXNSZWxhdGl2ZVVybCB8fCBhbGxvd0Fic29sdXRlVXJscyA9PSBmYWxzZSkpIHtcbiAgICByZXR1cm4gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKTtcbiAgfVxuICByZXR1cm4gcmVxdWVzdGVkVVJMO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcbmltcG9ydCBBeGlvc0hlYWRlcnMgZnJvbSBcIi4vQXhpb3NIZWFkZXJzLmpzXCI7XG5cbmNvbnN0IGhlYWRlcnNUb09iamVjdCA9ICh0aGluZykgPT4gdGhpbmcgaW5zdGFuY2VvZiBBeGlvc0hlYWRlcnMgPyB7IC4uLnRoaW5nIH0gOiB0aGluZztcblxuLyoqXG4gKiBDb25maWctc3BlY2lmaWMgbWVyZ2UtZnVuY3Rpb24gd2hpY2ggY3JlYXRlcyBhIG5ldyBjb25maWctb2JqZWN0XG4gKiBieSBtZXJnaW5nIHR3byBjb25maWd1cmF0aW9uIG9iamVjdHMgdG9nZXRoZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzFcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcyXG4gKlxuICogQHJldHVybnMge09iamVjdH0gTmV3IG9iamVjdCByZXN1bHRpbmcgZnJvbSBtZXJnaW5nIGNvbmZpZzIgdG8gY29uZmlnMVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZXJnZUNvbmZpZyhjb25maWcxLCBjb25maWcyKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBjb25maWcyID0gY29uZmlnMiB8fCB7fTtcbiAgY29uc3QgY29uZmlnID0ge307XG5cbiAgZnVuY3Rpb24gZ2V0TWVyZ2VkVmFsdWUodGFyZ2V0LCBzb3VyY2UsIHByb3AsIGNhc2VsZXNzKSB7XG4gICAgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3QodGFyZ2V0KSAmJiB1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZS5jYWxsKHtjYXNlbGVzc30sIHRhcmdldCwgc291cmNlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHV0aWxzLm1lcmdlKHt9LCBzb3VyY2UpO1xuICAgIH0gZWxzZSBpZiAodXRpbHMuaXNBcnJheShzb3VyY2UpKSB7XG4gICAgICByZXR1cm4gc291cmNlLnNsaWNlKCk7XG4gICAgfVxuICAgIHJldHVybiBzb3VyY2U7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gbWVyZ2VEZWVwUHJvcGVydGllcyhhLCBiLCBwcm9wICwgY2FzZWxlc3MpIHtcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGIpKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUoYSwgYiwgcHJvcCAsIGNhc2VsZXNzKTtcbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChhKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgYSwgcHJvcCAsIGNhc2VsZXNzKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gdmFsdWVGcm9tQ29uZmlnMihhLCBiKSB7XG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChiKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgYik7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIGRlZmF1bHRUb0NvbmZpZzIoYSwgYikge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoYikpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGIpO1xuICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGEpKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBhKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gbWVyZ2VEaXJlY3RLZXlzKGEsIGIsIHByb3ApIHtcbiAgICBpZiAocHJvcCBpbiBjb25maWcyKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUoYSwgYik7XG4gICAgfSBlbHNlIGlmIChwcm9wIGluIGNvbmZpZzEpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGEpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG1lcmdlTWFwID0ge1xuICAgIHVybDogdmFsdWVGcm9tQ29uZmlnMixcbiAgICBtZXRob2Q6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgZGF0YTogdmFsdWVGcm9tQ29uZmlnMixcbiAgICBiYXNlVVJMOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdHJhbnNmb3JtUmVzcG9uc2U6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgcGFyYW1zU2VyaWFsaXplcjogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB0aW1lb3V0OiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHRpbWVvdXRNZXNzYWdlOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHdpdGhDcmVkZW50aWFsczogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB3aXRoWFNSRlRva2VuOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIGFkYXB0ZXI6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgcmVzcG9uc2VUeXBlOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHhzcmZDb29raWVOYW1lOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHhzcmZIZWFkZXJOYW1lOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIG9uVXBsb2FkUHJvZ3Jlc3M6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgb25Eb3dubG9hZFByb2dyZXNzOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIGRlY29tcHJlc3M6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgbWF4Q29udGVudExlbmd0aDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBtYXhCb2R5TGVuZ3RoOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIGJlZm9yZVJlZGlyZWN0OiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHRyYW5zcG9ydDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBodHRwQWdlbnQ6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgaHR0cHNBZ2VudDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBjYW5jZWxUb2tlbjogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBzb2NrZXRQYXRoOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHJlc3BvbnNlRW5jb2Rpbmc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdmFsaWRhdGVTdGF0dXM6IG1lcmdlRGlyZWN0S2V5cyxcbiAgICBoZWFkZXJzOiAoYSwgYiAsIHByb3ApID0+IG1lcmdlRGVlcFByb3BlcnRpZXMoaGVhZGVyc1RvT2JqZWN0KGEpLCBoZWFkZXJzVG9PYmplY3QoYikscHJvcCwgdHJ1ZSlcbiAgfTtcblxuICB1dGlscy5mb3JFYWNoKE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZzEsIGNvbmZpZzIpKSwgZnVuY3Rpb24gY29tcHV0ZUNvbmZpZ1ZhbHVlKHByb3ApIHtcbiAgICBjb25zdCBtZXJnZSA9IG1lcmdlTWFwW3Byb3BdIHx8IG1lcmdlRGVlcFByb3BlcnRpZXM7XG4gICAgY29uc3QgY29uZmlnVmFsdWUgPSBtZXJnZShjb25maWcxW3Byb3BdLCBjb25maWcyW3Byb3BdLCBwcm9wKTtcbiAgICAodXRpbHMuaXNVbmRlZmluZWQoY29uZmlnVmFsdWUpICYmIG1lcmdlICE9PSBtZXJnZURpcmVjdEtleXMpIHx8IChjb25maWdbcHJvcF0gPSBjb25maWdWYWx1ZSk7XG4gIH0pO1xuXG4gIHJldHVybiBjb25maWc7XG59XG4iLCAiaW1wb3J0IHBsYXRmb3JtIGZyb20gXCIuLi9wbGF0Zm9ybS9pbmRleC5qc1wiO1xuaW1wb3J0IHV0aWxzIGZyb20gXCIuLi91dGlscy5qc1wiO1xuaW1wb3J0IGlzVVJMU2FtZU9yaWdpbiBmcm9tIFwiLi9pc1VSTFNhbWVPcmlnaW4uanNcIjtcbmltcG9ydCBjb29raWVzIGZyb20gXCIuL2Nvb2tpZXMuanNcIjtcbmltcG9ydCBidWlsZEZ1bGxQYXRoIGZyb20gXCIuLi9jb3JlL2J1aWxkRnVsbFBhdGguanNcIjtcbmltcG9ydCBtZXJnZUNvbmZpZyBmcm9tIFwiLi4vY29yZS9tZXJnZUNvbmZpZy5qc1wiO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tIFwiLi4vY29yZS9BeGlvc0hlYWRlcnMuanNcIjtcbmltcG9ydCBidWlsZFVSTCBmcm9tIFwiLi9idWlsZFVSTC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IG5ld0NvbmZpZyA9IG1lcmdlQ29uZmlnKHt9LCBjb25maWcpO1xuXG4gIGxldCB7ZGF0YSwgd2l0aFhTUkZUb2tlbiwgeHNyZkhlYWRlck5hbWUsIHhzcmZDb29raWVOYW1lLCBoZWFkZXJzLCBhdXRofSA9IG5ld0NvbmZpZztcblxuICBuZXdDb25maWcuaGVhZGVycyA9IGhlYWRlcnMgPSBBeGlvc0hlYWRlcnMuZnJvbShoZWFkZXJzKTtcblxuICBuZXdDb25maWcudXJsID0gYnVpbGRVUkwoYnVpbGRGdWxsUGF0aChuZXdDb25maWcuYmFzZVVSTCwgbmV3Q29uZmlnLnVybCwgbmV3Q29uZmlnLmFsbG93QWJzb2x1dGVVcmxzKSwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpO1xuXG4gIC8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb25cbiAgaWYgKGF1dGgpIHtcbiAgICBoZWFkZXJzLnNldCgnQXV0aG9yaXphdGlvbicsICdCYXNpYyAnICtcbiAgICAgIGJ0b2EoKGF1dGgudXNlcm5hbWUgfHwgJycpICsgJzonICsgKGF1dGgucGFzc3dvcmQgPyB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYXV0aC5wYXNzd29yZCkpIDogJycpKVxuICAgICk7XG4gIH1cblxuICBsZXQgY29udGVudFR5cGU7XG5cbiAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZGF0YSkpIHtcbiAgICBpZiAocGxhdGZvcm0uaGFzU3RhbmRhcmRCcm93c2VyRW52IHx8IHBsYXRmb3JtLmhhc1N0YW5kYXJkQnJvd3NlcldlYldvcmtlckVudikge1xuICAgICAgaGVhZGVycy5zZXRDb250ZW50VHlwZSh1bmRlZmluZWQpOyAvLyBMZXQgdGhlIGJyb3dzZXIgc2V0IGl0XG4gICAgfSBlbHNlIGlmICgoY29udGVudFR5cGUgPSBoZWFkZXJzLmdldENvbnRlbnRUeXBlKCkpICE9PSBmYWxzZSkge1xuICAgICAgLy8gZml4IHNlbWljb2xvbiBkdXBsaWNhdGlvbiBpc3N1ZSBmb3IgUmVhY3ROYXRpdmUgRm9ybURhdGEgaW1wbGVtZW50YXRpb25cbiAgICAgIGNvbnN0IFt0eXBlLCAuLi50b2tlbnNdID0gY29udGVudFR5cGUgPyBjb250ZW50VHlwZS5zcGxpdCgnOycpLm1hcCh0b2tlbiA9PiB0b2tlbi50cmltKCkpLmZpbHRlcihCb29sZWFuKSA6IFtdO1xuICAgICAgaGVhZGVycy5zZXRDb250ZW50VHlwZShbdHlwZSB8fCAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScsIC4uLnRva2Vuc10uam9pbignOyAnKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gIC8vIFRoaXMgaXMgb25seSBkb25lIGlmIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50LlxuICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLlxuXG4gIGlmIChwbGF0Zm9ybS5oYXNTdGFuZGFyZEJyb3dzZXJFbnYpIHtcbiAgICB3aXRoWFNSRlRva2VuICYmIHV0aWxzLmlzRnVuY3Rpb24od2l0aFhTUkZUb2tlbikgJiYgKHdpdGhYU1JGVG9rZW4gPSB3aXRoWFNSRlRva2VuKG5ld0NvbmZpZykpO1xuXG4gICAgaWYgKHdpdGhYU1JGVG9rZW4gfHwgKHdpdGhYU1JGVG9rZW4gIT09IGZhbHNlICYmIGlzVVJMU2FtZU9yaWdpbihuZXdDb25maWcudXJsKSkpIHtcbiAgICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuICAgICAgY29uc3QgeHNyZlZhbHVlID0geHNyZkhlYWRlck5hbWUgJiYgeHNyZkNvb2tpZU5hbWUgJiYgY29va2llcy5yZWFkKHhzcmZDb29raWVOYW1lKTtcblxuICAgICAgaWYgKHhzcmZWYWx1ZSkge1xuICAgICAgICBoZWFkZXJzLnNldCh4c3JmSGVhZGVyTmFtZSwgeHNyZlZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3Q29uZmlnO1xufVxuXG4iLCAiaW1wb3J0IHV0aWxzIGZyb20gJy4vLi4vdXRpbHMuanMnO1xuaW1wb3J0IHNldHRsZSBmcm9tICcuLy4uL2NvcmUvc2V0dGxlLmpzJztcbmltcG9ydCB0cmFuc2l0aW9uYWxEZWZhdWx0cyBmcm9tICcuLi9kZWZhdWx0cy90cmFuc2l0aW9uYWwuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcbmltcG9ydCBDYW5jZWxlZEVycm9yIGZyb20gJy4uL2NhbmNlbC9DYW5jZWxlZEVycm9yLmpzJztcbmltcG9ydCBwYXJzZVByb3RvY29sIGZyb20gJy4uL2hlbHBlcnMvcGFyc2VQcm90b2NvbC5qcyc7XG5pbXBvcnQgcGxhdGZvcm0gZnJvbSAnLi4vcGxhdGZvcm0vaW5kZXguanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tICcuLi9jb3JlL0F4aW9zSGVhZGVycy5qcyc7XG5pbXBvcnQge3Byb2dyZXNzRXZlbnRSZWR1Y2VyfSBmcm9tICcuLi9oZWxwZXJzL3Byb2dyZXNzRXZlbnRSZWR1Y2VyLmpzJztcbmltcG9ydCByZXNvbHZlQ29uZmlnIGZyb20gXCIuLi9oZWxwZXJzL3Jlc29sdmVDb25maWcuanNcIjtcblxuY29uc3QgaXNYSFJBZGFwdGVyU3VwcG9ydGVkID0gdHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJztcblxuZXhwb3J0IGRlZmF1bHQgaXNYSFJBZGFwdGVyU3VwcG9ydGVkICYmIGZ1bmN0aW9uIChjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCBfY29uZmlnID0gcmVzb2x2ZUNvbmZpZyhjb25maWcpO1xuICAgIGxldCByZXF1ZXN0RGF0YSA9IF9jb25maWcuZGF0YTtcbiAgICBjb25zdCByZXF1ZXN0SGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKF9jb25maWcuaGVhZGVycykubm9ybWFsaXplKCk7XG4gICAgbGV0IHtyZXNwb25zZVR5cGUsIG9uVXBsb2FkUHJvZ3Jlc3MsIG9uRG93bmxvYWRQcm9ncmVzc30gPSBfY29uZmlnO1xuICAgIGxldCBvbkNhbmNlbGVkO1xuICAgIGxldCB1cGxvYWRUaHJvdHRsZWQsIGRvd25sb2FkVGhyb3R0bGVkO1xuICAgIGxldCBmbHVzaFVwbG9hZCwgZmx1c2hEb3dubG9hZDtcblxuICAgIGZ1bmN0aW9uIGRvbmUoKSB7XG4gICAgICBmbHVzaFVwbG9hZCAmJiBmbHVzaFVwbG9hZCgpOyAvLyBmbHVzaCBldmVudHNcbiAgICAgIGZsdXNoRG93bmxvYWQgJiYgZmx1c2hEb3dubG9hZCgpOyAvLyBmbHVzaCBldmVudHNcblxuICAgICAgX2NvbmZpZy5jYW5jZWxUb2tlbiAmJiBfY29uZmlnLmNhbmNlbFRva2VuLnVuc3Vic2NyaWJlKG9uQ2FuY2VsZWQpO1xuXG4gICAgICBfY29uZmlnLnNpZ25hbCAmJiBfY29uZmlnLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIG9uQ2FuY2VsZWQpO1xuICAgIH1cblxuICAgIGxldCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICByZXF1ZXN0Lm9wZW4oX2NvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgX2NvbmZpZy51cmwsIHRydWUpO1xuXG4gICAgLy8gU2V0IHRoZSByZXF1ZXN0IHRpbWVvdXQgaW4gTVNcbiAgICByZXF1ZXN0LnRpbWVvdXQgPSBfY29uZmlnLnRpbWVvdXQ7XG5cbiAgICBmdW5jdGlvbiBvbmxvYWRlbmQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gUHJlcGFyZSB0aGUgcmVzcG9uc2VcbiAgICAgIGNvbnN0IHJlc3BvbnNlSGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKFxuICAgICAgICAnZ2V0QWxsUmVzcG9uc2VIZWFkZXJzJyBpbiByZXF1ZXN0ICYmIHJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKClcbiAgICAgICk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSAhcmVzcG9uc2VUeXBlIHx8IHJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnIHx8IHJlc3BvbnNlVHlwZSA9PT0gJ2pzb24nID9cbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVRleHQgOiByZXF1ZXN0LnJlc3BvbnNlO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSxcbiAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogcmVxdWVzdC5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdFxuICAgICAgfTtcblxuICAgICAgc2V0dGxlKGZ1bmN0aW9uIF9yZXNvbHZlKHZhbHVlKSB7XG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCBmdW5jdGlvbiBfcmVqZWN0KGVycikge1xuICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSwgcmVzcG9uc2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoJ29ubG9hZGVuZCcgaW4gcmVxdWVzdCkge1xuICAgICAgLy8gVXNlIG9ubG9hZGVuZCBpZiBhdmFpbGFibGVcbiAgICAgIHJlcXVlc3Qub25sb2FkZW5kID0gb25sb2FkZW5kO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlIHRvIGVtdWxhdGUgb25sb2FkZW5kXG4gICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCB8fCByZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcbiAgICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcbiAgICAgICAgLy8gV2l0aCBvbmUgZXhjZXB0aW9uOiByZXF1ZXN0IHRoYXQgdXNpbmcgZmlsZTogcHJvdG9jb2wsIG1vc3QgYnJvd3NlcnNcbiAgICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVhZHlzdGF0ZSBoYW5kbGVyIGlzIGNhbGxpbmcgYmVmb3JlIG9uZXJyb3Igb3Igb250aW1lb3V0IGhhbmRsZXJzLFxuICAgICAgICAvLyBzbyB3ZSBzaG91bGQgY2FsbCBvbmxvYWRlbmQgb24gdGhlIG5leHQgJ3RpY2snXG4gICAgICAgIHNldFRpbWVvdXQob25sb2FkZW5kKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGJyb3dzZXIgcmVxdWVzdCBjYW5jZWxsYXRpb24gKGFzIG9wcG9zZWQgdG8gYSBtYW51YWwgY2FuY2VsbGF0aW9uKVxuICAgIHJlcXVlc3Qub25hYm9ydCA9IGZ1bmN0aW9uIGhhbmRsZUFib3J0KCkge1xuICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yKCdSZXF1ZXN0IGFib3J0ZWQnLCBBeGlvc0Vycm9yLkVDT05OQUJPUlRFRCwgY29uZmlnLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgbG93IGxldmVsIG5ldHdvcmsgZXJyb3JzXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XG4gICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXJcbiAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvclxuICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yKCdOZXR3b3JrIEVycm9yJywgQXhpb3NFcnJvci5FUlJfTkVUV09SSywgY29uZmlnLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgdGltZW91dFxuICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHtcbiAgICAgIGxldCB0aW1lb3V0RXJyb3JNZXNzYWdlID0gX2NvbmZpZy50aW1lb3V0ID8gJ3RpbWVvdXQgb2YgJyArIF9jb25maWcudGltZW91dCArICdtcyBleGNlZWRlZCcgOiAndGltZW91dCBleGNlZWRlZCc7XG4gICAgICBjb25zdCB0cmFuc2l0aW9uYWwgPSBfY29uZmlnLnRyYW5zaXRpb25hbCB8fCB0cmFuc2l0aW9uYWxEZWZhdWx0cztcbiAgICAgIGlmIChfY29uZmlnLnRpbWVvdXRFcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgdGltZW91dEVycm9yTWVzc2FnZSA9IF9jb25maWcudGltZW91dEVycm9yTWVzc2FnZTtcbiAgICAgIH1cbiAgICAgIHJlamVjdChuZXcgQXhpb3NFcnJvcihcbiAgICAgICAgdGltZW91dEVycm9yTWVzc2FnZSxcbiAgICAgICAgdHJhbnNpdGlvbmFsLmNsYXJpZnlUaW1lb3V0RXJyb3IgPyBBeGlvc0Vycm9yLkVUSU1FRE9VVCA6IEF4aW9zRXJyb3IuRUNPTk5BQk9SVEVELFxuICAgICAgICBjb25maWcsXG4gICAgICAgIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIFJlbW92ZSBDb250ZW50LVR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbiAgICByZXF1ZXN0RGF0YSA9PT0gdW5kZWZpbmVkICYmIHJlcXVlc3RIZWFkZXJzLnNldENvbnRlbnRUeXBlKG51bGwpO1xuXG4gICAgLy8gQWRkIGhlYWRlcnMgdG8gdGhlIHJlcXVlc3RcbiAgICBpZiAoJ3NldFJlcXVlc3RIZWFkZXInIGluIHJlcXVlc3QpIHtcbiAgICAgIHV0aWxzLmZvckVhY2gocmVxdWVzdEhlYWRlcnMudG9KU09OKCksIGZ1bmN0aW9uIHNldFJlcXVlc3RIZWFkZXIodmFsLCBrZXkpIHtcbiAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFkZCB3aXRoQ3JlZGVudGlhbHMgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKF9jb25maWcud2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSAhIV9jb25maWcud2l0aENyZWRlbnRpYWxzO1xuICAgIH1cblxuICAgIC8vIEFkZCByZXNwb25zZVR5cGUgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAocmVzcG9uc2VUeXBlICYmIHJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7XG4gICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IF9jb25maWcucmVzcG9uc2VUeXBlO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBwcm9ncmVzcyBpZiBuZWVkZWRcbiAgICBpZiAob25Eb3dubG9hZFByb2dyZXNzKSB7XG4gICAgICAoW2Rvd25sb2FkVGhyb3R0bGVkLCBmbHVzaERvd25sb2FkXSA9IHByb2dyZXNzRXZlbnRSZWR1Y2VyKG9uRG93bmxvYWRQcm9ncmVzcywgdHJ1ZSkpO1xuICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGRvd25sb2FkVGhyb3R0bGVkKTtcbiAgICB9XG5cbiAgICAvLyBOb3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgdXBsb2FkIGV2ZW50c1xuICAgIGlmIChvblVwbG9hZFByb2dyZXNzICYmIHJlcXVlc3QudXBsb2FkKSB7XG4gICAgICAoW3VwbG9hZFRocm90dGxlZCwgZmx1c2hVcGxvYWRdID0gcHJvZ3Jlc3NFdmVudFJlZHVjZXIob25VcGxvYWRQcm9ncmVzcykpO1xuXG4gICAgICByZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIHVwbG9hZFRocm90dGxlZCk7XG5cbiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlbmQnLCBmbHVzaFVwbG9hZCk7XG4gICAgfVxuXG4gICAgaWYgKF9jb25maWcuY2FuY2VsVG9rZW4gfHwgX2NvbmZpZy5zaWduYWwpIHtcbiAgICAgIC8vIEhhbmRsZSBjYW5jZWxsYXRpb25cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgICBvbkNhbmNlbGVkID0gY2FuY2VsID0+IHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlamVjdCghY2FuY2VsIHx8IGNhbmNlbC50eXBlID8gbmV3IENhbmNlbGVkRXJyb3IobnVsbCwgY29uZmlnLCByZXF1ZXN0KSA6IGNhbmNlbCk7XG4gICAgICAgIHJlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgICB9O1xuXG4gICAgICBfY29uZmlnLmNhbmNlbFRva2VuICYmIF9jb25maWcuY2FuY2VsVG9rZW4uc3Vic2NyaWJlKG9uQ2FuY2VsZWQpO1xuICAgICAgaWYgKF9jb25maWcuc2lnbmFsKSB7XG4gICAgICAgIF9jb25maWcuc2lnbmFsLmFib3J0ZWQgPyBvbkNhbmNlbGVkKCkgOiBfY29uZmlnLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIG9uQ2FuY2VsZWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHByb3RvY29sID0gcGFyc2VQcm90b2NvbChfY29uZmlnLnVybCk7XG5cbiAgICBpZiAocHJvdG9jb2wgJiYgcGxhdGZvcm0ucHJvdG9jb2xzLmluZGV4T2YocHJvdG9jb2wpID09PSAtMSkge1xuICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yKCdVbnN1cHBvcnRlZCBwcm90b2NvbCAnICsgcHJvdG9jb2wgKyAnOicsIEF4aW9zRXJyb3IuRVJSX0JBRF9SRVFVRVNULCBjb25maWcpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cblxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3RcbiAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEgfHwgbnVsbCk7XG4gIH0pO1xufVxuIiwgImltcG9ydCBDYW5jZWxlZEVycm9yIGZyb20gXCIuLi9jYW5jZWwvQ2FuY2VsZWRFcnJvci5qc1wiO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSBcIi4uL2NvcmUvQXhpb3NFcnJvci5qc1wiO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcblxuY29uc3QgY29tcG9zZVNpZ25hbHMgPSAoc2lnbmFscywgdGltZW91dCkgPT4ge1xuICBjb25zdCB7bGVuZ3RofSA9IChzaWduYWxzID0gc2lnbmFscyA/IHNpZ25hbHMuZmlsdGVyKEJvb2xlYW4pIDogW10pO1xuXG4gIGlmICh0aW1lb3V0IHx8IGxlbmd0aCkge1xuICAgIGxldCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICAgbGV0IGFib3J0ZWQ7XG5cbiAgICBjb25zdCBvbmFib3J0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaWYgKCFhYm9ydGVkKSB7XG4gICAgICAgIGFib3J0ZWQgPSB0cnVlO1xuICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICBjb25zdCBlcnIgPSByZWFzb24gaW5zdGFuY2VvZiBFcnJvciA/IHJlYXNvbiA6IHRoaXMucmVhc29uO1xuICAgICAgICBjb250cm9sbGVyLmFib3J0KGVyciBpbnN0YW5jZW9mIEF4aW9zRXJyb3IgPyBlcnIgOiBuZXcgQ2FuY2VsZWRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogZXJyKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHRpbWVyID0gdGltZW91dCAmJiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgIG9uYWJvcnQobmV3IEF4aW9zRXJyb3IoYHRpbWVvdXQgJHt0aW1lb3V0fSBvZiBtcyBleGNlZWRlZGAsIEF4aW9zRXJyb3IuRVRJTUVET1VUKSlcbiAgICB9LCB0aW1lb3V0KVxuXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7XG4gICAgICBpZiAoc2lnbmFscykge1xuICAgICAgICB0aW1lciAmJiBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICB0aW1lciA9IG51bGw7XG4gICAgICAgIHNpZ25hbHMuZm9yRWFjaChzaWduYWwgPT4ge1xuICAgICAgICAgIHNpZ25hbC51bnN1YnNjcmliZSA/IHNpZ25hbC51bnN1YnNjcmliZShvbmFib3J0KSA6IHNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIG9uYWJvcnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2lnbmFscyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2lnbmFscy5mb3JFYWNoKChzaWduYWwpID0+IHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIG9uYWJvcnQpKTtcblxuICAgIGNvbnN0IHtzaWduYWx9ID0gY29udHJvbGxlcjtcblxuICAgIHNpZ25hbC51bnN1YnNjcmliZSA9ICgpID0+IHV0aWxzLmFzYXAodW5zdWJzY3JpYmUpO1xuXG4gICAgcmV0dXJuIHNpZ25hbDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb21wb3NlU2lnbmFscztcbiIsICJcbmV4cG9ydCBjb25zdCBzdHJlYW1DaHVuayA9IGZ1bmN0aW9uKiAoY2h1bmssIGNodW5rU2l6ZSkge1xuICBsZXQgbGVuID0gY2h1bmsuYnl0ZUxlbmd0aDtcblxuICBpZiAoIWNodW5rU2l6ZSB8fCBsZW4gPCBjaHVua1NpemUpIHtcbiAgICB5aWVsZCBjaHVuaztcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgcG9zID0gMDtcbiAgbGV0IGVuZDtcblxuICB3aGlsZSAocG9zIDwgbGVuKSB7XG4gICAgZW5kID0gcG9zICsgY2h1bmtTaXplO1xuICAgIHlpZWxkIGNodW5rLnNsaWNlKHBvcywgZW5kKTtcbiAgICBwb3MgPSBlbmQ7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHJlYWRCeXRlcyA9IGFzeW5jIGZ1bmN0aW9uKiAoaXRlcmFibGUsIGNodW5rU2l6ZSkge1xuICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHJlYWRTdHJlYW0oaXRlcmFibGUpKSB7XG4gICAgeWllbGQqIHN0cmVhbUNodW5rKGNodW5rLCBjaHVua1NpemUpO1xuICB9XG59XG5cbmNvbnN0IHJlYWRTdHJlYW0gPSBhc3luYyBmdW5jdGlvbiogKHN0cmVhbSkge1xuICBpZiAoc3RyZWFtW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSkge1xuICAgIHlpZWxkKiBzdHJlYW07XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuICB0cnkge1xuICAgIGZvciAoOzspIHtcbiAgICAgIGNvbnN0IHtkb25lLCB2YWx1ZX0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICB5aWVsZCB2YWx1ZTtcbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgcmVhZGVyLmNhbmNlbCgpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCB0cmFja1N0cmVhbSA9IChzdHJlYW0sIGNodW5rU2l6ZSwgb25Qcm9ncmVzcywgb25GaW5pc2gpID0+IHtcbiAgY29uc3QgaXRlcmF0b3IgPSByZWFkQnl0ZXMoc3RyZWFtLCBjaHVua1NpemUpO1xuXG4gIGxldCBieXRlcyA9IDA7XG4gIGxldCBkb25lO1xuICBsZXQgX29uRmluaXNoID0gKGUpID0+IHtcbiAgICBpZiAoIWRvbmUpIHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgb25GaW5pc2ggJiYgb25GaW5pc2goZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgYXN5bmMgcHVsbChjb250cm9sbGVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7ZG9uZSwgdmFsdWV9ID0gYXdhaXQgaXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICBfb25GaW5pc2goKTtcbiAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxlbiA9IHZhbHVlLmJ5dGVMZW5ndGg7XG4gICAgICAgIGlmIChvblByb2dyZXNzKSB7XG4gICAgICAgICAgbGV0IGxvYWRlZEJ5dGVzID0gYnl0ZXMgKz0gbGVuO1xuICAgICAgICAgIG9uUHJvZ3Jlc3MobG9hZGVkQnl0ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShuZXcgVWludDhBcnJheSh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9vbkZpbmlzaChlcnIpO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfSxcbiAgICBjYW5jZWwocmVhc29uKSB7XG4gICAgICBfb25GaW5pc2gocmVhc29uKTtcbiAgICAgIHJldHVybiBpdGVyYXRvci5yZXR1cm4oKTtcbiAgICB9XG4gIH0sIHtcbiAgICBoaWdoV2F0ZXJNYXJrOiAyXG4gIH0pXG59XG4iLCAiaW1wb3J0IHBsYXRmb3JtIGZyb20gXCIuLi9wbGF0Zm9ybS9pbmRleC5qc1wiO1xuaW1wb3J0IHV0aWxzIGZyb20gXCIuLi91dGlscy5qc1wiO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSBcIi4uL2NvcmUvQXhpb3NFcnJvci5qc1wiO1xuaW1wb3J0IGNvbXBvc2VTaWduYWxzIGZyb20gXCIuLi9oZWxwZXJzL2NvbXBvc2VTaWduYWxzLmpzXCI7XG5pbXBvcnQge3RyYWNrU3RyZWFtfSBmcm9tIFwiLi4vaGVscGVycy90cmFja1N0cmVhbS5qc1wiO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tIFwiLi4vY29yZS9BeGlvc0hlYWRlcnMuanNcIjtcbmltcG9ydCB7cHJvZ3Jlc3NFdmVudFJlZHVjZXIsIHByb2dyZXNzRXZlbnREZWNvcmF0b3IsIGFzeW5jRGVjb3JhdG9yfSBmcm9tIFwiLi4vaGVscGVycy9wcm9ncmVzc0V2ZW50UmVkdWNlci5qc1wiO1xuaW1wb3J0IHJlc29sdmVDb25maWcgZnJvbSBcIi4uL2hlbHBlcnMvcmVzb2x2ZUNvbmZpZy5qc1wiO1xuaW1wb3J0IHNldHRsZSBmcm9tIFwiLi4vY29yZS9zZXR0bGUuanNcIjtcblxuY29uc3QgaXNGZXRjaFN1cHBvcnRlZCA9IHR5cGVvZiBmZXRjaCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgUmVxdWVzdCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgUmVzcG9uc2UgPT09ICdmdW5jdGlvbic7XG5jb25zdCBpc1JlYWRhYmxlU3RyZWFtU3VwcG9ydGVkID0gaXNGZXRjaFN1cHBvcnRlZCAmJiB0eXBlb2YgUmVhZGFibGVTdHJlYW0gPT09ICdmdW5jdGlvbic7XG5cbi8vIHVzZWQgb25seSBpbnNpZGUgdGhlIGZldGNoIGFkYXB0ZXJcbmNvbnN0IGVuY29kZVRleHQgPSBpc0ZldGNoU3VwcG9ydGVkICYmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICdmdW5jdGlvbicgP1xuICAgICgoZW5jb2RlcikgPT4gKHN0cikgPT4gZW5jb2Rlci5lbmNvZGUoc3RyKSkobmV3IFRleHRFbmNvZGVyKCkpIDpcbiAgICBhc3luYyAoc3RyKSA9PiBuZXcgVWludDhBcnJheShhd2FpdCBuZXcgUmVzcG9uc2Uoc3RyKS5hcnJheUJ1ZmZlcigpKVxuKTtcblxuY29uc3QgdGVzdCA9IChmbiwgLi4uYXJncykgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiAhIWZuKC4uLmFyZ3MpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuY29uc3Qgc3VwcG9ydHNSZXF1ZXN0U3RyZWFtID0gaXNSZWFkYWJsZVN0cmVhbVN1cHBvcnRlZCAmJiB0ZXN0KCgpID0+IHtcbiAgbGV0IGR1cGxleEFjY2Vzc2VkID0gZmFsc2U7XG5cbiAgY29uc3QgaGFzQ29udGVudFR5cGUgPSBuZXcgUmVxdWVzdChwbGF0Zm9ybS5vcmlnaW4sIHtcbiAgICBib2R5OiBuZXcgUmVhZGFibGVTdHJlYW0oKSxcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBnZXQgZHVwbGV4KCkge1xuICAgICAgZHVwbGV4QWNjZXNzZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuICdoYWxmJztcbiAgICB9LFxuICB9KS5oZWFkZXJzLmhhcygnQ29udGVudC1UeXBlJyk7XG5cbiAgcmV0dXJuIGR1cGxleEFjY2Vzc2VkICYmICFoYXNDb250ZW50VHlwZTtcbn0pO1xuXG5jb25zdCBERUZBVUxUX0NIVU5LX1NJWkUgPSA2NCAqIDEwMjQ7XG5cbmNvbnN0IHN1cHBvcnRzUmVzcG9uc2VTdHJlYW0gPSBpc1JlYWRhYmxlU3RyZWFtU3VwcG9ydGVkICYmXG4gIHRlc3QoKCkgPT4gdXRpbHMuaXNSZWFkYWJsZVN0cmVhbShuZXcgUmVzcG9uc2UoJycpLmJvZHkpKTtcblxuXG5jb25zdCByZXNvbHZlcnMgPSB7XG4gIHN0cmVhbTogc3VwcG9ydHNSZXNwb25zZVN0cmVhbSAmJiAoKHJlcykgPT4gcmVzLmJvZHkpXG59O1xuXG5pc0ZldGNoU3VwcG9ydGVkICYmICgoKHJlcykgPT4ge1xuICBbJ3RleHQnLCAnYXJyYXlCdWZmZXInLCAnYmxvYicsICdmb3JtRGF0YScsICdzdHJlYW0nXS5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICFyZXNvbHZlcnNbdHlwZV0gJiYgKHJlc29sdmVyc1t0eXBlXSA9IHV0aWxzLmlzRnVuY3Rpb24ocmVzW3R5cGVdKSA/IChyZXMpID0+IHJlc1t0eXBlXSgpIDpcbiAgICAgIChfLCBjb25maWcpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoYFJlc3BvbnNlIHR5cGUgJyR7dHlwZX0nIGlzIG5vdCBzdXBwb3J0ZWRgLCBBeGlvc0Vycm9yLkVSUl9OT1RfU1VQUE9SVCwgY29uZmlnKTtcbiAgICAgIH0pXG4gIH0pO1xufSkobmV3IFJlc3BvbnNlKSk7XG5cbmNvbnN0IGdldEJvZHlMZW5ndGggPSBhc3luYyAoYm9keSkgPT4ge1xuICBpZiAoYm9keSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBpZih1dGlscy5pc0Jsb2IoYm9keSkpIHtcbiAgICByZXR1cm4gYm9keS5zaXplO1xuICB9XG5cbiAgaWYodXRpbHMuaXNTcGVjQ29tcGxpYW50Rm9ybShib2R5KSkge1xuICAgIGNvbnN0IF9yZXF1ZXN0ID0gbmV3IFJlcXVlc3QocGxhdGZvcm0ub3JpZ2luLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHksXG4gICAgfSk7XG4gICAgcmV0dXJuIChhd2FpdCBfcmVxdWVzdC5hcnJheUJ1ZmZlcigpKS5ieXRlTGVuZ3RoO1xuICB9XG5cbiAgaWYodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoYm9keSkgfHwgdXRpbHMuaXNBcnJheUJ1ZmZlcihib2R5KSkge1xuICAgIHJldHVybiBib2R5LmJ5dGVMZW5ndGg7XG4gIH1cblxuICBpZih1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhib2R5KSkge1xuICAgIGJvZHkgPSBib2R5ICsgJyc7XG4gIH1cblxuICBpZih1dGlscy5pc1N0cmluZyhib2R5KSkge1xuICAgIHJldHVybiAoYXdhaXQgZW5jb2RlVGV4dChib2R5KSkuYnl0ZUxlbmd0aDtcbiAgfVxufVxuXG5jb25zdCByZXNvbHZlQm9keUxlbmd0aCA9IGFzeW5jIChoZWFkZXJzLCBib2R5KSA9PiB7XG4gIGNvbnN0IGxlbmd0aCA9IHV0aWxzLnRvRmluaXRlTnVtYmVyKGhlYWRlcnMuZ2V0Q29udGVudExlbmd0aCgpKTtcblxuICByZXR1cm4gbGVuZ3RoID09IG51bGwgPyBnZXRCb2R5TGVuZ3RoKGJvZHkpIDogbGVuZ3RoO1xufVxuXG5leHBvcnQgZGVmYXVsdCBpc0ZldGNoU3VwcG9ydGVkICYmIChhc3luYyAoY29uZmlnKSA9PiB7XG4gIGxldCB7XG4gICAgdXJsLFxuICAgIG1ldGhvZCxcbiAgICBkYXRhLFxuICAgIHNpZ25hbCxcbiAgICBjYW5jZWxUb2tlbixcbiAgICB0aW1lb3V0LFxuICAgIG9uRG93bmxvYWRQcm9ncmVzcyxcbiAgICBvblVwbG9hZFByb2dyZXNzLFxuICAgIHJlc3BvbnNlVHlwZSxcbiAgICBoZWFkZXJzLFxuICAgIHdpdGhDcmVkZW50aWFscyA9ICdzYW1lLW9yaWdpbicsXG4gICAgZmV0Y2hPcHRpb25zXG4gIH0gPSByZXNvbHZlQ29uZmlnKGNvbmZpZyk7XG5cbiAgcmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlID8gKHJlc3BvbnNlVHlwZSArICcnKS50b0xvd2VyQ2FzZSgpIDogJ3RleHQnO1xuXG4gIGxldCBjb21wb3NlZFNpZ25hbCA9IGNvbXBvc2VTaWduYWxzKFtzaWduYWwsIGNhbmNlbFRva2VuICYmIGNhbmNlbFRva2VuLnRvQWJvcnRTaWduYWwoKV0sIHRpbWVvdXQpO1xuXG4gIGxldCByZXF1ZXN0O1xuXG4gIGNvbnN0IHVuc3Vic2NyaWJlID0gY29tcG9zZWRTaWduYWwgJiYgY29tcG9zZWRTaWduYWwudW5zdWJzY3JpYmUgJiYgKCgpID0+IHtcbiAgICAgIGNvbXBvc2VkU2lnbmFsLnVuc3Vic2NyaWJlKCk7XG4gIH0pO1xuXG4gIGxldCByZXF1ZXN0Q29udGVudExlbmd0aDtcblxuICB0cnkge1xuICAgIGlmIChcbiAgICAgIG9uVXBsb2FkUHJvZ3Jlc3MgJiYgc3VwcG9ydHNSZXF1ZXN0U3RyZWFtICYmIG1ldGhvZCAhPT0gJ2dldCcgJiYgbWV0aG9kICE9PSAnaGVhZCcgJiZcbiAgICAgIChyZXF1ZXN0Q29udGVudExlbmd0aCA9IGF3YWl0IHJlc29sdmVCb2R5TGVuZ3RoKGhlYWRlcnMsIGRhdGEpKSAhPT0gMFxuICAgICkge1xuICAgICAgbGV0IF9yZXF1ZXN0ID0gbmV3IFJlcXVlc3QodXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBkYXRhLFxuICAgICAgICBkdXBsZXg6IFwiaGFsZlwiXG4gICAgICB9KTtcblxuICAgICAgbGV0IGNvbnRlbnRUeXBlSGVhZGVyO1xuXG4gICAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShkYXRhKSAmJiAoY29udGVudFR5cGVIZWFkZXIgPSBfcmVxdWVzdC5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0Q29udGVudFR5cGUoY29udGVudFR5cGVIZWFkZXIpXG4gICAgICB9XG5cbiAgICAgIGlmIChfcmVxdWVzdC5ib2R5KSB7XG4gICAgICAgIGNvbnN0IFtvblByb2dyZXNzLCBmbHVzaF0gPSBwcm9ncmVzc0V2ZW50RGVjb3JhdG9yKFxuICAgICAgICAgIHJlcXVlc3RDb250ZW50TGVuZ3RoLFxuICAgICAgICAgIHByb2dyZXNzRXZlbnRSZWR1Y2VyKGFzeW5jRGVjb3JhdG9yKG9uVXBsb2FkUHJvZ3Jlc3MpKVxuICAgICAgICApO1xuXG4gICAgICAgIGRhdGEgPSB0cmFja1N0cmVhbShfcmVxdWVzdC5ib2R5LCBERUZBVUxUX0NIVU5LX1NJWkUsIG9uUHJvZ3Jlc3MsIGZsdXNoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXV0aWxzLmlzU3RyaW5nKHdpdGhDcmVkZW50aWFscykpIHtcbiAgICAgIHdpdGhDcmVkZW50aWFscyA9IHdpdGhDcmVkZW50aWFscyA/ICdpbmNsdWRlJyA6ICdvbWl0JztcbiAgICB9XG5cbiAgICAvLyBDbG91ZGZsYXJlIFdvcmtlcnMgdGhyb3dzIHdoZW4gY3JlZGVudGlhbHMgYXJlIGRlZmluZWRcbiAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2Nsb3VkZmxhcmUvd29ya2VyZC9pc3N1ZXMvOTAyXG4gICAgY29uc3QgaXNDcmVkZW50aWFsc1N1cHBvcnRlZCA9IFwiY3JlZGVudGlhbHNcIiBpbiBSZXF1ZXN0LnByb3RvdHlwZTtcbiAgICByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodXJsLCB7XG4gICAgICAuLi5mZXRjaE9wdGlvbnMsXG4gICAgICBzaWduYWw6IGNvbXBvc2VkU2lnbmFsLFxuICAgICAgbWV0aG9kOiBtZXRob2QudG9VcHBlckNhc2UoKSxcbiAgICAgIGhlYWRlcnM6IGhlYWRlcnMubm9ybWFsaXplKCkudG9KU09OKCksXG4gICAgICBib2R5OiBkYXRhLFxuICAgICAgZHVwbGV4OiBcImhhbGZcIixcbiAgICAgIGNyZWRlbnRpYWxzOiBpc0NyZWRlbnRpYWxzU3VwcG9ydGVkID8gd2l0aENyZWRlbnRpYWxzIDogdW5kZWZpbmVkXG4gICAgfSk7XG5cbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChyZXF1ZXN0LCBmZXRjaE9wdGlvbnMpO1xuXG4gICAgY29uc3QgaXNTdHJlYW1SZXNwb25zZSA9IHN1cHBvcnRzUmVzcG9uc2VTdHJlYW0gJiYgKHJlc3BvbnNlVHlwZSA9PT0gJ3N0cmVhbScgfHwgcmVzcG9uc2VUeXBlID09PSAncmVzcG9uc2UnKTtcblxuICAgIGlmIChzdXBwb3J0c1Jlc3BvbnNlU3RyZWFtICYmIChvbkRvd25sb2FkUHJvZ3Jlc3MgfHwgKGlzU3RyZWFtUmVzcG9uc2UgJiYgdW5zdWJzY3JpYmUpKSkge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IHt9O1xuXG4gICAgICBbJ3N0YXR1cycsICdzdGF0dXNUZXh0JywgJ2hlYWRlcnMnXS5mb3JFYWNoKHByb3AgPT4ge1xuICAgICAgICBvcHRpb25zW3Byb3BdID0gcmVzcG9uc2VbcHJvcF07XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2VDb250ZW50TGVuZ3RoID0gdXRpbHMudG9GaW5pdGVOdW1iZXIocmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtbGVuZ3RoJykpO1xuXG4gICAgICBjb25zdCBbb25Qcm9ncmVzcywgZmx1c2hdID0gb25Eb3dubG9hZFByb2dyZXNzICYmIHByb2dyZXNzRXZlbnREZWNvcmF0b3IoXG4gICAgICAgIHJlc3BvbnNlQ29udGVudExlbmd0aCxcbiAgICAgICAgcHJvZ3Jlc3NFdmVudFJlZHVjZXIoYXN5bmNEZWNvcmF0b3Iob25Eb3dubG9hZFByb2dyZXNzKSwgdHJ1ZSlcbiAgICAgICkgfHwgW107XG5cbiAgICAgIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKFxuICAgICAgICB0cmFja1N0cmVhbShyZXNwb25zZS5ib2R5LCBERUZBVUxUX0NIVU5LX1NJWkUsIG9uUHJvZ3Jlc3MsICgpID0+IHtcbiAgICAgICAgICBmbHVzaCAmJiBmbHVzaCgpO1xuICAgICAgICAgIHVuc3Vic2NyaWJlICYmIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH0pLFxuICAgICAgICBvcHRpb25zXG4gICAgICApO1xuICAgIH1cblxuICAgIHJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZSB8fCAndGV4dCc7XG5cbiAgICBsZXQgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzb2x2ZXJzW3V0aWxzLmZpbmRLZXkocmVzb2x2ZXJzLCByZXNwb25zZVR5cGUpIHx8ICd0ZXh0J10ocmVzcG9uc2UsIGNvbmZpZyk7XG5cbiAgICAhaXNTdHJlYW1SZXNwb25zZSAmJiB1bnN1YnNjcmliZSAmJiB1bnN1YnNjcmliZSgpO1xuXG4gICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHtcbiAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICBoZWFkZXJzOiBBeGlvc0hlYWRlcnMuZnJvbShyZXNwb25zZS5oZWFkZXJzKSxcbiAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdFxuICAgICAgfSlcbiAgICB9KVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICB1bnN1YnNjcmliZSAmJiB1bnN1YnNjcmliZSgpO1xuXG4gICAgaWYgKGVyciAmJiBlcnIubmFtZSA9PT0gJ1R5cGVFcnJvcicgJiYgL0xvYWQgZmFpbGVkfGZldGNoL2kudGVzdChlcnIubWVzc2FnZSkpIHtcbiAgICAgIHRocm93IE9iamVjdC5hc3NpZ24oXG4gICAgICAgIG5ldyBBeGlvc0Vycm9yKCdOZXR3b3JrIEVycm9yJywgQXhpb3NFcnJvci5FUlJfTkVUV09SSywgY29uZmlnLCByZXF1ZXN0KSxcbiAgICAgICAge1xuICAgICAgICAgIGNhdXNlOiBlcnIuY2F1c2UgfHwgZXJyXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICB0aHJvdyBBeGlvc0Vycm9yLmZyb20oZXJyLCBlcnIgJiYgZXJyLmNvZGUsIGNvbmZpZywgcmVxdWVzdCk7XG4gIH1cbn0pO1xuXG5cbiIsICJpbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IGh0dHBBZGFwdGVyIGZyb20gJy4vaHR0cC5qcyc7XG5pbXBvcnQgeGhyQWRhcHRlciBmcm9tICcuL3hoci5qcyc7XG5pbXBvcnQgZmV0Y2hBZGFwdGVyIGZyb20gJy4vZmV0Y2guanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSBcIi4uL2NvcmUvQXhpb3NFcnJvci5qc1wiO1xuXG5jb25zdCBrbm93bkFkYXB0ZXJzID0ge1xuICBodHRwOiBodHRwQWRhcHRlcixcbiAgeGhyOiB4aHJBZGFwdGVyLFxuICBmZXRjaDogZmV0Y2hBZGFwdGVyXG59XG5cbnV0aWxzLmZvckVhY2goa25vd25BZGFwdGVycywgKGZuLCB2YWx1ZSkgPT4ge1xuICBpZiAoZm4pIHtcbiAgICB0cnkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCAnbmFtZScsIHt2YWx1ZX0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eVxuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sICdhZGFwdGVyTmFtZScsIHt2YWx1ZX0pO1xuICB9XG59KTtcblxuY29uc3QgcmVuZGVyUmVhc29uID0gKHJlYXNvbikgPT4gYC0gJHtyZWFzb259YDtcblxuY29uc3QgaXNSZXNvbHZlZEhhbmRsZSA9IChhZGFwdGVyKSA9PiB1dGlscy5pc0Z1bmN0aW9uKGFkYXB0ZXIpIHx8IGFkYXB0ZXIgPT09IG51bGwgfHwgYWRhcHRlciA9PT0gZmFsc2U7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZ2V0QWRhcHRlcjogKGFkYXB0ZXJzKSA9PiB7XG4gICAgYWRhcHRlcnMgPSB1dGlscy5pc0FycmF5KGFkYXB0ZXJzKSA/IGFkYXB0ZXJzIDogW2FkYXB0ZXJzXTtcblxuICAgIGNvbnN0IHtsZW5ndGh9ID0gYWRhcHRlcnM7XG4gICAgbGV0IG5hbWVPckFkYXB0ZXI7XG4gICAgbGV0IGFkYXB0ZXI7XG5cbiAgICBjb25zdCByZWplY3RlZFJlYXNvbnMgPSB7fTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIG5hbWVPckFkYXB0ZXIgPSBhZGFwdGVyc1tpXTtcbiAgICAgIGxldCBpZDtcblxuICAgICAgYWRhcHRlciA9IG5hbWVPckFkYXB0ZXI7XG5cbiAgICAgIGlmICghaXNSZXNvbHZlZEhhbmRsZShuYW1lT3JBZGFwdGVyKSkge1xuICAgICAgICBhZGFwdGVyID0ga25vd25BZGFwdGVyc1soaWQgPSBTdHJpbmcobmFtZU9yQWRhcHRlcikpLnRvTG93ZXJDYXNlKCldO1xuXG4gICAgICAgIGlmIChhZGFwdGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcihgVW5rbm93biBhZGFwdGVyICcke2lkfSdgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYWRhcHRlcikge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgcmVqZWN0ZWRSZWFzb25zW2lkIHx8ICcjJyArIGldID0gYWRhcHRlcjtcbiAgICB9XG5cbiAgICBpZiAoIWFkYXB0ZXIpIHtcblxuICAgICAgY29uc3QgcmVhc29ucyA9IE9iamVjdC5lbnRyaWVzKHJlamVjdGVkUmVhc29ucylcbiAgICAgICAgLm1hcCgoW2lkLCBzdGF0ZV0pID0+IGBhZGFwdGVyICR7aWR9IGAgK1xuICAgICAgICAgIChzdGF0ZSA9PT0gZmFsc2UgPyAnaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgZW52aXJvbm1lbnQnIDogJ2lzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGJ1aWxkJylcbiAgICAgICAgKTtcblxuICAgICAgbGV0IHMgPSBsZW5ndGggP1xuICAgICAgICAocmVhc29ucy5sZW5ndGggPiAxID8gJ3NpbmNlIDpcXG4nICsgcmVhc29ucy5tYXAocmVuZGVyUmVhc29uKS5qb2luKCdcXG4nKSA6ICcgJyArIHJlbmRlclJlYXNvbihyZWFzb25zWzBdKSkgOlxuICAgICAgICAnYXMgbm8gYWRhcHRlciBzcGVjaWZpZWQnO1xuXG4gICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcihcbiAgICAgICAgYFRoZXJlIGlzIG5vIHN1aXRhYmxlIGFkYXB0ZXIgdG8gZGlzcGF0Y2ggdGhlIHJlcXVlc3QgYCArIHMsXG4gICAgICAgICdFUlJfTk9UX1NVUFBPUlQnXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBhZGFwdGVyO1xuICB9LFxuICBhZGFwdGVyczoga25vd25BZGFwdGVyc1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHRyYW5zZm9ybURhdGEgZnJvbSAnLi90cmFuc2Zvcm1EYXRhLmpzJztcbmltcG9ydCBpc0NhbmNlbCBmcm9tICcuLi9jYW5jZWwvaXNDYW5jZWwuanMnO1xuaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4uL2RlZmF1bHRzL2luZGV4LmpzJztcbmltcG9ydCBDYW5jZWxlZEVycm9yIGZyb20gJy4uL2NhbmNlbC9DYW5jZWxlZEVycm9yLmpzJztcbmltcG9ydCBBeGlvc0hlYWRlcnMgZnJvbSAnLi4vY29yZS9BeGlvc0hlYWRlcnMuanMnO1xuaW1wb3J0IGFkYXB0ZXJzIGZyb20gXCIuLi9hZGFwdGVycy9hZGFwdGVycy5qc1wiO1xuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxlZEVycm9yYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyB0aGF0IGlzIHRvIGJlIHVzZWQgZm9yIHRoZSByZXF1ZXN0XG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSB7XG4gIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpO1xuICB9XG5cbiAgaWYgKGNvbmZpZy5zaWduYWwgJiYgY29uZmlnLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgdGhyb3cgbmV3IENhbmNlbGVkRXJyb3IobnVsbCwgY29uZmlnKTtcbiAgfVxufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIHVzaW5nIHRoZSBjb25maWd1cmVkIGFkYXB0ZXIuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgdG8gYmUgZnVsZmlsbGVkXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHtcbiAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gIGNvbmZpZy5oZWFkZXJzID0gQXhpb3NIZWFkZXJzLmZyb20oY29uZmlnLmhlYWRlcnMpO1xuXG4gIC8vIFRyYW5zZm9ybSByZXF1ZXN0IGRhdGFcbiAgY29uZmlnLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoXG4gICAgY29uZmlnLFxuICAgIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0XG4gICk7XG5cbiAgaWYgKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXS5pbmRleE9mKGNvbmZpZy5tZXRob2QpICE9PSAtMSkge1xuICAgIGNvbmZpZy5oZWFkZXJzLnNldENvbnRlbnRUeXBlKCdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLCBmYWxzZSk7XG4gIH1cblxuICBjb25zdCBhZGFwdGVyID0gYWRhcHRlcnMuZ2V0QWRhcHRlcihjb25maWcuYWRhcHRlciB8fCBkZWZhdWx0cy5hZGFwdGVyKTtcblxuICByZXR1cm4gYWRhcHRlcihjb25maWcpLnRoZW4oZnVuY3Rpb24gb25BZGFwdGVyUmVzb2x1dGlvbihyZXNwb25zZSkge1xuICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICAgIGNvbmZpZyxcbiAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZSxcbiAgICAgIHJlc3BvbnNlXG4gICAgKTtcblxuICAgIHJlc3BvbnNlLmhlYWRlcnMgPSBBeGlvc0hlYWRlcnMuZnJvbShyZXNwb25zZS5oZWFkZXJzKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSwgZnVuY3Rpb24gb25BZGFwdGVyUmVqZWN0aW9uKHJlYXNvbikge1xuICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkge1xuICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgICAgaWYgKHJlYXNvbiAmJiByZWFzb24ucmVzcG9uc2UpIHtcbiAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoXG4gICAgICAgICAgY29uZmlnLFxuICAgICAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZSxcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICAgICAgcmVhc29uLnJlc3BvbnNlLmhlYWRlcnMgPSBBeGlvc0hlYWRlcnMuZnJvbShyZWFzb24ucmVzcG9uc2UuaGVhZGVycyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XG4gIH0pO1xufVxuIiwgImV4cG9ydCBjb25zdCBWRVJTSU9OID0gXCIxLjEwLjBcIjsiLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQge1ZFUlNJT059IGZyb20gJy4uL2Vudi9kYXRhLmpzJztcbmltcG9ydCBBeGlvc0Vycm9yIGZyb20gJy4uL2NvcmUvQXhpb3NFcnJvci5qcyc7XG5cbmNvbnN0IHZhbGlkYXRvcnMgPSB7fTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblsnb2JqZWN0JywgJ2Jvb2xlYW4nLCAnbnVtYmVyJywgJ2Z1bmN0aW9uJywgJ3N0cmluZycsICdzeW1ib2wnXS5mb3JFYWNoKCh0eXBlLCBpKSA9PiB7XG4gIHZhbGlkYXRvcnNbdHlwZV0gPSBmdW5jdGlvbiB2YWxpZGF0b3IodGhpbmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaW5nID09PSB0eXBlIHx8ICdhJyArIChpIDwgMSA/ICduICcgOiAnICcpICsgdHlwZTtcbiAgfTtcbn0pO1xuXG5jb25zdCBkZXByZWNhdGVkV2FybmluZ3MgPSB7fTtcblxuLyoqXG4gKiBUcmFuc2l0aW9uYWwgb3B0aW9uIHZhbGlkYXRvclxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb258Ym9vbGVhbj99IHZhbGlkYXRvciAtIHNldCB0byBmYWxzZSBpZiB0aGUgdHJhbnNpdGlvbmFsIG9wdGlvbiBoYXMgYmVlbiByZW1vdmVkXG4gKiBAcGFyYW0ge3N0cmluZz99IHZlcnNpb24gLSBkZXByZWNhdGVkIHZlcnNpb24gLyByZW1vdmVkIHNpbmNlIHZlcnNpb25cbiAqIEBwYXJhbSB7c3RyaW5nP30gbWVzc2FnZSAtIHNvbWUgbWVzc2FnZSB3aXRoIGFkZGl0aW9uYWwgaW5mb1xuICpcbiAqIEByZXR1cm5zIHtmdW5jdGlvbn1cbiAqL1xudmFsaWRhdG9ycy50cmFuc2l0aW9uYWwgPSBmdW5jdGlvbiB0cmFuc2l0aW9uYWwodmFsaWRhdG9yLCB2ZXJzaW9uLCBtZXNzYWdlKSB7XG4gIGZ1bmN0aW9uIGZvcm1hdE1lc3NhZ2Uob3B0LCBkZXNjKSB7XG4gICAgcmV0dXJuICdbQXhpb3MgdicgKyBWRVJTSU9OICsgJ10gVHJhbnNpdGlvbmFsIG9wdGlvbiBcXCcnICsgb3B0ICsgJ1xcJycgKyBkZXNjICsgKG1lc3NhZ2UgPyAnLiAnICsgbWVzc2FnZSA6ICcnKTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gIHJldHVybiAodmFsdWUsIG9wdCwgb3B0cykgPT4ge1xuICAgIGlmICh2YWxpZGF0b3IgPT09IGZhbHNlKSB7XG4gICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcihcbiAgICAgICAgZm9ybWF0TWVzc2FnZShvcHQsICcgaGFzIGJlZW4gcmVtb3ZlZCcgKyAodmVyc2lvbiA/ICcgaW4gJyArIHZlcnNpb24gOiAnJykpLFxuICAgICAgICBBeGlvc0Vycm9yLkVSUl9ERVBSRUNBVEVEXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh2ZXJzaW9uICYmICFkZXByZWNhdGVkV2FybmluZ3Nbb3B0XSkge1xuICAgICAgZGVwcmVjYXRlZFdhcm5pbmdzW29wdF0gPSB0cnVlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgZm9ybWF0TWVzc2FnZShcbiAgICAgICAgICBvcHQsXG4gICAgICAgICAgJyBoYXMgYmVlbiBkZXByZWNhdGVkIHNpbmNlIHYnICsgdmVyc2lvbiArICcgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmVhciBmdXR1cmUnXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkYXRvciA/IHZhbGlkYXRvcih2YWx1ZSwgb3B0LCBvcHRzKSA6IHRydWU7XG4gIH07XG59O1xuXG52YWxpZGF0b3JzLnNwZWxsaW5nID0gZnVuY3Rpb24gc3BlbGxpbmcoY29ycmVjdFNwZWxsaW5nKSB7XG4gIHJldHVybiAodmFsdWUsIG9wdCkgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS53YXJuKGAke29wdH0gaXMgbGlrZWx5IGEgbWlzc3BlbGxpbmcgb2YgJHtjb3JyZWN0U3BlbGxpbmd9YCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cbi8qKlxuICogQXNzZXJ0IG9iamVjdCdzIHByb3BlcnRpZXMgdHlwZVxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge29iamVjdH0gc2NoZW1hXG4gKiBAcGFyYW0ge2Jvb2xlYW4/fSBhbGxvd1Vua25vd25cbiAqXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGFzc2VydE9wdGlvbnMob3B0aW9ucywgc2NoZW1hLCBhbGxvd1Vua25vd24pIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKCdvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0JywgQXhpb3NFcnJvci5FUlJfQkFEX09QVElPTl9WQUxVRSk7XG4gIH1cbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpO1xuICBsZXQgaSA9IGtleXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tID4gMCkge1xuICAgIGNvbnN0IG9wdCA9IGtleXNbaV07XG4gICAgY29uc3QgdmFsaWRhdG9yID0gc2NoZW1hW29wdF07XG4gICAgaWYgKHZhbGlkYXRvcikge1xuICAgICAgY29uc3QgdmFsdWUgPSBvcHRpb25zW29wdF07XG4gICAgICBjb25zdCByZXN1bHQgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbGlkYXRvcih2YWx1ZSwgb3B0LCBvcHRpb25zKTtcbiAgICAgIGlmIChyZXN1bHQgIT09IHRydWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoJ29wdGlvbiAnICsgb3B0ICsgJyBtdXN0IGJlICcgKyByZXN1bHQsIEF4aW9zRXJyb3IuRVJSX0JBRF9PUFRJT05fVkFMVUUpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChhbGxvd1Vua25vd24gIT09IHRydWUpIHtcbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKCdVbmtub3duIG9wdGlvbiAnICsgb3B0LCBBeGlvc0Vycm9yLkVSUl9CQURfT1BUSU9OKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBhc3NlcnRPcHRpb25zLFxuICB2YWxpZGF0b3JzXG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vLi4vdXRpbHMuanMnO1xuaW1wb3J0IGJ1aWxkVVJMIGZyb20gJy4uL2hlbHBlcnMvYnVpbGRVUkwuanMnO1xuaW1wb3J0IEludGVyY2VwdG9yTWFuYWdlciBmcm9tICcuL0ludGVyY2VwdG9yTWFuYWdlci5qcyc7XG5pbXBvcnQgZGlzcGF0Y2hSZXF1ZXN0IGZyb20gJy4vZGlzcGF0Y2hSZXF1ZXN0LmpzJztcbmltcG9ydCBtZXJnZUNvbmZpZyBmcm9tICcuL21lcmdlQ29uZmlnLmpzJztcbmltcG9ydCBidWlsZEZ1bGxQYXRoIGZyb20gJy4vYnVpbGRGdWxsUGF0aC5qcyc7XG5pbXBvcnQgdmFsaWRhdG9yIGZyb20gJy4uL2hlbHBlcnMvdmFsaWRhdG9yLmpzJztcbmltcG9ydCBBeGlvc0hlYWRlcnMgZnJvbSAnLi9BeGlvc0hlYWRlcnMuanMnO1xuXG5jb25zdCB2YWxpZGF0b3JzID0gdmFsaWRhdG9yLnZhbGlkYXRvcnM7XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKlxuICogQHJldHVybiB7QXhpb3N9IEEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKi9cbmNsYXNzIEF4aW9zIHtcbiAgY29uc3RydWN0b3IoaW5zdGFuY2VDb25maWcpIHtcbiAgICB0aGlzLmRlZmF1bHRzID0gaW5zdGFuY2VDb25maWcgfHwge307XG4gICAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7XG4gICAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCksXG4gICAgICByZXNwb25zZTogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwYXRjaCBhIHJlcXVlc3RcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBjb25maWdPclVybCBUaGUgY29uZmlnIHNwZWNpZmljIGZvciB0aGlzIHJlcXVlc3QgKG1lcmdlZCB3aXRoIHRoaXMuZGVmYXVsdHMpXG4gICAqIEBwYXJhbSB7P09iamVjdH0gY29uZmlnXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcbiAgICovXG4gIGFzeW5jIHJlcXVlc3QoY29uZmlnT3JVcmwsIGNvbmZpZykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVxdWVzdChjb25maWdPclVybCwgY29uZmlnKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBsZXQgZHVtbXkgPSB7fTtcblxuICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA/IEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKGR1bW15KSA6IChkdW1teSA9IG5ldyBFcnJvcigpKTtcblxuICAgICAgICAvLyBzbGljZSBvZmYgdGhlIEVycm9yOiAuLi4gbGluZVxuICAgICAgICBjb25zdCBzdGFjayA9IGR1bW15LnN0YWNrID8gZHVtbXkuc3RhY2sucmVwbGFjZSgvXi4rXFxuLywgJycpIDogJyc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFlcnIuc3RhY2spIHtcbiAgICAgICAgICAgIGVyci5zdGFjayA9IHN0YWNrO1xuICAgICAgICAgICAgLy8gbWF0Y2ggd2l0aG91dCB0aGUgMiB0b3Agc3RhY2sgbGluZXNcbiAgICAgICAgICB9IGVsc2UgaWYgKHN0YWNrICYmICFTdHJpbmcoZXJyLnN0YWNrKS5lbmRzV2l0aChzdGFjay5yZXBsYWNlKC9eLitcXG4uK1xcbi8sICcnKSkpIHtcbiAgICAgICAgICAgIGVyci5zdGFjayArPSAnXFxuJyArIHN0YWNrXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaWdub3JlIHRoZSBjYXNlIHdoZXJlIFwic3RhY2tcIiBpcyBhbiB1bi13cml0YWJsZSBwcm9wZXJ0eVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBfcmVxdWVzdChjb25maWdPclVybCwgY29uZmlnKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuICAgIGlmICh0eXBlb2YgY29uZmlnT3JVcmwgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25maWcgPSBjb25maWcgfHwge307XG4gICAgICBjb25maWcudXJsID0gY29uZmlnT3JVcmw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZpZyA9IGNvbmZpZ09yVXJsIHx8IHt9O1xuICAgIH1cblxuICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7XG5cbiAgICBjb25zdCB7dHJhbnNpdGlvbmFsLCBwYXJhbXNTZXJpYWxpemVyLCBoZWFkZXJzfSA9IGNvbmZpZztcblxuICAgIGlmICh0cmFuc2l0aW9uYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFsaWRhdG9yLmFzc2VydE9wdGlvbnModHJhbnNpdGlvbmFsLCB7XG4gICAgICAgIHNpbGVudEpTT05QYXJzaW5nOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pLFxuICAgICAgICBmb3JjZWRKU09OUGFyc2luZzogdmFsaWRhdG9ycy50cmFuc2l0aW9uYWwodmFsaWRhdG9ycy5ib29sZWFuKSxcbiAgICAgICAgY2xhcmlmeVRpbWVvdXRFcnJvcjogdmFsaWRhdG9ycy50cmFuc2l0aW9uYWwodmFsaWRhdG9ycy5ib29sZWFuKVxuICAgICAgfSwgZmFsc2UpO1xuICAgIH1cblxuICAgIGlmIChwYXJhbXNTZXJpYWxpemVyICE9IG51bGwpIHtcbiAgICAgIGlmICh1dGlscy5pc0Z1bmN0aW9uKHBhcmFtc1NlcmlhbGl6ZXIpKSB7XG4gICAgICAgIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyID0ge1xuICAgICAgICAgIHNlcmlhbGl6ZTogcGFyYW1zU2VyaWFsaXplclxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWxpZGF0b3IuYXNzZXJ0T3B0aW9ucyhwYXJhbXNTZXJpYWxpemVyLCB7XG4gICAgICAgICAgZW5jb2RlOiB2YWxpZGF0b3JzLmZ1bmN0aW9uLFxuICAgICAgICAgIHNlcmlhbGl6ZTogdmFsaWRhdG9ycy5mdW5jdGlvblxuICAgICAgICB9LCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzXG4gICAgaWYgKGNvbmZpZy5hbGxvd0Fic29sdXRlVXJscyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBkbyBub3RoaW5nXG4gICAgfSBlbHNlIGlmICh0aGlzLmRlZmF1bHRzLmFsbG93QWJzb2x1dGVVcmxzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbmZpZy5hbGxvd0Fic29sdXRlVXJscyA9IHRoaXMuZGVmYXVsdHMuYWxsb3dBYnNvbHV0ZVVybHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZpZy5hbGxvd0Fic29sdXRlVXJscyA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFsaWRhdG9yLmFzc2VydE9wdGlvbnMoY29uZmlnLCB7XG4gICAgICBiYXNlVXJsOiB2YWxpZGF0b3JzLnNwZWxsaW5nKCdiYXNlVVJMJyksXG4gICAgICB3aXRoWHNyZlRva2VuOiB2YWxpZGF0b3JzLnNwZWxsaW5nKCd3aXRoWFNSRlRva2VuJylcbiAgICB9LCB0cnVlKTtcblxuICAgIC8vIFNldCBjb25maWcubWV0aG9kXG4gICAgY29uZmlnLm1ldGhvZCA9IChjb25maWcubWV0aG9kIHx8IHRoaXMuZGVmYXVsdHMubWV0aG9kIHx8ICdnZXQnKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gRmxhdHRlbiBoZWFkZXJzXG4gICAgbGV0IGNvbnRleHRIZWFkZXJzID0gaGVhZGVycyAmJiB1dGlscy5tZXJnZShcbiAgICAgIGhlYWRlcnMuY29tbW9uLFxuICAgICAgaGVhZGVyc1tjb25maWcubWV0aG9kXVxuICAgICk7XG5cbiAgICBoZWFkZXJzICYmIHV0aWxzLmZvckVhY2goXG4gICAgICBbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCcsICdjb21tb24nXSxcbiAgICAgIChtZXRob2QpID0+IHtcbiAgICAgICAgZGVsZXRlIGhlYWRlcnNbbWV0aG9kXTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgY29uZmlnLmhlYWRlcnMgPSBBeGlvc0hlYWRlcnMuY29uY2F0KGNvbnRleHRIZWFkZXJzLCBoZWFkZXJzKTtcblxuICAgIC8vIGZpbHRlciBvdXQgc2tpcHBlZCBpbnRlcmNlcHRvcnNcbiAgICBjb25zdCByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbiA9IFtdO1xuICAgIGxldCBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgPSB0cnVlO1xuICAgIHRoaXMuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZm9yRWFjaChmdW5jdGlvbiB1bnNoaWZ0UmVxdWVzdEludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuICAgICAgaWYgKHR5cGVvZiBpbnRlcmNlcHRvci5ydW5XaGVuID09PSAnZnVuY3Rpb24nICYmIGludGVyY2VwdG9yLnJ1bldoZW4oY29uZmlnKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgPSBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgJiYgaW50ZXJjZXB0b3Iuc3luY2hyb25vdXM7XG5cbiAgICAgIHJlcXVlc3RJbnRlcmNlcHRvckNoYWluLnVuc2hpZnQoaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCByZXNwb25zZUludGVyY2VwdG9yQ2hhaW4gPSBbXTtcbiAgICB0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uIHB1c2hSZXNwb25zZUludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuICAgICAgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gICAgfSk7XG5cbiAgICBsZXQgcHJvbWlzZTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGxlbjtcblxuICAgIGlmICghc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzKSB7XG4gICAgICBjb25zdCBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QuYmluZCh0aGlzKSwgdW5kZWZpbmVkXTtcbiAgICAgIGNoYWluLnVuc2hpZnQuYXBwbHkoY2hhaW4sIHJlcXVlc3RJbnRlcmNlcHRvckNoYWluKTtcbiAgICAgIGNoYWluLnB1c2guYXBwbHkoY2hhaW4sIHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbik7XG4gICAgICBsZW4gPSBjaGFpbi5sZW5ndGg7XG5cbiAgICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTtcblxuICAgICAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihjaGFpbltpKytdLCBjaGFpbltpKytdKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgbGVuID0gcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoO1xuXG4gICAgbGV0IG5ld0NvbmZpZyA9IGNvbmZpZztcblxuICAgIGkgPSAwO1xuXG4gICAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICAgIGNvbnN0IG9uRnVsZmlsbGVkID0gcmVxdWVzdEludGVyY2VwdG9yQ2hhaW5baSsrXTtcbiAgICAgIGNvbnN0IG9uUmVqZWN0ZWQgPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbltpKytdO1xuICAgICAgdHJ5IHtcbiAgICAgICAgbmV3Q29uZmlnID0gb25GdWxmaWxsZWQobmV3Q29uZmlnKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG9uUmVqZWN0ZWQuY2FsbCh0aGlzLCBlcnJvcik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBwcm9taXNlID0gZGlzcGF0Y2hSZXF1ZXN0LmNhbGwodGhpcywgbmV3Q29uZmlnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICB9XG5cbiAgICBpID0gMDtcbiAgICBsZW4gPSByZXNwb25zZUludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4ocmVzcG9uc2VJbnRlcmNlcHRvckNoYWluW2krK10sIHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbltpKytdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIGdldFVyaShjb25maWcpIHtcbiAgICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuICAgIGNvbnN0IGZ1bGxQYXRoID0gYnVpbGRGdWxsUGF0aChjb25maWcuYmFzZVVSTCwgY29uZmlnLnVybCwgY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzKTtcbiAgICByZXR1cm4gYnVpbGRVUkwoZnVsbFBhdGgsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKTtcbiAgfVxufVxuXG4vLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZCxcbiAgICAgIHVybCxcbiAgICAgIGRhdGE6IChjb25maWcgfHwge30pLmRhdGFcbiAgICB9KSk7XG4gIH07XG59KTtcblxudXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcbiAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cblxuICBmdW5jdGlvbiBnZW5lcmF0ZUhUVFBNZXRob2QoaXNGb3JtKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGh0dHBNZXRob2QodXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QobWVyZ2VDb25maWcoY29uZmlnIHx8IHt9LCB7XG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgaGVhZGVyczogaXNGb3JtID8ge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSdcbiAgICAgICAgfSA6IHt9LFxuICAgICAgICB1cmwsXG4gICAgICAgIGRhdGFcbiAgICAgIH0pKTtcbiAgICB9O1xuICB9XG5cbiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBnZW5lcmF0ZUhUVFBNZXRob2QoKTtcblxuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kICsgJ0Zvcm0nXSA9IGdlbmVyYXRlSFRUUE1ldGhvZCh0cnVlKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBBeGlvcztcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBDYW5jZWxlZEVycm9yIGZyb20gJy4vQ2FuY2VsZWRFcnJvci5qcyc7XG5cbi8qKlxuICogQSBgQ2FuY2VsVG9rZW5gIGlzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcXVlc3QgY2FuY2VsbGF0aW9uIG9mIGFuIG9wZXJhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG4gKlxuICogQHJldHVybnMge0NhbmNlbFRva2VufVxuICovXG5jbGFzcyBDYW5jZWxUb2tlbiB7XG4gIGNvbnN0cnVjdG9yKGV4ZWN1dG9yKSB7XG4gICAgaWYgKHR5cGVvZiBleGVjdXRvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cblxuICAgIGxldCByZXNvbHZlUHJvbWlzZTtcblxuICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIHByb21pc2VFeGVjdXRvcihyZXNvbHZlKSB7XG4gICAgICByZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG4gICAgfSk7XG5cbiAgICBjb25zdCB0b2tlbiA9IHRoaXM7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgIHRoaXMucHJvbWlzZS50aGVuKGNhbmNlbCA9PiB7XG4gICAgICBpZiAoIXRva2VuLl9saXN0ZW5lcnMpIHJldHVybjtcblxuICAgICAgbGV0IGkgPSB0b2tlbi5fbGlzdGVuZXJzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGktLSA+IDApIHtcbiAgICAgICAgdG9rZW4uX2xpc3RlbmVyc1tpXShjYW5jZWwpO1xuICAgICAgfVxuICAgICAgdG9rZW4uX2xpc3RlbmVycyA9IG51bGw7XG4gICAgfSk7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgIHRoaXMucHJvbWlzZS50aGVuID0gb25mdWxmaWxsZWQgPT4ge1xuICAgICAgbGV0IF9yZXNvbHZlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgdG9rZW4uc3Vic2NyaWJlKHJlc29sdmUpO1xuICAgICAgICBfcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICB9KS50aGVuKG9uZnVsZmlsbGVkKTtcblxuICAgICAgcHJvbWlzZS5jYW5jZWwgPSBmdW5jdGlvbiByZWplY3QoKSB7XG4gICAgICAgIHRva2VuLnVuc3Vic2NyaWJlKF9yZXNvbHZlKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH07XG5cbiAgICBleGVjdXRvcihmdW5jdGlvbiBjYW5jZWwobWVzc2FnZSwgY29uZmlnLCByZXF1ZXN0KSB7XG4gICAgICBpZiAodG9rZW4ucmVhc29uKSB7XG4gICAgICAgIC8vIENhbmNlbGxhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlcXVlc3RlZFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRva2VuLnJlYXNvbiA9IG5ldyBDYW5jZWxlZEVycm9yKG1lc3NhZ2UsIGNvbmZpZywgcmVxdWVzdCk7XG4gICAgICByZXNvbHZlUHJvbWlzZSh0b2tlbi5yZWFzb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRocm93cyBhIGBDYW5jZWxlZEVycm9yYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICAgKi9cbiAgdGhyb3dJZlJlcXVlc3RlZCgpIHtcbiAgICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICAgIHRocm93IHRoaXMucmVhc29uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gdGhlIGNhbmNlbCBzaWduYWxcbiAgICovXG5cbiAgc3Vic2NyaWJlKGxpc3RlbmVyKSB7XG4gICAgaWYgKHRoaXMucmVhc29uKSB7XG4gICAgICBsaXN0ZW5lcih0aGlzLnJlYXNvbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xpc3RlbmVycykge1xuICAgICAgdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMgPSBbbGlzdGVuZXJdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVbnN1YnNjcmliZSBmcm9tIHRoZSBjYW5jZWwgc2lnbmFsXG4gICAqL1xuXG4gIHVuc3Vic2NyaWJlKGxpc3RlbmVyKSB7XG4gICAgaWYgKCF0aGlzLl9saXN0ZW5lcnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLl9saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgdGhpcy5fbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICB9XG5cbiAgdG9BYm9ydFNpZ25hbCgpIHtcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICAgY29uc3QgYWJvcnQgPSAoZXJyKSA9PiB7XG4gICAgICBjb250cm9sbGVyLmFib3J0KGVycik7XG4gICAgfTtcblxuICAgIHRoaXMuc3Vic2NyaWJlKGFib3J0KTtcblxuICAgIGNvbnRyb2xsZXIuc2lnbmFsLnVuc3Vic2NyaWJlID0gKCkgPT4gdGhpcy51bnN1YnNjcmliZShhYm9ydCk7XG5cbiAgICByZXR1cm4gY29udHJvbGxlci5zaWduYWw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG5ldyBgQ2FuY2VsVG9rZW5gIGFuZCBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLFxuICAgKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICAgKi9cbiAgc3RhdGljIHNvdXJjZSgpIHtcbiAgICBsZXQgY2FuY2VsO1xuICAgIGNvbnN0IHRva2VuID0gbmV3IENhbmNlbFRva2VuKGZ1bmN0aW9uIGV4ZWN1dG9yKGMpIHtcbiAgICAgIGNhbmNlbCA9IGM7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRva2VuLFxuICAgICAgY2FuY2VsXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYW5jZWxUb2tlbjtcbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU3ludGFjdGljIHN1Z2FyIGZvciBpbnZva2luZyBhIGZ1bmN0aW9uIGFuZCBleHBhbmRpbmcgYW4gYXJyYXkgZm9yIGFyZ3VtZW50cy5cbiAqXG4gKiBDb21tb24gdXNlIGNhc2Ugd291bGQgYmUgdG8gdXNlIGBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHlgLlxuICpcbiAqICBgYGBqc1xuICogIGZ1bmN0aW9uIGYoeCwgeSwgeikge31cbiAqICB2YXIgYXJncyA9IFsxLCAyLCAzXTtcbiAqICBmLmFwcGx5KG51bGwsIGFyZ3MpO1xuICogIGBgYFxuICpcbiAqIFdpdGggYHNwcmVhZGAgdGhpcyBleGFtcGxlIGNhbiBiZSByZS13cml0dGVuLlxuICpcbiAqICBgYGBqc1xuICogIHNwcmVhZChmdW5jdGlvbih4LCB5LCB6KSB7fSkoWzEsIDIsIDNdKTtcbiAqICBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICpcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3ByZWFkKGNhbGxiYWNrKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKGFycikge1xuICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcnIpO1xuICB9O1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vLi4vdXRpbHMuanMnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgcGF5bG9hZCBpcyBhbiBlcnJvciB0aHJvd24gYnkgQXhpb3NcbiAqXG4gKiBAcGFyYW0geyp9IHBheWxvYWQgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgcGF5bG9hZCBpcyBhbiBlcnJvciB0aHJvd24gYnkgQXhpb3MsIG90aGVyd2lzZSBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0F4aW9zRXJyb3IocGF5bG9hZCkge1xuICByZXR1cm4gdXRpbHMuaXNPYmplY3QocGF5bG9hZCkgJiYgKHBheWxvYWQuaXNBeGlvc0Vycm9yID09PSB0cnVlKTtcbn1cbiIsICJjb25zdCBIdHRwU3RhdHVzQ29kZSA9IHtcbiAgQ29udGludWU6IDEwMCxcbiAgU3dpdGNoaW5nUHJvdG9jb2xzOiAxMDEsXG4gIFByb2Nlc3Npbmc6IDEwMixcbiAgRWFybHlIaW50czogMTAzLFxuICBPazogMjAwLFxuICBDcmVhdGVkOiAyMDEsXG4gIEFjY2VwdGVkOiAyMDIsXG4gIE5vbkF1dGhvcml0YXRpdmVJbmZvcm1hdGlvbjogMjAzLFxuICBOb0NvbnRlbnQ6IDIwNCxcbiAgUmVzZXRDb250ZW50OiAyMDUsXG4gIFBhcnRpYWxDb250ZW50OiAyMDYsXG4gIE11bHRpU3RhdHVzOiAyMDcsXG4gIEFscmVhZHlSZXBvcnRlZDogMjA4LFxuICBJbVVzZWQ6IDIyNixcbiAgTXVsdGlwbGVDaG9pY2VzOiAzMDAsXG4gIE1vdmVkUGVybWFuZW50bHk6IDMwMSxcbiAgRm91bmQ6IDMwMixcbiAgU2VlT3RoZXI6IDMwMyxcbiAgTm90TW9kaWZpZWQ6IDMwNCxcbiAgVXNlUHJveHk6IDMwNSxcbiAgVW51c2VkOiAzMDYsXG4gIFRlbXBvcmFyeVJlZGlyZWN0OiAzMDcsXG4gIFBlcm1hbmVudFJlZGlyZWN0OiAzMDgsXG4gIEJhZFJlcXVlc3Q6IDQwMCxcbiAgVW5hdXRob3JpemVkOiA0MDEsXG4gIFBheW1lbnRSZXF1aXJlZDogNDAyLFxuICBGb3JiaWRkZW46IDQwMyxcbiAgTm90Rm91bmQ6IDQwNCxcbiAgTWV0aG9kTm90QWxsb3dlZDogNDA1LFxuICBOb3RBY2NlcHRhYmxlOiA0MDYsXG4gIFByb3h5QXV0aGVudGljYXRpb25SZXF1aXJlZDogNDA3LFxuICBSZXF1ZXN0VGltZW91dDogNDA4LFxuICBDb25mbGljdDogNDA5LFxuICBHb25lOiA0MTAsXG4gIExlbmd0aFJlcXVpcmVkOiA0MTEsXG4gIFByZWNvbmRpdGlvbkZhaWxlZDogNDEyLFxuICBQYXlsb2FkVG9vTGFyZ2U6IDQxMyxcbiAgVXJpVG9vTG9uZzogNDE0LFxuICBVbnN1cHBvcnRlZE1lZGlhVHlwZTogNDE1LFxuICBSYW5nZU5vdFNhdGlzZmlhYmxlOiA0MTYsXG4gIEV4cGVjdGF0aW9uRmFpbGVkOiA0MTcsXG4gIEltQVRlYXBvdDogNDE4LFxuICBNaXNkaXJlY3RlZFJlcXVlc3Q6IDQyMSxcbiAgVW5wcm9jZXNzYWJsZUVudGl0eTogNDIyLFxuICBMb2NrZWQ6IDQyMyxcbiAgRmFpbGVkRGVwZW5kZW5jeTogNDI0LFxuICBUb29FYXJseTogNDI1LFxuICBVcGdyYWRlUmVxdWlyZWQ6IDQyNixcbiAgUHJlY29uZGl0aW9uUmVxdWlyZWQ6IDQyOCxcbiAgVG9vTWFueVJlcXVlc3RzOiA0MjksXG4gIFJlcXVlc3RIZWFkZXJGaWVsZHNUb29MYXJnZTogNDMxLFxuICBVbmF2YWlsYWJsZUZvckxlZ2FsUmVhc29uczogNDUxLFxuICBJbnRlcm5hbFNlcnZlckVycm9yOiA1MDAsXG4gIE5vdEltcGxlbWVudGVkOiA1MDEsXG4gIEJhZEdhdGV3YXk6IDUwMixcbiAgU2VydmljZVVuYXZhaWxhYmxlOiA1MDMsXG4gIEdhdGV3YXlUaW1lb3V0OiA1MDQsXG4gIEh0dHBWZXJzaW9uTm90U3VwcG9ydGVkOiA1MDUsXG4gIFZhcmlhbnRBbHNvTmVnb3RpYXRlczogNTA2LFxuICBJbnN1ZmZpY2llbnRTdG9yYWdlOiA1MDcsXG4gIExvb3BEZXRlY3RlZDogNTA4LFxuICBOb3RFeHRlbmRlZDogNTEwLFxuICBOZXR3b3JrQXV0aGVudGljYXRpb25SZXF1aXJlZDogNTExLFxufTtcblxuT2JqZWN0LmVudHJpZXMoSHR0cFN0YXR1c0NvZGUpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICBIdHRwU3RhdHVzQ29kZVt2YWx1ZV0gPSBrZXk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgSHR0cFN0YXR1c0NvZGU7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi91dGlscy5qcyc7XG5pbXBvcnQgYmluZCBmcm9tICcuL2hlbHBlcnMvYmluZC5qcyc7XG5pbXBvcnQgQXhpb3MgZnJvbSAnLi9jb3JlL0F4aW9zLmpzJztcbmltcG9ydCBtZXJnZUNvbmZpZyBmcm9tICcuL2NvcmUvbWVyZ2VDb25maWcuanMnO1xuaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4vZGVmYXVsdHMvaW5kZXguanMnO1xuaW1wb3J0IGZvcm1EYXRhVG9KU09OIGZyb20gJy4vaGVscGVycy9mb3JtRGF0YVRvSlNPTi5qcyc7XG5pbXBvcnQgQ2FuY2VsZWRFcnJvciBmcm9tICcuL2NhbmNlbC9DYW5jZWxlZEVycm9yLmpzJztcbmltcG9ydCBDYW5jZWxUb2tlbiBmcm9tICcuL2NhbmNlbC9DYW5jZWxUb2tlbi5qcyc7XG5pbXBvcnQgaXNDYW5jZWwgZnJvbSAnLi9jYW5jZWwvaXNDYW5jZWwuanMnO1xuaW1wb3J0IHtWRVJTSU9OfSBmcm9tICcuL2Vudi9kYXRhLmpzJztcbmltcG9ydCB0b0Zvcm1EYXRhIGZyb20gJy4vaGVscGVycy90b0Zvcm1EYXRhLmpzJztcbmltcG9ydCBBeGlvc0Vycm9yIGZyb20gJy4vY29yZS9BeGlvc0Vycm9yLmpzJztcbmltcG9ydCBzcHJlYWQgZnJvbSAnLi9oZWxwZXJzL3NwcmVhZC5qcyc7XG5pbXBvcnQgaXNBeGlvc0Vycm9yIGZyb20gJy4vaGVscGVycy9pc0F4aW9zRXJyb3IuanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tIFwiLi9jb3JlL0F4aW9zSGVhZGVycy5qc1wiO1xuaW1wb3J0IGFkYXB0ZXJzIGZyb20gJy4vYWRhcHRlcnMvYWRhcHRlcnMuanMnO1xuaW1wb3J0IEh0dHBTdGF0dXNDb2RlIGZyb20gJy4vaGVscGVycy9IdHRwU3RhdHVzQ29kZS5qcyc7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlZmF1bHRDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqXG4gKiBAcmV0dXJucyB7QXhpb3N9IEEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRDb25maWcpIHtcbiAgY29uc3QgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTtcbiAgY29uc3QgaW5zdGFuY2UgPSBiaW5kKEF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0LCBjb250ZXh0KTtcblxuICAvLyBDb3B5IGF4aW9zLnByb3RvdHlwZSB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIEF4aW9zLnByb3RvdHlwZSwgY29udGV4dCwge2FsbE93bktleXM6IHRydWV9KTtcblxuICAvLyBDb3B5IGNvbnRleHQgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBjb250ZXh0LCBudWxsLCB7YWxsT3duS2V5czogdHJ1ZX0pO1xuXG4gIC8vIEZhY3RvcnkgZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZXNcbiAgaW5zdGFuY2UuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKG1lcmdlQ29uZmlnKGRlZmF1bHRDb25maWcsIGluc3RhbmNlQ29uZmlnKSk7XG4gIH07XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG4vLyBDcmVhdGUgdGhlIGRlZmF1bHQgaW5zdGFuY2UgdG8gYmUgZXhwb3J0ZWRcbmNvbnN0IGF4aW9zID0gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdHMpO1xuXG4vLyBFeHBvc2UgQXhpb3MgY2xhc3MgdG8gYWxsb3cgY2xhc3MgaW5oZXJpdGFuY2VcbmF4aW9zLkF4aW9zID0gQXhpb3M7XG5cbi8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlblxuYXhpb3MuQ2FuY2VsZWRFcnJvciA9IENhbmNlbGVkRXJyb3I7XG5heGlvcy5DYW5jZWxUb2tlbiA9IENhbmNlbFRva2VuO1xuYXhpb3MuaXNDYW5jZWwgPSBpc0NhbmNlbDtcbmF4aW9zLlZFUlNJT04gPSBWRVJTSU9OO1xuYXhpb3MudG9Gb3JtRGF0YSA9IHRvRm9ybURhdGE7XG5cbi8vIEV4cG9zZSBBeGlvc0Vycm9yIGNsYXNzXG5heGlvcy5BeGlvc0Vycm9yID0gQXhpb3NFcnJvcjtcblxuLy8gYWxpYXMgZm9yIENhbmNlbGVkRXJyb3IgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbmF4aW9zLkNhbmNlbCA9IGF4aW9zLkNhbmNlbGVkRXJyb3I7XG5cbi8vIEV4cG9zZSBhbGwvc3ByZWFkXG5heGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbn07XG5cbmF4aW9zLnNwcmVhZCA9IHNwcmVhZDtcblxuLy8gRXhwb3NlIGlzQXhpb3NFcnJvclxuYXhpb3MuaXNBeGlvc0Vycm9yID0gaXNBeGlvc0Vycm9yO1xuXG4vLyBFeHBvc2UgbWVyZ2VDb25maWdcbmF4aW9zLm1lcmdlQ29uZmlnID0gbWVyZ2VDb25maWc7XG5cbmF4aW9zLkF4aW9zSGVhZGVycyA9IEF4aW9zSGVhZGVycztcblxuYXhpb3MuZm9ybVRvSlNPTiA9IHRoaW5nID0+IGZvcm1EYXRhVG9KU09OKHV0aWxzLmlzSFRNTEZvcm0odGhpbmcpID8gbmV3IEZvcm1EYXRhKHRoaW5nKSA6IHRoaW5nKTtcblxuYXhpb3MuZ2V0QWRhcHRlciA9IGFkYXB0ZXJzLmdldEFkYXB0ZXI7XG5cbmF4aW9zLkh0dHBTdGF0dXNDb2RlID0gSHR0cFN0YXR1c0NvZGU7XG5cbmF4aW9zLmRlZmF1bHQgPSBheGlvcztcblxuLy8gdGhpcyBtb2R1bGUgc2hvdWxkIG9ubHkgaGF2ZSBhIGRlZmF1bHQgZXhwb3J0XG5leHBvcnQgZGVmYXVsdCBheGlvc1xuIiwgImltcG9ydCBheGlvcyBmcm9tICcuL2xpYi9heGlvcy5qcyc7XG5cbi8vIFRoaXMgbW9kdWxlIGlzIGludGVuZGVkIHRvIHVud3JhcCBBeGlvcyBkZWZhdWx0IGV4cG9ydCBhcyBuYW1lZC5cbi8vIEtlZXAgdG9wLWxldmVsIGV4cG9ydCBzYW1lIHdpdGggc3RhdGljIHByb3BlcnRpZXNcbi8vIHNvIHRoYXQgaXQgY2FuIGtlZXAgc2FtZSB3aXRoIGVzIG1vZHVsZSBvciBjanNcbmNvbnN0IHtcbiAgQXhpb3MsXG4gIEF4aW9zRXJyb3IsXG4gIENhbmNlbGVkRXJyb3IsXG4gIGlzQ2FuY2VsLFxuICBDYW5jZWxUb2tlbixcbiAgVkVSU0lPTixcbiAgYWxsLFxuICBDYW5jZWwsXG4gIGlzQXhpb3NFcnJvcixcbiAgc3ByZWFkLFxuICB0b0Zvcm1EYXRhLFxuICBBeGlvc0hlYWRlcnMsXG4gIEh0dHBTdGF0dXNDb2RlLFxuICBmb3JtVG9KU09OLFxuICBnZXRBZGFwdGVyLFxuICBtZXJnZUNvbmZpZ1xufSA9IGF4aW9zO1xuXG5leHBvcnQge1xuICBheGlvcyBhcyBkZWZhdWx0LFxuICBBeGlvcyxcbiAgQXhpb3NFcnJvcixcbiAgQ2FuY2VsZWRFcnJvcixcbiAgaXNDYW5jZWwsXG4gIENhbmNlbFRva2VuLFxuICBWRVJTSU9OLFxuICBhbGwsXG4gIENhbmNlbCxcbiAgaXNBeGlvc0Vycm9yLFxuICBzcHJlYWQsXG4gIHRvRm9ybURhdGEsXG4gIEF4aW9zSGVhZGVycyxcbiAgSHR0cFN0YXR1c0NvZGUsXG4gIGZvcm1Ub0pTT04sXG4gIGdldEFkYXB0ZXIsXG4gIG1lcmdlQ29uZmlnXG59XG4iLCAiaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xuaW1wb3J0IHsgV29yZERhdGEgfSBmcm9tICcuLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XG5pbXBvcnQgeyBkZWNyeXB0QXBpS2V5IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuaW1wb3J0IHsgcmV0cnlBUElDYWxsLCBBUElSZXRyeVBvbGljeSB9IGZyb20gJy4uLy4uL3NoYXJlZC9SZXRyeVBvbGljeSc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuXG5leHBvcnQgaW50ZXJmYWNlIExMTVJlc3BvbnNlIHtcbiAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgIGRhdGE/OiBhbnk7XG4gICAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZ3Jlc3NDYWxsYmFjayB7XG4gICAgKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXb3JkRGV0YWlsRGF0YSB7XG4gICAgd29yZDogc3RyaW5nO1xuICAgIHByb251bmNpYXRpb246IHN0cmluZztcbiAgICBtZWFuaW5nczogc3RyaW5nW107XG4gICAgZXhhbXBsZXM6IHtcbiAgICAgICAgZW5nbGlzaDogc3RyaW5nO1xuICAgICAgICBrb3JlYW46IHN0cmluZztcbiAgICB9W107XG4gICAgc2ltaWxhcldvcmRzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNsYXNzIExMTVNlcnZpY2Uge1xuICAgIHByaXZhdGUgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncztcbiAgICBwcml2YXRlIHJldHJ5UG9saWN5OiBBUElSZXRyeVBvbGljeTtcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICAgICB0aGlzLnJldHJ5UG9saWN5ID0gbmV3IEFQSVJldHJ5UG9saWN5KHtcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAzLFxuICAgICAgICAgICAgZGVsYXlNczogMjAwMCxcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc1OCBBUEkgXHVEMEE0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUJBNTRcdUMxMUNcdUI0RENcbiAgICBwcml2YXRlIGdldEN1cnJlbnRBcGlLZXkoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnNldHRpbmdzLmxsbVByb3ZpZGVyO1xuICAgICAgICBsZXQgZW5jcnlwdGVkS2V5ID0gJyc7XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOlxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZEtleSA9IHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRLZXkgPSB0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2dvb2dsZSc6XG4gICAgICAgICAgICAgICAgZW5jcnlwdGVkS2V5ID0gdGhpcy5zZXR0aW5ncy5nb29nbGVBcGlLZXk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBkZWNyeXB0QXBpS2V5KGVuY3J5cHRlZEtleSk7XG4gICAgfVxuXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYXBpS2V5ID0gdGhpcy5nZXRDdXJyZW50QXBpS2V5KCk7XG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHRlc3RQcm9tcHQgPSAnSGVsbG8sIHRoaXMgaXMgYSB0ZXN0IG1lc3NhZ2UuIFBsZWFzZSByZXNwb25kIHdpdGggXCJPS1wiIGlmIHlvdSBjYW4gcmVhZCB0aGlzLic7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbExMTSh0ZXN0UHJvbXB0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiAnQVBJIFx1QzVGMFx1QUNCMCBcdUMxMzFcdUFDRjUnIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzcG9uc2UuZXJyb3IgfHwgJ0FQSSBcdUM1RjBcdUFDQjAgXHVDMkU0XHVEMzI4JyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRXb3JkRGV0YWlscyh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPExMTVJlc3BvbnNlPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKTtcbiAgICAgICAgICAgIGlmICghYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5jcmVhdGVXb3JkRGV0YWlsUHJvbXB0KHdvcmQpO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxMTE0ocHJvbXB0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gdGhpcy5wYXJzZVdvcmREZXRhaWxSZXNwb25zZShyZXNwb25zZS5kYXRhLCB3b3JkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBwYXJzZWREYXRhIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzcG9uc2UuZXJyb3IgfHwgJ1x1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0XHVCMzcwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldE11bHRpcGxlV29yZERldGFpbHMod29yZHM6IHN0cmluZ1tdLCBwcm9ncmVzc0NhbGxiYWNrPzogUHJvZ3Jlc3NDYWxsYmFjayk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IHRoaXMuZ2V0Q3VycmVudEFwaUtleSgpO1xuICAgICAgICAgICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBUEkgXHVEMEE0XHVBQzAwIFx1QzEyNFx1QzgxNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAod29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDQzk4XHVCOUFDXHVENTYwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBCQVRDSF9TSVpFID0gMjA7XG4gICAgICAgICAgICBjb25zdCBhbGxSZXN1bHRzOiBXb3JkRGV0YWlsRGF0YVtdID0gW107XG4gICAgICAgICAgICBjb25zdCB0b3RhbEJhdGNoZXMgPSBNYXRoLmNlaWwod29yZHMubGVuZ3RoIC8gQkFUQ0hfU0laRSk7XG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKDAsIHdvcmRzLmxlbmd0aCwgYFx1Q0QxRCAke3dvcmRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0XHVCOTdDICR7dG90YWxCYXRjaGVzfVx1QUMxQyBcdUJDMzBcdUNFNThcdUI4NUMgXHVCMDk4XHVCMjA0XHVDNUI0IFx1Q0M5OFx1QjlBQ1x1RDU2OVx1QjJDOFx1QjJFNC5gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkgKz0gQkFUQ0hfU0laRSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhdGNoTnVtYmVyID0gTWF0aC5mbG9vcihpIC8gQkFUQ0hfU0laRSkgKyAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhdGNoV29yZHMgPSB3b3Jkcy5zbGljZShpLCBpICsgQkFUQ0hfU0laRSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhpLCB3b3Jkcy5sZW5ndGgsIGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0vJHt0b3RhbEJhdGNoZXN9IFx1Q0M5OFx1QjlBQyBcdUM5MTEuLi4gKCR7YmF0Y2hXb3Jkcy5sZW5ndGh9XHVBQzFDIFx1QjJFOFx1QzVCNClgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5jcmVhdGVNdWx0aXBsZVdvcmREZXRhaWxQcm9tcHQoYmF0Y2hXb3Jkcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsTExNKHByb21wdCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IHRoaXMucGFyc2VNdWx0aXBsZVdvcmREZXRhaWxSZXNwb25zZShyZXNwb25zZS5kYXRhLCBiYXRjaFdvcmRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbFJlc3VsdHMucHVzaCguLi5wYXJzZWREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGkgKyBiYXRjaFdvcmRzLmxlbmd0aCwgd29yZHMubGVuZ3RoLCBgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzY0NFx1QjhDQzogJHtwYXJzZWREYXRhLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1Q0M5OFx1QjlBQ1x1QjQyOGApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzJFNFx1RDMyODpgLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soaSwgd29yZHMubGVuZ3RoLCBgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzJFNFx1RDMyOCwgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQ1x1Qjg1QyBcdUM4MDRcdUQ2NTguLi5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1QzJFNFx1RDMyOFx1RDU1QyBcdUJDMzBcdUNFNThcdUM3NTggXHVCMkU4XHVDNUI0XHVCNEU0XHVDNzQ0IFx1QUMxQ1x1QkNDNFx1QzgwMVx1QzczQ1x1Qjg1QyBcdUNDOThcdUI5QUMgXHVDMkRDXHVCM0M0XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRpdmlkdWFsUmVzdWx0cyA9IGF3YWl0IHRoaXMucHJvY2Vzc1dvcmRzSW5kaXZpZHVhbGx5KGJhdGNoV29yZHMsIHByb2dyZXNzQ2FsbGJhY2ssIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLmluZGl2aWR1YWxSZXN1bHRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfSBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1ODpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGksIHdvcmRzLmxlbmd0aCwgYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfSBcdUM2MjRcdUI5NTgsIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUNcdUI4NUMgXHVDODA0XHVENjU4Li4uYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERCBcdUMyREMgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQ1x1Qjg1QyBcdUQzRjRcdUJDMzFcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kaXZpZHVhbFJlc3VsdHMgPSBhd2FpdCB0aGlzLnByb2Nlc3NXb3Jkc0luZGl2aWR1YWxseShiYXRjaFdvcmRzLCBwcm9ncmVzc0NhbGxiYWNrLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLmluZGl2aWR1YWxSZXN1bHRzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBcdUJDMzBcdUNFNTggXHVBQzA0IFx1QzlFN1x1Qzc0MCBcdUM5QzBcdUM1RjAgKEFQSSBcdUM4MUNcdUQ1NUMgXHVCQzI5XHVDOUMwKVxuICAgICAgICAgICAgICAgIGlmIChpICsgQkFUQ0hfU0laRSA8IHdvcmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKHdvcmRzLmxlbmd0aCwgd29yZHMubGVuZ3RoLCBgXHVCQUE4XHVCNEUwIFx1QkMzMFx1Q0U1OCBcdUNDOThcdUI5QUMgXHVDNjQ0XHVCOENDLiBcdUNEMUQgJHthbGxSZXN1bHRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMyMThcdUM5RDFcdUI0MjhgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGFsbFJlc3VsdHMgfTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdUFDMUNcdUJDQzQgXHVCMkU4XHVDNUI0IFx1Q0M5OFx1QjlBQyAoXHVCQzMwXHVDRTU4IFx1QzJFNFx1RDMyOCBcdUMyREMgXHVEM0Y0XHVCQzMxKVxuICAgIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1dvcmRzSW5kaXZpZHVhbGx5KHdvcmRzOiBzdHJpbmdbXSwgcHJvZ3Jlc3NDYWxsYmFjaz86IFByb2dyZXNzQ2FsbGJhY2ssIHN0YXJ0SW5kZXg6IG51bWJlciA9IDApOiBQcm9taXNlPFdvcmREZXRhaWxEYXRhW10+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHdvcmRzW2ldO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gc3RhcnRJbmRleCArIGk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhjdXJyZW50SW5kZXgsIHN0YXJ0SW5kZXggKyB3b3Jkcy5sZW5ndGgsIGBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDOiBcIiR7d29yZH1cImApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0V29yZERldGFpbHMod29yZCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCIgXHVDQzk4XHVCOUFDIFx1QzJFNFx1RDMyODpgLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QzJFNFx1RDMyOFx1RDU1QyBcdUIyRThcdUM1QjRcdUM1RDAgXHVCMzAwXHVENTVDIFx1QUUzMFx1QkNGOCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDMEREXHVDMTMxXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JkOiB3b3JkLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Q0M5OFx1QjlBQyBcdUMyRTRcdUQzMjgnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogW11cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUMgXHVBQzA0IFx1QzlFN1x1Qzc0MCBcdUM5QzBcdUM1RjBcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDUwMCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIiBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NTg6YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmQudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJycsXG4gICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Q0M5OFx1QjlBQyBcdUM2MjRcdUI5NTgnXSxcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFtdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cblxuICAgIC8vIFx1QzlDMFx1QzVGMCBcdUQ1NjhcdUMyMThcbiAgICBwcml2YXRlIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlV29yZERldGFpbFByb21wdCh3b3JkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYFx1QjJFNFx1Qzc0QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiXHVDNUQwIFx1QjMwMFx1RDU1QyBcdUMwQzFcdUMxMzggXHVDODE1XHVCQ0Y0XHVCOTdDIEpTT04gXHVENjE1XHVDMkREXHVDNzNDXHVCODVDIFx1QzgxQ1x1QUNGNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC5cblxuXHVDNjk0XHVBRDZDXHVDMEFDXHVENTZEOlxuMS4gXHVCQzFDXHVDNzRDXHVBRTMwXHVENjM4IChJUEEgXHVENjE1XHVDMkREKVxuMi4gXHVENTVDXHVBRTAwIFx1QjczQlx1QjRFNCAoXHVDNUVDXHVCN0VDIFx1QUMxQ1x1Qzc3QyBcdUMyMTggXHVDNzg4XHVDNzRDKVxuMy4gXHVBQzAxIFx1QjczQlx1QkNDNFx1Qjg1QyBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4XHVBQ0ZDIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgKFx1QUMwMSBcdUI3M0JcdUIyRjkgMi0zXHVBQzFDXHVDNzU4IFx1QzYwOFx1QkIzOCBcdUM4MUNcdUFDRjUpXG40LiBcdUM3MjBcdUMwQUNcdUQ1NUMgXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNFx1QjRFNFxuXG5cdUM3NTFcdUIyRjUgXHVENjE1XHVDMkREOlxue1xuICBcIndvcmRcIjogXCIke3dvcmR9XCIsXG4gIFwicHJvbnVuY2lhdGlvblwiOiBcIi9cdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzgvXCIsXG4gIFwibWVhbmluZ3NcIjogW1wiXHVCNzNCMVwiLCBcIlx1QjczQjJcIiwgXCJcdUI3M0IzXCJdLFxuICBcImV4YW1wbGVzXCI6IFtcbiAgICB7XG4gICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDFcIixcbiAgICAgIFwia29yZWFuXCI6IFwiXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAxXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggMlwiLCBcbiAgICAgIFwia29yZWFuXCI6IFwiXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAyXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggM1wiLFxuICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDNcIlxuICAgIH1cbiAgXSxcbiAgXCJzaW1pbGFyV29yZHNcIjogW1wiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0MVwiLCBcIlx1QzcyMFx1QzBBQ1x1QjJFOFx1QzVCNDJcIiwgXCJcdUM3MjBcdUMwQUNcdUIyRThcdUM1QjQzXCJdXG59XG5cbkpTT04gXHVENjE1XHVDMkREXHVDNzNDXHVCODVDXHVCOUNDIFx1Qzc1MVx1QjJGNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4gXHVCMkU0XHVCOTc4IFx1QzEyNFx1QkE4NVx1Qzc0MCBcdUQzRUNcdUQ1NjhcdUQ1NThcdUM5QzAgXHVCOUM4XHVDMTM4XHVDNjk0LmA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVNdWx0aXBsZVdvcmREZXRhaWxQcm9tcHQod29yZHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgd29yZExpc3QgPSB3b3Jkcy5qb2luKCcsICcpO1xuICAgICAgICByZXR1cm4gYFx1QjJFNFx1Qzc0QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0XHVCNEU0XHVDNUQwIFx1QjMwMFx1RDU1QyBcdUMwQzFcdUMxMzggXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QzgxNVx1RDY1NVx1RDU1QyBKU09OIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUM4MUNcdUFDRjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQ6ICR7d29yZExpc3R9XG5cblx1QzY5NFx1QUQ2Q1x1QzBBQ1x1RDU2RDpcbi0gXHVBQzAxIFx1QjJFOFx1QzVCNFx1QzVEMCBcdUIzMDBcdUQ1NzQgXHVCQzFDXHVDNzRDXHVBRTMwXHVENjM4IChJUEEgXHVENjE1XHVDMkREKSwgXHVENTVDXHVBRTAwIFx1QjczQlx1QjRFNCwgXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOFx1QUNGQyBcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVELCBcdUM3MjBcdUMwQUNcdUQ1NUMgXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUQzRUNcdUQ1Njhcbi0gXHVBQzAxIFx1QjczQlx1QkNDNFx1Qjg1QyAyLTNcdUFDMUNcdUM3NTggXHVDNjA4XHVCQjM4XHVDNzQ0IFx1QzgxQ1x1QUNGNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NFxuLSBKU09OIFx1RDYxNVx1QzJERFx1QjlDQyBcdUM3NTFcdUIyRjVcdUQ1NThcdUFDRTAgXHVCMkU0XHVCOTc4IFx1QzEyNFx1QkE4NVx1Qzc0MCBcdUQzRUNcdUQ1NjhcdUQ1NThcdUM5QzAgXHVCOUM4XHVDMTM4XHVDNjk0XG4tIFx1QkFBOFx1QjRFMCBcdUJCMzhcdUM3OTBcdUM1RjRcdUM3NDAgXHVDNzc0XHVDOTExIFx1QjUzMFx1QzYzNFx1RDQ1Q1x1Qjg1QyBcdUFDMTBcdUMyRjhcdUM4RkNcdUMxMzhcdUM2OTRcbi0gXHVCQzMwXHVDNUY0XHVBQ0ZDIFx1QUMxRFx1Q0NCNFx1QjI5NCBcdUM4MTVcdUQ2NTVcdUQ1NUMgSlNPTiBcdUJCMzhcdUJDOTVcdUM3NDQgXHVCNTMwXHVCOTc0XHVDMTM4XHVDNjk0XG5cblx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyREQ6XG5bXG4gIHtcbiAgICBcIndvcmRcIjogXCJcdUIyRThcdUM1QjQxXCIsXG4gICAgXCJwcm9udW5jaWF0aW9uXCI6IFwiL1x1QkMxQ1x1Qzc0Q1x1QUUzMFx1RDYzOC9cIixcbiAgICBcIm1lYW5pbmdzXCI6IFtcIlx1QjczQjFcIiwgXCJcdUI3M0IyXCJdLFxuICAgIFwiZXhhbXBsZXNcIjogW1xuICAgICAge1xuICAgICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDFcIixcbiAgICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDFcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAyXCIsXG4gICAgICAgIFwia29yZWFuXCI6IFwiXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAyXCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggM1wiLFxuICAgICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgM1wiXG4gICAgICB9XG4gICAgXSxcbiAgICBcInNpbWlsYXJXb3Jkc1wiOiBbXCJcdUM3MjBcdUMwQUNcdUIyRThcdUM1QjQxXCIsIFwiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0MlwiXVxuICB9XG5dXG5cblx1QzkxMVx1QzY5NDogSlNPTiBcdUQ2MTVcdUMyRERcdUI5Q0MgXHVDNzUxXHVCMkY1XHVENTU4XHVBQ0UwIFx1QjJFNFx1Qjk3OCBcdUQxNERcdUMyQTRcdUQyQjhcdUIyOTQgXHVEM0VDXHVENTY4XHVENTU4XHVDOUMwIFx1QjlDOFx1QzEzOFx1QzY5NC5gO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY2FsbExMTShwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5zZXR0aW5ncy5sbG1Qcm92aWRlcjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpdGNoIChwcm92aWRlcikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNhbGxPcGVuQUkocHJvbXB0KTtcbiAgICAgICAgICAgICAgICBjYXNlICdhbnRocm9waWMnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jYWxsQW50aHJvcGljKHByb21wdCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ29vZ2xlJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2FsbEdvb2dsZShwcm9tcHQpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1QzlDMFx1QzZEMFx1RDU1OFx1QzlDMCBcdUM1NEFcdUIyOTQgTExNIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc4NVx1QjJDOFx1QjJFNC4nIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY2FsbE9wZW5BSShwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlBUElDYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL2NoYXQvY29tcGxldGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuZ2V0Q3VycmVudEFwaUtleSgpfWBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMuc2V0dGluZ3MubGxtTW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogcHJvbXB0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLjMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3Rva2VuczogNDAwMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvckRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgJ09wZW5BSSBBUEkgXHVENjM4XHVDRDlDIFx1QzJFNFx1RDMyOCcgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1Qzc1MVx1QjJGNSBcdUIwQjRcdUM2QTlcdUM3NzQgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogY29udGVudCB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNhbGxBbnRocm9waWMocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPExMTVJlc3BvbnNlPiB7XG4gICAgICAgIC8vIE5vZGUuanMgXHVENjU4XHVBQ0JEXHVDNUQwXHVDMTFDXHVCOUNDIFx1QjNEOVx1Qzc5MVx1RDU1OFx1QjNDNFx1Qjg1RCBcdUNDOThcdUI5QUNcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAod2luZG93IGFzIGFueSk/LnByb2Nlc3M/LnR5cGUgPT09ICdyZW5kZXJlcicpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vYXBpLmFudGhyb3BpYy5jb20vdjEvbWVzc2FnZXMnLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5zZXR0aW5ncy5sbG1Nb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IDMwMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogcHJvbXB0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAneC1hcGkta2V5JzogdGhpcy5nZXRDdXJyZW50QXBpS2V5KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSByZXNwb25zZS5kYXRhLmNvbnRlbnRbMF0/LnRleHQ7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1Qzc1MVx1QjJGNSBcdUIwQjRcdUM2QTlcdUM3NzQgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogY29udGVudCB9O1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1QkUwQ1x1Qjc3Q1x1QzZCMFx1QzgwMCBcdUQ2NThcdUFDQkRcdUM1RDBcdUMxMUNcdUIyOTQgXHVDNTQ4XHVCMEI0IFx1QkE1NFx1QzJEQ1x1QzlDMCBcdUJDMThcdUQ2NThcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdBbnRocm9waWMgQVBJXHVCMjk0IFx1QkUwQ1x1Qjc3Q1x1QzZCMFx1QzgwMCBcdUQ2NThcdUFDQkRcdUM1RDBcdUMxMUMgXHVDOUMxXHVDODExIFx1RDYzOFx1Q0Q5Q1x1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUIzNzBcdUMyQTRcdUQwNkNcdUQxQjEgXHVDNTcxKE9ic2lkaWFuKVx1QzVEMFx1QzExQ1x1QjlDQyBcdUIzRDlcdUM3OTFcdUQ1NjlcdUIyQzhcdUIyRTQuJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY2FsbEdvb2dsZShwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlBUElDYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKGBodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzLyR7dGhpcy5zZXR0aW5ncy5sbG1Nb2RlbH06Z2VuZXJhdGVDb250ZW50P2tleT0ke3RoaXMuZ2V0Q3VycmVudEFwaUtleSgpfWAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHByb21wdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDQwMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCAnR29vZ2xlIEFQSSBcdUQ2MzhcdUNEOUMgXHVDMkU0XHVEMzI4JyB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGRhdGEuY2FuZGlkYXRlc1swXT8uY29udGVudD8ucGFydHNbMF0/LnRleHQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1Qzc1MVx1QjJGNSBcdUIwQjRcdUM2QTlcdUM3NzQgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogY29udGVudCB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHBhcnNlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcsIG9yaWdpbmFsV29yZDogc3RyaW5nKTogV29yZERldGFpbERhdGEge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSlNPTiBcdUM3NTFcdUIyRjVcdUM1RDBcdUMxMUMgSlNPTiBcdUJEODBcdUJEODRcdUI5Q0MgXHVDRDk0XHVDRDlDXG4gICAgICAgICAgICBjb25zdCBqc29uTWF0Y2ggPSByZXNwb25zZS5tYXRjaCgvXFx7W1xcc1xcU10qXFx9Lyk7XG4gICAgICAgICAgICBpZiAoIWpzb25NYXRjaCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSlNPTiBcdUQ2MTVcdUMyRERcdUM3NTggXHVDNzUxXHVCMkY1XHVDNzQ0IFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVDNjA4XHVCQjM4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUFDODBcdUM5OUQgXHVCQzBGIFx1QzgxNVx1QjlBQ1xuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGVkRXhhbXBsZXMgPSB0aGlzLnZhbGlkYXRlRXhhbXBsZXMoanNvbkRhdGEuZXhhbXBsZXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHdvcmQ6IGpzb25EYXRhLndvcmQgfHwgb3JpZ2luYWxXb3JkLFxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IGpzb25EYXRhLnByb251bmNpYXRpb24gfHwgJycsXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IGpzb25EYXRhLm1lYW5pbmdzIHx8IFtdLFxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB2YWxpZGF0ZWRFeGFtcGxlcyxcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IGpzb25EYXRhLnNpbWlsYXJXb3JkcyB8fCBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEpTT04gXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUJDMThcdUQ2NThcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgd29yZDogb3JpZ2luYWxXb3JkLFxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Qzc1OFx1QkJGOFx1Qjk3QyBcdUQzMENcdUMyRjFcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nXSxcbiAgICAgICAgICAgICAgICBleGFtcGxlczogW10sXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QzYwOFx1QkIzOCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVBQzgwXHVDOTlEIFx1QkMwRiBcdUM4MTVcdUI5QUNcbiAgICBwcml2YXRlIHZhbGlkYXRlRXhhbXBsZXMoZXhhbXBsZXM6IGFueVtdKTogeyBlbmdsaXNoOiBzdHJpbmc7IGtvcmVhbjogc3RyaW5nOyB9W10ge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXhhbXBsZXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWxpZGF0ZWRFeGFtcGxlczogeyBlbmdsaXNoOiBzdHJpbmc7IGtvcmVhbjogc3RyaW5nOyB9W10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgZXhhbXBsZSBvZiBleGFtcGxlcykge1xuICAgICAgICAgICAgaWYgKGV4YW1wbGUgJiYgdHlwZW9mIGV4YW1wbGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5nbGlzaCA9IGV4YW1wbGUuZW5nbGlzaCB8fCBleGFtcGxlLmVuZ2xpc2hfdGV4dCB8fCBleGFtcGxlLnRleHQgfHwgJyc7XG4gICAgICAgICAgICAgICAgY29uc3Qga29yZWFuID0gZXhhbXBsZS5rb3JlYW4gfHwgZXhhbXBsZS5rb3JlYW5fdGV4dCB8fCBleGFtcGxlLnRyYW5zbGF0aW9uIHx8ICcnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChlbmdsaXNoLnRyaW0oKSAmJiBrb3JlYW4udHJpbSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlZEV4YW1wbGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogZW5nbGlzaC50cmltKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46IGtvcmVhbi50cmltKClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRXhhbXBsZXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXJzZU11bHRpcGxlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcsIG9yaWdpbmFsV29yZHM6IHN0cmluZ1tdKTogV29yZERldGFpbERhdGFbXSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDEuIFx1QzY0NFx1QzgwNFx1RDU1QyBKU09OIFx1QkMzMFx1QzVGNFx1Qzc0NCBcdUNDM0VcdUM1NDRcdUJDRjRcdUFFMzBcbiAgICAgICAgICAgIGxldCBqc29uTWF0Y2ggPSByZXNwb25zZS5tYXRjaCgvXFxbW1xcc1xcU10qXFxdLyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XG4gICAgICAgICAgICAgICAgLy8gMi4gXHVDNjQ0XHVDODA0XHVENTVDIFx1QkMzMFx1QzVGNFx1Qzc3NCBcdUM1QzZcdUM3M0NcdUJBNzQgXHVBQzFDXHVCQ0M0IFx1QUMxRFx1Q0NCNFx1QjRFNFx1Qzc0NCBcdUNDM0VcdUM1NDRcdUMxMUMgXHVCQzMwXHVDNUY0XHVCODVDIFx1QjlDQ1x1QjRFNFx1QUUzMFxuICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdE1hdGNoZXMgPSByZXNwb25zZS5tYXRjaCgvXFx7W157fV0qXCJ3b3JkXCJbXnt9XSpcXH0vZyk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdE1hdGNoZXMgJiYgb2JqZWN0TWF0Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25TdHJpbmcgPSAnWycgKyBvYmplY3RNYXRjaGVzLmpvaW4oJywnKSArICddJztcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGpzb25EYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NKc29uRGF0YShqc29uRGF0YSwgb3JpZ2luYWxXb3Jkcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1RDMwQ1x1QzJGMSBcdUMyRTRcdUQzMjggXHVDMkRDIFx1QkIzNFx1QzJEQ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIDMuIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0XHVBRTRDXHVDOUMwIFx1Q0MzRVx1QUUzMFxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RDb21wbGV0ZU1hdGNoID0gcmVzcG9uc2UubWF0Y2goL1xcW1tcXHNcXFNdKlxcfSg/PVxccyokKS8pO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0Q29tcGxldGVNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBqc29uTWF0Y2ggPSBbbGFzdENvbXBsZXRlTWF0Y2hbMF0gKyAnXSddO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSlNPTiBcdUJDMzBcdUM1RjRcdUM3NDQgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyA0LiBKU09OIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzQgLSBcdUM4MTBcdUM5QzRcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMkRDXHVCM0M0XG4gICAgICAgICAgICBsZXQganNvbkRhdGE7XG4gICAgICAgICAgICBsZXQgcGFyc2VkTGVuZ3RoID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBqc29uRGF0YSA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBKU09OIFx1RDMwQ1x1QzJGMSBcdUMyRTRcdUQzMjggXHVDMkRDIFx1QzgxMFx1QzlDNFx1QzgwMSBcdUQzMENcdUMyRjEgXHVDMkRDXHVCM0M0XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gNS4gXHVDODEwXHVDOUM0XHVDODAxIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzQgLSBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0XHVCNEU0XHVCOUNDIFx1RDMwQ1x1QzJGMVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnBhcnNlSW5jcmVtZW50YWxKc29uKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyA2LiBKU09OIFx1QkNGNVx1QUQ2QyBcdUMyRENcdUIzQzRcbiAgICAgICAgICAgICAgICBjb25zdCBmaXhlZEpzb24gPSB0aGlzLmZpeEpzb25TdHJpbmcoanNvbk1hdGNoWzBdKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBqc29uRGF0YSA9IEpTT04ucGFyc2UoZml4ZWRKc29uKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChzZWNvbmRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pTT04gXHVEMzBDXHVDMkYxIFx1QkMwRiBcdUJDRjVcdUFENkMgXHVDMkU0XHVEMzI4Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbkRhdGEpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdUM3NTFcdUIyRjVcdUM3NzQgXHVCQzMwXHVDNUY0IFx1RDYxNVx1QzJERFx1Qzc3NCBcdUM1NDRcdUIyRDlcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NKc29uRGF0YShqc29uRGF0YSwgb3JpZ2luYWxXb3Jkcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzVFQ1x1QjdFQyBcdUIyRThcdUM1QjQgXHVDNzUxXHVCMkY1IFx1RDMwQ1x1QzJGMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNkQwXHVCQ0Y4IFx1Qzc1MVx1QjJGNTonLCByZXNwb25zZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQgXHVDMkRDIFx1QkU0OCBcdUFDQjBcdUFDRkMgXHVCQzE4XHVENjU4XG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxXb3Jkcy5tYXAod29yZCA9PiAoe1xuICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmQudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnJyxcbiAgICAgICAgICAgICAgICBtZWFuaW5nczogW10sXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtdLFxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogW11cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QzgxMFx1QzlDNFx1QzgwMSBKU09OIFx1RDMwQ1x1QzJGMSAtIFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjRcdUI0RTRcdUI5Q0MgXHVEMzBDXHVDMkYxXG4gICAgcHJpdmF0ZSBwYXJzZUluY3JlbWVudGFsSnNvbihyZXNwb25zZTogc3RyaW5nKTogV29yZERldGFpbERhdGFbXSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHM6IFdvcmREZXRhaWxEYXRhW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjRcdUI0RTRcdUM3NDQgXHVDQzNFXHVBRTMwIChcdUM2MDhcdUJCMzggXHVENTQ0XHVCNERDIFx1RDNFQ1x1RDU2OClcbiAgICAgICAgY29uc3Qgb2JqZWN0UmVnZXggPSAvXFx7W157fV0qXCJ3b3JkXCJbXnt9XSpcInByb251bmNpYXRpb25cIltee31dKlwibWVhbmluZ3NcIltee31dKlwiZXhhbXBsZXNcIltee31dKlwic2ltaWxhcldvcmRzXCJbXnt9XSpcXH0vZztcbiAgICAgICAgbGV0IG1hdGNoO1xuICAgICAgICBcbiAgICAgICAgd2hpbGUgKChtYXRjaCA9IG9iamVjdFJlZ2V4LmV4ZWMocmVzcG9uc2UpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvYmplY3REYXRhID0gSlNPTi5wYXJzZShtYXRjaFswXSk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdERhdGEgJiYgb2JqZWN0RGF0YS53b3JkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzID0gdGhpcy52YWxpZGF0ZUV4YW1wbGVzKG9iamVjdERhdGEuZXhhbXBsZXMpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZERhdGE6IFdvcmREZXRhaWxEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgd29yZDogb2JqZWN0RGF0YS53b3JkLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiBvYmplY3REYXRhLnByb251bmNpYXRpb24gfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogQXJyYXkuaXNBcnJheShvYmplY3REYXRhLm1lYW5pbmdzKSA/IG9iamVjdERhdGEubWVhbmluZ3MgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB2YWxpZGF0ZWRFeGFtcGxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogQXJyYXkuaXNBcnJheShvYmplY3REYXRhLnNpbWlsYXJXb3JkcykgPyBvYmplY3REYXRhLnNpbWlsYXJXb3JkcyA6IFtdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh3b3JkRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUFDMURcdUNDQjQgXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVCQjM0XHVDMkRDXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cblxuICAgIC8vIFdvcmREZXRhaWxEYXRhXHVCOTdDIFdvcmREYXRhXHVCODVDIFx1QkNDMFx1RDY1OFx1RDU1OFx1QjI5NCBcdUJBNTRcdUMxMUNcdUI0RENcbiAgICBjb252ZXJ0VG9Xb3JkRGF0YSh3b3JkRGV0YWlsOiBXb3JkRGV0YWlsRGF0YSk6IFdvcmREYXRhIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdvcmQ6IHdvcmREZXRhaWwud29yZCxcbiAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmREZXRhaWwucHJvbnVuY2lhdGlvbixcbiAgICAgICAgICAgIG1lYW5pbmdzOiB3b3JkRGV0YWlsLm1lYW5pbmdzLFxuICAgICAgICAgICAgc2ltaWxhcldvcmRzOiB3b3JkRGV0YWlsLnNpbWlsYXJXb3JkcyxcbiAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGV0YWlsLmV4YW1wbGVzXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSlNPTiBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDQzk4XHVCOUFDXG4gICAgcHJpdmF0ZSBwcm9jZXNzSnNvbkRhdGEoanNvbkRhdGE6IGFueVtdLCBvcmlnaW5hbFdvcmRzOiBzdHJpbmdbXSk6IFdvcmREZXRhaWxEYXRhW10ge1xuICAgICAgICBjb25zdCByZXN1bHRzOiBXb3JkRGV0YWlsRGF0YVtdID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YganNvbkRhdGEpIHtcbiAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiBpdGVtLndvcmQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWxpZGF0ZWRFeGFtcGxlcyA9IHRoaXMudmFsaWRhdGVFeGFtcGxlcyhpdGVtLmV4YW1wbGVzKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YTogV29yZERldGFpbERhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IGl0ZW0ud29yZC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiBpdGVtLnByb251bmNpYXRpb24gfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBBcnJheS5pc0FycmF5KGl0ZW0ubWVhbmluZ3MpID8gaXRlbS5tZWFuaW5ncyA6IFtdLFxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogdmFsaWRhdGVkRXhhbXBsZXMsXG4gICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogQXJyYXkuaXNBcnJheShpdGVtLnNpbWlsYXJXb3JkcykgPyBpdGVtLnNpbWlsYXJXb3JkcyA6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2god29yZERhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuXG4gICAgLy8gSlNPTiBcdUJCMzhcdUM3OTBcdUM1RjQgXHVCQ0Y1XHVBRDZDXG4gICAgcHJpdmF0ZSBmaXhKc29uU3RyaW5nKGpzb25TdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCBmaXhlZCA9IGpzb25TdHJpbmc7XG4gICAgICAgIFxuICAgICAgICAvLyAxLiBcdUJEODhcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0IFx1QzgxQ1x1QUM3MCAoXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzI3Q1x1RDQ1QyBcdUI0QTRcdUM3NTggXHVCRDg4XHVDNjQ0XHVDODA0XHVENTVDIFx1QkQ4MFx1QkQ4NClcbiAgICAgICAgY29uc3QgbGFzdENvbXBsZXRlT2JqZWN0ID0gZml4ZWQubWF0Y2goLy4qXFx9KD89LD9cXHMqJCkvKTtcbiAgICAgICAgaWYgKGxhc3RDb21wbGV0ZU9iamVjdCkge1xuICAgICAgICAgICAgZml4ZWQgPSBsYXN0Q29tcGxldGVPYmplY3RbMF0gKyAnXSc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIDIuIFx1QzkxMVx1QkNGNVx1QjQxQyBcdUMyN0NcdUQ0NUMgXHVDODFDXHVBQzcwXG4gICAgICAgIGZpeGVkID0gZml4ZWQucmVwbGFjZSgvLFxccyosL2csICcsJyk7XG4gICAgICAgIFxuICAgICAgICAvLyAzLiBcdUJDMzBcdUM1RjQgXHVCMDVEXHVDNzU4IFx1QzI3Q1x1RDQ1QyBcdUM4MUNcdUFDNzBcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8sXFxzKlxcXS9nLCAnXScpO1xuICAgICAgICBcbiAgICAgICAgLy8gNC4gXHVBQzFEXHVDQ0I0IFx1QjA1RFx1Qzc1OCBcdUMyN0NcdUQ0NUMgXHVDODFDXHVBQzcwXG4gICAgICAgIGZpeGVkID0gZml4ZWQucmVwbGFjZSgvLFxccypcXH0vZywgJ30nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDUuIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUIwQjRcdUM3NTggXHVDNzc0XHVDMkE0XHVDRjAwXHVDNzc0XHVENTA0XHVCNDE4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUI1MzBcdUM2MzRcdUQ0NUMgXHVDQzk4XHVCOUFDXG4gICAgICAgIGZpeGVkID0gZml4ZWQucmVwbGFjZSgvKD88IVxcXFwpXCIvZywgKG1hdGNoLCBvZmZzZXQpID0+IHtcbiAgICAgICAgICAgIC8vIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUIwQjRcdUJEODBcdUM3NTggXHVCNTMwXHVDNjM0XHVENDVDXHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFxuICAgICAgICAgICAgY29uc3QgYmVmb3JlID0gZml4ZWQuc3Vic3RyaW5nKDAsIG9mZnNldCk7XG4gICAgICAgICAgICBjb25zdCBxdW90ZUNvdW50ID0gKGJlZm9yZS5tYXRjaCgvXCIvZykgfHwgW10pLmxlbmd0aDtcbiAgICAgICAgICAgIHJldHVybiBxdW90ZUNvdW50ICUgMiA9PT0gMCA/IG1hdGNoIDogJ1xcXFxcIic7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZpeGVkO1xuICAgIH1cblxufSAiLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuLi8uLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XG5pbXBvcnQgeyBUVFNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvdHRzL1RUU0ludGVyZmFjZSc7XG5pbXBvcnQgeyBUVFNTZXJ2aWNlRmFjdG9yeSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL3R0cy9UVFNTZXJ2aWNlJztcbmltcG9ydCB7IFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLCBSZXZpZXdTZXNzaW9uIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9zZXJ2aWNlcy9TcGFjZWRSZXBldGl0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBSZXZpZXdSZXNwb25zZSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvYWxnb3JpdGhtcy9TcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtJztcblxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xuICAgIGN1cnJlbnRDYXJkSW5kZXggPSAwO1xuICAgIGNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdID0gW107XG4gICAgc2hvd0Fuc3dlciA9IGZhbHNlO1xuICAgIHByaXZhdGUga2V5ZG93bkhhbmRsZXI6ICgoZTogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHR0c1NlcnZpY2U6IFRUU1NlcnZpY2U7XG4gICAgcHJpdmF0ZSBzcGFjZWRSZXBldGl0aW9uU2VydmljZTogU3BhY2VkUmVwZXRpdGlvblNlcnZpY2U7XG4gICAgcHJpdmF0ZSBjdXJyZW50U2Vzc2lvbjogUmV2aWV3U2Vzc2lvbiB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMudHRzU2VydmljZSA9IFRUU1NlcnZpY2VGYWN0b3J5LmNyZWF0ZVRUU1NlcnZpY2UocGx1Z2luLnNldHRpbmdzKTtcbiAgICAgICAgdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZSA9IG5ldyBTcGFjZWRSZXBldGl0aW9uU2VydmljZSgpO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgLy8gXHVDODAwXHVDN0E1XHVCNDFDIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gICAgICAgIGNvbnN0IGFsbENhcmRzID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTcGFjZWQgUmVwZXRpdGlvbjogXHVCQ0Y1XHVDMkI1XHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU1QyBcdUNFNzRcdUI0RENcdUI0RTRcdUI5Q0MgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gICAgICAgIHRoaXMuY2FyZHMgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLmdldENhcmRzRm9yUmV2aWV3KGFsbENhcmRzKTtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5jYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd05vQ2FyZHNGb3JSZXZpZXcoYWxsQ2FyZHMubGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1QkNGNVx1QzJCNSBcdUMxMzhcdUMxNTggXHVDMkRDXHVDNzkxXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24gPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnN0YXJ0UmV2aWV3U2Vzc2lvbih0aGlzLmNhcmRzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUMyMUNcdUMxMUMgXHVDMTFFXHVBRTMwIChcdUMwQzggXHVDRTc0XHVCNERDXHVBQzAwIFx1QkEzQ1x1QzgwMCBcdUM2MjRcdUIzQzRcdUI4NUQgXHVDODcwXHVDODE1IFx1QUMwMFx1QjJBNSlcbiAgICAgICAgdGhpcy5zaHVmZmxlQ2FyZHMoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNob3dDYXJkKCk7XG4gICAgICAgIC8vIFx1RDBBNFx1QkNGNFx1QjREQyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCNEYxXHVCODVEXG4gICAgICAgIHRoaXMua2V5ZG93bkhhbmRsZXIgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5jb2RlID09PSAnU3BhY2UnIHx8IGUua2V5ID09PSAnICcpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDYXJkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09ICcxJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJldmlldygnaGFyZCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICcyJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJldmlldygnZ29vZCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICczJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJldmlldygnZWFzeScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleWRvd25IYW5kbGVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNodWZmbGVDYXJkcygpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2FyZHMubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgICAgICAgICAgW3RoaXMuY2FyZHNbaV0sIHRoaXMuY2FyZHNbal1dID0gW3RoaXMuY2FyZHNbal0sIHRoaXMuY2FyZHNbaV1dO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93Tm9Xb3Jkc01lc3NhZ2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2b2NhYnVsYXJ5LWxlYXJuaW5nLW1vZGFsJyk7XG5cbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxuICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmV2aWV3LW1vZGFsLWhlaWdodCcsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0fXZoYCk7XG5cbiAgICAgICAgY29uc3Qgbm9Xb3Jkc0VsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ25vLXdvcmRzLW1lc3NhZ2UnIH0pO1xuICAgICAgICBub1dvcmRzRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVENTU5XHVDMkI1XHVENTYwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQnIH0pO1xuICAgICAgICBub1dvcmRzRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTVcdUM1RDAgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1QyBcdUQ2QzQgXHVCMkU0XHVDMkRDIFx1QzJEQ1x1QjNDNFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBub1dvcmRzRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFQlx1QUUzMCcgfSk7XG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZENsYXNzKCdjbG9zZS1idXR0b24nKTtcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd05vQ2FyZHNGb3JSZXZpZXcodG90YWxDYXJkczogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2b2NhYnVsYXJ5LWxlYXJuaW5nLW1vZGFsJyk7XG5cbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxuICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmV2aWV3LW1vZGFsLWhlaWdodCcsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0fXZoYCk7XG5cbiAgICAgICAgY29uc3Qgbm9SZXZpZXdFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICduby1yZXZpZXctbWVzc2FnZScgfSk7XG4gICAgICAgIG5vUmV2aWV3RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVEODNDXHVERjg5IFx1QzYyNFx1QjI5OFx1Qzc1OCBcdUJDRjVcdUMyQjUgXHVDNjQ0XHVCOENDIScgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodG90YWxDYXJkcyA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZS5jYWxjdWxhdGVTdGF0aXN0aWNzKHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxXb3JkcygpKTtcbiAgICAgICAgICAgIG5vUmV2aWV3RWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdUNEMUQgJHt0b3RhbENhcmRzfVx1QUMxQ1x1Qzc1OCBcdUIyRThcdUM1QjQgXHVDOTExIFx1QzYyNFx1QjI5OCBcdUJDRjVcdUMyQjVcdUQ1NjAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUJDRjVcdUMyQjUgXHVDNjA4XHVDODE1IFx1QzgxNVx1QkNGNFxuICAgICAgICAgICAgY29uc3QgbmV4dER1ZUNhcmRzID0gdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZS5nZXRDYXJkc0R1ZUluRGF5cyhcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKSwgXG4gICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChuZXh0RHVlQ2FyZHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgbm9SZXZpZXdFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGBcdUIwQjRcdUM3N0MgXHVCQ0Y1XHVDMkI1IFx1QzYwOFx1QzgxNTogJHtuZXh0RHVlQ2FyZHN9XHVBQzFDIFx1QjJFOFx1QzVCNGAgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1RDU1OVx1QzJCNSBcdUQxQjVcdUFDQzRcbiAgICAgICAgICAgIGNvbnN0IHN0YXRzRWwgPSBub1Jldmlld0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0dWR5LXN0YXRzJyB9KTtcbiAgICAgICAgICAgIHN0YXRzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVENTU5XHVDMkI1IFx1RDYwNFx1RDY2OScgfSk7XG4gICAgICAgICAgICBzdGF0c0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgXHUyMDIyIFx1QzBDOCBcdUIyRThcdUM1QjQ6ICR7c3RhdHMub3ZlcmFsbC5uZXdDYXJkc31cdUFDMUNgIH0pO1xuICAgICAgICAgICAgc3RhdHNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFx1MjAyMiBcdUQ1NTlcdUMyQjUgXHVDOTExOiAke3N0YXRzLm92ZXJhbGwubGVhcm5pbmdDYXJkc31cdUFDMUNgIH0pO1xuICAgICAgICAgICAgc3RhdHNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFx1MjAyMiBcdUM2NDRcdUI4Q0M6ICR7c3RhdHMub3ZlcmFsbC5tYXR1cmVDYXJkc31cdUFDMUNgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9SZXZpZXdFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1QzVEMCBcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTVDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gbm9SZXZpZXdFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkVCXHVBRTMwJyB9KTtcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkQ2xhc3MoJ2Nsb3NlLWJ1dHRvbicpO1xuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93Q2FyZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENhcmRJbmRleCA+PSB0aGlzLmNhcmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGlvbk1lc3NhZ2UoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYXJkID0gdGhpcy5jYXJkc1t0aGlzLmN1cnJlbnRDYXJkSW5kZXhdO1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xuXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNVx1QjQxQyBcdUIxOTJcdUM3NzRcdUI5N0MgQ1NTIFx1QkNDMFx1QzIxOFx1Qjg1QyBcdUM4MDFcdUM2QTlcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xuXG4gICAgICAgIGNvbnN0IGNhcmRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndm9jYWJ1bGFyeS1jYXJkJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QzBDMVx1QjJFOCBcdUM4MTVcdUJDRjQgXHVDNjAxXHVDNUVEIChib29rIFx1QzgxNVx1QkNGNFx1QzY0MCBcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDIFx1QkM4NFx1RDJCQ1x1Qzc0NCBcdUQ1NjhcdUFFRDggXHVCQzMwXHVDRTU4KVxuICAgICAgICBjb25zdCB0b3BJbmZvQ29udGFpbmVyID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjYXJkLXRvcC1pbmZvJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBib29rIFx1QzgxNVx1QkNGNCBcdUQ0NUNcdUMyREMgKFx1QzY3Q1x1Q0FCRClcbiAgICAgICAgY29uc3QgY3VycmVudEJvb2sgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0Q3VycmVudEJvb2soKTtcbiAgICAgICAgaWYgKGN1cnJlbnRCb29rKSB7XG4gICAgICAgICAgICBjb25zdCBib29rSW5mb0VsID0gdG9wSW5mb0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdib29rLWluZm8tZGlzcGxheScgfSk7XG4gICAgICAgICAgICBib29rSW5mb0VsLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiBjdXJyZW50Qm9vay5uYW1lLFxuICAgICAgICAgICAgICAgIGNsczogJ2N1cnJlbnQtYm9vay1uYW1lJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1Q0U3NFx1QjREQyBcdUMwQURcdUM4MUMgXHVCQzg0XHVEMkJDIChcdUM2MjRcdUI5NzhcdUNBQkQpXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRvcEluZm9Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQycsXG4gICAgICAgICAgICBjbHM6ICdjYXJkLWRlbGV0ZS1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZURlbGV0ZUNhcmQoKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUM5QzRcdUQ1ODlcdUI5NjAgXHVENDVDXHVDMkRDXG4gICAgICAgIGNvbnN0IHByb2dyZXNzRWwgPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWluZGljYXRvcicgfSk7XG4gICAgICAgIHByb2dyZXNzRWwudGV4dENvbnRlbnQgPSBgJHt0aGlzLmN1cnJlbnRDYXJkSW5kZXggKyAxfSAvICR7dGhpcy5jYXJkcy5sZW5ndGh9YDtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUQ0NUNcdUMyREMgKFRUUyBcdUJDODRcdUQyQkMgXHVEM0VDXHVENTY4KVxuICAgICAgICBjb25zdCB3b3JkQ29udGFpbmVyID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIGNvbnN0IHdvcmRFbCA9IHdvcmRDb250YWluZXIuY3JlYXRlRWwoJ2gxJywgeyBjbHM6ICdjYXJkLXdvcmQnIH0pO1xuICAgICAgICBpZiAoY3VycmVudENhcmQucHJvbnVuY2lhdGlvbiAmJiBjdXJyZW50Q2FyZC5wcm9udW5jaWF0aW9uLnRyaW0oKSkge1xuICAgICAgICAgICAgd29yZEVsLmlubmVySFRNTCA9IGAke2N1cnJlbnRDYXJkLndvcmR9IDxzcGFuIGNsYXNzPVwicHJvbnVuY2lhdGlvblwiPlske2N1cnJlbnRDYXJkLnByb251bmNpYXRpb259XTwvc3Bhbj5gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd29yZEVsLnRleHRDb250ZW50ID0gY3VycmVudENhcmQud29yZDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1QkMxQ1x1Qzc0QyBcdUM3QUNcdUMwREQgXHVCQzg0XHVEMkJDXG4gICAgICAgIGNvbnN0IHdvcmRQbGF5QnV0dG9uID0gd29yZENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIGNsczogJ3R0cy1wbGF5LWJ1dHRvbiB3b3JkLXBsYXktYnV0dG9uJyxcbiAgICAgICAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnXHVCMkU4XHVDNUI0IFx1QkMxQ1x1Qzc0QyBcdUI0RTNcdUFFMzAnIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHdvcmRQbGF5QnV0dG9uLmlubmVySFRNTCA9ICdcdUQ4M0RcdUREMEEnO1xuICAgICAgICB3b3JkUGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudHRzU2VydmljZS5zcGVha1dvcmQoY3VycmVudENhcmQud29yZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTRcbiAgICAgICAgaWYgKGN1cnJlbnRDYXJkLnNpbWlsYXJXb3JkcyAmJiBjdXJyZW50Q2FyZC5zaW1pbGFyV29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc2ltaWxhclNlY3Rpb24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NpbWlsYXItd29yZHMtc2VjdGlvbicgfSk7XG4gICAgICAgICAgICBzaW1pbGFyU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0XHVCNEU0OicgfSk7XG4gICAgICAgICAgICBjb25zdCBzaW1pbGFyTGlzdCA9IHNpbWlsYXJTZWN0aW9uLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnc2ltaWxhci13b3Jkcy1saXN0JyB9KTtcbiAgICAgICAgICAgIGN1cnJlbnRDYXJkLnNpbWlsYXJXb3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgICAgICAgICAgIHNpbWlsYXJMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogd29yZCB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDNjA4XHVCQjM4XHVCNEU0IChcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVBQzAwXHVDODM4XHVDNjI4IFx1QzYwOFx1QkIzOCBcdUMwQUNcdUM2QTkpXG4gICAgICAgIGlmIChjdXJyZW50Q2FyZC5leGFtcGxlcyAmJiBjdXJyZW50Q2FyZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBleGFtcGxlc1NlY3Rpb24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGVzLXNlY3Rpb24nIH0pO1xuICAgICAgICAgICAgZXhhbXBsZXNTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzYwOFx1QkIzOFx1QjRFNDonIH0pO1xuICAgICAgICAgICAgY3VycmVudENhcmQuZXhhbXBsZXMuZm9yRWFjaCgoZXhhbXBsZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGFtcGxlQ29udGFpbmVyID0gZXhhbXBsZXNTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGUtY29udGFpbmVyJyB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IChUVFMgXHVCQzg0XHVEMkJDIFx1RDNFQ1x1RDU2OClcbiAgICAgICAgICAgICAgICBjb25zdCBleGFtcGxlVGV4dENvbnRhaW5lciA9IGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS10ZXh0LWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5nbGlzaEV4YW1wbGUgPSBleGFtcGxlVGV4dENvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogZXhhbXBsZS5lbmdsaXNoIH0pO1xuICAgICAgICAgICAgICAgIGVuZ2xpc2hFeGFtcGxlLmFkZENsYXNzKCdlbmdsaXNoLWV4YW1wbGUnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdUM2MDhcdUJCMzggXHVCQzFDXHVDNzRDIFx1QzdBQ1x1QzBERCBcdUJDODRcdUQyQkNcbiAgICAgICAgICAgICAgICBjb25zdCBleGFtcGxlUGxheUJ1dHRvbiA9IGV4YW1wbGVUZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICd0dHMtcGxheS1idXR0b24gZXhhbXBsZS1wbGF5LWJ1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnXHVDNjA4XHVCQjM4IFx1QkMxQ1x1Qzc0QyBcdUI0RTNcdUFFMzAnIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBleGFtcGxlUGxheUJ1dHRvbi5pbm5lckhUTUwgPSAnXHVEODNEXHVERDBBJztcbiAgICAgICAgICAgICAgICBleGFtcGxlUGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnNwZWFrRXhhbXBsZShleGFtcGxlLmVuZ2xpc2gpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgKFx1QzgxNVx1QjJGNSBcdUQ2NTVcdUM3NzggXHVENkM0XHVDNUQwXHVCOUNDIFx1RDQ1Q1x1QzJEQylcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93QW5zd2VyICYmIGV4YW1wbGUua29yZWFuICYmIGV4YW1wbGUua29yZWFuLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrb3JlYW5FeGFtcGxlID0gZXhhbXBsZUNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogZXhhbXBsZS5rb3JlYW4gfSk7XG4gICAgICAgICAgICAgICAgICAgIGtvcmVhbkV4YW1wbGUuYWRkQ2xhc3MoJ2tvcmVhbi1leGFtcGxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdUM2MDhcdUJCMzhcdUM3NzQgXHVDNUM2XHVDNzQ0IFx1QjU0QyBcdUFFMzBcdUJDRjggXHVDNjA4XHVCQjM4IFx1RDQ1Q1x1QzJEQ1xuICAgICAgICAgICAgY29uc3QgZXhhbXBsZXNTZWN0aW9uID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlcy1zZWN0aW9uJyB9KTtcbiAgICAgICAgICAgIGV4YW1wbGVzU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzhcdUI0RTQ6JyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVDb250YWluZXIgPSBleGFtcGxlc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlVGV4dENvbnRhaW5lciA9IGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS10ZXh0LWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICBjb25zdCBlbmdsaXNoRXhhbXBsZSA9IGV4YW1wbGVUZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiBgVGhpcyBpcyBhbiBleGFtcGxlIHNlbnRlbmNlIHdpdGggdGhlIHdvcmQgXCIke2N1cnJlbnRDYXJkLndvcmR9XCIuYCBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZW5nbGlzaEV4YW1wbGUuYWRkQ2xhc3MoJ2VuZ2xpc2gtZXhhbXBsZScpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUFFMzBcdUJDRjggXHVDNjA4XHVCQjM4IFx1QkMxQ1x1Qzc0QyBcdUM3QUNcdUMwREQgXHVCQzg0XHVEMkJDXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlUGxheUJ1dHRvbiA9IGV4YW1wbGVUZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgICAgIGNsczogJ3R0cy1wbGF5LWJ1dHRvbiBleGFtcGxlLXBsYXktYnV0dG9uJyxcbiAgICAgICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1QzYwOFx1QkIzOCBcdUJDMUNcdUM3NEMgXHVCNEUzXHVBRTMwJyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGV4YW1wbGVQbGF5QnV0dG9uLmlubmVySFRNTCA9ICdcdUQ4M0RcdUREMEEnO1xuICAgICAgICAgICAgZXhhbXBsZVBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnNwZWFrRXhhbXBsZShgVGhpcyBpcyBhbiBleGFtcGxlIHNlbnRlbmNlIHdpdGggdGhlIHdvcmQgXCIke2N1cnJlbnRDYXJkLndvcmR9XCIuYCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAoXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OCBcdUQ2QzRcdUM1RDBcdUI5Q0MgXHVENDVDXHVDMkRDKVxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0Fuc3dlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtvcmVhbkV4YW1wbGUgPSBleGFtcGxlQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYFwiJHtjdXJyZW50Q2FyZC53b3JkfVwiXHVCNzdDXHVCMjk0IFx1QjJFOFx1QzVCNFx1QUMwMCBcdUQzRUNcdUQ1NjhcdUI0MUMgXHVDNjA4XHVCQjM4XHVDNzg1XHVCMkM4XHVCMkU0LmAgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAga29yZWFuRXhhbXBsZS5hZGRDbGFzcygna29yZWFuLWV4YW1wbGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1QzgxNVx1QjJGNSBcdUQ2NTVcdUM3NzggXHVCQzg0XHVEMkJDXG4gICAgICAgIGlmICghdGhpcy5zaG93QW5zd2VyKSB7XG4gICAgICAgICAgICBjb25zdCBjaGVja0J1dHRvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzgxNVx1QjJGNSBcdUQ2NTVcdUM3NzhcdUQ1NThcdUFFMzAnIH0pO1xuICAgICAgICAgICAgY2hlY2tCdXR0b24uYWRkQ2xhc3MoJ2NoZWNrLWFuc3dlci1idXR0b24nKTtcbiAgICAgICAgICAgIGNoZWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q2FyZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdUM4MTVcdUIyRjUgXHVENDVDXHVDMkRDXG4gICAgICAgICAgICBjb25zdCBhbnN3ZXJTZWN0aW9uID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdhbnN3ZXItc2VjdGlvbicgfSk7XG4gICAgICAgICAgICBhbnN3ZXJTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QjczQjonIH0pO1xuICAgICAgICAgICAgY29uc3QgbWVhbmluZ3NMaXN0ID0gYW5zd2VyU2VjdGlvbi5jcmVhdGVFbCgndWwnLCB7IGNsczogJ21lYW5pbmdzLWxpc3QnIH0pO1xuICAgICAgICAgICAgY3VycmVudENhcmQubWVhbmluZ3MuZm9yRWFjaChtZWFuaW5nID0+IHtcbiAgICAgICAgICAgICAgICBtZWFuaW5nc0xpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBtZWFuaW5nIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFx1QkNGNVx1QzJCNSBcdUJDODRcdUQyQkNcdUI0RTRcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmV2aWV3QnV0dG9ucyhjYXJkQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUmV2aWV3QnV0dG9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHJldmlld1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmV2aWV3LWJ1dHRvbnMtc2VjdGlvbicgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgbmV4dCByZXZpZXcgaW50ZXJ2YWxzIGZvciBjdXJyZW50IGNhcmRcbiAgICAgICAgY29uc3QgY3VycmVudENhcmQgPSB0aGlzLmNhcmRzW3RoaXMuY3VycmVudENhcmRJbmRleF07XG4gICAgICAgIGNvbnN0IGludGVydmFscyA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UuZ2V0TmV4dFJldmlld0ludGVydmFscyhjdXJyZW50Q2FyZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBIYXJkIGJ1dHRvbiB3aXRoIGludGVydmFsXG4gICAgICAgIGNvbnN0IGhhcmRCdXR0b24gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nKTtcbiAgICAgICAgaGFyZEJ1dHRvbi5hZGRDbGFzcygncmV2aWV3LWJ1dHRvbicsICdoYXJkLWJ1dHRvbicpO1xuICAgICAgICBjb25zdCBoYXJkQ29udGVudCA9IGhhcmRCdXR0b24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLWNvbnRlbnQnIH0pO1xuICAgICAgICBoYXJkQ29udGVudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1x1QzVCNFx1QjgyNFx1QzZDMCcsIGNsczogJ2J1dHRvbi1sYWJlbCcgfSk7XG4gICAgICAgIGhhcmRDb250ZW50LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBpbnRlcnZhbHMuaGFyZC5kaXNwbGF5VGV4dCwgY2xzOiAnYnV0dG9uLWludGVydmFsJyB9KTtcbiAgICAgICAgaGFyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdoYXJkJykpO1xuXG4gICAgICAgIC8vIEdvb2QgYnV0dG9uIHdpdGggaW50ZXJ2YWxcbiAgICAgICAgY29uc3QgZ29vZEJ1dHRvbiA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicpO1xuICAgICAgICBnb29kQnV0dG9uLmFkZENsYXNzKCdyZXZpZXctYnV0dG9uJywgJ2dvb2QtYnV0dG9uJyk7XG4gICAgICAgIGNvbnN0IGdvb2RDb250ZW50ID0gZ29vZEJ1dHRvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tY29udGVudCcgfSk7XG4gICAgICAgIGdvb2RDb250ZW50LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnXHVDODhCXHVDNzRDJywgY2xzOiAnYnV0dG9uLWxhYmVsJyB9KTtcbiAgICAgICAgZ29vZENvbnRlbnQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGludGVydmFscy5nb29kLmRpc3BsYXlUZXh0LCBjbHM6ICdidXR0b24taW50ZXJ2YWwnIH0pO1xuICAgICAgICBnb29kQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2dvb2QnKSk7XG5cbiAgICAgICAgLy8gRWFzeSBidXR0b24gd2l0aCBpbnRlcnZhbFxuICAgICAgICBjb25zdCBlYXN5QnV0dG9uID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJyk7XG4gICAgICAgIGVhc3lCdXR0b24uYWRkQ2xhc3MoJ3Jldmlldy1idXR0b24nLCAnZWFzeS1idXR0b24nKTtcbiAgICAgICAgY29uc3QgZWFzeUNvbnRlbnQgPSBlYXN5QnV0dG9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1jb250ZW50JyB9KTtcbiAgICAgICAgZWFzeUNvbnRlbnQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdcdUMyNkNcdUM2QzAnLCBjbHM6ICdidXR0b24tbGFiZWwnIH0pO1xuICAgICAgICBlYXN5Q29udGVudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogaW50ZXJ2YWxzLmVhc3kuZGlzcGxheVRleHQsIGNsczogJ2J1dHRvbi1pbnRlcnZhbCcgfSk7XG4gICAgICAgIGVhc3lCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnZWFzeScpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVJldmlldyhkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpIHtcbiAgICAgICAgY29uc3QgY3VycmVudENhcmQgPSB0aGlzLmNhcmRzW3RoaXMuY3VycmVudENhcmRJbmRleF07XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBTcGFjZWRSZXBldGl0aW9uU2VydmljZSBoYXMgYW4gYWN0aXZlIHNlc3Npb25cbiAgICAgICAgY29uc3QgYWN0aXZlU2Vzc2lvbiA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UuZ2V0Q3VycmVudFNlc3Npb24oKTtcbiAgICAgICAgaWYgKCFhY3RpdmVTZXNzaW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyBhY3RpdmUgcmV2aWV3IHNlc3Npb24gaW4gU3BhY2VkUmVwZXRpdGlvblNlcnZpY2UnKTtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBzdGFydCBhIG5ldyBzZXNzaW9uIHdpdGggcmVtYWluaW5nIGNhcmRzXG4gICAgICAgICAgICBjb25zdCByZW1haW5pbmdDYXJkcyA9IHRoaXMuY2FyZHMuc2xpY2UodGhpcy5jdXJyZW50Q2FyZEluZGV4KTtcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmdDYXJkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbiA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2Uuc3RhcnRSZXZpZXdTZXNzaW9uKHJlbWFpbmluZ0NhcmRzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gcmVtYWluaW5nIGNhcmRzIHRvIHJldmlldycpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29udmVydCBkaWZmaWN1bHR5IHRvIFJldmlld1Jlc3BvbnNlIGVudW1cbiAgICAgICAgY29uc3QgcmV2aWV3UmVzcG9uc2UgPSBkaWZmaWN1bHR5IGFzIFJldmlld1Jlc3BvbnNlO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFByb2Nlc3MgcmV2aWV3IHVzaW5nIHNwYWNlZCByZXBldGl0aW9uIHNlcnZpY2VcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UucHJvY2Vzc1JldmlldyhjdXJyZW50Q2FyZCwgcmV2aWV3UmVzcG9uc2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2FyZCBpbiBkYXRhYmFzZSB3aXRoIG5ldyBzY2hlZHVsZSBpbmZvcm1hdGlvblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmRXaXRoU2NoZWR1bGUoXG4gICAgICAgICAgICAgICAgcmVzdWx0LnVwZGF0ZWRDYXJkLndvcmQsIFxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICAgICAgcmVzdWx0LnVwZGF0ZWRDYXJkLnNjaGVkdWxlSW5mb1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1Q0U3NFx1QjREQ1x1Qjg1QyBcdUM3NzRcdUIzRDlcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCsrO1xuICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNob3dDYXJkKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3Npbmcgc3BhY2VkIHJlcGV0aXRpb24gcmV2aWV3OicsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIG9sZCBtZXRob2QgaWYgc3BhY2VkIHJlcGV0aXRpb24gZmFpbHNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkKGN1cnJlbnRDYXJkLndvcmQsIGRpZmZpY3VsdHkpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4Kys7XG4gICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudENhcmQgPSB0aGlzLmNhcmRzW3RoaXMuY3VycmVudENhcmRJbmRleF07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQycsXG4gICAgICAgICAgICBgXCIke2N1cnJlbnRDYXJkLndvcmR9XCIgXHVCMkU4XHVDNUI0XHVCOTdDIFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz9cXG5cXG5cdUM3NzQgXHVDNzkxXHVDNUM1XHVDNzQwIFx1QjQxOFx1QjNDQ1x1QjlCNCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmAsXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUNcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnJlbW92ZVdvcmQoY3VycmVudENhcmQud29yZCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVCMkU4XHVDNUI0IFx1QkFBOVx1Qjg1RFx1QzVEMFx1QzExQ1x1QjNDNCBcdUM4MUNcdUFDNzBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkcy5zcGxpY2UodGhpcy5jdXJyZW50Q2FyZEluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUIzNTQgXHVDNzc0XHVDMEMxIFx1QzVDNlx1QzczQ1x1QkE3NCBcdUM2NDRcdUI4Q0MgXHVENjU0XHVCQTc0XHVDNzNDXHVCODVDXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGlvbk1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1Qzc3OFx1QjM3MVx1QzJBNFx1QUMwMCBcdUIyRThcdUM1QjQgXHVCQUE5XHVCODVEIFx1QkM5NFx1QzcwNFx1Qjk3QyBcdUJDOTdcdUM1QjRcdUIwOThcdUJBNzQgXHVDODcwXHVDODE1XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkSW5kZXggPj0gdGhpcy5jYXJkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCA9IHRoaXMuY2FyZHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1QjJFOFx1QzVCNCBcdUQ0NUNcdUMyRENcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQyBcdUM5MTEgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd0NvbXBsZXRpb25NZXNzYWdlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xuXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNVx1QjQxQyBcdUIxOTJcdUM3NzRcdUI5N0MgQ1NTIFx1QkNDMFx1QzIxOFx1Qjg1QyBcdUM4MDFcdUM2QTlcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xuXG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjb21wbGV0aW9uLW1lc3NhZ2UnIH0pO1xuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVENTU5XHVDMkI1IFx1QzY0NFx1QjhDQyEnIH0pO1xuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBcdUM2MjRcdUIyOTggJHt0aGlzLmNhcmRzLmxlbmd0aH1cdUFDMUNcdUM3NTggXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNVx1Qzc0NCBcdUM2NDRcdUI4Q0NcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuYCB9KTtcblxuICAgICAgICBjb25zdCByZXN0YXJ0QnV0dG9uID0gY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRTRcdUMyREMgXHVENTU5XHVDMkI1XHVENTU4XHVBRTMwJyB9KTtcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRDbGFzcygncmVzdGFydC1idXR0b24nKTtcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnIH0pO1xuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRDbGFzcygnY2xvc2UtYnV0dG9uJyk7XG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5rZXlkb3duSGFuZGxlcikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleWRvd25IYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMua2V5ZG93bkhhbmRsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIFx1QUMwNFx1QjJFOFx1RDU1QyBcdUQ2NTVcdUM3NzggXHVCQUE4XHVCMkVDIFx1RDA3NFx1Qjc5OFx1QzJBNFxuY2xhc3MgQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIG9uQ29uZmlybTogKCkgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0aXRsZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIG9uQ29uZmlybTogKCkgPT4gdm9pZCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMub25Db25maXJtID0gb25Db25maXJtO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2NvbmZpcm0tbW9kYWwnKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLnRpdGxlLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlLCBjbHM6ICdtb2RhbC1tZXNzYWdlJyB9KTtcblxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1RDY1NVx1Qzc3OCcsXG4gICAgICAgICAgICBjbHM6ICdjb25maXJtLWJ1dHRvbiBwcmltYXJ5J1xuICAgICAgICB9KTtcbiAgICAgICAgY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25Db25maXJtKCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVDREU4XHVDMThDJyxcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59ICIsICJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBUVFNTZXJ2aWNlIH0gZnJvbSAnLi9UVFNJbnRlcmZhY2UnO1xuaW1wb3J0IHsgQXVkaW9NYW5hZ2VyLCBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc2hhcmVkL0F1ZGlvTWFuYWdlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdHRlcmJveFRUU1NldHRpbmdzIHtcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIGFwaVVybDogc3RyaW5nO1xuICAgIHZvaWNlOiBzdHJpbmc7XG4gICAgZXhhZ2dlcmF0aW9uOiBudW1iZXI7XG4gICAgY2ZnV2VpZ2h0OiBudW1iZXI7XG4gICAgdGVtcGVyYXR1cmU6IG51bWJlcjtcbiAgICBhdXRvUGxheTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaGF0dGVyYm94VFRTUmVxdWVzdCB7XG4gICAgaW5wdXQ6IHN0cmluZztcbiAgICB2b2ljZT86IHN0cmluZztcbiAgICBleGFnZ2VyYXRpb24/OiBudW1iZXI7XG4gICAgY2ZnX3dlaWdodD86IG51bWJlcjtcbiAgICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIENoYXR0ZXJib3hUVFNTZXJ2aWNlIGltcGxlbWVudHMgVFRTU2VydmljZSB7XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogQ2hhdHRlcmJveFRUU1NldHRpbmdzO1xuICAgIHByaXZhdGUgYXVkaW9NYW5hZ2VyOiBBdWRpb01hbmFnZXI7XG4gICAgcHJpdmF0ZSBuZXR3b3JrTWFuYWdlcjogTmV0d29ya1Jlc291cmNlTWFuYWdlcjtcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBDaGF0dGVyYm94VFRTU2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLmVuYWJsZWQgfHwgZmFsc2UsXG4gICAgICAgICAgICBhcGlVcmw6IHNldHRpbmdzLmFwaVVybCB8fCAnaHR0cDovL2xvY2FsaG9zdDo0MTIzJyxcbiAgICAgICAgICAgIHZvaWNlOiBzZXR0aW5ncy52b2ljZSB8fCAnYWxsb3knLFxuICAgICAgICAgICAgZXhhZ2dlcmF0aW9uOiBzZXR0aW5ncy5leGFnZ2VyYXRpb24gfHwgMC43LFxuICAgICAgICAgICAgY2ZnV2VpZ2h0OiBzZXR0aW5ncy5jZmdXZWlnaHQgfHwgMC40LFxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHNldHRpbmdzLnRlbXBlcmF0dXJlIHx8IDAuOSxcbiAgICAgICAgICAgIGF1dG9QbGF5OiBzZXR0aW5ncy5hdXRvUGxheSB8fCBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlciA9IEF1ZGlvTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyID0gTmV0d29ya1Jlc291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RUUyBcdUFFMzBcdUIyQTVcdUM3NzQgXHVCRTQ0XHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDNUI0IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGV4dCB8fCB0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVFRTOiBcdUJFNDggXHVEMTREXHVDMkE0XHVEMkI4XHVDNzg1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUM3QUNcdUMwREQgXHVDOTExXHVDNzc4IFx1QzYyNFx1QjUxNFx1QzYyNFx1QUMwMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVDOTExXHVDOUMwXG4gICAgICAgICAgICB0aGlzLnN0b3BTcGVha2luZygpO1xuXG4gICAgICAgICAgICAvLyBDaGF0dGVyYm94IFRUUyBBUEkgXHVENjM4XHVDRDlDXG4gICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSBhd2FpdCB0aGlzLmNhbGxDaGF0dGVyYm94QVBJKHRleHQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsYXlBdWRpb0Jsb2IoYXVkaW9CbG9iKTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2hhdHRlcmJveCBUVFMgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RUUyBcdUM3NENcdUMxMzEgXHVDMEREXHVDMTMxXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0XHVBQzAwIFx1QzJFNFx1RDU4OSBcdUM5MTFcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc3BlYWtXb3JkKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXdvcmQgfHwgd29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUzogXHVCRTQ4IFx1QjJFOFx1QzVCNFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuc3BlYWtUZXh0KHdvcmQpO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrRXhhbXBsZShleGFtcGxlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFleGFtcGxlIHx8IGV4YW1wbGUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnNwZWFrVGV4dChleGFtcGxlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNhbGxDaGF0dGVyYm94QVBJKHRleHQ6IHN0cmluZyk6IFByb21pc2U8QmxvYj4ge1xuICAgICAgICAvLyBcdUQxNERcdUMyQTRcdUQyQjggXHVBRTM4XHVDNzc0IFx1QzgxQ1x1RDU1QyAoQ2hhdHRlcmJveCBcdUFEOENcdUM3QTU6IDMwMDBcdUM3OTApXG4gICAgICAgIGNvbnN0IHRydW5jYXRlZFRleHQgPSB0ZXh0Lmxlbmd0aCA+IDMwMDAgPyB0ZXh0LnN1YnN0cmluZygwLCAzMDAwKSA6IHRleHQ7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdEJvZHk6IENoYXR0ZXJib3hUVFNSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgaW5wdXQ6IHRydW5jYXRlZFRleHQsXG4gICAgICAgICAgICB2b2ljZTogdGhpcy5zZXR0aW5ncy52b2ljZSxcbiAgICAgICAgICAgIGV4YWdnZXJhdGlvbjogdGhpcy5zZXR0aW5ncy5leGFnZ2VyYXRpb24sXG4gICAgICAgICAgICBjZmdfd2VpZ2h0OiB0aGlzLnNldHRpbmdzLmNmZ1dlaWdodCxcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnNldHRpbmdzLnRlbXBlcmF0dXJlXG4gICAgICAgIH07XG5cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuc2V0dGluZ3MuYXBpVXJsfS92MS9hdWRpby9zcGVlY2hgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYXR0ZXJib3ggVFRTIEFQSSBcdUM2MjRcdUI5NTg6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgICAgICAgaWYgKCFjb250ZW50VHlwZSB8fCAhY29udGVudFR5cGUuaW5jbHVkZXMoJ2F1ZGlvJykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVDNjA4XHVDMEMxXHVENTU4XHVDOUMwIFx1QkFCQlx1RDU1QyBcdUM3NTFcdUIyRjUgXHVENjE1XHVDMkREOiAke2NvbnRlbnRUeXBlfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHBsYXlBdWRpb0Jsb2IoYXVkaW9CbG9iOiBCbG9iKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFx1Qzc3NFx1QzgwNCBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDODE1XHVCOUFDXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnNyYyA9ICcnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFx1QzBDOCBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNUQ4XHVCOUFDXHVCQTNDXHVEMkI4IFx1QzBERFx1QzEzMVxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50ID0gbmV3IEF1ZGlvKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQmxvYlx1Qzc0NCBVUkxcdUI4NUMgXHVCQ0MwXHVENjU4XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQuc3JjID0gYXVkaW9Vcmw7XG5cbiAgICAgICAgICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzEyNFx1QzgxNVxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50Lm9uZW5kZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50Lm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQub25sb2FkZWRkYXRhID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnBsYXkoKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVCODVDXHVCNERDIFx1QzJEQ1x1Qzc5MVxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LmxvYWQoKTtcblxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdG9wU3BlYWtpbmcoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVVJMIFx1QzgxNVx1QjlBQ1xuICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9FbGVtZW50LnNyYyAmJiB0aGlzLmF1ZGlvRWxlbWVudC5zcmMuc3RhcnRzV2l0aCgnYmxvYjonKSkge1xuICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5hdWRpb0VsZW1lbnQuc3JjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQuc3JjID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jdXJyZW50QXVkaW9Db250ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRBdWRpb0NvbnRleHQuY2xvc2UoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEF1ZGlvQ29udGV4dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc1BhdXNlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmF1ZGlvRWxlbWVudCB8fCB0aGlzLmF1ZGlvRWxlbWVudC5wYXVzZWQ7XG4gICAgfVxuXG4gICAgcmVzdW1lKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQgJiYgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5wbGF5KCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUFDMUMgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVBQzFDXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCAmJiAhdGhpcy5hdWRpb0VsZW1lbnQucGF1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5wYXVzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPENoYXR0ZXJib3hUVFNTZXR0aW5ncz4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICAvLyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4XG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0ZXN0VGV4dCA9ICdIZWxsbywgdGhpcyBpcyBhIHRlc3QuJztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FsbENoYXR0ZXJib3hBUEkodGVzdFRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaGF0dGVyYm94IFRUUyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdUMwQUNcdUM2QTkgXHVBQzAwXHVCMkE1XHVENTVDIFx1Qzc0Q1x1QzEzMSBcdUJBQTlcdUI4NUQgKENoYXR0ZXJib3hcdUIyOTQgY3VzdG9tIHZvaWNlIFx1QzlDMFx1QzZEMClcbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogc3RyaW5nW10ge1xuICAgICAgICAvLyBPcGVuQUkgXHVENjM4XHVENjU4IFx1Qzc0Q1x1QzEzMVx1QjRFNCArIFx1Q0VFNFx1QzJBNFx1RDE0MCBcdUM3NENcdUMxMzEgXHVDOUMwXHVDNkQwXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAnYWxsb3knLFxuICAgICAgICAgICAgJ2VjaG8nLCBcbiAgICAgICAgICAgICdmYWJsZScsXG4gICAgICAgICAgICAnb255eCcsXG4gICAgICAgICAgICAnbm92YScsXG4gICAgICAgICAgICAnc2hpbW1lcicsXG4gICAgICAgICAgICAnY3VzdG9tJyAvLyBcdUMwQUNcdUM2QTlcdUM3OTAgXHVDODE1XHVDNzU4IFx1Qzc0Q1x1QzEzMVxuICAgICAgICBdO1xuICAgIH1cblxuICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMxMjRcdUM4MTUgXHVDODE1XHVCQ0Y0IFx1QkMxOFx1RDY1OFxuICAgIGdldFNldHRpbmdzKCk6IENoYXR0ZXJib3hUVFNTZXR0aW5ncyB7XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuc2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICAvLyBcdUI5QUNcdUMxOENcdUMyQTQgXHVDODE1XHVCOUFDXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdG9wU3BlYWtpbmcoKTtcbiAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmN1cnJlbnRBdWRpb0NvbnRleHQgPSBudWxsO1xuICAgIH1cbn0iLCAiLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QjlBQ1x1QzE4Q1x1QzJBNCBcdUFEMDBcdUI5QUMgXHVCQzBGIFx1QzgxNVx1QjlBQ1xuXG5leHBvcnQgY2xhc3MgQXVkaW9NYW5hZ2VyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQXVkaW9NYW5hZ2VyO1xuICAgIHByaXZhdGUgYWN0aXZlQXVkaW9FbGVtZW50czogU2V0PEhUTUxBdWRpb0VsZW1lbnQ+ID0gbmV3IFNldCgpO1xuICAgIHByaXZhdGUgYXVkaW9Qb29sOiBIVE1MQXVkaW9FbGVtZW50W10gPSBbXTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1heFBvb2xTaXplID0gMTA7XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cblxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBBdWRpb01hbmFnZXIge1xuICAgICAgICBpZiAoIUF1ZGlvTWFuYWdlci5pbnN0YW5jZSkge1xuICAgICAgICAgICAgQXVkaW9NYW5hZ2VyLmluc3RhbmNlID0gbmV3IEF1ZGlvTWFuYWdlcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBdWRpb01hbmFnZXIuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzY5NFx1QzE4QyBcdUMwRERcdUMxMzEgXHVCQzBGIFx1QUQwMFx1QjlBQ1xuICAgIGNyZWF0ZUF1ZGlvKHNyYzogc3RyaW5nKTogSFRNTEF1ZGlvRWxlbWVudCB7XG4gICAgICAgIGxldCBhdWRpbzogSFRNTEF1ZGlvRWxlbWVudDtcblxuICAgICAgICAvLyBcdUQ0ODBcdUM1RDBcdUMxMUMgXHVDN0FDXHVDMEFDXHVDNkE5IFx1QUMwMFx1QjJBNVx1RDU1QyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDIFx1Q0MzRVx1QUUzMFxuICAgICAgICBjb25zdCBhdmFpbGFibGVBdWRpbyA9IHRoaXMuYXVkaW9Qb29sLmZpbmQoYSA9PiBhLmVuZGVkIHx8IGEucGF1c2VkKTtcbiAgICAgICAgaWYgKGF2YWlsYWJsZUF1ZGlvKSB7XG4gICAgICAgICAgICBhdWRpbyA9IGF2YWlsYWJsZUF1ZGlvO1xuICAgICAgICAgICAgYXVkaW8uc3JjID0gc3JjO1xuICAgICAgICAgICAgYXVkaW8uY3VycmVudFRpbWUgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXVkaW8gPSBuZXcgQXVkaW8oc3JjKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBBdWRpb0VsZW1lbnQoYXVkaW8pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmFkZChhdWRpbyk7XG4gICAgICAgIHJldHVybiBhdWRpbztcbiAgICB9XG5cbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDIFx1QzEyNFx1QzgxNVxuICAgIHByaXZhdGUgc2V0dXBBdWRpb0VsZW1lbnQoYXVkaW86IEhUTUxBdWRpb0VsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVDNzkwXHVCM0Q5IFx1QzgxNVx1QjlBQyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4XG4gICAgICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbGVhc2VBdWRpbyhhdWRpbyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBjbGVhbnVwLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgY2xlYW51cCwgeyBvbmNlOiB0cnVlIH0pO1xuXG4gICAgICAgIC8vIFx1QkE1NFx1QkFBOFx1QjlBQyBcdUIyMDRcdUMyMTggXHVCQzI5XHVDOUMwXHVCOTdDIFx1QzcwNFx1RDU1QyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzNcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmhhcyhhdWRpbykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2VBdWRpbyhhdWRpbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDMwMDAwKTsgLy8gMzBcdUNEMDggXHVENkM0IFx1Qzc5MFx1QjNEOSBcdUM4MTVcdUI5QUNcbiAgICB9XG5cbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIChcdUM1NDhcdUM4MDRcdUQ1NUMgXHVCNzk4XHVEMzdDKVxuICAgIGFzeW5jIHBsYXlBdWRpbyhzcmM6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhdWRpbyA9IHRoaXMuY3JlYXRlQXVkaW8oc3JjKTtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBhdWRpby5wbGF5KCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnJlbGVhc2VBdWRpbyhhdWRpbyk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM2OTRcdUMxOEMgXHVENTc0XHVDODFDXG4gICAgcmVsZWFzZUF1ZGlvKGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmhhcyhhdWRpbykpIHJldHVybjtcblxuICAgICAgICAvLyBcdUM3QUNcdUMwREQgXHVDOTExXHVDNzc0XHVCQTc0IFx1QzgxNVx1QzlDMFxuICAgICAgICBpZiAoIWF1ZGlvLnBhdXNlZCkge1xuICAgICAgICAgICAgYXVkaW8ucGF1c2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1RDY1Q1x1QzEzMSBcdUJBQTlcdUI4NURcdUM1RDBcdUMxMUMgXHVDODFDXHVBQzcwXG4gICAgICAgIHRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5kZWxldGUoYXVkaW8pO1xuXG4gICAgICAgIC8vIFx1RDQ4MFx1QzVEMCBcdUJDMThcdUQ2NTggKFx1RDA2Q1x1QUUzMCBcdUM4MUNcdUQ1NUMpXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvUG9vbC5sZW5ndGggPCB0aGlzLm1heFBvb2xTaXplKSB7XG4gICAgICAgICAgICBhdWRpby5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgICAgICAgYXVkaW8ubG9hZCgpOyAvLyBcdUJBNTRcdUJBQThcdUI5QUMgXHVENTc0XHVDODFDXG4gICAgICAgICAgICB0aGlzLmF1ZGlvUG9vbC5wdXNoKGF1ZGlvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1RDQ4MFx1Qzc3NCBcdUFDMDBcdUI0REQgXHVDQzJDIFx1QUNCRFx1QzZCMCBcdUM2NDRcdUM4MDRcdUQ3ODggXHVDODE1XHVCOUFDXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VBdWRpbyhhdWRpbyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDIFx1QzY0NFx1QzgwNCBcdUM4MTVcdUI5QUNcbiAgICBwcml2YXRlIGRpc3Bvc2VBdWRpbyhhdWRpbzogSFRNTEF1ZGlvRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBhdWRpby5wYXVzZSgpO1xuICAgICAgICBhdWRpby5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgICBhdWRpby5sb2FkKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUJBQThcdUI0RTAgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzBcbiAgICAgICAgY29uc3QgbmV3QXVkaW8gPSBhdWRpby5jbG9uZU5vZGUoKSBhcyBIVE1MQXVkaW9FbGVtZW50O1xuICAgICAgICBhdWRpby5wYXJlbnROb2RlPy5yZXBsYWNlQ2hpbGQobmV3QXVkaW8sIGF1ZGlvKTtcbiAgICB9XG5cbiAgICAvLyBcdUJBQThcdUI0RTAgXHVENjVDXHVDMTMxIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM4MTVcdUM5QzBcbiAgICBzdG9wQWxsQXVkaW8oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5mb3JFYWNoKGF1ZGlvID0+IHtcbiAgICAgICAgICAgIGlmICghYXVkaW8ucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgYXVkaW8ucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHVCQUE4XHVCNEUwIFx1QjlBQ1x1QzE4Q1x1QzJBNCBcdUM4MTVcdUI5QUNcbiAgICBjbGVhbnVwKCk6IHZvaWQge1xuICAgICAgICAvLyBcdUJBQThcdUI0RTAgXHVENjVDXHVDMTMxIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM4MTVcdUI5QUNcbiAgICAgICAgdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmZvckVhY2goYXVkaW8gPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlQXVkaW8oYXVkaW8pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmNsZWFyKCk7XG5cbiAgICAgICAgLy8gXHVENDgwXHVDNzU4IFx1QkFBOFx1QjRFMCBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDODE1XHVCOUFDXG4gICAgICAgIHRoaXMuYXVkaW9Qb29sLmZvckVhY2goYXVkaW8gPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlQXVkaW8oYXVkaW8pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hdWRpb1Bvb2wuY2xlYXIoKTtcbiAgICB9XG5cbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMEMxXHVEMERDIFx1QzgxNVx1QkNGNFxuICAgIGdldFN0YXR1cygpOiB7IGFjdGl2ZTogbnVtYmVyOyBwb29sZWQ6IG51bWJlciB9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjdGl2ZTogdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLnNpemUsXG4gICAgICAgICAgICBwb29sZWQ6IHRoaXMuYXVkaW9Qb29sLmxlbmd0aFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QjlBQ1x1QzE4Q1x1QzJBNCBcdUFEMDBcdUI5QUNcbmV4cG9ydCBjbGFzcyBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogTmV0d29ya1Jlc291cmNlTWFuYWdlcjtcbiAgICBwcml2YXRlIGFib3J0Q29udHJvbGxlcnM6IFNldDxBYm9ydENvbnRyb2xsZXI+ID0gbmV3IFNldCgpO1xuICAgIHByaXZhdGUgYWN0aXZlUmVxdWVzdHM6IE1hcDxzdHJpbmcsIEFib3J0Q29udHJvbGxlcj4gPSBuZXcgTWFwKCk7XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cblxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyIHtcbiAgICAgICAgaWYgKCFOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyLmluc3RhbmNlKSB7XG4gICAgICAgICAgICBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyLmluc3RhbmNlID0gbmV3IE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTmV0d29ya1Jlc291cmNlTWFuYWdlci5pbnN0YW5jZTtcbiAgICB9XG5cbiAgICAvLyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVDNjk0XHVDQ0FEIFx1QzBERFx1QzEzMSAoXHVDNzkwXHVCM0Q5IFx1QzgxNVx1QjlBQyBcdUQzRUNcdUQ1NjgpXG4gICAgY3JlYXRlUmVxdWVzdChpZGVudGlmaWVyPzogc3RyaW5nKTogQWJvcnRDb250cm9sbGVyIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5hZGQoY29udHJvbGxlcik7XG4gICAgICAgIFxuICAgICAgICBpZiAoaWRlbnRpZmllcikge1xuICAgICAgICAgICAgLy8gXHVCM0Q5XHVDNzdDXHVENTVDIFx1QzJERFx1QkNDNFx1Qzc5MFx1Qzc1OCBcdUFFMzBcdUM4NzQgXHVDNjk0XHVDQ0FEIFx1Q0RFOFx1QzE4Q1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDb250cm9sbGVyID0gdGhpcy5hY3RpdmVSZXF1ZXN0cy5nZXQoaWRlbnRpZmllcik7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdDb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzLmRlbGV0ZShleGlzdGluZ0NvbnRyb2xsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hY3RpdmVSZXF1ZXN0cy5zZXQoaWRlbnRpZmllciwgY29udHJvbGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUM3OTBcdUIzRDkgXHVDODE1XHVCOUFDXHVCOTdDIFx1QzcwNFx1RDU1QyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzMgXHVDMTI0XHVDODE1XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWJvcnRDb250cm9sbGVycy5oYXMoY29udHJvbGxlcikpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhbnVwKGNvbnRyb2xsZXIsIGlkZW50aWZpZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCA2MDAwMCk7IC8vIDYwXHVDRDA4IFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDM1xuXG4gICAgICAgIHJldHVybiBjb250cm9sbGVyO1xuICAgIH1cblxuICAgIC8vIFx1QzY5NFx1Q0NBRCBcdUM2NDRcdUI4Q0MgXHVDMkRDIFx1QzgxNVx1QjlBQ1xuICAgIGNvbXBsZXRlUmVxdWVzdChjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsIGlkZW50aWZpZXI/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jbGVhbnVwKGNvbnRyb2xsZXIsIGlkZW50aWZpZXIpO1xuICAgIH1cblxuICAgIC8vIFx1RDJCOVx1QzgxNSBcdUM2OTRcdUNDQUQgXHVDREU4XHVDMThDXG4gICAgY2FuY2VsUmVxdWVzdChpZGVudGlmaWVyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuYWN0aXZlUmVxdWVzdHMuZ2V0KGlkZW50aWZpZXIpO1xuICAgICAgICBpZiAoY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgdGhpcy5jbGVhbnVwKGNvbnRyb2xsZXIsIGlkZW50aWZpZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVCMEI0XHVCRDgwIFx1QzgxNVx1QjlBQyBcdUI4NUNcdUM5QzFcbiAgICBwcml2YXRlIGNsZWFudXAoY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyLCBpZGVudGlmaWVyPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5kZWxldGUoY29udHJvbGxlcik7XG4gICAgICAgIGlmIChpZGVudGlmaWVyKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVJlcXVlc3RzLmRlbGV0ZShpZGVudGlmaWVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QkFBOFx1QjRFMCBcdUQ2NUNcdUMxMzEgXHVDNjk0XHVDQ0FEIFx1Q0RFOFx1QzE4Q1xuICAgIGNhbmNlbEFsbFJlcXVlc3RzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlcnMuZm9yRWFjaChjb250cm9sbGVyID0+IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5jbGVhcigpO1xuICAgICAgICB0aGlzLmFjdGl2ZVJlcXVlc3RzLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgLy8gRmV0Y2ggXHVCNzk4XHVEMzdDIChcdUM3OTBcdUIzRDkgXHVDODE1XHVCOUFDIFx1RDNFQ1x1RDU2OClcbiAgICBhc3luYyBmZXRjaChcbiAgICAgICAgdXJsOiBzdHJpbmcsIFxuICAgICAgICBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9LCBcbiAgICAgICAgaWRlbnRpZmllcj86IHN0cmluZyxcbiAgICAgICAgdGltZW91dDogbnVtYmVyID0gMzAwMDBcbiAgICApOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSB0aGlzLmNyZWF0ZVJlcXVlc3QoaWRlbnRpZmllcik7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgfSwgdGltZW91dCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlUmVxdWVzdChjb250cm9sbGVyLCBpZGVudGlmaWVyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFudXAoY29udHJvbGxlciwgaWRlbnRpZmllcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMwQzFcdUQwREMgXHVDODE1XHVCQ0Y0XG4gICAgZ2V0U3RhdHVzKCk6IHsgYWN0aXZlOiBudW1iZXI7IGlkZW50aWZpZWQ6IG51bWJlciB9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjdGl2ZTogdGhpcy5hYm9ydENvbnRyb2xsZXJzLnNpemUsXG4gICAgICAgICAgICBpZGVudGlmaWVkOiB0aGlzLmFjdGl2ZVJlcXVlc3RzLnNpemVcbiAgICAgICAgfTtcbiAgICB9XG59IiwgImltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRUU1NlcnZpY2UgfSBmcm9tICcuL1RUU0ludGVyZmFjZSc7XG5pbXBvcnQgeyBBdWRpb01hbmFnZXIsIE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9zaGFyZWQvQXVkaW9NYW5hZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVDbG91ZFRUU1NldHRpbmdzIHtcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIGFwaUtleTogc3RyaW5nO1xuICAgIHZvaWNlOiBzdHJpbmc7XG4gICAgbGFuZ3VhZ2VDb2RlOiBzdHJpbmc7XG4gICAgc3BlYWtpbmdSYXRlOiBudW1iZXI7XG4gICAgcGl0Y2g6IG51bWJlcjtcbiAgICBhdXRvUGxheTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVDbG91ZFRUU1JlcXVlc3Qge1xuICAgIGlucHV0OiB7XG4gICAgICAgIHRleHQ6IHN0cmluZztcbiAgICB9O1xuICAgIHZvaWNlOiB7XG4gICAgICAgIGxhbmd1YWdlQ29kZTogc3RyaW5nO1xuICAgICAgICBuYW1lPzogc3RyaW5nO1xuICAgICAgICBzc21sR2VuZGVyPzogJ01BTEUnIHwgJ0ZFTUFMRScgfCAnTkVVVFJBTCc7XG4gICAgfTtcbiAgICBhdWRpb0NvbmZpZzoge1xuICAgICAgICBhdWRpb0VuY29kaW5nOiAnTVAzJyB8ICdMSU5FQVIxNicgfCAnT0dHX09QVVMnO1xuICAgICAgICBzcGVha2luZ1JhdGU/OiBudW1iZXI7XG4gICAgICAgIHBpdGNoPzogbnVtYmVyO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR29vZ2xlQ2xvdWRUVFNSZXNwb25zZSB7XG4gICAgYXVkaW9Db250ZW50OiBzdHJpbmc7IC8vIEJhc2U2NCBlbmNvZGVkIGF1ZGlvXG59XG5cbmV4cG9ydCBjbGFzcyBHb29nbGVDbG91ZFRUU1NlcnZpY2UgaW1wbGVtZW50cyBUVFNTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHNldHRpbmdzOiBHb29nbGVDbG91ZFRUU1NldHRpbmdzO1xuICAgIHByaXZhdGUgYXVkaW9NYW5hZ2VyOiBBdWRpb01hbmFnZXI7XG4gICAgcHJpdmF0ZSBuZXR3b3JrTWFuYWdlcjogTmV0d29ya1Jlc291cmNlTWFuYWdlcjtcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBHb29nbGVDbG91ZFRUU1NldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBlbmFibGVkOiBzZXR0aW5ncy5lbmFibGVkIHx8IGZhbHNlLFxuICAgICAgICAgICAgYXBpS2V5OiBzZXR0aW5ncy5hcGlLZXkgfHwgJycsXG4gICAgICAgICAgICB2b2ljZTogc2V0dGluZ3Mudm9pY2UgfHwgJ2VuLVVTLUpvdXJuZXktRicsXG4gICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHNldHRpbmdzLmxhbmd1YWdlQ29kZSB8fCAnZW4tVVMnLFxuICAgICAgICAgICAgc3BlYWtpbmdSYXRlOiBzZXR0aW5ncy5zcGVha2luZ1JhdGUgfHwgMS4wLFxuICAgICAgICAgICAgcGl0Y2g6IHNldHRpbmdzLnBpdGNoIHx8IDAuMCxcbiAgICAgICAgICAgIGF1dG9QbGF5OiBzZXR0aW5ncy5hdXRvUGxheSB8fCBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlciA9IEF1ZGlvTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyID0gTmV0d29ya1Jlc291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RUUyBcdUFFMzBcdUIyQTVcdUM3NzQgXHVCRTQ0XHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDNUI0IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hcGlLZXkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0dvb2dsZSBDbG91ZCBUVFMgQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUQxNERcdUMyQTRcdUQyQjhcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zdG9wU3BlYWtpbmcoKTtcblxuICAgICAgICAgICAgY29uc3QgYXVkaW9EYXRhID0gYXdhaXQgdGhpcy5jYWxsR29vZ2xlQ2xvdWRBUEkodGV4dCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsYXlBdWRpb0RhdGEoYXVkaW9EYXRhKTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIENsb3VkIFRUUyBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnVFRTIFx1Qzc0Q1x1QzEzMSBcdUMwRERcdUMxMzFcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0XHVDNjQwIFx1Qzc3OFx1RDEzMFx1QjEzNyBcdUM1RjBcdUFDQjBcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc3BlYWtXb3JkKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXdvcmQgfHwgd29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUzogXHVCRTQ4IFx1QjJFOFx1QzVCNFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuc3BlYWtUZXh0KHdvcmQpO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrRXhhbXBsZShleGFtcGxlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFleGFtcGxlIHx8IGV4YW1wbGUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnNwZWFrVGV4dChleGFtcGxlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNhbGxHb29nbGVDbG91ZEFQSSh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCB0cnVuY2F0ZWRUZXh0ID0gdGV4dC5sZW5ndGggPiA1MDAwID8gdGV4dC5zdWJzdHJpbmcoMCwgNTAwMCkgOiB0ZXh0O1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBHb29nbGVDbG91ZFRUU1JlcXVlc3QgPSB7XG4gICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRydW5jYXRlZFRleHRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2b2ljZToge1xuICAgICAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogdGhpcy5zZXR0aW5ncy5sYW5ndWFnZUNvZGUsXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5zZXR0aW5ncy52b2ljZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1ZGlvQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgYXVkaW9FbmNvZGluZzogJ01QMycsXG4gICAgICAgICAgICAgICAgc3BlYWtpbmdSYXRlOiB0aGlzLnNldHRpbmdzLnNwZWFraW5nUmF0ZSxcbiAgICAgICAgICAgICAgICBwaXRjaDogdGhpcy5zZXR0aW5ncy5waXRjaFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm5ldHdvcmtNYW5hZ2VyLmZldGNoKFxuICAgICAgICAgICAgYGh0dHBzOi8vdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tL3YxL3RleHQ6c3ludGhlc2l6ZT9rZXk9JHt0aGlzLnNldHRpbmdzLmFwaUtleX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGBnb29nbGUtdHRzLSR7RGF0ZS5ub3coKX1gLCAvLyBcdUFDRTBcdUM3MjAgXHVDMkREXHVCQ0M0XHVDNzkwXG4gICAgICAgICAgICAxMDAwMCAvLyAxMFx1Q0QwOCBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzNcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLmdldERldGFpbGVkRXJyb3JNZXNzYWdlKHJlc3BvbnNlLnN0YXR1cywgZXJyb3JEYXRhKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YTogR29vZ2xlQ2xvdWRUVFNSZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIGRhdGEuYXVkaW9Db250ZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RGV0YWlsZWRFcnJvck1lc3NhZ2Uoc3RhdHVzOiBudW1iZXIsIGVycm9yRGF0YTogYW55KTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGVycm9yRGF0YT8uZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZXJyb3JEYXRhLmVycm9yO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBUElcdUFDMDAgXHVDQzI4XHVCMkU4XHVCNDFDIFx1QUNCRFx1QzZCMCAoNDAzIFBFUk1JU1NJT05fREVOSUVEIHdpdGggQVBJX0tFWV9TRVJWSUNFX0JMT0NLRUQpXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDMgJiYgZXJyb3IuZGV0YWlscz8uc29tZSgoZGV0YWlsOiBhbnkpID0+IFxuICAgICAgICAgICAgICAgIGRldGFpbC5yZWFzb24gPT09ICdBUElfS0VZX1NFUlZJQ0VfQkxPQ0tFRCcgfHwgXG4gICAgICAgICAgICAgICAgZGV0YWlsWydAdHlwZSddPy5pbmNsdWRlcygnRXJyb3JJbmZvJykgJiYgZGV0YWlsLnJlYXNvbiA9PT0gJ0FQSV9LRVlfU0VSVklDRV9CTE9DS0VEJ1xuICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnR29vZ2xlIENsb3VkIFRleHQtdG8tU3BlZWNoIEFQSVx1QUMwMCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LiBHb29nbGUgQ2xvdWQgQ29uc29sZVx1QzVEMFx1QzExQyBUZXh0LXRvLVNwZWVjaCBBUElcdUI5N0MgXHVENjVDXHVDMTMxXHVENjU0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFQSSBcdUQwQTQgXHVBRDAwXHVCODI4IFx1QzYyNFx1Qjk1OFx1QjRFNFxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdBUEkga2V5IG5vdCB2YWxpZCcpIHx8IGVycm9yLmNvZGUgPT09ICdJTlZBTElEX0FSR1VNRU5UJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTRcdUI5N0MgXHVCMkU0XHVDMkRDIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3F1b3RhJykgfHwgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ1FVT1RBX0VYQ0VFREVEJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NzQgXHVDRDA4XHVBQ0ZDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NDQgXHVENjU1XHVDNzc4XHVENTU4XHVBQzcwXHVCMDk4IFx1QzY5NFx1QUUwOFx1QzgxQ1x1Qjk3QyBcdUJDQzBcdUFDQkRcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUM4MTFcdUFERkNcdUM3NzQgXHVBQzcwXHVCRDgwXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0IFx1QUQ4Q1x1RDU1Q1x1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVDNzc4XHVDOTlEIFx1QzYyNFx1Qjk1OCAoNDAxKVxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgQVBJIFx1RDBBNCBcdUM3NzhcdUM5OURcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVDNjk0XHVDQ0FEIFx1QzYyNFx1Qjk1OCAoNDAwKVxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUM2OTRcdUNDQURcdUM3NzQgXHVDNzk4XHVCQUJCXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUM3NENcdUMxMzEgXHVDMTI0XHVDODE1XHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDMEFDXHVDNkE5IFx1QkQ4OFx1QUMwMCAoNTAzKVxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNTAzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIFx1QzExQ1x1QkU0NFx1QzJBNFx1QUMwMCBcdUM3N0NcdUMyRENcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEFDXHVDNkE5XHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QzdBMFx1QzJEQyBcdUQ2QzQgXHVCMkU0XHVDMkRDIFx1QzJEQ1x1QjNDNFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gYEdvb2dsZSBDbG91ZCBUVFMgQVBJIFx1QzYyNFx1Qjk1OCAoJHtzdGF0dXN9KTogJHtlcnJvci5tZXNzYWdlIHx8ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTgnfWA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBgR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNjI0XHVCOTU4OiAke3N0YXR1c30gXHVDMEMxXHVEMERDIFx1Q0Y1NFx1QjREQ2A7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwbGF5QXVkaW9EYXRhKGJhc2U2NEF1ZGlvOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQXVkaW9NYW5hZ2VyXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU1QyBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERFxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IHRoaXMuYmFzZTY0VG9CbG9iKGJhc2U2NEF1ZGlvLCAnYXVkaW8vbXAzJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW8gPSB0aGlzLmF1ZGlvTWFuYWdlci5jcmVhdGVBdWRpbyhhdWRpb1VybCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb01hbmFnZXIucmVsZWFzZUF1ZGlvKGF1ZGlvKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgYXVkaW8ub25lbmRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGF1ZGlvLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGF1ZGlvLm9ubG9hZGVkZGF0YSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW8ucGxheSgpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzMgXHVDMTI0XHVDODE1ICgzMFx1Q0QwOClcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdWRpby5lbmRlZCAmJiAhYXVkaW8ucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzJEQ1x1QUMwNCBcdUNEMDhcdUFDRkMnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAzMDAwMCk7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBiYXNlNjRUb0Jsb2IoYmFzZTY0OiBzdHJpbmcsIG1pbWVUeXBlOiBzdHJpbmcpOiBCbG9iIHtcbiAgICAgICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NCk7XG4gICAgICAgIGNvbnN0IGJ5dGVOdW1iZXJzID0gbmV3IEFycmF5KGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBieXRlTnVtYmVyc1tpXSA9IGJ5dGVDaGFyYWN0ZXJzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVOdW1iZXJzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtieXRlQXJyYXldLCB7IHR5cGU6IG1pbWVUeXBlIH0pO1xuICAgIH1cblxuICAgIHN0b3BTcGVha2luZygpOiB2b2lkIHtcbiAgICAgICAgLy8gQXVkaW9NYW5hZ2VyXHVCOTdDIFx1RDFCNVx1RDU3NCBcdUJBQThcdUI0RTAgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzgxNVx1QzlDMFxuICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlci5zdG9wQWxsQXVkaW8oKTtcbiAgICB9XG5cbiAgICBpc1BhdXNlZCgpOiBib29sZWFuIHtcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1RDY1Q1x1QzEzMSBcdUM2MjRcdUI1MTRcdUM2MjRcdUFDMDAgXHVDNzg4XHVCMjk0XHVDOUMwIFx1RDY1NVx1Qzc3OFxuICAgICAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmF1ZGlvTWFuYWdlci5nZXRTdGF0dXMoKTtcbiAgICAgICAgcmV0dXJuIHN0YXR1cy5hY3RpdmUgPT09IDA7XG4gICAgfVxuXG4gICAgcmVzdW1lKCk6IHZvaWQge1xuICAgICAgICAvLyBBdWRpb01hbmFnZXJcdUIyOTQgXHVBQzFDXHVCQ0M0IFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM2OTRcdUMxOENcdUI5N0MgXHVBRDAwXHVCOUFDXHVENTU4XHVCQkMwXHVCODVDIFxuICAgICAgICAvLyBcdUM1RUNcdUFFMzBcdUMxMUNcdUIyOTQgXHVDMEM4XHVCODVDXHVDNkI0IFx1QzY5NFx1Q0NBRFx1QzczQ1x1Qjg1QyBcdUNDOThcdUI5QUNcbiAgICAgICAgbmV3IE5vdGljZSgnXHVDNzRDXHVDMTMxXHVDNzQ0IFx1QjJFNFx1QzJEQyBcdUM3QUNcdUMwRERcdUQ1NThcdUI4MjRcdUJBNzQgXHVCQzg0XHVEMkJDXHVDNzQ0IFx1QjJFNFx1QzJEQyBcdUQwNzRcdUI5QURcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XG4gICAgfVxuXG4gICAgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcFNwZWFraW5nKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3M6IFBhcnRpYWw8R29vZ2xlQ2xvdWRUVFNTZXR0aW5ncz4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICAvLyBcdUI5QUNcdUMxOENcdUMyQTQgXHVDODE1XHVCOUFDXG4gICAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hdWRpb01hbmFnZXIuY2xlYW51cCgpO1xuICAgICAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyLmNhbmNlbEFsbFJlcXVlc3RzKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0ZXN0VGV4dCA9ICdIZWxsbywgdGhpcyBpcyBhIHRlc3QuJztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FsbEdvb2dsZUNsb3VkQVBJKHRlc3RUZXh0KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIENsb3VkIFRUUyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgJ2VuLVVTLUpvdXJuZXktRCcsXG4gICAgICAgICAgICAnZW4tVVMtSm91cm5leS1GJyxcbiAgICAgICAgICAgICdlbi1VUy1Kb3VybmV5LU8nLFxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItQScsXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1DJyxcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUQnLFxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItRScsXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1GJyxcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUcnLFxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItSCcsXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1JJyxcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUonLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUEnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUInLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUMnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUQnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUUnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUYnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUcnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUgnLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUknLFxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUonLFxuICAgICAgICAgICAgJ2VuLUdCLU5ldXJhbDItQScsXG4gICAgICAgICAgICAnZW4tR0ItTmV1cmFsMi1CJyxcbiAgICAgICAgICAgICdlbi1HQi1OZXVyYWwyLUMnLFxuICAgICAgICAgICAgJ2VuLUdCLU5ldXJhbDItRCcsXG4gICAgICAgICAgICAnZW4tR0ItTmV1cmFsMi1GJyxcbiAgICAgICAgICAgICdlbi1BVS1OZXVyYWwyLUEnLFxuICAgICAgICAgICAgJ2VuLUFVLU5ldXJhbDItQicsXG4gICAgICAgICAgICAnZW4tQVUtTmV1cmFsMi1DJyxcbiAgICAgICAgICAgICdlbi1BVS1OZXVyYWwyLUQnXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgZ2V0U2V0dGluZ3MoKTogR29vZ2xlQ2xvdWRUVFNTZXR0aW5ncyB7XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuc2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0b3BTcGVha2luZygpO1xuICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudCA9IG51bGw7XG4gICAgfVxufSIsICJpbXBvcnQgeyBDaGF0dGVyYm94VFRTU2VydmljZSwgQ2hhdHRlcmJveFRUU1NldHRpbmdzIH0gZnJvbSAnLi9DaGF0dGVyYm94VFRTU2VydmljZSc7XG5pbXBvcnQgeyBHb29nbGVDbG91ZFRUU1NlcnZpY2UsIEdvb2dsZUNsb3VkVFRTU2V0dGluZ3MgfSBmcm9tICcuL0dvb2dsZUNsb3VkVFRTU2VydmljZSc7XG5pbXBvcnQgeyBUVFNTZXJ2aWNlIH0gZnJvbSAnLi9UVFNJbnRlcmZhY2UnO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xuaW1wb3J0IHsgZGVjcnlwdEFwaUtleSB9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuLy8gVFRTIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUQzMjlcdUQxQTBcdUI5QUNcbmV4cG9ydCBjbGFzcyBUVFNTZXJ2aWNlRmFjdG9yeSB7XG4gICAgc3RhdGljIGNyZWF0ZVRUU1NlcnZpY2Uoc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IFRUU1NlcnZpY2Uge1xuICAgICAgICBpZiAoIXNldHRpbmdzLnR0c0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9PcFRUU1NlcnZpY2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZXR0aW5ncy50dHNQcm92aWRlciA9PT0gJ2dvb2dsZS1jbG91ZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGdvb2dsZVNldHRpbmdzOiBHb29nbGVDbG91ZFRUU1NldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLnR0c0VuYWJsZWQsXG4gICAgICAgICAgICAgICAgYXBpS2V5OiBkZWNyeXB0QXBpS2V5KHNldHRpbmdzLmdvb2dsZUNsb3VkVFRTQXBpS2V5KSxcbiAgICAgICAgICAgICAgICB2b2ljZTogc2V0dGluZ3MudHRzVm9pY2UsXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiBzZXR0aW5ncy5nb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZSxcbiAgICAgICAgICAgICAgICBzcGVha2luZ1JhdGU6IHNldHRpbmdzLmdvb2dsZUNsb3VkVFRTU3BlYWtpbmdSYXRlLFxuICAgICAgICAgICAgICAgIHBpdGNoOiBzZXR0aW5ncy5nb29nbGVDbG91ZFRUU1BpdGNoLFxuICAgICAgICAgICAgICAgIGF1dG9QbGF5OiBzZXR0aW5ncy50dHNBdXRvUGxheVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgR29vZ2xlQ2xvdWRUVFNTZXJ2aWNlKGdvb2dsZVNldHRpbmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1QUUzMFx1QkNGOFx1QUMxMjogQ2hhdHRlcmJveCBUVFNcbiAgICAgICAgICAgIGNvbnN0IGNoYXR0ZXJib3hTZXR0aW5nczogQ2hhdHRlcmJveFRUU1NldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLnR0c0VuYWJsZWQsXG4gICAgICAgICAgICAgICAgYXBpVXJsOiBzZXR0aW5ncy5jaGF0dGVyYm94QXBpVXJsLFxuICAgICAgICAgICAgICAgIHZvaWNlOiBzZXR0aW5ncy50dHNWb2ljZSxcbiAgICAgICAgICAgICAgICBleGFnZ2VyYXRpb246IHNldHRpbmdzLmNoYXR0ZXJib3hFeGFnZ2VyYXRpb24sXG4gICAgICAgICAgICAgICAgY2ZnV2VpZ2h0OiBzZXR0aW5ncy5jaGF0dGVyYm94Q2ZnV2VpZ2h0LFxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBzZXR0aW5ncy5jaGF0dGVyYm94VGVtcGVyYXR1cmUsXG4gICAgICAgICAgICAgICAgYXV0b1BsYXk6IHNldHRpbmdzLnR0c0F1dG9QbGF5XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGF0dGVyYm94VFRTU2VydmljZShjaGF0dGVyYm94U2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBcdUJFNDRcdUQ2NUNcdUMxMzEgXHVDMEMxXHVEMERDXHVDNzU4IFRUUyBcdUMxMUNcdUJFNDRcdUMyQTQgKE5vLU9wIFx1RDMyOFx1RDEzNClcbmNsYXNzIE5vT3BUVFNTZXJ2aWNlIGltcGxlbWVudHMgVFRTU2VydmljZSB7XG4gICAgYXN5bmMgc3BlYWtUZXh0KHRleHQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcbiAgICB9XG5cbiAgICBhc3luYyBzcGVha0V4YW1wbGUoZXhhbXBsZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXG4gICAgfVxuXG4gICAgc3RvcFNwZWFraW5nKCk6IHZvaWQge1xuICAgICAgICAvLyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xuICAgIH1cblxuICAgIGlzUGF1c2VkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXN1bWUoKTogdm9pZCB7XG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXG4gICAgfVxuXG4gICAgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXG4gICAgfVxuXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcbiAgICB9XG59XG5cbi8vIFx1RDYzOFx1RDY1OFx1QzEzMVx1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVCODA4XHVBQzcwXHVDMkRDIFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNFxuZXhwb3J0IGludGVyZmFjZSBMZWdhY3lUVFNTZXR0aW5ncyB7XG4gICAgZW5hYmxlZDogYm9vbGVhbjtcbiAgICB2b2ljZTogc3RyaW5nO1xuICAgIHBsYXliYWNrU3BlZWQ6IG51bWJlcjtcbiAgICBhdXRvUGxheTogYm9vbGVhbjtcbn1cblxuLy8gXHVCODA4XHVBQzcwXHVDMkRDIFx1QzEyNFx1QzgxNVx1Qzc0NCBDaGF0dGVyYm94IFx1QzEyNFx1QzgxNVx1QzczQ1x1Qjg1QyBcdUJDQzBcdUQ2NThcdUQ1NThcdUIyOTQgXHVENUVDXHVEMzdDIFx1RDU2OFx1QzIxOFxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRMZWdhY3lTZXR0aW5ncyhsZWdhY3lTZXR0aW5nczogTGVnYWN5VFRTU2V0dGluZ3MpOiBDaGF0dGVyYm94VFRTU2V0dGluZ3Mge1xuICAgIHJldHVybiB7XG4gICAgICAgIGVuYWJsZWQ6IGxlZ2FjeVNldHRpbmdzLmVuYWJsZWQsXG4gICAgICAgIGFwaVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMycsXG4gICAgICAgIHZvaWNlOiBsZWdhY3lTZXR0aW5ncy52b2ljZSB8fCAnYWxsb3knLFxuICAgICAgICBleGFnZ2VyYXRpb246IDAuNyxcbiAgICAgICAgY2ZnV2VpZ2h0OiAwLjQsXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjksXG4gICAgICAgIGF1dG9QbGF5OiBsZWdhY3lTZXR0aW5ncy5hdXRvUGxheVxuICAgIH07XG59XG5cbi8vIFx1RDYzOFx1RDY1OFx1QzEzMVx1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVBRTMwXHVCQ0Y4IGV4cG9ydFxuZXhwb3J0IHsgQ2hhdHRlcmJveFRUU1NlcnZpY2UsIEdvb2dsZUNsb3VkVFRTU2VydmljZSB9O1xuZXhwb3J0IHR5cGUgeyBDaGF0dGVyYm94VFRTU2V0dGluZ3MsIEdvb2dsZUNsb3VkVFRTU2V0dGluZ3MsIFRUU1NlcnZpY2UgfTsiLCAiaW1wb3J0IHsgTW9tZW50IH0gZnJvbSAnbW9tZW50JztcblxuZXhwb3J0IGVudW0gUmV2aWV3UmVzcG9uc2Uge1xuICAgIEhhcmQgPSAnaGFyZCcsICAgIC8vIHEgPSAxOiBcdUI5RTRcdUM2QjAgXHVDNUI0XHVCODM1XHVBQzhDIFx1RDY4Q1x1QzBDMVx1RDU1OFx1QUM3MFx1QjA5OCBcdUFDNzBcdUM3NTggXHVDMkU0XHVEMzI4XHVDNUQwIFx1QUMwMFx1QUU0Q1x1QzZCNCBcdUFDQkRcdUM2QjBcbiAgICBHb29kID0gJ2dvb2QnLCAgICAvLyBxID0gMjogXHVDNTdEXHVBQzA0XHVDNzU4IFx1QjE3OFx1QjgyNVx1Qzc0NCBcdUI0RTRcdUM1RUMgXHVENjhDXHVDMEMxXHVENTVDIFx1QUNCRFx1QzZCMCAgXG4gICAgRWFzeSA9ICdlYXN5JyAgICAgLy8gcSA9IDM6IFx1QzI3RFx1QUM4QyBcdUM2NDRcdUM4MDQgXHVENjhDXHVDMEMxXHVENTVDIFx1QUNCRFx1QzZCMFxufVxuXG4vLyBTTS0yIFx1QzU0Q1x1QUNFMFx1QjlBQ1x1Qzk5OFx1Qzc1OCBcdUQ0ODhcdUM5QzggXHVDODEwXHVDMjE4IFx1QjlFNFx1RDU1MVxuZXhwb3J0IGNvbnN0IFFVQUxJVFlfU0NPUkVTID0ge1xuICAgIFtSZXZpZXdSZXNwb25zZS5IYXJkXTogMSxcbiAgICBbUmV2aWV3UmVzcG9uc2UuR29vZF06IDIsXG4gICAgW1Jldmlld1Jlc3BvbnNlLkVhc3ldOiAzXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgaW50ZXJmYWNlIFNSU1NldHRpbmdzIHtcbiAgICAvLyBTTS0yIEFsZ29yaXRobSBTZXR0aW5nc1xuICAgIGluaXRpYWxFRmFjdG9yOiBudW1iZXI7ICAgICAvLyBTTS0yIFx1Q0QwOFx1QUUzMCBFLUZhY3RvciAoMi41KVxuICAgIG1pbmltdW1FRmFjdG9yOiBudW1iZXI7ICAgICAvLyBTTS0yIFx1Q0Q1Q1x1QzE4QyBFLUZhY3RvciAoMS4zKVxuICAgIG1heGltdW1JbnRlcnZhbDogbnVtYmVyOyAgICAvLyBNYXhpbXVtIGludGVydmFsIGluIGRheXMgKDM2NTI1ID0gfjEwMCB5ZWFycylcbiAgICBcbiAgICAvLyBMb2FkIEJhbGFuY2luZyBTZXR0aW5nc1xuICAgIGxvYWRCYWxhbmNlOiBib29sZWFuOyAgICAgICAvLyBFbmFibGUgcmV2aWV3IGxvYWQgYmFsYW5jaW5nXG4gICAgbWF4RnV6emluZ0RheXM6IG51bWJlcjsgICAgIC8vIE1heGltdW0gZnV6emluZyBmb3IgbG9hZCBiYWxhbmNpbmcgKDMpXG4gICAgXG4gICAgLy8gTGVnYWN5IGNvbXBhdGliaWxpdHkgKGRlcHJlY2F0ZWQgYnV0IGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXG4gICAgYmFzZUVhc2U6IG51bWJlcjsgICAgICAgICAgIC8vIFN0YXJ0aW5nIGVhc2UgZmFjdG9yICgyNTAlKSAtIGNvbnZlcnRlZCB0byBFRmFjdG9yXG4gICAgZWFzeUJvbnVzOiBudW1iZXI7ICAgICAgICAgIC8vIE11bHRpcGxpZXIgZm9yIGVhc3kgcmVzcG9uc2VzICgxLjMpIC0gbm90IHVzZWQgaW4gU00tMlxuICAgIGhhcmRQZW5hbHR5OiBudW1iZXI7ICAgICAgICAvLyBNdWx0aXBsaWVyIGZvciBoYXJkIHJlc3BvbnNlcyAoMC41KSAtIG5vdCB1c2VkIGluIFNNLTJcbiAgICBtaW5pbXVtRWFzZTogbnVtYmVyOyAgICAgICAgLy8gTWluaW11bSBlYXNlIGZhY3RvciAoMTMwJSkgLSBjb252ZXJ0ZWQgdG8gRUZhY3RvclxuICAgIGluaXRpYWxJbnRlcnZhbDogbnVtYmVyOyAgICAvLyBTdGFydGluZyBpbnRlcnZhbCBpbiBkYXlzICgxKSAtIG5vdCB1c2VkIGluIFNNLTJcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1JTX1NFVFRJTkdTOiBTUlNTZXR0aW5ncyA9IHtcbiAgICAvLyBTTS0yIEFsZ29yaXRobSBTZXR0aW5nc1xuICAgIGluaXRpYWxFRmFjdG9yOiAyLjUsICAgICAgICAvLyBTTS0yIFx1RDQ1Q1x1QzkwMCBcdUNEMDhcdUFFMzAgRS1GYWN0b3JcbiAgICBtaW5pbXVtRUZhY3RvcjogMS4zLCAgICAgICAgLy8gU00tMiBcdUQ0NUNcdUM5MDAgXHVDRDVDXHVDMThDIEUtRmFjdG9yXG4gICAgbWF4aW11bUludGVydmFsOiAzNjUyNSwgICAgIC8vIH4xMDBcdUIxNDRcbiAgICBcbiAgICAvLyBMb2FkIEJhbGFuY2luZyBTZXR0aW5nc1xuICAgIGxvYWRCYWxhbmNlOiB0cnVlLFxuICAgIG1heEZ1enppbmdEYXlzOiAzLFxuICAgIFxuICAgIC8vIExlZ2FjeSBjb21wYXRpYmlsaXR5ICh3aWxsIGJlIGNvbnZlcnRlZClcbiAgICBiYXNlRWFzZTogMjUwLCAgICAgICAgICAgICAgLy8gMi41ICogMTAwXG4gICAgZWFzeUJvbnVzOiAxLjMsXG4gICAgaGFyZFBlbmFsdHk6IDAuNSxcbiAgICBtaW5pbXVtRWFzZTogMTMwLCAgICAgICAgICAgLy8gMS4zICogMTAwXG4gICAgaW5pdGlhbEludGVydmFsOiAxXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFNjaGVkdWxlSW5mbyB7XG4gICAgZHVlRGF0ZTogc3RyaW5nOyAgICAgICAgICAgLy8gSVNPIGRhdGUgc3RyaW5nXG4gICAgaW50ZXJ2YWw6IG51bWJlcjsgICAgICAgICAgLy8gRGF5cyB1bnRpbCBuZXh0IHJldmlld1xuICAgIGVhc2U6IG51bWJlcjsgICAgICAgICAgICAgIC8vIEVhc2UgZmFjdG9yIChFLUZhY3RvciAqIDEwMCwgMTMwLTUwMCspXG4gICAgcmV2aWV3Q291bnQ6IG51bWJlcjsgICAgICAgLy8gVG90YWwgbnVtYmVyIG9mIHJldmlld3NcbiAgICBsYXBzZUNvdW50OiBudW1iZXI7ICAgICAgICAvLyBOdW1iZXIgb2YgaGFyZCByZXNwb25zZXNcbiAgICBkZWxheWVkRGF5czogbnVtYmVyOyAgICAgICAvLyBEYXlzIGRlbGF5ZWQgYmVmb3JlIHRoaXMgcmV2aWV3XG4gICAgcmVwZXRpdGlvbjogbnVtYmVyOyAgICAgICAgLy8gU00tMiByZXBldGl0aW9uIGNvdW50IChcdUM1RjBcdUMxOEQgXHVDMTMxXHVBQ0Y1IFx1RDY4Q1x1QzBDMSBcdUQ2OUZcdUMyMTgpXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV2aWV3UmVzdWx0IHtcbiAgICBpbnRlcnZhbDogbnVtYmVyO1xuICAgIGVhc2U6IG51bWJlcjtcbiAgICBkdWVEYXRlOiBzdHJpbmc7XG4gICAgcmVwZXRpdGlvbjogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobSB7XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogU1JTU2V0dGluZ3M7XG4gICAgcHJpdmF0ZSBkdWVEYXRlSGlzdG9ncmFtOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xuXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFNSU1NldHRpbmdzID0gREVGQVVMVF9TUlNfU0VUVElOR1MpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgbmV4dCByZXZpZXcgc2NoZWR1bGUgYmFzZWQgb24gdXNlciByZXNwb25zZVxuICAgICAqIEltcGxlbWVudHMgdGhlIFNNLTIgYWxnb3JpdGhtIGFjY29yZGluZyB0byBsZWFybmluZ19hbGdvcml0aG0ubWQgc3BlY2lmaWNhdGlvblxuICAgICAqL1xuICAgIHNjaGVkdWxlKFxuICAgICAgICByZXNwb25zZTogUmV2aWV3UmVzcG9uc2UsXG4gICAgICAgIGN1cnJlbnRTY2hlZHVsZT86IFNjaGVkdWxlSW5mb1xuICAgICk6IFJldmlld1Jlc3VsdCB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHEgPSBRVUFMSVRZX1NDT1JFU1tyZXNwb25zZV07IC8vIFx1RDQ4OFx1QzlDOCBcdUM4MTBcdUMyMTg6IDEoaGFyZCksIDIoZ29vZCksIDMoZWFzeSlcbiAgICAgICAgXG4gICAgICAgIC8vIEluaXRpYWxpemUgc2NoZWR1bGUgaW5mbyBmb3IgbmV3IGNhcmRzXG4gICAgICAgIGlmICghY3VycmVudFNjaGVkdWxlKSB7XG4gICAgICAgICAgICBjdXJyZW50U2NoZWR1bGUgPSB7XG4gICAgICAgICAgICAgICAgZHVlRGF0ZTogbm93LnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogTWF0aC5yb3VuZCh0aGlzLnNldHRpbmdzLmluaXRpYWxFRmFjdG9yICogMTAwKSwgLy8gRS1GYWN0b3JcdUI5N0MgMTAwXHVDNzNDXHVCODVDIFx1QUNGMVx1RDU3NFx1QzExQyBcdUM4MDBcdUM3QTVcbiAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogMCxcbiAgICAgICAgICAgICAgICBsYXBzZUNvdW50OiAwLFxuICAgICAgICAgICAgICAgIGRlbGF5ZWREYXlzOiAwLFxuICAgICAgICAgICAgICAgIHJlcGV0aXRpb246IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgRS1GYWN0b3IgXHVBQ0M0XHVDMEIwIChcdUM4MDBcdUM3QTVcdUI0MUMgXHVBQzEyXHVDNzQ0IDEwMFx1QzczQ1x1Qjg1QyBcdUIwOThcdUIyMDRcdUM1QjQgXHVDMkU0XHVDODFDIEUtRmFjdG9yIFx1QzVCQlx1Qzc0QylcbiAgICAgICAgbGV0IGN1cnJlbnRFRmFjdG9yID0gY3VycmVudFNjaGVkdWxlLmVhc2UgLyAxMDA7XG4gICAgICAgIGxldCBuZXdSZXBldGl0aW9uID0gY3VycmVudFNjaGVkdWxlLnJlcGV0aXRpb247XG4gICAgICAgIFxuICAgICAgICAvLyBTTS0yIEFsZ29yaXRobSBTdGVwIDE6IEUtRmFjdG9yIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICAvLyBFRl9uZXcgPSBFRl9vbGQgKyAoMC4xIC0gKDMtcSkgKiAoMC4wOCArICgzLXEpICogMC4wMikpXG4gICAgICAgIGNvbnN0IGRlbHRhID0gMC4xIC0gKDMgLSBxKSAqICgwLjA4ICsgKDMgLSBxKSAqIDAuMDIpO1xuICAgICAgICBsZXQgbmV3RUZhY3RvciA9IGN1cnJlbnRFRmFjdG9yICsgZGVsdGE7XG4gICAgICAgIFxuICAgICAgICAvLyBFLUZhY3RvciBcdUNENUNcdUMxOENcdUFDMTIgXHVDODFDXHVENTVDICgxLjMpXG4gICAgICAgIG5ld0VGYWN0b3IgPSBNYXRoLm1heCh0aGlzLnNldHRpbmdzLm1pbmltdW1FRmFjdG9yLCBuZXdFRmFjdG9yKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNNLTIgQWxnb3JpdGhtIFN0ZXAgMjogUmVwZXRpdGlvbiBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgaWYgKHEgPj0gMikgeyAvLyBnb29kIFx1QjYxMFx1QjI5NCBlYXN5IChxID0gMiBcdUI2MTBcdUIyOTQgMylcbiAgICAgICAgICAgIG5ld1JlcGV0aXRpb24gPSBjdXJyZW50U2NoZWR1bGUucmVwZXRpdGlvbiArIDE7XG4gICAgICAgIH0gZWxzZSB7IC8vIGhhcmQgKHEgPSAxKVxuICAgICAgICAgICAgbmV3UmVwZXRpdGlvbiA9IDA7IC8vIHJlcGV0aXRpb24gXHVCOUFDXHVDMTRCXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNNLTIgQWxnb3JpdGhtIFN0ZXAgMzogXHVCMkU0XHVDNzRDIFx1QkNGNVx1QzJCNSBcdUFDMDRcdUFDQTkgXHVBQ0M0XHVDMEIwXG4gICAgICAgIGxldCBuZXdJbnRlcnZhbDogbnVtYmVyO1xuICAgICAgICBcbiAgICAgICAgaWYgKHEgPCAyKSB7IC8vIGhhcmQgKHEgPSAxKVxuICAgICAgICAgICAgLy8gaGFyZCBcdUM3NTFcdUIyRjUgXHVDMkRDIFx1Qzk4OVx1QzJEQyBcdUJDRjVcdUMyQjUgKDFcdUM3N0MgXHVENkM0KVxuICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZ29vZCBcdUI2MTBcdUIyOTQgZWFzeSBcdUM3NTFcdUIyRjUgXHVDMkRDIFNNLTIgXHVBQzA0XHVBQ0E5IFx1QUNGNVx1QzJERCBcdUM4MDFcdUM2QTlcbiAgICAgICAgICAgIGlmIChuZXdSZXBldGl0aW9uID09PSAxKSB7XG4gICAgICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdSZXBldGl0aW9uID09PSAyKSB7XG4gICAgICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSA2O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBuID49IDM6IElfbiA9IElfKG4tMSkgKiBFRl9uZXdcbiAgICAgICAgICAgICAgICBuZXdJbnRlcnZhbCA9IE1hdGgucm91bmQoY3VycmVudFNjaGVkdWxlLmludGVydmFsICogbmV3RUZhY3Rvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1Q0Q1Q1x1QjMwMCBcdUFDMDRcdUFDQTkgXHVDODFDXHVENTVDXG4gICAgICAgIG5ld0ludGVydmFsID0gTWF0aC5taW4obmV3SW50ZXJ2YWwsIHRoaXMuc2V0dGluZ3MubWF4aW11bUludGVydmFsKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1Q0Q1Q1x1QzE4QyBcdUFDMDRcdUFDQTkgXHVCQ0Y0XHVDN0E1ICgxXHVDNzdDKVxuICAgICAgICBuZXdJbnRlcnZhbCA9IE1hdGgubWF4KDEsIG5ld0ludGVydmFsKTtcblxuICAgICAgICAvLyBMb2FkIGJhbGFuY2luZyBcdUM4MDFcdUM2QTkgKFx1QzEyMFx1RDBERFx1QzBBQ1x1RDU2RClcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubG9hZEJhbGFuY2UpIHtcbiAgICAgICAgICAgIG5ld0ludGVydmFsID0gdGhpcy5hcHBseUxvYWRCYWxhbmNpbmcobmV3SW50ZXJ2YWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDMEM4XHVCODVDXHVDNkI0IFx1QjlDQ1x1QjhDQ1x1Qzc3QyBcdUFDQzRcdUMwQjBcbiAgICAgICAgY29uc3QgbmV3RHVlRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyBuZXdJbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuXG4gICAgICAgIC8vIFx1RDc4OFx1QzJBNFx1RDFBMFx1QURGOFx1QjdBOCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggKGxvYWQgYmFsYW5jaW5nXHVDNkE5KVxuICAgICAgICB0aGlzLnVwZGF0ZUR1ZURhdGVIaXN0b2dyYW0obmV3RHVlRGF0ZS50b0RhdGVTdHJpbmcoKSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGludGVydmFsOiBuZXdJbnRlcnZhbCxcbiAgICAgICAgICAgIGVhc2U6IE1hdGgucm91bmQobmV3RUZhY3RvciAqIDEwMCksIC8vIEUtRmFjdG9yXHVCOTdDIDEwMFx1QzczQ1x1Qjg1QyBcdUFDRjFcdUQ1NzRcdUMxMUMgXHVCQzE4XHVENjU4XG4gICAgICAgICAgICBkdWVEYXRlOiBuZXdEdWVEYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICByZXBldGl0aW9uOiBuZXdSZXBldGl0aW9uXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwbHkgbG9hZCBiYWxhbmNpbmcgdG8gZGlzdHJpYnV0ZSByZXZpZXdzIGV2ZW5seSBhY3Jvc3MgZGF5c1xuICAgICAqIEJhc2VkIG9uIHRoZSBoaXN0b2dyYW0tYmFzZWQgYXBwcm9hY2ggZnJvbSBvYnNpZGlhbi1zcGFjZWQtcmVwZXRpdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgYXBwbHlMb2FkQmFsYW5jaW5nKGludGVydmFsOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MubG9hZEJhbGFuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERpZmZlcmVudCBmdXp6aW5nIHN0cmF0ZWdpZXMgYmFzZWQgb24gaW50ZXJ2YWwgbGVuZ3RoXG4gICAgICAgIGxldCBmdXp6aW5nUmFuZ2U6IG51bWJlcjtcbiAgICAgICAgXG4gICAgICAgIGlmIChpbnRlcnZhbCA8PSAyMSkge1xuICAgICAgICAgICAgZnV6emluZ1JhbmdlID0gMTsgLy8gMSBkYXkgZnV6emluZyBmb3Igc2hvcnQgaW50ZXJ2YWxzXG4gICAgICAgIH0gZWxzZSBpZiAoaW50ZXJ2YWwgPD0gMTgwKSB7XG4gICAgICAgICAgICBmdXp6aW5nUmFuZ2UgPSBNYXRoLm1heCgxLCBpbnRlcnZhbCAqIDAuMDUpOyAvLyA1JSBmdXp6aW5nIGZvciBtZWRpdW0gaW50ZXJ2YWxzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmdXp6aW5nUmFuZ2UgPSBNYXRoLm1heCgxLCBpbnRlcnZhbCAqIDAuMDI1KTsgLy8gMi41JSBmdXp6aW5nIGZvciBsb25nIGludGVydmFsc1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FwIGZ1enppbmcgYXQgbWF4IHNldHRpbmdcbiAgICAgICAgZnV6emluZ1JhbmdlID0gTWF0aC5taW4oZnV6emluZ1JhbmdlLCB0aGlzLnNldHRpbmdzLm1heEZ1enppbmdEYXlzKTtcblxuICAgICAgICAvLyBGaW5kIHRoZSBkYXRlIHdpdGggbWluaW11bSByZXZpZXdzIGluIHRoZSBmdXp6aW5nIHJhbmdlXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGxldCBiZXN0SW50ZXJ2YWwgPSBpbnRlcnZhbDtcbiAgICAgICAgbGV0IG1pblJldmlld3MgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcblxuICAgICAgICBmb3IgKGxldCBvZmZzZXQgPSAtZnV6emluZ1JhbmdlOyBvZmZzZXQgPD0gZnV6emluZ1JhbmdlOyBvZmZzZXQrKykge1xuICAgICAgICAgICAgY29uc3QgdGVzdEludGVydmFsID0gaW50ZXJ2YWwgKyBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAodGVzdEludGVydmFsIDwgMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IHRlc3REYXRlID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIHRlc3RJbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IHRlc3REYXRlLnRvRGF0ZVN0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgcmV2aWV3Q291bnQgPSB0aGlzLmR1ZURhdGVIaXN0b2dyYW0uZ2V0KGRhdGVTdHJpbmcpIHx8IDA7XG5cbiAgICAgICAgICAgIGlmIChyZXZpZXdDb3VudCA8IG1pblJldmlld3MpIHtcbiAgICAgICAgICAgICAgICBtaW5SZXZpZXdzID0gcmV2aWV3Q291bnQ7XG4gICAgICAgICAgICAgICAgYmVzdEludGVydmFsID0gdGVzdEludGVydmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJlc3RJbnRlcnZhbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGR1ZSBkYXRlIGhpc3RvZ3JhbSBmb3IgbG9hZCBiYWxhbmNpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIHVwZGF0ZUR1ZURhdGVIaXN0b2dyYW0oZGF0ZVN0cmluZzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmR1ZURhdGVIaXN0b2dyYW0uZ2V0KGRhdGVTdHJpbmcpIHx8IDA7XG4gICAgICAgIHRoaXMuZHVlRGF0ZUhpc3RvZ3JhbS5zZXQoZGF0ZVN0cmluZywgY3VycmVudCArIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjYXJkcyB0aGF0IGFyZSBkdWUgZm9yIHJldmlld1xuICAgICAqL1xuICAgIHN0YXRpYyBnZXRDYXJkc0ZvclJldmlldyhjYXJkczogQXJyYXk8eyBzY2hlZHVsZUluZm8/OiBTY2hlZHVsZUluZm8gfT4pOiBBcnJheTx7IHNjaGVkdWxlSW5mbz86IFNjaGVkdWxlSW5mbyB9PiB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY2FyZHMuZmlsdGVyKGNhcmQgPT4ge1xuICAgICAgICAgICAgaWYgKCFjYXJkLnNjaGVkdWxlSW5mbykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBOZXcgY2FyZHMgYXJlIGFsd2F5cyBkdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IG5ldyBEYXRlKGNhcmQuc2NoZWR1bGVJbmZvLmR1ZURhdGUpO1xuICAgICAgICAgICAgcmV0dXJuIGR1ZURhdGUgPD0gbm93O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIG51bWJlciBvZiBjYXJkcyBkdWUgaW4gdGhlIG5leHQgTiBkYXlzXG4gICAgICovXG4gICAgc3RhdGljIGdldENhcmRzRHVlSW5EYXlzKGNhcmRzOiBBcnJheTx7IHNjaGVkdWxlSW5mbz86IFNjaGVkdWxlSW5mbyB9PiwgZGF5czogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgZnV0dXJlRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyBkYXlzICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY2FyZHMuZmlsdGVyKGNhcmQgPT4ge1xuICAgICAgICAgICAgaWYgKCFjYXJkLnNjaGVkdWxlSW5mbykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBOZXcgY2FyZHMgY291bnQgYXMgZHVlIHRvZGF5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGR1ZURhdGUgPSBuZXcgRGF0ZShjYXJkLnNjaGVkdWxlSW5mby5kdWVEYXRlKTtcbiAgICAgICAgICAgIHJldHVybiBkdWVEYXRlIDw9IGZ1dHVyZURhdGU7XG4gICAgICAgIH0pLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGVhcm5pbmcgc3RhdGlzdGljcyBmb3IgYSBzZXQgb2YgY2FyZHNcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0U3RhdGlzdGljcyhjYXJkczogQXJyYXk8eyBzY2hlZHVsZUluZm8/OiBTY2hlZHVsZUluZm8gfT4pOiB7XG4gICAgICAgIHRvdGFsOiBudW1iZXI7XG4gICAgICAgIG5ldzogbnVtYmVyO1xuICAgICAgICBsZWFybmluZzogbnVtYmVyO1xuICAgICAgICBtYXR1cmU6IG51bWJlcjtcbiAgICAgICAgYXZlcmFnZUVhc2U6IG51bWJlcjtcbiAgICAgICAgYXZlcmFnZUludGVydmFsOiBudW1iZXI7XG4gICAgfSB7XG4gICAgICAgIGxldCBuZXdDYXJkcyA9IDA7XG4gICAgICAgIGxldCBsZWFybmluZ0NhcmRzID0gMDtcbiAgICAgICAgbGV0IG1hdHVyZUNhcmRzID0gMDtcbiAgICAgICAgbGV0IHRvdGFsRWFzZSA9IDA7XG4gICAgICAgIGxldCB0b3RhbEludGVydmFsID0gMDtcbiAgICAgICAgbGV0IGNhcmRzV2l0aFNjaGVkdWxlID0gMDtcblxuICAgICAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgICAgICAgaWYgKCFjYXJkLnNjaGVkdWxlSW5mbykge1xuICAgICAgICAgICAgICAgIG5ld0NhcmRzKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhcmRzV2l0aFNjaGVkdWxlKys7XG4gICAgICAgICAgICAgICAgdG90YWxFYXNlICs9IGNhcmQuc2NoZWR1bGVJbmZvLmVhc2U7XG4gICAgICAgICAgICAgICAgdG90YWxJbnRlcnZhbCArPSBjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbDtcblxuICAgICAgICAgICAgICAgIGlmIChjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbCA8IDIxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nQ2FyZHMrKztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXR1cmVDYXJkcysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvdGFsOiBjYXJkcy5sZW5ndGgsXG4gICAgICAgICAgICBuZXc6IG5ld0NhcmRzLFxuICAgICAgICAgICAgbGVhcm5pbmc6IGxlYXJuaW5nQ2FyZHMsXG4gICAgICAgICAgICBtYXR1cmU6IG1hdHVyZUNhcmRzLFxuICAgICAgICAgICAgYXZlcmFnZUVhc2U6IGNhcmRzV2l0aFNjaGVkdWxlID4gMCA/IE1hdGgucm91bmQodG90YWxFYXNlIC8gY2FyZHNXaXRoU2NoZWR1bGUpIDogMCxcbiAgICAgICAgICAgIGF2ZXJhZ2VJbnRlcnZhbDogY2FyZHNXaXRoU2NoZWR1bGUgPiAwID8gTWF0aC5yb3VuZCh0b3RhbEludGVydmFsIC8gY2FyZHNXaXRoU2NoZWR1bGUpIDogMFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbGdvcml0aG0gc2V0dGluZ3NcbiAgICAgKi9cbiAgICB1cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5nczogUGFydGlhbDxTUlNTZXR0aW5ncz4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBzZXR0aW5nc1xuICAgICAqL1xuICAgIGdldFNldHRpbmdzKCk6IFNSU1NldHRpbmdzIHtcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5zZXR0aW5ncyB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBkdWUgZGF0ZSBoaXN0b2dyYW0gKHVzZWZ1bCBmb3IgdGVzdGluZyBvciByZXNldClcbiAgICAgKi9cbiAgICBjbGVhckhpc3RvZ3JhbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kdWVEYXRlSGlzdG9ncmFtLmNsZWFyKCk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBcbiAgICBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLCBcbiAgICBSZXZpZXdSZXNwb25zZSwgXG4gICAgU1JTU2V0dGluZ3MsIFxuICAgIERFRkFVTFRfU1JTX1NFVFRJTkdTLFxuICAgIFNjaGVkdWxlSW5mbyBcbn0gZnJvbSAnLi4vYWxnb3JpdGhtcy9TcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtJztcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi4vLi4vVm9jYWJ1bGFyeUNhcmQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1Nlc3Npb24ge1xuICAgIHNlc3Npb25JZDogc3RyaW5nO1xuICAgIHN0YXJ0VGltZTogc3RyaW5nO1xuICAgIGNhcmRzUmV2aWV3ZWQ6IG51bWJlcjtcbiAgICB0b3RhbENhcmRzOiBudW1iZXI7XG4gICAgY29tcGxldGVkQ2FyZHM6IFZvY2FidWxhcnlDYXJkW107XG4gICAgY3VycmVudENhcmQ/OiBWb2NhYnVsYXJ5Q2FyZDtcbiAgICByZW1haW5pbmdDYXJkcz86IFZvY2FidWxhcnlDYXJkW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3R1ZHlTdGF0aXN0aWNzIHtcbiAgICB0b2RheToge1xuICAgICAgICBuZXdDYXJkczogbnVtYmVyO1xuICAgICAgICByZXZpZXdlZENhcmRzOiBudW1iZXI7XG4gICAgICAgIHRvdGFsVGltZTogbnVtYmVyOyAvLyBtaW51dGVzXG4gICAgfTtcbiAgICBzdHJlYWs6IHtcbiAgICAgICAgY3VycmVudERheXM6IG51bWJlcjtcbiAgICAgICAgbG9uZ2VzdERheXM6IG51bWJlcjtcbiAgICAgICAgbGFzdFN0dWR5RGF0ZTogc3RyaW5nIHwgbnVsbDtcbiAgICB9O1xuICAgIG92ZXJhbGw6IHtcbiAgICAgICAgdG90YWxDYXJkczogbnVtYmVyO1xuICAgICAgICBuZXdDYXJkczogbnVtYmVyO1xuICAgICAgICBsZWFybmluZ0NhcmRzOiBudW1iZXI7XG4gICAgICAgIG1hdHVyZUNhcmRzOiBudW1iZXI7XG4gICAgICAgIGF2ZXJhZ2VFYXNlOiBudW1iZXI7XG4gICAgICAgIGF2ZXJhZ2VJbnRlcnZhbDogbnVtYmVyO1xuICAgIH07XG59XG5cbmV4cG9ydCBjbGFzcyBTcGFjZWRSZXBldGl0aW9uU2VydmljZSB7XG4gICAgcHJpdmF0ZSBhbGdvcml0aG06IFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG07XG4gICAgcHJpdmF0ZSBjdXJyZW50U2Vzc2lvbjogUmV2aWV3U2Vzc2lvbiB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFBhcnRpYWw8U1JTU2V0dGluZ3M+ID0ge30pIHtcbiAgICAgICAgY29uc3Qgc3JzU2V0dGluZ3MgPSB7IC4uLkRFRkFVTFRfU1JTX1NFVFRJTkdTLCAuLi5zZXR0aW5ncyB9O1xuICAgICAgICB0aGlzLmFsZ29yaXRobSA9IG5ldyBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtKHNyc1NldHRpbmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY2FyZHMgdGhhdCBhcmUgZHVlIGZvciByZXZpZXcgdG9kYXlcbiAgICAgKi9cbiAgICBnZXRDYXJkc0ZvclJldmlldyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IFZvY2FidWxhcnlDYXJkW10ge1xuICAgICAgICByZXR1cm4gU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobS5nZXRDYXJkc0ZvclJldmlldyhhbGxDYXJkcykgYXMgVm9jYWJ1bGFyeUNhcmRbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbmV3IGNhcmRzIChuZXZlciByZXZpZXdlZClcbiAgICAgKi9cbiAgICBnZXROZXdDYXJkcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IFZvY2FidWxhcnlDYXJkW10ge1xuICAgICAgICByZXR1cm4gYWxsQ2FyZHMuZmlsdGVyKGNhcmQgPT4gIWNhcmQuc2NoZWR1bGVJbmZvIHx8IGNhcmQucmV2aWV3Q291bnQgPT09IDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsZWFybmluZyBjYXJkcyAocmV2aWV3ZWQgYnV0IG5vdCBtYXR1cmUpXG4gICAgICovXG4gICAgZ2V0TGVhcm5pbmdDYXJkcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IFZvY2FidWxhcnlDYXJkW10ge1xuICAgICAgICByZXR1cm4gYWxsQ2FyZHMuZmlsdGVyKGNhcmQgPT4gXG4gICAgICAgICAgICBjYXJkLnNjaGVkdWxlSW5mbyAmJiBcbiAgICAgICAgICAgIGNhcmQucmV2aWV3Q291bnQgPiAwICYmIFxuICAgICAgICAgICAgY2FyZC5zY2hlZHVsZUluZm8uaW50ZXJ2YWwgPCAyMVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBtYXR1cmUgY2FyZHMgKGludGVydmFsID49IDIxIGRheXMpXG4gICAgICovXG4gICAgZ2V0TWF0dXJlQ2FyZHMoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcbiAgICAgICAgcmV0dXJuIGFsbENhcmRzLmZpbHRlcihjYXJkID0+IFxuICAgICAgICAgICAgY2FyZC5zY2hlZHVsZUluZm8gJiYgXG4gICAgICAgICAgICBjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbCA+PSAyMVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXJ0IGEgbmV3IHJldmlldyBzZXNzaW9uXG4gICAgICovXG4gICAgc3RhcnRSZXZpZXdTZXNzaW9uKGR1ZUNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdLCBtYXhDYXJkcz86IG51bWJlcik6IFJldmlld1Nlc3Npb24ge1xuICAgICAgICBjb25zdCBjYXJkc1RvUmV2aWV3ID0gbWF4Q2FyZHMgPyBkdWVDYXJkcy5zbGljZSgwLCBtYXhDYXJkcykgOiBkdWVDYXJkcztcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24gPSB7XG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuZ2VuZXJhdGVTZXNzaW9uSWQoKSxcbiAgICAgICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgY2FyZHNSZXZpZXdlZDogMCxcbiAgICAgICAgICAgIHRvdGFsQ2FyZHM6IGNhcmRzVG9SZXZpZXcubGVuZ3RoLFxuICAgICAgICAgICAgY29tcGxldGVkQ2FyZHM6IFtdLFxuICAgICAgICAgICAgY3VycmVudENhcmQ6IGNhcmRzVG9SZXZpZXdbMF0sXG4gICAgICAgICAgICByZW1haW5pbmdDYXJkczogY2FyZHNUb1JldmlldyAvLyBBZGQgcmVtYWluaW5nIGNhcmRzIHRvIHRyYWNrIHByb2dyZXNzXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFNlc3Npb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2VzcyBhIHJldmlldyByZXNwb25zZSBhbmQgZ2V0IHRoZSBuZXh0IGNhcmRcbiAgICAgKi9cbiAgICBwcm9jZXNzUmV2aWV3KFxuICAgICAgICBjYXJkOiBWb2NhYnVsYXJ5Q2FyZCwgXG4gICAgICAgIHJlc3BvbnNlOiBSZXZpZXdSZXNwb25zZVxuICAgICk6IHsgXG4gICAgICAgIHVwZGF0ZWRDYXJkOiBWb2NhYnVsYXJ5Q2FyZDsgXG4gICAgICAgIG5leHRDYXJkPzogVm9jYWJ1bGFyeUNhcmQ7IFxuICAgICAgICBzZXNzaW9uQ29tcGxldGU6IGJvb2xlYW4gXG4gICAgfSB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50U2Vzc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhY3RpdmUgcmV2aWV3IHNlc3Npb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFwcGx5IHNwYWNlZCByZXBldGl0aW9uIGFsZ29yaXRobVxuICAgICAgICBjb25zdCByZXZpZXdSZXN1bHQgPSB0aGlzLmFsZ29yaXRobS5zY2hlZHVsZShyZXNwb25zZSwgY2FyZC5zY2hlZHVsZUluZm8pO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGNhcmQgd2l0aCBuZXcgc2NoZWR1bGVcbiAgICAgICAgY29uc3QgdXBkYXRlZENhcmQ6IFZvY2FidWxhcnlDYXJkID0ge1xuICAgICAgICAgICAgLi4uY2FyZCxcbiAgICAgICAgICAgIHJldmlld0NvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LnJldmlld0NvdW50IHx8IDApICsgMSxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHJlc3BvbnNlLFxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBzY2hlZHVsZUluZm86IHtcbiAgICAgICAgICAgICAgICBkdWVEYXRlOiByZXZpZXdSZXN1bHQuZHVlRGF0ZSxcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogcmV2aWV3UmVzdWx0LmludGVydmFsLFxuICAgICAgICAgICAgICAgIGVhc2U6IHJldmlld1Jlc3VsdC5lYXNlLFxuICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LnJldmlld0NvdW50IHx8IDApICsgMSxcbiAgICAgICAgICAgICAgICBsYXBzZUNvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LmxhcHNlQ291bnQgfHwgMCkgKyAocmVzcG9uc2UgPT09IFJldmlld1Jlc3BvbnNlLkhhcmQgPyAxIDogMCksXG4gICAgICAgICAgICAgICAgZGVsYXllZERheXM6IGNhcmQuc2NoZWR1bGVJbmZvPy5kZWxheWVkRGF5cyB8fCAwLFxuICAgICAgICAgICAgICAgIHJlcGV0aXRpb246IHJldmlld1Jlc3VsdC5yZXBldGl0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVXBkYXRlIHNlc3Npb25cbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbi5jYXJkc1Jldmlld2VkKys7XG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24uY29tcGxldGVkQ2FyZHMucHVzaCh1cGRhdGVkQ2FyZCk7XG5cbiAgICAgICAgLy8gR2V0IG5leHQgY2FyZCBmcm9tIHJlbWFpbmluZyBjYXJkc1xuICAgICAgICBjb25zdCByZW1haW5pbmdDYXJkcyA9IHRoaXMuY3VycmVudFNlc3Npb24ucmVtYWluaW5nQ2FyZHMgfHwgW107XG4gICAgICAgIGNvbnN0IG5leHRDYXJkID0gdGhpcy5jdXJyZW50U2Vzc2lvbi5jYXJkc1Jldmlld2VkIDwgcmVtYWluaW5nQ2FyZHMubGVuZ3RoIFxuICAgICAgICAgICAgPyByZW1haW5pbmdDYXJkc1t0aGlzLmN1cnJlbnRTZXNzaW9uLmNhcmRzUmV2aWV3ZWRdIFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbi5jdXJyZW50Q2FyZCA9IG5leHRDYXJkO1xuXG4gICAgICAgIGNvbnN0IHNlc3Npb25Db21wbGV0ZSA9ICFuZXh0Q2FyZCB8fCB0aGlzLmN1cnJlbnRTZXNzaW9uLmNhcmRzUmV2aWV3ZWQgPj0gdGhpcy5jdXJyZW50U2Vzc2lvbi50b3RhbENhcmRzO1xuXG4gICAgICAgIGlmIChzZXNzaW9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kUmV2aWV3U2Vzc2lvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVwZGF0ZWRDYXJkLFxuICAgICAgICAgICAgbmV4dENhcmQsXG4gICAgICAgICAgICBzZXNzaW9uQ29tcGxldGVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmQgdGhlIGN1cnJlbnQgcmV2aWV3IHNlc3Npb25cbiAgICAgKi9cbiAgICBlbmRSZXZpZXdTZXNzaW9uKCk6IFJldmlld1Nlc3Npb24gfCBudWxsIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuY3VycmVudFNlc3Npb247XG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24gPSBudWxsO1xuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBzZXNzaW9uIGluZm9cbiAgICAgKi9cbiAgICBnZXRDdXJyZW50U2Vzc2lvbigpOiBSZXZpZXdTZXNzaW9uIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTZXNzaW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBzdHVkeSBzdGF0aXN0aWNzXG4gICAgICovXG4gICAgY2FsY3VsYXRlU3RhdGlzdGljcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSwgc3R1ZHlIaXN0b3J5PzogYW55W10pOiBTdHVkeVN0YXRpc3RpY3Mge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCB0b2RheSA9IG5vdy50b0RhdGVTdHJpbmcoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE92ZXJhbGwgc3RhdGlzdGljcyB1c2luZyB0aGUgYWxnb3JpdGhtJ3Mgc3RhdGljIG1ldGhvZFxuICAgICAgICBjb25zdCBvdmVyYWxsU3RhdHMgPSBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLmdldFN0YXRpc3RpY3MoYWxsQ2FyZHMpO1xuXG4gICAgICAgIC8vIFRvZGF5J3Mgc3RhdGlzdGljcyAod291bGQgbmVlZCB0byBiZSB0cmFja2VkIHNlcGFyYXRlbHkpXG4gICAgICAgIGNvbnN0IHRvZGF5U3RhdHMgPSB7XG4gICAgICAgICAgICBuZXdDYXJkczogMCwgLy8gV291bGQgdHJhY2sgZnJvbSBzZXNzaW9uIGRhdGFcbiAgICAgICAgICAgIHJldmlld2VkQ2FyZHM6IDAsIC8vIFdvdWxkIHRyYWNrIGZyb20gc2Vzc2lvbiBkYXRhXG4gICAgICAgICAgICB0b3RhbFRpbWU6IDAgLy8gV291bGQgdHJhY2sgZnJvbSBzZXNzaW9uIHRpbWluZ1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFN0cmVhayBjYWxjdWxhdGlvbiAod291bGQgbmVlZCBwZXJzaXN0ZW50IHN0b3JhZ2UpXG4gICAgICAgIGNvbnN0IHN0cmVha1N0YXRzID0ge1xuICAgICAgICAgICAgY3VycmVudERheXM6IDAsIC8vIFdvdWxkIGNhbGN1bGF0ZSBmcm9tIHN0dWR5IGhpc3RvcnlcbiAgICAgICAgICAgIGxvbmdlc3REYXlzOiAwLCAvLyBXb3VsZCBjYWxjdWxhdGUgZnJvbSBzdHVkeSBoaXN0b3J5XG4gICAgICAgICAgICBsYXN0U3R1ZHlEYXRlOiBudWxsIGFzIHN0cmluZyB8IG51bGxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9kYXk6IHRvZGF5U3RhdHMsXG4gICAgICAgICAgICBzdHJlYWs6IHN0cmVha1N0YXRzLFxuICAgICAgICAgICAgb3ZlcmFsbDogb3ZlcmFsbFN0YXRzXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNhcmRzIGR1ZSBpbiB0aGUgbmV4dCBOIGRheXNcbiAgICAgKi9cbiAgICBnZXRDYXJkc0R1ZUluRGF5cyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSwgZGF5czogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0uZ2V0Q2FyZHNEdWVJbkRheXMoYWxsQ2FyZHMsIGRheXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IGEgY2FyZCdzIHNjaGVkdWxlIChmb3IgdGVzdGluZyBvciBtYW51YWwgaW50ZXJ2ZW50aW9uKVxuICAgICAqL1xuICAgIHJlc2V0Q2FyZFNjaGVkdWxlKGNhcmQ6IFZvY2FidWxhcnlDYXJkKTogVm9jYWJ1bGFyeUNhcmQge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uY2FyZCxcbiAgICAgICAgICAgIHJldmlld0NvdW50OiAwLFxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBudWxsLFxuICAgICAgICAgICAgc2NoZWR1bGVJbmZvOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYW51YWxseSBzZXQgY2FyZCBkaWZmaWN1bHR5IChmb3IgYnVsayBvcGVyYXRpb25zKVxuICAgICAqL1xuICAgIHNldENhcmREaWZmaWN1bHR5KGNhcmQ6IFZvY2FidWxhcnlDYXJkLCBkaWZmaWN1bHR5OiBSZXZpZXdSZXNwb25zZSk6IFZvY2FidWxhcnlDYXJkIHtcbiAgICAgICAgY29uc3QgcmV2aWV3UmVzdWx0ID0gdGhpcy5hbGdvcml0aG0uc2NoZWR1bGUoZGlmZmljdWx0eSwgY2FyZC5zY2hlZHVsZUluZm8pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNhcmQsXG4gICAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgICAgc2NoZWR1bGVJbmZvOiB7XG4gICAgICAgICAgICAgICAgZHVlRGF0ZTogcmV2aWV3UmVzdWx0LmR1ZURhdGUsXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IHJldmlld1Jlc3VsdC5pbnRlcnZhbCxcbiAgICAgICAgICAgICAgICBlYXNlOiByZXZpZXdSZXN1bHQuZWFzZSxcbiAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogKGNhcmQuc2NoZWR1bGVJbmZvPy5yZXZpZXdDb3VudCB8fCAwKSArIDEsXG4gICAgICAgICAgICAgICAgbGFwc2VDb3VudDogKGNhcmQuc2NoZWR1bGVJbmZvPy5sYXBzZUNvdW50IHx8IDApICsgKGRpZmZpY3VsdHkgPT09IFJldmlld1Jlc3BvbnNlLkhhcmQgPyAxIDogMCksXG4gICAgICAgICAgICAgICAgZGVsYXllZERheXM6IDAsXG4gICAgICAgICAgICAgICAgcmVwZXRpdGlvbjogcmV2aWV3UmVzdWx0LnJlcGV0aXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYWxnb3JpdGhtIHNldHRpbmdzXG4gICAgICovXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFBhcnRpYWw8U1JTU2V0dGluZ3M+KTogdm9pZCB7XG4gICAgICAgIHRoaXMuYWxnb3JpdGhtLnVwZGF0ZVNldHRpbmdzKHNldHRpbmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBhbGdvcml0aG0gc2V0dGluZ3NcbiAgICAgKi9cbiAgICBnZXRTZXR0aW5ncygpOiBTUlNTZXR0aW5ncyB7XG4gICAgICAgIHJldHVybiB0aGlzLmFsZ29yaXRobS5nZXRTZXR0aW5ncygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGEgdW5pcXVlIHNlc3Npb24gSURcbiAgICAgKi9cbiAgICBwcml2YXRlIGdlbmVyYXRlU2Vzc2lvbklkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgc2Vzc2lvbl8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHJlY29tbWVuZGVkIGRhaWx5IHN0dWR5IGxvYWRcbiAgICAgKi9cbiAgICBnZXRSZWNvbW1lbmRlZERhaWx5Q2FyZHMoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiB7XG4gICAgICAgIG5ld0NhcmRzOiBudW1iZXI7XG4gICAgICAgIHJldmlld0NhcmRzOiBudW1iZXI7XG4gICAgICAgIHRvdGFsOiBudW1iZXI7XG4gICAgfSB7XG4gICAgICAgIGNvbnN0IGR1ZUNhcmRzID0gdGhpcy5nZXRDYXJkc0ZvclJldmlldyhhbGxDYXJkcyk7XG4gICAgICAgIGNvbnN0IG5ld0NhcmRzID0gdGhpcy5nZXROZXdDYXJkcyhhbGxDYXJkcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZWNvbW1lbmRlZCBsaW1pdHMgKGNvbmZpZ3VyYWJsZSlcbiAgICAgICAgY29uc3QgbWF4TmV3Q2FyZHNQZXJEYXkgPSAyMDtcbiAgICAgICAgY29uc3QgbWF4UmV2aWV3Q2FyZHNQZXJEYXkgPSAxMDA7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZWNvbW1lbmRlZE5ldyA9IE1hdGgubWluKG5ld0NhcmRzLmxlbmd0aCwgbWF4TmV3Q2FyZHNQZXJEYXkpO1xuICAgICAgICBjb25zdCByZWNvbW1lbmRlZFJldmlldyA9IE1hdGgubWluKGR1ZUNhcmRzLmxlbmd0aCAtIHJlY29tbWVuZGVkTmV3LCBtYXhSZXZpZXdDYXJkc1BlckRheSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV3Q2FyZHM6IHJlY29tbWVuZGVkTmV3LFxuICAgICAgICAgICAgcmV2aWV3Q2FyZHM6IHJlY29tbWVuZGVkUmV2aWV3LFxuICAgICAgICAgICAgdG90YWw6IHJlY29tbWVuZGVkTmV3ICsgcmVjb21tZW5kZWRSZXZpZXdcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHBvcnQgY2FyZHMgZm9yIGRhdGEgYW5hbHlzaXMgb3IgYmFja3VwXG4gICAgICovXG4gICAgZXhwb3J0U2NoZWR1bGVEYXRhKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogYW55W10ge1xuICAgICAgICByZXR1cm4gYWxsQ2FyZHMubWFwKGNhcmQgPT4gKHtcbiAgICAgICAgICAgIHdvcmQ6IGNhcmQud29yZCxcbiAgICAgICAgICAgIHJldmlld0NvdW50OiBjYXJkLnJldmlld0NvdW50LFxuICAgICAgICAgICAgZGlmZmljdWx0eTogY2FyZC5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBjYXJkLmxhc3RSZXZpZXdlZCxcbiAgICAgICAgICAgIHNjaGVkdWxlSW5mbzogY2FyZC5zY2hlZHVsZUluZm8sXG4gICAgICAgICAgICBhZGRlZERhdGU6IGNhcmQuYWRkZWREYXRlXG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG5leHQgcmV2aWV3IGludGVydmFscyBmb3IgZWFjaCBkaWZmaWN1bHR5IGxldmVsXG4gICAgICogU2hvd3MgdGhlIGV4YWN0IFNNLTIgYWxnb3JpdGhtIHJlc3VsdHMgd2l0aCBFLUZhY3RvciBpbmZvcm1hdGlvblxuICAgICAqL1xuICAgIGdldE5leHRSZXZpZXdJbnRlcnZhbHMoY2FyZDogVm9jYWJ1bGFyeUNhcmQpOiB7XG4gICAgICAgIGhhcmQ6IHsgaW50ZXJ2YWw6IG51bWJlcjsgZGlzcGxheVRleHQ6IHN0cmluZzsgZUZhY3RvcjogbnVtYmVyOyByZXBldGl0aW9uOiBudW1iZXIgfTtcbiAgICAgICAgZ29vZDogeyBpbnRlcnZhbDogbnVtYmVyOyBkaXNwbGF5VGV4dDogc3RyaW5nOyBlRmFjdG9yOiBudW1iZXI7IHJlcGV0aXRpb246IG51bWJlciB9O1xuICAgICAgICBlYXN5OiB7IGludGVydmFsOiBudW1iZXI7IGRpc3BsYXlUZXh0OiBzdHJpbmc7IGVGYWN0b3I6IG51bWJlcjsgcmVwZXRpdGlvbjogbnVtYmVyIH07XG4gICAgfSB7XG4gICAgICAgIGNvbnN0IGhhcmRSZXN1bHQgPSB0aGlzLmFsZ29yaXRobS5zY2hlZHVsZShSZXZpZXdSZXNwb25zZS5IYXJkLCBjYXJkLnNjaGVkdWxlSW5mbyk7XG4gICAgICAgIGNvbnN0IGdvb2RSZXN1bHQgPSB0aGlzLmFsZ29yaXRobS5zY2hlZHVsZShSZXZpZXdSZXNwb25zZS5Hb29kLCBjYXJkLnNjaGVkdWxlSW5mbyk7XG4gICAgICAgIGNvbnN0IGVhc3lSZXN1bHQgPSB0aGlzLmFsZ29yaXRobS5zY2hlZHVsZShSZXZpZXdSZXNwb25zZS5FYXN5LCBjYXJkLnNjaGVkdWxlSW5mbyk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhhcmQ6IHtcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogaGFyZFJlc3VsdC5pbnRlcnZhbCxcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dDogdGhpcy5mb3JtYXRJbnRlcnZhbChoYXJkUmVzdWx0LmludGVydmFsKSxcbiAgICAgICAgICAgICAgICBlRmFjdG9yOiBoYXJkUmVzdWx0LmVhc2UgLyAxMDAsIC8vIENvbnZlcnQgYmFjayB0byBFLUZhY3RvclxuICAgICAgICAgICAgICAgIHJlcGV0aXRpb246IGhhcmRSZXN1bHQucmVwZXRpdGlvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdvb2Q6IHtcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogZ29vZFJlc3VsdC5pbnRlcnZhbCxcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dDogdGhpcy5mb3JtYXRJbnRlcnZhbChnb29kUmVzdWx0LmludGVydmFsKSxcbiAgICAgICAgICAgICAgICBlRmFjdG9yOiBnb29kUmVzdWx0LmVhc2UgLyAxMDAsXG4gICAgICAgICAgICAgICAgcmVwZXRpdGlvbjogZ29vZFJlc3VsdC5yZXBldGl0aW9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZWFzeToge1xuICAgICAgICAgICAgICAgIGludGVydmFsOiBlYXN5UmVzdWx0LmludGVydmFsLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0OiB0aGlzLmZvcm1hdEludGVydmFsKGVhc3lSZXN1bHQuaW50ZXJ2YWwpLFxuICAgICAgICAgICAgICAgIGVGYWN0b3I6IGVhc3lSZXN1bHQuZWFzZSAvIDEwMCxcbiAgICAgICAgICAgICAgICByZXBldGl0aW9uOiBlYXN5UmVzdWx0LnJlcGV0aXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JtYXQgaW50ZXJ2YWwgYXMgaHVtYW4tcmVhZGFibGUgdGV4dFxuICAgICAqL1xuICAgIHByaXZhdGUgZm9ybWF0SW50ZXJ2YWwoZGF5czogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGRheXMgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3RvZGF5JztcbiAgICAgICAgfSBlbHNlIGlmIChkYXlzID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gJzEgZGF5JztcbiAgICAgICAgfSBlbHNlIGlmIChkYXlzIDwgMzApIHtcbiAgICAgICAgICAgIHJldHVybiBgJHtkYXlzfSBkYXkke2RheXMgPiAxID8gJ3MnIDogJyd9YDtcbiAgICAgICAgfSBlbHNlIGlmIChkYXlzIDwgMzY1KSB7XG4gICAgICAgICAgICBjb25zdCBtb250aHMgPSBNYXRoLnJvdW5kKGRheXMgLyAzMCAqIDEwKSAvIDEwO1xuICAgICAgICAgICAgcmV0dXJuIGAke21vbnRoc30gbW9udGgke21vbnRocyA+IDEgPyAncycgOiAnJ31gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeWVhcnMgPSBNYXRoLnJvdW5kKGRheXMgLyAzNjUgKiAxMCkgLyAxMDtcbiAgICAgICAgICAgIHJldHVybiBgJHt5ZWFyc30geWVhciR7eWVhcnMgPiAxID8gJ3MnIDogJyd9YDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBkZXRhaWxlZCBTTS0yIGFsZ29yaXRobSBzdGF0aXN0aWNzXG4gICAgICovXG4gICAgZ2V0U00yU3RhdGlzdGljcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IHtcbiAgICAgICAgb3ZlcnZpZXc6IHtcbiAgICAgICAgICAgIHRvdGFsQ2FyZHM6IG51bWJlcjtcbiAgICAgICAgICAgIG5ld0NhcmRzOiBudW1iZXI7XG4gICAgICAgICAgICBsZWFybmluZ0NhcmRzOiBudW1iZXI7XG4gICAgICAgICAgICBtYXR1cmVDYXJkczogbnVtYmVyO1xuICAgICAgICB9O1xuICAgICAgICByZXBldGl0aW9uczoge1xuICAgICAgICAgICAgcmVwMDogbnVtYmVyOyAvLyBcdUMwQzggXHVDRTc0XHVCNERDXG4gICAgICAgICAgICByZXAxOiBudW1iZXI7IC8vIFx1Q0NBQiBcdUJDODhcdUM5RjggXHVCQ0Y1XHVDMkI1XG4gICAgICAgICAgICByZXAyOiBudW1iZXI7IC8vIFx1QjQ1MCBcdUJDODhcdUM5RjggXHVCQ0Y1XHVDMkI1XG4gICAgICAgICAgICByZXAzUGx1czogbnVtYmVyOyAvLyBcdUMxMzggXHVCQzg4XHVDOUY4IFx1Qzc3NFx1QzBDMSBcdUJDRjVcdUMyQjVcbiAgICAgICAgfTtcbiAgICAgICAgZUZhY3RvcnM6IHtcbiAgICAgICAgICAgIGF2ZXJhZ2U6IG51bWJlcjtcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbjogeyByYW5nZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXTtcbiAgICAgICAgfTtcbiAgICAgICAgaW50ZXJ2YWxzOiB7XG4gICAgICAgICAgICBhdmVyYWdlOiBudW1iZXI7XG4gICAgICAgICAgICBkaXN0cmlidXRpb246IHsgcmFuZ2U6IHN0cmluZzsgY291bnQ6IG51bWJlciB9W107XG4gICAgICAgIH07XG4gICAgfSB7XG4gICAgICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgICAgICAgb3ZlcnZpZXc6IHsgdG90YWxDYXJkczogMCwgbmV3Q2FyZHM6IDAsIGxlYXJuaW5nQ2FyZHM6IDAsIG1hdHVyZUNhcmRzOiAwIH0sXG4gICAgICAgICAgICByZXBldGl0aW9uczogeyByZXAwOiAwLCByZXAxOiAwLCByZXAyOiAwLCByZXAzUGx1czogMCB9LFxuICAgICAgICAgICAgZUZhY3RvcnM6IHsgYXZlcmFnZTogMCwgZGlzdHJpYnV0aW9uOiBbXSBhcyB7IHJhbmdlOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfVtdIH0sXG4gICAgICAgICAgICBpbnRlcnZhbHM6IHsgYXZlcmFnZTogMCwgZGlzdHJpYnV0aW9uOiBbXSBhcyB7IHJhbmdlOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfVtdIH1cbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgdG90YWxFRmFjdG9yID0gMDtcbiAgICAgICAgbGV0IHRvdGFsSW50ZXJ2YWwgPSAwO1xuICAgICAgICBsZXQgY2FyZHNXaXRoU2NoZWR1bGUgPSAwO1xuICAgICAgICBjb25zdCBlRmFjdG9yQnVja2V0cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgICAgIGNvbnN0IGludGVydmFsQnVja2V0cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG5cbiAgICAgICAgYWxsQ2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgICAgICAgIHN0YXRzLm92ZXJ2aWV3LnRvdGFsQ2FyZHMrKztcblxuICAgICAgICAgICAgaWYgKCFjYXJkLnNjaGVkdWxlSW5mbykge1xuICAgICAgICAgICAgICAgIHN0YXRzLm92ZXJ2aWV3Lm5ld0NhcmRzKys7XG4gICAgICAgICAgICAgICAgc3RhdHMucmVwZXRpdGlvbnMucmVwMCsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYXJkc1dpdGhTY2hlZHVsZSsrO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGV0aXRpb24gPSBjYXJkLnNjaGVkdWxlSW5mby5yZXBldGl0aW9uIHx8IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgZUZhY3RvciA9IGNhcmQuc2NoZWR1bGVJbmZvLmVhc2UgLyAxMDA7XG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbDtcblxuICAgICAgICAgICAgICAgIHRvdGFsRUZhY3RvciArPSBlRmFjdG9yO1xuICAgICAgICAgICAgICAgIHRvdGFsSW50ZXJ2YWwgKz0gaW50ZXJ2YWw7XG5cbiAgICAgICAgICAgICAgICAvLyBSZXBldGl0aW9uIFx1QkQ4NFx1RDNFQ1xuICAgICAgICAgICAgICAgIGlmIChyZXBldGl0aW9uID09PSAxKSBzdGF0cy5yZXBldGl0aW9ucy5yZXAxKys7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVwZXRpdGlvbiA9PT0gMikgc3RhdHMucmVwZXRpdGlvbnMucmVwMisrO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlcGV0aXRpb24gPj0gMykgc3RhdHMucmVwZXRpdGlvbnMucmVwM1BsdXMrKztcbiAgICAgICAgICAgICAgICBlbHNlIHN0YXRzLnJlcGV0aXRpb25zLnJlcDArKztcblxuICAgICAgICAgICAgICAgIC8vIE1hdHVyZS9MZWFybmluZyBcdUJEODRcdUI5NThcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJ2YWwgPj0gMjEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHMub3ZlcnZpZXcubWF0dXJlQ2FyZHMrKztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0cy5vdmVydmlldy5sZWFybmluZ0NhcmRzKys7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRS1GYWN0b3IgXHVCRDg0XHVEM0VDXG4gICAgICAgICAgICAgICAgY29uc3QgZUZhY3RvclJhbmdlID0gdGhpcy5nZXRFRmFjdG9yUmFuZ2UoZUZhY3Rvcik7XG4gICAgICAgICAgICAgICAgZUZhY3RvckJ1Y2tldHMuc2V0KGVGYWN0b3JSYW5nZSwgKGVGYWN0b3JCdWNrZXRzLmdldChlRmFjdG9yUmFuZ2UpIHx8IDApICsgMSk7XG5cbiAgICAgICAgICAgICAgICAvLyBJbnRlcnZhbCBcdUJEODRcdUQzRUNcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnZhbFJhbmdlID0gdGhpcy5nZXRJbnRlcnZhbFJhbmdlKGludGVydmFsKTtcbiAgICAgICAgICAgICAgICBpbnRlcnZhbEJ1Y2tldHMuc2V0KGludGVydmFsUmFuZ2UsIChpbnRlcnZhbEJ1Y2tldHMuZ2V0KGludGVydmFsUmFuZ2UpIHx8IDApICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1RDNDOVx1QURFMCBcdUFDQzRcdUMwQjBcbiAgICAgICAgc3RhdHMuZUZhY3RvcnMuYXZlcmFnZSA9IGNhcmRzV2l0aFNjaGVkdWxlID4gMCA/IE1hdGgucm91bmQoKHRvdGFsRUZhY3RvciAvIGNhcmRzV2l0aFNjaGVkdWxlKSAqIDEwMCkgLyAxMDAgOiAwO1xuICAgICAgICBzdGF0cy5pbnRlcnZhbHMuYXZlcmFnZSA9IGNhcmRzV2l0aFNjaGVkdWxlID4gMCA/IE1hdGgucm91bmQodG90YWxJbnRlcnZhbCAvIGNhcmRzV2l0aFNjaGVkdWxlKSA6IDA7XG5cbiAgICAgICAgLy8gXHVCRDg0XHVEM0VDIFx1QkMzMFx1QzVGNCBcdUMwRERcdUMxMzFcbiAgICAgICAgc3RhdHMuZUZhY3RvcnMuZGlzdHJpYnV0aW9uID0gQXJyYXkuZnJvbShlRmFjdG9yQnVja2V0cy5lbnRyaWVzKCkpXG4gICAgICAgICAgICAubWFwKChbcmFuZ2UsIGNvdW50XSkgPT4gKHsgcmFuZ2UsIGNvdW50IH0pKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHBhcnNlRmxvYXQoYS5yYW5nZS5zcGxpdCgnLScpWzBdKSAtIHBhcnNlRmxvYXQoYi5yYW5nZS5zcGxpdCgnLScpWzBdKSk7XG5cbiAgICAgICAgc3RhdHMuaW50ZXJ2YWxzLmRpc3RyaWJ1dGlvbiA9IEFycmF5LmZyb20oaW50ZXJ2YWxCdWNrZXRzLmVudHJpZXMoKSlcbiAgICAgICAgICAgIC5tYXAoKFtyYW5nZSwgY291bnRdKSA9PiAoeyByYW5nZSwgY291bnQgfSkpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gdGhpcy5jb21wYXJlSW50ZXJ2YWxSYW5nZXMoYS5yYW5nZSwgYi5yYW5nZSkpO1xuXG4gICAgICAgIHJldHVybiBzdGF0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgRS1GYWN0b3IgcmFuZ2UgZm9yIGdyb3VwaW5nXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRFRmFjdG9yUmFuZ2UoZUZhY3RvcjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGVGYWN0b3IgPCAxLjUpIHJldHVybiAnMS4zLTEuNSc7XG4gICAgICAgIGlmIChlRmFjdG9yIDwgMi4wKSByZXR1cm4gJzEuNS0yLjAnO1xuICAgICAgICBpZiAoZUZhY3RvciA8IDIuNSkgcmV0dXJuICcyLjAtMi41JztcbiAgICAgICAgaWYgKGVGYWN0b3IgPCAzLjApIHJldHVybiAnMi41LTMuMCc7XG4gICAgICAgIGlmIChlRmFjdG9yIDwgMy41KSByZXR1cm4gJzMuMC0zLjUnO1xuICAgICAgICByZXR1cm4gJzMuNSsnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBpbnRlcnZhbCByYW5nZSBmb3IgZ3JvdXBpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEludGVydmFsUmFuZ2UoaW50ZXJ2YWw6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGlmIChpbnRlcnZhbCA9PT0gMSkgcmV0dXJuICcxIGRheSc7XG4gICAgICAgIGlmIChpbnRlcnZhbCA8PSA2KSByZXR1cm4gJzItNiBkYXlzJztcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDIwKSByZXR1cm4gJzctMjAgZGF5cyc7XG4gICAgICAgIGlmIChpbnRlcnZhbCA8PSA2MCkgcmV0dXJuICcyMS02MCBkYXlzJztcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDE4MCkgcmV0dXJuICcyLTYgbW9udGhzJztcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDM2NSkgcmV0dXJuICc2LTEyIG1vbnRocyc7XG4gICAgICAgIHJldHVybiAnMSsgeWVhcnMnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBhcmUgaW50ZXJ2YWwgcmFuZ2VzIGZvciBzb3J0aW5nXG4gICAgICovXG4gICAgcHJpdmF0ZSBjb21wYXJlSW50ZXJ2YWxSYW5nZXMoYTogc3RyaW5nLCBiOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBvcmRlciA9IFsnMSBkYXknLCAnMi02IGRheXMnLCAnNy0yMCBkYXlzJywgJzIxLTYwIGRheXMnLCAnMi02IG1vbnRocycsICc2LTEyIG1vbnRocycsICcxKyB5ZWFycyddO1xuICAgICAgICByZXR1cm4gb3JkZXIuaW5kZXhPZihhKSAtIG9yZGVyLmluZGV4T2YoYik7XG4gICAgfVxufSIsICJpbXBvcnQgeyBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZnJvbSAnLi4vLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCwgQm9vayB9IGZyb20gJy4uLy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XG5pbXBvcnQgeyBXb3JkU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2V4dGVybmFsL1dvcmRTZXJ2aWNlJztcbmltcG9ydCB7IExMTVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZSc7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5TW9kYWwgfSBmcm9tICcuLi8uLi92b2NhYnVsYXJ5LWxlYXJuaW5nL3VpL1ZvY2FidWxhcnlNb2RhbCc7XG5pbXBvcnQgeyBBZGRCb29rTW9kYWwgfSBmcm9tICcuL0FkZEJvb2tNb2RhbCc7XG5pbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xuICAgIGRhdGFiYXNlTWFuYWdlcjogVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcjtcbiAgICB3b3JkU2VydmljZTogV29yZFNlcnZpY2U7XG4gICAgbGxtU2VydmljZTogTExNU2VydmljZTtcbiAgICBjdXJyZW50VmlldzogJ2xpc3QnIHwgJ3N0YXRpc3RpY3MnIHwgJ2FkZCcgPSAnbGlzdCc7XG4gICAgc2VsZWN0ZWRXb3JkczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gICAgc2VsZWN0ZWRCb29rSWQ6IHN0cmluZyA9ICcnO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuZGF0YWJhc2VNYW5hZ2VyID0gcGx1Z2luLmRhdGFiYXNlTWFuYWdlcjtcbiAgICAgICAgdGhpcy53b3JkU2VydmljZSA9IG5ldyBXb3JkU2VydmljZSgpO1xuICAgICAgICB0aGlzLmxsbVNlcnZpY2UgPSBwbHVnaW4ubGxtU2VydmljZTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEN1cnJlbnRCb29rKCk/LmlkIHx8ICdkZWZhdWx0JztcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhc1ZhbGlkQXBpS2V5KCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVByb3ZpZGVyO1xuICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOlxuICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haUFwaUtleTtcbiAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljQXBpS2V5O1xuICAgICAgICAgICAgY2FzZSAnZ29vZ2xlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVBcGlLZXk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbWFuYWdlci1tb2RhbCcpO1xuICAgICAgICBjb250ZW50RWwuY2xhc3NMaXN0LmFkZCgnd2lkZS1tYW5hZ2VyLW1vZGFsJyk7XG5cbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1Q0Q1Q1x1QzJFMCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRDdXJyZW50Qm9vaygpPy5pZCB8fCAnZGVmYXVsdCc7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVCb29rU2VsZWN0b3JIZWFkZXIoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVOYXZpZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XG5cbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMSBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1Q0Q5NFx1QUMwMFxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdib29rQ3JlYXRlZCcsIHRoaXMuaGFuZGxlQm9va0NyZWF0ZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVCb29rQ3JlYXRlZChldmVudDogQ3VzdG9tRXZlbnQpIHtcbiAgICAgICAgY29uc3QgbmV3Qm9vayA9IGV2ZW50LmRldGFpbDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IG5ld0Jvb2suaWQ7XG4gICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEJvb2tTZWxlY3RvcigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQm9va1NlbGVjdG9ySGVhZGVyKCkge1xuICAgICAgICBjb25zdCBoZWFkZXJFbCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21hbmFnZXItaGVhZGVyJyB9KTtcbiAgICAgICAgaGVhZGVyRWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgaGVhZGVyRWwuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgICBoZWFkZXJFbC5zdHlsZS5nYXAgPSAnMThweCc7XG4gICAgICAgIGhlYWRlckVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxOHB4JztcblxuICAgICAgICBjb25zdCBib29rcyA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEFsbEJvb2tzKCk7XG4gICAgICAgIGNvbnN0IGJvb2tTZWxlY3QgPSBoZWFkZXJFbC5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdib29rLXNlbGVjdC1kcm9wZG93bicgfSk7XG4gICAgICAgIGJvb2tTZWxlY3Quc3R5bGUuaGVpZ2h0ID0gJzM4cHgnO1xuICAgICAgICBib29rU2VsZWN0LnN0eWxlLmZvbnRTaXplID0gJzE2cHgnO1xuICAgICAgICBib29rcy5mb3JFYWNoKGJvb2sgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBib29rLmlkO1xuICAgICAgICAgICAgb3B0aW9uLnRleHQgPSBib29rLm5hbWU7XG4gICAgICAgICAgICBpZiAoYm9vay5pZCA9PT0gdGhpcy5zZWxlY3RlZEJvb2tJZCkgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGJvb2tTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJvb2tTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSAoZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2V0Q3VycmVudEJvb2sodGhpcy5zZWxlY3RlZEJvb2tJZCk7XG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBhZGRCb29rQnRuID0gaGVhZGVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzBDOCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDRDk0XHVBQzAwJywgY2xzOiAnYm9vay1tYW5hZ2UtYnV0dG9uJyB9KTtcbiAgICAgICAgYWRkQm9va0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFkZEJvb2tNb2RhbCA9IG5ldyBBZGRCb29rTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGFkZEJvb2tNb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUMwRERcdUMxMzFcdUI0MThcdUJBNzQgXHVCNERDXHVCODZEXHVCMkU0XHVDNkI0XHVBQ0ZDIFx1QzEyMFx1RDBERFx1Qzc0NCBcdUMwQzhcdUI4NUNcdUFDRTBcdUNFNjhcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hCb29rU2VsZWN0b3IoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhZGRCb29rTW9kYWwub3BlbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBkZWxCb29rQnRuID0gaGVhZGVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1RDYwNFx1QzdBQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEFEXHVDODFDJywgY2xzOiAnYm9vay1kZWxldGUtYnV0dG9uJyB9KTtcbiAgICAgICAgY29uc3QgaXNEZWZhdWx0ID0gdGhpcy5zZWxlY3RlZEJvb2tJZCA9PT0gJ2RlZmF1bHQnO1xuICAgICAgICBpZiAoaXNEZWZhdWx0KSB7XG4gICAgICAgICAgICBkZWxCb29rQnRuLnNldEF0dHIoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIGRlbEJvb2tCdG4uYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsQm9va0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0RlZmF1bHQpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDODE1XHVCQ0Y0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxuICAgICAgICAgICAgY29uc3QgY3VycmVudEJvb2sgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRCb29rKHRoaXMuc2VsZWN0ZWRCb29rSWQpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50Qm9vaykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MTVcdUJDRjRcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NTggXHVCMkU4XHVDNUI0IFx1QzIxOCBcdUQ2NTVcdUM3NzhcbiAgICAgICAgICAgIGNvbnN0IHdvcmRzSW5Cb29rID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZHNCeUJvb2sodGhpcy5zZWxlY3RlZEJvb2tJZCk7XG4gICAgICAgICAgICBjb25zdCB3b3JkQ291bnQgPSB3b3Jkc0luQm9vay5sZW5ndGg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QzBDMVx1QzEzOFx1RDU1QyBcdUQ2NTVcdUM3NzggXHVCQUE4XHVCMkVDIFx1RDQ1Q1x1QzJEQ1xuICAgICAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBBRFx1QzgxQyBcdUQ2NTVcdUM3NzgnLFxuICAgICAgICAgICAgICAgIGBcdUM4MTVcdUI5RDBcdUI4NUMgXCIke2N1cnJlbnRCb29rLm5hbWV9XCIgXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQ0IFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz9cXG5cXG5gICtcbiAgICAgICAgICAgICAgICBgXHUyMDIyIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODQ6ICR7Y3VycmVudEJvb2submFtZX1cXG5gICtcbiAgICAgICAgICAgICAgICBgXHUyMDIyIFx1RDNFQ1x1RDU2OFx1QjQxQyBcdUIyRThcdUM1QjQgXHVDMjE4OiAke3dvcmRDb3VudH1cdUFDMUNcXG5gICtcbiAgICAgICAgICAgICAgICBgXHUyMDIyIFx1QzBERFx1QzEzMVx1Qzc3QzogJHtuZXcgRGF0ZShjdXJyZW50Qm9vay5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygna28tS1InKX1cXG5cXG5gICtcbiAgICAgICAgICAgICAgICBgXHUyNkEwXHVGRTBGIFx1Qzc3NCBcdUM3OTFcdUM1QzVcdUM3NDAgXHVCNDE4XHVCM0NDXHVCOUI0IFx1QzIxOCBcdUM1QzZcdUM3M0NcdUJBNzAsIFx1QjJFOFx1QzVCNFx1QzdBNVx1QUNGQyBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzYwMVx1QUQ2Q1x1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwQURcdUM4MUNcdUI0MjlcdUIyQzhcdUIyRTQuYCxcbiAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5kZWxldGVCb29rKHRoaXMuc2VsZWN0ZWRCb29rSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9ICdkZWZhdWx0JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNldEN1cnJlbnRCb29rKCdkZWZhdWx0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7Y3VycmVudEJvb2submFtZX1cIiBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NzQgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzBBRFx1QzgxQ1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMwQURcdUM4MUMgXHVDMkU0XHVEMzI4OiAnICsgZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZU5hdmlnYXRpb24oKSB7XG4gICAgICAgIGNvbnN0IG5hdkVsID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbWFuYWdlci1uYXZpZ2F0aW9uJyB9KTtcbiAgICAgICAgY29uc3QgbGlzdEJ0biA9IG5hdkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRThcdUM1QjQgXHVCQUE5XHVCODVEJywgY2xzOiAnbmF2LWJ1dHRvbicgfSk7XG4gICAgICAgIGxpc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3ID0gJ2xpc3QnO1xuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0YXRzQnRuID0gbmF2RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1RDFCNVx1QUNDNCcsIGNsczogJ25hdi1idXR0b24nIH0pO1xuICAgICAgICBzdGF0c0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXcgPSAnc3RhdGlzdGljcyc7XG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYWRkQnRuID0gbmF2RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLCBjbHM6ICduYXYtYnV0dG9uJyB9KTtcbiAgICAgICAgYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9ICdhZGQnO1xuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0YXJ0TGVhcm5pbmdCdXR0b24gPSBuYXZFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUM4MDRcdUNDQjQgXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjUgXHVDMkRDXHVDNzkxJyxcbiAgICAgICAgICAgIGNsczogJ25hdi1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBzdGFydExlYXJuaW5nQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgbmV3IFZvY2FidWxhcnlNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93Q3VycmVudFZpZXcoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5tYW5hZ2VyLWNvbnRlbnQnKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtYW5hZ2VyLWNvbnRlbnQnIH0pO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnRWaWV3KSB7XG4gICAgICAgICAgICBjYXNlICdsaXN0JzpcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dXb3JkTGlzdChjb250ZW50RWwgYXMgSFRNTEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc3RhdGlzdGljcyc6XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93U3RhdGlzdGljcyhjb250ZW50RWwgYXMgSFRNTEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYWRkJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dBZGRXb3JkKGNvbnRlbnRFbCBhcyBIVE1MRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dXb3JkTGlzdChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh3b3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUJFNDRcdUM1QjRcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NzRcdUJDRjRcdUMxMzhcdUM2OTQhJyxcbiAgICAgICAgICAgICAgICBjbHM6ICdlbXB0eS1tZXNzYWdlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzZWFyY2hFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZWFyY2gtc2VjdGlvbicgfSk7XG4gICAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2VhcmNoRWwuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdUIyRThcdUM1QjQgXHVBQzgwXHVDMEM5Li4uJyxcbiAgICAgICAgICAgIGNsczogJ3NlYXJjaC1pbnB1dCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uQ29udHJvbHMgPSBzZWFyY2hFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZWxlY3Rpb24tY29udHJvbHMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWxsU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkV29yZHMuc2l6ZSA9PT0gd29yZHMubGVuZ3RoICYmIHdvcmRzLmxlbmd0aCA+IDA7XG4gICAgICAgIGNvbnN0IHNlbGVjdEFsbEJ0biA9IHNlbGVjdGlvbkNvbnRyb2xzLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogYWxsU2VsZWN0ZWQgPyAnXHVDODA0XHVDQ0I0IFx1RDU3NFx1QzgxQycgOiAnXHVDODA0XHVDQ0I0IFx1QzEyMFx1RDBERCcsXG4gICAgICAgICAgICBjbHM6ICdzZWxlY3Rpb24tYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRXb3Jkcy5zaXplID09PSB3b3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuY2xlYXIoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgd29yZHMuZm9yRWFjaCh3b3JkID0+IHRoaXMuc2VsZWN0ZWRXb3Jkcy5hZGQod29yZC53b3JkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBmZXRjaFNlbGVjdGVkQnV0dG9uID0gc2VsZWN0aW9uQ29udHJvbHMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVDMTIwXHVEMEREIFx1QjJFOFx1QzVCNCBcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwJyxcbiAgICAgICAgICAgIGNsczogJ2ZldGNoLXNlbGVjdGVkLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIGZldGNoU2VsZWN0ZWRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFdvcmRzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUMxMjBcdUQwRERcdUI0MUMgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNob3dGZXRjaFNlbGVjdGVkTWVhbmluZ3NNb2RhbCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB3b3JkTGlzdEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtbGlzdCcgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZW5kZXJXb3JkcyA9IChmaWx0ZXJlZFdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSA9PiB7XG4gICAgICAgICAgICB3b3JkTGlzdEVsLmVtcHR5KCk7XG4gICAgICAgICAgICBmaWx0ZXJlZFdvcmRzLmZvckVhY2god29yZCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVXb3JkSXRlbSh3b3JkTGlzdEVsLCB3b3JkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRXb3JkcyA9IHF1ZXJ5ID8gXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2VhcmNoV29yZHMocXVlcnkpIDogd29yZHM7XG4gICAgICAgICAgICByZW5kZXJXb3JkcyhmaWx0ZXJlZFdvcmRzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVuZGVyV29yZHMod29yZHMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlV29yZEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgd29yZDogVm9jYWJ1bGFyeUNhcmQpIHtcbiAgICAgICAgY29uc3Qgd29yZEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtaXRlbScgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjaGVja2JveCA9IHdvcmRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgICAgY2xzOiAnd29yZC1jaGVja2JveCdcbiAgICAgICAgfSk7XG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkV29yZHMuaGFzKHdvcmQud29yZCk7XG4gICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc0NoZWNrZWQgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZDtcbiAgICAgICAgICAgIGlmIChpc0NoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuYWRkKHdvcmQud29yZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5kZWxldGUod29yZC53b3JkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB3b3JkSGVhZGVyID0gd29yZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtaGVhZGVyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHdvcmRUaXRsZUVsID0gd29yZEhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IGNsczogJ3dvcmQtdGl0bGUnIH0pO1xuICAgICAgICBpZiAod29yZC5wcm9udW5jaWF0aW9uICYmIHdvcmQucHJvbnVuY2lhdGlvbi50cmltKCkpIHtcbiAgICAgICAgICAgIHdvcmRUaXRsZUVsLmlubmVySFRNTCA9IGAke3dvcmQud29yZH0gPHNwYW4gY2xhc3M9XCJwcm9udW5jaWF0aW9uXCI+WyR7d29yZC5wcm9udW5jaWF0aW9ufV08L3NwYW4+YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdvcmRUaXRsZUVsLnRleHRDb250ZW50ID0gd29yZC53b3JkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5QmFkZ2UgPSB3b3JkSGVhZGVyLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0RGlmZmljdWx0eVRleHQod29yZC5kaWZmaWN1bHR5KSxcbiAgICAgICAgICAgIGNsczogYGRpZmZpY3VsdHktYmFkZ2UgJHt3b3JkLmRpZmZpY3VsdHl9YFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB3b3JkQ29udGVudCA9IHdvcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWNvbnRlbnQnIH0pO1xuICAgICAgICB3b3JkQ29udGVudC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiBgXHVCNzNCOiAke3dvcmQubWVhbmluZ3Muam9pbignLCAnKX1gLFxuICAgICAgICAgICAgY2xzOiAnd29yZC1tZWFuaW5ncydcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB3b3JkQ29udGVudC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiBgXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxODogJHt3b3JkLnJldmlld0NvdW50fVx1RDY4Q2AsXG4gICAgICAgICAgICBjbHM6ICdyZXZpZXctY291bnQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh3b3JkLmxhc3RSZXZpZXdlZCkge1xuICAgICAgICAgICAgd29yZENvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQ0Y1XHVDMkI1OiAke2Zvcm1hdERhdGUod29yZC5sYXN0UmV2aWV3ZWQpfWAsXG4gICAgICAgICAgICAgICAgY2xzOiAnbGFzdC1yZXZpZXdlZCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgd29yZEFjdGlvbnMgPSB3b3JkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1hY3Rpb25zJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBZHZhbmNlZEZlYXR1cmVzKSB7XG4gICAgICAgICAgICBjb25zdCBmZXRjaEJ1dHRvbiA9IHdvcmRBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjQgXHVCNzNCIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCcsXG4gICAgICAgICAgICAgICAgY2xzOiAnYWN0aW9uLWJ1dHRvbiBmZXRjaC1zaW5nbGUtYnV0dG9uJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmZXRjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoU2luZ2xlV29yZE1lYW5pbmcod29yZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IHdvcmRBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1QzBBRFx1QzgxQycsXG4gICAgICAgICAgICBjbHM6ICdhY3Rpb24tYnV0dG9uIGRlbGV0ZS1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgICAgICdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDJyxcbiAgICAgICAgICAgICAgICBgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjRcdUI5N0MgXHVDMEFEXHVDODFDXHVENTU4XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDP2AsXG4gICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5yZW1vdmVXb3JkKHdvcmQud29yZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd1N0YXRpc3RpY3MoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBzdGF0cyA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFN0YXRpc3RpY3MoKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0YXRzR3JpZCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0cy1ncmlkJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJhc2ljU3RhdHMgPSBzdGF0c0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3RhdHMtc2VjdGlvbicgfSk7XG4gICAgICAgIGJhc2ljU3RhdHMuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVBRTMwXHVCQ0Y4IFx1RDFCNVx1QUNDNCcsIGNsczogJ3N0YXRzLXRpdGxlJyB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oYmFzaWNTdGF0cywgJ1x1Q0QxRCBcdUIyRThcdUM1QjQgXHVDMjE4Jywgc3RhdHMudG90YWxXb3Jkcy50b1N0cmluZygpKTtcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShiYXNpY1N0YXRzLCAnXHVDRDFEIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTgnLCBzdGF0cy50b3RhbFJldmlld3MudG9TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oYmFzaWNTdGF0cywgJ1x1QzVGMFx1QzE4RCBcdUQ1NTlcdUMyQjVcdUM3N0MnLCBgJHtzdGF0cy5zdHJlYWtEYXlzfVx1Qzc3Q2ApO1xuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGJhc2ljU3RhdHMsICdcdUQzQzlcdUFERTAgXHVCMDlDXHVDNzc0XHVCM0M0Jywgc3RhdHMuYXZlcmFnZURpZmZpY3VsdHkudG9GaXhlZCgxKSk7XG5cbiAgICAgICAgY29uc3QgZGlmZmljdWx0eVN0YXRzID0gc3RhdHNHcmlkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXRzLXNlY3Rpb24nIH0pO1xuICAgICAgICBkaWZmaWN1bHR5U3RhdHMuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVCMDlDXHVDNzc0XHVCM0M0XHVCQ0M0IFx1QkQ4NFx1RDNFQycsIGNsczogJ3N0YXRzLXRpdGxlJyB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oZGlmZmljdWx0eVN0YXRzLCAnXHVDMjZDXHVDNkMwJywgc3RhdHMud29yZHNCeURpZmZpY3VsdHkuZWFzeS50b1N0cmluZygpKTtcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShkaWZmaWN1bHR5U3RhdHMsICdcdUM4OEJcdUM3NEMnLCBzdGF0cy53b3Jkc0J5RGlmZmljdWx0eS5nb29kLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGRpZmZpY3VsdHlTdGF0cywgJ1x1QzVCNFx1QjgyNFx1QzZDMCcsIHN0YXRzLndvcmRzQnlEaWZmaWN1bHR5LmhhcmQudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgY29uc3QgYWN0aXZpdHlTdGF0cyA9IHN0YXRzR3JpZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0cy1zZWN0aW9uJyB9KTtcbiAgICAgICAgYWN0aXZpdHlTdGF0cy5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUNENUNcdUFERkMgN1x1Qzc3QyBcdUQ2NUNcdUIzRDknLCBjbHM6ICdzdGF0cy10aXRsZScgfSk7XG4gICAgICAgIFxuICAgICAgICBzdGF0cy5yZWNlbnRBY3Rpdml0eS5mb3JFYWNoKGFjdGl2aXR5ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShhY3Rpdml0eS5kYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoJ2tvLUtSJywgeyBcbiAgICAgICAgICAgICAgICBtb250aDogJ3Nob3J0JywgXG4gICAgICAgICAgICAgICAgZGF5OiAnbnVtZXJpYycgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oYWN0aXZpdHlTdGF0cywgZGF0ZSwgXG4gICAgICAgICAgICAgICAgYFx1RDU1OVx1QzJCNTogJHthY3Rpdml0eS53b3Jkc1N0dWRpZWR9LCBcdUJDRjVcdUMyQjU6ICR7YWN0aXZpdHkucmV2aWV3c0NvbXBsZXRlZH1gKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTdGF0SXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0YXRFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0LWl0ZW0nIH0pO1xuICAgICAgICBzdGF0RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGxhYmVsLCBjbHM6ICdzdGF0LWxhYmVsJyB9KTtcbiAgICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB2YWx1ZSwgY2xzOiAnc3RhdC12YWx1ZScgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93QWRkV29yZChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGFkZFNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYWRkLXdvcmQtc2VjdGlvbicgfSk7XG4gICAgICAgIFxuICAgICAgICBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzBDOCBcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJywgY2xzOiAnc2VjdGlvbi10aXRsZScgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpbnB1dEVsID0gYWRkU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWlucHV0LWdyb3VwJyB9KTtcbiAgICAgICAgY29uc3Qgd29yZElucHV0ID0gaW5wdXRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1x1QzYwMVx1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQgKFx1QzYwODogYmVhdXRpZnVsKScsXG4gICAgICAgICAgICBjbHM6ICd3b3JkLWlucHV0J1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSBpbnB1dEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLFxuICAgICAgICAgICAgY2xzOiAnYWRkLWJ1dHRvbidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYWRkV29yZCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdvcmQgPSB3b3JkSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgaWYgKCF3b3JkKSB7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicsXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ2Vycm9yLW1lc3NhZ2UnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhID0gYXdhaXQgdGhpcy53b3JkU2VydmljZS5nZXRXb3JkRGF0YSh3b3JkKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2b2NhYnVsYXJ5Q2FyZDogVm9jYWJ1bGFyeUNhcmQgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLndvcmREYXRhLFxuICAgICAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogMCxcbiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eTogJ2dvb2QnLFxuICAgICAgICAgICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGFkZGVkRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICBib29rSWQ6IHRoaXMuc2VsZWN0ZWRCb29rSWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQodm9jYWJ1bGFyeUNhcmQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdvcmRJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgXCIke3dvcmR9XCIgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUNEOTRcdUFDMDBcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQhYCxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnc3VjY2Vzcy1tZXNzYWdlJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzTXNnID0gYWRkU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc3VjY2Vzcy1tZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzTXNnKSBzdWNjZXNzTXNnLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NThcdUIyOTQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnZXJyb3ItbWVzc2FnZSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRXb3JkKTtcbiAgICAgICAgd29yZElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICAgIGFkZFdvcmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXREaWZmaWN1bHR5VGV4dChkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpOiBzdHJpbmcge1xuICAgICAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcbiAgICAgICAgICAgIGNhc2UgJ2Vhc3knOiByZXR1cm4gJ1x1QzI2Q1x1QzZDMCc7XG4gICAgICAgICAgICBjYXNlICdnb29kJzogcmV0dXJuICdcdUM4OEJcdUM3NEMnO1xuICAgICAgICAgICAgY2FzZSAnaGFyZCc6IHJldHVybiAnXHVDNUI0XHVCODI0XHVDNkMwJztcbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiAnXHVDODhCXHVDNzRDJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhcnRSZXZpZXcod29yZHM6IFZvY2FidWxhcnlDYXJkW10pIHtcbiAgICAgICAgY29uc3QgcmV2aWV3TW9kYWwgPSBuZXcgVm9jYWJ1bGFyeVJldmlld01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgd29yZHMpO1xuICAgICAgICByZXZpZXdNb2RhbC5vcGVuKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93RmV0Y2hTZWxlY3RlZE1lYW5pbmdzTW9kYWwoKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkV29yZExpc3QgPSBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRXb3Jkcyk7XG4gICAgICAgIG5ldyBGZXRjaFNlbGVjdGVkTWVhbmluZ3NNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIHNlbGVjdGVkV29yZExpc3QpLm9wZW4oKTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgYXN5bmMgZmV0Y2hTaW5nbGVXb3JkTWVhbmluZyh3b3JkOiBWb2NhYnVsYXJ5Q2FyZCkge1xuICAgICAgICBpZiAoIXRoaXMuaGFzVmFsaWRBcGlLZXkoKSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTExNIEFQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDMTI0XHVDODE1XHVDNUQwXHVDMTFDIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcbiAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgJ1x1QjJFOFx1QzVCNCBcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwJyxcbiAgICAgICAgICAgIGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNFx1Qzc1OCBcdUI3M0JcdUM3NDQgXHVDMEM4XHVCODVDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz8gXHVBRTMwXHVDODc0IFx1QzgxNVx1QkNGNFx1QUMwMFx1QzVCNFx1QzUwQ1x1QzZDQ1x1QzlEMVx1QjJDOFx1QjJFNC5gLFxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTQgXHVDOTExLi4uYCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsbG1SZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmxsbVNlcnZpY2UuZ2V0V29yZERldGFpbHMod29yZC53b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChsbG1SZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGV0YWlsID0gbGxtUmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhID0gdGhpcy5wbHVnaW4ubGxtU2VydmljZS5jb252ZXJ0VG9Xb3JkRGF0YSh3b3JkRGV0YWlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFdvcmQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ud29yZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogd29yZERhdGEubWVhbmluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IHdvcmREYXRhLmV4YW1wbGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3Jkczogd29yZERhdGEuc2ltaWxhcldvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZERhdGEod29yZC53b3JkLCB1cGRhdGVkV29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUFDMDAgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAgXHVDMkU0XHVEMzI4OiAke2xsbVJlc3BvbnNlLmVycm9yfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkLndvcmR9XCIgXHVDQzk4XHVCOUFDIFx1QzJFNFx1RDMyODpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHt3b3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZWZyZXNoQm9va1NlbGVjdG9yKCkge1xuICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQ0IFx1QjJFNFx1QzJEQyBcdUI4NUNcdUI0RENcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUQ1RTRcdUIzNTRcdUM3NTggXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyMFx1RDBERCBcdUI0RENcdUI4NkRcdUIyRTRcdUM2QjRcdUM3NDQgXHVDMEM4XHVCODVDXHVBQ0UwXHVDRTY4XG4gICAgICAgIGNvbnN0IGhlYWRlckVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLm1hbmFnZXItaGVhZGVyJyk7XG4gICAgICAgIGlmIChoZWFkZXJFbCkge1xuICAgICAgICAgICAgY29uc3QgYm9va1NlbGVjdCA9IGhlYWRlckVsLnF1ZXJ5U2VsZWN0b3IoJy5ib29rLXNlbGVjdC1kcm9wZG93bicpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgICAgICAgICAgaWYgKGJvb2tTZWxlY3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBib29rU2VsZWN0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvb2tzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsQm9va3MoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVDNjM1XHVDMTU4XHVCNEU0IFx1QzgxQ1x1QUM3MFxuICAgICAgICAgICAgICAgIGJvb2tTZWxlY3QuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHVDMEM4XHVCODVDXHVDNkI0IFx1QzYzNVx1QzE1OFx1QjRFNCBcdUNEOTRcdUFDMDBcbiAgICAgICAgICAgICAgICBib29rcy5mb3JFYWNoKGJvb2sgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gYm9vay5pZDtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHQgPSBib29rLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChib29rLmlkID09PSBjdXJyZW50VmFsdWUgfHwgYm9vay5pZCA9PT0gdGhpcy5zZWxlY3RlZEJvb2tJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSBib29rLmlkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJvb2tTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QkRGMCBcdUMwQzhcdUI4NUNcdUFDRTBcdUNFNjhcbiAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzgxQ1x1QUM3MFxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdib29rQ3JlYXRlZCcsIHRoaXMuaGFuZGxlQm9va0NyZWF0ZWQuYmluZCh0aGlzKSk7XG4gICAgfVxufVxuXG5cbmNsYXNzIFZvY2FidWxhcnlSZXZpZXdNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xuICAgIHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdO1xuICAgIGN1cnJlbnRJbmRleCA9IDA7XG4gICAgc2hvd0Fuc3dlciA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4sIHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLndvcmRzID0gd29yZHM7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBpZiAodGhpcy53b3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2hvd0N1cnJlbnRXb3JkKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93Q3VycmVudFdvcmQoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2b2NhYnVsYXJ5LWxlYXJuaW5nLW1vZGFsJyk7XG5cbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxuICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmV2aWV3LW1vZGFsLWhlaWdodCcsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0fXZoYCk7XG5cbiAgICAgICAgY29uc3QgY3VycmVudFdvcmQgPSB0aGlzLndvcmRzW3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByb2dyZXNzRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmV2aWV3LXByb2dyZXNzJyB9KTtcbiAgICAgICAgcHJvZ3Jlc3NFbC5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiBgJHt0aGlzLmN1cnJlbnRJbmRleCArIDF9IC8gJHt0aGlzLndvcmRzLmxlbmd0aH1gLFxuICAgICAgICAgICAgY2xzOiAncHJvZ3Jlc3MtdGV4dCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2FyZEVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jldmlldy1jYXJkJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1Q0U3NFx1QjREQyBcdUMwQURcdUM4MUMgXHVCQzg0XHVEMkJDIChcdUM2MjRcdUI5NzhcdUNBQkQgXHVDMEMxXHVCMkU4KVxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBjYXJkRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQycsXG4gICAgICAgICAgICBjbHM6ICdjYXJkLWRlbGV0ZS1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZURlbGV0ZUNhcmQoKSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB3b3JkRWwgPSBjYXJkRWwuY3JlYXRlRWwoJ2gxJywgeyBjbHM6ICdyZXZpZXctd29yZCcgfSk7XG4gICAgICAgIGlmIChjdXJyZW50V29yZC5wcm9udW5jaWF0aW9uICYmIGN1cnJlbnRXb3JkLnByb251bmNpYXRpb24udHJpbSgpKSB7XG4gICAgICAgICAgICB3b3JkRWwuaW5uZXJIVE1MID0gYCR7Y3VycmVudFdvcmQud29yZH0gPHNwYW4gY2xhc3M9XCJwcm9udW5jaWF0aW9uXCI+WyR7Y3VycmVudFdvcmQucHJvbnVuY2lhdGlvbn1dPC9zcGFuPmA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3b3JkRWwudGV4dENvbnRlbnQgPSBjdXJyZW50V29yZC53b3JkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50V29yZC5zaW1pbGFyV29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJFbCA9IGNhcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzaW1pbGFyLXdvcmRzJyB9KTtcbiAgICAgICAgICAgICAgICBzaW1pbGFyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNDonIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJMaXN0ID0gc2ltaWxhckVsLmNyZWF0ZUVsKCd1bCcpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkLnNpbWlsYXJXb3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IHdvcmQgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50V29yZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhhbXBsZXNFbCA9IGNhcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlcycgfSk7XG4gICAgICAgICAgICAgICAgZXhhbXBsZXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzhcdUI0RTQ6JyB9KTtcbiAgICAgICAgICAgICAgICBjdXJyZW50V29yZC5leGFtcGxlcy5mb3JFYWNoKGV4YW1wbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBleGFtcGxlc0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBleGFtcGxlLmVuZ2xpc2gsIGNsczogJ2V4YW1wbGUnIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjaGVja0J0biA9IGNhcmRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUUzMCcsXG4gICAgICAgICAgICAgICAgY2xzOiAnY2hlY2stYW5zd2VyLWJ1dHRvbidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2hlY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50V29yZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBhbnN3ZXJFbCA9IGNhcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdhbnN3ZXItc2VjdGlvbicgfSk7XG4gICAgICAgICAgICBhbnN3ZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUI3M0I6JyB9KTtcbiAgICAgICAgICAgIGNvbnN0IG1lYW5pbmdzTGlzdCA9IGFuc3dlckVsLmNyZWF0ZUVsKCd1bCcpO1xuICAgICAgICAgICAgY3VycmVudFdvcmQubWVhbmluZ3MuZm9yRWFjaChtZWFuaW5nID0+IHtcbiAgICAgICAgICAgICAgICBtZWFuaW5nc0xpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBtZWFuaW5nIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50V29yZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYW5zd2VyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNjA4XHVCQjM4IFx1QkM4OFx1QzVFRDonIH0pO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkLmV4YW1wbGVzLmZvckVhY2goZXhhbXBsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFuc3dlckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBleGFtcGxlLmtvcmVhbiwgY2xzOiAndHJhbnNsYXRpb24nIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJldmlld0J1dHRvbnMoY2FyZEVsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUmV2aWV3QnV0dG9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHJldmlld1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmV2aWV3LWJ1dHRvbnMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaGFyZEJ0biA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzVCNFx1QjgyNFx1QzZDMCcsIGNsczogJ3Jldmlldy1idG4gaGFyZCcgfSk7XG4gICAgICAgIGNvbnN0IGdvb2RCdG4gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUM4OEJcdUM3NEMnLCBjbHM6ICdyZXZpZXctYnRuIGdvb2QnIH0pO1xuICAgICAgICBjb25zdCBlYXN5QnRuID0gcmV2aWV3U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDMjZDXHVDNkMwJywgY2xzOiAncmV2aWV3LWJ0biBlYXN5JyB9KTtcblxuICAgICAgICBoYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2hhcmQnKSk7XG4gICAgICAgIGdvb2RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnZ29vZCcpKTtcbiAgICAgICAgZWFzeUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdlYXN5JykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUmV2aWV3KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJykge1xuICAgICAgICBjb25zdCBjdXJyZW50V29yZCA9IHRoaXMud29yZHNbdGhpcy5jdXJyZW50SW5kZXhdO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZChjdXJyZW50V29yZC53b3JkLCBkaWZmaWN1bHR5KTtcblxuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCsrO1xuICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcblxuICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPj0gdGhpcy53b3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbXBsZXRpb24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRXb3JkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRXb3JkID0gdGhpcy53b3Jkc1t0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQycsXG4gICAgICAgICAgICBgXCIke2N1cnJlbnRXb3JkLndvcmR9XCIgXHVCMkU4XHVDNUI0XHVCOTdDIFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz9cXG5cXG5cdUM3NzQgXHVDNzkxXHVDNUM1XHVDNzQwIFx1QjQxOFx1QjNDQ1x1QjlCNCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmAsXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnJlbW92ZVdvcmQoY3VycmVudFdvcmQud29yZCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmRzLnNwbGljZSh0aGlzLmN1cnJlbnRJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53b3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbXBsZXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ID49IHRoaXMud29yZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHRoaXMud29yZHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRXb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dDb21wbGV0aW9uKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29uc3QgY29tcGxldGlvbkVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbXBsZXRpb24nIH0pO1xuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVCQ0Y1XHVDMkI1IFx1QzY0NFx1QjhDQyEnIH0pO1xuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0XHVCOTdDIFx1QkNGNVx1QzJCNVx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH0pO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnLCBjbHM6ICdjbG9zZS1idG4nIH0pO1xuICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuY2xhc3MgRmV0Y2hTZWxlY3RlZE1lYW5pbmdzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcbiAgICBzZWxlY3RlZFdvcmRzOiBzdHJpbmdbXTtcbiAgICBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luLCBzZWxlY3RlZFdvcmRzOiBzdHJpbmdbXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzID0gc2VsZWN0ZWRXb3JkcztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdmZXRjaC1zZWxlY3RlZC1tZWFuaW5ncy1tb2RhbCcpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IFxuICAgICAgICAgICAgdGV4dDogYFx1QzEyMFx1RDBERFx1QjQxQyAke3RoaXMuc2VsZWN0ZWRXb3Jkcy5sZW5ndGh9XHVBQzFDIFx1QjJFOFx1QzVCNCBcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwYCxcbiAgICAgICAgICAgIGNsczogJ21vZGFsLXRpdGxlJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgdGV4dDogYFx1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NTggXHVDMEMxXHVDMTM4IFx1QzgxNVx1QkNGNFx1Qjk3QyBMTE0gQVBJXHVCOTdDIFx1RDFCNVx1RDU3NCBcdUFDMDBcdUM4MzhcdUM2MzVcdUIyQzhcdUIyRTQuYCxcbiAgICAgICAgICAgIGNsczogJ21vZGFsLWRlc2NyaXB0aW9uJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB3b3JkTGlzdEVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NlbGVjdGVkLXdvcmRzLWxpc3QnIH0pO1xuICAgICAgICB3b3JkTGlzdEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUI0RTQ6JyB9KTtcbiAgICAgICAgY29uc3Qgd29yZHNDb250YWluZXIgPSB3b3JkTGlzdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmRzLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuZm9yRWFjaCh3b3JkID0+IHtcbiAgICAgICAgICAgIHdvcmRzQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiB3b3JkLFxuICAgICAgICAgICAgICAgIGNsczogJ3NlbGVjdGVkLXdvcmQtdGFnJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZmV0Y2hCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxuICAgICAgICAgICAgY2xzOiAnZmV0Y2gtYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgZmV0Y2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZldGNoU2VsZWN0ZWRNZWFuaW5ncygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3Mtc2VjdGlvbicgfSk7XG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLXRleHQnIH0pO1xuICAgICAgICBjb25zdCBwcm9ncmVzc0JhciA9IHByb2dyZXNzU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1iYXInIH0pO1xuICAgICAgICBjb25zdCBwcm9ncmVzc0ZpbGwgPSBwcm9ncmVzc0Jhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1maWxsJyB9KTtcblxuICAgICAgICBjb25zdCByZXN1bHRTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1zZWN0aW9uJyB9KTtcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZmV0Y2hTZWxlY3RlZE1lYW5pbmdzKCkge1xuICAgICAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zaG93UHJvZ3Jlc3ModGhpcy5zZWxlY3RlZFdvcmRzLmxlbmd0aCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucGx1Z2luLmxsbVNlcnZpY2UuZ2V0TXVsdGlwbGVXb3JkRGV0YWlscyh0aGlzLnNlbGVjdGVkV29yZHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgQXJyYXkuaXNBcnJheShyZXN1bHQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzV29yZHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgY29uc3QgZmFpbGVkV29yZHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmREYXRhIG9mIHJlc3VsdC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZERhdGEud29yZCAmJiB3b3JkRGF0YS5tZWFuaW5ncyAmJiB3b3JkRGF0YS5tZWFuaW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdXb3JkID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmQod29yZERhdGEud29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nV29yZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkV29yZDogVm9jYWJ1bGFyeUNhcmQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1dvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkRGF0YS5wcm9udW5jaWF0aW9uIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IHdvcmREYXRhLm1lYW5pbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IHdvcmREYXRhLmV4YW1wbGVzIHx8IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiB3b3JkRGF0YS5zaW1pbGFyV29yZHMgfHwgW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmREYXRhKHdvcmREYXRhLndvcmQsIHVwZGF0ZWRXb3JkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc1dvcmRzLnB1c2god29yZERhdGEud29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRXb3Jkcy5wdXNoKHdvcmREYXRhLndvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkRGF0YS53b3JkfVwiIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOCBcdUMyRTRcdUQzMjg6YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkV29yZHMucHVzaCh3b3JkRGF0YS53b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93UmVzdWx0cyh7IHN1Y2Nlc3M6IHN1Y2Nlc3NXb3JkcywgZmFpbGVkOiBmYWlsZWRXb3JkcyB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzc1dvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgJHtzdWNjZXNzV29yZHMubGVuZ3RofVx1QUMxQ1x1Qzc1OCBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQhYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVQcm9ncmVzcygpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0XHVCMzcwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNDogJyArIChyZXN1bHQuZXJyb3IgfHwgJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OCcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NFx1QjM3MCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQ6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dQcm9ncmVzcyh0b3RhbFdvcmRzOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIFxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IGBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUM5MTEuLi4gKDAvJHt0b3RhbFdvcmRzfSlgO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGlkZVByb2dyZXNzKCkge1xuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAocHJvZ3Jlc3NTZWN0aW9uKSB7XG4gICAgICAgICAgICBwcm9ncmVzc1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd1Jlc3VsdHMocmVzdWx0czogeyBzdWNjZXNzOiBzdHJpbmdbXTsgZmFpbGVkOiBzdHJpbmdbXSB9KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IHN1bW1hcnlFbCA9IHJlc3VsdFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0cy1zdW1tYXJ5JyB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc0VsID0gc3VtbWFyeUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1pdGVtIHN1Y2Nlc3MnIH0pO1xuICAgICAgICAgICAgc3VjY2Vzc0VsLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNzA1IFx1QzEzMVx1QUNGNTogJHtyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RofVx1QUMxQ2AsXG4gICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LWNvdW50J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA8PSAxMCkge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3NFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuc3VjY2Vzcy5qb2luKCcsICcpLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtd29yZHMnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0cy5mYWlsZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZmFpbGVkRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gZXJyb3InIH0pO1xuICAgICAgICAgICAgZmFpbGVkRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI3NEMgXHVDMkU0XHVEMzI4OiAke3Jlc3VsdHMuZmFpbGVkLmxlbmd0aH1cdUFDMUNgLFxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJlc3VsdHMuZmFpbGVkLmxlbmd0aCA8PSAxMCkge1xuICAgICAgICAgICAgICAgIGZhaWxlZEVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5mYWlsZWQuam9pbignLCAnKSxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IHJlc3VsdFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWJ1dHRvbnMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnLCBjbHM6ICdjbG9zZS1idXR0b24nIH0pO1xuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuLy8gXHVBQzA0XHVCMkU4XHVENTVDIFx1RDY1NVx1Qzc3OCBcdUJBQThcdUIyRUMgXHVEMDc0XHVCNzk4XHVDMkE0XG5jbGFzcyBDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgb25Db25maXJtOiAoKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgb25Db25maXJtOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm07XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnY29uZmlybS1tb2RhbCcpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMudGl0bGUsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0aGlzLm1lc3NhZ2UsIGNsczogJ21vZGFsLW1lc3NhZ2UnIH0pO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVENjU1XHVDNzc4JyxcbiAgICAgICAgICAgIGNsczogJ2NvbmZpcm0tYnV0dG9uIHByaW1hcnknXG4gICAgICAgIH0pO1xuICAgICAgICBjb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbkNvbmZpcm0oKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxuICAgICAgICAgICAgY2xzOiAnY2FuY2VsLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn0gIiwgImltcG9ydCB7IFdvcmREYXRhIH0gZnJvbSAnLi4vLi4vVm9jYWJ1bGFyeUNhcmQnO1xuXG5leHBvcnQgY2xhc3MgV29yZFNlcnZpY2Uge1xuICAgIHByaXZhdGUgYXBpQmFzZVVybCA9ICdodHRwczovL2FwaS5kaWN0aW9uYXJ5YXBpLmRldi9hcGkvdjIvZW50cmllcy9lbic7XG5cbiAgICBhc3luYyBnZXRXb3JkRGF0YSh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmREYXRhPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBcdUMyRTRcdUM4MUMgQVBJIFx1RDYzOFx1Q0Q5QyBcdUIzMDBcdUMyRTAgXHVDMEQ4XHVENTBDIFx1QjM3MFx1Qzc3NFx1RDEzMFx1Qjk3QyBcdUJDMThcdUQ2NThcbiAgICAgICAgICAgIC8vIFx1QzJFNFx1QzgxQyBcdUFENkNcdUQ2MDRcdUM1RDBcdUMxMUNcdUIyOTQgRGljdGlvbmFyeSBBUElcdUIwOTggXHVCMkU0XHVCOTc4IEFQSVx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNFxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2FtcGxlV29yZERhdGEod29yZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXHVCMkU4XHVDNUI0IFx1QjM3MFx1Qzc3NFx1RDEzMFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MkMgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0U2FtcGxlV29yZERhdGEod29yZDogc3RyaW5nKTogV29yZERhdGEge1xuICAgICAgICAvLyBcdUMwRDhcdUQ1MEMgXHVCMzcwXHVDNzc0XHVEMTMwIC0gXHVDMkU0XHVDODFDXHVCODVDXHVCMjk0IEFQSVx1QzVEMFx1QzExQyBcdUFDMDBcdUM4MzhcdUM2NDBcdUM1N0MgXHVENTY4XG4gICAgICAgIGNvbnN0IHNhbXBsZURhdGE6IHsgW2tleTogc3RyaW5nXTogV29yZERhdGEgfSA9IHtcbiAgICAgICAgICAgICdiZWF1dGlmdWwnOiB7XG4gICAgICAgICAgICAgICAgd29yZDogJ2JlYXV0aWZ1bCcsXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJy9cdTAyQzhianVcdTAyRDB0XHUwMjZBZlx1MDI1OWwvJyxcbiAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUM1NDRcdUI5ODRcdUIyRTRcdUM2QjQnLCAnXHVDNjA4XHVDMDVDJywgJ1x1RDZDQ1x1Qjk2RFx1RDU1QyddLFxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogWydwcmV0dHknLCAnZ29yZ2VvdXMnLCAnc3R1bm5pbmcnLCAnYXR0cmFjdGl2ZSddLFxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdTaGUgaXMgYSBiZWF1dGlmdWwgd29tYW4uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QURGOFx1QjE0MFx1QjI5NCBcdUM1NDRcdUI5ODRcdUIyRTRcdUM2QjQgXHVDNUVDXHVDMTMxXHVDNzg1XHVCMkM4XHVCMkU0LidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1RoZSBzdW5zZXQgd2FzIGJlYXV0aWZ1bC4nLFxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDNzdDXHVCQUIwXHVDNzc0IFx1QzU0NFx1Qjk4NFx1QjJFNFx1QzZFMFx1QzJCNVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdXaGF0IGEgYmVhdXRpZnVsIGRheSEnLFxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDODE1XHVCOUQwIFx1QzU0NFx1Qjk4NFx1QjJFNFx1QzZCNCBcdUQ1NThcdUI4RThcdUIxMjRcdUM2OTQhJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdoYXBweSc6IHtcbiAgICAgICAgICAgICAgICB3b3JkOiAnaGFwcHknLFxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcvXHUwMkM4aFx1MDBFNnBpLycsXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVENTg5XHVCQ0Y1XHVENTVDJywgJ1x1QUUzMFx1QzA1QycsICdcdUM5OTBcdUFDNzBcdUM2QjQnXSxcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFsnam95ZnVsJywgJ2NoZWVyZnVsJywgJ2dsYWQnLCAncGxlYXNlZCddLFxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdJIGFtIGhhcHB5IHRvIHNlZSB5b3UuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QjJGOVx1QzJFMFx1Qzc0NCBcdUI5Q0NcdUIwOThcdUMxMUMgXHVBRTMwXHVDMDY5XHVCMkM4XHVCMkU0LidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1NoZSBoYXMgYSBoYXBweSBmYW1pbHkuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QURGOFx1QjE0MFx1QjI5NCBcdUQ1ODlcdUJDRjVcdUQ1NUMgXHVBQzAwXHVDODcxXHVDNzQ0IFx1QUMwMFx1QzlDMFx1QUNFMCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnSGFwcHkgYmlydGhkYXkhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QzBERFx1Qzc3QyBcdUNEOTVcdUQ1NThcdUQ1NjlcdUIyQzhcdUIyRTQhJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdsZWFybic6IHtcbiAgICAgICAgICAgICAgICB3b3JkOiAnbGVhcm4nLFxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcvbFx1MDI1Q1x1MDJEMHJuLycsXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVCQzMwXHVDNkIwXHVCMkU0JywgJ1x1RDU1OVx1QzJCNVx1RDU1OFx1QjJFNCcsICdcdUM3NzVcdUQ3ODhcdUIyRTQnXSxcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFsnc3R1ZHknLCAnYWNxdWlyZScsICdncmFzcCcsICd1bmRlcnN0YW5kJ10sXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ0kgd2FudCB0byBsZWFybiBFbmdsaXNoLicsXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM4MDBcdUIyOTQgXHVDNjAxXHVDNUI0XHVCOTdDIFx1QkMzMFx1QzZCMFx1QUNFMCBcdUMyRjZcdUMyQjVcdUIyQzhcdUIyRTQuJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnQ2hpbGRyZW4gbGVhcm4gcXVpY2tseS4nLFxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDNTQ0XHVDNzc0XHVCNEU0XHVDNzQwIFx1QkU2OFx1QjlBQyBcdUJDMzBcdUM2QzFcdUIyQzhcdUIyRTQuJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnWW91IGNhbiBsZWFybiBmcm9tIHlvdXIgbWlzdGFrZXMuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QzJFNFx1QzIxOFx1Qjg1Q1x1QkQ4MFx1RDEzMCBcdUJDMzBcdUM2QjggXHVDMjE4IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gXHVDNzg1XHVCODI1XHVCNDFDIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUMwRDhcdUQ1MEMgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNUQwIFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUJDMThcdUQ2NTgsIFx1QzVDNlx1QzczQ1x1QkE3NCBcdUFFMzBcdUJDRjggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzBERFx1QzEzMVxuICAgICAgICBpZiAoc2FtcGxlRGF0YVt3b3JkLnRvTG93ZXJDYXNlKCldKSB7XG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlRGF0YVt3b3JkLnRvTG93ZXJDYXNlKCldO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUJDMThcdUQ2NThcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdvcmQ6IHdvcmQsXG4gICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnL3Byb251bmNpYXRpb24vJyxcbiAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Qzc1OFx1QkJGOFx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nXSxcbiAgICAgICAgICAgIHNpbWlsYXJXb3JkczogW10sXG4gICAgICAgICAgICBleGFtcGxlczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogYFRoaXMgaXMgYW4gZXhhbXBsZSBzZW50ZW5jZSB3aXRoIHRoZSB3b3JkIFwiJHt3b3JkfVwiLmAsXG4gICAgICAgICAgICAgICAgICAgIGtvcmVhbjogYFwiJHt3b3JkfVwiXHVCNzdDXHVCMjk0IFx1QjJFOFx1QzVCNFx1QUMwMCBcdUQzRUNcdUQ1NjhcdUI0MUMgXHVDNjA4XHVCQjM4XHVDNzg1XHVCMkM4XHVCMkU0LmBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gXHVDMkU0XHVDODFDIEFQSSBcdUQ2MzhcdUNEOUNcdUM3NDQgXHVDNzA0XHVENTVDIFx1QkE1NFx1QzExQ1x1QjREQyAoXHVENUE1XHVENkM0IFx1QUQ2Q1x1RDYwNClcbiAgICBwcml2YXRlIGFzeW5jIGZldGNoRnJvbUFQSSh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYXBpQmFzZVVybH0vJHt3b3JkfWApO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFQSSBcdUM2OTRcdUNDQUQgXHVDMkU0XHVEMzI4OiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbn0gIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcblxuZXhwb3J0IGNsYXNzIEFkZEJvb2tNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnYWRkLWJvb2stbW9kYWwnKTtcblxuICAgICAgICAvLyBcdUM4MUNcdUJBQTlcbiAgICAgICAgY29uc3QgdGl0bGVFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVDRDk0XHVBQzAwJywgY2xzOiAnbW9kYWwtdGl0bGUnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVDMTI0XHVCQTg1XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1QzBDOFx1Qjg1Q1x1QzZCNCBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVDMEREXHVDMTMxXHVENTY5XHVCMkM4XHVCMkU0LicsXG4gICAgICAgICAgICBjbHM6ICdtb2RhbC1kZXNjcmlwdGlvbidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHVDNzg1XHVCODI1IFx1RDNGQ1xuICAgICAgICBjb25zdCBmb3JtRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2Zvcm0nLCB7IGNsczogJ2Jvb2stZm9ybScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0IFx1Qzc4NVx1QjgyNVxuICAgICAgICBjb25zdCBuYW1lU2VjdGlvbiA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JtLXNlY3Rpb24nIH0pO1xuICAgICAgICBjb25zdCBuYW1lTGFiZWwgPSBuYW1lU2VjdGlvbi5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODQgKicsXG4gICAgICAgICAgICBjbHM6ICdmb3JtLWxhYmVsJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbmFtZUlucHV0ID0gbmFtZVNlY3Rpb24uY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdUM2MDg6IFRPRUlDIFx1QjJFOFx1QzVCNFx1QzdBNSwgXHVDNzdDXHVDMEMxXHVDMEREXHVENjVDIFx1QjJFOFx1QzVCNFx1QzdBNScsXG4gICAgICAgICAgICBjbHM6ICdmb3JtLWlucHV0J1xuICAgICAgICB9KTtcbiAgICAgICAgbmFtZUlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcblxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTI0XHVCQTg1IFx1Qzc4NVx1QjgyNVxuICAgICAgICBjb25zdCBkZXNjU2VjdGlvbiA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JtLXNlY3Rpb24nIH0pO1xuICAgICAgICBjb25zdCBkZXNjTGFiZWwgPSBkZXNjU2VjdGlvbi5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1QzEyNFx1QkE4NSAoXHVDMTIwXHVEMEREXHVDMEFDXHVENTZEKScsXG4gICAgICAgICAgICBjbHM6ICdmb3JtLWxhYmVsJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGVzY0lucHV0ID0gZGVzY1NlY3Rpb24uY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdUIyRThcdUM1QjRcdUM3QTVcdUM1RDAgXHVCMzAwXHVENTVDIFx1QzEyNFx1QkE4NVx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuJyxcbiAgICAgICAgICAgIGNsczogJ2Zvcm0tdGV4dGFyZWEnXG4gICAgICAgIH0pO1xuICAgICAgICBkZXNjSW5wdXQucm93cyA9IDM7XG5cbiAgICAgICAgLy8gXHVCQzg0XHVEMkJDIFx1QzYwMVx1QzVFRFxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNyZWF0ZUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMScsXG4gICAgICAgICAgICBjbHM6ICdjcmVhdGUtYnV0dG9uIHByaW1hcnknLFxuICAgICAgICAgICAgdHlwZTogJ3N1Ym1pdCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxuICAgICAgICAgICAgY2xzOiAnY2FuY2VsLWJ1dHRvbicsXG4gICAgICAgICAgICB0eXBlOiAnYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuICAgICAgICAvLyBcdUQzRkMgXHVDODFDXHVDRDlDIFx1Qzc3NFx1QkNBNFx1RDJCOFxuICAgICAgICBmb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQm9vayhuYW1lSW5wdXQudmFsdWUudHJpbSgpLCBkZXNjSW5wdXQudmFsdWUudHJpbSgpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRW50ZXIgXHVEMEE0XHVCODVDIFx1QzgxQ1x1Q0Q5QyBcdUFDMDBcdUIyQTVcdUQ1NThcdUIzQzRcdUI4NURcbiAgICAgICAgbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGZvcm1FbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnc3VibWl0JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUQzRUNcdUNFRTRcdUMyQTQgXHVDMTI0XHVDODE1XG4gICAgICAgIG5hbWVJbnB1dC5mb2N1cygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlQm9vayhuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKCFuYW1lLnRyaW0oKSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1QjJFOFx1QzVCNFx1QzdBNVx1QUNGQyBcdUM3NzRcdUI5ODQgXHVDOTExXHVCQ0Y1IFx1RDY1NVx1Qzc3OFxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdCb29rcyA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xuICAgICAgICAgICAgY29uc3QgaXNEdXBsaWNhdGUgPSBleGlzdGluZ0Jvb2tzLnNvbWUoYm9vayA9PiBcbiAgICAgICAgICAgICAgICBib29rLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoaXNEdXBsaWNhdGUpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODRcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxXG4gICAgICAgICAgICBjb25zdCBuZXdCb29rID0gYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmNyZWF0ZUJvb2sobmFtZSwgZGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7bmFtZX1cIiBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NzQgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzBERFx1QzEzMVx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVCQUE4XHVCMkVDIFx1QjJFQlx1QUUzMFxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUJBQThcdUI0RTAgXHVCQUE4XHVCMkVDXHVDNUQwXHVDMTFDIFx1QzIxOFx1QzJFMFx1RDU2MCBcdUMyMTggXHVDNzg4XHVCM0M0XHVCODVEIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUJDMUNcdUMwRERcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdib29rQ3JlYXRlZCcsIHsgZGV0YWlsOiBuZXdCb29rIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzFcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn0gIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcbmltcG9ydCB7IFdvcmRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2UnO1xuaW1wb3J0IHsgQWRkQm9va01vZGFsIH0gZnJvbSAnLi4vLi4vYm9vay1tYW5hZ2VtZW50L3VpL0FkZEJvb2tNb2RhbCc7XG5pbXBvcnQgeyB2YWxpZGF0ZVdvcmQsIHZhbGlkYXRlQmF0Y2gsIHNhbml0aXplTWFya2Rvd24gfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvdmFsaWRhdGlvbic7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSwgQ2FuY2VsbGF0aW9uRXJyb3IsIHByb2Nlc3NCYXRjaFdpdGhDYW5jZWxsYXRpb24gfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvQ2FuY2VsbGF0aW9uVG9rZW4nO1xuaW1wb3J0IHsgZ2V0Q29uZmlnVmFsdWUsIENPTkZJR19QQVRIUyB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9Db25maWcnO1xuXG5leHBvcnQgY2xhc3MgQWRkV29yZHNNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xuICAgIHdvcmRTZXJ2aWNlOiBXb3JkU2VydmljZTtcbiAgICBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICBwcml2YXRlIGJvb2tTZWxlY3Q6IEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIHByaXZhdGUgY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2U6IENhbmNlbGxhdGlvblRva2VuU291cmNlIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy53b3JkU2VydmljZSA9IG5ldyBXb3JkU2VydmljZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2FkZC13b3Jkcy1tb2RhbCcpO1xuXG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUNENUNcdUMyRTAgXHVCMzcwXHVDNzc0XHVEMTMwIFx1Qjg1Q1x1QjREQ1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XG5cbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyMFx1RDBERCBcdUI0RENcdUI4NkRcdUIyRTRcdUM2QjRcbiAgICAgICAgY29uc3QgYm9va1NlbGVjdFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYm9vay1zZWxlY3Qtc2VjdGlvbicgfSk7XG4gICAgICAgIGNvbnN0IGJvb2tMYWJlbCA9IGJvb2tTZWxlY3RTZWN0aW9uLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjBcdUQwREQnLCBjbHM6ICdib29rLXNlbGVjdC1sYWJlbCcgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBib29rU2VsZWN0Q29udGFpbmVyID0gYm9va1NlbGVjdFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYm9vay1zZWxlY3QtY29udGFpbmVyJyB9KTtcbiAgICAgICAgdGhpcy5ib29rU2VsZWN0ID0gYm9va1NlbGVjdENvbnRhaW5lci5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdib29rLXNlbGVjdC1kcm9wZG93bicgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDRDk0XHVBQzAwIFx1QkM4NFx1RDJCQ1xuICAgICAgICBjb25zdCBhZGRCb29rQnV0dG9uID0gYm9va1NlbGVjdENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUNEOTRcdUFDMDAnLFxuICAgICAgICAgICAgY2xzOiAnYWRkLWJvb2stYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgYWRkQm9va0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMub3BlbkFkZEJvb2tNb2RhbCgpKTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQm9va1NlbGVjdCgpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5ib29rU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEJvb2tJZCA9IChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuc2V0Q3VycmVudEJvb2soc2VsZWN0ZWRCb29rSWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDhcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYm9va0NyZWF0ZWQnLCB0aGlzLmhhbmRsZUJvb2tDcmVhdGVkLmJpbmQodGhpcykpO1xuXG4gICAgICAgIC8vIFx1QzgxQ1x1QkFBOVxuICAgICAgICBjb25zdCB0aXRsZUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUMxMjRcdUJBODVcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVDRDk0XHVBQzAwXHVENTYwIFx1QzYwMVx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIFx1QUMwMSBcdUIyRThcdUM1QjRcdUIyOTQgXHVDMEM4IFx1QzkwNFx1Qjg1QyBcdUFENkNcdUJEODRcdUI0MjlcdUIyQzhcdUIyRTQuJyxcbiAgICAgICAgICAgIGNsczogJ21vZGFsLWRlc2NyaXB0aW9uJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUM3ODVcdUI4MjUgXHVDNjAxXHVDNUVEXG4gICAgICAgIGNvbnN0IGlucHV0U2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdpbnB1dC1zZWN0aW9uJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRleHRhcmVhID0gaW5wdXRTZWN0aW9uLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnYmVhdXRpZnVsXFxuaGFwcHlcXG5sZWFyblxcbnN0dWR5XFxud29ya1xcbi4uLicsXG4gICAgICAgICAgICBjbHM6ICd3b3Jkcy10ZXh0YXJlYSdcbiAgICAgICAgfSk7XG4gICAgICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZSgncm93cycsICcxMCcpO1xuXG4gICAgICAgIC8vIFx1QzYwOFx1QzJEQyBcdUJDODRcdUQyQkNcbiAgICAgICAgY29uc3QgZXhhbXBsZUJ0biA9IGlucHV0U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUM2MDhcdUMyREMgXHVCMkU4XHVDNUI0XHVCNEU0IFx1QkQ4OFx1QjdFQ1x1QzYyNFx1QUUzMCcsXG4gICAgICAgICAgICBjbHM6ICdleGFtcGxlLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIGV4YW1wbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICdiZWF1dGlmdWxcXG5oYXBweVxcbmxlYXJuXFxuc3R1ZHlcXG53b3JrXFxuaW1wb3J0YW50XFxuc3VjY2Vzc1xcbmtub3dsZWRnZVxcbmV4cGVyaWVuY2VcXG5mcmVlZG9tJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHVCQzg0XHVEMkJDIFx1QzYwMVx1QzVFRFxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsXG4gICAgICAgICAgICBjbHM6ICdhZGQtYnV0dG9uIHByaW1hcnknXG4gICAgICAgIH0pO1xuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmFkZFdvcmRzKHRleHRhcmVhLnZhbHVlLCB0aGlzLmJvb2tTZWxlY3QudmFsdWUpKTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxPcGVyYXRpb24oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUM5QzRcdUQ1ODkgXHVDMEMxXHVENjY5IFx1RDQ1Q1x1QzJEQyBcdUM2MDFcdUM1RURcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLXNlY3Rpb24nIH0pO1xuICAgICAgICBwcm9ncmVzc1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IHByb2dyZXNzU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1OFx1QjI5NCBcdUM5MTEuLi4nLFxuICAgICAgICAgICAgY2xzOiAncHJvZ3Jlc3MtdGV4dCdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwcm9ncmVzc0JhciA9IHByb2dyZXNzU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1iYXInIH0pO1xuICAgICAgICBjb25zdCBwcm9ncmVzc0ZpbGwgPSBwcm9ncmVzc0Jhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1maWxsJyB9KTtcblxuICAgICAgICAvLyBcdUFDQjBcdUFDRkMgXHVENDVDXHVDMkRDIFx1QzYwMVx1QzVFRFxuICAgICAgICBjb25zdCByZXN1bHRTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1zZWN0aW9uJyB9KTtcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgIC8vIEVudGVyIFx1RDBBNFx1Qjg1QyBcdUNEOTRcdUFDMDAgXHVBQzAwXHVCMkE1XHVENTU4XHVCM0M0XHVCODVEXG4gICAgICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUuY3RybEtleSAmJiBlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkV29yZHModGV4dGFyZWEudmFsdWUsIHRoaXMuYm9va1NlbGVjdC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1RDNFQ1x1Q0VFNFx1QzJBNCBcdUMxMjRcdUM4MTVcbiAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGFkZFdvcmRzKGlucHV0VGV4dDogc3RyaW5nLCBib29rSWQ6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcpIHJldHVybjtcblxuICAgICAgICBjb25zdCB3b3JkcyA9IHRoaXMucGFyc2VXb3JkcyhpbnB1dFRleHQpO1xuICAgICAgICBpZiAod29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUNEOTRcdUFDMDBcdUQ1NjAgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZSA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xuICAgICAgICB0aGlzLnNob3dQcm9ncmVzcyh3b3Jkcy5sZW5ndGgpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNhbmNlbEJ1dHRvbih0cnVlKTtcblxuICAgICAgICBjb25zdCByZXN1bHRzID0ge1xuICAgICAgICAgICAgc3VjY2VzczogW10gYXMgc3RyaW5nW10sXG4gICAgICAgICAgICBmYWlsZWQ6IFtdIGFzIHN0cmluZ1tdLFxuICAgICAgICAgICAgYWxyZWFkeUV4aXN0czogW10gYXMgc3RyaW5nW11cbiAgICAgICAgfTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc0JhdGNoV2l0aENhbmNlbGxhdGlvbihcbiAgICAgICAgICAgICAgICB3b3JkcyxcbiAgICAgICAgICAgICAgICBhc3luYyAod29yZDogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTRcdUM5QzAgXHVENjU1XHVDNzc4XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nV29yZCA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRXb3JkKHdvcmQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdXb3JkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLmFscmVhZHlFeGlzdHMucHVzaCh3b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZERhdGEgPSBhd2FpdCB0aGlzLndvcmRTZXJ2aWNlLmdldFdvcmREYXRhKHdvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXb3JkRGF0YVx1Qjk3QyBWb2NhYnVsYXJ5Q2FyZFx1Qjg1QyBcdUJDQzBcdUQ2NThcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZvY2FidWxhcnlDYXJkID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLndvcmREYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6ICdnb29kJyBhcyBjb25zdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va0lkOiBib29rSWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMCBcdUNEOTRcdUFDMDBcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5hZGRXb3JkKHZvY2FidWxhcnlDYXJkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuc3VjY2Vzcy5wdXNoKHdvcmQpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh3b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIiBcdUNEOTRcdUFDMDAgXHVDMkU0XHVEMzI4OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBiYXRjaFNpemU6IGdldENvbmZpZ1ZhbHVlPG51bWJlcj4oQ09ORklHX1BBVEhTLkJBVENIX0RFRkFVTFRfU0laRSksXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5OiBnZXRDb25maWdWYWx1ZTxudW1iZXI+KENPTkZJR19QQVRIUy5CQVRDSF9ERUxBWSksXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGxhdGlvblRva2VuOiB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlLnRva2VuLFxuICAgICAgICAgICAgICAgICAgICBvblByb2dyZXNzOiAoY3VycmVudCwgdG90YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3MoY3VycmVudCwgdG90YWwsIGBcdUNDOThcdUI5QUMgXHVDOTExLi4uICgke2N1cnJlbnR9LyR7dG90YWx9KWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIENhbmNlbGxhdGlvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzkxXHVDNUM1XHVDNzc0IFx1Q0RFOFx1QzE4Q1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCQzMwXHVDRTU4IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2U/LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FuY2VsQnV0dG9uKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdHMocmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHBhcnNlV29yZHMoaW5wdXRUZXh0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgICAgIC8vIFx1Qzc4NVx1QjgyNSBcdUQxNERcdUMyQTRcdUQyQjggXHVDODE1XHVDODFDXG4gICAgICAgIGNvbnN0IHNhbml0aXplZElucHV0ID0gc2FuaXRpemVNYXJrZG93bihpbnB1dFRleHQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmF3V29yZHMgPSBzYW5pdGl6ZWRJbnB1dFxuICAgICAgICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgICAgICAgLm1hcCh3b3JkID0+IHdvcmQudHJpbSgpKVxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCk7XG5cbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1QUM4MFx1Qzk5RCBcdUJDMEYgXHVDODE1XHVDODFDXG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZUJhdGNoKHJhd1dvcmRzLCAod29yZCkgPT4gdmFsaWRhdGVXb3JkKHdvcmQpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QzcyMFx1RDZBOFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NDAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUMwQUNcdUM2QTlcdUM3OTBcdUM1RDBcdUFDOEMgXHVDNTRDXHVCOUJDXG4gICAgICAgIGlmICh2YWxpZGF0aW9uLmludmFsaWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgaW52YWxpZFdvcmRzID0gdmFsaWRhdGlvbi5pbnZhbGlkLnNsaWNlKDAsIDUpLm1hcChpdGVtID0+IGl0ZW0uaXRlbSkuam9pbignLCAnKTtcbiAgICAgICAgICAgIGNvbnN0IG1vcmVDb3VudCA9IHZhbGlkYXRpb24uaW52YWxpZC5sZW5ndGggPiA1ID8gYCBcdUM2NzggJHt2YWxpZGF0aW9uLmludmFsaWQubGVuZ3RoIC0gNX1cdUFDMUNgIDogJyc7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdUM3MjBcdUQ2QThcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzQwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM4MUNcdUM2NzhcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQ6ICR7aW52YWxpZFdvcmRzfSR7bW9yZUNvdW50fWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDNzIwXHVENkE4XHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNFx1QjlDQyBcdUJDMThcdUQ2NTggKFx1QzkxMVx1QkNGNSBcdUM4MUNcdUFDNzApXG4gICAgICAgIGNvbnN0IHZhbGlkV29yZHMgPSB2YWxpZGF0aW9uLnZhbGlkXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gdmFsaWRhdGVXb3JkKHdvcmQpLnNhbml0aXplZCEpXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gd29yZC50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgLmZpbHRlcigod29yZCwgaW5kZXgsIGFycmF5KSA9PiBhcnJheS5pbmRleE9mKHdvcmQpID09PSBpbmRleCk7XG5cbiAgICAgICAgcmV0dXJuIHZhbGlkV29yZHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93UHJvZ3Jlc3ModG90YWxXb3JkczogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IHByb2dyZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3MtdGV4dCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBwcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSBgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1OFx1QjI5NCBcdUM5MTEuLi4gKDAvJHt0b3RhbFdvcmRzfSlgO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlUHJvZ3Jlc3MoY3VycmVudDogbnVtYmVyLCB0b3RhbDogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzRmlsbCA9IHByb2dyZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3MtZmlsbCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IChjdXJyZW50IC8gdG90YWwpICogMTAwO1xuICAgICAgICBwcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSBgJHttZXNzYWdlfSAoJHtjdXJyZW50fS8ke3RvdGFsfSlgO1xuICAgICAgICBwcm9ncmVzc0ZpbGwuc3R5bGUud2lkdGggPSBgJHtwZXJjZW50YWdlfSVgO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGlkZVByb2dyZXNzKCkge1xuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBwcm9ncmVzc1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dSZXN1bHRzKHJlc3VsdHM6IHsgc3VjY2Vzczogc3RyaW5nW107IGZhaWxlZDogc3RyaW5nW107IGFscmVhZHlFeGlzdHM6IHN0cmluZ1tdIH0pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICByZXN1bHRTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICByZXN1bHRTZWN0aW9uLmVtcHR5KCk7XG5cbiAgICAgICAgY29uc3QgdG90YWxQcm9jZXNzZWQgPSByZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoICsgcmVzdWx0cy5mYWlsZWQubGVuZ3RoICsgcmVzdWx0cy5hbHJlYWR5RXhpc3RzLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QUNCMFx1QUNGQyBcdUM2OTRcdUM1N0RcbiAgICAgICAgY29uc3Qgc3VtbWFyeUVsID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHRzLXN1bW1hcnknIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gc3VjY2VzcycgfSk7XG4gICAgICAgICAgICBzdWNjZXNzRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI3MDUgXHVDMTMxXHVBQ0Y1OiAke3Jlc3VsdHMuc3VjY2Vzcy5sZW5ndGh9XHVBQzFDYCxcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoIDw9IDUpIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLnN1Y2Nlc3Muam9pbignLCAnKSxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3VsdHMuYWxyZWFkeUV4aXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdHNFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSB3YXJuaW5nJyB9KTtcbiAgICAgICAgICAgIGV4aXN0c0VsLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNkEwXHVGRTBGIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUM6ICR7cmVzdWx0cy5hbHJlYWR5RXhpc3RzLmxlbmd0aH1cdUFDMUNgLFxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJlc3VsdHMuYWxyZWFkeUV4aXN0cy5sZW5ndGggPD0gNSkge1xuICAgICAgICAgICAgICAgIGV4aXN0c0VsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5hbHJlYWR5RXhpc3RzLmpvaW4oJywgJyksXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXN1bHRzLmZhaWxlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBmYWlsZWRFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSBlcnJvcicgfSk7XG4gICAgICAgICAgICBmYWlsZWRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1Mjc0QyBcdUMyRTRcdUQzMjg6ICR7cmVzdWx0cy5mYWlsZWQubGVuZ3RofVx1QUMxQ2AsXG4gICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LWNvdW50J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0cy5mYWlsZWQubGVuZ3RoIDw9IDUpIHtcbiAgICAgICAgICAgICAgICBmYWlsZWRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuZmFpbGVkLmpvaW4oJywgJyksXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1QkM4NFx1RDJCQ1x1QjRFNFxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtYnV0dG9ucycgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkVCXHVBRTMwJyxcbiAgICAgICAgICAgIGNsczogJ2Nsb3NlLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuICAgICAgICBjb25zdCBhZGRNb3JlQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdUIzNTQgXHVDRDk0XHVBQzAwXHVENTU4XHVBRTMwJyxcbiAgICAgICAgICAgIGNsczogJ2FkZC1tb3JlLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIGFkZE1vcmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICByZXN1bHRTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy53b3Jkcy10ZXh0YXJlYScpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHVDMTMxXHVBQ0Y1XHVENTVDIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVDNTRDXHVCOUJDXG4gICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgJHtyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RofVx1QUMxQ1x1Qzc1OCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1Q0Q5NFx1QUMwMFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY2FuY2VsT3BlcmF0aW9uKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZSkge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZS5jYW5jZWwoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc5MVx1QzVDNSBcdUNERThcdUMxOEMgXHVDOTExLi4uJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUNhbmNlbEJ1dHRvbihpc1Byb2Nlc3Npbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLmNhbmNlbC1idXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgaWYgKGNhbmNlbEJ1dHRvbikge1xuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gaXNQcm9jZXNzaW5nID8gJ1x1Qzc5MVx1QzVDNSBcdUNERThcdUMxOEMnIDogJ1x1Q0RFOFx1QzE4Qyc7XG4gICAgICAgICAgICBjYW5jZWxCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZGFuZ2VyJywgaXNQcm9jZXNzaW5nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIC8vIFx1QzlDNFx1RDU4OSBcdUM5MTFcdUM3NzggXHVDNzkxXHVDNUM1IFx1Q0RFOFx1QzE4Q1xuICAgICAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcgJiYgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZSkge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZS5jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZT8uZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Jvb2tDcmVhdGVkJywgdGhpcy5oYW5kbGVCb29rQ3JlYXRlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5BZGRCb29rTW9kYWwoKSB7XG4gICAgICAgIG5ldyBBZGRCb29rTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKS5vcGVuKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVCb29rQ3JlYXRlZChldmVudDogQ3VzdG9tRXZlbnQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVCb29rU2VsZWN0KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVCb29rU2VsZWN0KCkge1xuICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVDRDVDXHVDMkUwIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0RENcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYm9va3MgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsQm9va3MoKTtcbiAgICAgICAgdGhpcy5ib29rU2VsZWN0LmlubmVySFRNTCA9ICcnO1xuICAgICAgICBib29rcy5mb3JFYWNoKGJvb2sgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBib29rLmlkO1xuICAgICAgICAgICAgb3B0aW9uLnRleHQgPSBib29rLm5hbWU7XG4gICAgICAgICAgICB0aGlzLmJvb2tTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSAiLCAiLy8gXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RCBcdUJDMEYgXHVDODE1XHVDODFDIFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMFxuXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRpb25SZXN1bHQge1xuICAgIGlzVmFsaWQ6IGJvb2xlYW47XG4gICAgZXJyb3I/OiBzdHJpbmc7XG4gICAgc2FuaXRpemVkPzogc3RyaW5nO1xufVxuXG4vLyBcdUJCMzhcdUM3OTBcdUM1RjQgXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RFxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlU3RyaW5nKGlucHV0OiBzdHJpbmcsIG9wdGlvbnM6IHtcbiAgICBtaW5MZW5ndGg/OiBudW1iZXI7XG4gICAgbWF4TGVuZ3RoPzogbnVtYmVyO1xuICAgIGFsbG93RW1wdHk/OiBib29sZWFuO1xuICAgIHBhdHRlcm4/OiBSZWdFeHA7XG4gICAgZmllbGROYW1lPzogc3RyaW5nO1xufSA9IHt9KTogVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgY29uc3Qge1xuICAgICAgICBtaW5MZW5ndGggPSAwLFxuICAgICAgICBtYXhMZW5ndGggPSAxMDAwLFxuICAgICAgICBhbGxvd0VtcHR5ID0gZmFsc2UsXG4gICAgICAgIHBhdHRlcm4sXG4gICAgICAgIGZpZWxkTmFtZSA9ICdcdUM3ODVcdUI4MjVcdUFDMTInXG4gICAgfSA9IG9wdGlvbnM7XG5cbiAgICBpZiAoIWlucHV0IHx8IGlucHV0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKGFsbG93RW1wdHkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIHNhbml0aXplZDogJycgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NDAoXHVCMjk0KSBcdUQ1NDRcdUMyMTggXHVDNzg1XHVCODI1XHVBQzEyXHVDNzg1XHVCMkM4XHVCMkU0LmAgfTtcbiAgICB9XG5cbiAgICBjb25zdCB0cmltbWVkID0gaW5wdXQudHJpbSgpO1xuXG4gICAgaWYgKHRyaW1tZWQubGVuZ3RoIDwgbWluTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgaXNWYWxpZDogZmFsc2UsIFxuICAgICAgICAgICAgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NDAoXHVCMjk0KSBcdUNENUNcdUMxOEMgJHttaW5MZW5ndGh9XHVDNzkwIFx1Qzc3NFx1QzBDMVx1Qzc3NFx1QzVCNFx1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuYCBcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAodHJpbW1lZC5sZW5ndGggPiBtYXhMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSwgXG4gICAgICAgICAgICBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpIFx1Q0Q1Q1x1QjMwMCAke21heExlbmd0aH1cdUM3OTAgXHVDNzc0XHVENTU4XHVDNUVDXHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5gIFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmIChwYXR0ZXJuICYmICFwYXR0ZXJuLnRlc3QodHJpbW1lZCkpIHtcbiAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSwgXG4gICAgICAgICAgICBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc1OCBcdUQ2MTVcdUMyRERcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC5gIFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIHNhbml0aXplZDogdHJpbW1lZCB9O1xufVxuXG4vLyBBUEkgXHVEMEE0IFx1QUM4MFx1Qzk5RFxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQXBpS2V5KGFwaUtleTogc3RyaW5nLCBwcm92aWRlcjogc3RyaW5nKTogVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlU3RyaW5nKGFwaUtleSwge1xuICAgICAgICBtaW5MZW5ndGg6IDEwLFxuICAgICAgICBtYXhMZW5ndGg6IDIwMCxcbiAgICAgICAgZmllbGROYW1lOiBgJHtwcm92aWRlcn0gQVBJIFx1RDBBNGBcbiAgICB9KTtcblxuICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiB2YWxpZGF0aW9uO1xuICAgIH1cblxuICAgIC8vIFx1QUMwMSBcdUM4MUNcdUFDRjVcdUM1QzVcdUNDQjRcdUJDQzQgQVBJIFx1RDBBNCBcdUQ2MTVcdUMyREQgXHVBQzgwXHVDOTlEXG4gICAgY29uc3QgcGF0dGVybnMgPSB7XG4gICAgICAgIG9wZW5haTogL15zay1bYS16QS1aMC05XXs0OCx9JC8sXG4gICAgICAgIGFudGhyb3BpYzogL15zay1hbnQtW2EtekEtWjAtOS1fXXs5NSx9JC8sXG4gICAgICAgIGdvb2dsZTogL15bYS16QS1aMC05Xy1dezM5fSQvXG4gICAgfTtcblxuICAgIGNvbnN0IHBhdHRlcm4gPSBwYXR0ZXJuc1twcm92aWRlci50b0xvd2VyQ2FzZSgpIGFzIGtleW9mIHR5cGVvZiBwYXR0ZXJuc107XG4gICAgaWYgKHBhdHRlcm4gJiYgIXBhdHRlcm4udGVzdCh2YWxpZGF0aW9uLnNhbml0aXplZCEpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBgJHtwcm92aWRlcn0gQVBJIFx1RDBBNCBcdUQ2MTVcdUMyRERcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC5gXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkYXRpb247XG59XG5cbi8vIFx1QjJFOFx1QzVCNCBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVXb3JkKHdvcmQ6IHN0cmluZyk6IFZhbGlkYXRpb25SZXN1bHQge1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZVN0cmluZyh3b3JkLCB7XG4gICAgICAgIG1pbkxlbmd0aDogMSxcbiAgICAgICAgbWF4TGVuZ3RoOiA1MCxcbiAgICAgICAgcGF0dGVybjogL15bYS16QS1aXFxzJy1dKyQvLFxuICAgICAgICBmaWVsZE5hbWU6ICdcdUIyRThcdUM1QjQnXG4gICAgfSk7XG5cbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgICByZXR1cm4gdmFsaWRhdGlvbjtcbiAgICB9XG5cbiAgICAvLyBcdUNEOTRcdUFDMDAgXHVBQzgwXHVDOTlEOiBcdUQyQjlcdUMyMTggXHVCQjM4XHVDNzkwIFx1QzgxQ1x1RDU1Q1xuICAgIGNvbnN0IHNhbml0aXplZCA9IHZhbGlkYXRpb24uc2FuaXRpemVkIVxuICAgICAgICAucmVwbGFjZSgvW15cXHdcXHMnLV0vZywgJycpIC8vIFx1RDVDOFx1QzZBOVx1QjQxOFx1QzlDMCBcdUM1NEFcdUIyOTQgXHVEMkI5XHVDMjE4XHVCQjM4XHVDNzkwIFx1QzgxQ1x1QUM3MFxuICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpOyAvLyBcdUM1RjBcdUMxOERcdUI0MUMgXHVBQ0Y1XHVCQzMxXHVDNzQ0IFx1RDU1OFx1QjA5OFx1Qjg1Q1xuXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgc2FuaXRpemVkIH07XG59XG5cbi8vIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUQxNERcdUMyQTRcdUQyQjggXHVDODE1XHVDODFDXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghdGV4dCkgcmV0dXJuICcnO1xuXG4gICAgcmV0dXJuIHRleHRcbiAgICAgICAgLnJlcGxhY2UoLzxzY3JpcHRbXj5dKj5bXFxzXFxTXSo/PFxcL3NjcmlwdD4vZ2ksICcnKSAvLyBcdUMyQTRcdUQwNkNcdUI5QkRcdUQyQjggXHVEMERDXHVBREY4IFx1QzgxQ1x1QUM3MFxuICAgICAgICAucmVwbGFjZSgvPGlmcmFtZVtePl0qPltcXHNcXFNdKj88XFwvaWZyYW1lPi9naSwgJycpIC8vIGlmcmFtZSBcdUQwRENcdUFERjggXHVDODFDXHVBQzcwXG4gICAgICAgIC5yZXBsYWNlKC9qYXZhc2NyaXB0Oi9naSwgJycpIC8vIGphdmFzY3JpcHQ6IFx1RDUwNFx1Qjg1Q1x1RDFBMFx1Q0Y1QyBcdUM4MUNcdUFDNzBcbiAgICAgICAgLnJlcGxhY2UoL29uXFx3K1xccyo9L2dpLCAnJykgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1RDU3OFx1QjRFNFx1QjdFQyBcdUM4MUNcdUFDNzBcbiAgICAgICAgLnRyaW0oKTtcbn1cblxuLy8gVVJMIFx1QUM4MFx1Qzk5RFxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVXJsKHVybDogc3RyaW5nKTogVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgaWYgKCF1cmwpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiAnVVJMXHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU2OVx1QjJDOFx1QjJFNC4nIH07XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTCh1cmwpO1xuICAgICAgICBcbiAgICAgICAgLy8gSFRUUFNcdUI5Q0MgXHVENUM4XHVDNkE5XG4gICAgICAgIGlmICh1cmxPYmoucHJvdG9jb2wgIT09ICdodHRwczonKSB7XG4gICAgICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6ICdIVFRQUyBVUkxcdUI5Q0MgXHVENUM4XHVDNkE5XHVCNDI5XHVCMkM4XHVCMkU0LicgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1RDVDOFx1QzZBOVx1QjQxQyBcdUIzQzRcdUJBNTRcdUM3NzggXHVENjU1XHVDNzc4IChcdUQ1NDRcdUM2OTRcdUMyREMpXG4gICAgICAgIGNvbnN0IGFsbG93ZWREb21haW5zID0gW1xuICAgICAgICAgICAgJ2FwaS5vcGVuYWkuY29tJyxcbiAgICAgICAgICAgICdhcGkuYW50aHJvcGljLmNvbScsXG4gICAgICAgICAgICAnZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tJ1xuICAgICAgICBdO1xuXG4gICAgICAgIC8vIFx1QjNDNFx1QkE1NFx1Qzc3OCBcdUFDODBcdUM5OURcdUM3NDAgXHVDMTIwXHVEMEREXHVDODAxXHVDNzNDXHVCODVDIFx1QzIxOFx1RDU4OVxuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBzYW5pdGl6ZWQ6IHVybCB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogJ1x1QzcyMFx1RDZBOFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NDAgVVJMIFx1RDYxNVx1QzJERFx1Qzc4NVx1QjJDOFx1QjJFNC4nIH07XG4gICAgfVxufVxuXG4vLyBcdUMyMkJcdUM3OTAgXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RFxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlTnVtYmVyKHZhbHVlOiBhbnksIG9wdGlvbnM6IHtcbiAgICBtaW4/OiBudW1iZXI7XG4gICAgbWF4PzogbnVtYmVyO1xuICAgIGludGVnZXI/OiBib29sZWFuO1xuICAgIGZpZWxkTmFtZT86IHN0cmluZztcbn0gPSB7fSk6IFZhbGlkYXRpb25SZXN1bHQge1xuICAgIGNvbnN0IHsgbWluLCBtYXgsIGludGVnZXIgPSBmYWxzZSwgZmllbGROYW1lID0gJ1x1QzIyQlx1Qzc5MCcgfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCBudW0gPSBOdW1iZXIodmFsdWUpO1xuICAgIFxuICAgIGlmIChpc05hTihudW0pKSB7XG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpIFx1QzcyMFx1RDZBOFx1RDU1QyBcdUMyMkJcdUM3OTBcdUM1RUNcdUM1N0MgXHVENTY5XHVCMkM4XHVCMkU0LmAgfTtcbiAgICB9XG5cbiAgICBpZiAoaW50ZWdlciAmJiAhTnVtYmVyLmlzSW50ZWdlcihudW0pKSB7XG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpIFx1QzgxNVx1QzIxOFx1QzVFQ1x1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuYCB9O1xuICAgIH1cblxuICAgIGlmIChtaW4gIT09IHVuZGVmaW5lZCAmJiBudW0gPCBtaW4pIHtcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgJHttaW59IFx1Qzc3NFx1QzBDMVx1Qzc3NFx1QzVCNFx1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuYCB9O1xuICAgIH1cblxuICAgIGlmIChtYXggIT09IHVuZGVmaW5lZCAmJiBudW0gPiBtYXgpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgJHttYXh9IFx1Qzc3NFx1RDU1OFx1QzVFQ1x1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuYCB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIHNhbml0aXplZDogbnVtLnRvU3RyaW5nKCkgfTtcbn1cblxuLy8gXHVCQzMwXHVDRTU4IFx1QUM4MFx1Qzk5RCBcdUQ1NjhcdUMyMThcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUJhdGNoPFQ+KFxuICAgIGl0ZW1zOiBUW10sXG4gICAgdmFsaWRhdG9yOiAoaXRlbTogVCkgPT4gVmFsaWRhdGlvblJlc3VsdFxuKTogeyB2YWxpZDogVFtdOyBpbnZhbGlkOiBBcnJheTx7IGl0ZW06IFQ7IGVycm9yOiBzdHJpbmcgfT4gfSB7XG4gICAgY29uc3QgdmFsaWQ6IFRbXSA9IFtdO1xuICAgIGNvbnN0IGludmFsaWQ6IEFycmF5PHsgaXRlbTogVDsgZXJyb3I6IHN0cmluZyB9PiA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvcihpdGVtKTtcbiAgICAgICAgaWYgKHJlc3VsdC5pc1ZhbGlkKSB7XG4gICAgICAgICAgICB2YWxpZC5wdXNoKGl0ZW0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW52YWxpZC5wdXNoKHsgaXRlbSwgZXJyb3I6IHJlc3VsdC5lcnJvciB8fCAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4JyB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHZhbGlkLCBpbnZhbGlkIH07XG59IiwgIi8vIFx1Qzc5MVx1QzVDNSBcdUNERThcdUMxOENcdUI5N0MgXHVDNzA0XHVENTVDIFx1RDFBMFx1RDA3MCBcdUMyRENcdUMyQTRcdUQxNUNcblxuZXhwb3J0IGludGVyZmFjZSBDYW5jZWxsYXRpb25Ub2tlbiB7XG4gICAgcmVhZG9ubHkgaXNDYW5jZWxsZWQ6IGJvb2xlYW47XG4gICAgdGhyb3dJZkNhbmNlbGxlZCgpOiB2b2lkO1xuICAgIG9uQ2FuY2VsbGVkKGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIENhbmNlbGxhdGlvblRva2VuU291cmNlIHtcbiAgICBwcml2YXRlIF9pc0NhbmNlbGxlZCA9IGZhbHNlO1xuICAgIHByaXZhdGUgX2NhbGxiYWNrczogKCgpID0+IHZvaWQpW10gPSBbXTtcblxuICAgIGdldCB0b2tlbigpOiBDYW5jZWxsYXRpb25Ub2tlbiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXQgaXNDYW5jZWxsZWQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzQ2FuY2VsbGVkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRocm93SWZDYW5jZWxsZWQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNDYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENhbmNlbGxhdGlvbkVycm9yKCdPcGVyYXRpb24gd2FzIGNhbmNlbGxlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkNhbmNlbGxlZDogKGNhbGxiYWNrOiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzQ2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjYW5jZWwoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLl9pc0NhbmNlbGxlZCkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5faXNDYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNhbmNlbGxhdGlvbiBjYWxsYmFjazonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICBkaXNwb3NlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDYW5jZWxsYXRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSAnT3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQnKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSAnQ2FuY2VsbGF0aW9uRXJyb3InO1xuICAgIH1cbn1cblxuLy8gXHVDNzIwXHVEMkY4XHVCOUFDXHVEMkYwIFx1RDU2OFx1QzIxOFx1QjRFNFxuZXhwb3J0IGZ1bmN0aW9uIGRlbGF5KG1zOiBudW1iZXIsIGNhbmNlbGxhdGlvblRva2VuPzogQ2FuY2VsbGF0aW9uVG9rZW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBpZiAoY2FuY2VsbGF0aW9uVG9rZW4/LmlzQ2FuY2VsbGVkKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IENhbmNlbGxhdGlvbkVycm9yKCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0sIG1zKTtcblxuICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbj8ub25DYW5jZWxsZWQoKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICByZWplY3QobmV3IENhbmNlbGxhdGlvbkVycm9yKCkpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhDYW5jZWxsYXRpb248VD4oXG4gICAgcHJvbWlzZTogUHJvbWlzZTxUPixcbiAgICBjYW5jZWxsYXRpb25Ub2tlbj86IENhbmNlbGxhdGlvblRva2VuXG4pOiBQcm9taXNlPFQ+IHtcbiAgICBpZiAoIWNhbmNlbGxhdGlvblRva2VuKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGlmIChjYW5jZWxsYXRpb25Ub2tlbi5pc0NhbmNlbGxlZCkge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBDYW5jZWxsYXRpb25FcnJvcigpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpc1Jlc29sdmVkID0gZmFsc2U7XG5cbiAgICAgICAgcHJvbWlzZS50aGVuKFxuICAgICAgICAgICAgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1Jlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1Jlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbi5vbkNhbmNlbGxlZCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWlzUmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICBpc1Jlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IENhbmNlbGxhdGlvbkVycm9yKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuLy8gXHVCQzMwXHVDRTU4IFx1Q0M5OFx1QjlBQ1x1QzZBOSBcdUNERThcdUMxOEMgXHVBQzAwXHVCMkE1XHVENTVDIFx1RDU2OFx1QzIxOFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NCYXRjaFdpdGhDYW5jZWxsYXRpb248VCwgUj4oXG4gICAgaXRlbXM6IFRbXSxcbiAgICBwcm9jZXNzb3I6IChpdGVtOiBULCBpbmRleDogbnVtYmVyKSA9PiBQcm9taXNlPFI+LFxuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgYmF0Y2hTaXplPzogbnVtYmVyO1xuICAgICAgICBkZWxheT86IG51bWJlcjtcbiAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW4/OiBDYW5jZWxsYXRpb25Ub2tlbjtcbiAgICAgICAgb25Qcm9ncmVzcz86IChjdXJyZW50OiBudW1iZXIsIHRvdGFsOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgfSA9IHt9XG4pOiBQcm9taXNlPFJbXT4ge1xuICAgIGNvbnN0IHtcbiAgICAgICAgYmF0Y2hTaXplID0gMTAsXG4gICAgICAgIGRlbGF5OiBkZWxheU1zID0gMTAwLFxuICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbixcbiAgICAgICAgb25Qcm9ncmVzc1xuICAgIH0gPSBvcHRpb25zO1xuXG4gICAgY29uc3QgcmVzdWx0czogUltdID0gW107XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICAgIGNhbmNlbGxhdGlvblRva2VuPy50aHJvd0lmQ2FuY2VsbGVkKCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBiYXRjaCA9IGl0ZW1zLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuICAgICAgICBjb25zdCBiYXRjaFByb21pc2VzID0gYmF0Y2gubWFwKChpdGVtLCBiYXRjaEluZGV4KSA9PlxuICAgICAgICAgICAgcHJvY2Vzc29yKGl0ZW0sIGkgKyBiYXRjaEluZGV4KVxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaFJlc3VsdHMgPSBhd2FpdCB3aXRoQ2FuY2VsbGF0aW9uKFxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKGJhdGNoUHJvbWlzZXMpLFxuICAgICAgICAgICAgICAgIGNhbmNlbGxhdGlvblRva2VuXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKC4uLmJhdGNoUmVzdWx0cyk7XG5cbiAgICAgICAgICAgIC8vIFx1QzlDNFx1RDU4OVx1Qjk2MCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3M/LihNYXRoLm1pbihpICsgYmF0Y2hTaXplLCBpdGVtcy5sZW5ndGgpLCBpdGVtcy5sZW5ndGgpO1xuXG4gICAgICAgICAgICAvLyBcdUIyRTRcdUM3NEMgXHVCQzMwXHVDRTU4IFx1QzgwNCBcdUIzMDBcdUFFMzAgKFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDMzBcdUNFNThcdUFDMDAgXHVDNTQ0XHVCMkNDIFx1QUNCRFx1QzZCMClcbiAgICAgICAgICAgIGlmIChpICsgYmF0Y2hTaXplIDwgaXRlbXMubGVuZ3RoICYmIGRlbGF5TXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZGVsYXkoZGVsYXlNcywgY2FuY2VsbGF0aW9uVG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQ2FuY2VsbGF0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFx1QjJFNFx1Qjk3OCBcdUM1RDBcdUI3RUNcdUIyOTQgXHVBQ0IwXHVBQ0ZDXHVDNUQwIFx1RDNFQ1x1RDU2OFx1RDU1OFx1QUM3MFx1QjA5OCBcdUM3QUNcdUMyRENcdUIzQzQgXHVCODVDXHVDOUMxIFx1Q0Q5NFx1QUMwMCBcdUFDMDBcdUIyQTVcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG59IiwgImV4cG9ydCB0eXBlIENvbnN0cnVjdG9yPFQgPSB7fT4gPSBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xuZXhwb3J0IHR5cGUgRmFjdG9yeTxUID0gYW55PiA9ICguLi5hcmdzOiBhbnlbXSkgPT4gVDtcblxuZXhwb3J0IGludGVyZmFjZSBTZXJ2aWNlRGVmaW5pdGlvbjxUID0gYW55PiB7XG4gICAgaW1wbGVtZW50YXRpb246IENvbnN0cnVjdG9yPFQ+IHwgRmFjdG9yeTxUPjtcbiAgICBzaW5nbGV0b24/OiBib29sZWFuO1xuICAgIGRlcGVuZGVuY2llcz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgY2xhc3MgRElDb250YWluZXIge1xuICAgIHByaXZhdGUgc2VydmljZXMgPSBuZXcgTWFwPHN0cmluZywgU2VydmljZURlZmluaXRpb24+KCk7XG4gICAgcHJpdmF0ZSBpbnN0YW5jZXMgPSBuZXcgTWFwPHN0cmluZywgYW55PigpO1xuXG4gICAgcmVnaXN0ZXI8VD4oXG4gICAgICAgIG5hbWU6IHN0cmluZywgXG4gICAgICAgIGltcGxlbWVudGF0aW9uOiBDb25zdHJ1Y3RvcjxUPiB8IEZhY3Rvcnk8VD4sXG4gICAgICAgIG9wdGlvbnM6IHsgc2luZ2xldG9uPzogYm9vbGVhbjsgZGVwZW5kZW5jaWVzPzogc3RyaW5nW10gfSA9IHt9XG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VydmljZXMuc2V0KG5hbWUsIHtcbiAgICAgICAgICAgIGltcGxlbWVudGF0aW9uLFxuICAgICAgICAgICAgc2luZ2xldG9uOiBvcHRpb25zLnNpbmdsZXRvbiA/PyB0cnVlLFxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBvcHRpb25zLmRlcGVuZGVuY2llcyA/PyBbXVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXNvbHZlPFQ+KG5hbWU6IHN0cmluZyk6IFQge1xuICAgICAgICBjb25zdCBzZXJ2aWNlID0gdGhpcy5zZXJ2aWNlcy5nZXQobmFtZSk7XG4gICAgICAgIGlmICghc2VydmljZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTZXJ2aWNlICcke25hbWV9JyBub3QgcmVnaXN0ZXJlZGApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDMkYxXHVBRTAwXHVEMUE0XHVDNzc0XHVBQ0UwIFx1Qzc3NFx1QkJGOCBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTRcdUFDMDAgXHVDNzg4XHVDNzNDXHVCQTc0IFx1QkMxOFx1RDY1OFxuICAgICAgICBpZiAoc2VydmljZS5zaW5nbGV0b24gJiYgdGhpcy5pbnN0YW5jZXMuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuZ2V0KG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDNzU4XHVDODc0XHVDMTMxIFx1RDU3NFx1QUNCMFxuICAgICAgICBjb25zdCBkZXBlbmRlbmNpZXMgPSBzZXJ2aWNlLmRlcGVuZGVuY2llcy5tYXAoZGVwID0+IHRoaXMucmVzb2x2ZShkZXApKTtcblxuICAgICAgICAvLyBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTQgXHVDMEREXHVDMTMxXG4gICAgICAgIGxldCBpbnN0YW5jZTogVDtcbiAgICAgICAgaWYgKHRoaXMuaXNDb25zdHJ1Y3RvcihzZXJ2aWNlLmltcGxlbWVudGF0aW9uKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UgPSBuZXcgc2VydmljZS5pbXBsZW1lbnRhdGlvbiguLi5kZXBlbmRlbmNpZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2UgPSBzZXJ2aWNlLmltcGxlbWVudGF0aW9uKC4uLmRlcGVuZGVuY2llcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUMyRjFcdUFFMDBcdUQxQTRcdUM3NzRcdUJBNzQgXHVDNzc4XHVDMkE0XHVEMTM0XHVDMkE0IFx1QzgwMFx1QzdBNVxuICAgICAgICBpZiAoc2VydmljZS5zaW5nbGV0b24pIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChuYW1lLCBpbnN0YW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJJbnN0YW5jZTxUPihuYW1lOiBzdHJpbmcsIGluc3RhbmNlOiBUKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChuYW1lLCBpbnN0YW5jZSk7XG4gICAgICAgIHRoaXMuc2VydmljZXMuc2V0KG5hbWUsIHtcbiAgICAgICAgICAgIGltcGxlbWVudGF0aW9uOiAoKSA9PiBpbnN0YW5jZSxcbiAgICAgICAgICAgIHNpbmdsZXRvbjogdHJ1ZSxcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogW11cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGFzKG5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlcy5oYXMobmFtZSk7XG4gICAgfVxuXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VydmljZXMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQ29uc3RydWN0b3IoaW1wbGVtZW50YXRpb246IGFueSk6IGltcGxlbWVudGF0aW9uIGlzIENvbnN0cnVjdG9yIHtcbiAgICAgICAgcmV0dXJuIGltcGxlbWVudGF0aW9uLnByb3RvdHlwZSAmJiBpbXBsZW1lbnRhdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPT09IGltcGxlbWVudGF0aW9uO1xuICAgIH1cbn1cblxuLy8gXHVBRTAwXHVCODVDXHVCQzhDIFx1Q0VFOFx1RDE0Q1x1Qzc3NFx1QjEwOCBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTRcbmV4cG9ydCBjb25zdCBjb250YWluZXIgPSBuZXcgRElDb250YWluZXIoKTsiLCAiaW1wb3J0IHsgRGlmZmljdWx0eSwgRXhhbXBsZSB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWIvdHlwZXMnO1xuXG4vLyBcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNCBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTRcbmV4cG9ydCBpbnRlcmZhY2UgV29yZERhdGEge1xuICAgIHdvcmQ6IHN0cmluZztcbiAgICBwcm9udW5jaWF0aW9uOiBzdHJpbmc7XG4gICAgbWVhbmluZ3M6IHN0cmluZ1tdO1xuICAgIHNpbWlsYXJXb3Jkczogc3RyaW5nW107XG4gICAgZXhhbXBsZXM6IEV4YW1wbGVbXTtcbn1cblxuLy8gXHVCMkU4XHVDNUI0IFx1Q0U3NFx1QjREQyBcdUM1RDRcdUQyRjBcdUQyRjBcbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5Q2FyZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyByZWFkb25seSB3b3JkOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBwcm9udW5jaWF0aW9uOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBtZWFuaW5nczogc3RyaW5nW10sXG4gICAgICAgIHB1YmxpYyBzaW1pbGFyV29yZHM6IHN0cmluZ1tdLFxuICAgICAgICBwdWJsaWMgZXhhbXBsZXM6IEV4YW1wbGVbXSxcbiAgICAgICAgcHVibGljIHJldmlld0NvdW50OiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBkaWZmaWN1bHR5OiBEaWZmaWN1bHR5LFxuICAgICAgICBwdWJsaWMgbGFzdFJldmlld2VkOiBzdHJpbmcgfCBudWxsLFxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgYWRkZWREYXRlOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBib29rSWQ6IHN0cmluZ1xuICAgICkge31cblxuICAgIC8vIFx1RDMyOVx1RDFBMFx1QjlBQyBcdUJBNTRcdUMxMUNcdUI0REM6IFdvcmREYXRhXHVCODVDXHVCRDgwXHVEMTMwIFZvY2FidWxhcnlDYXJkIFx1QzBERFx1QzEzMVxuICAgIHN0YXRpYyBmcm9tV29yZERhdGEod29yZERhdGE6IFdvcmREYXRhLCBib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcbiAgICAgICAgICAgIHdvcmREYXRhLndvcmQsXG4gICAgICAgICAgICB3b3JkRGF0YS5wcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgd29yZERhdGEubWVhbmluZ3MsXG4gICAgICAgICAgICB3b3JkRGF0YS5zaW1pbGFyV29yZHMsXG4gICAgICAgICAgICB3b3JkRGF0YS5leGFtcGxlcyxcbiAgICAgICAgICAgIDAsIC8vIFx1Q0QwOFx1QUUzMCBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4XG4gICAgICAgICAgICAnZ29vZCcsIC8vIFx1Q0QwOFx1QUUzMCBcdUIwOUNcdUM3NzRcdUIzQzRcbiAgICAgICAgICAgIG51bGwsIC8vIFx1Q0QwOFx1QUUzMCBcdUJDRjVcdUMyQjUgXHVCMEEwXHVDOURDXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIC8vIFx1Q0Q5NFx1QUMwMCBcdUIwQTBcdUM5RENcbiAgICAgICAgICAgIGJvb2tJZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QkNGNVx1QzJCNSBcdUMyMThcdUQ1ODlcbiAgICByZXZpZXcobmV3RGlmZmljdWx0eTogRGlmZmljdWx0eSk6IFZvY2FidWxhcnlDYXJkIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcbiAgICAgICAgICAgIHRoaXMud29yZCxcbiAgICAgICAgICAgIHRoaXMucHJvbnVuY2lhdGlvbixcbiAgICAgICAgICAgIHRoaXMubWVhbmluZ3MsXG4gICAgICAgICAgICB0aGlzLnNpbWlsYXJXb3JkcyxcbiAgICAgICAgICAgIHRoaXMuZXhhbXBsZXMsXG4gICAgICAgICAgICB0aGlzLnJldmlld0NvdW50ICsgMSxcbiAgICAgICAgICAgIG5ld0RpZmZpY3VsdHksXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB0aGlzLmFkZGVkRGF0ZSxcbiAgICAgICAgICAgIHRoaXMuYm9va0lkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICB1cGRhdGVXb3JkRGF0YSh3b3JkRGF0YTogUGFydGlhbDxXb3JkRGF0YT4pOiBWb2NhYnVsYXJ5Q2FyZCB7XG4gICAgICAgIHJldHVybiBuZXcgVm9jYWJ1bGFyeUNhcmQoXG4gICAgICAgICAgICB0aGlzLndvcmQsXG4gICAgICAgICAgICB3b3JkRGF0YS5wcm9udW5jaWF0aW9uID8/IHRoaXMucHJvbnVuY2lhdGlvbixcbiAgICAgICAgICAgIHdvcmREYXRhLm1lYW5pbmdzID8/IHRoaXMubWVhbmluZ3MsXG4gICAgICAgICAgICB3b3JkRGF0YS5zaW1pbGFyV29yZHMgPz8gdGhpcy5zaW1pbGFyV29yZHMsXG4gICAgICAgICAgICB3b3JkRGF0YS5leGFtcGxlcyA/PyB0aGlzLmV4YW1wbGVzLFxuICAgICAgICAgICAgdGhpcy5yZXZpZXdDb3VudCxcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSxcbiAgICAgICAgICAgIHRoaXMubGFzdFJldmlld2VkLFxuICAgICAgICAgICAgdGhpcy5hZGRlZERhdGUsXG4gICAgICAgICAgICB0aGlzLmJvb2tJZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUIzRDlcbiAgICBtb3ZlVG9Cb29rKG5ld0Jvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmQge1xuICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlDYXJkKFxuICAgICAgICAgICAgdGhpcy53b3JkLFxuICAgICAgICAgICAgdGhpcy5wcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgdGhpcy5tZWFuaW5ncyxcbiAgICAgICAgICAgIHRoaXMuc2ltaWxhcldvcmRzLFxuICAgICAgICAgICAgdGhpcy5leGFtcGxlcyxcbiAgICAgICAgICAgIHRoaXMucmV2aWV3Q291bnQsXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHksXG4gICAgICAgICAgICB0aGlzLmxhc3RSZXZpZXdlZCxcbiAgICAgICAgICAgIHRoaXMuYWRkZWREYXRlLFxuICAgICAgICAgICAgbmV3Qm9va0lkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCQ0Y1XHVDMkI1XHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU1Q1x1QzlDMCBcdUQ2NTVcdUM3NzhcbiAgICBuZWVkc1JldmlldyhyZXZpZXdJbnRlcnZhbDogbnVtYmVyID0gMSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXRoaXMubGFzdFJldmlld2VkKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxhc3RSZXZpZXdEYXRlID0gbmV3IERhdGUodGhpcy5sYXN0UmV2aWV3ZWQpO1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBkYXlzRGlmZiA9IE1hdGguZmxvb3IoKG5vdy5nZXRUaW1lKCkgLSBsYXN0UmV2aWV3RGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QjA5Q1x1Qzc3NFx1QjNDNFx1QzVEMCBcdUI1MzBcdUI5NzggXHVCQ0Y1XHVDMkI1IFx1QzhGQ1x1QUUzMCBcdUM4NzBcdUM4MTVcbiAgICAgICAgY29uc3QgZGlmZmljdWx0eU11bHRpcGxpZXIgPSB7XG4gICAgICAgICAgICAnaGFyZCc6IDAuNSxcbiAgICAgICAgICAgICdnb29kJzogMSxcbiAgICAgICAgICAgICdlYXN5JzogMlxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWRqdXN0ZWRJbnRlcnZhbCA9IHJldmlld0ludGVydmFsICogZGlmZmljdWx0eU11bHRpcGxpZXJbdGhpcy5kaWZmaWN1bHR5XTtcbiAgICAgICAgcmV0dXJuIGRheXNEaWZmID49IGFkanVzdGVkSW50ZXJ2YWw7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVENTU5XHVDMkI1IFx1QzlDNFx1RDU4OVx1QjNDNCBcdUFDQzRcdUMwQjAgKDAtMTAwKVxuICAgIGdldFByb2dyZXNzUGVyY2VudGFnZSgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBtYXhSZXZpZXdzID0gMTA7IC8vIFx1Q0Q1Q1x1QjMwMCBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4XG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4odGhpcy5yZXZpZXdDb3VudCAvIG1heFJldmlld3MsIDEpICogMTAwO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVCMDlDXHVDNzc0XHVCM0M0IFx1QkNGNFx1QjEwOFx1QzJBNFxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5Qm9udXMgPSB7XG4gICAgICAgICAgICAnZWFzeSc6IDIwLFxuICAgICAgICAgICAgJ2dvb2QnOiAxMCxcbiAgICAgICAgICAgICdoYXJkJzogMFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHByb2dyZXNzICsgZGlmZmljdWx0eUJvbnVzW3RoaXMuZGlmZmljdWx0eV0sIDEwMCk7XG4gICAgfVxuXG4gICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzlDMVx1QjgyQ1x1RDY1NFx1Qjk3QyBcdUM3MDRcdUQ1NUMgXHVCQTU0XHVDMTFDXHVCNERDXG4gICAgdG9QbGFpbk9iamVjdCgpOiBWb2NhYnVsYXJ5Q2FyZERhdGEge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd29yZDogdGhpcy53b3JkLFxuICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogdGhpcy5wcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgbWVhbmluZ3M6IHRoaXMubWVhbmluZ3MsXG4gICAgICAgICAgICBzaW1pbGFyV29yZHM6IHRoaXMuc2ltaWxhcldvcmRzLFxuICAgICAgICAgICAgZXhhbXBsZXM6IHRoaXMuZXhhbXBsZXMsXG4gICAgICAgICAgICByZXZpZXdDb3VudDogdGhpcy5yZXZpZXdDb3VudCxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eSxcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogdGhpcy5sYXN0UmV2aWV3ZWQsXG4gICAgICAgICAgICBhZGRlZERhdGU6IHRoaXMuYWRkZWREYXRlLFxuICAgICAgICAgICAgYm9va0lkOiB0aGlzLmJvb2tJZFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1QUM4MFx1Qzk5RCBcdUI4NUNcdUM5QzFcbiAgICB2YWxpZGF0ZSgpOiBzdHJpbmdbXSB7XG4gICAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy53b3JkIHx8IHRoaXMud29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVBQzAwIFx1Qzc4NVx1QjgyNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLm1lYW5pbmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1Qzc1OCBcdUI3M0JcdUM3NzQgXHVENTU4XHVCMDk4IFx1Qzc3NFx1QzBDMSBcdUQ1NDRcdUM2OTRcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5ib29rSWQgfHwgdGhpcy5ib29rSWQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1QzdBNSBJRFx1QUMwMCBcdUQ1NDRcdUM2OTRcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxuXG4gICAgc3RhdGljIGNyZWF0ZShkYXRhOiB7XG4gICAgICAgIHdvcmQ6IHN0cmluZztcbiAgICAgICAgbWVhbmluZzogc3RyaW5nO1xuICAgICAgICBwcm9udW5jaWF0aW9uPzogc3RyaW5nO1xuICAgICAgICBleGFtcGxlcz86IHN0cmluZ1tdO1xuICAgICAgICBib29rSWQ/OiBzdHJpbmc7XG4gICAgfSk6IFZvY2FidWxhcnlDYXJkIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcbiAgICAgICAgICAgIGRhdGEud29yZCxcbiAgICAgICAgICAgIGRhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcbiAgICAgICAgICAgIFtkYXRhLm1lYW5pbmddLCAvLyBtZWFuaW5ncyBhcnJheVxuICAgICAgICAgICAgW10sIC8vIHNpbWlsYXJXb3Jkc1xuICAgICAgICAgICAgZGF0YS5leGFtcGxlcz8ubWFwKGV4ID0+ICh7IGVuZ2xpc2g6IGV4LCBrb3JlYW46ICcnIH0pKSB8fCBbXSwgLy8gZXhhbXBsZXMgd2l0aCBFeGFtcGxlIHR5cGVcbiAgICAgICAgICAgIDAsIC8vIHJldmlld0NvdW50XG4gICAgICAgICAgICAnZ29vZCcsIC8vIGRpZmZpY3VsdHlcbiAgICAgICAgICAgIG51bGwsIC8vIGxhc3RSZXZpZXdlZFxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCAvLyBhZGRlZERhdGVcbiAgICAgICAgICAgIGRhdGEuYm9va0lkIHx8ICdkZWZhdWx0J1xuICAgICAgICApO1xuICAgIH1cbn1cblxuLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwNFx1QzFBMVx1QzZBOSBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTQgKFx1QUUzMFx1Qzg3NCBcdUQ2MzhcdUQ2NThcdUMxMzEgXHVDNzIwXHVDOUMwKVxuZXhwb3J0IGludGVyZmFjZSBWb2NhYnVsYXJ5Q2FyZERhdGEgZXh0ZW5kcyBXb3JkRGF0YSB7XG4gICAgcmV2aWV3Q291bnQ6IG51bWJlcjtcbiAgICBkaWZmaWN1bHR5OiBEaWZmaWN1bHR5O1xuICAgIGxhc3RSZXZpZXdlZDogc3RyaW5nIHwgbnVsbDtcbiAgICBhZGRlZERhdGU6IHN0cmluZztcbiAgICBib29rSWQ6IHN0cmluZztcbn1cblxuLy8gXHVBQzgwXHVDMEM5IFx1QUNCMFx1QUNGQyBcdUQwQzBcdUM3ODVcbmV4cG9ydCBpbnRlcmZhY2UgU2VhcmNoUmVzdWx0IHtcbiAgICBjYXJkczogVm9jYWJ1bGFyeUNhcmRbXTtcbiAgICB0b3RhbENvdW50OiBudW1iZXI7XG4gICAgaGFzTW9yZTogYm9vbGVhbjtcbn0gIiwgImltcG9ydCB7IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL3JlcG9zaXRvcmllcy9JVm9jYWJ1bGFyeVJlcG9zaXRvcnknO1xuaW1wb3J0IHsgSUJvb2tSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcG9ydHMvcmVwb3NpdG9yaWVzL0lCb29rUmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBJV29yZFNlcnZpY2UgfSBmcm9tICcuLi9wb3J0cy9zZXJ2aWNlcy9JV29yZFNlcnZpY2UnO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuLi9lbnRpdGllcy9Wb2NhYnVsYXJ5JztcbmltcG9ydCB7IFdvcmRBZGRlZEV2ZW50IH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWRkV29yZFJlcXVlc3Qge1xuICAgIHdvcmQ6IHN0cmluZztcbiAgICBib29rSWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWRkV29yZFJlc3BvbnNlIHtcbiAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgIGNhcmQ/OiBWb2NhYnVsYXJ5Q2FyZDtcbiAgICBlcnJvcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEFkZFdvcmRVc2VDYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSB2b2NhYnVsYXJ5UmVwb3NpdG9yeTogSVZvY2FidWxhcnlSZXBvc2l0b3J5LFxuICAgICAgICBwcml2YXRlIGJvb2tSZXBvc2l0b3J5OiBJQm9va1JlcG9zaXRvcnksXG4gICAgICAgIHByaXZhdGUgd29yZFNlcnZpY2U6IElXb3JkU2VydmljZVxuICAgICkge31cblxuICAgIGFzeW5jIGV4ZWN1dGUocmVxdWVzdDogQWRkV29yZFJlcXVlc3QpOiBQcm9taXNlPEFkZFdvcmRSZXNwb25zZT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gMS4gXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RFxuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0LndvcmQgfHwgcmVxdWVzdC53b3JkLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LidcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB3b3JkID0gcmVxdWVzdC53b3JkLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAvLyAyLiBcdUM5MTFcdUJDRjUgXHVENjU1XHVDNzc4XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1dvcmQgPSBhd2FpdCB0aGlzLnZvY2FidWxhcnlSZXBvc2l0b3J5LmZpbmRCeVdvcmQod29yZCk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdXb3JkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUIyRThcdUM1QjRcdUM3ODVcdUIyQzhcdUIyRTQuJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDMuIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQ2NTVcdUM3NzggXHVCQzBGIFx1QzEyNFx1QzgxNVxuICAgICAgICAgICAgbGV0IGJvb2tJZCA9IHJlcXVlc3QuYm9va0lkO1xuICAgICAgICAgICAgaWYgKCFib29rSWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IGF3YWl0IHRoaXMuYm9va1JlcG9zaXRvcnkuZ2V0Q3VycmVudEJvb2soKTtcbiAgICAgICAgICAgICAgICBib29rSWQgPSBjdXJyZW50Qm9vaz8uaWQgfHwgJ2RlZmF1bHQnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBib29rID0gYXdhaXQgdGhpcy5ib29rUmVwb3NpdG9yeS5maW5kQnlJZChib29rSWQpO1xuICAgICAgICAgICAgaWYgKCFib29rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQ0IFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LidcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyA0LiBcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxuICAgICAgICAgICAgY29uc3Qgd29yZERhdGEgPSBhd2FpdCB0aGlzLndvcmRTZXJ2aWNlLmdldFdvcmREYXRhKHdvcmQpO1xuXG4gICAgICAgICAgICAvLyA1LiBWb2NhYnVsYXJ5Q2FyZCBcdUMwRERcdUMxMzFcbiAgICAgICAgICAgIGNvbnN0IHZvY2FidWxhcnlDYXJkID0gVm9jYWJ1bGFyeUNhcmQuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICB3b3JkOiB3b3JkRGF0YS53b3JkLFxuICAgICAgICAgICAgICAgIG1lYW5pbmc6IHdvcmREYXRhLm1lYW5pbmcsXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZERhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcbiAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZERhdGEuZXhhbXBsZXMgfHwgW10sXG4gICAgICAgICAgICAgICAgYm9va0lkOiBib29rSWRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyA2LiBcdUFDODBcdUM5OURcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSB2b2NhYnVsYXJ5Q2FyZC52YWxpZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25FcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogdmFsaWRhdGlvbkVycm9ycy5qb2luKCcsICcpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gNy4gXHVDODAwXHVDN0E1XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZvY2FidWxhcnlSZXBvc2l0b3J5LmFkZCh2b2NhYnVsYXJ5Q2FyZCk7XG5cbiAgICAgICAgICAgIC8vIDguIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUJDMUNcdUMwRERcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50OiBXb3JkQWRkZWRFdmVudCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnV09SRF9BRERFRCcsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICB3b3JkOiB2b2NhYnVsYXJ5Q2FyZC53b3JkLFxuICAgICAgICAgICAgICAgICAgICBib29rSWQ6IHZvY2FidWxhcnlDYXJkLmJvb2tJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUJDMUNcdUMwREQgKFx1QzJFNFx1QzgxQyBcdUFENkNcdUQ2MDRcdUM1RDBcdUMxMUNcdUIyOTQgRXZlbnRCdXMgXHVDMEFDXHVDNkE5KVxuICAgICAgICAgICAgdGhpcy5wdWJsaXNoRXZlbnQoZXZlbnQpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FyZDogdm9jYWJ1bGFyeUNhcmRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FkZFdvcmRVc2VDYXNlIFx1QzJFNFx1RDU4OSBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcHVibGlzaEV2ZW50KGV2ZW50OiBXb3JkQWRkZWRFdmVudCk6IHZvaWQge1xuICAgICAgICAvLyBcdUM3ODRcdUMyREMgXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIEV2ZW50QnVzXHVCODVDIFx1QUQ1MFx1Q0NCNFxuICAgICAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnd29yZEFkZGVkJywgeyBkZXRhaWw6IGV2ZW50LmRhdGEgfSk7XG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xuICAgIH1cbn0gIiwgIi8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM1RDRcdUQyRjBcdUQyRjBcbmV4cG9ydCBjbGFzcyBCb29rIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGlkOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgY3JlYXRlZEF0OiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyB1cGRhdGVkQXQ6IHN0cmluZyxcbiAgICAgICAgcHVibGljIHdvcmRDb3VudDogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaXNEZWZhdWx0OiBib29sZWFuXG4gICAgKSB7fVxuXG4gICAgLy8gXHVEMzI5XHVEMUEwXHVCOUFDIFx1QkE1NFx1QzExQ1x1QjREQzogXHVDMEM4IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzFcbiAgICBzdGF0aWMgY3JlYXRlKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZyA9ICcnLCBpc0RlZmF1bHQ6IGJvb2xlYW4gPSBmYWxzZSk6IEJvb2sge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGlkID0gaXNEZWZhdWx0ID8gJ2RlZmF1bHQnIDogQm9vay5nZW5lcmF0ZUlkKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IEJvb2soXG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG5vdyxcbiAgICAgICAgICAgIG5vdyxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBpc0RlZmF1bHRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBcdUQzMjlcdUQxQTBcdUI5QUMgXHVCQTU0XHVDMTFDXHVCNERDOiBcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMVxuICAgIHN0YXRpYyBjcmVhdGVEZWZhdWx0KCk6IEJvb2sge1xuICAgICAgICByZXR1cm4gQm9vay5jcmVhdGUoJ1x1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTUnLCAnXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc4NVx1QjJDOFx1QjJFNC4nLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjRcdUM3QTUgXHVDODE1XHVCQ0Y0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgIHVwZGF0ZUluZm8obmFtZT86IHN0cmluZywgZGVzY3JpcHRpb24/OiBzdHJpbmcpOiBCb29rIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxuICAgICAgICAgICAgdGhpcy5pZCxcbiAgICAgICAgICAgIG5hbWUgPz8gdGhpcy5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPz8gdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZEF0LFxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgdGhpcy53b3JkQ291bnQsXG4gICAgICAgICAgICB0aGlzLmlzRGVmYXVsdFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVDOTlEXHVBQzAwXG4gICAgaW5jcmVtZW50V29yZENvdW50KCk6IEJvb2sge1xuICAgICAgICByZXR1cm4gbmV3IEJvb2soXG4gICAgICAgICAgICB0aGlzLmlkLFxuICAgICAgICAgICAgdGhpcy5uYW1lLFxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZEF0LFxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgdGhpcy53b3JkQ291bnQgKyAxLFxuICAgICAgICAgICAgdGhpcy5pc0RlZmF1bHRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjQgXHVDMjE4IFx1QUMxMFx1QzE4Q1xuICAgIGRlY3JlbWVudFdvcmRDb3VudCgpOiBCb29rIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxuICAgICAgICAgICAgdGhpcy5pZCxcbiAgICAgICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIE1hdGgubWF4KDAsIHRoaXMud29yZENvdW50IC0gMSksXG4gICAgICAgICAgICB0aGlzLmlzRGVmYXVsdFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVDN0FDXHVDMTI0XHVDODE1XG4gICAgdXBkYXRlV29yZENvdW50KGNvdW50OiBudW1iZXIpOiBCb29rIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxuICAgICAgICAgICAgdGhpcy5pZCxcbiAgICAgICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIE1hdGgubWF4KDAsIGNvdW50KSxcbiAgICAgICAgICAgIHRoaXMuaXNEZWZhdWx0XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVDMEFEXHVDODFDIFx1QUMwMFx1QjJBNSBcdUM1RUNcdUJEODAgXHVENjU1XHVDNzc4XG4gICAgY2FuQmVEZWxldGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXRoaXMuaXNEZWZhdWx0O1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUJFNDRcdUM1QjRcdUM3ODhcdUIyOTRcdUM5QzAgXHVENjU1XHVDNzc4XG4gICAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud29yZENvdW50ID09PSAwO1xuICAgIH1cblxuICAgIC8vIFx1QUM4MFx1Qzk5RCBcdUI4NUNcdUM5QzFcbiAgICB2YWxpZGF0ZSgpOiBzdHJpbmdbXSB7XG4gICAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5uYW1lIHx8IHRoaXMubmFtZS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc3NCBcdUQ1NDRcdUM2OTRcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLm5hbWUudHJpbSgpLmxlbmd0aCA+IDEwMCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODRcdUM3NDAgMTAwXHVDNzkwXHVCOTdDIFx1Q0QwOFx1QUNGQ1x1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5kZXNjcmlwdGlvbi5sZW5ndGggPiA1MDApIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTI0XHVCQTg1XHVDNzQwIDUwMFx1Qzc5MFx1Qjk3QyBcdUNEMDhcdUFDRkNcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMud29yZENvdW50IDwgMCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNCBcdUMyMThcdUIyOTQgMCBcdUM3NzRcdUMwQzFcdUM3NzRcdUM1QjRcdUM1N0MgXHVENTY5XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZXJyb3JzO1xuICAgIH1cblxuICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM5QzFcdUI4MkNcdUQ2NTRcdUI5N0MgXHVDNzA0XHVENTVDIFx1QkE1NFx1QzExQ1x1QjREQ1xuICAgIHRvUGxhaW5PYmplY3QoKTogQm9va0RhdGEge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogdGhpcy5jcmVhdGVkQXQsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IHRoaXMudXBkYXRlZEF0LFxuICAgICAgICAgICAgd29yZENvdW50OiB0aGlzLndvcmRDb3VudCxcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdGhpcy5pc0RlZmF1bHRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUMwRERcdUMxMzFcdUM3N0NcdUI4NUNcdUJEODBcdUQxMzAgXHVBQ0JEXHVBQ0ZDIFx1Qzc3Q1x1QzIxOCBcdUFDQzRcdUMwQjBcbiAgICBnZXREYXlzRnJvbUNyZWF0aW9uKCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWREYXRlID0gbmV3IERhdGUodGhpcy5jcmVhdGVkQXQpO1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIGNyZWF0ZWREYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjlDOFx1QzlDMFx1QjlDOSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcdUI4NUNcdUJEODBcdUQxMzAgXHVBQ0JEXHVBQ0ZDIFx1Qzc3Q1x1QzIxOCBcdUFDQzRcdUMwQjBcbiAgICBnZXREYXlzRnJvbUxhc3RVcGRhdGUoKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgdXBkYXRlZERhdGUgPSBuZXcgRGF0ZSh0aGlzLnVwZGF0ZWRBdCk7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKChub3cuZ2V0VGltZSgpIC0gdXBkYXRlZERhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gICAgfVxuXG4gICAgLy8gSUQgXHVDMEREXHVDMTMxIFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMFxuICAgIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlSWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBib29rXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgICB9XG59XG5cbi8vIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM4MDRcdUMxQTFcdUM2QTkgXHVDNzc4XHVEMTMwXHVEMzk4XHVDNzc0XHVDMkE0IChcdUFFMzBcdUM4NzQgXHVENjM4XHVENjU4XHVDMTMxIFx1QzcyMFx1QzlDMClcbmV4cG9ydCBpbnRlcmZhY2UgQm9va0RhdGEge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0OiBzdHJpbmc7XG4gICAgdXBkYXRlZEF0OiBzdHJpbmc7XG4gICAgd29yZENvdW50OiBudW1iZXI7XG4gICAgaXNEZWZhdWx0OiBib29sZWFuO1xufVxuXG4vLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVEMUI1XHVBQ0M0IFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNFxuZXhwb3J0IGludGVyZmFjZSBCb29rU3RhdGlzdGljcyB7XG4gICAgYm9vazogQm9vaztcbiAgICB0b3RhbFdvcmRzOiBudW1iZXI7XG4gICAgd29yZHNCeURpZmZpY3VsdHk6IHtcbiAgICAgICAgZWFzeTogbnVtYmVyO1xuICAgICAgICBnb29kOiBudW1iZXI7XG4gICAgICAgIGhhcmQ6IG51bWJlcjtcbiAgICB9O1xuICAgIGF2ZXJhZ2VSZXZpZXdDb3VudDogbnVtYmVyO1xuICAgIGxhc3RBY3Rpdml0eURhdGU6IHN0cmluZyB8IG51bGw7XG4gICAgY29tcGxldGlvblBlcmNlbnRhZ2U6IG51bWJlcjtcbn1cblxuLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkFBOVx1Qjg1RCBcdUM2MzVcdUMxNThcbmV4cG9ydCBpbnRlcmZhY2UgQm9va0xpc3RPcHRpb25zIHtcbiAgICBpbmNsdWRlRW1wdHk/OiBib29sZWFuO1xuICAgIHNvcnRCeT86ICduYW1lJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCcgfCAnd29yZENvdW50JztcbiAgICBzb3J0T3JkZXI/OiAnYXNjJyB8ICdkZXNjJztcbiAgICBsaW1pdD86IG51bWJlcjtcbiAgICBvZmZzZXQ/OiBudW1iZXI7XG59ICIsICJpbXBvcnQgeyBJQm9va1JlcG9zaXRvcnkgfSBmcm9tICcuLi9wb3J0cy9yZXBvc2l0b3JpZXMvSUJvb2tSZXBvc2l0b3J5JztcbmltcG9ydCB7IEJvb2sgfSBmcm9tICcuLi9lbnRpdGllcy9Cb29rJztcbmltcG9ydCB7IEJvb2tDcmVhdGVkRXZlbnQgfSBmcm9tICcuLi8uLi9zaGFyZWQvbGliL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVCb29rUmVxdWVzdCB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUJvb2tSZXNwb25zZSB7XG4gICAgc3VjY2VzczogYm9vbGVhbjtcbiAgICBib29rPzogQm9vaztcbiAgICBlcnJvcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIENyZWF0ZUJvb2tVc2VDYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBib29rUmVwb3NpdG9yeTogSUJvb2tSZXBvc2l0b3J5XG4gICAgKSB7fVxuXG4gICAgYXN5bmMgZXhlY3V0ZShyZXF1ZXN0OiBDcmVhdGVCb29rUmVxdWVzdCk6IFByb21pc2U8Q3JlYXRlQm9va1Jlc3BvbnNlPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyAxLiBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXG4gICAgICAgICAgICBpZiAoIXJlcXVlc3QubmFtZSB8fCByZXF1ZXN0Lm5hbWUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODRcdUM3NDQgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LidcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gcmVxdWVzdC5uYW1lLnRyaW0oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gMi4gXHVDNzc0XHVCOTg0IFx1QzkxMVx1QkNGNSBcdUQ2NTVcdUM3NzhcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQm9va3MgPSBhd2FpdCB0aGlzLmJvb2tSZXBvc2l0b3J5LmZpbmRBbGwoKTtcbiAgICAgICAgICAgIGNvbnN0IGR1cGxpY2F0ZUJvb2sgPSBleGlzdGluZ0Jvb2tzLmZpbmQoYm9vayA9PiBcbiAgICAgICAgICAgICAgICBib29rLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZHVwbGljYXRlQm9vaykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTQgXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc4NVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gMy4gQm9vayBcdUM1RDRcdUQyRjBcdUQyRjAgXHVDMEREXHVDMTMxXG4gICAgICAgICAgICBjb25zdCBib29rID0gQm9vay5jcmVhdGUoXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmRlc2NyaXB0aW9uIHx8ICcnXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyA0LiBcdUFDODBcdUM5OURcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSBib29rLnZhbGlkYXRlKCk7XG4gICAgICAgICAgICBpZiAodmFsaWRhdGlvbkVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiB2YWxpZGF0aW9uRXJyb3JzLmpvaW4oJywgJylcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyA1LiBcdUM4MDBcdUM3QTVcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYm9va1JlcG9zaXRvcnkuYWRkKGJvb2spO1xuXG4gICAgICAgICAgICAvLyA2LiBcdUM3NzRcdUJDQTRcdUQyQjggXHVCQzFDXHVDMEREXG4gICAgICAgICAgICBjb25zdCBldmVudDogQm9va0NyZWF0ZWRFdmVudCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnQk9PS19DUkVBVEVEJyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGJvb2tJZDogYm9vay5pZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogYm9vay5uYW1lXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5wdWJsaXNoRXZlbnQoZXZlbnQpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgYm9vazogYm9va1xuICAgICAgICAgICAgfTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ3JlYXRlQm9va1VzZUNhc2UgXHVDMkU0XHVENTg5IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwdWJsaXNoRXZlbnQoZXZlbnQ6IEJvb2tDcmVhdGVkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVDNzg0XHVDMkRDIFx1QUQ2Q1x1RDYwNCAtIFx1QjA5OFx1QzkxMVx1QzVEMCBFdmVudEJ1c1x1Qjg1QyBcdUFENTBcdUNDQjRcbiAgICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2Jvb2tDcmVhdGVkJywgeyBkZXRhaWw6IGV2ZW50LmRhdGEgfSk7XG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xuICAgIH1cbn0gIiwgImltcG9ydCB7IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL0lWb2NhYnVsYXJ5UmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBJQm9va1JlcG9zaXRvcnkgfSBmcm9tICcuLi9wb3J0cy9JQm9va1JlcG9zaXRvcnknO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuLi9lbnRpdGllcy9Wb2NhYnVsYXJ5JztcblxuZXhwb3J0IGludGVyZmFjZSBHZXRXb3Jkc0ZvclJldmlld1JlcXVlc3Qge1xuICAgIGJvb2tJZD86IHN0cmluZztcbiAgICBsaW1pdD86IG51bWJlcjtcbiAgICByZXZpZXdJbnRlcnZhbD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZXRXb3Jkc0ZvclJldmlld1Jlc3BvbnNlIHtcbiAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgIHdvcmRzPzogVm9jYWJ1bGFyeUNhcmRbXTtcbiAgICB0b3RhbENvdW50PzogbnVtYmVyO1xuICAgIGVycm9yPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgR2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSB2b2NhYnVsYXJ5UmVwb3NpdG9yeTogSVZvY2FidWxhcnlSZXBvc2l0b3J5LFxuICAgICAgICBwcml2YXRlIGJvb2tSZXBvc2l0b3J5OiBJQm9va1JlcG9zaXRvcnlcbiAgICApIHt9XG5cbiAgICBhc3luYyBleGVjdXRlKHJlcXVlc3Q6IEdldFdvcmRzRm9yUmV2aWV3UmVxdWVzdCA9IHt9KTogUHJvbWlzZTxHZXRXb3Jkc0ZvclJldmlld1Jlc3BvbnNlPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyAxLiBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTI0XHVDODE1XG4gICAgICAgICAgICBsZXQgYm9va0lkID0gcmVxdWVzdC5ib29rSWQ7XG4gICAgICAgICAgICBpZiAoIWJvb2tJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCb29rID0gYXdhaXQgdGhpcy5ib29rUmVwb3NpdG9yeS5nZXRDdXJyZW50Qm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2tJZCA9IGN1cnJlbnRCb29rPy5pZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gMi4gXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OENcbiAgICAgICAgICAgIGNvbnN0IGFsbFdvcmRzID0gYXdhaXQgdGhpcy52b2NhYnVsYXJ5UmVwb3NpdG9yeS5maW5kQnlCb29rSWQoYm9va0lkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFsbFdvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdvcmRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxDb3VudDogMFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDMuIFx1QkNGNVx1QzJCNVx1Qzc3NCBcdUQ1NDRcdUM2OTRcdUQ1NUMgXHVCMkU4XHVDNUI0IFx1RDU0NFx1RDEzMFx1QjlDMVxuICAgICAgICAgICAgY29uc3QgcmV2aWV3SW50ZXJ2YWwgPSByZXF1ZXN0LnJldmlld0ludGVydmFsIHx8IDE7XG4gICAgICAgICAgICBjb25zdCB3b3Jkc05lZWRpbmdSZXZpZXcgPSBhbGxXb3Jkcy5maWx0ZXIod29yZCA9PiBcbiAgICAgICAgICAgICAgICB3b3JkLm5lZWRzUmV2aWV3KHJldmlld0ludGVydmFsKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gNC4gXHVDODE1XHVCODJDIChcdUM2QjBcdUMxMjBcdUMyMUNcdUM3MDQ6IFx1QzYyNFx1Qjc5OFx1QjQxQyBcdUJDRjVcdUMyQjUgPiBcdUM1QjRcdUI4MjRcdUM2QjQgXHVCMkU4XHVDNUI0ID4gXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxOCBcdUM4MDFcdUM3NDAgXHVCMkU4XHVDNUI0KVxuICAgICAgICAgICAgd29yZHNOZWVkaW5nUmV2aWV3LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAvLyAxXHVDMjFDXHVDNzA0OiBcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQ0Y1XHVDMkI1XHVDNzdDIChcdUM2MjRcdUI3OThcdUI0MUMgXHVBQzgzXHVCRDgwXHVEMTMwKVxuICAgICAgICAgICAgICAgIGlmIChhLmxhc3RSZXZpZXdlZCAmJiBiLmxhc3RSZXZpZXdlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhRGF0ZSA9IG5ldyBEYXRlKGEubGFzdFJldmlld2VkKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJEYXRlID0gbmV3IERhdGUoYi5sYXN0UmV2aWV3ZWQpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFEYXRlICE9PSBiRGF0ZSkgcmV0dXJuIGFEYXRlIC0gYkRhdGU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhLmxhc3RSZXZpZXdlZCAmJiAhYi5sYXN0UmV2aWV3ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWEubGFzdFJldmlld2VkICYmIGIubGFzdFJldmlld2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIDJcdUMyMUNcdUM3MDQ6IFx1QjA5Q1x1Qzc3NFx1QjNDNCAoXHVDNUI0XHVCODI0XHVDNkI0IFx1QUM4M1x1QkQ4MFx1RDEzMClcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmaWN1bHR5T3JkZXIgPSB7ICdoYXJkJzogMywgJ2dvb2QnOiAyLCAnZWFzeSc6IDEgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmaWN1bHR5RGlmZiA9IGRpZmZpY3VsdHlPcmRlcltiLmRpZmZpY3VsdHldIC0gZGlmZmljdWx0eU9yZGVyW2EuZGlmZmljdWx0eV07XG4gICAgICAgICAgICAgICAgaWYgKGRpZmZpY3VsdHlEaWZmICE9PSAwKSByZXR1cm4gZGlmZmljdWx0eURpZmY7XG5cbiAgICAgICAgICAgICAgICAvLyAzXHVDMjFDXHVDNzA0OiBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4IChcdUM4MDFcdUM3NDAgXHVBQzgzXHVCRDgwXHVEMTMwKVxuICAgICAgICAgICAgICAgIHJldHVybiBhLnJldmlld0NvdW50IC0gYi5yZXZpZXdDb3VudDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyA1LiBcdUM4MUNcdUQ1NUMgXHVDODAxXHVDNkE5XG4gICAgICAgICAgICBjb25zdCBsaW1pdCA9IHJlcXVlc3QubGltaXQgfHwgMjA7XG4gICAgICAgICAgICBjb25zdCBsaW1pdGVkV29yZHMgPSB3b3Jkc05lZWRpbmdSZXZpZXcuc2xpY2UoMCwgbGltaXQpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgd29yZHM6IGxpbWl0ZWRXb3JkcyxcbiAgICAgICAgICAgICAgICB0b3RhbENvdW50OiB3b3Jkc05lZWRpbmdSZXZpZXcubGVuZ3RoXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UgXHVDMkU0XHVENTg5IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufSAiLCAiaW1wb3J0IHsgSVZvY2FidWxhcnlSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcG9ydHMvSVZvY2FidWxhcnlSZXBvc2l0b3J5JztcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi4vZW50aXRpZXMvVm9jYWJ1bGFyeSc7XG5pbXBvcnQgeyBEaWZmaWN1bHR5LCBXb3JkUmV2aWV3ZWRFdmVudCB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWIvdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1dvcmRSZXF1ZXN0IHtcbiAgICB3b3JkOiBzdHJpbmc7XG4gICAgZGlmZmljdWx0eTogRGlmZmljdWx0eTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXZpZXdXb3JkUmVzcG9uc2Uge1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgY2FyZD86IFZvY2FidWxhcnlDYXJkO1xuICAgIGVycm9yPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgUmV2aWV3V29yZFVzZUNhc2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHZvY2FidWxhcnlSZXBvc2l0b3J5OiBJVm9jYWJ1bGFyeVJlcG9zaXRvcnlcbiAgICApIHt9XG5cbiAgICBhc3luYyBleGVjdXRlKHJlcXVlc3Q6IFJldmlld1dvcmRSZXF1ZXN0KTogUHJvbWlzZTxSZXZpZXdXb3JkUmVzcG9uc2U+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIDEuIFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OURcbiAgICAgICAgICAgIGlmICghcmVxdWVzdC53b3JkIHx8IHJlcXVlc3Qud29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFbJ2Vhc3knLCAnZ29vZCcsICdoYXJkJ10uaW5jbHVkZXMocmVxdWVzdC5kaWZmaWN1bHR5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1QzYyQ1x1QkMxNFx1Qjk3OCBcdUIwOUNcdUM3NzRcdUIzQzRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LidcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAyLiBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXG4gICAgICAgICAgICBjb25zdCB3b3JkID0gcmVxdWVzdC53b3JkLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDYXJkID0gYXdhaXQgdGhpcy52b2NhYnVsYXJ5UmVwb3NpdG9yeS5maW5kQnlXb3JkKHdvcmQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nQ2FyZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gMy4gXHVCQ0Y1XHVDMkI1IFx1QzIxOFx1RDU4OSAoXHVDNUQ0XHVEMkYwXHVEMkYwXHVDNzU4IFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzEgXHVENjVDXHVDNkE5KVxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNEaWZmaWN1bHR5ID0gZXhpc3RpbmdDYXJkLmRpZmZpY3VsdHk7XG4gICAgICAgICAgICBjb25zdCByZXZpZXdlZENhcmQgPSBleGlzdGluZ0NhcmQucmV2aWV3KHJlcXVlc3QuZGlmZmljdWx0eSk7XG5cbiAgICAgICAgICAgIC8vIDQuIFx1QzgwMFx1QzdBNVxuICAgICAgICAgICAgYXdhaXQgdGhpcy52b2NhYnVsYXJ5UmVwb3NpdG9yeS51cGRhdGUocmV2aWV3ZWRDYXJkKTtcblxuICAgICAgICAgICAgLy8gNS4gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERFxuICAgICAgICAgICAgY29uc3QgZXZlbnQ6IFdvcmRSZXZpZXdlZEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdXT1JEX1JFVklFV0VEJyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IHJldmlld2VkQ2FyZC53b3JkLFxuICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5OiByZXF1ZXN0LmRpZmZpY3VsdHksXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRGlmZmljdWx0eTogcHJldmlvdXNEaWZmaWN1bHR5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5wdWJsaXNoRXZlbnQoZXZlbnQpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FyZDogcmV2aWV3ZWRDYXJkXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdSZXZpZXdXb3JkVXNlQ2FzZSBcdUMyRTRcdUQ1ODkgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LidcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHB1Ymxpc2hFdmVudChldmVudDogV29yZFJldmlld2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVDNzg0XHVDMkRDIFx1QUQ2Q1x1RDYwNCAtIFx1QjA5OFx1QzkxMVx1QzVEMCBFdmVudEJ1c1x1Qjg1QyBcdUFENTBcdUNDQjRcbiAgICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3dvcmRSZXZpZXdlZCcsIHsgZGV0YWlsOiBldmVudC5kYXRhIH0pO1xuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcbiAgICB9XG59ICIsICJpbXBvcnQgeyBJVm9jYWJ1bGFyeVJlcG9zaXRvcnkgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3BvcnRzL3JlcG9zaXRvcmllcy9JVm9jYWJ1bGFyeVJlcG9zaXRvcnknO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQsIFNlYXJjaFJlc3VsdCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvZW50aXRpZXMvVm9jYWJ1bGFyeSc7XG5pbXBvcnQgeyBTZWFyY2hPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2xpYi90eXBlcyc7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc3RvcmFnZS9Wb2NhYnVsYXJ5RGF0YWJhc2UnO1xuXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyIGltcGxlbWVudHMgSVZvY2FidWxhcnlSZXBvc2l0b3J5IHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGFiYXNlTWFuYWdlcjogVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcikge31cblxuICAgIGFzeW5jIGFkZChjYXJkOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5hZGRXb3JkKGNhcmQpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmUoY2FyZDogVm9jYWJ1bGFyeUNhcmQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuYWRkV29yZChjYXJkKTtcbiAgICB9XG5cbiAgICBhc3luYyBmaW5kQnlXb3JkKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmQgfCBudWxsPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRXb3JkKHdvcmQpO1xuICAgIH1cblxuICAgIGFzeW5jIGZpbmRBbGwoKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZFtdPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxXb3JkcygpO1xuICAgIH1cblxuICAgIGFzeW5jIGZpbmRCeUJvb2tJZChib29rSWQ6IHN0cmluZyk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmRbXT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZHNCeUJvb2soYm9va0lkKTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGUod29yZDogc3RyaW5nLCBjYXJkOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkKHdvcmQsIGNhcmQuZGlmZmljdWx0eSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5yZW1vdmVXb3JkKHdvcmQpO1xuICAgIH1cblxuICAgIGFzeW5jIHNlYXJjaChvcHRpb25zOiBTZWFyY2hPcHRpb25zKTogUHJvbWlzZTxTZWFyY2hSZXN1bHQ+IHtcbiAgICAgICAgY29uc3QgYWxsV29yZHMgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcbiAgICAgICAgLy8gXHVBRTMwXHVCQ0Y4XHVDODAxXHVDNzc4IFx1QUM4MFx1QzBDOSBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgXHVBQ0UwXHVCM0M0XHVENjU0IFx1QUMwMFx1QjJBNVxuICAgICAgICBjb25zdCBmaWx0ZXJlZFdvcmRzID0gYWxsV29yZHMuZmlsdGVyKHdvcmQgPT4gXG4gICAgICAgICAgICB3b3JkLndvcmQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhvcHRpb25zLnF1ZXJ5Py50b0xvd2VyQ2FzZSgpIHx8ICcnKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdvcmRzOiBmaWx0ZXJlZFdvcmRzLFxuICAgICAgICAgICAgdG90YWw6IGZpbHRlcmVkV29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgaGFzTW9yZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBzZWFyY2hCeVRleHQocXVlcnk6IHN0cmluZyk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmRbXT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNlYXJjaCh7IHF1ZXJ5IH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0LndvcmRzO1xuICAgIH1cblxuICAgIGFzeW5jIGZpbmRDYXJkc0ZvclJldmlldyhib29rSWQ/OiBzdHJpbmcpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkW10+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmRzRm9yUmV2aWV3KGJvb2tJZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZmluZENhcmRzQnlEaWZmaWN1bHR5KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJywgYm9va0lkPzogc3RyaW5nKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZFtdPiB7XG4gICAgICAgIGNvbnN0IHdvcmRzID0gYm9va0lkID8gXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZpbmRCeUJvb2tJZChib29rSWQpIDogXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB3b3Jkcy5maWx0ZXIod29yZCA9PiB3b3JkLmRpZmZpY3VsdHkgPT09IGRpZmZpY3VsdHkpO1xuICAgIH1cblxuICAgIGFzeW5jIGNvdW50KCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgICAgIGNvbnN0IHdvcmRzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XG4gICAgICAgIHJldHVybiB3b3Jkcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgYXN5bmMgY291bnRCeUJvb2tJZChib29rSWQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgICAgIGNvbnN0IHdvcmRzID0gYXdhaXQgdGhpcy5maW5kQnlCb29rSWQoYm9va0lkKTtcbiAgICAgICAgcmV0dXJuIHdvcmRzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBhc3luYyBjb3VudEJ5RGlmZmljdWx0eShkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgICAgICBjb25zdCB3b3JkcyA9IGF3YWl0IHRoaXMuZmluZENhcmRzQnlEaWZmaWN1bHR5KGRpZmZpY3VsdHkpO1xuICAgICAgICByZXR1cm4gd29yZHMubGVuZ3RoO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVNYW55KGNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGZvciAoY29uc3QgY2FyZCBvZiBjYXJkcykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGQoY2FyZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBkZWxldGVNYW55KHdvcmRzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlKHdvcmQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZERhdGEoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5zYXZlQWxsRGF0YSgpO1xuICAgIH1cblxuICAgIG9uRGF0YUNoYW5nZWQoY2FsbGJhY2s6IChjYXJkczogVm9jYWJ1bGFyeUNhcmRbXSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QUQ2Q1x1RDYwNCAtIFx1QjA5OFx1QzkxMVx1QzVEMCBFdmVudEVtaXR0ZXIgXHVEMzI4XHVEMTM0XHVDNzNDXHVCODVDIFx1QUQ2Q1x1RDYwNFxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxuICAgIH1cblxuICAgIG9mZkRhdGFDaGFuZ2VkKGNhbGxiYWNrOiAoY2FyZHM6IFZvY2FidWxhcnlDYXJkW10pID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzAgXHVBRDZDXHVENjA0XG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XG4gICAgfVxufSIsICJpbXBvcnQgeyBJQm9va1JlcG9zaXRvcnkgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3BvcnRzL3JlcG9zaXRvcmllcy9JQm9va1JlcG9zaXRvcnknO1xuaW1wb3J0IHsgQm9vaywgQm9va1N0YXRpc3RpY3MsIEJvb2tMaXN0T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uL2NvcmUvZW50aXRpZXMvQm9vayc7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc3RvcmFnZS9Wb2NhYnVsYXJ5RGF0YWJhc2UnO1xuXG5leHBvcnQgY2xhc3MgQm9va1JlcG9zaXRvcnlBZGFwdGVyIGltcGxlbWVudHMgSUJvb2tSZXBvc2l0b3J5IHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGFiYXNlTWFuYWdlcjogVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcikge31cblxuICAgIGFzeW5jIGFkZChib29rOiBCb29rKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmNyZWF0ZUJvb2soYm9vay50b1BsYWluT2JqZWN0KCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmUoYm9vazogQm9vayk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5jcmVhdGVCb29rKGJvb2sudG9QbGFpbk9iamVjdCgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBmaW5kQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxCb29rIHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBib29rRGF0YSA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEJvb2soaWQpO1xuICAgICAgICBpZiAoIWJvb2tEYXRhKSByZXR1cm4gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcbiAgICAgICAgICAgIGJvb2tEYXRhLmlkLFxuICAgICAgICAgICAgYm9va0RhdGEubmFtZSxcbiAgICAgICAgICAgIGJvb2tEYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgYm9va0RhdGEuY3JlYXRlZEF0LFxuICAgICAgICAgICAgYm9va0RhdGEudXBkYXRlZEF0LFxuICAgICAgICAgICAgYm9va0RhdGEud29yZENvdW50LFxuICAgICAgICAgICAgYm9va0RhdGEuaXNEZWZhdWx0XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgZmluZEFsbChvcHRpb25zPzogQm9va0xpc3RPcHRpb25zKTogUHJvbWlzZTxCb29rW10+IHtcbiAgICAgICAgY29uc3QgYm9va3NEYXRhID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsQm9va3MoKTtcbiAgICAgICAgbGV0IGJvb2tzID0gYm9va3NEYXRhLm1hcChib29rRGF0YSA9PiBuZXcgQm9vayhcbiAgICAgICAgICAgIGJvb2tEYXRhLmlkLFxuICAgICAgICAgICAgYm9va0RhdGEubmFtZSxcbiAgICAgICAgICAgIGJvb2tEYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgYm9va0RhdGEuY3JlYXRlZEF0LFxuICAgICAgICAgICAgYm9va0RhdGEudXBkYXRlZEF0LFxuICAgICAgICAgICAgYm9va0RhdGEud29yZENvdW50LFxuICAgICAgICAgICAgYm9va0RhdGEuaXNEZWZhdWx0XG4gICAgICAgICkpO1xuXG4gICAgICAgIC8vIFx1QzYzNVx1QzE1OFx1QzVEMCBcdUI1MzBcdUI5NzggXHVENTQ0XHVEMTMwXHVCOUMxXG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pbmNsdWRlRW1wdHkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgYm9va3MgPSBib29rcy5maWx0ZXIoYm9vayA9PiAhYm9vay5pc0VtcHR5KCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBcdUM4MTVcdUI4MkNcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNvcnRCeSkge1xuICAgICAgICAgICAgICAgIGJvb2tzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYVZhbHVlID0gYVtvcHRpb25zLnNvcnRCeSFdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiVmFsdWUgPSBiW29wdGlvbnMuc29ydEJ5IV07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFWYWx1ZSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGJWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLnNvcnRPcmRlciA9PT0gJ2Rlc2MnID8gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYlZhbHVlLmxvY2FsZUNvbXBhcmUoYVZhbHVlKSA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFWYWx1ZS5sb2NhbGVDb21wYXJlKGJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYVZhbHVlID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgYlZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuc29ydE9yZGVyID09PSAnZGVzYycgPyBiVmFsdWUgLSBhVmFsdWUgOiBhVmFsdWUgLSBiVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBcdUQzOThcdUM3NzRcdUM5QzBcdUIxMjRcdUM3NzRcdUMxNThcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm9mZnNldCB8fCBvcHRpb25zLmxpbWl0KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBvcHRpb25zLm9mZnNldCB8fCAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IG9wdGlvbnMubGltaXQgPyBzdGFydCArIG9wdGlvbnMubGltaXQgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgYm9va3MgPSBib29rcy5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBib29rcztcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGUoaWQ6IHN0cmluZywgYm9vazogQm9vayk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci51cGRhdGVCb29rKGlkLCBib29rLnRvUGxhaW5PYmplY3QoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuZGVsZXRlQm9vayhpZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZmluZERlZmF1bHQoKTogUHJvbWlzZTxCb29rIHwgbnVsbD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kQnlJZCgnZGVmYXVsdCcpO1xuICAgIH1cblxuICAgIGFzeW5jIGZpbmRCeU5hbWUobmFtZTogc3RyaW5nKTogUHJvbWlzZTxCb29rIHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBib29rcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xuICAgICAgICByZXR1cm4gYm9va3MuZmluZChib29rID0+IGJvb2submFtZSA9PT0gbmFtZSkgfHwgbnVsbDtcbiAgICB9XG5cbiAgICBhc3luYyBleGlzdHMoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBib29rID0gYXdhaXQgdGhpcy5maW5kQnlJZChpZCk7XG4gICAgICAgIHJldHVybiBib29rICE9PSBudWxsO1xuICAgIH1cblxuICAgIGFzeW5jIGNvdW50KCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgICAgIGNvbnN0IGJvb2tzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XG4gICAgICAgIHJldHVybiBib29rcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0U3RhdGlzdGljcyhib29rSWQ6IHN0cmluZyk6IFByb21pc2U8Qm9va1N0YXRpc3RpY3MgfCBudWxsPiB7XG4gICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCB0aGlzLmZpbmRCeUlkKGJvb2tJZCk7XG4gICAgICAgIGlmICghYm9vaykgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgY29uc3Qgd29yZHMgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRXb3Jkc0J5Qm9vayhib29rSWQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgd29yZHNCeURpZmZpY3VsdHkgPSB7XG4gICAgICAgICAgICBlYXN5OiB3b3Jkcy5maWx0ZXIodyA9PiB3LmRpZmZpY3VsdHkgPT09ICdlYXN5JykubGVuZ3RoLFxuICAgICAgICAgICAgZ29vZDogd29yZHMuZmlsdGVyKHcgPT4gdy5kaWZmaWN1bHR5ID09PSAnZ29vZCcpLmxlbmd0aCxcbiAgICAgICAgICAgIGhhcmQ6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2hhcmQnKS5sZW5ndGhcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB0b3RhbFJldmlld3MgPSB3b3Jkcy5yZWR1Y2UoKHN1bSwgd29yZCkgPT4gc3VtICsgd29yZC5yZXZpZXdDb3VudCwgMCk7XG4gICAgICAgIGNvbnN0IGF2ZXJhZ2VSZXZpZXdDb3VudCA9IHdvcmRzLmxlbmd0aCA+IDAgPyB0b3RhbFJldmlld3MgLyB3b3Jkcy5sZW5ndGggOiAwO1xuXG4gICAgICAgIGNvbnN0IGxhc3RBY3Rpdml0eURhdGUgPSB3b3Jkcy5sZW5ndGggPiAwID8gXG4gICAgICAgICAgICBNYXRoLm1heCguLi53b3Jkcy5tYXAodyA9PiBuZXcgRGF0ZSh3Lmxhc3RSZXZpZXdlZCB8fCB3LmFkZGVkRGF0ZSkuZ2V0VGltZSgpKSkgOlxuICAgICAgICAgICAgbnVsbDtcblxuICAgICAgICBjb25zdCBjb21wbGV0aW9uUGVyY2VudGFnZSA9IHdvcmRzLmxlbmd0aCA+IDAgP1xuICAgICAgICAgICAgKHdvcmRzQnlEaWZmaWN1bHR5LmVhc3kgLyB3b3Jkcy5sZW5ndGgpICogMTAwIDogMDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm9vayxcbiAgICAgICAgICAgIHRvdGFsV29yZHM6IHdvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgIHdvcmRzQnlEaWZmaWN1bHR5LFxuICAgICAgICAgICAgYXZlcmFnZVJldmlld0NvdW50LFxuICAgICAgICAgICAgbGFzdEFjdGl2aXR5RGF0ZTogbGFzdEFjdGl2aXR5RGF0ZSA/IG5ldyBEYXRlKGxhc3RBY3Rpdml0eURhdGUpLnRvSVNPU3RyaW5nKCkgOiBudWxsLFxuICAgICAgICAgICAgY29tcGxldGlvblBlcmNlbnRhZ2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBbGxTdGF0aXN0aWNzKCk6IFByb21pc2U8Qm9va1N0YXRpc3RpY3NbXT4ge1xuICAgICAgICBjb25zdCBib29rcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xuICAgICAgICBjb25zdCBzdGF0aXN0aWNzOiBCb29rU3RhdGlzdGljc1tdID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGJvb2sgb2YgYm9va3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXQgPSBhd2FpdCB0aGlzLmdldFN0YXRpc3RpY3MoYm9vay5pZCk7XG4gICAgICAgICAgICBpZiAoc3RhdCkge1xuICAgICAgICAgICAgICAgIHN0YXRpc3RpY3MucHVzaChzdGF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHN0YXRpc3RpY3M7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Q3VycmVudEJvb2soKTogUHJvbWlzZTxCb29rIHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEN1cnJlbnRCb29rKCk7XG4gICAgICAgIGlmICghY3VycmVudEJvb2spIHJldHVybiBudWxsO1xuXG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLmlkLFxuICAgICAgICAgICAgY3VycmVudEJvb2submFtZSxcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgY3VycmVudEJvb2suY3JlYXRlZEF0LFxuICAgICAgICAgICAgY3VycmVudEJvb2sudXBkYXRlZEF0LFxuICAgICAgICAgICAgY3VycmVudEJvb2sud29yZENvdW50LFxuICAgICAgICAgICAgY3VycmVudEJvb2suaXNEZWZhdWx0XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2V0Q3VycmVudEJvb2soYm9va0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2V0Q3VycmVudEJvb2soYm9va0lkKTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZURhdGEoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNhdmVBbGxEYXRhKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgdmFsaWRhdGVCb29rTmFtZShuYW1lOiBzdHJpbmcsIGV4Y2x1ZGVJZD86IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBib29rcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xuICAgICAgICByZXR1cm4gIWJvb2tzLnNvbWUoYm9vayA9PiBcbiAgICAgICAgICAgIGJvb2submFtZSA9PT0gbmFtZSAmJiBcbiAgICAgICAgICAgICghZXhjbHVkZUlkIHx8IGJvb2suaWQgIT09IGV4Y2x1ZGVJZClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBvbkRhdGFDaGFuZ2VkKGNhbGxiYWNrOiAoYm9va3M6IEJvb2tbXSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QUQ2Q1x1RDYwNCAtIFx1QjA5OFx1QzkxMVx1QzVEMCBFdmVudEVtaXR0ZXIgXHVEMzI4XHVEMTM0XHVDNzNDXHVCODVDIFx1QUQ2Q1x1RDYwNFxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxuICAgIH1cblxuICAgIG9mZkRhdGFDaGFuZ2VkKGNhbGxiYWNrOiAoYm9va3M6IEJvb2tbXSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzgxQ1x1QUM3MCBcdUFENkNcdUQ2MDRcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcbiAgICB9XG5cbiAgICBvbkN1cnJlbnRCb29rQ2hhbmdlZChjYWxsYmFjazogKGJvb2s6IEJvb2sgfCBudWxsKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0MwXHVBQ0JEIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDhcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcbiAgICB9XG5cbiAgICBvZmZDdXJyZW50Qm9va0NoYW5nZWQoY2FsbGJhY2s6IChib29rOiBCb29rIHwgbnVsbCkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkNDMFx1QUNCRCBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzgxQ1x1QUM3MFxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxuICAgIH1cbn0iLCAiaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQsIEJvb2sgfSBmcm9tICcuLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIERhdGFiYXNlRGF0YSB7XG4gICAgYm9va3M6IEJvb2tbXTtcbiAgICB3b3JkczogVm9jYWJ1bGFyeUNhcmRbXTtcbiAgICBzZXR0aW5nczoge1xuICAgICAgICBkYWlseUdvYWw6IG51bWJlcjtcbiAgICAgICAgcmV2aWV3SW50ZXJ2YWw6IG51bWJlcjtcbiAgICAgICAgY3VycmVudEJvb2tJZDogc3RyaW5nO1xuICAgIH07XG4gICAgc3RhdGlzdGljczoge1xuICAgICAgICB0b3RhbFJldmlld3M6IG51bWJlcjtcbiAgICAgICAgc3RyZWFrRGF5czogbnVtYmVyO1xuICAgICAgICBsYXN0U3R1ZHlEYXRlOiBzdHJpbmcgfCBudWxsO1xuICAgIH07XG59XG5cbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIHtcbiAgICBwcml2YXRlIGFwcDogQXBwO1xuICAgIHByaXZhdGUgYm9va3M6IE1hcDxzdHJpbmcsIEJvb2s+ID0gbmV3IE1hcCgpO1xuICAgIHByaXZhdGUgd29yZHM6IE1hcDxzdHJpbmcsIFZvY2FidWxhcnlDYXJkPiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIHNldHRpbmdzID0ge1xuICAgICAgICBkYWlseUdvYWw6IDEwLFxuICAgICAgICByZXZpZXdJbnRlcnZhbDogMSxcbiAgICAgICAgY3VycmVudEJvb2tJZDogJ2RlZmF1bHQnXG4gICAgfTtcbiAgICBwcml2YXRlIHN0YXRpc3RpY3MgPSB7XG4gICAgICAgIHRvdGFsUmV2aWV3czogMCxcbiAgICAgICAgc3RyZWFrRGF5czogMCxcbiAgICAgICAgbGFzdFN0dWR5RGF0ZTogbnVsbCBhcyBzdHJpbmcgfCBudWxsXG4gICAgfTtcbiAgICBwcml2YXRlIHNhdmVDYWxsYmFjazogKCkgPT4gdm9pZDtcbiAgICBwcml2YXRlIHZvY2FidWxhcnlGb2xkZXJQYXRoID0gJ1ZvY2FidWxhcnknO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHNhdmVDYWxsYmFjazogKCkgPT4gdm9pZCwgZm9sZGVyUGF0aD86IHN0cmluZykge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2sgPSBzYXZlQ2FsbGJhY2s7XG4gICAgICAgIGlmIChmb2xkZXJQYXRoKSB7XG4gICAgICAgICAgICB0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRoID0gZm9sZGVyUGF0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluaXRpYWxpemVWb2NhYnVsYXJ5Rm9sZGVyKCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRCb29rKCk7XG4gICAgfVxuXG4gICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NCBcdUNEMDhcdUFFMzBcdUQ2NTRcbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVWb2NhYnVsYXJ5Rm9sZGVyKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdUQzRjRcdUIzNTRcdUFDMDAgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QUNFMCBURm9sZGVyIFx1Qzc3OFx1QzJBNFx1RDEzNFx1QzJBNFx1Qzc3OCBcdUFDQkRcdUM2QjBcbiAgICAgICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCQkMwXHVCODVDIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1RDNGNFx1QjM1NFx1QUMwMCBcdUM4NzRcdUM3QUNcdUQ1NThcdUM5QzAgXHVDNTRBXHVCMjk0IFx1QUNCRFx1QzZCMFx1QzVEMFx1QjlDQyBcdUMwRERcdUMxMzFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRoKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gXHVEM0Y0XHVCMzU0XHVBQzAwIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTQgXHVBQ0JEXHVDNkIwXHVCMjk0IFx1QzgxNVx1QzBDMVx1QzgwMVx1Qzc3OCBcdUMwQzFcdUQ2NjlcdUM3NzRcdUJCQzBcdUI4NUMgXHVBQ0JEXHVBQ0UwXHVCOUNDIFx1Q0Q5Q1x1QjgyNVxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnYWxyZWFkeSBleGlzdHMnKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdmb2xkZXIgYWxyZWFkeSBleGlzdHMnKSB8fFxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2FscmVhZHkgcHJlc2VudCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTRcdUFDMDAgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUFDQkRcdUM2QjAgKFx1QzgxNVx1QzBDMSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVDMEREXHVDMTMxIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVDMEREXHVDMTMxIFx1QzkxMSBcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREOicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QUUzMFx1QkNGOCBib29rIFx1Q0QwOFx1QUUzMFx1RDY1NFxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZURlZmF1bHRCb29rKCkge1xuICAgICAgICBpZiAoIXRoaXMuYm9va3MuaGFzKCdkZWZhdWx0JykpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRCb29rOiBCb29rID0ge1xuICAgICAgICAgICAgICAgIGlkOiAnZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ1x1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTUnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc4NVx1QjJDOFx1QjJFNC4nLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHdvcmRDb3VudDogMCxcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmJvb2tzLnNldCgnZGVmYXVsdCcsIGRlZmF1bHRCb29rKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoZGVmYXVsdEJvb2spO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQm9va1x1Qzc0NCBNRCBcdUQzMENcdUM3N0NcdUI4NUMgXHVDODAwXHVDN0E1XG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlQm9va1RvRmlsZShib29rOiBCb29rKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7Ym9vay5uYW1lLnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCAnXycpfS5tZGA7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWApO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2tcdUM3NTggXHVCMkU4XHVDNUI0XHVCNEU0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxuICAgICAgICBjb25zdCBib29rV29yZHMgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IGJvb2suaWQpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS53b3JkLmxvY2FsZUNvbXBhcmUoYi53b3JkKSk7XG5cbiAgICAgICAgLy8gWUFNTCBmcm9udG1hdHRlciBcdUMwRERcdUMxMzFcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBbXG4gICAgICAgICAgICAnLS0tJyxcbiAgICAgICAgICAgIGBib29rSWQ6ICR7Ym9vay5pZH1gLFxuICAgICAgICAgICAgYG5hbWU6IFwiJHtib29rLm5hbWV9XCJgLFxuICAgICAgICAgICAgYGRlc2NyaXB0aW9uOiBcIiR7Ym9vay5kZXNjcmlwdGlvbn1cImAsXG4gICAgICAgICAgICBgY3JlYXRlZEF0OiAke2Jvb2suY3JlYXRlZEF0fWAsXG4gICAgICAgICAgICBgdXBkYXRlZEF0OiAke2Jvb2sudXBkYXRlZEF0fWAsXG4gICAgICAgICAgICBgd29yZENvdW50OiAke2Jvb2tXb3Jkcy5sZW5ndGh9YCxcbiAgICAgICAgICAgIGBpc0RlZmF1bHQ6ICR7Ym9vay5pc0RlZmF1bHR9YCxcbiAgICAgICAgICAgICctLS0nLFxuICAgICAgICAgICAgJydcbiAgICAgICAgXS5qb2luKCdcXG4nKTtcblxuICAgICAgICAvLyBcdUI5QzhcdUQwNkNcdUIyRTRcdUM2QjQgXHVDRjU4XHVEMTUwXHVDRTIwIFx1QzBERFx1QzEzMVxuICAgICAgICBsZXQgY29udGVudCA9IGZyb250bWF0dGVyO1xuICAgICAgICBjb250ZW50ICs9IGAjICR7Ym9vay5uYW1lfVxcblxcbmA7XG4gICAgICAgIGNvbnRlbnQgKz0gYCR7Ym9vay5kZXNjcmlwdGlvbn1cXG5cXG5gO1xuICAgICAgICBjb250ZW50ICs9IGAjIyBcdUIyRThcdUM1QjQgXHVCQUE5XHVCODVEICgke2Jvb2tXb3Jkcy5sZW5ndGh9XHVBQzFDKVxcblxcbmA7XG5cbiAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIGJvb2tXb3Jkcykge1xuICAgICAgICAgICAgY29udGVudCArPSBgIyMjICR7d29yZC53b3JkfVxcblxcbmA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh3b3JkLnByb251bmNpYXRpb24pIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAqKlx1QkMxQ1x1Qzc0QzoqKiAke3dvcmQucHJvbnVuY2lhdGlvbn1cXG5cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb250ZW50ICs9IGAqKlx1QjczQjoqKlxcbmA7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1lYW5pbmcgb2Ygd29yZC5tZWFuaW5ncykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gJHttZWFuaW5nfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW50ICs9ICdcXG4nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAod29yZC5zaW1pbGFyV29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCoqXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNDoqKiAke3dvcmQuc2ltaWxhcldvcmRzLmpvaW4oJywgJyl9XFxuXFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHdvcmQuZXhhbXBsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCoqXHVDNjA4XHVCQjM4OioqXFxuYDtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV4YW1wbGUgb2Ygd29yZC5leGFtcGxlcykge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtICR7ZXhhbXBsZS5lbmdsaXNofVxcbmA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCAgLSAke2V4YW1wbGUua29yZWFufVxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gJ1xcbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QkNGNVx1QzJCNSBcdUM4MTVcdUJDRjRcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCoqXHVCQ0Y1XHVDMkI1IFx1QzgxNVx1QkNGNDoqKlxcbmA7XG4gICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTg6ICR7d29yZC5yZXZpZXdDb3VudH1cXG5gO1xuICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUIwOUNcdUM3NzRcdUIzQzQ6ICR7d29yZC5kaWZmaWN1bHR5fVxcbmA7XG4gICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDRjVcdUMyQjU6ICR7d29yZC5sYXN0UmV2aWV3ZWQgfHwgJ1x1QzVDNlx1Qzc0Qyd9XFxuYDtcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVDRDk0XHVBQzAwXHVDNzdDOiAke3dvcmQuYWRkZWREYXRlfVxcbmA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QzJBNFx1RDM5OFx1Qzc3NFx1QzJBNFx1QjREQyBcdUI5QUNcdUQ1M0NcdUQyRjBcdUMxNTggXHVDODE1XHVCQ0Y0XG4gICAgICAgICAgICBpZiAod29yZC5zY2hlZHVsZUluZm8pIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGBcXG4qKlx1QzJBNFx1RDM5OFx1Qzc3NFx1QzJBNFx1QjREQyBcdUI5QUNcdUQ1M0NcdUQyRjBcdUMxNTg6KipcXG5gO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVCMkU0XHVDNzRDIFx1QkNGNVx1QzJCNVx1Qzc3QzogJHt3b3JkLnNjaGVkdWxlSW5mby5kdWVEYXRlfVxcbmA7XG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUJDRjVcdUMyQjUgXHVBQzA0XHVBQ0E5OiAke3dvcmQuc2NoZWR1bGVJbmZvLmludGVydmFsfVx1Qzc3Q1xcbmA7XG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUM2QTlcdUM3NzRcdUIzQzQ6ICR7d29yZC5zY2hlZHVsZUluZm8uZWFzZX1cXG5gO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVDMkU0XHVEMzI4IFx1RDY5Rlx1QzIxODogJHt3b3JkLnNjaGVkdWxlSW5mby5sYXBzZUNvdW50fVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gJ1xcbi0tLVxcblxcbic7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShleGlzdGluZ0ZpbGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1RDMwQ1x1Qzc3Q1x1Qzc3NCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTVDXHVCMkU0XHVCQTc0IG1vZGlmeVx1Qjg1QyBcdUM3QUNcdUMyRENcdUIzQzRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnYWxyZWFkeSBleGlzdHMnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUQzMENcdUM3N0NcdUM3NzQgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QzlDMFx1QjlDQyBURmlsZVx1Qzc3NCBcdUM1NDRcdUIyRDg6JywgZmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDMwQ1x1Qzc3QyBcdUM4MDBcdUM3QTUgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzMENcdUM3N0MgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNRCBcdUQzMENcdUM3N0NcdUM1RDBcdUMxMUMgQm9va1x1QUNGQyBcdUIyRThcdUM1QjRcdUI0RTQgXHVCODVDXHVCNERDXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkQm9va0Zyb21GaWxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZnJvbnRtYXR0ZXIsIGJvZHkgfSA9IHRoaXMucGFyc2VNREZpbGUoY29udGVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghZnJvbnRtYXR0ZXIuYm9va0lkKSByZXR1cm47XG5cbiAgICAgICAgICAgIC8vIEJvb2sgXHVDODE1XHVCQ0Y0IFx1QkNGNVx1QzZEMFxuICAgICAgICAgICAgY29uc3QgYm9vazogQm9vayA9IHtcbiAgICAgICAgICAgICAgICBpZDogZnJvbnRtYXR0ZXIuYm9va0lkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGZyb250bWF0dGVyLm5hbWUgfHwgZmlsZS5iYXNlbmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZnJvbnRtYXR0ZXIuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBmcm9udG1hdHRlci5jcmVhdGVkQXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogZnJvbnRtYXR0ZXIudXBkYXRlZEF0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB3b3JkQ291bnQ6IGZyb250bWF0dGVyLndvcmRDb3VudCB8fCAwLFxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZnJvbnRtYXR0ZXIuaXNEZWZhdWx0IHx8IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmJvb2tzLnNldChib29rLmlkLCBib29rKTtcblxuICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVCNEU0IFx1RDMwQ1x1QzJGMVxuICAgICAgICAgICAgY29uc3Qgd29yZHMgPSB0aGlzLnBhcnNlV29yZHNGcm9tTWFya2Rvd24oYm9keSwgYm9vay5pZCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmRzLnNldCh3b3JkLndvcmQudG9Mb3dlckNhc2UoKSwgd29yZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDIFx1Qjg1Q1x1QjREQyBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTUQgXHVEMzBDXHVDNzdDIFx1RDMwQ1x1QzJGMSAoZnJvbnRtYXR0ZXJcdUM2NDAgYm9keSBcdUJEODRcdUI5QUMpXG4gICAgcHJpdmF0ZSBwYXJzZU1ERmlsZShjb250ZW50OiBzdHJpbmcpOiB7IGZyb250bWF0dGVyOiBhbnksIGJvZHk6IHN0cmluZyB9IHtcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXJSZWdleCA9IC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tXFxuKFtcXHNcXFNdKikkLztcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKGZyb250bWF0dGVyUmVnZXgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbnRtYXR0ZXI6IHt9LCBib2R5OiBjb250ZW50IH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyVGV4dCA9IG1hdGNoWzFdO1xuICAgICAgICBjb25zdCBib2R5ID0gbWF0Y2hbMl07XG4gICAgICAgIFxuICAgICAgICAvLyBcdUFDMDRcdUIyRThcdUQ1NUMgWUFNTCBcdUQzMENcdUMyRjFcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXI6IGFueSA9IHt9O1xuICAgICAgICBjb25zdCBsaW5lcyA9IGZyb250bWF0dGVyVGV4dC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgICAgICAgY29uc3QgY29sb25JbmRleCA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgICAgICAgICAgaWYgKGNvbG9uSW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gbGluZS5zdWJzdHJpbmcoMCwgY29sb25JbmRleCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGxpbmUuc3Vic3RyaW5nKGNvbG9uSW5kZXggKyAxKS50cmltKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHVCNTMwXHVDNjM0XHVENDVDIFx1QzgxQ1x1QUM3MFxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIHZhbHVlLmVuZHNXaXRoKCdcIicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSwgLTEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdUQwQzBcdUM3ODUgXHVCQ0MwXHVENjU4XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIGZyb250bWF0dGVyW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSAnZmFsc2UnKSBmcm9udG1hdHRlcltrZXldID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzTmFOKE51bWJlcih2YWx1ZSkpKSBmcm9udG1hdHRlcltrZXldID0gTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBlbHNlIGZyb250bWF0dGVyW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgZnJvbnRtYXR0ZXIsIGJvZHkgfTtcbiAgICB9XG5cbiAgICAvLyBcdUI5QzhcdUQwNkNcdUIyRTRcdUM2QjRcdUM1RDBcdUMxMUMgXHVCMkU4XHVDNUI0XHVCNEU0IFx1RDMwQ1x1QzJGMVxuICAgIHByaXZhdGUgcGFyc2VXb3Jkc0Zyb21NYXJrZG93bihtYXJrZG93bjogc3RyaW5nLCBib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkW10ge1xuICAgICAgICBjb25zdCB3b3JkczogVm9jYWJ1bGFyeUNhcmRbXSA9IFtdO1xuICAgICAgICBjb25zdCB3b3JkU2VjdGlvbnMgPSBtYXJrZG93bi5zcGxpdCgnLS0tJykuZmlsdGVyKHNlY3Rpb24gPT4gc2VjdGlvbi50cmltKCkpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHdvcmRTZWN0aW9ucykge1xuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHRoaXMucGFyc2VXb3JkU2VjdGlvbihzZWN0aW9uLCBib29rSWQpO1xuICAgICAgICAgICAgaWYgKHdvcmQpIHtcbiAgICAgICAgICAgICAgICB3b3Jkcy5wdXNoKHdvcmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gd29yZHM7XG4gICAgfVxuXG4gICAgLy8gXHVBQzFDXHVCQ0M0IFx1QjJFOFx1QzVCNCBcdUMxMzlcdUMxNTggXHVEMzBDXHVDMkYxXG4gICAgcHJpdmF0ZSBwYXJzZVdvcmRTZWN0aW9uKHNlY3Rpb246IHN0cmluZywgYm9va0lkOiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZCB8IG51bGwge1xuICAgICAgICBjb25zdCBsaW5lcyA9IHNlY3Rpb24uc3BsaXQoJ1xcbicpLmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG4gICAgICAgIFxuICAgICAgICBsZXQgd29yZCA9ICcnO1xuICAgICAgICBsZXQgcHJvbnVuY2lhdGlvbiA9ICcnO1xuICAgICAgICBjb25zdCBtZWFuaW5nczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3Qgc2ltaWxhcldvcmRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBjb25zdCBleGFtcGxlczogeyBlbmdsaXNoOiBzdHJpbmc7IGtvcmVhbjogc3RyaW5nIH1bXSA9IFtdO1xuICAgICAgICBsZXQgcmV2aWV3Q291bnQgPSAwO1xuICAgICAgICBsZXQgZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnID0gJ2dvb2QnO1xuICAgICAgICBsZXQgbGFzdFJldmlld2VkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICAgICAgbGV0IGFkZGVkRGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgbGV0IHNjaGVkdWxlSW5mbzogYW55ID0gdW5kZWZpbmVkO1xuICAgICAgICBcbiAgICAgICAgbGV0IGN1cnJlbnRTZWN0aW9uID0gJyc7XG4gICAgICAgIGxldCBjdXJyZW50RXhhbXBsZTogeyBlbmdsaXNoPzogc3RyaW5nOyBrb3JlYW4/OiBzdHJpbmcgfSA9IHt9O1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xuICAgICAgICAgICAgY29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVCQTg1IFx1Q0Q5NFx1Q0Q5QyAoIyMjIFx1RDVFNFx1QjM1NClcbiAgICAgICAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcjIyMgJykpIHtcbiAgICAgICAgICAgICAgICB3b3JkID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDQpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHVDMTM5XHVDMTU4IFx1QUQ2Q1x1QkQ4NFxuICAgICAgICAgICAgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVCQzFDXHVDNzRDOioqJykpIHtcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDcpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdwcm9udW5jaWF0aW9uJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUI3M0I6KionKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ21lYW5pbmdzJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0OioqJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaW1pbGFyV29yZHNUZXh0ID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDEyKS50cmltKCk7XG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzLnB1c2goLi4uc2ltaWxhcldvcmRzVGV4dC5zcGxpdCgnLCcpLm1hcCh3ID0+IHcudHJpbSgpKSk7XG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAnc2ltaWxhcic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVDNjA4XHVCQjM4OioqJykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdleGFtcGxlcyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVCQ0Y1XHVDMkI1IFx1QzgxNVx1QkNGNDoqKicpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAncmV2aWV3JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUMyQTRcdUQzOThcdUM3NzRcdUMyQTRcdUI0REMgXHVCOUFDXHVENTNDXHVEMkYwXHVDMTU4OioqJykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdzcGFjZWQtcmVwZXRpdGlvbic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnbWVhbmluZ3MnICYmIHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gJykpIHtcbiAgICAgICAgICAgICAgICBtZWFuaW5ncy5wdXNoKHRyaW1tZWRMaW5lLnN1YnN0cmluZygyKS50cmltKCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U2VjdGlvbiA9PT0gJ2V4YW1wbGVzJykge1xuICAgICAgICAgICAgICAgIC8vIFx1QjRFNFx1QzVFQ1x1QzRGMFx1QUUzMFx1Qjk3QyBcdUFDRTBcdUI4MjRcdUQ1NUMgXHVDNjA4XHVCQjM4IFx1RDMwQ1x1QzJGMVxuICAgICAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJy0gJykgJiYgIWxpbmUuc3RhcnRzV2l0aCgnICAtICcpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggKFx1QjRFNFx1QzVFQ1x1QzRGMFx1QUUzMCBcdUM1QzZcdUM3NEMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RXhhbXBsZS5lbmdsaXNoICYmIGN1cnJlbnRFeGFtcGxlLmtvcmVhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogY3VycmVudEV4YW1wbGUuZW5nbGlzaCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46IGN1cnJlbnRFeGFtcGxlLmtvcmVhblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEV4YW1wbGUgPSB7IGVuZ2xpc2g6IGxpbmUuc3Vic3RyaW5nKDIpLnRyaW0oKSB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCcgIC0gJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAoMlx1Q0U3OCBcdUI0RTRcdUM1RUNcdUM0RjBcdUFFMzApXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFeGFtcGxlLmtvcmVhbiA9IGxpbmUuc3Vic3RyaW5nKDQpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAncmV2aWV3Jykge1xuICAgICAgICAgICAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTg6ICcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldmlld0NvdW50ID0gcGFyc2VJbnQodHJpbW1lZExpbmUuc3Vic3RyaW5nKDkpLnRyaW0oKSkgfHwgMDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVCMDlDXHVDNzc0XHVCM0M0OiAnKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWZmID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDcpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYgPT09ICdlYXN5JyB8fCBkaWZmID09PSAnZ29vZCcgfHwgZGlmZiA9PT0gJ2hhcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5ID0gZGlmZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSBcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQ0Y1XHVDMkI1OiAnKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmV2ID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDExKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSZXZpZXdlZCA9IGxhc3RSZXYgPT09ICdcdUM1QzZcdUM3NEMnID8gbnVsbCA6IGxhc3RSZXY7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1Q0Q5NFx1QUMwMFx1Qzc3QzogJykpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkZWREYXRlID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDcpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnc3BhY2VkLXJlcGV0aXRpb24nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzY2hlZHVsZUluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QjJFNFx1Qzc0QyBcdUJDRjVcdUMyQjVcdUM3N0M6ICcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlSW5mby5kdWVEYXRlID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDEwKS50cmltKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QkNGNVx1QzJCNSBcdUFDMDRcdUFDQTk6ICcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVydmFsVGV4dCA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZyg4KS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlSW5mby5pbnRlcnZhbCA9IHBhcnNlSW50KGludGVydmFsVGV4dC5yZXBsYWNlKCdcdUM3N0MnLCAnJykpIHx8IDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QzZBOVx1Qzc3NFx1QjNDNDogJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvLmVhc2UgPSBwYXJzZUludCh0cmltbWVkTGluZS5zdWJzdHJpbmcoNykudHJpbSgpKSB8fCAyNTA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QzJFNFx1RDMyOCBcdUQ2OUZcdUMyMTg6ICcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlSW5mby5sYXBzZUNvdW50ID0gcGFyc2VJbnQodHJpbW1lZExpbmUuc3Vic3RyaW5nKDkpLnRyaW0oKSkgfHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUM2MDhcdUJCMzggXHVDQzk4XHVCOUFDXG4gICAgICAgIGlmIChjdXJyZW50RXhhbXBsZS5lbmdsaXNoICYmIGN1cnJlbnRFeGFtcGxlLmtvcmVhbikge1xuICAgICAgICAgICAgZXhhbXBsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgZW5nbGlzaDogY3VycmVudEV4YW1wbGUuZW5nbGlzaCxcbiAgICAgICAgICAgICAgICBrb3JlYW46IGN1cnJlbnRFeGFtcGxlLmtvcmVhblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG5cbiAgICAgICAgXG4gICAgICAgIGlmICghd29yZCkgcmV0dXJuIG51bGw7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd29yZDogd29yZC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgcHJvbnVuY2lhdGlvbixcbiAgICAgICAgICAgIG1lYW5pbmdzLFxuICAgICAgICAgICAgc2ltaWxhcldvcmRzLFxuICAgICAgICAgICAgZXhhbXBsZXMsXG4gICAgICAgICAgICByZXZpZXdDb3VudCxcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWQsXG4gICAgICAgICAgICBhZGRlZERhdGUsXG4gICAgICAgICAgICBib29rSWQsXG4gICAgICAgICAgICBzY2hlZHVsZUluZm9cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDMwQ1x1Qzc3QyBcdUI4NUNcdUI0RENcbiAgICBhc3luYyBsb2FkQWxsQm9va3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuYm9va3MuY2xlYXIoKTtcbiAgICAgICAgdGhpcy53b3Jkcy5jbGVhcigpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplVm9jYWJ1bGFyeUZvbGRlcigpO1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVEZWZhdWx0Qm9vaygpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xuICAgICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZvbGRlci5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkQm9va0Zyb21GaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1RDMwQ1x1Qzc3QyBcdUI4NUNcdUI0RENcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICB9XG5cbiAgICAvLyBcdUMxMjRcdUM4MTUgXHVEMzBDXHVDNzdDIFx1QzgwMFx1QzdBNS9cdUI4NUNcdUI0RENcbiAgICBwcml2YXRlIGFzeW5jIHNhdmVTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRofS9zZXR0aW5ncy5qc29uYCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5zZXR0aW5ncyxcbiAgICAgICAgICAgIHN0YXRpc3RpY3M6IHRoaXMuc3RhdGlzdGljc1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzZXR0aW5nc1BhdGgpO1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmdGaWxlLCBjb250ZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHNldHRpbmdzUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUMxMjRcdUM4MTUgXHVEMzBDXHVDNzdDIFx1QzgwMFx1QzdBNSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aH0vc2V0dGluZ3MuanNvbmApO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc2V0dGluZ3NQYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zZXR0aW5ncykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzID0geyAuLi50aGlzLnNldHRpbmdzLCAuLi5kYXRhLnNldHRpbmdzIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXRpc3RpY3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0aXN0aWNzID0geyAuLi50aGlzLnN0YXRpc3RpY3MsIC4uLmRhdGEuc3RhdGlzdGljcyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignXHVDMTI0XHVDODE1IFx1RDMwQ1x1Qzc3QyBcdUI4NUNcdUI0REMgXHVDMkU0XHVEMzI4LCBcdUFFMzBcdUJDRjhcdUFDMTIgXHVDMEFDXHVDNkE5OicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJvb2sgXHVBRDAwXHVCOUFDIFx1QkE1NFx1QzExQ1x1QjREQ1x1QjRFNFxuICAgIGFzeW5jIGNyZWF0ZUJvb2sobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nID0gJycpOiBQcm9taXNlPEJvb2s+IHtcbiAgICAgICAgY29uc3QgaWQgPSBgYm9va18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gICAgICAgIGNvbnN0IGJvb2s6IEJvb2sgPSB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB3b3JkQ291bnQ6IDAsXG4gICAgICAgICAgICBpc0RlZmF1bHQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLmJvb2tzLnNldChpZCwgYm9vayk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XG4gICAgICAgIHJldHVybiBib29rO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZUJvb2soYm9va0lkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8Qm9vaz4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XG4gICAgICAgIGlmICghYm9vaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCb29rIFwiJHtib29rSWR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cGRhdGVkQm9vazogQm9vayA9IHtcbiAgICAgICAgICAgIC4uLmJvb2ssXG4gICAgICAgICAgICAuLi51cGRhdGVzLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmJvb2tzLnNldChib29rSWQsIHVwZGF0ZWRCb29rKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZSh1cGRhdGVkQm9vayk7XG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlQm9vayhib29rSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoYm9va0lkID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc0MCBcdUMwQURcdUM4MUNcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldChib29rSWQpO1xuICAgICAgICBpZiAoIWJvb2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQm9vayBcIiR7Ym9va0lkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYm9va1x1QzVEMCBcdUMxOERcdUQ1NUMgXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUNcbiAgICAgICAgY29uc3Qgd29yZHNUb0RlbGV0ZSA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gYm9va0lkKVxuICAgICAgICAgICAgLm1hcCh3b3JkID0+IHdvcmQud29yZCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHNUb0RlbGV0ZSkge1xuICAgICAgICAgICAgdGhpcy53b3Jkcy5kZWxldGUod29yZC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGJvb2sgXHVDMEFEXHVDODFDXG4gICAgICAgIHRoaXMuYm9va3MuZGVsZXRlKGJvb2tJZCk7XG5cbiAgICAgICAgLy8gXHVEMzBDXHVDNzdDIFx1QzBBRFx1QzgxQ1xuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke2Jvb2submFtZS5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgJ18nKX0ubWRgO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmRlbGV0ZShmaWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBib29rXHVDNzc0IFx1QzBBRFx1QzgxQ1x1QjQxQyBib29rXHVDNzc0XHVCQTc0IFx1QUUzMFx1QkNGOCBib29rXHVDNzNDXHVCODVDIFx1QkNDMFx1QUNCRFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkID09PSBib29rSWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCA9ICdkZWZhdWx0JztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIGdldEFsbEJvb2tzKCk6IEJvb2tbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYm9va3MudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhLmlzRGVmYXVsdCkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKGIuaXNEZWZhdWx0KSByZXR1cm4gMTtcbiAgICAgICAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRCb29rKGJvb2tJZDogc3RyaW5nKTogQm9vayB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvb2tzLmdldChib29rSWQpO1xuICAgIH1cblxuICAgIGdldEN1cnJlbnRCb29rKCk6IEJvb2sgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5ib29rcy5nZXQodGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZXRDdXJyZW50Qm9vayhib29rSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXRoaXMuYm9va3MuaGFzKGJvb2tJZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQm9vayBcIiR7Ym9va0lkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCA9IGJvb2tJZDtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICAvLyBCb29rXHVCQ0M0IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgcHJpdmF0ZSB1cGRhdGVCb29rV29yZENvdW50KGJvb2tJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHdvcmRDb3VudCA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gYm9va0lkKS5sZW5ndGg7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQoYm9va0lkKTtcbiAgICAgICAgaWYgKGJvb2spIHtcbiAgICAgICAgICAgIGJvb2sud29yZENvdW50ID0gd29yZENvdW50O1xuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwXG4gICAgYXN5bmMgYWRkV29yZCh3b3JkRGF0YTogVm9jYWJ1bGFyeUNhcmQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgd29yZCA9IHdvcmREYXRhLndvcmQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKHRoaXMud29yZHMuaGFzKHdvcmQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZERhdGEud29yZH1cIlx1QjI5NCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTY5XHVCMkM4XHVCMkU0LmApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3V29yZDogVm9jYWJ1bGFyeUNhcmQgPSB7XG4gICAgICAgICAgICAuLi53b3JkRGF0YSxcbiAgICAgICAgICAgIHdvcmQ6IHdvcmREYXRhLndvcmQudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgIHJldmlld0NvdW50OiAwLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogJ2dvb2QnLFxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBudWxsLFxuICAgICAgICAgICAgYWRkZWREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBib29rSWQ6IHdvcmREYXRhLmJvb2tJZCB8fCB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWRcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLndvcmRzLnNldCh3b3JkLCBuZXdXb3JkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KG5ld1dvcmQuYm9va0lkKTtcbiAgICAgICAgaWYgKGJvb2spIHtcbiAgICAgICAgICAgIGJvb2sud29yZENvdW50Kys7XG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQ1xuICAgIGFzeW5jIHJlbW92ZVdvcmQod29yZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHdvcmRLZXkgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IHdvcmREYXRhID0gdGhpcy53b3Jkcy5nZXQod29yZEtleSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXdvcmREYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJvb2tJZCA9IHdvcmREYXRhLmJvb2tJZDtcbiAgICAgICAgdGhpcy53b3Jkcy5kZWxldGUod29yZEtleSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9vayBcdUQzMENcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldChib29rSWQpO1xuICAgICAgICBpZiAoYm9vaykge1xuICAgICAgICAgICAgYm9vay53b3JkQ291bnQtLTtcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IChcdUJDRjVcdUMyQjUgXHVBQ0IwXHVBQ0ZDKVxuICAgIGFzeW5jIHVwZGF0ZVdvcmQod29yZDogc3RyaW5nLCBkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgd29yZEtleSA9IHdvcmQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3Qgd29yZERhdGEgPSB0aGlzLndvcmRzLmdldCh3b3JkS2V5KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghd29yZERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xuICAgICAgICB9XG5cbiAgICAgICAgd29yZERhdGEucmV2aWV3Q291bnQrKztcbiAgICAgICAgd29yZERhdGEuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHk7XG4gICAgICAgIHdvcmREYXRhLmxhc3RSZXZpZXdlZCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuICAgICAgICAvLyBcdUQxQjVcdUFDQzQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIHRoaXMuc3RhdGlzdGljcy50b3RhbFJldmlld3MrKztcbiAgICAgICAgdGhpcy51cGRhdGVTdHJlYWsoKTtcblxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9vayBcdUQzMENcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldCh3b3JkRGF0YS5ib29rSWQpO1xuICAgICAgICBpZiAoYm9vaykge1xuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGJvb2spO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggKFx1QkNGNVx1QzJCNSBcdUFDQjBcdUFDRkMgKyBcdUMyQTRcdUQzOThcdUM3NzRcdUMyQTRcdUI0REMgXHVCOUFDXHVENTNDXHVEMkYwXHVDMTU4IFx1QzgxNVx1QkNGNClcbiAgICBhc3luYyB1cGRhdGVXb3JkV2l0aFNjaGVkdWxlKFxuICAgICAgICB3b3JkOiBzdHJpbmcsIFxuICAgICAgICBkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcsIFxuICAgICAgICBzY2hlZHVsZUluZm8/OiBhbnlcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgd29yZEtleSA9IHdvcmQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3Qgd29yZERhdGEgPSB0aGlzLndvcmRzLmdldCh3b3JkS2V5KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghd29yZERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xuICAgICAgICB9XG5cbiAgICAgICAgd29yZERhdGEucmV2aWV3Q291bnQrKztcbiAgICAgICAgd29yZERhdGEuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHk7XG4gICAgICAgIHdvcmREYXRhLmxhc3RSZXZpZXdlZCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QzJBNFx1RDM5OFx1Qzc3NFx1QzJBNFx1QjREQyBcdUI5QUNcdUQ1M0NcdUQyRjBcdUMxNTggXHVDODE1XHVCQ0Y0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICBpZiAoc2NoZWR1bGVJbmZvKSB7XG4gICAgICAgICAgICB3b3JkRGF0YS5zY2hlZHVsZUluZm8gPSBzY2hlZHVsZUluZm87XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUQxQjVcdUFDQzQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIHRoaXMuc3RhdGlzdGljcy50b3RhbFJldmlld3MrKztcbiAgICAgICAgdGhpcy51cGRhdGVTdHJlYWsoKTtcblxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9vayBcdUQzMENcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldCh3b3JkRGF0YS5ib29rSWQpO1xuICAgICAgICBpZiAoYm9vaykge1xuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGJvb2spO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUM4MDRcdUNDQjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOCAoTExNIEFQSVx1Qjg1QyBcdUFDMDBcdUM4MzhcdUM2MjggXHVDODE1XHVCQ0Y0XHVCODVDIFx1QjM2RVx1QzVCNFx1QzRGMFx1QUUzMClcbiAgICBhc3luYyB1cGRhdGVXb3JkRGF0YSh3b3JkOiBzdHJpbmcsIHVwZGF0ZWRXb3JkRGF0YTogVm9jYWJ1bGFyeUNhcmQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgd29yZEtleSA9IHdvcmQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdXb3JkID0gdGhpcy53b3Jkcy5nZXQod29yZEtleSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWV4aXN0aW5nV29yZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVCMkU4XHVDNUI0XHVDNzU4IFx1QkNGNVx1QzJCNSBcdUFEMDBcdUI4MjggXHVDODE1XHVCQ0Y0XHVCMjk0IFx1QzcyMFx1QzlDMFx1RDU1OFx1QUNFMCwgXHVCNzNCIFx1QzgxNVx1QkNGNFx1QjlDQyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgY29uc3QgdXBkYXRlZFdvcmQ6IFZvY2FidWxhcnlDYXJkID0ge1xuICAgICAgICAgICAgLi4udXBkYXRlZFdvcmREYXRhLFxuICAgICAgICAgICAgd29yZDogd29yZEtleSxcbiAgICAgICAgICAgIHJldmlld0NvdW50OiBleGlzdGluZ1dvcmQucmV2aWV3Q291bnQsXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiBleGlzdGluZ1dvcmQuZGlmZmljdWx0eSxcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogZXhpc3RpbmdXb3JkLmxhc3RSZXZpZXdlZCxcbiAgICAgICAgICAgIGFkZGVkRGF0ZTogZXhpc3RpbmdXb3JkLmFkZGVkRGF0ZSxcbiAgICAgICAgICAgIGJvb2tJZDogZXhpc3RpbmdXb3JkLmJvb2tJZFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMud29yZHMuc2V0KHdvcmRLZXksIHVwZGF0ZWRXb3JkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KHVwZGF0ZWRXb3JkLmJvb2tJZCk7XG4gICAgICAgIGlmIChib29rKSB7XG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4Q1xuICAgIGdldFdvcmQod29yZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmQgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy53b3Jkcy5nZXQod29yZC50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG5cbiAgICAvLyBcdUQ2MDRcdUM3QUMgYm9va1x1Qzc1OCBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4Q1xuICAgIGdldEFsbFdvcmRzKCk6IFZvY2FidWxhcnlDYXJkW10ge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS53b3JkLmxvY2FsZUNvbXBhcmUoYi53b3JkKSk7XG4gICAgfVxuXG4gICAgLy8gXHVEMkI5XHVDODE1IGJvb2tcdUM3NTggXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OENcbiAgICBnZXRXb3Jkc0J5Qm9vayhib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkW10ge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSBib29rSWQpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS53b3JkLmxvY2FsZUNvbXBhcmUoYi53b3JkKSk7XG4gICAgfVxuXG4gICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QjMwMFx1QzBDMSBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDIChcdUQ2MDRcdUM3QUMgYm9vaylcbiAgICBnZXRXb3Jkc0ZvclJldmlldygpOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgcmV2aWV3SW50ZXJ2YWxNcyA9IHRoaXMuc2V0dGluZ3MucmV2aWV3SW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZClcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF3b3JkLmxhc3RSZXZpZXdlZCkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFJldmlldyA9IG5ldyBEYXRlKHdvcmQubGFzdFJldmlld2VkKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0UmV2aWV3ID0gbm93LmdldFRpbWUoKSAtIGxhc3RSZXZpZXcuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0aW1lU2luY2VMYXN0UmV2aWV3ID49IHJldmlld0ludGVydmFsTXM7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdUIyRThcdUM1QjQgXHVBQzgwXHVDMEM5IChcdUQ2MDRcdUM3QUMgYm9vaylcbiAgICBzZWFyY2hXb3JkcyhxdWVyeTogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmRbXSB7XG4gICAgICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT5cbiAgICAgICAgICAgICAgICB3b3JkLndvcmQuaW5jbHVkZXMobG93ZXJRdWVyeSkgfHxcbiAgICAgICAgICAgICAgICB3b3JkLm1lYW5pbmdzLnNvbWUobWVhbmluZyA9PiBtZWFuaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1RDFCNVx1QUNDNCBcdUM4NzBcdUQ2OEMgKFx1RDYwNFx1QzdBQyBib29rKVxuICAgIGdldFN0YXRpc3RpY3MoKSB7XG4gICAgICAgIGNvbnN0IHdvcmRzID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpO1xuICAgICAgICBjb25zdCB0b3RhbFdvcmRzID0gd29yZHMubGVuZ3RoO1xuICAgICAgICBjb25zdCB0b3RhbFJldmlld3MgPSB0aGlzLnN0YXRpc3RpY3MudG90YWxSZXZpZXdzO1xuICAgICAgICBjb25zdCBhdmVyYWdlRGlmZmljdWx0eSA9IHdvcmRzLmxlbmd0aCA+IDAgXG4gICAgICAgICAgICA/IHdvcmRzLnJlZHVjZSgoc3VtLCB3b3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZmljdWx0eVZhbHVlID0gd29yZC5kaWZmaWN1bHR5ID09PSAnZWFzeScgPyAxIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQuZGlmZmljdWx0eSA9PT0gJ2dvb2QnID8gMiA6IDM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1bSArIGRpZmZpY3VsdHlWYWx1ZTtcbiAgICAgICAgICAgIH0sIDApIC8gd29yZHMubGVuZ3RoXG4gICAgICAgICAgICA6IDA7XG5cbiAgICAgICAgY29uc3Qgd29yZHNCeURpZmZpY3VsdHkgPSB7XG4gICAgICAgICAgICBlYXN5OiB3b3Jkcy5maWx0ZXIodyA9PiB3LmRpZmZpY3VsdHkgPT09ICdlYXN5JykubGVuZ3RoLFxuICAgICAgICAgICAgZ29vZDogd29yZHMuZmlsdGVyKHcgPT4gdy5kaWZmaWN1bHR5ID09PSAnZ29vZCcpLmxlbmd0aCxcbiAgICAgICAgICAgIGhhcmQ6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2hhcmQnKS5sZW5ndGhcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBcdUNENUNcdUFERkMgN1x1Qzc3QyBcdUQ2NUNcdUIzRDkgXHVBQ0M0XHVDMEIwXG4gICAgICAgIGNvbnN0IHJlY2VudEFjdGl2aXR5ID0gdGhpcy5jYWxjdWxhdGVSZWNlbnRBY3Rpdml0eSgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3RhbFdvcmRzLFxuICAgICAgICAgICAgdG90YWxSZXZpZXdzLFxuICAgICAgICAgICAgc3RyZWFrRGF5czogdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMsXG4gICAgICAgICAgICBhdmVyYWdlRGlmZmljdWx0eSxcbiAgICAgICAgICAgIHdvcmRzQnlEaWZmaWN1bHR5LFxuICAgICAgICAgICAgcmVjZW50QWN0aXZpdHlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBcdUM3N0NcdUM3N0MgXHVCQUE5XHVENDVDIFx1QzlDNFx1RDU4OVx1Qjk2MCBcdUM4NzBcdUQ2OEMgKFx1RDYwNFx1QzdBQyBib29rKVxuICAgIGdldERhaWx5R29hbFByb2dyZXNzKCkge1xuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHRvZGF5V29yZHMgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZClcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF3b3JkLmxhc3RSZXZpZXdlZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh3b3JkLmxhc3RSZXZpZXdlZCkudG9EYXRlU3RyaW5nKCkgPT09IHRvZGF5O1xuICAgICAgICAgICAgfSkubGVuZ3RoO1xuXG4gICAgICAgIGNvbnN0IGdvYWwgPSB0aGlzLnNldHRpbmdzLmRhaWx5R29hbDtcbiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IGdvYWwgPiAwID8gTWF0aC5taW4oKHRvZGF5V29yZHMgLyBnb2FsKSAqIDEwMCwgMTAwKSA6IDA7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGN1cnJlbnQ6IHRvZGF5V29yZHMsXG4gICAgICAgICAgICBnb2FsOiBnb2FsLFxuICAgICAgICAgICAgcGVyY2VudGFnZTogcGVyY2VudGFnZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICBhc3luYyB1cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5nczogUGFydGlhbDx0eXBlb2YgdGhpcy5zZXR0aW5ncz4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDODAwXHVDN0E1XHVDNkE5IFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUJDQzBcdUQ2NTggKFx1RDYzOFx1RDY1OFx1QzEzMSBcdUM3MjBcdUM5QzApXG4gICAgZ2V0RGF0YUZvclNhdmUoKTogRGF0YWJhc2VEYXRhIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvb2tzOiBBcnJheS5mcm9tKHRoaXMuYm9va3MudmFsdWVzKCkpLFxuICAgICAgICAgICAgd29yZHM6IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSksXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5zZXR0aW5ncyxcbiAgICAgICAgICAgIHN0YXRpc3RpY3M6IHRoaXMuc3RhdGlzdGljc1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1QzgwMFx1QzdBNVx1QjQxQyBcdUIzNzBcdUM3NzRcdUQxMzBcdUM1RDBcdUMxMUMgXHVCODVDXHVCNERDIChcdUQ2MzhcdUQ2NThcdUMxMzEgXHVDNzIwXHVDOUMwKVxuICAgIGFzeW5jIGxvYWRGcm9tRGF0YShkYXRhOiBEYXRhYmFzZURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gTUQgXHVEMzBDXHVDNzdDIFx1QzJEQ1x1QzJBNFx1RDE1Q1x1QzVEMFx1QzExQ1x1QjI5NCBcdUM3NzQgXHVCQTU0XHVDMTFDXHVCNERDIFx1QjMwMFx1QzJFMCBsb2FkQWxsQm9va3MoKVx1Qjk3QyBcdUMwQUNcdUM2QTlcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQWxsQm9va3MoKTtcbiAgICB9XG5cbiAgICAvLyBcdUM1RjBcdUMxOEQgXHVENTU5XHVDMkI1XHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgIHByaXZhdGUgdXBkYXRlU3RyZWFrKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGxhc3RTdHVkeURhdGUgPSB0aGlzLnN0YXRpc3RpY3MubGFzdFN0dWR5RGF0ZSBcbiAgICAgICAgICAgID8gbmV3IERhdGUodGhpcy5zdGF0aXN0aWNzLmxhc3RTdHVkeURhdGUpLnRvRGF0ZVN0cmluZygpXG4gICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgaWYgKGxhc3RTdHVkeURhdGUgPT09IHRvZGF5KSB7XG4gICAgICAgICAgICAvLyBcdUM2MjRcdUIyOTggXHVDNzc0XHVCQkY4IFx1RDU1OVx1QzJCNVx1RDU4OFx1QzczQ1x1QkE3NCBcdUM1RjBcdUMxOERcdUM3N0MgXHVDOTlEXHVBQzAwXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFsYXN0U3R1ZHlEYXRlKSB7XG4gICAgICAgICAgICAvLyBcdUNDOThcdUM3NEMgXHVENTU5XHVDMkI1XHVENTU4XHVCMjk0IFx1QUNCRFx1QzZCMFxuICAgICAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHllc3RlcmRheS5zZXREYXRlKHllc3RlcmRheS5nZXREYXRlKCkgLSAxKTtcbiAgICAgICAgICAgIGNvbnN0IHllc3RlcmRheVN0ciA9IHllc3RlcmRheS50b0RhdGVTdHJpbmcoKTtcblxuICAgICAgICAgICAgaWYgKGxhc3RTdHVkeURhdGUgPT09IHllc3RlcmRheVN0cikge1xuICAgICAgICAgICAgICAgIC8vIFx1QzVCNFx1QzgxQyBcdUQ1NTlcdUMyQjVcdUQ1ODhcdUM3M0NcdUJBNzQgXHVDNUYwXHVDMThEXHVDNzdDIFx1Qzk5RFx1QUMwMFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGlzdGljcy5zdHJlYWtEYXlzKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFx1QzVGMFx1QzE4RFx1Qzc3NCBcdUIwNEFcdUM1QjRcdUM5QzQgXHVBQ0JEXHVDNkIwIDFcdUI4NUMgXHVCOUFDXHVDMTRCXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdGF0aXN0aWNzLmxhc3RTdHVkeURhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgLy8gXHVDRDVDXHVBREZDIDdcdUM3N0MgXHVENjVDXHVCM0Q5IFx1QUNDNFx1QzBCMFxuICAgIHByaXZhdGUgY2FsY3VsYXRlUmVjZW50QWN0aXZpdHkoKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2aXR5ID0gW107XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gNjsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0b2RheSk7XG4gICAgICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBpKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBkYXRlLnRvRGF0ZVN0cmluZygpO1xuXG4gICAgICAgICAgICBjb25zdCB3b3Jkc1N0dWRpZWQgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpLmZpbHRlcih3b3JkID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHdvcmQubGFzdFJldmlld2VkKS50b0RhdGVTdHJpbmcoKSA9PT0gZGF0ZVN0cjtcbiAgICAgICAgICAgIH0pLmxlbmd0aDtcblxuICAgICAgICAgICAgY29uc3QgcmV2aWV3c0NvbXBsZXRlZCA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSkuZmlsdGVyKHdvcmQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghd29yZC5sYXN0UmV2aWV3ZWQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXZpZXdEYXRlID0gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXZpZXdEYXRlLnRvRGF0ZVN0cmluZygpID09PSBkYXRlU3RyO1xuICAgICAgICAgICAgfSkubGVuZ3RoO1xuXG4gICAgICAgICAgICBhY3Rpdml0eS5wdXNoKHtcbiAgICAgICAgICAgICAgICBkYXRlOiBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgICAgICAgICAgICB3b3Jkc1N0dWRpZWQsXG4gICAgICAgICAgICAgICAgcmV2aWV3c0NvbXBsZXRlZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWN0aXZpdHk7XG4gICAgfVxuXG4gICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NCBcdUFDQkRcdUI4NUMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgdXBkYXRlVm9jYWJ1bGFyeUZvbGRlclBhdGgobmV3UGF0aDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGggPSBuZXdQYXRoO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVWb2NhYnVsYXJ5Rm9sZGVyKCk7XG4gICAgfVxufSAiLCAiaW1wb3J0IHsgSUxMTVNlcnZpY2UsIFdvcmREYXRhUmVxdWVzdCwgV29yZERhdGFSZXNwb25zZSB9IGZyb20gJy4uLy4uL2NvcmUvcG9ydHMvc2VydmljZXMvSUxMTVNlcnZpY2UnO1xuaW1wb3J0IHsgTExNU2VydmljZSB9IGZyb20gJy4vTExNU2VydmljZSc7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XG5cbmV4cG9ydCBjbGFzcyBMTE1TZXJ2aWNlQWRhcHRlciBpbXBsZW1lbnRzIElMTE1TZXJ2aWNlIHtcbiAgICBwcml2YXRlIGxsbVNlcnZpY2U6IExMTVNlcnZpY2U7XG5cbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMubGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHNldHRpbmdzKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRXb3JkRGF0YShyZXF1ZXN0OiBXb3JkRGF0YVJlcXVlc3QpOiBQcm9taXNlPFdvcmREYXRhUmVzcG9uc2U+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHdvcmRJbmZvID0gYXdhaXQgdGhpcy5sbG1TZXJ2aWNlLmdldFdvcmRJbmZvKHJlcXVlc3Qud29yZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmRJbmZvLndvcmQsXG4gICAgICAgICAgICAgICAgICAgIG1lYW5pbmc6IHdvcmRJbmZvLm1lYW5pbmdzLFxuICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkSW5mby5wcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZEluZm8uZXhhbXBsZXMsXG4gICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3Jkczogd29yZEluZm8uc2ltaWxhcldvcmRzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubGxtU2VydmljZS50ZXN0Q29ubmVjdGlvbigpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2Uoc2V0dGluZ3MpO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgSVdvcmRTZXJ2aWNlLCBXb3JkRGF0YVJlcXVlc3QsIFdvcmREYXRhUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9jb3JlL3BvcnRzL3NlcnZpY2VzL0lXb3JkU2VydmljZSc7XG5pbXBvcnQgeyBXb3JkU2VydmljZSB9IGZyb20gJy4vV29yZFNlcnZpY2UnO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xuXG5leHBvcnQgY2xhc3MgV29yZFNlcnZpY2VBZGFwdGVyIGltcGxlbWVudHMgSVdvcmRTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHdvcmRTZXJ2aWNlOiBXb3JkU2VydmljZTtcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy53b3JkU2VydmljZSA9IG5ldyBXb3JkU2VydmljZShzZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0V29yZERhdGEocmVxdWVzdDogV29yZERhdGFSZXF1ZXN0KTogUHJvbWlzZTxXb3JkRGF0YVJlc3BvbnNlPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IGF3YWl0IHRoaXMud29yZFNlcnZpY2UuZ2V0V29yZERhdGEocmVxdWVzdC53b3JkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgd29yZDogd29yZERhdGEud29yZCxcbiAgICAgICAgICAgICAgICAgICAgbWVhbmluZzogd29yZERhdGEubWVhbmluZyxcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZERhdGEucHJvbnVuY2lhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IHdvcmREYXRhLmV4YW1wbGVzIHx8IFtdLFxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREYXRhLnNpbWlsYXJXb3JkcyB8fCBbXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpOiB2b2lkIHtcbiAgICAgICAgdGhpcy53b3JkU2VydmljZSA9IG5ldyBXb3JkU2VydmljZShzZXR0aW5ncyk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBJVFRTU2VydmljZSB9IGZyb20gJy4vSVRUU1NlcnZpY2UnO1xuaW1wb3J0IHsgVFRTU2VydmljZSwgVFRTU2VydmljZUZhY3RvcnkgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS90dHMvVFRTU2VydmljZSc7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XG5cbmV4cG9ydCBjbGFzcyBUVFNTZXJ2aWNlQWRhcHRlciBpbXBsZW1lbnRzIElUVFNTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHR0c1NlcnZpY2U6IFRUU1NlcnZpY2U7XG5cbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMudHRzU2VydmljZSA9IFRUU1NlcnZpY2VGYWN0b3J5LmNyZWF0ZVRUU1NlcnZpY2Uoc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy50dHNTZXJ2aWNlLnNwZWFrVGV4dCh0ZXh0KTtcbiAgICB9XG5cbiAgICBhc3luYyBzcGVha1dvcmQod29yZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMudHRzU2VydmljZS5zcGVha1dvcmQod29yZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc3BlYWtFeGFtcGxlKGV4YW1wbGU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtFeGFtcGxlKGV4YW1wbGUpO1xuICAgIH1cblxuICAgIHN0b3BTcGVha2luZygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnN0b3BTcGVha2luZygpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVBRTMwXHVDODc0IFRUUyBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDODE1XHVCOUFDXG4gICAgICAgIHRoaXMudHRzU2VydmljZS5kZXN0cm95KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUMwQzggXHVDMTI0XHVDODE1XHVDNzNDXHVCODVDIFRUUyBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDN0FDXHVDMEREXHVDMTMxXG4gICAgICAgIHRoaXMudHRzU2VydmljZSA9IFRUU1NlcnZpY2VGYWN0b3J5LmNyZWF0ZVRUU1NlcnZpY2Uoc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGlzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIFx1RDMyOVx1RDFBMFx1QjlBQ1x1QzVEMFx1QzExQyBcdUM3NzRcdUJCRjggZW5hYmxlZCBcdUNDQjRcdUQwNkNcdUI5N0MgXHVENTY4XG4gICAgfVxuXG4gICAgZ2V0QXZhaWxhYmxlVm9pY2VzKCk6IFNwZWVjaFN5bnRoZXNpc1ZvaWNlW10ge1xuICAgICAgICBjb25zdCB2b2ljZXMgPSB0aGlzLnR0c1NlcnZpY2UuZ2V0QXZhaWxhYmxlVm9pY2VzKCk7XG4gICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTQgXHVENjM4XHVENjU4XHVDNzQ0IFx1QzcwNFx1RDU3NCBcdUJFNDggXHVCQzMwXHVDNUY0IFx1QkMxOFx1RDY1OCAoXHVDMkU0XHVDODFDIFx1Qzc0Q1x1QzEzMVx1Qzc0MCBcdUFDMDEgXHVDMTFDXHVCRTQ0XHVDMkE0XHVBQzAwIFx1Q0M5OFx1QjlBQylcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy50dHNTZXJ2aWNlLnRlc3RDb25uZWN0aW9uKCk7XG4gICAgfVxuXG4gICAgaXNQYXVzZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnR0c1NlcnZpY2UuaXNQYXVzZWQoKTtcbiAgICB9XG5cbiAgICByZXN1bWUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMudHRzU2VydmljZS5yZXN1bWUoKTtcbiAgICB9XG5cbiAgICBwYXVzZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnBhdXNlKCk7XG4gICAgfVxuXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlLmRlc3Ryb3koKTtcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERJQ29udGFpbmVyIH0gZnJvbSAnLi9ESUNvbnRhaW5lcic7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XG5cbi8vIENvcmUgU2VydmljZXNcbmltcG9ydCB7IEFkZFdvcmRVc2VDYXNlIH0gZnJvbSAnLi4vLi4vY29yZS91c2UtY2FzZXMvQWRkV29yZFVzZUNhc2UnO1xuaW1wb3J0IHsgQ3JlYXRlQm9va1VzZUNhc2UgfSBmcm9tICcuLi8uLi9jb3JlL3VzZS1jYXNlcy9DcmVhdGVCb29rVXNlQ2FzZSc7XG5pbXBvcnQgeyBHZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UgfSBmcm9tICcuLi8uLi9jb3JlL3VzZS1jYXNlcy9HZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UnO1xuaW1wb3J0IHsgUmV2aWV3V29yZFVzZUNhc2UgfSBmcm9tICcuLi8uLi9jb3JlL3VzZS1jYXNlcy9SZXZpZXdXb3JkVXNlQ2FzZSc7XG5cbi8vIEluZnJhc3RydWN0dXJlIFNlcnZpY2VzXG5pbXBvcnQgeyBWb2NhYnVsYXJ5UmVwb3NpdG9yeUFkYXB0ZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyJztcbmltcG9ydCB7IEJvb2tSZXBvc2l0b3J5QWRhcHRlciB9IGZyb20gJy4uLy4uL2luZnJhc3RydWN0dXJlL29ic2lkaWFuL3JlcG9zaXRvcmllcy9Cb29rUmVwb3NpdG9yeUFkYXB0ZXInO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB9IGZyb20gJy4uLy4uL2luZnJhc3RydWN0dXJlL3N0b3JhZ2UvVm9jYWJ1bGFyeURhdGFiYXNlJztcbmltcG9ydCB7IExMTVNlcnZpY2VBZGFwdGVyIH0gZnJvbSAnLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2VBZGFwdGVyJztcblxuLy8gRXh0ZXJuYWwgU2VydmljZXNcbmltcG9ydCB7IFdvcmRTZXJ2aWNlQWRhcHRlciB9IGZyb20gJy4uLy4uL2luZnJhc3RydWN0dXJlL2V4dGVybmFsL1dvcmRTZXJ2aWNlQWRhcHRlcic7XG5pbXBvcnQgeyBUVFNTZXJ2aWNlQWRhcHRlciB9IGZyb20gJy4uLy4uL2NvcmUvcG9ydHMvc2VydmljZXMvSVRUU1NlcnZpY2VBZGFwdGVyJztcblxuZXhwb3J0IGNsYXNzIFNlcnZpY2VSZWdpc3RyeSB7XG4gICAgc3RhdGljIHJlZ2lzdGVyU2VydmljZXMoY29udGFpbmVyOiBESUNvbnRhaW5lciwgYXBwOiBBcHAsIHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpOiB2b2lkIHtcbiAgICAgICAgLy8gRXh0ZXJuYWwgZGVwZW5kZW5jaWVzXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlckluc3RhbmNlKCdhcHAnLCBhcHApO1xuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJJbnN0YW5jZSgnc2V0dGluZ3MnLCBzZXR0aW5ncyk7XG5cbiAgICAgICAgLy8gSW5mcmFzdHJ1Y3R1cmUgTGF5ZXJcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdkYXRhYmFzZU1hbmFnZXInLCAoYXBwOiBBcHApID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcihcbiAgICAgICAgICAgICAgICBhcHAsXG4gICAgICAgICAgICAgICAgKCkgPT4ge30sIC8vIHNhdmVDYWxsYmFjayAtIERJXHVDNUQwXHVDMTFDXHVCMjk0IFx1QkU0OCBcdUQ1NjhcdUMyMThcdUI4NUMgXHVDQzk4XHVCOUFDXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mudm9jYWJ1bGFyeUZvbGRlclBhdGhcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydhcHAnXSxcbiAgICAgICAgICAgIHNpbmdsZXRvbjogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3ZvY2FidWxhcnlSZXBvc2l0b3J5JywgVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyLCB7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnZGF0YWJhc2VNYW5hZ2VyJ11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdib29rUmVwb3NpdG9yeScsIEJvb2tSZXBvc2l0b3J5QWRhcHRlciwge1xuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ2RhdGFiYXNlTWFuYWdlciddXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlcignd29yZFNlcnZpY2UnLCBXb3JkU2VydmljZUFkYXB0ZXIsIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydzZXR0aW5ncyddXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignbGxtU2VydmljZScsIExMTVNlcnZpY2VBZGFwdGVyLCB7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnc2V0dGluZ3MnXVxuICAgICAgICB9KTtcblxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3R0c1NlcnZpY2UnLCBUVFNTZXJ2aWNlQWRhcHRlciwge1xuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3NldHRpbmdzJ11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ29yZSBVc2UgQ2FzZXNcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdhZGRXb3JkVXNlQ2FzZScsIEFkZFdvcmRVc2VDYXNlLCB7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsndm9jYWJ1bGFyeVJlcG9zaXRvcnknLCAnYm9va1JlcG9zaXRvcnknLCAnd29yZFNlcnZpY2UnXVxuICAgICAgICB9KTtcblxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2NyZWF0ZUJvb2tVc2VDYXNlJywgQ3JlYXRlQm9va1VzZUNhc2UsIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydib29rUmVwb3NpdG9yeSddXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignZ2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlJywgR2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlLCB7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsndm9jYWJ1bGFyeVJlcG9zaXRvcnknLCAnYm9va1JlcG9zaXRvcnknXVxuICAgICAgICB9KTtcblxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3Jldmlld1dvcmRVc2VDYXNlJywgUmV2aWV3V29yZFVzZUNhc2UsIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWyd2b2NhYnVsYXJ5UmVwb3NpdG9yeSddXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyB1cGRhdGVTZXR0aW5ncyhjb250YWluZXI6IERJQ29udGFpbmVyLCBzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKTogdm9pZCB7XG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlckluc3RhbmNlKCdzZXR0aW5ncycsIHNldHRpbmdzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QzVCNFx1QjMxMVx1RDEzMCBcdUMxMUNcdUJFNDRcdUMyQTRcdUI0RTQgXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgICAgICBpZiAoY29udGFpbmVyLmhhcygndHRzU2VydmljZScpKSB7XG4gICAgICAgICAgICBjb25zdCB0dHNTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmU8VFRTU2VydmljZUFkYXB0ZXI+KCd0dHNTZXJ2aWNlJyk7XG4gICAgICAgICAgICB0dHNTZXJ2aWNlLnVwZGF0ZVNldHRpbmdzKHNldHRpbmdzKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGNvbnRhaW5lci5oYXMoJ2xsbVNlcnZpY2UnKSkge1xuICAgICAgICAgICAgY29uc3QgbGxtU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlPExMTVNlcnZpY2VBZGFwdGVyPignbGxtU2VydmljZScpO1xuICAgICAgICAgICAgbGxtU2VydmljZS51cGRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjb250YWluZXIuaGFzKCd3b3JkU2VydmljZScpKSB7XG4gICAgICAgICAgICBjb25zdCB3b3JkU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlPFdvcmRTZXJ2aWNlQWRhcHRlcj4oJ3dvcmRTZXJ2aWNlJyk7XG4gICAgICAgICAgICB3b3JkU2VydmljZS51cGRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgIi8vIFx1QzgwNFx1QzVFRCBcdUM1RDBcdUI3RUMgXHVDQzk4XHVCOUFDIFx1QkMwRiBcdUFDQkRcdUFDQzQgXHVBRDAwXHVCOUFDXG5cbmltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGludGVyZmFjZSBFcnJvckluZm8ge1xuICAgIGVycm9yOiBFcnJvcjtcbiAgICBjb250ZXh0Pzogc3RyaW5nO1xuICAgIHVzZXJJZD86IHN0cmluZztcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgICBzdGFja1RyYWNlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgRXJyb3JCb3VuZGFyeSB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEVycm9yQm91bmRhcnk7XG4gICAgcHJpdmF0ZSBlcnJvckhhbmRsZXJzOiBNYXA8c3RyaW5nLCAoZXJyb3I6IEVycm9ySW5mbykgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBpc0luaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cblxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBFcnJvckJvdW5kYXJ5IHtcbiAgICAgICAgaWYgKCFFcnJvckJvdW5kYXJ5Lmluc3RhbmNlKSB7XG4gICAgICAgICAgICBFcnJvckJvdW5kYXJ5Lmluc3RhbmNlID0gbmV3IEVycm9yQm91bmRhcnkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRXJyb3JCb3VuZGFyeS5pbnN0YW5jZTtcbiAgICB9XG5cbiAgICAvLyBcdUM4MDRcdUM1RUQgXHVDNUQwXHVCN0VDIFx1RDU3OFx1QjRFNFx1QjdFQyBcdUNEMDhcdUFFMzBcdUQ2NTRcbiAgICBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKSByZXR1cm47XG5cbiAgICAgICAgLy8gXHVDODA0XHVDNUVEIFx1QzVEMFx1QjdFQyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgICAgICAgZXJyb3I6IGV2ZW50LmVycm9yIHx8IG5ldyBFcnJvcihldmVudC5tZXNzYWdlKSxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnR2xvYmFsIEVycm9yJyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgc3RhY2tUcmFjZTogZXZlbnQuZXJyb3I/LnN0YWNrXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUHJvbWlzZSByZWplY3Rpb24gXHVENTc4XHVCNEU0XHVCN0VDXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGVycm9yOiBldmVudC5yZWFzb24gaW5zdGFuY2VvZiBFcnJvciA/IGV2ZW50LnJlYXNvbiA6IG5ldyBFcnJvcihTdHJpbmcoZXZlbnQucmVhc29uKSksXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ1VuaGFuZGxlZCBQcm9taXNlIFJlamVjdGlvbicsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgIHN0YWNrVHJhY2U6IGV2ZW50LnJlYXNvbj8uc3RhY2tcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIFx1QzVEMFx1QjdFQyBcdUQ1NzhcdUI0RTRcdUI3RUMgXHVCNEYxXHVCODVEXG4gICAgcmVnaXN0ZXJIYW5kbGVyKGNvbnRleHQ6IHN0cmluZywgaGFuZGxlcjogKGVycm9yOiBFcnJvckluZm8pID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLnNldChjb250ZXh0LCBoYW5kbGVyKTtcbiAgICB9XG5cbiAgICAvLyBcdUM1RDBcdUI3RUMgXHVENTc4XHVCNEU0XHVCN0VDIFx1QzgxQ1x1QUM3MFxuICAgIHVucmVnaXN0ZXJIYW5kbGVyKGNvbnRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmVycm9ySGFuZGxlcnMuZGVsZXRlKGNvbnRleHQpO1xuICAgIH1cblxuICAgIC8vIFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUNcbiAgICBoYW5kbGVFcnJvcihlcnJvckluZm86IEVycm9ySW5mbyk6IHZvaWQge1xuICAgICAgICAvLyBcdUNGNThcdUMxOTRcdUM1RDAgXHVDNUQwXHVCN0VDIFx1Qjg1Q1x1QURGOFxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYXVnaHQgYnkgRXJyb3JCb3VuZGFyeTonLCBlcnJvckluZm8pO1xuXG4gICAgICAgIC8vIFx1QzBBQ1x1QzZBOVx1Qzc5MFx1QzVEMFx1QUM4QyBcdUNFNUNcdUQ2NTRcdUM4MDFcdUM3NzggXHVDNUQwXHVCN0VDIFx1QkE1NFx1QzJEQ1x1QzlDMCBcdUQ0NUNcdUMyRENcbiAgICAgICAgY29uc3QgdXNlck1lc3NhZ2UgPSB0aGlzLmdldFVzZXJGcmllbmRseU1lc3NhZ2UoZXJyb3JJbmZvLmVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZSh1c2VyTWVzc2FnZSwgMCk7XG5cbiAgICAgICAgLy8gXHVCNEYxXHVCODVEXHVCNDFDIFx1RDU3OFx1QjRFNFx1QjdFQ1x1QjRFNCBcdUMyRTRcdUQ1ODlcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLmZvckVhY2goKGhhbmRsZXIsIGNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlcihlcnJvckluZm8pO1xuICAgICAgICAgICAgfSBjYXRjaCAoaGFuZGxlckVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciBmb3IgY29udGV4dCAke2NvbnRleHR9OmAsIGhhbmRsZXJFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1QzU0OFx1QzgwNFx1RDU1QyBcdUQ1NjhcdUMyMTggXHVDMkU0XHVENTg5IFx1Qjc5OFx1RDM3Q1xuICAgIGFzeW5jIHNhZmVFeGVjdXRlPFQ+KFxuICAgICAgICBmbjogKCkgPT4gUHJvbWlzZTxUPiB8IFQsXG4gICAgICAgIGNvbnRleHQ6IHN0cmluZyxcbiAgICAgICAgZmFsbGJhY2s/OiBUXG4gICAgKTogUHJvbWlzZTxUIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSksXG4gICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgc3RhY2tUcmFjZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QjNEOVx1QUUzMCBcdUQ1NjhcdUMyMThcdUM2QTkgXHVDNTQ4XHVDODA0XHVENTVDIFx1QzJFNFx1RDU4OVxuICAgIHNhZmVFeGVjdXRlU3luYzxUPihcbiAgICAgICAgZm46ICgpID0+IFQsXG4gICAgICAgIGNvbnRleHQ6IHN0cmluZyxcbiAgICAgICAgZmFsbGJhY2s/OiBUXG4gICAgKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSksXG4gICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgc3RhY2tUcmFjZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUNFNUNcdUQ2NTRcdUM4MDFcdUM3NzggXHVDNUQwXHVCN0VDIFx1QkE1NFx1QzJEQ1x1QzlDMCBcdUMwRERcdUMxMzFcbiAgICBwcml2YXRlIGdldFVzZXJGcmllbmRseU1lc3NhZ2UoZXJyb3I6IEVycm9yKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZXJyb3JUeXBlID0gZXJyb3IubmFtZTtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcblxuICAgICAgICAvLyBcdUM1RDBcdUI3RUMgXHVEMEMwXHVDNzg1XHVCQ0M0IFx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUNFNUNcdUQ2NTRcdUM4MDEgXHVCQTU0XHVDMkRDXHVDOUMwXG4gICAgICAgIGNvbnN0IGZyaWVuZGx5TWVzc2FnZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgICAgICAnTmV0d29ya0Vycm9yJzogJ1x1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QyBcdUM1RjBcdUFDQjBcdUM1RDAgXHVCQjM4XHVDODFDXHVBQzAwIFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDNzc4XHVEMTMwXHVCMTM3IFx1QzVGMFx1QUNCMFx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyxcbiAgICAgICAgICAgICdUeXBlRXJyb3InOiAnXHVCMzcwXHVDNzc0XHVEMTMwIFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nLFxuICAgICAgICAgICAgJ1JlZmVyZW5jZUVycm9yJzogJ1x1RDU0NFx1QzY5NFx1RDU1QyBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyxcbiAgICAgICAgICAgICdTeW50YXhFcnJvcic6ICdcdUIzNzBcdUM3NzRcdUQxMzAgXHVENjE1XHVDMkREXHVDNUQwIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyxcbiAgICAgICAgICAgICdRdW90YUV4Y2VlZGVkRXJyb3InOiAnXHVDODAwXHVDN0E1IFx1QUNGNVx1QUMwNFx1Qzc3NCBcdUJEODBcdUM4NzFcdUQ1NjlcdUIyQzhcdUIyRTQuJyxcbiAgICAgICAgICAgICdTZWN1cml0eUVycm9yJzogJ1x1QkNGNFx1QzU0OCBcdUM4MTVcdUNDNDVcdUM3M0NcdUI4NUMgXHVDNzc4XHVENTc0IFx1Qzc5MVx1QzVDNVx1Qzc0NCBcdUMyMThcdUQ1ODlcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEFQSSBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQ1xuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdBUEknKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykpIHtcbiAgICAgICAgICAgIHJldHVybiAnQVBJIFx1QzExQ1x1QkU0NFx1QzJBNFx1QzVEMCBcdUM3N0NcdUMyRENcdUM4MDFcdUM3NzggXHVCQjM4XHVDODFDXHVBQzAwIFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDN0EwXHVDMkRDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUQzMENcdUM3N0MgXHVBRDAwXHVCODI4IFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUNcbiAgICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZmlsZScpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnRmlsZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1x1RDMwQ1x1Qzc3QyBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1RDMwQ1x1Qzc3Q1x1Qzc3NCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTRcdUM5QzAgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVBRDAwXHVCODI4IFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUNcbiAgICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZW5jcnlwdCcpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZGVjcnlwdCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0FQSSBcdUQwQTQgXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUMxMjRcdUM4MTVcdUM3NDQgXHVCMkU0XHVDMkRDIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZyaWVuZGx5TWVzc2FnZXNbZXJyb3JUeXBlXSB8fCBcbiAgICAgICAgICAgICAgIGBcdUM2MDhcdUMwQzFcdUNFNTggXHVCQUJCXHVENTVDIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQ6ICR7ZXJyb3JNZXNzYWdlfWA7XG4gICAgfVxuXG4gICAgLy8gXHVDNUQwXHVCN0VDIFx1QkNGNVx1QUQ2QyBcdUMyRENcdUIzQzRcbiAgICBhc3luYyBhdHRlbXB0UmVjb3ZlcnkoZXJyb3I6IEVycm9yLCBjb250ZXh0OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QzVEMFx1QjdFQ1x1Qzc1OCBcdUFDQkRcdUM2QjAgXHVDN0FDXHVDMkRDXHVCM0M0XG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdmZXRjaCcpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25ldHdvcmsnKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBcdUFDMDRcdUIyRThcdUQ1NUMgXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1RDE0Q1x1QzJBNFx1RDJCOFxuICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL3d3dy5nb29nbGUuY29tL2Zhdmljb24uaWNvJywgeyBcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnSEVBRCcsXG4gICAgICAgICAgICAgICAgICAgIG1vZGU6ICduby1jb3JzJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDODAwXHVDN0E1XHVDMThDIFx1QzVEMFx1QjdFQ1x1Qzc1OCBcdUFDQkRcdUM2QjAgXHVEMDc0XHVCOUFDXHVDNUI0IFx1QzJEQ1x1QjNDNFxuICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1F1b3RhRXhjZWVkZWRFcnJvcicpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gXHVDNzg0XHVDMkRDIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUQwNzRcdUI5QUNcdUM1QjQgKFx1QzJFNFx1QzgxQyBcdUFENkNcdUQ2MDRcdUM1RDBcdUMxMUNcdUIyOTQgXHVCMzU0IFx1QzJFMFx1QzkxMVx1RDU1OFx1QUM4QylcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndGVtcC1kYXRhJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gXHVDODE1XHVCOUFDXG4gICAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIH1cbn1cblxuLy8gXHVEM0I4XHVDNzU4IFx1RDU2OFx1QzIxOFx1QjRFNFxuZXhwb3J0IGNvbnN0IHNhZmVBc3luYyA9IGFzeW5jIDxUPihcbiAgICBmbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgICBjb250ZXh0OiBzdHJpbmcsXG4gICAgZmFsbGJhY2s/OiBUXG4pOiBQcm9taXNlPFQgfCB1bmRlZmluZWQ+ID0+IHtcbiAgICByZXR1cm4gRXJyb3JCb3VuZGFyeS5nZXRJbnN0YW5jZSgpLnNhZmVFeGVjdXRlKGZuLCBjb250ZXh0LCBmYWxsYmFjayk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2FmZVN5bmMgPSA8VD4oXG4gICAgZm46ICgpID0+IFQsXG4gICAgY29udGV4dDogc3RyaW5nLFxuICAgIGZhbGxiYWNrPzogVFxuKTogVCB8IHVuZGVmaW5lZCA9PiB7XG4gICAgcmV0dXJuIEVycm9yQm91bmRhcnkuZ2V0SW5zdGFuY2UoKS5zYWZlRXhlY3V0ZVN5bmMoZm4sIGNvbnRleHQsIGZhbGxiYWNrKTtcbn07XG5cbi8vIFx1QjM3MFx1Q0Y1NFx1QjgwOFx1Qzc3NFx1RDEzMCBcdUQ1NjhcdUMyMTggKFR5cGVTY3JpcHQgXHVCMzcwXHVDRjU0XHVCODA4XHVDNzc0XHVEMTMwIFx1QjMwMFx1QzJFMCBcdUMwQUNcdUM2QTkpXG5leHBvcnQgZnVuY3Rpb24gd2l0aEVycm9yQm91bmRhcnk8VCBleHRlbmRzIGFueVtdLCBSPihcbiAgICBmbjogKC4uLmFyZ3M6IFQpID0+IFIgfCBQcm9taXNlPFI+LFxuICAgIGNvbnRleHQ6IHN0cmluZ1xuKSB7XG4gICAgcmV0dXJuIGFzeW5jICguLi5hcmdzOiBUKTogUHJvbWlzZTxSIHwgdW5kZWZpbmVkPiA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yQm91bmRhcnkgPSBFcnJvckJvdW5kYXJ5LmdldEluc3RhbmNlKCk7XG4gICAgICAgIGlmIChmbi5jb25zdHJ1Y3Rvci5uYW1lID09PSAnQXN5bmNGdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvckJvdW5kYXJ5LnNhZmVFeGVjdXRlKCgpID0+IGZuKC4uLmFyZ3MpLCBjb250ZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvckJvdW5kYXJ5LnNhZmVFeGVjdXRlU3luYygoKSA9PiBmbiguLi5hcmdzKSwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9O1xufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsb0JBQXVCOzs7QUNBdkIsc0JBQWdFOzs7QUNHaEUsU0FBUyxrQkFBa0IsUUFBeUI7QUFDaEQsTUFBSSxDQUFDO0FBQVEsV0FBTztBQUdwQixRQUFNLGlCQUFpQjtBQUFBLElBQ25CO0FBQUE7QUFBQSxJQUNBO0FBQUE7QUFBQSxJQUNBO0FBQUE7QUFBQSxJQUNBO0FBQUE7QUFBQSxFQUNKO0FBRUEsU0FBTyxlQUFlLEtBQUssYUFBVyxRQUFRLEtBQUssTUFBTSxDQUFDO0FBQzlEO0FBc0hPLFNBQVMsY0FBYyxRQUF3QjtBQUNsRCxNQUFJLENBQUM7QUFBUSxXQUFPO0FBR3BCLE1BQUksQ0FBQyxrQkFBa0IsTUFBTSxHQUFHO0FBQzVCLFdBQU87QUFBQSxFQUNYO0FBSUEsTUFBSTtBQUVBLFVBQU0sTUFBTTtBQUNaLFFBQUksWUFBWTtBQUNoQixhQUFTLElBQUksR0FBRyxJQUFJLE9BQU8sUUFBUSxLQUFLO0FBQ3BDLFlBQU0sV0FBVyxPQUFPLFdBQVcsQ0FBQyxJQUFJLElBQUksV0FBVyxJQUFJLElBQUksTUFBTTtBQUNyRSxtQkFBYSxPQUFPLGFBQWEsUUFBUTtBQUFBLElBQzdDO0FBQ0EsV0FBTyxLQUFLLFNBQVM7QUFBQSxFQUN6QixTQUFTLE9BQU87QUFDWixZQUFRLE1BQU0saURBQWMsS0FBSztBQUNqQyxXQUFPO0FBQUEsRUFDWDtBQUNKO0FBRU8sU0FBUyxjQUFjLGlCQUFpQztBQUMzRCxNQUFJLENBQUM7QUFBaUIsV0FBTztBQUc3QixN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QUM1QjtBQUNKOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiZGVsYXkiLCAicHJvdG90eXBlIiwgImRlc2NyaXB0b3JzIiwgImZpbHRlciIsICJoYXNPd25Qcm9wZXJ0eSIsICJmaWx0ZXIiLCAicHJvdG90eXBlIiwgInRvU3RyaW5nIiwgImVuY29kZSIsICJpc0Zvcm1EYXRhIiwgImlzRmlsZUxpc3QiLCAidHJhbnNpdGlvbmFsIiwgImZpbHRlciIsICJzZWxmIiwgInByb3RvdHlwZSIsICJ2YWxpZGF0ZVN0YXR1cyIsICJvcmlnaW4iLCAibWVyZ2UiLCAidHJhbnNpdGlvbmFsIiwgInNpZ25hbCIsICJpdGVyYXRvciIsICJkb25lIiwgInJlcyIsICJ2YWxpZGF0b3JzIiwgInRyYW5zaXRpb25hbCIsICJBeGlvcyIsICJBeGlvc0Vycm9yIiwgIkNhbmNlbGVkRXJyb3IiLCAiaXNDYW5jZWwiLCAiQ2FuY2VsVG9rZW4iLCAiVkVSU0lPTiIsICJhbGwiLCAiaXNBeGlvc0Vycm9yIiwgInNwcmVhZCIsICJ0b0Zvcm1EYXRhIiwgIkF4aW9zSGVhZGVycyIsICJIdHRwU3RhdHVzQ29kZSIsICJtZXJnZUNvbmZpZyIsICJqc29uRGF0YSIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJjb250YWluZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJDb25maXJtTW9kYWwiLCAiY29udGFpbmVyIiwgImltcG9ydF9vYnNpZGlhbiIsICJib29rIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250YWluZXIiLCAiYXBwIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
