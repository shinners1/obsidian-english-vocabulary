/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all3) => {
  for (var name in all3)
    __defProp(target, name, { get: all3[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  AddBookModal: () => AddBookModal,
  EnglishVocabularyPlugin: () => EnglishVocabularyPlugin,
  default: () => EnglishVocabularyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian8 = require("obsidian");

// src/features/settings/ui/settings.ts
var import_obsidian = require("obsidian");

// src/utils.ts
var ENCRYPTION_KEY = "obsidian-vocabulary-plugin-key-2024";
function encryptApiKey(apiKey) {
  if (!apiKey)
    return "";
  try {
    let encrypted = "";
    for (let i = 0; i < apiKey.length; i++) {
      const charCode = apiKey.charCodeAt(i) ^ ENCRYPTION_KEY.charCodeAt(i % ENCRYPTION_KEY.length);
      encrypted += String.fromCharCode(charCode);
    }
    return btoa(encrypted);
  } catch (error) {
    console.error("API \uD0A4 \uC554\uD638\uD654 \uC2E4\uD328:", error);
    return "";
  }
}
function decryptApiKey(encryptedApiKey) {
  if (!encryptedApiKey)
    return "";
  try {
    const decoded = atob(encryptedApiKey);
    let decrypted = "";
    for (let i = 0; i < decoded.length; i++) {
      const charCode = decoded.charCodeAt(i) ^ ENCRYPTION_KEY.charCodeAt(i % ENCRYPTION_KEY.length);
      decrypted += String.fromCharCode(charCode);
    }
    return decrypted;
  } catch (error) {
    console.error("API \uD0A4 \uBCF5\uD638\uD654 \uC2E4\uD328:", error);
    return "";
  }
}
function maskApiKey(apiKey) {
  if (!apiKey)
    return "";
  if (apiKey.length <= 8)
    return "*".repeat(apiKey.length);
  return apiKey.substring(0, 4) + "*".repeat(apiKey.length - 8) + apiKey.substring(apiKey.length - 4);
}

// node_modules/axios/lib/helpers/bind.js
function bind(fn, thisArg) {
  return function wrap() {
    return fn.apply(thisArg, arguments);
  };
}

// node_modules/axios/lib/utils.js
var { toString } = Object.prototype;
var { getPrototypeOf } = Object;
var { iterator, toStringTag } = Symbol;
var kindOf = /* @__PURE__ */ ((cache) => (thing) => {
  const str = toString.call(thing);
  return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());
})(/* @__PURE__ */ Object.create(null));
var kindOfTest = (type) => {
  type = type.toLowerCase();
  return (thing) => kindOf(thing) === type;
};
var typeOfTest = (type) => (thing) => typeof thing === type;
var { isArray } = Array;
var isUndefined = typeOfTest("undefined");
function isBuffer(val) {
  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor) && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);
}
var isArrayBuffer = kindOfTest("ArrayBuffer");
function isArrayBufferView(val) {
  let result;
  if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) {
    result = ArrayBuffer.isView(val);
  } else {
    result = val && val.buffer && isArrayBuffer(val.buffer);
  }
  return result;
}
var isString = typeOfTest("string");
var isFunction = typeOfTest("function");
var isNumber = typeOfTest("number");
var isObject = (thing) => thing !== null && typeof thing === "object";
var isBoolean = (thing) => thing === true || thing === false;
var isPlainObject = (val) => {
  if (kindOf(val) !== "object") {
    return false;
  }
  const prototype3 = getPrototypeOf(val);
  return (prototype3 === null || prototype3 === Object.prototype || Object.getPrototypeOf(prototype3) === null) && !(toStringTag in val) && !(iterator in val);
};
var isDate = kindOfTest("Date");
var isFile = kindOfTest("File");
var isBlob = kindOfTest("Blob");
var isFileList = kindOfTest("FileList");
var isStream = (val) => isObject(val) && isFunction(val.pipe);
var isFormData = (thing) => {
  let kind;
  return thing && (typeof FormData === "function" && thing instanceof FormData || isFunction(thing.append) && ((kind = kindOf(thing)) === "formdata" || // detect form-data instance
  kind === "object" && isFunction(thing.toString) && thing.toString() === "[object FormData]"));
};
var isURLSearchParams = kindOfTest("URLSearchParams");
var [isReadableStream, isRequest, isResponse, isHeaders] = ["ReadableStream", "Request", "Response", "Headers"].map(kindOfTest);
var trim = (str) => str.trim ? str.trim() : str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
function forEach(obj, fn, { allOwnKeys = false } = {}) {
  if (obj === null || typeof obj === "undefined") {
    return;
  }
  let i;
  let l;
  if (typeof obj !== "object") {
    obj = [obj];
  }
  if (isArray(obj)) {
    for (i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);
    const len = keys.length;
    let key;
    for (i = 0; i < len; i++) {
      key = keys[i];
      fn.call(null, obj[key], key, obj);
    }
  }
}
function findKey(obj, key) {
  key = key.toLowerCase();
  const keys = Object.keys(obj);
  let i = keys.length;
  let _key;
  while (i-- > 0) {
    _key = keys[i];
    if (key === _key.toLowerCase()) {
      return _key;
    }
  }
  return null;
}
var _global = (() => {
  if (typeof globalThis !== "undefined")
    return globalThis;
  return typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : global;
})();
var isContextDefined = (context) => !isUndefined(context) && context !== _global;
function merge() {
  const { caseless } = isContextDefined(this) && this || {};
  const result = {};
  const assignValue = (val, key) => {
    const targetKey = caseless && findKey(result, key) || key;
    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {
      result[targetKey] = merge(result[targetKey], val);
    } else if (isPlainObject(val)) {
      result[targetKey] = merge({}, val);
    } else if (isArray(val)) {
      result[targetKey] = val.slice();
    } else {
      result[targetKey] = val;
    }
  };
  for (let i = 0, l = arguments.length; i < l; i++) {
    arguments[i] && forEach(arguments[i], assignValue);
  }
  return result;
}
var extend = (a, b, thisArg, { allOwnKeys } = {}) => {
  forEach(b, (val, key) => {
    if (thisArg && isFunction(val)) {
      a[key] = bind(val, thisArg);
    } else {
      a[key] = val;
    }
  }, { allOwnKeys });
  return a;
};
var stripBOM = (content) => {
  if (content.charCodeAt(0) === 65279) {
    content = content.slice(1);
  }
  return content;
};
var inherits = (constructor, superConstructor, props, descriptors2) => {
  constructor.prototype = Object.create(superConstructor.prototype, descriptors2);
  constructor.prototype.constructor = constructor;
  Object.defineProperty(constructor, "super", {
    value: superConstructor.prototype
  });
  props && Object.assign(constructor.prototype, props);
};
var toFlatObject = (sourceObj, destObj, filter2, propFilter) => {
  let props;
  let i;
  let prop;
  const merged = {};
  destObj = destObj || {};
  if (sourceObj == null)
    return destObj;
  do {
    props = Object.getOwnPropertyNames(sourceObj);
    i = props.length;
    while (i-- > 0) {
      prop = props[i];
      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {
        destObj[prop] = sourceObj[prop];
        merged[prop] = true;
      }
    }
    sourceObj = filter2 !== false && getPrototypeOf(sourceObj);
  } while (sourceObj && (!filter2 || filter2(sourceObj, destObj)) && sourceObj !== Object.prototype);
  return destObj;
};
var endsWith = (str, searchString, position) => {
  str = String(str);
  if (position === void 0 || position > str.length) {
    position = str.length;
  }
  position -= searchString.length;
  const lastIndex = str.indexOf(searchString, position);
  return lastIndex !== -1 && lastIndex === position;
};
var toArray = (thing) => {
  if (!thing)
    return null;
  if (isArray(thing))
    return thing;
  let i = thing.length;
  if (!isNumber(i))
    return null;
  const arr = new Array(i);
  while (i-- > 0) {
    arr[i] = thing[i];
  }
  return arr;
};
var isTypedArray = /* @__PURE__ */ ((TypedArray) => {
  return (thing) => {
    return TypedArray && thing instanceof TypedArray;
  };
})(typeof Uint8Array !== "undefined" && getPrototypeOf(Uint8Array));
var forEachEntry = (obj, fn) => {
  const generator = obj && obj[iterator];
  const _iterator = generator.call(obj);
  let result;
  while ((result = _iterator.next()) && !result.done) {
    const pair = result.value;
    fn.call(obj, pair[0], pair[1]);
  }
};
var matchAll = (regExp, str) => {
  let matches;
  const arr = [];
  while ((matches = regExp.exec(str)) !== null) {
    arr.push(matches);
  }
  return arr;
};
var isHTMLForm = kindOfTest("HTMLFormElement");
var toCamelCase = (str) => {
  return str.toLowerCase().replace(
    /[-_\s]([a-z\d])(\w*)/g,
    function replacer(m, p1, p2) {
      return p1.toUpperCase() + p2;
    }
  );
};
var hasOwnProperty = (({ hasOwnProperty: hasOwnProperty2 }) => (obj, prop) => hasOwnProperty2.call(obj, prop))(Object.prototype);
var isRegExp = kindOfTest("RegExp");
var reduceDescriptors = (obj, reducer) => {
  const descriptors2 = Object.getOwnPropertyDescriptors(obj);
  const reducedDescriptors = {};
  forEach(descriptors2, (descriptor, name) => {
    let ret;
    if ((ret = reducer(descriptor, name, obj)) !== false) {
      reducedDescriptors[name] = ret || descriptor;
    }
  });
  Object.defineProperties(obj, reducedDescriptors);
};
var freezeMethods = (obj) => {
  reduceDescriptors(obj, (descriptor, name) => {
    if (isFunction(obj) && ["arguments", "caller", "callee"].indexOf(name) !== -1) {
      return false;
    }
    const value = obj[name];
    if (!isFunction(value))
      return;
    descriptor.enumerable = false;
    if ("writable" in descriptor) {
      descriptor.writable = false;
      return;
    }
    if (!descriptor.set) {
      descriptor.set = () => {
        throw Error("Can not rewrite read-only method '" + name + "'");
      };
    }
  });
};
var toObjectSet = (arrayOrString, delimiter) => {
  const obj = {};
  const define = (arr) => {
    arr.forEach((value) => {
      obj[value] = true;
    });
  };
  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));
  return obj;
};
var noop = () => {
};
var toFiniteNumber = (value, defaultValue) => {
  return value != null && Number.isFinite(value = +value) ? value : defaultValue;
};
function isSpecCompliantForm(thing) {
  return !!(thing && isFunction(thing.append) && thing[toStringTag] === "FormData" && thing[iterator]);
}
var toJSONObject = (obj) => {
  const stack = new Array(10);
  const visit = (source, i) => {
    if (isObject(source)) {
      if (stack.indexOf(source) >= 0) {
        return;
      }
      if (!("toJSON" in source)) {
        stack[i] = source;
        const target = isArray(source) ? [] : {};
        forEach(source, (value, key) => {
          const reducedValue = visit(value, i + 1);
          !isUndefined(reducedValue) && (target[key] = reducedValue);
        });
        stack[i] = void 0;
        return target;
      }
    }
    return source;
  };
  return visit(obj, 0);
};
var isAsyncFn = kindOfTest("AsyncFunction");
var isThenable = (thing) => thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);
var _setImmediate = ((setImmediateSupported, postMessageSupported) => {
  if (setImmediateSupported) {
    return setImmediate;
  }
  return postMessageSupported ? ((token, callbacks) => {
    _global.addEventListener("message", ({ source, data }) => {
      if (source === _global && data === token) {
        callbacks.length && callbacks.shift()();
      }
    }, false);
    return (cb) => {
      callbacks.push(cb);
      _global.postMessage(token, "*");
    };
  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);
})(
  typeof setImmediate === "function",
  isFunction(_global.postMessage)
);
var asap = typeof queueMicrotask !== "undefined" ? queueMicrotask.bind(_global) : typeof process !== "undefined" && process.nextTick || _setImmediate;
var isIterable = (thing) => thing != null && isFunction(thing[iterator]);
var utils_default = {
  isArray,
  isArrayBuffer,
  isBuffer,
  isFormData,
  isArrayBufferView,
  isString,
  isNumber,
  isBoolean,
  isObject,
  isPlainObject,
  isReadableStream,
  isRequest,
  isResponse,
  isHeaders,
  isUndefined,
  isDate,
  isFile,
  isBlob,
  isRegExp,
  isFunction,
  isStream,
  isURLSearchParams,
  isTypedArray,
  isFileList,
  forEach,
  merge,
  extend,
  trim,
  stripBOM,
  inherits,
  toFlatObject,
  kindOf,
  kindOfTest,
  endsWith,
  toArray,
  forEachEntry,
  matchAll,
  isHTMLForm,
  hasOwnProperty,
  hasOwnProp: hasOwnProperty,
  // an alias to avoid ESLint no-prototype-builtins detection
  reduceDescriptors,
  freezeMethods,
  toObjectSet,
  toCamelCase,
  noop,
  toFiniteNumber,
  findKey,
  global: _global,
  isContextDefined,
  isSpecCompliantForm,
  toJSONObject,
  isAsyncFn,
  isThenable,
  setImmediate: _setImmediate,
  asap,
  isIterable
};

// node_modules/axios/lib/core/AxiosError.js
function AxiosError(message, code, config, request, response) {
  Error.call(this);
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, this.constructor);
  } else {
    this.stack = new Error().stack;
  }
  this.message = message;
  this.name = "AxiosError";
  code && (this.code = code);
  config && (this.config = config);
  request && (this.request = request);
  if (response) {
    this.response = response;
    this.status = response.status ? response.status : null;
  }
}
utils_default.inherits(AxiosError, Error, {
  toJSON: function toJSON() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: utils_default.toJSONObject(this.config),
      code: this.code,
      status: this.status
    };
  }
});
var prototype = AxiosError.prototype;
var descriptors = {};
[
  "ERR_BAD_OPTION_VALUE",
  "ERR_BAD_OPTION",
  "ECONNABORTED",
  "ETIMEDOUT",
  "ERR_NETWORK",
  "ERR_FR_TOO_MANY_REDIRECTS",
  "ERR_DEPRECATED",
  "ERR_BAD_RESPONSE",
  "ERR_BAD_REQUEST",
  "ERR_CANCELED",
  "ERR_NOT_SUPPORT",
  "ERR_INVALID_URL"
  // eslint-disable-next-line func-names
].forEach((code) => {
  descriptors[code] = { value: code };
});
Object.defineProperties(AxiosError, descriptors);
Object.defineProperty(prototype, "isAxiosError", { value: true });
AxiosError.from = (error, code, config, request, response, customProps) => {
  const axiosError = Object.create(prototype);
  utils_default.toFlatObject(error, axiosError, function filter2(obj) {
    return obj !== Error.prototype;
  }, (prop) => {
    return prop !== "isAxiosError";
  });
  AxiosError.call(axiosError, error.message, code, config, request, response);
  axiosError.cause = error;
  axiosError.name = error.name;
  customProps && Object.assign(axiosError, customProps);
  return axiosError;
};
var AxiosError_default = AxiosError;

// node_modules/axios/lib/helpers/null.js
var null_default = null;

// node_modules/axios/lib/helpers/toFormData.js
function isVisitable(thing) {
  return utils_default.isPlainObject(thing) || utils_default.isArray(thing);
}
function removeBrackets(key) {
  return utils_default.endsWith(key, "[]") ? key.slice(0, -2) : key;
}
function renderKey(path, key, dots) {
  if (!path)
    return key;
  return path.concat(key).map(function each(token, i) {
    token = removeBrackets(token);
    return !dots && i ? "[" + token + "]" : token;
  }).join(dots ? "." : "");
}
function isFlatArray(arr) {
  return utils_default.isArray(arr) && !arr.some(isVisitable);
}
var predicates = utils_default.toFlatObject(utils_default, {}, null, function filter(prop) {
  return /^is[A-Z]/.test(prop);
});
function toFormData(obj, formData, options) {
  if (!utils_default.isObject(obj)) {
    throw new TypeError("target must be an object");
  }
  formData = formData || new (null_default || FormData)();
  options = utils_default.toFlatObject(options, {
    metaTokens: true,
    dots: false,
    indexes: false
  }, false, function defined(option, source) {
    return !utils_default.isUndefined(source[option]);
  });
  const metaTokens = options.metaTokens;
  const visitor = options.visitor || defaultVisitor;
  const dots = options.dots;
  const indexes = options.indexes;
  const _Blob = options.Blob || typeof Blob !== "undefined" && Blob;
  const useBlob = _Blob && utils_default.isSpecCompliantForm(formData);
  if (!utils_default.isFunction(visitor)) {
    throw new TypeError("visitor must be a function");
  }
  function convertValue(value) {
    if (value === null)
      return "";
    if (utils_default.isDate(value)) {
      return value.toISOString();
    }
    if (utils_default.isBoolean(value)) {
      return value.toString();
    }
    if (!useBlob && utils_default.isBlob(value)) {
      throw new AxiosError_default("Blob is not supported. Use a Buffer instead.");
    }
    if (utils_default.isArrayBuffer(value) || utils_default.isTypedArray(value)) {
      return useBlob && typeof Blob === "function" ? new Blob([value]) : Buffer.from(value);
    }
    return value;
  }
  function defaultVisitor(value, key, path) {
    let arr = value;
    if (value && !path && typeof value === "object") {
      if (utils_default.endsWith(key, "{}")) {
        key = metaTokens ? key : key.slice(0, -2);
        value = JSON.stringify(value);
      } else if (utils_default.isArray(value) && isFlatArray(value) || (utils_default.isFileList(value) || utils_default.endsWith(key, "[]")) && (arr = utils_default.toArray(value))) {
        key = removeBrackets(key);
        arr.forEach(function each(el, index) {
          !(utils_default.isUndefined(el) || el === null) && formData.append(
            // eslint-disable-next-line no-nested-ternary
            indexes === true ? renderKey([key], index, dots) : indexes === null ? key : key + "[]",
            convertValue(el)
          );
        });
        return false;
      }
    }
    if (isVisitable(value)) {
      return true;
    }
    formData.append(renderKey(path, key, dots), convertValue(value));
    return false;
  }
  const stack = [];
  const exposedHelpers = Object.assign(predicates, {
    defaultVisitor,
    convertValue,
    isVisitable
  });
  function build(value, path) {
    if (utils_default.isUndefined(value))
      return;
    if (stack.indexOf(value) !== -1) {
      throw Error("Circular reference detected in " + path.join("."));
    }
    stack.push(value);
    utils_default.forEach(value, function each(el, key) {
      const result = !(utils_default.isUndefined(el) || el === null) && visitor.call(
        formData,
        el,
        utils_default.isString(key) ? key.trim() : key,
        path,
        exposedHelpers
      );
      if (result === true) {
        build(el, path ? path.concat(key) : [key]);
      }
    });
    stack.pop();
  }
  if (!utils_default.isObject(obj)) {
    throw new TypeError("data must be an object");
  }
  build(obj);
  return formData;
}
var toFormData_default = toFormData;

// node_modules/axios/lib/helpers/AxiosURLSearchParams.js
function encode(str) {
  const charMap = {
    "!": "%21",
    "'": "%27",
    "(": "%28",
    ")": "%29",
    "~": "%7E",
    "%20": "+",
    "%00": "\0"
  };
  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {
    return charMap[match];
  });
}
function AxiosURLSearchParams(params, options) {
  this._pairs = [];
  params && toFormData_default(params, this, options);
}
var prototype2 = AxiosURLSearchParams.prototype;
prototype2.append = function append(name, value) {
  this._pairs.push([name, value]);
};
prototype2.toString = function toString2(encoder) {
  const _encode = encoder ? function(value) {
    return encoder.call(this, value, encode);
  } : encode;
  return this._pairs.map(function each(pair) {
    return _encode(pair[0]) + "=" + _encode(pair[1]);
  }, "").join("&");
};
var AxiosURLSearchParams_default = AxiosURLSearchParams;

// node_modules/axios/lib/helpers/buildURL.js
function encode2(val) {
  return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
function buildURL(url, params, options) {
  if (!params) {
    return url;
  }
  const _encode = options && options.encode || encode2;
  if (utils_default.isFunction(options)) {
    options = {
      serialize: options
    };
  }
  const serializeFn = options && options.serialize;
  let serializedParams;
  if (serializeFn) {
    serializedParams = serializeFn(params, options);
  } else {
    serializedParams = utils_default.isURLSearchParams(params) ? params.toString() : new AxiosURLSearchParams_default(params, options).toString(_encode);
  }
  if (serializedParams) {
    const hashmarkIndex = url.indexOf("#");
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }
    url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
  }
  return url;
}

// node_modules/axios/lib/core/InterceptorManager.js
var InterceptorManager = class {
  constructor() {
    this.handlers = [];
  }
  /**
   * Add a new interceptor to the stack
   *
   * @param {Function} fulfilled The function to handle `then` for a `Promise`
   * @param {Function} rejected The function to handle `reject` for a `Promise`
   *
   * @return {Number} An ID used to remove interceptor later
   */
  use(fulfilled, rejected, options) {
    this.handlers.push({
      fulfilled,
      rejected,
      synchronous: options ? options.synchronous : false,
      runWhen: options ? options.runWhen : null
    });
    return this.handlers.length - 1;
  }
  /**
   * Remove an interceptor from the stack
   *
   * @param {Number} id The ID that was returned by `use`
   *
   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise
   */
  eject(id) {
    if (this.handlers[id]) {
      this.handlers[id] = null;
    }
  }
  /**
   * Clear all interceptors from the stack
   *
   * @returns {void}
   */
  clear() {
    if (this.handlers) {
      this.handlers = [];
    }
  }
  /**
   * Iterate over all the registered interceptors
   *
   * This method is particularly useful for skipping over any
   * interceptors that may have become `null` calling `eject`.
   *
   * @param {Function} fn The function to call for each interceptor
   *
   * @returns {void}
   */
  forEach(fn) {
    utils_default.forEach(this.handlers, function forEachHandler(h) {
      if (h !== null) {
        fn(h);
      }
    });
  }
};
var InterceptorManager_default = InterceptorManager;

// node_modules/axios/lib/defaults/transitional.js
var transitional_default = {
  silentJSONParsing: true,
  forcedJSONParsing: true,
  clarifyTimeoutError: false
};

// node_modules/axios/lib/platform/browser/classes/URLSearchParams.js
var URLSearchParams_default = typeof URLSearchParams !== "undefined" ? URLSearchParams : AxiosURLSearchParams_default;

// node_modules/axios/lib/platform/browser/classes/FormData.js
var FormData_default = typeof FormData !== "undefined" ? FormData : null;

// node_modules/axios/lib/platform/browser/classes/Blob.js
var Blob_default = typeof Blob !== "undefined" ? Blob : null;

// node_modules/axios/lib/platform/browser/index.js
var browser_default = {
  isBrowser: true,
  classes: {
    URLSearchParams: URLSearchParams_default,
    FormData: FormData_default,
    Blob: Blob_default
  },
  protocols: ["http", "https", "file", "blob", "url", "data"]
};

// node_modules/axios/lib/platform/common/utils.js
var utils_exports = {};
__export(utils_exports, {
  hasBrowserEnv: () => hasBrowserEnv,
  hasStandardBrowserEnv: () => hasStandardBrowserEnv,
  hasStandardBrowserWebWorkerEnv: () => hasStandardBrowserWebWorkerEnv,
  navigator: () => _navigator,
  origin: () => origin
});
var hasBrowserEnv = typeof window !== "undefined" && typeof document !== "undefined";
var _navigator = typeof navigator === "object" && navigator || void 0;
var hasStandardBrowserEnv = hasBrowserEnv && (!_navigator || ["ReactNative", "NativeScript", "NS"].indexOf(_navigator.product) < 0);
var hasStandardBrowserWebWorkerEnv = (() => {
  return typeof WorkerGlobalScope !== "undefined" && // eslint-disable-next-line no-undef
  self instanceof WorkerGlobalScope && typeof self.importScripts === "function";
})();
var origin = hasBrowserEnv && window.location.href || "http://localhost";

// node_modules/axios/lib/platform/index.js
var platform_default = {
  ...utils_exports,
  ...browser_default
};

// node_modules/axios/lib/helpers/toURLEncodedForm.js
function toURLEncodedForm(data, options) {
  return toFormData_default(data, new platform_default.classes.URLSearchParams(), Object.assign({
    visitor: function(value, key, path, helpers) {
      if (platform_default.isNode && utils_default.isBuffer(value)) {
        this.append(key, value.toString("base64"));
        return false;
      }
      return helpers.defaultVisitor.apply(this, arguments);
    }
  }, options));
}

// node_modules/axios/lib/helpers/formDataToJSON.js
function parsePropPath(name) {
  return utils_default.matchAll(/\w+|\[(\w*)]/g, name).map((match) => {
    return match[0] === "[]" ? "" : match[1] || match[0];
  });
}
function arrayToObject(arr) {
  const obj = {};
  const keys = Object.keys(arr);
  let i;
  const len = keys.length;
  let key;
  for (i = 0; i < len; i++) {
    key = keys[i];
    obj[key] = arr[key];
  }
  return obj;
}
function formDataToJSON(formData) {
  function buildPath(path, value, target, index) {
    let name = path[index++];
    if (name === "__proto__")
      return true;
    const isNumericKey = Number.isFinite(+name);
    const isLast = index >= path.length;
    name = !name && utils_default.isArray(target) ? target.length : name;
    if (isLast) {
      if (utils_default.hasOwnProp(target, name)) {
        target[name] = [target[name], value];
      } else {
        target[name] = value;
      }
      return !isNumericKey;
    }
    if (!target[name] || !utils_default.isObject(target[name])) {
      target[name] = [];
    }
    const result = buildPath(path, value, target[name], index);
    if (result && utils_default.isArray(target[name])) {
      target[name] = arrayToObject(target[name]);
    }
    return !isNumericKey;
  }
  if (utils_default.isFormData(formData) && utils_default.isFunction(formData.entries)) {
    const obj = {};
    utils_default.forEachEntry(formData, (name, value) => {
      buildPath(parsePropPath(name), value, obj, 0);
    });
    return obj;
  }
  return null;
}
var formDataToJSON_default = formDataToJSON;

// node_modules/axios/lib/defaults/index.js
function stringifySafely(rawValue, parser, encoder) {
  if (utils_default.isString(rawValue)) {
    try {
      (parser || JSON.parse)(rawValue);
      return utils_default.trim(rawValue);
    } catch (e) {
      if (e.name !== "SyntaxError") {
        throw e;
      }
    }
  }
  return (encoder || JSON.stringify)(rawValue);
}
var defaults = {
  transitional: transitional_default,
  adapter: ["xhr", "http", "fetch"],
  transformRequest: [function transformRequest(data, headers) {
    const contentType = headers.getContentType() || "";
    const hasJSONContentType = contentType.indexOf("application/json") > -1;
    const isObjectPayload = utils_default.isObject(data);
    if (isObjectPayload && utils_default.isHTMLForm(data)) {
      data = new FormData(data);
    }
    const isFormData2 = utils_default.isFormData(data);
    if (isFormData2) {
      return hasJSONContentType ? JSON.stringify(formDataToJSON_default(data)) : data;
    }
    if (utils_default.isArrayBuffer(data) || utils_default.isBuffer(data) || utils_default.isStream(data) || utils_default.isFile(data) || utils_default.isBlob(data) || utils_default.isReadableStream(data)) {
      return data;
    }
    if (utils_default.isArrayBufferView(data)) {
      return data.buffer;
    }
    if (utils_default.isURLSearchParams(data)) {
      headers.setContentType("application/x-www-form-urlencoded;charset=utf-8", false);
      return data.toString();
    }
    let isFileList2;
    if (isObjectPayload) {
      if (contentType.indexOf("application/x-www-form-urlencoded") > -1) {
        return toURLEncodedForm(data, this.formSerializer).toString();
      }
      if ((isFileList2 = utils_default.isFileList(data)) || contentType.indexOf("multipart/form-data") > -1) {
        const _FormData = this.env && this.env.FormData;
        return toFormData_default(
          isFileList2 ? { "files[]": data } : data,
          _FormData && new _FormData(),
          this.formSerializer
        );
      }
    }
    if (isObjectPayload || hasJSONContentType) {
      headers.setContentType("application/json", false);
      return stringifySafely(data);
    }
    return data;
  }],
  transformResponse: [function transformResponse(data) {
    const transitional2 = this.transitional || defaults.transitional;
    const forcedJSONParsing = transitional2 && transitional2.forcedJSONParsing;
    const JSONRequested = this.responseType === "json";
    if (utils_default.isResponse(data) || utils_default.isReadableStream(data)) {
      return data;
    }
    if (data && utils_default.isString(data) && (forcedJSONParsing && !this.responseType || JSONRequested)) {
      const silentJSONParsing = transitional2 && transitional2.silentJSONParsing;
      const strictJSONParsing = !silentJSONParsing && JSONRequested;
      try {
        return JSON.parse(data);
      } catch (e) {
        if (strictJSONParsing) {
          if (e.name === "SyntaxError") {
            throw AxiosError_default.from(e, AxiosError_default.ERR_BAD_RESPONSE, this, null, this.response);
          }
          throw e;
        }
      }
    }
    return data;
  }],
  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  env: {
    FormData: platform_default.classes.FormData,
    Blob: platform_default.classes.Blob
  },
  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  },
  headers: {
    common: {
      "Accept": "application/json, text/plain, */*",
      "Content-Type": void 0
    }
  }
};
utils_default.forEach(["delete", "get", "head", "post", "put", "patch"], (method) => {
  defaults.headers[method] = {};
});
var defaults_default = defaults;

// node_modules/axios/lib/helpers/parseHeaders.js
var ignoreDuplicateOf = utils_default.toObjectSet([
  "age",
  "authorization",
  "content-length",
  "content-type",
  "etag",
  "expires",
  "from",
  "host",
  "if-modified-since",
  "if-unmodified-since",
  "last-modified",
  "location",
  "max-forwards",
  "proxy-authorization",
  "referer",
  "retry-after",
  "user-agent"
]);
var parseHeaders_default = (rawHeaders) => {
  const parsed = {};
  let key;
  let val;
  let i;
  rawHeaders && rawHeaders.split("\n").forEach(function parser(line) {
    i = line.indexOf(":");
    key = line.substring(0, i).trim().toLowerCase();
    val = line.substring(i + 1).trim();
    if (!key || parsed[key] && ignoreDuplicateOf[key]) {
      return;
    }
    if (key === "set-cookie") {
      if (parsed[key]) {
        parsed[key].push(val);
      } else {
        parsed[key] = [val];
      }
    } else {
      parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
    }
  });
  return parsed;
};

// node_modules/axios/lib/core/AxiosHeaders.js
var $internals = Symbol("internals");
function normalizeHeader(header) {
  return header && String(header).trim().toLowerCase();
}
function normalizeValue(value) {
  if (value === false || value == null) {
    return value;
  }
  return utils_default.isArray(value) ? value.map(normalizeValue) : String(value);
}
function parseTokens(str) {
  const tokens = /* @__PURE__ */ Object.create(null);
  const tokensRE = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;
  let match;
  while (match = tokensRE.exec(str)) {
    tokens[match[1]] = match[2];
  }
  return tokens;
}
var isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());
function matchHeaderValue(context, value, header, filter2, isHeaderNameFilter) {
  if (utils_default.isFunction(filter2)) {
    return filter2.call(this, value, header);
  }
  if (isHeaderNameFilter) {
    value = header;
  }
  if (!utils_default.isString(value))
    return;
  if (utils_default.isString(filter2)) {
    return value.indexOf(filter2) !== -1;
  }
  if (utils_default.isRegExp(filter2)) {
    return filter2.test(value);
  }
}
function formatHeader(header) {
  return header.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (w, char, str) => {
    return char.toUpperCase() + str;
  });
}
function buildAccessors(obj, header) {
  const accessorName = utils_default.toCamelCase(" " + header);
  ["get", "set", "has"].forEach((methodName) => {
    Object.defineProperty(obj, methodName + accessorName, {
      value: function(arg1, arg2, arg3) {
        return this[methodName].call(this, header, arg1, arg2, arg3);
      },
      configurable: true
    });
  });
}
var AxiosHeaders = class {
  constructor(headers) {
    headers && this.set(headers);
  }
  set(header, valueOrRewrite, rewrite) {
    const self2 = this;
    function setHeader(_value, _header, _rewrite) {
      const lHeader = normalizeHeader(_header);
      if (!lHeader) {
        throw new Error("header name must be a non-empty string");
      }
      const key = utils_default.findKey(self2, lHeader);
      if (!key || self2[key] === void 0 || _rewrite === true || _rewrite === void 0 && self2[key] !== false) {
        self2[key || _header] = normalizeValue(_value);
      }
    }
    const setHeaders = (headers, _rewrite) => utils_default.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));
    if (utils_default.isPlainObject(header) || header instanceof this.constructor) {
      setHeaders(header, valueOrRewrite);
    } else if (utils_default.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {
      setHeaders(parseHeaders_default(header), valueOrRewrite);
    } else if (utils_default.isObject(header) && utils_default.isIterable(header)) {
      let obj = {}, dest, key;
      for (const entry of header) {
        if (!utils_default.isArray(entry)) {
          throw TypeError("Object iterator must return a key-value pair");
        }
        obj[key = entry[0]] = (dest = obj[key]) ? utils_default.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]] : entry[1];
      }
      setHeaders(obj, valueOrRewrite);
    } else {
      header != null && setHeader(valueOrRewrite, header, rewrite);
    }
    return this;
  }
  get(header, parser) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils_default.findKey(this, header);
      if (key) {
        const value = this[key];
        if (!parser) {
          return value;
        }
        if (parser === true) {
          return parseTokens(value);
        }
        if (utils_default.isFunction(parser)) {
          return parser.call(this, value, key);
        }
        if (utils_default.isRegExp(parser)) {
          return parser.exec(value);
        }
        throw new TypeError("parser must be boolean|regexp|function");
      }
    }
  }
  has(header, matcher) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils_default.findKey(this, header);
      return !!(key && this[key] !== void 0 && (!matcher || matchHeaderValue(this, this[key], key, matcher)));
    }
    return false;
  }
  delete(header, matcher) {
    const self2 = this;
    let deleted = false;
    function deleteHeader(_header) {
      _header = normalizeHeader(_header);
      if (_header) {
        const key = utils_default.findKey(self2, _header);
        if (key && (!matcher || matchHeaderValue(self2, self2[key], key, matcher))) {
          delete self2[key];
          deleted = true;
        }
      }
    }
    if (utils_default.isArray(header)) {
      header.forEach(deleteHeader);
    } else {
      deleteHeader(header);
    }
    return deleted;
  }
  clear(matcher) {
    const keys = Object.keys(this);
    let i = keys.length;
    let deleted = false;
    while (i--) {
      const key = keys[i];
      if (!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {
        delete this[key];
        deleted = true;
      }
    }
    return deleted;
  }
  normalize(format) {
    const self2 = this;
    const headers = {};
    utils_default.forEach(this, (value, header) => {
      const key = utils_default.findKey(headers, header);
      if (key) {
        self2[key] = normalizeValue(value);
        delete self2[header];
        return;
      }
      const normalized = format ? formatHeader(header) : String(header).trim();
      if (normalized !== header) {
        delete self2[header];
      }
      self2[normalized] = normalizeValue(value);
      headers[normalized] = true;
    });
    return this;
  }
  concat(...targets) {
    return this.constructor.concat(this, ...targets);
  }
  toJSON(asStrings) {
    const obj = /* @__PURE__ */ Object.create(null);
    utils_default.forEach(this, (value, header) => {
      value != null && value !== false && (obj[header] = asStrings && utils_default.isArray(value) ? value.join(", ") : value);
    });
    return obj;
  }
  [Symbol.iterator]() {
    return Object.entries(this.toJSON())[Symbol.iterator]();
  }
  toString() {
    return Object.entries(this.toJSON()).map(([header, value]) => header + ": " + value).join("\n");
  }
  getSetCookie() {
    return this.get("set-cookie") || [];
  }
  get [Symbol.toStringTag]() {
    return "AxiosHeaders";
  }
  static from(thing) {
    return thing instanceof this ? thing : new this(thing);
  }
  static concat(first, ...targets) {
    const computed = new this(first);
    targets.forEach((target) => computed.set(target));
    return computed;
  }
  static accessor(header) {
    const internals = this[$internals] = this[$internals] = {
      accessors: {}
    };
    const accessors = internals.accessors;
    const prototype3 = this.prototype;
    function defineAccessor(_header) {
      const lHeader = normalizeHeader(_header);
      if (!accessors[lHeader]) {
        buildAccessors(prototype3, _header);
        accessors[lHeader] = true;
      }
    }
    utils_default.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);
    return this;
  }
};
AxiosHeaders.accessor(["Content-Type", "Content-Length", "Accept", "Accept-Encoding", "User-Agent", "Authorization"]);
utils_default.reduceDescriptors(AxiosHeaders.prototype, ({ value }, key) => {
  let mapped = key[0].toUpperCase() + key.slice(1);
  return {
    get: () => value,
    set(headerValue) {
      this[mapped] = headerValue;
    }
  };
});
utils_default.freezeMethods(AxiosHeaders);
var AxiosHeaders_default = AxiosHeaders;

// node_modules/axios/lib/core/transformData.js
function transformData(fns, response) {
  const config = this || defaults_default;
  const context = response || config;
  const headers = AxiosHeaders_default.from(context.headers);
  let data = context.data;
  utils_default.forEach(fns, function transform(fn) {
    data = fn.call(config, data, headers.normalize(), response ? response.status : void 0);
  });
  headers.normalize();
  return data;
}

// node_modules/axios/lib/cancel/isCancel.js
function isCancel(value) {
  return !!(value && value.__CANCEL__);
}

// node_modules/axios/lib/cancel/CanceledError.js
function CanceledError(message, config, request) {
  AxiosError_default.call(this, message == null ? "canceled" : message, AxiosError_default.ERR_CANCELED, config, request);
  this.name = "CanceledError";
}
utils_default.inherits(CanceledError, AxiosError_default, {
  __CANCEL__: true
});
var CanceledError_default = CanceledError;

// node_modules/axios/lib/core/settle.js
function settle(resolve, reject, response) {
  const validateStatus2 = response.config.validateStatus;
  if (!response.status || !validateStatus2 || validateStatus2(response.status)) {
    resolve(response);
  } else {
    reject(new AxiosError_default(
      "Request failed with status code " + response.status,
      [AxiosError_default.ERR_BAD_REQUEST, AxiosError_default.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],
      response.config,
      response.request,
      response
    ));
  }
}

// node_modules/axios/lib/helpers/parseProtocol.js
function parseProtocol(url) {
  const match = /^([-+\w]{1,25})(:?\/\/|:)/.exec(url);
  return match && match[1] || "";
}

// node_modules/axios/lib/helpers/speedometer.js
function speedometer(samplesCount, min) {
  samplesCount = samplesCount || 10;
  const bytes = new Array(samplesCount);
  const timestamps = new Array(samplesCount);
  let head = 0;
  let tail = 0;
  let firstSampleTS;
  min = min !== void 0 ? min : 1e3;
  return function push(chunkLength) {
    const now = Date.now();
    const startedAt = timestamps[tail];
    if (!firstSampleTS) {
      firstSampleTS = now;
    }
    bytes[head] = chunkLength;
    timestamps[head] = now;
    let i = tail;
    let bytesCount = 0;
    while (i !== head) {
      bytesCount += bytes[i++];
      i = i % samplesCount;
    }
    head = (head + 1) % samplesCount;
    if (head === tail) {
      tail = (tail + 1) % samplesCount;
    }
    if (now - firstSampleTS < min) {
      return;
    }
    const passed = startedAt && now - startedAt;
    return passed ? Math.round(bytesCount * 1e3 / passed) : void 0;
  };
}
var speedometer_default = speedometer;

// node_modules/axios/lib/helpers/throttle.js
function throttle(fn, freq) {
  let timestamp = 0;
  let threshold = 1e3 / freq;
  let lastArgs;
  let timer;
  const invoke = (args, now = Date.now()) => {
    timestamp = now;
    lastArgs = null;
    if (timer) {
      clearTimeout(timer);
      timer = null;
    }
    fn.apply(null, args);
  };
  const throttled = (...args) => {
    const now = Date.now();
    const passed = now - timestamp;
    if (passed >= threshold) {
      invoke(args, now);
    } else {
      lastArgs = args;
      if (!timer) {
        timer = setTimeout(() => {
          timer = null;
          invoke(lastArgs);
        }, threshold - passed);
      }
    }
  };
  const flush = () => lastArgs && invoke(lastArgs);
  return [throttled, flush];
}
var throttle_default = throttle;

// node_modules/axios/lib/helpers/progressEventReducer.js
var progressEventReducer = (listener, isDownloadStream, freq = 3) => {
  let bytesNotified = 0;
  const _speedometer = speedometer_default(50, 250);
  return throttle_default((e) => {
    const loaded = e.loaded;
    const total = e.lengthComputable ? e.total : void 0;
    const progressBytes = loaded - bytesNotified;
    const rate = _speedometer(progressBytes);
    const inRange = loaded <= total;
    bytesNotified = loaded;
    const data = {
      loaded,
      total,
      progress: total ? loaded / total : void 0,
      bytes: progressBytes,
      rate: rate ? rate : void 0,
      estimated: rate && total && inRange ? (total - loaded) / rate : void 0,
      event: e,
      lengthComputable: total != null,
      [isDownloadStream ? "download" : "upload"]: true
    };
    listener(data);
  }, freq);
};
var progressEventDecorator = (total, throttled) => {
  const lengthComputable = total != null;
  return [(loaded) => throttled[0]({
    lengthComputable,
    total,
    loaded
  }), throttled[1]];
};
var asyncDecorator = (fn) => (...args) => utils_default.asap(() => fn(...args));

// node_modules/axios/lib/helpers/isURLSameOrigin.js
var isURLSameOrigin_default = platform_default.hasStandardBrowserEnv ? /* @__PURE__ */ ((origin2, isMSIE) => (url) => {
  url = new URL(url, platform_default.origin);
  return origin2.protocol === url.protocol && origin2.host === url.host && (isMSIE || origin2.port === url.port);
})(
  new URL(platform_default.origin),
  platform_default.navigator && /(msie|trident)/i.test(platform_default.navigator.userAgent)
) : () => true;

// node_modules/axios/lib/helpers/cookies.js
var cookies_default = platform_default.hasStandardBrowserEnv ? (
  // Standard browser envs support document.cookie
  {
    write(name, value, expires, path, domain, secure) {
      const cookie = [name + "=" + encodeURIComponent(value)];
      utils_default.isNumber(expires) && cookie.push("expires=" + new Date(expires).toGMTString());
      utils_default.isString(path) && cookie.push("path=" + path);
      utils_default.isString(domain) && cookie.push("domain=" + domain);
      secure === true && cookie.push("secure");
      document.cookie = cookie.join("; ");
    },
    read(name) {
      const match = document.cookie.match(new RegExp("(^|;\\s*)(" + name + ")=([^;]*)"));
      return match ? decodeURIComponent(match[3]) : null;
    },
    remove(name) {
      this.write(name, "", Date.now() - 864e5);
    }
  }
) : (
  // Non-standard browser env (web workers, react-native) lack needed support.
  {
    write() {
    },
    read() {
      return null;
    },
    remove() {
    }
  }
);

// node_modules/axios/lib/helpers/isAbsoluteURL.js
function isAbsoluteURL(url) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
}

// node_modules/axios/lib/helpers/combineURLs.js
function combineURLs(baseURL, relativeURL) {
  return relativeURL ? baseURL.replace(/\/?\/$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
}

// node_modules/axios/lib/core/buildFullPath.js
function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {
  let isRelativeUrl = !isAbsoluteURL(requestedURL);
  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
}

// node_modules/axios/lib/core/mergeConfig.js
var headersToObject = (thing) => thing instanceof AxiosHeaders_default ? { ...thing } : thing;
function mergeConfig(config1, config2) {
  config2 = config2 || {};
  const config = {};
  function getMergedValue(target, source, prop, caseless) {
    if (utils_default.isPlainObject(target) && utils_default.isPlainObject(source)) {
      return utils_default.merge.call({ caseless }, target, source);
    } else if (utils_default.isPlainObject(source)) {
      return utils_default.merge({}, source);
    } else if (utils_default.isArray(source)) {
      return source.slice();
    }
    return source;
  }
  function mergeDeepProperties(a, b, prop, caseless) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(a, b, prop, caseless);
    } else if (!utils_default.isUndefined(a)) {
      return getMergedValue(void 0, a, prop, caseless);
    }
  }
  function valueFromConfig2(a, b) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(void 0, b);
    }
  }
  function defaultToConfig2(a, b) {
    if (!utils_default.isUndefined(b)) {
      return getMergedValue(void 0, b);
    } else if (!utils_default.isUndefined(a)) {
      return getMergedValue(void 0, a);
    }
  }
  function mergeDirectKeys(a, b, prop) {
    if (prop in config2) {
      return getMergedValue(a, b);
    } else if (prop in config1) {
      return getMergedValue(void 0, a);
    }
  }
  const mergeMap = {
    url: valueFromConfig2,
    method: valueFromConfig2,
    data: valueFromConfig2,
    baseURL: defaultToConfig2,
    transformRequest: defaultToConfig2,
    transformResponse: defaultToConfig2,
    paramsSerializer: defaultToConfig2,
    timeout: defaultToConfig2,
    timeoutMessage: defaultToConfig2,
    withCredentials: defaultToConfig2,
    withXSRFToken: defaultToConfig2,
    adapter: defaultToConfig2,
    responseType: defaultToConfig2,
    xsrfCookieName: defaultToConfig2,
    xsrfHeaderName: defaultToConfig2,
    onUploadProgress: defaultToConfig2,
    onDownloadProgress: defaultToConfig2,
    decompress: defaultToConfig2,
    maxContentLength: defaultToConfig2,
    maxBodyLength: defaultToConfig2,
    beforeRedirect: defaultToConfig2,
    transport: defaultToConfig2,
    httpAgent: defaultToConfig2,
    httpsAgent: defaultToConfig2,
    cancelToken: defaultToConfig2,
    socketPath: defaultToConfig2,
    responseEncoding: defaultToConfig2,
    validateStatus: mergeDirectKeys,
    headers: (a, b, prop) => mergeDeepProperties(headersToObject(a), headersToObject(b), prop, true)
  };
  utils_default.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {
    const merge2 = mergeMap[prop] || mergeDeepProperties;
    const configValue = merge2(config1[prop], config2[prop], prop);
    utils_default.isUndefined(configValue) && merge2 !== mergeDirectKeys || (config[prop] = configValue);
  });
  return config;
}

// node_modules/axios/lib/helpers/resolveConfig.js
var resolveConfig_default = (config) => {
  const newConfig = mergeConfig({}, config);
  let { data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth } = newConfig;
  newConfig.headers = headers = AxiosHeaders_default.from(headers);
  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);
  if (auth) {
    headers.set(
      "Authorization",
      "Basic " + btoa((auth.username || "") + ":" + (auth.password ? unescape(encodeURIComponent(auth.password)) : ""))
    );
  }
  let contentType;
  if (utils_default.isFormData(data)) {
    if (platform_default.hasStandardBrowserEnv || platform_default.hasStandardBrowserWebWorkerEnv) {
      headers.setContentType(void 0);
    } else if ((contentType = headers.getContentType()) !== false) {
      const [type, ...tokens] = contentType ? contentType.split(";").map((token) => token.trim()).filter(Boolean) : [];
      headers.setContentType([type || "multipart/form-data", ...tokens].join("; "));
    }
  }
  if (platform_default.hasStandardBrowserEnv) {
    withXSRFToken && utils_default.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));
    if (withXSRFToken || withXSRFToken !== false && isURLSameOrigin_default(newConfig.url)) {
      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies_default.read(xsrfCookieName);
      if (xsrfValue) {
        headers.set(xsrfHeaderName, xsrfValue);
      }
    }
  }
  return newConfig;
};

// node_modules/axios/lib/adapters/xhr.js
var isXHRAdapterSupported = typeof XMLHttpRequest !== "undefined";
var xhr_default = isXHRAdapterSupported && function(config) {
  return new Promise(function dispatchXhrRequest(resolve, reject) {
    const _config = resolveConfig_default(config);
    let requestData = _config.data;
    const requestHeaders = AxiosHeaders_default.from(_config.headers).normalize();
    let { responseType, onUploadProgress, onDownloadProgress } = _config;
    let onCanceled;
    let uploadThrottled, downloadThrottled;
    let flushUpload, flushDownload;
    function done() {
      flushUpload && flushUpload();
      flushDownload && flushDownload();
      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);
      _config.signal && _config.signal.removeEventListener("abort", onCanceled);
    }
    let request = new XMLHttpRequest();
    request.open(_config.method.toUpperCase(), _config.url, true);
    request.timeout = _config.timeout;
    function onloadend() {
      if (!request) {
        return;
      }
      const responseHeaders = AxiosHeaders_default.from(
        "getAllResponseHeaders" in request && request.getAllResponseHeaders()
      );
      const responseData = !responseType || responseType === "text" || responseType === "json" ? request.responseText : request.response;
      const response = {
        data: responseData,
        status: request.status,
        statusText: request.statusText,
        headers: responseHeaders,
        config,
        request
      };
      settle(function _resolve(value) {
        resolve(value);
        done();
      }, function _reject(err) {
        reject(err);
        done();
      }, response);
      request = null;
    }
    if ("onloadend" in request) {
      request.onloadend = onloadend;
    } else {
      request.onreadystatechange = function handleLoad() {
        if (!request || request.readyState !== 4) {
          return;
        }
        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf("file:") === 0)) {
          return;
        }
        setTimeout(onloadend);
      };
    }
    request.onabort = function handleAbort() {
      if (!request) {
        return;
      }
      reject(new AxiosError_default("Request aborted", AxiosError_default.ECONNABORTED, config, request));
      request = null;
    };
    request.onerror = function handleError() {
      reject(new AxiosError_default("Network Error", AxiosError_default.ERR_NETWORK, config, request));
      request = null;
    };
    request.ontimeout = function handleTimeout() {
      let timeoutErrorMessage = _config.timeout ? "timeout of " + _config.timeout + "ms exceeded" : "timeout exceeded";
      const transitional2 = _config.transitional || transitional_default;
      if (_config.timeoutErrorMessage) {
        timeoutErrorMessage = _config.timeoutErrorMessage;
      }
      reject(new AxiosError_default(
        timeoutErrorMessage,
        transitional2.clarifyTimeoutError ? AxiosError_default.ETIMEDOUT : AxiosError_default.ECONNABORTED,
        config,
        request
      ));
      request = null;
    };
    requestData === void 0 && requestHeaders.setContentType(null);
    if ("setRequestHeader" in request) {
      utils_default.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {
        request.setRequestHeader(key, val);
      });
    }
    if (!utils_default.isUndefined(_config.withCredentials)) {
      request.withCredentials = !!_config.withCredentials;
    }
    if (responseType && responseType !== "json") {
      request.responseType = _config.responseType;
    }
    if (onDownloadProgress) {
      [downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true);
      request.addEventListener("progress", downloadThrottled);
    }
    if (onUploadProgress && request.upload) {
      [uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress);
      request.upload.addEventListener("progress", uploadThrottled);
      request.upload.addEventListener("loadend", flushUpload);
    }
    if (_config.cancelToken || _config.signal) {
      onCanceled = (cancel) => {
        if (!request) {
          return;
        }
        reject(!cancel || cancel.type ? new CanceledError_default(null, config, request) : cancel);
        request.abort();
        request = null;
      };
      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);
      if (_config.signal) {
        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener("abort", onCanceled);
      }
    }
    const protocol = parseProtocol(_config.url);
    if (protocol && platform_default.protocols.indexOf(protocol) === -1) {
      reject(new AxiosError_default("Unsupported protocol " + protocol + ":", AxiosError_default.ERR_BAD_REQUEST, config));
      return;
    }
    request.send(requestData || null);
  });
};

// node_modules/axios/lib/helpers/composeSignals.js
var composeSignals = (signals, timeout) => {
  const { length } = signals = signals ? signals.filter(Boolean) : [];
  if (timeout || length) {
    let controller = new AbortController();
    let aborted;
    const onabort = function(reason) {
      if (!aborted) {
        aborted = true;
        unsubscribe();
        const err = reason instanceof Error ? reason : this.reason;
        controller.abort(err instanceof AxiosError_default ? err : new CanceledError_default(err instanceof Error ? err.message : err));
      }
    };
    let timer = timeout && setTimeout(() => {
      timer = null;
      onabort(new AxiosError_default(`timeout ${timeout} of ms exceeded`, AxiosError_default.ETIMEDOUT));
    }, timeout);
    const unsubscribe = () => {
      if (signals) {
        timer && clearTimeout(timer);
        timer = null;
        signals.forEach((signal2) => {
          signal2.unsubscribe ? signal2.unsubscribe(onabort) : signal2.removeEventListener("abort", onabort);
        });
        signals = null;
      }
    };
    signals.forEach((signal2) => signal2.addEventListener("abort", onabort));
    const { signal } = controller;
    signal.unsubscribe = () => utils_default.asap(unsubscribe);
    return signal;
  }
};
var composeSignals_default = composeSignals;

// node_modules/axios/lib/helpers/trackStream.js
var streamChunk = function* (chunk, chunkSize) {
  let len = chunk.byteLength;
  if (!chunkSize || len < chunkSize) {
    yield chunk;
    return;
  }
  let pos = 0;
  let end;
  while (pos < len) {
    end = pos + chunkSize;
    yield chunk.slice(pos, end);
    pos = end;
  }
};
var readBytes = async function* (iterable, chunkSize) {
  for await (const chunk of readStream(iterable)) {
    yield* streamChunk(chunk, chunkSize);
  }
};
var readStream = async function* (stream) {
  if (stream[Symbol.asyncIterator]) {
    yield* stream;
    return;
  }
  const reader = stream.getReader();
  try {
    for (; ; ) {
      const { done, value } = await reader.read();
      if (done) {
        break;
      }
      yield value;
    }
  } finally {
    await reader.cancel();
  }
};
var trackStream = (stream, chunkSize, onProgress, onFinish) => {
  const iterator2 = readBytes(stream, chunkSize);
  let bytes = 0;
  let done;
  let _onFinish = (e) => {
    if (!done) {
      done = true;
      onFinish && onFinish(e);
    }
  };
  return new ReadableStream({
    async pull(controller) {
      try {
        const { done: done2, value } = await iterator2.next();
        if (done2) {
          _onFinish();
          controller.close();
          return;
        }
        let len = value.byteLength;
        if (onProgress) {
          let loadedBytes = bytes += len;
          onProgress(loadedBytes);
        }
        controller.enqueue(new Uint8Array(value));
      } catch (err) {
        _onFinish(err);
        throw err;
      }
    },
    cancel(reason) {
      _onFinish(reason);
      return iterator2.return();
    }
  }, {
    highWaterMark: 2
  });
};

// node_modules/axios/lib/adapters/fetch.js
var isFetchSupported = typeof fetch === "function" && typeof Request === "function" && typeof Response === "function";
var isReadableStreamSupported = isFetchSupported && typeof ReadableStream === "function";
var encodeText = isFetchSupported && (typeof TextEncoder === "function" ? /* @__PURE__ */ ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) : async (str) => new Uint8Array(await new Response(str).arrayBuffer()));
var test = (fn, ...args) => {
  try {
    return !!fn(...args);
  } catch (e) {
    return false;
  }
};
var supportsRequestStream = isReadableStreamSupported && test(() => {
  let duplexAccessed = false;
  const hasContentType = new Request(platform_default.origin, {
    body: new ReadableStream(),
    method: "POST",
    get duplex() {
      duplexAccessed = true;
      return "half";
    }
  }).headers.has("Content-Type");
  return duplexAccessed && !hasContentType;
});
var DEFAULT_CHUNK_SIZE = 64 * 1024;
var supportsResponseStream = isReadableStreamSupported && test(() => utils_default.isReadableStream(new Response("").body));
var resolvers = {
  stream: supportsResponseStream && ((res) => res.body)
};
isFetchSupported && ((res) => {
  ["text", "arrayBuffer", "blob", "formData", "stream"].forEach((type) => {
    !resolvers[type] && (resolvers[type] = utils_default.isFunction(res[type]) ? (res2) => res2[type]() : (_, config) => {
      throw new AxiosError_default(`Response type '${type}' is not supported`, AxiosError_default.ERR_NOT_SUPPORT, config);
    });
  });
})(new Response());
var getBodyLength = async (body) => {
  if (body == null) {
    return 0;
  }
  if (utils_default.isBlob(body)) {
    return body.size;
  }
  if (utils_default.isSpecCompliantForm(body)) {
    const _request = new Request(platform_default.origin, {
      method: "POST",
      body
    });
    return (await _request.arrayBuffer()).byteLength;
  }
  if (utils_default.isArrayBufferView(body) || utils_default.isArrayBuffer(body)) {
    return body.byteLength;
  }
  if (utils_default.isURLSearchParams(body)) {
    body = body + "";
  }
  if (utils_default.isString(body)) {
    return (await encodeText(body)).byteLength;
  }
};
var resolveBodyLength = async (headers, body) => {
  const length = utils_default.toFiniteNumber(headers.getContentLength());
  return length == null ? getBodyLength(body) : length;
};
var fetch_default = isFetchSupported && (async (config) => {
  let {
    url,
    method,
    data,
    signal,
    cancelToken,
    timeout,
    onDownloadProgress,
    onUploadProgress,
    responseType,
    headers,
    withCredentials = "same-origin",
    fetchOptions
  } = resolveConfig_default(config);
  responseType = responseType ? (responseType + "").toLowerCase() : "text";
  let composedSignal = composeSignals_default([signal, cancelToken && cancelToken.toAbortSignal()], timeout);
  let request;
  const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {
    composedSignal.unsubscribe();
  });
  let requestContentLength;
  try {
    if (onUploadProgress && supportsRequestStream && method !== "get" && method !== "head" && (requestContentLength = await resolveBodyLength(headers, data)) !== 0) {
      let _request = new Request(url, {
        method: "POST",
        body: data,
        duplex: "half"
      });
      let contentTypeHeader;
      if (utils_default.isFormData(data) && (contentTypeHeader = _request.headers.get("content-type"))) {
        headers.setContentType(contentTypeHeader);
      }
      if (_request.body) {
        const [onProgress, flush] = progressEventDecorator(
          requestContentLength,
          progressEventReducer(asyncDecorator(onUploadProgress))
        );
        data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);
      }
    }
    if (!utils_default.isString(withCredentials)) {
      withCredentials = withCredentials ? "include" : "omit";
    }
    const isCredentialsSupported = "credentials" in Request.prototype;
    request = new Request(url, {
      ...fetchOptions,
      signal: composedSignal,
      method: method.toUpperCase(),
      headers: headers.normalize().toJSON(),
      body: data,
      duplex: "half",
      credentials: isCredentialsSupported ? withCredentials : void 0
    });
    let response = await fetch(request, fetchOptions);
    const isStreamResponse = supportsResponseStream && (responseType === "stream" || responseType === "response");
    if (supportsResponseStream && (onDownloadProgress || isStreamResponse && unsubscribe)) {
      const options = {};
      ["status", "statusText", "headers"].forEach((prop) => {
        options[prop] = response[prop];
      });
      const responseContentLength = utils_default.toFiniteNumber(response.headers.get("content-length"));
      const [onProgress, flush] = onDownloadProgress && progressEventDecorator(
        responseContentLength,
        progressEventReducer(asyncDecorator(onDownloadProgress), true)
      ) || [];
      response = new Response(
        trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {
          flush && flush();
          unsubscribe && unsubscribe();
        }),
        options
      );
    }
    responseType = responseType || "text";
    let responseData = await resolvers[utils_default.findKey(resolvers, responseType) || "text"](response, config);
    !isStreamResponse && unsubscribe && unsubscribe();
    return await new Promise((resolve, reject) => {
      settle(resolve, reject, {
        data: responseData,
        headers: AxiosHeaders_default.from(response.headers),
        status: response.status,
        statusText: response.statusText,
        config,
        request
      });
    });
  } catch (err) {
    unsubscribe && unsubscribe();
    if (err && err.name === "TypeError" && /Load failed|fetch/i.test(err.message)) {
      throw Object.assign(
        new AxiosError_default("Network Error", AxiosError_default.ERR_NETWORK, config, request),
        {
          cause: err.cause || err
        }
      );
    }
    throw AxiosError_default.from(err, err && err.code, config, request);
  }
});

// node_modules/axios/lib/adapters/adapters.js
var knownAdapters = {
  http: null_default,
  xhr: xhr_default,
  fetch: fetch_default
};
utils_default.forEach(knownAdapters, (fn, value) => {
  if (fn) {
    try {
      Object.defineProperty(fn, "name", { value });
    } catch (e) {
    }
    Object.defineProperty(fn, "adapterName", { value });
  }
});
var renderReason = (reason) => `- ${reason}`;
var isResolvedHandle = (adapter) => utils_default.isFunction(adapter) || adapter === null || adapter === false;
var adapters_default = {
  getAdapter: (adapters) => {
    adapters = utils_default.isArray(adapters) ? adapters : [adapters];
    const { length } = adapters;
    let nameOrAdapter;
    let adapter;
    const rejectedReasons = {};
    for (let i = 0; i < length; i++) {
      nameOrAdapter = adapters[i];
      let id;
      adapter = nameOrAdapter;
      if (!isResolvedHandle(nameOrAdapter)) {
        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];
        if (adapter === void 0) {
          throw new AxiosError_default(`Unknown adapter '${id}'`);
        }
      }
      if (adapter) {
        break;
      }
      rejectedReasons[id || "#" + i] = adapter;
    }
    if (!adapter) {
      const reasons = Object.entries(rejectedReasons).map(
        ([id, state]) => `adapter ${id} ` + (state === false ? "is not supported by the environment" : "is not available in the build")
      );
      let s = length ? reasons.length > 1 ? "since :\n" + reasons.map(renderReason).join("\n") : " " + renderReason(reasons[0]) : "as no adapter specified";
      throw new AxiosError_default(
        `There is no suitable adapter to dispatch the request ` + s,
        "ERR_NOT_SUPPORT"
      );
    }
    return adapter;
  },
  adapters: knownAdapters
};

// node_modules/axios/lib/core/dispatchRequest.js
function throwIfCancellationRequested(config) {
  if (config.cancelToken) {
    config.cancelToken.throwIfRequested();
  }
  if (config.signal && config.signal.aborted) {
    throw new CanceledError_default(null, config);
  }
}
function dispatchRequest(config) {
  throwIfCancellationRequested(config);
  config.headers = AxiosHeaders_default.from(config.headers);
  config.data = transformData.call(
    config,
    config.transformRequest
  );
  if (["post", "put", "patch"].indexOf(config.method) !== -1) {
    config.headers.setContentType("application/x-www-form-urlencoded", false);
  }
  const adapter = adapters_default.getAdapter(config.adapter || defaults_default.adapter);
  return adapter(config).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config);
    response.data = transformData.call(
      config,
      config.transformResponse,
      response
    );
    response.headers = AxiosHeaders_default.from(response.headers);
    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config);
      if (reason && reason.response) {
        reason.response.data = transformData.call(
          config,
          config.transformResponse,
          reason.response
        );
        reason.response.headers = AxiosHeaders_default.from(reason.response.headers);
      }
    }
    return Promise.reject(reason);
  });
}

// node_modules/axios/lib/env/data.js
var VERSION = "1.10.0";

// node_modules/axios/lib/helpers/validator.js
var validators = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach((type, i) => {
  validators[type] = function validator(thing) {
    return typeof thing === type || "a" + (i < 1 ? "n " : " ") + type;
  };
});
var deprecatedWarnings = {};
validators.transitional = function transitional(validator, version, message) {
  function formatMessage(opt, desc) {
    return "[Axios v" + VERSION + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
  }
  return (value, opt, opts) => {
    if (validator === false) {
      throw new AxiosError_default(
        formatMessage(opt, " has been removed" + (version ? " in " + version : "")),
        AxiosError_default.ERR_DEPRECATED
      );
    }
    if (version && !deprecatedWarnings[opt]) {
      deprecatedWarnings[opt] = true;
      console.warn(
        formatMessage(
          opt,
          " has been deprecated since v" + version + " and will be removed in the near future"
        )
      );
    }
    return validator ? validator(value, opt, opts) : true;
  };
};
validators.spelling = function spelling(correctSpelling) {
  return (value, opt) => {
    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);
    return true;
  };
};
function assertOptions(options, schema, allowUnknown) {
  if (typeof options !== "object") {
    throw new AxiosError_default("options must be an object", AxiosError_default.ERR_BAD_OPTION_VALUE);
  }
  const keys = Object.keys(options);
  let i = keys.length;
  while (i-- > 0) {
    const opt = keys[i];
    const validator = schema[opt];
    if (validator) {
      const value = options[opt];
      const result = value === void 0 || validator(value, opt, options);
      if (result !== true) {
        throw new AxiosError_default("option " + opt + " must be " + result, AxiosError_default.ERR_BAD_OPTION_VALUE);
      }
      continue;
    }
    if (allowUnknown !== true) {
      throw new AxiosError_default("Unknown option " + opt, AxiosError_default.ERR_BAD_OPTION);
    }
  }
}
var validator_default = {
  assertOptions,
  validators
};

// node_modules/axios/lib/core/Axios.js
var validators2 = validator_default.validators;
var Axios = class {
  constructor(instanceConfig) {
    this.defaults = instanceConfig || {};
    this.interceptors = {
      request: new InterceptorManager_default(),
      response: new InterceptorManager_default()
    };
  }
  /**
   * Dispatch a request
   *
   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)
   * @param {?Object} config
   *
   * @returns {Promise} The Promise to be fulfilled
   */
  async request(configOrUrl, config) {
    try {
      return await this._request(configOrUrl, config);
    } catch (err) {
      if (err instanceof Error) {
        let dummy = {};
        Error.captureStackTrace ? Error.captureStackTrace(dummy) : dummy = new Error();
        const stack = dummy.stack ? dummy.stack.replace(/^.+\n/, "") : "";
        try {
          if (!err.stack) {
            err.stack = stack;
          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\n.+\n/, ""))) {
            err.stack += "\n" + stack;
          }
        } catch (e) {
        }
      }
      throw err;
    }
  }
  _request(configOrUrl, config) {
    if (typeof configOrUrl === "string") {
      config = config || {};
      config.url = configOrUrl;
    } else {
      config = configOrUrl || {};
    }
    config = mergeConfig(this.defaults, config);
    const { transitional: transitional2, paramsSerializer, headers } = config;
    if (transitional2 !== void 0) {
      validator_default.assertOptions(transitional2, {
        silentJSONParsing: validators2.transitional(validators2.boolean),
        forcedJSONParsing: validators2.transitional(validators2.boolean),
        clarifyTimeoutError: validators2.transitional(validators2.boolean)
      }, false);
    }
    if (paramsSerializer != null) {
      if (utils_default.isFunction(paramsSerializer)) {
        config.paramsSerializer = {
          serialize: paramsSerializer
        };
      } else {
        validator_default.assertOptions(paramsSerializer, {
          encode: validators2.function,
          serialize: validators2.function
        }, true);
      }
    }
    if (config.allowAbsoluteUrls !== void 0) {
    } else if (this.defaults.allowAbsoluteUrls !== void 0) {
      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;
    } else {
      config.allowAbsoluteUrls = true;
    }
    validator_default.assertOptions(config, {
      baseUrl: validators2.spelling("baseURL"),
      withXsrfToken: validators2.spelling("withXSRFToken")
    }, true);
    config.method = (config.method || this.defaults.method || "get").toLowerCase();
    let contextHeaders = headers && utils_default.merge(
      headers.common,
      headers[config.method]
    );
    headers && utils_default.forEach(
      ["delete", "get", "head", "post", "put", "patch", "common"],
      (method) => {
        delete headers[method];
      }
    );
    config.headers = AxiosHeaders_default.concat(contextHeaders, headers);
    const requestInterceptorChain = [];
    let synchronousRequestInterceptors = true;
    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
      if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config) === false) {
        return;
      }
      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
    });
    const responseInterceptorChain = [];
    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
    });
    let promise;
    let i = 0;
    let len;
    if (!synchronousRequestInterceptors) {
      const chain = [dispatchRequest.bind(this), void 0];
      chain.unshift.apply(chain, requestInterceptorChain);
      chain.push.apply(chain, responseInterceptorChain);
      len = chain.length;
      promise = Promise.resolve(config);
      while (i < len) {
        promise = promise.then(chain[i++], chain[i++]);
      }
      return promise;
    }
    len = requestInterceptorChain.length;
    let newConfig = config;
    i = 0;
    while (i < len) {
      const onFulfilled = requestInterceptorChain[i++];
      const onRejected = requestInterceptorChain[i++];
      try {
        newConfig = onFulfilled(newConfig);
      } catch (error) {
        onRejected.call(this, error);
        break;
      }
    }
    try {
      promise = dispatchRequest.call(this, newConfig);
    } catch (error) {
      return Promise.reject(error);
    }
    i = 0;
    len = responseInterceptorChain.length;
    while (i < len) {
      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);
    }
    return promise;
  }
  getUri(config) {
    config = mergeConfig(this.defaults, config);
    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);
    return buildURL(fullPath, config.params, config.paramsSerializer);
  }
};
utils_default.forEach(["delete", "get", "head", "options"], function forEachMethodNoData(method) {
  Axios.prototype[method] = function(url, config) {
    return this.request(mergeConfig(config || {}, {
      method,
      url,
      data: (config || {}).data
    }));
  };
});
utils_default.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
  function generateHTTPMethod(isForm) {
    return function httpMethod(url, data, config) {
      return this.request(mergeConfig(config || {}, {
        method,
        headers: isForm ? {
          "Content-Type": "multipart/form-data"
        } : {},
        url,
        data
      }));
    };
  }
  Axios.prototype[method] = generateHTTPMethod();
  Axios.prototype[method + "Form"] = generateHTTPMethod(true);
});
var Axios_default = Axios;

// node_modules/axios/lib/cancel/CancelToken.js
var CancelToken = class _CancelToken {
  constructor(executor) {
    if (typeof executor !== "function") {
      throw new TypeError("executor must be a function.");
    }
    let resolvePromise;
    this.promise = new Promise(function promiseExecutor(resolve) {
      resolvePromise = resolve;
    });
    const token = this;
    this.promise.then((cancel) => {
      if (!token._listeners)
        return;
      let i = token._listeners.length;
      while (i-- > 0) {
        token._listeners[i](cancel);
      }
      token._listeners = null;
    });
    this.promise.then = (onfulfilled) => {
      let _resolve;
      const promise = new Promise((resolve) => {
        token.subscribe(resolve);
        _resolve = resolve;
      }).then(onfulfilled);
      promise.cancel = function reject() {
        token.unsubscribe(_resolve);
      };
      return promise;
    };
    executor(function cancel(message, config, request) {
      if (token.reason) {
        return;
      }
      token.reason = new CanceledError_default(message, config, request);
      resolvePromise(token.reason);
    });
  }
  /**
   * Throws a `CanceledError` if cancellation has been requested.
   */
  throwIfRequested() {
    if (this.reason) {
      throw this.reason;
    }
  }
  /**
   * Subscribe to the cancel signal
   */
  subscribe(listener) {
    if (this.reason) {
      listener(this.reason);
      return;
    }
    if (this._listeners) {
      this._listeners.push(listener);
    } else {
      this._listeners = [listener];
    }
  }
  /**
   * Unsubscribe from the cancel signal
   */
  unsubscribe(listener) {
    if (!this._listeners) {
      return;
    }
    const index = this._listeners.indexOf(listener);
    if (index !== -1) {
      this._listeners.splice(index, 1);
    }
  }
  toAbortSignal() {
    const controller = new AbortController();
    const abort = (err) => {
      controller.abort(err);
    };
    this.subscribe(abort);
    controller.signal.unsubscribe = () => this.unsubscribe(abort);
    return controller.signal;
  }
  /**
   * Returns an object that contains a new `CancelToken` and a function that, when called,
   * cancels the `CancelToken`.
   */
  static source() {
    let cancel;
    const token = new _CancelToken(function executor(c) {
      cancel = c;
    });
    return {
      token,
      cancel
    };
  }
};
var CancelToken_default = CancelToken;

// node_modules/axios/lib/helpers/spread.js
function spread(callback) {
  return function wrap(arr) {
    return callback.apply(null, arr);
  };
}

// node_modules/axios/lib/helpers/isAxiosError.js
function isAxiosError(payload) {
  return utils_default.isObject(payload) && payload.isAxiosError === true;
}

// node_modules/axios/lib/helpers/HttpStatusCode.js
var HttpStatusCode = {
  Continue: 100,
  SwitchingProtocols: 101,
  Processing: 102,
  EarlyHints: 103,
  Ok: 200,
  Created: 201,
  Accepted: 202,
  NonAuthoritativeInformation: 203,
  NoContent: 204,
  ResetContent: 205,
  PartialContent: 206,
  MultiStatus: 207,
  AlreadyReported: 208,
  ImUsed: 226,
  MultipleChoices: 300,
  MovedPermanently: 301,
  Found: 302,
  SeeOther: 303,
  NotModified: 304,
  UseProxy: 305,
  Unused: 306,
  TemporaryRedirect: 307,
  PermanentRedirect: 308,
  BadRequest: 400,
  Unauthorized: 401,
  PaymentRequired: 402,
  Forbidden: 403,
  NotFound: 404,
  MethodNotAllowed: 405,
  NotAcceptable: 406,
  ProxyAuthenticationRequired: 407,
  RequestTimeout: 408,
  Conflict: 409,
  Gone: 410,
  LengthRequired: 411,
  PreconditionFailed: 412,
  PayloadTooLarge: 413,
  UriTooLong: 414,
  UnsupportedMediaType: 415,
  RangeNotSatisfiable: 416,
  ExpectationFailed: 417,
  ImATeapot: 418,
  MisdirectedRequest: 421,
  UnprocessableEntity: 422,
  Locked: 423,
  FailedDependency: 424,
  TooEarly: 425,
  UpgradeRequired: 426,
  PreconditionRequired: 428,
  TooManyRequests: 429,
  RequestHeaderFieldsTooLarge: 431,
  UnavailableForLegalReasons: 451,
  InternalServerError: 500,
  NotImplemented: 501,
  BadGateway: 502,
  ServiceUnavailable: 503,
  GatewayTimeout: 504,
  HttpVersionNotSupported: 505,
  VariantAlsoNegotiates: 506,
  InsufficientStorage: 507,
  LoopDetected: 508,
  NotExtended: 510,
  NetworkAuthenticationRequired: 511
};
Object.entries(HttpStatusCode).forEach(([key, value]) => {
  HttpStatusCode[value] = key;
});
var HttpStatusCode_default = HttpStatusCode;

// node_modules/axios/lib/axios.js
function createInstance(defaultConfig) {
  const context = new Axios_default(defaultConfig);
  const instance = bind(Axios_default.prototype.request, context);
  utils_default.extend(instance, Axios_default.prototype, context, { allOwnKeys: true });
  utils_default.extend(instance, context, null, { allOwnKeys: true });
  instance.create = function create(instanceConfig) {
    return createInstance(mergeConfig(defaultConfig, instanceConfig));
  };
  return instance;
}
var axios = createInstance(defaults_default);
axios.Axios = Axios_default;
axios.CanceledError = CanceledError_default;
axios.CancelToken = CancelToken_default;
axios.isCancel = isCancel;
axios.VERSION = VERSION;
axios.toFormData = toFormData_default;
axios.AxiosError = AxiosError_default;
axios.Cancel = axios.CanceledError;
axios.all = function all(promises) {
  return Promise.all(promises);
};
axios.spread = spread;
axios.isAxiosError = isAxiosError;
axios.mergeConfig = mergeConfig;
axios.AxiosHeaders = AxiosHeaders_default;
axios.formToJSON = (thing) => formDataToJSON_default(utils_default.isHTMLForm(thing) ? new FormData(thing) : thing);
axios.getAdapter = adapters_default.getAdapter;
axios.HttpStatusCode = HttpStatusCode_default;
axios.default = axios;
var axios_default = axios;

// node_modules/axios/index.js
var {
  Axios: Axios2,
  AxiosError: AxiosError2,
  CanceledError: CanceledError2,
  isCancel: isCancel2,
  CancelToken: CancelToken2,
  VERSION: VERSION2,
  all: all2,
  Cancel,
  isAxiosError: isAxiosError2,
  spread: spread2,
  toFormData: toFormData2,
  AxiosHeaders: AxiosHeaders2,
  HttpStatusCode: HttpStatusCode2,
  formToJSON,
  getAdapter,
  mergeConfig: mergeConfig2
} = axios_default;

// src/infrastructure/llm/LLMService.ts
var LLMService = class {
  constructor(settings) {
    this.settings = settings;
  }
  // 현재 선택된 제공업체의 API 키를 가져오는 메서드
  getCurrentApiKey() {
    const provider = this.settings.llmProvider;
    let encryptedKey = "";
    switch (provider) {
      case "openai":
        encryptedKey = this.settings.openaiApiKey;
        break;
      case "anthropic":
        encryptedKey = this.settings.anthropicApiKey;
        break;
      case "google":
        encryptedKey = this.settings.googleApiKey;
        break;
    }
    return decryptApiKey(encryptedKey);
  }
  async testConnection() {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const testPrompt = 'Hello, this is a test message. Please respond with "OK" if you can read this.';
      const response = await this.callLLM(testPrompt);
      if (response.success) {
        return { success: true, data: "API \uC5F0\uACB0 \uC131\uACF5" };
      } else {
        return { success: false, error: response.error || "API \uC5F0\uACB0 \uC2E4\uD328" };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getWordDetails(word) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const prompt = this.createWordDetailPrompt(word);
      const response = await this.callLLM(prompt);
      if (response.success) {
        const parsedData = this.parseWordDetailResponse(response.data, word);
        return { success: true, data: parsedData };
      } else {
        return { success: false, error: response.error || "\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getMultipleWordDetails(words, progressCallback) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      if (words.length === 0) {
        return { success: false, error: "\uCC98\uB9AC\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      const BATCH_SIZE = 20;
      const allResults = [];
      const totalBatches = Math.ceil(words.length / BATCH_SIZE);
      console.log(`\uCD1D ${words.length}\uAC1C \uB2E8\uC5B4\uB97C ${totalBatches}\uAC1C \uBC30\uCE58\uB85C \uB098\uB204\uC5B4 \uCC98\uB9AC\uD569\uB2C8\uB2E4.`);
      if (progressCallback) {
        progressCallback(0, words.length, `\uCD1D ${words.length}\uAC1C \uB2E8\uC5B4\uB97C ${totalBatches}\uAC1C \uBC30\uCE58\uB85C \uB098\uB204\uC5B4 \uCC98\uB9AC\uD569\uB2C8\uB2E4.`);
      }
      for (let i = 0; i < words.length; i += BATCH_SIZE) {
        const batchNumber = Math.floor(i / BATCH_SIZE) + 1;
        const batchWords = words.slice(i, i + BATCH_SIZE);
        console.log(`\uBC30\uCE58 ${batchNumber}/${totalBatches} \uCC98\uB9AC \uC911... (${batchWords.length}\uAC1C \uB2E8\uC5B4)`);
        if (progressCallback) {
          progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber}/${totalBatches} \uCC98\uB9AC \uC911... (${batchWords.length}\uAC1C \uB2E8\uC5B4)`);
        }
        try {
          const prompt = this.createMultipleWordDetailPrompt(batchWords);
          const response = await this.callLLM(prompt);
          if (response.success) {
            const parsedData = this.parseMultipleWordDetailResponse(response.data, batchWords);
            allResults.push(...parsedData);
            console.log(`\uBC30\uCE58 ${batchNumber} \uC644\uB8CC: ${parsedData.length}\uAC1C \uB2E8\uC5B4 \uCC98\uB9AC\uB428`);
            if (progressCallback) {
              progressCallback(i + batchWords.length, words.length, `\uBC30\uCE58 ${batchNumber} \uC644\uB8CC: ${parsedData.length}\uAC1C \uB2E8\uC5B4 \uCC98\uB9AC\uB428`);
            }
          } else {
            console.error(`\uBC30\uCE58 ${batchNumber} \uC2E4\uD328:`, response.error);
            if (progressCallback) {
              progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC2E4\uD328, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
            }
            const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
            allResults.push(...individualResults);
          }
        } catch (error) {
          console.error(`\uBC30\uCE58 ${batchNumber} \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
          if (progressCallback) {
            progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC624\uB958, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
          }
          const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
          allResults.push(...individualResults);
        }
        if (i + BATCH_SIZE < words.length) {
          await this.delay(1e3);
        }
      }
      console.log(`\uBAA8\uB4E0 \uBC30\uCE58 \uCC98\uB9AC \uC644\uB8CC. \uCD1D ${allResults.length}\uAC1C \uB2E8\uC5B4 \uB370\uC774\uD130 \uC218\uC9D1\uB428`);
      if (progressCallback) {
        progressCallback(words.length, words.length, `\uBAA8\uB4E0 \uBC30\uCE58 \uCC98\uB9AC \uC644\uB8CC. \uCD1D ${allResults.length}\uAC1C \uB2E8\uC5B4 \uB370\uC774\uD130 \uC218\uC9D1\uB428`);
      }
      return { success: true, data: allResults };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  // 개별 단어 처리 (배치 실패 시 폴백)
  async processWordsIndividually(words, progressCallback, startIndex = 0) {
    const results = [];
    for (let i = 0; i < words.length; i++) {
      const word = words[i];
      const currentIndex = startIndex + i;
      try {
        console.log(`\uAC1C\uBCC4 \uCC98\uB9AC: "${word}"`);
        if (progressCallback) {
          progressCallback(currentIndex, startIndex + words.length, `\uAC1C\uBCC4 \uCC98\uB9AC: "${word}"`);
        }
        const response = await this.getWordDetails(word);
        if (response.success && response.data) {
          results.push(response.data);
        } else {
          console.warn(`\uB2E8\uC5B4 "${word}" \uCC98\uB9AC \uC2E4\uD328:`, response.error);
          results.push({
            word: word.toLowerCase(),
            pronunciation: "",
            meanings: ["\uCC98\uB9AC \uC2E4\uD328"],
            examples: [],
            similarWords: []
          });
        }
        await this.delay(500);
      } catch (error) {
        console.error(`\uB2E8\uC5B4 "${word}" \uAC1C\uBCC4 \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
        results.push({
          word: word.toLowerCase(),
          pronunciation: "",
          meanings: ["\uCC98\uB9AC \uC624\uB958"],
          examples: [],
          similarWords: []
        });
      }
    }
    return results;
  }
  // 지연 함수
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  createWordDetailPrompt(word) {
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4 "${word}"\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
1. \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD)
2. \uD55C\uAE00 \uB73B\uB4E4 (\uC5EC\uB7EC \uAC1C\uC77C \uC218 \uC788\uC74C)
3. \uAC01 \uB73B\uBCC4\uB85C \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED (\uAC01 \uB73B\uB2F9 2-3\uAC1C\uC758 \uC608\uBB38 \uC81C\uACF5)
4. \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4

\uC751\uB2F5 \uD615\uC2DD:
{
  "word": "${word}",
  "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
  "meanings": ["\uB73B1", "\uB73B2", "\uB73B3"],
  "examples": [
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 1",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 2", 
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 3",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
    }
  ],
  "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42", "\uC720\uC0AC\uB2E8\uC5B43"]
}

JSON \uD615\uC2DD\uC73C\uB85C\uB9CC \uC751\uB2F5\uD574\uC8FC\uC138\uC694. \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  createMultipleWordDetailPrompt(words) {
    const wordList = words.join(", ");
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C \uC815\uD655\uD55C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694: ${wordList}

\uC694\uAD6C\uC0AC\uD56D:
- \uAC01 \uB2E8\uC5B4\uC5D0 \uB300\uD574 \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD), \uD55C\uAE00 \uB73B\uB4E4, \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED, \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC744 \uD3EC\uD568
- \uAC01 \uB73B\uBCC4\uB85C 2-3\uAC1C\uC758 \uC608\uBB38\uC744 \uC81C\uACF5\uD574\uC8FC\uC138\uC694
- JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694
- \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uC774\uC911 \uB530\uC634\uD45C\uB85C \uAC10\uC2F8\uC8FC\uC138\uC694
- \uBC30\uC5F4\uACFC \uAC1D\uCCB4\uB294 \uC815\uD655\uD55C JSON \uBB38\uBC95\uC744 \uB530\uB974\uC138\uC694

\uC751\uB2F5 \uD615\uC2DD:
[
  {
    "word": "\uB2E8\uC5B41",
    "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
    "meanings": ["\uB73B1", "\uB73B2"],
    "examples": [
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 1",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 2",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 3",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
      }
    ],
    "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42"]
  }
]

\uC911\uC694: JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uD14D\uC2A4\uD2B8\uB294 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  async callLLM(prompt) {
    try {
      const provider = this.settings.llmProvider;
      switch (provider) {
        case "openai":
          return await this.callOpenAI(prompt);
        case "anthropic":
          return await this.callAnthropic(prompt);
        case "google":
          return await this.callGoogle(prompt);
        default:
          return { success: false, error: "\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 LLM \uC81C\uACF5\uC5C5\uCCB4\uC785\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callOpenAI(prompt) {
    var _a, _b, _c;
    try {
      const response = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.getCurrentApiKey()}`
        },
        body: JSON.stringify({
          model: this.settings.llmModel,
          messages: [
            {
              role: "user",
              content: prompt
            }
          ],
          temperature: 0.3,
          max_tokens: 4e3
        })
      });
      if (!response.ok) {
        const errorData = await response.json();
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "OpenAI API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = await response.json();
      const content = (_c = (_b = data.choices[0]) == null ? void 0 : _b.message) == null ? void 0 : _c.content;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callAnthropic(prompt) {
    var _a, _b;
    if (typeof window === "undefined" || typeof window !== "undefined" && ((_a = window == null ? void 0 : window.process) == null ? void 0 : _a.type) === "renderer") {
      try {
        const response = await axios_default.post(
          "https://api.anthropic.com/v1/messages",
          {
            model: this.settings.llmModel,
            max_tokens: 3e4,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ]
          },
          {
            headers: {
              "Content-Type": "application/json",
              "x-api-key": this.getCurrentApiKey(),
              "anthropic-version": "2023-06-01"
            }
          }
        );
        const content = (_b = response.data.content[0]) == null ? void 0 : _b.text;
        if (!content) {
          return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
        }
        return { success: true, data: content };
      } catch (error) {
        return { success: false, error: error.message };
      }
    } else {
      return {
        success: false,
        error: "Anthropic API\uB294 \uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD\uC5D0\uC11C \uC9C1\uC811 \uD638\uCD9C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uB370\uC2A4\uD06C\uD1B1 \uC571(Obsidian)\uC5D0\uC11C\uB9CC \uB3D9\uC791\uD569\uB2C8\uB2E4."
      };
    }
  }
  async callGoogle(prompt) {
    var _a, _b, _c, _d;
    try {
      const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${this.settings.llmModel}:generateContent?key=${this.getCurrentApiKey()}`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          contents: [
            {
              parts: [
                {
                  text: prompt
                }
              ]
            }
          ],
          generationConfig: {
            temperature: 0.3,
            maxOutputTokens: 4e3
          }
        })
      });
      if (!response.ok) {
        const errorData = await response.json();
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "Google API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = await response.json();
      const content = (_d = (_c = (_b = data.candidates[0]) == null ? void 0 : _b.content) == null ? void 0 : _c.parts[0]) == null ? void 0 : _d.text;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  parseWordDetailResponse(response, originalWord) {
    try {
      const jsonMatch = response.match(/\{[\s\S]*\}/);
      if (!jsonMatch) {
        throw new Error("JSON \uD615\uC2DD\uC758 \uC751\uB2F5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      }
      const jsonData = JSON.parse(jsonMatch[0]);
      const validatedExamples = this.validateExamples(jsonData.examples);
      return {
        word: jsonData.word || originalWord,
        pronunciation: jsonData.pronunciation || "",
        meanings: jsonData.meanings || [],
        examples: validatedExamples,
        similarWords: jsonData.similarWords || []
      };
    } catch (error) {
      return {
        word: originalWord,
        pronunciation: "",
        meanings: ["\uC758\uBBF8\uB97C \uD30C\uC2F1\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
        examples: [],
        similarWords: []
      };
    }
  }
  // 예문 데이터 검증 및 정리
  validateExamples(examples) {
    if (!Array.isArray(examples)) {
      return [];
    }
    const validatedExamples = [];
    for (const example of examples) {
      if (example && typeof example === "object") {
        const english = example.english || example.english_text || example.text || "";
        const korean = example.korean || example.korean_text || example.translation || "";
        if (english.trim() && korean.trim()) {
          validatedExamples.push({
            english: english.trim(),
            korean: korean.trim()
          });
        }
      }
    }
    return validatedExamples;
  }
  parseMultipleWordDetailResponse(response, originalWords) {
    try {
      console.log("\uC6D0\uBCF8 \uC751\uB2F5:", response);
      let jsonMatch = response.match(/\[[\s\S]*\]/);
      if (!jsonMatch) {
        const objectMatches = response.match(/\{[^{}]*"word"[^{}]*\}/g);
        if (objectMatches && objectMatches.length > 0) {
          const jsonString = "[" + objectMatches.join(",") + "]";
          try {
            const jsonData2 = JSON.parse(jsonString);
            if (Array.isArray(jsonData2)) {
              return this.processJsonData(jsonData2, originalWords);
            }
          } catch (e) {
            console.log("\uAC1C\uBCC4 \uAC1D\uCCB4 \uD30C\uC2F1 \uC2E4\uD328:", e);
          }
        }
        const lastCompleteMatch = response.match(/\[[\s\S]*\}(?=\s*$)/);
        if (lastCompleteMatch) {
          jsonMatch = [lastCompleteMatch[0] + "]"];
        } else {
          throw new Error("JSON \uBC30\uC5F4\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        }
      }
      let jsonData;
      let parsedLength = 0;
      try {
        jsonData = JSON.parse(jsonMatch[0]);
      } catch (parseError) {
        console.log("JSON \uD30C\uC2F1 \uC2E4\uD328, \uC810\uC9C4\uC801 \uD30C\uC2F1 \uC2DC\uB3C4:", parseError);
        const results = this.parseIncrementalJson(response);
        if (results.length > 0) {
          return results;
        }
        const fixedJson = this.fixJsonString(jsonMatch[0]);
        try {
          jsonData = JSON.parse(fixedJson);
        } catch (secondError) {
          console.log("JSON \uBCF5\uAD6C \uC2E4\uD328:", secondError);
          throw new Error("JSON \uD30C\uC2F1 \uBC0F \uBCF5\uAD6C \uC2E4\uD328");
        }
      }
      if (!Array.isArray(jsonData)) {
        throw new Error("\uC751\uB2F5\uC774 \uBC30\uC5F4 \uD615\uC2DD\uC774 \uC544\uB2D9\uB2C8\uB2E4.");
      }
      return this.processJsonData(jsonData, originalWords);
    } catch (error) {
      console.error("\uC5EC\uB7EC \uB2E8\uC5B4 \uC751\uB2F5 \uD30C\uC2F1 \uC624\uB958:", error);
      console.error("\uC6D0\uBCF8 \uC751\uB2F5:", response);
      return originalWords.map((word) => ({
        word: word.toLowerCase(),
        pronunciation: "",
        meanings: [],
        examples: [],
        similarWords: []
      }));
    }
  }
  // 점진적 JSON 파싱 - 완전한 객체들만 파싱
  parseIncrementalJson(response) {
    const results = [];
    const objectRegex = /\{[^{}]*"word"[^{}]*"pronunciation"[^{}]*"meanings"[^{}]*"examples"[^{}]*"similarWords"[^{}]*\}/g;
    let match;
    while ((match = objectRegex.exec(response)) !== null) {
      try {
        const objectData = JSON.parse(match[0]);
        if (objectData && objectData.word) {
          const validatedExamples = this.validateExamples(objectData.examples);
          const wordData = {
            word: objectData.word.toLowerCase(),
            pronunciation: objectData.pronunciation || "",
            meanings: Array.isArray(objectData.meanings) ? objectData.meanings : [],
            examples: validatedExamples,
            similarWords: Array.isArray(objectData.similarWords) ? objectData.similarWords : []
          };
          results.push(wordData);
        }
      } catch (e) {
        console.log("\uAC1C\uBCC4 \uAC1D\uCCB4 \uD30C\uC2F1 \uC2E4\uD328:", e);
        continue;
      }
    }
    return results;
  }
  // WordDetailData를 WordData로 변환하는 메서드
  convertToWordData(wordDetail) {
    return {
      word: wordDetail.word,
      pronunciation: wordDetail.pronunciation,
      meanings: wordDetail.meanings,
      similarWords: wordDetail.similarWords,
      examples: wordDetail.examples
    };
  }
  // JSON 데이터 처리
  processJsonData(jsonData, originalWords) {
    const results = [];
    for (const item of jsonData) {
      if (item && typeof item === "object" && item.word) {
        const validatedExamples = this.validateExamples(item.examples);
        const wordData = {
          word: item.word.toLowerCase(),
          pronunciation: item.pronunciation || "",
          meanings: Array.isArray(item.meanings) ? item.meanings : [],
          examples: validatedExamples,
          similarWords: Array.isArray(item.similarWords) ? item.similarWords : []
        };
        results.push(wordData);
      }
    }
    return results;
  }
  // JSON 문자열 복구
  fixJsonString(jsonString) {
    let fixed = jsonString;
    const lastCompleteObject = fixed.match(/.*\}(?=,?\s*$)/);
    if (lastCompleteObject) {
      fixed = lastCompleteObject[0] + "]";
    }
    fixed = fixed.replace(/,\s*,/g, ",");
    fixed = fixed.replace(/,\s*\]/g, "]");
    fixed = fixed.replace(/,\s*\}/g, "}");
    fixed = fixed.replace(/(?<!\\)"/g, (match, offset) => {
      const before = fixed.substring(0, offset);
      const quoteCount = (before.match(/"/g) || []).length;
      return quoteCount % 2 === 0 ? match : '\\"';
    });
    return fixed;
  }
  // WordData 형식으로 변환
  convertToWordData(wordDetail) {
    return {
      word: wordDetail.word,
      pronunciation: wordDetail.pronunciation,
      meanings: wordDetail.meanings,
      similarWords: wordDetail.similarWords,
      examples: wordDetail.examples
    };
  }
};

// src/features/settings/ui/settings.ts
var DEFAULT_SETTINGS = {
  apiKey: "",
  defaultLanguage: "ko",
  showSimilarWords: true,
  showExamples: true,
  examplesCount: 3,
  openaiApiKey: "",
  anthropicApiKey: "",
  googleApiKey: "",
  llmApiKey: "",
  llmProvider: "openai",
  llmModel: "gemini-1.0-pro-latest",
  enableAdvancedFeatures: false,
  reviewModalHeight: 85,
  vocabularyFolderPath: "Vocabulary",
  ttsEnabled: true,
  ttsVoice: "en-US-AvaNeural",
  ttsPlaybackSpeed: 1,
  ttsAutoPlay: false
};
var VocabularySettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uD50C\uB7EC\uADF8\uC778 \uC124\uC815" });
    this.createBasicSettings(containerEl);
    this.createLLMSettings(containerEl);
    this.createTTSSettings(containerEl);
    this.createAdvancedSettings(containerEl);
  }
  createBasicSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uAE30\uBCF8 \uC124\uC815" });
    new import_obsidian.Setting(containerEl).setName("\uAE30\uBCF8 \uC5B8\uC5B4").setDesc("\uB2E8\uC5B4 \uB73B\uC744 \uD45C\uC2DC\uD560 \uC5B8\uC5B4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("ko", "\uD55C\uAD6D\uC5B4").addOption("en", "English").addOption("ja", "\u65E5\u672C\u8A9E").setValue(this.plugin.settings.defaultLanguage).onChange(async (value) => {
      this.plugin.settings.defaultLanguage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC720\uC0AC\uD55C \uB2E8\uC5B4 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showSimilarWords).onChange(async (value) => {
      this.plugin.settings.showSimilarWords = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC608\uBB38 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC608\uBB38\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showExamples).onChange(async (value) => {
      this.plugin.settings.showExamples = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC608\uBB38 \uAC1C\uC218").setDesc("\uD45C\uC2DC\uD560 \uC608\uBB38\uC758 \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => slider.setLimits(1, 10, 1).setValue(this.plugin.settings.examplesCount).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.examplesCount = value;
      await this.plugin.saveSettings();
    }));
  }
  createLLMSettings(containerEl) {
    containerEl.createEl("h3", { text: "LLM API \uC124\uC815" });
    new import_obsidian.Setting(containerEl).setName("\uACE0\uAE09 \uAE30\uB2A5 \uD65C\uC131\uD654").setDesc("LLM API\uB97C \uC0AC\uC6A9\uD55C \uACE0\uAE09 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableAdvancedFeatures).onChange(async (value) => {
      this.plugin.settings.enableAdvancedFeatures = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("LLM \uC81C\uACF5\uC5C5\uCCB4").setDesc("\uC0AC\uC6A9\uD560 LLM API \uC81C\uACF5\uC5C5\uCCB4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("openai", "OpenAI (GPT)").addOption("anthropic", "Anthropic (Claude)").addOption("google", "Google (Gemini)").setValue(this.plugin.settings.llmProvider).onChange(async (value) => {
      this.plugin.settings.llmProvider = value;
      if (value === "openai") {
        this.plugin.settings.llmModel = "gpt-4.1";
      } else if (value === "anthropic") {
        this.plugin.settings.llmModel = "claude-3-5-sonnet";
      } else if (value === "google") {
        this.plugin.settings.llmModel = "gemini-2.5-flash";
      }
      await this.plugin.saveSettings();
      this.display();
    }));
    this.createModelSelection(containerEl);
    this.createApiKeySettings(containerEl);
    new import_obsidian.Setting(containerEl).setName("API \uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setDesc("\uD604\uC7AC \uC120\uD0DD\uB41C \uC81C\uACF5\uC5C5\uCCB4\uC758 API \uD0A4\uAC00 \uC62C\uBC14\uB974\uAC8C \uC124\uC815\uB418\uC5C8\uB294\uC9C0 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4.").addButton((button) => button.setButtonText("\uD14C\uC2A4\uD2B8").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        const llmService = new LLMService(this.plugin.settings);
        const result = await llmService.testConnection();
        if (result.success) {
          new import_obsidian.Notice("\u2705 API \uC5F0\uACB0 \uC131\uACF5!");
        } else {
          new import_obsidian.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + result.error);
        }
      } catch (error) {
        new import_obsidian.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + error.message);
      } finally {
        button.setButtonText("\uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
  }
  createModelSelection(containerEl) {
    new import_obsidian.Setting(containerEl).setName("API \uBAA8\uB378").setDesc("\uC0AC\uC6A9\uD560 LLM \uBAA8\uB378\uC744 \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => {
      const provider = this.plugin.settings.llmProvider;
      if (provider === "openai") {
        dropdown.addOption("gpt-4.1", "GPT-4.1").addOption("gpt-4o", "GPT-4o").addOption("gpt-4o-mini", "GPT-4o Mini").addOption("gpt-4.1-long", "GPT-4.1 (Long Context)").addOption("gpt-4.5-preview", "GPT-4.5 Preview").addOption("gpt-4.5-preview-2", "GPT-4.5 Preview 2");
      } else if (provider === "anthropic") {
        dropdown.addOption("claude-3-5-sonnet", "Claude 3.5 Sonnet").addOption("claude-3-5-haiku", "Claude 3.5 Haiku").addOption("claude-3-5-opus", "Claude 3.5 Opus").addOption("claude-3-7-sonnet", "Claude 3.7 Sonnet").addOption("claude-3-7-haiku", "Claude 3.7 Haiku").addOption("claude-3-7-opus", "Claude 3.7 Opus").addOption("claude-3-5-flash", "Claude 3.5 Flash");
      } else if (provider === "google") {
        dropdown.addOption("gemini-1.5-pro-latest", "Gemini 1.5 Pro").addOption("gemini-2.5-flash", "Gemini 2.5 Flash").addOption("gemini-2.5-pro", "Gemini 2.5 Pro").addOption("gemini-1.5-flash-latest", "Gemini 1.5 Flash");
      }
      return dropdown.setValue(this.plugin.settings.llmModel).onChange(async (value) => {
        this.plugin.settings.llmModel = value;
        await this.plugin.saveSettings();
      });
    });
  }
  createApiKeySettings(containerEl) {
    new import_obsidian.Setting(containerEl).setName("OpenAI API \uD0A4").setDesc("OpenAI API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.openaiApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.openaiApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian.Setting(containerEl).setName("Anthropic API \uD0A4").setDesc("Anthropic API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-ant-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.anthropicApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-ant-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.anthropicApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian.Setting(containerEl).setName("Google API \uD0A4").setDesc("Google API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").addText((text) => {
      const currentKey = this.plugin.settings.googleApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian.Setting(containerEl).setName("\uBC94\uC6A9 LLM API \uD0A4").setDesc("\uAE30\uD0C0 LLM \uC11C\uBE44\uC2A4\uC6A9 API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").addText((text) => {
      const currentKey = this.plugin.settings.llmApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.llmApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
  }
  createAdvancedSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uACE0\uAE09 \uC124\uC815" });
    const folders = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian.TFolder);
    new import_obsidian.Setting(containerEl).setName("\uB2E8\uC5B4\uC7A5 \uC800\uC7A5 \uD3F4\uB354").setDesc("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C\uB4E4\uC774 \uC800\uC7A5\uB420 \uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: Vocabulary)").addDropdown((dropdown) => {
      folders.forEach((folder) => {
        dropdown.addOption(folder.path, folder.path);
      });
      dropdown.setValue(this.plugin.settings.vocabularyFolderPath);
      dropdown.onChange(async (value) => {
        this.plugin.settings.vocabularyFolderPath = value;
        await this.plugin.saveSettings();
        if (this.plugin.databaseManager) {
          this.plugin.databaseManager.updateVocabularyFolderPath(value);
        }
      });
      return dropdown;
    });
    new import_obsidian.Setting(containerEl).setName("\uBCF5\uC2B5 \uD654\uBA74 \uB192\uC774").setDesc("\uBCF5\uC2B5 \uBAA8\uB2EC\uC758 \uB192\uC774\uB97C \uD654\uBA74 \uB192\uC774\uC758 \uBC31\uBD84\uC728\uB85C \uC124\uC815\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: 85%)").addSlider((slider) => slider.setLimits(50, 95, 5).setValue(this.plugin.settings.reviewModalHeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.reviewModalHeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\uC77C\uC77C \uD559\uC2B5 \uBAA9\uD45C").setDesc("\uD558\uB8E8\uC5D0 \uD559\uC2B5\uD560 \uB2E8\uC5B4\uC758 \uBAA9\uD45C \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(5, 50, 5).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.dailyGoal) || 10).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ dailyGoal: value }));
      });
    });
    new import_obsidian.Setting(containerEl).setName("\uBCF5\uC2B5 \uAC04\uACA9 (\uC77C)").setDesc("\uB2E8\uC5B4\uB97C \uB2E4\uC2DC \uBCF5\uC2B5\uD560 \uAC04\uACA9\uC744 \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(1, 30, 1).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.reviewInterval) || 1).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ reviewInterval: value }));
      });
    });
  }
  createTTSSettings(containerEl) {
    containerEl.createEl("h3", { text: "TTS (\uC74C\uC131 \uC77D\uAE30) \uC124\uC815" });
    const ttsToggleSetting = new import_obsidian.Setting(containerEl).setName("TTS \uD65C\uC131\uD654").setDesc("\uB2E8\uC5B4\uC640 \uC608\uBB38\uC744 \uC74C\uC131\uC73C\uB85C \uC77D\uC5B4\uC8FC\uB294 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsEnabled).onChange(async (value) => {
      this.plugin.settings.ttsEnabled = value;
      await this.plugin.saveSettings();
      this.updateTTSSettingsVisibility();
    }));
    const voiceSetting = new import_obsidian.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("\uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").setClass("tts-voice-setting").addDropdown((dropdown) => {
      this.populateVoiceDropdown(dropdown);
      return dropdown.setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
        this.plugin.settings.ttsVoice = value;
        await this.plugin.saveSettings();
      });
    }).addButton((button) => button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30").setTooltip("\uC120\uD0DD\uD55C \uC74C\uC131\uC73C\uB85C \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uB97C \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
        new import_obsidian.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30");
        button.setDisabled(false);
      }
    }));
    const speedSetting = new import_obsidian.Setting(containerEl).setName("\uC7AC\uC0DD \uC18D\uB3C4").setDesc("\uC74C\uC131 \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uC870\uC808\uD558\uC138\uC694. (0.5 = \uB290\uB9BC, 1.0 = \uBCF4\uD1B5, 2.0 = \uBE60\uB984)").setClass("tts-speed-setting").addSlider((slider) => slider.setLimits(0.5, 2, 0.1).setValue(this.plugin.settings.ttsPlaybackSpeed).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.ttsPlaybackSpeed = value;
      await this.plugin.saveSettings();
    })).addButton((button) => button.setButtonText("\uC18D\uB3C4 \uD14C\uC2A4\uD2B8").setTooltip("\uD604\uC7AC \uC124\uC815\uB41C \uC18D\uB3C4\uB85C \uC0D8\uD50C \uC74C\uC131\uC744 \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uC18D\uB3C4 \uD14C\uC2A4\uD2B8 \uC624\uB958:", error);
        new import_obsidian.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uC18D\uB3C4 \uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
    const autoPlaySetting = new import_obsidian.Setting(containerEl).setName("\uC790\uB3D9 \uC7AC\uC0DD").setDesc("\uB2E8\uC5B4 \uCE74\uB4DC\uAC00 \uD45C\uC2DC\uB420 \uB54C \uC790\uB3D9\uC73C\uB85C \uB2E8\uC5B4\uB97C \uC77D\uC5B4\uC90D\uB2C8\uB2E4.").setClass("tts-autoplay-setting").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsAutoPlay).onChange(async (value) => {
      this.plugin.settings.ttsAutoPlay = value;
      await this.plugin.saveSettings();
    }));
    this.updateTTSSettingsVisibility();
  }
  populateVoiceDropdown(dropdown) {
    const defaultOptions = [
      { value: "en-US-AvaNeural", name: "Ava (\uBBF8\uAD6D \uC601\uC5B4)" },
      { value: "en-US-JennyNeural", name: "Jenny (\uBBF8\uAD6D \uC601\uC5B4)" },
      { value: "en-GB-SoniaNeural", name: "Sonia (\uC601\uAD6D \uC601\uC5B4)" },
      { value: "en-GB-RyanNeural", name: "Ryan (\uC601\uAD6D \uC601\uC5B4)" },
      { value: "en-AU-NatashaNeural", name: "Natasha (\uD638\uC8FC \uC601\uC5B4)" }
    ];
    defaultOptions.forEach((option) => {
      dropdown.addOption(option.value, option.name);
    });
    try {
      const voices = speechSynthesis.getVoices();
      const englishVoices = voices.filter(
        (voice) => voice.lang.startsWith("en-") && !voice.lang.includes("ko") && !defaultOptions.some((opt) => opt.value === voice.name)
      );
      if (englishVoices.length > 0) {
        dropdown.addOption("---", "--- \uC2DC\uC2A4\uD15C \uC74C\uC131 ---");
        englishVoices.forEach((voice) => {
          const displayName = `${voice.name} (${voice.lang})`;
          dropdown.addOption(voice.name, displayName);
        });
      }
    } catch (error) {
      console.warn("\uC74C\uC131 \uBAA9\uB85D\uC744 \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
    }
  }
  updateTTSSettingsVisibility() {
    const isEnabled = this.plugin.settings.ttsEnabled;
    const ttsSettings = this.containerEl.querySelectorAll(".tts-voice-setting, .tts-speed-setting, .tts-autoplay-setting");
    ttsSettings.forEach((setting) => {
      const element = setting;
      if (isEnabled) {
        element.style.display = "";
        element.style.opacity = "1";
      } else {
        element.style.opacity = "0.5";
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        buttons.forEach((btn) => btn.disabled = true);
        dropdowns.forEach((dd) => dd.disabled = true);
        sliders.forEach((slider) => slider.disabled = true);
        toggles.forEach((toggle) => toggle.disabled = true);
      }
    });
    if (isEnabled) {
      const ttsSettings2 = this.containerEl.querySelectorAll(".tts-voice-setting, .tts-speed-setting, .tts-autoplay-setting");
      ttsSettings2.forEach((setting) => {
        const element = setting;
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        buttons.forEach((btn) => btn.disabled = false);
        dropdowns.forEach((dd) => dd.disabled = false);
        sliders.forEach((slider) => slider.disabled = false);
        toggles.forEach((toggle) => toggle.disabled = false);
      });
    }
  }
  async playVoicePreview() {
    return new Promise(async (resolve, reject) => {
      try {
        if (!window.speechSynthesis) {
          reject(new Error("\uC774 \uBE0C\uB77C\uC6B0\uC800\uB294 \uC74C\uC131 \uD569\uC131\uC744 \uC9C0\uC6D0\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4."));
          return;
        }
        if (speechSynthesis.speaking) {
          speechSynthesis.cancel();
        }
        await this.ensureVoicesLoadedForPreview();
        const sampleTexts = [
          "Hello, this is a sample voice preview.",
          "Welcome to English vocabulary learning.",
          "This voice will help you learn pronunciation.",
          "Beautiful words make beautiful sentences."
        ];
        const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
        const utterance = new SpeechSynthesisUtterance(randomText);
        const selectedVoice = this.selectEnglishVoiceForPreview();
        if (selectedVoice) {
          utterance.voice = selectedVoice;
          utterance.lang = selectedVoice.lang;
          console.log(`Settings Preview Voice: ${selectedVoice.name} (${selectedVoice.lang})`);
        } else {
          utterance.lang = "en-US";
          console.log("Settings Preview: No specific voice found, using en-US language");
        }
        utterance.rate = this.plugin.settings.ttsPlaybackSpeed;
        utterance.volume = 1;
        utterance.onend = () => {
          resolve();
        };
        utterance.onerror = (event) => {
          reject(new Error(`\uC74C\uC131 \uC7AC\uC0DD \uC624\uB958: ${event.error}`));
        };
        speechSynthesis.speak(utterance);
        setTimeout(() => {
          if (speechSynthesis.speaking) {
            speechSynthesis.cancel();
            reject(new Error("\uC74C\uC131 \uC7AC\uC0DD \uD0C0\uC784\uC544\uC6C3"));
          }
        }, 1e4);
      } catch (error) {
        reject(error);
      }
    });
  }
  async ensureVoicesLoadedForPreview() {
    return new Promise((resolve) => {
      const voices = speechSynthesis.getVoices();
      if (voices.length > 0) {
        resolve();
        return;
      }
      const handleVoicesChanged = () => {
        speechSynthesis.removeEventListener("voiceschanged", handleVoicesChanged);
        resolve();
      };
      speechSynthesis.addEventListener("voiceschanged", handleVoicesChanged);
      setTimeout(() => {
        speechSynthesis.removeEventListener("voiceschanged", handleVoicesChanged);
        resolve();
      }, 2e3);
    });
  }
  selectEnglishVoiceForPreview() {
    const voices = speechSynthesis.getVoices();
    if (this.plugin.settings.ttsVoice) {
      const exactMatch = voices.find((voice) => voice.name === this.plugin.settings.ttsVoice);
      if (exactMatch) {
        return exactMatch;
      }
    }
    const englishVoices = voices.filter(
      (voice) => voice.lang.startsWith("en-") && !voice.lang.includes("ko")
    );
    if (englishVoices.length === 0) {
      console.warn("Settings Preview: No English voices found");
      return null;
    }
    const preferredVoices = [
      "Microsoft Ava - English (United States)",
      "Microsoft Jenny - English (United States)",
      "Microsoft Aria - English (United States)",
      "Microsoft Guy - English (United States)",
      "Microsoft Mark - English (United States)",
      "Google US English",
      "en-US-AvaNeural",
      "en-US-JennyNeural",
      "en-US-AriaNeural"
    ];
    for (const preferredName of preferredVoices) {
      const voice = englishVoices.find(
        (v) => v.name.includes(preferredName) || v.name === preferredName
      );
      if (voice) {
        return voice;
      }
    }
    const usEnglish = englishVoices.find((voice) => voice.lang === "en-US");
    if (usEnglish) {
      return usEnglish;
    }
    return englishVoices[0];
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var import_obsidian3 = require("obsidian");

// src/infrastructure/tts/TTSService.ts
var import_obsidian2 = require("obsidian");
var TTSService = class {
  constructor(settings) {
    this.audioElement = null;
    this.settings = settings;
  }
  async speakText(text) {
    if (!this.settings.enabled) {
      new import_obsidian2.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    try {
      if (!window.speechSynthesis) {
        new import_obsidian2.Notice("\uC774 \uBE0C\uB77C\uC6B0\uC800\uB294 \uC74C\uC131 \uD569\uC131\uC744 \uC9C0\uC6D0\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");
        return;
      }
      this.stopSpeaking();
      await this.ensureVoicesLoaded();
      const utterance = new SpeechSynthesisUtterance(text);
      const selectedVoice = this.selectEnglishVoice();
      if (selectedVoice) {
        utterance.voice = selectedVoice;
        utterance.lang = selectedVoice.lang;
        console.log(`TTS Voice selected: ${selectedVoice.name} (${selectedVoice.lang})`);
      } else {
        utterance.lang = "en-US";
        console.log("TTS: No specific voice found, using en-US language");
      }
      utterance.rate = this.settings.playbackSpeed;
      utterance.volume = 1;
      speechSynthesis.speak(utterance);
    } catch (error) {
      console.error("TTS \uC7AC\uC0DD \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
      new import_obsidian2.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
    }
  }
  async ensureVoicesLoaded() {
    return new Promise((resolve) => {
      const voices = speechSynthesis.getVoices();
      if (voices.length > 0) {
        resolve();
        return;
      }
      const handleVoicesChanged = () => {
        speechSynthesis.removeEventListener("voiceschanged", handleVoicesChanged);
        resolve();
      };
      speechSynthesis.addEventListener("voiceschanged", handleVoicesChanged);
      setTimeout(() => {
        speechSynthesis.removeEventListener("voiceschanged", handleVoicesChanged);
        resolve();
      }, 2e3);
    });
  }
  selectEnglishVoice() {
    const voices = speechSynthesis.getVoices();
    if (this.settings.voice) {
      const exactMatch = voices.find((voice) => voice.name === this.settings.voice);
      if (exactMatch) {
        return exactMatch;
      }
    }
    const englishVoices = voices.filter(
      (voice) => voice.lang.startsWith("en-") && !voice.lang.includes("ko")
    );
    if (englishVoices.length === 0) {
      console.warn("No English voices found");
      return null;
    }
    const preferredVoices = [
      "Microsoft Ava - English (United States)",
      "Microsoft Jenny - English (United States)",
      "Microsoft Aria - English (United States)",
      "Microsoft Guy - English (United States)",
      "Microsoft Mark - English (United States)",
      "Google US English",
      "en-US-AvaNeural",
      "en-US-JennyNeural",
      "en-US-AriaNeural"
    ];
    for (const preferredName of preferredVoices) {
      const voice = englishVoices.find(
        (v) => v.name.includes(preferredName) || v.name === preferredName
      );
      if (voice) {
        return voice;
      }
    }
    const usEnglish = englishVoices.find((voice) => voice.lang === "en-US");
    if (usEnglish) {
      return usEnglish;
    }
    return englishVoices[0];
  }
  async speakWord(word) {
    await this.speakText(word);
  }
  async speakExample(example) {
    await this.speakText(example);
  }
  stopSpeaking() {
    if (speechSynthesis.speaking) {
      speechSynthesis.cancel();
    }
    if (this.audioElement) {
      this.audioElement.pause();
      this.audioElement.currentTime = 0;
    }
  }
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  getAvailableVoices() {
    return speechSynthesis.getVoices().filter(
      (voice) => voice.lang.startsWith("en-") && !voice.lang.includes("ko")
    );
  }
  getCurrentSelectedVoice() {
    return this.selectEnglishVoice();
  }
  isEnabled() {
    return this.settings.enabled;
  }
};

// src/core/algorithms/SpacedRepetitionAlgorithm.ts
var DEFAULT_SRS_SETTINGS = {
  baseEase: 250,
  easyBonus: 1.3,
  hardPenalty: 0.5,
  minimumEase: 130,
  maximumInterval: 36525,
  initialInterval: 1,
  loadBalance: true,
  maxFuzzingDays: 3
};
var SpacedRepetitionAlgorithm = class {
  constructor(settings = DEFAULT_SRS_SETTINGS) {
    this.dueDateHistogram = /* @__PURE__ */ new Map();
    this.settings = settings;
  }
  /**
   * Calculate the next review schedule based on user response
   * Based on SM-2-OSR algorithm from obsidian-spaced-repetition
   */
  schedule(response, currentSchedule) {
    const now = /* @__PURE__ */ new Date();
    if (!currentSchedule) {
      currentSchedule = {
        dueDate: now.toISOString(),
        interval: 0,
        ease: this.settings.baseEase,
        reviewCount: 0,
        lapseCount: 0,
        delayedDays: 0
      };
    }
    const dueDate = new Date(currentSchedule.dueDate);
    const delayedDays = Math.max(0, Math.floor((now.getTime() - dueDate.getTime()) / (1e3 * 60 * 60 * 24)));
    let newInterval = currentSchedule.interval;
    let newEase = currentSchedule.ease;
    switch (response) {
      case "easy" /* Easy */:
        newEase = Math.min(500, newEase + 20);
        newInterval = Math.max(1, (currentSchedule.interval + delayedDays) * newEase * this.settings.easyBonus / 100);
        break;
      case "good" /* Good */:
        newInterval = Math.max(1, (currentSchedule.interval + delayedDays / 2) * newEase / 100);
        break;
      case "hard" /* Hard */:
        newEase = Math.max(this.settings.minimumEase, newEase - 20);
        newInterval = Math.max(1, (currentSchedule.interval + delayedDays / 4) * this.settings.hardPenalty);
        break;
    }
    if (currentSchedule.reviewCount === 0) {
      newInterval = this.settings.initialInterval;
    } else if (currentSchedule.reviewCount === 1 && response !== "hard" /* Hard */) {
      newInterval = 6;
    }
    newInterval = Math.min(newInterval, this.settings.maximumInterval);
    if (this.settings.loadBalance) {
      newInterval = this.applyLoadBalancing(newInterval);
    }
    const newDueDate = new Date(now.getTime() + newInterval * 24 * 60 * 60 * 1e3);
    this.updateDueDateHistogram(newDueDate.toDateString());
    return {
      interval: Math.round(newInterval),
      ease: Math.round(newEase),
      dueDate: newDueDate.toISOString()
    };
  }
  /**
   * Apply load balancing to distribute reviews evenly across days
   * Based on the histogram-based approach from obsidian-spaced-repetition
   */
  applyLoadBalancing(interval) {
    if (!this.settings.loadBalance) {
      return interval;
    }
    let fuzzingRange;
    if (interval <= 21) {
      fuzzingRange = 1;
    } else if (interval <= 180) {
      fuzzingRange = Math.max(1, interval * 0.05);
    } else {
      fuzzingRange = Math.max(1, interval * 0.025);
    }
    fuzzingRange = Math.min(fuzzingRange, this.settings.maxFuzzingDays);
    const now = /* @__PURE__ */ new Date();
    let bestInterval = interval;
    let minReviews = Number.MAX_SAFE_INTEGER;
    for (let offset = -fuzzingRange; offset <= fuzzingRange; offset++) {
      const testInterval = interval + offset;
      if (testInterval < 1)
        continue;
      const testDate = new Date(now.getTime() + testInterval * 24 * 60 * 60 * 1e3);
      const dateString = testDate.toDateString();
      const reviewCount = this.dueDateHistogram.get(dateString) || 0;
      if (reviewCount < minReviews) {
        minReviews = reviewCount;
        bestInterval = testInterval;
      }
    }
    return bestInterval;
  }
  /**
   * Update the due date histogram for load balancing
   */
  updateDueDateHistogram(dateString) {
    const current = this.dueDateHistogram.get(dateString) || 0;
    this.dueDateHistogram.set(dateString, current + 1);
  }
  /**
   * Get cards that are due for review
   */
  static getCardsForReview(cards) {
    const now = /* @__PURE__ */ new Date();
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= now;
    });
  }
  /**
   * Calculate the number of cards due in the next N days
   */
  static getCardsDueInDays(cards, days) {
    const now = /* @__PURE__ */ new Date();
    const futureDate = new Date(now.getTime() + days * 24 * 60 * 60 * 1e3);
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= futureDate;
    }).length;
  }
  /**
   * Get learning statistics for a set of cards
   */
  static getStatistics(cards) {
    let newCards = 0;
    let learningCards = 0;
    let matureCards = 0;
    let totalEase = 0;
    let totalInterval = 0;
    let cardsWithSchedule = 0;
    cards.forEach((card) => {
      if (!card.scheduleInfo) {
        newCards++;
      } else {
        cardsWithSchedule++;
        totalEase += card.scheduleInfo.ease;
        totalInterval += card.scheduleInfo.interval;
        if (card.scheduleInfo.interval < 21) {
          learningCards++;
        } else {
          matureCards++;
        }
      }
    });
    return {
      total: cards.length,
      new: newCards,
      learning: learningCards,
      mature: matureCards,
      averageEase: cardsWithSchedule > 0 ? Math.round(totalEase / cardsWithSchedule) : 0,
      averageInterval: cardsWithSchedule > 0 ? Math.round(totalInterval / cardsWithSchedule) : 0
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  /**
   * Get current settings
   */
  getSettings() {
    return { ...this.settings };
  }
  /**
   * Clear the due date histogram (useful for testing or reset)
   */
  clearHistogram() {
    this.dueDateHistogram.clear();
  }
};

// src/core/services/SpacedRepetitionService.ts
var SpacedRepetitionService = class {
  constructor(settings = {}) {
    this.currentSession = null;
    const srsSettings = { ...DEFAULT_SRS_SETTINGS, ...settings };
    this.algorithm = new SpacedRepetitionAlgorithm(srsSettings);
  }
  /**
   * Get cards that are due for review today
   */
  getCardsForReview(allCards) {
    return SpacedRepetitionAlgorithm.getCardsForReview(allCards);
  }
  /**
   * Get new cards (never reviewed)
   */
  getNewCards(allCards) {
    return allCards.filter((card) => !card.scheduleInfo || card.reviewCount === 0);
  }
  /**
   * Get learning cards (reviewed but not mature)
   */
  getLearningCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.reviewCount > 0 && card.scheduleInfo.interval < 21
    );
  }
  /**
   * Get mature cards (interval >= 21 days)
   */
  getMatureCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.scheduleInfo.interval >= 21
    );
  }
  /**
   * Start a new review session
   */
  startReviewSession(dueCards, maxCards) {
    const cardsToReview = maxCards ? dueCards.slice(0, maxCards) : dueCards;
    this.currentSession = {
      sessionId: this.generateSessionId(),
      startTime: (/* @__PURE__ */ new Date()).toISOString(),
      cardsReviewed: 0,
      totalCards: cardsToReview.length,
      completedCards: [],
      currentCard: cardsToReview[0]
    };
    return this.currentSession;
  }
  /**
   * Process a review response and get the next card
   */
  processReview(card, response) {
    var _a, _b, _c, _d;
    if (!this.currentSession) {
      throw new Error("No active review session");
    }
    const reviewResult = this.algorithm.schedule(response, card.scheduleInfo);
    const updatedCard = {
      ...card,
      reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
      difficulty: response,
      lastReviewed: (/* @__PURE__ */ new Date()).toISOString(),
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.reviewCount) || 0) + 1,
        lapseCount: (((_c = card.scheduleInfo) == null ? void 0 : _c.lapseCount) || 0) + (response === "hard" /* Hard */ ? 1 : 0),
        delayedDays: ((_d = card.scheduleInfo) == null ? void 0 : _d.delayedDays) || 0
      }
    };
    this.currentSession.cardsReviewed++;
    this.currentSession.completedCards.push(updatedCard);
    const dueCards = this.getCardsForReview([card]);
    const nextCard = this.currentSession.cardsReviewed < this.currentSession.totalCards ? dueCards[this.currentSession.cardsReviewed] : void 0;
    this.currentSession.currentCard = nextCard;
    const sessionComplete = !nextCard || this.currentSession.cardsReviewed >= this.currentSession.totalCards;
    if (sessionComplete) {
      this.endReviewSession();
    }
    return {
      updatedCard,
      nextCard,
      sessionComplete
    };
  }
  /**
   * End the current review session
   */
  endReviewSession() {
    const session = this.currentSession;
    this.currentSession = null;
    return session;
  }
  /**
   * Get current session info
   */
  getCurrentSession() {
    return this.currentSession;
  }
  /**
   * Calculate study statistics
   */
  calculateStatistics(allCards, studyHistory) {
    const now = /* @__PURE__ */ new Date();
    const today = now.toDateString();
    const overallStats = SpacedRepetitionAlgorithm.getStatistics(allCards);
    const todayStats = {
      newCards: 0,
      // Would track from session data
      reviewedCards: 0,
      // Would track from session data
      totalTime: 0
      // Would track from session timing
    };
    const streakStats = {
      currentDays: 0,
      // Would calculate from study history
      longestDays: 0,
      // Would calculate from study history
      lastStudyDate: null
    };
    return {
      today: todayStats,
      streak: streakStats,
      overall: overallStats
    };
  }
  /**
   * Get cards due in the next N days
   */
  getCardsDueInDays(allCards, days) {
    return SpacedRepetitionAlgorithm.getCardsDueInDays(allCards, days);
  }
  /**
   * Reset a card's schedule (for testing or manual intervention)
   */
  resetCardSchedule(card) {
    return {
      ...card,
      reviewCount: 0,
      lastReviewed: null,
      scheduleInfo: void 0
    };
  }
  /**
   * Manually set card difficulty (for bulk operations)
   */
  setCardDifficulty(card, difficulty) {
    var _a, _b;
    const reviewResult = this.algorithm.schedule(difficulty, card.scheduleInfo);
    return {
      ...card,
      difficulty,
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
        lapseCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.lapseCount) || 0) + (difficulty === "hard" /* Hard */ ? 1 : 0),
        delayedDays: 0
      }
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(settings) {
    this.algorithm.updateSettings(settings);
  }
  /**
   * Get current algorithm settings
   */
  getSettings() {
    return this.algorithm.getSettings();
  }
  /**
   * Generate a unique session ID
   */
  generateSessionId() {
    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * Get recommended daily study load
   */
  getRecommendedDailyCards(allCards) {
    const dueCards = this.getCardsForReview(allCards);
    const newCards = this.getNewCards(allCards);
    const maxNewCardsPerDay = 20;
    const maxReviewCardsPerDay = 100;
    const recommendedNew = Math.min(newCards.length, maxNewCardsPerDay);
    const recommendedReview = Math.min(dueCards.length - recommendedNew, maxReviewCardsPerDay);
    return {
      newCards: recommendedNew,
      reviewCards: recommendedReview,
      total: recommendedNew + recommendedReview
    };
  }
  /**
   * Export cards for data analysis or backup
   */
  exportScheduleData(allCards) {
    return allCards.map((card) => ({
      word: card.word,
      reviewCount: card.reviewCount,
      difficulty: card.difficulty,
      lastReviewed: card.lastReviewed,
      scheduleInfo: card.scheduleInfo,
      addedDate: card.addedDate
    }));
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var VocabularyModal = class extends import_obsidian3.Modal {
  constructor(app, plugin) {
    super(app);
    this.currentCardIndex = 0;
    this.cards = [];
    this.showAnswer = false;
    this.keydownHandler = null;
    this.currentSession = null;
    this.plugin = plugin;
    this.ttsService = new TTSService({
      enabled: plugin.settings.ttsEnabled,
      voice: plugin.settings.ttsVoice,
      playbackSpeed: plugin.settings.ttsPlaybackSpeed,
      autoPlay: plugin.settings.ttsAutoPlay
    });
    this.spacedRepetitionService = new SpacedRepetitionService();
  }
  onOpen() {
    const allCards = this.plugin.databaseManager.getAllWords();
    this.cards = this.spacedRepetitionService.getCardsForReview(allCards);
    console.log("\uC804\uCCB4 \uCE74\uB4DC \uC218:", allCards.length);
    console.log("\uBCF5\uC2B5 \uB300\uC0C1 \uCE74\uB4DC \uC218:", this.cards.length);
    if (this.cards.length > 0) {
      console.log("\uCCAB \uBC88\uC9F8 \uBCF5\uC2B5 \uCE74\uB4DC:", this.cards[0].word);
    }
    if (this.cards.length === 0) {
      this.showNoCardsForReview(allCards.length);
      return;
    }
    this.currentSession = this.spacedRepetitionService.startReviewSession(this.cards);
    this.shuffleCards();
    this.currentCardIndex = 0;
    this.showAnswer = false;
    this.showCard();
    this.keydownHandler = (e) => {
      if (!this.showAnswer) {
        if (e.code === "Space" || e.key === " ") {
          e.preventDefault();
          this.showAnswer = true;
          this.showCard();
        }
      } else {
        if (e.key === "1") {
          this.handleReview("hard");
        } else if (e.key === "2") {
          this.handleReview("good");
        } else if (e.key === "3") {
          this.handleReview("easy");
        }
      }
    };
    window.addEventListener("keydown", this.keydownHandler);
  }
  shuffleCards() {
    for (let i = this.cards.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [this.cards[i], this.cards[j]] = [this.cards[j], this.cards[i]];
    }
  }
  showNoWordsMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noWordsEl = contentEl.createEl("div", { cls: "no-words-message" });
    noWordsEl.createEl("h2", { text: "\uD559\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4" });
    noWordsEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    const closeButton = noWordsEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showNoCardsForReview(totalCards) {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noReviewEl = contentEl.createEl("div", { cls: "no-review-message" });
    noReviewEl.createEl("h2", { text: "\u{1F389} \uC624\uB298\uC758 \uBCF5\uC2B5 \uC644\uB8CC!" });
    if (totalCards > 0) {
      const stats = this.spacedRepetitionService.calculateStatistics(this.plugin.databaseManager.getAllWords());
      noReviewEl.createEl("p", {
        text: `\uCD1D ${totalCards}\uAC1C\uC758 \uB2E8\uC5B4 \uC911 \uC624\uB298 \uBCF5\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`
      });
      const nextDueCards = this.spacedRepetitionService.getCardsDueInDays(
        this.plugin.databaseManager.getAllWords(),
        1
      );
      if (nextDueCards > 0) {
        noReviewEl.createEl("p", {
          text: `\uB0B4\uC77C \uBCF5\uC2B5 \uC608\uC815: ${nextDueCards}\uAC1C \uB2E8\uC5B4`
        });
      }
      const statsEl = noReviewEl.createEl("div", { cls: "study-stats" });
      statsEl.createEl("h3", { text: "\uD559\uC2B5 \uD604\uD669" });
      statsEl.createEl("p", { text: `\u2022 \uC0C8 \uB2E8\uC5B4: ${stats.overall.newCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uD559\uC2B5 \uC911: ${stats.overall.learningCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uC644\uB8CC: ${stats.overall.matureCards}\uAC1C` });
    } else {
      noReviewEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    }
    const closeButton = noReviewEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showCard() {
    if (this.currentCardIndex >= this.cards.length) {
      this.showCompletionMessage();
      return;
    }
    const currentCard = this.cards[this.currentCardIndex];
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const cardContainer = contentEl.createEl("div", { cls: "vocabulary-card" });
    const topInfoContainer = cardContainer.createEl("div", { cls: "card-top-info" });
    const currentBook = this.plugin.databaseManager.getCurrentBook();
    if (currentBook) {
      const bookInfoEl = topInfoContainer.createEl("div", { cls: "book-info-display" });
      bookInfoEl.createEl("span", {
        text: currentBook.name,
        cls: "current-book-name"
      });
    }
    const deleteButton = topInfoContainer.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const progressEl = cardContainer.createEl("div", { cls: "progress-indicator" });
    progressEl.textContent = `${this.currentCardIndex + 1} / ${this.cards.length}`;
    const wordContainer = cardContainer.createEl("div", { cls: "word-container" });
    const wordEl = wordContainer.createEl("h1", { cls: "card-word" });
    if (currentCard.pronunciation && currentCard.pronunciation.trim()) {
      wordEl.innerHTML = `${currentCard.word} <span class="pronunciation">[${currentCard.pronunciation}]</span>`;
    } else {
      wordEl.textContent = currentCard.word;
    }
    const wordPlayButton = wordContainer.createEl("button", {
      cls: "tts-play-button word-play-button",
      attr: { "aria-label": "\uB2E8\uC5B4 \uBC1C\uC74C \uB4E3\uAE30" }
    });
    wordPlayButton.innerHTML = "\u{1F50A}";
    wordPlayButton.addEventListener("click", () => {
      this.ttsService.speakWord(currentCard.word);
    });
    if (currentCard.similarWords && currentCard.similarWords.length > 0) {
      const similarSection = cardContainer.createEl("div", { cls: "similar-words-section" });
      similarSection.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
      const similarList = similarSection.createEl("ul", { cls: "similar-words-list" });
      currentCard.similarWords.forEach((word) => {
        similarList.createEl("li", { text: word });
      });
    }
    if (currentCard.examples && currentCard.examples.length > 0) {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      currentCard.examples.forEach((example, index) => {
        const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
        const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
        const englishExample = exampleTextContainer.createEl("p", { text: example.english });
        englishExample.addClass("english-example");
        const examplePlayButton = exampleTextContainer.createEl("button", {
          cls: "tts-play-button example-play-button",
          attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
        });
        examplePlayButton.innerHTML = "\u{1F50A}";
        examplePlayButton.addEventListener("click", () => {
          this.ttsService.speakExample(example.english);
        });
        if (this.showAnswer && example.korean && example.korean.trim()) {
          const koreanExample = exampleContainer.createEl("p", { text: example.korean });
          koreanExample.addClass("korean-example");
        }
      });
    } else {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
      const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
      const englishExample = exampleTextContainer.createEl("p", {
        text: `This is an example sentence with the word "${currentCard.word}".`
      });
      englishExample.addClass("english-example");
      const examplePlayButton = exampleTextContainer.createEl("button", {
        cls: "tts-play-button example-play-button",
        attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
      });
      examplePlayButton.innerHTML = "\u{1F50A}";
      examplePlayButton.addEventListener("click", () => {
        this.ttsService.speakExample(`This is an example sentence with the word "${currentCard.word}".`);
      });
      if (this.showAnswer) {
        const koreanExample = exampleContainer.createEl("p", {
          text: `"${currentCard.word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        });
        koreanExample.addClass("korean-example");
      }
    }
    if (!this.showAnswer) {
      const checkButton = cardContainer.createEl("button", { text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30" });
      checkButton.addClass("check-answer-button");
      checkButton.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCard();
      });
    } else {
      const answerSection = cardContainer.createEl("div", { cls: "answer-section" });
      answerSection.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerSection.createEl("ul", { cls: "meanings-list" });
      currentCard.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      this.createReviewButtons(cardContainer);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons-section" });
    const hardButton = reviewSection.createEl("button", { text: "\uC5B4\uB824\uC6C0" });
    hardButton.addClass("review-button", "hard-button");
    hardButton.addEventListener("click", () => this.handleReview("hard"));
    const goodButton = reviewSection.createEl("button", { text: "\uC88B\uC74C" });
    goodButton.addClass("review-button", "good-button");
    goodButton.addEventListener("click", () => this.handleReview("good"));
    const easyButton = reviewSection.createEl("button", { text: "\uC26C\uC6C0" });
    easyButton.addClass("review-button", "easy-button");
    easyButton.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    var _a, _b, _c;
    const currentCard = this.cards[this.currentCardIndex];
    if (!this.currentSession) {
      console.error("No active review session");
      return;
    }
    const reviewResponse = difficulty;
    try {
      const result = this.spacedRepetitionService.processReview(currentCard, reviewResponse);
      await this.plugin.databaseManager.updateWordWithSchedule(
        result.updatedCard.word,
        difficulty,
        result.updatedCard.scheduleInfo
      );
      console.log(`Card "${currentCard.word}" reviewed:`, {
        response: reviewResponse,
        newInterval: (_a = result.updatedCard.scheduleInfo) == null ? void 0 : _a.interval,
        newDueDate: (_b = result.updatedCard.scheduleInfo) == null ? void 0 : _b.dueDate,
        newEase: (_c = result.updatedCard.scheduleInfo) == null ? void 0 : _c.ease
      });
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    } catch (error) {
      console.error("Error processing spaced repetition review:", error);
      await this.plugin.databaseManager.updateWord(currentCard.word, difficulty);
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    }
  }
  async handleDeleteCard() {
    const currentCard = this.cards[this.currentCardIndex];
    const confirmModal = new ConfirmModal(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentCard.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentCard.word);
          this.cards.splice(this.currentCardIndex, 1);
          if (this.cards.length === 0) {
            this.showCompletionMessage();
            return;
          }
          if (this.currentCardIndex >= this.cards.length) {
            this.currentCardIndex = this.cards.length - 1;
          }
          this.showAnswer = false;
          this.showCard();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian3.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletionMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const completionEl = contentEl.createEl("div", { cls: "completion-message" });
    completionEl.createEl("h2", { text: "\uD559\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: `\uC624\uB298 ${this.cards.length}\uAC1C\uC758 \uB2E8\uC5B4 \uD559\uC2B5\uC744 \uC644\uB8CC\uD588\uC2B5\uB2C8\uB2E4.` });
    const restartButton = completionEl.createEl("button", { text: "\uB2E4\uC2DC \uD559\uC2B5\uD558\uAE30" });
    restartButton.addClass("restart-button");
    restartButton.addEventListener("click", () => {
      this.onOpen();
    });
    const closeButton = completionEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => {
      this.close();
    });
  }
  onClose() {
    if (this.keydownHandler) {
      window.removeEventListener("keydown", this.keydownHandler);
      this.keydownHandler = null;
    }
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal = class extends import_obsidian3.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var import_obsidian5 = require("obsidian");

// src/infrastructure/external/WordService.ts
var WordService = class {
  constructor() {
    this.apiBaseUrl = "https://api.dictionaryapi.dev/api/v2/entries/en";
  }
  async getWordData(word) {
    try {
      return this.getSampleWordData(word);
    } catch (error) {
      console.error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
      throw new Error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
  }
  getSampleWordData(word) {
    const sampleData = {
      "beautiful": {
        word: "beautiful",
        pronunciation: "/\u02C8bju\u02D0t\u026Af\u0259l/",
        meanings: ["\uC544\uB984\uB2E4\uC6B4", "\uC608\uC05C", "\uD6CC\uB96D\uD55C"],
        similarWords: ["pretty", "gorgeous", "stunning", "attractive"],
        examples: [
          {
            english: "She is a beautiful woman.",
            korean: "\uADF8\uB140\uB294 \uC544\uB984\uB2E4\uC6B4 \uC5EC\uC131\uC785\uB2C8\uB2E4."
          },
          {
            english: "The sunset was beautiful.",
            korean: "\uC77C\uBAB0\uC774 \uC544\uB984\uB2E4\uC6E0\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "What a beautiful day!",
            korean: "\uC815\uB9D0 \uC544\uB984\uB2E4\uC6B4 \uD558\uB8E8\uB124\uC694!"
          }
        ]
      },
      "happy": {
        word: "happy",
        pronunciation: "/\u02C8h\xE6pi/",
        meanings: ["\uD589\uBCF5\uD55C", "\uAE30\uC05C", "\uC990\uAC70\uC6B4"],
        similarWords: ["joyful", "cheerful", "glad", "pleased"],
        examples: [
          {
            english: "I am happy to see you.",
            korean: "\uB2F9\uC2E0\uC744 \uB9CC\uB098\uC11C \uAE30\uC069\uB2C8\uB2E4."
          },
          {
            english: "She has a happy family.",
            korean: "\uADF8\uB140\uB294 \uD589\uBCF5\uD55C \uAC00\uC871\uC744 \uAC00\uC9C0\uACE0 \uC788\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Happy birthday!",
            korean: "\uC0DD\uC77C \uCD95\uD558\uD569\uB2C8\uB2E4!"
          }
        ]
      },
      "learn": {
        word: "learn",
        pronunciation: "/l\u025C\u02D0rn/",
        meanings: ["\uBC30\uC6B0\uB2E4", "\uD559\uC2B5\uD558\uB2E4", "\uC775\uD788\uB2E4"],
        similarWords: ["study", "acquire", "grasp", "understand"],
        examples: [
          {
            english: "I want to learn English.",
            korean: "\uC800\uB294 \uC601\uC5B4\uB97C \uBC30\uC6B0\uACE0 \uC2F6\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Children learn quickly.",
            korean: "\uC544\uC774\uB4E4\uC740 \uBE68\uB9AC \uBC30\uC6C1\uB2C8\uB2E4."
          },
          {
            english: "You can learn from your mistakes.",
            korean: "\uC2E4\uC218\uB85C\uBD80\uD130 \uBC30\uC6B8 \uC218 \uC788\uC2B5\uB2C8\uB2E4."
          }
        ]
      }
    };
    if (sampleData[word.toLowerCase()]) {
      return sampleData[word.toLowerCase()];
    }
    return {
      word,
      pronunciation: "/pronunciation/",
      meanings: ["\uC758\uBBF8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
      similarWords: [],
      examples: [
        {
          english: `This is an example sentence with the word "${word}".`,
          korean: `"${word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        }
      ]
    };
  }
  // 실제 API 호출을 위한 메서드 (향후 구현)
  async fetchFromAPI(word) {
    const response = await fetch(`${this.apiBaseUrl}/${word}`);
    if (!response.ok) {
      throw new Error(`API \uC694\uCCAD \uC2E4\uD328: ${response.status}`);
    }
    return await response.json();
  }
};

// src/features/book-management/ui/AddBookModal.ts
var import_obsidian4 = require("obsidian");
var AddBookModal = class extends import_obsidian4.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-book-modal");
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uC0C8\uB85C\uC6B4 \uB2E8\uC5B4\uC7A5\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const formEl = contentEl.createEl("form", { cls: "book-form" });
    const nameSection = formEl.createEl("div", { cls: "form-section" });
    const nameLabel = nameSection.createEl("label", {
      text: "\uB2E8\uC5B4\uC7A5 \uC774\uB984 *",
      cls: "form-label"
    });
    const nameInput = nameSection.createEl("input", {
      type: "text",
      placeholder: "\uC608: TOEIC \uB2E8\uC5B4\uC7A5, \uC77C\uC0C1\uC0DD\uD65C \uB2E8\uC5B4\uC7A5",
      cls: "form-input"
    });
    nameInput.required = true;
    const descSection = formEl.createEl("div", { cls: "form-section" });
    const descLabel = descSection.createEl("label", {
      text: "\uC124\uBA85 (\uC120\uD0DD\uC0AC\uD56D)",
      cls: "form-label"
    });
    const descInput = descSection.createEl("textarea", {
      placeholder: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB300\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694.",
      cls: "form-textarea"
    });
    descInput.rows = 3;
    const buttonSection = formEl.createEl("div", { cls: "button-section" });
    const createButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uC0DD\uC131",
      cls: "create-button primary",
      type: "submit"
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button",
      type: "button"
    });
    cancelButton.addEventListener("click", () => this.close());
    formEl.addEventListener("submit", async (e) => {
      e.preventDefault();
      await this.createBook(nameInput.value.trim(), descInput.value.trim());
    });
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        formEl.dispatchEvent(new Event("submit"));
      }
    });
    nameInput.focus();
  }
  async createBook(name, description) {
    if (!name.trim()) {
      new import_obsidian4.Notice("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    try {
      const existingBooks = this.plugin.databaseManager.getAllBooks();
      const isDuplicate = existingBooks.some(
        (book) => book.name.toLowerCase() === name.toLowerCase()
      );
      if (isDuplicate) {
        new import_obsidian4.Notice("\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4.");
        return;
      }
      const newBook = await this.plugin.databaseManager.createBook(name, description);
      new import_obsidian4.Notice(`"${name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
      this.close();
      const event = new CustomEvent("bookCreated", { detail: newBook });
      document.dispatchEvent(event);
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131 \uC2E4\uD328:", error);
      new import_obsidian4.Notice("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var VocabularyManagerModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    var _a;
    super(app);
    this.currentView = "list";
    this.selectedWords = /* @__PURE__ */ new Set();
    this.selectedBookId = "";
    this.plugin = plugin;
    this.databaseManager = plugin.databaseManager;
    this.wordService = new WordService();
    this.llmService = plugin.llmService;
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
  }
  hasValidApiKey() {
    const provider = this.plugin.settings.llmProvider;
    switch (provider) {
      case "openai":
        return !!this.plugin.settings.openaiApiKey;
      case "anthropic":
        return !!this.plugin.settings.anthropicApiKey;
      case "google":
        return !!this.plugin.settings.googleApiKey;
      default:
        return false;
    }
  }
  async onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-manager-modal");
    contentEl.classList.add("wide-manager-modal");
    await this.databaseManager.loadAllBooks();
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
    this.createBookSelectorHeader();
    this.createNavigation();
    this.showCurrentView();
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  async handleBookCreated(event) {
    const newBook = event.detail;
    this.selectedBookId = newBook.id;
    await this.refreshBookSelector();
  }
  createBookSelectorHeader() {
    const headerEl = this.contentEl.createEl("div", { cls: "manager-header" });
    headerEl.style.display = "flex";
    headerEl.style.alignItems = "center";
    headerEl.style.gap = "18px";
    headerEl.style.marginBottom = "18px";
    const books = this.databaseManager.getAllBooks();
    const bookSelect = headerEl.createEl("select", { cls: "book-select-dropdown" });
    bookSelect.style.height = "38px";
    bookSelect.style.fontSize = "16px";
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      if (book.id === this.selectedBookId)
        option.selected = true;
      bookSelect.appendChild(option);
    });
    bookSelect.addEventListener("change", async (e) => {
      this.selectedBookId = e.target.value;
      await this.databaseManager.setCurrentBook(this.selectedBookId);
      this.showCurrentView();
    });
    const addBookBtn = headerEl.createEl("button", { text: "\uC0C8 \uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "book-manage-button" });
    addBookBtn.addEventListener("click", () => {
      const addBookModal = new AddBookModal(this.app, this.plugin);
      addBookModal.onClose = () => {
        this.refreshBookSelector();
      };
      addBookModal.open();
    });
    const delBookBtn = headerEl.createEl("button", { text: "\uD604\uC7AC \uB2E8\uC5B4\uC7A5 \uC0AD\uC81C", cls: "book-delete-button" });
    const isDefault = this.selectedBookId === "default";
    if (isDefault) {
      delBookBtn.setAttr("disabled", "true");
      delBookBtn.addClass("disabled");
    }
    delBookBtn.addEventListener("click", async () => {
      if (isDefault)
        return;
      const currentBook = this.databaseManager.getBook(this.selectedBookId);
      if (!currentBook) {
        new import_obsidian5.Notice("\uB2E8\uC5B4\uC7A5 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      const wordsInBook = this.databaseManager.getWordsByBook(this.selectedBookId);
      const wordCount = wordsInBook.length;
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uD655\uC778",
        `\uC815\uB9D0\uB85C "${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\u2022 \uB2E8\uC5B4\uC7A5 \uC774\uB984: ${currentBook.name}
\u2022 \uD3EC\uD568\uB41C \uB2E8\uC5B4 \uC218: ${wordCount}\uAC1C
\u2022 \uC0DD\uC131\uC77C: ${new Date(currentBook.createdAt).toLocaleDateString("ko-KR")}

\u26A0\uFE0F \uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC73C\uBA70, \uB2E8\uC5B4\uC7A5\uACFC \uBAA8\uB4E0 \uB2E8\uC5B4\uAC00 \uC601\uAD6C\uC801\uC73C\uB85C \uC0AD\uC81C\uB429\uB2C8\uB2E4.`,
        async () => {
          try {
            await this.databaseManager.deleteBook(this.selectedBookId);
            this.selectedBookId = "default";
            await this.databaseManager.setCurrentBook("default");
            new import_obsidian5.Notice(`"${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`);
            this.onOpen();
          } catch (e) {
            new import_obsidian5.Notice("\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uC2E4\uD328: " + e.message);
          }
        }
      );
      confirmModal.open();
    });
  }
  createNavigation() {
    const navEl = this.contentEl.createEl("div", { cls: "manager-navigation" });
    const listBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uBAA9\uB85D", cls: "nav-button" });
    listBtn.addEventListener("click", () => {
      this.currentView = "list";
      this.showCurrentView();
    });
    const statsBtn = navEl.createEl("button", { text: "\uD1B5\uACC4", cls: "nav-button" });
    statsBtn.addEventListener("click", () => {
      this.currentView = "statistics";
      this.showCurrentView();
    });
    const addBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "nav-button" });
    addBtn.addEventListener("click", () => {
      this.currentView = "add";
      this.showCurrentView();
    });
    const startLearningButton = navEl.createEl("button", {
      text: "\uC804\uCCB4 \uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      cls: "nav-button"
    });
    startLearningButton.addEventListener("click", () => {
      this.close();
      new VocabularyModal(this.app, this.plugin).open();
    });
  }
  showCurrentView() {
    const contentEl = this.contentEl.querySelector(".manager-content") || this.contentEl.createEl("div", { cls: "manager-content" });
    contentEl.empty();
    switch (this.currentView) {
      case "list":
        this.showWordList(contentEl);
        break;
      case "statistics":
        this.showStatistics(contentEl);
        break;
      case "add":
        this.showAddWord(contentEl);
        break;
    }
  }
  showWordList(container2) {
    const words = this.databaseManager.getAllWords();
    if (words.length === 0) {
      container2.createEl("p", {
        text: "\uB2E8\uC5B4\uC7A5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4. \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD574\uBCF4\uC138\uC694!",
        cls: "empty-message"
      });
      return;
    }
    const searchEl = container2.createEl("div", { cls: "search-section" });
    const searchInput = searchEl.createEl("input", {
      type: "text",
      placeholder: "\uB2E8\uC5B4 \uAC80\uC0C9...",
      cls: "search-input"
    });
    const selectionControls = searchEl.createEl("div", { cls: "selection-controls" });
    const allSelected = this.selectedWords.size === words.length && words.length > 0;
    const selectAllBtn = selectionControls.createEl("button", {
      text: allSelected ? "\uC804\uCCB4 \uD574\uC81C" : "\uC804\uCCB4 \uC120\uD0DD",
      cls: "selection-button"
    });
    selectAllBtn.addEventListener("click", () => {
      if (this.selectedWords.size === words.length) {
        this.selectedWords.clear();
      } else {
        this.selectedWords.clear();
        words.forEach((word) => this.selectedWords.add(word.word));
      }
      this.showCurrentView();
    });
    const fetchSelectedButton = selectionControls.createEl("button", {
      text: "\uC120\uD0DD \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-selected-button"
    });
    fetchSelectedButton.addEventListener("click", () => {
      if (this.selectedWords.size === 0) {
        new import_obsidian5.Notice("\uC120\uD0DD\uB41C \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      this.showFetchSelectedMeaningsModal();
    });
    const wordListEl = container2.createEl("div", { cls: "word-list" });
    const renderWords = (filteredWords) => {
      wordListEl.empty();
      filteredWords.forEach((word) => {
        this.createWordItem(wordListEl, word);
      });
    };
    searchInput.addEventListener("input", (e) => {
      const query = e.target.value;
      const filteredWords = query ? this.databaseManager.searchWords(query) : words;
      renderWords(filteredWords);
    });
    renderWords(words);
  }
  createWordItem(container2, word) {
    const wordEl = container2.createEl("div", { cls: "word-item" });
    const checkbox = wordEl.createEl("input", {
      type: "checkbox",
      cls: "word-checkbox"
    });
    checkbox.checked = this.selectedWords.has(word.word);
    checkbox.addEventListener("change", (e) => {
      const isChecked = e.target.checked;
      if (isChecked) {
        this.selectedWords.add(word.word);
      } else {
        this.selectedWords.delete(word.word);
      }
    });
    const wordHeader = wordEl.createEl("div", { cls: "word-header" });
    const wordTitleEl = wordHeader.createEl("h3", { cls: "word-title" });
    if (word.pronunciation && word.pronunciation.trim()) {
      wordTitleEl.innerHTML = `${word.word} <span class="pronunciation">[${word.pronunciation}]</span>`;
    } else {
      wordTitleEl.textContent = word.word;
    }
    const difficultyBadge = wordHeader.createEl("span", {
      text: this.getDifficultyText(word.difficulty),
      cls: `difficulty-badge ${word.difficulty}`
    });
    const wordContent = wordEl.createEl("div", { cls: "word-content" });
    wordContent.createEl("p", {
      text: `\uB73B: ${word.meanings.join(", ")}`,
      cls: "word-meanings"
    });
    wordContent.createEl("p", {
      text: `\uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}\uD68C`,
      cls: "review-count"
    });
    if (word.lastReviewed) {
      const lastReviewDate = new Date(word.lastReviewed).toLocaleDateString("ko-KR");
      wordContent.createEl("p", {
        text: `\uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${lastReviewDate}`,
        cls: "last-reviewed"
      });
    }
    const wordActions = wordEl.createEl("div", { cls: "word-actions" });
    if (this.plugin.settings.enableAdvancedFeatures) {
      const fetchButton = wordActions.createEl("button", {
        text: "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
        cls: "action-button fetch-single-button"
      });
      fetchButton.addEventListener("click", () => {
        this.fetchSingleWordMeaning(word);
      });
    }
    const deleteBtn = wordActions.createEl("button", {
      text: "\uC0AD\uC81C",
      cls: "action-button delete-button"
    });
    deleteBtn.addEventListener("click", async () => {
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4 \uC0AD\uC81C",
        `"${word.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,
        async () => {
          await this.databaseManager.removeWord(word.word);
          this.showCurrentView();
        }
      );
      confirmModal.open();
    });
  }
  showStatistics(container2) {
    const stats = this.databaseManager.getStatistics();
    const statsGrid = container2.createEl("div", { cls: "stats-grid" });
    const basicStats = statsGrid.createEl("div", { cls: "stats-section" });
    basicStats.createEl("h3", { text: "\uAE30\uBCF8 \uD1B5\uACC4", cls: "stats-title" });
    this.createStatItem(basicStats, "\uCD1D \uB2E8\uC5B4 \uC218", stats.totalWords.toString());
    this.createStatItem(basicStats, "\uCD1D \uBCF5\uC2B5 \uD69F\uC218", stats.totalReviews.toString());
    this.createStatItem(basicStats, "\uC5F0\uC18D \uD559\uC2B5\uC77C", `${stats.streakDays}\uC77C`);
    this.createStatItem(basicStats, "\uD3C9\uADE0 \uB09C\uC774\uB3C4", stats.averageDifficulty.toFixed(1));
    const difficultyStats = statsGrid.createEl("div", { cls: "stats-section" });
    difficultyStats.createEl("h3", { text: "\uB09C\uC774\uB3C4\uBCC4 \uBD84\uD3EC", cls: "stats-title" });
    this.createStatItem(difficultyStats, "\uC26C\uC6C0", stats.wordsByDifficulty.easy.toString());
    this.createStatItem(difficultyStats, "\uC88B\uC74C", stats.wordsByDifficulty.good.toString());
    this.createStatItem(difficultyStats, "\uC5B4\uB824\uC6C0", stats.wordsByDifficulty.hard.toString());
    const activityStats = statsGrid.createEl("div", { cls: "stats-section" });
    activityStats.createEl("h3", { text: "\uCD5C\uADFC 7\uC77C \uD65C\uB3D9", cls: "stats-title" });
    stats.recentActivity.forEach((activity) => {
      const date = new Date(activity.date).toLocaleDateString("ko-KR", {
        month: "short",
        day: "numeric"
      });
      this.createStatItem(
        activityStats,
        date,
        `\uD559\uC2B5: ${activity.wordsStudied}, \uBCF5\uC2B5: ${activity.reviewsCompleted}`
      );
    });
  }
  createStatItem(container2, label, value) {
    const statEl = container2.createEl("div", { cls: "stat-item" });
    statEl.createEl("span", { text: label, cls: "stat-label" });
    statEl.createEl("span", { text: value, cls: "stat-value" });
  }
  showAddWord(container2) {
    const addSection = container2.createEl("div", { cls: "add-word-section" });
    addSection.createEl("h3", { text: "\uC0C8 \uB2E8\uC5B4 \uCD94\uAC00", cls: "section-title" });
    const inputEl = addSection.createEl("div", { cls: "word-input-group" });
    const wordInput = inputEl.createEl("input", {
      type: "text",
      placeholder: "\uC601\uB2E8\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694 (\uC608: beautiful)",
      cls: "word-input"
    });
    const addButton = inputEl.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button"
    });
    const addWord = async () => {
      const word = wordInput.value.trim();
      if (!word) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",
          cls: "error-message"
        });
        return;
      }
      try {
        const wordData = await this.wordService.getWordData(word);
        const vocabularyCard = {
          ...wordData,
          reviewCount: 0,
          difficulty: "good",
          lastReviewed: null,
          addedDate: (/* @__PURE__ */ new Date()).toISOString(),
          bookId: this.selectedBookId
        };
        await this.databaseManager.addWord(vocabularyCard);
        wordInput.value = "";
        addSection.createEl("p", {
          text: `"${word}" \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`,
          cls: "success-message"
        });
        setTimeout(() => {
          const successMsg = addSection.querySelector(".success-message");
          if (successMsg)
            successMsg.remove();
        }, 3e3);
      } catch (error) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
          cls: "error-message"
        });
      }
    };
    addButton.addEventListener("click", addWord);
    wordInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        addWord();
      }
    });
  }
  getDifficultyText(difficulty) {
    switch (difficulty) {
      case "easy":
        return "\uC26C\uC6C0";
      case "good":
        return "\uC88B\uC74C";
      case "hard":
        return "\uC5B4\uB824\uC6C0";
      default:
        return "\uC88B\uC74C";
    }
  }
  startReview(words) {
    const reviewModal = new VocabularyReviewModal(this.app, this.plugin, words);
    reviewModal.open();
  }
  showFetchSelectedMeaningsModal() {
    const selectedWordList = Array.from(this.selectedWords);
    new FetchSelectedMeaningsModal(this.app, this.plugin, selectedWordList).open();
  }
  async fetchSingleWordMeaning(word) {
    if (!this.hasValidApiKey()) {
      new import_obsidian5.Notice("LLM API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      `"${word.word}" \uB2E8\uC5B4\uC758 \uB73B\uC744 \uC0C8\uB85C \uAC00\uC838\uC624\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? \uAE30\uC874 \uC815\uBCF4\uAC00\uC5B4\uC50C\uC6CC\uC9D1\uB2C8\uB2E4.`,
      async () => {
        try {
          new import_obsidian5.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911...`);
          const llmResponse = await this.plugin.llmService.getWordDetails(word.word);
          if (llmResponse.success) {
            const wordDetail = llmResponse.data;
            const wordData = this.plugin.llmService.convertToWordData(wordDetail);
            const updatedWord = {
              ...word,
              meanings: wordData.meanings,
              examples: wordData.examples,
              similarWords: wordData.similarWords
            };
            await this.plugin.databaseManager.updateWordData(word.word, updatedWord);
            new import_obsidian5.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
            this.showCurrentView();
          } else {
            new import_obsidian5.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328: ${llmResponse.error}`);
          }
        } catch (error) {
          console.error(`\uB2E8\uC5B4 "${word.word}" \uCC98\uB9AC \uC2E4\uD328:`, error);
          new import_obsidian5.Notice(`"${word.word}" \uB2E8\uC5B4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.`);
        }
      }
    );
    confirmModal.open();
  }
  async refreshBookSelector() {
    await this.databaseManager.loadAllBooks();
    const headerEl = this.contentEl.querySelector(".manager-header");
    if (headerEl) {
      const bookSelect = headerEl.querySelector(".book-select-dropdown");
      if (bookSelect) {
        const currentValue = bookSelect.value;
        const books = this.databaseManager.getAllBooks();
        bookSelect.innerHTML = "";
        books.forEach((book) => {
          const option = document.createElement("option");
          option.value = book.id;
          option.text = book.name;
          if (book.id === currentValue || book.id === this.selectedBookId) {
            option.selected = true;
            this.selectedBookId = book.id;
          }
          bookSelect.appendChild(option);
        });
      }
    }
    this.showCurrentView();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
};
var VocabularyReviewModal = class extends import_obsidian5.Modal {
  constructor(app, plugin, words) {
    super(app);
    this.currentIndex = 0;
    this.showAnswer = false;
    this.plugin = plugin;
    this.words = words;
  }
  onOpen() {
    if (this.words.length === 0) {
      this.close();
      return;
    }
    this.showCurrentWord();
  }
  showCurrentWord() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const currentWord = this.words[this.currentIndex];
    const progressEl = contentEl.createEl("div", { cls: "review-progress" });
    progressEl.createEl("span", {
      text: `${this.currentIndex + 1} / ${this.words.length}`,
      cls: "progress-text"
    });
    const cardEl = contentEl.createEl("div", { cls: "review-card" });
    const deleteButton = cardEl.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const wordEl = cardEl.createEl("h1", { cls: "review-word" });
    if (currentWord.pronunciation && currentWord.pronunciation.trim()) {
      wordEl.innerHTML = `${currentWord.word} <span class="pronunciation">[${currentWord.pronunciation}]</span>`;
    } else {
      wordEl.textContent = currentWord.word;
    }
    if (!this.showAnswer) {
      if (currentWord.similarWords.length > 0) {
        const similarEl = cardEl.createEl("div", { cls: "similar-words" });
        similarEl.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
        const similarList = similarEl.createEl("ul");
        currentWord.similarWords.forEach((word) => {
          similarList.createEl("li", { text: word });
        });
      }
      if (currentWord.examples.length > 0) {
        const examplesEl = cardEl.createEl("div", { cls: "examples" });
        examplesEl.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
        currentWord.examples.forEach((example) => {
          examplesEl.createEl("p", { text: example.english, cls: "example" });
        });
      }
      const checkBtn = cardEl.createEl("button", {
        text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30",
        cls: "check-answer-button"
      });
      checkBtn.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCurrentWord();
      });
    } else {
      const answerEl = cardEl.createEl("div", { cls: "answer-section" });
      answerEl.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerEl.createEl("ul");
      currentWord.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      if (currentWord.examples.length > 0) {
        answerEl.createEl("h3", { text: "\uC608\uBB38 \uBC88\uC5ED:" });
        currentWord.examples.forEach((example) => {
          answerEl.createEl("p", { text: example.korean, cls: "translation" });
        });
      }
      this.createReviewButtons(cardEl);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons" });
    const hardBtn = reviewSection.createEl("button", { text: "\uC5B4\uB824\uC6C0", cls: "review-btn hard" });
    const goodBtn = reviewSection.createEl("button", { text: "\uC88B\uC74C", cls: "review-btn good" });
    const easyBtn = reviewSection.createEl("button", { text: "\uC26C\uC6C0", cls: "review-btn easy" });
    hardBtn.addEventListener("click", () => this.handleReview("hard"));
    goodBtn.addEventListener("click", () => this.handleReview("good"));
    easyBtn.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentWord = this.words[this.currentIndex];
    await this.plugin.databaseManager.updateWord(currentWord.word, difficulty);
    this.currentIndex++;
    this.showAnswer = false;
    if (this.currentIndex >= this.words.length) {
      this.showCompletion();
    } else {
      this.showCurrentWord();
    }
  }
  async handleDeleteCard() {
    const currentWord = this.words[this.currentIndex];
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentWord.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentWord.word);
          this.words.splice(this.currentIndex, 1);
          if (this.words.length === 0) {
            this.showCompletion();
            return;
          }
          if (this.currentIndex >= this.words.length) {
            this.currentIndex = this.words.length - 1;
          }
          this.showAnswer = false;
          this.showCurrentWord();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian5.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletion() {
    const { contentEl } = this;
    contentEl.empty();
    const completionEl = contentEl.createEl("div", { cls: "completion" });
    completionEl.createEl("h2", { text: "\uBCF5\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: "\uBAA8\uB4E0 \uB2E8\uC5B4\uB97C \uBCF5\uC2B5\uD588\uC2B5\uB2C8\uB2E4." });
    const closeBtn = completionEl.createEl("button", { text: "\uB2EB\uAE30", cls: "close-btn" });
    closeBtn.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FetchSelectedMeaningsModal = class extends import_obsidian5.Modal {
  constructor(app, plugin, selectedWords) {
    super(app);
    this.isProcessing = false;
    this.plugin = plugin;
    this.selectedWords = selectedWords;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("fetch-selected-meanings-modal");
    contentEl.createEl("h2", {
      text: `\uC120\uD0DD\uB41C ${this.selectedWords.length}\uAC1C \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30`,
      cls: "modal-title"
    });
    contentEl.createEl("p", {
      text: `\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4\uC758 \uC0C1\uC138 \uC815\uBCF4\uB97C LLM API\uB97C \uD1B5\uD574 \uAC00\uC838\uC635\uB2C8\uB2E4.`,
      cls: "modal-description"
    });
    const wordListEl = contentEl.createEl("div", { cls: "selected-words-list" });
    wordListEl.createEl("h3", { text: "\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4:" });
    const wordsContainer = wordListEl.createEl("div", { cls: "words-container" });
    this.selectedWords.forEach((word) => {
      wordsContainer.createEl("span", {
        text: word,
        cls: "selected-word-tag"
      });
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const fetchButton = buttonSection.createEl("button", {
      text: "\uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-button"
    });
    fetchButton.addEventListener("click", () => {
      this.fetchSelectedMeanings();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      this.close();
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section" });
    progressSection.style.display = "none";
    const progressText = progressSection.createEl("div", { cls: "progress-text" });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section" });
    resultSection.style.display = "none";
  }
  async fetchSelectedMeanings() {
    if (this.isProcessing)
      return;
    this.isProcessing = true;
    this.showProgress(this.selectedWords.length);
    try {
      const result = await this.plugin.llmService.getMultipleWordDetails(this.selectedWords);
      if (result.success && Array.isArray(result.data)) {
        const successWords = [];
        const failedWords = [];
        for (const wordData of result.data) {
          try {
            if (wordData.word && wordData.meanings && wordData.meanings.length > 0) {
              const existingWord = this.plugin.databaseManager.getWord(wordData.word);
              if (existingWord) {
                const updatedWord = {
                  ...existingWord,
                  pronunciation: wordData.pronunciation || "",
                  meanings: wordData.meanings,
                  examples: wordData.examples || [],
                  similarWords: wordData.similarWords || []
                };
                await this.plugin.databaseManager.updateWordData(wordData.word, updatedWord);
                successWords.push(wordData.word);
              }
            } else {
              failedWords.push(wordData.word);
            }
          } catch (error) {
            console.error(`\uB2E8\uC5B4 "${wordData.word}" \uC5C5\uB370\uC774\uD2B8 \uC2E4\uD328:`, error);
            failedWords.push(wordData.word);
          }
        }
        this.hideProgress();
        this.showResults({ success: successWords, failed: failedWords });
        if (successWords.length > 0) {
          new import_obsidian5.Notice(`${successWords.length}\uAC1C\uC758 \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD588\uC2B5\uB2C8\uB2E4!`);
        }
      } else {
        this.hideProgress();
        new import_obsidian5.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + (result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"));
      }
    } catch (error) {
      this.hideProgress();
      new import_obsidian5.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + error.message);
    } finally {
      this.isProcessing = false;
    }
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.style.display = "block";
    progressText.textContent = `\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911... (0/${totalWords})`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    if (progressSection) {
      progressSection.style.display = "none";
    }
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.style.display = "block";
    resultSection.empty();
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 10) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 10) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", { text: "\uB2EB\uAE30", cls: "close-button" });
    closeButton.addEventListener("click", () => this.close());
  }
  onClose() {
    this.isProcessing = false;
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal2 = class extends import_obsidian5.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/word-management/ui/AddWordsModal.ts
var import_obsidian6 = require("obsidian");
var AddWordsModal = class extends import_obsidian6.Modal {
  constructor(app, plugin) {
    super(app);
    this.isProcessing = false;
    this.plugin = plugin;
    this.wordService = new WordService();
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-words-modal");
    await this.plugin.databaseManager.loadAllBooks();
    const bookSelectSection = contentEl.createEl("div", { cls: "book-select-section" });
    const bookLabel = bookSelectSection.createEl("label", { text: "\uB2E8\uC5B4\uC7A5 \uC120\uD0DD", cls: "book-select-label" });
    const bookSelectContainer = bookSelectSection.createEl("div", { cls: "book-select-container" });
    this.bookSelect = bookSelectContainer.createEl("select", { cls: "book-select-dropdown" });
    const addBookButton = bookSelectContainer.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00",
      cls: "add-book-button"
    });
    addBookButton.addEventListener("click", () => this.openAddBookModal());
    await this.updateBookSelect();
    this.bookSelect.addEventListener("change", (e) => {
      const selectedBookId = e.target.value;
      this.plugin.databaseManager.setCurrentBook(selectedBookId);
    });
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uCD94\uAC00\uD560 \uC601\uB2E8\uC5B4\uB4E4\uC744 \uC785\uB825\uD558\uC138\uC694. \uAC01 \uB2E8\uC5B4\uB294 \uC0C8 \uC904\uB85C \uAD6C\uBD84\uB429\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const inputSection = contentEl.createEl("div", { cls: "input-section" });
    const textarea = inputSection.createEl("textarea", {
      placeholder: "beautiful\nhappy\nlearn\nstudy\nwork\n...",
      cls: "words-textarea"
    });
    textarea.setAttribute("rows", "10");
    const exampleBtn = inputSection.createEl("button", {
      text: "\uC608\uC2DC \uB2E8\uC5B4\uB4E4 \uBD88\uB7EC\uC624\uAE30",
      cls: "example-button"
    });
    exampleBtn.addEventListener("click", () => {
      textarea.value = "beautiful\nhappy\nlearn\nstudy\nwork\nimportant\nsuccess\nknowledge\nexperience\nfreedom";
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const addButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button primary"
    });
    addButton.addEventListener("click", () => this.addWords(textarea.value, this.bookSelect.value));
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
    const progressSection = contentEl.createEl("div", { cls: "progress-section" });
    progressSection.style.display = "none";
    const progressText = progressSection.createEl("p", {
      text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911...",
      cls: "progress-text"
    });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section" });
    resultSection.style.display = "none";
    textarea.addEventListener("keydown", (e) => {
      if (e.ctrlKey && e.key === "Enter") {
        this.addWords(textarea.value, this.bookSelect.value);
      }
    });
    textarea.focus();
  }
  async addWords(inputText, bookId) {
    if (this.isProcessing)
      return;
    const words = this.parseWords(inputText);
    if (words.length === 0) {
      new import_obsidian6.Notice("\uCD94\uAC00\uD560 \uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    this.isProcessing = true;
    this.showProgress(words.length);
    const results = {
      success: [],
      failed: [],
      alreadyExists: []
    };
    for (let i = 0; i < words.length; i++) {
      const word = words[i];
      this.updateProgress(i + 1, words.length, `\uCC98\uB9AC \uC911: ${word}`);
      try {
        const existingWord = this.plugin.databaseManager.getWord(word);
        if (existingWord) {
          results.alreadyExists.push(word);
          continue;
        }
        const wordData = await this.wordService.getWordData(word);
        const vocabularyCard = {
          ...wordData,
          reviewCount: 0,
          difficulty: "good",
          lastReviewed: null,
          addedDate: (/* @__PURE__ */ new Date()).toISOString(),
          bookId
        };
        await this.plugin.databaseManager.addWord(vocabularyCard);
        results.success.push(word);
      } catch (error) {
        console.error(`\uB2E8\uC5B4 "${word}" \uCD94\uAC00 \uC2E4\uD328:`, error);
        results.failed.push(word);
      }
    }
    this.hideProgress();
    this.showResults(results);
  }
  parseWords(inputText) {
    return inputText.split("\n").map((word) => word.trim()).filter((word) => word.length > 0).map((word) => word.toLowerCase()).filter((word, index, array) => array.indexOf(word) === index);
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.style.display = "block";
    progressText.textContent = `\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911... (0/${totalWords})`;
  }
  updateProgress(current, total, message) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    const progressFill = progressSection.querySelector(".progress-fill");
    const percentage = current / total * 100;
    progressText.textContent = `${message} (${current}/${total})`;
    progressFill.style.width = `${percentage}%`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    progressSection.style.display = "none";
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.style.display = "block";
    resultSection.empty();
    const totalProcessed = results.success.length + results.failed.length + results.alreadyExists.length;
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 5) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.alreadyExists.length > 0) {
      const existsEl = summaryEl.createEl("div", { cls: "result-item warning" });
      existsEl.createEl("span", {
        text: `\u26A0\uFE0F \uC774\uBBF8 \uC874\uC7AC: ${results.alreadyExists.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.alreadyExists.length <= 5) {
        existsEl.createEl("p", {
          text: results.alreadyExists.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 5) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", {
      text: "\uB2EB\uAE30",
      cls: "close-button"
    });
    closeButton.addEventListener("click", () => this.close());
    const addMoreButton = buttonSection.createEl("button", {
      text: "\uB354 \uCD94\uAC00\uD558\uAE30",
      cls: "add-more-button"
    });
    addMoreButton.addEventListener("click", () => {
      resultSection.style.display = "none";
      const textarea = this.contentEl.querySelector(".words-textarea");
      textarea.value = "";
      textarea.focus();
    });
    if (results.success.length > 0) {
      new import_obsidian6.Notice(`${results.success.length}\uAC1C\uC758 \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
    }
  }
  onClose() {
    this.isProcessing = false;
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  openAddBookModal() {
    new AddBookModal(this.app, this.plugin).open();
  }
  async handleBookCreated(event) {
    await this.updateBookSelect();
  }
  async updateBookSelect() {
    await this.plugin.databaseManager.loadAllBooks();
    const books = this.plugin.databaseManager.getAllBooks();
    this.bookSelect.innerHTML = "";
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      this.bookSelect.appendChild(option);
    });
  }
};

// src/shared/container/DIContainer.ts
var DIContainer = class {
  constructor() {
    this.services = /* @__PURE__ */ new Map();
    this.instances = /* @__PURE__ */ new Map();
  }
  register(name, implementation, options = {}) {
    var _a, _b;
    this.services.set(name, {
      implementation,
      singleton: (_a = options.singleton) != null ? _a : true,
      dependencies: (_b = options.dependencies) != null ? _b : []
    });
  }
  resolve(name) {
    const service = this.services.get(name);
    if (!service) {
      throw new Error(`Service '${name}' not registered`);
    }
    if (service.singleton && this.instances.has(name)) {
      return this.instances.get(name);
    }
    const dependencies = service.dependencies.map((dep) => this.resolve(dep));
    let instance;
    if (this.isConstructor(service.implementation)) {
      instance = new service.implementation(...dependencies);
    } else {
      instance = service.implementation(...dependencies);
    }
    if (service.singleton) {
      this.instances.set(name, instance);
    }
    return instance;
  }
  registerInstance(name, instance) {
    this.instances.set(name, instance);
    this.services.set(name, {
      implementation: () => instance,
      singleton: true,
      dependencies: []
    });
  }
  has(name) {
    return this.services.has(name);
  }
  clear() {
    this.services.clear();
    this.instances.clear();
  }
  isConstructor(implementation) {
    return implementation.prototype && implementation.prototype.constructor === implementation;
  }
};
var container = new DIContainer();

// src/core/entities/Vocabulary.ts
var VocabularyCard = class _VocabularyCard {
  constructor(word, pronunciation, meanings, similarWords, examples, reviewCount, difficulty, lastReviewed, addedDate, bookId) {
    this.word = word;
    this.pronunciation = pronunciation;
    this.meanings = meanings;
    this.similarWords = similarWords;
    this.examples = examples;
    this.reviewCount = reviewCount;
    this.difficulty = difficulty;
    this.lastReviewed = lastReviewed;
    this.addedDate = addedDate;
    this.bookId = bookId;
  }
  // 팩토리 메서드: WordData로부터 VocabularyCard 생성
  static fromWordData(wordData, bookId) {
    return new _VocabularyCard(
      wordData.word,
      wordData.pronunciation,
      wordData.meanings,
      wordData.similarWords,
      wordData.examples,
      0,
      // 초기 복습 횟수
      "good",
      // 초기 난이도
      null,
      // 초기 복습 날짜
      (/* @__PURE__ */ new Date()).toISOString(),
      // 추가 날짜
      bookId
    );
  }
  // 비즈니스 로직: 복습 수행
  review(newDifficulty) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount + 1,
      newDifficulty,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어 정보 업데이트
  updateWordData(wordData) {
    var _a, _b, _c, _d;
    return new _VocabularyCard(
      this.word,
      (_a = wordData.pronunciation) != null ? _a : this.pronunciation,
      (_b = wordData.meanings) != null ? _b : this.meanings,
      (_c = wordData.similarWords) != null ? _c : this.similarWords,
      (_d = wordData.examples) != null ? _d : this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어장 이동
  moveToBook(newBookId) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      newBookId
    );
  }
  // 비즈니스 로직: 복습이 필요한지 확인
  needsReview(reviewInterval = 1) {
    if (!this.lastReviewed)
      return true;
    const lastReviewDate = new Date(this.lastReviewed);
    const now = /* @__PURE__ */ new Date();
    const daysDiff = Math.floor((now.getTime() - lastReviewDate.getTime()) / (1e3 * 60 * 60 * 24));
    const difficultyMultiplier = {
      "hard": 0.5,
      "good": 1,
      "easy": 2
    };
    const adjustedInterval = reviewInterval * difficultyMultiplier[this.difficulty];
    return daysDiff >= adjustedInterval;
  }
  // 비즈니스 로직: 학습 진행도 계산 (0-100)
  getProgressPercentage() {
    const maxReviews = 10;
    const progress = Math.min(this.reviewCount / maxReviews, 1) * 100;
    const difficultyBonus = {
      "easy": 20,
      "good": 10,
      "hard": 0
    };
    return Math.min(progress + difficultyBonus[this.difficulty], 100);
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      word: this.word,
      pronunciation: this.pronunciation,
      meanings: this.meanings,
      similarWords: this.similarWords,
      examples: this.examples,
      reviewCount: this.reviewCount,
      difficulty: this.difficulty,
      lastReviewed: this.lastReviewed,
      addedDate: this.addedDate,
      bookId: this.bookId
    };
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.word || this.word.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uAC00 \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
    }
    if (this.meanings.length === 0) {
      errors.push("\uB2E8\uC5B4\uC758 \uB73B\uC774 \uD558\uB098 \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (!this.bookId || this.bookId.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 ID\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  static create(data) {
    var _a;
    return new _VocabularyCard(
      data.word,
      data.pronunciation || "",
      [data.meaning],
      // meanings array
      [],
      // similarWords
      ((_a = data.examples) == null ? void 0 : _a.map((ex) => ({ english: ex, korean: "" }))) || [],
      // examples with Example type
      0,
      // reviewCount
      "good",
      // difficulty
      null,
      // lastReviewed
      (/* @__PURE__ */ new Date()).toISOString(),
      // addedDate
      data.bookId || "default"
    );
  }
};

// src/core/use-cases/AddWordUseCase.ts
var AddWordUseCase = class {
  constructor(vocabularyRepository, bookRepository, wordService) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
    this.wordService = wordService;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingWord = await this.vocabularyRepository.findByWord(word);
      if (existingWord) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC785\uB2C8\uB2E4."
        };
      }
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = (currentBook == null ? void 0 : currentBook.id) || "default";
      }
      const book = await this.bookRepository.findById(bookId);
      if (!book) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const wordData = await this.wordService.getWordData(word);
      const vocabularyCard = VocabularyCard.create({
        word: wordData.word,
        meaning: wordData.meaning,
        pronunciation: wordData.pronunciation || "",
        examples: wordData.examples || [],
        bookId
      });
      const validationErrors = vocabularyCard.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.vocabularyRepository.add(vocabularyCard);
      const event = {
        type: "WORD_ADDED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: vocabularyCard.word,
          bookId: vocabularyCard.bookId
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: vocabularyCard
      };
    } catch (error) {
      console.error("AddWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordAdded", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/entities/Book.ts
var Book = class _Book {
  constructor(id, name, description, createdAt, updatedAt, wordCount, isDefault) {
    this.id = id;
    this.name = name;
    this.description = description;
    this.createdAt = createdAt;
    this.updatedAt = updatedAt;
    this.wordCount = wordCount;
    this.isDefault = isDefault;
  }
  // 팩토리 메서드: 새 단어장 생성
  static create(name, description = "", isDefault = false) {
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const id = isDefault ? "default" : _Book.generateId();
    return new _Book(
      id,
      name,
      description,
      now,
      now,
      0,
      isDefault
    );
  }
  // 팩토리 메서드: 기본 단어장 생성
  static createDefault() {
    return _Book.create("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5", "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.", true);
  }
  // 비즈니스 로직: 단어장 정보 업데이트
  updateInfo(name, description) {
    return new _Book(
      this.id,
      name != null ? name : this.name,
      description != null ? description : this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 증가
  incrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount + 1,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 감소
  decrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, this.wordCount - 1),
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 재설정
  updateWordCount(count) {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, count),
      this.isDefault
    );
  }
  // 비즈니스 로직: 삭제 가능 여부 확인
  canBeDeleted() {
    return !this.isDefault;
  }
  // 비즈니스 로직: 단어장이 비어있는지 확인
  isEmpty() {
    return this.wordCount === 0;
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.name || this.name.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (this.name.trim().length > 100) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC740 100\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.description.length > 500) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC124\uBA85\uC740 500\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.wordCount < 0) {
      errors.push("\uB2E8\uC5B4 \uC218\uB294 0 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      id: this.id,
      name: this.name,
      description: this.description,
      createdAt: this.createdAt,
      updatedAt: this.updatedAt,
      wordCount: this.wordCount,
      isDefault: this.isDefault
    };
  }
  // 비즈니스 로직: 생성일로부터 경과 일수 계산
  getDaysFromCreation() {
    const createdDate = new Date(this.createdAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - createdDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // 비즈니스 로직: 마지막 업데이트로부터 경과 일수 계산
  getDaysFromLastUpdate() {
    const updatedDate = new Date(this.updatedAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - updatedDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // ID 생성 유틸리티
  static generateId() {
    return `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/core/use-cases/CreateBookUseCase.ts
var CreateBookUseCase = class {
  constructor(bookRepository) {
    this.bookRepository = bookRepository;
  }
  async execute(request) {
    try {
      if (!request.name || request.name.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const name = request.name.trim();
      const existingBooks = await this.bookRepository.findAll();
      const duplicateBook = existingBooks.find(
        (book2) => book2.name.toLowerCase() === name.toLowerCase()
      );
      if (duplicateBook) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4."
        };
      }
      const book = Book.create(
        name,
        request.description || ""
      );
      const validationErrors = book.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.bookRepository.add(book);
      const event = {
        type: "BOOK_CREATED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          bookId: book.id,
          name: book.name
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        book
      };
    } catch (error) {
      console.error("CreateBookUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("bookCreated", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/use-cases/GetWordsForReviewUseCase.ts
var GetWordsForReviewUseCase = class {
  constructor(vocabularyRepository, bookRepository) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
  }
  async execute(request = {}) {
    try {
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = currentBook == null ? void 0 : currentBook.id;
      }
      const allWords = await this.vocabularyRepository.findByBookId(bookId);
      if (allWords.length === 0) {
        return {
          success: true,
          words: [],
          totalCount: 0
        };
      }
      const reviewInterval = request.reviewInterval || 1;
      const wordsNeedingReview = allWords.filter(
        (word) => word.needsReview(reviewInterval)
      );
      wordsNeedingReview.sort((a, b) => {
        if (a.lastReviewed && b.lastReviewed) {
          const aDate = new Date(a.lastReviewed).getTime();
          const bDate = new Date(b.lastReviewed).getTime();
          if (aDate !== bDate)
            return aDate - bDate;
        } else if (a.lastReviewed && !b.lastReviewed) {
          return -1;
        } else if (!a.lastReviewed && b.lastReviewed) {
          return 1;
        }
        const difficultyOrder = { "hard": 3, "good": 2, "easy": 1 };
        const difficultyDiff = difficultyOrder[b.difficulty] - difficultyOrder[a.difficulty];
        if (difficultyDiff !== 0)
          return difficultyDiff;
        return a.reviewCount - b.reviewCount;
      });
      const limit = request.limit || 20;
      const limitedWords = wordsNeedingReview.slice(0, limit);
      return {
        success: true,
        words: limitedWords,
        totalCount: wordsNeedingReview.length
      };
    } catch (error) {
      console.error("GetWordsForReviewUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
};

// src/core/use-cases/ReviewWordUseCase.ts
var ReviewWordUseCase = class {
  constructor(vocabularyRepository) {
    this.vocabularyRepository = vocabularyRepository;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      if (!["easy", "good", "hard"].includes(request.difficulty)) {
        return {
          success: false,
          error: "\uC62C\uBC14\uB978 \uB09C\uC774\uB3C4\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingCard = await this.vocabularyRepository.findByWord(word);
      if (!existingCard) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const previousDifficulty = existingCard.difficulty;
      const reviewedCard = existingCard.review(request.difficulty);
      await this.vocabularyRepository.update(reviewedCard);
      const event = {
        type: "WORD_REVIEWED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: reviewedCard.word,
          difficulty: request.difficulty,
          previousDifficulty
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: reviewedCard
      };
    } catch (error) {
      console.error("ReviewWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordReviewed", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/infrastructure/obsidian/repositories/VocabularyRepositoryAdapter.ts
var VocabularyRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(card) {
    await this.databaseManager.addWord(card);
  }
  async save(card) {
    await this.databaseManager.addWord(card);
  }
  async findByWord(word) {
    return this.databaseManager.getWord(word);
  }
  async findAll() {
    return this.databaseManager.getAllWords();
  }
  async findByBookId(bookId) {
    return this.databaseManager.getWordsByBook(bookId);
  }
  async update(word, card) {
    await this.databaseManager.updateWord(word, card.difficulty);
  }
  async delete(word) {
    await this.databaseManager.removeWord(word);
  }
  async search(options) {
    const allWords = await this.findAll();
    const filteredWords = allWords.filter(
      (word) => {
        var _a;
        return word.word.toLowerCase().includes(((_a = options.query) == null ? void 0 : _a.toLowerCase()) || "");
      }
    );
    return {
      words: filteredWords,
      total: filteredWords.length,
      hasMore: false
    };
  }
  async searchByText(query) {
    const result = await this.search({ query });
    return result.words;
  }
  async findCardsForReview(bookId) {
    return this.databaseManager.getWordsForReview(bookId);
  }
  async findCardsByDifficulty(difficulty, bookId) {
    const words = bookId ? await this.findByBookId(bookId) : await this.findAll();
    return words.filter((word) => word.difficulty === difficulty);
  }
  async count() {
    const words = await this.findAll();
    return words.length;
  }
  async countByBookId(bookId) {
    const words = await this.findByBookId(bookId);
    return words.length;
  }
  async countByDifficulty(difficulty) {
    const words = await this.findCardsByDifficulty(difficulty);
    return words.length;
  }
  async saveMany(cards) {
    for (const card of cards) {
      await this.add(card);
    }
  }
  async deleteMany(words) {
    for (const word of words) {
      await this.delete(word);
    }
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
};

// src/infrastructure/obsidian/repositories/BookRepositoryAdapter.ts
var BookRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async save(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async findById(id) {
    const bookData = this.databaseManager.getBook(id);
    if (!bookData)
      return null;
    return new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    );
  }
  async findAll(options) {
    const booksData = this.databaseManager.getAllBooks();
    let books = booksData.map((bookData) => new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    ));
    if (options) {
      if (options.includeEmpty === false) {
        books = books.filter((book) => !book.isEmpty());
      }
      if (options.sortBy) {
        books.sort((a, b) => {
          const aValue = a[options.sortBy];
          const bValue = b[options.sortBy];
          if (typeof aValue === "string" && typeof bValue === "string") {
            return options.sortOrder === "desc" ? bValue.localeCompare(aValue) : aValue.localeCompare(bValue);
          }
          if (typeof aValue === "number" && typeof bValue === "number") {
            return options.sortOrder === "desc" ? bValue - aValue : aValue - bValue;
          }
          return 0;
        });
      }
      if (options.offset || options.limit) {
        const start = options.offset || 0;
        const end = options.limit ? start + options.limit : void 0;
        books = books.slice(start, end);
      }
    }
    return books;
  }
  async update(id, book) {
    await this.databaseManager.updateBook(id, book.toPlainObject());
  }
  async delete(id) {
    await this.databaseManager.deleteBook(id);
  }
  async findDefault() {
    return this.findById("default");
  }
  async findByName(name) {
    const books = await this.findAll();
    return books.find((book) => book.name === name) || null;
  }
  async exists(id) {
    const book = await this.findById(id);
    return book !== null;
  }
  async count() {
    const books = await this.findAll();
    return books.length;
  }
  async getStatistics(bookId) {
    const book = await this.findById(bookId);
    if (!book)
      return null;
    const words = this.databaseManager.getWordsByBook(bookId);
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const totalReviews = words.reduce((sum, word) => sum + word.reviewCount, 0);
    const averageReviewCount = words.length > 0 ? totalReviews / words.length : 0;
    const lastActivityDate = words.length > 0 ? Math.max(...words.map((w) => new Date(w.lastReviewed || w.addedDate).getTime())) : null;
    const completionPercentage = words.length > 0 ? wordsByDifficulty.easy / words.length * 100 : 0;
    return {
      book,
      totalWords: words.length,
      wordsByDifficulty,
      averageReviewCount,
      lastActivityDate: lastActivityDate ? new Date(lastActivityDate).toISOString() : null,
      completionPercentage
    };
  }
  async getAllStatistics() {
    const books = await this.findAll();
    const statistics = [];
    for (const book of books) {
      const stat = await this.getStatistics(book.id);
      if (stat) {
        statistics.push(stat);
      }
    }
    return statistics;
  }
  async getCurrentBook() {
    const currentBook = this.databaseManager.getCurrentBook();
    if (!currentBook)
      return null;
    return new Book(
      currentBook.id,
      currentBook.name,
      currentBook.description,
      currentBook.createdAt,
      currentBook.updatedAt,
      currentBook.wordCount,
      currentBook.isDefault
    );
  }
  async setCurrentBook(bookId) {
    await this.databaseManager.setCurrentBook(bookId);
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  async validateBookName(name, excludeId) {
    const books = await this.findAll();
    return !books.some(
      (book) => book.name === name && (!excludeId || book.id !== excludeId)
    );
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
  onCurrentBookChanged(callback) {
  }
  offCurrentBookChanged(callback) {
  }
};

// src/infrastructure/storage/VocabularyDatabase.ts
var import_obsidian7 = require("obsidian");
var VocabularyDatabaseManager = class {
  constructor(app, saveCallback, folderPath) {
    this.books = /* @__PURE__ */ new Map();
    this.words = /* @__PURE__ */ new Map();
    this.settings = {
      dailyGoal: 10,
      reviewInterval: 1,
      currentBookId: "default"
    };
    this.statistics = {
      totalReviews: 0,
      streakDays: 0,
      lastStudyDate: null
    };
    this.vocabularyFolderPath = "Vocabulary";
    this.app = app;
    this.saveCallback = saveCallback;
    if (folderPath) {
      this.vocabularyFolderPath = folderPath;
    }
    this.initializeVocabularyFolder();
    this.initializeDefaultBook();
  }
  // 단어장 폴더 초기화
  async initializeVocabularyFolder() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
      if (folder instanceof import_obsidian7.TFolder) {
        return;
      }
      await this.app.vault.createFolder(this.vocabularyFolderPath);
    } catch (error) {
      if (error instanceof Error) {
        const errorMessage = error.message.toLowerCase();
        if (errorMessage.includes("already exists") || errorMessage.includes("folder already exists") || errorMessage.includes("already present")) {
          console.log("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354\uAC00 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4:", this.vocabularyFolderPath);
        } else {
          console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC2E4\uD328:", error);
        }
      } else {
        console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC911 \uC54C \uC218 \uC5C6\uB294 \uC624\uB958 \uBC1C\uC0DD:", error);
      }
    }
  }
  // 기본 book 초기화
  async initializeDefaultBook() {
    if (!this.books.has("default")) {
      const defaultBook = {
        id: "default",
        name: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5",
        description: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.",
        createdAt: (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: 0,
        isDefault: true
      };
      this.books.set("default", defaultBook);
      await this.saveBookToFile(defaultBook);
    }
  }
  // Book을 MD 파일로 저장
  async saveBookToFile(book) {
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian7.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const bookWords = Array.from(this.words.values()).filter((word) => word.bookId === book.id).sort((a, b) => a.word.localeCompare(b.word));
    const frontmatter = [
      "---",
      `bookId: ${book.id}`,
      `name: "${book.name}"`,
      `description: "${book.description}"`,
      `createdAt: ${book.createdAt}`,
      `updatedAt: ${book.updatedAt}`,
      `wordCount: ${bookWords.length}`,
      `isDefault: ${book.isDefault}`,
      "---",
      ""
    ].join("\n");
    let content = frontmatter;
    content += `# ${book.name}

`;
    content += `${book.description}

`;
    content += `## \uB2E8\uC5B4 \uBAA9\uB85D (${bookWords.length}\uAC1C)

`;
    for (const word of bookWords) {
      content += `### ${word.word}

`;
      if (word.pronunciation) {
        content += `**\uBC1C\uC74C:** ${word.pronunciation}

`;
      }
      content += `**\uB73B:**
`;
      for (const meaning of word.meanings) {
        content += `- ${meaning}
`;
      }
      content += "\n";
      if (word.similarWords.length > 0) {
        content += `**\uC720\uC0AC\uD55C \uB2E8\uC5B4:** ${word.similarWords.join(", ")}

`;
      }
      if (word.examples.length > 0) {
        content += `**\uC608\uBB38:**
`;
        for (const example of word.examples) {
          content += `- ${example.english}
`;
          content += `  - ${example.korean}
`;
        }
        content += "\n";
      }
      content += `**\uBCF5\uC2B5 \uC815\uBCF4:**
`;
      content += `- \uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}
`;
      content += `- \uB09C\uC774\uB3C4: ${word.difficulty}
`;
      content += `- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${word.lastReviewed || "\uC5C6\uC74C"}
`;
      content += `- \uCD94\uAC00\uC77C: ${word.addedDate}
`;
      if (word.scheduleInfo) {
        content += `
**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**
`;
        content += `- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ${word.scheduleInfo.dueDate}
`;
        content += `- \uBCF5\uC2B5 \uAC04\uACA9: ${word.scheduleInfo.interval}\uC77C
`;
        content += `- \uC6A9\uC774\uB3C4: ${word.scheduleInfo.ease}
`;
        content += `- \uC2E4\uD328 \uD69F\uC218: ${word.scheduleInfo.lapseCount}
`;
      }
      content += "\n---\n\n";
    }
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian7.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        try {
          await this.app.vault.create(filePath, content);
        } catch (error) {
          if (error instanceof Error && error.message.includes("already exists")) {
            const file = this.app.vault.getAbstractFileByPath(filePath);
            if (file instanceof import_obsidian7.TFile) {
              await this.app.vault.modify(file, content);
            } else {
              console.error("\uD30C\uC77C\uC774 \uC774\uBBF8 \uC874\uC7AC\uD558\uC9C0\uB9CC TFile\uC774 \uC544\uB2D8:", filePath);
            }
          } else {
            console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
          }
        }
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  // MD 파일에서 Book과 단어들 로드
  async loadBookFromFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const { frontmatter, body } = this.parseMDFile(content);
      if (!frontmatter.bookId)
        return;
      const book = {
        id: frontmatter.bookId,
        name: frontmatter.name || file.basename,
        description: frontmatter.description || "",
        createdAt: frontmatter.createdAt || (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: frontmatter.updatedAt || (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: frontmatter.wordCount || 0,
        isDefault: frontmatter.isDefault || false
      };
      this.books.set(book.id, book);
      const words = this.parseWordsFromMarkdown(body, book.id);
      for (const word of words) {
        this.words.set(word.word.toLowerCase(), word);
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:", error);
    }
  }
  // MD 파일 파싱 (frontmatter와 body 분리)
  parseMDFile(content) {
    const frontmatterRegex = /^---\n([\s\S]*?)\n---\n([\s\S]*)$/;
    const match = content.match(frontmatterRegex);
    if (!match) {
      return { frontmatter: {}, body: content };
    }
    const frontmatterText = match[1];
    const body = match[2];
    const frontmatter = {};
    const lines = frontmatterText.split("\n");
    for (const line of lines) {
      const colonIndex = line.indexOf(":");
      if (colonIndex > 0) {
        const key = line.substring(0, colonIndex).trim();
        let value = line.substring(colonIndex + 1).trim();
        if (value.startsWith('"') && value.endsWith('"')) {
          value = value.slice(1, -1);
        }
        if (value === "true")
          frontmatter[key] = true;
        else if (value === "false")
          frontmatter[key] = false;
        else if (!isNaN(Number(value)))
          frontmatter[key] = Number(value);
        else
          frontmatter[key] = value;
      }
    }
    return { frontmatter, body };
  }
  // 마크다운에서 단어들 파싱
  parseWordsFromMarkdown(markdown, bookId) {
    const words = [];
    const wordSections = markdown.split("---").filter((section) => section.trim());
    for (const section of wordSections) {
      const word = this.parseWordSection(section, bookId);
      if (word) {
        words.push(word);
      }
    }
    return words;
  }
  // 개별 단어 섹션 파싱
  parseWordSection(section, bookId) {
    const lines = section.split("\n").filter((line) => line.trim());
    if (lines.length === 0)
      return null;
    let word = "";
    let pronunciation = "";
    const meanings = [];
    const similarWords = [];
    const examples = [];
    let reviewCount = 0;
    let difficulty = "good";
    let lastReviewed = null;
    let addedDate = (/* @__PURE__ */ new Date()).toISOString();
    let scheduleInfo = void 0;
    let currentSection = "";
    let currentExample = {};
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const trimmedLine = line.trim();
      if (trimmedLine.startsWith("### ")) {
        word = trimmedLine.substring(4).trim();
        continue;
      }
      if (trimmedLine.startsWith("**\uBC1C\uC74C:**")) {
        pronunciation = trimmedLine.substring(7).trim();
        currentSection = "pronunciation";
      } else if (trimmedLine.startsWith("**\uB73B:**")) {
        currentSection = "meanings";
      } else if (trimmedLine.startsWith("**\uC720\uC0AC\uD55C \uB2E8\uC5B4:**")) {
        const similarWordsText = trimmedLine.substring(12).trim();
        similarWords.push(...similarWordsText.split(",").map((w) => w.trim()));
        currentSection = "similar";
      } else if (trimmedLine.startsWith("**\uC608\uBB38:**")) {
        currentSection = "examples";
      } else if (trimmedLine.startsWith("**\uBCF5\uC2B5 \uC815\uBCF4:**")) {
        currentSection = "review";
      } else if (trimmedLine.startsWith("**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**")) {
        currentSection = "spaced-repetition";
      } else if (currentSection === "meanings" && trimmedLine.startsWith("- ")) {
        meanings.push(trimmedLine.substring(2).trim());
      } else if (currentSection === "examples") {
        if (line.startsWith("- ") && !line.startsWith("  - ")) {
          if (currentExample.english && currentExample.korean) {
            examples.push({
              english: currentExample.english,
              korean: currentExample.korean
            });
          }
          currentExample = { english: line.substring(2).trim() };
        } else if (line.startsWith("  - ")) {
          currentExample.korean = line.substring(4).trim();
        }
      } else if (currentSection === "review") {
        if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uD69F\uC218: ")) {
          reviewCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        } else if (trimmedLine.startsWith("- \uB09C\uC774\uB3C4: ")) {
          const diff = trimmedLine.substring(7).trim();
          if (diff === "easy" || diff === "good" || diff === "hard") {
            difficulty = diff;
          }
        } else if (trimmedLine.startsWith("- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ")) {
          const lastRev = trimmedLine.substring(11).trim();
          lastReviewed = lastRev === "\uC5C6\uC74C" ? null : lastRev;
        } else if (trimmedLine.startsWith("- \uCD94\uAC00\uC77C: ")) {
          addedDate = trimmedLine.substring(7).trim();
        }
      } else if (currentSection === "spaced-repetition") {
        if (!scheduleInfo) {
          scheduleInfo = {};
        }
        if (trimmedLine.startsWith("- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ")) {
          scheduleInfo.dueDate = trimmedLine.substring(10).trim();
        } else if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uAC04\uACA9: ")) {
          const intervalText = trimmedLine.substring(8).trim();
          scheduleInfo.interval = parseInt(intervalText.replace("\uC77C", "")) || 1;
        } else if (trimmedLine.startsWith("- \uC6A9\uC774\uB3C4: ")) {
          scheduleInfo.ease = parseInt(trimmedLine.substring(7).trim()) || 250;
        } else if (trimmedLine.startsWith("- \uC2E4\uD328 \uD69F\uC218: ")) {
          scheduleInfo.lapseCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        }
      }
    }
    if (currentExample.english && currentExample.korean) {
      examples.push({
        english: currentExample.english,
        korean: currentExample.korean
      });
    }
    if (!word)
      return null;
    return {
      word: word.toLowerCase(),
      pronunciation,
      meanings,
      similarWords,
      examples,
      reviewCount,
      difficulty,
      lastReviewed,
      addedDate,
      bookId,
      scheduleInfo
    };
  }
  // 모든 단어장 파일 로드
  async loadAllBooks() {
    this.books.clear();
    this.words.clear();
    await this.initializeVocabularyFolder();
    await this.initializeDefaultBook();
    const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
    if (folder instanceof import_obsidian7.TFolder) {
      for (const file of folder.children) {
        if (file instanceof import_obsidian7.TFile && file.extension === "md") {
          await this.loadBookFromFile(file);
        }
      }
    }
    await this.loadSettings();
  }
  // 설정 파일 저장/로드
  async saveSettings() {
    const settingsPath = (0, import_obsidian7.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    const data = {
      settings: this.settings,
      statistics: this.statistics
    };
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(settingsPath);
      const content = JSON.stringify(data, null, 2);
      if (existingFile instanceof import_obsidian7.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        await this.app.vault.create(settingsPath, content);
      }
    } catch (error) {
      console.error("\uC124\uC815 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  async loadSettings() {
    const settingsPath = (0, import_obsidian7.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    try {
      const file = this.app.vault.getAbstractFileByPath(settingsPath);
      if (file instanceof import_obsidian7.TFile) {
        const content = await this.app.vault.read(file);
        const data = JSON.parse(content);
        if (data.settings) {
          this.settings = { ...this.settings, ...data.settings };
        }
        if (data.statistics) {
          this.statistics = { ...this.statistics, ...data.statistics };
        }
      }
    } catch (error) {
      console.warn("\uC124\uC815 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:", error);
    }
  }
  // Book 관리 메서드들
  async createBook(name, description = "") {
    const id = `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    const book = {
      id,
      name,
      description,
      createdAt: (/* @__PURE__ */ new Date()).toISOString(),
      updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
      wordCount: 0,
      isDefault: false
    };
    this.books.set(id, book);
    await this.saveBookToFile(book);
    this.saveCallback();
    return book;
  }
  async updateBook(bookId, updates) {
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedBook = {
      ...book,
      ...updates,
      updatedAt: (/* @__PURE__ */ new Date()).toISOString()
    };
    this.books.set(bookId, updatedBook);
    await this.saveBookToFile(updatedBook);
    this.saveCallback();
  }
  async deleteBook(bookId) {
    if (bookId === "default") {
      throw new Error("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC740 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const wordsToDelete = Array.from(this.words.values()).filter((word) => word.bookId === bookId).map((word) => word.word);
    for (const word of wordsToDelete) {
      this.words.delete(word.toLowerCase());
    }
    this.books.delete(bookId);
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian7.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.app.vault.delete(file);
    }
    if (this.settings.currentBookId === bookId) {
      this.settings.currentBookId = "default";
      await this.saveSettings();
    }
    this.saveCallback();
  }
  getAllBooks() {
    return Array.from(this.books.values()).sort((a, b) => {
      if (a.isDefault)
        return -1;
      if (b.isDefault)
        return 1;
      return a.name.localeCompare(b.name);
    });
  }
  getBook(bookId) {
    return this.books.get(bookId);
  }
  getCurrentBook() {
    return this.books.get(this.settings.currentBookId);
  }
  async setCurrentBook(bookId) {
    if (!this.books.has(bookId)) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    this.settings.currentBookId = bookId;
    await this.saveSettings();
    this.saveCallback();
  }
  // Book별 단어 수 업데이트
  updateBookWordCount(bookId) {
    const wordCount = Array.from(this.words.values()).filter((word) => word.bookId === bookId).length;
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount = wordCount;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
    }
  }
  // 단어 추가
  async addWord(wordData) {
    const word = wordData.word.toLowerCase();
    if (this.words.has(word)) {
      throw new Error(`\uB2E8\uC5B4 "${wordData.word}"\uB294 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4.`);
    }
    const newWord = {
      ...wordData,
      word: wordData.word.toLowerCase(),
      reviewCount: 0,
      difficulty: "good",
      lastReviewed: null,
      addedDate: (/* @__PURE__ */ new Date()).toISOString(),
      bookId: wordData.bookId || this.settings.currentBookId
    };
    this.words.set(word, newWord);
    const book = this.books.get(newWord.bookId);
    if (book) {
      book.wordCount++;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 삭제
  async removeWord(word) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const bookId = wordData.bookId;
    this.words.delete(wordKey);
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount--;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과)
  async updateWord(word, difficulty) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과 + 스페이스드 리피티션 정보)
  async updateWordWithSchedule(word, difficulty, scheduleInfo) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    if (scheduleInfo) {
      wordData.scheduleInfo = scheduleInfo;
    }
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 전체 데이터 업데이트 (LLM API로 가져온 정보로 덮어쓰기)
  async updateWordData(word, updatedWordData) {
    const wordKey = word.toLowerCase();
    const existingWord = this.words.get(wordKey);
    if (!existingWord) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedWord = {
      ...updatedWordData,
      word: wordKey,
      reviewCount: existingWord.reviewCount,
      difficulty: existingWord.difficulty,
      lastReviewed: existingWord.lastReviewed,
      addedDate: existingWord.addedDate,
      bookId: existingWord.bookId
    };
    this.words.set(wordKey, updatedWord);
    const book = this.books.get(updatedWord.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 조회
  getWord(word) {
    return this.words.get(word.toLowerCase());
  }
  // 현재 book의 모든 단어 조회
  getAllWords() {
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 특정 book의 모든 단어 조회
  getWordsByBook(bookId) {
    return Array.from(this.words.values()).filter((word) => word.bookId === bookId).sort((a, b) => a.word.localeCompare(b.word));
  }
  // 복습 대상 단어 조회 (현재 book)
  getWordsForReview() {
    const now = /* @__PURE__ */ new Date();
    const reviewIntervalMs = this.settings.reviewInterval * 24 * 60 * 60 * 1e3;
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return true;
      const lastReview = new Date(word.lastReviewed);
      const timeSinceLastReview = now.getTime() - lastReview.getTime();
      return timeSinceLastReview >= reviewIntervalMs;
    });
  }
  // 단어 검색 (현재 book)
  searchWords(query) {
    const lowerQuery = query.toLowerCase();
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter(
      (word) => word.word.includes(lowerQuery) || word.meanings.some((meaning) => meaning.toLowerCase().includes(lowerQuery))
    );
  }
  // 통계 조회 (현재 book)
  getStatistics() {
    const words = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId);
    const totalWords = words.length;
    const totalReviews = this.statistics.totalReviews;
    const averageDifficulty = words.length > 0 ? words.reduce((sum, word) => {
      const difficultyValue = word.difficulty === "easy" ? 1 : word.difficulty === "good" ? 2 : 3;
      return sum + difficultyValue;
    }, 0) / words.length : 0;
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const recentActivity = this.calculateRecentActivity();
    return {
      totalWords,
      totalReviews,
      streakDays: this.statistics.streakDays,
      averageDifficulty,
      wordsByDifficulty,
      recentActivity
    };
  }
  // 일일 목표 진행률 조회 (현재 book)
  getDailyGoalProgress() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const todayWords = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return false;
      return new Date(word.lastReviewed).toDateString() === today;
    }).length;
    const goal = this.settings.dailyGoal;
    const percentage = goal > 0 ? Math.min(todayWords / goal * 100, 100) : 0;
    return {
      current: todayWords,
      goal,
      percentage
    };
  }
  // 설정 업데이트
  async updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
    await this.saveSettings();
    this.saveCallback();
  }
  // 데이터 저장용 형식으로 변환 (호환성 유지)
  getDataForSave() {
    return {
      books: Array.from(this.books.values()),
      words: Array.from(this.words.values()),
      settings: this.settings,
      statistics: this.statistics
    };
  }
  // 저장된 데이터에서 로드 (호환성 유지)
  async loadFromData(data) {
    await this.loadAllBooks();
  }
  // 연속 학습일 업데이트
  updateStreak() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const lastStudyDate = this.statistics.lastStudyDate ? new Date(this.statistics.lastStudyDate).toDateString() : null;
    if (lastStudyDate === today) {
      return;
    }
    if (!lastStudyDate) {
      this.statistics.streakDays = 1;
    } else {
      const yesterday = /* @__PURE__ */ new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      const yesterdayStr = yesterday.toDateString();
      if (lastStudyDate === yesterdayStr) {
        this.statistics.streakDays++;
      } else {
        this.statistics.streakDays = 1;
      }
    }
    this.statistics.lastStudyDate = (/* @__PURE__ */ new Date()).toISOString();
  }
  // 최근 7일 활동 계산
  calculateRecentActivity() {
    const activity = [];
    const today = /* @__PURE__ */ new Date();
    for (let i = 6; i >= 0; i--) {
      const date = new Date(today);
      date.setDate(date.getDate() - i);
      const dateStr = date.toDateString();
      const wordsStudied = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        return new Date(word.lastReviewed).toDateString() === dateStr;
      }).length;
      const reviewsCompleted = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        const reviewDate = new Date(word.lastReviewed);
        return reviewDate.toDateString() === dateStr;
      }).length;
      activity.push({
        date: date.toISOString().split("T")[0],
        wordsStudied,
        reviewsCompleted
      });
    }
    return activity;
  }
  // 단어장 폴더 경로 업데이트
  updateVocabularyFolderPath(newPath) {
    this.vocabularyFolderPath = newPath;
    this.initializeVocabularyFolder();
  }
};

// src/infrastructure/llm/LLMServiceAdapter.ts
var LLMServiceAdapter = class {
  constructor(settings) {
    this.llmService = new LLMService(settings);
  }
  async getWordData(request) {
    try {
      const wordInfo = await this.llmService.getWordInfo(request.word);
      return {
        success: true,
        data: {
          word: wordInfo.word,
          meaning: wordInfo.meanings,
          pronunciation: wordInfo.pronunciation,
          examples: wordInfo.examples,
          similarWords: wordInfo.similarWords
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  async testConnection() {
    return await this.llmService.testConnection();
  }
  updateSettings(settings) {
    this.llmService = new LLMService(settings);
  }
};

// src/infrastructure/external/WordServiceAdapter.ts
var WordServiceAdapter = class {
  constructor(settings) {
    this.wordService = new WordService(settings);
  }
  async getWordData(request) {
    try {
      const wordData = await this.wordService.getWordData(request.word);
      return {
        success: true,
        data: {
          word: wordData.word,
          meaning: wordData.meaning,
          pronunciation: wordData.pronunciation,
          examples: wordData.examples || [],
          similarWords: wordData.similarWords || []
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  updateSettings(settings) {
    this.wordService = new WordService(settings);
  }
};

// src/core/ports/services/ITTSServiceAdapter.ts
var TTSServiceAdapter = class {
  constructor(settings) {
    this.ttsService = new TTSService({
      enabled: settings.ttsEnabled,
      voice: settings.ttsVoice,
      playbackSpeed: settings.ttsPlaybackSpeed,
      autoPlay: settings.ttsAutoPlay
    });
  }
  async speakText(text) {
    await this.ttsService.speakText(text);
  }
  async speakWord(word) {
    await this.ttsService.speakWord(word);
  }
  async speakExample(example) {
    await this.ttsService.speakExample(example);
  }
  stopSpeaking() {
    this.ttsService.stopSpeaking();
  }
  updateSettings(settings) {
    this.ttsService.updateSettings({
      enabled: settings.ttsEnabled,
      voice: settings.ttsVoice,
      playbackSpeed: settings.ttsPlaybackSpeed,
      autoPlay: settings.ttsAutoPlay
    });
  }
  isEnabled() {
    return this.ttsService.isEnabled();
  }
  getAvailableVoices() {
    return this.ttsService.getAvailableVoices();
  }
};

// src/shared/container/ServiceRegistry.ts
var ServiceRegistry = class {
  static registerServices(container2, app, settings) {
    container2.registerInstance("app", app);
    container2.registerInstance("settings", settings);
    container2.register("databaseManager", (app2) => {
      return new VocabularyDatabaseManager(
        app2,
        () => {
        },
        // saveCallback - DI에서는 빈 함수로 처리
        settings.vocabularyFolderPath
      );
    }, {
      dependencies: ["app"],
      singleton: true
    });
    container2.register("vocabularyRepository", VocabularyRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("bookRepository", BookRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("wordService", WordServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("llmService", LLMServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("ttsService", TTSServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("addWordUseCase", AddWordUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository", "wordService"]
    });
    container2.register("createBookUseCase", CreateBookUseCase, {
      dependencies: ["bookRepository"]
    });
    container2.register("getWordsForReviewUseCase", GetWordsForReviewUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository"]
    });
    container2.register("reviewWordUseCase", ReviewWordUseCase, {
      dependencies: ["vocabularyRepository"]
    });
  }
  static updateSettings(container2, settings) {
    container2.registerInstance("settings", settings);
    if (container2.has("ttsService")) {
      const ttsService = container2.resolve("ttsService");
      ttsService.updateSettings(settings);
    }
    if (container2.has("llmService")) {
      const llmService = container2.resolve("llmService");
      llmService.updateSettings(settings);
    }
    if (container2.has("wordService")) {
      const wordService = container2.resolve("wordService");
      wordService.updateSettings(settings);
    }
  }
};

// src/main.ts
var EnglishVocabularyPlugin = class extends import_obsidian8.Plugin {
  async onload() {
    console.log("\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uD50C\uB7EC\uADF8\uC778\uC774 \uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
    await this.loadSettings();
    this.container = container;
    ServiceRegistry.registerServices(this.container, this.app, this.settings);
    this.databaseManager = this.container.resolve("databaseManager");
    this.llmService = new LLMService(this.settings);
    try {
      await this.databaseManager.loadAllBooks();
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uB370\uC774\uD130 \uB85C\uB4DC \uC2E4\uD328:", error);
      await this.migrateFromLegacyData();
    }
    this.addSettingTab(new VocabularySettingTab(this.app, this));
    this.addCommand({
      id: "open-vocabulary-modal",
      name: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      callback: () => {
        new VocabularyModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "open-vocabulary-manager",
      name: "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30",
      callback: () => {
        new VocabularyManagerModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "add-words",
      name: "\uB2E8\uC5B4 \uCD94\uAC00",
      callback: () => {
        new AddWordsModal(this.app, this).open();
      }
    });
    this.addRibbonIcon("book", "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30", () => {
      new VocabularyManagerModal(this.app, this).open();
    });
  }
  onunload() {
    console.log("\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uD50C\uB7EC\uADF8\uC778\uC774 \uC5B8\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
  }
  async loadSettings() {
    const data = await this.loadData();
    if (data && typeof data === "object" && "settings" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data.settings);
    } else if (data && typeof data === "object" && "apiKey" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
    } else {
      this.settings = Object.assign({}, DEFAULT_SETTINGS);
    }
    await this.migrateApiKeys();
  }
  // API 키 암호화 마이그레이션
  async migrateApiKeys() {
    let needsSave = false;
    if (this.settings.llmApiKey && this.isPlainTextApiKey(this.settings.llmApiKey)) {
      console.log("llmApiKey\uB97C \uC554\uD638\uD654\uD569\uB2C8\uB2E4...");
      const plainKey = this.settings.llmApiKey;
      this.settings.llmApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.openaiApiKey && this.isPlainTextApiKey(this.settings.openaiApiKey)) {
      console.log("openaiApiKey\uB97C \uC554\uD638\uD654\uD569\uB2C8\uB2E4...");
      const plainKey = this.settings.openaiApiKey;
      this.settings.openaiApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.anthropicApiKey && this.isPlainTextApiKey(this.settings.anthropicApiKey)) {
      console.log("anthropicApiKey\uB97C \uC554\uD638\uD654\uD569\uB2C8\uB2E4...");
      const plainKey = this.settings.anthropicApiKey;
      this.settings.anthropicApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.googleApiKey && this.isPlainTextApiKey(this.settings.googleApiKey)) {
      console.log("googleApiKey\uB97C \uC554\uD638\uD654\uD569\uB2C8\uB2E4...");
      const plainKey = this.settings.googleApiKey;
      this.settings.googleApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (needsSave) {
      await this.saveSettings();
      console.log("API \uD0A4 \uC554\uD638\uD654 \uB9C8\uC774\uADF8\uB808\uC774\uC158\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
    }
  }
  // API 키가 평문인지 확인하는 헬퍼 함수
  isPlainTextApiKey(apiKey) {
    if (!apiKey)
      return false;
    try {
      const decrypted = decryptApiKey(apiKey);
      return decrypted === apiKey;
    } catch (error) {
      return apiKey.startsWith("sk-") || apiKey.startsWith("sk-ant-") || apiKey.startsWith("AIza") || apiKey.length > 20;
    }
  }
  async saveSettings() {
    await this.saveAllData();
    if (this.llmService) {
      this.llmService = new LLMService(this.settings);
    }
    if (this.container) {
      ServiceRegistry.updateSettings(this.container, this.settings);
    }
  }
  // 기존 data.json에서 MD 파일로 마이그레이션
  async migrateFromLegacyData() {
    try {
      const savedData = await this.loadData();
      if (savedData && savedData.database && Array.isArray(savedData.database.words)) {
        console.log("\uAE30\uC874 data.json\uC5D0\uC11C MD \uD30C\uC77C\uB85C \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2DC\uC791...");
        const legacyData = savedData.database;
        if (legacyData.words && legacyData.words.length > 0) {
          for (const word of legacyData.words) {
            try {
              await this.databaseManager.addWord({
                ...word,
                bookId: "default",
                pronunciation: word.pronunciation || ""
              });
            } catch (error) {
              console.warn(`\uB2E8\uC5B4 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328: ${word.word}`, error);
            }
          }
        }
        if (legacyData.settings) {
          await this.databaseManager.updateSettings(legacyData.settings);
        }
        console.log("\uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC644\uB8CC");
      }
    } catch (error) {
      console.error("\uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328:", error);
    }
  }
  // 모든 데이터 저장 (설정만 저장, 단어장 데이터는 MD 파일로 자동 저장됨)
  async saveAllData() {
    const data = {
      settings: this.settings
    };
    await this.saveData(data);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzLnRzIiwgInNyYy91dGlscy50cyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYmluZC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3V0aWxzLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvc0Vycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9udWxsLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy90b0Zvcm1EYXRhLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9BeGlvc1VSTFNlYXJjaFBhcmFtcy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0ludGVyY2VwdG9yTWFuYWdlci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2RlZmF1bHRzL3RyYW5zaXRpb25hbC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvY2xhc3Nlcy9VUkxTZWFyY2hQYXJhbXMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9wbGF0Zm9ybS9icm93c2VyL2NsYXNzZXMvRm9ybURhdGEuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9wbGF0Zm9ybS9icm93c2VyL2NsYXNzZXMvQmxvYi5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9wbGF0Zm9ybS9jb21tb24vdXRpbHMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9wbGF0Zm9ybS9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdG9VUkxFbmNvZGVkRm9ybS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvZm9ybURhdGFUb0pTT04uanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9kZWZhdWx0cy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvc0hlYWRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL3RyYW5zZm9ybURhdGEuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsZWRFcnJvci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9wYXJzZVByb3RvY29sLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9zcGVlZG9tZXRlci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdGhyb3R0bGUuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3Byb2dyZXNzRXZlbnRSZWR1Y2VyLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc1VSTFNhbWVPcmlnaW4uanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2Nvb2tpZXMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9idWlsZEZ1bGxQYXRoLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9tZXJnZUNvbmZpZy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcmVzb2x2ZUNvbmZpZy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL3hoci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29tcG9zZVNpZ25hbHMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3RyYWNrU3RyZWFtLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMvZmV0Y2guanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9hZGFwdGVycy9hZGFwdGVycy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZGlzcGF0Y2hSZXF1ZXN0LmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvZW52L2RhdGEuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3ZhbGlkYXRvci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvQXhpb3MuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBeGlvc0Vycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9IdHRwU3RhdHVzQ29kZS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2F4aW9zLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9pbmRleC5qcyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2UudHMiLCAic3JjL2ZlYXR1cmVzL3ZvY2FidWxhcnktbGVhcm5pbmcvdWkvVm9jYWJ1bGFyeU1vZGFsLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS90dHMvVFRTU2VydmljZS50cyIsICJzcmMvY29yZS9hbGdvcml0aG1zL1NwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0udHMiLCAic3JjL2NvcmUvc2VydmljZXMvU3BhY2VkUmVwZXRpdGlvblNlcnZpY2UudHMiLCAic3JjL2ZlYXR1cmVzL2Jvb2stbWFuYWdlbWVudC91aS9Wb2NhYnVsYXJ5TWFuYWdlck1vZGFsLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9leHRlcm5hbC9Xb3JkU2VydmljZS50cyIsICJzcmMvZmVhdHVyZXMvYm9vay1tYW5hZ2VtZW50L3VpL0FkZEJvb2tNb2RhbC50cyIsICJzcmMvZmVhdHVyZXMvd29yZC1tYW5hZ2VtZW50L3VpL0FkZFdvcmRzTW9kYWwudHMiLCAic3JjL3NoYXJlZC9jb250YWluZXIvRElDb250YWluZXIudHMiLCAic3JjL2NvcmUvZW50aXRpZXMvVm9jYWJ1bGFyeS50cyIsICJzcmMvY29yZS91c2UtY2FzZXMvQWRkV29yZFVzZUNhc2UudHMiLCAic3JjL2NvcmUvZW50aXRpZXMvQm9vay50cyIsICJzcmMvY29yZS91c2UtY2FzZXMvQ3JlYXRlQm9va1VzZUNhc2UudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL0dldFdvcmRzRm9yUmV2aWV3VXNlQ2FzZS50cyIsICJzcmMvY29yZS91c2UtY2FzZXMvUmV2aWV3V29yZFVzZUNhc2UudHMiLCAic3JjL2luZnJhc3RydWN0dXJlL29ic2lkaWFuL3JlcG9zaXRvcmllcy9Wb2NhYnVsYXJ5UmVwb3NpdG9yeUFkYXB0ZXIudHMiLCAic3JjL2luZnJhc3RydWN0dXJlL29ic2lkaWFuL3JlcG9zaXRvcmllcy9Cb29rUmVwb3NpdG9yeUFkYXB0ZXIudHMiLCAic3JjL2luZnJhc3RydWN0dXJlL3N0b3JhZ2UvVm9jYWJ1bGFyeURhdGFiYXNlLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZUFkYXB0ZXIudHMiLCAic3JjL2luZnJhc3RydWN0dXJlL2V4dGVybmFsL1dvcmRTZXJ2aWNlQWRhcHRlci50cyIsICJzcmMvY29yZS9wb3J0cy9zZXJ2aWNlcy9JVFRTU2VydmljZUFkYXB0ZXIudHMiLCAic3JjL3NoYXJlZC9jb250YWluZXIvU2VydmljZVJlZ2lzdHJ5LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUywgVm9jYWJ1bGFyeVNldHRpbmdUYWIgfSBmcm9tICcuL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeU1vZGFsIH0gZnJvbSAnLi9mZWF0dXJlcy92b2NhYnVsYXJ5LWxlYXJuaW5nL3VpL1ZvY2FidWxhcnlNb2RhbCc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlNYW5hZ2VyTW9kYWwgfSBmcm9tICcuL2ZlYXR1cmVzL2Jvb2stbWFuYWdlbWVudC91aS9Wb2NhYnVsYXJ5TWFuYWdlck1vZGFsJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB9IGZyb20gJy4vaW5mcmFzdHJ1Y3R1cmUvc3RvcmFnZS9Wb2NhYnVsYXJ5RGF0YWJhc2UnO1xyXG5pbXBvcnQgeyBBZGRXb3Jkc01vZGFsIH0gZnJvbSAnLi9mZWF0dXJlcy93b3JkLW1hbmFnZW1lbnQvdWkvQWRkV29yZHNNb2RhbCc7XHJcbmltcG9ydCB7IEFkZEJvb2tNb2RhbCB9IGZyb20gJy4vZmVhdHVyZXMvYm9vay1tYW5hZ2VtZW50L3VpL0FkZEJvb2tNb2RhbCc7XHJcbmltcG9ydCB7IExMTVNlcnZpY2UgfSBmcm9tICcuL2luZnJhc3RydWN0dXJlL2xsbS9MTE1TZXJ2aWNlJztcclxuaW1wb3J0IHsgZW5jcnlwdEFwaUtleSwgZGVjcnlwdEFwaUtleSB9IGZyb20gJy4vdXRpbHMnO1xyXG5cclxuLy8gREkgQ29udGFpbmVyXHJcbmltcG9ydCB7IERJQ29udGFpbmVyLCBjb250YWluZXIgfSBmcm9tICcuL3NoYXJlZC9jb250YWluZXIvRElDb250YWluZXInO1xyXG5pbXBvcnQgeyBTZXJ2aWNlUmVnaXN0cnkgfSBmcm9tICcuL3NoYXJlZC9jb250YWluZXIvU2VydmljZVJlZ2lzdHJ5JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgIHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3M7XHJcbiAgICBkYXRhYmFzZU1hbmFnZXI6IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXI7XHJcbiAgICBsbG1TZXJ2aWNlOiBMTE1TZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBjb250YWluZXI6IERJQ29udGFpbmVyO1xyXG5cclxuICAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjUgXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4XHVDNzc0IFx1Qjg1Q1x1QjREQ1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcbiAgICAgICAgLy8gREkgQ29udGFpbmVyIFx1Q0QwOFx1QUUzMFx1RDY1NFxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIFNlcnZpY2VSZWdpc3RyeS5yZWdpc3RlclNlcnZpY2VzKHRoaXMuY29udGFpbmVyLCB0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncyk7XHJcblxyXG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUI5RTRcdUIyQzhcdUM4MDAgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZU1hbmFnZXIgPSB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXI+KCdkYXRhYmFzZU1hbmFnZXInKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMTE0gXHVDMTFDXHVCRTQ0XHVDMkE0IFx1Q0QwOFx1QUUzMFx1RDY1NFxyXG4gICAgICAgIHRoaXMubGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE1EIFx1RDMwQ1x1Qzc3QyBcdUFFMzBcdUJDMTggXHVCMzcwXHVDNzc0XHVEMTMwIFx1Qjg1Q1x1QjREQ1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBkYXRhLmpzb25cdUM1RDBcdUMxMUMgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4IFx1QzJEQ1x1QjNDNFxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1pZ3JhdGVGcm9tTGVnYWN5RGF0YSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1RDBFRCBcdUNEOTRcdUFDMDBcclxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFZvY2FidWxhcnlTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG4gICAgICAgIC8vIFx1QkE4NVx1QjgzOVx1QzVCNCBcdUNEOTRcdUFDMDBcclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ29wZW4tdm9jYWJ1bGFyeS1tb2RhbCcsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNSBcdUMyRENcdUM3OTEnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmV3IFZvY2FidWxhcnlNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUJDRjRcdUFFMzAgXHVCQTg1XHVCODM5XHVDNUI0IFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnb3Blbi12b2NhYnVsYXJ5LW1hbmFnZXInLFxyXG4gICAgICAgICAgICBuYW1lOiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkNGNFx1QUUzMCcsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAgXHVCQTg1XHVCODM5XHVDNUI0IFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnYWRkLXdvcmRzJyxcclxuICAgICAgICAgICAgbmFtZTogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmV3IEFkZFdvcmRzTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUI5QUNcdUJDRjggXHVDNTQ0XHVDNzc0XHVDRjU4IFx1Q0Q5NFx1QUMwMCAoXHVDQzQ1IFx1QzU0NFx1Qzc3NFx1Q0Y1OClcclxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2Jvb2snLCAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkNGNFx1QUUzMCcsICgpID0+IHtcclxuICAgICAgICAgICAgbmV3IFZvY2FidWxhcnlNYW5hZ2VyTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbnVubG9hZCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjUgXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4XHVDNzc0IFx1QzVCOFx1Qjg1Q1x1QjREQ1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QjlDQyBcdUI4NUNcdUI0REMgKFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUIzNzBcdUM3NzRcdUQxMzBcdUM2NDAgXHVCRDg0XHVCOUFDKVxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XHJcbiAgICAgICAgaWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmICdzZXR0aW5ncycgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBcdUQxQjVcdUQ1NjlcdUI0MUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNUQwXHVDMTFDIFx1QzEyNFx1QzgxNSBcdUJEODBcdUJEODRcdUI5Q0MgXHVDRDk0XHVDRDlDXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhLnNldHRpbmdzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmICdhcGlLZXknIGluIGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1RDYxNVx1QzJERFx1Qzc1OCBcdUMxMjRcdUM4MTUgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNzc4IFx1QUNCRFx1QzZCMFxyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QUMwMCBcdUM1QzZcdUIyOTQgXHVBQ0JEXHVDNkIwIFx1QUUzMFx1QkNGOFx1QUMxMiBcdUMwQUNcdUM2QTlcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XHJcbiAgICAgICAgYXdhaXQgdGhpcy5taWdyYXRlQXBpS2V5cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFQSSBcdUQwQTQgXHVDNTU0XHVENjM4XHVENjU0IFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OFxyXG4gICAgcHJpdmF0ZSBhc3luYyBtaWdyYXRlQXBpS2V5cygpIHtcclxuICAgICAgICBsZXQgbmVlZHNTYXZlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIGxsbUFwaUtleVx1QUMwMCBcdUQzQzlcdUJCMzhcdUM3M0NcdUI4NUMgXHVDODAwXHVDN0E1XHVCNDE4XHVDNUI0IFx1Qzc4OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NThcdUFDRTAgXHVDNTU0XHVENjM4XHVENjU0XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubGxtQXBpS2V5ICYmIHRoaXMuaXNQbGFpblRleHRBcGlLZXkodGhpcy5zZXR0aW5ncy5sbG1BcGlLZXkpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsbG1BcGlLZXlcdUI5N0MgXHVDNTU0XHVENjM4XHVENjU0XHVENTY5XHVCMkM4XHVCMkU0Li4uJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYWluS2V5ID0gdGhpcy5zZXR0aW5ncy5sbG1BcGlLZXk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MubGxtQXBpS2V5ID0gZW5jcnlwdEFwaUtleShwbGFpbktleSk7XHJcbiAgICAgICAgICAgIG5lZWRzU2F2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUIyRTRcdUI5NzggQVBJIFx1RDBBNFx1QjRFNFx1QjNDNCBcdUQzQzlcdUJCMzhcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTU4XHVBQ0UwIFx1QzU1NFx1RDYzOFx1RDY1NCAoXHVBRTMwXHVDODc0XHVDNUQwIFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM3NDAgXHVBQ0JEXHVDNkIwKVxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLm9wZW5haUFwaUtleSAmJiB0aGlzLmlzUGxhaW5UZXh0QXBpS2V5KHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5KSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb3BlbmFpQXBpS2V5XHVCOTdDIFx1QzU1NFx1RDYzOFx1RDY1NFx1RDU2OVx1QjJDOFx1QjJFNC4uLicpO1xyXG4gICAgICAgICAgICBjb25zdCBwbGFpbktleSA9IHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5O1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLm9wZW5haUFwaUtleSA9IGVuY3J5cHRBcGlLZXkocGxhaW5LZXkpO1xyXG4gICAgICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYW50aHJvcGljQXBpS2V5ICYmIHRoaXMuaXNQbGFpblRleHRBcGlLZXkodGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhbnRocm9waWNBcGlLZXlcdUI5N0MgXHVDNTU0XHVENjM4XHVENjU0XHVENTY5XHVCMkM4XHVCMkU0Li4uJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYWluS2V5ID0gdGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuYW50aHJvcGljQXBpS2V5ID0gZW5jcnlwdEFwaUtleShwbGFpbktleSk7XHJcbiAgICAgICAgICAgIG5lZWRzU2F2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5nb29nbGVBcGlLZXkgJiYgdGhpcy5pc1BsYWluVGV4dEFwaUtleSh0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleSkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dvb2dsZUFwaUtleVx1Qjk3QyBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuLi4nKTtcclxuICAgICAgICAgICAgY29uc3QgcGxhaW5LZXkgPSB0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5nb29nbGVBcGlLZXkgPSBlbmNyeXB0QXBpS2V5KHBsYWluS2V5KTtcclxuICAgICAgICAgICAgbmVlZHNTYXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QkNDMFx1QUNCRFx1QzBBQ1x1RDU2RFx1Qzc3NCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVDODAwXHVDN0E1XHJcbiAgICAgICAgaWYgKG5lZWRzU2F2ZSkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XHVDNzc0IFx1QzY0NFx1QjhDQ1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQVBJIFx1RDBBNFx1QUMwMCBcdUQzQzlcdUJCMzhcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTU4XHVCMjk0IFx1RDVFQ1x1RDM3QyBcdUQ1NjhcdUMyMThcclxuICAgIHByaXZhdGUgaXNQbGFpblRleHRBcGlLZXkoYXBpS2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIWFwaUtleSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUQwQTRcdUI5N0MgXHVCQ0Y1XHVENjM4XHVENjU0XHVENTc0XHVCQ0Y0XHVBQ0UwIFx1QzZEMFx1QkNGOFx1QUNGQyBcdUIyRTRcdUI5NzRcdUJBNzQgXHVEM0M5XHVCQjM4XHVDNzNDXHVCODVDIFx1QUMwNFx1QzhGQ1xyXG4gICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWQgPSBkZWNyeXB0QXBpS2V5KGFwaUtleSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWNyeXB0ZWQgPT09IGFwaUtleTsgLy8gXHVCQ0Y1XHVENjM4XHVENjU0IFx1QUNCMFx1QUNGQ1x1QUMwMCBcdUM2RDBcdUJDRjhcdUFDRkMgXHVBQzE5XHVDNzNDXHVCQTc0IFx1RDNDOVx1QkIzOFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIFx1QkNGNVx1RDYzOFx1RDY1NCBcdUMyRTRcdUQzMjhcdUQ1NThcdUJBNzQgXHVEM0M5XHVCQjM4XHVDNzdDIFx1QUMwMFx1QjJBNVx1QzEzMVx1Qzc3NCBcdUM3ODhcdUM3NENcclxuICAgICAgICAgICAgLy8gXHVDNzdDXHVCQzE4XHVDODAxXHVDNzc4IEFQSSBcdUQwQTQgXHVEMzI4XHVEMTM0IFx1RDY1NVx1Qzc3OFxyXG4gICAgICAgICAgICByZXR1cm4gYXBpS2V5LnN0YXJ0c1dpdGgoJ3NrLScpIHx8IGFwaUtleS5zdGFydHNXaXRoKCdzay1hbnQtJykgfHwgYXBpS2V5LnN0YXJ0c1dpdGgoJ0FJemEnKSB8fCBhcGlLZXkubGVuZ3RoID4gMjA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbGxEYXRhKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTExNIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBpZiAodGhpcy5sbG1TZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBESSBDb250YWluZXJcdUM1RDAgXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICBTZXJ2aWNlUmVnaXN0cnkudXBkYXRlU2V0dGluZ3ModGhpcy5jb250YWluZXIsIHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUFFMzBcdUM4NzQgZGF0YS5qc29uXHVDNUQwXHVDMTFDIE1EIFx1RDMwQ1x1Qzc3Q1x1Qjg1QyBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNThcclxuICAgIHByaXZhdGUgYXN5bmMgbWlncmF0ZUZyb21MZWdhY3lEYXRhKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcclxuICAgICAgICAgICAgaWYgKHNhdmVkRGF0YSAmJiBzYXZlZERhdGEuZGF0YWJhc2UgJiYgQXJyYXkuaXNBcnJheShzYXZlZERhdGEuZGF0YWJhc2Uud29yZHMpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHVBRTMwXHVDODc0IGRhdGEuanNvblx1QzVEMFx1QzExQyBNRCBcdUQzMENcdUM3N0NcdUI4NUMgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4IFx1QzJEQ1x1Qzc5MS4uLicpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWdhY3lEYXRhID0gc2F2ZWREYXRhLmRhdGFiYXNlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVCMkU4XHVDNUI0XHVCNEU0XHVDNzQ0IFx1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTVcdUM1RDAgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgICAgICAgICBpZiAobGVnYWN5RGF0YS53b3JkcyAmJiBsZWdhY3lEYXRhLndvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgbGVnYWN5RGF0YS53b3Jkcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuYWRkV29yZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ud29yZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29rSWQ6ICdkZWZhdWx0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkLnByb251bmNpYXRpb24gfHwgJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBcdUIyRThcdUM1QjQgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4IFx1QzJFNFx1RDMyODogJHt3b3JkLndvcmR9YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XHJcbiAgICAgICAgICAgICAgICBpZiAobGVnYWN5RGF0YS5zZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVNldHRpbmdzKGxlZ2FjeURhdGEuc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4IFx1QzY0NFx1QjhDQycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkFBOFx1QjRFMCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDODAwXHVDN0E1IChcdUMxMjRcdUM4MTVcdUI5Q0MgXHVDODAwXHVDN0E1LCBcdUIyRThcdUM1QjRcdUM3QTUgXHVCMzcwXHVDNzc0XHVEMTMwXHVCMjk0IE1EIFx1RDMwQ1x1Qzc3Q1x1Qjg1QyBcdUM3OTBcdUIzRDkgXHVDODAwXHVDN0E1XHVCNDI4KVxyXG4gICAgYXN5bmMgc2F2ZUFsbERhdGEoKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuc2V0dGluZ3NcclxuICAgICAgICB9O1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoZGF0YSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1RDBDMFx1Qzc4NSBcdUMxMjBcdUM1QjggXHVDRDk0XHVBQzAwXHJcbmV4cG9ydCB7IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luLCBBZGRCb29rTW9kYWwgfTsgIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTm90aWNlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZnJvbSAnLi4vLi4vLi4vbWFpbic7XHJcbmltcG9ydCB7IExMTVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZSc7XHJcbmltcG9ydCB7IGVuY3J5cHRBcGlLZXksIGRlY3J5cHRBcGlLZXksIG1hc2tBcGlLZXkgfSBmcm9tICcuLi8uLi8uLi91dGlscyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFZvY2FidWxhcnlTZXR0aW5ncyB7XHJcbiAgICBhcGlLZXk6IHN0cmluZztcclxuICAgIGRlZmF1bHRMYW5ndWFnZTogc3RyaW5nO1xyXG4gICAgc2hvd1NpbWlsYXJXb3JkczogYm9vbGVhbjtcclxuICAgIHNob3dFeGFtcGxlczogYm9vbGVhbjtcclxuICAgIGV4YW1wbGVzQ291bnQ6IG51bWJlcjtcclxuICAgIC8vIFx1QUMwMSBcdUM4MUNcdUFDRjVcdUM1QzVcdUNDQjRcdUJDQzQgXHVDNTU0XHVENjM4XHVENjU0XHVCNDFDIEFQSSBcdUQwQTRcclxuICAgIG9wZW5haUFwaUtleTogc3RyaW5nO1xyXG4gICAgYW50aHJvcGljQXBpS2V5OiBzdHJpbmc7XHJcbiAgICBnb29nbGVBcGlLZXk6IHN0cmluZztcclxuICAgIGxsbUFwaUtleTogc3RyaW5nOyAvLyBcdUJDOTRcdUM2QTkgTExNIEFQSSBcdUQwQTQgKFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQyOClcclxuICAgIGxsbVByb3ZpZGVyOiAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dvb2dsZSc7XHJcbiAgICBsbG1Nb2RlbDogc3RyaW5nO1xyXG4gICAgZW5hYmxlQWR2YW5jZWRGZWF0dXJlczogYm9vbGVhbjtcclxuICAgIC8vIFx1QkNGNVx1QzJCNSBcdUQ2NTRcdUJBNzQgXHVCMTkyXHVDNzc0IFx1QzEyNFx1QzgxNVxyXG4gICAgcmV2aWV3TW9kYWxIZWlnaHQ6IG51bWJlcjtcclxuICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MDBcdUM3QTUgXHVEM0Y0XHVCMzU0IFx1QUNCRFx1Qjg1Q1xyXG4gICAgdm9jYWJ1bGFyeUZvbGRlclBhdGg6IHN0cmluZztcclxuICAgIC8vIFRUUyBcdUMxMjRcdUM4MTVcclxuICAgIHR0c0VuYWJsZWQ6IGJvb2xlYW47XHJcbiAgICB0dHNWb2ljZTogc3RyaW5nO1xyXG4gICAgdHRzUGxheWJhY2tTcGVlZDogbnVtYmVyO1xyXG4gICAgdHRzQXV0b1BsYXk6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBWb2NhYnVsYXJ5U2V0dGluZ3MgPSB7XHJcbiAgICBhcGlLZXk6ICcnLFxyXG4gICAgZGVmYXVsdExhbmd1YWdlOiAna28nLFxyXG4gICAgc2hvd1NpbWlsYXJXb3JkczogdHJ1ZSxcclxuICAgIHNob3dFeGFtcGxlczogdHJ1ZSxcclxuICAgIGV4YW1wbGVzQ291bnQ6IDMsXHJcbiAgICBvcGVuYWlBcGlLZXk6ICcnLFxyXG4gICAgYW50aHJvcGljQXBpS2V5OiAnJyxcclxuICAgIGdvb2dsZUFwaUtleTogJycsXHJcbiAgICBsbG1BcGlLZXk6ICcnLFxyXG4gICAgbGxtUHJvdmlkZXI6ICdvcGVuYWknLFxyXG4gICAgbGxtTW9kZWw6ICdnZW1pbmktMS4wLXByby1sYXRlc3QnLFxyXG4gICAgZW5hYmxlQWR2YW5jZWRGZWF0dXJlczogZmFsc2UsXHJcbiAgICByZXZpZXdNb2RhbEhlaWdodDogODUsXHJcbiAgICB2b2NhYnVsYXJ5Rm9sZGVyUGF0aDogJ1ZvY2FidWxhcnknLFxyXG4gICAgdHRzRW5hYmxlZDogdHJ1ZSxcclxuICAgIHR0c1ZvaWNlOiAnZW4tVVMtQXZhTmV1cmFsJyxcclxuICAgIHR0c1BsYXliYWNrU3BlZWQ6IDEuMCxcclxuICAgIHR0c0F1dG9QbGF5OiBmYWxzZVxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNSBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzggXHVDMTI0XHVDODE1JyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVCYXNpY1NldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZUxMTVNldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZVRUU1NldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZUFkdmFuY2VkU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQmFzaWNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUFFMzBcdUJDRjggXHVDMTI0XHVDODE1JyB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUFFMzBcdUJDRjggXHVDNUI4XHVDNUI0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNCBcdUI3M0JcdUM3NDQgXHVENDVDXHVDMkRDXHVENTYwIFx1QzVCOFx1QzVCNFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdrbycsICdcdUQ1NUNcdUFENkRcdUM1QjQnKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4nLCAnRW5nbGlzaCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdqYScsICdcdTY1RTVcdTY3MkNcdThBOUUnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRMYW5ndWFnZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TGFuZ3VhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0IFx1RDQ1Q1x1QzJEQycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ1NTlcdUMyQjVcdUQ1NjAgXHVCNTRDIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NDQgXHVENTY4XHVBRUQ4IFx1RDQ1Q1x1QzJEQ1x1RDU2OVx1QjJDOFx1QjJFNC4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U2ltaWxhcldvcmRzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTaW1pbGFyV29yZHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM2MDhcdUJCMzggXHVENDVDXHVDMkRDJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1RDU1OVx1QzJCNVx1RDU2MCBcdUI1NEMgXHVDNjA4XHVCQjM4XHVCNEU0XHVDNzQ0IFx1RDU2OFx1QUVEOCBcdUQ0NUNcdUMyRENcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0V4YW1wbGVzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFeGFtcGxlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QzYwOFx1QkIzOCBcdUFDMUNcdUMyMTgnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVENDVDXHVDMkRDXHVENTYwIFx1QzYwOFx1QkIzOFx1Qzc1OCBcdUFDMUNcdUMyMThcdUI5N0MgXHVDMTI0XHVDODE1XHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygxLCAxMCwgMSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGFtcGxlc0NvdW50KVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGFtcGxlc0NvdW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVMTE1TZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdMTE0gQVBJIFx1QzEyNFx1QzgxNScgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVBQ0UwXHVBRTA5IFx1QUUzMFx1QjJBNSBcdUQ2NUNcdUMxMzFcdUQ2NTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnTExNIEFQSVx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NUMgXHVBQ0UwXHVBRTA5IFx1QUUzMFx1QjJBNVx1Qzc0NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQWR2YW5jZWRGZWF0dXJlcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBZHZhbmNlZEZlYXR1cmVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnTExNIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgTExNIEFQSSBcdUM4MUNcdUFDRjVcdUM1QzVcdUNDQjRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignb3BlbmFpJywgJ09wZW5BSSAoR1BUKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdhbnRocm9waWMnLCAnQW50aHJvcGljIChDbGF1ZGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dvb2dsZScsICdHb29nbGUgKEdlbWluaSknKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVByb3ZpZGVyKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVByb3ZpZGVyID0gdmFsdWUgYXMgJ29wZW5haScgfCAnYW50aHJvcGljJyB8ICdnb29nbGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ29wZW5haScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnZ3B0LTQuMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ2FudGhyb3BpYycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnY2xhdWRlLTMtNS1zb25uZXQnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdnb29nbGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbU1vZGVsID0gJ2dlbWluaS0yLjUtZmxhc2gnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVNb2RlbFNlbGVjdGlvbihjb250YWluZXJFbCk7XHJcblxyXG4gICAgICAgIC8vIFx1QUMwMSBcdUM4MUNcdUFDRjVcdUM1QzVcdUNDQjRcdUJDQzQgQVBJIFx1RDBBNCBcdUMxMjRcdUM4MTVcclxuICAgICAgICB0aGlzLmNyZWF0ZUFwaUtleVNldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBUEkgXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc1OCBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QUM4QyBcdUMxMjRcdUM4MTVcdUI0MThcdUM1QzhcdUIyOTRcdUM5QzAgXHVEMTRDXHVDMkE0XHVEMkI4XHVENTY5XHVCMkM4XHVCMkU0LicpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCBcdUM5MTEuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbGxtU2VydmljZS50ZXN0Q29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgQVBJIFx1QzVGMFx1QUNCMCBcdUMxMzFcdUFDRjUhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQVBJIFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjg6ICcgKyByZXN1bHQuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEFQSSBcdUM1RjBcdUFDQjAgXHVDMkU0XHVEMzI4OiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZU1vZGVsU2VsZWN0aW9uKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQVBJIFx1QkFBOFx1QjM3OCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgTExNIFx1QkFBOFx1QjM3OFx1Qzc0NCBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvdmlkZXIgPT09ICdvcGVuYWknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuMScsICdHUFQtNC4xJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTRvJywgJ0dQVC00bycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dwdC00by1taW5pJywgJ0dQVC00byBNaW5pJykgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuMS1sb25nJywgJ0dQVC00LjEgKExvbmcgQ29udGV4dCknKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNC41LXByZXZpZXcnLCAnR1BULTQuNSBQcmV2aWV3JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTQuNS1wcmV2aWV3LTInLCAnR1BULTQuNSBQcmV2aWV3IDInKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdhbnRocm9waWMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xhdWRlIDMuNSBcdUJBQThcdUIzNzhcdUI0RTRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNS1zb25uZXQnLCAnQ2xhdWRlIDMuNSBTb25uZXQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy01LWhhaWt1JywgJ0NsYXVkZSAzLjUgSGFpa3UnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy01LW9wdXMnLCAnQ2xhdWRlIDMuNSBPcHVzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xhdWRlIDMuNyBcdUJBQThcdUIzNzhcdUI0RTRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNy1zb25uZXQnLCAnQ2xhdWRlIDMuNyBTb25uZXQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy03LWhhaWt1JywgJ0NsYXVkZSAzLjcgSGFpa3UnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy03LW9wdXMnLCAnQ2xhdWRlIDMuNyBPcHVzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2xhdWRlLTMtNS1mbGFzaCcsICdDbGF1ZGUgMy41IEZsYXNoJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb3ZpZGVyID09PSAnZ29vZ2xlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0xLjUtcHJvLWxhdGVzdCcsICdHZW1pbmkgMS41IFBybycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0yLjUtZmxhc2gnLCAnR2VtaW5pIDIuNSBGbGFzaCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaS0yLjUtcHJvJywgJ0dlbWluaSAyLjUgUHJvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ2VtaW5pLTEuNS1mbGFzaC1sYXRlc3QnLCAnR2VtaW5pIDEuNSBGbGFzaCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbU1vZGVsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQXBpS2V5U2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gT3BlbkFJIEFQSSBcdUQwQTRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ09wZW5BSSBBUEkgXHVEMEE0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ09wZW5BSSBBUEkgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4gKHNrLS4uLlx1Qjg1QyBcdUMyRENcdUM3OTEpJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpQXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkS2V5ID0gZGVjcnlwdEFwaUtleShjdXJyZW50S2V5KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hc2tlZEtleSA9IG1hc2tBcGlLZXkoZGVjcnlwdGVkS2V5KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3NrLS4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1QzBBQ1x1QzZBOVx1Qzc5MFx1QUMwMCBcdUM3ODVcdUI4MjVcdUQ1NUMgXHVBQzEyXHVDNzc0IFx1QjlDOFx1QzJBNFx1RDBCOVx1QjQxQyBcdUFDMTJcdUFDRkMgXHVCMkU0XHVCOTc0XHVCQTc0IFx1QzBDOFx1Qjg1Q1x1QzZCNCBcdUQwQTRcdUI4NUMgXHVBQzA0XHVDOEZDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBlbmNyeXB0QXBpS2V5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haUFwaUtleSA9IGVuY3J5cHRlZEtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBbnRocm9waWMgQVBJIFx1RDBBNFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQW50aHJvcGljIEFQSSBcdUQwQTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQW50aHJvcGljIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LiAoc2stYW50LS4uLlx1Qjg1QyBcdUMyRENcdUM3OTEpJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljQXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkS2V5ID0gZGVjcnlwdEFwaUtleShjdXJyZW50S2V5KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hc2tlZEtleSA9IG1hc2tBcGlLZXkoZGVjcnlwdGVkS2V5KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3NrLWFudC0uLi4nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShtYXNrZWRLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IG1hc2tlZEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkS2V5ID0gZW5jcnlwdEFwaUtleSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkgPSBlbmNyeXB0ZWRLZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gR29vZ2xlIEFQSSBcdUQwQTRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0dvb2dsZSBBUEkgXHVEMEE0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0dvb2dsZSBBUEkgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRLZXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQUl6YS4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBlbmNyeXB0QXBpS2V5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUFwaUtleSA9IGVuY3J5cHRlZEtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUJDOTRcdUM2QTkgTExNIEFQSSBcdUQwQTRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QkM5NFx1QzZBOSBMTE0gQVBJIFx1RDBBNCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUFFMzBcdUQwQzAgTExNIFx1QzExQ1x1QkU0NFx1QzJBNFx1QzZBOSBBUEkgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRLZXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1BcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuLi4nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShtYXNrZWRLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IG1hc2tlZEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkS2V5ID0gZW5jcnlwdEFwaUtleSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1BcGlLZXkgPSBlbmNyeXB0ZWRLZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUFkdmFuY2VkU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVBQ0UwXHVBRTA5IFx1QzEyNFx1QzgxNScgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1RDNGNFx1QjM1NCBcdUJBQTlcdUI4NUQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXHJcbiAgICAgICAgY29uc3QgZm9sZGVycyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKClcclxuICAgICAgICAgICAgLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKSBhcyBURm9sZGVyW107XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzgwMFx1QzdBNSBcdUQzRjRcdUIzNTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDMwQ1x1Qzc3Q1x1QjRFNFx1Qzc3NCBcdUM4MDBcdUM3QTVcdUI0MjAgXHVEM0Y0XHVCMzU0XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4gKFx1QUUzMFx1QkNGOFx1QUMxMjogVm9jYWJ1bGFyeSknKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9sZGVycy5mb3JFYWNoKGZvbGRlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKGZvbGRlci5wYXRoLCBmb2xkZXIucGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnZvY2FidWxhcnlGb2xkZXJQYXRoKTtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnZvY2FidWxhcnlGb2xkZXJQYXRoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlVm9jYWJ1bGFyeUZvbGRlclBhdGgodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUJDRjVcdUMyQjUgXHVENjU0XHVCQTc0IFx1QjE5Mlx1Qzc3NCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUJDRjVcdUMyQjUgXHVCQUE4XHVCMkVDXHVDNzU4IFx1QjE5Mlx1Qzc3NFx1Qjk3QyBcdUQ2NTRcdUJBNzQgXHVCMTkyXHVDNzc0XHVDNzU4IFx1QkMzMVx1QkQ4NFx1QzcyOFx1Qjg1QyBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuIChcdUFFMzBcdUJDRjhcdUFDMTI6IDg1JSknKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoNTAsIDk1LCA1KVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Qzc3Q1x1Qzc3QyBcdUQ1NTlcdUMyQjUgXHVCQUE5XHVENDVDJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1RDU1OFx1QjhFOFx1QzVEMCBcdUQ1NTlcdUMyQjVcdUQ1NjAgXHVCMkU4XHVDNUI0XHVDNzU4IFx1QkFBOVx1RDQ1QyBcdUFDMUNcdUMyMThcdUI5N0MgXHVDMTI0XHVDODE1XHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cyg1LCA1MCwgNSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXI/LmdldERhdGFGb3JTYXZlKCk/LnNldHRpbmdzPy5kYWlseUdvYWwgfHwgMTApXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8udXBkYXRlU2V0dGluZ3MoeyBkYWlseUdvYWw6IHZhbHVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QkNGNVx1QzJCNSBcdUFDMDRcdUFDQTkgKFx1Qzc3QyknKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0XHVCOTdDIFx1QjJFNFx1QzJEQyBcdUJDRjVcdUMyQjVcdUQ1NjAgXHVBQzA0XHVBQ0E5XHVDNzQ0IFx1QzEyNFx1QzgxNVx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMSwgMzAsIDEpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyPy5nZXREYXRhRm9yU2F2ZSgpPy5zZXR0aW5ncz8ucmV2aWV3SW50ZXJ2YWwgfHwgMSlcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyPy51cGRhdGVTZXR0aW5ncyh7IHJldmlld0ludGVydmFsOiB2YWx1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVRUU1NldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1RUUyAoXHVDNzRDXHVDMTMxIFx1Qzc3RFx1QUUzMCkgXHVDMTI0XHVDODE1JyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgdHRzVG9nZ2xlU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnVFRTIFx1RDY1Q1x1QzEzMVx1RDY1NCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUIyRThcdUM1QjRcdUM2NDAgXHVDNjA4XHVCQjM4XHVDNzQ0IFx1Qzc0Q1x1QzEzMVx1QzczQ1x1Qjg1QyBcdUM3N0RcdUM1QjRcdUM4RkNcdUIyOTQgXHVBRTMwXHVCMkE1XHVDNzQ0IFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU2OVx1QjJDOFx1QjJFNC4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNFbmFibGVkKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c0VuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUVFMgXHVDMTI0XHVDODE1IFVJIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVFRTU2V0dGluZ3NWaXNpYmlsaXR5KCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHZvaWNlU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNzRDXHVDMTMxIFx1QzEyMFx1RDBERCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDNzRDXHVDMTMxXHVDNzQ0IFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3R0cy12b2ljZS1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QzJFNFx1QzgxQyBcdUMwQUNcdUM2QTkgXHVBQzAwXHVCMkE1XHVENTVDIFx1QzYwMVx1QzVCNCBcdUM3NENcdUMxMzFcdUI0RTRcdUM3NDQgXHVCM0Q5XHVDODAxXHVDNzNDXHVCODVDIFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZVZvaWNlRHJvcGRvd24oZHJvcGRvd24pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c1ZvaWNlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnXHVDMTIwXHVEMEREXHVENTVDIFx1Qzc0Q1x1QzEzMVx1QzczQ1x1Qjg1QyBcdUMwRDhcdUQ1MEMgXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1QzdBQ1x1QzBERFx1RDU2OVx1QjJDOFx1QjJFNCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1QzdBQ1x1QzBERCBcdUM5MTEuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbGF5Vm9pY2VQcmV2aWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNzRDXHVDMTMxIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3NENcdUMxMzEgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwZWVkU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDN0FDXHVDMEREIFx1QzE4RFx1QjNDNCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUM3NENcdUMxMzEgXHVDN0FDXHVDMEREIFx1QzE4RFx1QjNDNFx1Qjk3QyBcdUM4NzBcdUM4MDhcdUQ1NThcdUMxMzhcdUM2OTQuICgwLjUgPSBcdUIyOTBcdUI5QkMsIDEuMCA9IFx1QkNGNFx1RDFCNSwgMi4wID0gXHVCRTYwXHVCOTg0KScpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygndHRzLXNwZWVkLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMC41LCAyLjAsIDAuMSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQbGF5YmFja1NwZWVkKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQbGF5YmFja1NwZWVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVDMThEXHVCM0M0IFx1RDE0Q1x1QzJBNFx1RDJCOCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnXHVENjA0XHVDN0FDIFx1QzEyNFx1QzgxNVx1QjQxQyBcdUMxOERcdUIzQzRcdUI4NUMgXHVDMEQ4XHVENTBDIFx1Qzc0Q1x1QzEzMVx1Qzc0NCBcdUM3QUNcdUMwRERcdUQ1NjlcdUIyQzhcdUIyRTQnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUM3QUNcdUMwREQgXHVDOTExLi4uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGxheVZvaWNlUHJldmlldygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Qzc0Q1x1QzEzMSBcdUMxOERcdUIzQzQgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUM3QUNcdUMwREQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1QzE4RFx1QjNDNCBcdUQxNENcdUMyQTRcdUQyQjgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGF1dG9QbGF5U2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNzkwXHVCM0Q5IFx1QzdBQ1x1QzBERCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUIyRThcdUM1QjQgXHVDRTc0XHVCNERDXHVBQzAwIFx1RDQ1Q1x1QzJEQ1x1QjQyMCBcdUI1NEMgXHVDNzkwXHVCM0Q5XHVDNzNDXHVCODVDIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3N0RcdUM1QjRcdUM5MERcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCd0dHMtYXV0b3BsYXktc2V0dGluZycpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c0F1dG9QbGF5KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c0F1dG9QbGF5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDRDA4XHVBRTMwIFx1QzBDMVx1RDBEQyBcdUMxMjRcdUM4MTVcclxuICAgICAgICB0aGlzLnVwZGF0ZVRUU1NldHRpbmdzVmlzaWJpbGl0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcG9wdWxhdGVWb2ljZURyb3Bkb3duKGRyb3Bkb3duOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUFFMzBcdUJDRjggXHVDNjM1XHVDMTU4XHVCNEU0IChFZGdlIFRUU1x1QzY0MCBcdUM3MjBcdUMwQUNcdUQ1NUMgTmV1cmFsIFx1Qzc0Q1x1QzEzMVx1QjRFNClcclxuICAgICAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ2VuLVVTLUF2YU5ldXJhbCcsIG5hbWU6ICdBdmEgKFx1QkJGOFx1QUQ2RCBcdUM2MDFcdUM1QjQpJyB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnZW4tVVMtSmVubnlOZXVyYWwnLCBuYW1lOiAnSmVubnkgKFx1QkJGOFx1QUQ2RCBcdUM2MDFcdUM1QjQpJyB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnZW4tR0ItU29uaWFOZXVyYWwnLCBuYW1lOiAnU29uaWEgKFx1QzYwMVx1QUQ2RCBcdUM2MDFcdUM1QjQpJyB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnZW4tR0ItUnlhbk5ldXJhbCcsIG5hbWU6ICdSeWFuIChcdUM2MDFcdUFENkQgXHVDNjAxXHVDNUI0KScgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ2VuLUFVLU5hdGFzaGFOZXVyYWwnLCBuYW1lOiAnTmF0YXNoYSAoXHVENjM4XHVDOEZDIFx1QzYwMVx1QzVCNCknIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICAvLyBcdUFFMzBcdUJDRjggXHVDNjM1XHVDMTU4XHVCNEU0IFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIGRlZmF1bHRPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcclxuICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG9wdGlvbi52YWx1ZSwgb3B0aW9uLm5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUMyRTRcdUM4MUMgXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOSBcdUFDMDBcdUIyQTVcdUQ1NUMgXHVDNjAxXHVDNUI0IFx1Qzc0Q1x1QzEzMVx1QjRFNCBcdUNEOTRcdUFDMDBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB2b2ljZXMgPSBzcGVlY2hTeW50aGVzaXMuZ2V0Vm9pY2VzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hWb2ljZXMgPSB2b2ljZXMuZmlsdGVyKHZvaWNlID0+IFxyXG4gICAgICAgICAgICAgICAgdm9pY2UubGFuZy5zdGFydHNXaXRoKCdlbi0nKSAmJiBcclxuICAgICAgICAgICAgICAgICF2b2ljZS5sYW5nLmluY2x1ZGVzKCdrbycpICYmXHJcbiAgICAgICAgICAgICAgICAhZGVmYXVsdE9wdGlvbnMuc29tZShvcHQgPT4gb3B0LnZhbHVlID09PSB2b2ljZS5uYW1lKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVuZ2xpc2hWb2ljZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVBRDZDXHVCRDg0XHVDMTIwIFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCctLS0nLCAnLS0tIFx1QzJEQ1x1QzJBNFx1RDE1QyBcdUM3NENcdUMxMzEgLS0tJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGVuZ2xpc2hWb2ljZXMuZm9yRWFjaCh2b2ljZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBgJHt2b2ljZS5uYW1lfSAoJHt2b2ljZS5sYW5nfSlgO1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbih2b2ljZS5uYW1lLCBkaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignXHVDNzRDXHVDMTMxIFx1QkFBOVx1Qjg1RFx1Qzc0NCBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTQgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlVFRTU2V0dGluZ3NWaXNpYmlsaXR5KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGlzRW5hYmxlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c0VuYWJsZWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVFRTIFx1QUQwMFx1QjgyOCBcdUMxMjRcdUM4MTVcdUI0RTRcdUM3NTggXHVENDVDXHVDMkRDL1x1QzIyOFx1QUU0MCBcdUNDOThcdUI5QUNcclxuICAgICAgICBjb25zdCB0dHNTZXR0aW5ncyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnR0cy12b2ljZS1zZXR0aW5nLCAudHRzLXNwZWVkLXNldHRpbmcsIC50dHMtYXV0b3BsYXktc2V0dGluZycpO1xyXG4gICAgICAgIHR0c1NldHRpbmdzLmZvckVhY2goc2V0dGluZyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBzZXR0aW5nIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAoaXNFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICcxJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICcwLjUnO1xyXG4gICAgICAgICAgICAgICAgLy8gXHVDNjQ0XHVDODA0XHVENzg4IFx1QzIyOFx1QUUzMFx1QzlDMCBcdUM1NEFcdUFDRTAgXHVCRTQ0XHVENjVDXHVDMTMxXHVENjU0IFx1QzBDMVx1RDBEQ1x1Qjg1QyBcdUQ0NUNcdUMyRENcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZHJvcGRvd25zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlcnMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYW5nZVwiXScpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG9nZ2xlcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4gKGJ0biBhcyBIVE1MQnV0dG9uRWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3ducy5mb3JFYWNoKGRkID0+IChkZCBhcyBIVE1MU2VsZWN0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHNsaWRlcnMuZm9yRWFjaChzbGlkZXIgPT4gKHNsaWRlciBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlcy5mb3JFYWNoKHRvZ2dsZSA9PiAodG9nZ2xlIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ2NUNcdUMxMzFcdUQ2NTQgXHVDMEMxXHVEMERDXHVDNzdDIFx1QjU0QyBcdUJBQThcdUI0RTAgXHVDRUU4XHVEMkI4XHVCODY0IFx1QzdBQ1x1RDY1Q1x1QzEzMVx1RDY1NFxyXG4gICAgICAgIGlmIChpc0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgY29uc3QgdHRzU2V0dGluZ3MgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy50dHMtdm9pY2Utc2V0dGluZywgLnR0cy1zcGVlZC1zZXR0aW5nLCAudHRzLWF1dG9wbGF5LXNldHRpbmcnKTtcclxuICAgICAgICAgICAgdHRzU2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBzZXR0aW5nIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkcm9wZG93bnMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlbGVjdCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVycyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInJhbmdlXCJdJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b2dnbGVzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ0biA9PiAoYnRuIGFzIEhUTUxCdXR0b25FbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3ducy5mb3JFYWNoKGRkID0+IChkZCBhcyBIVE1MU2VsZWN0RWxlbWVudCkuZGlzYWJsZWQgPSBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXJzLmZvckVhY2goc2xpZGVyID0+IChzbGlkZXIgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVzLmZvckVhY2godG9nZ2xlID0+ICh0b2dnbGUgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHBsYXlWb2ljZVByZXZpZXcoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIFdlYiBTcGVlY2ggQVBJIFx1QzlDMFx1QzZEMCBcdUQ2NTVcdUM3NzhcclxuICAgICAgICAgICAgICAgIGlmICghd2luZG93LnNwZWVjaFN5bnRoZXNpcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1x1Qzc3NCBcdUJFMENcdUI3N0NcdUM2QjBcdUM4MDBcdUIyOTQgXHVDNzRDXHVDMTMxIFx1RDU2OVx1QzEzMVx1Qzc0NCBcdUM5QzBcdUM2RDBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0LicpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzdBQ1x1QzBERCBcdUM5MTFcdUM3NzggXHVDNzRDXHVDMTMxXHVDNzc0IFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM5MTFcdUM5QzBcclxuICAgICAgICAgICAgICAgIGlmIChzcGVlY2hTeW50aGVzaXMuc3BlYWtpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzRDXHVDMTMxIFx1QkFBOVx1Qjg1RCBcdUI4NUNcdUI1MjkgXHVCMzAwXHVBRTMwIChUVFNTZXJ2aWNlXHVDNjQwIFx1QjNEOVx1Qzc3Q1x1RDU1QyBcdUJDMjlcdUMyREQpXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmVuc3VyZVZvaWNlc0xvYWRlZEZvclByZXZpZXcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUMwRDhcdUQ1MEMgXHVEMTREXHVDMkE0XHVEMkI4IFx1QzgxNVx1Qzc1OFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2FtcGxlVGV4dHMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgJ0hlbGxvLCB0aGlzIGlzIGEgc2FtcGxlIHZvaWNlIHByZXZpZXcuJyxcclxuICAgICAgICAgICAgICAgICAgICAnV2VsY29tZSB0byBFbmdsaXNoIHZvY2FidWxhcnkgbGVhcm5pbmcuJyxcclxuICAgICAgICAgICAgICAgICAgICAnVGhpcyB2b2ljZSB3aWxsIGhlbHAgeW91IGxlYXJuIHByb251bmNpYXRpb24uJyxcclxuICAgICAgICAgICAgICAgICAgICAnQmVhdXRpZnVsIHdvcmRzIG1ha2UgYmVhdXRpZnVsIHNlbnRlbmNlcy4nXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByYW5kb21UZXh0ID0gc2FtcGxlVGV4dHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2FtcGxlVGV4dHMubGVuZ3RoKV07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzRDXHVDMTMxIFx1RDU2OVx1QzEzMSBcdUMxMjRcdUM4MTVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHV0dGVyYW5jZSA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UocmFuZG9tVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFRUU1NlcnZpY2VcdUM2NDAgXHVCM0Q5XHVDNzdDXHVENTVDIFx1QzYwMVx1QzVCNCBcdUM3NENcdUMxMzEgXHVDMTIwXHVEMEREIFx1Qjg1Q1x1QzlDMSBcdUMwQUNcdUM2QTlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVm9pY2UgPSB0aGlzLnNlbGVjdEVuZ2xpc2hWb2ljZUZvclByZXZpZXcoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkVm9pY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB1dHRlcmFuY2Uudm9pY2UgPSBzZWxlY3RlZFZvaWNlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZvaWNlIFx1QzEyNFx1QzgxNVx1Qzc3NCBcdUM2QjBcdUMxMjBcdUI0MThcdUJCQzBcdUI4NUMgbGFuZ1x1QjNDNCB2b2ljZVx1QzVEMCBcdUI5REVcdUNEQjAgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgICAgICAgICAgICAgdXR0ZXJhbmNlLmxhbmcgPSBzZWxlY3RlZFZvaWNlLmxhbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFNldHRpbmdzIFByZXZpZXcgVm9pY2U6ICR7c2VsZWN0ZWRWb2ljZS5uYW1lfSAoJHtzZWxlY3RlZFZvaWNlLmxhbmd9KWApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUQzRjRcdUJDMzE6IFx1QkE4NVx1QzJEQ1x1QzgwMVx1QzczQ1x1Qjg1QyBcdUM2MDFcdUM1QjQgXHVDNUI4XHVDNUI0IFx1QzEyNFx1QzgxNVxyXG4gICAgICAgICAgICAgICAgICAgIHV0dGVyYW5jZS5sYW5nID0gJ2VuLVVTJztcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2V0dGluZ3MgUHJldmlldzogTm8gc3BlY2lmaWMgdm9pY2UgZm91bmQsIHVzaW5nIGVuLVVTIGxhbmd1YWdlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHV0dGVyYW5jZS5yYXRlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzUGxheWJhY2tTcGVlZDtcclxuICAgICAgICAgICAgICAgIHV0dGVyYW5jZS52b2x1bWUgPSAxLjA7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1RDU3OFx1QjRFNFx1QjdFQyBcdUMxMjRcdUM4MTVcclxuICAgICAgICAgICAgICAgIHV0dGVyYW5jZS5vbmVuZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHV0dGVyYW5jZS5vbmVycm9yID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgXHVDNzRDXHVDMTMxIFx1QzdBQ1x1QzBERCBcdUM2MjRcdUI5NTg6ICR7ZXZlbnQuZXJyb3J9YCkpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUM3NENcdUMxMzEgXHVDN0FDXHVDMEREXHJcbiAgICAgICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsodXR0ZXJhbmNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzMgXHVDMTI0XHVDODE1ICgxMFx1Q0QwOClcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGVlY2hTeW50aGVzaXMuc3BlYWtpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWNoU3ludGhlc2lzLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUM3NENcdUMxMzEgXHVDN0FDXHVDMEREIFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDMycpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAxMDAwMCk7XHJcblxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZW5zdXJlVm9pY2VzTG9hZGVkRm9yUHJldmlldygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgdm9pY2VzID0gc3BlZWNoU3ludGhlc2lzLmdldFZvaWNlcygpO1xyXG4gICAgICAgICAgICBpZiAodm9pY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlVm9pY2VzQ2hhbmdlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHNwZWVjaFN5bnRoZXNpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd2b2ljZXNjaGFuZ2VkJywgaGFuZGxlVm9pY2VzQ2hhbmdlZCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuYWRkRXZlbnRMaXN0ZW5lcigndm9pY2VzY2hhbmdlZCcsIGhhbmRsZVZvaWNlc0NoYW5nZWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVEMEMwXHVDNzg0XHVDNTQ0XHVDNkMzIFx1QzEyNFx1QzgxNSAoMlx1Q0QwOClcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndm9pY2VzY2hhbmdlZCcsIGhhbmRsZVZvaWNlc0NoYW5nZWQpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9LCAyMDAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbGVjdEVuZ2xpc2hWb2ljZUZvclByZXZpZXcoKTogU3BlZWNoU3ludGhlc2lzVm9pY2UgfCBudWxsIHtcclxuICAgICAgICBjb25zdCB2b2ljZXMgPSBzcGVlY2hTeW50aGVzaXMuZ2V0Vm9pY2VzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCQTg1XHVDMkRDXHVDODAxIFx1Qzc0Q1x1QzEzMSBcdUM3NzRcdUI5ODQgXHVDNkIwXHVDMTIwIFx1QjlFNFx1Q0U2RFxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSkge1xyXG4gICAgICAgICAgICBjb25zdCBleGFjdE1hdGNoID0gdm9pY2VzLmZpbmQodm9pY2UgPT4gdm9pY2UubmFtZSA9PT0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UpO1xyXG4gICAgICAgICAgICBpZiAoZXhhY3RNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4YWN0TWF0Y2g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QzYwMVx1QzVCNCBcdUM3NENcdUMxMzFcdUI5Q0MgXHVENTQ0XHVEMTMwXHVCOUMxIChcdUQ1NUNcdUFENkRcdUM1QjQgXHVDODFDXHVDNjc4KVxyXG4gICAgICAgIGNvbnN0IGVuZ2xpc2hWb2ljZXMgPSB2b2ljZXMuZmlsdGVyKHZvaWNlID0+IFxyXG4gICAgICAgICAgICB2b2ljZS5sYW5nLnN0YXJ0c1dpdGgoJ2VuLScpICYmICF2b2ljZS5sYW5nLmluY2x1ZGVzKCdrbycpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKGVuZ2xpc2hWb2ljZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignU2V0dGluZ3MgUHJldmlldzogTm8gRW5nbGlzaCB2b2ljZXMgZm91bmQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUM2QjBcdUMxMjBcdUMyMUNcdUM3MDQgXHVBRTMwXHVCQzE4IFx1Qzc0Q1x1QzEzMSBcdUMxMjBcdUQwRERcclxuICAgICAgICBjb25zdCBwcmVmZXJyZWRWb2ljZXMgPSBbXHJcbiAgICAgICAgICAgICdNaWNyb3NvZnQgQXZhIC0gRW5nbGlzaCAoVW5pdGVkIFN0YXRlcyknLFxyXG4gICAgICAgICAgICAnTWljcm9zb2Z0IEplbm55IC0gRW5nbGlzaCAoVW5pdGVkIFN0YXRlcyknLCBcclxuICAgICAgICAgICAgJ01pY3Jvc29mdCBBcmlhIC0gRW5nbGlzaCAoVW5pdGVkIFN0YXRlcyknLFxyXG4gICAgICAgICAgICAnTWljcm9zb2Z0IEd1eSAtIEVuZ2xpc2ggKFVuaXRlZCBTdGF0ZXMpJyxcclxuICAgICAgICAgICAgJ01pY3Jvc29mdCBNYXJrIC0gRW5nbGlzaCAoVW5pdGVkIFN0YXRlcyknLFxyXG4gICAgICAgICAgICAnR29vZ2xlIFVTIEVuZ2xpc2gnLFxyXG4gICAgICAgICAgICAnZW4tVVMtQXZhTmV1cmFsJyxcclxuICAgICAgICAgICAgJ2VuLVVTLUplbm55TmV1cmFsJyxcclxuICAgICAgICAgICAgJ2VuLVVTLUFyaWFOZXVyYWwnXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgLy8gXHVDNkIwXHVDMTIwXHVDMjFDXHVDNzA0IFx1Qzc0Q1x1QzEzMSBcdUNDM0VcdUFFMzBcclxuICAgICAgICBmb3IgKGNvbnN0IHByZWZlcnJlZE5hbWUgb2YgcHJlZmVycmVkVm9pY2VzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZvaWNlID0gZW5nbGlzaFZvaWNlcy5maW5kKHYgPT4gXHJcbiAgICAgICAgICAgICAgICB2Lm5hbWUuaW5jbHVkZXMocHJlZmVycmVkTmFtZSkgfHwgdi5uYW1lID09PSBwcmVmZXJyZWROYW1lXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmICh2b2ljZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZvaWNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUJCRjhcdUFENkQgXHVDNjAxXHVDNUI0IFx1QzZCMFx1QzEyMFxyXG4gICAgICAgIGNvbnN0IHVzRW5nbGlzaCA9IGVuZ2xpc2hWb2ljZXMuZmluZCh2b2ljZSA9PiB2b2ljZS5sYW5nID09PSAnZW4tVVMnKTtcclxuICAgICAgICBpZiAodXNFbmdsaXNoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1c0VuZ2xpc2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUFERjggXHVDNjc4IFx1QzYwMVx1QzVCNCBcdUM3NENcdUMxMzEgXHVDOTExIFx1Q0NBQiBcdUJDODhcdUM5RjhcclxuICAgICAgICByZXR1cm4gZW5nbGlzaFZvaWNlc1swXTtcclxuICAgIH1cclxufSAiLCAiLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQvXHVCQ0Y1XHVENjM4XHVENjU0IFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMFxyXG5cclxuLy8gXHVBQzA0XHVCMkU4XHVENTVDIFx1QzU1NFx1RDYzOFx1RDY1NCBcdUQwQTQgKFx1QzJFNFx1QzgxQyBcdUQ1MDRcdUI4NUNcdUIzNTVcdUMxNThcdUM1RDBcdUMxMUNcdUIyOTQgXHVCMzU0IFx1QzU0OFx1QzgwNFx1RDU1QyBcdUJDMjlcdUJDOTUgXHVDMEFDXHVDNkE5IFx1QUQ4Q1x1QzdBNSlcclxuY29uc3QgRU5DUllQVElPTl9LRVkgPSAnb2JzaWRpYW4tdm9jYWJ1bGFyeS1wbHVnaW4ta2V5LTIwMjQnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVuY3J5cHRBcGlLZXkoYXBpS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKCFhcGlLZXkpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBcdUFDMDRcdUIyRThcdUQ1NUMgWE9SIFx1QzU1NFx1RDYzOFx1RDY1NCAoXHVDMkU0XHVDODFDXHVCODVDXHVCMjk0IFx1QjM1NCBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVCQzI5XHVCQzk1IFx1QzBBQ1x1QzZBOSBcdUFEOENcdUM3QTUpXHJcbiAgICAgICAgbGV0IGVuY3J5cHRlZCA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXBpS2V5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXJDb2RlID0gYXBpS2V5LmNoYXJDb2RlQXQoaSkgXiBFTkNSWVBUSU9OX0tFWS5jaGFyQ29kZUF0KGkgJSBFTkNSWVBUSU9OX0tFWS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBlbmNyeXB0ZWQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBidG9hKGVuY3J5cHRlZCk7IC8vIEJhc2U2NCBcdUM3NzhcdUNGNTRcdUI1MjlcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWNyeXB0QXBpS2V5KGVuY3J5cHRlZEFwaUtleTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmICghZW5jcnlwdGVkQXBpS2V5KSByZXR1cm4gJyc7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGF0b2IoZW5jcnlwdGVkQXBpS2V5KTsgLy8gQmFzZTY0IFx1QjUxNFx1Q0Y1NFx1QjUyOVxyXG4gICAgICAgIGxldCBkZWNyeXB0ZWQgPSAnJztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlY29kZWQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY2hhckNvZGUgPSBkZWNvZGVkLmNoYXJDb2RlQXQoaSkgXiBFTkNSWVBUSU9OX0tFWS5jaGFyQ29kZUF0KGkgJSBFTkNSWVBUSU9OX0tFWS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBkZWNyeXB0ZWQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkZWNyeXB0ZWQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBcdUQwQTQgXHVCQ0Y1XHVENjM4XHVENjU0IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBBUEkgXHVEMEE0XHVCOTdDIFx1QjlDOFx1QzJBNFx1RDBCOVx1RDU1OFx1QzVFQyBcdUQ0NUNcdUMyRENcclxuZXhwb3J0IGZ1bmN0aW9uIG1hc2tBcGlLZXkoYXBpS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKCFhcGlLZXkpIHJldHVybiAnJztcclxuICAgIGlmIChhcGlLZXkubGVuZ3RoIDw9IDgpIHJldHVybiAnKicucmVwZWF0KGFwaUtleS5sZW5ndGgpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gYXBpS2V5LnN1YnN0cmluZygwLCA0KSArICcqJy5yZXBlYXQoYXBpS2V5Lmxlbmd0aCAtIDgpICsgYXBpS2V5LnN1YnN0cmluZyhhcGlLZXkubGVuZ3RoIC0gNCk7XHJcbn0gIiwgIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcCgpIHtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgfTtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBiaW5kIGZyb20gJy4vaGVscGVycy9iaW5kLmpzJztcblxuLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3NcblxuY29uc3Qge3RvU3RyaW5nfSA9IE9iamVjdC5wcm90b3R5cGU7XG5jb25zdCB7Z2V0UHJvdG90eXBlT2Z9ID0gT2JqZWN0O1xuY29uc3Qge2l0ZXJhdG9yLCB0b1N0cmluZ1RhZ30gPSBTeW1ib2w7XG5cbmNvbnN0IGtpbmRPZiA9IChjYWNoZSA9PiB0aGluZyA9PiB7XG4gICAgY29uc3Qgc3RyID0gdG9TdHJpbmcuY2FsbCh0aGluZyk7XG4gICAgcmV0dXJuIGNhY2hlW3N0cl0gfHwgKGNhY2hlW3N0cl0gPSBzdHIuc2xpY2UoOCwgLTEpLnRvTG93ZXJDYXNlKCkpO1xufSkoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG5cbmNvbnN0IGtpbmRPZlRlc3QgPSAodHlwZSkgPT4ge1xuICB0eXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gKHRoaW5nKSA9PiBraW5kT2YodGhpbmcpID09PSB0eXBlXG59XG5cbmNvbnN0IHR5cGVPZlRlc3QgPSB0eXBlID0+IHRoaW5nID0+IHR5cGVvZiB0aGluZyA9PT0gdHlwZTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IHtpc0FycmF5fSA9IEFycmF5O1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIHVuZGVmaW5lZCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzVW5kZWZpbmVkID0gdHlwZU9mVGVzdCgndW5kZWZpbmVkJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCdWZmZXJcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCdWZmZXIodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbCkgJiYgdmFsLmNvbnN0cnVjdG9yICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwuY29uc3RydWN0b3IpXG4gICAgJiYgaXNGdW5jdGlvbih2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIpICYmIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlcih2YWwpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzQXJyYXlCdWZmZXIgPSBraW5kT2ZUZXN0KCdBcnJheUJ1ZmZlcicpO1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcbiAgbGV0IHJlc3VsdDtcbiAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAoaXNBcnJheUJ1ZmZlcih2YWwuYnVmZmVyKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZ1xuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc1N0cmluZyA9IHR5cGVPZlRlc3QoJ3N0cmluZycpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGdW5jdGlvbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRnVuY3Rpb24gPSB0eXBlT2ZUZXN0KCdmdW5jdGlvbicpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzTnVtYmVyID0gdHlwZU9mVGVzdCgnbnVtYmVyJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHsqfSB0aGluZyBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzT2JqZWN0ID0gKHRoaW5nKSA9PiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQm9vbGVhblxuICpcbiAqIEBwYXJhbSB7Kn0gdGhpbmcgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQm9vbGVhbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzQm9vbGVhbiA9IHRoaW5nID0+IHRoaW5nID09PSB0cnVlIHx8IHRoaW5nID09PSBmYWxzZTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHBsYWluIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBwbGFpbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5jb25zdCBpc1BsYWluT2JqZWN0ID0gKHZhbCkgPT4ge1xuICBpZiAoa2luZE9mKHZhbCkgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgcHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YodmFsKTtcbiAgcmV0dXJuIChwcm90b3R5cGUgPT09IG51bGwgfHwgcHJvdG90eXBlID09PSBPYmplY3QucHJvdG90eXBlIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90b3R5cGUpID09PSBudWxsKSAmJiAhKHRvU3RyaW5nVGFnIGluIHZhbCkgJiYgIShpdGVyYXRvciBpbiB2YWwpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBEYXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNEYXRlID0ga2luZE9mVGVzdCgnRGF0ZScpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGaWxlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNGaWxlID0ga2luZE9mVGVzdCgnRmlsZScpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCbG9iLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNCbG9iID0ga2luZE9mVGVzdCgnQmxvYicpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZUxpc3RcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzRmlsZUxpc3QgPSBraW5kT2ZUZXN0KCdGaWxlTGlzdCcpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzU3RyZWFtID0gKHZhbCkgPT4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhXG4gKlxuICogQHBhcmFtIHsqfSB0aGluZyBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEZvcm1EYXRhLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNGb3JtRGF0YSA9ICh0aGluZykgPT4ge1xuICBsZXQga2luZDtcbiAgcmV0dXJuIHRoaW5nICYmIChcbiAgICAodHlwZW9mIEZvcm1EYXRhID09PSAnZnVuY3Rpb24nICYmIHRoaW5nIGluc3RhbmNlb2YgRm9ybURhdGEpIHx8IChcbiAgICAgIGlzRnVuY3Rpb24odGhpbmcuYXBwZW5kKSAmJiAoXG4gICAgICAgIChraW5kID0ga2luZE9mKHRoaW5nKSkgPT09ICdmb3JtZGF0YScgfHxcbiAgICAgICAgLy8gZGV0ZWN0IGZvcm0tZGF0YSBpbnN0YW5jZVxuICAgICAgICAoa2luZCA9PT0gJ29iamVjdCcgJiYgaXNGdW5jdGlvbih0aGluZy50b1N0cmluZykgJiYgdGhpbmcudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgRm9ybURhdGFdJylcbiAgICAgIClcbiAgICApXG4gIClcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmNvbnN0IGlzVVJMU2VhcmNoUGFyYW1zID0ga2luZE9mVGVzdCgnVVJMU2VhcmNoUGFyYW1zJyk7XG5cbmNvbnN0IFtpc1JlYWRhYmxlU3RyZWFtLCBpc1JlcXVlc3QsIGlzUmVzcG9uc2UsIGlzSGVhZGVyc10gPSBbJ1JlYWRhYmxlU3RyZWFtJywgJ1JlcXVlc3QnLCAnUmVzcG9uc2UnLCAnSGVhZGVycyddLm1hcChraW5kT2ZUZXN0KTtcblxuLyoqXG4gKiBUcmltIGV4Y2VzcyB3aGl0ZXNwYWNlIG9mZiB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBTdHJpbmcgdG8gdHJpbVxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2VcbiAqL1xuY29uc3QgdHJpbSA9IChzdHIpID0+IHN0ci50cmltID9cbiAgc3RyLnRyaW0oKSA6IHN0ci5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZywgJycpO1xuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSBbYWxsT3duS2V5cyA9IGZhbHNlXVxuICogQHJldHVybnMge2FueX1cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuLCB7YWxsT3duS2V5cyA9IGZhbHNlfSA9IHt9KSB7XG4gIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZFxuICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGk7XG4gIGxldCBsO1xuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yIChpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2ldLCBpLCBvYmopO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgb2JqZWN0IGtleXNcbiAgICBjb25zdCBrZXlzID0gYWxsT3duS2V5cyA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikgOiBPYmplY3Qua2V5cyhvYmopO1xuICAgIGNvbnN0IGxlbiA9IGtleXMubGVuZ3RoO1xuICAgIGxldCBrZXk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRLZXkob2JqLCBrZXkpIHtcbiAga2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICBsZXQgaSA9IGtleXMubGVuZ3RoO1xuICBsZXQgX2tleTtcbiAgd2hpbGUgKGktLSA+IDApIHtcbiAgICBfa2V5ID0ga2V5c1tpXTtcbiAgICBpZiAoa2V5ID09PSBfa2V5LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIHJldHVybiBfa2V5O1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuY29uc3QgX2dsb2JhbCA9ICgoKSA9PiB7XG4gIC8qZXNsaW50IG5vLXVuZGVmOjAqL1xuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBnbG9iYWxUaGlzO1xuICByZXR1cm4gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogZ2xvYmFsKVxufSkoKTtcblxuY29uc3QgaXNDb250ZXh0RGVmaW5lZCA9IChjb250ZXh0KSA9PiAhaXNVbmRlZmluZWQoY29udGV4dCkgJiYgY29udGV4dCAhPT0gX2dsb2JhbDtcblxuLyoqXG4gKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG4gKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cbiAqXG4gKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG4gKlxuICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIG1lcmdlKC8qIG9iajEsIG9iajIsIG9iajMsIC4uLiAqLykge1xuICBjb25zdCB7Y2FzZWxlc3N9ID0gaXNDb250ZXh0RGVmaW5lZCh0aGlzKSAmJiB0aGlzIHx8IHt9O1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgY29uc3QgYXNzaWduVmFsdWUgPSAodmFsLCBrZXkpID0+IHtcbiAgICBjb25zdCB0YXJnZXRLZXkgPSBjYXNlbGVzcyAmJiBmaW5kS2V5KHJlc3VsdCwga2V5KSB8fCBrZXk7XG4gICAgaWYgKGlzUGxhaW5PYmplY3QocmVzdWx0W3RhcmdldEtleV0pICYmIGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSBtZXJnZShyZXN1bHRbdGFyZ2V0S2V5XSwgdmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSBtZXJnZSh7fSwgdmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSB2YWwuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgZm9yIChsZXQgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgYXJndW1lbnRzW2ldICYmIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0b1xuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FsbE93bktleXNdXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG4gKi9cbmNvbnN0IGV4dGVuZCA9IChhLCBiLCB0aGlzQXJnLCB7YWxsT3duS2V5c309IHt9KSA9PiB7XG4gIGZvckVhY2goYiwgKHZhbCwga2V5KSA9PiB7XG4gICAgaWYgKHRoaXNBcmcgJiYgaXNGdW5jdGlvbih2YWwpKSB7XG4gICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0sIHthbGxPd25LZXlzfSk7XG4gIHJldHVybiBhO1xufVxuXG4vKipcbiAqIFJlbW92ZSBieXRlIG9yZGVyIG1hcmtlci4gVGhpcyBjYXRjaGVzIEVGIEJCIEJGICh0aGUgVVRGLTggQk9NKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50IHdpdGggQk9NXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gY29udGVudCB2YWx1ZSB3aXRob3V0IEJPTVxuICovXG5jb25zdCBzdHJpcEJPTSA9IChjb250ZW50KSA9PiB7XG4gIGlmIChjb250ZW50LmNoYXJDb2RlQXQoMCkgPT09IDB4RkVGRikge1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnNsaWNlKDEpO1xuICB9XG4gIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlclxuICogQHBhcmFtIHtmdW5jdGlvbn0gY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ29uc3RydWN0b3JcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcHJvcHNdXG4gKiBAcGFyYW0ge29iamVjdH0gW2Rlc2NyaXB0b3JzXVxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5jb25zdCBpbmhlcml0cyA9IChjb25zdHJ1Y3Rvciwgc3VwZXJDb25zdHJ1Y3RvciwgcHJvcHMsIGRlc2NyaXB0b3JzKSA9PiB7XG4gIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGRlc2NyaXB0b3JzKTtcbiAgY29uc3RydWN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY29uc3RydWN0b3I7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb25zdHJ1Y3RvciwgJ3N1cGVyJywge1xuICAgIHZhbHVlOiBzdXBlckNvbnN0cnVjdG9yLnByb3RvdHlwZVxuICB9KTtcbiAgcHJvcHMgJiYgT2JqZWN0LmFzc2lnbihjb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3BzKTtcbn1cblxuLyoqXG4gKiBSZXNvbHZlIG9iamVjdCB3aXRoIGRlZXAgcHJvdG90eXBlIGNoYWluIHRvIGEgZmxhdCBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2VPYmogc291cmNlIG9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IFtkZXN0T2JqXVxuICogQHBhcmFtIHtGdW5jdGlvbnxCb29sZWFufSBbZmlsdGVyXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BGaWx0ZXJdXG4gKlxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuY29uc3QgdG9GbGF0T2JqZWN0ID0gKHNvdXJjZU9iaiwgZGVzdE9iaiwgZmlsdGVyLCBwcm9wRmlsdGVyKSA9PiB7XG4gIGxldCBwcm9wcztcbiAgbGV0IGk7XG4gIGxldCBwcm9wO1xuICBjb25zdCBtZXJnZWQgPSB7fTtcblxuICBkZXN0T2JqID0gZGVzdE9iaiB8fCB7fTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsZXFlcWVxXG4gIGlmIChzb3VyY2VPYmogPT0gbnVsbCkgcmV0dXJuIGRlc3RPYmo7XG5cbiAgZG8ge1xuICAgIHByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc291cmNlT2JqKTtcbiAgICBpID0gcHJvcHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgICBwcm9wID0gcHJvcHNbaV07XG4gICAgICBpZiAoKCFwcm9wRmlsdGVyIHx8IHByb3BGaWx0ZXIocHJvcCwgc291cmNlT2JqLCBkZXN0T2JqKSkgJiYgIW1lcmdlZFtwcm9wXSkge1xuICAgICAgICBkZXN0T2JqW3Byb3BdID0gc291cmNlT2JqW3Byb3BdO1xuICAgICAgICBtZXJnZWRbcHJvcF0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBzb3VyY2VPYmogPSBmaWx0ZXIgIT09IGZhbHNlICYmIGdldFByb3RvdHlwZU9mKHNvdXJjZU9iaik7XG4gIH0gd2hpbGUgKHNvdXJjZU9iaiAmJiAoIWZpbHRlciB8fCBmaWx0ZXIoc291cmNlT2JqLCBkZXN0T2JqKSkgJiYgc291cmNlT2JqICE9PSBPYmplY3QucHJvdG90eXBlKTtcblxuICByZXR1cm4gZGVzdE9iajtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBzdHJpbmcgZW5kcyB3aXRoIHRoZSBjaGFyYWN0ZXJzIG9mIGEgc3BlY2lmaWVkIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hTdHJpbmdcbiAqIEBwYXJhbSB7TnVtYmVyfSBbcG9zaXRpb249IDBdXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmNvbnN0IGVuZHNXaXRoID0gKHN0ciwgc2VhcmNoU3RyaW5nLCBwb3NpdGlvbikgPT4ge1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgaWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQgfHwgcG9zaXRpb24gPiBzdHIubGVuZ3RoKSB7XG4gICAgcG9zaXRpb24gPSBzdHIubGVuZ3RoO1xuICB9XG4gIHBvc2l0aW9uIC09IHNlYXJjaFN0cmluZy5sZW5ndGg7XG4gIGNvbnN0IGxhc3RJbmRleCA9IHN0ci5pbmRleE9mKHNlYXJjaFN0cmluZywgcG9zaXRpb24pO1xuICByZXR1cm4gbGFzdEluZGV4ICE9PSAtMSAmJiBsYXN0SW5kZXggPT09IHBvc2l0aW9uO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBuZXcgYXJyYXkgZnJvbSBhcnJheSBsaWtlIG9iamVjdCBvciBudWxsIGlmIGZhaWxlZFxuICpcbiAqIEBwYXJhbSB7Kn0gW3RoaW5nXVxuICpcbiAqIEByZXR1cm5zIHs/QXJyYXl9XG4gKi9cbmNvbnN0IHRvQXJyYXkgPSAodGhpbmcpID0+IHtcbiAgaWYgKCF0aGluZykgcmV0dXJuIG51bGw7XG4gIGlmIChpc0FycmF5KHRoaW5nKSkgcmV0dXJuIHRoaW5nO1xuICBsZXQgaSA9IHRoaW5nLmxlbmd0aDtcbiAgaWYgKCFpc051bWJlcihpKSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGFyciA9IG5ldyBBcnJheShpKTtcbiAgd2hpbGUgKGktLSA+IDApIHtcbiAgICBhcnJbaV0gPSB0aGluZ1tpXTtcbiAgfVxuICByZXR1cm4gYXJyO1xufVxuXG4vKipcbiAqIENoZWNraW5nIGlmIHRoZSBVaW50OEFycmF5IGV4aXN0cyBhbmQgaWYgaXQgZG9lcywgaXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGlmIHRoZVxuICogdGhpbmcgcGFzc2VkIGluIGlzIGFuIGluc3RhbmNlIG9mIFVpbnQ4QXJyYXlcbiAqXG4gKiBAcGFyYW0ge1R5cGVkQXJyYXl9XG4gKlxuICogQHJldHVybnMge0FycmF5fVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuY29uc3QgaXNUeXBlZEFycmF5ID0gKFR5cGVkQXJyYXkgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICByZXR1cm4gdGhpbmcgPT4ge1xuICAgIHJldHVybiBUeXBlZEFycmF5ICYmIHRoaW5nIGluc3RhbmNlb2YgVHlwZWRBcnJheTtcbiAgfTtcbn0pKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiBnZXRQcm90b3R5cGVPZihVaW50OEFycmF5KSk7XG5cbi8qKlxuICogRm9yIGVhY2ggZW50cnkgaW4gdGhlIG9iamVjdCwgY2FsbCB0aGUgZnVuY3Rpb24gd2l0aCB0aGUga2V5IGFuZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdDxhbnksIGFueT59IG9iaiAtIFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBlbnRyeS5cbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuY29uc3QgZm9yRWFjaEVudHJ5ID0gKG9iaiwgZm4pID0+IHtcbiAgY29uc3QgZ2VuZXJhdG9yID0gb2JqICYmIG9ialtpdGVyYXRvcl07XG5cbiAgY29uc3QgX2l0ZXJhdG9yID0gZ2VuZXJhdG9yLmNhbGwob2JqKTtcblxuICBsZXQgcmVzdWx0O1xuXG4gIHdoaWxlICgocmVzdWx0ID0gX2l0ZXJhdG9yLm5leHQoKSkgJiYgIXJlc3VsdC5kb25lKSB7XG4gICAgY29uc3QgcGFpciA9IHJlc3VsdC52YWx1ZTtcbiAgICBmbi5jYWxsKG9iaiwgcGFpclswXSwgcGFpclsxXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBJdCB0YWtlcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhbmQgYSBzdHJpbmcsIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIGFsbCB0aGUgbWF0Y2hlc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWdFeHAgLSBUaGUgcmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIGFnYWluc3QuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byBzZWFyY2guXG4gKlxuICogQHJldHVybnMge0FycmF5PGJvb2xlYW4+fVxuICovXG5jb25zdCBtYXRjaEFsbCA9IChyZWdFeHAsIHN0cikgPT4ge1xuICBsZXQgbWF0Y2hlcztcbiAgY29uc3QgYXJyID0gW107XG5cbiAgd2hpbGUgKChtYXRjaGVzID0gcmVnRXhwLmV4ZWMoc3RyKSkgIT09IG51bGwpIHtcbiAgICBhcnIucHVzaChtYXRjaGVzKTtcbiAgfVxuXG4gIHJldHVybiBhcnI7XG59XG5cbi8qIENoZWNraW5nIGlmIHRoZSBraW5kT2ZUZXN0IGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSB3aGVuIHBhc3NlZCBhbiBIVE1MRm9ybUVsZW1lbnQuICovXG5jb25zdCBpc0hUTUxGb3JtID0ga2luZE9mVGVzdCgnSFRNTEZvcm1FbGVtZW50Jyk7XG5cbmNvbnN0IHRvQ2FtZWxDYXNlID0gc3RyID0+IHtcbiAgcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1stX1xcc10oW2EtelxcZF0pKFxcdyopL2csXG4gICAgZnVuY3Rpb24gcmVwbGFjZXIobSwgcDEsIHAyKSB7XG4gICAgICByZXR1cm4gcDEudG9VcHBlckNhc2UoKSArIHAyO1xuICAgIH1cbiAgKTtcbn07XG5cbi8qIENyZWF0aW5nIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGNoZWNrIGlmIGFuIG9iamVjdCBoYXMgYSBwcm9wZXJ0eS4gKi9cbmNvbnN0IGhhc093blByb3BlcnR5ID0gKCh7aGFzT3duUHJvcGVydHl9KSA9PiAob2JqLCBwcm9wKSA9PiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpKE9iamVjdC5wcm90b3R5cGUpO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBSZWdFeHAgb2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuY29uc3QgaXNSZWdFeHAgPSBraW5kT2ZUZXN0KCdSZWdFeHAnKTtcblxuY29uc3QgcmVkdWNlRGVzY3JpcHRvcnMgPSAob2JqLCByZWR1Y2VyKSA9PiB7XG4gIGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMob2JqKTtcbiAgY29uc3QgcmVkdWNlZERlc2NyaXB0b3JzID0ge307XG5cbiAgZm9yRWFjaChkZXNjcmlwdG9ycywgKGRlc2NyaXB0b3IsIG5hbWUpID0+IHtcbiAgICBsZXQgcmV0O1xuICAgIGlmICgocmV0ID0gcmVkdWNlcihkZXNjcmlwdG9yLCBuYW1lLCBvYmopKSAhPT0gZmFsc2UpIHtcbiAgICAgIHJlZHVjZWREZXNjcmlwdG9yc1tuYW1lXSA9IHJldCB8fCBkZXNjcmlwdG9yO1xuICAgIH1cbiAgfSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCByZWR1Y2VkRGVzY3JpcHRvcnMpO1xufVxuXG4vKipcbiAqIE1ha2VzIGFsbCBtZXRob2RzIHJlYWQtb25seVxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5cbmNvbnN0IGZyZWV6ZU1ldGhvZHMgPSAob2JqKSA9PiB7XG4gIHJlZHVjZURlc2NyaXB0b3JzKG9iaiwgKGRlc2NyaXB0b3IsIG5hbWUpID0+IHtcbiAgICAvLyBza2lwIHJlc3RyaWN0ZWQgcHJvcHMgaW4gc3RyaWN0IG1vZGVcbiAgICBpZiAoaXNGdW5jdGlvbihvYmopICYmIFsnYXJndW1lbnRzJywgJ2NhbGxlcicsICdjYWxsZWUnXS5pbmRleE9mKG5hbWUpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHZhbHVlID0gb2JqW25hbWVdO1xuXG4gICAgaWYgKCFpc0Z1bmN0aW9uKHZhbHVlKSkgcmV0dXJuO1xuXG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZmFsc2U7XG5cbiAgICBpZiAoJ3dyaXRhYmxlJyBpbiBkZXNjcmlwdG9yKSB7XG4gICAgICBkZXNjcmlwdG9yLndyaXRhYmxlID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFkZXNjcmlwdG9yLnNldCkge1xuICAgICAgZGVzY3JpcHRvci5zZXQgPSAoKSA9PiB7XG4gICAgICAgIHRocm93IEVycm9yKCdDYW4gbm90IHJld3JpdGUgcmVhZC1vbmx5IG1ldGhvZCBcXCcnICsgbmFtZSArICdcXCcnKTtcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuY29uc3QgdG9PYmplY3RTZXQgPSAoYXJyYXlPclN0cmluZywgZGVsaW1pdGVyKSA9PiB7XG4gIGNvbnN0IG9iaiA9IHt9O1xuXG4gIGNvbnN0IGRlZmluZSA9IChhcnIpID0+IHtcbiAgICBhcnIuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICBvYmpbdmFsdWVdID0gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIGlzQXJyYXkoYXJyYXlPclN0cmluZykgPyBkZWZpbmUoYXJyYXlPclN0cmluZykgOiBkZWZpbmUoU3RyaW5nKGFycmF5T3JTdHJpbmcpLnNwbGl0KGRlbGltaXRlcikpO1xuXG4gIHJldHVybiBvYmo7XG59XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fVxuXG5jb25zdCB0b0Zpbml0ZU51bWJlciA9ICh2YWx1ZSwgZGVmYXVsdFZhbHVlKSA9PiB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIE51bWJlci5pc0Zpbml0ZSh2YWx1ZSA9ICt2YWx1ZSkgPyB2YWx1ZSA6IGRlZmF1bHRWYWx1ZTtcbn1cblxuLyoqXG4gKiBJZiB0aGUgdGhpbmcgaXMgYSBGb3JtRGF0YSBvYmplY3QsIHJldHVybiB0cnVlLCBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLlxuICpcbiAqIEBwYXJhbSB7dW5rbm93bn0gdGhpbmcgLSBUaGUgdGhpbmcgdG8gY2hlY2suXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzU3BlY0NvbXBsaWFudEZvcm0odGhpbmcpIHtcbiAgcmV0dXJuICEhKHRoaW5nICYmIGlzRnVuY3Rpb24odGhpbmcuYXBwZW5kKSAmJiB0aGluZ1t0b1N0cmluZ1RhZ10gPT09ICdGb3JtRGF0YScgJiYgdGhpbmdbaXRlcmF0b3JdKTtcbn1cblxuY29uc3QgdG9KU09OT2JqZWN0ID0gKG9iaikgPT4ge1xuICBjb25zdCBzdGFjayA9IG5ldyBBcnJheSgxMCk7XG5cbiAgY29uc3QgdmlzaXQgPSAoc291cmNlLCBpKSA9PiB7XG5cbiAgICBpZiAoaXNPYmplY3Qoc291cmNlKSkge1xuICAgICAgaWYgKHN0YWNrLmluZGV4T2Yoc291cmNlKSA+PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYoISgndG9KU09OJyBpbiBzb3VyY2UpKSB7XG4gICAgICAgIHN0YWNrW2ldID0gc291cmNlO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBpc0FycmF5KHNvdXJjZSkgPyBbXSA6IHt9O1xuXG4gICAgICAgIGZvckVhY2goc291cmNlLCAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlZHVjZWRWYWx1ZSA9IHZpc2l0KHZhbHVlLCBpICsgMSk7XG4gICAgICAgICAgIWlzVW5kZWZpbmVkKHJlZHVjZWRWYWx1ZSkgJiYgKHRhcmdldFtrZXldID0gcmVkdWNlZFZhbHVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3RhY2tbaV0gPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc291cmNlO1xuICB9XG5cbiAgcmV0dXJuIHZpc2l0KG9iaiwgMCk7XG59XG5cbmNvbnN0IGlzQXN5bmNGbiA9IGtpbmRPZlRlc3QoJ0FzeW5jRnVuY3Rpb24nKTtcblxuY29uc3QgaXNUaGVuYWJsZSA9ICh0aGluZykgPT5cbiAgdGhpbmcgJiYgKGlzT2JqZWN0KHRoaW5nKSB8fCBpc0Z1bmN0aW9uKHRoaW5nKSkgJiYgaXNGdW5jdGlvbih0aGluZy50aGVuKSAmJiBpc0Z1bmN0aW9uKHRoaW5nLmNhdGNoKTtcblxuLy8gb3JpZ2luYWwgY29kZVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL0RpZ2l0YWxCcmFpbkpTL0F4aW9zUHJvbWlzZS9ibG9iLzE2ZGVhYjEzNzEwZWMwOTc3OTkyMjEzMWYzZmE1OTU0MzIwZjgzYWIvbGliL3V0aWxzLmpzI0wxMS1MMzRcblxuY29uc3QgX3NldEltbWVkaWF0ZSA9ICgoc2V0SW1tZWRpYXRlU3VwcG9ydGVkLCBwb3N0TWVzc2FnZVN1cHBvcnRlZCkgPT4ge1xuICBpZiAoc2V0SW1tZWRpYXRlU3VwcG9ydGVkKSB7XG4gICAgcmV0dXJuIHNldEltbWVkaWF0ZTtcbiAgfVxuXG4gIHJldHVybiBwb3N0TWVzc2FnZVN1cHBvcnRlZCA/ICgodG9rZW4sIGNhbGxiYWNrcykgPT4ge1xuICAgIF9nbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKHtzb3VyY2UsIGRhdGF9KSA9PiB7XG4gICAgICBpZiAoc291cmNlID09PSBfZ2xvYmFsICYmIGRhdGEgPT09IHRva2VuKSB7XG4gICAgICAgIGNhbGxiYWNrcy5sZW5ndGggJiYgY2FsbGJhY2tzLnNoaWZ0KCkoKTtcbiAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cbiAgICByZXR1cm4gKGNiKSA9PiB7XG4gICAgICBjYWxsYmFja3MucHVzaChjYik7XG4gICAgICBfZ2xvYmFsLnBvc3RNZXNzYWdlKHRva2VuLCBcIipcIik7XG4gICAgfVxuICB9KShgYXhpb3NAJHtNYXRoLnJhbmRvbSgpfWAsIFtdKSA6IChjYikgPT4gc2V0VGltZW91dChjYik7XG59KShcbiAgdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJyxcbiAgaXNGdW5jdGlvbihfZ2xvYmFsLnBvc3RNZXNzYWdlKVxuKTtcblxuY29uc3QgYXNhcCA9IHR5cGVvZiBxdWV1ZU1pY3JvdGFzayAhPT0gJ3VuZGVmaW5lZCcgP1xuICBxdWV1ZU1pY3JvdGFzay5iaW5kKF9nbG9iYWwpIDogKCB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5uZXh0VGljayB8fCBfc2V0SW1tZWRpYXRlKTtcblxuLy8gKioqKioqKioqKioqKioqKioqKioqXG5cblxuY29uc3QgaXNJdGVyYWJsZSA9ICh0aGluZykgPT4gdGhpbmcgIT0gbnVsbCAmJiBpc0Z1bmN0aW9uKHRoaW5nW2l0ZXJhdG9yXSk7XG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBpc0FycmF5LFxuICBpc0FycmF5QnVmZmVyLFxuICBpc0J1ZmZlcixcbiAgaXNGb3JtRGF0YSxcbiAgaXNBcnJheUJ1ZmZlclZpZXcsXG4gIGlzU3RyaW5nLFxuICBpc051bWJlcixcbiAgaXNCb29sZWFuLFxuICBpc09iamVjdCxcbiAgaXNQbGFpbk9iamVjdCxcbiAgaXNSZWFkYWJsZVN0cmVhbSxcbiAgaXNSZXF1ZXN0LFxuICBpc1Jlc3BvbnNlLFxuICBpc0hlYWRlcnMsXG4gIGlzVW5kZWZpbmVkLFxuICBpc0RhdGUsXG4gIGlzRmlsZSxcbiAgaXNCbG9iLFxuICBpc1JlZ0V4cCxcbiAgaXNGdW5jdGlvbixcbiAgaXNTdHJlYW0sXG4gIGlzVVJMU2VhcmNoUGFyYW1zLFxuICBpc1R5cGVkQXJyYXksXG4gIGlzRmlsZUxpc3QsXG4gIGZvckVhY2gsXG4gIG1lcmdlLFxuICBleHRlbmQsXG4gIHRyaW0sXG4gIHN0cmlwQk9NLFxuICBpbmhlcml0cyxcbiAgdG9GbGF0T2JqZWN0LFxuICBraW5kT2YsXG4gIGtpbmRPZlRlc3QsXG4gIGVuZHNXaXRoLFxuICB0b0FycmF5LFxuICBmb3JFYWNoRW50cnksXG4gIG1hdGNoQWxsLFxuICBpc0hUTUxGb3JtLFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgaGFzT3duUHJvcDogaGFzT3duUHJvcGVydHksIC8vIGFuIGFsaWFzIHRvIGF2b2lkIEVTTGludCBuby1wcm90b3R5cGUtYnVpbHRpbnMgZGV0ZWN0aW9uXG4gIHJlZHVjZURlc2NyaXB0b3JzLFxuICBmcmVlemVNZXRob2RzLFxuICB0b09iamVjdFNldCxcbiAgdG9DYW1lbENhc2UsXG4gIG5vb3AsXG4gIHRvRmluaXRlTnVtYmVyLFxuICBmaW5kS2V5LFxuICBnbG9iYWw6IF9nbG9iYWwsXG4gIGlzQ29udGV4dERlZmluZWQsXG4gIGlzU3BlY0NvbXBsaWFudEZvcm0sXG4gIHRvSlNPTk9iamVjdCxcbiAgaXNBc3luY0ZuLFxuICBpc1RoZW5hYmxlLFxuICBzZXRJbW1lZGlhdGU6IF9zZXRJbW1lZGlhdGUsXG4gIGFzYXAsXG4gIGlzSXRlcmFibGVcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZ10gVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xuZnVuY3Rpb24gQXhpb3NFcnJvcihtZXNzYWdlLCBjb2RlLCBjb25maWcsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIEVycm9yLmNhbGwodGhpcyk7XG5cbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5zdGFjayA9IChuZXcgRXJyb3IoKSkuc3RhY2s7XG4gIH1cblxuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB0aGlzLm5hbWUgPSAnQXhpb3NFcnJvcic7XG4gIGNvZGUgJiYgKHRoaXMuY29kZSA9IGNvZGUpO1xuICBjb25maWcgJiYgKHRoaXMuY29uZmlnID0gY29uZmlnKTtcbiAgcmVxdWVzdCAmJiAodGhpcy5yZXF1ZXN0ID0gcmVxdWVzdCk7XG4gIGlmIChyZXNwb25zZSkge1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cyA/IHJlc3BvbnNlLnN0YXR1cyA6IG51bGw7XG4gIH1cbn1cblxudXRpbHMuaW5oZXJpdHMoQXhpb3NFcnJvciwgRXJyb3IsIHtcbiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIFN0YW5kYXJkXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAvLyBNaWNyb3NvZnRcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgbnVtYmVyOiB0aGlzLm51bWJlcixcbiAgICAgIC8vIE1vemlsbGFcbiAgICAgIGZpbGVOYW1lOiB0aGlzLmZpbGVOYW1lLFxuICAgICAgbGluZU51bWJlcjogdGhpcy5saW5lTnVtYmVyLFxuICAgICAgY29sdW1uTnVtYmVyOiB0aGlzLmNvbHVtbk51bWJlcixcbiAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLFxuICAgICAgLy8gQXhpb3NcbiAgICAgIGNvbmZpZzogdXRpbHMudG9KU09OT2JqZWN0KHRoaXMuY29uZmlnKSxcbiAgICAgIGNvZGU6IHRoaXMuY29kZSxcbiAgICAgIHN0YXR1czogdGhpcy5zdGF0dXNcbiAgICB9O1xuICB9XG59KTtcblxuY29uc3QgcHJvdG90eXBlID0gQXhpb3NFcnJvci5wcm90b3R5cGU7XG5jb25zdCBkZXNjcmlwdG9ycyA9IHt9O1xuXG5bXG4gICdFUlJfQkFEX09QVElPTl9WQUxVRScsXG4gICdFUlJfQkFEX09QVElPTicsXG4gICdFQ09OTkFCT1JURUQnLFxuICAnRVRJTUVET1VUJyxcbiAgJ0VSUl9ORVRXT1JLJyxcbiAgJ0VSUl9GUl9UT09fTUFOWV9SRURJUkVDVFMnLFxuICAnRVJSX0RFUFJFQ0FURUQnLFxuICAnRVJSX0JBRF9SRVNQT05TRScsXG4gICdFUlJfQkFEX1JFUVVFU1QnLFxuICAnRVJSX0NBTkNFTEVEJyxcbiAgJ0VSUl9OT1RfU1VQUE9SVCcsXG4gICdFUlJfSU5WQUxJRF9VUkwnXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXS5mb3JFYWNoKGNvZGUgPT4ge1xuICBkZXNjcmlwdG9yc1tjb2RlXSA9IHt2YWx1ZTogY29kZX07XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQXhpb3NFcnJvciwgZGVzY3JpcHRvcnMpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgJ2lzQXhpb3NFcnJvcicsIHt2YWx1ZTogdHJ1ZX0pO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuQXhpb3NFcnJvci5mcm9tID0gKGVycm9yLCBjb2RlLCBjb25maWcsIHJlcXVlc3QsIHJlc3BvbnNlLCBjdXN0b21Qcm9wcykgPT4ge1xuICBjb25zdCBheGlvc0Vycm9yID0gT2JqZWN0LmNyZWF0ZShwcm90b3R5cGUpO1xuXG4gIHV0aWxzLnRvRmxhdE9iamVjdChlcnJvciwgYXhpb3NFcnJvciwgZnVuY3Rpb24gZmlsdGVyKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IEVycm9yLnByb3RvdHlwZTtcbiAgfSwgcHJvcCA9PiB7XG4gICAgcmV0dXJuIHByb3AgIT09ICdpc0F4aW9zRXJyb3InO1xuICB9KTtcblxuICBBeGlvc0Vycm9yLmNhbGwoYXhpb3NFcnJvciwgZXJyb3IubWVzc2FnZSwgY29kZSwgY29uZmlnLCByZXF1ZXN0LCByZXNwb25zZSk7XG5cbiAgYXhpb3NFcnJvci5jYXVzZSA9IGVycm9yO1xuXG4gIGF4aW9zRXJyb3IubmFtZSA9IGVycm9yLm5hbWU7XG5cbiAgY3VzdG9tUHJvcHMgJiYgT2JqZWN0LmFzc2lnbihheGlvc0Vycm9yLCBjdXN0b21Qcm9wcyk7XG5cbiAgcmV0dXJuIGF4aW9zRXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBeGlvc0Vycm9yO1xuIiwgIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBzdHJpY3RcbmV4cG9ydCBkZWZhdWx0IG51bGw7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcbi8vIHRlbXBvcmFyeSBob3RmaXggdG8gYXZvaWQgY2lyY3VsYXIgcmVmZXJlbmNlcyB1bnRpbCBBeGlvc1VSTFNlYXJjaFBhcmFtcyBpcyByZWZhY3RvcmVkXG5pbXBvcnQgUGxhdGZvcm1Gb3JtRGF0YSBmcm9tICcuLi9wbGF0Zm9ybS9ub2RlL2NsYXNzZXMvRm9ybURhdGEuanMnO1xuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGdpdmVuIHRoaW5nIGlzIGEgYXJyYXkgb3IganMgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aGluZyAtIFRoZSBvYmplY3Qgb3IgYXJyYXkgdG8gYmUgdmlzaXRlZC5cbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNWaXNpdGFibGUodGhpbmcpIHtcbiAgcmV0dXJuIHV0aWxzLmlzUGxhaW5PYmplY3QodGhpbmcpIHx8IHV0aWxzLmlzQXJyYXkodGhpbmcpO1xufVxuXG4vKipcbiAqIEl0IHJlbW92ZXMgdGhlIGJyYWNrZXRzIGZyb20gdGhlIGVuZCBvZiBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBUaGUga2V5IG9mIHRoZSBwYXJhbWV0ZXIuXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gdGhlIGtleSB3aXRob3V0IHRoZSBicmFja2V0cy5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQnJhY2tldHMoa2V5KSB7XG4gIHJldHVybiB1dGlscy5lbmRzV2l0aChrZXksICdbXScpID8ga2V5LnNsaWNlKDAsIC0yKSA6IGtleTtcbn1cblxuLyoqXG4gKiBJdCB0YWtlcyBhIHBhdGgsIGEga2V5LCBhbmQgYSBib29sZWFuLCBhbmQgcmV0dXJucyBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGggdG8gdGhlIGN1cnJlbnQga2V5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRoZSBrZXkgb2YgdGhlIGN1cnJlbnQgb2JqZWN0IGJlaW5nIGl0ZXJhdGVkIG92ZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gZG90cyAtIElmIHRydWUsIHRoZSBrZXkgd2lsbCBiZSByZW5kZXJlZCB3aXRoIGRvdHMgaW5zdGVhZCBvZiBicmFja2V0cy5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcGF0aCB0byB0aGUgY3VycmVudCBrZXkuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlcktleShwYXRoLCBrZXksIGRvdHMpIHtcbiAgaWYgKCFwYXRoKSByZXR1cm4ga2V5O1xuICByZXR1cm4gcGF0aC5jb25jYXQoa2V5KS5tYXAoZnVuY3Rpb24gZWFjaCh0b2tlbiwgaSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHRva2VuID0gcmVtb3ZlQnJhY2tldHModG9rZW4pO1xuICAgIHJldHVybiAhZG90cyAmJiBpID8gJ1snICsgdG9rZW4gKyAnXScgOiB0b2tlbjtcbiAgfSkuam9pbihkb3RzID8gJy4nIDogJycpO1xufVxuXG4vKipcbiAqIElmIHRoZSBhcnJheSBpcyBhbiBhcnJheSBhbmQgbm9uZSBvZiBpdHMgZWxlbWVudHMgYXJlIHZpc2l0YWJsZSwgdGhlbiBpdCdzIGEgZmxhdCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PGFueT59IGFyciAtIFRoZSBhcnJheSB0byBjaGVja1xuICpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0ZsYXRBcnJheShhcnIpIHtcbiAgcmV0dXJuIHV0aWxzLmlzQXJyYXkoYXJyKSAmJiAhYXJyLnNvbWUoaXNWaXNpdGFibGUpO1xufVxuXG5jb25zdCBwcmVkaWNhdGVzID0gdXRpbHMudG9GbGF0T2JqZWN0KHV0aWxzLCB7fSwgbnVsbCwgZnVuY3Rpb24gZmlsdGVyKHByb3ApIHtcbiAgcmV0dXJuIC9eaXNbQS1aXS8udGVzdChwcm9wKTtcbn0pO1xuXG4vKipcbiAqIENvbnZlcnQgYSBkYXRhIG9iamVjdCB0byBGb3JtRGF0YVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7P09iamVjdH0gW2Zvcm1EYXRhXVxuICogQHBhcmFtIHs/T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLnZpc2l0b3JdXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLm1ldGFUb2tlbnMgPSB0cnVlXVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5kb3RzID0gZmFsc2VdXG4gKiBAcGFyYW0gez9Cb29sZWFufSBbb3B0aW9ucy5pbmRleGVzID0gZmFsc2VdXG4gKlxuICogQHJldHVybnMge09iamVjdH1cbiAqKi9cblxuLyoqXG4gKiBJdCBjb252ZXJ0cyBhbiBvYmplY3QgaW50byBhIEZvcm1EYXRhIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0PGFueSwgYW55Pn0gb2JqIC0gVGhlIG9iamVjdCB0byBjb252ZXJ0IHRvIGZvcm0gZGF0YS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtRGF0YSAtIFRoZSBGb3JtRGF0YSBvYmplY3QgdG8gYXBwZW5kIHRvLlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBhbnk+fSBvcHRpb25zXG4gKlxuICogQHJldHVybnNcbiAqL1xuZnVuY3Rpb24gdG9Gb3JtRGF0YShvYmosIGZvcm1EYXRhLCBvcHRpb25zKSB7XG4gIGlmICghdXRpbHMuaXNPYmplY3Qob2JqKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3RhcmdldCBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIGZvcm1EYXRhID0gZm9ybURhdGEgfHwgbmV3IChQbGF0Zm9ybUZvcm1EYXRhIHx8IEZvcm1EYXRhKSgpO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBvcHRpb25zID0gdXRpbHMudG9GbGF0T2JqZWN0KG9wdGlvbnMsIHtcbiAgICBtZXRhVG9rZW5zOiB0cnVlLFxuICAgIGRvdHM6IGZhbHNlLFxuICAgIGluZGV4ZXM6IGZhbHNlXG4gIH0sIGZhbHNlLCBmdW5jdGlvbiBkZWZpbmVkKG9wdGlvbiwgc291cmNlKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsZXFlcWVxXG4gICAgcmV0dXJuICF1dGlscy5pc1VuZGVmaW5lZChzb3VyY2Vbb3B0aW9uXSk7XG4gIH0pO1xuXG4gIGNvbnN0IG1ldGFUb2tlbnMgPSBvcHRpb25zLm1ldGFUb2tlbnM7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICBjb25zdCB2aXNpdG9yID0gb3B0aW9ucy52aXNpdG9yIHx8IGRlZmF1bHRWaXNpdG9yO1xuICBjb25zdCBkb3RzID0gb3B0aW9ucy5kb3RzO1xuICBjb25zdCBpbmRleGVzID0gb3B0aW9ucy5pbmRleGVzO1xuICBjb25zdCBfQmxvYiA9IG9wdGlvbnMuQmxvYiB8fCB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCcgJiYgQmxvYjtcbiAgY29uc3QgdXNlQmxvYiA9IF9CbG9iICYmIHV0aWxzLmlzU3BlY0NvbXBsaWFudEZvcm0oZm9ybURhdGEpO1xuXG4gIGlmICghdXRpbHMuaXNGdW5jdGlvbih2aXNpdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Zpc2l0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBmdW5jdGlvbiBjb252ZXJ0VmFsdWUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiAnJztcblxuICAgIGlmICh1dGlscy5pc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWUudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBpZiAodXRpbHMuaXNCb29sZWFuKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VCbG9iICYmIHV0aWxzLmlzQmxvYih2YWx1ZSkpIHtcbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKCdCbG9iIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSBhIEJ1ZmZlciBpbnN0ZWFkLicpO1xuICAgIH1cblxuICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyKHZhbHVlKSB8fCB1dGlscy5pc1R5cGVkQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdXNlQmxvYiAmJiB0eXBlb2YgQmxvYiA9PT0gJ2Z1bmN0aW9uJyA/IG5ldyBCbG9iKFt2YWx1ZV0pIDogQnVmZmVyLmZyb20odmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZhdWx0IHZpc2l0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBrZXlcbiAgICogQHBhcmFtIHtBcnJheTxTdHJpbmd8TnVtYmVyPn0gcGF0aFxuICAgKiBAdGhpcyB7Rm9ybURhdGF9XG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSByZXR1cm4gdHJ1ZSB0byB2aXNpdCB0aGUgZWFjaCBwcm9wIG9mIHRoZSB2YWx1ZSByZWN1cnNpdmVseVxuICAgKi9cbiAgZnVuY3Rpb24gZGVmYXVsdFZpc2l0b3IodmFsdWUsIGtleSwgcGF0aCkge1xuICAgIGxldCBhcnIgPSB2YWx1ZTtcblxuICAgIGlmICh2YWx1ZSAmJiAhcGF0aCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAodXRpbHMuZW5kc1dpdGgoa2V5LCAne30nKSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAga2V5ID0gbWV0YVRva2VucyA/IGtleSA6IGtleS5zbGljZSgwLCAtMik7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICh1dGlscy5pc0FycmF5KHZhbHVlKSAmJiBpc0ZsYXRBcnJheSh2YWx1ZSkpIHx8XG4gICAgICAgICgodXRpbHMuaXNGaWxlTGlzdCh2YWx1ZSkgfHwgdXRpbHMuZW5kc1dpdGgoa2V5LCAnW10nKSkgJiYgKGFyciA9IHV0aWxzLnRvQXJyYXkodmFsdWUpKVxuICAgICAgICApKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBrZXkgPSByZW1vdmVCcmFja2V0cyhrZXkpO1xuXG4gICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIGVhY2goZWwsIGluZGV4KSB7XG4gICAgICAgICAgISh1dGlscy5pc1VuZGVmaW5lZChlbCkgfHwgZWwgPT09IG51bGwpICYmIGZvcm1EYXRhLmFwcGVuZChcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgICAgICAgICAgaW5kZXhlcyA9PT0gdHJ1ZSA/IHJlbmRlcktleShba2V5XSwgaW5kZXgsIGRvdHMpIDogKGluZGV4ZXMgPT09IG51bGwgPyBrZXkgOiBrZXkgKyAnW10nKSxcbiAgICAgICAgICAgIGNvbnZlcnRWYWx1ZShlbClcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc1Zpc2l0YWJsZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZvcm1EYXRhLmFwcGVuZChyZW5kZXJLZXkocGF0aCwga2V5LCBkb3RzKSwgY29udmVydFZhbHVlKHZhbHVlKSk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBzdGFjayA9IFtdO1xuXG4gIGNvbnN0IGV4cG9zZWRIZWxwZXJzID0gT2JqZWN0LmFzc2lnbihwcmVkaWNhdGVzLCB7XG4gICAgZGVmYXVsdFZpc2l0b3IsXG4gICAgY29udmVydFZhbHVlLFxuICAgIGlzVmlzaXRhYmxlXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGJ1aWxkKHZhbHVlLCBwYXRoKSB7XG4gICAgaWYgKHV0aWxzLmlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuO1xuXG4gICAgaWYgKHN0YWNrLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgICAgdGhyb3cgRXJyb3IoJ0NpcmN1bGFyIHJlZmVyZW5jZSBkZXRlY3RlZCBpbiAnICsgcGF0aC5qb2luKCcuJykpO1xuICAgIH1cblxuICAgIHN0YWNrLnB1c2godmFsdWUpO1xuXG4gICAgdXRpbHMuZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24gZWFjaChlbCwga2V5KSB7XG4gICAgICBjb25zdCByZXN1bHQgPSAhKHV0aWxzLmlzVW5kZWZpbmVkKGVsKSB8fCBlbCA9PT0gbnVsbCkgJiYgdmlzaXRvci5jYWxsKFxuICAgICAgICBmb3JtRGF0YSwgZWwsIHV0aWxzLmlzU3RyaW5nKGtleSkgPyBrZXkudHJpbSgpIDoga2V5LCBwYXRoLCBleHBvc2VkSGVscGVyc1xuICAgICAgKTtcblxuICAgICAgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICBidWlsZChlbCwgcGF0aCA/IHBhdGguY29uY2F0KGtleSkgOiBba2V5XSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzdGFjay5wb3AoKTtcbiAgfVxuXG4gIGlmICghdXRpbHMuaXNPYmplY3Qob2JqKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2RhdGEgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgfVxuXG4gIGJ1aWxkKG9iaik7XG5cbiAgcmV0dXJuIGZvcm1EYXRhO1xufVxuXG5leHBvcnQgZGVmYXVsdCB0b0Zvcm1EYXRhO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHRvRm9ybURhdGEgZnJvbSAnLi90b0Zvcm1EYXRhLmpzJztcblxuLyoqXG4gKiBJdCBlbmNvZGVzIGEgc3RyaW5nIGJ5IHJlcGxhY2luZyBhbGwgY2hhcmFjdGVycyB0aGF0IGFyZSBub3QgaW4gdGhlIHVucmVzZXJ2ZWQgc2V0IHdpdGhcbiAqIHRoZWlyIHBlcmNlbnQtZW5jb2RlZCBlcXVpdmFsZW50c1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIGVuY29kZS5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZW5jb2RlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGVuY29kZShzdHIpIHtcbiAgY29uc3QgY2hhck1hcCA9IHtcbiAgICAnISc6ICclMjEnLFxuICAgIFwiJ1wiOiAnJTI3JyxcbiAgICAnKCc6ICclMjgnLFxuICAgICcpJzogJyUyOScsXG4gICAgJ34nOiAnJTdFJyxcbiAgICAnJTIwJzogJysnLFxuICAgICclMDAnOiAnXFx4MDAnXG4gIH07XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyKS5yZXBsYWNlKC9bIScoKX5dfCUyMHwlMDAvZywgZnVuY3Rpb24gcmVwbGFjZXIobWF0Y2gpIHtcbiAgICByZXR1cm4gY2hhck1hcFttYXRjaF07XG4gIH0pO1xufVxuXG4vKipcbiAqIEl0IHRha2VzIGEgcGFyYW1zIG9iamVjdCBhbmQgY29udmVydHMgaXQgdG8gYSBGb3JtRGF0YSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIGFueT59IHBhcmFtcyAtIFRoZSBwYXJhbWV0ZXJzIHRvIGJlIGNvbnZlcnRlZCB0byBhIEZvcm1EYXRhIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIG9iamVjdCBwYXNzZWQgdG8gdGhlIEF4aW9zIGNvbnN0cnVjdG9yLlxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBBeGlvc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMsIG9wdGlvbnMpIHtcbiAgdGhpcy5fcGFpcnMgPSBbXTtcblxuICBwYXJhbXMgJiYgdG9Gb3JtRGF0YShwYXJhbXMsIHRoaXMsIG9wdGlvbnMpO1xufVxuXG5jb25zdCBwcm90b3R5cGUgPSBBeGlvc1VSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGU7XG5cbnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiBhcHBlbmQobmFtZSwgdmFsdWUpIHtcbiAgdGhpcy5fcGFpcnMucHVzaChbbmFtZSwgdmFsdWVdKTtcbn07XG5cbnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKGVuY29kZXIpIHtcbiAgY29uc3QgX2VuY29kZSA9IGVuY29kZXIgPyBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBlbmNvZGVyLmNhbGwodGhpcywgdmFsdWUsIGVuY29kZSk7XG4gIH0gOiBlbmNvZGU7XG5cbiAgcmV0dXJuIHRoaXMuX3BhaXJzLm1hcChmdW5jdGlvbiBlYWNoKHBhaXIpIHtcbiAgICByZXR1cm4gX2VuY29kZShwYWlyWzBdKSArICc9JyArIF9lbmNvZGUocGFpclsxXSk7XG4gIH0sICcnKS5qb2luKCcmJyk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBeGlvc1VSTFNlYXJjaFBhcmFtcztcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgQXhpb3NVUkxTZWFyY2hQYXJhbXMgZnJvbSAnLi4vaGVscGVycy9BeGlvc1VSTFNlYXJjaFBhcmFtcy5qcyc7XG5cbi8qKlxuICogSXQgcmVwbGFjZXMgYWxsIGluc3RhbmNlcyBvZiB0aGUgY2hhcmFjdGVycyBgOmAsIGAkYCwgYCxgLCBgK2AsIGBbYCwgYW5kIGBdYCB3aXRoIHRoZWlyXG4gKiBVUkkgZW5jb2RlZCBjb3VudGVycGFydHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsIFRoZSB2YWx1ZSB0byBiZSBlbmNvZGVkLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBlbmNvZGVkIHZhbHVlLlxuICovXG5mdW5jdGlvbiBlbmNvZGUodmFsKSB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cbiAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgcmVwbGFjZSgvJTI0L2csICckJykuXG4gICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuICAgIHJlcGxhY2UoLyUyMC9nLCAnKycpLlxuICAgIHJlcGxhY2UoLyU1Qi9naSwgJ1snKS5cbiAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuICogQHBhcmFtIHs/KG9iamVjdHxGdW5jdGlvbil9IG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgb3B0aW9ucykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIFxuICBjb25zdCBfZW5jb2RlID0gb3B0aW9ucyAmJiBvcHRpb25zLmVuY29kZSB8fCBlbmNvZGU7XG5cbiAgaWYgKHV0aWxzLmlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICBvcHRpb25zID0ge1xuICAgICAgc2VyaWFsaXplOiBvcHRpb25zXG4gICAgfTtcbiAgfSBcblxuICBjb25zdCBzZXJpYWxpemVGbiA9IG9wdGlvbnMgJiYgb3B0aW9ucy5zZXJpYWxpemU7XG5cbiAgbGV0IHNlcmlhbGl6ZWRQYXJhbXM7XG5cbiAgaWYgKHNlcmlhbGl6ZUZuKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHNlcmlhbGl6ZUZuKHBhcmFtcywgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykgP1xuICAgICAgcGFyYW1zLnRvU3RyaW5nKCkgOlxuICAgICAgbmV3IEF4aW9zVVJMU2VhcmNoUGFyYW1zKHBhcmFtcywgb3B0aW9ucykudG9TdHJpbmcoX2VuY29kZSk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIGNvbnN0IGhhc2htYXJrSW5kZXggPSB1cmwuaW5kZXhPZihcIiNcIik7XG5cbiAgICBpZiAoaGFzaG1hcmtJbmRleCAhPT0gLTEpIHtcbiAgICAgIHVybCA9IHVybC5zbGljZSgwLCBoYXNobWFya0luZGV4KTtcbiAgICB9XG4gICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcblxuY2xhc3MgSW50ZXJjZXB0b3JNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIG5ldyBpbnRlcmNlcHRvciB0byB0aGUgc3RhY2tcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVsZmlsbGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHRoZW5gIGZvciBhIGBQcm9taXNlYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGByZWplY3RgIGZvciBhIGBQcm9taXNlYFxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEFuIElEIHVzZWQgdG8gcmVtb3ZlIGludGVyY2VwdG9yIGxhdGVyXG4gICAqL1xuICB1c2UoZnVsZmlsbGVkLCByZWplY3RlZCwgb3B0aW9ucykge1xuICAgIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgICBmdWxmaWxsZWQsXG4gICAgICByZWplY3RlZCxcbiAgICAgIHN5bmNocm9ub3VzOiBvcHRpb25zID8gb3B0aW9ucy5zeW5jaHJvbm91cyA6IGZhbHNlLFxuICAgICAgcnVuV2hlbjogb3B0aW9ucyA/IG9wdGlvbnMucnVuV2hlbiA6IG51bGxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBpbnRlcmNlcHRvciBmcm9tIHRoZSBzdGFja1xuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gICAqXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIGludGVyY2VwdG9yIHdhcyByZW1vdmVkLCBgZmFsc2VgIG90aGVyd2lzZVxuICAgKi9cbiAgZWplY3QoaWQpIHtcbiAgICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICAgIHRoaXMuaGFuZGxlcnNbaWRdID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIGludGVyY2VwdG9ycyBmcm9tIHRoZSBzdGFja1xuICAgKlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGNsZWFyKCkge1xuICAgIGlmICh0aGlzLmhhbmRsZXJzKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHJlZ2lzdGVyZWQgaW50ZXJjZXB0b3JzXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIHNraXBwaW5nIG92ZXIgYW55XG4gICAqIGludGVyY2VwdG9ycyB0aGF0IG1heSBoYXZlIGJlY29tZSBgbnVsbGAgY2FsbGluZyBgZWplY3RgLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBpbnRlcmNlcHRvclxuICAgKlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGZvckVhY2goZm4pIHtcbiAgICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICAgIGlmIChoICE9PSBudWxsKSB7XG4gICAgICAgIGZuKGgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEludGVyY2VwdG9yTWFuYWdlcjtcbiIsICIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgc2lsZW50SlNPTlBhcnNpbmc6IHRydWUsXG4gIGZvcmNlZEpTT05QYXJzaW5nOiB0cnVlLFxuICBjbGFyaWZ5VGltZW91dEVycm9yOiBmYWxzZVxufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBBeGlvc1VSTFNlYXJjaFBhcmFtcyBmcm9tICcuLi8uLi8uLi9oZWxwZXJzL0F4aW9zVVJMU2VhcmNoUGFyYW1zLmpzJztcbmV4cG9ydCBkZWZhdWx0IHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICd1bmRlZmluZWQnID8gVVJMU2VhcmNoUGFyYW1zIDogQXhpb3NVUkxTZWFyY2hQYXJhbXM7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZGVmYXVsdCB0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnID8gRm9ybURhdGEgOiBudWxsO1xuIiwgIid1c2Ugc3RyaWN0J1xuXG5leHBvcnQgZGVmYXVsdCB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCcgPyBCbG9iIDogbnVsbFxuIiwgImltcG9ydCBVUkxTZWFyY2hQYXJhbXMgZnJvbSAnLi9jbGFzc2VzL1VSTFNlYXJjaFBhcmFtcy5qcydcbmltcG9ydCBGb3JtRGF0YSBmcm9tICcuL2NsYXNzZXMvRm9ybURhdGEuanMnXG5pbXBvcnQgQmxvYiBmcm9tICcuL2NsYXNzZXMvQmxvYi5qcydcblxuZXhwb3J0IGRlZmF1bHQge1xuICBpc0Jyb3dzZXI6IHRydWUsXG4gIGNsYXNzZXM6IHtcbiAgICBVUkxTZWFyY2hQYXJhbXMsXG4gICAgRm9ybURhdGEsXG4gICAgQmxvYlxuICB9LFxuICBwcm90b2NvbHM6IFsnaHR0cCcsICdodHRwcycsICdmaWxlJywgJ2Jsb2InLCAndXJsJywgJ2RhdGEnXVxufTtcbiIsICJjb25zdCBoYXNCcm93c2VyRW52ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJztcblxuY29uc3QgX25hdmlnYXRvciA9IHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvciB8fCB1bmRlZmluZWQ7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICogbmF0aXZlc2NyaXB0XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ05hdGl2ZVNjcmlwdCcgb3IgJ05TJ1xuICpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5jb25zdCBoYXNTdGFuZGFyZEJyb3dzZXJFbnYgPSBoYXNCcm93c2VyRW52ICYmXG4gICghX25hdmlnYXRvciB8fCBbJ1JlYWN0TmF0aXZlJywgJ05hdGl2ZVNjcmlwdCcsICdOUyddLmluZGV4T2YoX25hdmlnYXRvci5wcm9kdWN0KSA8IDApO1xuXG4vKipcbiAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciB3ZWJXb3JrZXIgZW52aXJvbm1lbnRcbiAqXG4gKiBBbHRob3VnaCB0aGUgYGlzU3RhbmRhcmRCcm93c2VyRW52YCBtZXRob2QgaW5kaWNhdGVzIHRoYXRcbiAqIGBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlcmAsIHRoZSBXZWJXb3JrZXIgd2lsbCBzdGlsbCBiZVxuICogZmlsdGVyZWQgb3V0IGR1ZSB0byBpdHMganVkZ21lbnQgc3RhbmRhcmRcbiAqIGB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnYC5cbiAqIFRoaXMgbGVhZHMgdG8gYSBwcm9ibGVtIHdoZW4gYXhpb3MgcG9zdCBgRm9ybURhdGFgIGluIHdlYldvcmtlclxuICovXG5jb25zdCBoYXNTdGFuZGFyZEJyb3dzZXJXZWJXb3JrZXJFbnYgPSAoKCkgPT4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUgJiZcbiAgICB0eXBlb2Ygc2VsZi5pbXBvcnRTY3JpcHRzID09PSAnZnVuY3Rpb24nXG4gICk7XG59KSgpO1xuXG5jb25zdCBvcmlnaW4gPSBoYXNCcm93c2VyRW52ICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmIHx8ICdodHRwOi8vbG9jYWxob3N0JztcblxuZXhwb3J0IHtcbiAgaGFzQnJvd3NlckVudixcbiAgaGFzU3RhbmRhcmRCcm93c2VyV2ViV29ya2VyRW52LFxuICBoYXNTdGFuZGFyZEJyb3dzZXJFbnYsXG4gIF9uYXZpZ2F0b3IgYXMgbmF2aWdhdG9yLFxuICBvcmlnaW5cbn1cbiIsICJpbXBvcnQgcGxhdGZvcm0gZnJvbSAnLi9ub2RlL2luZGV4LmpzJztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4vY29tbW9uL3V0aWxzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICAuLi51dGlscyxcbiAgLi4ucGxhdGZvcm1cbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgdG9Gb3JtRGF0YSBmcm9tICcuL3RvRm9ybURhdGEuanMnO1xuaW1wb3J0IHBsYXRmb3JtIGZyb20gJy4uL3BsYXRmb3JtL2luZGV4LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9VUkxFbmNvZGVkRm9ybShkYXRhLCBvcHRpb25zKSB7XG4gIHJldHVybiB0b0Zvcm1EYXRhKGRhdGEsIG5ldyBwbGF0Zm9ybS5jbGFzc2VzLlVSTFNlYXJjaFBhcmFtcygpLCBPYmplY3QuYXNzaWduKHtcbiAgICB2aXNpdG9yOiBmdW5jdGlvbih2YWx1ZSwga2V5LCBwYXRoLCBoZWxwZXJzKSB7XG4gICAgICBpZiAocGxhdGZvcm0uaXNOb2RlICYmIHV0aWxzLmlzQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICB0aGlzLmFwcGVuZChrZXksIHZhbHVlLnRvU3RyaW5nKCdiYXNlNjQnKSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGhlbHBlcnMuZGVmYXVsdFZpc2l0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH0sIG9wdGlvbnMpKTtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5cbi8qKlxuICogSXQgdGFrZXMgYSBzdHJpbmcgbGlrZSBgZm9vW3hdW3ldW3pdYCBhbmQgcmV0dXJucyBhbiBhcnJheSBsaWtlIGBbJ2ZvbycsICd4JywgJ3knLCAneiddXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICpcbiAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHN0cmluZ3MuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlUHJvcFBhdGgobmFtZSkge1xuICAvLyBmb29beF1beV1bel1cbiAgLy8gZm9vLngueS56XG4gIC8vIGZvby14LXktelxuICAvLyBmb28geCB5IHpcbiAgcmV0dXJuIHV0aWxzLm1hdGNoQWxsKC9cXHcrfFxcWyhcXHcqKV0vZywgbmFtZSkubWFwKG1hdGNoID0+IHtcbiAgICByZXR1cm4gbWF0Y2hbMF0gPT09ICdbXScgPyAnJyA6IG1hdGNoWzFdIHx8IG1hdGNoWzBdO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGFuIGFycmF5IHRvIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PGFueT59IGFyciAtIFRoZSBhcnJheSB0byBjb252ZXJ0IHRvIGFuIG9iamVjdC5cbiAqXG4gKiBAcmV0dXJucyBBbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBrZXlzIGFuZCB2YWx1ZXMgYXMgdGhlIGFycmF5LlxuICovXG5mdW5jdGlvbiBhcnJheVRvT2JqZWN0KGFycikge1xuICBjb25zdCBvYmogPSB7fTtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGFycik7XG4gIGxldCBpO1xuICBjb25zdCBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgbGV0IGtleTtcbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAga2V5ID0ga2V5c1tpXTtcbiAgICBvYmpba2V5XSA9IGFycltrZXldO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogSXQgdGFrZXMgYSBGb3JtRGF0YSBvYmplY3QgYW5kIHJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtRGF0YSBUaGUgRm9ybURhdGEgb2JqZWN0IHRvIGNvbnZlcnQgdG8gSlNPTi5cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0PHN0cmluZywgYW55PiB8IG51bGx9IFRoZSBjb252ZXJ0ZWQgb2JqZWN0LlxuICovXG5mdW5jdGlvbiBmb3JtRGF0YVRvSlNPTihmb3JtRGF0YSkge1xuICBmdW5jdGlvbiBidWlsZFBhdGgocGF0aCwgdmFsdWUsIHRhcmdldCwgaW5kZXgpIHtcbiAgICBsZXQgbmFtZSA9IHBhdGhbaW5kZXgrK107XG5cbiAgICBpZiAobmFtZSA9PT0gJ19fcHJvdG9fXycpIHJldHVybiB0cnVlO1xuXG4gICAgY29uc3QgaXNOdW1lcmljS2V5ID0gTnVtYmVyLmlzRmluaXRlKCtuYW1lKTtcbiAgICBjb25zdCBpc0xhc3QgPSBpbmRleCA+PSBwYXRoLmxlbmd0aDtcbiAgICBuYW1lID0gIW5hbWUgJiYgdXRpbHMuaXNBcnJheSh0YXJnZXQpID8gdGFyZ2V0Lmxlbmd0aCA6IG5hbWU7XG5cbiAgICBpZiAoaXNMYXN0KSB7XG4gICAgICBpZiAodXRpbHMuaGFzT3duUHJvcCh0YXJnZXQsIG5hbWUpKSB7XG4gICAgICAgIHRhcmdldFtuYW1lXSA9IFt0YXJnZXRbbmFtZV0sIHZhbHVlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFtuYW1lXSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gIWlzTnVtZXJpY0tleTtcbiAgICB9XG5cbiAgICBpZiAoIXRhcmdldFtuYW1lXSB8fCAhdXRpbHMuaXNPYmplY3QodGFyZ2V0W25hbWVdKSkge1xuICAgICAgdGFyZ2V0W25hbWVdID0gW107XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYnVpbGRQYXRoKHBhdGgsIHZhbHVlLCB0YXJnZXRbbmFtZV0sIGluZGV4KTtcblxuICAgIGlmIChyZXN1bHQgJiYgdXRpbHMuaXNBcnJheSh0YXJnZXRbbmFtZV0pKSB7XG4gICAgICB0YXJnZXRbbmFtZV0gPSBhcnJheVRvT2JqZWN0KHRhcmdldFtuYW1lXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICFpc051bWVyaWNLZXk7XG4gIH1cblxuICBpZiAodXRpbHMuaXNGb3JtRGF0YShmb3JtRGF0YSkgJiYgdXRpbHMuaXNGdW5jdGlvbihmb3JtRGF0YS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IG9iaiA9IHt9O1xuXG4gICAgdXRpbHMuZm9yRWFjaEVudHJ5KGZvcm1EYXRhLCAobmFtZSwgdmFsdWUpID0+IHtcbiAgICAgIGJ1aWxkUGF0aChwYXJzZVByb3BQYXRoKG5hbWUpLCB2YWx1ZSwgb2JqLCAwKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZm9ybURhdGFUb0pTT047XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcbmltcG9ydCB0cmFuc2l0aW9uYWxEZWZhdWx0cyBmcm9tICcuL3RyYW5zaXRpb25hbC5qcyc7XG5pbXBvcnQgdG9Gb3JtRGF0YSBmcm9tICcuLi9oZWxwZXJzL3RvRm9ybURhdGEuanMnO1xuaW1wb3J0IHRvVVJMRW5jb2RlZEZvcm0gZnJvbSAnLi4vaGVscGVycy90b1VSTEVuY29kZWRGb3JtLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5pbXBvcnQgZm9ybURhdGFUb0pTT04gZnJvbSAnLi4vaGVscGVycy9mb3JtRGF0YVRvSlNPTi5qcyc7XG5cbi8qKlxuICogSXQgdGFrZXMgYSBzdHJpbmcsIHRyaWVzIHRvIHBhcnNlIGl0LCBhbmQgaWYgaXQgZmFpbHMsIGl0IHJldHVybnMgdGhlIHN0cmluZ2lmaWVkIHZlcnNpb25cbiAqIG9mIHRoZSBpbnB1dFxuICpcbiAqIEBwYXJhbSB7YW55fSByYXdWYWx1ZSAtIFRoZSB2YWx1ZSB0byBiZSBzdHJpbmdpZmllZC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBhcnNlciAtIEEgZnVuY3Rpb24gdGhhdCBwYXJzZXMgYSBzdHJpbmcgaW50byBhIEphdmFTY3JpcHQgb2JqZWN0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZW5jb2RlciAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHZhbHVlIGFuZCByZXR1cm5zIGEgc3RyaW5nLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5naWZpZWQgdmVyc2lvbiBvZiB0aGUgcmF3VmFsdWUuXG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeVNhZmVseShyYXdWYWx1ZSwgcGFyc2VyLCBlbmNvZGVyKSB7XG4gIGlmICh1dGlscy5pc1N0cmluZyhyYXdWYWx1ZSkpIHtcbiAgICB0cnkge1xuICAgICAgKHBhcnNlciB8fCBKU09OLnBhcnNlKShyYXdWYWx1ZSk7XG4gICAgICByZXR1cm4gdXRpbHMudHJpbShyYXdWYWx1ZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUubmFtZSAhPT0gJ1N5bnRheEVycm9yJykge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoZW5jb2RlciB8fCBKU09OLnN0cmluZ2lmeSkocmF3VmFsdWUpO1xufVxuXG5jb25zdCBkZWZhdWx0cyA9IHtcblxuICB0cmFuc2l0aW9uYWw6IHRyYW5zaXRpb25hbERlZmF1bHRzLFxuXG4gIGFkYXB0ZXI6IFsneGhyJywgJ2h0dHAnLCAnZmV0Y2gnXSxcblxuICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG4gICAgY29uc3QgY29udGVudFR5cGUgPSBoZWFkZXJzLmdldENvbnRlbnRUeXBlKCkgfHwgJyc7XG4gICAgY29uc3QgaGFzSlNPTkNvbnRlbnRUeXBlID0gY29udGVudFR5cGUuaW5kZXhPZignYXBwbGljYXRpb24vanNvbicpID4gLTE7XG4gICAgY29uc3QgaXNPYmplY3RQYXlsb2FkID0gdXRpbHMuaXNPYmplY3QoZGF0YSk7XG5cbiAgICBpZiAoaXNPYmplY3RQYXlsb2FkICYmIHV0aWxzLmlzSFRNTEZvcm0oZGF0YSkpIHtcbiAgICAgIGRhdGEgPSBuZXcgRm9ybURhdGEoZGF0YSk7XG4gICAgfVxuXG4gICAgY29uc3QgaXNGb3JtRGF0YSA9IHV0aWxzLmlzRm9ybURhdGEoZGF0YSk7XG5cbiAgICBpZiAoaXNGb3JtRGF0YSkge1xuICAgICAgcmV0dXJuIGhhc0pTT05Db250ZW50VHlwZSA/IEpTT04uc3RyaW5naWZ5KGZvcm1EYXRhVG9KU09OKGRhdGEpKSA6IGRhdGE7XG4gICAgfVxuXG4gICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0Jsb2IoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzUmVhZGFibGVTdHJlYW0oZGF0YSlcbiAgICApIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG4gICAgICBoZWFkZXJzLnNldENvbnRlbnRUeXBlKCdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCcsIGZhbHNlKTtcbiAgICAgIHJldHVybiBkYXRhLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgbGV0IGlzRmlsZUxpc3Q7XG5cbiAgICBpZiAoaXNPYmplY3RQYXlsb2FkKSB7XG4gICAgICBpZiAoY29udGVudFR5cGUuaW5kZXhPZignYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJykgPiAtMSkge1xuICAgICAgICByZXR1cm4gdG9VUkxFbmNvZGVkRm9ybShkYXRhLCB0aGlzLmZvcm1TZXJpYWxpemVyKS50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICBpZiAoKGlzRmlsZUxpc3QgPSB1dGlscy5pc0ZpbGVMaXN0KGRhdGEpKSB8fCBjb250ZW50VHlwZS5pbmRleE9mKCdtdWx0aXBhcnQvZm9ybS1kYXRhJykgPiAtMSkge1xuICAgICAgICBjb25zdCBfRm9ybURhdGEgPSB0aGlzLmVudiAmJiB0aGlzLmVudi5Gb3JtRGF0YTtcblxuICAgICAgICByZXR1cm4gdG9Gb3JtRGF0YShcbiAgICAgICAgICBpc0ZpbGVMaXN0ID8geydmaWxlc1tdJzogZGF0YX0gOiBkYXRhLFxuICAgICAgICAgIF9Gb3JtRGF0YSAmJiBuZXcgX0Zvcm1EYXRhKCksXG4gICAgICAgICAgdGhpcy5mb3JtU2VyaWFsaXplclxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc09iamVjdFBheWxvYWQgfHwgaGFzSlNPTkNvbnRlbnRUeXBlICkge1xuICAgICAgaGVhZGVycy5zZXRDb250ZW50VHlwZSgnYXBwbGljYXRpb24vanNvbicsIGZhbHNlKTtcbiAgICAgIHJldHVybiBzdHJpbmdpZnlTYWZlbHkoZGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkge1xuICAgIGNvbnN0IHRyYW5zaXRpb25hbCA9IHRoaXMudHJhbnNpdGlvbmFsIHx8IGRlZmF1bHRzLnRyYW5zaXRpb25hbDtcbiAgICBjb25zdCBmb3JjZWRKU09OUGFyc2luZyA9IHRyYW5zaXRpb25hbCAmJiB0cmFuc2l0aW9uYWwuZm9yY2VkSlNPTlBhcnNpbmc7XG4gICAgY29uc3QgSlNPTlJlcXVlc3RlZCA9IHRoaXMucmVzcG9uc2VUeXBlID09PSAnanNvbic7XG5cbiAgICBpZiAodXRpbHMuaXNSZXNwb25zZShkYXRhKSB8fCB1dGlscy5pc1JlYWRhYmxlU3RyZWFtKGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YSAmJiB1dGlscy5pc1N0cmluZyhkYXRhKSAmJiAoKGZvcmNlZEpTT05QYXJzaW5nICYmICF0aGlzLnJlc3BvbnNlVHlwZSkgfHwgSlNPTlJlcXVlc3RlZCkpIHtcbiAgICAgIGNvbnN0IHNpbGVudEpTT05QYXJzaW5nID0gdHJhbnNpdGlvbmFsICYmIHRyYW5zaXRpb25hbC5zaWxlbnRKU09OUGFyc2luZztcbiAgICAgIGNvbnN0IHN0cmljdEpTT05QYXJzaW5nID0gIXNpbGVudEpTT05QYXJzaW5nICYmIEpTT05SZXF1ZXN0ZWQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoc3RyaWN0SlNPTlBhcnNpbmcpIHtcbiAgICAgICAgICBpZiAoZS5uYW1lID09PSAnU3ludGF4RXJyb3InKSB7XG4gICAgICAgICAgICB0aHJvdyBBeGlvc0Vycm9yLmZyb20oZSwgQXhpb3NFcnJvci5FUlJfQkFEX1JFU1BPTlNFLCB0aGlzLCBudWxsLCB0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICAvKipcbiAgICogQSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byBhYm9ydCBhIHJlcXVlc3QuIElmIHNldCB0byAwIChkZWZhdWx0KSBhXG4gICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuXG4gICAqL1xuICB0aW1lb3V0OiAwLFxuXG4gIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG4gIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblxuICBtYXhDb250ZW50TGVuZ3RoOiAtMSxcbiAgbWF4Qm9keUxlbmd0aDogLTEsXG5cbiAgZW52OiB7XG4gICAgRm9ybURhdGE6IHBsYXRmb3JtLmNsYXNzZXMuRm9ybURhdGEsXG4gICAgQmxvYjogcGxhdGZvcm0uY2xhc3Nlcy5CbG9iXG4gIH0sXG5cbiAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cykge1xuICAgIHJldHVybiBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMDtcbiAgfSxcblxuICBoZWFkZXJzOiB7XG4gICAgY29tbW9uOiB7XG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKicsXG4gICAgICAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkXG4gICAgfVxuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIChtZXRob2QpID0+IHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0ge307XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgZGVmYXVsdHM7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5cbi8vIFJhd0F4aW9zSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGVcbi8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnNcbmNvbnN0IGlnbm9yZUR1cGxpY2F0ZU9mID0gdXRpbHMudG9PYmplY3RTZXQoW1xuICAnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLFxuICAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsXG4gICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJyxcbiAgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCdcbl0pO1xuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3RcbiAqXG4gKiBgYGBcbiAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UXG4gKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cbiAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcbiAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcmF3SGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkXG4gKlxuICogQHJldHVybnMge09iamVjdH0gSGVhZGVycyBwYXJzZWQgaW50byBhbiBvYmplY3RcbiAqL1xuZXhwb3J0IGRlZmF1bHQgcmF3SGVhZGVycyA9PiB7XG4gIGNvbnN0IHBhcnNlZCA9IHt9O1xuICBsZXQga2V5O1xuICBsZXQgdmFsO1xuICBsZXQgaTtcblxuICByYXdIZWFkZXJzICYmIHJhd0hlYWRlcnMuc3BsaXQoJ1xcbicpLmZvckVhY2goZnVuY3Rpb24gcGFyc2VyKGxpbmUpIHtcbiAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAga2V5ID0gbGluZS5zdWJzdHJpbmcoMCwgaSkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gbGluZS5zdWJzdHJpbmcoaSArIDEpLnRyaW0oKTtcblxuICAgIGlmICgha2V5IHx8IChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZltrZXldKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykge1xuICAgICAgaWYgKHBhcnNlZFtrZXldKSB7XG4gICAgICAgIHBhcnNlZFtrZXldLnB1c2godmFsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnNlZFtrZXldID0gW3ZhbF07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcGFyc2VkO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgcGFyc2VIZWFkZXJzIGZyb20gJy4uL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzJztcblxuY29uc3QgJGludGVybmFscyA9IFN5bWJvbCgnaW50ZXJuYWxzJyk7XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlcihoZWFkZXIpIHtcbiAgcmV0dXJuIGhlYWRlciAmJiBTdHJpbmcoaGVhZGVyKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHV0aWxzLmlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKG5vcm1hbGl6ZVZhbHVlKSA6IFN0cmluZyh2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVG9rZW5zKHN0cikge1xuICBjb25zdCB0b2tlbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBjb25zdCB0b2tlbnNSRSA9IC8oW15cXHMsOz1dKylcXHMqKD86PVxccyooW14sO10rKSk/L2c7XG4gIGxldCBtYXRjaDtcblxuICB3aGlsZSAoKG1hdGNoID0gdG9rZW5zUkUuZXhlYyhzdHIpKSkge1xuICAgIHRva2Vuc1ttYXRjaFsxXV0gPSBtYXRjaFsyXTtcbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59XG5cbmNvbnN0IGlzVmFsaWRIZWFkZXJOYW1lID0gKHN0cikgPT4gL15bLV9hLXpBLVowLTleYHx+LCEjJCUmJyorLl0rJC8udGVzdChzdHIudHJpbSgpKTtcblxuZnVuY3Rpb24gbWF0Y2hIZWFkZXJWYWx1ZShjb250ZXh0LCB2YWx1ZSwgaGVhZGVyLCBmaWx0ZXIsIGlzSGVhZGVyTmFtZUZpbHRlcikge1xuICBpZiAodXRpbHMuaXNGdW5jdGlvbihmaWx0ZXIpKSB7XG4gICAgcmV0dXJuIGZpbHRlci5jYWxsKHRoaXMsIHZhbHVlLCBoZWFkZXIpO1xuICB9XG5cbiAgaWYgKGlzSGVhZGVyTmFtZUZpbHRlcikge1xuICAgIHZhbHVlID0gaGVhZGVyO1xuICB9XG5cbiAgaWYgKCF1dGlscy5pc1N0cmluZyh2YWx1ZSkpIHJldHVybjtcblxuICBpZiAodXRpbHMuaXNTdHJpbmcoZmlsdGVyKSkge1xuICAgIHJldHVybiB2YWx1ZS5pbmRleE9mKGZpbHRlcikgIT09IC0xO1xuICB9XG5cbiAgaWYgKHV0aWxzLmlzUmVnRXhwKGZpbHRlcikpIHtcbiAgICByZXR1cm4gZmlsdGVyLnRlc3QodmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEhlYWRlcihoZWFkZXIpIHtcbiAgcmV0dXJuIGhlYWRlci50cmltKClcbiAgICAudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8oW2EtelxcZF0pKFxcdyopL2csICh3LCBjaGFyLCBzdHIpID0+IHtcbiAgICAgIHJldHVybiBjaGFyLnRvVXBwZXJDYXNlKCkgKyBzdHI7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkQWNjZXNzb3JzKG9iaiwgaGVhZGVyKSB7XG4gIGNvbnN0IGFjY2Vzc29yTmFtZSA9IHV0aWxzLnRvQ2FtZWxDYXNlKCcgJyArIGhlYWRlcik7XG5cbiAgWydnZXQnLCAnc2V0JywgJ2hhcyddLmZvckVhY2gobWV0aG9kTmFtZSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbWV0aG9kTmFtZSArIGFjY2Vzc29yTmFtZSwge1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uKGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbbWV0aG9kTmFtZV0uY2FsbCh0aGlzLCBoZWFkZXIsIGFyZzEsIGFyZzIsIGFyZzMpO1xuICAgICAgfSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9KTtcbn1cblxuY2xhc3MgQXhpb3NIZWFkZXJzIHtcbiAgY29uc3RydWN0b3IoaGVhZGVycykge1xuICAgIGhlYWRlcnMgJiYgdGhpcy5zZXQoaGVhZGVycyk7XG4gIH1cblxuICBzZXQoaGVhZGVyLCB2YWx1ZU9yUmV3cml0ZSwgcmV3cml0ZSkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgZnVuY3Rpb24gc2V0SGVhZGVyKF92YWx1ZSwgX2hlYWRlciwgX3Jld3JpdGUpIHtcbiAgICAgIGNvbnN0IGxIZWFkZXIgPSBub3JtYWxpemVIZWFkZXIoX2hlYWRlcik7XG5cbiAgICAgIGlmICghbEhlYWRlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2hlYWRlciBuYW1lIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGtleSA9IHV0aWxzLmZpbmRLZXkoc2VsZiwgbEhlYWRlcik7XG5cbiAgICAgIGlmKCFrZXkgfHwgc2VsZltrZXldID09PSB1bmRlZmluZWQgfHwgX3Jld3JpdGUgPT09IHRydWUgfHwgKF9yZXdyaXRlID09PSB1bmRlZmluZWQgJiYgc2VsZltrZXldICE9PSBmYWxzZSkpIHtcbiAgICAgICAgc2VsZltrZXkgfHwgX2hlYWRlcl0gPSBub3JtYWxpemVWYWx1ZShfdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNldEhlYWRlcnMgPSAoaGVhZGVycywgX3Jld3JpdGUpID0+XG4gICAgICB1dGlscy5mb3JFYWNoKGhlYWRlcnMsIChfdmFsdWUsIF9oZWFkZXIpID0+IHNldEhlYWRlcihfdmFsdWUsIF9oZWFkZXIsIF9yZXdyaXRlKSk7XG5cbiAgICBpZiAodXRpbHMuaXNQbGFpbk9iamVjdChoZWFkZXIpIHx8IGhlYWRlciBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3IpIHtcbiAgICAgIHNldEhlYWRlcnMoaGVhZGVyLCB2YWx1ZU9yUmV3cml0ZSlcbiAgICB9IGVsc2UgaWYodXRpbHMuaXNTdHJpbmcoaGVhZGVyKSAmJiAoaGVhZGVyID0gaGVhZGVyLnRyaW0oKSkgJiYgIWlzVmFsaWRIZWFkZXJOYW1lKGhlYWRlcikpIHtcbiAgICAgIHNldEhlYWRlcnMocGFyc2VIZWFkZXJzKGhlYWRlciksIHZhbHVlT3JSZXdyaXRlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KGhlYWRlcikgJiYgdXRpbHMuaXNJdGVyYWJsZShoZWFkZXIpKSB7XG4gICAgICBsZXQgb2JqID0ge30sIGRlc3QsIGtleTtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgaGVhZGVyKSB7XG4gICAgICAgIGlmICghdXRpbHMuaXNBcnJheShlbnRyeSkpIHtcbiAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ09iamVjdCBpdGVyYXRvciBtdXN0IHJldHVybiBhIGtleS12YWx1ZSBwYWlyJyk7XG4gICAgICAgIH1cblxuICAgICAgICBvYmpba2V5ID0gZW50cnlbMF1dID0gKGRlc3QgPSBvYmpba2V5XSkgP1xuICAgICAgICAgICh1dGlscy5pc0FycmF5KGRlc3QpID8gWy4uLmRlc3QsIGVudHJ5WzFdXSA6IFtkZXN0LCBlbnRyeVsxXV0pIDogZW50cnlbMV07XG4gICAgICB9XG5cbiAgICAgIHNldEhlYWRlcnMob2JqLCB2YWx1ZU9yUmV3cml0ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgaGVhZGVyICE9IG51bGwgJiYgc2V0SGVhZGVyKHZhbHVlT3JSZXdyaXRlLCBoZWFkZXIsIHJld3JpdGUpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0KGhlYWRlciwgcGFyc2VyKSB7XG4gICAgaGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKGhlYWRlcik7XG5cbiAgICBpZiAoaGVhZGVyKSB7XG4gICAgICBjb25zdCBrZXkgPSB1dGlscy5maW5kS2V5KHRoaXMsIGhlYWRlcik7XG5cbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzW2tleV07XG5cbiAgICAgICAgaWYgKCFwYXJzZXIpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyc2VyID09PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlVG9rZW5zKHZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlscy5pc0Z1bmN0aW9uKHBhcnNlcikpIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VyLmNhbGwodGhpcywgdmFsdWUsIGtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNSZWdFeHAocGFyc2VyKSkge1xuICAgICAgICAgIHJldHVybiBwYXJzZXIuZXhlYyh2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwYXJzZXIgbXVzdCBiZSBib29sZWFufHJlZ2V4cHxmdW5jdGlvbicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhcyhoZWFkZXIsIG1hdGNoZXIpIHtcbiAgICBoZWFkZXIgPSBub3JtYWxpemVIZWFkZXIoaGVhZGVyKTtcblxuICAgIGlmIChoZWFkZXIpIHtcbiAgICAgIGNvbnN0IGtleSA9IHV0aWxzLmZpbmRLZXkodGhpcywgaGVhZGVyKTtcblxuICAgICAgcmV0dXJuICEhKGtleSAmJiB0aGlzW2tleV0gIT09IHVuZGVmaW5lZCAmJiAoIW1hdGNoZXIgfHwgbWF0Y2hIZWFkZXJWYWx1ZSh0aGlzLCB0aGlzW2tleV0sIGtleSwgbWF0Y2hlcikpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBkZWxldGUoaGVhZGVyLCBtYXRjaGVyKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgbGV0IGRlbGV0ZWQgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUhlYWRlcihfaGVhZGVyKSB7XG4gICAgICBfaGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKF9oZWFkZXIpO1xuXG4gICAgICBpZiAoX2hlYWRlcikge1xuICAgICAgICBjb25zdCBrZXkgPSB1dGlscy5maW5kS2V5KHNlbGYsIF9oZWFkZXIpO1xuXG4gICAgICAgIGlmIChrZXkgJiYgKCFtYXRjaGVyIHx8IG1hdGNoSGVhZGVyVmFsdWUoc2VsZiwgc2VsZltrZXldLCBrZXksIG1hdGNoZXIpKSkge1xuICAgICAgICAgIGRlbGV0ZSBzZWxmW2tleV07XG5cbiAgICAgICAgICBkZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh1dGlscy5pc0FycmF5KGhlYWRlcikpIHtcbiAgICAgIGhlYWRlci5mb3JFYWNoKGRlbGV0ZUhlYWRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZUhlYWRlcihoZWFkZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBkZWxldGVkO1xuICB9XG5cbiAgY2xlYXIobWF0Y2hlcikge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzKTtcbiAgICBsZXQgaSA9IGtleXMubGVuZ3RoO1xuICAgIGxldCBkZWxldGVkID0gZmFsc2U7XG5cbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYoIW1hdGNoZXIgfHwgbWF0Y2hIZWFkZXJWYWx1ZSh0aGlzLCB0aGlzW2tleV0sIGtleSwgbWF0Y2hlciwgdHJ1ZSkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXNba2V5XTtcbiAgICAgICAgZGVsZXRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlbGV0ZWQ7XG4gIH1cblxuICBub3JtYWxpemUoZm9ybWF0KSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgY29uc3QgaGVhZGVycyA9IHt9O1xuXG4gICAgdXRpbHMuZm9yRWFjaCh0aGlzLCAodmFsdWUsIGhlYWRlcikgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gdXRpbHMuZmluZEtleShoZWFkZXJzLCBoZWFkZXIpO1xuXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHNlbGZba2V5XSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgZGVsZXRlIHNlbGZbaGVhZGVyXTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBub3JtYWxpemVkID0gZm9ybWF0ID8gZm9ybWF0SGVhZGVyKGhlYWRlcikgOiBTdHJpbmcoaGVhZGVyKS50cmltKCk7XG5cbiAgICAgIGlmIChub3JtYWxpemVkICE9PSBoZWFkZXIpIHtcbiAgICAgICAgZGVsZXRlIHNlbGZbaGVhZGVyXTtcbiAgICAgIH1cblxuICAgICAgc2VsZltub3JtYWxpemVkXSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcblxuICAgICAgaGVhZGVyc1tub3JtYWxpemVkXSA9IHRydWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGNvbmNhdCguLi50YXJnZXRzKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuY29uY2F0KHRoaXMsIC4uLnRhcmdldHMpO1xuICB9XG5cbiAgdG9KU09OKGFzU3RyaW5ncykge1xuICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICB1dGlscy5mb3JFYWNoKHRoaXMsICh2YWx1ZSwgaGVhZGVyKSA9PiB7XG4gICAgICB2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBmYWxzZSAmJiAob2JqW2hlYWRlcl0gPSBhc1N0cmluZ3MgJiYgdXRpbHMuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5qb2luKCcsICcpIDogdmFsdWUpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyh0aGlzLnRvSlNPTigpKVtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy50b0pTT04oKSkubWFwKChbaGVhZGVyLCB2YWx1ZV0pID0+IGhlYWRlciArICc6ICcgKyB2YWx1ZSkuam9pbignXFxuJyk7XG4gIH1cblxuICBnZXRTZXRDb29raWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KFwic2V0LWNvb2tpZVwiKSB8fCBbXTtcbiAgfVxuXG4gIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcbiAgICByZXR1cm4gJ0F4aW9zSGVhZGVycyc7XG4gIH1cblxuICBzdGF0aWMgZnJvbSh0aGluZykge1xuICAgIHJldHVybiB0aGluZyBpbnN0YW5jZW9mIHRoaXMgPyB0aGluZyA6IG5ldyB0aGlzKHRoaW5nKTtcbiAgfVxuXG4gIHN0YXRpYyBjb25jYXQoZmlyc3QsIC4uLnRhcmdldHMpIHtcbiAgICBjb25zdCBjb21wdXRlZCA9IG5ldyB0aGlzKGZpcnN0KTtcblxuICAgIHRhcmdldHMuZm9yRWFjaCgodGFyZ2V0KSA9PiBjb21wdXRlZC5zZXQodGFyZ2V0KSk7XG5cbiAgICByZXR1cm4gY29tcHV0ZWQ7XG4gIH1cblxuICBzdGF0aWMgYWNjZXNzb3IoaGVhZGVyKSB7XG4gICAgY29uc3QgaW50ZXJuYWxzID0gdGhpc1skaW50ZXJuYWxzXSA9ICh0aGlzWyRpbnRlcm5hbHNdID0ge1xuICAgICAgYWNjZXNzb3JzOiB7fVxuICAgIH0pO1xuXG4gICAgY29uc3QgYWNjZXNzb3JzID0gaW50ZXJuYWxzLmFjY2Vzc29ycztcbiAgICBjb25zdCBwcm90b3R5cGUgPSB0aGlzLnByb3RvdHlwZTtcblxuICAgIGZ1bmN0aW9uIGRlZmluZUFjY2Vzc29yKF9oZWFkZXIpIHtcbiAgICAgIGNvbnN0IGxIZWFkZXIgPSBub3JtYWxpemVIZWFkZXIoX2hlYWRlcik7XG5cbiAgICAgIGlmICghYWNjZXNzb3JzW2xIZWFkZXJdKSB7XG4gICAgICAgIGJ1aWxkQWNjZXNzb3JzKHByb3RvdHlwZSwgX2hlYWRlcik7XG4gICAgICAgIGFjY2Vzc29yc1tsSGVhZGVyXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdXRpbHMuaXNBcnJheShoZWFkZXIpID8gaGVhZGVyLmZvckVhY2goZGVmaW5lQWNjZXNzb3IpIDogZGVmaW5lQWNjZXNzb3IoaGVhZGVyKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbkF4aW9zSGVhZGVycy5hY2Nlc3NvcihbJ0NvbnRlbnQtVHlwZScsICdDb250ZW50LUxlbmd0aCcsICdBY2NlcHQnLCAnQWNjZXB0LUVuY29kaW5nJywgJ1VzZXItQWdlbnQnLCAnQXV0aG9yaXphdGlvbiddKTtcblxuLy8gcmVzZXJ2ZWQgbmFtZXMgaG90Zml4XG51dGlscy5yZWR1Y2VEZXNjcmlwdG9ycyhBeGlvc0hlYWRlcnMucHJvdG90eXBlLCAoe3ZhbHVlfSwga2V5KSA9PiB7XG4gIGxldCBtYXBwZWQgPSBrZXlbMF0udG9VcHBlckNhc2UoKSArIGtleS5zbGljZSgxKTsgLy8gbWFwIGBzZXRgID0+IGBTZXRgXG4gIHJldHVybiB7XG4gICAgZ2V0OiAoKSA9PiB2YWx1ZSxcbiAgICBzZXQoaGVhZGVyVmFsdWUpIHtcbiAgICAgIHRoaXNbbWFwcGVkXSA9IGhlYWRlclZhbHVlO1xuICAgIH1cbiAgfVxufSk7XG5cbnV0aWxzLmZyZWV6ZU1ldGhvZHMoQXhpb3NIZWFkZXJzKTtcblxuZXhwb3J0IGRlZmF1bHQgQXhpb3NIZWFkZXJzO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vLi4vdXRpbHMuanMnO1xuaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4uL2RlZmF1bHRzL2luZGV4LmpzJztcbmltcG9ydCBBeGlvc0hlYWRlcnMgZnJvbSAnLi4vY29yZS9BeGlvc0hlYWRlcnMuanMnO1xuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zXG4gKiBAcGFyYW0gez9PYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZSBvYmplY3RcbiAqXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZm5zLCByZXNwb25zZSkge1xuICBjb25zdCBjb25maWcgPSB0aGlzIHx8IGRlZmF1bHRzO1xuICBjb25zdCBjb250ZXh0ID0gcmVzcG9uc2UgfHwgY29uZmlnO1xuICBjb25zdCBoZWFkZXJzID0gQXhpb3NIZWFkZXJzLmZyb20oY29udGV4dC5oZWFkZXJzKTtcbiAgbGV0IGRhdGEgPSBjb250ZXh0LmRhdGE7XG5cbiAgdXRpbHMuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikge1xuICAgIGRhdGEgPSBmbi5jYWxsKGNvbmZpZywgZGF0YSwgaGVhZGVycy5ub3JtYWxpemUoKSwgcmVzcG9uc2UgPyByZXNwb25zZS5zdGF0dXMgOiB1bmRlZmluZWQpO1xuICB9KTtcblxuICBoZWFkZXJzLm5vcm1hbGl6ZSgpO1xuXG4gIHJldHVybiBkYXRhO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlLl9fQ0FOQ0VMX18pO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5cbi8qKlxuICogQSBgQ2FuY2VsZWRFcnJvcmAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge09iamVjdD19IHJlcXVlc3QgVGhlIHJlcXVlc3QuXG4gKlxuICogQHJldHVybnMge0NhbmNlbGVkRXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5mdW5jdGlvbiBDYW5jZWxlZEVycm9yKG1lc3NhZ2UsIGNvbmZpZywgcmVxdWVzdCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXEtbnVsbCxlcWVxZXFcbiAgQXhpb3NFcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UgPT0gbnVsbCA/ICdjYW5jZWxlZCcgOiBtZXNzYWdlLCBBeGlvc0Vycm9yLkVSUl9DQU5DRUxFRCwgY29uZmlnLCByZXF1ZXN0KTtcbiAgdGhpcy5uYW1lID0gJ0NhbmNlbGVkRXJyb3InO1xufVxuXG51dGlscy5pbmhlcml0cyhDYW5jZWxlZEVycm9yLCBBeGlvc0Vycm9yLCB7XG4gIF9fQ0FOQ0VMX186IHRydWVcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDYW5jZWxlZEVycm9yO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi9BeGlvc0Vycm9yLmpzJztcblxuLyoqXG4gKiBSZXNvbHZlIG9yIHJlamVjdCBhIFByb21pc2UgYmFzZWQgb24gcmVzcG9uc2Ugc3RhdHVzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmUgQSBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IEEgZnVuY3Rpb24gdGhhdCByZWplY3RzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS5cbiAqXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBUaGUgcmVzcG9uc2UuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7XG4gIGNvbnN0IHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzO1xuICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCAhdmFsaWRhdGVTdGF0dXMgfHwgdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICB9IGVsc2Uge1xuICAgIHJlamVjdChuZXcgQXhpb3NFcnJvcihcbiAgICAgICdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsXG4gICAgICBbQXhpb3NFcnJvci5FUlJfQkFEX1JFUVVFU1QsIEF4aW9zRXJyb3IuRVJSX0JBRF9SRVNQT05TRV1bTWF0aC5mbG9vcihyZXNwb25zZS5zdGF0dXMgLyAxMDApIC0gNF0sXG4gICAgICByZXNwb25zZS5jb25maWcsXG4gICAgICByZXNwb25zZS5yZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VcbiAgICApKTtcbiAgfVxufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VQcm90b2NvbCh1cmwpIHtcbiAgY29uc3QgbWF0Y2ggPSAvXihbLStcXHddezEsMjV9KSg6P1xcL1xcL3w6KS8uZXhlYyh1cmwpO1xuICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2hbMV0gfHwgJyc7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENhbGN1bGF0ZSBkYXRhIG1heFJhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2FtcGxlc0NvdW50PSAxMF1cbiAqIEBwYXJhbSB7TnVtYmVyfSBbbWluPSAxMDAwXVxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBzcGVlZG9tZXRlcihzYW1wbGVzQ291bnQsIG1pbikge1xuICBzYW1wbGVzQ291bnQgPSBzYW1wbGVzQ291bnQgfHwgMTA7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IEFycmF5KHNhbXBsZXNDb3VudCk7XG4gIGNvbnN0IHRpbWVzdGFtcHMgPSBuZXcgQXJyYXkoc2FtcGxlc0NvdW50KTtcbiAgbGV0IGhlYWQgPSAwO1xuICBsZXQgdGFpbCA9IDA7XG4gIGxldCBmaXJzdFNhbXBsZVRTO1xuXG4gIG1pbiA9IG1pbiAhPT0gdW5kZWZpbmVkID8gbWluIDogMTAwMDtcblxuICByZXR1cm4gZnVuY3Rpb24gcHVzaChjaHVua0xlbmd0aCkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBjb25zdCBzdGFydGVkQXQgPSB0aW1lc3RhbXBzW3RhaWxdO1xuXG4gICAgaWYgKCFmaXJzdFNhbXBsZVRTKSB7XG4gICAgICBmaXJzdFNhbXBsZVRTID0gbm93O1xuICAgIH1cblxuICAgIGJ5dGVzW2hlYWRdID0gY2h1bmtMZW5ndGg7XG4gICAgdGltZXN0YW1wc1toZWFkXSA9IG5vdztcblxuICAgIGxldCBpID0gdGFpbDtcbiAgICBsZXQgYnl0ZXNDb3VudCA9IDA7XG5cbiAgICB3aGlsZSAoaSAhPT0gaGVhZCkge1xuICAgICAgYnl0ZXNDb3VudCArPSBieXRlc1tpKytdO1xuICAgICAgaSA9IGkgJSBzYW1wbGVzQ291bnQ7XG4gICAgfVxuXG4gICAgaGVhZCA9IChoZWFkICsgMSkgJSBzYW1wbGVzQ291bnQ7XG5cbiAgICBpZiAoaGVhZCA9PT0gdGFpbCkge1xuICAgICAgdGFpbCA9ICh0YWlsICsgMSkgJSBzYW1wbGVzQ291bnQ7XG4gICAgfVxuXG4gICAgaWYgKG5vdyAtIGZpcnN0U2FtcGxlVFMgPCBtaW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwYXNzZWQgPSBzdGFydGVkQXQgJiYgbm93IC0gc3RhcnRlZEF0O1xuXG4gICAgcmV0dXJuIHBhc3NlZCA/IE1hdGgucm91bmQoYnl0ZXNDb3VudCAqIDEwMDAgLyBwYXNzZWQpIDogdW5kZWZpbmVkO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBzcGVlZG9tZXRlcjtcbiIsICIvKipcbiAqIFRocm90dGxlIGRlY29yYXRvclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7TnVtYmVyfSBmcmVxXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gdGhyb3R0bGUoZm4sIGZyZXEpIHtcbiAgbGV0IHRpbWVzdGFtcCA9IDA7XG4gIGxldCB0aHJlc2hvbGQgPSAxMDAwIC8gZnJlcTtcbiAgbGV0IGxhc3RBcmdzO1xuICBsZXQgdGltZXI7XG5cbiAgY29uc3QgaW52b2tlID0gKGFyZ3MsIG5vdyA9IERhdGUubm93KCkpID0+IHtcbiAgICB0aW1lc3RhbXAgPSBub3c7XG4gICAgbGFzdEFyZ3MgPSBudWxsO1xuICAgIGlmICh0aW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gIH1cblxuICBjb25zdCB0aHJvdHRsZWQgPSAoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgcGFzc2VkID0gbm93IC0gdGltZXN0YW1wO1xuICAgIGlmICggcGFzc2VkID49IHRocmVzaG9sZCkge1xuICAgICAgaW52b2tlKGFyZ3MsIG5vdyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxhc3RBcmdzID0gYXJncztcbiAgICAgIGlmICghdGltZXIpIHtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aW1lciA9IG51bGw7XG4gICAgICAgICAgaW52b2tlKGxhc3RBcmdzKVxuICAgICAgICB9LCB0aHJlc2hvbGQgLSBwYXNzZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGZsdXNoID0gKCkgPT4gbGFzdEFyZ3MgJiYgaW52b2tlKGxhc3RBcmdzKTtcblxuICByZXR1cm4gW3Rocm90dGxlZCwgZmx1c2hdO1xufVxuXG5leHBvcnQgZGVmYXVsdCB0aHJvdHRsZTtcbiIsICJpbXBvcnQgc3BlZWRvbWV0ZXIgZnJvbSBcIi4vc3BlZWRvbWV0ZXIuanNcIjtcbmltcG9ydCB0aHJvdHRsZSBmcm9tIFwiLi90aHJvdHRsZS5qc1wiO1xuaW1wb3J0IHV0aWxzIGZyb20gXCIuLi91dGlscy5qc1wiO1xuXG5leHBvcnQgY29uc3QgcHJvZ3Jlc3NFdmVudFJlZHVjZXIgPSAobGlzdGVuZXIsIGlzRG93bmxvYWRTdHJlYW0sIGZyZXEgPSAzKSA9PiB7XG4gIGxldCBieXRlc05vdGlmaWVkID0gMDtcbiAgY29uc3QgX3NwZWVkb21ldGVyID0gc3BlZWRvbWV0ZXIoNTAsIDI1MCk7XG5cbiAgcmV0dXJuIHRocm90dGxlKGUgPT4ge1xuICAgIGNvbnN0IGxvYWRlZCA9IGUubG9hZGVkO1xuICAgIGNvbnN0IHRvdGFsID0gZS5sZW5ndGhDb21wdXRhYmxlID8gZS50b3RhbCA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBwcm9ncmVzc0J5dGVzID0gbG9hZGVkIC0gYnl0ZXNOb3RpZmllZDtcbiAgICBjb25zdCByYXRlID0gX3NwZWVkb21ldGVyKHByb2dyZXNzQnl0ZXMpO1xuICAgIGNvbnN0IGluUmFuZ2UgPSBsb2FkZWQgPD0gdG90YWw7XG5cbiAgICBieXRlc05vdGlmaWVkID0gbG9hZGVkO1xuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGxvYWRlZCxcbiAgICAgIHRvdGFsLFxuICAgICAgcHJvZ3Jlc3M6IHRvdGFsID8gKGxvYWRlZCAvIHRvdGFsKSA6IHVuZGVmaW5lZCxcbiAgICAgIGJ5dGVzOiBwcm9ncmVzc0J5dGVzLFxuICAgICAgcmF0ZTogcmF0ZSA/IHJhdGUgOiB1bmRlZmluZWQsXG4gICAgICBlc3RpbWF0ZWQ6IHJhdGUgJiYgdG90YWwgJiYgaW5SYW5nZSA/ICh0b3RhbCAtIGxvYWRlZCkgLyByYXRlIDogdW5kZWZpbmVkLFxuICAgICAgZXZlbnQ6IGUsXG4gICAgICBsZW5ndGhDb21wdXRhYmxlOiB0b3RhbCAhPSBudWxsLFxuICAgICAgW2lzRG93bmxvYWRTdHJlYW0gPyAnZG93bmxvYWQnIDogJ3VwbG9hZCddOiB0cnVlXG4gICAgfTtcblxuICAgIGxpc3RlbmVyKGRhdGEpO1xuICB9LCBmcmVxKTtcbn1cblxuZXhwb3J0IGNvbnN0IHByb2dyZXNzRXZlbnREZWNvcmF0b3IgPSAodG90YWwsIHRocm90dGxlZCkgPT4ge1xuICBjb25zdCBsZW5ndGhDb21wdXRhYmxlID0gdG90YWwgIT0gbnVsbDtcblxuICByZXR1cm4gWyhsb2FkZWQpID0+IHRocm90dGxlZFswXSh7XG4gICAgbGVuZ3RoQ29tcHV0YWJsZSxcbiAgICB0b3RhbCxcbiAgICBsb2FkZWRcbiAgfSksIHRocm90dGxlZFsxXV07XG59XG5cbmV4cG9ydCBjb25zdCBhc3luY0RlY29yYXRvciA9IChmbikgPT4gKC4uLmFyZ3MpID0+IHV0aWxzLmFzYXAoKCkgPT4gZm4oLi4uYXJncykpO1xuIiwgImltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXRmb3JtLmhhc1N0YW5kYXJkQnJvd3NlckVudiA/ICgob3JpZ2luLCBpc01TSUUpID0+ICh1cmwpID0+IHtcbiAgdXJsID0gbmV3IFVSTCh1cmwsIHBsYXRmb3JtLm9yaWdpbik7XG5cbiAgcmV0dXJuIChcbiAgICBvcmlnaW4ucHJvdG9jb2wgPT09IHVybC5wcm90b2NvbCAmJlxuICAgIG9yaWdpbi5ob3N0ID09PSB1cmwuaG9zdCAmJlxuICAgIChpc01TSUUgfHwgb3JpZ2luLnBvcnQgPT09IHVybC5wb3J0KVxuICApO1xufSkoXG4gIG5ldyBVUkwocGxhdGZvcm0ub3JpZ2luKSxcbiAgcGxhdGZvcm0ubmF2aWdhdG9yICYmIC8obXNpZXx0cmlkZW50KS9pLnRlc3QocGxhdGZvcm0ubmF2aWdhdG9yLnVzZXJBZ2VudClcbikgOiAoKSA9PiB0cnVlO1xuIiwgImltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXRmb3JtLmhhc1N0YW5kYXJkQnJvd3NlckVudiA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llXG4gIHtcbiAgICB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHtcbiAgICAgIGNvbnN0IGNvb2tpZSA9IFtuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKV07XG5cbiAgICAgIHV0aWxzLmlzTnVtYmVyKGV4cGlyZXMpICYmIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcblxuICAgICAgdXRpbHMuaXNTdHJpbmcocGF0aCkgJiYgY29va2llLnB1c2goJ3BhdGg9JyArIHBhdGgpO1xuXG4gICAgICB1dGlscy5pc1N0cmluZyhkb21haW4pICYmIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG5cbiAgICAgIHNlY3VyZSA9PT0gdHJ1ZSAmJiBjb29raWUucHVzaCgnc2VjdXJlJyk7XG5cbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpO1xuICAgIH0sXG5cbiAgICByZWFkKG5hbWUpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgIHJldHVybiAobWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbM10pIDogbnVsbCk7XG4gICAgfSxcblxuICAgIHJlbW92ZShuYW1lKSB7XG4gICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApO1xuICAgIH1cbiAgfVxuXG4gIDpcblxuICAvLyBOb24tc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gIHtcbiAgICB3cml0ZSgpIHt9LFxuICAgIHJlYWQoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHJlbW92ZSgpIHt9XG4gIH07XG5cbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG4gIC8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggXCI8c2NoZW1lPjovL1wiIG9yIFwiLy9cIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS5cbiAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkXG4gIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuICByZXR1cm4gL14oW2Etel1bYS16XFxkK1xcLS5dKjopP1xcL1xcLy9pLnRlc3QodXJsKTtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkxcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gIHJldHVybiByZWxhdGl2ZVVSTFxuICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8/XFwvJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgOiBiYXNlVVJMO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IGlzQWJzb2x1dGVVUkwgZnJvbSAnLi4vaGVscGVycy9pc0Fic29sdXRlVVJMLmpzJztcbmltcG9ydCBjb21iaW5lVVJMcyBmcm9tICcuLi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIGJhc2VVUkwgd2l0aCB0aGUgcmVxdWVzdGVkVVJMLFxuICogb25seSB3aGVuIHRoZSByZXF1ZXN0ZWRVUkwgaXMgbm90IGFscmVhZHkgYW4gYWJzb2x1dGUgVVJMLlxuICogSWYgdGhlIHJlcXVlc3RVUkwgaXMgYWJzb2x1dGUsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgcmVxdWVzdGVkVVJMIHVudG91Y2hlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0ZWRVUkwgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIHRvIGNvbWJpbmVcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgZnVsbCBwYXRoXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJ1aWxkRnVsbFBhdGgoYmFzZVVSTCwgcmVxdWVzdGVkVVJMLCBhbGxvd0Fic29sdXRlVXJscykge1xuICBsZXQgaXNSZWxhdGl2ZVVybCA9ICFpc0Fic29sdXRlVVJMKHJlcXVlc3RlZFVSTCk7XG4gIGlmIChiYXNlVVJMICYmIChpc1JlbGF0aXZlVXJsIHx8IGFsbG93QWJzb2x1dGVVcmxzID09IGZhbHNlKSkge1xuICAgIHJldHVybiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpO1xuICB9XG4gIHJldHVybiByZXF1ZXN0ZWRVUkw7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tIFwiLi9BeGlvc0hlYWRlcnMuanNcIjtcblxuY29uc3QgaGVhZGVyc1RvT2JqZWN0ID0gKHRoaW5nKSA9PiB0aGluZyBpbnN0YW5jZW9mIEF4aW9zSGVhZGVycyA/IHsgLi4udGhpbmcgfSA6IHRoaW5nO1xuXG4vKipcbiAqIENvbmZpZy1zcGVjaWZpYyBtZXJnZS1mdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgbmV3IGNvbmZpZy1vYmplY3RcbiAqIGJ5IG1lcmdpbmcgdHdvIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMVxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzJcbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBOZXcgb2JqZWN0IHJlc3VsdGluZyBmcm9tIG1lcmdpbmcgY29uZmlnMiB0byBjb25maWcxXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lcmdlQ29uZmlnKGNvbmZpZzEsIGNvbmZpZzIpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIGNvbmZpZzIgPSBjb25maWcyIHx8IHt9O1xuICBjb25zdCBjb25maWcgPSB7fTtcblxuICBmdW5jdGlvbiBnZXRNZXJnZWRWYWx1ZSh0YXJnZXQsIHNvdXJjZSwgcHJvcCwgY2FzZWxlc3MpIHtcbiAgICBpZiAodXRpbHMuaXNQbGFpbk9iamVjdCh0YXJnZXQpICYmIHV0aWxzLmlzUGxhaW5PYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHV0aWxzLm1lcmdlLmNhbGwoe2Nhc2VsZXNzfSwgdGFyZ2V0LCBzb3VyY2UpO1xuICAgIH0gZWxzZSBpZiAodXRpbHMuaXNQbGFpbk9iamVjdChzb3VyY2UpKSB7XG4gICAgICByZXR1cm4gdXRpbHMubWVyZ2Uoe30sIHNvdXJjZSk7XG4gICAgfSBlbHNlIGlmICh1dGlscy5pc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiBzb3VyY2Uuc2xpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHNvdXJjZTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiBtZXJnZURlZXBQcm9wZXJ0aWVzKGEsIGIsIHByb3AgLCBjYXNlbGVzcykge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoYikpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShhLCBiLCBwcm9wICwgY2FzZWxlc3MpO1xuICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGEpKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBhLCBwcm9wICwgY2FzZWxlc3MpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiB2YWx1ZUZyb21Db25maWcyKGEsIGIpIHtcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGIpKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBiKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gZGVmYXVsdFRvQ29uZmlnMihhLCBiKSB7XG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChiKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgYik7XG4gICAgfSBlbHNlIGlmICghdXRpbHMuaXNVbmRlZmluZWQoYSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGEpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiBtZXJnZURpcmVjdEtleXMoYSwgYiwgcHJvcCkge1xuICAgIGlmIChwcm9wIGluIGNvbmZpZzIpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShhLCBiKTtcbiAgICB9IGVsc2UgaWYgKHByb3AgaW4gY29uZmlnMSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgYSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgbWVyZ2VNYXAgPSB7XG4gICAgdXJsOiB2YWx1ZUZyb21Db25maWcyLFxuICAgIG1ldGhvZDogdmFsdWVGcm9tQ29uZmlnMixcbiAgICBkYXRhOiB2YWx1ZUZyb21Db25maWcyLFxuICAgIGJhc2VVUkw6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdHJhbnNmb3JtUmVxdWVzdDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB0cmFuc2Zvcm1SZXNwb25zZTogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBwYXJhbXNTZXJpYWxpemVyOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHRpbWVvdXQ6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdGltZW91dE1lc3NhZ2U6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgd2l0aENyZWRlbnRpYWxzOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHdpdGhYU1JGVG9rZW46IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgYWRhcHRlcjogZGVmYXVsdFRvQ29uZmlnMixcbiAgICByZXNwb25zZVR5cGU6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgeHNyZkNvb2tpZU5hbWU6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgeHNyZkhlYWRlck5hbWU6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgb25VcGxvYWRQcm9ncmVzczogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBvbkRvd25sb2FkUHJvZ3Jlc3M6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgZGVjb21wcmVzczogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBtYXhDb250ZW50TGVuZ3RoOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIG1heEJvZHlMZW5ndGg6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgYmVmb3JlUmVkaXJlY3Q6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgdHJhbnNwb3J0OiBkZWZhdWx0VG9Db25maWcyLFxuICAgIGh0dHBBZ2VudDogZGVmYXVsdFRvQ29uZmlnMixcbiAgICBodHRwc0FnZW50OiBkZWZhdWx0VG9Db25maWcyLFxuICAgIGNhbmNlbFRva2VuOiBkZWZhdWx0VG9Db25maWcyLFxuICAgIHNvY2tldFBhdGg6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgcmVzcG9uc2VFbmNvZGluZzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICB2YWxpZGF0ZVN0YXR1czogbWVyZ2VEaXJlY3RLZXlzLFxuICAgIGhlYWRlcnM6IChhLCBiICwgcHJvcCkgPT4gbWVyZ2VEZWVwUHJvcGVydGllcyhoZWFkZXJzVG9PYmplY3QoYSksIGhlYWRlcnNUb09iamVjdChiKSxwcm9wLCB0cnVlKVxuICB9O1xuXG4gIHV0aWxzLmZvckVhY2goT2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnMSwgY29uZmlnMikpLCBmdW5jdGlvbiBjb21wdXRlQ29uZmlnVmFsdWUocHJvcCkge1xuICAgIGNvbnN0IG1lcmdlID0gbWVyZ2VNYXBbcHJvcF0gfHwgbWVyZ2VEZWVwUHJvcGVydGllcztcbiAgICBjb25zdCBjb25maWdWYWx1ZSA9IG1lcmdlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0sIHByb3ApO1xuICAgICh1dGlscy5pc1VuZGVmaW5lZChjb25maWdWYWx1ZSkgJiYgbWVyZ2UgIT09IG1lcmdlRGlyZWN0S2V5cykgfHwgKGNvbmZpZ1twcm9wXSA9IGNvbmZpZ1ZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn1cbiIsICJpbXBvcnQgcGxhdGZvcm0gZnJvbSBcIi4uL3BsYXRmb3JtL2luZGV4LmpzXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgaXNVUkxTYW1lT3JpZ2luIGZyb20gXCIuL2lzVVJMU2FtZU9yaWdpbi5qc1wiO1xuaW1wb3J0IGNvb2tpZXMgZnJvbSBcIi4vY29va2llcy5qc1wiO1xuaW1wb3J0IGJ1aWxkRnVsbFBhdGggZnJvbSBcIi4uL2NvcmUvYnVpbGRGdWxsUGF0aC5qc1wiO1xuaW1wb3J0IG1lcmdlQ29uZmlnIGZyb20gXCIuLi9jb3JlL21lcmdlQ29uZmlnLmpzXCI7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gXCIuLi9jb3JlL0F4aW9zSGVhZGVycy5qc1wiO1xuaW1wb3J0IGJ1aWxkVVJMIGZyb20gXCIuL2J1aWxkVVJMLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IChjb25maWcpID0+IHtcbiAgY29uc3QgbmV3Q29uZmlnID0gbWVyZ2VDb25maWcoe30sIGNvbmZpZyk7XG5cbiAgbGV0IHtkYXRhLCB3aXRoWFNSRlRva2VuLCB4c3JmSGVhZGVyTmFtZSwgeHNyZkNvb2tpZU5hbWUsIGhlYWRlcnMsIGF1dGh9ID0gbmV3Q29uZmlnO1xuXG4gIG5ld0NvbmZpZy5oZWFkZXJzID0gaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKGhlYWRlcnMpO1xuXG4gIG5ld0NvbmZpZy51cmwgPSBidWlsZFVSTChidWlsZEZ1bGxQYXRoKG5ld0NvbmZpZy5iYXNlVVJMLCBuZXdDb25maWcudXJsLCBuZXdDb25maWcuYWxsb3dBYnNvbHV0ZVVybHMpLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplcik7XG5cbiAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICBpZiAoYXV0aCkge1xuICAgIGhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgJ0Jhc2ljICcgK1xuICAgICAgYnRvYSgoYXV0aC51c2VybmFtZSB8fCAnJykgKyAnOicgKyAoYXV0aC5wYXNzd29yZCA/IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhdXRoLnBhc3N3b3JkKSkgOiAnJykpXG4gICAgKTtcbiAgfVxuXG4gIGxldCBjb250ZW50VHlwZTtcblxuICBpZiAodXRpbHMuaXNGb3JtRGF0YShkYXRhKSkge1xuICAgIGlmIChwbGF0Zm9ybS5oYXNTdGFuZGFyZEJyb3dzZXJFbnYgfHwgcGxhdGZvcm0uaGFzU3RhbmRhcmRCcm93c2VyV2ViV29ya2VyRW52KSB7XG4gICAgICBoZWFkZXJzLnNldENvbnRlbnRUeXBlKHVuZGVmaW5lZCk7IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9IGVsc2UgaWYgKChjb250ZW50VHlwZSA9IGhlYWRlcnMuZ2V0Q29udGVudFR5cGUoKSkgIT09IGZhbHNlKSB7XG4gICAgICAvLyBmaXggc2VtaWNvbG9uIGR1cGxpY2F0aW9uIGlzc3VlIGZvciBSZWFjdE5hdGl2ZSBGb3JtRGF0YSBpbXBsZW1lbnRhdGlvblxuICAgICAgY29uc3QgW3R5cGUsIC4uLnRva2Vuc10gPSBjb250ZW50VHlwZSA/IGNvbnRlbnRUeXBlLnNwbGl0KCc7JykubWFwKHRva2VuID0+IHRva2VuLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pIDogW107XG4gICAgICBoZWFkZXJzLnNldENvbnRlbnRUeXBlKFt0eXBlIHx8ICdtdWx0aXBhcnQvZm9ybS1kYXRhJywgLi4udG9rZW5zXS5qb2luKCc7ICcpKTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gIC8vIFNwZWNpZmljYWxseSBub3QgaWYgd2UncmUgaW4gYSB3ZWIgd29ya2VyLCBvciByZWFjdC1uYXRpdmUuXG5cbiAgaWYgKHBsYXRmb3JtLmhhc1N0YW5kYXJkQnJvd3NlckVudikge1xuICAgIHdpdGhYU1JGVG9rZW4gJiYgdXRpbHMuaXNGdW5jdGlvbih3aXRoWFNSRlRva2VuKSAmJiAod2l0aFhTUkZUb2tlbiA9IHdpdGhYU1JGVG9rZW4obmV3Q29uZmlnKSk7XG5cbiAgICBpZiAod2l0aFhTUkZUb2tlbiB8fCAod2l0aFhTUkZUb2tlbiAhPT0gZmFsc2UgJiYgaXNVUkxTYW1lT3JpZ2luKG5ld0NvbmZpZy51cmwpKSkge1xuICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgICBjb25zdCB4c3JmVmFsdWUgPSB4c3JmSGVhZGVyTmFtZSAmJiB4c3JmQ29va2llTmFtZSAmJiBjb29raWVzLnJlYWQoeHNyZkNvb2tpZU5hbWUpO1xuXG4gICAgICBpZiAoeHNyZlZhbHVlKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KHhzcmZIZWFkZXJOYW1lLCB4c3JmVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdDb25maWc7XG59XG5cbiIsICJpbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5pbXBvcnQgc2V0dGxlIGZyb20gJy4vLi4vY29yZS9zZXR0bGUuanMnO1xuaW1wb3J0IHRyYW5zaXRpb25hbERlZmF1bHRzIGZyb20gJy4uL2RlZmF1bHRzL3RyYW5zaXRpb25hbC5qcyc7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tICcuLi9jb3JlL0F4aW9zRXJyb3IuanMnO1xuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IHBhcnNlUHJvdG9jb2wgZnJvbSAnLi4vaGVscGVycy9wYXJzZVByb3RvY29sLmpzJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICcuLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gJy4uL2NvcmUvQXhpb3NIZWFkZXJzLmpzJztcbmltcG9ydCB7cHJvZ3Jlc3NFdmVudFJlZHVjZXJ9IGZyb20gJy4uL2hlbHBlcnMvcHJvZ3Jlc3NFdmVudFJlZHVjZXIuanMnO1xuaW1wb3J0IHJlc29sdmVDb25maWcgZnJvbSBcIi4uL2hlbHBlcnMvcmVzb2x2ZUNvbmZpZy5qc1wiO1xuXG5jb25zdCBpc1hIUkFkYXB0ZXJTdXBwb3J0ZWQgPSB0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnO1xuXG5leHBvcnQgZGVmYXVsdCBpc1hIUkFkYXB0ZXJTdXBwb3J0ZWQgJiYgZnVuY3Rpb24gKGNvbmZpZykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZGlzcGF0Y2hYaHJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xuICAgIGNvbnN0IF9jb25maWcgPSByZXNvbHZlQ29uZmlnKGNvbmZpZyk7XG4gICAgbGV0IHJlcXVlc3REYXRhID0gX2NvbmZpZy5kYXRhO1xuICAgIGNvbnN0IHJlcXVlc3RIZWFkZXJzID0gQXhpb3NIZWFkZXJzLmZyb20oX2NvbmZpZy5oZWFkZXJzKS5ub3JtYWxpemUoKTtcbiAgICBsZXQge3Jlc3BvbnNlVHlwZSwgb25VcGxvYWRQcm9ncmVzcywgb25Eb3dubG9hZFByb2dyZXNzfSA9IF9jb25maWc7XG4gICAgbGV0IG9uQ2FuY2VsZWQ7XG4gICAgbGV0IHVwbG9hZFRocm90dGxlZCwgZG93bmxvYWRUaHJvdHRsZWQ7XG4gICAgbGV0IGZsdXNoVXBsb2FkLCBmbHVzaERvd25sb2FkO1xuXG4gICAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICAgIGZsdXNoVXBsb2FkICYmIGZsdXNoVXBsb2FkKCk7IC8vIGZsdXNoIGV2ZW50c1xuICAgICAgZmx1c2hEb3dubG9hZCAmJiBmbHVzaERvd25sb2FkKCk7IC8vIGZsdXNoIGV2ZW50c1xuXG4gICAgICBfY29uZmlnLmNhbmNlbFRva2VuICYmIF9jb25maWcuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUob25DYW5jZWxlZCk7XG5cbiAgICAgIF9jb25maWcuc2lnbmFsICYmIF9jb25maWcuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7XG4gICAgfVxuXG4gICAgbGV0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIHJlcXVlc3Qub3BlbihfY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBfY29uZmlnLnVybCwgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xuICAgIHJlcXVlc3QudGltZW91dCA9IF9jb25maWcudGltZW91dDtcblxuICAgIGZ1bmN0aW9uIG9ubG9hZGVuZCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgY29uc3QgcmVzcG9uc2VIZWFkZXJzID0gQXhpb3NIZWFkZXJzLmZyb20oXG4gICAgICAgICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgJiYgcmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9ICFyZXNwb25zZVR5cGUgfHwgcmVzcG9uc2VUeXBlID09PSAndGV4dCcgfHwgcmVzcG9uc2VUeXBlID09PSAnanNvbicgP1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7XG4gICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1c1RleHQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICByZXF1ZXN0XG4gICAgICB9O1xuXG4gICAgICBzZXR0bGUoZnVuY3Rpb24gX3Jlc29sdmUodmFsdWUpIHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0sIGZ1bmN0aW9uIF9yZWplY3QoZXJyKSB7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCByZXNwb25zZSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICgnb25sb2FkZW5kJyBpbiByZXF1ZXN0KSB7XG4gICAgICAvLyBVc2Ugb25sb2FkZW5kIGlmIGF2YWlsYWJsZVxuICAgICAgcmVxdWVzdC5vbmxvYWRlbmQgPSBvbmxvYWRlbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIExpc3RlbiBmb3IgcmVhZHkgc3RhdGUgdG8gZW11bGF0ZSBvbmxvYWRlbmRcbiAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0IHx8IHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuICAgICAgICAvLyBoYW5kbGVkIGJ5IG9uZXJyb3IgaW5zdGVhZFxuICAgICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuICAgICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMCAmJiAhKHJlcXVlc3QucmVzcG9uc2VVUkwgJiYgcmVxdWVzdC5yZXNwb25zZVVSTC5pbmRleE9mKCdmaWxlOicpID09PSAwKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWFkeXN0YXRlIGhhbmRsZXIgaXMgY2FsbGluZyBiZWZvcmUgb25lcnJvciBvciBvbnRpbWVvdXQgaGFuZGxlcnMsXG4gICAgICAgIC8vIHNvIHdlIHNob3VsZCBjYWxsIG9ubG9hZGVuZCBvbiB0aGUgbmV4dCAndGljaydcbiAgICAgICAgc2V0VGltZW91dChvbmxvYWRlbmQpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgYnJvd3NlciByZXF1ZXN0IGNhbmNlbGxhdGlvbiAoYXMgb3Bwb3NlZCB0byBhIG1hbnVhbCBjYW5jZWxsYXRpb24pXG4gICAgcmVxdWVzdC5vbmFib3J0ID0gZnVuY3Rpb24gaGFuZGxlQWJvcnQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoJ1JlcXVlc3QgYWJvcnRlZCcsIEF4aW9zRXJyb3IuRUNPTk5BQk9SVEVELCBjb25maWcsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSBsb3cgbGV2ZWwgbmV0d29yayBlcnJvcnNcbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHtcbiAgICAgIC8vIFJlYWwgZXJyb3JzIGFyZSBoaWRkZW4gZnJvbSB1cyBieSB0aGUgYnJvd3NlclxuICAgICAgLy8gb25lcnJvciBzaG91bGQgb25seSBmaXJlIGlmIGl0J3MgYSBuZXR3b3JrIGVycm9yXG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBBeGlvc0Vycm9yLkVSUl9ORVRXT1JLLCBjb25maWcsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSB0aW1lb3V0XG4gICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge1xuICAgICAgbGV0IHRpbWVvdXRFcnJvck1lc3NhZ2UgPSBfY29uZmlnLnRpbWVvdXQgPyAndGltZW91dCBvZiAnICsgX2NvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJyA6ICd0aW1lb3V0IGV4Y2VlZGVkJztcbiAgICAgIGNvbnN0IHRyYW5zaXRpb25hbCA9IF9jb25maWcudHJhbnNpdGlvbmFsIHx8IHRyYW5zaXRpb25hbERlZmF1bHRzO1xuICAgICAgaWYgKF9jb25maWcudGltZW91dEVycm9yTWVzc2FnZSkge1xuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlID0gX2NvbmZpZy50aW1lb3V0RXJyb3JNZXNzYWdlO1xuICAgICAgfVxuICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yKFxuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlLFxuICAgICAgICB0cmFuc2l0aW9uYWwuY2xhcmlmeVRpbWVvdXRFcnJvciA/IEF4aW9zRXJyb3IuRVRJTUVET1VUIDogQXhpb3NFcnJvci5FQ09OTkFCT1JURUQsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gUmVtb3ZlIENvbnRlbnQtVHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICAgIHJlcXVlc3REYXRhID09PSB1bmRlZmluZWQgJiYgcmVxdWVzdEhlYWRlcnMuc2V0Q29udGVudFR5cGUobnVsbCk7XG5cbiAgICAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdFxuICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkge1xuICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycy50b0pTT04oKSwgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHdpdGhDcmVkZW50aWFscyB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoX2NvbmZpZy53aXRoQ3JlZGVudGlhbHMpKSB7XG4gICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9ICEhX2NvbmZpZy53aXRoQ3JlZGVudGlhbHM7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChyZXNwb25zZVR5cGUgJiYgcmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gX2NvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHByb2dyZXNzIGlmIG5lZWRlZFxuICAgIGlmIChvbkRvd25sb2FkUHJvZ3Jlc3MpIHtcbiAgICAgIChbZG93bmxvYWRUaHJvdHRsZWQsIGZsdXNoRG93bmxvYWRdID0gcHJvZ3Jlc3NFdmVudFJlZHVjZXIob25Eb3dubG9hZFByb2dyZXNzLCB0cnVlKSk7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgZG93bmxvYWRUaHJvdHRsZWQpO1xuICAgIH1cblxuICAgIC8vIE5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCB1cGxvYWQgZXZlbnRzXG4gICAgaWYgKG9uVXBsb2FkUHJvZ3Jlc3MgJiYgcmVxdWVzdC51cGxvYWQpIHtcbiAgICAgIChbdXBsb2FkVGhyb3R0bGVkLCBmbHVzaFVwbG9hZF0gPSBwcm9ncmVzc0V2ZW50UmVkdWNlcihvblVwbG9hZFByb2dyZXNzKSk7XG5cbiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgdXBsb2FkVGhyb3R0bGVkKTtcblxuICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsIGZsdXNoVXBsb2FkKTtcbiAgICB9XG5cbiAgICBpZiAoX2NvbmZpZy5jYW5jZWxUb2tlbiB8fCBfY29uZmlnLnNpZ25hbCkge1xuICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICAgIG9uQ2FuY2VsZWQgPSBjYW5jZWwgPT4ge1xuICAgICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVqZWN0KCFjYW5jZWwgfHwgY2FuY2VsLnR5cGUgPyBuZXcgQ2FuY2VsZWRFcnJvcihudWxsLCBjb25maWcsIHJlcXVlc3QpIDogY2FuY2VsKTtcbiAgICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIF9jb25maWcuY2FuY2VsVG9rZW4gJiYgX2NvbmZpZy5jYW5jZWxUb2tlbi5zdWJzY3JpYmUob25DYW5jZWxlZCk7XG4gICAgICBpZiAoX2NvbmZpZy5zaWduYWwpIHtcbiAgICAgICAgX2NvbmZpZy5zaWduYWwuYWJvcnRlZCA/IG9uQ2FuY2VsZWQoKSA6IF9jb25maWcuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcHJvdG9jb2wgPSBwYXJzZVByb3RvY29sKF9jb25maWcudXJsKTtcblxuICAgIGlmIChwcm90b2NvbCAmJiBwbGF0Zm9ybS5wcm90b2NvbHMuaW5kZXhPZihwcm90b2NvbCkgPT09IC0xKSB7XG4gICAgICByZWplY3QobmV3IEF4aW9zRXJyb3IoJ1Vuc3VwcG9ydGVkIHByb3RvY29sICcgKyBwcm90b2NvbCArICc6JywgQXhpb3NFcnJvci5FUlJfQkFEX1JFUVVFU1QsIGNvbmZpZykpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuXG4gICAgLy8gU2VuZCB0aGUgcmVxdWVzdFxuICAgIHJlcXVlc3Quc2VuZChyZXF1ZXN0RGF0YSB8fCBudWxsKTtcbiAgfSk7XG59XG4iLCAiaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSBcIi4uL2NhbmNlbC9DYW5jZWxlZEVycm9yLmpzXCI7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tIFwiLi4vY29yZS9BeGlvc0Vycm9yLmpzXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuXG5jb25zdCBjb21wb3NlU2lnbmFscyA9IChzaWduYWxzLCB0aW1lb3V0KSA9PiB7XG4gIGNvbnN0IHtsZW5ndGh9ID0gKHNpZ25hbHMgPSBzaWduYWxzID8gc2lnbmFscy5maWx0ZXIoQm9vbGVhbikgOiBbXSk7XG5cbiAgaWYgKHRpbWVvdXQgfHwgbGVuZ3RoKSB7XG4gICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgICBsZXQgYWJvcnRlZDtcblxuICAgIGNvbnN0IG9uYWJvcnQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoIWFib3J0ZWQpIHtcbiAgICAgICAgYWJvcnRlZCA9IHRydWU7XG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIGNvbnN0IGVyciA9IHJlYXNvbiBpbnN0YW5jZW9mIEVycm9yID8gcmVhc29uIDogdGhpcy5yZWFzb247XG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoZXJyIGluc3RhbmNlb2YgQXhpb3NFcnJvciA/IGVyciA6IG5ldyBDYW5jZWxlZEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBlcnIpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdGltZXIgPSB0aW1lb3V0ICYmIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGltZXIgPSBudWxsO1xuICAgICAgb25hYm9ydChuZXcgQXhpb3NFcnJvcihgdGltZW91dCAke3RpbWVvdXR9IG9mIG1zIGV4Y2VlZGVkYCwgQXhpb3NFcnJvci5FVElNRURPVVQpKVxuICAgIH0sIHRpbWVvdXQpXG5cbiAgICBjb25zdCB1bnN1YnNjcmliZSA9ICgpID0+IHtcbiAgICAgIGlmIChzaWduYWxzKSB7XG4gICAgICAgIHRpbWVyICYmIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgICAgc2lnbmFscy5mb3JFYWNoKHNpZ25hbCA9PiB7XG4gICAgICAgICAgc2lnbmFsLnVuc3Vic2NyaWJlID8gc2lnbmFsLnVuc3Vic2NyaWJlKG9uYWJvcnQpIDogc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25hYm9ydCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzaWduYWxzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaWduYWxzLmZvckVhY2goKHNpZ25hbCkgPT4gc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25hYm9ydCkpO1xuXG4gICAgY29uc3Qge3NpZ25hbH0gPSBjb250cm9sbGVyO1xuXG4gICAgc2lnbmFsLnVuc3Vic2NyaWJlID0gKCkgPT4gdXRpbHMuYXNhcCh1bnN1YnNjcmliZSk7XG5cbiAgICByZXR1cm4gc2lnbmFsO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvc2VTaWduYWxzO1xuIiwgIlxuZXhwb3J0IGNvbnN0IHN0cmVhbUNodW5rID0gZnVuY3Rpb24qIChjaHVuaywgY2h1bmtTaXplKSB7XG4gIGxldCBsZW4gPSBjaHVuay5ieXRlTGVuZ3RoO1xuXG4gIGlmICghY2h1bmtTaXplIHx8IGxlbiA8IGNodW5rU2l6ZSkge1xuICAgIHlpZWxkIGNodW5rO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBwb3MgPSAwO1xuICBsZXQgZW5kO1xuXG4gIHdoaWxlIChwb3MgPCBsZW4pIHtcbiAgICBlbmQgPSBwb3MgKyBjaHVua1NpemU7XG4gICAgeWllbGQgY2h1bmsuc2xpY2UocG9zLCBlbmQpO1xuICAgIHBvcyA9IGVuZDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcmVhZEJ5dGVzID0gYXN5bmMgZnVuY3Rpb24qIChpdGVyYWJsZSwgY2h1bmtTaXplKSB7XG4gIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgcmVhZFN0cmVhbShpdGVyYWJsZSkpIHtcbiAgICB5aWVsZCogc3RyZWFtQ2h1bmsoY2h1bmssIGNodW5rU2l6ZSk7XG4gIH1cbn1cblxuY29uc3QgcmVhZFN0cmVhbSA9IGFzeW5jIGZ1bmN0aW9uKiAoc3RyZWFtKSB7XG4gIGlmIChzdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKSB7XG4gICAgeWllbGQqIHN0cmVhbTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG4gIHRyeSB7XG4gICAgZm9yICg7Oykge1xuICAgICAgY29uc3Qge2RvbmUsIHZhbHVlfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICBpZiAoZG9uZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHlpZWxkIHZhbHVlO1xuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCByZWFkZXIuY2FuY2VsKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHRyYWNrU3RyZWFtID0gKHN0cmVhbSwgY2h1bmtTaXplLCBvblByb2dyZXNzLCBvbkZpbmlzaCkgPT4ge1xuICBjb25zdCBpdGVyYXRvciA9IHJlYWRCeXRlcyhzdHJlYW0sIGNodW5rU2l6ZSk7XG5cbiAgbGV0IGJ5dGVzID0gMDtcbiAgbGV0IGRvbmU7XG4gIGxldCBfb25GaW5pc2ggPSAoZSkgPT4ge1xuICAgIGlmICghZG9uZSkge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBvbkZpbmlzaCAmJiBvbkZpbmlzaChlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICBhc3luYyBwdWxsKGNvbnRyb2xsZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHtkb25lLCB2YWx1ZX0gPSBhd2FpdCBpdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgIF9vbkZpbmlzaCgpO1xuICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbGVuID0gdmFsdWUuYnl0ZUxlbmd0aDtcbiAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgICBsZXQgbG9hZGVkQnl0ZXMgPSBieXRlcyArPSBsZW47XG4gICAgICAgICAgb25Qcm9ncmVzcyhsb2FkZWRCeXRlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKG5ldyBVaW50OEFycmF5KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgX29uRmluaXNoKGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNhbmNlbChyZWFzb24pIHtcbiAgICAgIF9vbkZpbmlzaChyZWFzb24pO1xuICAgICAgcmV0dXJuIGl0ZXJhdG9yLnJldHVybigpO1xuICAgIH1cbiAgfSwge1xuICAgIGhpZ2hXYXRlck1hcms6IDJcbiAgfSlcbn1cbiIsICJpbXBvcnQgcGxhdGZvcm0gZnJvbSBcIi4uL3BsYXRmb3JtL2luZGV4LmpzXCI7XG5pbXBvcnQgdXRpbHMgZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tIFwiLi4vY29yZS9BeGlvc0Vycm9yLmpzXCI7XG5pbXBvcnQgY29tcG9zZVNpZ25hbHMgZnJvbSBcIi4uL2hlbHBlcnMvY29tcG9zZVNpZ25hbHMuanNcIjtcbmltcG9ydCB7dHJhY2tTdHJlYW19IGZyb20gXCIuLi9oZWxwZXJzL3RyYWNrU3RyZWFtLmpzXCI7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gXCIuLi9jb3JlL0F4aW9zSGVhZGVycy5qc1wiO1xuaW1wb3J0IHtwcm9ncmVzc0V2ZW50UmVkdWNlciwgcHJvZ3Jlc3NFdmVudERlY29yYXRvciwgYXN5bmNEZWNvcmF0b3J9IGZyb20gXCIuLi9oZWxwZXJzL3Byb2dyZXNzRXZlbnRSZWR1Y2VyLmpzXCI7XG5pbXBvcnQgcmVzb2x2ZUNvbmZpZyBmcm9tIFwiLi4vaGVscGVycy9yZXNvbHZlQ29uZmlnLmpzXCI7XG5pbXBvcnQgc2V0dGxlIGZyb20gXCIuLi9jb3JlL3NldHRsZS5qc1wiO1xuXG5jb25zdCBpc0ZldGNoU3VwcG9ydGVkID0gdHlwZW9mIGZldGNoID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBSZXF1ZXN0ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBSZXNwb25zZSA9PT0gJ2Z1bmN0aW9uJztcbmNvbnN0IGlzUmVhZGFibGVTdHJlYW1TdXBwb3J0ZWQgPSBpc0ZldGNoU3VwcG9ydGVkICYmIHR5cGVvZiBSZWFkYWJsZVN0cmVhbSA9PT0gJ2Z1bmN0aW9uJztcblxuLy8gdXNlZCBvbmx5IGluc2lkZSB0aGUgZmV0Y2ggYWRhcHRlclxuY29uc3QgZW5jb2RlVGV4dCA9IGlzRmV0Y2hTdXBwb3J0ZWQgJiYgKHR5cGVvZiBUZXh0RW5jb2RlciA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgKChlbmNvZGVyKSA9PiAoc3RyKSA9PiBlbmNvZGVyLmVuY29kZShzdHIpKShuZXcgVGV4dEVuY29kZXIoKSkgOlxuICAgIGFzeW5jIChzdHIpID0+IG5ldyBVaW50OEFycmF5KGF3YWl0IG5ldyBSZXNwb25zZShzdHIpLmFycmF5QnVmZmVyKCkpXG4pO1xuXG5jb25zdCB0ZXN0ID0gKGZuLCAuLi5hcmdzKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuICEhZm4oLi4uYXJncyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5jb25zdCBzdXBwb3J0c1JlcXVlc3RTdHJlYW0gPSBpc1JlYWRhYmxlU3RyZWFtU3VwcG9ydGVkICYmIHRlc3QoKCkgPT4ge1xuICBsZXQgZHVwbGV4QWNjZXNzZWQgPSBmYWxzZTtcblxuICBjb25zdCBoYXNDb250ZW50VHlwZSA9IG5ldyBSZXF1ZXN0KHBsYXRmb3JtLm9yaWdpbiwge1xuICAgIGJvZHk6IG5ldyBSZWFkYWJsZVN0cmVhbSgpLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGdldCBkdXBsZXgoKSB7XG4gICAgICBkdXBsZXhBY2Nlc3NlZCA9IHRydWU7XG4gICAgICByZXR1cm4gJ2hhbGYnO1xuICAgIH0sXG4gIH0pLmhlYWRlcnMuaGFzKCdDb250ZW50LVR5cGUnKTtcblxuICByZXR1cm4gZHVwbGV4QWNjZXNzZWQgJiYgIWhhc0NvbnRlbnRUeXBlO1xufSk7XG5cbmNvbnN0IERFRkFVTFRfQ0hVTktfU0laRSA9IDY0ICogMTAyNDtcblxuY29uc3Qgc3VwcG9ydHNSZXNwb25zZVN0cmVhbSA9IGlzUmVhZGFibGVTdHJlYW1TdXBwb3J0ZWQgJiZcbiAgdGVzdCgoKSA9PiB1dGlscy5pc1JlYWRhYmxlU3RyZWFtKG5ldyBSZXNwb25zZSgnJykuYm9keSkpO1xuXG5cbmNvbnN0IHJlc29sdmVycyA9IHtcbiAgc3RyZWFtOiBzdXBwb3J0c1Jlc3BvbnNlU3RyZWFtICYmICgocmVzKSA9PiByZXMuYm9keSlcbn07XG5cbmlzRmV0Y2hTdXBwb3J0ZWQgJiYgKCgocmVzKSA9PiB7XG4gIFsndGV4dCcsICdhcnJheUJ1ZmZlcicsICdibG9iJywgJ2Zvcm1EYXRhJywgJ3N0cmVhbSddLmZvckVhY2godHlwZSA9PiB7XG4gICAgIXJlc29sdmVyc1t0eXBlXSAmJiAocmVzb2x2ZXJzW3R5cGVdID0gdXRpbHMuaXNGdW5jdGlvbihyZXNbdHlwZV0pID8gKHJlcykgPT4gcmVzW3R5cGVdKCkgOlxuICAgICAgKF8sIGNvbmZpZykgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcihgUmVzcG9uc2UgdHlwZSAnJHt0eXBlfScgaXMgbm90IHN1cHBvcnRlZGAsIEF4aW9zRXJyb3IuRVJSX05PVF9TVVBQT1JULCBjb25maWcpO1xuICAgICAgfSlcbiAgfSk7XG59KShuZXcgUmVzcG9uc2UpKTtcblxuY29uc3QgZ2V0Qm9keUxlbmd0aCA9IGFzeW5jIChib2R5KSA9PiB7XG4gIGlmIChib2R5ID09IG51bGwpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGlmKHV0aWxzLmlzQmxvYihib2R5KSkge1xuICAgIHJldHVybiBib2R5LnNpemU7XG4gIH1cblxuICBpZih1dGlscy5pc1NwZWNDb21wbGlhbnRGb3JtKGJvZHkpKSB7XG4gICAgY29uc3QgX3JlcXVlc3QgPSBuZXcgUmVxdWVzdChwbGF0Zm9ybS5vcmlnaW4sIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keSxcbiAgICB9KTtcbiAgICByZXR1cm4gKGF3YWl0IF9yZXF1ZXN0LmFycmF5QnVmZmVyKCkpLmJ5dGVMZW5ndGg7XG4gIH1cblxuICBpZih1dGlscy5pc0FycmF5QnVmZmVyVmlldyhib2R5KSB8fCB1dGlscy5pc0FycmF5QnVmZmVyKGJvZHkpKSB7XG4gICAgcmV0dXJuIGJvZHkuYnl0ZUxlbmd0aDtcbiAgfVxuXG4gIGlmKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGJvZHkpKSB7XG4gICAgYm9keSA9IGJvZHkgKyAnJztcbiAgfVxuXG4gIGlmKHV0aWxzLmlzU3RyaW5nKGJvZHkpKSB7XG4gICAgcmV0dXJuIChhd2FpdCBlbmNvZGVUZXh0KGJvZHkpKS5ieXRlTGVuZ3RoO1xuICB9XG59XG5cbmNvbnN0IHJlc29sdmVCb2R5TGVuZ3RoID0gYXN5bmMgKGhlYWRlcnMsIGJvZHkpID0+IHtcbiAgY29uc3QgbGVuZ3RoID0gdXRpbHMudG9GaW5pdGVOdW1iZXIoaGVhZGVycy5nZXRDb250ZW50TGVuZ3RoKCkpO1xuXG4gIHJldHVybiBsZW5ndGggPT0gbnVsbCA/IGdldEJvZHlMZW5ndGgoYm9keSkgOiBsZW5ndGg7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGlzRmV0Y2hTdXBwb3J0ZWQgJiYgKGFzeW5jIChjb25maWcpID0+IHtcbiAgbGV0IHtcbiAgICB1cmwsXG4gICAgbWV0aG9kLFxuICAgIGRhdGEsXG4gICAgc2lnbmFsLFxuICAgIGNhbmNlbFRva2VuLFxuICAgIHRpbWVvdXQsXG4gICAgb25Eb3dubG9hZFByb2dyZXNzLFxuICAgIG9uVXBsb2FkUHJvZ3Jlc3MsXG4gICAgcmVzcG9uc2VUeXBlLFxuICAgIGhlYWRlcnMsXG4gICAgd2l0aENyZWRlbnRpYWxzID0gJ3NhbWUtb3JpZ2luJyxcbiAgICBmZXRjaE9wdGlvbnNcbiAgfSA9IHJlc29sdmVDb25maWcoY29uZmlnKTtcblxuICByZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGUgPyAocmVzcG9uc2VUeXBlICsgJycpLnRvTG93ZXJDYXNlKCkgOiAndGV4dCc7XG5cbiAgbGV0IGNvbXBvc2VkU2lnbmFsID0gY29tcG9zZVNpZ25hbHMoW3NpZ25hbCwgY2FuY2VsVG9rZW4gJiYgY2FuY2VsVG9rZW4udG9BYm9ydFNpZ25hbCgpXSwgdGltZW91dCk7XG5cbiAgbGV0IHJlcXVlc3Q7XG5cbiAgY29uc3QgdW5zdWJzY3JpYmUgPSBjb21wb3NlZFNpZ25hbCAmJiBjb21wb3NlZFNpZ25hbC51bnN1YnNjcmliZSAmJiAoKCkgPT4ge1xuICAgICAgY29tcG9zZWRTaWduYWwudW5zdWJzY3JpYmUoKTtcbiAgfSk7XG5cbiAgbGV0IHJlcXVlc3RDb250ZW50TGVuZ3RoO1xuXG4gIHRyeSB7XG4gICAgaWYgKFxuICAgICAgb25VcGxvYWRQcm9ncmVzcyAmJiBzdXBwb3J0c1JlcXVlc3RTdHJlYW0gJiYgbWV0aG9kICE9PSAnZ2V0JyAmJiBtZXRob2QgIT09ICdoZWFkJyAmJlxuICAgICAgKHJlcXVlc3RDb250ZW50TGVuZ3RoID0gYXdhaXQgcmVzb2x2ZUJvZHlMZW5ndGgoaGVhZGVycywgZGF0YSkpICE9PSAwXG4gICAgKSB7XG4gICAgICBsZXQgX3JlcXVlc3QgPSBuZXcgUmVxdWVzdCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGRhdGEsXG4gICAgICAgIGR1cGxleDogXCJoYWxmXCJcbiAgICAgIH0pO1xuXG4gICAgICBsZXQgY29udGVudFR5cGVIZWFkZXI7XG5cbiAgICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpICYmIChjb250ZW50VHlwZUhlYWRlciA9IF9yZXF1ZXN0LmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkpIHtcbiAgICAgICAgaGVhZGVycy5zZXRDb250ZW50VHlwZShjb250ZW50VHlwZUhlYWRlcilcbiAgICAgIH1cblxuICAgICAgaWYgKF9yZXF1ZXN0LmJvZHkpIHtcbiAgICAgICAgY29uc3QgW29uUHJvZ3Jlc3MsIGZsdXNoXSA9IHByb2dyZXNzRXZlbnREZWNvcmF0b3IoXG4gICAgICAgICAgcmVxdWVzdENvbnRlbnRMZW5ndGgsXG4gICAgICAgICAgcHJvZ3Jlc3NFdmVudFJlZHVjZXIoYXN5bmNEZWNvcmF0b3Iob25VcGxvYWRQcm9ncmVzcykpXG4gICAgICAgICk7XG5cbiAgICAgICAgZGF0YSA9IHRyYWNrU3RyZWFtKF9yZXF1ZXN0LmJvZHksIERFRkFVTFRfQ0hVTktfU0laRSwgb25Qcm9ncmVzcywgZmx1c2gpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdXRpbHMuaXNTdHJpbmcod2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgd2l0aENyZWRlbnRpYWxzID0gd2l0aENyZWRlbnRpYWxzID8gJ2luY2x1ZGUnIDogJ29taXQnO1xuICAgIH1cblxuICAgIC8vIENsb3VkZmxhcmUgV29ya2VycyB0aHJvd3Mgd2hlbiBjcmVkZW50aWFscyBhcmUgZGVmaW5lZFxuICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY2xvdWRmbGFyZS93b3JrZXJkL2lzc3Vlcy85MDJcbiAgICBjb25zdCBpc0NyZWRlbnRpYWxzU3VwcG9ydGVkID0gXCJjcmVkZW50aWFsc1wiIGluIFJlcXVlc3QucHJvdG90eXBlO1xuICAgIHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh1cmwsIHtcbiAgICAgIC4uLmZldGNoT3B0aW9ucyxcbiAgICAgIHNpZ25hbDogY29tcG9zZWRTaWduYWwsXG4gICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLFxuICAgICAgaGVhZGVyczogaGVhZGVycy5ub3JtYWxpemUoKS50b0pTT04oKSxcbiAgICAgIGJvZHk6IGRhdGEsXG4gICAgICBkdXBsZXg6IFwiaGFsZlwiLFxuICAgICAgY3JlZGVudGlhbHM6IGlzQ3JlZGVudGlhbHNTdXBwb3J0ZWQgPyB3aXRoQ3JlZGVudGlhbHMgOiB1bmRlZmluZWRcbiAgICB9KTtcblxuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlcXVlc3QsIGZldGNoT3B0aW9ucyk7XG5cbiAgICBjb25zdCBpc1N0cmVhbVJlc3BvbnNlID0gc3VwcG9ydHNSZXNwb25zZVN0cmVhbSAmJiAocmVzcG9uc2VUeXBlID09PSAnc3RyZWFtJyB8fCByZXNwb25zZVR5cGUgPT09ICdyZXNwb25zZScpO1xuXG4gICAgaWYgKHN1cHBvcnRzUmVzcG9uc2VTdHJlYW0gJiYgKG9uRG93bmxvYWRQcm9ncmVzcyB8fCAoaXNTdHJlYW1SZXNwb25zZSAmJiB1bnN1YnNjcmliZSkpKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0ge307XG5cbiAgICAgIFsnc3RhdHVzJywgJ3N0YXR1c1RleHQnLCAnaGVhZGVycyddLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICAgIG9wdGlvbnNbcHJvcF0gPSByZXNwb25zZVtwcm9wXTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZUNvbnRlbnRMZW5ndGggPSB1dGlscy50b0Zpbml0ZU51bWJlcihyZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC1sZW5ndGgnKSk7XG5cbiAgICAgIGNvbnN0IFtvblByb2dyZXNzLCBmbHVzaF0gPSBvbkRvd25sb2FkUHJvZ3Jlc3MgJiYgcHJvZ3Jlc3NFdmVudERlY29yYXRvcihcbiAgICAgICAgcmVzcG9uc2VDb250ZW50TGVuZ3RoLFxuICAgICAgICBwcm9ncmVzc0V2ZW50UmVkdWNlcihhc3luY0RlY29yYXRvcihvbkRvd25sb2FkUHJvZ3Jlc3MpLCB0cnVlKVxuICAgICAgKSB8fCBbXTtcblxuICAgICAgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoXG4gICAgICAgIHRyYWNrU3RyZWFtKHJlc3BvbnNlLmJvZHksIERFRkFVTFRfQ0hVTktfU0laRSwgb25Qcm9ncmVzcywgKCkgPT4ge1xuICAgICAgICAgIGZsdXNoICYmIGZsdXNoKCk7XG4gICAgICAgICAgdW5zdWJzY3JpYmUgJiYgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfSksXG4gICAgICAgIG9wdGlvbnNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlIHx8ICd0ZXh0JztcblxuICAgIGxldCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNvbHZlcnNbdXRpbHMuZmluZEtleShyZXNvbHZlcnMsIHJlc3BvbnNlVHlwZSkgfHwgJ3RleHQnXShyZXNwb25zZSwgY29uZmlnKTtcblxuICAgICFpc1N0cmVhbVJlc3BvbnNlICYmIHVuc3Vic2NyaWJlICYmIHVuc3Vic2NyaWJlKCk7XG5cbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwge1xuICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgIGhlYWRlcnM6IEF4aW9zSGVhZGVycy5mcm9tKHJlc3BvbnNlLmhlYWRlcnMpLFxuICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICByZXF1ZXN0XG4gICAgICB9KVxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHVuc3Vic2NyaWJlICYmIHVuc3Vic2NyaWJlKCk7XG5cbiAgICBpZiAoZXJyICYmIGVyci5uYW1lID09PSAnVHlwZUVycm9yJyAmJiAvTG9hZCBmYWlsZWR8ZmV0Y2gvaS50ZXN0KGVyci5tZXNzYWdlKSkge1xuICAgICAgdGhyb3cgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IEF4aW9zRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBBeGlvc0Vycm9yLkVSUl9ORVRXT1JLLCBjb25maWcsIHJlcXVlc3QpLFxuICAgICAgICB7XG4gICAgICAgICAgY2F1c2U6IGVyci5jYXVzZSB8fCBlcnJcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIHRocm93IEF4aW9zRXJyb3IuZnJvbShlcnIsIGVyciAmJiBlcnIuY29kZSwgY29uZmlnLCByZXF1ZXN0KTtcbiAgfVxufSk7XG5cblxuIiwgImltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgaHR0cEFkYXB0ZXIgZnJvbSAnLi9odHRwLmpzJztcbmltcG9ydCB4aHJBZGFwdGVyIGZyb20gJy4veGhyLmpzJztcbmltcG9ydCBmZXRjaEFkYXB0ZXIgZnJvbSAnLi9mZXRjaC5qcyc7XG5pbXBvcnQgQXhpb3NFcnJvciBmcm9tIFwiLi4vY29yZS9BeGlvc0Vycm9yLmpzXCI7XG5cbmNvbnN0IGtub3duQWRhcHRlcnMgPSB7XG4gIGh0dHA6IGh0dHBBZGFwdGVyLFxuICB4aHI6IHhockFkYXB0ZXIsXG4gIGZldGNoOiBmZXRjaEFkYXB0ZXJcbn1cblxudXRpbHMuZm9yRWFjaChrbm93bkFkYXB0ZXJzLCAoZm4sIHZhbHVlKSA9PiB7XG4gIGlmIChmbikge1xuICAgIHRyeSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sICduYW1lJywge3ZhbHVlfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgJ2FkYXB0ZXJOYW1lJywge3ZhbHVlfSk7XG4gIH1cbn0pO1xuXG5jb25zdCByZW5kZXJSZWFzb24gPSAocmVhc29uKSA9PiBgLSAke3JlYXNvbn1gO1xuXG5jb25zdCBpc1Jlc29sdmVkSGFuZGxlID0gKGFkYXB0ZXIpID0+IHV0aWxzLmlzRnVuY3Rpb24oYWRhcHRlcikgfHwgYWRhcHRlciA9PT0gbnVsbCB8fCBhZGFwdGVyID09PSBmYWxzZTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBnZXRBZGFwdGVyOiAoYWRhcHRlcnMpID0+IHtcbiAgICBhZGFwdGVycyA9IHV0aWxzLmlzQXJyYXkoYWRhcHRlcnMpID8gYWRhcHRlcnMgOiBbYWRhcHRlcnNdO1xuXG4gICAgY29uc3Qge2xlbmd0aH0gPSBhZGFwdGVycztcbiAgICBsZXQgbmFtZU9yQWRhcHRlcjtcbiAgICBsZXQgYWRhcHRlcjtcblxuICAgIGNvbnN0IHJlamVjdGVkUmVhc29ucyA9IHt9O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbmFtZU9yQWRhcHRlciA9IGFkYXB0ZXJzW2ldO1xuICAgICAgbGV0IGlkO1xuXG4gICAgICBhZGFwdGVyID0gbmFtZU9yQWRhcHRlcjtcblxuICAgICAgaWYgKCFpc1Jlc29sdmVkSGFuZGxlKG5hbWVPckFkYXB0ZXIpKSB7XG4gICAgICAgIGFkYXB0ZXIgPSBrbm93bkFkYXB0ZXJzWyhpZCA9IFN0cmluZyhuYW1lT3JBZGFwdGVyKSkudG9Mb3dlckNhc2UoKV07XG5cbiAgICAgICAgaWYgKGFkYXB0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKGBVbmtub3duIGFkYXB0ZXIgJyR7aWR9J2ApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChhZGFwdGVyKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICByZWplY3RlZFJlYXNvbnNbaWQgfHwgJyMnICsgaV0gPSBhZGFwdGVyO1xuICAgIH1cblxuICAgIGlmICghYWRhcHRlcikge1xuXG4gICAgICBjb25zdCByZWFzb25zID0gT2JqZWN0LmVudHJpZXMocmVqZWN0ZWRSZWFzb25zKVxuICAgICAgICAubWFwKChbaWQsIHN0YXRlXSkgPT4gYGFkYXB0ZXIgJHtpZH0gYCArXG4gICAgICAgICAgKHN0YXRlID09PSBmYWxzZSA/ICdpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBlbnZpcm9ubWVudCcgOiAnaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgYnVpbGQnKVxuICAgICAgICApO1xuXG4gICAgICBsZXQgcyA9IGxlbmd0aCA/XG4gICAgICAgIChyZWFzb25zLmxlbmd0aCA+IDEgPyAnc2luY2UgOlxcbicgKyByZWFzb25zLm1hcChyZW5kZXJSZWFzb24pLmpvaW4oJ1xcbicpIDogJyAnICsgcmVuZGVyUmVhc29uKHJlYXNvbnNbMF0pKSA6XG4gICAgICAgICdhcyBubyBhZGFwdGVyIHNwZWNpZmllZCc7XG5cbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKFxuICAgICAgICBgVGhlcmUgaXMgbm8gc3VpdGFibGUgYWRhcHRlciB0byBkaXNwYXRjaCB0aGUgcmVxdWVzdCBgICsgcyxcbiAgICAgICAgJ0VSUl9OT1RfU1VQUE9SVCdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkYXB0ZXI7XG4gIH0sXG4gIGFkYXB0ZXJzOiBrbm93bkFkYXB0ZXJzXG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHJhbnNmb3JtRGF0YSBmcm9tICcuL3RyYW5zZm9ybURhdGEuanMnO1xuaW1wb3J0IGlzQ2FuY2VsIGZyb20gJy4uL2NhbmNlbC9pc0NhbmNlbC5qcyc7XG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi4vZGVmYXVsdHMvaW5kZXguanMnO1xuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tICcuLi9jb3JlL0F4aW9zSGVhZGVycy5qcyc7XG5pbXBvcnQgYWRhcHRlcnMgZnJvbSBcIi4uL2FkYXB0ZXJzL2FkYXB0ZXJzLmpzXCI7XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGVkRXJyb3JgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7XG4gIH1cblxuICBpZiAoY29uZmlnLnNpZ25hbCAmJiBjb25maWcuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICB0aHJvdyBuZXcgQ2FuY2VsZWRFcnJvcihudWxsLCBjb25maWcpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykge1xuICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgY29uZmlnLmhlYWRlcnMgPSBBeGlvc0hlYWRlcnMuZnJvbShjb25maWcuaGVhZGVycyk7XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICBjb25maWcsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICBpZiAoWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLmluZGV4T2YoY29uZmlnLm1ldGhvZCkgIT09IC0xKSB7XG4gICAgY29uZmlnLmhlYWRlcnMuc2V0Q29udGVudFR5cGUoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsIGZhbHNlKTtcbiAgfVxuXG4gIGNvbnN0IGFkYXB0ZXIgPSBhZGFwdGVycy5nZXRBZGFwdGVyKGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXIpO1xuXG4gIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7XG4gICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICByZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YS5jYWxsKFxuICAgICAgY29uZmlnLFxuICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlLFxuICAgICAgcmVzcG9uc2VcbiAgICApO1xuXG4gICAgcmVzcG9uc2UuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKHJlc3BvbnNlLmhlYWRlcnMpO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LCBmdW5jdGlvbiBvbkFkYXB0ZXJSZWplY3Rpb24ocmVhc29uKSB7XG4gICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7XG4gICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkge1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZVxuICAgICAgICApO1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5mcm9tKHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgfSk7XG59XG4iLCAiZXhwb3J0IGNvbnN0IFZFUlNJT04gPSBcIjEuMTAuMFwiOyIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7VkVSU0lPTn0gZnJvbSAnLi4vZW52L2RhdGEuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi4vY29yZS9BeGlvc0Vycm9yLmpzJztcblxuY29uc3QgdmFsaWRhdG9ycyA9IHt9O1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuWydvYmplY3QnLCAnYm9vbGVhbicsICdudW1iZXInLCAnZnVuY3Rpb24nLCAnc3RyaW5nJywgJ3N5bWJvbCddLmZvckVhY2goKHR5cGUsIGkpID0+IHtcbiAgdmFsaWRhdG9yc1t0eXBlXSA9IGZ1bmN0aW9uIHZhbGlkYXRvcih0aGluZykge1xuICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09IHR5cGUgfHwgJ2EnICsgKGkgPCAxID8gJ24gJyA6ICcgJykgKyB0eXBlO1xuICB9O1xufSk7XG5cbmNvbnN0IGRlcHJlY2F0ZWRXYXJuaW5ncyA9IHt9O1xuXG4vKipcbiAqIFRyYW5zaXRpb25hbCBvcHRpb24gdmFsaWRhdG9yXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbnxib29sZWFuP30gdmFsaWRhdG9yIC0gc2V0IHRvIGZhbHNlIGlmIHRoZSB0cmFuc2l0aW9uYWwgb3B0aW9uIGhhcyBiZWVuIHJlbW92ZWRcbiAqIEBwYXJhbSB7c3RyaW5nP30gdmVyc2lvbiAtIGRlcHJlY2F0ZWQgdmVyc2lvbiAvIHJlbW92ZWQgc2luY2UgdmVyc2lvblxuICogQHBhcmFtIHtzdHJpbmc/fSBtZXNzYWdlIC0gc29tZSBtZXNzYWdlIHdpdGggYWRkaXRpb25hbCBpbmZvXG4gKlxuICogQHJldHVybnMge2Z1bmN0aW9ufVxuICovXG52YWxpZGF0b3JzLnRyYW5zaXRpb25hbCA9IGZ1bmN0aW9uIHRyYW5zaXRpb25hbCh2YWxpZGF0b3IsIHZlcnNpb24sIG1lc3NhZ2UpIHtcbiAgZnVuY3Rpb24gZm9ybWF0TWVzc2FnZShvcHQsIGRlc2MpIHtcbiAgICByZXR1cm4gJ1tBeGlvcyB2JyArIFZFUlNJT04gKyAnXSBUcmFuc2l0aW9uYWwgb3B0aW9uIFxcJycgKyBvcHQgKyAnXFwnJyArIGRlc2MgKyAobWVzc2FnZSA/ICcuICcgKyBtZXNzYWdlIDogJycpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgcmV0dXJuICh2YWx1ZSwgb3B0LCBvcHRzKSA9PiB7XG4gICAgaWYgKHZhbGlkYXRvciA9PT0gZmFsc2UpIHtcbiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yKFxuICAgICAgICBmb3JtYXRNZXNzYWdlKG9wdCwgJyBoYXMgYmVlbiByZW1vdmVkJyArICh2ZXJzaW9uID8gJyBpbiAnICsgdmVyc2lvbiA6ICcnKSksXG4gICAgICAgIEF4aW9zRXJyb3IuRVJSX0RFUFJFQ0FURURcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHZlcnNpb24gJiYgIWRlcHJlY2F0ZWRXYXJuaW5nc1tvcHRdKSB7XG4gICAgICBkZXByZWNhdGVkV2FybmluZ3Nbb3B0XSA9IHRydWU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBmb3JtYXRNZXNzYWdlKFxuICAgICAgICAgIG9wdCxcbiAgICAgICAgICAnIGhhcyBiZWVuIGRlcHJlY2F0ZWQgc2luY2UgdicgKyB2ZXJzaW9uICsgJyBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZSdcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWRhdG9yID8gdmFsaWRhdG9yKHZhbHVlLCBvcHQsIG9wdHMpIDogdHJ1ZTtcbiAgfTtcbn07XG5cbnZhbGlkYXRvcnMuc3BlbGxpbmcgPSBmdW5jdGlvbiBzcGVsbGluZyhjb3JyZWN0U3BlbGxpbmcpIHtcbiAgcmV0dXJuICh2YWx1ZSwgb3B0KSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLndhcm4oYCR7b3B0fSBpcyBsaWtlbHkgYSBtaXNzcGVsbGluZyBvZiAke2NvcnJlY3RTcGVsbGluZ31gKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuLyoqXG4gKiBBc3NlcnQgb2JqZWN0J3MgcHJvcGVydGllcyB0eXBlXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7b2JqZWN0fSBzY2hlbWFcbiAqIEBwYXJhbSB7Ym9vbGVhbj99IGFsbG93VW5rbm93blxuICpcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0T3B0aW9ucyhvcHRpb25zLCBzY2hlbWEsIGFsbG93VW5rbm93bikge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoJ29wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QnLCBBeGlvc0Vycm9yLkVSUl9CQURfT1BUSU9OX1ZBTFVFKTtcbiAgfVxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gIGxldCBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgY29uc3Qgb3B0ID0ga2V5c1tpXTtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBzY2hlbWFbb3B0XTtcbiAgICBpZiAodmFsaWRhdG9yKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG9wdGlvbnNbb3B0XTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsaWRhdG9yKHZhbHVlLCBvcHQsIG9wdGlvbnMpO1xuICAgICAgaWYgKHJlc3VsdCAhPT0gdHJ1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcignb3B0aW9uICcgKyBvcHQgKyAnIG11c3QgYmUgJyArIHJlc3VsdCwgQXhpb3NFcnJvci5FUlJfQkFEX09QVElPTl9WQUxVRSk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGFsbG93VW5rbm93biAhPT0gdHJ1ZSkge1xuICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3IoJ1Vua25vd24gb3B0aW9uICcgKyBvcHQsIEF4aW9zRXJyb3IuRVJSX0JBRF9PUFRJT04pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGFzc2VydE9wdGlvbnMsXG4gIHZhbGlkYXRvcnNcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5pbXBvcnQgYnVpbGRVUkwgZnJvbSAnLi4vaGVscGVycy9idWlsZFVSTC5qcyc7XG5pbXBvcnQgSW50ZXJjZXB0b3JNYW5hZ2VyIGZyb20gJy4vSW50ZXJjZXB0b3JNYW5hZ2VyLmpzJztcbmltcG9ydCBkaXNwYXRjaFJlcXVlc3QgZnJvbSAnLi9kaXNwYXRjaFJlcXVlc3QuanMnO1xuaW1wb3J0IG1lcmdlQ29uZmlnIGZyb20gJy4vbWVyZ2VDb25maWcuanMnO1xuaW1wb3J0IGJ1aWxkRnVsbFBhdGggZnJvbSAnLi9idWlsZEZ1bGxQYXRoLmpzJztcbmltcG9ydCB2YWxpZGF0b3IgZnJvbSAnLi4vaGVscGVycy92YWxpZGF0b3IuanMnO1xuaW1wb3J0IEF4aW9zSGVhZGVycyBmcm9tICcuL0F4aW9zSGVhZGVycy5qcyc7XG5cbmNvbnN0IHZhbGlkYXRvcnMgPSB2YWxpZGF0b3IudmFsaWRhdG9ycztcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuY2xhc3MgQXhpb3Mge1xuICBjb25zdHJ1Y3RvcihpbnN0YW5jZUNvbmZpZykge1xuICAgIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZyB8fCB7fTtcbiAgICB0aGlzLmludGVyY2VwdG9ycyA9IHtcbiAgICAgIHJlcXVlc3Q6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKSxcbiAgICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGNvbmZpZ09yVXJsIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcbiAgICogQHBhcmFtIHs/T2JqZWN0fSBjb25maWdcbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICAgKi9cbiAgYXN5bmMgcmVxdWVzdChjb25maWdPclVybCwgY29uZmlnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZXF1ZXN0KGNvbmZpZ09yVXJsLCBjb25maWcpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGxldCBkdW1teSA9IHt9O1xuXG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID8gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZHVtbXkpIDogKGR1bW15ID0gbmV3IEVycm9yKCkpO1xuXG4gICAgICAgIC8vIHNsaWNlIG9mZiB0aGUgRXJyb3I6IC4uLiBsaW5lXG4gICAgICAgIGNvbnN0IHN0YWNrID0gZHVtbXkuc3RhY2sgPyBkdW1teS5zdGFjay5yZXBsYWNlKC9eLitcXG4vLCAnJykgOiAnJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIWVyci5zdGFjaykge1xuICAgICAgICAgICAgZXJyLnN0YWNrID0gc3RhY2s7XG4gICAgICAgICAgICAvLyBtYXRjaCB3aXRob3V0IHRoZSAyIHRvcCBzdGFjayBsaW5lc1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3RhY2sgJiYgIVN0cmluZyhlcnIuc3RhY2spLmVuZHNXaXRoKHN0YWNrLnJlcGxhY2UoL14uK1xcbi4rXFxuLywgJycpKSkge1xuICAgICAgICAgICAgZXJyLnN0YWNrICs9ICdcXG4nICsgc3RhY2tcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpZ25vcmUgdGhlIGNhc2Ugd2hlcmUgXCJzdGFja1wiIGlzIGFuIHVuLXdyaXRhYmxlIHByb3BlcnR5XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIF9yZXF1ZXN0KGNvbmZpZ09yVXJsLCBjb25maWcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJXG4gICAgaWYgKHR5cGVvZiBjb25maWdPclVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICAgIGNvbmZpZy51cmwgPSBjb25maWdPclVybDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnID0gY29uZmlnT3JVcmwgfHwge307XG4gICAgfVxuXG4gICAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTtcblxuICAgIGNvbnN0IHt0cmFuc2l0aW9uYWwsIHBhcmFtc1NlcmlhbGl6ZXIsIGhlYWRlcnN9ID0gY29uZmlnO1xuXG4gICAgaWYgKHRyYW5zaXRpb25hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWxpZGF0b3IuYXNzZXJ0T3B0aW9ucyh0cmFuc2l0aW9uYWwsIHtcbiAgICAgICAgc2lsZW50SlNPTlBhcnNpbmc6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbiksXG4gICAgICAgIGZvcmNlZEpTT05QYXJzaW5nOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pLFxuICAgICAgICBjbGFyaWZ5VGltZW91dEVycm9yOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pXG4gICAgICB9LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIgIT0gbnVsbCkge1xuICAgICAgaWYgKHV0aWxzLmlzRnVuY3Rpb24ocGFyYW1zU2VyaWFsaXplcikpIHtcbiAgICAgICAgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIgPSB7XG4gICAgICAgICAgc2VyaWFsaXplOiBwYXJhbXNTZXJpYWxpemVyXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbGlkYXRvci5hc3NlcnRPcHRpb25zKHBhcmFtc1NlcmlhbGl6ZXIsIHtcbiAgICAgICAgICBlbmNvZGU6IHZhbGlkYXRvcnMuZnVuY3Rpb24sXG4gICAgICAgICAgc2VyaWFsaXplOiB2YWxpZGF0b3JzLmZ1bmN0aW9uXG4gICAgICAgIH0sIHRydWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCBjb25maWcuYWxsb3dBYnNvbHV0ZVVybHNcbiAgICBpZiAoY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9IGVsc2UgaWYgKHRoaXMuZGVmYXVsdHMuYWxsb3dBYnNvbHV0ZVVybHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzID0gdGhpcy5kZWZhdWx0cy5hbGxvd0Fic29sdXRlVXJscztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YWxpZGF0b3IuYXNzZXJ0T3B0aW9ucyhjb25maWcsIHtcbiAgICAgIGJhc2VVcmw6IHZhbGlkYXRvcnMuc3BlbGxpbmcoJ2Jhc2VVUkwnKSxcbiAgICAgIHdpdGhYc3JmVG9rZW46IHZhbGlkYXRvcnMuc3BlbGxpbmcoJ3dpdGhYU1JGVG9rZW4nKVxuICAgIH0sIHRydWUpO1xuXG4gICAgLy8gU2V0IGNvbmZpZy5tZXRob2RcbiAgICBjb25maWcubWV0aG9kID0gKGNvbmZpZy5tZXRob2QgfHwgdGhpcy5kZWZhdWx0cy5tZXRob2QgfHwgJ2dldCcpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgICBsZXQgY29udGV4dEhlYWRlcnMgPSBoZWFkZXJzICYmIHV0aWxzLm1lcmdlKFxuICAgICAgaGVhZGVycy5jb21tb24sXG4gICAgICBoZWFkZXJzW2NvbmZpZy5tZXRob2RdXG4gICAgKTtcblxuICAgIGhlYWRlcnMgJiYgdXRpbHMuZm9yRWFjaChcbiAgICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgICAgKG1ldGhvZCkgPT4ge1xuICAgICAgICBkZWxldGUgaGVhZGVyc1ttZXRob2RdO1xuICAgICAgfVxuICAgICk7XG5cbiAgICBjb25maWcuaGVhZGVycyA9IEF4aW9zSGVhZGVycy5jb25jYXQoY29udGV4dEhlYWRlcnMsIGhlYWRlcnMpO1xuXG4gICAgLy8gZmlsdGVyIG91dCBza2lwcGVkIGludGVyY2VwdG9yc1xuICAgIGNvbnN0IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluID0gW107XG4gICAgbGV0IHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHRydWU7XG4gICAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgICBpZiAodHlwZW9mIGludGVyY2VwdG9yLnJ1bldoZW4gPT09ICdmdW5jdGlvbicgJiYgaW50ZXJjZXB0b3IucnVuV2hlbihjb25maWcpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyAmJiBpbnRlcmNlcHRvci5zeW5jaHJvbm91cztcblxuICAgICAgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbiA9IFtdO1xuICAgIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgICByZXNwb25zZUludGVyY2VwdG9yQ2hhaW4ucHVzaChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgICB9KTtcblxuICAgIGxldCBwcm9taXNlO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgbGVuO1xuXG4gICAgaWYgKCFzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMpIHtcbiAgICAgIGNvbnN0IGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdC5iaW5kKHRoaXMpLCB1bmRlZmluZWRdO1xuICAgICAgY2hhaW4udW5zaGlmdC5hcHBseShjaGFpbiwgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4pO1xuICAgICAgY2hhaW4ucHVzaC5hcHBseShjaGFpbiwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluKTtcbiAgICAgIGxlbiA9IGNoYWluLmxlbmd0aDtcblxuICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb25maWcpO1xuXG4gICAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluW2krK10sIGNoYWluW2krK10pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICBsZW4gPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi5sZW5ndGg7XG5cbiAgICBsZXQgbmV3Q29uZmlnID0gY29uZmlnO1xuXG4gICAgaSA9IDA7XG5cbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgY29uc3Qgb25GdWxmaWxsZWQgPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbltpKytdO1xuICAgICAgY29uc3Qgb25SZWplY3RlZCA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluW2krK107XG4gICAgICB0cnkge1xuICAgICAgICBuZXdDb25maWcgPSBvbkZ1bGZpbGxlZChuZXdDb25maWcpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgb25SZWplY3RlZC5jYWxsKHRoaXMsIGVycm9yKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHByb21pc2UgPSBkaXNwYXRjaFJlcXVlc3QuY2FsbCh0aGlzLCBuZXdDb25maWcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cblxuICAgIGkgPSAwO1xuICAgIGxlbiA9IHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbi5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihyZXNwb25zZUludGVyY2VwdG9yQ2hhaW5baSsrXSwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluW2krK10pO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgZ2V0VXJpKGNvbmZpZykge1xuICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7XG4gICAgY29uc3QgZnVsbFBhdGggPSBidWlsZEZ1bGxQYXRoKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsLCBjb25maWcuYWxsb3dBYnNvbHV0ZVVybHMpO1xuICAgIHJldHVybiBidWlsZFVSTChmdWxsUGF0aCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpO1xuICB9XG59XG5cbi8vIFByb3ZpZGUgYWxpYXNlcyBmb3Igc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kc1xudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdvcHRpb25zJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KG1lcmdlQ29uZmlnKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kLFxuICAgICAgdXJsLFxuICAgICAgZGF0YTogKGNvbmZpZyB8fCB7fSkuZGF0YVxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlSFRUUE1ldGhvZChpc0Zvcm0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaHR0cE1ldGhvZCh1cmwsIGRhdGEsIGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHtcbiAgICAgICAgbWV0aG9kLFxuICAgICAgICBoZWFkZXJzOiBpc0Zvcm0gPyB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJ1xuICAgICAgICB9IDoge30sXG4gICAgICAgIHVybCxcbiAgICAgICAgZGF0YVxuICAgICAgfSkpO1xuICAgIH07XG4gIH1cblxuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGdlbmVyYXRlSFRUUE1ldGhvZCgpO1xuXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2QgKyAnRm9ybSddID0gZ2VuZXJhdGVIVFRQTWV0aG9kKHRydWUpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEF4aW9zO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IENhbmNlbGVkRXJyb3IgZnJvbSAnLi9DYW5jZWxlZEVycm9yLmpzJztcblxuLyoqXG4gKiBBIGBDYW5jZWxUb2tlbmAgaXMgYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVxdWVzdCBjYW5jZWxsYXRpb24gb2YgYW4gb3BlcmF0aW9uLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Q2FuY2VsVG9rZW59XG4gKi9cbmNsYXNzIENhbmNlbFRva2VuIHtcbiAgY29uc3RydWN0b3IoZXhlY3V0b3IpIHtcbiAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgbGV0IHJlc29sdmVQcm9taXNlO1xuXG4gICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHRva2VuID0gdGhpcztcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgdGhpcy5wcm9taXNlLnRoZW4oY2FuY2VsID0+IHtcbiAgICAgIGlmICghdG9rZW4uX2xpc3RlbmVycykgcmV0dXJuO1xuXG4gICAgICBsZXQgaSA9IHRva2VuLl9saXN0ZW5lcnMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoaS0tID4gMCkge1xuICAgICAgICB0b2tlbi5fbGlzdGVuZXJzW2ldKGNhbmNlbCk7XG4gICAgICB9XG4gICAgICB0b2tlbi5fbGlzdGVuZXJzID0gbnVsbDtcbiAgICB9KTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgdGhpcy5wcm9taXNlLnRoZW4gPSBvbmZ1bGZpbGxlZCA9PiB7XG4gICAgICBsZXQgX3Jlc29sdmU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICB0b2tlbi5zdWJzY3JpYmUocmVzb2x2ZSk7XG4gICAgICAgIF9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgIH0pLnRoZW4ob25mdWxmaWxsZWQpO1xuXG4gICAgICBwcm9taXNlLmNhbmNlbCA9IGZ1bmN0aW9uIHJlamVjdCgpIHtcbiAgICAgICAgdG9rZW4udW5zdWJzY3JpYmUoX3Jlc29sdmUpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlLCBjb25maWcsIHJlcXVlc3QpIHtcbiAgICAgIGlmICh0b2tlbi5yZWFzb24pIHtcbiAgICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbGVkRXJyb3IobWVzc2FnZSwgY29uZmlnLCByZXF1ZXN0KTtcbiAgICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGEgYENhbmNlbGVkRXJyb3JgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gICAqL1xuICB0aHJvd0lmUmVxdWVzdGVkKCkge1xuICAgIGlmICh0aGlzLnJlYXNvbikge1xuICAgICAgdGhyb3cgdGhpcy5yZWFzb247XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byB0aGUgY2FuY2VsIHNpZ25hbFxuICAgKi9cblxuICBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICAgIGxpc3RlbmVyKHRoaXMucmVhc29uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xpc3RlbmVycyA9IFtsaXN0ZW5lcl07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVuc3Vic2NyaWJlIGZyb20gdGhlIGNhbmNlbCBzaWduYWxcbiAgICovXG5cbiAgdW5zdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICBpZiAoIXRoaXMuX2xpc3RlbmVycykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX2xpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH1cblxuICB0b0Fib3J0U2lnbmFsKCkge1xuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgICBjb25zdCBhYm9ydCA9IChlcnIpID0+IHtcbiAgICAgIGNvbnRyb2xsZXIuYWJvcnQoZXJyKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zdWJzY3JpYmUoYWJvcnQpO1xuXG4gICAgY29udHJvbGxlci5zaWduYWwudW5zdWJzY3JpYmUgPSAoKSA9PiB0aGlzLnVuc3Vic2NyaWJlKGFib3J0KTtcblxuICAgIHJldHVybiBjb250cm9sbGVyLnNpZ25hbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gICAqIGNhbmNlbHMgdGhlIGBDYW5jZWxUb2tlbmAuXG4gICAqL1xuICBzdGF0aWMgc291cmNlKCkge1xuICAgIGxldCBjYW5jZWw7XG4gICAgY29uc3QgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykge1xuICAgICAgY2FuY2VsID0gYztcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgdG9rZW4sXG4gICAgICBjYW5jZWxcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhbmNlbFRva2VuO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuICpcbiAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuXG4gKlxuICogIGBgYGpzXG4gKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fVxuICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuICogIGYuYXBwbHkobnVsbCwgYXJncyk7XG4gKiAgYGBgXG4gKlxuICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uXG4gKlxuICogIGBgYGpzXG4gKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG4gIH07XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy5qcyc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBwYXlsb2FkIGlzIGFuIGVycm9yIHRocm93biBieSBBeGlvc1xuICpcbiAqIEBwYXJhbSB7Kn0gcGF5bG9hZCBUaGUgdmFsdWUgdG8gdGVzdFxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBwYXlsb2FkIGlzIGFuIGVycm9yIHRocm93biBieSBBeGlvcywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQXhpb3NFcnJvcihwYXlsb2FkKSB7XG4gIHJldHVybiB1dGlscy5pc09iamVjdChwYXlsb2FkKSAmJiAocGF5bG9hZC5pc0F4aW9zRXJyb3IgPT09IHRydWUpO1xufVxuIiwgImNvbnN0IEh0dHBTdGF0dXNDb2RlID0ge1xuICBDb250aW51ZTogMTAwLFxuICBTd2l0Y2hpbmdQcm90b2NvbHM6IDEwMSxcbiAgUHJvY2Vzc2luZzogMTAyLFxuICBFYXJseUhpbnRzOiAxMDMsXG4gIE9rOiAyMDAsXG4gIENyZWF0ZWQ6IDIwMSxcbiAgQWNjZXB0ZWQ6IDIwMixcbiAgTm9uQXV0aG9yaXRhdGl2ZUluZm9ybWF0aW9uOiAyMDMsXG4gIE5vQ29udGVudDogMjA0LFxuICBSZXNldENvbnRlbnQ6IDIwNSxcbiAgUGFydGlhbENvbnRlbnQ6IDIwNixcbiAgTXVsdGlTdGF0dXM6IDIwNyxcbiAgQWxyZWFkeVJlcG9ydGVkOiAyMDgsXG4gIEltVXNlZDogMjI2LFxuICBNdWx0aXBsZUNob2ljZXM6IDMwMCxcbiAgTW92ZWRQZXJtYW5lbnRseTogMzAxLFxuICBGb3VuZDogMzAyLFxuICBTZWVPdGhlcjogMzAzLFxuICBOb3RNb2RpZmllZDogMzA0LFxuICBVc2VQcm94eTogMzA1LFxuICBVbnVzZWQ6IDMwNixcbiAgVGVtcG9yYXJ5UmVkaXJlY3Q6IDMwNyxcbiAgUGVybWFuZW50UmVkaXJlY3Q6IDMwOCxcbiAgQmFkUmVxdWVzdDogNDAwLFxuICBVbmF1dGhvcml6ZWQ6IDQwMSxcbiAgUGF5bWVudFJlcXVpcmVkOiA0MDIsXG4gIEZvcmJpZGRlbjogNDAzLFxuICBOb3RGb3VuZDogNDA0LFxuICBNZXRob2ROb3RBbGxvd2VkOiA0MDUsXG4gIE5vdEFjY2VwdGFibGU6IDQwNixcbiAgUHJveHlBdXRoZW50aWNhdGlvblJlcXVpcmVkOiA0MDcsXG4gIFJlcXVlc3RUaW1lb3V0OiA0MDgsXG4gIENvbmZsaWN0OiA0MDksXG4gIEdvbmU6IDQxMCxcbiAgTGVuZ3RoUmVxdWlyZWQ6IDQxMSxcbiAgUHJlY29uZGl0aW9uRmFpbGVkOiA0MTIsXG4gIFBheWxvYWRUb29MYXJnZTogNDEzLFxuICBVcmlUb29Mb25nOiA0MTQsXG4gIFVuc3VwcG9ydGVkTWVkaWFUeXBlOiA0MTUsXG4gIFJhbmdlTm90U2F0aXNmaWFibGU6IDQxNixcbiAgRXhwZWN0YXRpb25GYWlsZWQ6IDQxNyxcbiAgSW1BVGVhcG90OiA0MTgsXG4gIE1pc2RpcmVjdGVkUmVxdWVzdDogNDIxLFxuICBVbnByb2Nlc3NhYmxlRW50aXR5OiA0MjIsXG4gIExvY2tlZDogNDIzLFxuICBGYWlsZWREZXBlbmRlbmN5OiA0MjQsXG4gIFRvb0Vhcmx5OiA0MjUsXG4gIFVwZ3JhZGVSZXF1aXJlZDogNDI2LFxuICBQcmVjb25kaXRpb25SZXF1aXJlZDogNDI4LFxuICBUb29NYW55UmVxdWVzdHM6IDQyOSxcbiAgUmVxdWVzdEhlYWRlckZpZWxkc1Rvb0xhcmdlOiA0MzEsXG4gIFVuYXZhaWxhYmxlRm9yTGVnYWxSZWFzb25zOiA0NTEsXG4gIEludGVybmFsU2VydmVyRXJyb3I6IDUwMCxcbiAgTm90SW1wbGVtZW50ZWQ6IDUwMSxcbiAgQmFkR2F0ZXdheTogNTAyLFxuICBTZXJ2aWNlVW5hdmFpbGFibGU6IDUwMyxcbiAgR2F0ZXdheVRpbWVvdXQ6IDUwNCxcbiAgSHR0cFZlcnNpb25Ob3RTdXBwb3J0ZWQ6IDUwNSxcbiAgVmFyaWFudEFsc29OZWdvdGlhdGVzOiA1MDYsXG4gIEluc3VmZmljaWVudFN0b3JhZ2U6IDUwNyxcbiAgTG9vcERldGVjdGVkOiA1MDgsXG4gIE5vdEV4dGVuZGVkOiA1MTAsXG4gIE5ldHdvcmtBdXRoZW50aWNhdGlvblJlcXVpcmVkOiA1MTEsXG59O1xuXG5PYmplY3QuZW50cmllcyhIdHRwU3RhdHVzQ29kZSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gIEh0dHBTdGF0dXNDb2RlW3ZhbHVlXSA9IGtleTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBIdHRwU3RhdHVzQ29kZTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmltcG9ydCB1dGlscyBmcm9tICcuL3V0aWxzLmpzJztcbmltcG9ydCBiaW5kIGZyb20gJy4vaGVscGVycy9iaW5kLmpzJztcbmltcG9ydCBBeGlvcyBmcm9tICcuL2NvcmUvQXhpb3MuanMnO1xuaW1wb3J0IG1lcmdlQ29uZmlnIGZyb20gJy4vY29yZS9tZXJnZUNvbmZpZy5qcyc7XG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi9kZWZhdWx0cy9pbmRleC5qcyc7XG5pbXBvcnQgZm9ybURhdGFUb0pTT04gZnJvbSAnLi9oZWxwZXJzL2Zvcm1EYXRhVG9KU09OLmpzJztcbmltcG9ydCBDYW5jZWxlZEVycm9yIGZyb20gJy4vY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMnO1xuaW1wb3J0IENhbmNlbFRva2VuIGZyb20gJy4vY2FuY2VsL0NhbmNlbFRva2VuLmpzJztcbmltcG9ydCBpc0NhbmNlbCBmcm9tICcuL2NhbmNlbC9pc0NhbmNlbC5qcyc7XG5pbXBvcnQge1ZFUlNJT059IGZyb20gJy4vZW52L2RhdGEuanMnO1xuaW1wb3J0IHRvRm9ybURhdGEgZnJvbSAnLi9oZWxwZXJzL3RvRm9ybURhdGEuanMnO1xuaW1wb3J0IEF4aW9zRXJyb3IgZnJvbSAnLi9jb3JlL0F4aW9zRXJyb3IuanMnO1xuaW1wb3J0IHNwcmVhZCBmcm9tICcuL2hlbHBlcnMvc3ByZWFkLmpzJztcbmltcG9ydCBpc0F4aW9zRXJyb3IgZnJvbSAnLi9oZWxwZXJzL2lzQXhpb3NFcnJvci5qcyc7XG5pbXBvcnQgQXhpb3NIZWFkZXJzIGZyb20gXCIuL2NvcmUvQXhpb3NIZWFkZXJzLmpzXCI7XG5pbXBvcnQgYWRhcHRlcnMgZnJvbSAnLi9hZGFwdGVycy9hZGFwdGVycy5qcyc7XG5pbXBvcnQgSHR0cFN0YXR1c0NvZGUgZnJvbSAnLi9oZWxwZXJzL0h0dHBTdGF0dXNDb2RlLmpzJztcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdENvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICpcbiAqIEByZXR1cm5zIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICBjb25zdCBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuICBjb25zdCBpbnN0YW5jZSA9IGJpbmQoQXhpb3MucHJvdG90eXBlLnJlcXVlc3QsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgYXhpb3MucHJvdG90eXBlIHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgQXhpb3MucHJvdG90eXBlLCBjb250ZXh0LCB7YWxsT3duS2V5czogdHJ1ZX0pO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQsIG51bGwsIHthbGxPd25LZXlzOiB0cnVlfSk7XG5cbiAgLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuICBpbnN0YW5jZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHtcbiAgICByZXR1cm4gY3JlYXRlSW5zdGFuY2UobWVyZ2VDb25maWcoZGVmYXVsdENvbmZpZywgaW5zdGFuY2VDb25maWcpKTtcbiAgfTtcblxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbi8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZFxuY29uc3QgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cbi8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuYXhpb3MuQXhpb3MgPSBBeGlvcztcblxuLy8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuXG5heGlvcy5DYW5jZWxlZEVycm9yID0gQ2FuY2VsZWRFcnJvcjtcbmF4aW9zLkNhbmNlbFRva2VuID0gQ2FuY2VsVG9rZW47XG5heGlvcy5pc0NhbmNlbCA9IGlzQ2FuY2VsO1xuYXhpb3MuVkVSU0lPTiA9IFZFUlNJT047XG5heGlvcy50b0Zvcm1EYXRhID0gdG9Gb3JtRGF0YTtcblxuLy8gRXhwb3NlIEF4aW9zRXJyb3IgY2xhc3NcbmF4aW9zLkF4aW9zRXJyb3IgPSBBeGlvc0Vycm9yO1xuXG4vLyBhbGlhcyBmb3IgQ2FuY2VsZWRFcnJvciBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuYXhpb3MuQ2FuY2VsID0gYXhpb3MuQ2FuY2VsZWRFcnJvcjtcblxuLy8gRXhwb3NlIGFsbC9zcHJlYWRcbmF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufTtcblxuYXhpb3Muc3ByZWFkID0gc3ByZWFkO1xuXG4vLyBFeHBvc2UgaXNBeGlvc0Vycm9yXG5heGlvcy5pc0F4aW9zRXJyb3IgPSBpc0F4aW9zRXJyb3I7XG5cbi8vIEV4cG9zZSBtZXJnZUNvbmZpZ1xuYXhpb3MubWVyZ2VDb25maWcgPSBtZXJnZUNvbmZpZztcblxuYXhpb3MuQXhpb3NIZWFkZXJzID0gQXhpb3NIZWFkZXJzO1xuXG5heGlvcy5mb3JtVG9KU09OID0gdGhpbmcgPT4gZm9ybURhdGFUb0pTT04odXRpbHMuaXNIVE1MRm9ybSh0aGluZykgPyBuZXcgRm9ybURhdGEodGhpbmcpIDogdGhpbmcpO1xuXG5heGlvcy5nZXRBZGFwdGVyID0gYWRhcHRlcnMuZ2V0QWRhcHRlcjtcblxuYXhpb3MuSHR0cFN0YXR1c0NvZGUgPSBIdHRwU3RhdHVzQ29kZTtcblxuYXhpb3MuZGVmYXVsdCA9IGF4aW9zO1xuXG4vLyB0aGlzIG1vZHVsZSBzaG91bGQgb25seSBoYXZlIGEgZGVmYXVsdCBleHBvcnRcbmV4cG9ydCBkZWZhdWx0IGF4aW9zXG4iLCAiaW1wb3J0IGF4aW9zIGZyb20gJy4vbGliL2F4aW9zLmpzJztcblxuLy8gVGhpcyBtb2R1bGUgaXMgaW50ZW5kZWQgdG8gdW53cmFwIEF4aW9zIGRlZmF1bHQgZXhwb3J0IGFzIG5hbWVkLlxuLy8gS2VlcCB0b3AtbGV2ZWwgZXhwb3J0IHNhbWUgd2l0aCBzdGF0aWMgcHJvcGVydGllc1xuLy8gc28gdGhhdCBpdCBjYW4ga2VlcCBzYW1lIHdpdGggZXMgbW9kdWxlIG9yIGNqc1xuY29uc3Qge1xuICBBeGlvcyxcbiAgQXhpb3NFcnJvcixcbiAgQ2FuY2VsZWRFcnJvcixcbiAgaXNDYW5jZWwsXG4gIENhbmNlbFRva2VuLFxuICBWRVJTSU9OLFxuICBhbGwsXG4gIENhbmNlbCxcbiAgaXNBeGlvc0Vycm9yLFxuICBzcHJlYWQsXG4gIHRvRm9ybURhdGEsXG4gIEF4aW9zSGVhZGVycyxcbiAgSHR0cFN0YXR1c0NvZGUsXG4gIGZvcm1Ub0pTT04sXG4gIGdldEFkYXB0ZXIsXG4gIG1lcmdlQ29uZmlnXG59ID0gYXhpb3M7XG5cbmV4cG9ydCB7XG4gIGF4aW9zIGFzIGRlZmF1bHQsXG4gIEF4aW9zLFxuICBBeGlvc0Vycm9yLFxuICBDYW5jZWxlZEVycm9yLFxuICBpc0NhbmNlbCxcbiAgQ2FuY2VsVG9rZW4sXG4gIFZFUlNJT04sXG4gIGFsbCxcbiAgQ2FuY2VsLFxuICBpc0F4aW9zRXJyb3IsXG4gIHNwcmVhZCxcbiAgdG9Gb3JtRGF0YSxcbiAgQXhpb3NIZWFkZXJzLFxuICBIdHRwU3RhdHVzQ29kZSxcbiAgZm9ybVRvSlNPTixcbiAgZ2V0QWRhcHRlcixcbiAgbWVyZ2VDb25maWdcbn1cbiIsICJpbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XHJcbmltcG9ydCB7IFdvcmREYXRhIH0gZnJvbSAnLi4vLi4vVm9jYWJ1bGFyeUNhcmQnO1xyXG5pbXBvcnQgeyBkZWNyeXB0QXBpS2V5IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMTE1SZXNwb25zZSB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgZGF0YT86IGFueTtcclxuICAgIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb2dyZXNzQ2FsbGJhY2sge1xyXG4gICAgKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBXb3JkRGV0YWlsRGF0YSB7XHJcbiAgICB3b3JkOiBzdHJpbmc7XHJcbiAgICBwcm9udW5jaWF0aW9uOiBzdHJpbmc7XHJcbiAgICBtZWFuaW5nczogc3RyaW5nW107XHJcbiAgICBleGFtcGxlczoge1xyXG4gICAgICAgIGVuZ2xpc2g6IHN0cmluZztcclxuICAgICAgICBrb3JlYW46IHN0cmluZztcclxuICAgIH1bXTtcclxuICAgIHNpbWlsYXJXb3Jkczogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMTE1TZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMxMjBcdUQwRERcdUI0MUMgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVDNzU4IEFQSSBcdUQwQTRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QkE1NFx1QzExQ1x1QjREQ1xyXG4gICAgcHJpdmF0ZSBnZXRDdXJyZW50QXBpS2V5KCk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnNldHRpbmdzLmxsbVByb3ZpZGVyO1xyXG4gICAgICAgIGxldCBlbmNyeXB0ZWRLZXkgPSAnJztcclxuICAgICAgICBcclxuICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6XHJcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRLZXkgPSB0aGlzLnNldHRpbmdzLm9wZW5haUFwaUtleTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhbnRocm9waWMnOlxyXG4gICAgICAgICAgICAgICAgZW5jcnlwdGVkS2V5ID0gdGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZ29vZ2xlJzpcclxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZEtleSA9IHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBkZWNyeXB0QXBpS2V5KGVuY3J5cHRlZEtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IHRoaXMuZ2V0Q3VycmVudEFwaUtleSgpO1xyXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgdGVzdFByb21wdCA9ICdIZWxsbywgdGhpcyBpcyBhIHRlc3QgbWVzc2FnZS4gUGxlYXNlIHJlc3BvbmQgd2l0aCBcIk9LXCIgaWYgeW91IGNhbiByZWFkIHRoaXMuJztcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxMTE0odGVzdFByb21wdCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogJ0FQSSBcdUM1RjBcdUFDQjAgXHVDMTMxXHVBQ0Y1JyB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiByZXNwb25zZS5lcnJvciB8fCAnQVBJIFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjgnIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0V29yZERldGFpbHMod29yZDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IHRoaXMuZ2V0Q3VycmVudEFwaUtleSgpO1xyXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5jcmVhdGVXb3JkRGV0YWlsUHJvbXB0KHdvcmQpO1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbExMTShwcm9tcHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSB0aGlzLnBhcnNlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlLmRhdGEsIHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcGFyc2VkRGF0YSB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiByZXNwb25zZS5lcnJvciB8fCAnXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTRcdUIzNzAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRNdWx0aXBsZVdvcmREZXRhaWxzKHdvcmRzOiBzdHJpbmdbXSwgcHJvZ3Jlc3NDYWxsYmFjaz86IFByb2dyZXNzQ2FsbGJhY2spOiBQcm9taXNlPExMTVJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgYXBpS2V5ID0gdGhpcy5nZXRDdXJyZW50QXBpS2V5KCk7XHJcbiAgICAgICAgICAgIGlmICghYXBpS2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBUEkgXHVEMEE0XHVBQzAwIFx1QzEyNFx1QzgxNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAod29yZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdUNDOThcdUI5QUNcdUQ1NjAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IEJBVENIX1NJWkUgPSAyMDtcclxuICAgICAgICAgICAgY29uc3QgYWxsUmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCB0b3RhbEJhdGNoZXMgPSBNYXRoLmNlaWwod29yZHMubGVuZ3RoIC8gQkFUQ0hfU0laRSk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVDRDFEICR7d29yZHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjRcdUI5N0MgJHt0b3RhbEJhdGNoZXN9XHVBQzFDIFx1QkMzMFx1Q0U1OFx1Qjg1QyBcdUIwOThcdUIyMDRcdUM1QjQgXHVDQzk4XHVCOUFDXHVENTY5XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soMCwgd29yZHMubGVuZ3RoLCBgXHVDRDFEICR7d29yZHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjRcdUI5N0MgJHt0b3RhbEJhdGNoZXN9XHVBQzFDIFx1QkMzMFx1Q0U1OFx1Qjg1QyBcdUIwOThcdUIyMDRcdUM1QjQgXHVDQzk4XHVCOUFDXHVENTY5XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSArPSBCQVRDSF9TSVpFKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaE51bWJlciA9IE1hdGguZmxvb3IoaSAvIEJBVENIX1NJWkUpICsgMTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhdGNoV29yZHMgPSB3b3Jkcy5zbGljZShpLCBpICsgQkFUQ0hfU0laRSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0vJHt0b3RhbEJhdGNoZXN9IFx1Q0M5OFx1QjlBQyBcdUM5MTEuLi4gKCR7YmF0Y2hXb3Jkcy5sZW5ndGh9XHVBQzFDIFx1QjJFOFx1QzVCNClgKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGksIHdvcmRzLmxlbmd0aCwgYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfS8ke3RvdGFsQmF0Y2hlc30gXHVDQzk4XHVCOUFDIFx1QzkxMS4uLiAoJHtiYXRjaFdvcmRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0KWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IHRoaXMuY3JlYXRlTXVsdGlwbGVXb3JkRGV0YWlsUHJvbXB0KGJhdGNoV29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsTExNKHByb21wdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IHRoaXMucGFyc2VNdWx0aXBsZVdvcmREZXRhaWxSZXNwb25zZShyZXNwb25zZS5kYXRhLCBiYXRjaFdvcmRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLnBhcnNlZERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzY0NFx1QjhDQzogJHtwYXJzZWREYXRhLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1Q0M5OFx1QjlBQ1x1QjQyOGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soaSArIGJhdGNoV29yZHMubGVuZ3RoLCB3b3Jkcy5sZW5ndGgsIGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0gXHVDNjQ0XHVCOENDOiAke3BhcnNlZERhdGEubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjQgXHVDQzk4XHVCOUFDXHVCNDI4YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0gXHVDMkU0XHVEMzI4OmAsIHJlc3BvbnNlLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soaSwgd29yZHMubGVuZ3RoLCBgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzJFNFx1RDMyOCwgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQ1x1Qjg1QyBcdUM4MDRcdUQ2NTguLi5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUMyRTRcdUQzMjhcdUQ1NUMgXHVCQzMwXHVDRTU4XHVDNzU4IFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUFDMUNcdUJDQzRcdUM4MDFcdUM3M0NcdUI4NUMgXHVDQzk4XHVCOUFDIFx1QzJEQ1x1QjNDNFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRpdmlkdWFsUmVzdWx0cyA9IGF3YWl0IHRoaXMucHJvY2Vzc1dvcmRzSW5kaXZpZHVhbGx5KGJhdGNoV29yZHMsIHByb2dyZXNzQ2FsbGJhY2ssIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxSZXN1bHRzLnB1c2goLi4uaW5kaXZpZHVhbFJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGksIHdvcmRzLmxlbmd0aCwgYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfSBcdUM2MjRcdUI5NTgsIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUNcdUI4NUMgXHVDODA0XHVENjU4Li4uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQgXHVDMkRDIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUNcdUI4NUMgXHVEM0Y0XHVCQzMxXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kaXZpZHVhbFJlc3VsdHMgPSBhd2FpdCB0aGlzLnByb2Nlc3NXb3Jkc0luZGl2aWR1YWxseShiYXRjaFdvcmRzLCBwcm9ncmVzc0NhbGxiYWNrLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGxSZXN1bHRzLnB1c2goLi4uaW5kaXZpZHVhbFJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1QkMzMFx1Q0U1OCBcdUFDMDQgXHVDOUU3XHVDNzQwIFx1QzlDMFx1QzVGMCAoQVBJIFx1QzgxQ1x1RDU1QyBcdUJDMjlcdUM5QzApXHJcbiAgICAgICAgICAgICAgICBpZiAoaSArIEJBVENIX1NJWkUgPCB3b3Jkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVCQUE4XHVCNEUwIFx1QkMzMFx1Q0U1OCBcdUNDOThcdUI5QUMgXHVDNjQ0XHVCOENDLiBcdUNEMUQgJHthbGxSZXN1bHRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMyMThcdUM5RDFcdUI0MjhgKTtcclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2sod29yZHMubGVuZ3RoLCB3b3Jkcy5sZW5ndGgsIGBcdUJBQThcdUI0RTAgXHVCQzMwXHVDRTU4IFx1Q0M5OFx1QjlBQyBcdUM2NDRcdUI4Q0MuIFx1Q0QxRCAke2FsbFJlc3VsdHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzIxOFx1QzlEMVx1QjQyOGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGFsbFJlc3VsdHMgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUIyRThcdUM1QjQgXHVDQzk4XHVCOUFDIChcdUJDMzBcdUNFNTggXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUQzRjRcdUJDMzEpXHJcbiAgICBwcml2YXRlIGFzeW5jIHByb2Nlc3NXb3Jkc0luZGl2aWR1YWxseSh3b3Jkczogc3RyaW5nW10sIHByb2dyZXNzQ2FsbGJhY2s/OiBQcm9ncmVzc0NhbGxiYWNrLCBzdGFydEluZGV4OiBudW1iZXIgPSAwKTogUHJvbWlzZTxXb3JkRGV0YWlsRGF0YVtdPiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHdvcmRzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBzdGFydEluZGV4ICsgaTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQzogXCIke3dvcmR9XCJgKTtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhjdXJyZW50SW5kZXgsIHN0YXJ0SW5kZXggKyB3b3Jkcy5sZW5ndGgsIGBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDOiBcIiR7d29yZH1cImApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0V29yZERldGFpbHMod29yZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIiBcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4OmAsIHJlc3BvbnNlLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUMyRTRcdUQzMjhcdUQ1NUMgXHVCMkU4XHVDNUI0XHVDNUQwIFx1QjMwMFx1RDU1QyBcdUFFMzBcdUJDRjggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzBERFx1QzEzMVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmQudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Q0M5OFx1QjlBQyBcdUMyRTRcdUQzMjgnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUMgXHVBQzA0IFx1QzlFN1x1Qzc0MCBcdUM5QzBcdUM1RjBcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsYXkoNTAwKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIiBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NTg6YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkOiB3b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVDQzk4XHVCOUFDIFx1QzYyNFx1Qjk1OCddLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFtdXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM5QzBcdUM1RjAgXHVENTY4XHVDMjE4XHJcbiAgICBwcml2YXRlIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVXb3JkRGV0YWlsUHJvbXB0KHdvcmQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGBcdUIyRTRcdUM3NEMgXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1QzVEMCBcdUIzMDBcdUQ1NUMgXHVDMEMxXHVDMTM4IFx1QzgxNVx1QkNGNFx1Qjk3QyBKU09OIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUM4MUNcdUFDRjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuXHJcblxyXG5cdUM2OTRcdUFENkNcdUMwQUNcdUQ1NkQ6XHJcbjEuIFx1QkMxQ1x1Qzc0Q1x1QUUzMFx1RDYzOCAoSVBBIFx1RDYxNVx1QzJERClcclxuMi4gXHVENTVDXHVBRTAwIFx1QjczQlx1QjRFNCAoXHVDNUVDXHVCN0VDIFx1QUMxQ1x1Qzc3QyBcdUMyMTggXHVDNzg4XHVDNzRDKVxyXG4zLiBcdUFDMDEgXHVCNzNCXHVCQ0M0XHVCODVDIFx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzhcdUFDRkMgXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAoXHVBQzAxIFx1QjczQlx1QjJGOSAyLTNcdUFDMUNcdUM3NTggXHVDNjA4XHVCQjM4IFx1QzgxQ1x1QUNGNSlcclxuNC4gXHVDNzIwXHVDMEFDXHVENTVDIFx1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjRcdUI0RTRcclxuXHJcblx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyREQ6XHJcbntcclxuICBcIndvcmRcIjogXCIke3dvcmR9XCIsXHJcbiAgXCJwcm9udW5jaWF0aW9uXCI6IFwiL1x1QkMxQ1x1Qzc0Q1x1QUUzMFx1RDYzOC9cIixcclxuICBcIm1lYW5pbmdzXCI6IFtcIlx1QjczQjFcIiwgXCJcdUI3M0IyXCIsIFwiXHVCNzNCM1wiXSxcclxuICBcImV4YW1wbGVzXCI6IFtcclxuICAgIHtcclxuICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAxXCIsXHJcbiAgICAgIFwia29yZWFuXCI6IFwiXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAxXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggMlwiLCBcclxuICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDJcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAzXCIsXHJcbiAgICAgIFwia29yZWFuXCI6IFwiXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAzXCJcclxuICAgIH1cclxuICBdLFxyXG4gIFwic2ltaWxhcldvcmRzXCI6IFtcIlx1QzcyMFx1QzBBQ1x1QjJFOFx1QzVCNDFcIiwgXCJcdUM3MjBcdUMwQUNcdUIyRThcdUM1QjQyXCIsIFwiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0M1wiXVxyXG59XHJcblxyXG5KU09OIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1Q1x1QjlDQyBcdUM3NTFcdUIyRjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuIFx1QjJFNFx1Qjk3OCBcdUMxMjRcdUJBODVcdUM3NDAgXHVEM0VDXHVENTY4XHVENTU4XHVDOUMwIFx1QjlDOFx1QzEzOFx1QzY5NC5gO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlTXVsdGlwbGVXb3JkRGV0YWlsUHJvbXB0KHdvcmRzOiBzdHJpbmdbXSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3Qgd29yZExpc3QgPSB3b3Jkcy5qb2luKCcsICcpO1xyXG4gICAgICAgIHJldHVybiBgXHVCMkU0XHVDNzRDIFx1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjRcdUI0RTRcdUM1RDAgXHVCMzAwXHVENTVDIFx1QzBDMVx1QzEzOCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVDODE1XHVENjU1XHVENTVDIEpTT04gXHVENjE1XHVDMkREXHVDNzNDXHVCODVDIFx1QzgxQ1x1QUNGNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NDogJHt3b3JkTGlzdH1cclxuXHJcblx1QzY5NFx1QUQ2Q1x1QzBBQ1x1RDU2RDpcclxuLSBcdUFDMDEgXHVCMkU4XHVDNUI0XHVDNUQwIFx1QjMwMFx1RDU3NCBcdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzggKElQQSBcdUQ2MTVcdUMyREQpLCBcdUQ1NUNcdUFFMDAgXHVCNzNCXHVCNEU0LCBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4XHVBQ0ZDIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQsIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0XHVCNEU0XHVDNzQ0IFx1RDNFQ1x1RDU2OFxyXG4tIFx1QUMwMSBcdUI3M0JcdUJDQzRcdUI4NUMgMi0zXHVBQzFDXHVDNzU4IFx1QzYwOFx1QkIzOFx1Qzc0NCBcdUM4MUNcdUFDRjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTRcclxuLSBKU09OIFx1RDYxNVx1QzJERFx1QjlDQyBcdUM3NTFcdUIyRjVcdUQ1NThcdUFDRTAgXHVCMkU0XHVCOTc4IFx1QzEyNFx1QkE4NVx1Qzc0MCBcdUQzRUNcdUQ1NjhcdUQ1NThcdUM5QzAgXHVCOUM4XHVDMTM4XHVDNjk0XHJcbi0gXHVCQUE4XHVCNEUwIFx1QkIzOFx1Qzc5MFx1QzVGNFx1Qzc0MCBcdUM3NzRcdUM5MTEgXHVCNTMwXHVDNjM0XHVENDVDXHVCODVDIFx1QUMxMFx1QzJGOFx1QzhGQ1x1QzEzOFx1QzY5NFxyXG4tIFx1QkMzMFx1QzVGNFx1QUNGQyBcdUFDMURcdUNDQjRcdUIyOTQgXHVDODE1XHVENjU1XHVENTVDIEpTT04gXHVCQjM4XHVCQzk1XHVDNzQ0IFx1QjUzMFx1Qjk3NFx1QzEzOFx1QzY5NFxyXG5cclxuXHVDNzUxXHVCMkY1IFx1RDYxNVx1QzJERDpcclxuW1xyXG4gIHtcclxuICAgIFwid29yZFwiOiBcIlx1QjJFOFx1QzVCNDFcIixcclxuICAgIFwicHJvbnVuY2lhdGlvblwiOiBcIi9cdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzgvXCIsXHJcbiAgICBcIm1lYW5pbmdzXCI6IFtcIlx1QjczQjFcIiwgXCJcdUI3M0IyXCJdLFxyXG4gICAgXCJleGFtcGxlc1wiOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDFcIixcclxuICAgICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgMVwiXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDJcIixcclxuICAgICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgMlwiXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDNcIixcclxuICAgICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgM1wiXHJcbiAgICAgIH1cclxuICAgIF0sXHJcbiAgICBcInNpbWlsYXJXb3Jkc1wiOiBbXCJcdUM3MjBcdUMwQUNcdUIyRThcdUM1QjQxXCIsIFwiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0MlwiXVxyXG4gIH1cclxuXVxyXG5cclxuXHVDOTExXHVDNjk0OiBKU09OIFx1RDYxNVx1QzJERFx1QjlDQyBcdUM3NTFcdUIyRjVcdUQ1NThcdUFDRTAgXHVCMkU0XHVCOTc4IFx1RDE0RFx1QzJBNFx1RDJCOFx1QjI5NCBcdUQzRUNcdUQ1NjhcdUQ1NThcdUM5QzAgXHVCOUM4XHVDMTM4XHVDNjk0LmA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsTExNKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5zZXR0aW5ncy5sbG1Qcm92aWRlcjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHN3aXRjaCAocHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2FsbE9wZW5BSShwcm9tcHQpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jYWxsQW50aHJvcGljKHByb21wdCk7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdnb29nbGUnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNhbGxHb29nbGUocHJvbXB0KTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDOUMwXHVDNkQwXHVENTU4XHVDOUMwIFx1QzU0QVx1QjI5NCBMTE0gXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVDNzg1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNhbGxPcGVuQUkocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPExMTVJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmdldEN1cnJlbnRBcGlLZXkoKX1gXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLnNldHRpbmdzLmxsbU1vZGVsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHByb21wdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IDQwMDBcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvckRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgJ09wZW5BSSBBUEkgXHVENjM4XHVDRDlDIFx1QzJFNFx1RDMyOCcgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGRhdGEuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghY29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDNzUxXHVCMkY1IFx1QjBCNFx1QzZBOVx1Qzc3NCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjb250ZW50IH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY2FsbEFudGhyb3BpYyhwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICAvLyBOb2RlLmpzIFx1RDY1OFx1QUNCRFx1QzVEMFx1QzExQ1x1QjlDQyBcdUIzRDlcdUM3OTFcdUQ1NThcdUIzQzRcdUI4NUQgXHVDQzk4XHVCOUFDXHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAod2luZG93IGFzIGFueSk/LnByb2Nlc3M/LnR5cGUgPT09ICdyZW5kZXJlcicpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoXHJcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vYXBpLmFudGhyb3BpYy5jb20vdjEvbWVzc2FnZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMuc2V0dGluZ3MubGxtTW9kZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IDMwMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBwcm9tcHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3gtYXBpLWtleSc6IHRoaXMuZ2V0Q3VycmVudEFwaUtleSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHJlc3BvbnNlLmRhdGEuY29udGVudFswXT8udGV4dDtcclxuICAgICAgICAgICAgICAgIGlmICghY29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1Qzc1MVx1QjJGNSBcdUIwQjRcdUM2QTlcdUM3NzQgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGNvbnRlbnQgfTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwIFx1RDY1OFx1QUNCRFx1QzVEMFx1QzExQ1x1QjI5NCBcdUM1NDhcdUIwQjQgXHVCQTU0XHVDMkRDXHVDOUMwIFx1QkMxOFx1RDY1OFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogJ0FudGhyb3BpYyBBUElcdUIyOTQgXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwIFx1RDY1OFx1QUNCRFx1QzVEMFx1QzExQyBcdUM5QzFcdUM4MTEgXHVENjM4XHVDRDlDXHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QjM3MFx1QzJBNFx1RDA2Q1x1RDFCMSBcdUM1NzEoT2JzaWRpYW4pXHVDNUQwXHVDMTFDXHVCOUNDIFx1QjNEOVx1Qzc5MVx1RDU2OVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY2FsbEdvb2dsZShwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzLyR7dGhpcy5zZXR0aW5ncy5sbG1Nb2RlbH06Z2VuZXJhdGVDb250ZW50P2tleT0ke3RoaXMuZ2V0Q3VycmVudEFwaUtleSgpfWAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHByb21wdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDQwMDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JEYXRhLmVycm9yPy5tZXNzYWdlIHx8ICdHb29nbGUgQVBJIFx1RDYzOFx1Q0Q5QyBcdUMyRTRcdUQzMjgnIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLmNhbmRpZGF0ZXNbMF0/LmNvbnRlbnQ/LnBhcnRzWzBdPy50ZXh0O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdUM3NTFcdUIyRjUgXHVCMEI0XHVDNkE5XHVDNzc0IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGNvbnRlbnQgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZVdvcmREZXRhaWxSZXNwb25zZShyZXNwb25zZTogc3RyaW5nLCBvcmlnaW5hbFdvcmQ6IHN0cmluZyk6IFdvcmREZXRhaWxEYXRhIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBKU09OIFx1Qzc1MVx1QjJGNVx1QzVEMFx1QzExQyBKU09OIFx1QkQ4MFx1QkQ4NFx1QjlDQyBcdUNEOTRcdUNEOUNcclxuICAgICAgICAgICAgY29uc3QganNvbk1hdGNoID0gcmVzcG9uc2UubWF0Y2goL1xce1tcXHNcXFNdKlxcfS8pO1xyXG4gICAgICAgICAgICBpZiAoIWpzb25NYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKU09OIFx1RDYxNVx1QzJERFx1Qzc1OCBcdUM3NTFcdUIyRjVcdUM3NDQgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNjA4XHVCQjM4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUFDODBcdUM5OUQgXHVCQzBGIFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0ZWRFeGFtcGxlcyA9IHRoaXMudmFsaWRhdGVFeGFtcGxlcyhqc29uRGF0YS5leGFtcGxlcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgd29yZDoganNvbkRhdGEud29yZCB8fCBvcmlnaW5hbFdvcmQsXHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiBqc29uRGF0YS5wcm9udW5jaWF0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IGpzb25EYXRhLm1lYW5pbmdzIHx8IFtdLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IHZhbGlkYXRlZEV4YW1wbGVzLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBqc29uRGF0YS5zaW1pbGFyV29yZHMgfHwgW11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBKU09OIFx1RDMwQ1x1QzJGMSBcdUMyRTRcdUQzMjggXHVDMkRDIFx1QUUzMFx1QkNGOCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCQzE4XHVENjU4XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiBvcmlnaW5hbFdvcmQsXHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Qzc1OFx1QkJGOFx1Qjk3QyBcdUQzMENcdUMyRjFcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nXSxcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXSxcclxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogW11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNjA4XHVCQjM4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUFDODBcdUM5OUQgXHVCQzBGIFx1QzgxNVx1QjlBQ1xyXG4gICAgcHJpdmF0ZSB2YWxpZGF0ZUV4YW1wbGVzKGV4YW1wbGVzOiBhbnlbXSk6IHsgZW5nbGlzaDogc3RyaW5nOyBrb3JlYW46IHN0cmluZzsgfVtdIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXhhbXBsZXMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzOiB7IGVuZ2xpc2g6IHN0cmluZzsga29yZWFuOiBzdHJpbmc7IH1bXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3QgZXhhbXBsZSBvZiBleGFtcGxlcykge1xyXG4gICAgICAgICAgICBpZiAoZXhhbXBsZSAmJiB0eXBlb2YgZXhhbXBsZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2ggPSBleGFtcGxlLmVuZ2xpc2ggfHwgZXhhbXBsZS5lbmdsaXNoX3RleHQgfHwgZXhhbXBsZS50ZXh0IHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga29yZWFuID0gZXhhbXBsZS5rb3JlYW4gfHwgZXhhbXBsZS5rb3JlYW5fdGV4dCB8fCBleGFtcGxlLnRyYW5zbGF0aW9uIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoZW5nbGlzaC50cmltKCkgJiYga29yZWFuLnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlZEV4YW1wbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiBlbmdsaXNoLnRyaW0oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiBrb3JlYW4udHJpbSgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEV4YW1wbGVzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VNdWx0aXBsZVdvcmREZXRhaWxSZXNwb25zZShyZXNwb25zZTogc3RyaW5nLCBvcmlnaW5hbFdvcmRzOiBzdHJpbmdbXSk6IFdvcmREZXRhaWxEYXRhW10ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdUM2RDBcdUJDRjggXHVDNzUxXHVCMkY1OicsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDEuIFx1QzY0NFx1QzgwNFx1RDU1QyBKU09OIFx1QkMzMFx1QzVGNFx1Qzc0NCBcdUNDM0VcdUM1NDRcdUJDRjRcdUFFMzBcclxuICAgICAgICAgICAgbGV0IGpzb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXFtbXFxzXFxTXSpcXF0vKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAyLiBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVCQzMwXHVDNUY0XHVDNzc0IFx1QzVDNlx1QzczQ1x1QkE3NCBcdUFDMUNcdUJDQzQgXHVBQzFEXHVDQ0I0XHVCNEU0XHVDNzQ0IFx1Q0MzRVx1QzU0NFx1QzExQyBcdUJDMzBcdUM1RjRcdUI4NUMgXHVCOUNDXHVCNEU0XHVBRTMwXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmplY3RNYXRjaGVzID0gcmVzcG9uc2UubWF0Y2goL1xce1tee31dKlwid29yZFwiW157fV0qXFx9L2cpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdE1hdGNoZXMgJiYgb2JqZWN0TWF0Y2hlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QganNvblN0cmluZyA9ICdbJyArIG9iamVjdE1hdGNoZXMuam9pbignLCcpICsgJ10nO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbkRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzSnNvbkRhdGEoanNvbkRhdGEsIG9yaWdpbmFsV29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHVBQzFDXHVCQ0M0IFx1QUMxRFx1Q0NCNCBcdUQzMENcdUMyRjEgXHVDMkU0XHVEMzI4OicsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gMy4gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjRcdUFFNENcdUM5QzAgXHVDQzNFXHVBRTMwXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0Q29tcGxldGVNYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXFtbXFxzXFxTXSpcXH0oPz1cXHMqJCkvKTtcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0Q29tcGxldGVNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpzb25NYXRjaCA9IFtsYXN0Q29tcGxldGVNYXRjaFswXSArICddJ107XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSlNPTiBcdUJDMzBcdUM1RjRcdUM3NDQgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDQuIEpTT04gXHVEMzBDXHVDMkYxIFx1QzJEQ1x1QjNDNCAtIFx1QzgxMFx1QzlDNFx1QzgwMVx1QzczQ1x1Qjg1QyBcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgbGV0IGpzb25EYXRhO1xyXG4gICAgICAgICAgICBsZXQgcGFyc2VkTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBqc29uRGF0YSA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0pTT04gXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCwgXHVDODEwXHVDOUM0XHVDODAxIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzQ6JywgcGFyc2VFcnJvcik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIDUuIFx1QzgxMFx1QzlDNFx1QzgwMSBcdUQzMENcdUMyRjEgXHVDMkRDXHVCM0M0IC0gXHVDNjQ0XHVDODA0XHVENTVDIFx1QUMxRFx1Q0NCNFx1QjRFNFx1QjlDQyBcdUQzMENcdUMyRjFcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnBhcnNlSW5jcmVtZW50YWxKc29uKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gNi4gSlNPTiBcdUJDRjVcdUFENkMgXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXhlZEpzb24gPSB0aGlzLmZpeEpzb25TdHJpbmcoanNvbk1hdGNoWzBdKTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAganNvbkRhdGEgPSBKU09OLnBhcnNlKGZpeGVkSnNvbik7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChzZWNvbmRFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKU09OIFx1QkNGNVx1QUQ2QyBcdUMyRTRcdUQzMjg6Jywgc2Vjb25kRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSlNPTiBcdUQzMENcdUMyRjEgXHVCQzBGIFx1QkNGNVx1QUQ2QyBcdUMyRTRcdUQzMjgnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGpzb25EYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdUM3NTFcdUIyRjVcdUM3NzQgXHVCQzMwXHVDNUY0IFx1RDYxNVx1QzJERFx1Qzc3NCBcdUM1NDRcdUIyRDlcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NKc29uRGF0YShqc29uRGF0YSwgb3JpZ2luYWxXb3Jkcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzVFQ1x1QjdFQyBcdUIyRThcdUM1QjQgXHVDNzUxXHVCMkY1IFx1RDMwQ1x1QzJGMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUM2RDBcdUJDRjggXHVDNzUxXHVCMkY1OicsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQgXHVDMkRDIFx1QkU0OCBcdUFDQjBcdUFDRkMgXHVCQzE4XHVENjU4XHJcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbFdvcmRzLm1hcCh3b3JkID0+ICh7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiB3b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbXSxcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXSxcclxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogW11cclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM4MTBcdUM5QzRcdUM4MDEgSlNPTiBcdUQzMENcdUMyRjEgLSBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0XHVCNEU0XHVCOUNDIFx1RDMwQ1x1QzJGMVxyXG4gICAgcHJpdmF0ZSBwYXJzZUluY3JlbWVudGFsSnNvbihyZXNwb25zZTogc3RyaW5nKTogV29yZERldGFpbERhdGFbXSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjRcdUI0RTRcdUM3NDQgXHVDQzNFXHVBRTMwIChcdUM2MDhcdUJCMzggXHVENTQ0XHVCNERDIFx1RDNFQ1x1RDU2OClcclxuICAgICAgICBjb25zdCBvYmplY3RSZWdleCA9IC9cXHtbXnt9XSpcIndvcmRcIltee31dKlwicHJvbnVuY2lhdGlvblwiW157fV0qXCJtZWFuaW5nc1wiW157fV0qXCJleGFtcGxlc1wiW157fV0qXCJzaW1pbGFyV29yZHNcIltee31dKlxcfS9nO1xyXG4gICAgICAgIGxldCBtYXRjaDtcclxuICAgICAgICBcclxuICAgICAgICB3aGlsZSAoKG1hdGNoID0gb2JqZWN0UmVnZXguZXhlYyhyZXNwb25zZSkpICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmplY3REYXRhID0gSlNPTi5wYXJzZShtYXRjaFswXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0RGF0YSAmJiBvYmplY3REYXRhLndvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxpZGF0ZWRFeGFtcGxlcyA9IHRoaXMudmFsaWRhdGVFeGFtcGxlcyhvYmplY3REYXRhLmV4YW1wbGVzKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YTogV29yZERldGFpbERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQ6IG9iamVjdERhdGEud29yZC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiBvYmplY3REYXRhLnByb251bmNpYXRpb24gfHwgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBBcnJheS5pc0FycmF5KG9iamVjdERhdGEubWVhbmluZ3MpID8gb2JqZWN0RGF0YS5tZWFuaW5ncyA6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogdmFsaWRhdGVkRXhhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogQXJyYXkuaXNBcnJheShvYmplY3REYXRhLnNpbWlsYXJXb3JkcykgPyBvYmplY3REYXRhLnNpbWlsYXJXb3JkcyA6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2god29yZERhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHVBQzFDXHVCQ0M0IFx1QUMxRFx1Q0NCNCBcdUQzMENcdUMyRjEgXHVDMkU0XHVEMzI4OicsIGUpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV29yZERldGFpbERhdGFcdUI5N0MgV29yZERhdGFcdUI4NUMgXHVCQ0MwXHVENjU4XHVENTU4XHVCMjk0IFx1QkE1NFx1QzExQ1x1QjREQ1xyXG4gICAgY29udmVydFRvV29yZERhdGEod29yZERldGFpbDogV29yZERldGFpbERhdGEpOiBXb3JkRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd29yZDogd29yZERldGFpbC53b3JkLFxyXG4gICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkRGV0YWlsLnByb251bmNpYXRpb24sXHJcbiAgICAgICAgICAgIG1lYW5pbmdzOiB3b3JkRGV0YWlsLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREZXRhaWwuc2ltaWxhcldvcmRzLFxyXG4gICAgICAgICAgICBleGFtcGxlczogd29yZERldGFpbC5leGFtcGxlc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSlNPTiBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDQzk4XHVCOUFDXHJcbiAgICBwcml2YXRlIHByb2Nlc3NKc29uRGF0YShqc29uRGF0YTogYW55W10sIG9yaWdpbmFsV29yZHM6IHN0cmluZ1tdKTogV29yZERldGFpbERhdGFbXSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBqc29uRGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgaXRlbS53b3JkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWxpZGF0ZWRFeGFtcGxlcyA9IHRoaXMudmFsaWRhdGVFeGFtcGxlcyhpdGVtLmV4YW1wbGVzKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZERhdGE6IFdvcmREZXRhaWxEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IGl0ZW0ud29yZC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IGl0ZW0ucHJvbnVuY2lhdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogQXJyYXkuaXNBcnJheShpdGVtLm1lYW5pbmdzKSA/IGl0ZW0ubWVhbmluZ3MgOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogdmFsaWRhdGVkRXhhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBBcnJheS5pc0FycmF5KGl0ZW0uc2ltaWxhcldvcmRzKSA/IGl0ZW0uc2ltaWxhcldvcmRzIDogW11cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2god29yZERhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICAvLyBKU09OIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUJDRjVcdUFENkNcclxuICAgIHByaXZhdGUgZml4SnNvblN0cmluZyhqc29uU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBmaXhlZCA9IGpzb25TdHJpbmc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gMS4gXHVCRDg4XHVDNjQ0XHVDODA0XHVENTVDIFx1QUMxRFx1Q0NCNCBcdUM4MUNcdUFDNzAgKFx1QjlDOFx1QzlDMFx1QjlDOSBcdUMyN0NcdUQ0NUMgXHVCNEE0XHVDNzU4IFx1QkQ4OFx1QzY0NFx1QzgwNFx1RDU1QyBcdUJEODBcdUJEODQpXHJcbiAgICAgICAgY29uc3QgbGFzdENvbXBsZXRlT2JqZWN0ID0gZml4ZWQubWF0Y2goLy4qXFx9KD89LD9cXHMqJCkvKTtcclxuICAgICAgICBpZiAobGFzdENvbXBsZXRlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGZpeGVkID0gbGFzdENvbXBsZXRlT2JqZWN0WzBdICsgJ10nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyAyLiBcdUM5MTFcdUJDRjVcdUI0MUMgXHVDMjdDXHVENDVDIFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIGZpeGVkID0gZml4ZWQucmVwbGFjZSgvLFxccyosL2csICcsJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gMy4gXHVCQzMwXHVDNUY0IFx1QjA1RFx1Qzc1OCBcdUMyN0NcdUQ0NUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8sXFxzKlxcXS9nLCAnXScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDQuIFx1QUMxRFx1Q0NCNCBcdUIwNURcdUM3NTggXHVDMjdDXHVENDVDIFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIGZpeGVkID0gZml4ZWQucmVwbGFjZSgvLFxccypcXH0vZywgJ30nKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyA1LiBcdUJCMzhcdUM3OTBcdUM1RjQgXHVCMEI0XHVDNzU4IFx1Qzc3NFx1QzJBNFx1Q0YwMFx1Qzc3NFx1RDUwNFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM3NDAgXHVCNTMwXHVDNjM0XHVENDVDIFx1Q0M5OFx1QjlBQ1xyXG4gICAgICAgIGZpeGVkID0gZml4ZWQucmVwbGFjZSgvKD88IVxcXFwpXCIvZywgKG1hdGNoLCBvZmZzZXQpID0+IHtcclxuICAgICAgICAgICAgLy8gXHVCQjM4XHVDNzkwXHVDNUY0IFx1QjBCNFx1QkQ4MFx1Qzc1OCBcdUI1MzBcdUM2MzRcdUQ0NUNcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZSA9IGZpeGVkLnN1YnN0cmluZygwLCBvZmZzZXQpO1xyXG4gICAgICAgICAgICBjb25zdCBxdW90ZUNvdW50ID0gKGJlZm9yZS5tYXRjaCgvXCIvZykgfHwgW10pLmxlbmd0aDtcclxuICAgICAgICAgICAgcmV0dXJuIHF1b3RlQ291bnQgJSAyID09PSAwID8gbWF0Y2ggOiAnXFxcXFwiJztcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZml4ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV29yZERhdGEgXHVENjE1XHVDMkREXHVDNzNDXHVCODVDIFx1QkNDMFx1RDY1OFxyXG4gICAgY29udmVydFRvV29yZERhdGEod29yZERldGFpbDogV29yZERldGFpbERhdGEpOiBXb3JkRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd29yZDogd29yZERldGFpbC53b3JkLFxyXG4gICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkRGV0YWlsLnByb251bmNpYXRpb24sXHJcbiAgICAgICAgICAgIG1lYW5pbmdzOiB3b3JkRGV0YWlsLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREZXRhaWwuc2ltaWxhcldvcmRzLFxyXG4gICAgICAgICAgICBleGFtcGxlczogd29yZERldGFpbC5leGFtcGxlc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCB9IGZyb20gJy4uLy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcclxuaW1wb3J0IHsgVFRTU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL3R0cy9UVFNTZXJ2aWNlJztcclxuaW1wb3J0IHsgU3BhY2VkUmVwZXRpdGlvblNlcnZpY2UsIFJldmlld1Nlc3Npb24gfSBmcm9tICcuLi8uLi8uLi9jb3JlL3NlcnZpY2VzL1NwYWNlZFJlcGV0aXRpb25TZXJ2aWNlJztcclxuaW1wb3J0IHsgUmV2aWV3UmVzcG9uc2UgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2FsZ29yaXRobXMvU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobSc7XHJcblxyXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIGN1cnJlbnRDYXJkSW5kZXggPSAwO1xyXG4gICAgY2FyZHM6IFZvY2FidWxhcnlDYXJkW10gPSBbXTtcclxuICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgIHByaXZhdGUga2V5ZG93bkhhbmRsZXI6ICgoZTogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgdHRzU2VydmljZTogVFRTU2VydmljZTtcclxuICAgIHByaXZhdGUgc3BhY2VkUmVwZXRpdGlvblNlcnZpY2U6IFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50U2Vzc2lvbjogUmV2aWV3U2Vzc2lvbiB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLnR0c1NlcnZpY2UgPSBuZXcgVFRTU2VydmljZSh7XHJcbiAgICAgICAgICAgIGVuYWJsZWQ6IHBsdWdpbi5zZXR0aW5ncy50dHNFbmFibGVkLFxyXG4gICAgICAgICAgICB2b2ljZTogcGx1Z2luLnNldHRpbmdzLnR0c1ZvaWNlLFxyXG4gICAgICAgICAgICBwbGF5YmFja1NwZWVkOiBwbHVnaW4uc2V0dGluZ3MudHRzUGxheWJhY2tTcGVlZCxcclxuICAgICAgICAgICAgYXV0b1BsYXk6IHBsdWdpbi5zZXR0aW5ncy50dHNBdXRvUGxheVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UgPSBuZXcgU3BhY2VkUmVwZXRpdGlvblNlcnZpY2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgLy8gXHVDODAwXHVDN0E1XHVCNDFDIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXHJcbiAgICAgICAgY29uc3QgYWxsQ2FyZHMgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTcGFjZWQgUmVwZXRpdGlvbjogXHVCQ0Y1XHVDMkI1XHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU1QyBcdUNFNzRcdUI0RENcdUI0RTRcdUI5Q0MgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXHJcbiAgICAgICAgdGhpcy5jYXJkcyA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UuZ2V0Q2FyZHNGb3JSZXZpZXcoYWxsQ2FyZHMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjUxNFx1QkM4NFx1QUU0NTogXHVDRTc0XHVCNERDIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUQ2NTVcdUM3NzhcclxuICAgICAgICBjb25zb2xlLmxvZygnXHVDODA0XHVDQ0I0IFx1Q0U3NFx1QjREQyBcdUMyMTg6JywgYWxsQ2FyZHMubGVuZ3RoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnXHVCQ0Y1XHVDMkI1IFx1QjMwMFx1QzBDMSBcdUNFNzRcdUI0REMgXHVDMjE4OicsIHRoaXMuY2FyZHMubGVuZ3RoKTtcclxuICAgICAgICBpZiAodGhpcy5jYXJkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdUNDQUIgXHVCQzg4XHVDOUY4IFx1QkNGNVx1QzJCNSBcdUNFNzRcdUI0REM6JywgdGhpcy5jYXJkc1swXS53b3JkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuY2FyZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd05vQ2FyZHNGb3JSZXZpZXcoYWxsQ2FyZHMubGVuZ3RoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QzEzOFx1QzE1OCBcdUMyRENcdUM3OTFcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uID0gdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZS5zdGFydFJldmlld1Nlc3Npb24odGhpcy5jYXJkcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1QzIxQ1x1QzExQyBcdUMxMUVcdUFFMzAgKFx1QzBDOCBcdUNFNzRcdUI0RENcdUFDMDAgXHVCQTNDXHVDODAwIFx1QzYyNFx1QjNDNFx1Qjg1RCBcdUM4NzBcdUM4MTUgXHVBQzAwXHVCMkE1KVxyXG4gICAgICAgIHRoaXMuc2h1ZmZsZUNhcmRzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNob3dDYXJkKCk7XHJcbiAgICAgICAgLy8gXHVEMEE0XHVCQ0Y0XHVCNERDIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI0RjFcdUI4NURcclxuICAgICAgICB0aGlzLmtleWRvd25IYW5kbGVyID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLmNvZGUgPT09ICdTcGFjZScgfHwgZS5rZXkgPT09ICcgJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJzEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXZpZXcoJ2hhcmQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICcyJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmV2aWV3KCdnb29kJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnMycpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJldmlldygnZWFzeScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5ZG93bkhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2h1ZmZsZUNhcmRzKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmNhcmRzLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xyXG4gICAgICAgICAgICBbdGhpcy5jYXJkc1tpXSwgdGhpcy5jYXJkc1tqXV0gPSBbdGhpcy5jYXJkc1tqXSwgdGhpcy5jYXJkc1tpXV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd05vV29yZHNNZXNzYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xyXG5cclxuICAgICAgICBjb25zdCBub1dvcmRzRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbm8td29yZHMtbWVzc2FnZScgfSk7XHJcbiAgICAgICAgbm9Xb3Jkc0VsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDU1OVx1QzJCNVx1RDU2MCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0JyB9KTtcclxuICAgICAgICBub1dvcmRzRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTVcdUM1RDAgXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1QyBcdUQ2QzQgXHVCMkU0XHVDMkRDIFx1QzJEQ1x1QjNDNFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gbm9Xb3Jkc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnIH0pO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZENsYXNzKCdjbG9zZS1idXR0b24nKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Tm9DYXJkc0ZvclJldmlldyh0b3RhbENhcmRzOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbGVhcm5pbmctbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxyXG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZXZpZXctbW9kYWwtaGVpZ2h0JywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHR9dmhgKTtcclxuXHJcbiAgICAgICAgY29uc3Qgbm9SZXZpZXdFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICduby1yZXZpZXctbWVzc2FnZScgfSk7XHJcbiAgICAgICAgbm9SZXZpZXdFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0NcdURGODkgXHVDNjI0XHVCMjk4XHVDNzU4IFx1QkNGNVx1QzJCNSBcdUM2NDRcdUI4Q0MhJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodG90YWxDYXJkcyA+IDApIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLmNhbGN1bGF0ZVN0YXRpc3RpY3ModGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCkpO1xyXG4gICAgICAgICAgICBub1Jldmlld0VsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdUNEMUQgJHt0b3RhbENhcmRzfVx1QUMxQ1x1Qzc1OCBcdUIyRThcdUM1QjQgXHVDOTExIFx1QzYyNFx1QjI5OCBcdUJDRjVcdUMyQjVcdUQ1NjAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUJDRjVcdUMyQjUgXHVDNjA4XHVDODE1IFx1QzgxNVx1QkNGNFxyXG4gICAgICAgICAgICBjb25zdCBuZXh0RHVlQ2FyZHMgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLmdldENhcmRzRHVlSW5EYXlzKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCksIFxyXG4gICAgICAgICAgICAgICAgMVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAobmV4dER1ZUNhcmRzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbm9SZXZpZXdFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYFx1QjBCNFx1Qzc3QyBcdUJDRjVcdUMyQjUgXHVDNjA4XHVDODE1OiAke25leHREdWVDYXJkc31cdUFDMUMgXHVCMkU4XHVDNUI0YCBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdUQ1NTlcdUMyQjUgXHVEMUI1XHVBQ0M0XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXRzRWwgPSBub1Jldmlld0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0dWR5LXN0YXRzJyB9KTtcclxuICAgICAgICAgICAgc3RhdHNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ1NTlcdUMyQjUgXHVENjA0XHVENjY5JyB9KTtcclxuICAgICAgICAgICAgc3RhdHNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFx1MjAyMiBcdUMwQzggXHVCMkU4XHVDNUI0OiAke3N0YXRzLm92ZXJhbGwubmV3Q2FyZHN9XHVBQzFDYCB9KTtcclxuICAgICAgICAgICAgc3RhdHNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFx1MjAyMiBcdUQ1NTlcdUMyQjUgXHVDOTExOiAke3N0YXRzLm92ZXJhbGwubGVhcm5pbmdDYXJkc31cdUFDMUNgIH0pO1xyXG4gICAgICAgICAgICBzdGF0c0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgXHUyMDIyIFx1QzY0NFx1QjhDQzogJHtzdGF0cy5vdmVyYWxsLm1hdHVyZUNhcmRzfVx1QUMxQ2AgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbm9SZXZpZXdFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1QzVEMCBcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTVDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gbm9SZXZpZXdFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkVCXHVBRTMwJyB9KTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRDbGFzcygnY2xvc2UtYnV0dG9uJyk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0NhcmQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENhcmRJbmRleCA+PSB0aGlzLmNhcmRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDb21wbGV0aW9uTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjdXJyZW50Q2FyZCA9IHRoaXMuY2FyZHNbdGhpcy5jdXJyZW50Q2FyZEluZGV4XTtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbGVhcm5pbmctbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxyXG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZXZpZXctbW9kYWwtaGVpZ2h0JywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHR9dmhgKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FyZENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2b2NhYnVsYXJ5LWNhcmQnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzBDMVx1QjJFOCBcdUM4MTVcdUJDRjQgXHVDNjAxXHVDNUVEIChib29rIFx1QzgxNVx1QkNGNFx1QzY0MCBcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDIFx1QkM4NFx1RDJCQ1x1Qzc0NCBcdUQ1NjhcdUFFRDggXHVCQzMwXHVDRTU4KVxyXG4gICAgICAgIGNvbnN0IHRvcEluZm9Db250YWluZXIgPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NhcmQtdG9wLWluZm8nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBib29rIFx1QzgxNVx1QkNGNCBcdUQ0NUNcdUMyREMgKFx1QzY3Q1x1Q0FCRClcclxuICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRDdXJyZW50Qm9vaygpO1xyXG4gICAgICAgIGlmIChjdXJyZW50Qm9vaykge1xyXG4gICAgICAgICAgICBjb25zdCBib29rSW5mb0VsID0gdG9wSW5mb0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdib29rLWluZm8tZGlzcGxheScgfSk7XHJcbiAgICAgICAgICAgIGJvb2tJbmZvRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogY3VycmVudEJvb2submFtZSxcclxuICAgICAgICAgICAgICAgIGNsczogJ2N1cnJlbnQtYm9vay1uYW1lJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQyBcdUJDODRcdUQyQkMgKFx1QzYyNFx1Qjk3OFx1Q0FCRClcclxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0b3BJbmZvQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhcmQtZGVsZXRlLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZURlbGV0ZUNhcmQoKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDOUM0XHVENTg5XHVCOTYwIFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzRWwgPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWluZGljYXRvcicgfSk7XHJcbiAgICAgICAgcHJvZ3Jlc3NFbC50ZXh0Q29udGVudCA9IGAke3RoaXMuY3VycmVudENhcmRJbmRleCArIDF9IC8gJHt0aGlzLmNhcmRzLmxlbmd0aH1gO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUQ0NUNcdUMyREMgKFRUUyBcdUJDODRcdUQyQkMgXHVEM0VDXHVENTY4KVxyXG4gICAgICAgIGNvbnN0IHdvcmRDb250YWluZXIgPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtY29udGFpbmVyJyB9KTtcclxuICAgICAgICBjb25zdCB3b3JkRWwgPSB3b3JkQ29udGFpbmVyLmNyZWF0ZUVsKCdoMScsIHsgY2xzOiAnY2FyZC13b3JkJyB9KTtcclxuICAgICAgICBpZiAoY3VycmVudENhcmQucHJvbnVuY2lhdGlvbiAmJiBjdXJyZW50Q2FyZC5wcm9udW5jaWF0aW9uLnRyaW0oKSkge1xyXG4gICAgICAgICAgICB3b3JkRWwuaW5uZXJIVE1MID0gYCR7Y3VycmVudENhcmQud29yZH0gPHNwYW4gY2xhc3M9XCJwcm9udW5jaWF0aW9uXCI+WyR7Y3VycmVudENhcmQucHJvbnVuY2lhdGlvbn1dPC9zcGFuPmA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd29yZEVsLnRleHRDb250ZW50ID0gY3VycmVudENhcmQud29yZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1QkMxQ1x1Qzc0QyBcdUM3QUNcdUMwREQgXHVCQzg0XHVEMkJDXHJcbiAgICAgICAgY29uc3Qgd29yZFBsYXlCdXR0b24gPSB3b3JkQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICBjbHM6ICd0dHMtcGxheS1idXR0b24gd29yZC1wbGF5LWJ1dHRvbicsXHJcbiAgICAgICAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnXHVCMkU4XHVDNUI0IFx1QkMxQ1x1Qzc0QyBcdUI0RTNcdUFFMzAnIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB3b3JkUGxheUJ1dHRvbi5pbm5lckhUTUwgPSAnXHVEODNEXHVERDBBJztcclxuICAgICAgICB3b3JkUGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnNwZWFrV29yZChjdXJyZW50Q2FyZC53b3JkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNFxyXG4gICAgICAgIGlmIChjdXJyZW50Q2FyZC5zaW1pbGFyV29yZHMgJiYgY3VycmVudENhcmQuc2ltaWxhcldvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3Qgc2ltaWxhclNlY3Rpb24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NpbWlsYXItd29yZHMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIHNpbWlsYXJTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTQ6JyB9KTtcclxuICAgICAgICAgICAgY29uc3Qgc2ltaWxhckxpc3QgPSBzaW1pbGFyU2VjdGlvbi5jcmVhdGVFbCgndWwnLCB7IGNsczogJ3NpbWlsYXItd29yZHMtbGlzdCcgfSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDYXJkLnNpbWlsYXJXb3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2ltaWxhckxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiB3b3JkIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QzYwOFx1QkIzOFx1QjRFNCAoXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1QUMwMFx1QzgzOFx1QzYyOCBcdUM2MDhcdUJCMzggXHVDMEFDXHVDNkE5KVxyXG4gICAgICAgIGlmIChjdXJyZW50Q2FyZC5leGFtcGxlcyAmJiBjdXJyZW50Q2FyZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzU2VjdGlvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZXMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIGV4YW1wbGVzU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzhcdUI0RTQ6JyB9KTtcclxuICAgICAgICAgICAgY3VycmVudENhcmQuZXhhbXBsZXMuZm9yRWFjaCgoZXhhbXBsZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVDb250YWluZXIgPSBleGFtcGxlc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS1jb250YWluZXInIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IChUVFMgXHVCQzg0XHVEMkJDIFx1RDNFQ1x1RDU2OClcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVUZXh0Q29udGFpbmVyID0gZXhhbXBsZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlLXRleHQtY29udGFpbmVyJyB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hFeGFtcGxlID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4YW1wbGUuZW5nbGlzaCB9KTtcclxuICAgICAgICAgICAgICAgIGVuZ2xpc2hFeGFtcGxlLmFkZENsYXNzKCdlbmdsaXNoLWV4YW1wbGUnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVDNjA4XHVCQjM4IFx1QkMxQ1x1Qzc0QyBcdUM3QUNcdUMwREQgXHVCQzg0XHVEMkJDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGFtcGxlUGxheUJ1dHRvbiA9IGV4YW1wbGVUZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3R0cy1wbGF5LWJ1dHRvbiBleGFtcGxlLXBsYXktYnV0dG9uJyxcclxuICAgICAgICAgICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1QzYwOFx1QkIzOCBcdUJDMUNcdUM3NEMgXHVCNEUzXHVBRTMwJyB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVQbGF5QnV0dG9uLmlubmVySFRNTCA9ICdcdUQ4M0RcdUREMEEnO1xyXG4gICAgICAgICAgICAgICAgZXhhbXBsZVBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnNwZWFrRXhhbXBsZShleGFtcGxlLmVuZ2xpc2gpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgKFx1QzgxNVx1QjJGNSBcdUQ2NTVcdUM3NzggXHVENkM0XHVDNUQwXHVCOUNDIFx1RDQ1Q1x1QzJEQylcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dBbnN3ZXIgJiYgZXhhbXBsZS5rb3JlYW4gJiYgZXhhbXBsZS5rb3JlYW4udHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga29yZWFuRXhhbXBsZSA9IGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4YW1wbGUua29yZWFuIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGtvcmVhbkV4YW1wbGUuYWRkQ2xhc3MoJ2tvcmVhbi1leGFtcGxlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1QzYwOFx1QkIzOFx1Qzc3NCBcdUM1QzZcdUM3NDQgXHVCNTRDIFx1QUUzMFx1QkNGOCBcdUM2MDhcdUJCMzggXHVENDVDXHVDMkRDXHJcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzU2VjdGlvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZXMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIGV4YW1wbGVzU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzhcdUI0RTQ6JyB9KTtcclxuICAgICAgICAgICAgY29uc3QgZXhhbXBsZUNvbnRhaW5lciA9IGV4YW1wbGVzU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlLWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlVGV4dENvbnRhaW5lciA9IGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS10ZXh0LWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hFeGFtcGxlID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFRoaXMgaXMgYW4gZXhhbXBsZSBzZW50ZW5jZSB3aXRoIHRoZSB3b3JkIFwiJHtjdXJyZW50Q2FyZC53b3JkfVwiLmAgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlbmdsaXNoRXhhbXBsZS5hZGRDbGFzcygnZW5nbGlzaC1leGFtcGxlJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUFFMzBcdUJDRjggXHVDNjA4XHVCQjM4IFx1QkMxQ1x1Qzc0QyBcdUM3QUNcdUMwREQgXHVCQzg0XHVEMkJDXHJcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVQbGF5QnV0dG9uID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgICAgICBjbHM6ICd0dHMtcGxheS1idXR0b24gZXhhbXBsZS1wbGF5LWJ1dHRvbicsXHJcbiAgICAgICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1QzYwOFx1QkIzOCBcdUJDMUNcdUM3NEMgXHVCNEUzXHVBRTMwJyB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBleGFtcGxlUGxheUJ1dHRvbi5pbm5lckhUTUwgPSAnXHVEODNEXHVERDBBJztcclxuICAgICAgICAgICAgZXhhbXBsZVBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtFeGFtcGxlKGBUaGlzIGlzIGFuIGV4YW1wbGUgc2VudGVuY2Ugd2l0aCB0aGUgd29yZCBcIiR7Y3VycmVudENhcmQud29yZH1cIi5gKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIChcdUM4MTVcdUIyRjUgXHVENjU1XHVDNzc4IFx1RDZDNFx1QzVEMFx1QjlDQyBcdUQ0NUNcdUMyREMpXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dBbnN3ZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtvcmVhbkV4YW1wbGUgPSBleGFtcGxlQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgXCIke2N1cnJlbnRDYXJkLndvcmR9XCJcdUI3N0NcdUIyOTQgXHVCMkU4XHVDNUI0XHVBQzAwIFx1RDNFQ1x1RDU2OFx1QjQxQyBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuYCBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAga29yZWFuRXhhbXBsZS5hZGRDbGFzcygna29yZWFuLWV4YW1wbGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OCBcdUJDODRcdUQyQkNcclxuICAgICAgICBpZiAoIXRoaXMuc2hvd0Fuc3dlcikge1xyXG4gICAgICAgICAgICBjb25zdCBjaGVja0J1dHRvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzgxNVx1QjJGNSBcdUQ2NTVcdUM3NzhcdUQ1NThcdUFFMzAnIH0pO1xyXG4gICAgICAgICAgICBjaGVja0J1dHRvbi5hZGRDbGFzcygnY2hlY2stYW5zd2VyLWJ1dHRvbicpO1xyXG4gICAgICAgICAgICBjaGVja0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDYXJkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1QzgxNVx1QjJGNSBcdUQ0NUNcdUMyRENcclxuICAgICAgICAgICAgY29uc3QgYW5zd2VyU2VjdGlvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYW5zd2VyLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgICAgICBhbnN3ZXJTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QjczQjonIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBtZWFuaW5nc0xpc3QgPSBhbnN3ZXJTZWN0aW9uLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnbWVhbmluZ3MtbGlzdCcgfSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDYXJkLm1lYW5pbmdzLmZvckVhY2gobWVhbmluZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nc0xpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBtZWFuaW5nIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1QkNGNVx1QzJCNSBcdUJDODRcdUQyQkNcdUI0RTRcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZXZpZXdCdXR0b25zKGNhcmRDb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVJldmlld0J1dHRvbnMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHJldmlld1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmV2aWV3LWJ1dHRvbnMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaGFyZEJ1dHRvbiA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzVCNFx1QjgyNFx1QzZDMCcgfSk7XHJcbiAgICAgICAgaGFyZEJ1dHRvbi5hZGRDbGFzcygncmV2aWV3LWJ1dHRvbicsICdoYXJkLWJ1dHRvbicpO1xyXG4gICAgICAgIGhhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnaGFyZCcpKTtcclxuXHJcbiAgICAgICAgY29uc3QgZ29vZEJ1dHRvbiA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1Qzg4Qlx1Qzc0QycgfSk7XHJcbiAgICAgICAgZ29vZEJ1dHRvbi5hZGRDbGFzcygncmV2aWV3LWJ1dHRvbicsICdnb29kLWJ1dHRvbicpO1xyXG4gICAgICAgIGdvb2RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnZ29vZCcpKTtcclxuXHJcbiAgICAgICAgY29uc3QgZWFzeUJ1dHRvbiA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzI2Q1x1QzZDMCcgfSk7XHJcbiAgICAgICAgZWFzeUJ1dHRvbi5hZGRDbGFzcygncmV2aWV3LWJ1dHRvbicsICdlYXN5LWJ1dHRvbicpO1xyXG4gICAgICAgIGVhc3lCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnZWFzeScpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVJldmlldyhkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50Q2FyZCA9IHRoaXMuY2FyZHNbdGhpcy5jdXJyZW50Q2FyZEluZGV4XTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFNlc3Npb24pIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gYWN0aXZlIHJldmlldyBzZXNzaW9uJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ29udmVydCBkaWZmaWN1bHR5IHRvIFJldmlld1Jlc3BvbnNlIGVudW1cclxuICAgICAgICBjb25zdCByZXZpZXdSZXNwb25zZSA9IGRpZmZpY3VsdHkgYXMgUmV2aWV3UmVzcG9uc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gUHJvY2VzcyByZXZpZXcgdXNpbmcgc3BhY2VkIHJlcGV0aXRpb24gc2VydmljZVxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnByb2Nlc3NSZXZpZXcoY3VycmVudENhcmQsIHJldmlld1Jlc3BvbnNlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjYXJkIGluIGRhdGFiYXNlIHdpdGggbmV3IHNjaGVkdWxlIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkV2l0aFNjaGVkdWxlKFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnVwZGF0ZWRDYXJkLndvcmQsIFxyXG4gICAgICAgICAgICAgICAgZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgICAgIHJlc3VsdC51cGRhdGVkQ2FyZC5zY2hlZHVsZUluZm9cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIERlYnVnIGxvZ2dpbmdcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYENhcmQgXCIke2N1cnJlbnRDYXJkLndvcmR9XCIgcmV2aWV3ZWQ6YCwge1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHJldmlld1Jlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgbmV3SW50ZXJ2YWw6IHJlc3VsdC51cGRhdGVkQ2FyZC5zY2hlZHVsZUluZm8/LmludGVydmFsLFxyXG4gICAgICAgICAgICAgICAgbmV3RHVlRGF0ZTogcmVzdWx0LnVwZGF0ZWRDYXJkLnNjaGVkdWxlSW5mbz8uZHVlRGF0ZSxcclxuICAgICAgICAgICAgICAgIG5ld0Vhc2U6IHJlc3VsdC51cGRhdGVkQ2FyZC5zY2hlZHVsZUluZm8/LmVhc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUIyRTRcdUM3NEMgXHVDRTc0XHVCNERDXHVCODVDIFx1Qzc3NFx1QjNEOVxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXgrKztcclxuICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBzcGFjZWQgcmVwZXRpdGlvbiByZXZpZXc6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAvLyBGYWxsYmFjayB0byBvbGQgbWV0aG9kIGlmIHNwYWNlZCByZXBldGl0aW9uIGZhaWxzXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkKGN1cnJlbnRDYXJkLndvcmQsIGRpZmZpY3VsdHkpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXgrKztcclxuICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYXJkID0gdGhpcy5jYXJkc1t0aGlzLmN1cnJlbnRDYXJkSW5kZXhdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQycsXHJcbiAgICAgICAgICAgIGBcIiR7Y3VycmVudENhcmQud29yZH1cIiBcdUIyRThcdUM1QjRcdUI5N0MgXHVDMEFEXHVDODFDXHVENTU4XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDP1xcblxcblx1Qzc3NCBcdUM3OTFcdUM1QzVcdUM3NDAgXHVCNDE4XHVCM0NDXHVCOUI0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCxcclxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQ1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5yZW1vdmVXb3JkKGN1cnJlbnRDYXJkLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUIyRThcdUM1QjQgXHVCQUE5XHVCODVEXHVDNUQwXHVDMTFDXHVCM0M0IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZHMuc3BsaWNlKHRoaXMuY3VycmVudENhcmRJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVBQzAwIFx1QjM1NCBcdUM3NzRcdUMwQzEgXHVDNUM2XHVDNzNDXHVCQTc0IFx1QzY0NFx1QjhDQyBcdUQ2NTRcdUJBNzRcdUM3M0NcdUI4NUNcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYXJkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGlvbk1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDNzc4XHVCMzcxXHVDMkE0XHVBQzAwIFx1QjJFOFx1QzVCNCBcdUJBQTlcdUI4NUQgXHVCQzk0XHVDNzA0XHVCOTdDIFx1QkM5N1x1QzVCNFx1QjA5OFx1QkE3NCBcdUM4NzBcdUM4MTVcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2FyZEluZGV4ID49IHRoaXMuY2FyZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCA9IHRoaXMuY2FyZHMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1QjJFOFx1QzVCNCBcdUQ0NUNcdUMyRENcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDYXJkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQ6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q29tcGxldGlvbk1lc3NhZ2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2b2NhYnVsYXJ5LWxlYXJuaW5nLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNVx1QjQxQyBcdUIxOTJcdUM3NzRcdUI5N0MgQ1NTIFx1QkNDMFx1QzIxOFx1Qjg1QyBcdUM4MDFcdUM2QTlcclxuICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmV2aWV3LW1vZGFsLWhlaWdodCcsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0fXZoYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjb21wbGV0aW9uLW1lc3NhZ2UnIH0pO1xyXG4gICAgICAgIGNvbXBsZXRpb25FbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ1NTlcdUMyQjUgXHVDNjQ0XHVCOENDIScgfSk7XHJcbiAgICAgICAgY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgXHVDNjI0XHVCMjk4ICR7dGhpcy5jYXJkcy5sZW5ndGh9XHVBQzFDXHVDNzU4IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjVcdUM3NDQgXHVDNjQ0XHVCOENDXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LmAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3RhcnRCdXR0b24gPSBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFNFx1QzJEQyBcdUQ1NTlcdUMyQjVcdUQ1NThcdUFFMzAnIH0pO1xyXG4gICAgICAgIHJlc3RhcnRCdXR0b24uYWRkQ2xhc3MoJ3Jlc3RhcnQtYnV0dG9uJyk7XHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFQlx1QUUzMCcgfSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkQ2xhc3MoJ2Nsb3NlLWJ1dHRvbicpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5rZXlkb3duSGFuZGxlcikge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5ZG93bkhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmtleWRvd25IYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1QUMwNFx1QjJFOFx1RDU1QyBcdUQ2NTVcdUM3NzggXHVCQUE4XHVCMkVDIFx1RDA3NFx1Qjc5OFx1QzJBNFxyXG5jbGFzcyBDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICB0aXRsZTogc3RyaW5nO1xyXG4gICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgb25Db25maXJtOiAoKSA9PiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0aXRsZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIG9uQ29uZmlybTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm07XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnY29uZmlybS1tb2RhbCcpO1xyXG5cclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLnRpdGxlLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0aGlzLm1lc3NhZ2UsIGNsczogJ21vZGFsLW1lc3NhZ2UnIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb25maXJtQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1RDY1NVx1Qzc3OCcsXHJcbiAgICAgICAgICAgIGNsczogJ2NvbmZpcm0tYnV0dG9uIHByaW1hcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkNvbmZpcm0oKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDREU4XHVDMThDJyxcclxuICAgICAgICAgICAgY2xzOiAnY2FuY2VsLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuaW50ZXJmYWNlIFRUU1NldHRpbmdzIHtcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIHZvaWNlOiBzdHJpbmc7XG4gICAgcGxheWJhY2tTcGVlZDogbnVtYmVyO1xuICAgIGF1dG9QbGF5OiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgVFRTU2VydmljZSB7XG4gICAgcHJpdmF0ZSBhdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHNldHRpbmdzOiBUVFNTZXR0aW5ncztcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBUVFNTZXR0aW5ncykge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgfVxuXG4gICAgYXN5bmMgc3BlYWtUZXh0KHRleHQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlZCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnVFRTIFx1QUUzMFx1QjJBNVx1Qzc3NCBcdUJFNDRcdUQ2NUNcdUMxMzFcdUQ2NTRcdUI0MThcdUM1QjQgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdlYiBTcGVlY2ggQVBJIFx1QzlDMFx1QzZEMCBcdUQ2NTVcdUM3NzhcbiAgICAgICAgICAgIGlmICghd2luZG93LnNwZWVjaFN5bnRoZXNpcykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc3NCBcdUJFMENcdUI3N0NcdUM2QjBcdUM4MDBcdUIyOTQgXHVDNzRDXHVDMTMxIFx1RDU2OVx1QzEzMVx1Qzc0NCBcdUM5QzBcdUM2RDBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzdBQ1x1QzBERCBcdUM5MTFcdUM3NzggXHVDNzRDXHVDMTMxXHVDNzc0IFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM5MTFcdUM5QzBcbiAgICAgICAgICAgIHRoaXMuc3RvcFNwZWFraW5nKCk7XG5cbiAgICAgICAgICAgIC8vIFx1Qzc0Q1x1QzEzMSBcdUJBQTlcdUI4NURcdUM3NzQgXHVCODVDXHVCNERDXHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1Qzc0NCBcdUMyMTggXHVDNzg4XHVDNzNDXHVCQkMwXHVCODVDIFx1QjMwMFx1QUUzMFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5lbnN1cmVWb2ljZXNMb2FkZWQoKTtcblxuICAgICAgICAgICAgLy8gXHVDNzRDXHVDMTMxIFx1RDU2OVx1QzEzMSBcdUMxMjRcdUM4MTVcbiAgICAgICAgICAgIGNvbnN0IHV0dGVyYW5jZSA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UodGV4dCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1QkE4NVx1QzJEQ1x1QzgwMVx1QzczQ1x1Qjg1QyBcdUM2MDFcdUM1QjQgXHVDNzRDXHVDMTMxIFx1QUMxNVx1QzgxQyBcdUMxMjRcdUM4MTVcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVm9pY2UgPSB0aGlzLnNlbGVjdEVuZ2xpc2hWb2ljZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRWb2ljZSkge1xuICAgICAgICAgICAgICAgIHV0dGVyYW5jZS52b2ljZSA9IHNlbGVjdGVkVm9pY2U7XG4gICAgICAgICAgICAgICAgLy8gRWRnZSBUVFMgXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4IFx1QkMyOVx1QzJERDogdm9pY2UgXHVDMTI0XHVDODE1XHVDNzc0IFx1QzZCMFx1QzEyMFx1QjQxOFx1QkJDMFx1Qjg1QyBsYW5nXHVCM0M0IHZvaWNlXHVDNUQwIFx1QjlERVx1Q0RCMCBcdUMxMjRcdUM4MTVcbiAgICAgICAgICAgICAgICB1dHRlcmFuY2UubGFuZyA9IHNlbGVjdGVkVm9pY2UubGFuZztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVFRTIFZvaWNlIHNlbGVjdGVkOiAke3NlbGVjdGVkVm9pY2UubmFtZX0gKCR7c2VsZWN0ZWRWb2ljZS5sYW5nfSlgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gXHVEM0Y0XHVCQzMxOiBcdUJBODVcdUMyRENcdUM4MDFcdUM3M0NcdUI4NUMgXHVDNjAxXHVDNUI0IFx1QzVCOFx1QzVCNCBcdUMxMjRcdUM4MTVcbiAgICAgICAgICAgICAgICB1dHRlcmFuY2UubGFuZyA9ICdlbi1VUyc7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1RUUzogTm8gc3BlY2lmaWMgdm9pY2UgZm91bmQsIHVzaW5nIGVuLVVTIGxhbmd1YWdlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHV0dGVyYW5jZS5yYXRlID0gdGhpcy5zZXR0aW5ncy5wbGF5YmFja1NwZWVkO1xuICAgICAgICAgICAgdXR0ZXJhbmNlLnZvbHVtZSA9IDEuMDtcblxuICAgICAgICAgICAgLy8gXHVDNzRDXHVDMTMxIFx1QzdBQ1x1QzBERFxuICAgICAgICAgICAgc3BlZWNoU3ludGhlc2lzLnNwZWFrKHV0dGVyYW5jZSk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RUUyBcdUM3QUNcdUMwREQgXHVDOTExIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzRDXHVDMTMxIFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZW5zdXJlVm9pY2VzTG9hZGVkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZvaWNlcyA9IHNwZWVjaFN5bnRoZXNpcy5nZXRWb2ljZXMoKTtcbiAgICAgICAgICAgIGlmICh2b2ljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEVkZ2UgVFRTIFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUJDMjlcdUMyREQ6IHZvaWNlc2NoYW5nZWQgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjMwMFx1QUUzMFxuICAgICAgICAgICAgY29uc3QgaGFuZGxlVm9pY2VzQ2hhbmdlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndm9pY2VzY2hhbmdlZCcsIGhhbmRsZVZvaWNlc0NoYW5nZWQpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHNwZWVjaFN5bnRoZXNpcy5hZGRFdmVudExpc3RlbmVyKCd2b2ljZXNjaGFuZ2VkJywgaGFuZGxlVm9pY2VzQ2hhbmdlZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDMyBcdUMxMjRcdUM4MTUgKDJcdUNEMDgpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndm9pY2VzY2hhbmdlZCcsIGhhbmRsZVZvaWNlc0NoYW5nZWQpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNlbGVjdEVuZ2xpc2hWb2ljZSgpOiBTcGVlY2hTeW50aGVzaXNWb2ljZSB8IG51bGwge1xuICAgICAgICBjb25zdCB2b2ljZXMgPSBzcGVlY2hTeW50aGVzaXMuZ2V0Vm9pY2VzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBFZGdlIFRUUyBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzggXHVCQzI5XHVDMkREOiBcdUJBODVcdUMyRENcdUM4MDEgXHVDNzRDXHVDMTMxIFx1Qzc3NFx1Qjk4NCBcdUM2QjBcdUMxMjAgXHVCOUU0XHVDRTZEXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnZvaWNlKSB7XG4gICAgICAgICAgICBjb25zdCBleGFjdE1hdGNoID0gdm9pY2VzLmZpbmQodm9pY2UgPT4gdm9pY2UubmFtZSA9PT0gdGhpcy5zZXR0aW5ncy52b2ljZSk7XG4gICAgICAgICAgICBpZiAoZXhhY3RNYXRjaCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBleGFjdE1hdGNoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDNjAxXHVDNUI0IFx1Qzc0Q1x1QzEzMVx1QjlDQyBcdUQ1NDRcdUQxMzBcdUI5QzEgKEVkZ2UgVFRTIFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUNDMzhcdUM4NzApXG4gICAgICAgIGNvbnN0IGVuZ2xpc2hWb2ljZXMgPSB2b2ljZXMuZmlsdGVyKHZvaWNlID0+IFxuICAgICAgICAgICAgdm9pY2UubGFuZy5zdGFydHNXaXRoKCdlbi0nKSAmJiAhdm9pY2UubGFuZy5pbmNsdWRlcygna28nKVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChlbmdsaXNoVm9pY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdObyBFbmdsaXNoIHZvaWNlcyBmb3VuZCcpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUM2QjBcdUMxMjBcdUMyMUNcdUM3MDQgXHVBRTMwXHVCQzE4IFx1Qzc0Q1x1QzEzMSBcdUMxMjBcdUQwREQgKEVkZ2UgVFRTIFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBUT1BfVk9JQ0VTIFx1Q0MzOFx1Qzg3MClcbiAgICAgICAgY29uc3QgcHJlZmVycmVkVm9pY2VzID0gW1xuICAgICAgICAgICAgJ01pY3Jvc29mdCBBdmEgLSBFbmdsaXNoIChVbml0ZWQgU3RhdGVzKScsXG4gICAgICAgICAgICAnTWljcm9zb2Z0IEplbm55IC0gRW5nbGlzaCAoVW5pdGVkIFN0YXRlcyknLCBcbiAgICAgICAgICAgICdNaWNyb3NvZnQgQXJpYSAtIEVuZ2xpc2ggKFVuaXRlZCBTdGF0ZXMpJyxcbiAgICAgICAgICAgICdNaWNyb3NvZnQgR3V5IC0gRW5nbGlzaCAoVW5pdGVkIFN0YXRlcyknLFxuICAgICAgICAgICAgJ01pY3Jvc29mdCBNYXJrIC0gRW5nbGlzaCAoVW5pdGVkIFN0YXRlcyknLFxuICAgICAgICAgICAgJ0dvb2dsZSBVUyBFbmdsaXNoJyxcbiAgICAgICAgICAgICdlbi1VUy1BdmFOZXVyYWwnLFxuICAgICAgICAgICAgJ2VuLVVTLUplbm55TmV1cmFsJyxcbiAgICAgICAgICAgICdlbi1VUy1BcmlhTmV1cmFsJ1xuICAgICAgICBdO1xuXG4gICAgICAgIC8vIFx1QzZCMFx1QzEyMFx1QzIxQ1x1QzcwNCBcdUM3NENcdUMxMzEgXHVDQzNFXHVBRTMwXG4gICAgICAgIGZvciAoY29uc3QgcHJlZmVycmVkTmFtZSBvZiBwcmVmZXJyZWRWb2ljZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHZvaWNlID0gZW5nbGlzaFZvaWNlcy5maW5kKHYgPT4gXG4gICAgICAgICAgICAgICAgdi5uYW1lLmluY2x1ZGVzKHByZWZlcnJlZE5hbWUpIHx8IHYubmFtZSA9PT0gcHJlZmVycmVkTmFtZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICh2b2ljZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2b2ljZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1QkJGOFx1QUQ2RCBcdUM2MDFcdUM1QjQgXHVDNkIwXHVDMTIwXG4gICAgICAgIGNvbnN0IHVzRW5nbGlzaCA9IGVuZ2xpc2hWb2ljZXMuZmluZCh2b2ljZSA9PiB2b2ljZS5sYW5nID09PSAnZW4tVVMnKTtcbiAgICAgICAgaWYgKHVzRW5nbGlzaCkge1xuICAgICAgICAgICAgcmV0dXJuIHVzRW5nbGlzaDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1QURGOCBcdUM2NzggXHVDNjAxXHVDNUI0IFx1Qzc0Q1x1QzEzMSBcdUM5MTEgXHVDQ0FCIFx1QkM4OFx1QzlGOFxuICAgICAgICByZXR1cm4gZW5nbGlzaFZvaWNlc1swXTtcbiAgICB9XG5cbiAgICBhc3luYyBzcGVha1dvcmQod29yZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuc3BlYWtUZXh0KHdvcmQpO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrRXhhbXBsZShleGFtcGxlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5zcGVha1RleHQoZXhhbXBsZSk7XG4gICAgfVxuXG4gICAgc3RvcFNwZWFraW5nKCk6IHZvaWQge1xuICAgICAgICBpZiAoc3BlZWNoU3ludGhlc2lzLnNwZWFraW5nKSB7XG4gICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPFRUU1NldHRpbmdzPik6IHZvaWQge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0geyAuLi50aGlzLnNldHRpbmdzLCAuLi5uZXdTZXR0aW5ncyB9O1xuICAgIH1cblxuICAgIGdldEF2YWlsYWJsZVZvaWNlcygpOiBTcGVlY2hTeW50aGVzaXNWb2ljZVtdIHtcbiAgICAgICAgcmV0dXJuIHNwZWVjaFN5bnRoZXNpcy5nZXRWb2ljZXMoKS5maWx0ZXIodm9pY2UgPT4gXG4gICAgICAgICAgICB2b2ljZS5sYW5nLnN0YXJ0c1dpdGgoJ2VuLScpICYmICF2b2ljZS5sYW5nLmluY2x1ZGVzKCdrbycpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZ2V0Q3VycmVudFNlbGVjdGVkVm9pY2UoKTogU3BlZWNoU3ludGhlc2lzVm9pY2UgfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RW5nbGlzaFZvaWNlKCk7XG4gICAgfVxuXG4gICAgaXNFbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5lbmFibGVkO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgTW9tZW50IH0gZnJvbSAnbW9tZW50JztcblxuZXhwb3J0IGVudW0gUmV2aWV3UmVzcG9uc2Uge1xuICAgIEVhc3kgPSAnZWFzeScsXG4gICAgR29vZCA9ICdnb29kJywgXG4gICAgSGFyZCA9ICdoYXJkJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNSU1NldHRpbmdzIHtcbiAgICBiYXNlRWFzZTogbnVtYmVyOyAgICAgICAgICAgLy8gU3RhcnRpbmcgZWFzZSBmYWN0b3IgKDI1MCUpXG4gICAgZWFzeUJvbnVzOiBudW1iZXI7ICAgICAgICAgIC8vIE11bHRpcGxpZXIgZm9yIGVhc3kgcmVzcG9uc2VzICgxLjMpXG4gICAgaGFyZFBlbmFsdHk6IG51bWJlcjsgICAgICAgIC8vIE11bHRpcGxpZXIgZm9yIGhhcmQgcmVzcG9uc2VzICgwLjUpXG4gICAgbWluaW11bUVhc2U6IG51bWJlcjsgICAgICAgIC8vIE1pbmltdW0gZWFzZSBmYWN0b3IgKDEzMCUpXG4gICAgbWF4aW11bUludGVydmFsOiBudW1iZXI7ICAgIC8vIE1heGltdW0gaW50ZXJ2YWwgaW4gZGF5cyAoMzY1MjUgPSB+MTAwIHllYXJzKVxuICAgIGluaXRpYWxJbnRlcnZhbDogbnVtYmVyOyAgICAvLyBTdGFydGluZyBpbnRlcnZhbCBpbiBkYXlzICgxKVxuICAgIGxvYWRCYWxhbmNlOiBib29sZWFuOyAgICAgICAvLyBFbmFibGUgcmV2aWV3IGxvYWQgYmFsYW5jaW5nXG4gICAgbWF4RnV6emluZ0RheXM6IG51bWJlcjsgICAgIC8vIE1heGltdW0gZnV6emluZyBmb3IgbG9hZCBiYWxhbmNpbmcgKDMpXG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NSU19TRVRUSU5HUzogU1JTU2V0dGluZ3MgPSB7XG4gICAgYmFzZUVhc2U6IDI1MCxcbiAgICBlYXN5Qm9udXM6IDEuMyxcbiAgICBoYXJkUGVuYWx0eTogMC41LFxuICAgIG1pbmltdW1FYXNlOiAxMzAsXG4gICAgbWF4aW11bUludGVydmFsOiAzNjUyNSxcbiAgICBpbml0aWFsSW50ZXJ2YWw6IDEsXG4gICAgbG9hZEJhbGFuY2U6IHRydWUsXG4gICAgbWF4RnV6emluZ0RheXM6IDNcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NoZWR1bGVJbmZvIHtcbiAgICBkdWVEYXRlOiBzdHJpbmc7ICAgICAgICAgICAvLyBJU08gZGF0ZSBzdHJpbmdcbiAgICBpbnRlcnZhbDogbnVtYmVyOyAgICAgICAgICAvLyBEYXlzIHVudGlsIG5leHQgcmV2aWV3XG4gICAgZWFzZTogbnVtYmVyOyAgICAgICAgICAgICAgLy8gRWFzZSBmYWN0b3IgKDEzMC0zMDArKVxuICAgIHJldmlld0NvdW50OiBudW1iZXI7ICAgICAgIC8vIFRvdGFsIG51bWJlciBvZiByZXZpZXdzXG4gICAgbGFwc2VDb3VudDogbnVtYmVyOyAgICAgICAgLy8gTnVtYmVyIG9mIGhhcmQgcmVzcG9uc2VzXG4gICAgZGVsYXllZERheXM6IG51bWJlcjsgICAgICAgLy8gRGF5cyBkZWxheWVkIGJlZm9yZSB0aGlzIHJldmlld1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1Jlc3VsdCB7XG4gICAgaW50ZXJ2YWw6IG51bWJlcjtcbiAgICBlYXNlOiBudW1iZXI7XG4gICAgZHVlRGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobSB7XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogU1JTU2V0dGluZ3M7XG4gICAgcHJpdmF0ZSBkdWVEYXRlSGlzdG9ncmFtOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xuXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFNSU1NldHRpbmdzID0gREVGQVVMVF9TUlNfU0VUVElOR1MpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgbmV4dCByZXZpZXcgc2NoZWR1bGUgYmFzZWQgb24gdXNlciByZXNwb25zZVxuICAgICAqIEJhc2VkIG9uIFNNLTItT1NSIGFsZ29yaXRobSBmcm9tIG9ic2lkaWFuLXNwYWNlZC1yZXBldGl0aW9uXG4gICAgICovXG4gICAgc2NoZWR1bGUoXG4gICAgICAgIHJlc3BvbnNlOiBSZXZpZXdSZXNwb25zZSxcbiAgICAgICAgY3VycmVudFNjaGVkdWxlPzogU2NoZWR1bGVJbmZvXG4gICAgKTogUmV2aWV3UmVzdWx0IHtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaXRpYWxpemUgc2NoZWR1bGUgaW5mbyBmb3IgbmV3IGNhcmRzXG4gICAgICAgIGlmICghY3VycmVudFNjaGVkdWxlKSB7XG4gICAgICAgICAgICBjdXJyZW50U2NoZWR1bGUgPSB7XG4gICAgICAgICAgICAgICAgZHVlRGF0ZTogbm93LnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogdGhpcy5zZXR0aW5ncy5iYXNlRWFzZSxcbiAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogMCxcbiAgICAgICAgICAgICAgICBsYXBzZUNvdW50OiAwLFxuICAgICAgICAgICAgICAgIGRlbGF5ZWREYXlzOiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIGRheXMgZGVsYXllZCAoZm9yIGNhcmRzIHJldmlld2VkIGxhdGUpXG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBuZXcgRGF0ZShjdXJyZW50U2NoZWR1bGUuZHVlRGF0ZSk7XG4gICAgICAgIGNvbnN0IGRlbGF5ZWREYXlzID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIGR1ZURhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSkpO1xuXG4gICAgICAgIGxldCBuZXdJbnRlcnZhbCA9IGN1cnJlbnRTY2hlZHVsZS5pbnRlcnZhbDtcbiAgICAgICAgbGV0IG5ld0Vhc2UgPSBjdXJyZW50U2NoZWR1bGUuZWFzZTtcblxuICAgICAgICAvLyBBcHBseSBTTS0yLU9TUiBzY2hlZHVsaW5nIGFsZ29yaXRobVxuICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBjYXNlIFJldmlld1Jlc3BvbnNlLkVhc3k6XG4gICAgICAgICAgICAgICAgbmV3RWFzZSA9IE1hdGgubWluKDUwMCwgbmV3RWFzZSArIDIwKTsgLy8gQ2FwIGF0IDUwMCVcbiAgICAgICAgICAgICAgICBuZXdJbnRlcnZhbCA9IE1hdGgubWF4KDEsICgoY3VycmVudFNjaGVkdWxlLmludGVydmFsICsgZGVsYXllZERheXMpICogbmV3RWFzZSAqIHRoaXMuc2V0dGluZ3MuZWFzeUJvbnVzKSAvIDEwMCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgUmV2aWV3UmVzcG9uc2UuR29vZDpcbiAgICAgICAgICAgICAgICAvLyBObyBlYXNlIGNoYW5nZSBmb3IgZ29vZCByZXNwb25zZXNcbiAgICAgICAgICAgICAgICBuZXdJbnRlcnZhbCA9IE1hdGgubWF4KDEsICgoY3VycmVudFNjaGVkdWxlLmludGVydmFsICsgZGVsYXllZERheXMgLyAyKSAqIG5ld0Vhc2UpIC8gMTAwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBSZXZpZXdSZXNwb25zZS5IYXJkOlxuICAgICAgICAgICAgICAgIG5ld0Vhc2UgPSBNYXRoLm1heCh0aGlzLnNldHRpbmdzLm1pbmltdW1FYXNlLCBuZXdFYXNlIC0gMjApO1xuICAgICAgICAgICAgICAgIG5ld0ludGVydmFsID0gTWF0aC5tYXgoMSwgKGN1cnJlbnRTY2hlZHVsZS5pbnRlcnZhbCArIGRlbGF5ZWREYXlzIC8gNCkgKiB0aGlzLnNldHRpbmdzLmhhcmRQZW5hbHR5KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFwcGx5IGZpcnN0LXRpbWUgbGVhcm5pbmcgaW50ZXJ2YWxzXG4gICAgICAgIGlmIChjdXJyZW50U2NoZWR1bGUucmV2aWV3Q291bnQgPT09IDApIHtcbiAgICAgICAgICAgIG5ld0ludGVydmFsID0gdGhpcy5zZXR0aW5ncy5pbml0aWFsSW50ZXJ2YWw7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNjaGVkdWxlLnJldmlld0NvdW50ID09PSAxICYmIHJlc3BvbnNlICE9PSBSZXZpZXdSZXNwb25zZS5IYXJkKSB7XG4gICAgICAgICAgICBuZXdJbnRlcnZhbCA9IDY7IC8vIFN0YW5kYXJkIFNNLTIgc2Vjb25kIGludGVydmFsXG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYXAgbWF4aW11bSBpbnRlcnZhbFxuICAgICAgICBuZXdJbnRlcnZhbCA9IE1hdGgubWluKG5ld0ludGVydmFsLCB0aGlzLnNldHRpbmdzLm1heGltdW1JbnRlcnZhbCk7XG5cbiAgICAgICAgLy8gQXBwbHkgbG9hZCBiYWxhbmNpbmcgaWYgZW5hYmxlZFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5sb2FkQmFsYW5jZSkge1xuICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSB0aGlzLmFwcGx5TG9hZEJhbGFuY2luZyhuZXdJbnRlcnZhbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxjdWxhdGUgbmV3IGR1ZSBkYXRlXG4gICAgICAgIGNvbnN0IG5ld0R1ZURhdGUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgbmV3SW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcblxuICAgICAgICAvLyBVcGRhdGUgaGlzdG9ncmFtIGZvciBsb2FkIGJhbGFuY2luZ1xuICAgICAgICB0aGlzLnVwZGF0ZUR1ZURhdGVIaXN0b2dyYW0obmV3RHVlRGF0ZS50b0RhdGVTdHJpbmcoKSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGludGVydmFsOiBNYXRoLnJvdW5kKG5ld0ludGVydmFsKSxcbiAgICAgICAgICAgIGVhc2U6IE1hdGgucm91bmQobmV3RWFzZSksXG4gICAgICAgICAgICBkdWVEYXRlOiBuZXdEdWVEYXRlLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBseSBsb2FkIGJhbGFuY2luZyB0byBkaXN0cmlidXRlIHJldmlld3MgZXZlbmx5IGFjcm9zcyBkYXlzXG4gICAgICogQmFzZWQgb24gdGhlIGhpc3RvZ3JhbS1iYXNlZCBhcHByb2FjaCBmcm9tIG9ic2lkaWFuLXNwYWNlZC1yZXBldGl0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBhcHBseUxvYWRCYWxhbmNpbmcoaW50ZXJ2YWw6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5sb2FkQmFsYW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIGludGVydmFsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGlmZmVyZW50IGZ1enppbmcgc3RyYXRlZ2llcyBiYXNlZCBvbiBpbnRlcnZhbCBsZW5ndGhcbiAgICAgICAgbGV0IGZ1enppbmdSYW5nZTogbnVtYmVyO1xuICAgICAgICBcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDIxKSB7XG4gICAgICAgICAgICBmdXp6aW5nUmFuZ2UgPSAxOyAvLyAxIGRheSBmdXp6aW5nIGZvciBzaG9ydCBpbnRlcnZhbHNcbiAgICAgICAgfSBlbHNlIGlmIChpbnRlcnZhbCA8PSAxODApIHtcbiAgICAgICAgICAgIGZ1enppbmdSYW5nZSA9IE1hdGgubWF4KDEsIGludGVydmFsICogMC4wNSk7IC8vIDUlIGZ1enppbmcgZm9yIG1lZGl1bSBpbnRlcnZhbHNcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZ1enppbmdSYW5nZSA9IE1hdGgubWF4KDEsIGludGVydmFsICogMC4wMjUpOyAvLyAyLjUlIGZ1enppbmcgZm9yIGxvbmcgaW50ZXJ2YWxzXG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYXAgZnV6emluZyBhdCBtYXggc2V0dGluZ1xuICAgICAgICBmdXp6aW5nUmFuZ2UgPSBNYXRoLm1pbihmdXp6aW5nUmFuZ2UsIHRoaXMuc2V0dGluZ3MubWF4RnV6emluZ0RheXMpO1xuXG4gICAgICAgIC8vIEZpbmQgdGhlIGRhdGUgd2l0aCBtaW5pbXVtIHJldmlld3MgaW4gdGhlIGZ1enppbmcgcmFuZ2VcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IGJlc3RJbnRlcnZhbCA9IGludGVydmFsO1xuICAgICAgICBsZXQgbWluUmV2aWV3cyA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuXG4gICAgICAgIGZvciAobGV0IG9mZnNldCA9IC1mdXp6aW5nUmFuZ2U7IG9mZnNldCA8PSBmdXp6aW5nUmFuZ2U7IG9mZnNldCsrKSB7XG4gICAgICAgICAgICBjb25zdCB0ZXN0SW50ZXJ2YWwgPSBpbnRlcnZhbCArIG9mZnNldDtcbiAgICAgICAgICAgIGlmICh0ZXN0SW50ZXJ2YWwgPCAxKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgdGVzdERhdGUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgdGVzdEludGVydmFsICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gdGVzdERhdGUudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCByZXZpZXdDb3VudCA9IHRoaXMuZHVlRGF0ZUhpc3RvZ3JhbS5nZXQoZGF0ZVN0cmluZykgfHwgMDtcblxuICAgICAgICAgICAgaWYgKHJldmlld0NvdW50IDwgbWluUmV2aWV3cykge1xuICAgICAgICAgICAgICAgIG1pblJldmlld3MgPSByZXZpZXdDb3VudDtcbiAgICAgICAgICAgICAgICBiZXN0SW50ZXJ2YWwgPSB0ZXN0SW50ZXJ2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYmVzdEludGVydmFsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgZHVlIGRhdGUgaGlzdG9ncmFtIGZvciBsb2FkIGJhbGFuY2luZ1xuICAgICAqL1xuICAgIHByaXZhdGUgdXBkYXRlRHVlRGF0ZUhpc3RvZ3JhbShkYXRlU3RyaW5nOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuZHVlRGF0ZUhpc3RvZ3JhbS5nZXQoZGF0ZVN0cmluZykgfHwgMDtcbiAgICAgICAgdGhpcy5kdWVEYXRlSGlzdG9ncmFtLnNldChkYXRlU3RyaW5nLCBjdXJyZW50ICsgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNhcmRzIHRoYXQgYXJlIGR1ZSBmb3IgcmV2aWV3XG4gICAgICovXG4gICAgc3RhdGljIGdldENhcmRzRm9yUmV2aWV3KGNhcmRzOiBBcnJheTx7IHNjaGVkdWxlSW5mbz86IFNjaGVkdWxlSW5mbyB9Pik6IEFycmF5PHsgc2NoZWR1bGVJbmZvPzogU2NoZWR1bGVJbmZvIH0+IHtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjYXJkcy5maWx0ZXIoY2FyZCA9PiB7XG4gICAgICAgICAgICBpZiAoIWNhcmQuc2NoZWR1bGVJbmZvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIE5ldyBjYXJkcyBhcmUgYWx3YXlzIGR1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBkdWVEYXRlID0gbmV3IERhdGUoY2FyZC5zY2hlZHVsZUluZm8uZHVlRGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gZHVlRGF0ZSA8PSBub3c7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGNhcmRzIGR1ZSBpbiB0aGUgbmV4dCBOIGRheXNcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0Q2FyZHNEdWVJbkRheXMoY2FyZHM6IEFycmF5PHsgc2NoZWR1bGVJbmZvPzogU2NoZWR1bGVJbmZvIH0+LCBkYXlzOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBmdXR1cmVEYXRlID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjYXJkcy5maWx0ZXIoY2FyZCA9PiB7XG4gICAgICAgICAgICBpZiAoIWNhcmQuc2NoZWR1bGVJbmZvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIE5ldyBjYXJkcyBjb3VudCBhcyBkdWUgdG9kYXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IG5ldyBEYXRlKGNhcmQuc2NoZWR1bGVJbmZvLmR1ZURhdGUpO1xuICAgICAgICAgICAgcmV0dXJuIGR1ZURhdGUgPD0gZnV0dXJlRGF0ZTtcbiAgICAgICAgfSkubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsZWFybmluZyBzdGF0aXN0aWNzIGZvciBhIHNldCBvZiBjYXJkc1xuICAgICAqL1xuICAgIHN0YXRpYyBnZXRTdGF0aXN0aWNzKGNhcmRzOiBBcnJheTx7IHNjaGVkdWxlSW5mbz86IFNjaGVkdWxlSW5mbyB9Pik6IHtcbiAgICAgICAgdG90YWw6IG51bWJlcjtcbiAgICAgICAgbmV3OiBudW1iZXI7XG4gICAgICAgIGxlYXJuaW5nOiBudW1iZXI7XG4gICAgICAgIG1hdHVyZTogbnVtYmVyO1xuICAgICAgICBhdmVyYWdlRWFzZTogbnVtYmVyO1xuICAgICAgICBhdmVyYWdlSW50ZXJ2YWw6IG51bWJlcjtcbiAgICB9IHtcbiAgICAgICAgbGV0IG5ld0NhcmRzID0gMDtcbiAgICAgICAgbGV0IGxlYXJuaW5nQ2FyZHMgPSAwO1xuICAgICAgICBsZXQgbWF0dXJlQ2FyZHMgPSAwO1xuICAgICAgICBsZXQgdG90YWxFYXNlID0gMDtcbiAgICAgICAgbGV0IHRvdGFsSW50ZXJ2YWwgPSAwO1xuICAgICAgICBsZXQgY2FyZHNXaXRoU2NoZWR1bGUgPSAwO1xuXG4gICAgICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICAgICAgICBpZiAoIWNhcmQuc2NoZWR1bGVJbmZvKSB7XG4gICAgICAgICAgICAgICAgbmV3Q2FyZHMrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FyZHNXaXRoU2NoZWR1bGUrKztcbiAgICAgICAgICAgICAgICB0b3RhbEVhc2UgKz0gY2FyZC5zY2hlZHVsZUluZm8uZWFzZTtcbiAgICAgICAgICAgICAgICB0b3RhbEludGVydmFsICs9IGNhcmQuc2NoZWR1bGVJbmZvLmludGVydmFsO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNhcmQuc2NoZWR1bGVJbmZvLmludGVydmFsIDwgMjEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdDYXJkcysrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdHVyZUNhcmRzKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG90YWw6IGNhcmRzLmxlbmd0aCxcbiAgICAgICAgICAgIG5ldzogbmV3Q2FyZHMsXG4gICAgICAgICAgICBsZWFybmluZzogbGVhcm5pbmdDYXJkcyxcbiAgICAgICAgICAgIG1hdHVyZTogbWF0dXJlQ2FyZHMsXG4gICAgICAgICAgICBhdmVyYWdlRWFzZTogY2FyZHNXaXRoU2NoZWR1bGUgPiAwID8gTWF0aC5yb3VuZCh0b3RhbEVhc2UgLyBjYXJkc1dpdGhTY2hlZHVsZSkgOiAwLFxuICAgICAgICAgICAgYXZlcmFnZUludGVydmFsOiBjYXJkc1dpdGhTY2hlZHVsZSA+IDAgPyBNYXRoLnJvdW5kKHRvdGFsSW50ZXJ2YWwgLyBjYXJkc1dpdGhTY2hlZHVsZSkgOiAwXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFsZ29yaXRobSBzZXR0aW5nc1xuICAgICAqL1xuICAgIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPFNSU1NldHRpbmdzPik6IHZvaWQge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0geyAuLi50aGlzLnNldHRpbmdzLCAuLi5uZXdTZXR0aW5ncyB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjdXJyZW50IHNldHRpbmdzXG4gICAgICovXG4gICAgZ2V0U2V0dGluZ3MoKTogU1JTU2V0dGluZ3Mge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLnNldHRpbmdzIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIGR1ZSBkYXRlIGhpc3RvZ3JhbSAodXNlZnVsIGZvciB0ZXN0aW5nIG9yIHJlc2V0KVxuICAgICAqL1xuICAgIGNsZWFySGlzdG9ncmFtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmR1ZURhdGVIaXN0b2dyYW0uY2xlYXIoKTtcbiAgICB9XG59IiwgImltcG9ydCB7IFxuICAgIFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0sIFxuICAgIFJldmlld1Jlc3BvbnNlLCBcbiAgICBTUlNTZXR0aW5ncywgXG4gICAgREVGQVVMVF9TUlNfU0VUVElOR1MsXG4gICAgU2NoZWR1bGVJbmZvIFxufSBmcm9tICcuLi9hbGdvcml0aG1zL1NwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0nO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV2aWV3U2Vzc2lvbiB7XG4gICAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gICAgc3RhcnRUaW1lOiBzdHJpbmc7XG4gICAgY2FyZHNSZXZpZXdlZDogbnVtYmVyO1xuICAgIHRvdGFsQ2FyZHM6IG51bWJlcjtcbiAgICBjb21wbGV0ZWRDYXJkczogVm9jYWJ1bGFyeUNhcmRbXTtcbiAgICBjdXJyZW50Q2FyZD86IFZvY2FidWxhcnlDYXJkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0dWR5U3RhdGlzdGljcyB7XG4gICAgdG9kYXk6IHtcbiAgICAgICAgbmV3Q2FyZHM6IG51bWJlcjtcbiAgICAgICAgcmV2aWV3ZWRDYXJkczogbnVtYmVyO1xuICAgICAgICB0b3RhbFRpbWU6IG51bWJlcjsgLy8gbWludXRlc1xuICAgIH07XG4gICAgc3RyZWFrOiB7XG4gICAgICAgIGN1cnJlbnREYXlzOiBudW1iZXI7XG4gICAgICAgIGxvbmdlc3REYXlzOiBudW1iZXI7XG4gICAgICAgIGxhc3RTdHVkeURhdGU6IHN0cmluZyB8IG51bGw7XG4gICAgfTtcbiAgICBvdmVyYWxsOiB7XG4gICAgICAgIHRvdGFsQ2FyZHM6IG51bWJlcjtcbiAgICAgICAgbmV3Q2FyZHM6IG51bWJlcjtcbiAgICAgICAgbGVhcm5pbmdDYXJkczogbnVtYmVyO1xuICAgICAgICBtYXR1cmVDYXJkczogbnVtYmVyO1xuICAgICAgICBhdmVyYWdlRWFzZTogbnVtYmVyO1xuICAgICAgICBhdmVyYWdlSW50ZXJ2YWw6IG51bWJlcjtcbiAgICB9O1xufVxuXG5leHBvcnQgY2xhc3MgU3BhY2VkUmVwZXRpdGlvblNlcnZpY2Uge1xuICAgIHByaXZhdGUgYWxnb3JpdGhtOiBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtO1xuICAgIHByaXZhdGUgY3VycmVudFNlc3Npb246IFJldmlld1Nlc3Npb24gfCBudWxsID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBQYXJ0aWFsPFNSU1NldHRpbmdzPiA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHNyc1NldHRpbmdzID0geyAuLi5ERUZBVUxUX1NSU19TRVRUSU5HUywgLi4uc2V0dGluZ3MgfTtcbiAgICAgICAgdGhpcy5hbGdvcml0aG0gPSBuZXcgU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobShzcnNTZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNhcmRzIHRoYXQgYXJlIGR1ZSBmb3IgcmV2aWV3IHRvZGF5XG4gICAgICovXG4gICAgZ2V0Q2FyZHNGb3JSZXZpZXcoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcbiAgICAgICAgcmV0dXJuIFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0uZ2V0Q2FyZHNGb3JSZXZpZXcoYWxsQ2FyZHMpIGFzIFZvY2FidWxhcnlDYXJkW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IG5ldyBjYXJkcyAobmV2ZXIgcmV2aWV3ZWQpXG4gICAgICovXG4gICAgZ2V0TmV3Q2FyZHMoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcbiAgICAgICAgcmV0dXJuIGFsbENhcmRzLmZpbHRlcihjYXJkID0+ICFjYXJkLnNjaGVkdWxlSW5mbyB8fCBjYXJkLnJldmlld0NvdW50ID09PSAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGVhcm5pbmcgY2FyZHMgKHJldmlld2VkIGJ1dCBub3QgbWF0dXJlKVxuICAgICAqL1xuICAgIGdldExlYXJuaW5nQ2FyZHMoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcbiAgICAgICAgcmV0dXJuIGFsbENhcmRzLmZpbHRlcihjYXJkID0+IFxuICAgICAgICAgICAgY2FyZC5zY2hlZHVsZUluZm8gJiYgXG4gICAgICAgICAgICBjYXJkLnJldmlld0NvdW50ID4gMCAmJiBcbiAgICAgICAgICAgIGNhcmQuc2NoZWR1bGVJbmZvLmludGVydmFsIDwgMjFcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbWF0dXJlIGNhcmRzIChpbnRlcnZhbCA+PSAyMSBkYXlzKVxuICAgICAqL1xuICAgIGdldE1hdHVyZUNhcmRzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogVm9jYWJ1bGFyeUNhcmRbXSB7XG4gICAgICAgIHJldHVybiBhbGxDYXJkcy5maWx0ZXIoY2FyZCA9PiBcbiAgICAgICAgICAgIGNhcmQuc2NoZWR1bGVJbmZvICYmIFxuICAgICAgICAgICAgY2FyZC5zY2hlZHVsZUluZm8uaW50ZXJ2YWwgPj0gMjFcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGFydCBhIG5ldyByZXZpZXcgc2Vzc2lvblxuICAgICAqL1xuICAgIHN0YXJ0UmV2aWV3U2Vzc2lvbihkdWVDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSwgbWF4Q2FyZHM/OiBudW1iZXIpOiBSZXZpZXdTZXNzaW9uIHtcbiAgICAgICAgY29uc3QgY2FyZHNUb1JldmlldyA9IG1heENhcmRzID8gZHVlQ2FyZHMuc2xpY2UoMCwgbWF4Q2FyZHMpIDogZHVlQ2FyZHM7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uID0ge1xuICAgICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLmdlbmVyYXRlU2Vzc2lvbklkKCksXG4gICAgICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGNhcmRzUmV2aWV3ZWQ6IDAsXG4gICAgICAgICAgICB0b3RhbENhcmRzOiBjYXJkc1RvUmV2aWV3Lmxlbmd0aCxcbiAgICAgICAgICAgIGNvbXBsZXRlZENhcmRzOiBbXSxcbiAgICAgICAgICAgIGN1cnJlbnRDYXJkOiBjYXJkc1RvUmV2aWV3WzBdXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFNlc3Npb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2VzcyBhIHJldmlldyByZXNwb25zZSBhbmQgZ2V0IHRoZSBuZXh0IGNhcmRcbiAgICAgKi9cbiAgICBwcm9jZXNzUmV2aWV3KFxuICAgICAgICBjYXJkOiBWb2NhYnVsYXJ5Q2FyZCwgXG4gICAgICAgIHJlc3BvbnNlOiBSZXZpZXdSZXNwb25zZVxuICAgICk6IHsgXG4gICAgICAgIHVwZGF0ZWRDYXJkOiBWb2NhYnVsYXJ5Q2FyZDsgXG4gICAgICAgIG5leHRDYXJkPzogVm9jYWJ1bGFyeUNhcmQ7IFxuICAgICAgICBzZXNzaW9uQ29tcGxldGU6IGJvb2xlYW4gXG4gICAgfSB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50U2Vzc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhY3RpdmUgcmV2aWV3IHNlc3Npb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFwcGx5IHNwYWNlZCByZXBldGl0aW9uIGFsZ29yaXRobVxuICAgICAgICBjb25zdCByZXZpZXdSZXN1bHQgPSB0aGlzLmFsZ29yaXRobS5zY2hlZHVsZShyZXNwb25zZSwgY2FyZC5zY2hlZHVsZUluZm8pO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGNhcmQgd2l0aCBuZXcgc2NoZWR1bGVcbiAgICAgICAgY29uc3QgdXBkYXRlZENhcmQ6IFZvY2FidWxhcnlDYXJkID0ge1xuICAgICAgICAgICAgLi4uY2FyZCxcbiAgICAgICAgICAgIHJldmlld0NvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LnJldmlld0NvdW50IHx8IDApICsgMSxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHJlc3BvbnNlLFxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBzY2hlZHVsZUluZm86IHtcbiAgICAgICAgICAgICAgICBkdWVEYXRlOiByZXZpZXdSZXN1bHQuZHVlRGF0ZSxcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogcmV2aWV3UmVzdWx0LmludGVydmFsLFxuICAgICAgICAgICAgICAgIGVhc2U6IHJldmlld1Jlc3VsdC5lYXNlLFxuICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LnJldmlld0NvdW50IHx8IDApICsgMSxcbiAgICAgICAgICAgICAgICBsYXBzZUNvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LmxhcHNlQ291bnQgfHwgMCkgKyAocmVzcG9uc2UgPT09IFJldmlld1Jlc3BvbnNlLkhhcmQgPyAxIDogMCksXG4gICAgICAgICAgICAgICAgZGVsYXllZERheXM6IGNhcmQuc2NoZWR1bGVJbmZvPy5kZWxheWVkRGF5cyB8fCAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVXBkYXRlIHNlc3Npb25cbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbi5jYXJkc1Jldmlld2VkKys7XG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24uY29tcGxldGVkQ2FyZHMucHVzaCh1cGRhdGVkQ2FyZCk7XG5cbiAgICAgICAgLy8gR2V0IG5leHQgY2FyZFxuICAgICAgICBjb25zdCBkdWVDYXJkcyA9IHRoaXMuZ2V0Q2FyZHNGb3JSZXZpZXcoW2NhcmRdKTsgLy8gVGhpcyB3b3VsZCBiZSByZXBsYWNlZCB3aXRoIHJlbWFpbmluZyBjYXJkc1xuICAgICAgICBjb25zdCBuZXh0Q2FyZCA9IHRoaXMuY3VycmVudFNlc3Npb24uY2FyZHNSZXZpZXdlZCA8IHRoaXMuY3VycmVudFNlc3Npb24udG90YWxDYXJkcyBcbiAgICAgICAgICAgID8gZHVlQ2FyZHNbdGhpcy5jdXJyZW50U2Vzc2lvbi5jYXJkc1Jldmlld2VkXSBcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24uY3VycmVudENhcmQgPSBuZXh0Q2FyZDtcblxuICAgICAgICBjb25zdCBzZXNzaW9uQ29tcGxldGUgPSAhbmV4dENhcmQgfHwgdGhpcy5jdXJyZW50U2Vzc2lvbi5jYXJkc1Jldmlld2VkID49IHRoaXMuY3VycmVudFNlc3Npb24udG90YWxDYXJkcztcblxuICAgICAgICBpZiAoc2Vzc2lvbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICB0aGlzLmVuZFJldmlld1Nlc3Npb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cGRhdGVkQ2FyZCxcbiAgICAgICAgICAgIG5leHRDYXJkLFxuICAgICAgICAgICAgc2Vzc2lvbkNvbXBsZXRlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5kIHRoZSBjdXJyZW50IHJldmlldyBzZXNzaW9uXG4gICAgICovXG4gICAgZW5kUmV2aWV3U2Vzc2lvbigpOiBSZXZpZXdTZXNzaW9uIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLmN1cnJlbnRTZXNzaW9uO1xuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgc2Vzc2lvbiBpbmZvXG4gICAgICovXG4gICAgZ2V0Q3VycmVudFNlc3Npb24oKTogUmV2aWV3U2Vzc2lvbiB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50U2Vzc2lvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgc3R1ZHkgc3RhdGlzdGljc1xuICAgICAqL1xuICAgIGNhbGN1bGF0ZVN0YXRpc3RpY3MoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10sIHN0dWR5SGlzdG9yeT86IGFueVtdKTogU3R1ZHlTdGF0aXN0aWNzIHtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBub3cudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBPdmVyYWxsIHN0YXRpc3RpY3MgdXNpbmcgdGhlIGFsZ29yaXRobSdzIHN0YXRpYyBtZXRob2RcbiAgICAgICAgY29uc3Qgb3ZlcmFsbFN0YXRzID0gU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobS5nZXRTdGF0aXN0aWNzKGFsbENhcmRzKTtcblxuICAgICAgICAvLyBUb2RheSdzIHN0YXRpc3RpY3MgKHdvdWxkIG5lZWQgdG8gYmUgdHJhY2tlZCBzZXBhcmF0ZWx5KVxuICAgICAgICBjb25zdCB0b2RheVN0YXRzID0ge1xuICAgICAgICAgICAgbmV3Q2FyZHM6IDAsIC8vIFdvdWxkIHRyYWNrIGZyb20gc2Vzc2lvbiBkYXRhXG4gICAgICAgICAgICByZXZpZXdlZENhcmRzOiAwLCAvLyBXb3VsZCB0cmFjayBmcm9tIHNlc3Npb24gZGF0YVxuICAgICAgICAgICAgdG90YWxUaW1lOiAwIC8vIFdvdWxkIHRyYWNrIGZyb20gc2Vzc2lvbiB0aW1pbmdcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTdHJlYWsgY2FsY3VsYXRpb24gKHdvdWxkIG5lZWQgcGVyc2lzdGVudCBzdG9yYWdlKVxuICAgICAgICBjb25zdCBzdHJlYWtTdGF0cyA9IHtcbiAgICAgICAgICAgIGN1cnJlbnREYXlzOiAwLCAvLyBXb3VsZCBjYWxjdWxhdGUgZnJvbSBzdHVkeSBoaXN0b3J5XG4gICAgICAgICAgICBsb25nZXN0RGF5czogMCwgLy8gV291bGQgY2FsY3VsYXRlIGZyb20gc3R1ZHkgaGlzdG9yeVxuICAgICAgICAgICAgbGFzdFN0dWR5RGF0ZTogbnVsbCBhcyBzdHJpbmcgfCBudWxsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvZGF5OiB0b2RheVN0YXRzLFxuICAgICAgICAgICAgc3RyZWFrOiBzdHJlYWtTdGF0cyxcbiAgICAgICAgICAgIG92ZXJhbGw6IG92ZXJhbGxTdGF0c1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjYXJkcyBkdWUgaW4gdGhlIG5leHQgTiBkYXlzXG4gICAgICovXG4gICAgZ2V0Q2FyZHNEdWVJbkRheXMoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10sIGRheXM6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLmdldENhcmRzRHVlSW5EYXlzKGFsbENhcmRzLCBkYXlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCBhIGNhcmQncyBzY2hlZHVsZSAoZm9yIHRlc3Rpbmcgb3IgbWFudWFsIGludGVydmVudGlvbilcbiAgICAgKi9cbiAgICByZXNldENhcmRTY2hlZHVsZShjYXJkOiBWb2NhYnVsYXJ5Q2FyZCk6IFZvY2FidWxhcnlDYXJkIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNhcmQsXG4gICAgICAgICAgICByZXZpZXdDb3VudDogMCxcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbnVsbCxcbiAgICAgICAgICAgIHNjaGVkdWxlSW5mbzogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFudWFsbHkgc2V0IGNhcmQgZGlmZmljdWx0eSAoZm9yIGJ1bGsgb3BlcmF0aW9ucylcbiAgICAgKi9cbiAgICBzZXRDYXJkRGlmZmljdWx0eShjYXJkOiBWb2NhYnVsYXJ5Q2FyZCwgZGlmZmljdWx0eTogUmV2aWV3UmVzcG9uc2UpOiBWb2NhYnVsYXJ5Q2FyZCB7XG4gICAgICAgIGNvbnN0IHJldmlld1Jlc3VsdCA9IHRoaXMuYWxnb3JpdGhtLnNjaGVkdWxlKGRpZmZpY3VsdHksIGNhcmQuc2NoZWR1bGVJbmZvKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jYXJkLFxuICAgICAgICAgICAgZGlmZmljdWx0eSxcbiAgICAgICAgICAgIHNjaGVkdWxlSW5mbzoge1xuICAgICAgICAgICAgICAgIGR1ZURhdGU6IHJldmlld1Jlc3VsdC5kdWVEYXRlLFxuICAgICAgICAgICAgICAgIGludGVydmFsOiByZXZpZXdSZXN1bHQuaW50ZXJ2YWwsXG4gICAgICAgICAgICAgICAgZWFzZTogcmV2aWV3UmVzdWx0LmVhc2UsXG4gICAgICAgICAgICAgICAgcmV2aWV3Q291bnQ6IChjYXJkLnNjaGVkdWxlSW5mbz8ucmV2aWV3Q291bnQgfHwgMCkgKyAxLFxuICAgICAgICAgICAgICAgIGxhcHNlQ291bnQ6IChjYXJkLnNjaGVkdWxlSW5mbz8ubGFwc2VDb3VudCB8fCAwKSArIChkaWZmaWN1bHR5ID09PSBSZXZpZXdSZXNwb25zZS5IYXJkID8gMSA6IDApLFxuICAgICAgICAgICAgICAgIGRlbGF5ZWREYXlzOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFsZ29yaXRobSBzZXR0aW5nc1xuICAgICAqL1xuICAgIHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBQYXJ0aWFsPFNSU1NldHRpbmdzPik6IHZvaWQge1xuICAgICAgICB0aGlzLmFsZ29yaXRobS51cGRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgYWxnb3JpdGhtIHNldHRpbmdzXG4gICAgICovXG4gICAgZ2V0U2V0dGluZ3MoKTogU1JTU2V0dGluZ3Mge1xuICAgICAgICByZXR1cm4gdGhpcy5hbGdvcml0aG0uZ2V0U2V0dGluZ3MoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBhIHVuaXF1ZSBzZXNzaW9uIElEXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVNlc3Npb25JZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYHNlc3Npb25fJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCByZWNvbW1lbmRlZCBkYWlseSBzdHVkeSBsb2FkXG4gICAgICovXG4gICAgZ2V0UmVjb21tZW5kZWREYWlseUNhcmRzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKToge1xuICAgICAgICBuZXdDYXJkczogbnVtYmVyO1xuICAgICAgICByZXZpZXdDYXJkczogbnVtYmVyO1xuICAgICAgICB0b3RhbDogbnVtYmVyO1xuICAgIH0ge1xuICAgICAgICBjb25zdCBkdWVDYXJkcyA9IHRoaXMuZ2V0Q2FyZHNGb3JSZXZpZXcoYWxsQ2FyZHMpO1xuICAgICAgICBjb25zdCBuZXdDYXJkcyA9IHRoaXMuZ2V0TmV3Q2FyZHMoYWxsQ2FyZHMpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVjb21tZW5kZWQgbGltaXRzIChjb25maWd1cmFibGUpXG4gICAgICAgIGNvbnN0IG1heE5ld0NhcmRzUGVyRGF5ID0gMjA7XG4gICAgICAgIGNvbnN0IG1heFJldmlld0NhcmRzUGVyRGF5ID0gMTAwO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWROZXcgPSBNYXRoLm1pbihuZXdDYXJkcy5sZW5ndGgsIG1heE5ld0NhcmRzUGVyRGF5KTtcbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWRSZXZpZXcgPSBNYXRoLm1pbihkdWVDYXJkcy5sZW5ndGggLSByZWNvbW1lbmRlZE5ldywgbWF4UmV2aWV3Q2FyZHNQZXJEYXkpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5ld0NhcmRzOiByZWNvbW1lbmRlZE5ldyxcbiAgICAgICAgICAgIHJldmlld0NhcmRzOiByZWNvbW1lbmRlZFJldmlldyxcbiAgICAgICAgICAgIHRvdGFsOiByZWNvbW1lbmRlZE5ldyArIHJlY29tbWVuZGVkUmV2aWV3XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3J0IGNhcmRzIGZvciBkYXRhIGFuYWx5c2lzIG9yIGJhY2t1cFxuICAgICAqL1xuICAgIGV4cG9ydFNjaGVkdWxlRGF0YShhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IGFueVtdIHtcbiAgICAgICAgcmV0dXJuIGFsbENhcmRzLm1hcChjYXJkID0+ICh7XG4gICAgICAgICAgICB3b3JkOiBjYXJkLndvcmQsXG4gICAgICAgICAgICByZXZpZXdDb3VudDogY2FyZC5yZXZpZXdDb3VudCxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IGNhcmQuZGlmZmljdWx0eSxcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogY2FyZC5sYXN0UmV2aWV3ZWQsXG4gICAgICAgICAgICBzY2hlZHVsZUluZm86IGNhcmQuc2NoZWR1bGVJbmZvLFxuICAgICAgICAgICAgYWRkZWREYXRlOiBjYXJkLmFkZGVkRGF0ZVxuICAgICAgICB9KSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQsIEJvb2sgfSBmcm9tICcuLi8uLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XHJcbmltcG9ydCB7IFdvcmRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBMTE1TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5TW9kYWwgfSBmcm9tICcuLi8uLi92b2NhYnVsYXJ5LWxlYXJuaW5nL3VpL1ZvY2FidWxhcnlNb2RhbCc7XHJcbmltcG9ydCB7IEFkZEJvb2tNb2RhbCB9IGZyb20gJy4vQWRkQm9va01vZGFsJztcclxuXHJcbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5TWFuYWdlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIGRhdGFiYXNlTWFuYWdlcjogVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcjtcclxuICAgIHdvcmRTZXJ2aWNlOiBXb3JkU2VydmljZTtcclxuICAgIGxsbVNlcnZpY2U6IExMTVNlcnZpY2U7XHJcbiAgICBjdXJyZW50VmlldzogJ2xpc3QnIHwgJ3N0YXRpc3RpY3MnIHwgJ2FkZCcgPSAnbGlzdCc7XHJcbiAgICBzZWxlY3RlZFdvcmRzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcclxuICAgIHNlbGVjdGVkQm9va0lkOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZU1hbmFnZXIgPSBwbHVnaW4uZGF0YWJhc2VNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMud29yZFNlcnZpY2UgPSBuZXcgV29yZFNlcnZpY2UoKTtcclxuICAgICAgICB0aGlzLmxsbVNlcnZpY2UgPSBwbHVnaW4ubGxtU2VydmljZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0Q3VycmVudEJvb2soKT8uaWQgfHwgJ2RlZmF1bHQnO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFzVmFsaWRBcGlLZXkoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Qcm92aWRlcjtcclxuICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlBcGlLZXk7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXk7XHJcbiAgICAgICAgICAgIGNhc2UgJ2dvb2dsZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVBcGlLZXk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbWFuYWdlci1tb2RhbCcpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5jbGFzc0xpc3QuYWRkKCd3aWRlLW1hbmFnZXItbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1Q0Q1Q1x1QzJFMCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEN1cnJlbnRCb29rKCk/LmlkIHx8ICdkZWZhdWx0JztcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVCb29rU2VsZWN0b3JIZWFkZXIoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZU5hdmlnYXRpb24oKTtcclxuICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG5cclxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYm9va0NyZWF0ZWQnLCB0aGlzLmhhbmRsZUJvb2tDcmVhdGVkLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQm9va0NyZWF0ZWQoZXZlbnQ6IEN1c3RvbUV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbmV3Qm9vayA9IGV2ZW50LmRldGFpbDtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gbmV3Qm9vay5pZDtcclxuICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hCb29rU2VsZWN0b3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUJvb2tTZWxlY3RvckhlYWRlcigpIHtcclxuICAgICAgICBjb25zdCBoZWFkZXJFbCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21hbmFnZXItaGVhZGVyJyB9KTtcclxuICAgICAgICBoZWFkZXJFbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIGhlYWRlckVsLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcclxuICAgICAgICBoZWFkZXJFbC5zdHlsZS5nYXAgPSAnMThweCc7XHJcbiAgICAgICAgaGVhZGVyRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJzE4cHgnO1xyXG5cclxuICAgICAgICBjb25zdCBib29rcyA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEFsbEJvb2tzKCk7XHJcbiAgICAgICAgY29uc3QgYm9va1NlbGVjdCA9IGhlYWRlckVsLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2Jvb2stc2VsZWN0LWRyb3Bkb3duJyB9KTtcclxuICAgICAgICBib29rU2VsZWN0LnN0eWxlLmhlaWdodCA9ICczOHB4JztcclxuICAgICAgICBib29rU2VsZWN0LnN0eWxlLmZvbnRTaXplID0gJzE2cHgnO1xyXG4gICAgICAgIGJvb2tzLmZvckVhY2goYm9vayA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBib29rLmlkO1xyXG4gICAgICAgICAgICBvcHRpb24udGV4dCA9IGJvb2submFtZTtcclxuICAgICAgICAgICAgaWYgKGJvb2suaWQgPT09IHRoaXMuc2VsZWN0ZWRCb29rSWQpIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGJvb2tTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBib29rU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSAoZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5zZXRDdXJyZW50Qm9vayh0aGlzLnNlbGVjdGVkQm9va0lkKTtcclxuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkQm9va0J0biA9IGhlYWRlckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUMwQzggXHVCMkU4XHVDNUI0XHVDN0E1IFx1Q0Q5NFx1QUMwMCcsIGNsczogJ2Jvb2stbWFuYWdlLWJ1dHRvbicgfSk7XHJcbiAgICAgICAgYWRkQm9va0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYWRkQm9va01vZGFsID0gbmV3IEFkZEJvb2tNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pO1xyXG4gICAgICAgICAgICBhZGRCb29rTW9kYWwub25DbG9zZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUMwRERcdUMxMzFcdUI0MThcdUJBNzQgXHVCNERDXHVCODZEXHVCMkU0XHVDNkI0XHVBQ0ZDIFx1QzEyMFx1RDBERFx1Qzc0NCBcdUMwQzhcdUI4NUNcdUFDRTBcdUNFNjhcclxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEJvb2tTZWxlY3RvcigpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhZGRCb29rTW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBkZWxCb29rQnRuID0gaGVhZGVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1RDYwNFx1QzdBQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEFEXHVDODFDJywgY2xzOiAnYm9vay1kZWxldGUtYnV0dG9uJyB9KTtcclxuICAgICAgICBjb25zdCBpc0RlZmF1bHQgPSB0aGlzLnNlbGVjdGVkQm9va0lkID09PSAnZGVmYXVsdCc7XHJcbiAgICAgICAgaWYgKGlzRGVmYXVsdCkge1xyXG4gICAgICAgICAgICBkZWxCb29rQnRuLnNldEF0dHIoJ2Rpc2FibGVkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgZGVsQm9va0J0bi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsQm9va0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzRGVmYXVsdCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDODE1XHVCQ0Y0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEJvb2sodGhpcy5zZWxlY3RlZEJvb2tJZCk7XHJcbiAgICAgICAgICAgIGlmICghY3VycmVudEJvb2spIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM4MTVcdUJDRjRcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc1OCBcdUIyRThcdUM1QjQgXHVDMjE4IFx1RDY1NVx1Qzc3OFxyXG4gICAgICAgICAgICBjb25zdCB3b3Jkc0luQm9vayA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmRzQnlCb29rKHRoaXMuc2VsZWN0ZWRCb29rSWQpO1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkQ291bnQgPSB3b3Jkc0luQm9vay5sZW5ndGg7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUMwQzFcdUMxMzhcdUQ1NUMgXHVENjU1XHVDNzc4IFx1QkFBOFx1QjJFQyBcdUQ0NUNcdUMyRENcclxuICAgICAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAgICAgJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMwQURcdUM4MUMgXHVENjU1XHVDNzc4JyxcclxuICAgICAgICAgICAgICAgIGBcdUM4MTVcdUI5RDBcdUI4NUMgXCIke2N1cnJlbnRCb29rLm5hbWV9XCIgXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQ0IFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz9cXG5cXG5gICtcclxuICAgICAgICAgICAgICAgIGBcdTIwMjIgXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NDogJHtjdXJyZW50Qm9vay5uYW1lfVxcbmAgK1xyXG4gICAgICAgICAgICAgICAgYFx1MjAyMiBcdUQzRUNcdUQ1NjhcdUI0MUMgXHVCMkU4XHVDNUI0IFx1QzIxODogJHt3b3JkQ291bnR9XHVBQzFDXFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXHUyMDIyIFx1QzBERFx1QzEzMVx1Qzc3QzogJHtuZXcgRGF0ZShjdXJyZW50Qm9vay5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygna28tS1InKX1cXG5cXG5gICtcclxuICAgICAgICAgICAgICAgIGBcdTI2QTBcdUZFMEYgXHVDNzc0IFx1Qzc5MVx1QzVDNVx1Qzc0MCBcdUI0MThcdUIzQ0NcdUI5QjQgXHVDMjE4IFx1QzVDNlx1QzczQ1x1QkE3MCwgXHVCMkU4XHVDNUI0XHVDN0E1XHVBQ0ZDIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNjAxXHVBRDZDXHVDODAxXHVDNzNDXHVCODVDIFx1QzBBRFx1QzgxQ1x1QjQyOVx1QjJDOFx1QjJFNC5gLFxyXG4gICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmRlbGV0ZUJvb2sodGhpcy5zZWxlY3RlZEJvb2tJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSAnZGVmYXVsdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNldEN1cnJlbnRCb29rKCdkZWZhdWx0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHtjdXJyZW50Qm9vay5uYW1lfVwiIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEFEXHVDODFDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBBRFx1QzgxQyBcdUMyRTRcdUQzMjg6ICcgKyBlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZU5hdmlnYXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgbmF2RWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtYW5hZ2VyLW5hdmlnYXRpb24nIH0pO1xyXG4gICAgICAgIGNvbnN0IGxpc3RCdG4gPSBuYXZFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1QkFBOVx1Qjg1RCcsIGNsczogJ25hdi1idXR0b24nIH0pO1xyXG4gICAgICAgIGxpc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXcgPSAnbGlzdCc7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgc3RhdHNCdG4gPSBuYXZFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVEMUI1XHVBQ0M0JywgY2xzOiAnbmF2LWJ1dHRvbicgfSk7XHJcbiAgICAgICAgc3RhdHNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXcgPSAnc3RhdGlzdGljcyc7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgYWRkQnRuID0gbmF2RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLCBjbHM6ICduYXYtYnV0dG9uJyB9KTtcclxuICAgICAgICBhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXcgPSAnYWRkJztcclxuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzdGFydExlYXJuaW5nQnV0dG9uID0gbmF2RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUM4MDRcdUNDQjQgXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNCBcdUQ1NTlcdUMyQjUgXHVDMkRDXHVDNzkxJyxcclxuICAgICAgICAgICAgY2xzOiAnbmF2LWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBzdGFydExlYXJuaW5nQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIG5ldyBWb2NhYnVsYXJ5TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKS5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q3VycmVudFZpZXcoKSB7XHJcbiAgICAgICAgY29uc3QgY29udGVudEVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLm1hbmFnZXItY29udGVudCcpIHx8IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbWFuYWdlci1jb250ZW50JyB9KTtcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFZpZXcpIHtcclxuICAgICAgICAgICAgY2FzZSAnbGlzdCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dXb3JkTGlzdChjb250ZW50RWwgYXMgSFRNTEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0YXRpc3RpY3MnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93U3RhdGlzdGljcyhjb250ZW50RWwgYXMgSFRNTEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FkZCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dBZGRXb3JkKGNvbnRlbnRFbCBhcyBIVE1MRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93V29yZExpc3QoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAod29yZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzc0IFx1QkU0NFx1QzVCNFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU3NFx1QkNGNFx1QzEzOFx1QzY5NCEnLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnZW1wdHktbWVzc2FnZSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNlYXJjaEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NlYXJjaC1zZWN0aW9uJyB9KTtcclxuICAgICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNlYXJjaEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1x1QjJFOFx1QzVCNCBcdUFDODBcdUMwQzkuLi4nLFxyXG4gICAgICAgICAgICBjbHM6ICdzZWFyY2gtaW5wdXQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbkNvbnRyb2xzID0gc2VhcmNoRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VsZWN0aW9uLWNvbnRyb2xzJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBhbGxTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRXb3Jkcy5zaXplID09PSB3b3Jkcy5sZW5ndGggJiYgd29yZHMubGVuZ3RoID4gMDtcclxuICAgICAgICBjb25zdCBzZWxlY3RBbGxCdG4gPSBzZWxlY3Rpb25Db250cm9scy5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogYWxsU2VsZWN0ZWQgPyAnXHVDODA0XHVDQ0I0IFx1RDU3NFx1QzgxQycgOiAnXHVDODA0XHVDQ0I0IFx1QzEyMFx1RDBERCcsXHJcbiAgICAgICAgICAgIGNsczogJ3NlbGVjdGlvbi1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFdvcmRzLnNpemUgPT09IHdvcmRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgIHdvcmRzLmZvckVhY2god29yZCA9PiB0aGlzLnNlbGVjdGVkV29yZHMuYWRkKHdvcmQud29yZCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZldGNoU2VsZWN0ZWRCdXR0b24gPSBzZWxlY3Rpb25Db250cm9scy5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QzEyMFx1RDBERCBcdUIyRThcdUM1QjQgXHVCNzNCIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2ZldGNoLXNlbGVjdGVkLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBmZXRjaFNlbGVjdGVkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFdvcmRzLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0ZldGNoU2VsZWN0ZWRNZWFuaW5nc01vZGFsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmRMaXN0RWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1saXN0JyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByZW5kZXJXb3JkcyA9IChmaWx0ZXJlZFdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSA9PiB7XHJcbiAgICAgICAgICAgIHdvcmRMaXN0RWwuZW1wdHkoKTtcclxuICAgICAgICAgICAgZmlsdGVyZWRXb3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVXb3JkSXRlbSh3b3JkTGlzdEVsLCB3b3JkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBxdWVyeSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRXb3JkcyA9IHF1ZXJ5ID8gXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFiYXNlTWFuYWdlci5zZWFyY2hXb3JkcyhxdWVyeSkgOiB3b3JkcztcclxuICAgICAgICAgICAgcmVuZGVyV29yZHMoZmlsdGVyZWRXb3Jkcyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJlbmRlcldvcmRzKHdvcmRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVdvcmRJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHdvcmQ6IFZvY2FidWxhcnlDYXJkKSB7XHJcbiAgICAgICAgY29uc3Qgd29yZEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtaXRlbScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSB3b3JkRWwuY3JlYXRlRWwoJ2lucHV0Jywge1xyXG4gICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxyXG4gICAgICAgICAgICBjbHM6ICd3b3JkLWNoZWNrYm94J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkV29yZHMuaGFzKHdvcmQud29yZCk7XHJcbiAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXNDaGVja2VkID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIGlmIChpc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5hZGQod29yZC53b3JkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5kZWxldGUod29yZC53b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHdvcmRIZWFkZXIgPSB3b3JkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1oZWFkZXInIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHdvcmRUaXRsZUVsID0gd29yZEhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IGNsczogJ3dvcmQtdGl0bGUnIH0pO1xyXG4gICAgICAgIGlmICh3b3JkLnByb251bmNpYXRpb24gJiYgd29yZC5wcm9udW5jaWF0aW9uLnRyaW0oKSkge1xyXG4gICAgICAgICAgICB3b3JkVGl0bGVFbC5pbm5lckhUTUwgPSBgJHt3b3JkLndvcmR9IDxzcGFuIGNsYXNzPVwicHJvbnVuY2lhdGlvblwiPlske3dvcmQucHJvbnVuY2lhdGlvbn1dPC9zcGFuPmA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd29yZFRpdGxlRWwudGV4dENvbnRlbnQgPSB3b3JkLndvcmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdHlCYWRnZSA9IHdvcmRIZWFkZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiB0aGlzLmdldERpZmZpY3VsdHlUZXh0KHdvcmQuZGlmZmljdWx0eSksXHJcbiAgICAgICAgICAgIGNsczogYGRpZmZpY3VsdHktYmFkZ2UgJHt3b3JkLmRpZmZpY3VsdHl9YFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB3b3JkQ29udGVudCA9IHdvcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWNvbnRlbnQnIH0pO1xyXG4gICAgICAgIHdvcmRDb250ZW50LmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgdGV4dDogYFx1QjczQjogJHt3b3JkLm1lYW5pbmdzLmpvaW4oJywgJyl9YCxcclxuICAgICAgICAgICAgY2xzOiAnd29yZC1tZWFuaW5ncydcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICB3b3JkQ29udGVudC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IGBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4OiAke3dvcmQucmV2aWV3Q291bnR9XHVENjhDYCxcclxuICAgICAgICAgICAgY2xzOiAncmV2aWV3LWNvdW50J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAod29yZC5sYXN0UmV2aWV3ZWQpIHtcclxuICAgICAgICAgICAgY29uc3QgbGFzdFJldmlld0RhdGUgPSBuZXcgRGF0ZSh3b3JkLmxhc3RSZXZpZXdlZCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdrby1LUicpO1xyXG4gICAgICAgICAgICB3b3JkQ29udGVudC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHVCOUM4XHVDOUMwXHVCOUM5IFx1QkNGNVx1QzJCNTogJHtsYXN0UmV2aWV3RGF0ZX1gLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnbGFzdC1yZXZpZXdlZCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB3b3JkQWN0aW9ucyA9IHdvcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWFjdGlvbnMnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBZHZhbmNlZEZlYXR1cmVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZldGNoQnV0dG9uID0gd29yZEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnYWN0aW9uLWJ1dHRvbiBmZXRjaC1zaW5nbGUtYnV0dG9uJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZmV0Y2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoU2luZ2xlV29yZE1lYW5pbmcod29yZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gd29yZEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUMwQURcdUM4MUMnLFxyXG4gICAgICAgICAgICBjbHM6ICdhY3Rpb24tYnV0dG9uIGRlbGV0ZS1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQycsXHJcbiAgICAgICAgICAgICAgICBgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjRcdUI5N0MgXHVDMEFEXHVDODFDXHVENTU4XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDP2AsXHJcbiAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIucmVtb3ZlV29yZCh3b3JkLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93U3RhdGlzdGljcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRTdGF0aXN0aWNzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc3RhdHNHcmlkID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXRzLWdyaWQnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGJhc2ljU3RhdHMgPSBzdGF0c0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3RhdHMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgYmFzaWNTdGF0cy5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUFFMzBcdUJDRjggXHVEMUI1XHVBQ0M0JywgY2xzOiAnc3RhdHMtdGl0bGUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oYmFzaWNTdGF0cywgJ1x1Q0QxRCBcdUIyRThcdUM1QjQgXHVDMjE4Jywgc3RhdHMudG90YWxXb3Jkcy50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGJhc2ljU3RhdHMsICdcdUNEMUQgXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxOCcsIHN0YXRzLnRvdGFsUmV2aWV3cy50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGJhc2ljU3RhdHMsICdcdUM1RjBcdUMxOEQgXHVENTU5XHVDMkI1XHVDNzdDJywgYCR7c3RhdHMuc3RyZWFrRGF5c31cdUM3N0NgKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGJhc2ljU3RhdHMsICdcdUQzQzlcdUFERTAgXHVCMDlDXHVDNzc0XHVCM0M0Jywgc3RhdHMuYXZlcmFnZURpZmZpY3VsdHkudG9GaXhlZCgxKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdHlTdGF0cyA9IHN0YXRzR3JpZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0cy1zZWN0aW9uJyB9KTtcclxuICAgICAgICBkaWZmaWN1bHR5U3RhdHMuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVCMDlDXHVDNzc0XHVCM0M0XHVCQ0M0IFx1QkQ4NFx1RDNFQycsIGNsczogJ3N0YXRzLXRpdGxlJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGRpZmZpY3VsdHlTdGF0cywgJ1x1QzI2Q1x1QzZDMCcsIHN0YXRzLndvcmRzQnlEaWZmaWN1bHR5LmVhc3kudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShkaWZmaWN1bHR5U3RhdHMsICdcdUM4OEJcdUM3NEMnLCBzdGF0cy53b3Jkc0J5RGlmZmljdWx0eS5nb29kLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oZGlmZmljdWx0eVN0YXRzLCAnXHVDNUI0XHVCODI0XHVDNkMwJywgc3RhdHMud29yZHNCeURpZmZpY3VsdHkuaGFyZC50b1N0cmluZygpKTtcclxuXHJcbiAgICAgICAgY29uc3QgYWN0aXZpdHlTdGF0cyA9IHN0YXRzR3JpZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0cy1zZWN0aW9uJyB9KTtcclxuICAgICAgICBhY3Rpdml0eVN0YXRzLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1Q0Q1Q1x1QURGQyA3XHVDNzdDIFx1RDY1Q1x1QjNEOScsIGNsczogJ3N0YXRzLXRpdGxlJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBzdGF0cy5yZWNlbnRBY3Rpdml0eS5mb3JFYWNoKGFjdGl2aXR5ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGFjdGl2aXR5LmRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygna28tS1InLCB7IFxyXG4gICAgICAgICAgICAgICAgbW9udGg6ICdzaG9ydCcsIFxyXG4gICAgICAgICAgICAgICAgZGF5OiAnbnVtZXJpYycgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGFjdGl2aXR5U3RhdHMsIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgYFx1RDU1OVx1QzJCNTogJHthY3Rpdml0eS53b3Jkc1N0dWRpZWR9LCBcdUJDRjVcdUMyQjU6ICR7YWN0aXZpdHkucmV2aWV3c0NvbXBsZXRlZH1gKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVN0YXRJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBzdGF0RWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3RhdC1pdGVtJyB9KTtcclxuICAgICAgICBzdGF0RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGxhYmVsLCBjbHM6ICdzdGF0LWxhYmVsJyB9KTtcclxuICAgICAgICBzdGF0RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IHZhbHVlLCBjbHM6ICdzdGF0LXZhbHVlJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dBZGRXb3JkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBhZGRTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2FkZC13b3JkLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGFkZFNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDMEM4IFx1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLCBjbHM6ICdzZWN0aW9uLXRpdGxlJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBpbnB1dEVsID0gYWRkU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWlucHV0LWdyb3VwJyB9KTtcclxuICAgICAgICBjb25zdCB3b3JkSW5wdXQgPSBpbnB1dEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1x1QzYwMVx1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQgKFx1QzYwODogYmVhdXRpZnVsKScsXHJcbiAgICAgICAgICAgIGNsczogJ3dvcmQtaW5wdXQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGlucHV0RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJyxcclxuICAgICAgICAgICAgY2xzOiAnYWRkLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkV29yZCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHdvcmRJbnB1dC52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmICghd29yZCkge1xyXG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdlcnJvci1tZXNzYWdlJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IGF3YWl0IHRoaXMud29yZFNlcnZpY2UuZ2V0V29yZERhdGEod29yZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2b2NhYnVsYXJ5Q2FyZDogVm9jYWJ1bGFyeUNhcmQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4ud29yZERhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV2aWV3Q291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eTogJ2dvb2QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBhZGRlZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBib29rSWQ6IHRoaXMuc2VsZWN0ZWRCb29rSWRcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5hZGRXb3JkKHZvY2FidWxhcnlDYXJkKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgd29yZElucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgXCIke3dvcmR9XCIgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUNEOTRcdUFDMDBcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQhYCxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdzdWNjZXNzLW1lc3NhZ2UnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc01zZyA9IGFkZFNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnN1Y2Nlc3MtbWVzc2FnZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzTXNnKSBzdWNjZXNzTXNnLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1OFx1QjI5NCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ2Vycm9yLW1lc3NhZ2UnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFdvcmQpO1xyXG4gICAgICAgIHdvcmRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG4gICAgICAgICAgICAgICAgYWRkV29yZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREaWZmaWN1bHR5VGV4dChkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpOiBzdHJpbmcge1xyXG4gICAgICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xyXG4gICAgICAgICAgICBjYXNlICdlYXN5JzogcmV0dXJuICdcdUMyNkNcdUM2QzAnO1xyXG4gICAgICAgICAgICBjYXNlICdnb29kJzogcmV0dXJuICdcdUM4OEJcdUM3NEMnO1xyXG4gICAgICAgICAgICBjYXNlICdoYXJkJzogcmV0dXJuICdcdUM1QjRcdUI4MjRcdUM2QzAnO1xyXG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gJ1x1Qzg4Qlx1Qzc0Qyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhcnRSZXZpZXcod29yZHM6IFZvY2FidWxhcnlDYXJkW10pIHtcclxuICAgICAgICBjb25zdCByZXZpZXdNb2RhbCA9IG5ldyBWb2NhYnVsYXJ5UmV2aWV3TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCB3b3Jkcyk7XHJcbiAgICAgICAgcmV2aWV3TW9kYWwub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0ZldGNoU2VsZWN0ZWRNZWFuaW5nc01vZGFsKCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkV29yZExpc3QgPSBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRXb3Jkcyk7XHJcbiAgICAgICAgbmV3IEZldGNoU2VsZWN0ZWRNZWFuaW5nc01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgc2VsZWN0ZWRXb3JkTGlzdCkub3BlbigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGZldGNoU2luZ2xlV29yZE1lYW5pbmcod29yZDogVm9jYWJ1bGFyeUNhcmQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzVmFsaWRBcGlLZXkoKSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdMTE0gQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUMxMjRcdUM4MTVcdUM1RDBcdUMxMUMgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxyXG4gICAgICAgICAgICBgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjRcdUM3NTggXHVCNzNCXHVDNzQ0IFx1QzBDOFx1Qjg1QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUMyRENcdUFDQTBcdUMyQjVcdUIyQzhcdUFFNEM/IFx1QUUzMFx1Qzg3NCBcdUM4MTVcdUJDRjRcdUFDMDBcdUM1QjRcdUM1MENcdUM2Q0NcdUM5RDFcdUIyQzhcdUIyRTQuYCxcclxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMS4uLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxsbVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4ubGxtU2VydmljZS5nZXRXb3JkRGV0YWlscyh3b3JkLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsbG1SZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREZXRhaWwgPSBsbG1SZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IHRoaXMucGx1Z2luLmxsbVNlcnZpY2UuY29udmVydFRvV29yZERhdGEod29yZERldGFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkV29yZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLndvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogd29yZERhdGEubWVhbmluZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZERhdGEuZXhhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREYXRhLnNpbWlsYXJXb3Jkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmREYXRhKHdvcmQud29yZCwgdXBkYXRlZFdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUFDMDAgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCBcdUMyRTRcdUQzMjg6ICR7bGxtUmVzcG9uc2UuZXJyb3J9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmQud29yZH1cIiBcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNCBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyByZWZyZXNoQm9va1NlbGVjdG9yKCkge1xyXG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVCMkU0XHVDMkRDIFx1Qjg1Q1x1QjREQ1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDVFNFx1QjM1NFx1Qzc1OCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTIwXHVEMEREIFx1QjREQ1x1Qjg2RFx1QjJFNFx1QzZCNFx1Qzc0NCBcdUMwQzhcdUI4NUNcdUFDRTBcdUNFNjhcclxuICAgICAgICBjb25zdCBoZWFkZXJFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5tYW5hZ2VyLWhlYWRlcicpO1xyXG4gICAgICAgIGlmIChoZWFkZXJFbCkge1xyXG4gICAgICAgICAgICBjb25zdCBib29rU2VsZWN0ID0gaGVhZGVyRWwucXVlcnlTZWxlY3RvcignLmJvb2stc2VsZWN0LWRyb3Bkb3duJykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChib29rU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBib29rU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYm9va3MgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVDNjM1XHVDMTU4XHVCNEU0IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgICAgICAgICAgYm9va1NlbGVjdC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVDMEM4XHVCODVDXHVDNkI0IFx1QzYzNVx1QzE1OFx1QjRFNCBcdUNEOTRcdUFDMDBcclxuICAgICAgICAgICAgICAgIGJvb2tzLmZvckVhY2goYm9vayA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gYm9vay5pZDtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24udGV4dCA9IGJvb2submFtZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYm9vay5pZCA9PT0gY3VycmVudFZhbHVlIHx8IGJvb2suaWQgPT09IHRoaXMuc2VsZWN0ZWRCb29rSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IGJvb2suaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUJERjAgXHVDMEM4XHVCODVDXHVBQ0UwXHVDRTY4XHJcbiAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYm9va0NyZWF0ZWQnLCB0aGlzLmhhbmRsZUJvb2tDcmVhdGVkLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuY2xhc3MgVm9jYWJ1bGFyeVJldmlld01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdO1xyXG4gICAgY3VycmVudEluZGV4ID0gMDtcclxuICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiwgd29yZHM6IFZvY2FidWxhcnlDYXJkW10pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMud29yZHMgPSB3b3JkcztcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud29yZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zaG93Q3VycmVudFdvcmQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dDdXJyZW50V29yZCgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbGVhcm5pbmctbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxyXG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZXZpZXctbW9kYWwtaGVpZ2h0JywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHR9dmhgKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudFdvcmQgPSB0aGlzLndvcmRzW3RoaXMuY3VycmVudEluZGV4XTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwcm9ncmVzc0VsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jldmlldy1wcm9ncmVzcycgfSk7XHJcbiAgICAgICAgcHJvZ3Jlc3NFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IGAke3RoaXMuY3VycmVudEluZGV4ICsgMX0gLyAke3RoaXMud29yZHMubGVuZ3RofWAsXHJcbiAgICAgICAgICAgIGNsczogJ3Byb2dyZXNzLXRleHQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhcmRFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXZpZXctY2FyZCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQyBcdUJDODRcdUQyQkMgKFx1QzYyNFx1Qjk3OFx1Q0FCRCBcdUMwQzFcdUIyRTgpXHJcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gY2FyZEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDRTc0XHVCNERDIFx1QzBBRFx1QzgxQycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhcmQtZGVsZXRlLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZURlbGV0ZUNhcmQoKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgd29yZEVsID0gY2FyZEVsLmNyZWF0ZUVsKCdoMScsIHsgY2xzOiAncmV2aWV3LXdvcmQnIH0pO1xyXG4gICAgICAgIGlmIChjdXJyZW50V29yZC5wcm9udW5jaWF0aW9uICYmIGN1cnJlbnRXb3JkLnByb251bmNpYXRpb24udHJpbSgpKSB7XHJcbiAgICAgICAgICAgIHdvcmRFbC5pbm5lckhUTUwgPSBgJHtjdXJyZW50V29yZC53b3JkfSA8c3BhbiBjbGFzcz1cInByb251bmNpYXRpb25cIj5bJHtjdXJyZW50V29yZC5wcm9udW5jaWF0aW9ufV08L3NwYW4+YDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3b3JkRWwudGV4dENvbnRlbnQgPSBjdXJyZW50V29yZC53b3JkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRXb3JkLnNpbWlsYXJXb3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaW1pbGFyRWwgPSBjYXJkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2ltaWxhci13b3JkcycgfSk7XHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNDonIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2ltaWxhckxpc3QgPSBzaW1pbGFyRWwuY3JlYXRlRWwoJ3VsJyk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50V29yZC5zaW1pbGFyV29yZHMuZm9yRWFjaCh3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IHdvcmQgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRXb3JkLmV4YW1wbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzRWwgPSBjYXJkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZXMnIH0pO1xyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzhcdUI0RTQ6JyB9KTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkLmV4YW1wbGVzLmZvckVhY2goZXhhbXBsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogZXhhbXBsZS5lbmdsaXNoLCBjbHM6ICdleGFtcGxlJyB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaGVja0J0biA9IGNhcmRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6ICdcdUM4MTVcdUIyRjUgXHVENjU1XHVDNzc4XHVENTU4XHVBRTMwJyxcclxuICAgICAgICAgICAgICAgIGNsczogJ2NoZWNrLWFuc3dlci1idXR0b24nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjaGVja0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50V29yZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBhbnN3ZXJFbCA9IGNhcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdhbnN3ZXItc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIGFuc3dlckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QjczQjonIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBtZWFuaW5nc0xpc3QgPSBhbnN3ZXJFbC5jcmVhdGVFbCgndWwnKTtcclxuICAgICAgICAgICAgY3VycmVudFdvcmQubWVhbmluZ3MuZm9yRWFjaChtZWFuaW5nID0+IHtcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IG1lYW5pbmcgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRXb3JkLmV4YW1wbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFuc3dlckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzYwOFx1QkIzOCBcdUJDODhcdUM1RUQ6JyB9KTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkLmV4YW1wbGVzLmZvckVhY2goZXhhbXBsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5zd2VyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4YW1wbGUua29yZWFuLCBjbHM6ICd0cmFuc2xhdGlvbicgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZXZpZXdCdXR0b25zKGNhcmRFbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlUmV2aWV3QnV0dG9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgcmV2aWV3U2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXZpZXctYnV0dG9ucycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaGFyZEJ0biA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzVCNFx1QjgyNFx1QzZDMCcsIGNsczogJ3Jldmlldy1idG4gaGFyZCcgfSk7XHJcbiAgICAgICAgY29uc3QgZ29vZEJ0biA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1Qzg4Qlx1Qzc0QycsIGNsczogJ3Jldmlldy1idG4gZ29vZCcgfSk7XHJcbiAgICAgICAgY29uc3QgZWFzeUJ0biA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzI2Q1x1QzZDMCcsIGNsczogJ3Jldmlldy1idG4gZWFzeScgfSk7XHJcblxyXG4gICAgICAgIGhhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnaGFyZCcpKTtcclxuICAgICAgICBnb29kQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2dvb2QnKSk7XHJcbiAgICAgICAgZWFzeUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdlYXN5JykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUmV2aWV3KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJykge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRXb3JkID0gdGhpcy53b3Jkc1t0aGlzLmN1cnJlbnRJbmRleF07XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmQoY3VycmVudFdvcmQud29yZCwgZGlmZmljdWx0eSk7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4Kys7XHJcbiAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA+PSB0aGlzLndvcmRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDb21wbGV0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFdvcmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRXb3JkID0gdGhpcy53b3Jkc1t0aGlzLmN1cnJlbnRJbmRleF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcclxuICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDJyxcclxuICAgICAgICAgICAgYFwiJHtjdXJyZW50V29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUMwQURcdUM4MUNcdUQ1NThcdUMyRENcdUFDQTBcdUMyQjVcdUIyQzhcdUFFNEM/XFxuXFxuXHVDNzc0IFx1Qzc5MVx1QzVDNVx1Qzc0MCBcdUI0MThcdUIzQ0NcdUI5QjQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gLFxyXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5yZW1vdmVXb3JkKGN1cnJlbnRXb3JkLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud29yZHMuc3BsaWNlKHRoaXMuY3VycmVudEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53b3Jkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA+PSB0aGlzLndvcmRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHRoaXMud29yZHMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFdvcmQoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQyBcdUM5MTEgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQyBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dDb21wbGV0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICBjb25zdCBjb21wbGV0aW9uRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29tcGxldGlvbicgfSk7XHJcbiAgICAgICAgY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1QkNGNVx1QzJCNSBcdUM2NDRcdUI4Q0MhJyB9KTtcclxuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0XHVCOTdDIFx1QkNGNVx1QzJCNVx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjbG9zZUJ0biA9IGNvbXBsZXRpb25FbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkVCXHVBRTMwJywgY2xzOiAnY2xvc2UtYnRuJyB9KTtcclxuICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgRmV0Y2hTZWxlY3RlZE1lYW5pbmdzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG4gICAgc2VsZWN0ZWRXb3Jkczogc3RyaW5nW107XHJcbiAgICBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiwgc2VsZWN0ZWRXb3Jkczogc3RyaW5nW10pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRXb3JkcyA9IHNlbGVjdGVkV29yZHM7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnZmV0Y2gtc2VsZWN0ZWQtbWVhbmluZ3MtbW9kYWwnKTtcclxuXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IGBcdUMxMjBcdUQwRERcdUI0MUMgJHt0aGlzLnNlbGVjdGVkV29yZHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjQgXHVCNzNCIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMGAsXHJcbiAgICAgICAgICAgIGNsczogJ21vZGFsLXRpdGxlJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiBgXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc1OCBcdUMwQzFcdUMxMzggXHVDODE1XHVCQ0Y0XHVCOTdDIExMTSBBUElcdUI5N0MgXHVEMUI1XHVENTc0IFx1QUMwMFx1QzgzOFx1QzYzNVx1QjJDOFx1QjJFNC5gLFxyXG4gICAgICAgICAgICBjbHM6ICdtb2RhbC1kZXNjcmlwdGlvbidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZExpc3RFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZWxlY3RlZC13b3Jkcy1saXN0JyB9KTtcclxuICAgICAgICB3b3JkTGlzdEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUI0RTQ6JyB9KTtcclxuICAgICAgICBjb25zdCB3b3Jkc0NvbnRhaW5lciA9IHdvcmRMaXN0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZHMtY29udGFpbmVyJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuZm9yRWFjaCh3b3JkID0+IHtcclxuICAgICAgICAgICAgd29yZHNDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogd29yZCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3NlbGVjdGVkLXdvcmQtdGFnJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZmV0Y2hCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCNzNCIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2ZldGNoLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBmZXRjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mZXRjaFNlbGVjdGVkTWVhbmluZ3MoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1zZWN0aW9uJyB9KTtcclxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtdGV4dCcgfSk7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBwcm9ncmVzc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtYmFyJyB9KTtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc0ZpbGwgPSBwcm9ncmVzc0Jhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1maWxsJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZmV0Y2hTZWxlY3RlZE1lYW5pbmdzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZykgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNob3dQcm9ncmVzcyh0aGlzLnNlbGVjdGVkV29yZHMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4ubGxtU2VydmljZS5nZXRNdWx0aXBsZVdvcmREZXRhaWxzKHRoaXMuc2VsZWN0ZWRXb3Jkcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgQXJyYXkuaXNBcnJheShyZXN1bHQuZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NXb3Jkczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZhaWxlZFdvcmRzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgd29yZERhdGEgb2YgcmVzdWx0LmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZERhdGEud29yZCAmJiB3b3JkRGF0YS5tZWFuaW5ncyAmJiB3b3JkRGF0YS5tZWFuaW5ncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1dvcmQgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZCh3b3JkRGF0YS53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1dvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkV29yZDogVm9jYWJ1bGFyeUNhcmQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nV29yZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZERhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IHdvcmREYXRhLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZERhdGEuZXhhbXBsZXMgfHwgW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbWlsYXJXb3Jkczogd29yZERhdGEuc2ltaWxhcldvcmRzIHx8IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZERhdGEod29yZERhdGEud29yZCwgdXBkYXRlZFdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NXb3Jkcy5wdXNoKHdvcmREYXRhLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkV29yZHMucHVzaCh3b3JkRGF0YS53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZERhdGEud29yZH1cIiBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggXHVDMkU0XHVEMzI4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkV29yZHMucHVzaCh3b3JkRGF0YS53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdHMoeyBzdWNjZXNzOiBzdWNjZXNzV29yZHMsIGZhaWxlZDogZmFpbGVkV29yZHMgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzV29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYCR7c3VjY2Vzc1dvcmRzLmxlbmd0aH1cdUFDMUNcdUM3NTggXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0IWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0XHVCMzcwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNDogJyArIChyZXN1bHQuZXJyb3IgfHwgJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OCcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0XHVCMzcwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNDogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1Byb2dyZXNzKHRvdGFsV29yZHM6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IGBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUM5MTEuLi4gKDAvJHt0b3RhbFdvcmRzfSlgO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGlkZVByb2dyZXNzKCkge1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHByb2dyZXNzU2VjdGlvbikge1xyXG4gICAgICAgICAgICBwcm9ncmVzc1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93UmVzdWx0cyhyZXN1bHRzOiB7IHN1Y2Nlc3M6IHN0cmluZ1tdOyBmYWlsZWQ6IHN0cmluZ1tdIH0pIHtcclxuICAgICAgICBjb25zdCByZXN1bHRTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnJlc3VsdC1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICByZXN1bHRTZWN0aW9uLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHN1bW1hcnlFbCA9IHJlc3VsdFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0cy1zdW1tYXJ5JyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAocmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc0VsID0gc3VtbWFyeUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1pdGVtIHN1Y2Nlc3MnIH0pO1xyXG4gICAgICAgICAgICBzdWNjZXNzRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1MjcwNSBcdUMxMzFcdUFDRjU6ICR7cmVzdWx0cy5zdWNjZXNzLmxlbmd0aH1cdUFDMUNgLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LWNvdW50J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPD0gMTApIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5zdWNjZXNzLmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZXN1bHRzLmZhaWxlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhaWxlZEVsID0gc3VtbWFyeUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1pdGVtIGVycm9yJyB9KTtcclxuICAgICAgICAgICAgZmFpbGVkRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1Mjc0QyBcdUMyRTRcdUQzMjg6ICR7cmVzdWx0cy5mYWlsZWQubGVuZ3RofVx1QUMxQ2AsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5mYWlsZWQubGVuZ3RoIDw9IDEwKSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsZWRFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5mYWlsZWQuam9pbignLCAnKSxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtd29yZHMnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IHJlc3VsdFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWJ1dHRvbnMnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkVCXHVBRTMwJywgY2xzOiAnY2xvc2UtYnV0dG9uJyB9KTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUFDMDRcdUIyRThcdUQ1NUMgXHVENjU1XHVDNzc4IFx1QkFBOFx1QjJFQyBcdUQwNzRcdUI3OThcdUMyQTRcclxuY2xhc3MgQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgdGl0bGU6IHN0cmluZztcclxuICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgIG9uQ29uZmlybTogKCkgPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGl0bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBvbkNvbmZpcm06ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIHRoaXMub25Db25maXJtID0gb25Db25maXJtO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2NvbmZpcm0tbW9kYWwnKTtcclxuXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy50aXRsZSwgY2xzOiAnbW9kYWwtdGl0bGUnIH0pO1xyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlLCBjbHM6ICdtb2RhbC1tZXNzYWdlJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUQ2NTVcdUM3NzgnLFxyXG4gICAgICAgICAgICBjbHM6ICdjb25maXJtLWJ1dHRvbiBwcmltYXJ5J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25Db25maXJtKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBXb3JkRGF0YSB9IGZyb20gJy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcclxuXHJcbmV4cG9ydCBjbGFzcyBXb3JkU2VydmljZSB7XHJcbiAgICBwcml2YXRlIGFwaUJhc2VVcmwgPSAnaHR0cHM6Ly9hcGkuZGljdGlvbmFyeWFwaS5kZXYvYXBpL3YyL2VudHJpZXMvZW4nO1xyXG5cclxuICAgIGFzeW5jIGdldFdvcmREYXRhKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8V29yZERhdGE+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdUMyRTRcdUM4MUMgQVBJIFx1RDYzOFx1Q0Q5QyBcdUIzMDBcdUMyRTAgXHVDMEQ4XHVENTBDIFx1QjM3MFx1Qzc3NFx1RDEzMFx1Qjk3QyBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgLy8gXHVDMkU0XHVDODFDIFx1QUQ2Q1x1RDYwNFx1QzVEMFx1QzExQ1x1QjI5NCBEaWN0aW9uYXJ5IEFQSVx1QjA5OCBcdUIyRTRcdUI5NzggQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUMyMTggXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNhbXBsZVdvcmREYXRhKHdvcmQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjJDIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0U2FtcGxlV29yZERhdGEod29yZDogc3RyaW5nKTogV29yZERhdGEge1xyXG4gICAgICAgIC8vIFx1QzBEOFx1RDUwQyBcdUIzNzBcdUM3NzRcdUQxMzAgLSBcdUMyRTRcdUM4MUNcdUI4NUNcdUIyOTQgQVBJXHVDNUQwXHVDMTFDIFx1QUMwMFx1QzgzOFx1QzY0MFx1QzU3QyBcdUQ1NjhcclxuICAgICAgICBjb25zdCBzYW1wbGVEYXRhOiB7IFtrZXk6IHN0cmluZ106IFdvcmREYXRhIH0gPSB7XHJcbiAgICAgICAgICAgICdiZWF1dGlmdWwnOiB7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiAnYmVhdXRpZnVsJyxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcvXHUwMkM4Ymp1XHUwMkQwdFx1MDI2QWZcdTAyNTlsLycsXHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUM1NDRcdUI5ODRcdUIyRTRcdUM2QjQnLCAnXHVDNjA4XHVDMDVDJywgJ1x1RDZDQ1x1Qjk2RFx1RDU1QyddLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbJ3ByZXR0eScsICdnb3JnZW91cycsICdzdHVubmluZycsICdhdHRyYWN0aXZlJ10sXHJcbiAgICAgICAgICAgICAgICBleGFtcGxlczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1NoZSBpcyBhIGJlYXV0aWZ1bCB3b21hbi4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUFERjhcdUIxNDBcdUIyOTQgXHVDNTQ0XHVCOTg0XHVCMkU0XHVDNkI0IFx1QzVFQ1x1QzEzMVx1Qzc4NVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdUaGUgc3Vuc2V0IHdhcyBiZWF1dGlmdWwuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDNzdDXHVCQUIwXHVDNzc0IFx1QzU0NFx1Qjk4NFx1QjJFNFx1QzZFMFx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdXaGF0IGEgYmVhdXRpZnVsIGRheSEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM4MTVcdUI5RDAgXHVDNTQ0XHVCOTg0XHVCMkU0XHVDNkI0IFx1RDU1OFx1QjhFOFx1QjEyNFx1QzY5NCEnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnaGFwcHknOiB7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiAnaGFwcHknLFxyXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJy9cdTAyQzhoXHUwMEU2cGkvJyxcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1RDU4OVx1QkNGNVx1RDU1QycsICdcdUFFMzBcdUMwNUMnLCAnXHVDOTkwXHVBQzcwXHVDNkI0J10sXHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFsnam95ZnVsJywgJ2NoZWVyZnVsJywgJ2dsYWQnLCAncGxlYXNlZCddLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdJIGFtIGhhcHB5IHRvIHNlZSB5b3UuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVCMkY5XHVDMkUwXHVDNzQ0IFx1QjlDQ1x1QjA5OFx1QzExQyBcdUFFMzBcdUMwNjlcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnU2hlIGhhcyBhIGhhcHB5IGZhbWlseS4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUFERjhcdUIxNDBcdUIyOTQgXHVENTg5XHVCQ0Y1XHVENTVDIFx1QUMwMFx1Qzg3MVx1Qzc0NCBcdUFDMDBcdUM5QzBcdUFDRTAgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ0hhcHB5IGJpcnRoZGF5IScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QzBERFx1Qzc3QyBcdUNEOTVcdUQ1NThcdUQ1NjlcdUIyQzhcdUIyRTQhJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2xlYXJuJzoge1xyXG4gICAgICAgICAgICAgICAgd29yZDogJ2xlYXJuJyxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcvbFx1MDI1Q1x1MDJEMHJuLycsXHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUJDMzBcdUM2QjBcdUIyRTQnLCAnXHVENTU5XHVDMkI1XHVENTU4XHVCMkU0JywgJ1x1Qzc3NVx1RDc4OFx1QjJFNCddLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbJ3N0dWR5JywgJ2FjcXVpcmUnLCAnZ3Jhc3AnLCAndW5kZXJzdGFuZCddLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdJIHdhbnQgdG8gbGVhcm4gRW5nbGlzaC4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM4MDBcdUIyOTQgXHVDNjAxXHVDNUI0XHVCOTdDIFx1QkMzMFx1QzZCMFx1QUNFMCBcdUMyRjZcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnQ2hpbGRyZW4gbGVhcm4gcXVpY2tseS4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM1NDRcdUM3NzRcdUI0RTRcdUM3NDAgXHVCRTY4XHVCOUFDIFx1QkMzMFx1QzZDMVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdZb3UgY2FuIGxlYXJuIGZyb20geW91ciBtaXN0YWtlcy4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUMyRTRcdUMyMThcdUI4NUNcdUJEODBcdUQxMzAgXHVCQzMwXHVDNkI4IFx1QzIxOCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFx1Qzc4NVx1QjgyNVx1QjQxQyBcdUIyRThcdUM1QjRcdUFDMDAgXHVDMEQ4XHVENTBDIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QzVEMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVCQzE4XHVENjU4LCBcdUM1QzZcdUM3M0NcdUJBNzQgXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMwRERcdUMxMzFcclxuICAgICAgICBpZiAoc2FtcGxlRGF0YVt3b3JkLnRvTG93ZXJDYXNlKCldKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzYW1wbGVEYXRhW3dvcmQudG9Mb3dlckNhc2UoKV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUFFMzBcdUJDRjggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QkMxOFx1RDY1OFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdvcmQ6IHdvcmQsXHJcbiAgICAgICAgICAgIHByb251bmNpYXRpb246ICcvcHJvbnVuY2lhdGlvbi8nLFxyXG4gICAgICAgICAgICBtZWFuaW5nczogWydcdUM3NThcdUJCRjhcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJ10sXHJcbiAgICAgICAgICAgIHNpbWlsYXJXb3JkczogW10sXHJcbiAgICAgICAgICAgIGV4YW1wbGVzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogYFRoaXMgaXMgYW4gZXhhbXBsZSBzZW50ZW5jZSB3aXRoIHRoZSB3b3JkIFwiJHt3b3JkfVwiLmAsXHJcbiAgICAgICAgICAgICAgICAgICAga29yZWFuOiBgXCIke3dvcmR9XCJcdUI3N0NcdUIyOTQgXHVCMkU4XHVDNUI0XHVBQzAwIFx1RDNFQ1x1RDU2OFx1QjQxQyBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuYFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUMyRTRcdUM4MUMgQVBJIFx1RDYzOFx1Q0Q5Q1x1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVCQTU0XHVDMTFDXHVCNERDIChcdUQ1QTVcdUQ2QzQgXHVBRDZDXHVENjA0KVxyXG4gICAgcHJpdmF0ZSBhc3luYyBmZXRjaEZyb21BUEkod29yZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYXBpQmFzZVVybH0vJHt3b3JkfWApO1xyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgXHVDNjk0XHVDQ0FEIFx1QzJFNFx1RDMyODogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFkZEJvb2tNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2FkZC1ib29rLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QzgxQ1x1QkFBOVxyXG4gICAgICAgIGNvbnN0IHRpdGxlRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Q0Q5NFx1QUMwMCcsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUMxMjRcdUJBODVcclxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbkVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QzBDOFx1Qjg1Q1x1QzZCNCBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVDMEREXHVDMTMxXHVENTY5XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgIGNsczogJ21vZGFsLWRlc2NyaXB0aW9uJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUM3ODVcdUI4MjUgXHVEM0ZDXHJcbiAgICAgICAgY29uc3QgZm9ybUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdmb3JtJywgeyBjbHM6ICdib29rLWZvcm0nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODQgXHVDNzg1XHVCODI1XHJcbiAgICAgICAgY29uc3QgbmFtZVNlY3Rpb24gPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm9ybS1zZWN0aW9uJyB9KTtcclxuICAgICAgICBjb25zdCBuYW1lTGFiZWwgPSBuYW1lU2VjdGlvbi5jcmVhdGVFbCgnbGFiZWwnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NCAqJyxcclxuICAgICAgICAgICAgY2xzOiAnZm9ybS1sYWJlbCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBuYW1lSW5wdXQgPSBuYW1lU2VjdGlvbi5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdUM2MDg6IFRPRUlDIFx1QjJFOFx1QzVCNFx1QzdBNSwgXHVDNzdDXHVDMEMxXHVDMEREXHVENjVDIFx1QjJFOFx1QzVCNFx1QzdBNScsXHJcbiAgICAgICAgICAgIGNsczogJ2Zvcm0taW5wdXQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbmFtZUlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyNFx1QkE4NSBcdUM3ODVcdUI4MjVcclxuICAgICAgICBjb25zdCBkZXNjU2VjdGlvbiA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JtLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIGNvbnN0IGRlc2NMYWJlbCA9IGRlc2NTZWN0aW9uLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUMxMjRcdUJBODUgKFx1QzEyMFx1RDBERFx1QzBBQ1x1RDU2RCknLFxyXG4gICAgICAgICAgICBjbHM6ICdmb3JtLWxhYmVsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGRlc2NJbnB1dCA9IGRlc2NTZWN0aW9uLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdUIyRThcdUM1QjRcdUM3QTVcdUM1RDAgXHVCMzAwXHVENTVDIFx1QzEyNFx1QkE4NVx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuJyxcclxuICAgICAgICAgICAgY2xzOiAnZm9ybS10ZXh0YXJlYSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZXNjSW5wdXQucm93cyA9IDM7XHJcblxyXG4gICAgICAgIC8vIFx1QkM4NFx1RDJCQyBcdUM2MDFcdUM1RURcclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjcmVhdGVCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMScsXHJcbiAgICAgICAgICAgIGNsczogJ2NyZWF0ZS1idXR0b24gcHJpbWFyeScsXHJcbiAgICAgICAgICAgIHR5cGU6ICdzdWJtaXQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJyxcclxuICAgICAgICAgICAgdHlwZTogJ2J1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG5cclxuICAgICAgICAvLyBcdUQzRkMgXHVDODFDXHVDRDlDIFx1Qzc3NFx1QkNBNFx1RDJCOFxyXG4gICAgICAgIGZvcm1FbC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhc3luYyAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQm9vayhuYW1lSW5wdXQudmFsdWUudHJpbSgpLCBkZXNjSW5wdXQudmFsdWUudHJpbSgpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gRW50ZXIgXHVEMEE0XHVCODVDIFx1QzgxQ1x1Q0Q5QyBcdUFDMDBcdUIyQTVcdUQ1NThcdUIzQzRcdUI4NURcclxuICAgICAgICBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgZm9ybUVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdzdWJtaXQnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVEM0VDXHVDRUU0XHVDMkE0IFx1QzEyNFx1QzgxNVxyXG4gICAgICAgIG5hbWVJbnB1dC5mb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlQm9vayhuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIW5hbWUudHJpbSgpKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODRcdUM3NDQgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVCMkU4XHVDNUI0XHVDN0E1XHVBQ0ZDIFx1Qzc3NFx1Qjk4NCBcdUM5MTFcdUJDRjUgXHVENjU1XHVDNzc4XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQm9va3MgPSB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsQm9va3MoKTtcclxuICAgICAgICAgICAgY29uc3QgaXNEdXBsaWNhdGUgPSBleGlzdGluZ0Jvb2tzLnNvbWUoYm9vayA9PiBcclxuICAgICAgICAgICAgICAgIGJvb2submFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc0R1cGxpY2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzg1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0Jvb2sgPSBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuY3JlYXRlQm9vayhuYW1lLCBkZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7bmFtZX1cIiBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NzQgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzBERFx1QzEzMVx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QkFBOFx1QjJFQyBcdUIyRUJcdUFFMzBcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCQUE4XHVCNEUwIFx1QkFBOFx1QjJFQ1x1QzVEMFx1QzExQyBcdUMyMThcdUMyRTBcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QjNDNFx1Qjg1RCBcdUM3NzRcdUJDQTRcdUQyQjggXHVCQzFDXHVDMEREXHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdib29rQ3JlYXRlZCcsIHsgZGV0YWlsOiBuZXdCb29rIH0pO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZnJvbSAnLi4vLi4vLi4vbWFpbic7XHJcbmltcG9ydCB7IFdvcmRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBBZGRCb29rTW9kYWwgfSBmcm9tICcuLi8uLi9ib29rLW1hbmFnZW1lbnQvdWkvQWRkQm9va01vZGFsJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRXb3Jkc01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIHdvcmRTZXJ2aWNlOiBXb3JkU2VydmljZTtcclxuICAgIGlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBib29rU2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy53b3JkU2VydmljZSA9IG5ldyBXb3JkU2VydmljZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2FkZC13b3Jkcy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVDRDVDXHVDMkUwIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0RENcclxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjBcdUQwREQgXHVCNERDXHVCODZEXHVCMkU0XHVDNkI0XHJcbiAgICAgICAgY29uc3QgYm9va1NlbGVjdFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYm9vay1zZWxlY3Qtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgY29uc3QgYm9va0xhYmVsID0gYm9va1NlbGVjdFNlY3Rpb24uY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyMFx1RDBERCcsIGNsczogJ2Jvb2stc2VsZWN0LWxhYmVsJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBib29rU2VsZWN0Q29udGFpbmVyID0gYm9va1NlbGVjdFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYm9vay1zZWxlY3QtY29udGFpbmVyJyB9KTtcclxuICAgICAgICB0aGlzLmJvb2tTZWxlY3QgPSBib29rU2VsZWN0Q29udGFpbmVyLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2Jvb2stc2VsZWN0LWRyb3Bkb3duJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDRDk0XHVBQzAwIFx1QkM4NFx1RDJCQ1xyXG4gICAgICAgIGNvbnN0IGFkZEJvb2tCdXR0b24gPSBib29rU2VsZWN0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVDRDk0XHVBQzAwJyxcclxuICAgICAgICAgICAgY2xzOiAnYWRkLWJvb2stYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFkZEJvb2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLm9wZW5BZGRCb29rTW9kYWwoKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVCb29rU2VsZWN0KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5ib29rU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQm9va0lkID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnNldEN1cnJlbnRCb29rKHNlbGVjdGVkQm9va0lkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMSBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYm9va0NyZWF0ZWQnLCB0aGlzLmhhbmRsZUJvb2tDcmVhdGVkLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAvLyBcdUM4MUNcdUJBQTlcclxuICAgICAgICBjb25zdCB0aXRsZUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMTI0XHVCQTg1XHJcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNEOTRcdUFDMDBcdUQ1NjAgXHVDNjAxXHVCMkU4XHVDNUI0XHVCNEU0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4gXHVBQzAxIFx1QjJFOFx1QzVCNFx1QjI5NCBcdUMwQzggXHVDOTA0XHVCODVDIFx1QUQ2Q1x1QkQ4NFx1QjQyOVx1QjJDOFx1QjJFNC4nLFxyXG4gICAgICAgICAgICBjbHM6ICdtb2RhbC1kZXNjcmlwdGlvbidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVDNzg1XHVCODI1IFx1QzYwMVx1QzVFRFxyXG4gICAgICAgIGNvbnN0IGlucHV0U2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdpbnB1dC1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGlucHV0U2VjdGlvbi5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnYmVhdXRpZnVsXFxuaGFwcHlcXG5sZWFyblxcbnN0dWR5XFxud29ya1xcbi4uLicsXHJcbiAgICAgICAgICAgIGNsczogJ3dvcmRzLXRleHRhcmVhJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZSgncm93cycsICcxMCcpO1xyXG5cclxuICAgICAgICAvLyBcdUM2MDhcdUMyREMgXHVCQzg0XHVEMkJDXHJcbiAgICAgICAgY29uc3QgZXhhbXBsZUJ0biA9IGlucHV0U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QzYwOFx1QzJEQyBcdUIyRThcdUM1QjRcdUI0RTQgXHVCRDg4XHVCN0VDXHVDNjI0XHVBRTMwJyxcclxuICAgICAgICAgICAgY2xzOiAnZXhhbXBsZS1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXhhbXBsZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSAnYmVhdXRpZnVsXFxuaGFwcHlcXG5sZWFyblxcbnN0dWR5XFxud29ya1xcbmltcG9ydGFudFxcbnN1Y2Nlc3NcXG5rbm93bGVkZ2VcXG5leHBlcmllbmNlXFxuZnJlZWRvbSc7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QkM4NFx1RDJCQyBcdUM2MDFcdUM1RURcclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2FkZC1idXR0b24gcHJpbWFyeSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmFkZFdvcmRzKHRleHRhcmVhLnZhbHVlLCB0aGlzLmJvb2tTZWxlY3QudmFsdWUpKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcbiAgICAgICAgLy8gXHVDOUM0XHVENTg5IFx1QzBDMVx1RDY2OSBcdUQ0NUNcdUMyREMgXHVDNjAxXHVDNUVEXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IHByb2dyZXNzU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTU4XHVCMjk0IFx1QzkxMS4uLicsXHJcbiAgICAgICAgICAgIGNsczogJ3Byb2dyZXNzLXRleHQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBwcm9ncmVzc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtYmFyJyB9KTtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc0ZpbGwgPSBwcm9ncmVzc0Jhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1maWxsJyB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVBQ0IwXHVBQ0ZDIFx1RDQ1Q1x1QzJEQyBcdUM2MDFcdUM1RURcclxuICAgICAgICBjb25zdCByZXN1bHRTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1zZWN0aW9uJyB9KTtcclxuICAgICAgICByZXN1bHRTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG4gICAgICAgIC8vIEVudGVyIFx1RDBBNFx1Qjg1QyBcdUNEOTRcdUFDMDAgXHVBQzAwXHVCMkE1XHVENTU4XHVCM0M0XHVCODVEXHJcbiAgICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmN0cmxLZXkgJiYgZS5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkV29yZHModGV4dGFyZWEudmFsdWUsIHRoaXMuYm9va1NlbGVjdC52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVEM0VDXHVDRUU0XHVDMkE0IFx1QzEyNFx1QzgxNVxyXG4gICAgICAgIHRleHRhcmVhLmZvY3VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBhZGRXb3JkcyhpbnB1dFRleHQ6IHN0cmluZywgYm9va0lkOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSB0aGlzLnBhcnNlV29yZHMoaW5wdXRUZXh0KTtcclxuICAgICAgICBpZiAod29yZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Q0Q5NFx1QUMwMFx1RDU2MCBcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zaG93UHJvZ3Jlc3Mod29yZHMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHtcclxuICAgICAgICAgICAgc3VjY2VzczogW10gYXMgc3RyaW5nW10sXHJcbiAgICAgICAgICAgIGZhaWxlZDogW10gYXMgc3RyaW5nW10sXHJcbiAgICAgICAgICAgIGFscmVhZHlFeGlzdHM6IFtdIGFzIHN0cmluZ1tdXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkID0gd29yZHNbaV07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUM5QzRcdUQ1ODlcdUI5NjAgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3MoaSArIDEsIHdvcmRzLmxlbmd0aCwgYFx1Q0M5OFx1QjlBQyBcdUM5MTE6ICR7d29yZH1gKTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0XHVDOUMwIFx1RDY1NVx1Qzc3OFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdXb3JkID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmQod29yZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdXb3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5hbHJlYWR5RXhpc3RzLnB1c2god29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhID0gYXdhaXQgdGhpcy53b3JkU2VydmljZS5nZXRXb3JkRGF0YSh3b3JkKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gV29yZERhdGFcdUI5N0MgVm9jYWJ1bGFyeUNhcmRcdUI4NUMgXHVCQ0MwXHVENjU4XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2b2NhYnVsYXJ5Q2FyZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAuLi53b3JkRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICByZXZpZXdDb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5OiAnZ29vZCcgYXMgY29uc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJldmlld2VkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGFkZGVkRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tJZDogYm9va0lkXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDAgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuYWRkV29yZCh2b2NhYnVsYXJ5Q2FyZCk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzLnN1Y2Nlc3MucHVzaCh3b3JkKTtcclxuXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCIgXHVDRDk0XHVBQzAwIFx1QzJFNFx1RDMyODpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHdvcmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmhpZGVQcm9ncmVzcygpO1xyXG4gICAgICAgIHRoaXMuc2hvd1Jlc3VsdHMocmVzdWx0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZVdvcmRzKGlucHV0VGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiBpbnB1dFRleHRcclxuICAgICAgICAgICAgLnNwbGl0KCdcXG4nKVxyXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gd29yZC50cmltKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgIC5tYXAod29yZCA9PiB3b3JkLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKHdvcmQsIGluZGV4LCBhcnJheSkgPT4gYXJyYXkuaW5kZXhPZih3b3JkKSA9PT0gaW5kZXgpOyAvLyBcdUM5MTFcdUJDRjUgXHVDODFDXHVBQzcwXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93UHJvZ3Jlc3ModG90YWxXb3JkczogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBcclxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NThcdUIyOTQgXHVDOTExLi4uICgwLyR7dG90YWxXb3Jkc30pYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVByb2dyZXNzKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc0ZpbGwgPSBwcm9ncmVzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLWZpbGwnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gKGN1cnJlbnQgLyB0b3RhbCkgKiAxMDA7XHJcbiAgICAgICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYCR7bWVzc2FnZX0gKCR7Y3VycmVudH0vJHt0b3RhbH0pYDtcclxuICAgICAgICBwcm9ncmVzc0ZpbGwuc3R5bGUud2lkdGggPSBgJHtwZXJjZW50YWdlfSVgO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGlkZVByb2dyZXNzKCkge1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93UmVzdWx0cyhyZXN1bHRzOiB7IHN1Y2Nlc3M6IHN0cmluZ1tdOyBmYWlsZWQ6IHN0cmluZ1tdOyBhbHJlYWR5RXhpc3RzOiBzdHJpbmdbXSB9KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0U2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHJlc3VsdFNlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5lbXB0eSgpO1xyXG5cclxuICAgICAgICBjb25zdCB0b3RhbFByb2Nlc3NlZCA9IHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggKyByZXN1bHRzLmZhaWxlZC5sZW5ndGggKyByZXN1bHRzLmFscmVhZHlFeGlzdHMubGVuZ3RoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QUNCMFx1QUNGQyBcdUM2OTRcdUM1N0RcclxuICAgICAgICBjb25zdCBzdW1tYXJ5RWwgPSByZXN1bHRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdHMtc3VtbWFyeScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSBzdWNjZXNzJyB9KTtcclxuICAgICAgICAgICAgc3VjY2Vzc0VsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI3MDUgXHVDMTMxXHVBQ0Y1OiAke3Jlc3VsdHMuc3VjY2Vzcy5sZW5ndGh9XHVBQzFDYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoIDw9IDUpIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5zdWNjZXNzLmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZXN1bHRzLmFscmVhZHlFeGlzdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdHNFbCA9IHN1bW1hcnlFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtaXRlbSB3YXJuaW5nJyB9KTtcclxuICAgICAgICAgICAgZXhpc3RzRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1MjZBMFx1RkUwRiBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDOiAke3Jlc3VsdHMuYWxyZWFkeUV4aXN0cy5sZW5ndGh9XHVBQzFDYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmFscmVhZHlFeGlzdHMubGVuZ3RoIDw9IDUpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0c0VsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLmFscmVhZHlFeGlzdHMuam9pbignLCAnKSxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtd29yZHMnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlc3VsdHMuZmFpbGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZmFpbGVkRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gZXJyb3InIH0pO1xyXG4gICAgICAgICAgICBmYWlsZWRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNzRDIFx1QzJFNFx1RDMyODogJHtyZXN1bHRzLmZhaWxlZC5sZW5ndGh9XHVBQzFDYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmZhaWxlZC5sZW5ndGggPD0gNSkge1xyXG4gICAgICAgICAgICAgICAgZmFpbGVkRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuZmFpbGVkLmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QkM4NFx1RDJCQ1x1QjRFNFxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSByZXN1bHRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1idXR0b25zJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRUJcdUFFMzAnLFxyXG4gICAgICAgICAgICBjbHM6ICdjbG9zZS1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG5cclxuICAgICAgICBjb25zdCBhZGRNb3JlQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjM1NCBcdUNEOTRcdUFDMDBcdUQ1NThcdUFFMzAnLFxyXG4gICAgICAgICAgICBjbHM6ICdhZGQtbW9yZS1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYWRkTW9yZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgcmVzdWx0U2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy53b3Jkcy10ZXh0YXJlYScpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLmZvY3VzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QzEzMVx1QUNGNVx1RDU1QyBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNzg4XHVDNzNDXHVCQTc0IFx1QzU0Q1x1QjlCQ1xyXG4gICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGAke3Jlc3VsdHMuc3VjY2Vzcy5sZW5ndGh9XHVBQzFDXHVDNzU4IFx1QjJFOFx1QzVCNFx1QUMwMCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDRDk0XHVBQzAwXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0IWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzBcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdib29rQ3JlYXRlZCcsIHRoaXMuaGFuZGxlQm9va0NyZWF0ZWQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvcGVuQWRkQm9va01vZGFsKCkge1xyXG4gICAgICAgIG5ldyBBZGRCb29rTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKS5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVCb29rQ3JlYXRlZChldmVudDogQ3VzdG9tRXZlbnQpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUJvb2tTZWxlY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUJvb2tTZWxlY3QoKSB7XHJcbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1Q0Q1Q1x1QzJFMCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGJvb2tzID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbEJvb2tzKCk7XHJcbiAgICAgICAgdGhpcy5ib29rU2VsZWN0LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGJvb2tzLmZvckVhY2goYm9vayA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBib29rLmlkO1xyXG4gICAgICAgICAgICBvcHRpb24udGV4dCA9IGJvb2submFtZTtcclxuICAgICAgICAgICAgdGhpcy5ib29rU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0gIiwgImV4cG9ydCB0eXBlIENvbnN0cnVjdG9yPFQgPSB7fT4gPSBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xuZXhwb3J0IHR5cGUgRmFjdG9yeTxUID0gYW55PiA9ICguLi5hcmdzOiBhbnlbXSkgPT4gVDtcblxuZXhwb3J0IGludGVyZmFjZSBTZXJ2aWNlRGVmaW5pdGlvbjxUID0gYW55PiB7XG4gICAgaW1wbGVtZW50YXRpb246IENvbnN0cnVjdG9yPFQ+IHwgRmFjdG9yeTxUPjtcbiAgICBzaW5nbGV0b24/OiBib29sZWFuO1xuICAgIGRlcGVuZGVuY2llcz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgY2xhc3MgRElDb250YWluZXIge1xuICAgIHByaXZhdGUgc2VydmljZXMgPSBuZXcgTWFwPHN0cmluZywgU2VydmljZURlZmluaXRpb24+KCk7XG4gICAgcHJpdmF0ZSBpbnN0YW5jZXMgPSBuZXcgTWFwPHN0cmluZywgYW55PigpO1xuXG4gICAgcmVnaXN0ZXI8VD4oXG4gICAgICAgIG5hbWU6IHN0cmluZywgXG4gICAgICAgIGltcGxlbWVudGF0aW9uOiBDb25zdHJ1Y3RvcjxUPiB8IEZhY3Rvcnk8VD4sXG4gICAgICAgIG9wdGlvbnM6IHsgc2luZ2xldG9uPzogYm9vbGVhbjsgZGVwZW5kZW5jaWVzPzogc3RyaW5nW10gfSA9IHt9XG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VydmljZXMuc2V0KG5hbWUsIHtcbiAgICAgICAgICAgIGltcGxlbWVudGF0aW9uLFxuICAgICAgICAgICAgc2luZ2xldG9uOiBvcHRpb25zLnNpbmdsZXRvbiA/PyB0cnVlLFxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBvcHRpb25zLmRlcGVuZGVuY2llcyA/PyBbXVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXNvbHZlPFQ+KG5hbWU6IHN0cmluZyk6IFQge1xuICAgICAgICBjb25zdCBzZXJ2aWNlID0gdGhpcy5zZXJ2aWNlcy5nZXQobmFtZSk7XG4gICAgICAgIGlmICghc2VydmljZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTZXJ2aWNlICcke25hbWV9JyBub3QgcmVnaXN0ZXJlZGApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDMkYxXHVBRTAwXHVEMUE0XHVDNzc0XHVBQ0UwIFx1Qzc3NFx1QkJGOCBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTRcdUFDMDAgXHVDNzg4XHVDNzNDXHVCQTc0IFx1QkMxOFx1RDY1OFxuICAgICAgICBpZiAoc2VydmljZS5zaW5nbGV0b24gJiYgdGhpcy5pbnN0YW5jZXMuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuZ2V0KG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDNzU4XHVDODc0XHVDMTMxIFx1RDU3NFx1QUNCMFxuICAgICAgICBjb25zdCBkZXBlbmRlbmNpZXMgPSBzZXJ2aWNlLmRlcGVuZGVuY2llcy5tYXAoZGVwID0+IHRoaXMucmVzb2x2ZShkZXApKTtcblxuICAgICAgICAvLyBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTQgXHVDMEREXHVDMTMxXG4gICAgICAgIGxldCBpbnN0YW5jZTogVDtcbiAgICAgICAgaWYgKHRoaXMuaXNDb25zdHJ1Y3RvcihzZXJ2aWNlLmltcGxlbWVudGF0aW9uKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UgPSBuZXcgc2VydmljZS5pbXBsZW1lbnRhdGlvbiguLi5kZXBlbmRlbmNpZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2UgPSBzZXJ2aWNlLmltcGxlbWVudGF0aW9uKC4uLmRlcGVuZGVuY2llcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUMyRjFcdUFFMDBcdUQxQTRcdUM3NzRcdUJBNzQgXHVDNzc4XHVDMkE0XHVEMTM0XHVDMkE0IFx1QzgwMFx1QzdBNVxuICAgICAgICBpZiAoc2VydmljZS5zaW5nbGV0b24pIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChuYW1lLCBpbnN0YW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJJbnN0YW5jZTxUPihuYW1lOiBzdHJpbmcsIGluc3RhbmNlOiBUKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChuYW1lLCBpbnN0YW5jZSk7XG4gICAgICAgIHRoaXMuc2VydmljZXMuc2V0KG5hbWUsIHtcbiAgICAgICAgICAgIGltcGxlbWVudGF0aW9uOiAoKSA9PiBpbnN0YW5jZSxcbiAgICAgICAgICAgIHNpbmdsZXRvbjogdHJ1ZSxcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogW11cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGFzKG5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlcy5oYXMobmFtZSk7XG4gICAgfVxuXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VydmljZXMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQ29uc3RydWN0b3IoaW1wbGVtZW50YXRpb246IGFueSk6IGltcGxlbWVudGF0aW9uIGlzIENvbnN0cnVjdG9yIHtcbiAgICAgICAgcmV0dXJuIGltcGxlbWVudGF0aW9uLnByb3RvdHlwZSAmJiBpbXBsZW1lbnRhdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPT09IGltcGxlbWVudGF0aW9uO1xuICAgIH1cbn1cblxuLy8gXHVBRTAwXHVCODVDXHVCQzhDIFx1Q0VFOFx1RDE0Q1x1Qzc3NFx1QjEwOCBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTRcbmV4cG9ydCBjb25zdCBjb250YWluZXIgPSBuZXcgRElDb250YWluZXIoKTsiLCAiaW1wb3J0IHsgRGlmZmljdWx0eSwgRXhhbXBsZSB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWIvdHlwZXMnO1xuXG4vLyBcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNCBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTRcbmV4cG9ydCBpbnRlcmZhY2UgV29yZERhdGEge1xuICAgIHdvcmQ6IHN0cmluZztcbiAgICBwcm9udW5jaWF0aW9uOiBzdHJpbmc7XG4gICAgbWVhbmluZ3M6IHN0cmluZ1tdO1xuICAgIHNpbWlsYXJXb3Jkczogc3RyaW5nW107XG4gICAgZXhhbXBsZXM6IEV4YW1wbGVbXTtcbn1cblxuLy8gXHVCMkU4XHVDNUI0IFx1Q0U3NFx1QjREQyBcdUM1RDRcdUQyRjBcdUQyRjBcbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5Q2FyZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyByZWFkb25seSB3b3JkOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBwcm9udW5jaWF0aW9uOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBtZWFuaW5nczogc3RyaW5nW10sXG4gICAgICAgIHB1YmxpYyBzaW1pbGFyV29yZHM6IHN0cmluZ1tdLFxuICAgICAgICBwdWJsaWMgZXhhbXBsZXM6IEV4YW1wbGVbXSxcbiAgICAgICAgcHVibGljIHJldmlld0NvdW50OiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBkaWZmaWN1bHR5OiBEaWZmaWN1bHR5LFxuICAgICAgICBwdWJsaWMgbGFzdFJldmlld2VkOiBzdHJpbmcgfCBudWxsLFxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgYWRkZWREYXRlOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBib29rSWQ6IHN0cmluZ1xuICAgICkge31cblxuICAgIC8vIFx1RDMyOVx1RDFBMFx1QjlBQyBcdUJBNTRcdUMxMUNcdUI0REM6IFdvcmREYXRhXHVCODVDXHVCRDgwXHVEMTMwIFZvY2FidWxhcnlDYXJkIFx1QzBERFx1QzEzMVxuICAgIHN0YXRpYyBmcm9tV29yZERhdGEod29yZERhdGE6IFdvcmREYXRhLCBib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcbiAgICAgICAgICAgIHdvcmREYXRhLndvcmQsXG4gICAgICAgICAgICB3b3JkRGF0YS5wcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgd29yZERhdGEubWVhbmluZ3MsXG4gICAgICAgICAgICB3b3JkRGF0YS5zaW1pbGFyV29yZHMsXG4gICAgICAgICAgICB3b3JkRGF0YS5leGFtcGxlcyxcbiAgICAgICAgICAgIDAsIC8vIFx1Q0QwOFx1QUUzMCBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4XG4gICAgICAgICAgICAnZ29vZCcsIC8vIFx1Q0QwOFx1QUUzMCBcdUIwOUNcdUM3NzRcdUIzQzRcbiAgICAgICAgICAgIG51bGwsIC8vIFx1Q0QwOFx1QUUzMCBcdUJDRjVcdUMyQjUgXHVCMEEwXHVDOURDXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIC8vIFx1Q0Q5NFx1QUMwMCBcdUIwQTBcdUM5RENcbiAgICAgICAgICAgIGJvb2tJZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QkNGNVx1QzJCNSBcdUMyMThcdUQ1ODlcbiAgICByZXZpZXcobmV3RGlmZmljdWx0eTogRGlmZmljdWx0eSk6IFZvY2FidWxhcnlDYXJkIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcbiAgICAgICAgICAgIHRoaXMud29yZCxcbiAgICAgICAgICAgIHRoaXMucHJvbnVuY2lhdGlvbixcbiAgICAgICAgICAgIHRoaXMubWVhbmluZ3MsXG4gICAgICAgICAgICB0aGlzLnNpbWlsYXJXb3JkcyxcbiAgICAgICAgICAgIHRoaXMuZXhhbXBsZXMsXG4gICAgICAgICAgICB0aGlzLnJldmlld0NvdW50ICsgMSxcbiAgICAgICAgICAgIG5ld0RpZmZpY3VsdHksXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB0aGlzLmFkZGVkRGF0ZSxcbiAgICAgICAgICAgIHRoaXMuYm9va0lkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICB1cGRhdGVXb3JkRGF0YSh3b3JkRGF0YTogUGFydGlhbDxXb3JkRGF0YT4pOiBWb2NhYnVsYXJ5Q2FyZCB7XG4gICAgICAgIHJldHVybiBuZXcgVm9jYWJ1bGFyeUNhcmQoXG4gICAgICAgICAgICB0aGlzLndvcmQsXG4gICAgICAgICAgICB3b3JkRGF0YS5wcm9udW5jaWF0aW9uID8/IHRoaXMucHJvbnVuY2lhdGlvbixcbiAgICAgICAgICAgIHdvcmREYXRhLm1lYW5pbmdzID8/IHRoaXMubWVhbmluZ3MsXG4gICAgICAgICAgICB3b3JkRGF0YS5zaW1pbGFyV29yZHMgPz8gdGhpcy5zaW1pbGFyV29yZHMsXG4gICAgICAgICAgICB3b3JkRGF0YS5leGFtcGxlcyA/PyB0aGlzLmV4YW1wbGVzLFxuICAgICAgICAgICAgdGhpcy5yZXZpZXdDb3VudCxcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSxcbiAgICAgICAgICAgIHRoaXMubGFzdFJldmlld2VkLFxuICAgICAgICAgICAgdGhpcy5hZGRlZERhdGUsXG4gICAgICAgICAgICB0aGlzLmJvb2tJZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUIzRDlcbiAgICBtb3ZlVG9Cb29rKG5ld0Jvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmQge1xuICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlDYXJkKFxuICAgICAgICAgICAgdGhpcy53b3JkLFxuICAgICAgICAgICAgdGhpcy5wcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgdGhpcy5tZWFuaW5ncyxcbiAgICAgICAgICAgIHRoaXMuc2ltaWxhcldvcmRzLFxuICAgICAgICAgICAgdGhpcy5leGFtcGxlcyxcbiAgICAgICAgICAgIHRoaXMucmV2aWV3Q291bnQsXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHksXG4gICAgICAgICAgICB0aGlzLmxhc3RSZXZpZXdlZCxcbiAgICAgICAgICAgIHRoaXMuYWRkZWREYXRlLFxuICAgICAgICAgICAgbmV3Qm9va0lkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCQ0Y1XHVDMkI1XHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU1Q1x1QzlDMCBcdUQ2NTVcdUM3NzhcbiAgICBuZWVkc1JldmlldyhyZXZpZXdJbnRlcnZhbDogbnVtYmVyID0gMSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXRoaXMubGFzdFJldmlld2VkKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxhc3RSZXZpZXdEYXRlID0gbmV3IERhdGUodGhpcy5sYXN0UmV2aWV3ZWQpO1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBkYXlzRGlmZiA9IE1hdGguZmxvb3IoKG5vdy5nZXRUaW1lKCkgLSBsYXN0UmV2aWV3RGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QjA5Q1x1Qzc3NFx1QjNDNFx1QzVEMCBcdUI1MzBcdUI5NzggXHVCQ0Y1XHVDMkI1IFx1QzhGQ1x1QUUzMCBcdUM4NzBcdUM4MTVcbiAgICAgICAgY29uc3QgZGlmZmljdWx0eU11bHRpcGxpZXIgPSB7XG4gICAgICAgICAgICAnaGFyZCc6IDAuNSxcbiAgICAgICAgICAgICdnb29kJzogMSxcbiAgICAgICAgICAgICdlYXN5JzogMlxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWRqdXN0ZWRJbnRlcnZhbCA9IHJldmlld0ludGVydmFsICogZGlmZmljdWx0eU11bHRpcGxpZXJbdGhpcy5kaWZmaWN1bHR5XTtcbiAgICAgICAgcmV0dXJuIGRheXNEaWZmID49IGFkanVzdGVkSW50ZXJ2YWw7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVENTU5XHVDMkI1IFx1QzlDNFx1RDU4OVx1QjNDNCBcdUFDQzRcdUMwQjAgKDAtMTAwKVxuICAgIGdldFByb2dyZXNzUGVyY2VudGFnZSgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBtYXhSZXZpZXdzID0gMTA7IC8vIFx1Q0Q1Q1x1QjMwMCBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4XG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4odGhpcy5yZXZpZXdDb3VudCAvIG1heFJldmlld3MsIDEpICogMTAwO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVCMDlDXHVDNzc0XHVCM0M0IFx1QkNGNFx1QjEwOFx1QzJBNFxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5Qm9udXMgPSB7XG4gICAgICAgICAgICAnZWFzeSc6IDIwLFxuICAgICAgICAgICAgJ2dvb2QnOiAxMCxcbiAgICAgICAgICAgICdoYXJkJzogMFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHByb2dyZXNzICsgZGlmZmljdWx0eUJvbnVzW3RoaXMuZGlmZmljdWx0eV0sIDEwMCk7XG4gICAgfVxuXG4gICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzlDMVx1QjgyQ1x1RDY1NFx1Qjk3QyBcdUM3MDRcdUQ1NUMgXHVCQTU0XHVDMTFDXHVCNERDXG4gICAgdG9QbGFpbk9iamVjdCgpOiBWb2NhYnVsYXJ5Q2FyZERhdGEge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd29yZDogdGhpcy53b3JkLFxuICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogdGhpcy5wcm9udW5jaWF0aW9uLFxuICAgICAgICAgICAgbWVhbmluZ3M6IHRoaXMubWVhbmluZ3MsXG4gICAgICAgICAgICBzaW1pbGFyV29yZHM6IHRoaXMuc2ltaWxhcldvcmRzLFxuICAgICAgICAgICAgZXhhbXBsZXM6IHRoaXMuZXhhbXBsZXMsXG4gICAgICAgICAgICByZXZpZXdDb3VudDogdGhpcy5yZXZpZXdDb3VudCxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eSxcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogdGhpcy5sYXN0UmV2aWV3ZWQsXG4gICAgICAgICAgICBhZGRlZERhdGU6IHRoaXMuYWRkZWREYXRlLFxuICAgICAgICAgICAgYm9va0lkOiB0aGlzLmJvb2tJZFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1QUM4MFx1Qzk5RCBcdUI4NUNcdUM5QzFcbiAgICB2YWxpZGF0ZSgpOiBzdHJpbmdbXSB7XG4gICAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy53b3JkIHx8IHRoaXMud29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVBQzAwIFx1Qzc4NVx1QjgyNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLm1lYW5pbmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1Qzc1OCBcdUI3M0JcdUM3NzQgXHVENTU4XHVCMDk4IFx1Qzc3NFx1QzBDMSBcdUQ1NDRcdUM2OTRcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5ib29rSWQgfHwgdGhpcy5ib29rSWQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1QzdBNSBJRFx1QUMwMCBcdUQ1NDRcdUM2OTRcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxuXG4gICAgc3RhdGljIGNyZWF0ZShkYXRhOiB7XG4gICAgICAgIHdvcmQ6IHN0cmluZztcbiAgICAgICAgbWVhbmluZzogc3RyaW5nO1xuICAgICAgICBwcm9udW5jaWF0aW9uPzogc3RyaW5nO1xuICAgICAgICBleGFtcGxlcz86IHN0cmluZ1tdO1xuICAgICAgICBib29rSWQ/OiBzdHJpbmc7XG4gICAgfSk6IFZvY2FidWxhcnlDYXJkIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWb2NhYnVsYXJ5Q2FyZChcbiAgICAgICAgICAgIGRhdGEud29yZCxcbiAgICAgICAgICAgIGRhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcbiAgICAgICAgICAgIFtkYXRhLm1lYW5pbmddLCAvLyBtZWFuaW5ncyBhcnJheVxuICAgICAgICAgICAgW10sIC8vIHNpbWlsYXJXb3Jkc1xuICAgICAgICAgICAgZGF0YS5leGFtcGxlcz8ubWFwKGV4ID0+ICh7IGVuZ2xpc2g6IGV4LCBrb3JlYW46ICcnIH0pKSB8fCBbXSwgLy8gZXhhbXBsZXMgd2l0aCBFeGFtcGxlIHR5cGVcbiAgICAgICAgICAgIDAsIC8vIHJldmlld0NvdW50XG4gICAgICAgICAgICAnZ29vZCcsIC8vIGRpZmZpY3VsdHlcbiAgICAgICAgICAgIG51bGwsIC8vIGxhc3RSZXZpZXdlZFxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCAvLyBhZGRlZERhdGVcbiAgICAgICAgICAgIGRhdGEuYm9va0lkIHx8ICdkZWZhdWx0J1xuICAgICAgICApO1xuICAgIH1cbn1cblxuLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwNFx1QzFBMVx1QzZBOSBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTQgKFx1QUUzMFx1Qzg3NCBcdUQ2MzhcdUQ2NThcdUMxMzEgXHVDNzIwXHVDOUMwKVxuZXhwb3J0IGludGVyZmFjZSBWb2NhYnVsYXJ5Q2FyZERhdGEgZXh0ZW5kcyBXb3JkRGF0YSB7XG4gICAgcmV2aWV3Q291bnQ6IG51bWJlcjtcbiAgICBkaWZmaWN1bHR5OiBEaWZmaWN1bHR5O1xuICAgIGxhc3RSZXZpZXdlZDogc3RyaW5nIHwgbnVsbDtcbiAgICBhZGRlZERhdGU6IHN0cmluZztcbiAgICBib29rSWQ6IHN0cmluZztcbn1cblxuLy8gXHVBQzgwXHVDMEM5IFx1QUNCMFx1QUNGQyBcdUQwQzBcdUM3ODVcbmV4cG9ydCBpbnRlcmZhY2UgU2VhcmNoUmVzdWx0IHtcbiAgICBjYXJkczogVm9jYWJ1bGFyeUNhcmRbXTtcbiAgICB0b3RhbENvdW50OiBudW1iZXI7XG4gICAgaGFzTW9yZTogYm9vbGVhbjtcbn0gIiwgImltcG9ydCB7IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL3JlcG9zaXRvcmllcy9JVm9jYWJ1bGFyeVJlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBJQm9va1JlcG9zaXRvcnkgfSBmcm9tICcuLi9wb3J0cy9yZXBvc2l0b3JpZXMvSUJvb2tSZXBvc2l0b3J5JztcclxuaW1wb3J0IHsgSVdvcmRTZXJ2aWNlIH0gZnJvbSAnLi4vcG9ydHMvc2VydmljZXMvSVdvcmRTZXJ2aWNlJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuLi9lbnRpdGllcy9Wb2NhYnVsYXJ5JztcclxuaW1wb3J0IHsgV29yZEFkZGVkRXZlbnQgfSBmcm9tICcuLi8uLi9zaGFyZWQvbGliL3R5cGVzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWRkV29yZFJlcXVlc3Qge1xyXG4gICAgd29yZDogc3RyaW5nO1xyXG4gICAgYm9va0lkPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFkZFdvcmRSZXNwb25zZSB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgY2FyZD86IFZvY2FidWxhcnlDYXJkO1xyXG4gICAgZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRXb3JkVXNlQ2FzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHZvY2FidWxhcnlSZXBvc2l0b3J5OiBJVm9jYWJ1bGFyeVJlcG9zaXRvcnksXHJcbiAgICAgICAgcHJpdmF0ZSBib29rUmVwb3NpdG9yeTogSUJvb2tSZXBvc2l0b3J5LFxyXG4gICAgICAgIHByaXZhdGUgd29yZFNlcnZpY2U6IElXb3JkU2VydmljZVxyXG4gICAgKSB7fVxyXG5cclxuICAgIGFzeW5jIGV4ZWN1dGUocmVxdWVzdDogQWRkV29yZFJlcXVlc3QpOiBQcm9taXNlPEFkZFdvcmRSZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIDEuIFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OURcclxuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0LndvcmQgfHwgcmVxdWVzdC53b3JkLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmQgPSByZXF1ZXN0LndvcmQudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBcdUM5MTFcdUJDRjUgXHVENjU1XHVDNzc4XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nV29yZCA9IGF3YWl0IHRoaXMudm9jYWJ1bGFyeVJlcG9zaXRvcnkuZmluZEJ5V29yZCh3b3JkKTtcclxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nV29yZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTQgXHVCMkU4XHVDNUI0XHVDNzg1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDMuIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQ2NTVcdUM3NzggXHVCQzBGIFx1QzEyNFx1QzgxNVxyXG4gICAgICAgICAgICBsZXQgYm9va0lkID0gcmVxdWVzdC5ib29rSWQ7XHJcbiAgICAgICAgICAgIGlmICghYm9va0lkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IGF3YWl0IHRoaXMuYm9va1JlcG9zaXRvcnkuZ2V0Q3VycmVudEJvb2soKTtcclxuICAgICAgICAgICAgICAgIGJvb2tJZCA9IGN1cnJlbnRCb29rPy5pZCB8fCAnZGVmYXVsdCc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCB0aGlzLmJvb2tSZXBvc2l0b3J5LmZpbmRCeUlkKGJvb2tJZCk7XHJcbiAgICAgICAgICAgIGlmICghYm9vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1Qzc0NCBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyA0LiBcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IGF3YWl0IHRoaXMud29yZFNlcnZpY2UuZ2V0V29yZERhdGEod29yZCk7XHJcblxyXG4gICAgICAgICAgICAvLyA1LiBWb2NhYnVsYXJ5Q2FyZCBcdUMwRERcdUMxMzFcclxuICAgICAgICAgICAgY29uc3Qgdm9jYWJ1bGFyeUNhcmQgPSBWb2NhYnVsYXJ5Q2FyZC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgd29yZDogd29yZERhdGEud29yZCxcclxuICAgICAgICAgICAgICAgIG1lYW5pbmc6IHdvcmREYXRhLm1lYW5pbmcsXHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkRGF0YS5wcm9udW5jaWF0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IHdvcmREYXRhLmV4YW1wbGVzIHx8IFtdLFxyXG4gICAgICAgICAgICAgICAgYm9va0lkOiBib29rSWRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyA2LiBcdUFDODBcdUM5OURcclxuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9ycyA9IHZvY2FidWxhcnlDYXJkLnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHZhbGlkYXRpb25FcnJvcnMuam9pbignLCAnKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gNy4gXHVDODAwXHVDN0E1XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudm9jYWJ1bGFyeVJlcG9zaXRvcnkuYWRkKHZvY2FidWxhcnlDYXJkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIDguIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUJDMUNcdUMwRERcclxuICAgICAgICAgICAgY29uc3QgZXZlbnQ6IFdvcmRBZGRlZEV2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ1dPUkRfQURERUQnLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZDogdm9jYWJ1bGFyeUNhcmQud29yZCxcclxuICAgICAgICAgICAgICAgICAgICBib29rSWQ6IHZvY2FidWxhcnlDYXJkLmJvb2tJZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERCAoXHVDMkU0XHVDODFDIFx1QUQ2Q1x1RDYwNFx1QzVEMFx1QzExQ1x1QjI5NCBFdmVudEJ1cyBcdUMwQUNcdUM2QTkpXHJcbiAgICAgICAgICAgIHRoaXMucHVibGlzaEV2ZW50KGV2ZW50KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FyZDogdm9jYWJ1bGFyeUNhcmRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQWRkV29yZFVzZUNhc2UgXHVDMkU0XHVENTg5IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHVibGlzaEV2ZW50KGV2ZW50OiBXb3JkQWRkZWRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Qzc4NFx1QzJEQyBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgRXZlbnRCdXNcdUI4NUMgXHVBRDUwXHVDQ0I0XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3dvcmRBZGRlZCcsIHsgZGV0YWlsOiBldmVudC5kYXRhIH0pO1xyXG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xyXG4gICAgfVxyXG59ICIsICIvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNUQ0XHVEMkYwXHVEMkYwXG5leHBvcnQgY2xhc3MgQm9vayB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBpZDogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgbmFtZTogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGNyZWF0ZWRBdDogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgdXBkYXRlZEF0OiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyB3b3JkQ291bnQ6IG51bWJlcixcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGlzRGVmYXVsdDogYm9vbGVhblxuICAgICkge31cblxuICAgIC8vIFx1RDMyOVx1RDFBMFx1QjlBQyBcdUJBNTRcdUMxMUNcdUI0REM6IFx1QzBDOCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxXG4gICAgc3RhdGljIGNyZWF0ZShuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcgPSAnJywgaXNEZWZhdWx0OiBib29sZWFuID0gZmFsc2UpOiBCb29rIHtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICBjb25zdCBpZCA9IGlzRGVmYXVsdCA/ICdkZWZhdWx0JyA6IEJvb2suZ2VuZXJhdGVJZCgpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBub3csXG4gICAgICAgICAgICBub3csXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgaXNEZWZhdWx0XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVEMzI5XHVEMUEwXHVCOUFDIFx1QkE1NFx1QzExQ1x1QjREQzogXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzFcbiAgICBzdGF0aWMgY3JlYXRlRGVmYXVsdCgpOiBCb29rIHtcbiAgICAgICAgcmV0dXJuIEJvb2suY3JlYXRlKCdcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1JywgJ1x1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTVcdUM3ODVcdUIyQzhcdUIyRTQuJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzgxNVx1QkNGNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICB1cGRhdGVJbmZvKG5hbWU/OiBzdHJpbmcsIGRlc2NyaXB0aW9uPzogc3RyaW5nKTogQm9vayB7XG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcbiAgICAgICAgICAgIHRoaXMuaWQsXG4gICAgICAgICAgICBuYW1lID8/IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID8/IHRoaXMuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIHRoaXMud29yZENvdW50LFxuICAgICAgICAgICAgdGhpcy5pc0RlZmF1bHRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjQgXHVDMjE4IFx1Qzk5RFx1QUMwMFxuICAgIGluY3JlbWVudFdvcmRDb3VudCgpOiBCb29rIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxuICAgICAgICAgICAgdGhpcy5pZCxcbiAgICAgICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIHRoaXMud29yZENvdW50ICsgMSxcbiAgICAgICAgICAgIHRoaXMuaXNEZWZhdWx0XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0IFx1QzIxOCBcdUFDMTBcdUMxOENcbiAgICBkZWNyZW1lbnRXb3JkQ291bnQoKTogQm9vayB7XG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcbiAgICAgICAgICAgIHRoaXMuaWQsXG4gICAgICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkQXQsXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBNYXRoLm1heCgwLCB0aGlzLndvcmRDb3VudCAtIDEpLFxuICAgICAgICAgICAgdGhpcy5pc0RlZmF1bHRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjQgXHVDMjE4IFx1QzdBQ1x1QzEyNFx1QzgxNVxuICAgIHVwZGF0ZVdvcmRDb3VudChjb3VudDogbnVtYmVyKTogQm9vayB7XG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcbiAgICAgICAgICAgIHRoaXMuaWQsXG4gICAgICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkQXQsXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBNYXRoLm1heCgwLCBjb3VudCksXG4gICAgICAgICAgICB0aGlzLmlzRGVmYXVsdFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QzBBRFx1QzgxQyBcdUFDMDBcdUIyQTUgXHVDNUVDXHVCRDgwIFx1RDY1NVx1Qzc3OFxuICAgIGNhbkJlRGVsZXRlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzRGVmYXVsdDtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NzQgXHVCRTQ0XHVDNUI0XHVDNzg4XHVCMjk0XHVDOUMwIFx1RDY1NVx1Qzc3OFxuICAgIGlzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLndvcmRDb3VudCA9PT0gMDtcbiAgICB9XG5cbiAgICAvLyBcdUFDODBcdUM5OUQgXHVCODVDXHVDOUMxXG4gICAgdmFsaWRhdGUoKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMubmFtZSB8fCB0aGlzLm5hbWUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODRcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTY5XHVCMkM4XHVCMkU0LicpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5uYW1lLnRyaW0oKS5sZW5ndGggPiAxMDApIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzQwIDEwMFx1Qzc5MFx1Qjk3QyBcdUNEMDhcdUFDRkNcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAwKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyNFx1QkE4NVx1Qzc0MCA1MDBcdUM3OTBcdUI5N0MgXHVDRDA4XHVBQ0ZDXHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLndvcmRDb3VudCA8IDApIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjQgXHVDMjE4XHVCMjk0IDAgXHVDNzc0XHVDMEMxXHVDNzc0XHVDNUI0XHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC4nKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9XG5cbiAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDOUMxXHVCODJDXHVENjU0XHVCOTdDIFx1QzcwNFx1RDU1QyBcdUJBNTRcdUMxMUNcdUI0RENcbiAgICB0b1BsYWluT2JqZWN0KCk6IEJvb2tEYXRhIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHRoaXMuY3JlYXRlZEF0LFxuICAgICAgICAgICAgdXBkYXRlZEF0OiB0aGlzLnVwZGF0ZWRBdCxcbiAgICAgICAgICAgIHdvcmRDb3VudDogdGhpcy53b3JkQ291bnQsXG4gICAgICAgICAgICBpc0RlZmF1bHQ6IHRoaXMuaXNEZWZhdWx0XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVDMEREXHVDMTMxXHVDNzdDXHVCODVDXHVCRDgwXHVEMTMwIFx1QUNCRFx1QUNGQyBcdUM3N0NcdUMyMTggXHVBQ0M0XHVDMEIwXG4gICAgZ2V0RGF5c0Zyb21DcmVhdGlvbigpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBjcmVhdGVkRGF0ZSA9IG5ldyBEYXRlKHRoaXMuY3JlYXRlZEF0KTtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKG5vdy5nZXRUaW1lKCkgLSBjcmVhdGVkRGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgICB9XG5cbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUI5QzhcdUM5QzBcdUI5QzkgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHVCODVDXHVCRDgwXHVEMTMwIFx1QUNCRFx1QUNGQyBcdUM3N0NcdUMyMTggXHVBQ0M0XHVDMEIwXG4gICAgZ2V0RGF5c0Zyb21MYXN0VXBkYXRlKCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWREYXRlID0gbmV3IERhdGUodGhpcy51cGRhdGVkQXQpO1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIHVwZGF0ZWREYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICAgIH1cblxuICAgIC8vIElEIFx1QzBERFx1QzEzMSBcdUM3MjBcdUQyRjhcdUI5QUNcdUQyRjBcbiAgICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgYm9va18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gICAgfVxufVxuXG4vLyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDODA0XHVDMUExXHVDNkE5IFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNCAoXHVBRTMwXHVDODc0IFx1RDYzOFx1RDY1OFx1QzEzMSBcdUM3MjBcdUM5QzApXG5leHBvcnQgaW50ZXJmYWNlIEJvb2tEYXRhIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGNyZWF0ZWRBdDogc3RyaW5nO1xuICAgIHVwZGF0ZWRBdDogc3RyaW5nO1xuICAgIHdvcmRDb3VudDogbnVtYmVyO1xuICAgIGlzRGVmYXVsdDogYm9vbGVhbjtcbn1cblxuLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDFCNVx1QUNDNCBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTRcbmV4cG9ydCBpbnRlcmZhY2UgQm9va1N0YXRpc3RpY3Mge1xuICAgIGJvb2s6IEJvb2s7XG4gICAgdG90YWxXb3JkczogbnVtYmVyO1xuICAgIHdvcmRzQnlEaWZmaWN1bHR5OiB7XG4gICAgICAgIGVhc3k6IG51bWJlcjtcbiAgICAgICAgZ29vZDogbnVtYmVyO1xuICAgICAgICBoYXJkOiBudW1iZXI7XG4gICAgfTtcbiAgICBhdmVyYWdlUmV2aWV3Q291bnQ6IG51bWJlcjtcbiAgICBsYXN0QWN0aXZpdHlEYXRlOiBzdHJpbmcgfCBudWxsO1xuICAgIGNvbXBsZXRpb25QZXJjZW50YWdlOiBudW1iZXI7XG59XG5cbi8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUJBQTlcdUI4NUQgXHVDNjM1XHVDMTU4XG5leHBvcnQgaW50ZXJmYWNlIEJvb2tMaXN0T3B0aW9ucyB7XG4gICAgaW5jbHVkZUVtcHR5PzogYm9vbGVhbjtcbiAgICBzb3J0Qnk/OiAnbmFtZScgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnIHwgJ3dvcmRDb3VudCc7XG4gICAgc29ydE9yZGVyPzogJ2FzYycgfCAnZGVzYyc7XG4gICAgbGltaXQ/OiBudW1iZXI7XG4gICAgb2Zmc2V0PzogbnVtYmVyO1xufSAiLCAiaW1wb3J0IHsgSUJvb2tSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcG9ydHMvcmVwb3NpdG9yaWVzL0lCb29rUmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IEJvb2sgfSBmcm9tICcuLi9lbnRpdGllcy9Cb29rJztcclxuaW1wb3J0IHsgQm9va0NyZWF0ZWRFdmVudCB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWIvdHlwZXMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVCb29rUmVxdWVzdCB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVCb29rUmVzcG9uc2Uge1xyXG4gICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgIGJvb2s/OiBCb29rO1xyXG4gICAgZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDcmVhdGVCb29rVXNlQ2FzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGJvb2tSZXBvc2l0b3J5OiBJQm9va1JlcG9zaXRvcnlcclxuICAgICkge31cclxuXHJcbiAgICBhc3luYyBleGVjdXRlKHJlcXVlc3Q6IENyZWF0ZUJvb2tSZXF1ZXN0KTogUHJvbWlzZTxDcmVhdGVCb29rUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyAxLiBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXHJcbiAgICAgICAgICAgIGlmICghcmVxdWVzdC5uYW1lIHx8IHJlcXVlc3QubmFtZS50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHJlcXVlc3QubmFtZS50cmltKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAyLiBcdUM3NzRcdUI5ODQgXHVDOTExXHVCQ0Y1IFx1RDY1NVx1Qzc3OFxyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0Jvb2tzID0gYXdhaXQgdGhpcy5ib29rUmVwb3NpdG9yeS5maW5kQWxsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGR1cGxpY2F0ZUJvb2sgPSBleGlzdGluZ0Jvb2tzLmZpbmQoYm9vayA9PiBcclxuICAgICAgICAgICAgICAgIGJvb2submFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChkdXBsaWNhdGVCb29rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzg1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDMuIEJvb2sgXHVDNUQ0XHVEMkYwXHVEMkYwIFx1QzBERFx1QzEzMVxyXG4gICAgICAgICAgICBjb25zdCBib29rID0gQm9vay5jcmVhdGUoXHJcbiAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5kZXNjcmlwdGlvbiB8fCAnJ1xyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgLy8gNC4gXHVBQzgwXHVDOTlEXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSBib29rLnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHZhbGlkYXRpb25FcnJvcnMuam9pbignLCAnKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gNS4gXHVDODAwXHVDN0E1XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYm9va1JlcG9zaXRvcnkuYWRkKGJvb2spO1xyXG5cclxuICAgICAgICAgICAgLy8gNi4gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERFxyXG4gICAgICAgICAgICBjb25zdCBldmVudDogQm9va0NyZWF0ZWRFdmVudCA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdCT09LX0NSRUFURUQnLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9va0lkOiBib29rLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGJvb2submFtZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5wdWJsaXNoRXZlbnQoZXZlbnQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBib29rOiBib29rXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NyZWF0ZUJvb2tVc2VDYXNlIFx1QzJFNFx1RDU4OSBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHB1Ymxpc2hFdmVudChldmVudDogQm9va0NyZWF0ZWRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Qzc4NFx1QzJEQyBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgRXZlbnRCdXNcdUI4NUMgXHVBRDUwXHVDQ0I0XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2Jvb2tDcmVhdGVkJywgeyBkZXRhaWw6IGV2ZW50LmRhdGEgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL0lWb2NhYnVsYXJ5UmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IElCb29rUmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL0lCb29rUmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi4vZW50aXRpZXMvVm9jYWJ1bGFyeSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdldFdvcmRzRm9yUmV2aWV3UmVxdWVzdCB7XHJcbiAgICBib29rSWQ/OiBzdHJpbmc7XHJcbiAgICBsaW1pdD86IG51bWJlcjtcclxuICAgIHJldmlld0ludGVydmFsPzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdldFdvcmRzRm9yUmV2aWV3UmVzcG9uc2Uge1xyXG4gICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgIHdvcmRzPzogVm9jYWJ1bGFyeUNhcmRbXTtcclxuICAgIHRvdGFsQ291bnQ/OiBudW1iZXI7XHJcbiAgICBlcnJvcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdldFdvcmRzRm9yUmV2aWV3VXNlQ2FzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHZvY2FidWxhcnlSZXBvc2l0b3J5OiBJVm9jYWJ1bGFyeVJlcG9zaXRvcnksXHJcbiAgICAgICAgcHJpdmF0ZSBib29rUmVwb3NpdG9yeTogSUJvb2tSZXBvc2l0b3J5XHJcbiAgICApIHt9XHJcblxyXG4gICAgYXN5bmMgZXhlY3V0ZShyZXF1ZXN0OiBHZXRXb3Jkc0ZvclJldmlld1JlcXVlc3QgPSB7fSk6IFByb21pc2U8R2V0V29yZHNGb3JSZXZpZXdSZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIDEuIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjRcdUM4MTVcclxuICAgICAgICAgICAgbGV0IGJvb2tJZCA9IHJlcXVlc3QuYm9va0lkO1xyXG4gICAgICAgICAgICBpZiAoIWJvb2tJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEJvb2sgPSBhd2FpdCB0aGlzLmJvb2tSZXBvc2l0b3J5LmdldEN1cnJlbnRCb29rKCk7XHJcbiAgICAgICAgICAgICAgICBib29rSWQgPSBjdXJyZW50Qm9vaz8uaWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDIuIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFdvcmRzID0gYXdhaXQgdGhpcy52b2NhYnVsYXJ5UmVwb3NpdG9yeS5maW5kQnlCb29rSWQoYm9va0lkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChhbGxXb3Jkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB3b3JkczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxDb3VudDogMFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gMy4gXHVCQ0Y1XHVDMkI1XHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU1QyBcdUIyRThcdUM1QjQgXHVENTQ0XHVEMTMwXHVCOUMxXHJcbiAgICAgICAgICAgIGNvbnN0IHJldmlld0ludGVydmFsID0gcmVxdWVzdC5yZXZpZXdJbnRlcnZhbCB8fCAxO1xyXG4gICAgICAgICAgICBjb25zdCB3b3Jkc05lZWRpbmdSZXZpZXcgPSBhbGxXb3Jkcy5maWx0ZXIod29yZCA9PiBcclxuICAgICAgICAgICAgICAgIHdvcmQubmVlZHNSZXZpZXcocmV2aWV3SW50ZXJ2YWwpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyA0LiBcdUM4MTVcdUI4MkMgKFx1QzZCMFx1QzEyMFx1QzIxQ1x1QzcwNDogXHVDNjI0XHVCNzk4XHVCNDFDIFx1QkNGNVx1QzJCNSA+IFx1QzVCNFx1QjgyNFx1QzZCNCBcdUIyRThcdUM1QjQgPiBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4IFx1QzgwMVx1Qzc0MCBcdUIyRThcdUM1QjQpXHJcbiAgICAgICAgICAgIHdvcmRzTmVlZGluZ1Jldmlldy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAxXHVDMjFDXHVDNzA0OiBcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQ0Y1XHVDMkI1XHVDNzdDIChcdUM2MjRcdUI3OThcdUI0MUMgXHVBQzgzXHVCRDgwXHVEMTMwKVxyXG4gICAgICAgICAgICAgICAgaWYgKGEubGFzdFJldmlld2VkICYmIGIubGFzdFJldmlld2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYURhdGUgPSBuZXcgRGF0ZShhLmxhc3RSZXZpZXdlZCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJEYXRlID0gbmV3IERhdGUoYi5sYXN0UmV2aWV3ZWQpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYURhdGUgIT09IGJEYXRlKSByZXR1cm4gYURhdGUgLSBiRGF0ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5sYXN0UmV2aWV3ZWQgJiYgIWIubGFzdFJldmlld2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYS5sYXN0UmV2aWV3ZWQgJiYgYi5sYXN0UmV2aWV3ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyAyXHVDMjFDXHVDNzA0OiBcdUIwOUNcdUM3NzRcdUIzQzQgKFx1QzVCNFx1QjgyNFx1QzZCNCBcdUFDODNcdUJEODBcdUQxMzApXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmaWN1bHR5T3JkZXIgPSB7ICdoYXJkJzogMywgJ2dvb2QnOiAyLCAnZWFzeSc6IDEgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmZpY3VsdHlEaWZmID0gZGlmZmljdWx0eU9yZGVyW2IuZGlmZmljdWx0eV0gLSBkaWZmaWN1bHR5T3JkZXJbYS5kaWZmaWN1bHR5XTtcclxuICAgICAgICAgICAgICAgIGlmIChkaWZmaWN1bHR5RGlmZiAhPT0gMCkgcmV0dXJuIGRpZmZpY3VsdHlEaWZmO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIDNcdUMyMUNcdUM3MDQ6IFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTggKFx1QzgwMVx1Qzc0MCBcdUFDODNcdUJEODBcdUQxMzApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5yZXZpZXdDb3VudCAtIGIucmV2aWV3Q291bnQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gNS4gXHVDODFDXHVENTVDIFx1QzgwMVx1QzZBOVxyXG4gICAgICAgICAgICBjb25zdCBsaW1pdCA9IHJlcXVlc3QubGltaXQgfHwgMjA7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0ZWRXb3JkcyA9IHdvcmRzTmVlZGluZ1Jldmlldy5zbGljZSgwLCBsaW1pdCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHdvcmRzOiBsaW1pdGVkV29yZHMsXHJcbiAgICAgICAgICAgICAgICB0b3RhbENvdW50OiB3b3Jkc05lZWRpbmdSZXZpZXcubGVuZ3RoXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dldFdvcmRzRm9yUmV2aWV3VXNlQ2FzZSBcdUMyRTRcdUQ1ODkgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL0lWb2NhYnVsYXJ5UmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi4vZW50aXRpZXMvVm9jYWJ1bGFyeSc7XHJcbmltcG9ydCB7IERpZmZpY3VsdHksIFdvcmRSZXZpZXdlZEV2ZW50IH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi90eXBlcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1dvcmRSZXF1ZXN0IHtcclxuICAgIHdvcmQ6IHN0cmluZztcclxuICAgIGRpZmZpY3VsdHk6IERpZmZpY3VsdHk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmV2aWV3V29yZFJlc3BvbnNlIHtcclxuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICBjYXJkPzogVm9jYWJ1bGFyeUNhcmQ7XHJcbiAgICBlcnJvcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJldmlld1dvcmRVc2VDYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgdm9jYWJ1bGFyeVJlcG9zaXRvcnk6IElWb2NhYnVsYXJ5UmVwb3NpdG9yeVxyXG4gICAgKSB7fVxyXG5cclxuICAgIGFzeW5jIGV4ZWN1dGUocmVxdWVzdDogUmV2aWV3V29yZFJlcXVlc3QpOiBQcm9taXNlPFJldmlld1dvcmRSZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIDEuIFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OURcclxuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0LndvcmQgfHwgcmVxdWVzdC53b3JkLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghWydlYXN5JywgJ2dvb2QnLCAnaGFyZCddLmluY2x1ZGVzKHJlcXVlc3QuZGlmZmljdWx0eSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUM2MkNcdUJDMTRcdUI5NzggXHVCMDlDXHVDNzc0XHVCM0M0XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmQgPSByZXF1ZXN0LndvcmQudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FyZCA9IGF3YWl0IHRoaXMudm9jYWJ1bGFyeVJlcG9zaXRvcnkuZmluZEJ5V29yZCh3b3JkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdDYXJkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDMuIFx1QkNGNVx1QzJCNSBcdUMyMThcdUQ1ODkgKFx1QzVENFx1RDJGMFx1RDJGMFx1Qzc1OCBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxIFx1RDY1Q1x1QzZBOSlcclxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNEaWZmaWN1bHR5ID0gZXhpc3RpbmdDYXJkLmRpZmZpY3VsdHk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJldmlld2VkQ2FyZCA9IGV4aXN0aW5nQ2FyZC5yZXZpZXcocmVxdWVzdC5kaWZmaWN1bHR5KTtcclxuXHJcbiAgICAgICAgICAgIC8vIDQuIFx1QzgwMFx1QzdBNVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZvY2FidWxhcnlSZXBvc2l0b3J5LnVwZGF0ZShyZXZpZXdlZENhcmQpO1xyXG5cclxuICAgICAgICAgICAgLy8gNS4gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERFxyXG4gICAgICAgICAgICBjb25zdCBldmVudDogV29yZFJldmlld2VkRXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnV09SRF9SRVZJRVdFRCcsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkOiByZXZpZXdlZENhcmQud29yZCxcclxuICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5OiByZXF1ZXN0LmRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNEaWZmaWN1bHR5OiBwcmV2aW91c0RpZmZpY3VsdHlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMucHVibGlzaEV2ZW50KGV2ZW50KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FyZDogcmV2aWV3ZWRDYXJkXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Jldmlld1dvcmRVc2VDYXNlIFx1QzJFNFx1RDU4OSBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHB1Ymxpc2hFdmVudChldmVudDogV29yZFJldmlld2VkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM3ODRcdUMyREMgXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIEV2ZW50QnVzXHVCODVDIFx1QUQ1MFx1Q0NCNFxyXG4gICAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd3b3JkUmV2aWV3ZWQnLCB7IGRldGFpbDogZXZlbnQuZGF0YSB9KTtcclxuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgSVZvY2FidWxhcnlSZXBvc2l0b3J5IH0gZnJvbSAnLi4vLi4vLi4vY29yZS9wb3J0cy9yZXBvc2l0b3JpZXMvSVZvY2FidWxhcnlSZXBvc2l0b3J5JztcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkLCBTZWFyY2hSZXN1bHQgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2VudGl0aWVzL1ZvY2FidWxhcnknO1xuaW1wb3J0IHsgU2VhcmNoT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9saWIvdHlwZXMnO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB9IGZyb20gJy4uLy4uL3N0b3JhZ2UvVm9jYWJ1bGFyeURhdGFiYXNlJztcblxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlSZXBvc2l0b3J5QWRhcHRlciBpbXBsZW1lbnRzIElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhYmFzZU1hbmFnZXI6IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIpIHt9XG5cbiAgICBhc3luYyBhZGQoY2FyZDogVm9jYWJ1bGFyeUNhcmQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuYWRkV29yZChjYXJkKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlKGNhcmQ6IFZvY2FidWxhcnlDYXJkKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQoY2FyZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZmluZEJ5V29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkIHwgbnVsbD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZCh3b3JkKTtcbiAgICB9XG5cbiAgICBhc3luYyBmaW5kQWxsKCk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmRbXT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKTtcbiAgICB9XG5cbiAgICBhc3luYyBmaW5kQnlCb29rSWQoYm9va0lkOiBzdHJpbmcpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkW10+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmRzQnlCb29rKGJvb2tJZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlKHdvcmQ6IHN0cmluZywgY2FyZDogVm9jYWJ1bGFyeUNhcmQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIudXBkYXRlV29yZCh3b3JkLCBjYXJkLmRpZmZpY3VsdHkpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZSh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIucmVtb3ZlV29yZCh3b3JkKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZWFyY2gob3B0aW9uczogU2VhcmNoT3B0aW9ucyk6IFByb21pc2U8U2VhcmNoUmVzdWx0PiB7XG4gICAgICAgIGNvbnN0IGFsbFdvcmRzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XG4gICAgICAgIC8vIFx1QUUzMFx1QkNGOFx1QzgwMVx1Qzc3OCBcdUFDODBcdUMwQzkgXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIFx1QUNFMFx1QjNDNFx1RDY1NCBcdUFDMDBcdUIyQTVcbiAgICAgICAgY29uc3QgZmlsdGVyZWRXb3JkcyA9IGFsbFdvcmRzLmZpbHRlcih3b3JkID0+IFxuICAgICAgICAgICAgd29yZC53b3JkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMob3B0aW9ucy5xdWVyeT8udG9Mb3dlckNhc2UoKSB8fCAnJylcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3b3JkczogZmlsdGVyZWRXb3JkcyxcbiAgICAgICAgICAgIHRvdGFsOiBmaWx0ZXJlZFdvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgIGhhc01vcmU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgc2VhcmNoQnlUZXh0KHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkW10+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZWFyY2goeyBxdWVyeSB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC53b3JkcztcbiAgICB9XG5cbiAgICBhc3luYyBmaW5kQ2FyZHNGb3JSZXZpZXcoYm9va0lkPzogc3RyaW5nKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZFtdPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRXb3Jkc0ZvclJldmlldyhib29rSWQpO1xuICAgIH1cblxuICAgIGFzeW5jIGZpbmRDYXJkc0J5RGlmZmljdWx0eShkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcsIGJvb2tJZD86IHN0cmluZyk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmRbXT4ge1xuICAgICAgICBjb25zdCB3b3JkcyA9IGJvb2tJZCA/IFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5maW5kQnlCb29rSWQoYm9va0lkKSA6IFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5maW5kQWxsKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gd29yZHMuZmlsdGVyKHdvcmQgPT4gd29yZC5kaWZmaWN1bHR5ID09PSBkaWZmaWN1bHR5KTtcbiAgICB9XG5cbiAgICBhc3luYyBjb3VudCgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgICAgICBjb25zdCB3b3JkcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xuICAgICAgICByZXR1cm4gd29yZHMubGVuZ3RoO1xuICAgIH1cblxuICAgIGFzeW5jIGNvdW50QnlCb29rSWQoYm9va0lkOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgICAgICBjb25zdCB3b3JkcyA9IGF3YWl0IHRoaXMuZmluZEJ5Qm9va0lkKGJvb2tJZCk7XG4gICAgICAgIHJldHVybiB3b3Jkcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgYXN5bmMgY291bnRCeURpZmZpY3VsdHkoZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgY29uc3Qgd29yZHMgPSBhd2FpdCB0aGlzLmZpbmRDYXJkc0J5RGlmZmljdWx0eShkaWZmaWN1bHR5KTtcbiAgICAgICAgcmV0dXJuIHdvcmRzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlTWFueShjYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBmb3IgKGNvbnN0IGNhcmQgb2YgY2FyZHMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkKGNhcmQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlTWFueSh3b3Jkczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZSh3b3JkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGxvYWREYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2F2ZUFsbERhdGEoKTtcbiAgICB9XG5cbiAgICBvbkRhdGFDaGFuZ2VkKGNhbGxiYWNrOiAoY2FyZHM6IFZvY2FidWxhcnlDYXJkW10pID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgRXZlbnRFbWl0dGVyIFx1RDMyOFx1RDEzNFx1QzczQ1x1Qjg1QyBcdUFENkNcdUQ2MDRcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcbiAgICB9XG5cbiAgICBvZmZEYXRhQ2hhbmdlZChjYWxsYmFjazogKGNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwIFx1QUQ2Q1x1RDYwNFxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxuICAgIH1cbn0iLCAiaW1wb3J0IHsgSUJvb2tSZXBvc2l0b3J5IH0gZnJvbSAnLi4vLi4vLi4vY29yZS9wb3J0cy9yZXBvc2l0b3JpZXMvSUJvb2tSZXBvc2l0b3J5JztcbmltcG9ydCB7IEJvb2ssIEJvb2tTdGF0aXN0aWNzLCBCb29rTGlzdE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2VudGl0aWVzL0Jvb2snO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB9IGZyb20gJy4uLy4uL3N0b3JhZ2UvVm9jYWJ1bGFyeURhdGFiYXNlJztcblxuZXhwb3J0IGNsYXNzIEJvb2tSZXBvc2l0b3J5QWRhcHRlciBpbXBsZW1lbnRzIElCb29rUmVwb3NpdG9yeSB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhYmFzZU1hbmFnZXI6IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIpIHt9XG5cbiAgICBhc3luYyBhZGQoYm9vazogQm9vayk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5jcmVhdGVCb29rKGJvb2sudG9QbGFpbk9iamVjdCgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlKGJvb2s6IEJvb2spOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuY3JlYXRlQm9vayhib29rLnRvUGxhaW5PYmplY3QoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZmluZEJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8Qm9vayB8IG51bGw+IHtcbiAgICAgICAgY29uc3QgYm9va0RhdGEgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRCb29rKGlkKTtcbiAgICAgICAgaWYgKCFib29rRGF0YSkgcmV0dXJuIG51bGw7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IEJvb2soXG4gICAgICAgICAgICBib29rRGF0YS5pZCxcbiAgICAgICAgICAgIGJvb2tEYXRhLm5hbWUsXG4gICAgICAgICAgICBib29rRGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGJvb2tEYXRhLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgIGJvb2tEYXRhLnVwZGF0ZWRBdCxcbiAgICAgICAgICAgIGJvb2tEYXRhLndvcmRDb3VudCxcbiAgICAgICAgICAgIGJvb2tEYXRhLmlzRGVmYXVsdFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIGZpbmRBbGwob3B0aW9ucz86IEJvb2tMaXN0T3B0aW9ucyk6IFByb21pc2U8Qm9va1tdPiB7XG4gICAgICAgIGNvbnN0IGJvb2tzRGF0YSA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEFsbEJvb2tzKCk7XG4gICAgICAgIGxldCBib29rcyA9IGJvb2tzRGF0YS5tYXAoYm9va0RhdGEgPT4gbmV3IEJvb2soXG4gICAgICAgICAgICBib29rRGF0YS5pZCxcbiAgICAgICAgICAgIGJvb2tEYXRhLm5hbWUsXG4gICAgICAgICAgICBib29rRGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGJvb2tEYXRhLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgIGJvb2tEYXRhLnVwZGF0ZWRBdCxcbiAgICAgICAgICAgIGJvb2tEYXRhLndvcmRDb3VudCxcbiAgICAgICAgICAgIGJvb2tEYXRhLmlzRGVmYXVsdFxuICAgICAgICApKTtcblxuICAgICAgICAvLyBcdUM2MzVcdUMxNThcdUM1RDAgXHVCNTMwXHVCOTc4IFx1RDU0NFx1RDEzMFx1QjlDMVxuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5jbHVkZUVtcHR5ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGJvb2tzID0gYm9va3MuZmlsdGVyKGJvb2sgPT4gIWJvb2suaXNFbXB0eSgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gXHVDODE1XHVCODJDXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zb3J0QnkpIHtcbiAgICAgICAgICAgICAgICBib29rcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFWYWx1ZSA9IGFbb3B0aW9ucy5zb3J0QnkhXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYlZhbHVlID0gYltvcHRpb25zLnNvcnRCeSFdO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhVmFsdWUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBiVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5zb3J0T3JkZXIgPT09ICdkZXNjJyA/IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJWYWx1ZS5sb2NhbGVDb21wYXJlKGFWYWx1ZSkgOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhVmFsdWUubG9jYWxlQ29tcGFyZShiVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFWYWx1ZSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGJWYWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLnNvcnRPcmRlciA9PT0gJ2Rlc2MnID8gYlZhbHVlIC0gYVZhbHVlIDogYVZhbHVlIC0gYlZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gXHVEMzk4XHVDNzc0XHVDOUMwXHVCMTI0XHVDNzc0XHVDMTU4XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5vZmZzZXQgfHwgb3B0aW9ucy5saW1pdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gb3B0aW9ucy5vZmZzZXQgfHwgMDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBvcHRpb25zLmxpbWl0ID8gc3RhcnQgKyBvcHRpb25zLmxpbWl0IDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGJvb2tzID0gYm9va3Muc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYm9va3M7XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlKGlkOiBzdHJpbmcsIGJvb2s6IEJvb2spOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIudXBkYXRlQm9vayhpZCwgYm9vay50b1BsYWluT2JqZWN0KCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZShpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmRlbGV0ZUJvb2soaWQpO1xuICAgIH1cblxuICAgIGFzeW5jIGZpbmREZWZhdWx0KCk6IFByb21pc2U8Qm9vayB8IG51bGw+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEJ5SWQoJ2RlZmF1bHQnKTtcbiAgICB9XG5cbiAgICBhc3luYyBmaW5kQnlOYW1lKG5hbWU6IHN0cmluZyk6IFByb21pc2U8Qm9vayB8IG51bGw+IHtcbiAgICAgICAgY29uc3QgYm9va3MgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcbiAgICAgICAgcmV0dXJuIGJvb2tzLmZpbmQoYm9vayA9PiBib29rLm5hbWUgPT09IG5hbWUpIHx8IG51bGw7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhpc3RzKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgY29uc3QgYm9vayA9IGF3YWl0IHRoaXMuZmluZEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gYm9vayAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICBhc3luYyBjb3VudCgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgICAgICBjb25zdCBib29rcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xuICAgICAgICByZXR1cm4gYm9va3MubGVuZ3RoO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFN0YXRpc3RpY3MoYm9va0lkOiBzdHJpbmcpOiBQcm9taXNlPEJvb2tTdGF0aXN0aWNzIHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBib29rID0gYXdhaXQgdGhpcy5maW5kQnlJZChib29rSWQpO1xuICAgICAgICBpZiAoIWJvb2spIHJldHVybiBudWxsO1xuXG4gICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZHNCeUJvb2soYm9va0lkKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHdvcmRzQnlEaWZmaWN1bHR5ID0ge1xuICAgICAgICAgICAgZWFzeTogd29yZHMuZmlsdGVyKHcgPT4gdy5kaWZmaWN1bHR5ID09PSAnZWFzeScpLmxlbmd0aCxcbiAgICAgICAgICAgIGdvb2Q6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2dvb2QnKS5sZW5ndGgsXG4gICAgICAgICAgICBoYXJkOiB3b3Jkcy5maWx0ZXIodyA9PiB3LmRpZmZpY3VsdHkgPT09ICdoYXJkJykubGVuZ3RoXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdG90YWxSZXZpZXdzID0gd29yZHMucmVkdWNlKChzdW0sIHdvcmQpID0+IHN1bSArIHdvcmQucmV2aWV3Q291bnQsIDApO1xuICAgICAgICBjb25zdCBhdmVyYWdlUmV2aWV3Q291bnQgPSB3b3Jkcy5sZW5ndGggPiAwID8gdG90YWxSZXZpZXdzIC8gd29yZHMubGVuZ3RoIDogMDtcblxuICAgICAgICBjb25zdCBsYXN0QWN0aXZpdHlEYXRlID0gd29yZHMubGVuZ3RoID4gMCA/IFxuICAgICAgICAgICAgTWF0aC5tYXgoLi4ud29yZHMubWFwKHcgPT4gbmV3IERhdGUody5sYXN0UmV2aWV3ZWQgfHwgdy5hZGRlZERhdGUpLmdldFRpbWUoKSkpIDpcbiAgICAgICAgICAgIG51bGw7XG5cbiAgICAgICAgY29uc3QgY29tcGxldGlvblBlcmNlbnRhZ2UgPSB3b3Jkcy5sZW5ndGggPiAwID9cbiAgICAgICAgICAgICh3b3Jkc0J5RGlmZmljdWx0eS5lYXN5IC8gd29yZHMubGVuZ3RoKSAqIDEwMCA6IDA7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvb2ssXG4gICAgICAgICAgICB0b3RhbFdvcmRzOiB3b3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICB3b3Jkc0J5RGlmZmljdWx0eSxcbiAgICAgICAgICAgIGF2ZXJhZ2VSZXZpZXdDb3VudCxcbiAgICAgICAgICAgIGxhc3RBY3Rpdml0eURhdGU6IGxhc3RBY3Rpdml0eURhdGUgPyBuZXcgRGF0ZShsYXN0QWN0aXZpdHlEYXRlKS50b0lTT1N0cmluZygpIDogbnVsbCxcbiAgICAgICAgICAgIGNvbXBsZXRpb25QZXJjZW50YWdlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxsU3RhdGlzdGljcygpOiBQcm9taXNlPEJvb2tTdGF0aXN0aWNzW10+IHtcbiAgICAgICAgY29uc3QgYm9va3MgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcbiAgICAgICAgY29uc3Qgc3RhdGlzdGljczogQm9va1N0YXRpc3RpY3NbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBib29rIG9mIGJvb2tzKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ID0gYXdhaXQgdGhpcy5nZXRTdGF0aXN0aWNzKGJvb2suaWQpO1xuICAgICAgICAgICAgaWYgKHN0YXQpIHtcbiAgICAgICAgICAgICAgICBzdGF0aXN0aWNzLnB1c2goc3RhdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzdGF0aXN0aWNzO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEN1cnJlbnRCb29rKCk6IFByb21pc2U8Qm9vayB8IG51bGw+IHtcbiAgICAgICAgY29uc3QgY3VycmVudEJvb2sgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRDdXJyZW50Qm9vaygpO1xuICAgICAgICBpZiAoIWN1cnJlbnRCb29rKSByZXR1cm4gbnVsbDtcblxuICAgICAgICByZXR1cm4gbmV3IEJvb2soXG4gICAgICAgICAgICBjdXJyZW50Qm9vay5pZCxcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLm5hbWUsXG4gICAgICAgICAgICBjdXJyZW50Qm9vay5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLnVwZGF0ZWRBdCxcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLndvcmRDb3VudCxcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLmlzRGVmYXVsdFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIHNldEN1cnJlbnRCb29rKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNldEN1cnJlbnRCb29rKGJvb2tJZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZERhdGEoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5zYXZlQWxsRGF0YSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHZhbGlkYXRlQm9va05hbWUobmFtZTogc3RyaW5nLCBleGNsdWRlSWQ/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgY29uc3QgYm9va3MgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcbiAgICAgICAgcmV0dXJuICFib29rcy5zb21lKGJvb2sgPT4gXG4gICAgICAgICAgICBib29rLm5hbWUgPT09IG5hbWUgJiYgXG4gICAgICAgICAgICAoIWV4Y2x1ZGVJZCB8fCBib29rLmlkICE9PSBleGNsdWRlSWQpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgb25EYXRhQ2hhbmdlZChjYWxsYmFjazogKGJvb2tzOiBCb29rW10pID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgRXZlbnRFbWl0dGVyIFx1RDMyOFx1RDEzNFx1QzczQ1x1Qjg1QyBcdUFENkNcdUQ2MDRcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcbiAgICB9XG5cbiAgICBvZmZEYXRhQ2hhbmdlZChjYWxsYmFjazogKGJvb2tzOiBCb29rW10pID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzAgXHVBRDZDXHVENjA0XG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XG4gICAgfVxuXG4gICAgb25DdXJyZW50Qm9va0NoYW5nZWQoY2FsbGJhY2s6IChib29rOiBCb29rIHwgbnVsbCkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkNDMFx1QUNCRCBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4XG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XG4gICAgfVxuXG4gICAgb2ZmQ3VycmVudEJvb2tDaGFuZ2VkKGNhbGxiYWNrOiAoYm9vazogQm9vayB8IG51bGwpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUJDQzBcdUFDQkQgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzBcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcbiAgICB9XG59IiwgImltcG9ydCB7IFZvY2FidWxhcnlDYXJkLCBCb29rIH0gZnJvbSAnLi4vLi4vVm9jYWJ1bGFyeUNhcmQnO1xyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEYXRhYmFzZURhdGEge1xyXG4gICAgYm9va3M6IEJvb2tbXTtcclxuICAgIHdvcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdO1xyXG4gICAgc2V0dGluZ3M6IHtcclxuICAgICAgICBkYWlseUdvYWw6IG51bWJlcjtcclxuICAgICAgICByZXZpZXdJbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgICAgIGN1cnJlbnRCb29rSWQ6IHN0cmluZztcclxuICAgIH07XHJcbiAgICBzdGF0aXN0aWNzOiB7XHJcbiAgICAgICAgdG90YWxSZXZpZXdzOiBudW1iZXI7XHJcbiAgICAgICAgc3RyZWFrRGF5czogbnVtYmVyO1xyXG4gICAgICAgIGxhc3RTdHVkeURhdGU6IHN0cmluZyB8IG51bGw7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBib29rczogTWFwPHN0cmluZywgQm9vaz4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHdvcmRzOiBNYXA8c3RyaW5nLCBWb2NhYnVsYXJ5Q2FyZD4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHNldHRpbmdzID0ge1xyXG4gICAgICAgIGRhaWx5R29hbDogMTAsXHJcbiAgICAgICAgcmV2aWV3SW50ZXJ2YWw6IDEsXHJcbiAgICAgICAgY3VycmVudEJvb2tJZDogJ2RlZmF1bHQnXHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBzdGF0aXN0aWNzID0ge1xyXG4gICAgICAgIHRvdGFsUmV2aWV3czogMCxcclxuICAgICAgICBzdHJlYWtEYXlzOiAwLFxyXG4gICAgICAgIGxhc3RTdHVkeURhdGU6IG51bGwgYXMgc3RyaW5nIHwgbnVsbFxyXG4gICAgfTtcclxuICAgIHByaXZhdGUgc2F2ZUNhbGxiYWNrOiAoKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSB2b2NhYnVsYXJ5Rm9sZGVyUGF0aCA9ICdWb2NhYnVsYXJ5JztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2F2ZUNhbGxiYWNrOiAoKSA9PiB2b2lkLCBmb2xkZXJQYXRoPzogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2sgPSBzYXZlQ2FsbGJhY2s7XHJcbiAgICAgICAgaWYgKGZvbGRlclBhdGgpIHtcclxuICAgICAgICAgICAgdGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCA9IGZvbGRlclBhdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVZvY2FidWxhcnlGb2xkZXIoKTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVEZWZhdWx0Qm9vaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVDRDA4XHVBRTMwXHVENjU0XHJcbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVWb2NhYnVsYXJ5Rm9sZGVyKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1RDNGNFx1QjM1NFx1QUMwMCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVBQ0UwIFRGb2xkZXIgXHVDNzc4XHVDMkE0XHVEMTM0XHVDMkE0XHVDNzc4IFx1QUNCRFx1QzZCMFxyXG4gICAgICAgICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCQkMwXHVCODVDIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1RDNGNFx1QjM1NFx1QUMwMCBcdUM4NzRcdUM3QUNcdUQ1NThcdUM5QzAgXHVDNTRBXHVCMjk0IFx1QUNCRFx1QzZCMFx1QzVEMFx1QjlDQyBcdUMwRERcdUMxMzFcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBcdUQzRjRcdUIzNTRcdUFDMDAgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUFDQkRcdUM2QjBcdUIyOTQgXHVDODE1XHVDMEMxXHVDODAxXHVDNzc4IFx1QzBDMVx1RDY2OVx1Qzc3NFx1QkJDMFx1Qjg1QyBcdUFDQkRcdUFDRTBcdUI5Q0MgXHVDRDlDXHVCODI1XHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdhbHJlYWR5IGV4aXN0cycpIHx8IFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZm9sZGVyIGFscmVhZHkgZXhpc3RzJykgfHxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2FscmVhZHkgcHJlc2VudCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTRcdUFDMDAgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU2OVx1QjJDOFx1QjJFNDonLCB0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEM0Y0XHVCMzU0IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEM0Y0XHVCMzU0IFx1QzBERFx1QzEzMSBcdUM5MTEgXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVBRTMwXHVCQ0Y4IGJvb2sgXHVDRDA4XHVBRTMwXHVENjU0XHJcbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVEZWZhdWx0Qm9vaygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYm9va3MuaGFzKCdkZWZhdWx0JykpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdEJvb2s6IEJvb2sgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1x1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTUnLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzg1XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgd29yZENvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiB0cnVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuYm9va3Muc2V0KCdkZWZhdWx0JywgZGVmYXVsdEJvb2spO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGRlZmF1bHRCb29rKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQm9va1x1Qzc0NCBNRCBcdUQzMENcdUM3N0NcdUI4NUMgXHVDODAwXHVDN0E1XHJcbiAgICBwcml2YXRlIGFzeW5jIHNhdmVCb29rVG9GaWxlKGJvb2s6IEJvb2spOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke2Jvb2submFtZS5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgJ18nKX0ubWRgO1xyXG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rXHVDNzU4IFx1QjJFOFx1QzVCNFx1QjRFNCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICBjb25zdCBib29rV29yZHMgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gYm9vay5pZClcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEud29yZC5sb2NhbGVDb21wYXJlKGIud29yZCkpO1xyXG5cclxuICAgICAgICAvLyBZQU1MIGZyb250bWF0dGVyIFx1QzBERFx1QzEzMVxyXG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gW1xyXG4gICAgICAgICAgICAnLS0tJyxcclxuICAgICAgICAgICAgYGJvb2tJZDogJHtib29rLmlkfWAsXHJcbiAgICAgICAgICAgIGBuYW1lOiBcIiR7Ym9vay5uYW1lfVwiYCxcclxuICAgICAgICAgICAgYGRlc2NyaXB0aW9uOiBcIiR7Ym9vay5kZXNjcmlwdGlvbn1cImAsXHJcbiAgICAgICAgICAgIGBjcmVhdGVkQXQ6ICR7Ym9vay5jcmVhdGVkQXR9YCxcclxuICAgICAgICAgICAgYHVwZGF0ZWRBdDogJHtib29rLnVwZGF0ZWRBdH1gLFxyXG4gICAgICAgICAgICBgd29yZENvdW50OiAke2Jvb2tXb3Jkcy5sZW5ndGh9YCxcclxuICAgICAgICAgICAgYGlzRGVmYXVsdDogJHtib29rLmlzRGVmYXVsdH1gLFxyXG4gICAgICAgICAgICAnLS0tJyxcclxuICAgICAgICAgICAgJydcclxuICAgICAgICBdLmpvaW4oJ1xcbicpO1xyXG5cclxuICAgICAgICAvLyBcdUI5QzhcdUQwNkNcdUIyRTRcdUM2QjQgXHVDRjU4XHVEMTUwXHVDRTIwIFx1QzBERFx1QzEzMVxyXG4gICAgICAgIGxldCBjb250ZW50ID0gZnJvbnRtYXR0ZXI7XHJcbiAgICAgICAgY29udGVudCArPSBgIyAke2Jvb2submFtZX1cXG5cXG5gO1xyXG4gICAgICAgIGNvbnRlbnQgKz0gYCR7Ym9vay5kZXNjcmlwdGlvbn1cXG5cXG5gO1xyXG4gICAgICAgIGNvbnRlbnQgKz0gYCMjIFx1QjJFOFx1QzVCNCBcdUJBQTlcdUI4NUQgKCR7Ym9va1dvcmRzLmxlbmd0aH1cdUFDMUMpXFxuXFxuYDtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIGJvb2tXb3Jkcykge1xyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAjIyMgJHt3b3JkLndvcmR9XFxuXFxuYDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh3b3JkLnByb251bmNpYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCoqXHVCQzFDXHVDNzRDOioqICR7d29yZC5wcm9udW5jaWF0aW9ufVxcblxcbmA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCoqXHVCNzNCOioqXFxuYDtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBtZWFuaW5nIG9mIHdvcmQubWVhbmluZ3MpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gJHttZWFuaW5nfVxcbmA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29udGVudCArPSAnXFxuJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh3b3JkLnNpbWlsYXJXb3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAqKlx1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjQ6KiogJHt3b3JkLnNpbWlsYXJXb3Jkcy5qb2luKCcsICcpfVxcblxcbmA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh3b3JkLmV4YW1wbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCoqXHVDNjA4XHVCQjM4OioqXFxuYDtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZXhhbXBsZSBvZiB3b3JkLmV4YW1wbGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgLSAke2V4YW1wbGUuZW5nbGlzaH1cXG5gO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCAgLSAke2V4YW1wbGUua29yZWFufVxcbmA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9ICdcXG4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUJDRjVcdUMyQjUgXHVDODE1XHVCQ0Y0XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCoqXHVCQ0Y1XHVDMkI1IFx1QzgxNVx1QkNGNDoqKlxcbmA7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxODogJHt3b3JkLnJldmlld0NvdW50fVxcbmA7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVCMDlDXHVDNzc0XHVCM0M0OiAke3dvcmQuZGlmZmljdWx0eX1cXG5gO1xyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDRjVcdUMyQjU6ICR7d29yZC5sYXN0UmV2aWV3ZWQgfHwgJ1x1QzVDNlx1Qzc0Qyd9XFxuYDtcclxuICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUNEOTRcdUFDMDBcdUM3N0M6ICR7d29yZC5hZGRlZERhdGV9XFxuYDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QzJBNFx1RDM5OFx1Qzc3NFx1QzJBNFx1QjREQyBcdUI5QUNcdUQ1M0NcdUQyRjBcdUMxNTggXHVDODE1XHVCQ0Y0XHJcbiAgICAgICAgICAgIGlmICh3b3JkLnNjaGVkdWxlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgXFxuKipcdUMyQTRcdUQzOThcdUM3NzRcdUMyQTRcdUI0REMgXHVCOUFDXHVENTNDXHVEMkYwXHVDMTU4OioqXFxuYDtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVCMkU0XHVDNzRDIFx1QkNGNVx1QzJCNVx1Qzc3QzogJHt3b3JkLnNjaGVkdWxlSW5mby5kdWVEYXRlfVxcbmA7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QkNGNVx1QzJCNSBcdUFDMDRcdUFDQTk6ICR7d29yZC5zY2hlZHVsZUluZm8uaW50ZXJ2YWx9XHVDNzdDXFxuYDtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVDNkE5XHVDNzc0XHVCM0M0OiAke3dvcmQuc2NoZWR1bGVJbmZvLmVhc2V9XFxuYDtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVDMkU0XHVEMzI4IFx1RDY5Rlx1QzIxODogJHt3b3JkLnNjaGVkdWxlSW5mby5sYXBzZUNvdW50fVxcbmA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gJ1xcbi0tLVxcblxcbic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShleGlzdGluZ0ZpbGUsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUQzMENcdUM3N0NcdUM3NzQgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1Q1x1QjJFNFx1QkE3NCBtb2RpZnlcdUI4NUMgXHVDN0FDXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnYWxyZWFkeSBleGlzdHMnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVEMzBDXHVDNzdDXHVDNzc0IFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUM5QzBcdUI5Q0MgVEZpbGVcdUM3NzQgXHVDNTQ0XHVCMkQ4OicsIGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzMENcdUM3N0MgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDMwQ1x1Qzc3QyBcdUM4MDBcdUM3QTUgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTUQgXHVEMzBDXHVDNzdDXHVDNUQwXHVDMTFDIEJvb2tcdUFDRkMgXHVCMkU4XHVDNUI0XHVCNEU0IFx1Qjg1Q1x1QjREQ1xyXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkQm9va0Zyb21GaWxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZnJvbnRtYXR0ZXIsIGJvZHkgfSA9IHRoaXMucGFyc2VNREZpbGUoY29udGVudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWZyb250bWF0dGVyLmJvb2tJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgLy8gQm9vayBcdUM4MTVcdUJDRjQgXHVCQ0Y1XHVDNkQwXHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2s6IEJvb2sgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogZnJvbnRtYXR0ZXIuYm9va0lkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogZnJvbnRtYXR0ZXIubmFtZSB8fCBmaWxlLmJhc2VuYW1lLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGZyb250bWF0dGVyLmRlc2NyaXB0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBmcm9udG1hdHRlci5jcmVhdGVkQXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBmcm9udG1hdHRlci51cGRhdGVkQXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgd29yZENvdW50OiBmcm9udG1hdHRlci53b3JkQ291bnQgfHwgMCxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZnJvbnRtYXR0ZXIuaXNEZWZhdWx0IHx8IGZhbHNlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmJvb2tzLnNldChib29rLmlkLCBib29rKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QjRFNCBcdUQzMENcdUMyRjFcclxuICAgICAgICAgICAgY29uc3Qgd29yZHMgPSB0aGlzLnBhcnNlV29yZHNGcm9tTWFya2Rvd24oYm9keSwgYm9vay5pZCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53b3Jkcy5zZXQod29yZC53b3JkLnRvTG93ZXJDYXNlKCksIHdvcmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDMwQ1x1Qzc3QyBcdUI4NUNcdUI0REMgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTUQgXHVEMzBDXHVDNzdDIFx1RDMwQ1x1QzJGMSAoZnJvbnRtYXR0ZXJcdUM2NDAgYm9keSBcdUJEODRcdUI5QUMpXHJcbiAgICBwcml2YXRlIHBhcnNlTURGaWxlKGNvbnRlbnQ6IHN0cmluZyk6IHsgZnJvbnRtYXR0ZXI6IGFueSwgYm9keTogc3RyaW5nIH0ge1xyXG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyUmVnZXggPSAvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLVxcbihbXFxzXFxTXSopJC87XHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKGZyb250bWF0dGVyUmVnZXgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghbWF0Y2gpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbnRtYXR0ZXI6IHt9LCBib2R5OiBjb250ZW50IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyVGV4dCA9IG1hdGNoWzFdO1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBtYXRjaFsyXTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUFDMDRcdUIyRThcdUQ1NUMgWUFNTCBcdUQzMENcdUMyRjFcclxuICAgICAgICBjb25zdCBmcm9udG1hdHRlcjogYW55ID0ge307XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBmcm9udG1hdHRlclRleHQuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xvbkluZGV4ID0gbGluZS5pbmRleE9mKCc6Jyk7XHJcbiAgICAgICAgICAgIGlmIChjb2xvbkluZGV4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gbGluZS5zdWJzdHJpbmcoMCwgY29sb25JbmRleCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gbGluZS5zdWJzdHJpbmcoY29sb25JbmRleCArIDEpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVCNTMwXHVDNjM0XHVENDVDIFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdmFsdWUuZW5kc1dpdGgoJ1wiJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDEsIC0xKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVEMEMwXHVDNzg1IFx1QkNDMFx1RDY1OFxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIGZyb250bWF0dGVyW2tleV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09ICdmYWxzZScpIGZyb250bWF0dGVyW2tleV0gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc05hTihOdW1iZXIodmFsdWUpKSkgZnJvbnRtYXR0ZXJba2V5XSA9IE51bWJlcih2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGZyb250bWF0dGVyW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBmcm9udG1hdHRlciwgYm9keSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNFx1QzVEMFx1QzExQyBcdUIyRThcdUM1QjRcdUI0RTQgXHVEMzBDXHVDMkYxXHJcbiAgICBwcml2YXRlIHBhcnNlV29yZHNGcm9tTWFya2Rvd24obWFya2Rvd246IHN0cmluZywgYm9va0lkOiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcclxuICAgICAgICBjb25zdCB3b3JkczogVm9jYWJ1bGFyeUNhcmRbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHdvcmRTZWN0aW9ucyA9IG1hcmtkb3duLnNwbGl0KCctLS0nKS5maWx0ZXIoc2VjdGlvbiA9PiBzZWN0aW9uLnRyaW0oKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHdvcmRTZWN0aW9ucykge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkID0gdGhpcy5wYXJzZVdvcmRTZWN0aW9uKHNlY3Rpb24sIGJvb2tJZCk7XHJcbiAgICAgICAgICAgIGlmICh3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICB3b3Jkcy5wdXNoKHdvcmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB3b3JkcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUFDMUNcdUJDQzQgXHVCMkU4XHVDNUI0IFx1QzEzOVx1QzE1OCBcdUQzMENcdUMyRjFcclxuICAgIHByaXZhdGUgcGFyc2VXb3JkU2VjdGlvbihzZWN0aW9uOiBzdHJpbmcsIGJvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmQgfCBudWxsIHtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IHNlY3Rpb24uc3BsaXQoJ1xcbicpLmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpKTtcclxuICAgICAgICBpZiAobGluZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgd29yZCA9ICcnO1xyXG4gICAgICAgIGxldCBwcm9udW5jaWF0aW9uID0gJyc7XHJcbiAgICAgICAgY29uc3QgbWVhbmluZ3M6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgY29uc3Qgc2ltaWxhcldvcmRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGV4YW1wbGVzOiB7IGVuZ2xpc2g6IHN0cmluZzsga29yZWFuOiBzdHJpbmcgfVtdID0gW107XHJcbiAgICAgICAgbGV0IHJldmlld0NvdW50ID0gMDtcclxuICAgICAgICBsZXQgZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnID0gJ2dvb2QnO1xyXG4gICAgICAgIGxldCBsYXN0UmV2aWV3ZWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIGxldCBhZGRlZERhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IHNjaGVkdWxlSW5mbzogYW55ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBjdXJyZW50U2VjdGlvbiA9ICcnO1xyXG4gICAgICAgIGxldCBjdXJyZW50RXhhbXBsZTogeyBlbmdsaXNoPzogc3RyaW5nOyBrb3JlYW4/OiBzdHJpbmcgfSA9IHt9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVCQTg1IFx1Q0Q5NFx1Q0Q5QyAoIyMjIFx1RDVFNFx1QjM1NClcclxuICAgICAgICAgICAgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyMjIyAnKSkge1xyXG4gICAgICAgICAgICAgICAgd29yZCA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZyg0KS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDMTM5XHVDMTU4IFx1QUQ2Q1x1QkQ4NFxyXG4gICAgICAgICAgICBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUJDMUNcdUM3NEM6KionKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbiA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZyg3KS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdwcm9udW5jaWF0aW9uJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcqKlx1QjczQjoqKicpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdtZWFuaW5ncyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0OioqJykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJXb3Jkc1RleHQgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoMTIpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3Jkcy5wdXNoKC4uLnNpbWlsYXJXb3Jkc1RleHQuc3BsaXQoJywnKS5tYXAodyA9PiB3LnRyaW0oKSkpO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAnc2ltaWxhcic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUM2MDhcdUJCMzg6KionKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAnZXhhbXBsZXMnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVCQ0Y1XHVDMkI1IFx1QzgxNVx1QkNGNDoqKicpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdyZXZpZXcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVDMkE0XHVEMzk4XHVDNzc0XHVDMkE0XHVCNERDIFx1QjlBQ1x1RDUzQ1x1RDJGMFx1QzE1ODoqKicpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICdzcGFjZWQtcmVwZXRpdGlvbic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdtZWFuaW5ncycgJiYgdHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSAnKSkge1xyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3MucHVzaCh0cmltbWVkTGluZS5zdWJzdHJpbmcoMikudHJpbSgpKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U2VjdGlvbiA9PT0gJ2V4YW1wbGVzJykge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVCNEU0XHVDNUVDXHVDNEYwXHVBRTMwXHVCOTdDIFx1QUNFMFx1QjgyNFx1RDU1QyBcdUM2MDhcdUJCMzggXHVEMzBDXHVDMkYxXHJcbiAgICAgICAgICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKCctICcpICYmICFsaW5lLnN0YXJ0c1dpdGgoJyAgLSAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggKFx1QjRFNFx1QzVFQ1x1QzRGMFx1QUUzMCBcdUM1QzZcdUM3NEMpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRFeGFtcGxlLmVuZ2xpc2ggJiYgY3VycmVudEV4YW1wbGUua29yZWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogY3VycmVudEV4YW1wbGUuZW5nbGlzaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogY3VycmVudEV4YW1wbGUua29yZWFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RXhhbXBsZSA9IHsgZW5nbGlzaDogbGluZS5zdWJzdHJpbmcoMikudHJpbSgpIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmUuc3RhcnRzV2l0aCgnICAtICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAoMlx1Q0U3OCBcdUI0RTRcdUM1RUNcdUM0RjBcdUFFMzApXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEV4YW1wbGUua29yZWFuID0gbGluZS5zdWJzdHJpbmcoNCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAncmV2aWV3Jykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxODogJykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXZpZXdDb3VudCA9IHBhcnNlSW50KHRyaW1tZWRMaW5lLnN1YnN0cmluZyg5KS50cmltKCkpIHx8IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVCMDlDXHVDNzc0XHVCM0M0OiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoNykudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaWZmID09PSAnZWFzeScgfHwgZGlmZiA9PT0gJ2dvb2QnIHx8IGRpZmYgPT09ICdoYXJkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5ID0gZGlmZjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QkNGNVx1QzJCNTogJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmV2ID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDExKS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJldmlld2VkID0gbGFzdFJldiA9PT0gJ1x1QzVDNlx1Qzc0QycgPyBudWxsIDogbGFzdFJldjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSBcdUNEOTRcdUFDMDBcdUM3N0M6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkZWREYXRlID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDcpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U2VjdGlvbiA9PT0gJ3NwYWNlZC1yZXBldGl0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzY2hlZHVsZUluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUluZm8gPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QjJFNFx1Qzc0QyBcdUJDRjVcdUMyQjVcdUM3N0M6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvLmR1ZURhdGUgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoMTApLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSBcdUJDRjVcdUMyQjUgXHVBQzA0XHVBQ0E5OiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVydmFsVGV4dCA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZyg4KS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvLmludGVydmFsID0gcGFyc2VJbnQoaW50ZXJ2YWxUZXh0LnJlcGxhY2UoJ1x1Qzc3QycsICcnKSkgfHwgMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSBcdUM2QTlcdUM3NzRcdUIzQzQ6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvLmVhc2UgPSBwYXJzZUludCh0cmltbWVkTGluZS5zdWJzdHJpbmcoNykudHJpbSgpKSB8fCAyNTA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVDMkU0XHVEMzI4IFx1RDY5Rlx1QzIxODogJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUluZm8ubGFwc2VDb3VudCA9IHBhcnNlSW50KHRyaW1tZWRMaW5lLnN1YnN0cmluZyg5KS50cmltKCkpIHx8IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzYwOFx1QkIzOCBcdUNDOThcdUI5QUNcclxuICAgICAgICBpZiAoY3VycmVudEV4YW1wbGUuZW5nbGlzaCAmJiBjdXJyZW50RXhhbXBsZS5rb3JlYW4pIHtcclxuICAgICAgICAgICAgZXhhbXBsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBlbmdsaXNoOiBjdXJyZW50RXhhbXBsZS5lbmdsaXNoLFxyXG4gICAgICAgICAgICAgICAga29yZWFuOiBjdXJyZW50RXhhbXBsZS5rb3JlYW5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXdvcmQpIHJldHVybiBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdvcmQ6IHdvcmQudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgcHJvbnVuY2lhdGlvbixcclxuICAgICAgICAgICAgbWVhbmluZ3MsXHJcbiAgICAgICAgICAgIHNpbWlsYXJXb3JkcyxcclxuICAgICAgICAgICAgZXhhbXBsZXMsXHJcbiAgICAgICAgICAgIHJldmlld0NvdW50LFxyXG4gICAgICAgICAgICBkaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWQsXHJcbiAgICAgICAgICAgIGFkZGVkRGF0ZSxcclxuICAgICAgICAgICAgYm9va0lkLFxyXG4gICAgICAgICAgICBzY2hlZHVsZUluZm9cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDIFx1Qjg1Q1x1QjREQ1xyXG4gICAgYXN5bmMgbG9hZEFsbEJvb2tzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMuYm9va3MuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLndvcmRzLmNsZWFyKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplVm9jYWJ1bGFyeUZvbGRlcigpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRCb29rKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGgpO1xyXG4gICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRCb29rRnJvbUZpbGUoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1RDMwQ1x1Qzc3QyBcdUI4NUNcdUI0RENcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzEyNFx1QzgxNSBcdUQzMENcdUM3N0MgXHVDODAwXHVDN0E1L1x1Qjg1Q1x1QjREQ1xyXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRofS9zZXR0aW5ncy5qc29uYCk7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuc2V0dGluZ3MsXHJcbiAgICAgICAgICAgIHN0YXRpc3RpY3M6IHRoaXMuc3RhdGlzdGljc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNldHRpbmdzUGF0aCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nRmlsZSwgY29udGVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoc2V0dGluZ3NQYXRoLCBjb250ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzEyNFx1QzgxNSBcdUQzMENcdUM3N0MgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aH0vc2V0dGluZ3MuanNvbmApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc2V0dGluZ3NQYXRoKTtcclxuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShjb250ZW50KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzID0geyAuLi50aGlzLnNldHRpbmdzLCAuLi5kYXRhLnNldHRpbmdzIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0aXN0aWNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0aXN0aWNzID0geyAuLi50aGlzLnN0YXRpc3RpY3MsIC4uLmRhdGEuc3RhdGlzdGljcyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdUMxMjRcdUM4MTUgXHVEMzBDXHVDNzdDIFx1Qjg1Q1x1QjREQyBcdUMyRTRcdUQzMjgsIFx1QUUzMFx1QkNGOFx1QUMxMiBcdUMwQUNcdUM2QTk6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBCb29rIFx1QUQwMFx1QjlBQyBcdUJBNTRcdUMxMUNcdUI0RENcdUI0RTRcclxuICAgIGFzeW5jIGNyZWF0ZUJvb2sobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nID0gJycpOiBQcm9taXNlPEJvb2s+IHtcclxuICAgICAgICBjb25zdCBpZCA9IGBib29rXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcclxuICAgICAgICBjb25zdCBib29rOiBCb29rID0ge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgd29yZENvdW50OiAwLFxyXG4gICAgICAgICAgICBpc0RlZmF1bHQ6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmJvb2tzLnNldChpZCwgYm9vayk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgICAgIHJldHVybiBib29rO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZUJvb2soYm9va0lkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8Qm9vaz4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQoYm9va0lkKTtcclxuICAgICAgICBpZiAoIWJvb2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCb29rIFwiJHtib29rSWR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVkQm9vazogQm9vayA9IHtcclxuICAgICAgICAgICAgLi4uYm9vayxcclxuICAgICAgICAgICAgLi4udXBkYXRlcyxcclxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmJvb2tzLnNldChib29rSWQsIHVwZGF0ZWRCb29rKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKHVwZGF0ZWRCb29rKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZUJvb2soYm9va0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoYm9va0lkID09PSAnZGVmYXVsdCcpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzQwIFx1QzBBRFx1QzgxQ1x1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XHJcbiAgICAgICAgaWYgKCFib29rKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQm9vayBcIiR7Ym9va0lkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYm9va1x1QzVEMCBcdUMxOERcdUQ1NUMgXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUNcclxuICAgICAgICBjb25zdCB3b3Jkc1RvRGVsZXRlID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IGJvb2tJZClcclxuICAgICAgICAgICAgLm1hcCh3b3JkID0+IHdvcmQud29yZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzVG9EZWxldGUpIHtcclxuICAgICAgICAgICAgdGhpcy53b3Jkcy5kZWxldGUod29yZC50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGJvb2sgXHVDMEFEXHVDODFDXHJcbiAgICAgICAgdGhpcy5ib29rcy5kZWxldGUoYm9va0lkKTtcclxuXHJcbiAgICAgICAgLy8gXHVEMzBDXHVDNzdDIFx1QzBBRFx1QzgxQ1xyXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7Ym9vay5uYW1lLnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCAnXycpfS5tZGA7XHJcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGAke3RoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YCk7XHJcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5kZWxldGUoZmlsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgYm9va1x1Qzc3NCBcdUMwQURcdUM4MUNcdUI0MUMgYm9va1x1Qzc3NFx1QkE3NCBcdUFFMzBcdUJDRjggYm9va1x1QzczQ1x1Qjg1QyBcdUJDQzBcdUFDQkRcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkID09PSBib29rSWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkID0gJ2RlZmF1bHQnO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxCb29rcygpOiBCb29rW10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYm9va3MudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEuaXNEZWZhdWx0KSByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIGlmIChiLmlzRGVmYXVsdCkgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEJvb2soYm9va0lkOiBzdHJpbmcpOiBCb29rIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib29rcy5nZXQoYm9va0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXJyZW50Qm9vaygpOiBCb29rIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib29rcy5nZXQodGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZXRDdXJyZW50Qm9vayhib29rSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghdGhpcy5ib29rcy5oYXMoYm9va0lkKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJvb2sgXCIke2Jvb2tJZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkID0gYm9va0lkO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBCb29rXHVCQ0M0IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICBwcml2YXRlIHVwZGF0ZUJvb2tXb3JkQ291bnQoYm9va0lkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB3b3JkQ291bnQgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gYm9va0lkKS5sZW5ndGg7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay53b3JkQ291bnQgPSB3b3JkQ291bnQ7XHJcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwXHJcbiAgICBhc3luYyBhZGRXb3JkKHdvcmREYXRhOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmQgPSB3b3JkRGF0YS53b3JkLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMud29yZHMuaGFzKHdvcmQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkRGF0YS53b3JkfVwiXHVCMjk0IFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NjlcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBuZXdXb3JkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcclxuICAgICAgICAgICAgLi4ud29yZERhdGEsXHJcbiAgICAgICAgICAgIHdvcmQ6IHdvcmREYXRhLndvcmQudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IDAsXHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6ICdnb29kJyxcclxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBudWxsLFxyXG4gICAgICAgICAgICBhZGRlZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgYm9va0lkOiB3b3JkRGF0YS5ib29rSWQgfHwgdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy53b3Jkcy5zZXQod29yZCwgbmV3V29yZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2sgXHVEMzBDXHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldChuZXdXb3JkLmJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay53b3JkQ291bnQrKztcclxuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQ1xyXG4gICAgYXN5bmMgcmVtb3ZlV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB3b3JkS2V5ID0gd29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IHdvcmREYXRhID0gdGhpcy53b3Jkcy5nZXQod29yZEtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF3b3JkRGF0YSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJvb2tJZCA9IHdvcmREYXRhLmJvb2tJZDtcclxuICAgICAgICB0aGlzLndvcmRzLmRlbGV0ZSh3b3JkS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9vayBcdUQzMENcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay53b3JkQ291bnQtLTtcclxuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOCAoXHVCQ0Y1XHVDMkI1IFx1QUNCMFx1QUNGQylcclxuICAgIGFzeW5jIHVwZGF0ZVdvcmQod29yZDogc3RyaW5nLCBkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB3b3JkS2V5ID0gd29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IHdvcmREYXRhID0gdGhpcy53b3Jkcy5nZXQod29yZEtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF3b3JkRGF0YSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdvcmREYXRhLnJldmlld0NvdW50Kys7XHJcbiAgICAgICAgd29yZERhdGEuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHk7XHJcbiAgICAgICAgd29yZERhdGEubGFzdFJldmlld2VkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG5cclxuICAgICAgICAvLyBcdUQxQjVcdUFDQzQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnRvdGFsUmV2aWV3cysrO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RyZWFrKCk7XHJcblxyXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQod29yZERhdGEuYm9va0lkKTtcclxuICAgICAgICBpZiAoYm9vaykge1xyXG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggKFx1QkNGNVx1QzJCNSBcdUFDQjBcdUFDRkMgKyBcdUMyQTRcdUQzOThcdUM3NzRcdUMyQTRcdUI0REMgXHVCOUFDXHVENTNDXHVEMkYwXHVDMTU4IFx1QzgxNVx1QkNGNClcclxuICAgIGFzeW5jIHVwZGF0ZVdvcmRXaXRoU2NoZWR1bGUoXHJcbiAgICAgICAgd29yZDogc3RyaW5nLCBcclxuICAgICAgICBkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcsIFxyXG4gICAgICAgIHNjaGVkdWxlSW5mbz86IGFueVxyXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgd29yZEtleSA9IHdvcmQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBjb25zdCB3b3JkRGF0YSA9IHRoaXMud29yZHMuZ2V0KHdvcmRLZXkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghd29yZERhdGEpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3b3JkRGF0YS5yZXZpZXdDb3VudCsrO1xyXG4gICAgICAgIHdvcmREYXRhLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5O1xyXG4gICAgICAgIHdvcmREYXRhLmxhc3RSZXZpZXdlZCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUMyQTRcdUQzOThcdUM3NzRcdUMyQTRcdUI0REMgXHVCOUFDXHVENTNDXHVEMkYwXHVDMTU4IFx1QzgxNVx1QkNGNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBpZiAoc2NoZWR1bGVJbmZvKSB7XHJcbiAgICAgICAgICAgIHdvcmREYXRhLnNjaGVkdWxlSW5mbyA9IHNjaGVkdWxlSW5mbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1RDFCNVx1QUNDNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICB0aGlzLnN0YXRpc3RpY3MudG90YWxSZXZpZXdzKys7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdHJlYWsoKTtcclxuXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2sgXHVEMzBDXHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldCh3b3JkRGF0YS5ib29rSWQpO1xyXG4gICAgICAgIGlmIChib29rKSB7XHJcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGJvb2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzgwNFx1Q0NCNCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IChMTE0gQVBJXHVCODVDIFx1QUMwMFx1QzgzOFx1QzYyOCBcdUM4MTVcdUJDRjRcdUI4NUMgXHVCMzZFXHVDNUI0XHVDNEYwXHVBRTMwKVxyXG4gICAgYXN5bmMgdXBkYXRlV29yZERhdGEod29yZDogc3RyaW5nLCB1cGRhdGVkV29yZERhdGE6IFZvY2FidWxhcnlDYXJkKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgd29yZEtleSA9IHdvcmQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ1dvcmQgPSB0aGlzLndvcmRzLmdldCh3b3JkS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWV4aXN0aW5nV29yZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBcdUIyRThcdUM1QjRcdUM3NTggXHVCQ0Y1XHVDMkI1IFx1QUQwMFx1QjgyOCBcdUM4MTVcdUJDRjRcdUIyOTQgXHVDNzIwXHVDOUMwXHVENTU4XHVBQ0UwLCBcdUI3M0IgXHVDODE1XHVCQ0Y0XHVCOUNDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRXb3JkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcclxuICAgICAgICAgICAgLi4udXBkYXRlZFdvcmREYXRhLFxyXG4gICAgICAgICAgICB3b3JkOiB3b3JkS2V5LFxyXG4gICAgICAgICAgICByZXZpZXdDb3VudDogZXhpc3RpbmdXb3JkLnJldmlld0NvdW50LFxyXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiBleGlzdGluZ1dvcmQuZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBleGlzdGluZ1dvcmQubGFzdFJldmlld2VkLFxyXG4gICAgICAgICAgICBhZGRlZERhdGU6IGV4aXN0aW5nV29yZC5hZGRlZERhdGUsXHJcbiAgICAgICAgICAgIGJvb2tJZDogZXhpc3RpbmdXb3JkLmJvb2tJZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMud29yZHMuc2V0KHdvcmRLZXksIHVwZGF0ZWRXb3JkKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9vayBcdUQzMENcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KHVwZGF0ZWRXb3JkLmJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4Q1xyXG4gICAgZ2V0V29yZCh3b3JkOiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud29yZHMuZ2V0KHdvcmQudG9Mb3dlckNhc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVENjA0XHVDN0FDIGJvb2tcdUM3NTggXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OENcclxuICAgIGdldEFsbFdvcmRzKCk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS53b3JkLmxvY2FsZUNvbXBhcmUoYi53b3JkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVEMkI5XHVDODE1IGJvb2tcdUM3NTggXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OENcclxuICAgIGdldFdvcmRzQnlCb29rKGJvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSBib29rSWQpXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLndvcmQubG9jYWxlQ29tcGFyZShiLndvcmQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJDRjVcdUMyQjUgXHVCMzAwXHVDMEMxIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OEMgKFx1RDYwNFx1QzdBQyBib29rKVxyXG4gICAgZ2V0V29yZHNGb3JSZXZpZXcoKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCByZXZpZXdJbnRlcnZhbE1zID0gdGhpcy5zZXR0aW5ncy5yZXZpZXdJbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcblxyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3b3JkLmxhc3RSZXZpZXdlZCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RSZXZpZXcgPSBuZXcgRGF0ZSh3b3JkLmxhc3RSZXZpZXdlZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0UmV2aWV3ID0gbm93LmdldFRpbWUoKSAtIGxhc3RSZXZpZXcuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGltZVNpbmNlTGFzdFJldmlldyA+PSByZXZpZXdJbnRlcnZhbE1zO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIyRThcdUM1QjQgXHVBQzgwXHVDMEM5IChcdUQ2MDRcdUM3QUMgYm9vaylcclxuICAgIHNlYXJjaFdvcmRzKHF1ZXJ5OiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcclxuICAgICAgICBjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZClcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+XHJcbiAgICAgICAgICAgICAgICB3b3JkLndvcmQuaW5jbHVkZXMobG93ZXJRdWVyeSkgfHxcclxuICAgICAgICAgICAgICAgIHdvcmQubWVhbmluZ3Muc29tZShtZWFuaW5nID0+IG1lYW5pbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQxQjVcdUFDQzQgXHVDODcwXHVENjhDIChcdUQ2MDRcdUM3QUMgYm9vaylcclxuICAgIGdldFN0YXRpc3RpY3MoKSB7XHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKTtcclxuICAgICAgICBjb25zdCB0b3RhbFdvcmRzID0gd29yZHMubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsUmV2aWV3cyA9IHRoaXMuc3RhdGlzdGljcy50b3RhbFJldmlld3M7XHJcbiAgICAgICAgY29uc3QgYXZlcmFnZURpZmZpY3VsdHkgPSB3b3Jkcy5sZW5ndGggPiAwIFxyXG4gICAgICAgICAgICA/IHdvcmRzLnJlZHVjZSgoc3VtLCB3b3JkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmaWN1bHR5VmFsdWUgPSB3b3JkLmRpZmZpY3VsdHkgPT09ICdlYXN5JyA/IDEgOiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkLmRpZmZpY3VsdHkgPT09ICdnb29kJyA/IDIgOiAzO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1bSArIGRpZmZpY3VsdHlWYWx1ZTtcclxuICAgICAgICAgICAgfSwgMCkgLyB3b3Jkcy5sZW5ndGhcclxuICAgICAgICAgICAgOiAwO1xyXG5cclxuICAgICAgICBjb25zdCB3b3Jkc0J5RGlmZmljdWx0eSA9IHtcclxuICAgICAgICAgICAgZWFzeTogd29yZHMuZmlsdGVyKHcgPT4gdy5kaWZmaWN1bHR5ID09PSAnZWFzeScpLmxlbmd0aCxcclxuICAgICAgICAgICAgZ29vZDogd29yZHMuZmlsdGVyKHcgPT4gdy5kaWZmaWN1bHR5ID09PSAnZ29vZCcpLmxlbmd0aCxcclxuICAgICAgICAgICAgaGFyZDogd29yZHMuZmlsdGVyKHcgPT4gdy5kaWZmaWN1bHR5ID09PSAnaGFyZCcpLmxlbmd0aFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFx1Q0Q1Q1x1QURGQyA3XHVDNzdDIFx1RDY1Q1x1QjNEOSBcdUFDQzRcdUMwQjBcclxuICAgICAgICBjb25zdCByZWNlbnRBY3Rpdml0eSA9IHRoaXMuY2FsY3VsYXRlUmVjZW50QWN0aXZpdHkoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG90YWxXb3JkcyxcclxuICAgICAgICAgICAgdG90YWxSZXZpZXdzLFxyXG4gICAgICAgICAgICBzdHJlYWtEYXlzOiB0aGlzLnN0YXRpc3RpY3Muc3RyZWFrRGF5cyxcclxuICAgICAgICAgICAgYXZlcmFnZURpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIHdvcmRzQnlEaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICByZWNlbnRBY3Rpdml0eVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNzdDXHVDNzdDIFx1QkFBOVx1RDQ1QyBcdUM5QzRcdUQ1ODlcdUI5NjAgXHVDODcwXHVENjhDIChcdUQ2MDRcdUM3QUMgYm9vaylcclxuICAgIGdldERhaWx5R29hbFByb2dyZXNzKCkge1xyXG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgICBjb25zdCB0b2RheVdvcmRzID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZClcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghd29yZC5sYXN0UmV2aWV3ZWQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh3b3JkLmxhc3RSZXZpZXdlZCkudG9EYXRlU3RyaW5nKCkgPT09IHRvZGF5O1xyXG4gICAgICAgICAgICB9KS5sZW5ndGg7XHJcblxyXG4gICAgICAgIGNvbnN0IGdvYWwgPSB0aGlzLnNldHRpbmdzLmRhaWx5R29hbDtcclxuICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gZ29hbCA+IDAgPyBNYXRoLm1pbigodG9kYXlXb3JkcyAvIGdvYWwpICogMTAwLCAxMDApIDogMDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY3VycmVudDogdG9kYXlXb3JkcyxcclxuICAgICAgICAgICAgZ29hbDogZ29hbCxcclxuICAgICAgICAgICAgcGVyY2VudGFnZTogcGVyY2VudGFnZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgYXN5bmMgdXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3M6IFBhcnRpYWw8dHlwZW9mIHRoaXMuc2V0dGluZ3M+KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwMFx1QzdBNVx1QzZBOSBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUMgXHVCQ0MwXHVENjU4IChcdUQ2MzhcdUQ2NThcdUMxMzEgXHVDNzIwXHVDOUMwKVxyXG4gICAgZ2V0RGF0YUZvclNhdmUoKTogRGF0YWJhc2VEYXRhIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBib29rczogQXJyYXkuZnJvbSh0aGlzLmJvb2tzLnZhbHVlcygpKSxcclxuICAgICAgICAgICAgd29yZHM6IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSksXHJcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzLFxyXG4gICAgICAgICAgICBzdGF0aXN0aWNzOiB0aGlzLnN0YXRpc3RpY3NcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzgwMFx1QzdBNVx1QjQxQyBcdUIzNzBcdUM3NzRcdUQxMzBcdUM1RDBcdUMxMUMgXHVCODVDXHVCNERDIChcdUQ2MzhcdUQ2NThcdUMxMzEgXHVDNzIwXHVDOUMwKVxyXG4gICAgYXN5bmMgbG9hZEZyb21EYXRhKGRhdGE6IERhdGFiYXNlRGF0YSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIC8vIE1EIFx1RDMwQ1x1Qzc3QyBcdUMyRENcdUMyQTRcdUQxNUNcdUM1RDBcdUMxMUNcdUIyOTQgXHVDNzc0IFx1QkE1NFx1QzExQ1x1QjREQyBcdUIzMDBcdUMyRTAgbG9hZEFsbEJvb2tzKClcdUI5N0MgXHVDMEFDXHVDNkE5XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQWxsQm9va3MoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM1RjBcdUMxOEQgXHVENTU5XHVDMkI1XHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgcHJpdmF0ZSB1cGRhdGVTdHJlYWsoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IGxhc3RTdHVkeURhdGUgPSB0aGlzLnN0YXRpc3RpY3MubGFzdFN0dWR5RGF0ZSBcclxuICAgICAgICAgICAgPyBuZXcgRGF0ZSh0aGlzLnN0YXRpc3RpY3MubGFzdFN0dWR5RGF0ZSkudG9EYXRlU3RyaW5nKClcclxuICAgICAgICAgICAgOiBudWxsO1xyXG5cclxuICAgICAgICBpZiAobGFzdFN0dWR5RGF0ZSA9PT0gdG9kYXkpIHtcclxuICAgICAgICAgICAgLy8gXHVDNjI0XHVCMjk4IFx1Qzc3NFx1QkJGOCBcdUQ1NTlcdUMyQjVcdUQ1ODhcdUM3M0NcdUJBNzQgXHVDNUYwXHVDMThEXHVDNzdDIFx1Qzk5RFx1QUMwMFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFsYXN0U3R1ZHlEYXRlKSB7XHJcbiAgICAgICAgICAgIC8vIFx1Q0M5OFx1Qzc0QyBcdUQ1NTlcdUMyQjVcdUQ1NThcdUIyOTQgXHVBQ0JEXHVDNkIwXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGlzdGljcy5zdHJlYWtEYXlzID0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB5ZXN0ZXJkYXkuc2V0RGF0ZSh5ZXN0ZXJkYXkuZ2V0RGF0ZSgpIC0gMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHllc3RlcmRheVN0ciA9IHllc3RlcmRheS50b0RhdGVTdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsYXN0U3R1ZHlEYXRlID09PSB5ZXN0ZXJkYXlTdHIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QzVCNFx1QzgxQyBcdUQ1NTlcdUMyQjVcdUQ1ODhcdUM3M0NcdUJBNzQgXHVDNUYwXHVDMThEXHVDNzdDIFx1Qzk5RFx1QUMwMFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMrKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QzVGMFx1QzE4RFx1Qzc3NCBcdUIwNEFcdUM1QjRcdUM5QzQgXHVBQ0JEXHVDNkIwIDFcdUI4NUMgXHVCOUFDXHVDMTRCXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRpc3RpY3Muc3RyZWFrRGF5cyA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGlzdGljcy5sYXN0U3R1ZHlEYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1Q0Q1Q1x1QURGQyA3XHVDNzdDIFx1RDY1Q1x1QjNEOSBcdUFDQzRcdUMwQjBcclxuICAgIHByaXZhdGUgY2FsY3VsYXRlUmVjZW50QWN0aXZpdHkoKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZpdHkgPSBbXTtcclxuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSA2OyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodG9kYXkpO1xyXG4gICAgICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBpKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGRhdGUudG9EYXRlU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB3b3Jkc1N0dWRpZWQgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpLmZpbHRlcih3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghd29yZC5sYXN0UmV2aWV3ZWQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh3b3JkLmxhc3RSZXZpZXdlZCkudG9EYXRlU3RyaW5nKCkgPT09IGRhdGVTdHI7XHJcbiAgICAgICAgICAgIH0pLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJldmlld3NDb21wbGV0ZWQgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpLmZpbHRlcih3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghd29yZC5sYXN0UmV2aWV3ZWQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJldmlld0RhdGUgPSBuZXcgRGF0ZSh3b3JkLmxhc3RSZXZpZXdlZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV2aWV3RGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gZGF0ZVN0cjtcclxuICAgICAgICAgICAgfSkubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgYWN0aXZpdHkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBkYXRlOiBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcclxuICAgICAgICAgICAgICAgIHdvcmRzU3R1ZGllZCxcclxuICAgICAgICAgICAgICAgIHJldmlld3NDb21wbGV0ZWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYWN0aXZpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDNGNFx1QjM1NCBcdUFDQkRcdUI4NUMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICB1cGRhdGVWb2NhYnVsYXJ5Rm9sZGVyUGF0aChuZXdQYXRoOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRoID0gbmV3UGF0aDtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVWb2NhYnVsYXJ5Rm9sZGVyKCk7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IElMTE1TZXJ2aWNlLCBXb3JkRGF0YVJlcXVlc3QsIFdvcmREYXRhUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9jb3JlL3BvcnRzL3NlcnZpY2VzL0lMTE1TZXJ2aWNlJztcbmltcG9ydCB7IExMTVNlcnZpY2UgfSBmcm9tICcuL0xMTVNlcnZpY2UnO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xuXG5leHBvcnQgY2xhc3MgTExNU2VydmljZUFkYXB0ZXIgaW1wbGVtZW50cyBJTExNU2VydmljZSB7XG4gICAgcHJpdmF0ZSBsbG1TZXJ2aWNlOiBMTE1TZXJ2aWNlO1xuXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncykge1xuICAgICAgICB0aGlzLmxsbVNlcnZpY2UgPSBuZXcgTExNU2VydmljZShzZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0V29yZERhdGEocmVxdWVzdDogV29yZERhdGFSZXF1ZXN0KTogUHJvbWlzZTxXb3JkRGF0YVJlc3BvbnNlPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB3b3JkSW5mbyA9IGF3YWl0IHRoaXMubGxtU2VydmljZS5nZXRXb3JkSW5mbyhyZXF1ZXN0LndvcmQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICB3b3JkOiB3b3JkSW5mby53b3JkLFxuICAgICAgICAgICAgICAgICAgICBtZWFuaW5nOiB3b3JkSW5mby5tZWFuaW5ncyxcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZEluZm8ucHJvbnVuY2lhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IHdvcmRJbmZvLmV4YW1wbGVzLFxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmRJbmZvLnNpbWlsYXJXb3Jkc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmxsbVNlcnZpY2UudGVzdENvbm5lY3Rpb24oKTtcbiAgICB9XG5cbiAgICB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHNldHRpbmdzKTtcbiAgICB9XG59IiwgImltcG9ydCB7IElXb3JkU2VydmljZSwgV29yZERhdGFSZXF1ZXN0LCBXb3JkRGF0YVJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vY29yZS9wb3J0cy9zZXJ2aWNlcy9JV29yZFNlcnZpY2UnO1xuaW1wb3J0IHsgV29yZFNlcnZpY2UgfSBmcm9tICcuL1dvcmRTZXJ2aWNlJztcbmltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcblxuZXhwb3J0IGNsYXNzIFdvcmRTZXJ2aWNlQWRhcHRlciBpbXBsZW1lbnRzIElXb3JkU2VydmljZSB7XG4gICAgcHJpdmF0ZSB3b3JkU2VydmljZTogV29yZFNlcnZpY2U7XG5cbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMud29yZFNlcnZpY2UgPSBuZXcgV29yZFNlcnZpY2Uoc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFdvcmREYXRhKHJlcXVlc3Q6IFdvcmREYXRhUmVxdWVzdCk6IFByb21pc2U8V29yZERhdGFSZXNwb25zZT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgd29yZERhdGEgPSBhd2FpdCB0aGlzLndvcmRTZXJ2aWNlLmdldFdvcmREYXRhKHJlcXVlc3Qud29yZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmREYXRhLndvcmQsXG4gICAgICAgICAgICAgICAgICAgIG1lYW5pbmc6IHdvcmREYXRhLm1lYW5pbmcsXG4gICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmREYXRhLnByb251bmNpYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGF0YS5leGFtcGxlcyB8fCBbXSxcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiB3b3JkRGF0YS5zaW1pbGFyV29yZHMgfHwgW11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCdcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKTogdm9pZCB7XG4gICAgICAgIHRoaXMud29yZFNlcnZpY2UgPSBuZXcgV29yZFNlcnZpY2Uoc2V0dGluZ3MpO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgSVRUU1NlcnZpY2UgfSBmcm9tICcuL0lUVFNTZXJ2aWNlJztcbmltcG9ydCB7IFRUU1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS90dHMvVFRTU2VydmljZSc7XG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XG5cbmV4cG9ydCBjbGFzcyBUVFNTZXJ2aWNlQWRhcHRlciBpbXBsZW1lbnRzIElUVFNTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHR0c1NlcnZpY2U6IFRUU1NlcnZpY2U7XG5cbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMudHRzU2VydmljZSA9IG5ldyBUVFNTZXJ2aWNlKHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLnR0c0VuYWJsZWQsXG4gICAgICAgICAgICB2b2ljZTogc2V0dGluZ3MudHRzVm9pY2UsXG4gICAgICAgICAgICBwbGF5YmFja1NwZWVkOiBzZXR0aW5ncy50dHNQbGF5YmFja1NwZWVkLFxuICAgICAgICAgICAgYXV0b1BsYXk6IHNldHRpbmdzLnR0c0F1dG9QbGF5XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy50dHNTZXJ2aWNlLnNwZWFrVGV4dCh0ZXh0KTtcbiAgICB9XG5cbiAgICBhc3luYyBzcGVha1dvcmQod29yZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMudHRzU2VydmljZS5zcGVha1dvcmQod29yZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc3BlYWtFeGFtcGxlKGV4YW1wbGU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtFeGFtcGxlKGV4YW1wbGUpO1xuICAgIH1cblxuICAgIHN0b3BTcGVha2luZygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnN0b3BTcGVha2luZygpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnVwZGF0ZVNldHRpbmdzKHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLnR0c0VuYWJsZWQsXG4gICAgICAgICAgICB2b2ljZTogc2V0dGluZ3MudHRzVm9pY2UsXG4gICAgICAgICAgICBwbGF5YmFja1NwZWVkOiBzZXR0aW5ncy50dHNQbGF5YmFja1NwZWVkLFxuICAgICAgICAgICAgYXV0b1BsYXk6IHNldHRpbmdzLnR0c0F1dG9QbGF5XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHRzU2VydmljZS5pc0VuYWJsZWQoKTtcbiAgICB9XG5cbiAgICBnZXRBdmFpbGFibGVWb2ljZXMoKTogU3BlZWNoU3ludGhlc2lzVm9pY2VbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR0c1NlcnZpY2UuZ2V0QXZhaWxhYmxlVm9pY2VzKCk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBESUNvbnRhaW5lciB9IGZyb20gJy4vRElDb250YWluZXInO1xuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xuXG4vLyBDb3JlIFNlcnZpY2VzXG5pbXBvcnQgeyBBZGRXb3JkVXNlQ2FzZSB9IGZyb20gJy4uLy4uL2NvcmUvdXNlLWNhc2VzL0FkZFdvcmRVc2VDYXNlJztcbmltcG9ydCB7IENyZWF0ZUJvb2tVc2VDYXNlIH0gZnJvbSAnLi4vLi4vY29yZS91c2UtY2FzZXMvQ3JlYXRlQm9va1VzZUNhc2UnO1xuaW1wb3J0IHsgR2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlIH0gZnJvbSAnLi4vLi4vY29yZS91c2UtY2FzZXMvR2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlJztcbmltcG9ydCB7IFJldmlld1dvcmRVc2VDYXNlIH0gZnJvbSAnLi4vLi4vY29yZS91c2UtY2FzZXMvUmV2aWV3V29yZFVzZUNhc2UnO1xuXG4vLyBJbmZyYXN0cnVjdHVyZSBTZXJ2aWNlc1xuaW1wb3J0IHsgVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyIH0gZnJvbSAnLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvb2JzaWRpYW4vcmVwb3NpdG9yaWVzL1ZvY2FidWxhcnlSZXBvc2l0b3J5QWRhcHRlcic7XG5pbXBvcnQgeyBCb29rUmVwb3NpdG9yeUFkYXB0ZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvQm9va1JlcG9zaXRvcnlBZGFwdGVyJztcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XG5pbXBvcnQgeyBMTE1TZXJ2aWNlQWRhcHRlciB9IGZyb20gJy4uLy4uL2luZnJhc3RydWN0dXJlL2xsbS9MTE1TZXJ2aWNlQWRhcHRlcic7XG5cbi8vIEV4dGVybmFsIFNlcnZpY2VzXG5pbXBvcnQgeyBXb3JkU2VydmljZUFkYXB0ZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9leHRlcm5hbC9Xb3JkU2VydmljZUFkYXB0ZXInO1xuaW1wb3J0IHsgVFRTU2VydmljZUFkYXB0ZXIgfSBmcm9tICcuLi8uLi9jb3JlL3BvcnRzL3NlcnZpY2VzL0lUVFNTZXJ2aWNlQWRhcHRlcic7XG5cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlUmVnaXN0cnkge1xuICAgIHN0YXRpYyByZWdpc3RlclNlcnZpY2VzKGNvbnRhaW5lcjogRElDb250YWluZXIsIGFwcDogQXBwLCBzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKTogdm9pZCB7XG4gICAgICAgIC8vIEV4dGVybmFsIGRlcGVuZGVuY2llc1xuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJJbnN0YW5jZSgnYXBwJywgYXBwKTtcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVySW5zdGFuY2UoJ3NldHRpbmdzJywgc2V0dGluZ3MpO1xuXG4gICAgICAgIC8vIEluZnJhc3RydWN0dXJlIExheWVyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignZGF0YWJhc2VNYW5hZ2VyJywgKGFwcDogQXBwKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIoXG4gICAgICAgICAgICAgICAgYXBwLFxuICAgICAgICAgICAgICAgICgpID0+IHt9LCAvLyBzYXZlQ2FsbGJhY2sgLSBESVx1QzVEMFx1QzExQ1x1QjI5NCBcdUJFNDggXHVENTY4XHVDMjE4XHVCODVDIFx1Q0M5OFx1QjlBQ1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLnZvY2FidWxhcnlGb2xkZXJQYXRoXG4gICAgICAgICAgICApO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnYXBwJ10sXG4gICAgICAgICAgICBzaW5nbGV0b246IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCd2b2NhYnVsYXJ5UmVwb3NpdG9yeScsIFZvY2FidWxhcnlSZXBvc2l0b3J5QWRhcHRlciwge1xuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ2RhdGFiYXNlTWFuYWdlciddXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignYm9va1JlcG9zaXRvcnknLCBCb29rUmVwb3NpdG9yeUFkYXB0ZXIsIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydkYXRhYmFzZU1hbmFnZXInXVxuICAgICAgICB9KTtcblxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3dvcmRTZXJ2aWNlJywgV29yZFNlcnZpY2VBZGFwdGVyLCB7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnc2V0dGluZ3MnXVxuICAgICAgICB9KTtcblxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2xsbVNlcnZpY2UnLCBMTE1TZXJ2aWNlQWRhcHRlciwge1xuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3NldHRpbmdzJ11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCd0dHNTZXJ2aWNlJywgVFRTU2VydmljZUFkYXB0ZXIsIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydzZXR0aW5ncyddXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENvcmUgVXNlIENhc2VzXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignYWRkV29yZFVzZUNhc2UnLCBBZGRXb3JkVXNlQ2FzZSwge1xuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3ZvY2FidWxhcnlSZXBvc2l0b3J5JywgJ2Jvb2tSZXBvc2l0b3J5JywgJ3dvcmRTZXJ2aWNlJ11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdjcmVhdGVCb29rVXNlQ2FzZScsIENyZWF0ZUJvb2tVc2VDYXNlLCB7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnYm9va1JlcG9zaXRvcnknXVxuICAgICAgICB9KTtcblxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2dldFdvcmRzRm9yUmV2aWV3VXNlQ2FzZScsIEdldFdvcmRzRm9yUmV2aWV3VXNlQ2FzZSwge1xuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3ZvY2FidWxhcnlSZXBvc2l0b3J5JywgJ2Jvb2tSZXBvc2l0b3J5J11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdyZXZpZXdXb3JkVXNlQ2FzZScsIFJldmlld1dvcmRVc2VDYXNlLCB7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsndm9jYWJ1bGFyeVJlcG9zaXRvcnknXVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgdXBkYXRlU2V0dGluZ3MoY29udGFpbmVyOiBESUNvbnRhaW5lciwgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJJbnN0YW5jZSgnc2V0dGluZ3MnLCBzZXR0aW5ncyk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUM1QjRcdUIzMTFcdUQxMzAgXHVDMTFDXHVCRTQ0XHVDMkE0XHVCNEU0IFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICAgICAgaWYgKGNvbnRhaW5lci5oYXMoJ3R0c1NlcnZpY2UnKSkge1xuICAgICAgICAgICAgY29uc3QgdHRzU2VydmljZSA9IGNvbnRhaW5lci5yZXNvbHZlPFRUU1NlcnZpY2VBZGFwdGVyPigndHRzU2VydmljZScpO1xuICAgICAgICAgICAgdHRzU2VydmljZS51cGRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjb250YWluZXIuaGFzKCdsbG1TZXJ2aWNlJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGxsbVNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZTxMTE1TZXJ2aWNlQWRhcHRlcj4oJ2xsbVNlcnZpY2UnKTtcbiAgICAgICAgICAgIGxsbVNlcnZpY2UudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoY29udGFpbmVyLmhhcygnd29yZFNlcnZpY2UnKSkge1xuICAgICAgICAgICAgY29uc3Qgd29yZFNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZTxXb3JkU2VydmljZUFkYXB0ZXI+KCd3b3JkU2VydmljZScpO1xuICAgICAgICAgICAgd29yZFNlcnZpY2UudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQXVCOzs7QUNBdkIsc0JBQWdFOzs7QUNHaEUsSUFBTSxpQkFBaUI7QUFFaEIsU0FBUyxjQUFjLFFBQXdCO0FBQ2xELE1BQUksQ0FBQztBQUFRLFdBQU87QUFFcEIsTUFBSTtBQUVBLFFBQUksWUFBWTtBQUNoQixhQUFT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QUFBLEVBQ0o7QUFBQTtBQUFBLEVBR0EsTUFBTSxjQUFjO0FBQ2hCLFVBQU0sT0FBTztBQUFBLE1BQ1QsVUFBVSxLQUFLO0FBQUEsSUFDbkI7QUFDQSxVQUFNLEtBQUssU0FBUyxJQUFJO0FBQUEsRUFDNUI7QUFDSjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgInByb3RvdHlwZSIsICJkZXNjcmlwdG9ycyIsICJmaWx0ZXIiLCAiaGFzT3duUHJvcGVydHkiLCAiZmlsdGVyIiwgInByb3RvdHlwZSIsICJ0b1N0cmluZyIsICJlbmNvZGUiLCAiaXNGb3JtRGF0YSIsICJpc0ZpbGVMaXN0IiwgInRyYW5zaXRpb25hbCIsICJmaWx0ZXIiLCAic2VsZiIsICJwcm90b3R5cGUiLCAidmFsaWRhdGVTdGF0dXMiLCAib3JpZ2luIiwgIm1lcmdlIiwgInRyYW5zaXRpb25hbCIsICJzaWduYWwiLCAiaXRlcmF0b3IiLCAiZG9uZSIsICJyZXMiLCAidmFsaWRhdG9ycyIsICJ0cmFuc2l0aW9uYWwiLCAiQXhpb3MiLCAiQXhpb3NFcnJvciIsICJDYW5jZWxlZEVycm9yIiwgImlzQ2FuY2VsIiwgIkNhbmNlbFRva2VuIiwgIlZFUlNJT04iLCAiYWxsIiwgImlzQXhpb3NFcnJvciIsICJzcHJlYWQiLCAidG9Gb3JtRGF0YSIsICJBeGlvc0hlYWRlcnMiLCAiSHR0cFN0YXR1c0NvZGUiLCAibWVyZ2VDb25maWciLCAianNvbkRhdGEiLCAiX2EiLCAidHRzU2V0dGluZ3MiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250YWluZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJDb25maXJtTW9kYWwiLCAiY29udGFpbmVyIiwgImltcG9ydF9vYnNpZGlhbiIsICJib29rIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250YWluZXIiLCAiYXBwIl0KfQo=
