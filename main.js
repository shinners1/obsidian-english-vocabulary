/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  AddBookModal: () => AddBookModal,
  EnglishVocabularyPlugin: () => EnglishVocabularyPlugin,
  default: () => EnglishVocabularyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian12 = require("obsidian");

// src/features/settings/ui/settings.ts
var import_obsidian2 = require("obsidian");

// src/utils.ts
function isPlainTextApiKey(apiKey) {
  if (!apiKey)
    return false;
  const apiKeyPatterns = [
    /^sk-[a-zA-Z0-9]{32,}$/,
    // OpenAI API 키
    /^sk-ant-[a-zA-Z0-9-_]{95}$/,
    // Anthropic API 키
    /^AIza[a-zA-Z0-9-_]{35}$/,
    // Google API 키
    /^[a-zA-Z0-9-_]{20,}$/
    // 일반적인 긴 토큰
  ];
  return apiKeyPatterns.some((pattern) => pattern.test(apiKey));
}
function encryptApiKey(apiKey) {
  if (!apiKey)
    return "";
  if (!isPlainTextApiKey(apiKey)) {
    return apiKey;
  }
  try {
    const key = "obsidian-vocab-temp-key-2024";
    let encrypted = "";
    for (let i = 0; i < apiKey.length; i++) {
      const charCode = apiKey.charCodeAt(i) ^ key.charCodeAt(i % key.length);
      encrypted += String.fromCharCode(charCode);
    }
    return btoa(encrypted);
  } catch (error) {
    console.error("\uB3D9\uAE30 \uC554\uD638\uD654 \uC2E4\uD328:", error);
    return "";
  }
}
function decryptApiKey(encryptedApiKey) {
  if (!encryptedApiKey)
    return "";
  if (isPlainTextApiKey(encryptedApiKey)) {
    return encryptedApiKey;
  }
  try {
    const key = "obsidian-vocab-temp-key-2024";
    const decoded = atob(encryptedApiKey);
    let decrypted = "";
    for (let i = 0; i < decoded.length; i++) {
      const charCode = decoded.charCodeAt(i) ^ key.charCodeAt(i % key.length);
      decrypted += String.fromCharCode(charCode);
    }
    return decrypted;
  } catch (error) {
    console.warn("\uBCF5\uD638\uD654 \uC2E4\uD328, \uD3C9\uBB38\uC73C\uB85C \uAC04\uC8FC:", error.message);
    return encryptedApiKey;
  }
}
function maskApiKey(apiKey) {
  if (!apiKey || typeof apiKey !== "string")
    return "";
  if (apiKey.length <= 8)
    return "*".repeat(apiKey.length);
  return apiKey.substring(0, 4) + "*".repeat(apiKey.length - 8) + apiKey.substring(apiKey.length - 4);
}
function formatDate(dateString) {
  if (!dateString) {
    return "\uC5C6\uC74C";
  }
  const date = new Date(dateString);
  if (isNaN(date.getTime())) {
    return "\uC798\uBABB\uB41C \uB0A0\uC9DC";
  }
  return date.toLocaleDateString("ko-KR", {
    year: "numeric",
    month: "long",
    day: "numeric"
  });
}

// src/shared/Config.ts
var DEFAULT_CONFIG = {
  api: {
    timeouts: {
      default: 3e4,
      // 30초
      llm: 6e4,
      // 60초
      tts: 15e3
      // 15초
    },
    retries: {
      maxAttempts: 3,
      delayMs: 1e3,
      exponentialBackoff: true
    },
    rateLimiting: {
      requestsPerMinute: 60,
      burstLimit: 10
    }
  },
  batch: {
    defaultSize: 5,
    maxSize: 20,
    delayBetweenBatches: 200,
    maxConcurrentBatches: 3
  },
  audio: {
    maxPoolSize: 10,
    autoCleanupTimeoutMs: 3e4,
    // 30초
    maxDurationMs: 3e5
    // 5분
  },
  database: {
    autoSaveInterval: 5e3,
    // 5초
    backupEnabled: true,
    maxFileSize: 10485760,
    // 10MB
    compressionEnabled: false
  },
  learning: {
    spaced_repetition: {
      initialInterval: 1,
      // 1일
      easyBonus: 1.3,
      hardPenalty: 0.8,
      maxInterval: 365,
      // 1년
      minInterval: 1
      // 1일
    },
    load_balancing: {
      maxDailyReviews: 100,
      fuzzingPercentage: 5,
      distributionWindow: 7
      // 7일
    }
  },
  ui: {
    animationDuration: 300,
    // 300ms
    progressUpdateInterval: 100,
    // 100ms
    notificationTimeout: 5e3,
    // 5초
    modalCloseDelay: 500
    // 500ms
  },
  security: {
    apiKeyEncryption: {
      iterations: 1e4,
      keyLength: 32,
      saltLength: 16
    },
    sessionTimeout: 36e5,
    // 1시간
    maxLoginAttempts: 5
  }
};
var DEVELOPMENT_CONFIG = {
  api: {
    timeouts: {
      default: 1e4,
      llm: 2e4,
      tts: 5e3
    },
    retries: {
      maxAttempts: 1,
      delayMs: 500,
      exponentialBackoff: false
    }
  },
  batch: {
    defaultSize: 2,
    maxSize: 5,
    delayBetweenBatches: 100
  },
  database: {
    autoSaveInterval: 1e3,
    backupEnabled: false
  }
};
var PRODUCTION_CONFIG = {
  api: {
    retries: {
      maxAttempts: 5,
      delayMs: 2e3,
      exponentialBackoff: true
    }
  },
  batch: {
    defaultSize: 10,
    maxSize: 50,
    delayBetweenBatches: 500
  },
  database: {
    autoSaveInterval: 1e4,
    backupEnabled: true,
    compressionEnabled: true
  }
};
var ConfigManager = class _ConfigManager {
  constructor() {
    this.config = this.mergeConfigs(DEFAULT_CONFIG, this.getEnvironmentConfig());
  }
  static getInstance() {
    if (!_ConfigManager.instance) {
      _ConfigManager.instance = new _ConfigManager();
    }
    return _ConfigManager.instance;
  }
  getConfig() {
    return { ...this.config };
  }
  getValue(path) {
    return this.getNestedValue(this.config, path);
  }
  updateConfig(updates) {
    this.config = this.mergeConfigs(this.config, updates);
  }
  getEnvironmentConfig() {
    const isDevelopment = true;
    return isDevelopment ? DEVELOPMENT_CONFIG : PRODUCTION_CONFIG;
  }
  mergeConfigs(base, override) {
    return this.deepMerge(base, override);
  }
  deepMerge(target, source) {
    const result = { ...target };
    for (const key in source) {
      if (source.hasOwnProperty(key)) {
        const sourceValue = source[key];
        const targetValue = result[key];
        if (this.isObject(sourceValue) && this.isObject(targetValue)) {
          result[key] = this.deepMerge(targetValue, sourceValue);
        } else if (sourceValue !== void 0) {
          result[key] = sourceValue;
        }
      }
    }
    return result;
  }
  isObject(item) {
    return item && typeof item === "object" && !Array.isArray(item);
  }
  getNestedValue(obj, path) {
    return path.split(".").reduce((current, key) => current == null ? void 0 : current[key], obj);
  }
};
function getConfigValue(path) {
  return ConfigManager.getInstance().getValue(path);
}
var CONFIG_PATHS = {
  API_TIMEOUT_DEFAULT: "api.timeouts.default",
  API_TIMEOUT_LLM: "api.timeouts.llm",
  API_TIMEOUT_TTS: "api.timeouts.tts",
  API_RETRY_MAX_ATTEMPTS: "api.retries.maxAttempts",
  API_RETRY_DELAY: "api.retries.delayMs",
  BATCH_DEFAULT_SIZE: "batch.defaultSize",
  BATCH_MAX_SIZE: "batch.maxSize",
  BATCH_DELAY: "batch.delayBetweenBatches",
  AUDIO_MAX_POOL_SIZE: "audio.maxPoolSize",
  AUDIO_CLEANUP_TIMEOUT: "audio.autoCleanupTimeoutMs",
  LEARNING_INITIAL_INTERVAL: "learning.spaced_repetition.initialInterval",
  LEARNING_EASY_BONUS: "learning.spaced_repetition.easyBonus",
  LEARNING_HARD_PENALTY: "learning.spaced_repetition.hardPenalty",
  UI_ANIMATION_DURATION: "ui.animationDuration",
  UI_NOTIFICATION_TIMEOUT: "ui.notificationTimeout"
};

// src/shared/RetryPolicy.ts
var RetryPolicy = class {
  constructor(options = {}) {
    var _a, _b, _c, _d, _e, _f;
    this.options = {
      maxAttempts: (_a = options.maxAttempts) != null ? _a : getConfigValue(CONFIG_PATHS.API_RETRY_MAX_ATTEMPTS),
      delayMs: (_b = options.delayMs) != null ? _b : getConfigValue(CONFIG_PATHS.API_RETRY_DELAY),
      exponentialBackoff: (_c = options.exponentialBackoff) != null ? _c : true,
      maxDelayMs: (_d = options.maxDelayMs) != null ? _d : 3e4,
      // 30초
      backoffMultiplier: (_e = options.backoffMultiplier) != null ? _e : 2,
      retryCondition: (_f = options.retryCondition) != null ? _f : this.defaultRetryCondition
    };
  }
  // 기본 재시도 조건
  defaultRetryCondition(error) {
    const retryableErrors = [
      "NetworkError",
      "TimeoutError",
      "fetch",
      "502",
      "503",
      "504",
      // 서버 에러
      "ECONNRESET",
      "ETIMEDOUT",
      "ENOTFOUND"
    ];
    const errorMessage = error.message.toLowerCase();
    const errorName = error.name.toLowerCase();
    return retryableErrors.some(
      (pattern) => errorMessage.includes(pattern.toLowerCase()) || errorName.includes(pattern.toLowerCase())
    );
  }
  // 지수 백오프 계산
  calculateDelay(attempt) {
    if (!this.options.exponentialBackoff) {
      return this.options.delayMs;
    }
    const delay2 = this.options.delayMs * Math.pow(this.options.backoffMultiplier, attempt - 1);
    const jitter = delay2 * 0.2 * (Math.random() - 0.5);
    const finalDelay = Math.floor(delay2 + jitter);
    return Math.min(finalDelay, this.options.maxDelayMs);
  }
  // 비동기 함수 재시도
  async execute(fn) {
    const startTime = Date.now();
    let lastError;
    for (let attempt = 1; attempt <= this.options.maxAttempts; attempt++) {
      try {
        const result = await fn();
        return {
          success: true,
          result,
          attempts: attempt,
          totalDuration: Date.now() - startTime
        };
      } catch (error) {
        lastError = error instanceof Error ? error : new Error(String(error));
        if (attempt === this.options.maxAttempts || !this.options.retryCondition(lastError)) {
          break;
        }
        const delay2 = this.calculateDelay(attempt);
        await this.delay(delay2);
      }
    }
    return {
      success: false,
      error: lastError,
      attempts: this.options.maxAttempts,
      totalDuration: Date.now() - startTime
    };
  }
  // 동기 함수 재시도
  executeSync(fn) {
    const startTime = Date.now();
    let lastError;
    for (let attempt = 1; attempt <= this.options.maxAttempts; attempt++) {
      try {
        const result = fn();
        return {
          success: true,
          result,
          attempts: attempt,
          totalDuration: Date.now() - startTime
        };
      } catch (error) {
        lastError = error instanceof Error ? error : new Error(String(error));
        if (attempt === this.options.maxAttempts || !this.options.retryCondition(lastError)) {
          break;
        }
      }
    }
    return {
      success: false,
      error: lastError,
      attempts: this.options.maxAttempts,
      totalDuration: Date.now() - startTime
    };
  }
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  // 설정 업데이트
  updateOptions(options) {
    this.options = { ...this.options, ...options };
  }
  // 현재 설정 반환
  getOptions() {
    return { ...this.options };
  }
};
var APIRetryPolicy = class extends RetryPolicy {
  constructor(options = {}) {
    super({
      maxAttempts: 3,
      delayMs: 2e3,
      exponentialBackoff: true,
      maxDelayMs: 15e3,
      retryCondition: (error) => {
        const retryableErrors = [
          "429",
          // Rate limit
          "502",
          "503",
          "504",
          // Server errors
          "timeout",
          "network"
        ];
        const errorText = error.message.toLowerCase();
        return retryableErrors.some((pattern) => errorText.includes(pattern));
      },
      ...options
    });
  }
};
async function retryAPICall(fn, options) {
  const policy = new APIRetryPolicy(options);
  const result = await policy.execute(fn);
  if (result.success) {
    return result.result;
  } else {
    throw result.error;
  }
}

// src/infrastructure/llm/LLMService.ts
var import_obsidian = require("obsidian");
var LLMService = class {
  constructor(settings) {
    this.settings = settings;
    this.retryPolicy = new APIRetryPolicy({
      maxAttempts: 3,
      delayMs: 2e3,
      exponentialBackoff: true
    });
  }
  // 현재 선택된 제공업체의 API 키를 가져오는 메서드
  getCurrentApiKey() {
    const provider = this.settings.llmProvider;
    let encryptedKey = "";
    switch (provider) {
      case "openai":
        encryptedKey = this.settings.openaiApiKey;
        break;
      case "anthropic":
        encryptedKey = this.settings.anthropicApiKey;
        break;
      case "google":
        encryptedKey = this.settings.googleApiKey;
        break;
    }
    return decryptApiKey(encryptedKey);
  }
  async testConnection() {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const testPrompt = 'Hello, this is a test message. Please respond with "OK" if you can read this.';
      const response = await this.callLLM(testPrompt);
      if (response.success) {
        return { success: true, data: "API \uC5F0\uACB0 \uC131\uACF5" };
      } else {
        return { success: false, error: response.error || "API \uC5F0\uACB0 \uC2E4\uD328" };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getWordDetails(word) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      const prompt = this.createWordDetailPrompt(word);
      const response = await this.callLLM(prompt);
      if (response.success) {
        const parsedData = this.parseWordDetailResponse(response.data, word);
        return { success: true, data: parsedData };
      } else {
        return { success: false, error: response.error || "\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async getMultipleWordDetails(words, progressCallback) {
    try {
      const apiKey = this.getCurrentApiKey();
      if (!apiKey) {
        return { success: false, error: "API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4." };
      }
      if (words.length === 0) {
        return { success: false, error: "\uCC98\uB9AC\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      const BATCH_SIZE = 20;
      const allResults = [];
      const totalBatches = Math.ceil(words.length / BATCH_SIZE);
      if (progressCallback) {
        progressCallback(0, words.length, `\uCD1D ${words.length}\uAC1C \uB2E8\uC5B4\uB97C ${totalBatches}\uAC1C \uBC30\uCE58\uB85C \uB098\uB204\uC5B4 \uCC98\uB9AC\uD569\uB2C8\uB2E4.`);
      }
      for (let i = 0; i < words.length; i += BATCH_SIZE) {
        const batchNumber = Math.floor(i / BATCH_SIZE) + 1;
        const batchWords = words.slice(i, i + BATCH_SIZE);
        if (progressCallback) {
          progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber}/${totalBatches} \uCC98\uB9AC \uC911... (${batchWords.length}\uAC1C \uB2E8\uC5B4)`);
        }
        try {
          const prompt = this.createMultipleWordDetailPrompt(batchWords);
          const response = await this.callLLM(prompt);
          if (response.success) {
            const parsedData = this.parseMultipleWordDetailResponse(response.data, batchWords);
            allResults.push(...parsedData);
            if (progressCallback) {
              progressCallback(i + batchWords.length, words.length, `\uBC30\uCE58 ${batchNumber} \uC644\uB8CC: ${parsedData.length}\uAC1C \uB2E8\uC5B4 \uCC98\uB9AC\uB428`);
            }
          } else {
            console.error(`\uBC30\uCE58 ${batchNumber} \uC2E4\uD328:`, response.error);
            if (progressCallback) {
              progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC2E4\uD328, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
            }
            const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
            allResults.push(...individualResults);
          }
        } catch (error) {
          console.error(`\uBC30\uCE58 ${batchNumber} \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
          if (progressCallback) {
            progressCallback(i, words.length, `\uBC30\uCE58 ${batchNumber} \uC624\uB958, \uAC1C\uBCC4 \uCC98\uB9AC\uB85C \uC804\uD658...`);
          }
          const individualResults = await this.processWordsIndividually(batchWords, progressCallback, i);
          allResults.push(...individualResults);
        }
        if (i + BATCH_SIZE < words.length) {
          await this.delay(1e3);
        }
      }
      if (progressCallback) {
        progressCallback(words.length, words.length, `\uBAA8\uB4E0 \uBC30\uCE58 \uCC98\uB9AC \uC644\uB8CC. \uCD1D ${allResults.length}\uAC1C \uB2E8\uC5B4 \uB370\uC774\uD130 \uC218\uC9D1\uB428`);
      }
      return { success: true, data: allResults };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  // 개별 단어 처리 (배치 실패 시 폴백)
  async processWordsIndividually(words, progressCallback, startIndex = 0) {
    const results = [];
    for (let i = 0; i < words.length; i++) {
      const word = words[i];
      const currentIndex = startIndex + i;
      try {
        if (progressCallback) {
          progressCallback(currentIndex, startIndex + words.length, `\uAC1C\uBCC4 \uCC98\uB9AC: "${word}"`);
        }
        const response = await this.getWordDetails(word);
        if (response.success && response.data) {
          results.push(response.data);
        } else {
          console.warn(`\uB2E8\uC5B4 "${word}" \uCC98\uB9AC \uC2E4\uD328:`, response.error);
          results.push({
            word: word.toLowerCase(),
            pronunciation: "",
            meanings: ["\uCC98\uB9AC \uC2E4\uD328"],
            examples: [],
            similarWords: []
          });
        }
        await this.delay(500);
      } catch (error) {
        console.error(`\uB2E8\uC5B4 "${word}" \uAC1C\uBCC4 \uCC98\uB9AC \uC911 \uC624\uB958:`, error);
        results.push({
          word: word.toLowerCase(),
          pronunciation: "",
          meanings: ["\uCC98\uB9AC \uC624\uB958"],
          examples: [],
          similarWords: []
        });
      }
    }
    return results;
  }
  // 지연 함수
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  createWordDetailPrompt(word) {
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4 "${word}"\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
1. \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD)
2. \uD55C\uAE00 \uB73B\uB4E4 (\uC5EC\uB7EC \uAC1C\uC77C \uC218 \uC788\uC74C)
3. \uAC01 \uB73B\uBCC4\uB85C \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED (\uAC01 \uB73B\uB2F9 2-3\uAC1C\uC758 \uC608\uBB38 \uC81C\uACF5)
4. \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4

\uC751\uB2F5 \uD615\uC2DD:
{
  "word": "${word}",
  "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
  "meanings": ["\uB73B1", "\uB73B2", "\uB73B3"],
  "examples": [
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 1",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 2", 
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
    },
    {
      "english": "\uC601\uC5B4 \uC608\uBB38 3",
      "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
    }
  ],
  "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42", "\uC720\uC0AC\uB2E8\uC5B43"]
}

JSON \uD615\uC2DD\uC73C\uB85C\uB9CC \uC751\uB2F5\uD574\uC8FC\uC138\uC694. \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  createMultipleWordDetailPrompt(words) {
    const wordList = words.join(", ");
    return `\uB2E4\uC74C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC5D0 \uB300\uD55C \uC0C1\uC138 \uC815\uBCF4\uB97C \uC815\uD655\uD55C JSON \uD615\uC2DD\uC73C\uB85C \uC81C\uACF5\uD574\uC8FC\uC138\uC694: ${wordList}

\uC694\uAD6C\uC0AC\uD56D:
- \uAC01 \uB2E8\uC5B4\uC5D0 \uB300\uD574 \uBC1C\uC74C\uAE30\uD638 (IPA \uD615\uC2DD), \uD55C\uAE00 \uB73B\uB4E4, \uC601\uC5B4 \uC608\uBB38\uACFC \uD55C\uAE00 \uBC88\uC5ED, \uC720\uC0AC\uD55C \uC601\uC5B4 \uB2E8\uC5B4\uB4E4\uC744 \uD3EC\uD568
- \uAC01 \uB73B\uBCC4\uB85C 2-3\uAC1C\uC758 \uC608\uBB38\uC744 \uC81C\uACF5\uD574\uC8FC\uC138\uC694
- JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694
- \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uC774\uC911 \uB530\uC634\uD45C\uB85C \uAC10\uC2F8\uC8FC\uC138\uC694
- \uBC30\uC5F4\uACFC \uAC1D\uCCB4\uB294 \uC815\uD655\uD55C JSON \uBB38\uBC95\uC744 \uB530\uB974\uC138\uC694

\uC751\uB2F5 \uD615\uC2DD:
[
  {
    "word": "\uB2E8\uC5B41",
    "pronunciation": "/\uBC1C\uC74C\uAE30\uD638/",
    "meanings": ["\uB73B1", "\uB73B2"],
    "examples": [
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 1",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 1"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 2",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 2"
      },
      {
        "english": "\uC601\uC5B4 \uC608\uBB38 3",
        "korean": "\uD55C\uAE00 \uBC88\uC5ED 3"
      }
    ],
    "similarWords": ["\uC720\uC0AC\uB2E8\uC5B41", "\uC720\uC0AC\uB2E8\uC5B42"]
  }
]

\uC911\uC694: JSON \uD615\uC2DD\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uD14D\uC2A4\uD2B8\uB294 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.`;
  }
  async callLLM(prompt) {
    try {
      const provider = this.settings.llmProvider;
      switch (provider) {
        case "openai":
          return await this.callOpenAI(prompt);
        case "anthropic":
          return await this.callAnthropic(prompt);
        case "google":
          return await this.callGoogle(prompt);
        default:
          return { success: false, error: "\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 LLM \uC81C\uACF5\uC5C5\uCCB4\uC785\uB2C8\uB2E4." };
      }
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callOpenAI(prompt) {
    var _a, _b, _c;
    try {
      const response = await retryAPICall(async () => {
        return (0, import_obsidian.requestUrl)({
          url: "https://api.openai.com/v1/chat/completions",
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${this.getCurrentApiKey()}`
          },
          body: JSON.stringify({
            model: this.settings.llmModel,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ],
            temperature: 0.3,
            max_tokens: 4e3
          })
        });
      });
      if (response.status >= 400) {
        const errorData = JSON.parse(response.text);
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "OpenAI API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = JSON.parse(response.text);
      const content = (_c = (_b = data.choices[0]) == null ? void 0 : _b.message) == null ? void 0 : _c.content;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  async callAnthropic(prompt) {
    var _a, _b, _c;
    if (typeof window === "undefined" || typeof window !== "undefined" && "process" in window && ((_a = window.process) == null ? void 0 : _a.type) === "renderer") {
      try {
        const response = await (0, import_obsidian.requestUrl)({
          url: "https://api.anthropic.com/v1/messages",
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "x-api-key": this.getCurrentApiKey(),
            "anthropic-version": "2023-06-01"
          },
          body: JSON.stringify({
            model: this.settings.llmModel,
            max_tokens: 3e4,
            messages: [
              {
                role: "user",
                content: prompt
              }
            ]
          })
        });
        if (response.status >= 400) {
          const errorData = JSON.parse(response.text);
          return { success: false, error: ((_b = errorData.error) == null ? void 0 : _b.message) || "Anthropic API \uD638\uCD9C \uC2E4\uD328" };
        }
        const data = JSON.parse(response.text);
        const content = (_c = data.content[0]) == null ? void 0 : _c.text;
        if (!content) {
          return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
        }
        return { success: true, data: content };
      } catch (error) {
        return { success: false, error: error.message };
      }
    } else {
      return {
        success: false,
        error: "Anthropic API\uB294 \uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD\uC5D0\uC11C \uC9C1\uC811 \uD638\uCD9C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uB370\uC2A4\uD06C\uD1B1 \uC571(Obsidian)\uC5D0\uC11C\uB9CC \uB3D9\uC791\uD569\uB2C8\uB2E4."
      };
    }
  }
  async callGoogle(prompt) {
    var _a, _b, _c, _d;
    try {
      const response = await retryAPICall(async () => {
        return (0, import_obsidian.requestUrl)({
          url: `https://generativelanguage.googleapis.com/v1beta/models/${this.settings.llmModel}:generateContent?key=${this.getCurrentApiKey()}`,
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            contents: [
              {
                parts: [
                  {
                    text: prompt
                  }
                ]
              }
            ],
            generationConfig: {
              temperature: 0.3,
              maxOutputTokens: 4e3
            }
          })
        });
      });
      if (response.status >= 400) {
        const errorData = JSON.parse(response.text);
        return { success: false, error: ((_a = errorData.error) == null ? void 0 : _a.message) || "Google API \uD638\uCD9C \uC2E4\uD328" };
      }
      const data = JSON.parse(response.text);
      const content = (_d = (_c = (_b = data.candidates[0]) == null ? void 0 : _b.content) == null ? void 0 : _c.parts[0]) == null ? void 0 : _d.text;
      if (!content) {
        return { success: false, error: "\uC751\uB2F5 \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
      }
      return { success: true, data: content };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
  parseWordDetailResponse(response, originalWord) {
    try {
      const jsonMatch = response.match(/\{[\s\S]*\}/);
      if (!jsonMatch) {
        throw new Error("JSON \uD615\uC2DD\uC758 \uC751\uB2F5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      }
      const jsonData = JSON.parse(jsonMatch[0]);
      const validatedExamples = this.validateExamples(jsonData.examples);
      return {
        word: jsonData.word || originalWord,
        pronunciation: jsonData.pronunciation || "",
        meanings: jsonData.meanings || [],
        examples: validatedExamples,
        similarWords: jsonData.similarWords || []
      };
    } catch (error) {
      return {
        word: originalWord,
        pronunciation: "",
        meanings: ["\uC758\uBBF8\uB97C \uD30C\uC2F1\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
        examples: [],
        similarWords: []
      };
    }
  }
  // 예문 데이터 검증 및 정리
  validateExamples(examples) {
    if (!Array.isArray(examples)) {
      return [];
    }
    const validatedExamples = [];
    for (const example of examples) {
      if (example && typeof example === "object") {
        const english = example.english || example.english_text || example.text || "";
        const korean = example.korean || example.korean_text || example.translation || "";
        if (english.trim() && korean.trim()) {
          validatedExamples.push({
            english: english.trim(),
            korean: korean.trim()
          });
        }
      }
    }
    return validatedExamples;
  }
  parseMultipleWordDetailResponse(response, originalWords) {
    try {
      let jsonMatch = response.match(/\[[\s\S]*\]/);
      if (!jsonMatch) {
        const objectMatches = response.match(/\{[^{}]*"word"[^{}]*\}/g);
        if (objectMatches && objectMatches.length > 0) {
          const jsonString = "[" + objectMatches.join(",") + "]";
          try {
            const jsonData2 = JSON.parse(jsonString);
            if (Array.isArray(jsonData2)) {
              return this.processJsonData(jsonData2, originalWords);
            }
          } catch (e) {
          }
        }
        const lastCompleteMatch = response.match(/\[[\s\S]*\}(?=\s*$)/);
        if (lastCompleteMatch) {
          jsonMatch = [lastCompleteMatch[0] + "]"];
        } else {
          throw new Error("JSON \uBC30\uC5F4\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        }
      }
      let jsonData;
      let parsedLength = 0;
      try {
        jsonData = JSON.parse(jsonMatch[0]);
      } catch (parseError) {
        const results = this.parseIncrementalJson(response);
        if (results.length > 0) {
          return results;
        }
        const fixedJson = this.fixJsonString(jsonMatch[0]);
        try {
          jsonData = JSON.parse(fixedJson);
        } catch (secondError) {
          throw new Error("JSON \uD30C\uC2F1 \uBC0F \uBCF5\uAD6C \uC2E4\uD328");
        }
      }
      if (!Array.isArray(jsonData)) {
        throw new Error("\uC751\uB2F5\uC774 \uBC30\uC5F4 \uD615\uC2DD\uC774 \uC544\uB2D9\uB2C8\uB2E4.");
      }
      return this.processJsonData(jsonData, originalWords);
    } catch (error) {
      console.error("\uC5EC\uB7EC \uB2E8\uC5B4 \uC751\uB2F5 \uD30C\uC2F1 \uC624\uB958:", error);
      console.error("\uC6D0\uBCF8 \uC751\uB2F5:", response);
      return originalWords.map((word) => ({
        word: word.toLowerCase(),
        pronunciation: "",
        meanings: [],
        examples: [],
        similarWords: []
      }));
    }
  }
  // 점진적 JSON 파싱 - 완전한 객체들만 파싱
  parseIncrementalJson(response) {
    const results = [];
    const objectRegex = /\{[^{}]*"word"[^{}]*"pronunciation"[^{}]*"meanings"[^{}]*"examples"[^{}]*"similarWords"[^{}]*\}/g;
    let match;
    while ((match = objectRegex.exec(response)) !== null) {
      try {
        const objectData = JSON.parse(match[0]);
        if (objectData && objectData.word) {
          const validatedExamples = this.validateExamples(objectData.examples);
          const wordData = {
            word: objectData.word.toLowerCase(),
            pronunciation: objectData.pronunciation || "",
            meanings: Array.isArray(objectData.meanings) ? objectData.meanings : [],
            examples: validatedExamples,
            similarWords: Array.isArray(objectData.similarWords) ? objectData.similarWords : []
          };
          results.push(wordData);
        }
      } catch (e) {
        continue;
      }
    }
    return results;
  }
  // WordDetailData를 WordData로 변환하는 메서드
  convertToWordData(wordDetail) {
    return {
      word: wordDetail.word,
      pronunciation: wordDetail.pronunciation,
      meanings: wordDetail.meanings,
      similarWords: wordDetail.similarWords,
      examples: wordDetail.examples
    };
  }
  // JSON 데이터 처리
  processJsonData(jsonData, originalWords) {
    const results = [];
    for (const item of jsonData) {
      if (item && typeof item === "object" && item.word) {
        const validatedExamples = this.validateExamples(item.examples);
        const wordData = {
          word: item.word.toLowerCase(),
          pronunciation: item.pronunciation || "",
          meanings: Array.isArray(item.meanings) ? item.meanings : [],
          examples: validatedExamples,
          similarWords: Array.isArray(item.similarWords) ? item.similarWords : []
        };
        results.push(wordData);
      }
    }
    return results;
  }
  // JSON 문자열 복구
  fixJsonString(jsonString) {
    let fixed = jsonString;
    const lastCompleteObject = fixed.match(/.*\}(?=,?\s*$)/);
    if (lastCompleteObject) {
      fixed = lastCompleteObject[0] + "]";
    }
    fixed = fixed.replace(/,\s*,/g, ",");
    fixed = fixed.replace(/,\s*\]/g, "]");
    fixed = fixed.replace(/,\s*\}/g, "}");
    let result = "";
    let inString = false;
    let escaped = false;
    for (let i = 0; i < fixed.length; i++) {
      const char = fixed[i];
      const prevChar = i > 0 ? fixed[i - 1] : "";
      if (char === '"' && !escaped) {
        if (inString) {
          inString = false;
          result += char;
        } else {
          inString = true;
          result += char;
        }
      } else if (char === '"' && escaped) {
        result += char;
      } else if (char === '"' && inString && !escaped) {
        result += '\\"';
      } else {
        result += char;
      }
      escaped = char === "\\" && !escaped;
    }
    fixed = result;
    return fixed;
  }
};

// src/features/settings/ui/settings.ts
var DEFAULT_SETTINGS = {
  apiKey: "",
  defaultLanguage: "ko",
  showSimilarWords: true,
  showExamples: true,
  examplesCount: 3,
  openaiApiKey: "",
  anthropicApiKey: "",
  googleApiKey: "",
  llmProvider: "openai",
  llmModel: "gemini-1.0-pro-latest",
  enableAdvancedFeatures: false,
  reviewModalHeight: 85,
  vocabularyFolderPath: "Vocabulary",
  ttsEnabled: true,
  ttsProvider: "chatterbox",
  ttsVoice: "alloy",
  ttsPlaybackSpeed: 1,
  ttsAutoPlay: false,
  // Chatterbox TTS 기본값
  chatterboxApiUrl: "http://localhost:4123",
  // 경고: HTTP는 보안에 취약합니다. 가능하면 HTTPS를 사용하세요.
  chatterboxExaggeration: 0.7,
  chatterboxCfgWeight: 0.4,
  chatterboxTemperature: 0.9,
  // Google Cloud TTS 기본값
  googleCloudTTSApiKey: "",
  googleCloudTTSLanguageCode: "en-US",
  googleCloudTTSSpeakingRate: 1,
  googleCloudTTSPitch: 0,
  // TTS 캐시 설정
  ttsCacheEnabled: true
};
var VocabularySettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uD50C\uB7EC\uADF8\uC778 \uC124\uC815" });
    this.createBasicSettings(containerEl);
    this.createLLMSettings(containerEl);
    this.createTTSSettings(containerEl);
    this.createAdvancedSettings(containerEl);
  }
  createBasicSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uAE30\uBCF8 \uC124\uC815" });
    new import_obsidian2.Setting(containerEl).setName("\uAE30\uBCF8 \uC5B8\uC5B4").setDesc("\uB2E8\uC5B4 \uB73B\uC744 \uD45C\uC2DC\uD560 \uC5B8\uC5B4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("ko", "\uD55C\uAD6D\uC5B4").addOption("en", "English").addOption("ja", "\u65E5\u672C\u8A9E").setValue(this.plugin.settings.defaultLanguage).onChange(async (value) => {
      this.plugin.settings.defaultLanguage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC720\uC0AC\uD55C \uB2E8\uC5B4 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showSimilarWords).onChange(async (value) => {
      this.plugin.settings.showSimilarWords = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC608\uBB38 \uD45C\uC2DC").setDesc("\uD559\uC2B5\uD560 \uB54C \uC608\uBB38\uB4E4\uC744 \uD568\uAED8 \uD45C\uC2DC\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showExamples).onChange(async (value) => {
      this.plugin.settings.showExamples = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC608\uBB38 \uAC1C\uC218").setDesc("\uD45C\uC2DC\uD560 \uC608\uBB38\uC758 \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => slider.setLimits(1, 10, 1).setValue(this.plugin.settings.examplesCount).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.examplesCount = value;
      await this.plugin.saveSettings();
    }));
  }
  createLLMSettings(containerEl) {
    containerEl.createEl("h3", { text: "LLM API \uC124\uC815" });
    new import_obsidian2.Setting(containerEl).setName("\uACE0\uAE09 \uAE30\uB2A5 \uD65C\uC131\uD654").setDesc("LLM API\uB97C \uC0AC\uC6A9\uD55C \uACE0\uAE09 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableAdvancedFeatures).onChange(async (value) => {
      this.plugin.settings.enableAdvancedFeatures = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("LLM \uC81C\uACF5\uC5C5\uCCB4").setDesc("\uC0AC\uC6A9\uD560 LLM API \uC81C\uACF5\uC5C5\uCCB4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => dropdown.addOption("openai", "OpenAI (GPT)").addOption("anthropic", "Anthropic (Claude)").addOption("google", "Google (Gemini)").setValue(this.plugin.settings.llmProvider).onChange(async (value) => {
      this.plugin.settings.llmProvider = value;
      if (value === "openai") {
        this.plugin.settings.llmModel = "gpt-4.1";
      } else if (value === "anthropic") {
        this.plugin.settings.llmModel = "claude-3-5-sonnet";
      } else if (value === "google") {
        this.plugin.settings.llmModel = "gemini-2.5-flash";
      }
      await this.plugin.saveSettings();
      this.display();
    }));
    this.createModelSelection(containerEl);
    this.createApiKeySettings(containerEl);
    new import_obsidian2.Setting(containerEl).setName("API \uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setDesc("\uD604\uC7AC \uC120\uD0DD\uB41C \uC81C\uACF5\uC5C5\uCCB4\uC758 API \uD0A4\uAC00 \uC62C\uBC14\uB974\uAC8C \uC124\uC815\uB418\uC5C8\uB294\uC9C0 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4.").addButton((button) => button.setButtonText("\uD14C\uC2A4\uD2B8").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        const llmService = new LLMService(this.plugin.settings);
        const result = await llmService.testConnection();
        if (result.success) {
          new import_obsidian2.Notice("\u2705 API \uC5F0\uACB0 \uC131\uACF5!");
        } else {
          new import_obsidian2.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + result.error);
        }
      } catch (error) {
        new import_obsidian2.Notice("\u274C API \uC5F0\uACB0 \uC2E4\uD328: " + error.message);
      } finally {
        button.setButtonText("\uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
  }
  createModelSelection(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("API \uBAA8\uB378").setDesc("\uC0AC\uC6A9\uD560 LLM \uBAA8\uB378\uC744 \uC120\uD0DD\uD558\uC138\uC694.").addDropdown((dropdown) => {
      const provider = this.plugin.settings.llmProvider;
      if (provider === "openai") {
        dropdown.addOption("gpt-4.1", "GPT-4.1").addOption("gpt-4o", "GPT-4o").addOption("gpt-4o-mini", "GPT-4o Mini").addOption("gpt-4.1-long", "GPT-4.1 (Long Context)").addOption("gpt-4.5-preview", "GPT-4.5 Preview").addOption("gpt-4.5-preview-2", "GPT-4.5 Preview 2");
      } else if (provider === "anthropic") {
        dropdown.addOption("claude-3-5-sonnet", "Claude 3.5 Sonnet").addOption("claude-3-5-haiku", "Claude 3.5 Haiku").addOption("claude-3-5-opus", "Claude 3.5 Opus").addOption("claude-3-7-sonnet", "Claude 3.7 Sonnet").addOption("claude-3-7-haiku", "Claude 3.7 Haiku").addOption("claude-3-7-opus", "Claude 3.7 Opus").addOption("claude-3-5-flash", "Claude 3.5 Flash");
      } else if (provider === "google") {
        dropdown.addOption("gemini-1.5-pro-latest", "Gemini 1.5 Pro").addOption("gemini-2.5-flash", "Gemini 2.5 Flash").addOption("gemini-2.5-pro", "Gemini 2.5 Pro").addOption("gemini-1.5-flash-latest", "Gemini 1.5 Flash");
      }
      return dropdown.setValue(this.plugin.settings.llmModel).onChange(async (value) => {
        this.plugin.settings.llmModel = value;
        await this.plugin.saveSettings();
      });
    });
  }
  createApiKeySettings(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("OpenAI API \uD0A4").setDesc("OpenAI API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.openaiApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.openaiApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Anthropic API \uD0A4").setDesc("Anthropic API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694. (sk-ant-...\uB85C \uC2DC\uC791)").addText((text) => {
      const currentKey = this.plugin.settings.anthropicApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("sk-ant-...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.anthropicApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Google API \uD0A4").setDesc("Google API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").addText((text) => {
      const currentKey = this.plugin.settings.googleApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    });
  }
  createAdvancedSettings(containerEl) {
    containerEl.createEl("h3", { text: "\uACE0\uAE09 \uC124\uC815" });
    const folders = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian2.TFolder);
    new import_obsidian2.Setting(containerEl).setName("\uB2E8\uC5B4\uC7A5 \uC800\uC7A5 \uD3F4\uB354").setDesc("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C\uB4E4\uC774 \uC800\uC7A5\uB420 \uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: Vocabulary)").addDropdown((dropdown) => {
      folders.forEach((folder) => {
        if (folder instanceof import_obsidian2.TFolder) {
          dropdown.addOption(folder.path, folder.path);
        }
      });
      dropdown.setValue(this.plugin.settings.vocabularyFolderPath);
      dropdown.onChange(async (value) => {
        this.plugin.settings.vocabularyFolderPath = value;
        await this.plugin.saveSettings();
        if (this.plugin.databaseManager) {
          this.plugin.databaseManager.updateVocabularyFolderPath(value);
        }
      });
      return dropdown;
    });
    new import_obsidian2.Setting(containerEl).setName("\uBCF5\uC2B5 \uD654\uBA74 \uB192\uC774").setDesc("\uBCF5\uC2B5 \uBAA8\uB2EC\uC758 \uB192\uC774\uB97C \uD654\uBA74 \uB192\uC774\uC758 \uBC31\uBD84\uC728\uB85C \uC124\uC815\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: 85%)").addSlider((slider) => slider.setLimits(50, 95, 5).setValue(this.plugin.settings.reviewModalHeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.reviewModalHeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC77C\uC77C \uD559\uC2B5 \uBAA9\uD45C").setDesc("\uD558\uB8E8\uC5D0 \uD559\uC2B5\uD560 \uB2E8\uC5B4\uC758 \uBAA9\uD45C \uAC1C\uC218\uB97C \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(5, 50, 5).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.dailyGoal) || 10).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ dailyGoal: value }));
      });
    });
    new import_obsidian2.Setting(containerEl).setName("\uBCF5\uC2B5 \uAC04\uACA9 (\uC77C)").setDesc("\uB2E8\uC5B4\uB97C \uB2E4\uC2DC \uBCF5\uC2B5\uD560 \uAC04\uACA9\uC744 \uC124\uC815\uD558\uC138\uC694.").addSlider((slider) => {
      var _a, _b, _c;
      return slider.setLimits(1, 30, 1).setValue(((_c = (_b = (_a = this.plugin.databaseManager) == null ? void 0 : _a.getDataForSave()) == null ? void 0 : _b.settings) == null ? void 0 : _c.reviewInterval) || 1).setDynamicTooltip().onChange(async (value) => {
        var _a2;
        await ((_a2 = this.plugin.databaseManager) == null ? void 0 : _a2.updateSettings({ reviewInterval: value }));
      });
    });
  }
  createTTSSettings(containerEl) {
    containerEl.createEl("h3", { text: "TTS (\uC74C\uC131 \uC77D\uAE30) \uC124\uC815" });
    const ttsToggleSetting = new import_obsidian2.Setting(containerEl).setName("TTS \uD65C\uC131\uD654").setDesc("\uB2E8\uC5B4\uC640 \uC608\uBB38\uC744 \uC74C\uC131\uC73C\uB85C \uC77D\uC5B4\uC8FC\uB294 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsEnabled).onChange(async (value) => {
      this.plugin.settings.ttsEnabled = value;
      await this.plugin.saveSettings();
      this.updateTTSSettingsVisibility();
    }));
    new import_obsidian2.Setting(containerEl).setName("TTS \uC81C\uACF5\uC790").setDesc("\uC0AC\uC6A9\uD560 TTS \uC11C\uBE44\uC2A4\uB97C \uC120\uD0DD\uD558\uC138\uC694.").setClass("tts-provider-setting").addDropdown((dropdown) => dropdown.addOption("chatterbox", "Chatterbox TTS (\uB85C\uCEEC)").addOption("google-cloud", "Google Cloud Text-to-Speech").setValue(this.plugin.settings.ttsProvider).onChange(async (value) => {
      this.plugin.settings.ttsProvider = value;
      await this.plugin.saveSettings();
      this.updateTTSProviderSettings();
    }));
    this.createChatterboxTTSSettings(containerEl);
    this.createGoogleCloudTTSSettings(containerEl);
    const autoPlaySetting = new import_obsidian2.Setting(containerEl).setName("\uC790\uB3D9 \uC7AC\uC0DD").setDesc("\uB2E8\uC5B4 \uCE74\uB4DC\uAC00 \uD45C\uC2DC\uB420 \uB54C \uC790\uB3D9\uC73C\uB85C \uB2E8\uC5B4\uB97C \uC77D\uC5B4\uC90D\uB2C8\uB2E4.").setClass("tts-autoplay-setting").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsAutoPlay).onChange(async (value) => {
      this.plugin.settings.ttsAutoPlay = value;
      await this.plugin.saveSettings();
    }));
    this.createTTSCacheSettings(containerEl);
    this.updateTTSSettingsVisibility();
    this.updateTTSProviderSettings();
  }
  populateChatterboxVoiceDropdown(dropdown) {
    const chatterboxVoices = [
      { value: "alloy", name: "Alloy (\uC911\uC131\uC801)" },
      { value: "echo", name: "Echo (\uB0A8\uC131)" },
      { value: "fable", name: "Fable (\uC601\uAD6D\uC2DD)" },
      { value: "onyx", name: "Onyx (\uAE4A\uC740 \uB0A8\uC131)" },
      { value: "nova", name: "Nova (\uC5EC\uC131)" },
      { value: "shimmer", name: "Shimmer (\uBD80\uB4DC\uB7EC\uC6B4 \uC5EC\uC131)" },
      { value: "custom", name: "Custom (\uC0AC\uC6A9\uC790 \uC815\uC758)" }
    ];
    chatterboxVoices.forEach((option) => {
      dropdown.addOption(option.value, option.name);
    });
    try {
      const voices = speechSynthesis.getVoices();
      const englishVoices = voices.filter(
        (voice) => voice.lang.startsWith("en-") && !voice.lang.includes("ko") && !chatterboxVoices.some((opt) => opt.value === voice.name)
      );
      if (englishVoices.length > 0) {
        dropdown.addOption("---", "--- \uC2DC\uC2A4\uD15C \uC74C\uC131 ---");
        englishVoices.forEach((voice) => {
          const displayName = `${voice.name} (${voice.lang})`;
          dropdown.addOption(voice.name, displayName);
        });
      }
    } catch (error) {
      console.warn("\uC74C\uC131 \uBAA9\uB85D\uC744 \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
    }
  }
  updateTTSSettingsVisibility() {
    const isEnabled = this.plugin.settings.ttsEnabled;
    const allTtsSettings = this.containerEl.querySelectorAll(
      ".tts-provider-setting, .chatterbox-api-url-setting, .chatterbox-voice-setting, .chatterbox-exaggeration-setting, .chatterbox-cfg-setting, .chatterbox-temperature-setting, .google-cloud-tts-guide, .google-cloud-api-key-setting, .google-cloud-language-setting, .google-cloud-voice-setting, .google-cloud-speaking-rate-setting, .google-cloud-pitch-setting, .tts-autoplay-setting, .tts-cache-header, .tts-cache-enabled-setting, .tts-cache-info-setting, .tts-cache-clear-setting"
    );
    allTtsSettings.forEach((setting) => {
      const element = setting;
      if (isEnabled) {
        element.removeClass("settings-disabled");
        element.addClass("settings-enabled");
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        const inputs = element.querySelectorAll('input[type="text"]');
        buttons.forEach((btn) => btn.disabled = false);
        dropdowns.forEach((dd) => dd.disabled = false);
        sliders.forEach((slider) => slider.disabled = false);
        toggles.forEach((toggle) => toggle.disabled = false);
        inputs.forEach((input) => input.disabled = false);
      } else {
        element.removeClass("settings-enabled");
        element.addClass("settings-disabled");
        const buttons = element.querySelectorAll("button");
        const dropdowns = element.querySelectorAll("select");
        const sliders = element.querySelectorAll('input[type="range"]');
        const toggles = element.querySelectorAll('input[type="checkbox"]');
        const inputs = element.querySelectorAll('input[type="text"]');
        buttons.forEach((btn) => btn.disabled = true);
        dropdowns.forEach((dd) => dd.disabled = true);
        sliders.forEach((slider) => slider.disabled = true);
        toggles.forEach((toggle) => toggle.disabled = true);
        inputs.forEach((input) => input.disabled = true);
      }
    });
    if (isEnabled) {
      this.updateTTSProviderSettings();
    }
  }
  async testChatterboxConnection() {
    try {
      const response = await fetch(`${this.plugin.settings.chatterboxApiUrl}/v1/audio/speech`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: "Connection test",
          voice: "alloy"
        })
      });
      if (response.ok) {
        new import_obsidian2.Notice("\u2705 Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0 \uC131\uACF5!");
      } else {
        throw new Error(`\uC11C\uBC84 \uC751\uB2F5 \uC624\uB958: ${response.status}`);
      }
    } catch (error) {
      console.error("Chatterbox TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      new import_obsidian2.Notice("\u274C Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0 \uC2E4\uD328. \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      throw error;
    }
  }
  createChatterboxTTSSettings(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("Chatterbox TTS API URL").setDesc("Chatterbox TTS \uC11C\uBC84\uC758 URL\uC744 \uC785\uB825\uD558\uC138\uC694. (\uAE30\uBCF8\uAC12: http://localhost:4123)").setClass("chatterbox-api-url-setting").addText((text) => text.setPlaceholder("http://localhost:4123").setValue(this.plugin.settings.chatterboxApiUrl).onChange(async (value) => {
      this.plugin.settings.chatterboxApiUrl = value || "http://localhost:4123";
      await this.plugin.saveSettings();
    })).addButton((button) => button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setTooltip("Chatterbox TTS \uC11C\uBC84 \uC5F0\uACB0\uC744 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        await this.testChatterboxConnection();
      } finally {
        button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("Chatterbox TTS\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").setClass("chatterbox-voice-setting").addDropdown((dropdown) => {
      this.populateChatterboxVoiceDropdown(dropdown);
      return dropdown.setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
        this.plugin.settings.ttsVoice = value;
        await this.plugin.saveSettings();
      });
    }).addButton((button) => button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30").setTooltip("\uC120\uD0DD\uD55C \uC74C\uC131\uC73C\uB85C \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uB97C \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playChatterboxVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
        new import_obsidian2.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uAC10\uC815 \uD45C\uD604 \uAC15\uB3C4 (Exaggeration)").setDesc("\uC74C\uC131\uC758 \uAC10\uC815 \uD45C\uD604 \uAC15\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.25 = \uC57D\uD568, 2.0 = \uAC15\uD568)").setClass("chatterbox-exaggeration-setting").addSlider((slider) => slider.setLimits(0.25, 2, 0.05).setValue(this.plugin.settings.chatterboxExaggeration).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxExaggeration = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("CFG \uAC00\uC911\uCE58 (CFG Weight)").setDesc("\uC74C\uC131 \uC0DD\uC131\uC758 \uAC00\uC774\uB358\uC2A4 \uAC15\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.0 = \uC57D\uD568, 1.0 = \uAC15\uD568)").setClass("chatterbox-cfg-setting").addSlider((slider) => slider.setLimits(0, 1, 0.05).setValue(this.plugin.settings.chatterboxCfgWeight).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxCfgWeight = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC628\uB3C4 (Temperature)").setDesc("\uC74C\uC131 \uC0DD\uC131\uC758 \uCC3D\uC758\uC131\uC744 \uC870\uC808\uD569\uB2C8\uB2E4. (0.05 = \uC77C\uAD00\uC131, 5.0 = \uCC3D\uC758\uC131)").setClass("chatterbox-temperature-setting").addSlider((slider) => slider.setLimits(0.05, 5, 0.05).setValue(this.plugin.settings.chatterboxTemperature).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.chatterboxTemperature = value;
      await this.plugin.saveSettings();
    }));
  }
  createGoogleCloudTTSSettings(containerEl) {
    const guideEl = containerEl.createEl("div", {
      cls: "google-cloud-tts-guide google-cloud-api-key-setting",
      attr: { style: "margin-bottom: 15px; padding: 10px; background-color: var(--background-secondary); border-radius: 5px; border-left: 3px solid var(--interactive-accent);" }
    });
    guideEl.createEl("h4", { text: "\u{1F527} Google Cloud TTS \uC124\uC815 \uAC00\uC774\uB4DC", attr: { style: "margin: 0 0 10px 0; color: var(--interactive-accent);" } });
    const stepsList = guideEl.createEl("ol", { attr: { style: "margin: 0; padding-left: 20px; line-height: 1.6;" } });
    const step1 = stepsList.createEl("li");
    step1.createEl("strong", { text: "Google Cloud Console \uC811\uC18D:" });
    step1.appendText(" ");
    const step1Link = step1.createEl("a", {
      text: "console.cloud.google.com",
      href: "https://console.cloud.google.com",
      attr: { style: "color: var(--interactive-accent);" }
    });
    step1Link.addEventListener("click", () => {
      window.open("https://console.cloud.google.com", "_blank");
    });
    const step2 = stepsList.createEl("li");
    step2.createEl("strong", { text: "\uD504\uB85C\uC81D\uD2B8 \uC120\uD0DD/\uC0DD\uC131:" });
    step2.appendText(" \uAE30\uC874 \uD504\uB85C\uC81D\uD2B8\uB97C \uC120\uD0DD\uD558\uAC70\uB098 \uC0C8 \uD504\uB85C\uC81D\uD2B8\uB97C \uC0DD\uC131\uD569\uB2C8\uB2E4.");
    const step3 = stepsList.createEl("li");
    step3.createEl("strong", { text: "Text-to-Speech API \uD65C\uC131\uD654:" });
    step3.appendText(" ");
    const step3Link = step3.createEl("a", {
      text: "API \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uD65C\uC131\uD654",
      href: "https://console.cloud.google.com/apis/library/texttospeech.googleapis.com",
      attr: { style: "color: var(--interactive-accent);" }
    });
    step3Link.addEventListener("click", () => {
      window.open("https://console.cloud.google.com/apis/library/texttospeech.googleapis.com", "_blank");
    });
    const step4 = stepsList.createEl("li");
    step4.createEl("strong", { text: "API \uD0A4 \uC0DD\uC131:" });
    step4.appendText(" \uC0AC\uC6A9\uC790 \uC778\uC99D \uC815\uBCF4 > API \uD0A4 > \uC0C8 API \uD0A4 \uC0DD\uC131");
    const step5 = stepsList.createEl("li");
    step5.createEl("strong", { text: "API \uD0A4 \uC81C\uD55C \uC124\uC815 (\uAD8C\uC7A5):" });
    step5.appendText(" \uD0A4 \uC81C\uD55C > API \uC81C\uD55C > Cloud Text-to-Speech API \uC120\uD0DD");
    const warningEl = guideEl.createEl("div", {
      attr: { style: "margin-top: 10px; padding: 8px; background-color: var(--background-modifier-error-rgb); border-radius: 3px; font-size: 0.9em;" }
    });
    warningEl.appendText("\u26A0\uFE0F ");
    warningEl.createEl("strong", { text: "\uC911\uC694:" });
    warningEl.appendText(' Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC740 \uACBD\uC6B0 "API_KEY_SERVICE_BLOCKED" \uC624\uB958\uAC00 \uBC1C\uC0DD\uD569\uB2C8\uB2E4.');
    new import_obsidian2.Setting(containerEl).setName("Google Cloud TTS API \uD0A4").setDesc("Google Cloud Text-to-Speech API \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").setClass("google-cloud-api-key-setting").addText((text) => {
      const currentKey = this.plugin.settings.googleCloudTTSApiKey;
      const decryptedKey = decryptApiKey(currentKey);
      const maskedKey = maskApiKey(decryptedKey);
      return text.setPlaceholder("AIza...").setValue(maskedKey).onChange(async (value) => {
        if (value !== maskedKey) {
          const encryptedKey = encryptApiKey(value);
          this.plugin.settings.googleCloudTTSApiKey = encryptedKey;
          await this.plugin.saveSettings();
        }
      });
    }).addButton((button) => button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8").setTooltip("Google Cloud TTS API \uC5F0\uACB0\uC744 \uD14C\uC2A4\uD2B8\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uD14C\uC2A4\uD2B8 \uC911...");
      button.setDisabled(true);
      try {
        await this.testGoogleCloudConnection();
      } finally {
        button.setButtonText("\uC5F0\uACB0 \uD14C\uC2A4\uD2B8");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC5B8\uC5B4 \uCF54\uB4DC").setDesc("\uC0AC\uC6A9\uD560 \uC5B8\uC5B4 \uCF54\uB4DC\uB97C \uC120\uD0DD\uD558\uC138\uC694.").setClass("google-cloud-language-setting").addDropdown((dropdown) => dropdown.addOption("en-US", "English (US)").addOption("en-GB", "English (UK)").addOption("en-AU", "English (AU)").addOption("en-IN", "English (India)").setValue(this.plugin.settings.googleCloudTTSLanguageCode).onChange(async (value) => {
      this.plugin.settings.googleCloudTTSLanguageCode = value;
      await this.plugin.saveSettings();
      this.updateGoogleCloudVoices();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC74C\uC131 \uC120\uD0DD").setDesc("Google Cloud TTS\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC74C\uC131\uC744 \uC120\uD0DD\uD558\uC138\uC694.").setClass("google-cloud-voice-setting").addDropdown((dropdown) => {
      this.populateGoogleCloudVoiceDropdown(dropdown);
      return dropdown.setValue(this.plugin.settings.ttsVoice).onChange(async (value) => {
        this.plugin.settings.ttsVoice = value;
        await this.plugin.saveSettings();
      });
    }).addButton((button) => button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30").setTooltip("\uC120\uD0DD\uD55C \uC74C\uC131\uC73C\uB85C \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uB97C \uC7AC\uC0DD\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC7AC\uC0DD \uC911...");
      button.setDisabled(true);
      try {
        await this.playGoogleCloudVoicePreview();
      } catch (error) {
        console.error("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
        new import_obsidian2.Notice("\uC74C\uC131 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uBBF8\uB9AC\uB4E3\uAE30");
        button.setDisabled(false);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\uB9D0\uD558\uAE30 \uC18D\uB3C4 (Speaking Rate)").setDesc("\uC74C\uC131\uC758 \uB9D0\uD558\uAE30 \uC18D\uB3C4\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (0.25 = \uB290\uB9BC, 4.0 = \uBE60\uB984)").setClass("google-cloud-speaking-rate-setting").addSlider((slider) => slider.setLimits(0.25, 4, 0.25).setValue(this.plugin.settings.googleCloudTTSSpeakingRate).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.googleCloudTTSSpeakingRate = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\uC74C\uC131 \uB192\uB0AE\uC774 (Pitch)").setDesc("\uC74C\uC131\uC758 \uB192\uB0AE\uC774\uB97C \uC870\uC808\uD569\uB2C8\uB2E4. (-20.0 = \uB0AE\uC74C, 20.0 = \uB192\uC74C)").setClass("google-cloud-pitch-setting").addSlider((slider) => slider.setLimits(-20, 20, 1).setValue(this.plugin.settings.googleCloudTTSPitch).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.googleCloudTTSPitch = value;
      await this.plugin.saveSettings();
    }));
  }
  populateGoogleCloudVoiceDropdown(dropdown) {
    const languageCode = this.plugin.settings.googleCloudTTSLanguageCode;
    if (languageCode === "en-US") {
      dropdown.addOption("en-US-Journey-D", "Journey-D (Male)").addOption("en-US-Journey-F", "Journey-F (Female)").addOption("en-US-Journey-O", "Journey-O (Male)").addOption("en-US-Neural2-A", "Neural2-A (Male)").addOption("en-US-Neural2-C", "Neural2-C (Female)").addOption("en-US-Neural2-D", "Neural2-D (Male)").addOption("en-US-Neural2-E", "Neural2-E (Female)").addOption("en-US-Neural2-F", "Neural2-F (Female)").addOption("en-US-Neural2-G", "Neural2-G (Female)").addOption("en-US-Neural2-H", "Neural2-H (Female)").addOption("en-US-Neural2-I", "Neural2-I (Male)").addOption("en-US-Neural2-J", "Neural2-J (Male)");
    } else if (languageCode === "en-GB") {
      dropdown.addOption("en-GB-Neural2-A", "Neural2-A (Female)").addOption("en-GB-Neural2-B", "Neural2-B (Male)").addOption("en-GB-Neural2-C", "Neural2-C (Female)").addOption("en-GB-Neural2-D", "Neural2-D (Male)").addOption("en-GB-Neural2-F", "Neural2-F (Female)");
    } else if (languageCode === "en-AU") {
      dropdown.addOption("en-AU-Neural2-A", "Neural2-A (Female)").addOption("en-AU-Neural2-B", "Neural2-B (Male)").addOption("en-AU-Neural2-C", "Neural2-C (Female)").addOption("en-AU-Neural2-D", "Neural2-D (Male)");
    } else {
      dropdown.addOption("en-US-Journey-F", "Journey-F (Female)");
    }
  }
  updateGoogleCloudVoices() {
    const voiceDropdown = this.containerEl.querySelector(".google-cloud-voice-setting select");
    if (voiceDropdown) {
      voiceDropdown.empty();
      const dropdown = { addOption: (value, text) => {
        const option = document.createElement("option");
        option.value = value;
        option.text = text;
        voiceDropdown.appendChild(option);
      } };
      this.populateGoogleCloudVoiceDropdown(dropdown);
      const languageCode = this.plugin.settings.googleCloudTTSLanguageCode;
      let defaultVoice = "en-US-Journey-F";
      if (languageCode === "en-GB")
        defaultVoice = "en-GB-Neural2-A";
      else if (languageCode === "en-AU")
        defaultVoice = "en-AU-Neural2-A";
      voiceDropdown.value = defaultVoice;
      this.plugin.settings.ttsVoice = defaultVoice;
      this.plugin.saveSettings();
    }
  }
  updateTTSProviderSettings() {
    const provider = this.plugin.settings.ttsProvider;
    const chatterboxSettings = this.containerEl.querySelectorAll(".chatterbox-api-url-setting, .chatterbox-voice-setting, .chatterbox-exaggeration-setting, .chatterbox-cfg-setting, .chatterbox-temperature-setting");
    const googleCloudSettings = this.containerEl.querySelectorAll(".google-cloud-tts-guide, .google-cloud-api-key-setting, .google-cloud-language-setting, .google-cloud-voice-setting, .google-cloud-speaking-rate-setting, .google-cloud-pitch-setting");
    chatterboxSettings.forEach((setting) => {
      setting.style.display = "none";
    });
    googleCloudSettings.forEach((setting) => {
      setting.style.display = "none";
    });
    if (provider === "chatterbox") {
      chatterboxSettings.forEach((setting) => {
        setting.style.display = "";
      });
    } else if (provider === "google-cloud") {
      googleCloudSettings.forEach((setting) => {
        setting.style.display = "";
      });
    }
  }
  async playChatterboxVoicePreview() {
    try {
      const sampleTexts = [
        "Hello, this is a sample voice preview.",
        "Welcome to English vocabulary learning.",
        "This voice will help you learn pronunciation.",
        "Beautiful words make beautiful sentences."
      ];
      const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
      const response = await fetch(`${this.plugin.settings.chatterboxApiUrl}/v1/audio/speech`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: randomText,
          voice: this.plugin.settings.ttsVoice,
          exaggeration: this.plugin.settings.chatterboxExaggeration,
          cfg_weight: this.plugin.settings.chatterboxCfgWeight,
          temperature: this.plugin.settings.chatterboxTemperature
        })
      });
      if (!response.ok) {
        throw new Error(`Chatterbox TTS API \uC624\uB958: ${response.status} ${response.statusText}`);
      }
      const audioBlob = await response.blob();
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      return new Promise((resolve, reject) => {
        audio.onended = () => {
          URL.revokeObjectURL(audioUrl);
          new import_obsidian2.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC644\uB8CC!");
          resolve();
        };
        audio.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.play().catch(reject);
      });
    } catch (error) {
      console.error("Chatterbox TTS \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
      new import_obsidian2.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. Chatterbox TTS \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      throw error;
    }
  }
  async playGoogleCloudVoicePreview() {
    try {
      const sampleTexts = [
        "Hello, this is a sample voice preview.",
        "Welcome to English vocabulary learning.",
        "This voice will help you learn pronunciation.",
        "Beautiful words make beautiful sentences."
      ];
      const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
      const apiKey = decryptApiKey(this.plugin.settings.googleCloudTTSApiKey);
      if (!apiKey) {
        throw new Error("Google Cloud TTS API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
      }
      const requestBody = {
        input: { text: randomText },
        voice: {
          languageCode: this.plugin.settings.googleCloudTTSLanguageCode,
          name: this.plugin.settings.ttsVoice
        },
        audioConfig: {
          audioEncoding: "MP3",
          speakingRate: this.plugin.settings.googleCloudTTSSpeakingRate,
          pitch: this.plugin.settings.googleCloudTTSPitch
        }
      };
      const response = await (0, import_obsidian2.requestUrl)({
        url: `https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`,
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(requestBody)
      });
      if (response.status >= 400) {
        const errorData = JSON.parse(response.text || "{}");
        const detailedError = this.getDetailedGoogleCloudError(response.status, errorData);
        throw new Error(detailedError);
      }
      const data = JSON.parse(response.text);
      const audioBlob = this.base64ToBlob(data.audioContent, "audio/mp3");
      const audioUrl = URL.createObjectURL(audioBlob);
      const audio = new Audio(audioUrl);
      return new Promise((resolve, reject) => {
        audio.onended = () => {
          URL.revokeObjectURL(audioUrl);
          new import_obsidian2.Notice("\uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30 \uC644\uB8CC!");
          resolve();
        };
        audio.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.play().catch(reject);
      });
    } catch (error) {
      console.error("Google Cloud TTS \uBBF8\uB9AC\uB4E3\uAE30 \uC624\uB958:", error);
      if (error.message.includes("API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4")) {
        new import_obsidian2.Notice(`\u274C ${error.message}`);
      } else if (error.message.includes("API \uD0A4")) {
        new import_obsidian2.Notice(`\u274C ${error.message}`);
      } else {
        new import_obsidian2.Notice("\u274C \uC74C\uC131 \uBBF8\uB9AC\uB4E3\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uC640 \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      }
      throw error;
    }
  }
  base64ToBlob(base64, mimeType) {
    const byteCharacters = atob(base64);
    const byteNumbers = new Array(byteCharacters.length);
    for (let i = 0; i < byteCharacters.length; i++) {
      byteNumbers[i] = byteCharacters.charCodeAt(i);
    }
    const byteArray = new Uint8Array(byteNumbers);
    return new Blob([byteArray], { type: mimeType });
  }
  async testGoogleCloudConnection() {
    try {
      const apiKey = decryptApiKey(this.plugin.settings.googleCloudTTSApiKey);
      if (!apiKey) {
        new import_obsidian2.Notice("\u274C Google Cloud TTS API \uD0A4\uB97C \uBA3C\uC800 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
        return;
      }
      const response = await (0, import_obsidian2.requestUrl)({
        url: `https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`,
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          input: { text: "Connection test" },
          voice: {
            languageCode: "en-US",
            name: "en-US-Journey-F"
          },
          audioConfig: {
            audioEncoding: "MP3"
          }
        })
      });
      if (response.status < 400) {
        new import_obsidian2.Notice("\u2705 Google Cloud TTS API \uC5F0\uACB0 \uC131\uACF5!");
      } else {
        const errorData = JSON.parse(response.text || "{}");
        const detailedError = this.getDetailedGoogleCloudError(response.status, errorData);
        new import_obsidian2.Notice(`\u274C ${detailedError}`);
      }
    } catch (error) {
      console.error("Google Cloud TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      if (error.message.includes("\uB124\uD2B8\uC6CC\uD06C") || error.message.includes("fetch")) {
        new import_obsidian2.Notice("\u274C \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
      } else {
        new import_obsidian2.Notice(`\u274C ${error.message}`);
      }
    }
  }
  getDetailedGoogleCloudError(status, errorData) {
    var _a, _b, _c, _d;
    if (errorData == null ? void 0 : errorData.error) {
      const error = errorData.error;
      if (status === 403 && ((_a = error.details) == null ? void 0 : _a.some(
        (detail) => {
          var _a2;
          return detail.reason === "API_KEY_SERVICE_BLOCKED" || ((_a2 = detail["@type"]) == null ? void 0 : _a2.includes("ErrorInfo")) && detail.reason === "API_KEY_SERVICE_BLOCKED";
        }
      ))) {
        return "Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC704\uC758 \uAC00\uC774\uB4DC\uB97C \uCC38\uACE0\uD558\uC5EC API\uB97C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 403) {
        if (((_b = error.message) == null ? void 0 : _b.includes("API key not valid")) || error.code === "INVALID_ARGUMENT") {
          return "API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uD0A4\uB97C \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        if (((_c = error.message) == null ? void 0 : _c.includes("quota")) || ((_d = error.message) == null ? void 0 : _d.includes("QUOTA_EXCEEDED"))) {
          return "API \uD560\uB2F9\uB7C9\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. Google Cloud Console\uC5D0\uC11C \uD560\uB2F9\uB7C9\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        return "API \uC811\uADFC\uC774 \uAC70\uBD80\uB418\uC5C8\uC2B5\uB2C8\uB2E4. API \uD0A4 \uAD8C\uD55C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 401) {
        return "API \uD0A4 \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uAC00 \uC62C\uBC14\uB978\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 400) {
        return "API \uC694\uCCAD\uC774 \uC798\uBABB\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC74C\uC131 \uC124\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 503) {
        return "Google Cloud TTS \uC11C\uBE44\uC2A4\uAC00 \uC77C\uC2DC\uC801\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
      }
      return `API \uC624\uB958 (${status}): ${error.message || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`;
    }
    return `API \uC624\uB958: ${status} \uC0C1\uD0DC \uCF54\uB4DC`;
  }
  createTTSCacheSettings(containerEl) {
    const cacheHeaderEl = containerEl.createEl("div", {
      cls: "tts-cache-header",
      attr: { style: "margin-top: 20px; padding: 10px; background-color: var(--background-secondary); border-radius: 5px; border-left: 3px solid var(--interactive-accent);" }
    });
    cacheHeaderEl.createEl("h4", { text: "\u{1F5C2}\uFE0F TTS \uCE90\uC2DC \uAD00\uB9AC", attr: { style: "margin: 0 0 5px 0; color: var(--interactive-accent);" } });
    cacheHeaderEl.createEl("p", { text: "\uC74C\uC131 \uD30C\uC77C\uC744 \uB85C\uCEEC\uC5D0 \uCE90\uC2DC\uD558\uC5EC API \uBE44\uC6A9\uC744 \uC808\uC57D\uD558\uACE0 \uC751\uB2F5 \uC18D\uB3C4\uB97C \uD5A5\uC0C1\uC2DC\uD0B5\uB2C8\uB2E4.", attr: { style: "margin: 0; font-size: 0.9em; opacity: 0.8;" } });
    new import_obsidian2.Setting(containerEl).setName("TTS \uCE90\uC2DC \uD65C\uC131\uD654").setDesc("TTS \uC74C\uC131 \uD30C\uC77C\uC744 \uB85C\uCEEC\uC5D0 \uCE90\uC2DC\uD558\uC5EC \uC7AC\uC0AC\uC6A9\uD569\uB2C8\uB2E4.").setClass("tts-cache-enabled-setting").addToggle((toggle) => toggle.setValue(this.plugin.settings.ttsCacheEnabled).onChange(async (value) => {
      this.plugin.settings.ttsCacheEnabled = value;
      await this.plugin.saveSettings();
    }));
    const cacheInfoSetting = new import_obsidian2.Setting(containerEl).setName("\uCE90\uC2DC \uD604\uD669").setDesc("\uD604\uC7AC \uC800\uC7A5\uB41C TTS \uCE90\uC2DC \uD30C\uC77C \uC815\uBCF4").setClass("tts-cache-info-setting");
    this.updateCacheInfo(cacheInfoSetting);
    new import_obsidian2.Setting(containerEl).setName("\uCE90\uC2DC \uAD00\uB9AC").setDesc("\uC800\uC7A5\uB41C \uBAA8\uB4E0 TTS \uCE90\uC2DC \uD30C\uC77C\uC744 \uC0AD\uC81C\uD569\uB2C8\uB2E4.").setClass("tts-cache-clear-setting").addButton((button) => button.setButtonText("\uCE90\uC2DC \uC0AD\uC81C").setTooltip("\uBAA8\uB4E0 TTS \uCE90\uC2DC \uD30C\uC77C\uC744 \uC0AD\uC81C\uD569\uB2C8\uB2E4").onClick(async () => {
      button.setButtonText("\uC0AD\uC81C \uC911...");
      button.setDisabled(true);
      try {
        const success = await this.clearTTSCache();
        if (success) {
          new import_obsidian2.Notice("\u2705 TTS \uCE90\uC2DC\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
          this.updateCacheInfo(cacheInfoSetting);
        } else {
          new import_obsidian2.Notice("\u274C TTS \uCE90\uC2DC \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
        }
      } catch (error) {
        console.error("TTS \uCE90\uC2DC \uC0AD\uC81C \uC624\uB958:", error);
        new import_obsidian2.Notice("\u274C TTS \uCE90\uC2DC \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      } finally {
        button.setButtonText("\uCE90\uC2DC \uC0AD\uC81C");
        button.setDisabled(false);
      }
    })).addButton((button) => button.setButtonText("\uC0C8\uB85C\uACE0\uCE68").setTooltip("\uCE90\uC2DC \uC815\uBCF4\uB97C \uC0C8\uB85C\uACE0\uCE68\uD569\uB2C8\uB2E4").onClick(async () => {
      this.updateCacheInfo(cacheInfoSetting);
      new import_obsidian2.Notice("\uCE90\uC2DC \uC815\uBCF4\uAC00 \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
    }));
  }
  async updateCacheInfo(setting) {
    try {
      if (this.plugin.ttsService && "getCacheInfo" in this.plugin.ttsService) {
        const cacheInfo = await this.plugin.ttsService.getCacheInfo();
        const infoText = `\uD30C\uC77C \uAC1C\uC218: ${cacheInfo.totalFiles}\uAC1C | \uC6A9\uB7C9: ${cacheInfo.formattedSize}`;
        setting.setDesc(`\uD604\uC7AC \uC800\uC7A5\uB41C TTS \uCE90\uC2DC \uD30C\uC77C \uC815\uBCF4 - ${infoText}`);
      } else {
        setting.setDesc("\uD604\uC7AC \uC800\uC7A5\uB41C TTS \uCE90\uC2DC \uD30C\uC77C \uC815\uBCF4 - \uCE90\uC2DC \uC11C\uBE44\uC2A4\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      }
    } catch (error) {
      console.error("\uCE90\uC2DC \uC815\uBCF4 \uC5C5\uB370\uC774\uD2B8 \uC624\uB958:", error);
      setting.setDesc("\uD604\uC7AC \uC800\uC7A5\uB41C TTS \uCE90\uC2DC \uD30C\uC77C \uC815\uBCF4 - \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
    }
  }
  async clearTTSCache() {
    try {
      if (this.plugin.ttsService && "clearCache" in this.plugin.ttsService) {
        return await this.plugin.ttsService.clearCache();
      }
      return false;
    } catch (error) {
      console.error("TTS \uCE90\uC2DC \uC0AD\uC81C \uC624\uB958:", error);
      return false;
    }
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var import_obsidian6 = require("obsidian");

// src/infrastructure/tts/ChatterboxTTSService.ts
var import_obsidian3 = require("obsidian");

// src/shared/AudioManager.ts
var AudioManager = class _AudioManager {
  constructor() {
    this.activeAudioElements = /* @__PURE__ */ new Set();
    this.audioPool = [];
    this.maxPoolSize = 10;
  }
  static getInstance() {
    if (!_AudioManager.instance) {
      _AudioManager.instance = new _AudioManager();
    }
    return _AudioManager.instance;
  }
  // 오디오 요소 생성 및 관리
  createAudio(src) {
    let audio;
    const availableAudio = this.audioPool.find((a) => a.ended || a.paused);
    if (availableAudio) {
      audio = availableAudio;
      audio.src = src;
      audio.currentTime = 0;
    } else {
      audio = new Audio(src);
      this.setupAudioElement(audio);
    }
    this.activeAudioElements.add(audio);
    return audio;
  }
  // 오디오 요소 설정
  setupAudioElement(audio) {
    const cleanup = () => {
      this.releaseAudio(audio);
    };
    audio.addEventListener("ended", cleanup, { once: true });
    audio.addEventListener("error", cleanup, { once: true });
    setTimeout(() => {
      if (this.activeAudioElements.has(audio)) {
        this.releaseAudio(audio);
      }
    }, 3e4);
  }
  // 오디오 재생 (안전한 래퍼)
  async playAudio(src) {
    const audio = this.createAudio(src);
    try {
      await audio.play();
    } catch (error) {
      this.releaseAudio(audio);
      throw error;
    }
  }
  // 오디오 요소 해제
  releaseAudio(audio) {
    if (!this.activeAudioElements.has(audio))
      return;
    if (!audio.paused) {
      audio.pause();
    }
    this.activeAudioElements.delete(audio);
    if (this.audioPool.length < this.maxPoolSize) {
      audio.removeAttribute("src");
      audio.load();
      this.audioPool.push(audio);
    } else {
      this.disposeAudio(audio);
    }
  }
  // 오디오 요소 완전 정리
  disposeAudio(audio) {
    var _a;
    audio.pause();
    audio.removeAttribute("src");
    audio.load();
    const newAudio = audio.cloneNode();
    (_a = audio.parentNode) == null ? void 0 : _a.replaceChild(newAudio, audio);
  }
  // 모든 활성 오디오 정지
  stopAllAudio() {
    this.activeAudioElements.forEach((audio) => {
      if (!audio.paused) {
        audio.pause();
      }
    });
  }
  // 모든 리소스 정리
  cleanup() {
    this.activeAudioElements.forEach((audio) => {
      this.disposeAudio(audio);
    });
    this.activeAudioElements.clear();
    this.audioPool.forEach((audio) => {
      this.disposeAudio(audio);
    });
    this.audioPool.clear();
  }
  // 현재 상태 정보
  getStatus() {
    return {
      active: this.activeAudioElements.size,
      pooled: this.audioPool.length
    };
  }
};
var NetworkResourceManager = class _NetworkResourceManager {
  constructor() {
    this.abortControllers = /* @__PURE__ */ new Set();
    this.activeRequests = /* @__PURE__ */ new Map();
  }
  static getInstance() {
    if (!_NetworkResourceManager.instance) {
      _NetworkResourceManager.instance = new _NetworkResourceManager();
    }
    return _NetworkResourceManager.instance;
  }
  // 네트워크 요청 생성 (자동 정리 포함)
  createRequest(identifier) {
    const controller = new AbortController();
    this.abortControllers.add(controller);
    if (identifier) {
      const existingController = this.activeRequests.get(identifier);
      if (existingController) {
        existingController.abort();
        this.abortControllers.delete(existingController);
      }
      this.activeRequests.set(identifier, controller);
    }
    setTimeout(() => {
      if (this.abortControllers.has(controller)) {
        controller.abort();
        this.cleanup(controller, identifier);
      }
    }, 6e4);
    return controller;
  }
  // 요청 완료 시 정리
  completeRequest(controller, identifier) {
    this.cleanup(controller, identifier);
  }
  // 특정 요청 취소
  cancelRequest(identifier) {
    const controller = this.activeRequests.get(identifier);
    if (controller) {
      controller.abort();
      this.cleanup(controller, identifier);
    }
  }
  // 내부 정리 로직
  cleanup(controller, identifier) {
    this.abortControllers.delete(controller);
    if (identifier) {
      this.activeRequests.delete(identifier);
    }
  }
  // 모든 활성 요청 취소
  cancelAllRequests() {
    this.abortControllers.forEach((controller) => {
      controller.abort();
    });
    this.abortControllers.clear();
    this.activeRequests.clear();
  }
  // Fetch 래퍼 (자동 정리 포함)
  async fetch(url, options = {}, identifier, timeout = 3e4) {
    const controller = this.createRequest(identifier);
    const timeoutId = setTimeout(() => {
      controller.abort();
    }, timeout);
    try {
      const response = await fetch(url, {
        ...options,
        signal: controller.signal
      });
      clearTimeout(timeoutId);
      this.completeRequest(controller, identifier);
      return response;
    } catch (error) {
      clearTimeout(timeoutId);
      this.cleanup(controller, identifier);
      throw error;
    }
  }
  // 현재 상태 정보
  getStatus() {
    return {
      active: this.abortControllers.size,
      identified: this.activeRequests.size
    };
  }
};

// src/infrastructure/tts/ChatterboxTTSService.ts
var ChatterboxTTSService = class {
  constructor(settings) {
    this.audioElement = null;
    this.currentAudioContext = null;
    this.settings = {
      enabled: settings.enabled || false,
      apiUrl: settings.apiUrl || "http://localhost:4123",
      voice: settings.voice || "alloy",
      response_format: settings.response_format || "wav",
      speed: settings.speed || 1,
      exaggeration: settings.exaggeration || 0.25,
      cfgWeight: settings.cfgWeight || 1,
      temperature: settings.temperature || 0.05,
      streaming_chunk_size: settings.streaming_chunk_size || 50,
      streaming_strategy: settings.streaming_strategy || "string",
      streaming_buffer_size: settings.streaming_buffer_size || 1,
      streaming_quality: settings.streaming_quality || "string",
      autoPlay: settings.autoPlay || false
    };
    this.audioManager = AudioManager.getInstance();
    this.networkManager = NetworkResourceManager.getInstance();
  }
  async speakText(text) {
    if (!this.settings.enabled) {
      new import_obsidian3.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!text || text.trim().length === 0) {
      console.warn("TTS: \uBE48 \uD14D\uC2A4\uD2B8\uC785\uB2C8\uB2E4.");
      return;
    }
    try {
      this.stopSpeaking();
      const audioBlob = await this.callChatterboxAPI(text);
      await this.playAudioBlob(audioBlob);
    } catch (error) {
      console.error("Chatterbox TTS \uC624\uB958:", error);
      new import_obsidian3.Notice("TTS \uC74C\uC131 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. Chatterbox TTS \uC11C\uBC84\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
    }
  }
  async speakWord(word) {
    if (!word || word.trim().length === 0) {
      console.warn("TTS: \uBE48 \uB2E8\uC5B4\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(word);
  }
  async speakExample(example, word) {
    if (!example || example.trim().length === 0) {
      console.warn("TTS: \uBE48 \uC608\uBB38\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(example);
  }
  async callChatterboxAPI(text) {
    const truncatedText = text.length > 3e3 ? text.substring(0, 3e3) : text;
    const requestBody = {
      input: truncatedText,
      voice: this.settings.voice,
      response_format: this.settings.response_format,
      speed: this.settings.speed,
      exaggeration: this.settings.exaggeration,
      cfg_weight: this.settings.cfgWeight,
      temperature: this.settings.temperature,
      streaming_chunk_size: this.settings.streaming_chunk_size,
      streaming_strategy: this.settings.streaming_strategy,
      streaming_buffer_size: this.settings.streaming_buffer_size,
      streaming_quality: this.settings.streaming_quality
    };
    const response = await fetch(`${this.settings.apiUrl}/v1/audio/speech`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(requestBody)
    });
    if (!response.ok) {
      throw new Error(`Chatterbox TTS API \uC624\uB958: ${response.status} ${response.statusText}`);
    }
    const contentType = response.headers.get("content-type");
    if (!contentType || !contentType.includes("audio")) {
      throw new Error(`\uC608\uC0C1\uD558\uC9C0 \uBABB\uD55C \uC751\uB2F5 \uD615\uC2DD: ${contentType}`);
    }
    return await response.blob();
  }
  async playAudioBlob(audioBlob) {
    return new Promise((resolve, reject) => {
      try {
        if (this.audioElement) {
          this.audioElement.pause();
          this.audioElement.src = "";
        }
        this.audioElement = new Audio();
        const audioUrl = URL.createObjectURL(audioBlob);
        this.audioElement.src = audioUrl;
        this.audioElement.onended = () => {
          URL.revokeObjectURL(audioUrl);
          resolve();
        };
        this.audioElement.onerror = () => {
          URL.revokeObjectURL(audioUrl);
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        this.audioElement.onloadeddata = () => {
          if (this.audioElement) {
            this.audioElement.play().catch((error) => {
              console.error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
              URL.revokeObjectURL(audioUrl);
              reject(error);
            });
          }
        };
        this.audioElement.load();
      } catch (error) {
        reject(error);
      }
    });
  }
  stopSpeaking() {
    if (this.audioElement) {
      this.audioElement.pause();
      this.audioElement.currentTime = 0;
      if (this.audioElement.src && this.audioElement.src.startsWith("blob:")) {
        URL.revokeObjectURL(this.audioElement.src);
      }
      this.audioElement.src = "";
    }
    if (this.currentAudioContext) {
      this.currentAudioContext.close().catch(console.error);
      this.currentAudioContext = null;
    }
  }
  isPaused() {
    return !this.audioElement || this.audioElement.paused;
  }
  resume() {
    if (this.audioElement && this.audioElement.paused) {
      this.audioElement.play().catch((error) => {
        console.error("\uC624\uB514\uC624 \uC7AC\uAC1C \uC2E4\uD328:", error);
        new import_obsidian3.Notice("\uC624\uB514\uC624 \uC7AC\uAC1C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      });
    }
  }
  pause() {
    if (this.audioElement && !this.audioElement.paused) {
      this.audioElement.pause();
    }
  }
  // 설정 업데이트
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  // 연결 테스트
  async testConnection() {
    try {
      const testText = "Hello, this is a test.";
      await this.callChatterboxAPI(testText);
      return true;
    } catch (error) {
      console.error("Chatterbox TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      return false;
    }
  }
  // 사용 가능한 음성 목록 (Chatterbox는 custom voice 지원)
  getAvailableVoices() {
    return [
      "alloy",
      "echo",
      "fable",
      "onyx",
      "nova",
      "shimmer",
      "custom"
      // 사용자 정의 음성
    ];
  }
  // 현재 설정 정보 반환
  getSettings() {
    return { ...this.settings };
  }
  // 리소스 정리
  destroy() {
    this.stopSpeaking();
    this.audioElement = null;
    this.currentAudioContext = null;
  }
};

// src/infrastructure/tts/GoogleCloudTTSService.ts
var import_obsidian5 = require("obsidian");

// src/infrastructure/tts/TTSCacheManager.ts
var import_obsidian4 = require("obsidian");
var TTSCacheManager = class {
  constructor(app) {
    this.cacheFolder = "Vocabulary/cache/tts";
    this.app = app;
    this.initializeCacheFolder();
  }
  async initializeCacheFolder() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.cacheFolder);
      if (folder instanceof import_obsidian4.TFolder) {
        return;
      }
      await this.app.vault.createFolder(this.cacheFolder);
    } catch (error) {
      if (error instanceof Error) {
        const errorMessage = error.message.toLowerCase();
        if (!errorMessage.includes("already exists") && !errorMessage.includes("folder already exists") && !errorMessage.includes("already present")) {
          console.warn("TTS \uCE90\uC2DC \uD3F4\uB354 \uC0DD\uC131 \uC2E4\uD328:", error);
        }
      }
    }
  }
  generateCacheKey(text, settings, word) {
    const keyData = {
      text: text.trim().toLowerCase(),
      languageCode: settings.languageCode,
      voice: settings.voice,
      speakingRate: settings.speakingRate,
      pitch: settings.pitch
    };
    const keyString = JSON.stringify(keyData);
    const hash = this.simpleHash(keyString);
    const cleanText = this.extractWordForFilename(text, word);
    return `${cleanText}_${hash}.mp3`;
  }
  extractWordForFilename(text, word) {
    let cleanText = text.trim().toLowerCase();
    const isLongText = cleanText.length > 50 || cleanText.includes(".") || cleanText.includes(",");
    if (isLongText && word) {
      const cleanWord = this.sanitizeForFilename(word);
      const words = cleanText.split(/[\s\.,!?;:]+/).filter((w) => w.length > 0);
      const examplePart = words.slice(0, 3).join("-");
      const cleanExample = this.sanitizeForFilename(examplePart);
      cleanText = `${cleanWord}_${cleanExample}`;
    } else if (isLongText) {
      const words = cleanText.split(/[\s\.,!?;:]+/).filter((w) => w.length > 0);
      const significantWords = words.slice(0, 3).join("_");
      cleanText = significantWords;
    } else {
      const firstWord = cleanText.split(/[\s\.,!?;:]+/)[0];
      cleanText = firstWord;
    }
    cleanText = this.sanitizeForFilename(cleanText);
    if (cleanText.length > 50) {
      cleanText = cleanText.substring(0, 50);
      cleanText = cleanText.replace(/[-_]+$/, "");
    }
    if (cleanText.length === 0) {
      cleanText = "tts";
    }
    return cleanText;
  }
  sanitizeForFilename(text) {
    let cleaned = text.replace(/[<>:"/\\|?*]/g, "");
    cleaned = cleaned.replace(/[^a-z0-9\-_]/g, "");
    cleaned = cleaned.replace(/[-_]+/g, "_");
    cleaned = cleaned.replace(/^_+|_+$/g, "");
    return cleaned;
  }
  simpleHash(str) {
    let hash = 0;
    if (str.length === 0)
      return hash.toString();
    for (let i = 0; i < str.length; i++) {
      const char = str.charCodeAt(i);
      hash = (hash << 5) - hash + char;
      hash = hash & hash;
    }
    return Math.abs(hash).toString(36);
  }
  getCacheFilePath(cacheKey) {
    return (0, import_obsidian4.normalizePath)(`${this.cacheFolder}/${cacheKey}`);
  }
  async getCachedAudio(text, settings, word) {
    try {
      const cacheKey = this.generateCacheKey(text, settings, word);
      const filePath = this.getCacheFilePath(cacheKey);
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian4.TFile) {
        const arrayBuffer = await this.app.vault.readBinary(file);
        console.log(`TTS \uCE90\uC2DC \uD788\uD2B8: "${text.substring(0, 50)}${text.length > 50 ? "..." : ""}" \u2192 ${cacheKey}`);
        return arrayBuffer;
      }
      return null;
    } catch (error) {
      console.warn("TTS \uCE90\uC2DC \uB85C\uB4DC \uC2E4\uD328:", error);
      return null;
    }
  }
  async setCachedAudio(text, settings, base64Audio, word) {
    try {
      await this.initializeCacheFolder();
      const cacheKey = this.generateCacheKey(text, settings, word);
      const filePath = this.getCacheFilePath(cacheKey);
      const binaryString = atob(base64Audio);
      const bytes = new Uint8Array(binaryString.length);
      for (let i = 0; i < binaryString.length; i++) {
        bytes[i] = binaryString.charCodeAt(i);
      }
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian4.TFile) {
        await this.app.vault.modifyBinary(existingFile, bytes.buffer);
      } else {
        await this.app.vault.createBinary(filePath, bytes.buffer);
      }
      console.log(`TTS \uCE90\uC2DC \uC800\uC7A5: "${text.substring(0, 50)}${text.length > 50 ? "..." : ""}" \u2192 ${cacheKey}`);
    } catch (error) {
      console.error("TTS \uCE90\uC2DC \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  async getCacheInfo() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.cacheFolder);
      if (!(folder instanceof import_obsidian4.TFolder)) {
        return {
          totalFiles: 0,
          totalSize: 0,
          formattedSize: "0 B"
        };
      }
      let totalFiles = 0;
      let totalSize = 0;
      for (const file of folder.children) {
        if (file instanceof import_obsidian4.TFile && file.extension === "mp3") {
          totalFiles++;
          totalSize += file.stat.size;
        }
      }
      return {
        totalFiles,
        totalSize,
        formattedSize: this.formatFileSize(totalSize)
      };
    } catch (error) {
      console.error("TTS \uCE90\uC2DC \uC815\uBCF4 \uC870\uD68C \uC2E4\uD328:", error);
      return {
        totalFiles: 0,
        totalSize: 0,
        formattedSize: "0 B"
      };
    }
  }
  async clearCache() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.cacheFolder);
      if (!(folder instanceof import_obsidian4.TFolder)) {
        return true;
      }
      const filesToDelete = folder.children.filter(
        (file) => file instanceof import_obsidian4.TFile && file.extension === "mp3"
      );
      for (const file of filesToDelete) {
        await this.app.fileManager.trashFile(file);
      }
      console.log(`TTS \uCE90\uC2DC \uC0AD\uC81C \uC644\uB8CC: ${filesToDelete.length}\uAC1C \uD30C\uC77C`);
      return true;
    } catch (error) {
      console.error("TTS \uCE90\uC2DC \uC0AD\uC81C \uC2E4\uD328:", error);
      return false;
    }
  }
  formatFileSize(bytes) {
    if (bytes === 0)
      return "0 B";
    const k = 1024;
    const sizes = ["B", "KB", "MB", "GB"];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
  }
  // 캐시 폴더 경로 업데이트
  updateCacheFolder(vocabularyFolderPath) {
    this.cacheFolder = `${vocabularyFolderPath}/cache/tts`;
    this.initializeCacheFolder();
  }
  // 캐시 통계 (개발/디버깅용)
  async getCacheStats() {
    return {
      hitCount: 0,
      missCount: 0,
      hitRate: 0
    };
  }
};

// src/infrastructure/tts/GoogleCloudTTSService.ts
var GoogleCloudTTSService = class {
  constructor(app, settings) {
    this.settings = {
      enabled: (settings == null ? void 0 : settings.enabled) || false,
      apiKey: (settings == null ? void 0 : settings.apiKey) || "",
      voice: (settings == null ? void 0 : settings.voice) || "en-US-Journey-F",
      languageCode: (settings == null ? void 0 : settings.languageCode) || "en-US",
      speakingRate: (settings == null ? void 0 : settings.speakingRate) || 1,
      pitch: (settings == null ? void 0 : settings.pitch) || 0,
      autoPlay: (settings == null ? void 0 : settings.autoPlay) || false,
      cacheEnabled: (settings == null ? void 0 : settings.cacheEnabled) !== false
    };
    this.audioManager = AudioManager.getInstance();
    this.networkManager = NetworkResourceManager.getInstance();
    this.cacheManager = new TTSCacheManager(app);
  }
  async speakText(text, word) {
    if (!this.settings.enabled) {
      new import_obsidian5.Notice("TTS \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!this.settings.apiKey) {
      new import_obsidian5.Notice("Google Cloud TTS API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
      return;
    }
    if (!text || text.trim().length === 0) {
      console.warn("TTS: \uBE48 \uD14D\uC2A4\uD2B8\uC785\uB2C8\uB2E4.");
      return;
    }
    try {
      this.stopSpeaking();
      let audioData;
      if (this.settings.cacheEnabled) {
        const cacheSettings = {
          languageCode: this.settings.languageCode,
          voice: this.settings.voice,
          speakingRate: this.settings.speakingRate,
          pitch: this.settings.pitch
        };
        const cachedAudio = await this.cacheManager.getCachedAudio(text, cacheSettings, word);
        if (cachedAudio) {
          await this.playAudioBuffer(cachedAudio);
          return;
        }
      }
      audioData = await this.callGoogleCloudAPI(text);
      if (this.settings.cacheEnabled) {
        const cacheSettings = {
          languageCode: this.settings.languageCode,
          voice: this.settings.voice,
          speakingRate: this.settings.speakingRate,
          pitch: this.settings.pitch
        };
        await this.cacheManager.setCachedAudio(text, cacheSettings, audioData, word);
      }
      await this.playAudioData(audioData);
    } catch (error) {
      console.error("Google Cloud TTS \uC624\uB958:", error);
      new import_obsidian5.Notice("TTS \uC74C\uC131 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uC640 \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");
    }
  }
  async speakWord(word) {
    if (!word || word.trim().length === 0) {
      console.warn("TTS: \uBE48 \uB2E8\uC5B4\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(word);
  }
  async speakExample(example, word) {
    if (!example || example.trim().length === 0) {
      console.warn("TTS: \uBE48 \uC608\uBB38\uC785\uB2C8\uB2E4.");
      return;
    }
    await this.speakText(example, word);
  }
  async callGoogleCloudAPI(text) {
    const truncatedText = text.length > 5e3 ? text.substring(0, 5e3) : text;
    const requestBody = {
      input: {
        text: truncatedText
      },
      voice: {
        languageCode: this.settings.languageCode,
        name: this.settings.voice
      },
      audioConfig: {
        audioEncoding: "MP3",
        speakingRate: this.settings.speakingRate,
        pitch: this.settings.pitch
      }
    };
    const response = await this.networkManager.fetch(
      `https://texttospeech.googleapis.com/v1/text:synthesize?key=${this.settings.apiKey}`,
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(requestBody)
      },
      `google-tts-${Date.now()}`,
      // 고유 식별자
      1e4
      // 10초 타임아웃
    );
    if (!response.ok) {
      const errorData = await response.json().catch(() => ({}));
      const errorMessage = this.getDetailedErrorMessage(response.status, errorData);
      throw new Error(errorMessage);
    }
    const data = await response.json();
    return data.audioContent;
  }
  getDetailedErrorMessage(status, errorData) {
    var _a, _b, _c, _d;
    if (errorData == null ? void 0 : errorData.error) {
      const error = errorData.error;
      if (status === 403 && ((_a = error.details) == null ? void 0 : _a.some(
        (detail) => {
          var _a2;
          return detail.reason === "API_KEY_SERVICE_BLOCKED" || ((_a2 = detail["@type"]) == null ? void 0 : _a2.includes("ErrorInfo")) && detail.reason === "API_KEY_SERVICE_BLOCKED";
        }
      ))) {
        return "Google Cloud Text-to-Speech API\uAC00 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. Google Cloud Console\uC5D0\uC11C Text-to-Speech API\uB97C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 403) {
        if (((_b = error.message) == null ? void 0 : _b.includes("API key not valid")) || error.code === "INVALID_ARGUMENT") {
          return "Google Cloud API \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. API \uD0A4\uB97C \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
        }
        if (((_c = error.message) == null ? void 0 : _c.includes("quota")) || ((_d = error.message) == null ? void 0 : _d.includes("QUOTA_EXCEEDED"))) {
          return "Google Cloud TTS API \uD560\uB2F9\uB7C9\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD560\uB2F9\uB7C9\uC744 \uD655\uC778\uD558\uAC70\uB098 \uC694\uAE08\uC81C\uB97C \uBCC0\uACBD\uD574\uC8FC\uC138\uC694.";
        }
        return "Google Cloud TTS API \uC811\uADFC\uC774 \uAC70\uBD80\uB418\uC5C8\uC2B5\uB2C8\uB2E4. API \uD0A4 \uAD8C\uD55C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 401) {
        return "Google Cloud API \uD0A4 \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. API \uD0A4\uAC00 \uC62C\uBC14\uB978\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 400) {
        return "Google Cloud TTS API \uC694\uCCAD\uC774 \uC798\uBABB\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC74C\uC131 \uC124\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
      }
      if (status === 503) {
        return "Google Cloud TTS \uC11C\uBE44\uC2A4\uAC00 \uC77C\uC2DC\uC801\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
      }
      return `Google Cloud TTS API \uC624\uB958 (${status}): ${error.message || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`;
    }
    return `Google Cloud TTS API \uC624\uB958: ${status} \uC0C1\uD0DC \uCF54\uB4DC`;
  }
  async playAudioData(base64Audio) {
    return new Promise((resolve, reject) => {
      try {
        const audioBlob = this.base64ToBlob(base64Audio, "audio/mp3");
        const audioUrl = URL.createObjectURL(audioBlob);
        const audio = this.audioManager.createAudio(audioUrl);
        const cleanup = () => {
          URL.revokeObjectURL(audioUrl);
          this.audioManager.releaseAudio(audio);
        };
        audio.onended = () => {
          cleanup();
          resolve();
        };
        audio.onerror = () => {
          cleanup();
          reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.onloadeddata = () => {
          audio.play().catch((error) => {
            console.error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
            cleanup();
            reject(error);
          });
        };
        setTimeout(() => {
          if (!audio.ended && !audio.paused) {
            cleanup();
            reject(new Error("\uC624\uB514\uC624 \uC7AC\uC0DD \uC2DC\uAC04 \uCD08\uACFC"));
          }
        }, 3e4);
      } catch (error) {
        reject(error);
      }
    });
  }
  async playAudioBuffer(audioBuffer) {
    return new Promise((resolve, reject) => {
      try {
        const audioBlob = new Blob([audioBuffer], { type: "audio/mp3" });
        const audioUrl = URL.createObjectURL(audioBlob);
        const audio = this.audioManager.createAudio(audioUrl);
        const cleanup = () => {
          URL.revokeObjectURL(audioUrl);
          this.audioManager.releaseAudio(audio);
        };
        audio.onended = () => {
          cleanup();
          resolve();
        };
        audio.onerror = () => {
          cleanup();
          reject(new Error("\uCE90\uC2DC\uB41C \uC624\uB514\uC624 \uC7AC\uC0DD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."));
        };
        audio.onloadeddata = () => {
          audio.play().catch((error) => {
            console.error("\uCE90\uC2DC\uB41C \uC624\uB514\uC624 \uC7AC\uC0DD \uC2E4\uD328:", error);
            cleanup();
            reject(error);
          });
        };
        setTimeout(() => {
          if (!audio.ended && !audio.paused) {
            cleanup();
            reject(new Error("\uCE90\uC2DC\uB41C \uC624\uB514\uC624 \uC7AC\uC0DD \uC2DC\uAC04 \uCD08\uACFC"));
          }
        }, 3e4);
      } catch (error) {
        reject(error);
      }
    });
  }
  base64ToBlob(base64, mimeType) {
    const byteCharacters = atob(base64);
    const byteNumbers = new Array(byteCharacters.length);
    for (let i = 0; i < byteCharacters.length; i++) {
      byteNumbers[i] = byteCharacters.charCodeAt(i);
    }
    const byteArray = new Uint8Array(byteNumbers);
    return new Blob([byteArray], { type: mimeType });
  }
  stopSpeaking() {
    this.audioManager.stopAllAudio();
  }
  isPaused() {
    const status = this.audioManager.getStatus();
    return status.active === 0;
  }
  resume() {
    new import_obsidian5.Notice("\uC74C\uC131\uC744 \uB2E4\uC2DC \uC7AC\uC0DD\uD558\uB824\uBA74 \uBC84\uD2BC\uC744 \uB2E4\uC2DC \uD074\uB9AD\uD574\uC8FC\uC138\uC694.");
  }
  pause() {
    this.stopSpeaking();
  }
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  // 리소스 정리
  cleanup() {
    this.audioManager.cleanup();
    this.networkManager.cancelAllRequests();
  }
  async testConnection() {
    try {
      const testText = "Hello, this is a test.";
      await this.callGoogleCloudAPI(testText);
      return true;
    } catch (error) {
      console.error("Google Cloud TTS \uC5F0\uACB0 \uD14C\uC2A4\uD2B8 \uC2E4\uD328:", error);
      return false;
    }
  }
  getAvailableVoices() {
    return [
      "en-US-Journey-D",
      "en-US-Journey-F",
      "en-US-Journey-O",
      "en-US-Neural2-A",
      "en-US-Neural2-C",
      "en-US-Neural2-D",
      "en-US-Neural2-E",
      "en-US-Neural2-F",
      "en-US-Neural2-G",
      "en-US-Neural2-H",
      "en-US-Neural2-I",
      "en-US-Neural2-J",
      "en-US-Standard-A",
      "en-US-Standard-B",
      "en-US-Standard-C",
      "en-US-Standard-D",
      "en-US-Standard-E",
      "en-US-Standard-F",
      "en-US-Standard-G",
      "en-US-Standard-H",
      "en-US-Standard-I",
      "en-US-Standard-J",
      "en-GB-Neural2-A",
      "en-GB-Neural2-B",
      "en-GB-Neural2-C",
      "en-GB-Neural2-D",
      "en-GB-Neural2-F",
      "en-AU-Neural2-A",
      "en-AU-Neural2-B",
      "en-AU-Neural2-C",
      "en-AU-Neural2-D"
    ];
  }
  getSettings() {
    return { ...this.settings };
  }
  destroy() {
    this.stopSpeaking();
  }
  // 캐시 관리 메서드들
  async getCacheInfo() {
    return await this.cacheManager.getCacheInfo();
  }
  async clearCache() {
    return await this.cacheManager.clearCache();
  }
  updateCacheFolder(vocabularyFolderPath) {
    this.cacheManager.updateCacheFolder(vocabularyFolderPath);
  }
};

// src/infrastructure/tts/TTSService.ts
var TTSServiceFactory = class {
  static createTTSService(app, settings) {
    if (!settings || !settings.ttsEnabled) {
      return new NoOpTTSService();
    }
    if (settings.ttsProvider === "google-cloud") {
      const googleSettings = {
        enabled: settings.ttsEnabled,
        apiKey: decryptApiKey(settings.googleCloudTTSApiKey),
        voice: settings.ttsVoice,
        languageCode: settings.googleCloudTTSLanguageCode,
        speakingRate: settings.googleCloudTTSSpeakingRate,
        pitch: settings.googleCloudTTSPitch,
        autoPlay: settings.ttsAutoPlay,
        cacheEnabled: settings.ttsCacheEnabled
      };
      return new GoogleCloudTTSService(app, googleSettings);
    } else {
      const chatterboxSettings = {
        enabled: settings.ttsEnabled,
        apiUrl: settings.chatterboxApiUrl,
        voice: settings.ttsVoice,
        response_format: "wav",
        speed: 1,
        exaggeration: settings.chatterboxExaggeration,
        cfgWeight: settings.chatterboxCfgWeight,
        temperature: settings.chatterboxTemperature,
        streaming_chunk_size: 50,
        streaming_strategy: "string",
        streaming_buffer_size: 1,
        streaming_quality: "string",
        autoPlay: settings.ttsAutoPlay
      };
      return new ChatterboxTTSService(chatterboxSettings);
    }
  }
};
var NoOpTTSService = class {
  async speakText(text) {
  }
  async speakWord(word) {
  }
  async speakExample(example) {
  }
  stopSpeaking() {
  }
  isPaused() {
    return true;
  }
  resume() {
  }
  pause() {
  }
  async testConnection() {
    return false;
  }
  getAvailableVoices() {
    return [];
  }
  destroy() {
  }
};

// src/core/algorithms/SpacedRepetitionAlgorithm.ts
var QUALITY_SCORES = {
  ["hard" /* Hard */]: 1,
  ["good" /* Good */]: 2,
  ["easy" /* Easy */]: 3
};
var DEFAULT_SRS_SETTINGS = {
  // SM-2 Algorithm Settings
  initialEFactor: 2.5,
  // SM-2 표준 초기 E-Factor
  minimumEFactor: 1.3,
  // SM-2 표준 최소 E-Factor
  maximumInterval: 36525,
  // ~100년
  // Initial Review Intervals (첫 번째 성공적인 복습 후 간격)
  hardInterval: 1,
  // Hard: 1일 후
  goodInterval: 2,
  // Good: 2일 후  
  easyInterval: 3,
  // Easy: 3일 후
  // Load Balancing Settings
  loadBalance: true,
  maxFuzzingDays: 3,
  // Legacy compatibility (will be converted)
  baseEase: 250,
  // 2.5 * 100
  easyBonus: 1.3,
  hardPenalty: 0.5,
  minimumEase: 130,
  // 1.3 * 100
  initialInterval: 1
};
var SpacedRepetitionAlgorithm = class {
  constructor(settings = DEFAULT_SRS_SETTINGS) {
    this.dueDateHistogram = /* @__PURE__ */ new Map();
    this.settings = settings;
  }
  /**
   * Calculate the next review schedule based on user response
   * Implements the SM-2 algorithm according to learning_algorithm.md specification
   */
  schedule(response, currentSchedule) {
    const now = /* @__PURE__ */ new Date();
    const q = QUALITY_SCORES[response];
    if (!currentSchedule) {
      currentSchedule = {
        dueDate: now.toISOString(),
        interval: 0,
        ease: Math.round(this.settings.initialEFactor * 100),
        // E-Factor를 100으로 곱해서 저장
        reviewCount: 0,
        lapseCount: 0,
        delayedDays: 0,
        repetition: 0
      };
    }
    let currentEFactor = currentSchedule.ease / 100;
    let newRepetition = currentSchedule.repetition;
    const delta = 0.1 - (3 - q) * (0.08 + (3 - q) * 0.02);
    let newEFactor = currentEFactor + delta;
    newEFactor = Math.max(this.settings.minimumEFactor, newEFactor);
    if (q >= 2) {
      newRepetition = currentSchedule.repetition + 1;
    } else {
      newRepetition = 0;
    }
    let newInterval;
    if (q < 2) {
      newInterval = this.settings.hardInterval;
    } else {
      if (newRepetition === 1) {
        if (q === 2) {
          newInterval = this.settings.goodInterval;
        } else {
          newInterval = this.settings.easyInterval;
        }
      } else if (newRepetition === 2) {
        newInterval = 6;
      } else {
        newInterval = Math.round(currentSchedule.interval * newEFactor);
      }
    }
    newInterval = Math.min(newInterval, this.settings.maximumInterval);
    newInterval = Math.max(1, newInterval);
    if (this.settings.loadBalance) {
      newInterval = this.applyLoadBalancing(newInterval);
    }
    const newDueDate = new Date(now.getTime() + newInterval * 24 * 60 * 60 * 1e3);
    this.updateDueDateHistogram(newDueDate.toDateString());
    return {
      interval: newInterval,
      ease: Math.round(newEFactor * 100),
      // E-Factor를 100으로 곱해서 반환
      dueDate: newDueDate.toISOString(),
      repetition: newRepetition
    };
  }
  /**
   * Apply load balancing to distribute reviews evenly across days
   * Based on the histogram-based approach from obsidian-spaced-repetition
   */
  applyLoadBalancing(interval) {
    if (!this.settings.loadBalance) {
      return interval;
    }
    let fuzzingRange;
    if (interval <= 21) {
      fuzzingRange = 1;
    } else if (interval <= 180) {
      fuzzingRange = Math.max(1, interval * 0.05);
    } else {
      fuzzingRange = Math.max(1, interval * 0.025);
    }
    fuzzingRange = Math.min(fuzzingRange, this.settings.maxFuzzingDays);
    const now = /* @__PURE__ */ new Date();
    let bestInterval = interval;
    let minReviews = Number.MAX_SAFE_INTEGER;
    for (let offset = -fuzzingRange; offset <= fuzzingRange; offset++) {
      const testInterval = interval + offset;
      if (testInterval < 1)
        continue;
      const testDate = new Date(now.getTime() + testInterval * 24 * 60 * 60 * 1e3);
      const dateString = testDate.toDateString();
      const reviewCount = this.dueDateHistogram.get(dateString) || 0;
      if (reviewCount < minReviews) {
        minReviews = reviewCount;
        bestInterval = testInterval;
      }
    }
    return bestInterval;
  }
  /**
   * Update the due date histogram for load balancing
   */
  updateDueDateHistogram(dateString) {
    const current = this.dueDateHistogram.get(dateString) || 0;
    this.dueDateHistogram.set(dateString, current + 1);
  }
  /**
   * Get cards that are due for review
   */
  static getCardsForReview(cards) {
    const now = /* @__PURE__ */ new Date();
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= now;
    });
  }
  /**
   * Calculate the number of cards due in the next N days
   */
  static getCardsDueInDays(cards, days) {
    const now = /* @__PURE__ */ new Date();
    const futureDate = new Date(now.getTime() + days * 24 * 60 * 60 * 1e3);
    return cards.filter((card) => {
      if (!card.scheduleInfo) {
        return true;
      }
      const dueDate = new Date(card.scheduleInfo.dueDate);
      return dueDate <= futureDate;
    }).length;
  }
  /**
   * Get learning statistics for a set of cards
   */
  static getStatistics(cards) {
    let newCards = 0;
    let learningCards = 0;
    let matureCards = 0;
    let totalEase = 0;
    let totalInterval = 0;
    let cardsWithSchedule = 0;
    cards.forEach((card) => {
      if (!card.scheduleInfo) {
        newCards++;
      } else {
        cardsWithSchedule++;
        totalEase += card.scheduleInfo.ease;
        totalInterval += card.scheduleInfo.interval;
        if (card.scheduleInfo.interval < 21) {
          learningCards++;
        } else {
          matureCards++;
        }
      }
    });
    return {
      total: cards.length,
      new: newCards,
      learning: learningCards,
      mature: matureCards,
      averageEase: cardsWithSchedule > 0 ? Math.round(totalEase / cardsWithSchedule) : 0,
      averageInterval: cardsWithSchedule > 0 ? Math.round(totalInterval / cardsWithSchedule) : 0
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
  }
  /**
   * Get current settings
   */
  getSettings() {
    return { ...this.settings };
  }
  /**
   * Clear the due date histogram (useful for testing or reset)
   */
  clearHistogram() {
    this.dueDateHistogram.clear();
  }
};

// src/core/services/SpacedRepetitionService.ts
var SpacedRepetitionService = class {
  constructor(settings = {}) {
    this.currentSession = null;
    const srsSettings = { ...DEFAULT_SRS_SETTINGS, ...settings };
    this.algorithm = new SpacedRepetitionAlgorithm(srsSettings);
  }
  /**
   * Get cards that are due for review today
   */
  getCardsForReview(allCards) {
    return SpacedRepetitionAlgorithm.getCardsForReview(allCards);
  }
  /**
   * Get new cards (never reviewed)
   */
  getNewCards(allCards) {
    return allCards.filter((card) => !card.scheduleInfo || card.reviewCount === 0);
  }
  /**
   * Get learning cards (reviewed but not mature)
   */
  getLearningCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.reviewCount > 0 && card.scheduleInfo.interval < 21
    );
  }
  /**
   * Get mature cards (interval >= 21 days)
   */
  getMatureCards(allCards) {
    return allCards.filter(
      (card) => card.scheduleInfo && card.scheduleInfo.interval >= 21
    );
  }
  /**
   * Start a new review session
   */
  startReviewSession(dueCards, maxCards) {
    const cardsToReview = maxCards ? dueCards.slice(0, maxCards) : dueCards;
    this.currentSession = {
      sessionId: this.generateSessionId(),
      startTime: (/* @__PURE__ */ new Date()).toISOString(),
      cardsReviewed: 0,
      totalCards: cardsToReview.length,
      completedCards: [],
      currentCard: cardsToReview[0],
      remainingCards: cardsToReview
      // Add remaining cards to track progress
    };
    return this.currentSession;
  }
  /**
   * Process a review response and get the next card
   */
  processReview(card, response) {
    var _a, _b, _c, _d;
    if (!this.currentSession) {
      throw new Error("No active review session");
    }
    const reviewResult = this.algorithm.schedule(response, card.scheduleInfo);
    const updatedCard = {
      ...card,
      reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
      difficulty: response,
      lastReviewed: (/* @__PURE__ */ new Date()).toISOString(),
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.reviewCount) || 0) + 1,
        lapseCount: (((_c = card.scheduleInfo) == null ? void 0 : _c.lapseCount) || 0) + (response === "hard" /* Hard */ ? 1 : 0),
        delayedDays: ((_d = card.scheduleInfo) == null ? void 0 : _d.delayedDays) || 0,
        repetition: reviewResult.repetition
      }
    };
    this.currentSession.cardsReviewed++;
    this.currentSession.completedCards.push(updatedCard);
    const remainingCards = this.currentSession.remainingCards || [];
    const nextCard = this.currentSession.cardsReviewed < remainingCards.length ? remainingCards[this.currentSession.cardsReviewed] : void 0;
    this.currentSession.currentCard = nextCard;
    const sessionComplete = !nextCard || this.currentSession.cardsReviewed >= this.currentSession.totalCards;
    if (sessionComplete) {
      this.endReviewSession();
    }
    return {
      updatedCard,
      nextCard,
      sessionComplete
    };
  }
  /**
   * End the current review session
   */
  endReviewSession() {
    const session = this.currentSession;
    this.currentSession = null;
    return session;
  }
  /**
   * Get current session info
   */
  getCurrentSession() {
    return this.currentSession;
  }
  /**
   * Calculate study statistics
   */
  calculateStatistics(allCards, studyHistory) {
    const now = /* @__PURE__ */ new Date();
    const today = now.toDateString();
    const overallStats = SpacedRepetitionAlgorithm.getStatistics(allCards);
    const todayStats = {
      newCards: 0,
      // Would track from session data
      reviewedCards: 0,
      // Would track from session data
      totalTime: 0
      // Would track from session timing
    };
    const streakStats = {
      currentDays: 0,
      // Would calculate from study history
      longestDays: 0,
      // Would calculate from study history
      lastStudyDate: null
    };
    return {
      today: todayStats,
      streak: streakStats,
      overall: overallStats
    };
  }
  /**
   * Get cards due in the next N days
   */
  getCardsDueInDays(allCards, days) {
    return SpacedRepetitionAlgorithm.getCardsDueInDays(allCards, days);
  }
  /**
   * Reset a card's schedule (for testing or manual intervention)
   */
  resetCardSchedule(card) {
    return {
      ...card,
      reviewCount: 0,
      lastReviewed: null,
      scheduleInfo: void 0
    };
  }
  /**
   * Manually set card difficulty (for bulk operations)
   */
  setCardDifficulty(card, difficulty) {
    var _a, _b;
    const reviewResult = this.algorithm.schedule(difficulty, card.scheduleInfo);
    return {
      ...card,
      difficulty,
      scheduleInfo: {
        dueDate: reviewResult.dueDate,
        interval: reviewResult.interval,
        ease: reviewResult.ease,
        reviewCount: (((_a = card.scheduleInfo) == null ? void 0 : _a.reviewCount) || 0) + 1,
        lapseCount: (((_b = card.scheduleInfo) == null ? void 0 : _b.lapseCount) || 0) + (difficulty === "hard" /* Hard */ ? 1 : 0),
        delayedDays: 0,
        repetition: reviewResult.repetition
      }
    };
  }
  /**
   * Update algorithm settings
   */
  updateSettings(settings) {
    this.algorithm.updateSettings(settings);
  }
  /**
   * Get current algorithm settings
   */
  getSettings() {
    return this.algorithm.getSettings();
  }
  /**
   * Generate a unique session ID
   */
  generateSessionId() {
    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * Get recommended daily study load
   */
  getRecommendedDailyCards(allCards) {
    const dueCards = this.getCardsForReview(allCards);
    const newCards = this.getNewCards(allCards);
    const maxNewCardsPerDay = 20;
    const maxReviewCardsPerDay = 100;
    const recommendedNew = Math.min(newCards.length, maxNewCardsPerDay);
    const recommendedReview = Math.min(dueCards.length - recommendedNew, maxReviewCardsPerDay);
    return {
      newCards: recommendedNew,
      reviewCards: recommendedReview,
      total: recommendedNew + recommendedReview
    };
  }
  /**
   * Export cards for data analysis or backup
   */
  exportScheduleData(allCards) {
    return allCards.map((card) => ({
      word: card.word,
      reviewCount: card.reviewCount,
      difficulty: card.difficulty,
      lastReviewed: card.lastReviewed,
      scheduleInfo: card.scheduleInfo,
      addedDate: card.addedDate
    }));
  }
  /**
   * Get the next review intervals for each difficulty level
   * Shows the exact SM-2 algorithm results with E-Factor information
   */
  getNextReviewIntervals(card) {
    const hardResult = this.algorithm.schedule("hard" /* Hard */, card.scheduleInfo);
    const goodResult = this.algorithm.schedule("good" /* Good */, card.scheduleInfo);
    const easyResult = this.algorithm.schedule("easy" /* Easy */, card.scheduleInfo);
    return {
      hard: {
        interval: hardResult.interval,
        displayText: this.formatInterval(hardResult.interval),
        eFactor: hardResult.ease / 100,
        // Convert back to E-Factor
        repetition: hardResult.repetition
      },
      good: {
        interval: goodResult.interval,
        displayText: this.formatInterval(goodResult.interval),
        eFactor: goodResult.ease / 100,
        repetition: goodResult.repetition
      },
      easy: {
        interval: easyResult.interval,
        displayText: this.formatInterval(easyResult.interval),
        eFactor: easyResult.ease / 100,
        repetition: easyResult.repetition
      }
    };
  }
  /**
   * Format interval as human-readable text
   */
  formatInterval(days) {
    if (days < 1) {
      return "today";
    } else if (days === 1) {
      return "1 day";
    } else if (days < 30) {
      return `${days} day${days > 1 ? "s" : ""}`;
    } else if (days < 365) {
      const months = Math.round(days / 30 * 10) / 10;
      return `${months} month${months > 1 ? "s" : ""}`;
    } else {
      const years = Math.round(days / 365 * 10) / 10;
      return `${years} year${years > 1 ? "s" : ""}`;
    }
  }
  /**
   * Get detailed SM-2 algorithm statistics
   */
  getSM2Statistics(allCards) {
    const stats = {
      overview: { totalCards: 0, newCards: 0, learningCards: 0, matureCards: 0 },
      repetitions: { rep0: 0, rep1: 0, rep2: 0, rep3Plus: 0 },
      eFactors: { average: 0, distribution: [] },
      intervals: { average: 0, distribution: [] }
    };
    let totalEFactor = 0;
    let totalInterval = 0;
    let cardsWithSchedule = 0;
    const eFactorBuckets = /* @__PURE__ */ new Map();
    const intervalBuckets = /* @__PURE__ */ new Map();
    allCards.forEach((card) => {
      stats.overview.totalCards++;
      if (!card.scheduleInfo) {
        stats.overview.newCards++;
        stats.repetitions.rep0++;
      } else {
        cardsWithSchedule++;
        const repetition = card.scheduleInfo.repetition || 0;
        const eFactor = card.scheduleInfo.ease / 100;
        const interval = card.scheduleInfo.interval;
        totalEFactor += eFactor;
        totalInterval += interval;
        if (repetition === 1)
          stats.repetitions.rep1++;
        else if (repetition === 2)
          stats.repetitions.rep2++;
        else if (repetition >= 3)
          stats.repetitions.rep3Plus++;
        else
          stats.repetitions.rep0++;
        if (interval >= 21) {
          stats.overview.matureCards++;
        } else {
          stats.overview.learningCards++;
        }
        const eFactorRange = this.getEFactorRange(eFactor);
        eFactorBuckets.set(eFactorRange, (eFactorBuckets.get(eFactorRange) || 0) + 1);
        const intervalRange = this.getIntervalRange(interval);
        intervalBuckets.set(intervalRange, (intervalBuckets.get(intervalRange) || 0) + 1);
      }
    });
    stats.eFactors.average = cardsWithSchedule > 0 ? Math.round(totalEFactor / cardsWithSchedule * 100) / 100 : 0;
    stats.intervals.average = cardsWithSchedule > 0 ? Math.round(totalInterval / cardsWithSchedule) : 0;
    stats.eFactors.distribution = Array.from(eFactorBuckets.entries()).map(([range, count]) => ({ range, count })).sort((a, b) => parseFloat(a.range.split("-")[0]) - parseFloat(b.range.split("-")[0]));
    stats.intervals.distribution = Array.from(intervalBuckets.entries()).map(([range, count]) => ({ range, count })).sort((a, b) => this.compareIntervalRanges(a.range, b.range));
    return stats;
  }
  /**
   * Get E-Factor range for grouping
   */
  getEFactorRange(eFactor) {
    if (eFactor < 1.5)
      return "1.3-1.5";
    if (eFactor < 2)
      return "1.5-2.0";
    if (eFactor < 2.5)
      return "2.0-2.5";
    if (eFactor < 3)
      return "2.5-3.0";
    if (eFactor < 3.5)
      return "3.0-3.5";
    return "3.5+";
  }
  /**
   * Get interval range for grouping
   */
  getIntervalRange(interval) {
    if (interval === 1)
      return "1 day";
    if (interval <= 6)
      return "2-6 days";
    if (interval <= 20)
      return "7-20 days";
    if (interval <= 60)
      return "21-60 days";
    if (interval <= 180)
      return "2-6 months";
    if (interval <= 365)
      return "6-12 months";
    return "1+ years";
  }
  /**
   * Compare interval ranges for sorting
   */
  compareIntervalRanges(a, b) {
    const order = ["1 day", "2-6 days", "7-20 days", "21-60 days", "2-6 months", "6-12 months", "1+ years"];
    return order.indexOf(a) - order.indexOf(b);
  }
};

// src/features/vocabulary-learning/ui/VocabularyModal.ts
var VocabularyModal = class extends import_obsidian6.Modal {
  constructor(app, plugin) {
    super(app);
    this.currentCardIndex = 0;
    this.cards = [];
    this.showAnswer = false;
    this.keydownHandler = null;
    this.currentSession = null;
    this.plugin = plugin;
    this.ttsService = TTSServiceFactory.createTTSService(app, plugin.settings);
    this.spacedRepetitionService = new SpacedRepetitionService();
  }
  onOpen() {
    const allCards = this.plugin.databaseManager.getAllWords();
    this.cards = this.spacedRepetitionService.getCardsForReview(allCards);
    if (this.cards.length === 0) {
      this.showNoCardsForReview(allCards.length);
      return;
    }
    this.currentSession = this.spacedRepetitionService.startReviewSession(this.cards);
    this.shuffleCards();
    this.currentCardIndex = 0;
    this.showAnswer = false;
    this.showCard();
    this.keydownHandler = (e) => {
      if (!this.showAnswer) {
        if (e.code === "Space" || e.key === " ") {
          e.preventDefault();
          this.showAnswer = true;
          this.showCard();
        }
      } else {
        if (e.key === "1") {
          this.handleReview("hard");
        } else if (e.key === "2") {
          this.handleReview("good");
        } else if (e.key === "3") {
          this.handleReview("easy");
        }
      }
    };
    window.addEventListener("keydown", this.keydownHandler);
  }
  shuffleCards() {
    for (let i = this.cards.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [this.cards[i], this.cards[j]] = [this.cards[j], this.cards[i]];
    }
  }
  showNoWordsMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noWordsEl = contentEl.createEl("div", { cls: "no-words-message" });
    noWordsEl.createEl("h2", { text: "\uD559\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4" });
    noWordsEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    const closeButton = noWordsEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showNoCardsForReview(totalCards) {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const noReviewEl = contentEl.createEl("div", { cls: "no-review-message" });
    noReviewEl.createEl("h2", { text: "\u{1F389} \uC624\uB298\uC758 \uBCF5\uC2B5 \uC644\uB8CC!" });
    if (totalCards > 0) {
      const stats = this.spacedRepetitionService.calculateStatistics(this.plugin.databaseManager.getAllWords());
      noReviewEl.createEl("p", {
        text: `\uCD1D ${totalCards}\uAC1C\uC758 \uB2E8\uC5B4 \uC911 \uC624\uB298 \uBCF5\uC2B5\uD560 \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`
      });
      const nextDueCards = this.spacedRepetitionService.getCardsDueInDays(
        this.plugin.databaseManager.getAllWords(),
        1
      );
      if (nextDueCards > 0) {
        noReviewEl.createEl("p", {
          text: `\uB0B4\uC77C \uBCF5\uC2B5 \uC608\uC815: ${nextDueCards}\uAC1C \uB2E8\uC5B4`
        });
      }
      const statsEl = noReviewEl.createEl("div", { cls: "study-stats" });
      statsEl.createEl("h3", { text: "\uD559\uC2B5 \uD604\uD669" });
      statsEl.createEl("p", { text: `\u2022 \uC0C8 \uB2E8\uC5B4: ${stats.overall.newCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uD559\uC2B5 \uC911: ${stats.overall.learningCards}\uAC1C` });
      statsEl.createEl("p", { text: `\u2022 \uC644\uB8CC: ${stats.overall.matureCards}\uAC1C` });
    } else {
      noReviewEl.createEl("p", { text: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD55C \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694." });
    }
    const closeButton = noReviewEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => this.close());
  }
  showCard() {
    if (this.currentCardIndex >= this.cards.length) {
      this.showCompletionMessage();
      return;
    }
    const currentCard = this.cards[this.currentCardIndex];
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const cardContainer = contentEl.createEl("div", { cls: "vocabulary-card" });
    const topInfoContainer = cardContainer.createEl("div", { cls: "card-top-info" });
    const currentBook = this.plugin.databaseManager.getCurrentBook();
    if (currentBook) {
      const bookInfoEl = topInfoContainer.createEl("div", { cls: "book-info-display" });
      bookInfoEl.createEl("span", {
        text: currentBook.name,
        cls: "current-book-name"
      });
    }
    const deleteButton = topInfoContainer.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const progressEl = cardContainer.createEl("div", { cls: "progress-indicator" });
    progressEl.textContent = `${this.currentCardIndex + 1} / ${this.cards.length}`;
    const wordContainer = cardContainer.createEl("div", { cls: "word-container" });
    const wordEl = wordContainer.createEl("h1", { cls: "card-word" });
    if (currentCard.pronunciation && currentCard.pronunciation.trim()) {
      wordEl.textContent = currentCard.word;
      wordEl.appendText(" ");
      wordEl.createEl("span", {
        text: `[${currentCard.pronunciation}]`,
        cls: "pronunciation"
      });
    } else {
      wordEl.textContent = currentCard.word;
    }
    const wordPlayButton = wordContainer.createEl("button", {
      cls: "tts-play-button word-play-button",
      attr: { "aria-label": "\uB2E8\uC5B4 \uBC1C\uC74C \uB4E3\uAE30" }
    });
    wordPlayButton.textContent = "\u{1F50A}";
    wordPlayButton.addEventListener("click", () => {
      this.ttsService.speakWord(currentCard.word);
    });
    if (currentCard.similarWords && currentCard.similarWords.length > 0) {
      const similarSection = cardContainer.createEl("div", { cls: "similar-words-section" });
      const similarWordsText = similarSection.createEl("p", {
        cls: "similar-words-inline",
        text: `\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4: ${currentCard.similarWords.join(", ")}`
      });
    }
    if (currentCard.examples && currentCard.examples.length > 0) {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      currentCard.examples.forEach((example, index) => {
        const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
        const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
        const englishExample = exampleTextContainer.createEl("p", { text: example.english });
        englishExample.addClass("english-example");
        const examplePlayButton = exampleTextContainer.createEl("button", {
          cls: "tts-play-button example-play-button",
          attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
        });
        examplePlayButton.textContent = "\u{1F50A}";
        examplePlayButton.addEventListener("click", () => {
          this.ttsService.speakExample(example.english, currentCard.word);
        });
        if (this.showAnswer && example.korean && example.korean.trim()) {
          const koreanExample = exampleContainer.createEl("p", { text: example.korean });
          koreanExample.addClass("korean-example");
        }
      });
    } else {
      const examplesSection = cardContainer.createEl("div", { cls: "examples-section" });
      examplesSection.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
      const exampleContainer = examplesSection.createEl("div", { cls: "example-container" });
      const exampleTextContainer = exampleContainer.createEl("div", { cls: "example-text-container" });
      const englishExample = exampleTextContainer.createEl("p", {
        text: `This is an example sentence with the word "${currentCard.word}".`
      });
      englishExample.addClass("english-example");
      const examplePlayButton = exampleTextContainer.createEl("button", {
        cls: "tts-play-button example-play-button",
        attr: { "aria-label": "\uC608\uBB38 \uBC1C\uC74C \uB4E3\uAE30" }
      });
      examplePlayButton.textContent = "\u{1F50A}";
      examplePlayButton.addEventListener("click", () => {
        this.ttsService.speakExample(`This is an example sentence with the word "${currentCard.word}".`, currentCard.word);
      });
      if (this.showAnswer) {
        const koreanExample = exampleContainer.createEl("p", {
          text: `"${currentCard.word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        });
        koreanExample.addClass("korean-example");
      }
    }
    if (!this.showAnswer) {
      const checkButton = cardContainer.createEl("button", { text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30" });
      checkButton.addClass("check-answer-button");
      checkButton.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCard();
      });
    } else {
      const answerSection = cardContainer.createEl("div", { cls: "answer-section" });
      answerSection.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerSection.createEl("ul", { cls: "meanings-list" });
      currentCard.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      this.createReviewButtons(cardContainer);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons-section" });
    const currentCard = this.cards[this.currentCardIndex];
    const intervals = this.spacedRepetitionService.getNextReviewIntervals(currentCard);
    const hardButton = reviewSection.createEl("button");
    hardButton.addClass("review-button", "hard-button");
    const hardContent = hardButton.createEl("div", { cls: "button-content" });
    hardContent.createEl("span", { text: "\uC5B4\uB824\uC6C0", cls: "button-label" });
    hardContent.createEl("span", { text: intervals.hard.displayText, cls: "button-interval" });
    hardButton.addEventListener("click", () => this.handleReview("hard"));
    const goodButton = reviewSection.createEl("button");
    goodButton.addClass("review-button", "good-button");
    const goodContent = goodButton.createEl("div", { cls: "button-content" });
    goodContent.createEl("span", { text: "\uC88B\uC74C", cls: "button-label" });
    goodContent.createEl("span", { text: intervals.good.displayText, cls: "button-interval" });
    goodButton.addEventListener("click", () => this.handleReview("good"));
    const easyButton = reviewSection.createEl("button");
    easyButton.addClass("review-button", "easy-button");
    const easyContent = easyButton.createEl("div", { cls: "button-content" });
    easyContent.createEl("span", { text: "\uC26C\uC6C0", cls: "button-label" });
    easyContent.createEl("span", { text: intervals.easy.displayText, cls: "button-interval" });
    easyButton.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentCard = this.cards[this.currentCardIndex];
    const activeSession = this.spacedRepetitionService.getCurrentSession();
    if (!activeSession) {
      console.error("No active review session in SpacedRepetitionService");
      const remainingCards = this.cards.slice(this.currentCardIndex);
      if (remainingCards.length > 0) {
        this.currentSession = this.spacedRepetitionService.startReviewSession(remainingCards);
      } else {
        console.error("No remaining cards to review");
        return;
      }
    }
    const reviewResponse = difficulty;
    try {
      const result = this.spacedRepetitionService.processReview(currentCard, reviewResponse);
      await this.plugin.databaseManager.updateWordWithSchedule(
        result.updatedCard.word,
        difficulty,
        result.updatedCard.scheduleInfo
      );
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    } catch (error) {
      console.error("Error processing spaced repetition review:", error);
      await this.plugin.databaseManager.updateWord(currentCard.word, difficulty);
      this.currentCardIndex++;
      this.showAnswer = false;
      this.showCard();
    }
  }
  async handleDeleteCard() {
    const currentCard = this.cards[this.currentCardIndex];
    const confirmModal = new ConfirmModal(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentCard.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentCard.word);
          this.cards.splice(this.currentCardIndex, 1);
          if (this.cards.length === 0) {
            this.showCompletionMessage();
            return;
          }
          if (this.currentCardIndex >= this.cards.length) {
            this.currentCardIndex = this.cards.length - 1;
          }
          this.showAnswer = false;
          this.showCard();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian6.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletionMessage() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const completionEl = contentEl.createEl("div", { cls: "completion-message" });
    completionEl.createEl("h2", { text: "\uD559\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: `\uC624\uB298 ${this.cards.length}\uAC1C\uC758 \uB2E8\uC5B4 \uD559\uC2B5\uC744 \uC644\uB8CC\uD588\uC2B5\uB2C8\uB2E4.` });
    const restartButton = completionEl.createEl("button", { text: "\uB2E4\uC2DC \uD559\uC2B5\uD558\uAE30" });
    restartButton.addClass("restart-button");
    restartButton.addEventListener("click", () => {
      this.onOpen();
    });
    const closeButton = completionEl.createEl("button", { text: "\uB2EB\uAE30" });
    closeButton.addClass("close-button");
    closeButton.addEventListener("click", () => {
      this.close();
    });
  }
  onClose() {
    if (this.keydownHandler) {
      window.removeEventListener("keydown", this.keydownHandler);
      this.keydownHandler = null;
    }
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal = class extends import_obsidian6.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var import_obsidian9 = require("obsidian");

// src/infrastructure/external/WordService.ts
var WordService = class {
  constructor() {
    this.apiBaseUrl = "https://api.dictionaryapi.dev/api/v2/entries/en";
  }
  async getWordData(word) {
    try {
      return this.getSampleWordData(word);
    } catch (error) {
      console.error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC624\uB294 \uC911 \uC624\uB958:", error);
      throw new Error("\uB2E8\uC5B4 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
  }
  getSampleWordData(word) {
    const sampleData = {
      "beautiful": {
        word: "beautiful",
        pronunciation: "/\u02C8bju\u02D0t\u026Af\u0259l/",
        meanings: ["\uC544\uB984\uB2E4\uC6B4", "\uC608\uC05C", "\uD6CC\uB96D\uD55C"],
        similarWords: ["pretty", "gorgeous", "stunning", "attractive"],
        examples: [
          {
            english: "She is a beautiful woman.",
            korean: "\uADF8\uB140\uB294 \uC544\uB984\uB2E4\uC6B4 \uC5EC\uC131\uC785\uB2C8\uB2E4."
          },
          {
            english: "The sunset was beautiful.",
            korean: "\uC77C\uBAB0\uC774 \uC544\uB984\uB2E4\uC6E0\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "What a beautiful day!",
            korean: "\uC815\uB9D0 \uC544\uB984\uB2E4\uC6B4 \uD558\uB8E8\uB124\uC694!"
          }
        ]
      },
      "happy": {
        word: "happy",
        pronunciation: "/\u02C8h\xE6pi/",
        meanings: ["\uD589\uBCF5\uD55C", "\uAE30\uC05C", "\uC990\uAC70\uC6B4"],
        similarWords: ["joyful", "cheerful", "glad", "pleased"],
        examples: [
          {
            english: "I am happy to see you.",
            korean: "\uB2F9\uC2E0\uC744 \uB9CC\uB098\uC11C \uAE30\uC069\uB2C8\uB2E4."
          },
          {
            english: "She has a happy family.",
            korean: "\uADF8\uB140\uB294 \uD589\uBCF5\uD55C \uAC00\uC871\uC744 \uAC00\uC9C0\uACE0 \uC788\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Happy birthday!",
            korean: "\uC0DD\uC77C \uCD95\uD558\uD569\uB2C8\uB2E4!"
          }
        ]
      },
      "learn": {
        word: "learn",
        pronunciation: "/l\u025C\u02D0rn/",
        meanings: ["\uBC30\uC6B0\uB2E4", "\uD559\uC2B5\uD558\uB2E4", "\uC775\uD788\uB2E4"],
        similarWords: ["study", "acquire", "grasp", "understand"],
        examples: [
          {
            english: "I want to learn English.",
            korean: "\uC800\uB294 \uC601\uC5B4\uB97C \uBC30\uC6B0\uACE0 \uC2F6\uC2B5\uB2C8\uB2E4."
          },
          {
            english: "Children learn quickly.",
            korean: "\uC544\uC774\uB4E4\uC740 \uBE68\uB9AC \uBC30\uC6C1\uB2C8\uB2E4."
          },
          {
            english: "You can learn from your mistakes.",
            korean: "\uC2E4\uC218\uB85C\uBD80\uD130 \uBC30\uC6B8 \uC218 \uC788\uC2B5\uB2C8\uB2E4."
          }
        ]
      }
    };
    if (sampleData[word.toLowerCase()]) {
      return sampleData[word.toLowerCase()];
    }
    return {
      word,
      pronunciation: "/pronunciation/",
      meanings: ["\uC758\uBBF8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."],
      similarWords: [],
      examples: [
        {
          english: `This is an example sentence with the word "${word}".`,
          korean: `"${word}"\uB77C\uB294 \uB2E8\uC5B4\uAC00 \uD3EC\uD568\uB41C \uC608\uBB38\uC785\uB2C8\uB2E4.`
        }
      ]
    };
  }
  // 실제 API 호출을 위한 메서드 (향후 구현)
  async fetchFromAPI(word) {
    const response = await fetch(`${this.apiBaseUrl}/${word}`);
    if (!response.ok) {
      throw new Error(`API \uC694\uCCAD \uC2E4\uD328: ${response.status}`);
    }
    return await response.json();
  }
};

// src/features/book-management/ui/AddBookModal.ts
var import_obsidian7 = require("obsidian");
var AddBookModal = class extends import_obsidian7.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-book-modal");
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uC0C8\uB85C\uC6B4 \uB2E8\uC5B4\uC7A5\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const formEl = contentEl.createEl("form", { cls: "book-form" });
    const nameSection = formEl.createEl("div", { cls: "form-section" });
    const nameLabel = nameSection.createEl("label", {
      text: "\uB2E8\uC5B4\uC7A5 \uC774\uB984 *",
      cls: "form-label"
    });
    const nameInput = nameSection.createEl("input", {
      type: "text",
      placeholder: "\uC608: TOEIC \uB2E8\uC5B4\uC7A5, \uC77C\uC0C1\uC0DD\uD65C \uB2E8\uC5B4\uC7A5",
      cls: "form-input"
    });
    nameInput.required = true;
    const descSection = formEl.createEl("div", { cls: "form-section" });
    const descLabel = descSection.createEl("label", {
      text: "\uC124\uBA85 (\uC120\uD0DD\uC0AC\uD56D)",
      cls: "form-label"
    });
    const descInput = descSection.createEl("textarea", {
      placeholder: "\uB2E8\uC5B4\uC7A5\uC5D0 \uB300\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694.",
      cls: "form-textarea"
    });
    descInput.rows = 3;
    const buttonSection = formEl.createEl("div", { cls: "button-section" });
    const createButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uC0DD\uC131",
      cls: "create-button primary",
      type: "submit"
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button",
      type: "button"
    });
    cancelButton.addEventListener("click", () => this.close());
    formEl.addEventListener("submit", async (e) => {
      e.preventDefault();
      await this.createBook(nameInput.value.trim(), descInput.value.trim());
    });
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        formEl.dispatchEvent(new Event("submit"));
      }
    });
    nameInput.focus();
  }
  async createBook(name, description) {
    if (!name.trim()) {
      new import_obsidian7.Notice("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    try {
      const existingBooks = this.plugin.databaseManager.getAllBooks();
      const isDuplicate = existingBooks.some(
        (book) => book.name && typeof book.name === "string" && book.name.toLowerCase() === name.toLowerCase()
      );
      if (isDuplicate) {
        new import_obsidian7.Notice("\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4.");
        return;
      }
      const newBook = await this.plugin.databaseManager.createBook(name, description);
      new import_obsidian7.Notice(`"${name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
      this.close();
      const event = new CustomEvent("bookCreated", { detail: newBook });
      document.dispatchEvent(event);
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131 \uC2E4\uD328:", error);
      new import_obsidian7.Notice("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/features/word-management/ui/AddWordsModal.ts
var import_obsidian8 = require("obsidian");

// src/shared/validation.ts
function validateString(input, options = {}) {
  const {
    minLength = 0,
    maxLength = 1e3,
    allowEmpty = false,
    pattern,
    fieldName = "\uC785\uB825\uAC12"
  } = options;
  if (!input || input.trim().length === 0) {
    if (allowEmpty) {
      return { isValid: true, sanitized: "" };
    }
    return { isValid: false, error: `${fieldName}\uC740(\uB294) \uD544\uC218 \uC785\uB825\uAC12\uC785\uB2C8\uB2E4.` };
  }
  const trimmed = input.trim();
  if (trimmed.length < minLength) {
    return {
      isValid: false,
      error: `${fieldName}\uC740(\uB294) \uCD5C\uC18C ${minLength}\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.`
    };
  }
  if (trimmed.length > maxLength) {
    return {
      isValid: false,
      error: `${fieldName}\uC740(\uB294) \uCD5C\uB300 ${maxLength}\uC790 \uC774\uD558\uC5EC\uC57C \uD569\uB2C8\uB2E4.`
    };
  }
  if (pattern && !pattern.test(trimmed)) {
    return {
      isValid: false,
      error: `${fieldName}\uC758 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.`
    };
  }
  return { isValid: true, sanitized: trimmed };
}
function validateWord(word) {
  const validation = validateString(word, {
    minLength: 1,
    maxLength: 50,
    pattern: /^[a-zA-Z\s'-]+$/,
    fieldName: "\uB2E8\uC5B4"
  });
  if (!validation.isValid) {
    return validation;
  }
  const sanitized = validation.sanitized.replace(/[^\w\s'-]/g, "").replace(/\s+/g, " ");
  return { isValid: true, sanitized };
}
function sanitizeMarkdown(text) {
  if (!text)
    return "";
  return text.replace(/<script[^>]*>[\s\S]*?<\/script>/gi, "").replace(/<iframe[^>]*>[\s\S]*?<\/iframe>/gi, "").replace(/javascript:/gi, "").replace(/on\w+\s*=/gi, "").trim();
}
function validateBatch(items, validator) {
  const valid = [];
  const invalid = [];
  for (const item of items) {
    const result = validator(item);
    if (result.isValid) {
      valid.push(item);
    } else {
      invalid.push({ item, error: result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958" });
    }
  }
  return { valid, invalid };
}

// src/shared/CancellationToken.ts
var CancellationTokenSource = class {
  constructor() {
    this._isCancelled = false;
    this._callbacks = [];
  }
  get token() {
    return {
      get isCancelled() {
        return this._isCancelled;
      },
      throwIfCancelled: () => {
        if (this._isCancelled) {
          throw new CancellationError("Operation was cancelled");
        }
      },
      onCancelled: (callback) => {
        if (this._isCancelled) {
          callback();
        } else {
          this._callbacks.push(callback);
        }
      }
    };
  }
  cancel() {
    if (this._isCancelled)
      return;
    this._isCancelled = true;
    this._callbacks.forEach((callback) => {
      try {
        callback();
      } catch (error) {
        console.error("Error in cancellation callback:", error);
      }
    });
    this._callbacks.length = 0;
  }
  dispose() {
    this._callbacks.length = 0;
  }
};
var CancellationError = class extends Error {
  constructor(message = "Operation was cancelled") {
    super(message);
    this.name = "CancellationError";
  }
};
function delay(ms, cancellationToken) {
  return new Promise((resolve, reject) => {
    if (cancellationToken == null ? void 0 : cancellationToken.isCancelled) {
      reject(new CancellationError());
      return;
    }
    const timeoutId = setTimeout(() => {
      resolve();
    }, ms);
    cancellationToken == null ? void 0 : cancellationToken.onCancelled(() => {
      clearTimeout(timeoutId);
      reject(new CancellationError());
    });
  });
}
async function withCancellation(promise, cancellationToken) {
  if (!cancellationToken) {
    return promise;
  }
  return new Promise((resolve, reject) => {
    if (cancellationToken.isCancelled) {
      reject(new CancellationError());
      return;
    }
    let isResolved = false;
    promise.then(
      (value) => {
        if (!isResolved) {
          isResolved = true;
          resolve(value);
        }
      },
      (error) => {
        if (!isResolved) {
          isResolved = true;
          reject(error);
        }
      }
    );
    cancellationToken.onCancelled(() => {
      if (!isResolved) {
        isResolved = true;
        reject(new CancellationError());
      }
    });
  });
}
async function processBatchWithCancellation(items, processor, options = {}) {
  const {
    batchSize = 10,
    delay: delayMs = 100,
    cancellationToken,
    onProgress
  } = options;
  const results = [];
  for (let i = 0; i < items.length; i += batchSize) {
    cancellationToken == null ? void 0 : cancellationToken.throwIfCancelled();
    const batch = items.slice(i, i + batchSize);
    const batchPromises = batch.map(
      (item, batchIndex) => processor(item, i + batchIndex)
    );
    try {
      const batchResults = await withCancellation(
        Promise.all(batchPromises),
        cancellationToken
      );
      results.push(...batchResults);
      onProgress == null ? void 0 : onProgress(Math.min(i + batchSize, items.length), items.length);
      if (i + batchSize < items.length && delayMs > 0) {
        await delay(delayMs, cancellationToken);
      }
    } catch (error) {
      if (error instanceof CancellationError) {
        throw error;
      }
      throw error;
    }
  }
  return results;
}

// src/features/word-management/ui/AddWordsModal.ts
var AddWordsModal = class extends import_obsidian8.Modal {
  constructor(app, plugin, selectedBookId) {
    super(app);
    this.isProcessing = false;
    this.cancellationTokenSource = null;
    this.plugin = plugin;
    this.wordService = new WordService();
    this.selectedBookId = selectedBookId || "default";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("add-words-modal");
    await this.plugin.databaseManager.loadAllBooks();
    const bookSelectSection = contentEl.createEl("div", { cls: "book-select-section" });
    const bookLabel = bookSelectSection.createEl("label", { text: "\uB2E8\uC5B4\uC7A5 \uC120\uD0DD", cls: "book-select-label" });
    const bookSelectContainer = bookSelectSection.createEl("div", { cls: "book-select-container" });
    this.bookSelect = bookSelectContainer.createEl("select", { cls: "book-select-dropdown" });
    const addBookButton = bookSelectContainer.createEl("button", {
      text: "\uB2E8\uC5B4\uC7A5 \uCD94\uAC00",
      cls: "add-book-button"
    });
    addBookButton.addEventListener("click", () => this.openAddBookModal());
    await this.updateBookSelect();
    this.bookSelect.addEventListener("change", (e) => {
      const selectedBookId = e.target.value;
      this.selectedBookId = selectedBookId;
      this.plugin.databaseManager.setCurrentBook(selectedBookId);
    });
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
    const titleEl = contentEl.createEl("h2", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "modal-title" });
    const descriptionEl = contentEl.createEl("p", {
      text: "\uCD94\uAC00\uD560 \uC601\uB2E8\uC5B4\uB4E4\uC744 \uC785\uB825\uD558\uC138\uC694. \uAC01 \uB2E8\uC5B4\uB294 \uC0C8 \uC904\uB85C \uAD6C\uBD84\uB429\uB2C8\uB2E4.",
      cls: "modal-description"
    });
    const inputSection = contentEl.createEl("div", { cls: "input-section" });
    const textarea = inputSection.createEl("textarea", {
      placeholder: "beautiful\nhappy\nlearn\nstudy\nwork\n...",
      cls: "words-textarea"
    });
    textarea.setAttribute("rows", "10");
    const exampleBtn = inputSection.createEl("button", {
      text: "\uC608\uC2DC \uB2E8\uC5B4\uB4E4 \uBD88\uB7EC\uC624\uAE30",
      cls: "example-button"
    });
    exampleBtn.addEventListener("click", () => {
      textarea.value = "beautiful\nhappy\nlearn\nstudy\nwork\nimportant\nsuccess\nknowledge\nexperience\nfreedom";
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const addButton = buttonSection.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button primary"
    });
    addButton.addEventListener("click", () => this.addWords(textarea.value, this.selectedBookId));
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      if (this.isProcessing) {
        this.cancelOperation();
      } else {
        this.close();
      }
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section display-none" });
    const progressText = progressSection.createEl("p", {
      text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911...",
      cls: "progress-text"
    });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section display-none" });
    textarea.addEventListener("keydown", (e) => {
      if (e.ctrlKey && e.key === "Enter") {
        this.addWords(textarea.value, this.selectedBookId);
      }
    });
    textarea.focus();
  }
  async addWords(inputText, bookId) {
    var _a;
    if (this.isProcessing)
      return;
    const words = this.parseWords(inputText);
    if (words.length === 0) {
      new import_obsidian8.Notice("\uCD94\uAC00\uD560 \uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    this.isProcessing = true;
    this.cancellationTokenSource = new CancellationTokenSource();
    this.showProgress(words.length);
    this.updateCancelButton(true);
    const results = {
      success: [],
      failed: [],
      alreadyExists: []
    };
    try {
      await processBatchWithCancellation(
        words,
        async (word, index) => {
          const existingWord = this.plugin.databaseManager.getWord(word);
          if (existingWord) {
            results.alreadyExists.push(word);
            return;
          }
          try {
            const wordData = await this.wordService.getWordData(word);
            const vocabularyCard = {
              ...wordData,
              reviewCount: 0,
              difficulty: "good",
              lastReviewed: null,
              addedDate: (/* @__PURE__ */ new Date()).toISOString(),
              bookId
            };
            await this.plugin.databaseManager.addWord(vocabularyCard);
            results.success.push(word);
          } catch (error) {
            results.failed.push(word);
            console.error(`\uB2E8\uC5B4 "${word}" \uCD94\uAC00 \uC2E4\uD328:`, error);
          }
        },
        {
          batchSize: getConfigValue(CONFIG_PATHS.BATCH_DEFAULT_SIZE),
          delay: getConfigValue(CONFIG_PATHS.BATCH_DELAY),
          cancellationToken: this.cancellationTokenSource.token,
          onProgress: (current, total) => {
            this.updateProgress(current, total, `\uCC98\uB9AC \uC911... (${current}/${total})`);
          }
        }
      );
    } catch (error) {
      if (error instanceof CancellationError) {
        new import_obsidian8.Notice("\uC791\uC5C5\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
      } else {
        console.error("\uBC30\uCE58 \uCC98\uB9AC \uC911 \uC624\uB958:", error);
        new import_obsidian8.Notice("\uB2E8\uC5B4 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
      }
    } finally {
      this.isProcessing = false;
      (_a = this.cancellationTokenSource) == null ? void 0 : _a.dispose();
      this.cancellationTokenSource = null;
      this.hideProgress();
      this.updateCancelButton(false);
      this.showResults(results);
    }
  }
  parseWords(inputText) {
    const sanitizedInput = sanitizeMarkdown(inputText);
    const rawWords = sanitizedInput.split("\n").map((word) => word.trim()).filter((word) => word.length > 0);
    const validation = validateBatch(rawWords, (word) => validateWord(word));
    if (validation.invalid.length > 0) {
      const invalidWords = validation.invalid.slice(0, 5).map((item) => item.item).join(", ");
      const moreCount = validation.invalid.length > 5 ? ` \uC678 ${validation.invalid.length - 5}\uAC1C` : "";
      new import_obsidian8.Notice(`\uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uB2E8\uC5B4\uAC00 \uC81C\uC678\uB418\uC5C8\uC2B5\uB2C8\uB2E4: ${invalidWords}${moreCount}`);
    }
    const validWords = validation.valid.map((word) => validateWord(word).sanitized).map((word) => word.toLowerCase()).filter((word, index, array) => array.indexOf(word) === index);
    return validWords;
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.removeClass("display-none");
    progressSection.addClass("display-block");
    progressText.textContent = `\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911... (0/${totalWords})`;
  }
  updateProgress(current, total, message) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    const progressFill = progressSection.querySelector(".progress-fill");
    const percentage = current / total * 100;
    progressText.textContent = `${message} (${current}/${total})`;
    progressFill.style.width = `${percentage}%`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    progressSection.removeClass("display-block");
    progressSection.addClass("display-none");
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.removeClass("display-none");
    resultSection.addClass("display-block");
    resultSection.empty();
    const totalProcessed = results.success.length + results.failed.length + results.alreadyExists.length;
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 5) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.alreadyExists.length > 0) {
      const existsEl = summaryEl.createEl("div", { cls: "result-item warning" });
      existsEl.createEl("span", {
        text: `\u26A0\uFE0F \uC774\uBBF8 \uC874\uC7AC: ${results.alreadyExists.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.alreadyExists.length <= 5) {
        existsEl.createEl("p", {
          text: results.alreadyExists.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 5) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", {
      text: "\uB2EB\uAE30",
      cls: "close-button"
    });
    closeButton.addEventListener("click", () => this.close());
    const addMoreButton = buttonSection.createEl("button", {
      text: "\uB354 \uCD94\uAC00\uD558\uAE30",
      cls: "add-more-button"
    });
    addMoreButton.addEventListener("click", () => {
      resultSection.removeClass("display-block");
      resultSection.addClass("display-none");
      const textarea = this.contentEl.querySelector(".words-textarea");
      textarea.value = "";
      textarea.focus();
    });
    if (results.success.length > 0) {
      new import_obsidian8.Notice(`${results.success.length}\uAC1C\uC758 \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
    }
  }
  cancelOperation() {
    if (this.cancellationTokenSource) {
      this.cancellationTokenSource.cancel();
      new import_obsidian8.Notice("\uC791\uC5C5 \uCDE8\uC18C \uC911...");
    }
  }
  updateCancelButton(isProcessing) {
    const cancelButton = this.contentEl.querySelector(".cancel-button");
    if (cancelButton) {
      cancelButton.textContent = isProcessing ? "\uC791\uC5C5 \uCDE8\uC18C" : "\uCDE8\uC18C";
      cancelButton.classList.toggle("danger", isProcessing);
    }
  }
  onClose() {
    var _a;
    if (this.isProcessing && this.cancellationTokenSource) {
      this.cancellationTokenSource.cancel();
    }
    this.isProcessing = false;
    (_a = this.cancellationTokenSource) == null ? void 0 : _a.dispose();
    this.cancellationTokenSource = null;
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  openAddBookModal() {
    new AddBookModal(this.app, this.plugin).open();
  }
  async handleBookCreated(event) {
    await this.updateBookSelect();
  }
  async updateBookSelect() {
    await this.plugin.databaseManager.loadAllBooks();
    const books = this.plugin.databaseManager.getAllBooks();
    this.bookSelect.empty();
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      if (book.id === this.selectedBookId) {
        option.selected = true;
      }
      this.bookSelect.appendChild(option);
    });
  }
};

// src/features/book-management/ui/VocabularyManagerModal.ts
var VocabularyManagerModal = class extends import_obsidian9.Modal {
  constructor(app, plugin) {
    var _a;
    super(app);
    this.currentView = "list";
    this.selectedWords = /* @__PURE__ */ new Set();
    this.selectedBookId = "";
    this.plugin = plugin;
    this.databaseManager = plugin.databaseManager;
    this.wordService = new WordService();
    this.llmService = plugin.llmService;
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
  }
  hasValidApiKey() {
    const provider = this.plugin.settings.llmProvider;
    switch (provider) {
      case "openai":
        return !!this.plugin.settings.openaiApiKey;
      case "anthropic":
        return !!this.plugin.settings.anthropicApiKey;
      case "google":
        return !!this.plugin.settings.googleApiKey;
      default:
        return false;
    }
  }
  async onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-manager-modal");
    contentEl.classList.add("wide-manager-modal");
    await this.databaseManager.loadAllBooks();
    this.selectedBookId = ((_a = this.databaseManager.getCurrentBook()) == null ? void 0 : _a.id) || "default";
    this.createBookSelectorHeader();
    this.createNavigation();
    this.showCurrentView();
    document.addEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
  async handleBookCreated(event) {
    const newBook = event.detail;
    this.selectedBookId = newBook.id;
    await this.refreshBookSelector();
  }
  createBookSelectorHeader() {
    const headerEl = this.contentEl.createEl("div", { cls: "manager-header" });
    const books = this.databaseManager.getAllBooks();
    const bookSelect = headerEl.createEl("select", { cls: "book-select-dropdown" });
    books.forEach((book) => {
      const option = document.createElement("option");
      option.value = book.id;
      option.text = book.name;
      if (book.id === this.selectedBookId)
        option.selected = true;
      bookSelect.appendChild(option);
    });
    bookSelect.addEventListener("change", async (e) => {
      this.selectedBookId = e.target.value;
      await this.databaseManager.setCurrentBook(this.selectedBookId);
      this.showCurrentView();
    });
    const addBookBtn = headerEl.createEl("button", { text: "\uC0C8 \uB2E8\uC5B4\uC7A5 \uCD94\uAC00", cls: "book-manage-button" });
    addBookBtn.addEventListener("click", () => {
      const addBookModal = new AddBookModal(this.app, this.plugin);
      addBookModal.onClose = () => {
        this.refreshBookSelector();
      };
      addBookModal.open();
    });
    const delBookBtn = headerEl.createEl("button", { text: "\uD604\uC7AC \uB2E8\uC5B4\uC7A5 \uC0AD\uC81C", cls: "book-delete-button" });
    const isDefault = this.selectedBookId === "default";
    if (isDefault) {
      delBookBtn.setAttr("disabled", "true");
      delBookBtn.addClass("disabled");
    }
    delBookBtn.addEventListener("click", async () => {
      if (isDefault)
        return;
      const currentBook = this.databaseManager.getBook(this.selectedBookId);
      if (!currentBook) {
        new import_obsidian9.Notice("\uB2E8\uC5B4\uC7A5 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      const wordsInBook = this.databaseManager.getWordsByBook(this.selectedBookId);
      const wordCount = wordsInBook.length;
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uD655\uC778",
        `\uC815\uB9D0\uB85C "${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\u2022 \uB2E8\uC5B4\uC7A5 \uC774\uB984: ${currentBook.name}
\u2022 \uD3EC\uD568\uB41C \uB2E8\uC5B4 \uC218: ${wordCount}\uAC1C
\u2022 \uC0DD\uC131\uC77C: ${new Date(currentBook.createdAt).toLocaleDateString("ko-KR")}

\u26A0\uFE0F \uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC73C\uBA70, \uB2E8\uC5B4\uC7A5\uACFC \uBAA8\uB4E0 \uB2E8\uC5B4\uAC00 \uC601\uAD6C\uC801\uC73C\uB85C \uC0AD\uC81C\uB429\uB2C8\uB2E4.`,
        async () => {
          try {
            await this.databaseManager.deleteBook(this.selectedBookId);
            this.selectedBookId = "default";
            await this.databaseManager.setCurrentBook("default");
            new import_obsidian9.Notice(`"${currentBook.name}" \uB2E8\uC5B4\uC7A5\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`);
            this.onOpen();
          } catch (e) {
            new import_obsidian9.Notice("\uB2E8\uC5B4\uC7A5 \uC0AD\uC81C \uC2E4\uD328: " + e.message);
          }
        }
      );
      confirmModal.open();
    });
  }
  createNavigation() {
    const navEl = this.contentEl.createEl("div", { cls: "manager-navigation" });
    const listBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uBAA9\uB85D", cls: "nav-button" });
    listBtn.addEventListener("click", () => {
      this.currentView = "list";
      this.showCurrentView();
    });
    const statsBtn = navEl.createEl("button", { text: "\uD1B5\uACC4", cls: "nav-button" });
    statsBtn.addEventListener("click", () => {
      this.currentView = "statistics";
      this.showCurrentView();
    });
    const addBtn = navEl.createEl("button", { text: "\uB2E8\uC5B4 \uCD94\uAC00", cls: "nav-button" });
    addBtn.addEventListener("click", () => {
      this.close();
      new AddWordsModal(this.app, this.plugin, this.selectedBookId).open();
    });
    const startLearningButton = navEl.createEl("button", {
      text: "\uC804\uCCB4 \uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      cls: "nav-button"
    });
    startLearningButton.addEventListener("click", () => {
      this.close();
      new VocabularyModal(this.app, this.plugin).open();
    });
  }
  showCurrentView() {
    const contentEl = this.contentEl.querySelector(".manager-content") || this.contentEl.createEl("div", { cls: "manager-content" });
    contentEl.empty();
    switch (this.currentView) {
      case "list":
        this.showWordList(contentEl);
        break;
      case "statistics":
        this.showStatistics(contentEl);
        break;
      case "add":
        this.showAddWord(contentEl);
        break;
    }
  }
  showWordList(container2) {
    const words = this.databaseManager.getAllWords();
    if (words.length === 0) {
      container2.createEl("p", {
        text: "\uB2E8\uC5B4\uC7A5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4. \uB2E8\uC5B4\uB97C \uCD94\uAC00\uD574\uBCF4\uC138\uC694!",
        cls: "empty-message"
      });
      return;
    }
    const searchEl = container2.createEl("div", { cls: "search-section" });
    const searchInput = searchEl.createEl("input", {
      type: "text",
      placeholder: "\uB2E8\uC5B4 \uAC80\uC0C9...",
      cls: "search-input"
    });
    const selectionControls = searchEl.createEl("div", { cls: "selection-controls" });
    const allSelected = this.selectedWords.size === words.length && words.length > 0;
    const selectAllBtn = selectionControls.createEl("button", {
      text: allSelected ? "\uC804\uCCB4 \uD574\uC81C" : "\uC804\uCCB4 \uC120\uD0DD",
      cls: "selection-button"
    });
    selectAllBtn.addEventListener("click", () => {
      if (this.selectedWords.size === words.length) {
        this.selectedWords.clear();
      } else {
        this.selectedWords.clear();
        words.forEach((word) => this.selectedWords.add(word.word));
      }
      this.showCurrentView();
    });
    const fetchSelectedButton = selectionControls.createEl("button", {
      text: "\uC120\uD0DD \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-selected-button"
    });
    fetchSelectedButton.addEventListener("click", () => {
      if (this.selectedWords.size === 0) {
        new import_obsidian9.Notice("\uC120\uD0DD\uB41C \uB2E8\uC5B4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      this.showFetchSelectedMeaningsModal();
    });
    const wordListEl = container2.createEl("div", { cls: "word-list" });
    const renderWords = (filteredWords) => {
      wordListEl.empty();
      filteredWords.forEach((word) => {
        this.createWordItem(wordListEl, word);
      });
    };
    searchInput.addEventListener("input", (e) => {
      const query = e.target.value;
      const filteredWords = query ? this.databaseManager.searchWords(query) : words;
      renderWords(filteredWords);
    });
    renderWords(words);
  }
  createWordItem(container2, word) {
    const wordEl = container2.createEl("div", { cls: "word-item" });
    const checkbox = wordEl.createEl("input", {
      type: "checkbox",
      cls: "word-checkbox"
    });
    checkbox.checked = this.selectedWords.has(word.word);
    checkbox.addEventListener("change", (e) => {
      const isChecked = e.target.checked;
      if (isChecked) {
        this.selectedWords.add(word.word);
      } else {
        this.selectedWords.delete(word.word);
      }
    });
    const wordHeader = wordEl.createEl("div", { cls: "word-header" });
    const wordTitleEl = wordHeader.createEl("h3", { cls: "word-title" });
    if (word.pronunciation && word.pronunciation.trim()) {
      wordTitleEl.textContent = word.word;
      wordTitleEl.appendText(" ");
      wordTitleEl.createEl("span", {
        text: `[${word.pronunciation}]`,
        cls: "pronunciation"
      });
    } else {
      wordTitleEl.textContent = word.word;
    }
    const difficultyBadge = wordHeader.createEl("span", {
      text: this.getDifficultyText(word.difficulty),
      cls: `difficulty-badge ${word.difficulty}`
    });
    const wordContent = wordEl.createEl("div", { cls: "word-content" });
    wordContent.createEl("p", {
      text: `\uB73B: ${word.meanings.join(", ")}`,
      cls: "word-meanings"
    });
    wordContent.createEl("p", {
      text: `\uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}\uD68C`,
      cls: "review-count"
    });
    if (word.lastReviewed) {
      wordContent.createEl("p", {
        text: `\uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${formatDate(word.lastReviewed)}`,
        cls: "last-reviewed"
      });
    }
    const wordActions = wordEl.createEl("div", { cls: "word-actions" });
    if (this.plugin.settings.enableAdvancedFeatures) {
      const fetchButton = wordActions.createEl("button", {
        text: "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
        cls: "action-button fetch-single-button"
      });
      fetchButton.addEventListener("click", () => {
        this.fetchSingleWordMeaning(word);
      });
    }
    const deleteBtn = wordActions.createEl("button", {
      text: "\uC0AD\uC81C",
      cls: "action-button delete-button"
    });
    deleteBtn.addEventListener("click", async () => {
      const confirmModal = new ConfirmModal2(
        this.app,
        "\uB2E8\uC5B4 \uC0AD\uC81C",
        `"${word.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,
        async () => {
          await this.databaseManager.removeWord(word.word);
          this.showCurrentView();
        }
      );
      confirmModal.open();
    });
  }
  showStatistics(container2) {
    const stats = this.databaseManager.getStatistics();
    const statsGrid = container2.createEl("div", { cls: "stats-grid" });
    const basicStats = statsGrid.createEl("div", { cls: "stats-section" });
    basicStats.createEl("h3", { text: "\uAE30\uBCF8 \uD1B5\uACC4", cls: "stats-title" });
    this.createStatItem(basicStats, "\uCD1D \uB2E8\uC5B4 \uC218", stats.totalWords.toString());
    this.createStatItem(basicStats, "\uCD1D \uBCF5\uC2B5 \uD69F\uC218", stats.totalReviews.toString());
    this.createStatItem(basicStats, "\uC5F0\uC18D \uD559\uC2B5\uC77C", `${stats.streakDays}\uC77C`);
    this.createStatItem(basicStats, "\uD3C9\uADE0 \uB09C\uC774\uB3C4", stats.averageDifficulty.toFixed(1));
    const difficultyStats = statsGrid.createEl("div", { cls: "stats-section" });
    difficultyStats.createEl("h3", { text: "\uB09C\uC774\uB3C4\uBCC4 \uBD84\uD3EC", cls: "stats-title" });
    this.createStatItem(difficultyStats, "\uC26C\uC6C0", stats.wordsByDifficulty.easy.toString());
    this.createStatItem(difficultyStats, "\uC88B\uC74C", stats.wordsByDifficulty.good.toString());
    this.createStatItem(difficultyStats, "\uC5B4\uB824\uC6C0", stats.wordsByDifficulty.hard.toString());
    const activityStats = statsGrid.createEl("div", { cls: "stats-section" });
    activityStats.createEl("h3", { text: "\uCD5C\uADFC 7\uC77C \uD65C\uB3D9", cls: "stats-title" });
    stats.recentActivity.forEach((activity) => {
      const date = new Date(activity.date).toLocaleDateString("ko-KR", {
        month: "short",
        day: "numeric"
      });
      this.createStatItem(
        activityStats,
        date,
        `\uD559\uC2B5: ${activity.wordsStudied}, \uBCF5\uC2B5: ${activity.reviewsCompleted}`
      );
    });
  }
  createStatItem(container2, label, value) {
    const statEl = container2.createEl("div", { cls: "stat-item" });
    statEl.createEl("span", { text: label, cls: "stat-label" });
    statEl.createEl("span", { text: value, cls: "stat-value" });
  }
  showAddWord(container2) {
    const addSection = container2.createEl("div", { cls: "add-word-section" });
    addSection.createEl("h3", { text: "\uC0C8 \uB2E8\uC5B4 \uCD94\uAC00", cls: "section-title" });
    const inputEl = addSection.createEl("div", { cls: "word-input-group" });
    const wordInput = inputEl.createEl("input", {
      type: "text",
      placeholder: "\uC601\uB2E8\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694 (\uC608: beautiful)",
      cls: "word-input"
    });
    const addButton = inputEl.createEl("button", {
      text: "\uB2E8\uC5B4 \uCD94\uAC00",
      cls: "add-button"
    });
    const addWord = async () => {
      const word = wordInput.value.trim();
      if (!word) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",
          cls: "error-message"
        });
        return;
      }
      try {
        const wordData = await this.wordService.getWordData(word);
        const vocabularyCard = {
          ...wordData,
          reviewCount: 0,
          difficulty: "good",
          lastReviewed: null,
          addedDate: (/* @__PURE__ */ new Date()).toISOString(),
          bookId: this.selectedBookId
        };
        await this.databaseManager.addWord(vocabularyCard);
        wordInput.value = "";
        addSection.createEl("p", {
          text: `"${word}" \uB2E8\uC5B4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`,
          cls: "success-message"
        });
        setTimeout(() => {
          const successMsg = addSection.querySelector(".success-message");
          if (successMsg)
            successMsg.remove();
        }, 3e3);
      } catch (error) {
        addSection.createEl("p", {
          text: "\uB2E8\uC5B4\uB97C \uCD94\uAC00\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
          cls: "error-message"
        });
      }
    };
    addButton.addEventListener("click", addWord);
    wordInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        addWord();
      }
    });
  }
  getDifficultyText(difficulty) {
    switch (difficulty) {
      case "easy":
        return "\uC26C\uC6C0";
      case "good":
        return "\uC88B\uC74C";
      case "hard":
        return "\uC5B4\uB824\uC6C0";
      default:
        return "\uC88B\uC74C";
    }
  }
  startReview(words) {
    const reviewModal = new VocabularyReviewModal(this.app, this.plugin, words);
    reviewModal.open();
  }
  showFetchSelectedMeaningsModal() {
    const selectedWordList = Array.from(this.selectedWords);
    new FetchSelectedMeaningsModal(this.app, this.plugin, selectedWordList).open();
  }
  async fetchSingleWordMeaning(word) {
    if (!this.hasValidApiKey()) {
      new import_obsidian9.Notice("LLM API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
      return;
    }
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30",
      `"${word.word}" \uB2E8\uC5B4\uC758 \uB73B\uC744 \uC0C8\uB85C \uAC00\uC838\uC624\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? \uAE30\uC874 \uC815\uBCF4\uAC00\uC5B4\uC50C\uC6CC\uC9D1\uB2C8\uB2E4.`,
      async () => {
        try {
          new import_obsidian9.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911...`);
          const llmResponse = await this.plugin.llmService.getWordDetails(word.word);
          if (llmResponse.success) {
            const wordDetail = llmResponse.data;
            const wordData = this.plugin.llmService.convertToWordData(wordDetail);
            const updatedWord = {
              ...word,
              meanings: wordData.meanings,
              examples: wordData.examples,
              similarWords: wordData.similarWords
            };
            await this.plugin.databaseManager.updateWordData(word.word, updatedWord);
            new import_obsidian9.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
            this.showCurrentView();
          } else {
            new import_obsidian9.Notice(`"${word.word}" \uB2E8\uC5B4 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328: ${llmResponse.error}`);
          }
        } catch (error) {
          console.error(`\uB2E8\uC5B4 "${word.word}" \uCC98\uB9AC \uC2E4\uD328:`, error);
          new import_obsidian9.Notice(`"${word.word}" \uB2E8\uC5B4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.`);
        }
      }
    );
    confirmModal.open();
  }
  async refreshBookSelector() {
    await this.databaseManager.loadAllBooks();
    const headerEl = this.contentEl.querySelector(".manager-header");
    if (headerEl) {
      const bookSelect = headerEl.querySelector(".book-select-dropdown");
      if (bookSelect) {
        const currentValue = bookSelect.value;
        const books = this.databaseManager.getAllBooks();
        bookSelect.empty();
        books.forEach((book) => {
          const option = document.createElement("option");
          option.value = book.id;
          option.text = book.name;
          if (book.id === currentValue || book.id === this.selectedBookId) {
            option.selected = true;
            this.selectedBookId = book.id;
          }
          bookSelect.appendChild(option);
        });
      }
    }
    this.showCurrentView();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("bookCreated", this.handleBookCreated.bind(this));
  }
};
var VocabularyReviewModal = class extends import_obsidian9.Modal {
  constructor(app, plugin, words) {
    super(app);
    this.currentIndex = 0;
    this.showAnswer = false;
    this.plugin = plugin;
    this.words = words;
  }
  onOpen() {
    if (this.words.length === 0) {
      this.close();
      return;
    }
    this.showCurrentWord();
  }
  showCurrentWord() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("vocabulary-learning-modal");
    contentEl.style.setProperty("--review-modal-height", `${this.plugin.settings.reviewModalHeight}vh`);
    const currentWord = this.words[this.currentIndex];
    const progressEl = contentEl.createEl("div", { cls: "review-progress" });
    progressEl.createEl("span", {
      text: `${this.currentIndex + 1} / ${this.words.length}`,
      cls: "progress-text"
    });
    const cardEl = contentEl.createEl("div", { cls: "review-card" });
    const deleteButton = cardEl.createEl("button", {
      text: "\uCE74\uB4DC \uC0AD\uC81C",
      cls: "card-delete-button"
    });
    deleteButton.addEventListener("click", () => this.handleDeleteCard());
    const wordEl = cardEl.createEl("h1", { cls: "review-word" });
    if (currentWord.pronunciation && currentWord.pronunciation.trim()) {
      wordEl.textContent = currentWord.word;
      wordEl.appendText(" ");
      wordEl.createEl("span", {
        text: `[${currentWord.pronunciation}]`,
        cls: "pronunciation"
      });
    } else {
      wordEl.textContent = currentWord.word;
    }
    if (!this.showAnswer) {
      if (currentWord.similarWords.length > 0) {
        const similarEl = cardEl.createEl("div", { cls: "similar-words" });
        similarEl.createEl("h3", { text: "\uC720\uC0AC\uD55C \uB2E8\uC5B4\uB4E4:" });
        const similarList = similarEl.createEl("ul");
        currentWord.similarWords.forEach((word) => {
          similarList.createEl("li", { text: word });
        });
      }
      if (currentWord.examples.length > 0) {
        const examplesEl = cardEl.createEl("div", { cls: "examples" });
        examplesEl.createEl("h3", { text: "\uC608\uBB38\uB4E4:" });
        currentWord.examples.forEach((example) => {
          examplesEl.createEl("p", { text: example.english, cls: "example" });
        });
      }
      const checkBtn = cardEl.createEl("button", {
        text: "\uC815\uB2F5 \uD655\uC778\uD558\uAE30",
        cls: "check-answer-button"
      });
      checkBtn.addEventListener("click", () => {
        this.showAnswer = true;
        this.showCurrentWord();
      });
    } else {
      const answerEl = cardEl.createEl("div", { cls: "answer-section" });
      answerEl.createEl("h3", { text: "\uB73B:" });
      const meaningsList = answerEl.createEl("ul");
      currentWord.meanings.forEach((meaning) => {
        meaningsList.createEl("li", { text: meaning });
      });
      if (currentWord.examples.length > 0) {
        answerEl.createEl("h3", { text: "\uC608\uBB38 \uBC88\uC5ED:" });
        currentWord.examples.forEach((example) => {
          answerEl.createEl("p", { text: example.korean, cls: "translation" });
        });
      }
      this.createReviewButtons(cardEl);
    }
  }
  createReviewButtons(container2) {
    const reviewSection = container2.createEl("div", { cls: "review-buttons" });
    const hardBtn = reviewSection.createEl("button", { text: "\uC5B4\uB824\uC6C0", cls: "review-btn hard" });
    const goodBtn = reviewSection.createEl("button", { text: "\uC88B\uC74C", cls: "review-btn good" });
    const easyBtn = reviewSection.createEl("button", { text: "\uC26C\uC6C0", cls: "review-btn easy" });
    hardBtn.addEventListener("click", () => this.handleReview("hard"));
    goodBtn.addEventListener("click", () => this.handleReview("good"));
    easyBtn.addEventListener("click", () => this.handleReview("easy"));
  }
  async handleReview(difficulty) {
    const currentWord = this.words[this.currentIndex];
    await this.plugin.databaseManager.updateWord(currentWord.word, difficulty);
    this.currentIndex++;
    this.showAnswer = false;
    if (this.currentIndex >= this.words.length) {
      this.showCompletion();
    } else {
      this.showCurrentWord();
    }
  }
  async handleDeleteCard() {
    const currentWord = this.words[this.currentIndex];
    const confirmModal = new ConfirmModal2(
      this.app,
      "\uB2E8\uC5B4 \uC0AD\uC81C",
      `"${currentWord.word}" \uB2E8\uC5B4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,
      async () => {
        try {
          await this.plugin.databaseManager.removeWord(currentWord.word);
          this.words.splice(this.currentIndex, 1);
          if (this.words.length === 0) {
            this.showCompletion();
            return;
          }
          if (this.currentIndex >= this.words.length) {
            this.currentIndex = this.words.length - 1;
          }
          this.showAnswer = false;
          this.showCurrentWord();
        } catch (error) {
          console.error("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
          new import_obsidian9.Notice("\uB2E8\uC5B4 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");
        }
      }
    );
    confirmModal.open();
  }
  showCompletion() {
    const { contentEl } = this;
    contentEl.empty();
    const completionEl = contentEl.createEl("div", { cls: "completion" });
    completionEl.createEl("h2", { text: "\uBCF5\uC2B5 \uC644\uB8CC!" });
    completionEl.createEl("p", { text: "\uBAA8\uB4E0 \uB2E8\uC5B4\uB97C \uBCF5\uC2B5\uD588\uC2B5\uB2C8\uB2E4." });
    const closeBtn = completionEl.createEl("button", { text: "\uB2EB\uAE30", cls: "close-btn" });
    closeBtn.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FetchSelectedMeaningsModal = class extends import_obsidian9.Modal {
  constructor(app, plugin, selectedWords) {
    super(app);
    this.isProcessing = false;
    this.plugin = plugin;
    this.selectedWords = selectedWords;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("fetch-selected-meanings-modal");
    contentEl.createEl("h2", {
      text: `\uC120\uD0DD\uB41C ${this.selectedWords.length}\uAC1C \uB2E8\uC5B4 \uB73B \uAC00\uC838\uC624\uAE30`,
      cls: "modal-title"
    });
    contentEl.createEl("p", {
      text: `\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4\uC758 \uC0C1\uC138 \uC815\uBCF4\uB97C LLM API\uB97C \uD1B5\uD574 \uAC00\uC838\uC635\uB2C8\uB2E4.`,
      cls: "modal-description"
    });
    const wordListEl = contentEl.createEl("div", { cls: "selected-words-list" });
    wordListEl.createEl("h3", { text: "\uC120\uD0DD\uB41C \uB2E8\uC5B4\uB4E4:" });
    const wordsContainer = wordListEl.createEl("div", { cls: "words-container" });
    this.selectedWords.forEach((word) => {
      wordsContainer.createEl("span", {
        text: word,
        cls: "selected-word-tag"
      });
    });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const fetchButton = buttonSection.createEl("button", {
      text: "\uB73B \uAC00\uC838\uC624\uAE30",
      cls: "fetch-button"
    });
    fetchButton.addEventListener("click", () => {
      this.fetchSelectedMeanings();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => {
      this.close();
    });
    const progressSection = contentEl.createEl("div", { cls: "progress-section display-none" });
    const progressText = progressSection.createEl("div", { cls: "progress-text" });
    const progressBar = progressSection.createEl("div", { cls: "progress-bar" });
    const progressFill = progressBar.createEl("div", { cls: "progress-fill" });
    const resultSection = contentEl.createEl("div", { cls: "result-section display-none" });
  }
  async fetchSelectedMeanings() {
    if (this.isProcessing)
      return;
    this.isProcessing = true;
    this.showProgress(this.selectedWords.length);
    try {
      const result = await this.plugin.llmService.getMultipleWordDetails(this.selectedWords);
      if (result.success && Array.isArray(result.data)) {
        const successWords = [];
        const failedWords = [];
        for (const wordData of result.data) {
          try {
            if (wordData.word && wordData.meanings && wordData.meanings.length > 0) {
              const existingWord = this.plugin.databaseManager.getWord(wordData.word);
              if (existingWord) {
                const updatedWord = {
                  ...existingWord,
                  pronunciation: wordData.pronunciation || "",
                  meanings: wordData.meanings,
                  examples: wordData.examples || [],
                  similarWords: wordData.similarWords || []
                };
                await this.plugin.databaseManager.updateWordData(wordData.word, updatedWord);
                successWords.push(wordData.word);
              }
            } else {
              failedWords.push(wordData.word);
            }
          } catch (error) {
            console.error(`\uB2E8\uC5B4 "${wordData.word}" \uC5C5\uB370\uC774\uD2B8 \uC2E4\uD328:`, error);
            failedWords.push(wordData.word);
          }
        }
        this.hideProgress();
        this.showResults({ success: successWords, failed: failedWords });
        if (successWords.length > 0) {
          new import_obsidian9.Notice(`${successWords.length}\uAC1C\uC758 \uB2E8\uC5B4 \uC815\uBCF4\uB97C \uC131\uACF5\uC801\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD588\uC2B5\uB2C8\uB2E4!`);
        }
      } else {
        this.hideProgress();
        new import_obsidian9.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + (result.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"));
      }
    } catch (error) {
      this.hideProgress();
      new import_obsidian9.Notice("\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: " + error.message);
    } finally {
      this.isProcessing = false;
    }
  }
  showProgress(totalWords) {
    const progressSection = this.contentEl.querySelector(".progress-section");
    const progressText = progressSection.querySelector(".progress-text");
    progressSection.removeClass("display-none");
    progressSection.addClass("display-block");
    progressText.textContent = `\uB2E8\uC5B4 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294 \uC911... (0/${totalWords})`;
  }
  hideProgress() {
    const progressSection = this.contentEl.querySelector(".progress-section");
    if (progressSection) {
      progressSection.removeClass("display-block");
      progressSection.addClass("display-none");
    }
  }
  showResults(results) {
    const resultSection = this.contentEl.querySelector(".result-section");
    resultSection.removeClass("display-none");
    resultSection.addClass("display-block");
    resultSection.empty();
    const summaryEl = resultSection.createEl("div", { cls: "results-summary" });
    if (results.success.length > 0) {
      const successEl = summaryEl.createEl("div", { cls: "result-item success" });
      successEl.createEl("span", {
        text: `\u2705 \uC131\uACF5: ${results.success.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.success.length <= 10) {
        successEl.createEl("p", {
          text: results.success.join(", "),
          cls: "result-words"
        });
      }
    }
    if (results.failed.length > 0) {
      const failedEl = summaryEl.createEl("div", { cls: "result-item error" });
      failedEl.createEl("span", {
        text: `\u274C \uC2E4\uD328: ${results.failed.length}\uAC1C`,
        cls: "result-count"
      });
      if (results.failed.length <= 10) {
        failedEl.createEl("p", {
          text: results.failed.join(", "),
          cls: "result-words"
        });
      }
    }
    const buttonSection = resultSection.createEl("div", { cls: "result-buttons" });
    const closeButton = buttonSection.createEl("button", { text: "\uB2EB\uAE30", cls: "close-button" });
    closeButton.addEventListener("click", () => this.close());
  }
  onClose() {
    this.isProcessing = false;
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal2 = class extends import_obsidian9.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("confirm-modal");
    contentEl.createEl("h2", { text: this.title, cls: "modal-title" });
    contentEl.createEl("p", { text: this.message, cls: "modal-message" });
    const buttonSection = contentEl.createEl("div", { cls: "button-section" });
    const confirmButton = buttonSection.createEl("button", {
      text: "\uD655\uC778",
      cls: "confirm-button primary"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
    const cancelButton = buttonSection.createEl("button", {
      text: "\uCDE8\uC18C",
      cls: "cancel-button"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/shared/container/DIContainer.ts
var DIContainer = class {
  constructor() {
    this.services = /* @__PURE__ */ new Map();
    this.instances = /* @__PURE__ */ new Map();
  }
  register(name, implementation, options = {}) {
    var _a, _b;
    this.services.set(name, {
      implementation,
      singleton: (_a = options.singleton) != null ? _a : true,
      dependencies: (_b = options.dependencies) != null ? _b : []
    });
  }
  resolve(name) {
    const service = this.services.get(name);
    if (!service) {
      throw new Error(`Service '${name}' not registered`);
    }
    if (service.singleton && this.instances.has(name)) {
      return this.instances.get(name);
    }
    const dependencies = service.dependencies.map((dep) => this.resolve(dep));
    let instance;
    if (this.isConstructor(service.implementation)) {
      instance = new service.implementation(...dependencies);
    } else {
      instance = service.implementation(...dependencies);
    }
    if (service.singleton) {
      this.instances.set(name, instance);
    }
    return instance;
  }
  registerInstance(name, instance) {
    this.instances.set(name, instance);
    this.services.set(name, {
      implementation: () => instance,
      singleton: true,
      dependencies: []
    });
  }
  has(name) {
    return this.services.has(name);
  }
  clear() {
    this.services.clear();
    this.instances.clear();
  }
  isConstructor(implementation) {
    return implementation.prototype && implementation.prototype.constructor === implementation;
  }
};
var container = new DIContainer();

// src/core/entities/Vocabulary.ts
var VocabularyCard = class _VocabularyCard {
  constructor(word, pronunciation, meanings, similarWords, examples, reviewCount, difficulty, lastReviewed, addedDate, bookId) {
    this.word = word;
    this.pronunciation = pronunciation;
    this.meanings = meanings;
    this.similarWords = similarWords;
    this.examples = examples;
    this.reviewCount = reviewCount;
    this.difficulty = difficulty;
    this.lastReviewed = lastReviewed;
    this.addedDate = addedDate;
    this.bookId = bookId;
  }
  // 팩토리 메서드: WordData로부터 VocabularyCard 생성
  static fromWordData(wordData, bookId) {
    return new _VocabularyCard(
      wordData.word,
      wordData.pronunciation,
      wordData.meanings,
      wordData.similarWords,
      wordData.examples,
      0,
      // 초기 복습 횟수
      "good",
      // 초기 난이도
      null,
      // 초기 복습 날짜
      (/* @__PURE__ */ new Date()).toISOString(),
      // 추가 날짜
      bookId
    );
  }
  // 비즈니스 로직: 복습 수행
  review(newDifficulty) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount + 1,
      newDifficulty,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어 정보 업데이트
  updateWordData(wordData) {
    var _a, _b, _c, _d;
    return new _VocabularyCard(
      this.word,
      (_a = wordData.pronunciation) != null ? _a : this.pronunciation,
      (_b = wordData.meanings) != null ? _b : this.meanings,
      (_c = wordData.similarWords) != null ? _c : this.similarWords,
      (_d = wordData.examples) != null ? _d : this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      this.bookId
    );
  }
  // 비즈니스 로직: 단어장 이동
  moveToBook(newBookId) {
    return new _VocabularyCard(
      this.word,
      this.pronunciation,
      this.meanings,
      this.similarWords,
      this.examples,
      this.reviewCount,
      this.difficulty,
      this.lastReviewed,
      this.addedDate,
      newBookId
    );
  }
  // 비즈니스 로직: 복습이 필요한지 확인
  needsReview(reviewInterval = 1) {
    if (!this.lastReviewed)
      return true;
    const lastReviewDate = new Date(this.lastReviewed);
    const now = /* @__PURE__ */ new Date();
    const daysDiff = Math.floor((now.getTime() - lastReviewDate.getTime()) / (1e3 * 60 * 60 * 24));
    const difficultyMultiplier = {
      "hard": 0.5,
      "good": 1,
      "easy": 2
    };
    const adjustedInterval = reviewInterval * difficultyMultiplier[this.difficulty];
    return daysDiff >= adjustedInterval;
  }
  // 비즈니스 로직: 학습 진행도 계산 (0-100)
  getProgressPercentage() {
    const maxReviews = 10;
    const progress = Math.min(this.reviewCount / maxReviews, 1) * 100;
    const difficultyBonus = {
      "easy": 20,
      "good": 10,
      "hard": 0
    };
    return Math.min(progress + difficultyBonus[this.difficulty], 100);
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      word: this.word,
      pronunciation: this.pronunciation,
      meanings: this.meanings,
      similarWords: this.similarWords,
      examples: this.examples,
      reviewCount: this.reviewCount,
      difficulty: this.difficulty,
      lastReviewed: this.lastReviewed,
      addedDate: this.addedDate,
      bookId: this.bookId
    };
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.word || this.word.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uAC00 \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
    }
    if (this.meanings.length === 0) {
      errors.push("\uB2E8\uC5B4\uC758 \uB73B\uC774 \uD558\uB098 \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (!this.bookId || this.bookId.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 ID\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  static create(data) {
    var _a;
    return new _VocabularyCard(
      data.word,
      data.pronunciation || "",
      [data.meaning],
      // meanings array
      [],
      // similarWords
      ((_a = data.examples) == null ? void 0 : _a.map((ex) => ({ english: ex, korean: "" }))) || [],
      // examples with Example type
      0,
      // reviewCount
      "good",
      // difficulty
      null,
      // lastReviewed
      (/* @__PURE__ */ new Date()).toISOString(),
      // addedDate
      data.bookId || "default"
    );
  }
};

// src/core/use-cases/AddWordUseCase.ts
var AddWordUseCase = class {
  constructor(vocabularyRepository, bookRepository, wordService) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
    this.wordService = wordService;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingWord = await this.vocabularyRepository.findByWord(word);
      if (existingWord) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC785\uB2C8\uB2E4."
        };
      }
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = (currentBook == null ? void 0 : currentBook.id) || "default";
      }
      const book = await this.bookRepository.findById(bookId);
      if (!book) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const wordData = await this.wordService.getWordData(word);
      const vocabularyCard = VocabularyCard.create({
        word: wordData.word,
        meaning: wordData.meaning,
        pronunciation: wordData.pronunciation || "",
        examples: wordData.examples || [],
        bookId
      });
      const validationErrors = vocabularyCard.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.vocabularyRepository.add(vocabularyCard);
      const event = {
        type: "WORD_ADDED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: vocabularyCard.word,
          bookId: vocabularyCard.bookId
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: vocabularyCard
      };
    } catch (error) {
      console.error("AddWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordAdded", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/entities/Book.ts
var Book = class _Book {
  constructor(id, name, description, createdAt, updatedAt, wordCount, isDefault) {
    this.id = id;
    this.name = name;
    this.description = description;
    this.createdAt = createdAt;
    this.updatedAt = updatedAt;
    this.wordCount = wordCount;
    this.isDefault = isDefault;
  }
  // 팩토리 메서드: 새 단어장 생성
  static create(name, description = "", isDefault = false) {
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const id = isDefault ? "default" : _Book.generateId();
    return new _Book(
      id,
      name,
      description,
      now,
      now,
      0,
      isDefault
    );
  }
  // 팩토리 메서드: 기본 단어장 생성
  static createDefault() {
    return _Book.create("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5", "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.", true);
  }
  // 비즈니스 로직: 단어장 정보 업데이트
  updateInfo(name, description) {
    return new _Book(
      this.id,
      name != null ? name : this.name,
      description != null ? description : this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 증가
  incrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      this.wordCount + 1,
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 감소
  decrementWordCount() {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, this.wordCount - 1),
      this.isDefault
    );
  }
  // 비즈니스 로직: 단어 수 재설정
  updateWordCount(count) {
    return new _Book(
      this.id,
      this.name,
      this.description,
      this.createdAt,
      (/* @__PURE__ */ new Date()).toISOString(),
      Math.max(0, count),
      this.isDefault
    );
  }
  // 비즈니스 로직: 삭제 가능 여부 확인
  canBeDeleted() {
    return !this.isDefault;
  }
  // 비즈니스 로직: 단어장이 비어있는지 확인
  isEmpty() {
    return this.wordCount === 0;
  }
  // 검증 로직
  validate() {
    const errors = [];
    if (!this.name || this.name.trim().length === 0) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.");
    }
    if (this.name.trim().length > 100) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC740 100\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.description.length > 500) {
      errors.push("\uB2E8\uC5B4\uC7A5 \uC124\uBA85\uC740 500\uC790\uB97C \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    if (this.wordCount < 0) {
      errors.push("\uB2E8\uC5B4 \uC218\uB294 0 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.");
    }
    return errors;
  }
  // 데이터 직렬화를 위한 메서드
  toPlainObject() {
    return {
      id: this.id,
      name: this.name,
      description: this.description,
      createdAt: this.createdAt,
      updatedAt: this.updatedAt,
      wordCount: this.wordCount,
      isDefault: this.isDefault
    };
  }
  // 비즈니스 로직: 생성일로부터 경과 일수 계산
  getDaysFromCreation() {
    const createdDate = new Date(this.createdAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - createdDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // 비즈니스 로직: 마지막 업데이트로부터 경과 일수 계산
  getDaysFromLastUpdate() {
    const updatedDate = new Date(this.updatedAt);
    const now = /* @__PURE__ */ new Date();
    return Math.floor((now.getTime() - updatedDate.getTime()) / (1e3 * 60 * 60 * 24));
  }
  // ID 생성 유틸리티
  static generateId() {
    return `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/core/use-cases/CreateBookUseCase.ts
var CreateBookUseCase = class {
  constructor(bookRepository) {
    this.bookRepository = bookRepository;
  }
  async execute(request) {
    try {
      if (!request.name || request.name.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uC7A5 \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      const name = request.name.trim();
      const existingBooks = await this.bookRepository.findAll();
      const duplicateBook = existingBooks.find(
        (book2) => book2.name.toLowerCase() === name.toLowerCase()
      );
      if (duplicateBook) {
        return {
          success: false,
          error: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uB2E8\uC5B4\uC7A5 \uC774\uB984\uC785\uB2C8\uB2E4."
        };
      }
      const book = Book.create(
        name,
        request.description || ""
      );
      const validationErrors = book.validate();
      if (validationErrors.length > 0) {
        return {
          success: false,
          error: validationErrors.join(", ")
        };
      }
      await this.bookRepository.add(book);
      const event = {
        type: "BOOK_CREATED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          bookId: book.id,
          name: book.name
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        book
      };
    } catch (error) {
      console.error("CreateBookUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("bookCreated", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/core/use-cases/GetWordsForReviewUseCase.ts
var GetWordsForReviewUseCase = class {
  constructor(vocabularyRepository, bookRepository) {
    this.vocabularyRepository = vocabularyRepository;
    this.bookRepository = bookRepository;
  }
  async execute(request = {}) {
    try {
      let bookId = request.bookId;
      if (!bookId) {
        const currentBook = await this.bookRepository.getCurrentBook();
        bookId = currentBook == null ? void 0 : currentBook.id;
      }
      const allWords = await this.vocabularyRepository.findByBookId(bookId);
      if (allWords.length === 0) {
        return {
          success: true,
          words: [],
          totalCount: 0
        };
      }
      const reviewInterval = request.reviewInterval || 1;
      const wordsNeedingReview = allWords.filter(
        (word) => word.needsReview(reviewInterval)
      );
      wordsNeedingReview.sort((a, b) => {
        if (a.lastReviewed && b.lastReviewed) {
          const aDate = new Date(a.lastReviewed).getTime();
          const bDate = new Date(b.lastReviewed).getTime();
          if (aDate !== bDate)
            return aDate - bDate;
        } else if (a.lastReviewed && !b.lastReviewed) {
          return -1;
        } else if (!a.lastReviewed && b.lastReviewed) {
          return 1;
        }
        const difficultyOrder = { "hard": 3, "good": 2, "easy": 1 };
        const difficultyDiff = difficultyOrder[b.difficulty] - difficultyOrder[a.difficulty];
        if (difficultyDiff !== 0)
          return difficultyDiff;
        return a.reviewCount - b.reviewCount;
      });
      const limit = request.limit || 20;
      const limitedWords = wordsNeedingReview.slice(0, limit);
      return {
        success: true,
        words: limitedWords,
        totalCount: wordsNeedingReview.length
      };
    } catch (error) {
      console.error("GetWordsForReviewUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
};

// src/core/use-cases/ReviewWordUseCase.ts
var ReviewWordUseCase = class {
  constructor(vocabularyRepository) {
    this.vocabularyRepository = vocabularyRepository;
  }
  async execute(request) {
    try {
      if (!request.word || request.word.trim().length === 0) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."
        };
      }
      if (!["easy", "good", "hard"].includes(request.difficulty)) {
        return {
          success: false,
          error: "\uC62C\uBC14\uB978 \uB09C\uC774\uB3C4\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694."
        };
      }
      const word = request.word.trim().toLowerCase();
      const existingCard = await this.vocabularyRepository.findByWord(word);
      if (!existingCard) {
        return {
          success: false,
          error: "\uB2E8\uC5B4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
        };
      }
      const previousDifficulty = existingCard.difficulty;
      const reviewedCard = existingCard.review(request.difficulty);
      await this.vocabularyRepository.update(reviewedCard);
      const event = {
        type: "WORD_REVIEWED",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        data: {
          word: reviewedCard.word,
          difficulty: request.difficulty,
          previousDifficulty
        }
      };
      this.publishEvent(event);
      return {
        success: true,
        card: reviewedCard
      };
    } catch (error) {
      console.error("ReviewWordUseCase \uC2E4\uD589 \uC911 \uC624\uB958:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."
      };
    }
  }
  publishEvent(event) {
    const customEvent = new CustomEvent("wordReviewed", { detail: event.data });
    document.dispatchEvent(customEvent);
  }
};

// src/infrastructure/obsidian/repositories/VocabularyRepositoryAdapter.ts
var VocabularyRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(card) {
    await this.databaseManager.addWord(card);
  }
  async save(card) {
    await this.databaseManager.addWord(card);
  }
  async findByWord(word) {
    return this.databaseManager.getWord(word);
  }
  async findAll() {
    return this.databaseManager.getAllWords();
  }
  async findByBookId(bookId) {
    return this.databaseManager.getWordsByBook(bookId);
  }
  async update(word, card) {
    await this.databaseManager.updateWord(word, card.difficulty);
  }
  async delete(word) {
    await this.databaseManager.removeWord(word);
  }
  async search(options) {
    const allWords = await this.findAll();
    const filteredWords = allWords.filter(
      (word) => {
        var _a;
        return word.word.toLowerCase().includes(((_a = options.query) == null ? void 0 : _a.toLowerCase()) || "");
      }
    );
    return {
      words: filteredWords,
      total: filteredWords.length,
      hasMore: false
    };
  }
  async searchByText(query) {
    const result = await this.search({ query });
    return result.words;
  }
  async findCardsForReview(bookId) {
    return this.databaseManager.getWordsForReview(bookId);
  }
  async findCardsByDifficulty(difficulty, bookId) {
    const words = bookId ? await this.findByBookId(bookId) : await this.findAll();
    return words.filter((word) => word.difficulty === difficulty);
  }
  async count() {
    const words = await this.findAll();
    return words.length;
  }
  async countByBookId(bookId) {
    const words = await this.findByBookId(bookId);
    return words.length;
  }
  async countByDifficulty(difficulty) {
    const words = await this.findCardsByDifficulty(difficulty);
    return words.length;
  }
  async saveMany(cards) {
    for (const card of cards) {
      await this.add(card);
    }
  }
  async deleteMany(words) {
    for (const word of words) {
      await this.delete(word);
    }
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
};

// src/infrastructure/obsidian/repositories/BookRepositoryAdapter.ts
var BookRepositoryAdapter = class {
  constructor(databaseManager) {
    this.databaseManager = databaseManager;
  }
  async add(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async save(book) {
    await this.databaseManager.createBook(book.toPlainObject());
  }
  async findById(id) {
    const bookData = this.databaseManager.getBook(id);
    if (!bookData)
      return null;
    return new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    );
  }
  async findAll(options) {
    const booksData = this.databaseManager.getAllBooks();
    let books = booksData.map((bookData) => new Book(
      bookData.id,
      bookData.name,
      bookData.description,
      bookData.createdAt,
      bookData.updatedAt,
      bookData.wordCount,
      bookData.isDefault
    ));
    if (options) {
      if (options.includeEmpty === false) {
        books = books.filter((book) => !book.isEmpty());
      }
      if (options.sortBy) {
        books.sort((a, b) => {
          const aValue = a[options.sortBy];
          const bValue = b[options.sortBy];
          if (typeof aValue === "string" && typeof bValue === "string") {
            return options.sortOrder === "desc" ? bValue.localeCompare(aValue) : aValue.localeCompare(bValue);
          }
          if (typeof aValue === "number" && typeof bValue === "number") {
            return options.sortOrder === "desc" ? bValue - aValue : aValue - bValue;
          }
          return 0;
        });
      }
      if (options.offset || options.limit) {
        const start = options.offset || 0;
        const end = options.limit ? start + options.limit : void 0;
        books = books.slice(start, end);
      }
    }
    return books;
  }
  async update(id, book) {
    await this.databaseManager.updateBook(id, book.toPlainObject());
  }
  async delete(id) {
    await this.databaseManager.deleteBook(id);
  }
  async findDefault() {
    return this.findById("default");
  }
  async findByName(name) {
    const books = await this.findAll();
    return books.find((book) => book.name === name) || null;
  }
  async exists(id) {
    const book = await this.findById(id);
    return book !== null;
  }
  async count() {
    const books = await this.findAll();
    return books.length;
  }
  async getStatistics(bookId) {
    const book = await this.findById(bookId);
    if (!book)
      return null;
    const words = this.databaseManager.getWordsByBook(bookId);
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const totalReviews = words.reduce((sum, word) => sum + word.reviewCount, 0);
    const averageReviewCount = words.length > 0 ? totalReviews / words.length : 0;
    const lastActivityDate = words.length > 0 ? Math.max(...words.map((w) => new Date(w.lastReviewed || w.addedDate).getTime())) : null;
    const completionPercentage = words.length > 0 ? wordsByDifficulty.easy / words.length * 100 : 0;
    return {
      book,
      totalWords: words.length,
      wordsByDifficulty,
      averageReviewCount,
      lastActivityDate: lastActivityDate ? new Date(lastActivityDate).toISOString() : null,
      completionPercentage
    };
  }
  async getAllStatistics() {
    const books = await this.findAll();
    const statistics = [];
    for (const book of books) {
      const stat = await this.getStatistics(book.id);
      if (stat) {
        statistics.push(stat);
      }
    }
    return statistics;
  }
  async getCurrentBook() {
    const currentBook = this.databaseManager.getCurrentBook();
    if (!currentBook)
      return null;
    return new Book(
      currentBook.id,
      currentBook.name,
      currentBook.description,
      currentBook.createdAt,
      currentBook.updatedAt,
      currentBook.wordCount,
      currentBook.isDefault
    );
  }
  async setCurrentBook(bookId) {
    await this.databaseManager.setCurrentBook(bookId);
  }
  async loadData() {
    await this.databaseManager.loadAllBooks();
  }
  async saveData() {
    await this.databaseManager.saveAllData();
  }
  async validateBookName(name, excludeId) {
    const books = await this.findAll();
    return !books.some(
      (book) => book.name === name && (!excludeId || book.id !== excludeId)
    );
  }
  onDataChanged(callback) {
  }
  offDataChanged(callback) {
  }
  onCurrentBookChanged(callback) {
  }
  offCurrentBookChanged(callback) {
  }
};

// src/infrastructure/storage/VocabularyDatabase.ts
var import_obsidian10 = require("obsidian");
var VocabularyDatabaseManager = class {
  constructor(app, saveCallback, folderPath) {
    this.books = /* @__PURE__ */ new Map();
    this.words = /* @__PURE__ */ new Map();
    this.settings = {
      dailyGoal: 10,
      reviewInterval: 1,
      currentBookId: "default"
    };
    this.statistics = {
      totalReviews: 0,
      streakDays: 0,
      lastStudyDate: null
    };
    this.vocabularyFolderPath = "Vocabulary";
    this.app = app;
    this.saveCallback = saveCallback;
    if (folderPath) {
      this.vocabularyFolderPath = folderPath;
    }
    this.initializeVocabularyFolder();
    this.initializeDefaultBook();
  }
  // 단어장 폴더 초기화
  async initializeVocabularyFolder() {
    try {
      const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
      if (folder instanceof import_obsidian10.TFolder) {
        return;
      }
      await this.app.vault.createFolder(this.vocabularyFolderPath);
    } catch (error) {
      if (error instanceof Error) {
        const errorMessage = error.message.toLowerCase();
        if (errorMessage.includes("already exists") || errorMessage.includes("folder already exists") || errorMessage.includes("already present")) {
        } else {
          console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC2E4\uD328:", error);
        }
      } else {
        console.warn("\uB2E8\uC5B4\uC7A5 \uD3F4\uB354 \uC0DD\uC131 \uC911 \uC54C \uC218 \uC5C6\uB294 \uC624\uB958 \uBC1C\uC0DD:", error);
      }
    }
  }
  // 기본 book 초기화
  async initializeDefaultBook() {
    if (!this.books.has("default")) {
      const defaultBook = {
        id: "default",
        name: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5",
        description: "\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC785\uB2C8\uB2E4.",
        createdAt: (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: 0,
        isDefault: true
      };
      this.books.set("default", defaultBook);
      await this.saveBookToFile(defaultBook);
    }
  }
  // Book을 MD 파일로 저장
  async saveBookToFile(book) {
    const bookName = typeof book.name === "string" ? book.name : "untitled";
    const fileName = `${bookName.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian10.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const bookWords = Array.from(this.words.values()).filter((word) => word.bookId === book.id).sort((a, b) => {
      const wordA = typeof a.word === "string" ? a.word : "";
      const wordB = typeof b.word === "string" ? b.word : "";
      return wordA.localeCompare(wordB);
    });
    const frontmatter = [
      "---",
      `bookId: ${book.id}`,
      `name: "${book.name}"`,
      `description: "${book.description}"`,
      `createdAt: ${book.createdAt}`,
      `updatedAt: ${book.updatedAt}`,
      `wordCount: ${bookWords.length}`,
      `isDefault: ${book.isDefault}`,
      "---",
      ""
    ].join("\n");
    let content = frontmatter;
    content += `# ${book.name}

`;
    content += `${book.description}

`;
    content += `## \uB2E8\uC5B4 \uBAA9\uB85D (${bookWords.length}\uAC1C)

`;
    for (const word of bookWords) {
      content += `### ${word.word}

`;
      if (word.pronunciation) {
        content += `**\uBC1C\uC74C:** ${word.pronunciation}

`;
      }
      content += `**\uB73B:**
`;
      for (const meaning of word.meanings) {
        content += `- ${meaning}
`;
      }
      content += "\n";
      if (word.similarWords.length > 0) {
        content += `**\uC720\uC0AC\uD55C \uB2E8\uC5B4:** ${word.similarWords.join(", ")}

`;
      }
      if (word.examples.length > 0) {
        content += `**\uC608\uBB38:**
`;
        for (const example of word.examples) {
          content += `- ${example.english}
`;
          content += `  - ${example.korean}
`;
        }
        content += "\n";
      }
      content += `**\uBCF5\uC2B5 \uC815\uBCF4:**
`;
      content += `- \uBCF5\uC2B5 \uD69F\uC218: ${word.reviewCount}
`;
      content += `- \uB09C\uC774\uB3C4: ${word.difficulty}
`;
      content += `- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ${word.lastReviewed || "\uC5C6\uC74C"}
`;
      content += `- \uCD94\uAC00\uC77C: ${word.addedDate}
`;
      if (word.scheduleInfo) {
        content += `
**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**
`;
        content += `- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ${word.scheduleInfo.dueDate}
`;
        content += `- \uBCF5\uC2B5 \uAC04\uACA9: ${word.scheduleInfo.interval}\uC77C
`;
        content += `- \uC6A9\uC774\uB3C4: ${word.scheduleInfo.ease}
`;
        content += `- \uC2E4\uD328 \uD69F\uC218: ${word.scheduleInfo.lapseCount}
`;
      }
      content += "\n---\n\n";
    }
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(filePath);
      if (existingFile instanceof import_obsidian10.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        try {
          await this.app.vault.create(filePath, content);
        } catch (error) {
          if (error instanceof Error && error.message.includes("already exists")) {
            const file = this.app.vault.getAbstractFileByPath(filePath);
            if (file instanceof import_obsidian10.TFile) {
              await this.app.vault.modify(file, content);
            } else {
            }
          } else {
            console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
          }
        }
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  // MD 파일에서 Book과 단어들 로드
  async loadBookFromFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const { frontmatter, body } = this.parseMDFile(content);
      if (!frontmatter.bookId)
        return;
      const book = {
        id: frontmatter.bookId,
        name: frontmatter.name || file.basename,
        description: frontmatter.description || "",
        createdAt: frontmatter.createdAt || (/* @__PURE__ */ new Date()).toISOString(),
        updatedAt: frontmatter.updatedAt || (/* @__PURE__ */ new Date()).toISOString(),
        wordCount: frontmatter.wordCount || 0,
        isDefault: frontmatter.isDefault || false
      };
      this.books.set(book.id, book);
      const words = this.parseWordsFromMarkdown(body, book.id);
      for (const word of words) {
        this.words.set(word.word.toLowerCase(), word);
      }
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:", error);
    }
  }
  // MD 파일 파싱 (frontmatter와 body 분리)
  parseMDFile(content) {
    const frontmatterRegex = /^---\n([\s\S]*?)\n---\n([\s\S]*)$/;
    const match = content.match(frontmatterRegex);
    if (!match) {
      return { frontmatter: {}, body: content };
    }
    const frontmatterText = match[1];
    const body = match[2];
    const frontmatter = {};
    const lines = frontmatterText.split("\n");
    for (const line of lines) {
      const colonIndex = line.indexOf(":");
      if (colonIndex > 0) {
        const key = line.substring(0, colonIndex).trim();
        let value = line.substring(colonIndex + 1).trim();
        if (value.startsWith('"') && value.endsWith('"')) {
          value = value.slice(1, -1);
        }
        if (value === "true")
          frontmatter[key] = true;
        else if (value === "false")
          frontmatter[key] = false;
        else if (!isNaN(Number(value)))
          frontmatter[key] = Number(value);
        else
          frontmatter[key] = value;
      }
    }
    return { frontmatter, body };
  }
  // 마크다운에서 단어들 파싱
  parseWordsFromMarkdown(markdown, bookId) {
    const words = [];
    const wordSections = markdown.split("---").filter((section) => section.trim());
    for (const section of wordSections) {
      const word = this.parseWordSection(section, bookId);
      if (word) {
        words.push(word);
      }
    }
    return words;
  }
  // 개별 단어 섹션 파싱
  parseWordSection(section, bookId) {
    const lines = section.split("\n").filter((line) => line.trim());
    if (lines.length === 0)
      return null;
    let word = "";
    let pronunciation = "";
    const meanings = [];
    const similarWords = [];
    const examples = [];
    let reviewCount = 0;
    let difficulty = "good";
    let lastReviewed = null;
    let addedDate = (/* @__PURE__ */ new Date()).toISOString();
    let scheduleInfo = void 0;
    let currentSection = "";
    let currentExample = {};
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const trimmedLine = line.trim();
      if (trimmedLine.startsWith("### ")) {
        word = trimmedLine.substring(4).trim();
        continue;
      }
      if (trimmedLine.startsWith("**\uBC1C\uC74C:**")) {
        pronunciation = trimmedLine.substring(7).trim();
        currentSection = "pronunciation";
      } else if (trimmedLine.startsWith("**\uB73B:**")) {
        currentSection = "meanings";
      } else if (trimmedLine.startsWith("**\uC720\uC0AC\uD55C \uB2E8\uC5B4:**")) {
        const similarWordsText = trimmedLine.substring(12).trim();
        similarWords.push(...similarWordsText.split(",").map((w) => w.trim()));
        currentSection = "similar";
      } else if (trimmedLine.startsWith("**\uC608\uBB38:**")) {
        currentSection = "examples";
      } else if (trimmedLine.startsWith("**\uBCF5\uC2B5 \uC815\uBCF4:**")) {
        currentSection = "review";
      } else if (trimmedLine.startsWith("**\uC2A4\uD398\uC774\uC2A4\uB4DC \uB9AC\uD53C\uD2F0\uC158:**")) {
        currentSection = "spaced-repetition";
      } else if (currentSection === "meanings" && trimmedLine.startsWith("- ")) {
        meanings.push(trimmedLine.substring(2).trim());
      } else if (currentSection === "examples") {
        if (line.startsWith("- ") && !line.startsWith("  - ")) {
          if (currentExample.english && currentExample.korean) {
            examples.push({
              english: currentExample.english,
              korean: currentExample.korean
            });
          }
          currentExample = { english: line.substring(2).trim() };
        } else if (line.startsWith("  - ")) {
          currentExample.korean = line.substring(4).trim();
        }
      } else if (currentSection === "review") {
        if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uD69F\uC218: ")) {
          reviewCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        } else if (trimmedLine.startsWith("- \uB09C\uC774\uB3C4: ")) {
          const diff = trimmedLine.substring(7).trim();
          if (diff === "easy" || diff === "good" || diff === "hard") {
            difficulty = diff;
          }
        } else if (trimmedLine.startsWith("- \uB9C8\uC9C0\uB9C9 \uBCF5\uC2B5: ")) {
          const lastRev = trimmedLine.substring(11).trim();
          lastReviewed = lastRev === "\uC5C6\uC74C" ? null : lastRev;
        } else if (trimmedLine.startsWith("- \uCD94\uAC00\uC77C: ")) {
          addedDate = trimmedLine.substring(7).trim();
        }
      } else if (currentSection === "spaced-repetition") {
        if (!scheduleInfo) {
          scheduleInfo = {};
        }
        if (trimmedLine.startsWith("- \uB2E4\uC74C \uBCF5\uC2B5\uC77C: ")) {
          scheduleInfo.dueDate = trimmedLine.substring(10).trim();
        } else if (trimmedLine.startsWith("- \uBCF5\uC2B5 \uAC04\uACA9: ")) {
          const intervalText = trimmedLine.substring(8).trim();
          scheduleInfo.interval = parseInt(intervalText.replace("\uC77C", "")) || 1;
        } else if (trimmedLine.startsWith("- \uC6A9\uC774\uB3C4: ")) {
          scheduleInfo.ease = parseInt(trimmedLine.substring(7).trim()) || 250;
        } else if (trimmedLine.startsWith("- \uC2E4\uD328 \uD69F\uC218: ")) {
          scheduleInfo.lapseCount = parseInt(trimmedLine.substring(9).trim()) || 0;
        }
      }
    }
    if (currentExample.english && currentExample.korean) {
      examples.push({
        english: currentExample.english,
        korean: currentExample.korean
      });
    }
    if (!word)
      return null;
    return {
      word: word.toLowerCase(),
      pronunciation,
      meanings,
      similarWords,
      examples,
      reviewCount,
      difficulty,
      lastReviewed,
      addedDate,
      bookId,
      scheduleInfo
    };
  }
  // 모든 단어장 파일 로드
  async loadAllBooks() {
    this.books.clear();
    this.words.clear();
    await this.initializeVocabularyFolder();
    await this.initializeDefaultBook();
    const folder = this.app.vault.getAbstractFileByPath(this.vocabularyFolderPath);
    if (folder instanceof import_obsidian10.TFolder) {
      for (const file of folder.children) {
        if (file instanceof import_obsidian10.TFile && file.extension === "md") {
          await this.loadBookFromFile(file);
        }
      }
    }
    await this.loadSettings();
  }
  // 설정 파일 저장/로드
  async saveSettings() {
    const settingsPath = (0, import_obsidian10.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    const data = {
      settings: this.settings,
      statistics: this.statistics
    };
    try {
      const existingFile = this.app.vault.getAbstractFileByPath(settingsPath);
      const content = JSON.stringify(data, null, 2);
      if (existingFile instanceof import_obsidian10.TFile) {
        await this.app.vault.modify(existingFile, content);
      } else {
        await this.app.vault.create(settingsPath, content);
      }
    } catch (error) {
      console.error("\uC124\uC815 \uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  async loadSettings() {
    const settingsPath = (0, import_obsidian10.normalizePath)(`${this.vocabularyFolderPath}/settings.json`);
    try {
      const file = this.app.vault.getAbstractFileByPath(settingsPath);
      if (file instanceof import_obsidian10.TFile) {
        const content = await this.app.vault.read(file);
        const data = JSON.parse(content);
        if (data.settings) {
          this.settings = { ...this.settings, ...data.settings };
        }
        if (data.statistics) {
          this.statistics = { ...this.statistics, ...data.statistics };
        }
      }
    } catch (error) {
      console.warn("\uC124\uC815 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:", error);
    }
  }
  // Book 관리 메서드들
  async createBook(name, description = "") {
    const id = `book_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    const book = {
      id,
      name,
      description,
      createdAt: (/* @__PURE__ */ new Date()).toISOString(),
      updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
      wordCount: 0,
      isDefault: false
    };
    this.books.set(id, book);
    await this.saveBookToFile(book);
    this.saveCallback();
    return book;
  }
  async updateBook(bookId, updates) {
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedBook = {
      ...book,
      ...updates,
      updatedAt: (/* @__PURE__ */ new Date()).toISOString()
    };
    this.books.set(bookId, updatedBook);
    await this.saveBookToFile(updatedBook);
    this.saveCallback();
  }
  async deleteBook(bookId) {
    if (bookId === "default") {
      throw new Error("\uAE30\uBCF8 \uB2E8\uC5B4\uC7A5\uC740 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    const book = this.books.get(bookId);
    if (!book) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const wordsToDelete = Array.from(this.words.values()).filter((word) => word.bookId === bookId).map((word) => word.word);
    for (const word of wordsToDelete) {
      this.words.delete(word.toLowerCase());
    }
    this.books.delete(bookId);
    const fileName = `${book.name.replace(/[<>:"/\\|?*]/g, "_")}.md`;
    const filePath = (0, import_obsidian10.normalizePath)(`${this.vocabularyFolderPath}/${fileName}`);
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian10.TFile) {
      await this.app.fileManager.trashFile(file);
    }
    if (this.settings.currentBookId === bookId) {
      this.settings.currentBookId = "default";
      await this.saveSettings();
    }
    this.saveCallback();
  }
  getAllBooks() {
    return Array.from(this.books.values()).sort((a, b) => {
      if (a.isDefault)
        return -1;
      if (b.isDefault)
        return 1;
      const nameA = typeof a.name === "string" ? a.name : "";
      const nameB = typeof b.name === "string" ? b.name : "";
      return nameA.localeCompare(nameB);
    });
  }
  getBook(bookId) {
    return this.books.get(bookId);
  }
  getCurrentBook() {
    return this.books.get(this.settings.currentBookId);
  }
  async setCurrentBook(bookId) {
    if (!this.books.has(bookId)) {
      throw new Error(`Book "${bookId}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    this.settings.currentBookId = bookId;
    await this.saveSettings();
    this.saveCallback();
  }
  // Book별 단어 수 업데이트
  updateBookWordCount(bookId) {
    const wordCount = Array.from(this.words.values()).filter((word) => word.bookId === bookId).length;
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount = wordCount;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
    }
  }
  // 단어 추가
  async addWord(wordData) {
    const word = wordData.word.toLowerCase();
    if (this.words.has(word)) {
      throw new Error(`\uB2E8\uC5B4 "${wordData.word}"\uB294 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4.`);
    }
    const newWord = {
      ...wordData,
      word: wordData.word.toLowerCase(),
      reviewCount: 0,
      difficulty: "good",
      lastReviewed: null,
      addedDate: (/* @__PURE__ */ new Date()).toISOString(),
      bookId: wordData.bookId || this.settings.currentBookId
    };
    this.words.set(word, newWord);
    const book = this.books.get(newWord.bookId);
    if (book) {
      book.wordCount++;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 삭제
  async removeWord(word) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const bookId = wordData.bookId;
    this.words.delete(wordKey);
    const book = this.books.get(bookId);
    if (book) {
      book.wordCount--;
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과)
  async updateWord(word, difficulty) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 업데이트 (복습 결과 + 스페이스드 리피티션 정보)
  async updateWordWithSchedule(word, difficulty, scheduleInfo) {
    const wordKey = word.toLowerCase();
    const wordData = this.words.get(wordKey);
    if (!wordData) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    wordData.reviewCount++;
    wordData.difficulty = difficulty;
    wordData.lastReviewed = (/* @__PURE__ */ new Date()).toISOString();
    if (scheduleInfo) {
      wordData.scheduleInfo = scheduleInfo;
    }
    this.statistics.totalReviews++;
    this.updateStreak();
    const book = this.books.get(wordData.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    await this.saveSettings();
    this.saveCallback();
  }
  // 단어 전체 데이터 업데이트 (LLM API로 가져온 정보로 덮어쓰기)
  async updateWordData(word, updatedWordData) {
    const wordKey = word.toLowerCase();
    const existingWord = this.words.get(wordKey);
    if (!existingWord) {
      throw new Error(`\uB2E8\uC5B4 "${word}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);
    }
    const updatedWord = {
      ...updatedWordData,
      word: wordKey,
      reviewCount: existingWord.reviewCount,
      difficulty: existingWord.difficulty,
      lastReviewed: existingWord.lastReviewed,
      addedDate: existingWord.addedDate,
      bookId: existingWord.bookId
    };
    this.words.set(wordKey, updatedWord);
    const book = this.books.get(updatedWord.bookId);
    if (book) {
      book.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveBookToFile(book);
    }
    this.saveCallback();
  }
  // 단어 조회
  getWord(word) {
    return this.words.get(word.toLowerCase());
  }
  // 현재 book의 모든 단어 조회
  getAllWords() {
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).sort((a, b) => {
      const wordA = typeof a.word === "string" ? a.word : "";
      const wordB = typeof b.word === "string" ? b.word : "";
      return wordA.localeCompare(wordB);
    });
  }
  // 특정 book의 모든 단어 조회
  getWordsByBook(bookId) {
    return Array.from(this.words.values()).filter((word) => word.bookId === bookId).sort((a, b) => {
      const wordA = typeof a.word === "string" ? a.word : "";
      const wordB = typeof b.word === "string" ? b.word : "";
      return wordA.localeCompare(wordB);
    });
  }
  // 복습 대상 단어 조회 (현재 book)
  getWordsForReview() {
    const now = /* @__PURE__ */ new Date();
    const reviewIntervalMs = this.settings.reviewInterval * 24 * 60 * 60 * 1e3;
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return true;
      const lastReview = new Date(word.lastReviewed);
      const timeSinceLastReview = now.getTime() - lastReview.getTime();
      return timeSinceLastReview >= reviewIntervalMs;
    });
  }
  // 단어 검색 (현재 book)
  searchWords(query) {
    const lowerQuery = query.toLowerCase();
    return Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter(
      (word) => word.word.includes(lowerQuery) || word.meanings.some((meaning) => meaning.toLowerCase().includes(lowerQuery))
    );
  }
  // 통계 조회 (현재 book)
  getStatistics() {
    const words = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId);
    const totalWords = words.length;
    const totalReviews = this.statistics.totalReviews;
    const averageDifficulty = words.length > 0 ? words.reduce((sum, word) => {
      const difficultyValue = word.difficulty === "easy" ? 1 : word.difficulty === "good" ? 2 : 3;
      return sum + difficultyValue;
    }, 0) / words.length : 0;
    const wordsByDifficulty = {
      easy: words.filter((w) => w.difficulty === "easy").length,
      good: words.filter((w) => w.difficulty === "good").length,
      hard: words.filter((w) => w.difficulty === "hard").length
    };
    const recentActivity = this.calculateRecentActivity();
    return {
      totalWords,
      totalReviews,
      streakDays: this.statistics.streakDays,
      averageDifficulty,
      wordsByDifficulty,
      recentActivity
    };
  }
  // 일일 목표 진행률 조회 (현재 book)
  getDailyGoalProgress() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const todayWords = Array.from(this.words.values()).filter((word) => word.bookId === this.settings.currentBookId).filter((word) => {
      if (!word.lastReviewed)
        return false;
      return new Date(word.lastReviewed).toDateString() === today;
    }).length;
    const goal = this.settings.dailyGoal;
    const percentage = goal > 0 ? Math.min(todayWords / goal * 100, 100) : 0;
    return {
      current: todayWords,
      goal,
      percentage
    };
  }
  // 설정 업데이트
  async updateSettings(newSettings) {
    this.settings = { ...this.settings, ...newSettings };
    await this.saveSettings();
    this.saveCallback();
  }
  // 데이터 저장용 형식으로 변환 (호환성 유지)
  getDataForSave() {
    return {
      books: Array.from(this.books.values()),
      words: Array.from(this.words.values()),
      settings: this.settings,
      statistics: this.statistics
    };
  }
  // 저장된 데이터에서 로드 (호환성 유지)
  async loadFromData(data) {
    await this.loadAllBooks();
  }
  // 연속 학습일 업데이트
  updateStreak() {
    const today = (/* @__PURE__ */ new Date()).toDateString();
    const lastStudyDate = this.statistics.lastStudyDate ? new Date(this.statistics.lastStudyDate).toDateString() : null;
    if (lastStudyDate === today) {
      return;
    }
    if (!lastStudyDate) {
      this.statistics.streakDays = 1;
    } else {
      const yesterday = /* @__PURE__ */ new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      const yesterdayStr = yesterday.toDateString();
      if (lastStudyDate === yesterdayStr) {
        this.statistics.streakDays++;
      } else {
        this.statistics.streakDays = 1;
      }
    }
    this.statistics.lastStudyDate = (/* @__PURE__ */ new Date()).toISOString();
  }
  // 최근 7일 활동 계산
  calculateRecentActivity() {
    const activity = [];
    const today = /* @__PURE__ */ new Date();
    for (let i = 6; i >= 0; i--) {
      const date = new Date(today);
      date.setDate(date.getDate() - i);
      const dateStr = date.toDateString();
      const wordsStudied = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        return new Date(word.lastReviewed).toDateString() === dateStr;
      }).length;
      const reviewsCompleted = Array.from(this.words.values()).filter((word) => {
        if (!word.lastReviewed)
          return false;
        const reviewDate = new Date(word.lastReviewed);
        return reviewDate.toDateString() === dateStr;
      }).length;
      activity.push({
        date: date.toISOString().split("T")[0],
        wordsStudied,
        reviewsCompleted
      });
    }
    return activity;
  }
  // 단어장 폴더 경로 업데이트
  updateVocabularyFolderPath(newPath) {
    this.vocabularyFolderPath = newPath;
    this.initializeVocabularyFolder();
  }
};

// src/infrastructure/llm/LLMServiceAdapter.ts
var LLMServiceAdapter = class {
  constructor(settings) {
    this.llmService = new LLMService(settings);
  }
  async getWordData(request) {
    try {
      const wordInfo = await this.llmService.getWordInfo(request.word);
      return {
        success: true,
        data: {
          word: wordInfo.word,
          meaning: wordInfo.meanings,
          pronunciation: wordInfo.pronunciation,
          examples: wordInfo.examples,
          similarWords: wordInfo.similarWords
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  async testConnection() {
    return await this.llmService.testConnection();
  }
  updateSettings(settings) {
    this.llmService = new LLMService(settings);
  }
};

// src/infrastructure/external/WordServiceAdapter.ts
var WordServiceAdapter = class {
  constructor(settings) {
    this.wordService = new WordService(settings);
  }
  async getWordData(request) {
    try {
      const wordData = await this.wordService.getWordData(request.word);
      return {
        success: true,
        data: {
          word: wordData.word,
          meaning: wordData.meaning,
          pronunciation: wordData.pronunciation,
          examples: wordData.examples || [],
          similarWords: wordData.similarWords || []
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error occurred"
      };
    }
  }
  updateSettings(settings) {
    this.wordService = new WordService(settings);
  }
};

// src/core/ports/services/ITTSServiceAdapter.ts
var TTSServiceAdapter = class {
  constructor(app, settings) {
    this.app = app;
    this.ttsService = TTSServiceFactory.createTTSService(app, settings);
  }
  async speakText(text) {
    await this.ttsService.speakText(text);
  }
  async speakWord(word) {
    await this.ttsService.speakWord(word);
  }
  async speakExample(example) {
    await this.ttsService.speakExample(example);
  }
  stopSpeaking() {
    this.ttsService.stopSpeaking();
  }
  updateSettings(settings) {
    this.ttsService.destroy();
    this.ttsService = TTSServiceFactory.createTTSService(this.app, settings);
  }
  isEnabled() {
    return true;
  }
  getAvailableVoices() {
    const voices = this.ttsService.getAvailableVoices();
    return [];
  }
  async testConnection() {
    return await this.ttsService.testConnection();
  }
  isPaused() {
    return this.ttsService.isPaused();
  }
  resume() {
    this.ttsService.resume();
  }
  pause() {
    this.ttsService.pause();
  }
  destroy() {
    this.ttsService.destroy();
  }
};

// src/shared/container/ServiceRegistry.ts
var ServiceRegistry = class {
  static registerServices(container2, app, settings) {
    container2.registerInstance("app", app);
    container2.registerInstance("settings", settings);
    container2.register("databaseManager", (app2) => {
      return new VocabularyDatabaseManager(
        app2,
        () => {
        },
        // saveCallback - DI에서는 빈 함수로 처리
        settings.vocabularyFolderPath
      );
    }, {
      dependencies: ["app"],
      singleton: true
    });
    container2.register("vocabularyRepository", VocabularyRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("bookRepository", BookRepositoryAdapter, {
      dependencies: ["databaseManager"]
    });
    container2.register("wordService", WordServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("llmService", LLMServiceAdapter, {
      dependencies: ["settings"]
    });
    container2.register("ttsService", TTSServiceAdapter, {
      dependencies: ["app", "settings"]
    });
    container2.register("addWordUseCase", AddWordUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository", "wordService"]
    });
    container2.register("createBookUseCase", CreateBookUseCase, {
      dependencies: ["bookRepository"]
    });
    container2.register("getWordsForReviewUseCase", GetWordsForReviewUseCase, {
      dependencies: ["vocabularyRepository", "bookRepository"]
    });
    container2.register("reviewWordUseCase", ReviewWordUseCase, {
      dependencies: ["vocabularyRepository"]
    });
  }
  static updateSettings(container2, settings) {
    container2.registerInstance("settings", settings);
    if (container2.has("ttsService")) {
      const ttsService = container2.resolve("ttsService");
      ttsService.updateSettings(settings);
    }
    if (container2.has("llmService")) {
      const llmService = container2.resolve("llmService");
      llmService.updateSettings(settings);
    }
    if (container2.has("wordService")) {
      const wordService = container2.resolve("wordService");
      wordService.updateSettings(settings);
    }
  }
};

// src/shared/ErrorBoundary.ts
var import_obsidian11 = require("obsidian");
var ErrorBoundary = class _ErrorBoundary {
  constructor() {
    this.errorHandlers = /* @__PURE__ */ new Map();
    this.isInitialized = false;
  }
  static getInstance() {
    if (!_ErrorBoundary.instance) {
      _ErrorBoundary.instance = new _ErrorBoundary();
    }
    return _ErrorBoundary.instance;
  }
  // 전역 에러 핸들러 초기화
  initialize() {
    if (this.isInitialized)
      return;
    window.addEventListener("error", (event) => {
      var _a;
      this.handleError({
        error: event.error || new Error(event.message),
        context: "Global Error",
        timestamp: Date.now(),
        stackTrace: (_a = event.error) == null ? void 0 : _a.stack
      });
    });
    window.addEventListener("unhandledrejection", (event) => {
      var _a;
      this.handleError({
        error: event.reason instanceof Error ? event.reason : new Error(String(event.reason)),
        context: "Unhandled Promise Rejection",
        timestamp: Date.now(),
        stackTrace: (_a = event.reason) == null ? void 0 : _a.stack
      });
    });
    this.isInitialized = true;
  }
  // 에러 핸들러 등록
  registerHandler(context, handler) {
    this.errorHandlers.set(context, handler);
  }
  // 에러 핸들러 제거
  unregisterHandler(context) {
    this.errorHandlers.delete(context);
  }
  // 에러 처리
  handleError(errorInfo) {
    console.error("Error caught by ErrorBoundary:", errorInfo);
    const userMessage = this.getUserFriendlyMessage(errorInfo.error);
    new import_obsidian11.Notice(userMessage, 0);
    this.errorHandlers.forEach((handler, context) => {
      try {
        handler(errorInfo);
      } catch (handlerError) {
        console.error(`Error in handler for context ${context}:`, handlerError);
      }
    });
  }
  // 안전한 함수 실행 래퍼
  async safeExecute(fn, context, fallback) {
    try {
      return await fn();
    } catch (error) {
      this.handleError({
        error: error instanceof Error ? error : new Error(String(error)),
        context,
        timestamp: Date.now(),
        stackTrace: error instanceof Error ? error.stack : void 0
      });
      return fallback;
    }
  }
  // 동기 함수용 안전한 실행
  safeExecuteSync(fn, context, fallback) {
    try {
      return fn();
    } catch (error) {
      this.handleError({
        error: error instanceof Error ? error : new Error(String(error)),
        context,
        timestamp: Date.now(),
        stackTrace: error instanceof Error ? error.stack : void 0
      });
      return fallback;
    }
  }
  // 사용자 친화적인 에러 메시지 생성
  getUserFriendlyMessage(error) {
    const errorType = error.name;
    const errorMessage = error.message;
    const friendlyMessages = {
      "NetworkError": "\uB124\uD2B8\uC6CC\uD06C \uC5F0\uACB0\uC5D0 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uC778\uD130\uB137 \uC5F0\uACB0\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.",
      "TypeError": "\uB370\uC774\uD130 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",
      "ReferenceError": "\uD544\uC694\uD55C \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",
      "SyntaxError": "\uB370\uC774\uD130 \uD615\uC2DD\uC5D0 \uC624\uB958\uAC00 \uC788\uC2B5\uB2C8\uB2E4.",
      "QuotaExceededError": "\uC800\uC7A5 \uACF5\uAC04\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4.",
      "SecurityError": "\uBCF4\uC548 \uC815\uCC45\uC73C\uB85C \uC778\uD574 \uC791\uC5C5\uC744 \uC218\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."
    };
    if (errorMessage.includes("API") || errorMessage.includes("fetch")) {
      return "API \uC11C\uBE44\uC2A4\uC5D0 \uC77C\uC2DC\uC801\uC778 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.";
    }
    if (errorMessage.includes("file") || errorMessage.includes("File")) {
      return "\uD30C\uC77C \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uD30C\uC77C\uC774 \uC874\uC7AC\uD558\uB294\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.";
    }
    if (errorMessage.includes("encrypt") || errorMessage.includes("decrypt")) {
      return "API \uD0A4 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC744 \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694.";
    }
    return friendlyMessages[errorType] || `\uC608\uC0C1\uCE58 \uBABB\uD55C \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${errorMessage}`;
  }
  // 에러 복구 시도
  async attemptRecovery(error, context) {
    if (error.message.includes("fetch") || error.message.includes("network")) {
      try {
        await (0, import_obsidian11.requestUrl)({
          url: "https://www.google.com/favicon.ico",
          method: "HEAD"
        });
        return true;
      } catch (e) {
        return false;
      }
    }
    if (error.name === "QuotaExceededError") {
      try {
        localStorage.removeItem("temp-data");
        return true;
      } catch (e) {
        return false;
      }
    }
    return false;
  }
  // 정리
  cleanup() {
    this.errorHandlers.clear();
    this.isInitialized = false;
  }
};

// src/main.ts
var EnglishVocabularyPlugin = class extends import_obsidian12.Plugin {
  async onload() {
    const errorBoundary = ErrorBoundary.getInstance();
    errorBoundary.initialize();
    errorBoundary.registerHandler("VocabularyPlugin", (errorInfo) => {
      var _a;
      if ((_a = errorInfo.context) == null ? void 0 : _a.includes("API")) {
        console.warn("API \uC5D0\uB7EC \uAC10\uC9C0, \uD3F4\uBC31 \uBAA8\uB4DC\uB85C \uC804\uD658");
      }
    });
    await this.loadSettings();
    this.container = container;
    ServiceRegistry.registerServices(this.container, this.app, this.settings);
    this.databaseManager = this.container.resolve("databaseManager");
    this.llmService = new LLMService(this.settings);
    try {
      await this.databaseManager.loadAllBooks();
    } catch (error) {
      console.error("\uB2E8\uC5B4\uC7A5 \uB370\uC774\uD130 \uB85C\uB4DC \uC2E4\uD328:", error);
      await this.migrateFromLegacyData();
    }
    this.addSettingTab(new VocabularySettingTab(this.app, this));
    this.addCommand({
      id: "open-vocabulary-modal",
      name: "\uC601\uC5B4 \uB2E8\uC5B4 \uD559\uC2B5 \uC2DC\uC791",
      callback: () => {
        new VocabularyModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "open-vocabulary-manager",
      name: "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30",
      callback: () => {
        new VocabularyManagerModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "add-words",
      name: "\uB2E8\uC5B4 \uCD94\uAC00",
      callback: () => {
        new AddWordsModal(this.app, this).open();
      }
    });
    this.addRibbonIcon("book", "\uB2E8\uC5B4\uC7A5 \uBCF4\uAE30", () => {
      new VocabularyManagerModal(this.app, this).open();
    });
  }
  onunload() {
    const errorBoundary = ErrorBoundary.getInstance();
    errorBoundary.unregisterHandler("VocabularyPlugin");
    errorBoundary.cleanup();
  }
  async loadSettings() {
    const data = await this.loadData();
    if (data && typeof data === "object" && "settings" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data.settings);
    } else if (data && typeof data === "object" && "apiKey" in data) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
    } else {
      this.settings = Object.assign({}, DEFAULT_SETTINGS);
    }
    await this.migrateApiKeys();
  }
  // API 키 암호화 마이그레이션
  async migrateApiKeys() {
    let needsSave = false;
    if (this.settings.llmApiKey && this.isPlainTextApiKey(this.settings.llmApiKey)) {
      const plainKey = this.settings.llmApiKey;
      this.settings.llmApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.openaiApiKey && this.isPlainTextApiKey(this.settings.openaiApiKey)) {
      const plainKey = this.settings.openaiApiKey;
      this.settings.openaiApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.anthropicApiKey && this.isPlainTextApiKey(this.settings.anthropicApiKey)) {
      const plainKey = this.settings.anthropicApiKey;
      this.settings.anthropicApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (this.settings.googleApiKey && this.isPlainTextApiKey(this.settings.googleApiKey)) {
      const plainKey = this.settings.googleApiKey;
      this.settings.googleApiKey = encryptApiKey(plainKey);
      needsSave = true;
    }
    if (needsSave) {
      await this.saveSettings();
    }
  }
  // API 키가 평문인지 확인하는 헬퍼 함수
  isPlainTextApiKey(apiKey) {
    if (!apiKey)
      return false;
    try {
      const decrypted = decryptApiKey(apiKey);
      return decrypted === apiKey;
    } catch (error) {
      return apiKey.startsWith("sk-") || apiKey.startsWith("sk-ant-") || apiKey.startsWith("AIza") || apiKey.length > 20;
    }
  }
  async saveSettings() {
    await this.saveAllData();
    if (this.llmService) {
      this.llmService = new LLMService(this.settings);
    }
    if (this.container) {
      ServiceRegistry.updateSettings(this.container, this.settings);
    }
  }
  // 기존 data.json에서 MD 파일로 마이그레이션
  async migrateFromLegacyData() {
    try {
      const savedData = await this.loadData();
      if (savedData && savedData.database && Array.isArray(savedData.database.words)) {
        const legacyData = savedData.database;
        if (legacyData.words && legacyData.words.length > 0) {
          for (const word of legacyData.words) {
            try {
              await this.databaseManager.addWord({
                ...word,
                bookId: "default",
                pronunciation: word.pronunciation || ""
              });
            } catch (error) {
              console.warn(`\uB2E8\uC5B4 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328: ${word.word}`, error);
            }
          }
        }
        if (legacyData.settings) {
          await this.databaseManager.updateSettings(legacyData.settings);
        }
      }
    } catch (error) {
      console.error("\uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328:", error);
    }
  }
  // 모든 데이터 저장 (설정만 저장, 단어장 데이터는 MD 파일로 자동 저장됨)
  async saveAllData() {
    const data = {
      settings: this.settings
    };
    await this.saveData(data);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzLnRzIiwgInNyYy91dGlscy50cyIsICJzcmMvc2hhcmVkL0NvbmZpZy50cyIsICJzcmMvc2hhcmVkL1JldHJ5UG9saWN5LnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZS50cyIsICJzcmMvZmVhdHVyZXMvdm9jYWJ1bGFyeS1sZWFybmluZy91aS9Wb2NhYnVsYXJ5TW9kYWwudHMiLCAic3JjL2luZnJhc3RydWN0dXJlL3R0cy9DaGF0dGVyYm94VFRTU2VydmljZS50cyIsICJzcmMvc2hhcmVkL0F1ZGlvTWFuYWdlci50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL0dvb2dsZUNsb3VkVFRTU2VydmljZS50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL1RUU0NhY2hlTWFuYWdlci50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvdHRzL1RUU1NlcnZpY2UudHMiLCAic3JjL2NvcmUvYWxnb3JpdGhtcy9TcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLnRzIiwgInNyYy9jb3JlL3NlcnZpY2VzL1NwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnRzIiwgInNyYy9mZWF0dXJlcy9ib29rLW1hbmFnZW1lbnQvdWkvVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbC50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvZXh0ZXJuYWwvV29yZFNlcnZpY2UudHMiLCAic3JjL2ZlYXR1cmVzL2Jvb2stbWFuYWdlbWVudC91aS9BZGRCb29rTW9kYWwudHMiLCAic3JjL2ZlYXR1cmVzL3dvcmQtbWFuYWdlbWVudC91aS9BZGRXb3Jkc01vZGFsLnRzIiwgInNyYy9zaGFyZWQvdmFsaWRhdGlvbi50cyIsICJzcmMvc2hhcmVkL0NhbmNlbGxhdGlvblRva2VuLnRzIiwgInNyYy9zaGFyZWQvY29udGFpbmVyL0RJQ29udGFpbmVyLnRzIiwgInNyYy9jb3JlL2VudGl0aWVzL1ZvY2FidWxhcnkudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL0FkZFdvcmRVc2VDYXNlLnRzIiwgInNyYy9jb3JlL2VudGl0aWVzL0Jvb2sudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL0NyZWF0ZUJvb2tVc2VDYXNlLnRzIiwgInNyYy9jb3JlL3VzZS1jYXNlcy9HZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UudHMiLCAic3JjL2NvcmUvdXNlLWNhc2VzL1Jldmlld1dvcmRVc2VDYXNlLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvQm9va1JlcG9zaXRvcnlBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZS50cyIsICJzcmMvaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2VBZGFwdGVyLnRzIiwgInNyYy9pbmZyYXN0cnVjdHVyZS9leHRlcm5hbC9Xb3JkU2VydmljZUFkYXB0ZXIudHMiLCAic3JjL2NvcmUvcG9ydHMvc2VydmljZXMvSVRUU1NlcnZpY2VBZGFwdGVyLnRzIiwgInNyYy9zaGFyZWQvY29udGFpbmVyL1NlcnZpY2VSZWdpc3RyeS50cyIsICJzcmMvc2hhcmVkL0Vycm9yQm91bmRhcnkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTLCBWb2NhYnVsYXJ5U2V0dGluZ1RhYiB9IGZyb20gJy4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5TW9kYWwgfSBmcm9tICcuL2ZlYXR1cmVzL3ZvY2FidWxhcnktbGVhcm5pbmcvdWkvVm9jYWJ1bGFyeU1vZGFsJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuL1ZvY2FidWxhcnlDYXJkJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCB9IGZyb20gJy4vZmVhdHVyZXMvYm9vay1tYW5hZ2VtZW50L3VpL1ZvY2FidWxhcnlNYW5hZ2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyIH0gZnJvbSAnLi9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XHJcbmltcG9ydCB7IEFkZFdvcmRzTW9kYWwgfSBmcm9tICcuL2ZlYXR1cmVzL3dvcmQtbWFuYWdlbWVudC91aS9BZGRXb3Jkc01vZGFsJztcclxuaW1wb3J0IHsgQWRkQm9va01vZGFsIH0gZnJvbSAnLi9mZWF0dXJlcy9ib29rLW1hbmFnZW1lbnQvdWkvQWRkQm9va01vZGFsJztcclxuaW1wb3J0IHsgTExNU2VydmljZSB9IGZyb20gJy4vaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBlbmNyeXB0QXBpS2V5LCBkZWNyeXB0QXBpS2V5IH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG4vLyBESSBDb250YWluZXJcclxuaW1wb3J0IHsgRElDb250YWluZXIsIGNvbnRhaW5lciB9IGZyb20gJy4vc2hhcmVkL2NvbnRhaW5lci9ESUNvbnRhaW5lcic7XHJcbmltcG9ydCB7IFNlcnZpY2VSZWdpc3RyeSB9IGZyb20gJy4vc2hhcmVkL2NvbnRhaW5lci9TZXJ2aWNlUmVnaXN0cnknO1xyXG5cclxuLy8gRXJyb3IgQm91bmRhcnlcclxuaW1wb3J0IHsgRXJyb3JCb3VuZGFyeSB9IGZyb20gJy4vc2hhcmVkL0Vycm9yQm91bmRhcnknO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncztcclxuICAgIGRhdGFiYXNlTWFuYWdlcjogVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcjtcclxuICAgIGxsbVNlcnZpY2U6IExMTVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogRElDb250YWluZXI7XHJcblxyXG4gICAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgICAgIC8vIEVycm9yIEJvdW5kYXJ5IFx1Q0QwOFx1QUUzMFx1RDY1NFxyXG4gICAgICAgIGNvbnN0IGVycm9yQm91bmRhcnkgPSBFcnJvckJvdW5kYXJ5LmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgZXJyb3JCb3VuZGFyeS5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4XHVCQ0M0IFx1QzVEMFx1QjdFQyBcdUQ1NzhcdUI0RTRcdUI3RUMgXHVCNEYxXHVCODVEXHJcbiAgICAgICAgZXJyb3JCb3VuZGFyeS5yZWdpc3RlckhhbmRsZXIoJ1ZvY2FidWxhcnlQbHVnaW4nLCAoZXJyb3JJbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQyBcdUI4NUNcdUM5QzFcclxuICAgICAgICAgICAgaWYgKGVycm9ySW5mby5jb250ZXh0Py5pbmNsdWRlcygnQVBJJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFQSSBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDXHVCMjk0IFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUI2MTBcdUIyOTQgXHVEM0Y0XHVCQzMxIFx1Q0M5OFx1QjlBQ1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdBUEkgXHVDNUQwXHVCN0VDIFx1QUMxMFx1QzlDMCwgXHVEM0Y0XHVCQzMxIFx1QkFBOFx1QjREQ1x1Qjg1QyBcdUM4MDRcdUQ2NTgnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuICAgICAgICAvLyBESSBDb250YWluZXIgXHVDRDA4XHVBRTMwXHVENjU0XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgU2VydmljZVJlZ2lzdHJ5LnJlZ2lzdGVyU2VydmljZXModGhpcy5jb250YWluZXIsIHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QjlFNFx1QjJDOFx1QzgwMCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICB0aGlzLmRhdGFiYXNlTWFuYWdlciA9IHRoaXMuY29udGFpbmVyLnJlc29sdmU8Vm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlcj4oJ2RhdGFiYXNlTWFuYWdlcicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExMTSBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDRDA4XHVBRTMwXHVENjU0XHJcbiAgICAgICAgdGhpcy5sbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2UodGhpcy5zZXR0aW5ncyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTUQgXHVEMzBDXHVDNzdDIFx1QUUzMFx1QkMxOCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0XHVDN0E1IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0REMgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IGRhdGEuanNvblx1QzVEMFx1QzExQyBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNTggXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWlncmF0ZUZyb21MZWdhY3lEYXRhKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVEMEVEIFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVm9jYWJ1bGFyeVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gXHVCQTg1XHVCODM5XHVDNUI0IFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnb3Blbi12b2NhYnVsYXJ5LW1vZGFsJyxcclxuICAgICAgICAgICAgbmFtZTogJ1x1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjQgXHVENTU5XHVDMkI1IFx1QzJEQ1x1Qzc5MScsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkNGNFx1QUUzMCBcdUJBODVcdUI4MzlcdUM1QjQgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdvcGVuLXZvY2FidWxhcnktbWFuYWdlcicsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0Y0XHVBRTMwJyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5ldyBWb2NhYnVsYXJ5TWFuYWdlck1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCBcdUJBODVcdUI4MzlcdUM1QjQgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdhZGQtd29yZHMnLFxyXG4gICAgICAgICAgICBuYW1lOiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgQWRkV29yZHNNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QjlBQ1x1QkNGOCBcdUM1NDRcdUM3NzRcdUNGNTggXHVDRDk0XHVBQzAwIChcdUNDNDUgXHVDNTQ0XHVDNzc0XHVDRjU4KVxyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignYm9vaycsICdcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0Y0XHVBRTMwJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgVm9jYWJ1bGFyeU1hbmFnZXJNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9udW5sb2FkKCkge1xyXG4gICAgICAgIC8vIEVycm9yIEJvdW5kYXJ5IFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgIGNvbnN0IGVycm9yQm91bmRhcnkgPSBFcnJvckJvdW5kYXJ5LmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgZXJyb3JCb3VuZGFyeS51bnJlZ2lzdGVySGFuZGxlcignVm9jYWJ1bGFyeVBsdWdpbicpO1xyXG4gICAgICAgIGVycm9yQm91bmRhcnkuY2xlYW51cCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOUNDIFx1Qjg1Q1x1QjREQyAoXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QzY0MCBcdUJEODRcdUI5QUMpXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcclxuICAgICAgICBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgJ3NldHRpbmdzJyBpbiBkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIFx1RDFCNVx1RDU2OVx1QjQxQyBcdUIzNzBcdUM3NzRcdUQxMzBcdUM1RDBcdUMxMUMgXHVDMTI0XHVDODE1IFx1QkQ4MFx1QkQ4NFx1QjlDQyBcdUNEOTRcdUNEOUNcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEuc2V0dGluZ3MpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgJ2FwaUtleScgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVENjE1XHVDMkREXHVDNzU4IFx1QzEyNFx1QzgxNSBcdUIzNzBcdUM3NzRcdUQxMzBcdUM3NzggXHVBQ0JEXHVDNkIwXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdUMxMjRcdUM4MTUgXHVCMzcwXHVDNzc0XHVEMTMwXHVBQzAwIFx1QzVDNlx1QjI5NCBcdUFDQkRcdUM2QjAgXHVBRTMwXHVCQ0Y4XHVBQzEyIFx1QzBBQ1x1QzZBOVxyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBUEkgXHVEMEE0IFx1QzU1NFx1RDYzOFx1RDY1NCBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNThcclxuICAgICAgICBhd2FpdCB0aGlzLm1pZ3JhdGVBcGlLZXlzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XHJcbiAgICBwcml2YXRlIGFzeW5jIG1pZ3JhdGVBcGlLZXlzKCkge1xyXG4gICAgICAgIGxldCBuZWVkc1NhdmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gbGxtQXBpS2V5XHVBQzAwIFx1RDNDOVx1QkIzOFx1QzczQ1x1Qjg1QyBcdUM4MDBcdUM3QTVcdUI0MThcdUM1QjQgXHVDNzg4XHVCMjk0XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUNFMCBcdUM1NTRcdUQ2MzhcdUQ2NTRcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5sbG1BcGlLZXkgJiYgdGhpcy5pc1BsYWluVGV4dEFwaUtleSh0aGlzLnNldHRpbmdzLmxsbUFwaUtleSkpIHtcclxuICAgICAgICAgICAgY29uc3QgcGxhaW5LZXkgPSB0aGlzLnNldHRpbmdzLmxsbUFwaUtleTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5sbG1BcGlLZXkgPSBlbmNyeXB0QXBpS2V5KHBsYWluS2V5KTtcclxuICAgICAgICAgICAgbmVlZHNTYXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QjJFNFx1Qjk3OCBBUEkgXHVEMEE0XHVCNEU0XHVCM0M0IFx1RDNDOVx1QkIzOFx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NThcdUFDRTAgXHVDNTU0XHVENjM4XHVENjU0IChcdUFFMzBcdUM4NzRcdUM1RDAgXHVDNTU0XHVENjM4XHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUFDQkRcdUM2QjApXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5ICYmIHRoaXMuaXNQbGFpblRleHRBcGlLZXkodGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXkpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYWluS2V5ID0gdGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mub3BlbmFpQXBpS2V5ID0gZW5jcnlwdEFwaUtleShwbGFpbktleSk7XHJcbiAgICAgICAgICAgIG5lZWRzU2F2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkgJiYgdGhpcy5pc1BsYWluVGV4dEFwaUtleSh0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSkpIHtcclxuICAgICAgICAgICAgY29uc3QgcGxhaW5LZXkgPSB0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXkgPSBlbmNyeXB0QXBpS2V5KHBsYWluS2V5KTtcclxuICAgICAgICAgICAgbmVlZHNTYXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleSAmJiB0aGlzLmlzUGxhaW5UZXh0QXBpS2V5KHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5KSkge1xyXG4gICAgICAgICAgICBjb25zdCBwbGFpbktleSA9IHRoaXMuc2V0dGluZ3MuZ29vZ2xlQXBpS2V5O1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleSA9IGVuY3J5cHRBcGlLZXkocGxhaW5LZXkpO1xyXG4gICAgICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVCQ0MwXHVBQ0JEXHVDMEFDXHVENTZEXHVDNzc0IFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM4MDBcdUM3QTVcclxuICAgICAgICBpZiAobmVlZHNTYXZlKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFQSSBcdUQwQTRcdUFDMDAgXHVEM0M5XHVCQjM4XHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QjI5NCBcdUQ1RUNcdUQzN0MgXHVENTY4XHVDMjE4XHJcbiAgICBwcml2YXRlIGlzUGxhaW5UZXh0QXBpS2V5KGFwaUtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFhcGlLZXkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVEMEE0XHVCOTdDIFx1QkNGNVx1RDYzOFx1RDY1NFx1RDU3NFx1QkNGNFx1QUNFMCBcdUM2RDBcdUJDRjhcdUFDRkMgXHVCMkU0XHVCOTc0XHVCQTc0IFx1RDNDOVx1QkIzOFx1QzczQ1x1Qjg1QyBcdUFDMDRcdUM4RkNcclxuICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gZGVjcnlwdEFwaUtleShhcGlLZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVjcnlwdGVkID09PSBhcGlLZXk7IC8vIFx1QkNGNVx1RDYzOFx1RDY1NCBcdUFDQjBcdUFDRkNcdUFDMDAgXHVDNkQwXHVCQ0Y4XHVBQ0ZDIFx1QUMxOVx1QzczQ1x1QkE3NCBcdUQzQzlcdUJCMzhcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4XHVENTU4XHVCQTc0IFx1RDNDOVx1QkIzOFx1Qzc3QyBcdUFDMDBcdUIyQTVcdUMxMzFcdUM3NzQgXHVDNzg4XHVDNzRDXHJcbiAgICAgICAgICAgIC8vIFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBBUEkgXHVEMEE0IFx1RDMyOFx1RDEzNCBcdUQ2NTVcdUM3NzhcclxuICAgICAgICAgICAgcmV0dXJuIGFwaUtleS5zdGFydHNXaXRoKCdzay0nKSB8fCBhcGlLZXkuc3RhcnRzV2l0aCgnc2stYW50LScpIHx8IGFwaUtleS5zdGFydHNXaXRoKCdBSXphJykgfHwgYXBpS2V5Lmxlbmd0aCA+IDIwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlQWxsRGF0YSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExMTSBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKHRoaXMubGxtU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLmxsbVNlcnZpY2UgPSBuZXcgTExNU2VydmljZSh0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gREkgQ29udGFpbmVyXHVDNUQwIFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcclxuICAgICAgICAgICAgU2VydmljZVJlZ2lzdHJ5LnVwZGF0ZVNldHRpbmdzKHRoaXMuY29udGFpbmVyLCB0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVBRTMwXHVDODc0IGRhdGEuanNvblx1QzVEMFx1QzExQyBNRCBcdUQzMENcdUM3N0NcdUI4NUMgXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XHJcbiAgICBwcml2YXRlIGFzeW5jIG1pZ3JhdGVGcm9tTGVnYWN5RGF0YSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBzYXZlZERhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XHJcbiAgICAgICAgICAgIGlmIChzYXZlZERhdGEgJiYgc2F2ZWREYXRhLmRhdGFiYXNlICYmIEFycmF5LmlzQXJyYXkoc2F2ZWREYXRhLmRhdGFiYXNlLndvcmRzKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVnYWN5RGF0YSA9IHNhdmVkRGF0YS5kYXRhYmFzZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVBRTMwXHVDODc0IFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNUQwIFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgICAgICAgICAgaWYgKGxlZ2FjeURhdGEud29yZHMgJiYgbGVnYWN5RGF0YS53b3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIGxlZ2FjeURhdGEud29yZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmFkZFdvcmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLndvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va0lkOiAnZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogd29yZC5wcm9udW5jaWF0aW9uIHx8ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgXHVCMkU4XHVDNUI0IFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OCBcdUMyRTRcdUQzMjg6ICR7d29yZC53b3JkfWAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHVDMTI0XHVDODE1IFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OFxyXG4gICAgICAgICAgICAgICAgaWYgKGxlZ2FjeURhdGEuc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci51cGRhdGVTZXR0aW5ncyhsZWdhY3lEYXRhLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJBQThcdUI0RTAgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwMFx1QzdBNSAoXHVDMTI0XHVDODE1XHVCOUNDIFx1QzgwMFx1QzdBNSwgXHVCMkU4XHVDNUI0XHVDN0E1IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QjI5NCBNRCBcdUQzMENcdUM3N0NcdUI4NUMgXHVDNzkwXHVCM0Q5IFx1QzgwMFx1QzdBNVx1QjQyOClcclxuICAgIGFzeW5jIHNhdmVBbGxEYXRhKCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzXHJcbiAgICAgICAgfTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKGRhdGEpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUQwQzBcdUM3ODUgXHVDMTIwXHVDNUI4IFx1Q0Q5NFx1QUMwMFxyXG5leHBvcnQgeyBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiwgQWRkQm9va01vZGFsIH07ICIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSwgVEZvbGRlciwgcmVxdWVzdFVybCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBMTE1TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBlbmNyeXB0QXBpS2V5LCBkZWNyeXB0QXBpS2V5LCBtYXNrQXBpS2V5IH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWb2NhYnVsYXJ5U2V0dGluZ3Mge1xyXG4gICAgYXBpS2V5OiBzdHJpbmc7XHJcbiAgICBkZWZhdWx0TGFuZ3VhZ2U6IHN0cmluZztcclxuICAgIHNob3dTaW1pbGFyV29yZHM6IGJvb2xlYW47XHJcbiAgICBzaG93RXhhbXBsZXM6IGJvb2xlYW47XHJcbiAgICBleGFtcGxlc0NvdW50OiBudW1iZXI7XHJcbiAgICAvLyBcdUFDMDEgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVCQ0M0IFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBBUEkgXHVEMEE0XHJcbiAgICBvcGVuYWlBcGlLZXk6IHN0cmluZztcclxuICAgIGFudGhyb3BpY0FwaUtleTogc3RyaW5nO1xyXG4gICAgZ29vZ2xlQXBpS2V5OiBzdHJpbmc7XHJcbiAgICBsbG1Qcm92aWRlcjogJ29wZW5haScgfCAnYW50aHJvcGljJyB8ICdnb29nbGUnO1xyXG4gICAgbGxtTW9kZWw6IHN0cmluZztcclxuICAgIGVuYWJsZUFkdmFuY2VkRmVhdHVyZXM6IGJvb2xlYW47XHJcbiAgICAvLyBcdUJDRjVcdUMyQjUgXHVENjU0XHVCQTc0IFx1QjE5Mlx1Qzc3NCBcdUMxMjRcdUM4MTVcclxuICAgIHJldmlld01vZGFsSGVpZ2h0OiBudW1iZXI7XHJcbiAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDODAwXHVDN0E1IFx1RDNGNFx1QjM1NCBcdUFDQkRcdUI4NUNcclxuICAgIHZvY2FidWxhcnlGb2xkZXJQYXRoOiBzdHJpbmc7XHJcbiAgICAvLyBUVFMgXHVDMTI0XHVDODE1XHJcbiAgICB0dHNFbmFibGVkOiBib29sZWFuO1xyXG4gICAgdHRzUHJvdmlkZXI6ICdjaGF0dGVyYm94JyB8ICdnb29nbGUtY2xvdWQnO1xyXG4gICAgdHRzVm9pY2U6IHN0cmluZztcclxuICAgIHR0c1BsYXliYWNrU3BlZWQ6IG51bWJlcjtcclxuICAgIHR0c0F1dG9QbGF5OiBib29sZWFuO1xyXG4gICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDODA0XHVDNkE5IFx1QzEyNFx1QzgxNVxyXG4gICAgY2hhdHRlcmJveEFwaVVybDogc3RyaW5nO1xyXG4gICAgY2hhdHRlcmJveEV4YWdnZXJhdGlvbjogbnVtYmVyO1xyXG4gICAgY2hhdHRlcmJveENmZ1dlaWdodDogbnVtYmVyO1xyXG4gICAgY2hhdHRlcmJveFRlbXBlcmF0dXJlOiBudW1iZXI7XHJcbiAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzgwNFx1QzZBOSBcdUMxMjRcdUM4MTVcclxuICAgIGdvb2dsZUNsb3VkVFRTQXBpS2V5OiBzdHJpbmc7XHJcbiAgICBnb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZTogc3RyaW5nO1xyXG4gICAgZ29vZ2xlQ2xvdWRUVFNTcGVha2luZ1JhdGU6IG51bWJlcjtcclxuICAgIGdvb2dsZUNsb3VkVFRTUGl0Y2g6IG51bWJlcjtcclxuICAgIC8vIFRUUyBcdUNFOTBcdUMyREMgXHVDMTI0XHVDODE1XHJcbiAgICB0dHNDYWNoZUVuYWJsZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBWb2NhYnVsYXJ5U2V0dGluZ3MgPSB7XHJcbiAgICBhcGlLZXk6ICcnLFxyXG4gICAgZGVmYXVsdExhbmd1YWdlOiAna28nLFxyXG4gICAgc2hvd1NpbWlsYXJXb3JkczogdHJ1ZSxcclxuICAgIHNob3dFeGFtcGxlczogdHJ1ZSxcclxuICAgIGV4YW1wbGVzQ291bnQ6IDMsXHJcbiAgICBvcGVuYWlBcGlLZXk6ICcnLFxyXG4gICAgYW50aHJvcGljQXBpS2V5OiAnJyxcclxuICAgIGdvb2dsZUFwaUtleTogJycsXHJcbiAgICBsbG1Qcm92aWRlcjogJ29wZW5haScsXHJcbiAgICBsbG1Nb2RlbDogJ2dlbWluaS0xLjAtcHJvLWxhdGVzdCcsXHJcbiAgICBlbmFibGVBZHZhbmNlZEZlYXR1cmVzOiBmYWxzZSxcclxuICAgIHJldmlld01vZGFsSGVpZ2h0OiA4NSxcclxuICAgIHZvY2FidWxhcnlGb2xkZXJQYXRoOiAnVm9jYWJ1bGFyeScsXHJcbiAgICB0dHNFbmFibGVkOiB0cnVlLFxyXG4gICAgdHRzUHJvdmlkZXI6ICdjaGF0dGVyYm94JyxcclxuICAgIHR0c1ZvaWNlOiAnYWxsb3knLFxyXG4gICAgdHRzUGxheWJhY2tTcGVlZDogMS4wLFxyXG4gICAgdHRzQXV0b1BsYXk6IGZhbHNlLFxyXG4gICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVBRTMwXHVCQ0Y4XHVBQzEyXHJcbiAgICBjaGF0dGVyYm94QXBpVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo0MTIzJywgLy8gXHVBQ0JEXHVBQ0UwOiBIVFRQXHVCMjk0IFx1QkNGNFx1QzU0OFx1QzVEMCBcdUNERThcdUM1N0RcdUQ1NjlcdUIyQzhcdUIyRTQuIFx1QUMwMFx1QjJBNVx1RDU1OFx1QkE3NCBIVFRQU1x1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NThcdUMxMzhcdUM2OTQuXHJcbiAgICBjaGF0dGVyYm94RXhhZ2dlcmF0aW9uOiAwLjcsXHJcbiAgICBjaGF0dGVyYm94Q2ZnV2VpZ2h0OiAwLjQsXHJcbiAgICBjaGF0dGVyYm94VGVtcGVyYXR1cmU6IDAuOSxcclxuICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVBRTMwXHVCQ0Y4XHVBQzEyXHJcbiAgICBnb29nbGVDbG91ZFRUU0FwaUtleTogJycsXHJcbiAgICBnb29nbGVDbG91ZFRUU0xhbmd1YWdlQ29kZTogJ2VuLVVTJyxcclxuICAgIGdvb2dsZUNsb3VkVFRTU3BlYWtpbmdSYXRlOiAxLjAsXHJcbiAgICBnb29nbGVDbG91ZFRUU1BpdGNoOiAwLjAsXHJcbiAgICAvLyBUVFMgXHVDRTkwXHVDMkRDIFx1QzEyNFx1QzgxNVxyXG4gICAgdHRzQ2FjaGVFbmFibGVkOiB0cnVlXHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICAgIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjQgXHVENTU5XHVDMkI1IFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUMxMjRcdUM4MTUnIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZUJhc2ljU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlTExNU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlVFRTU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlQWR2YW5jZWRTZXR0aW5ncyhjb250YWluZXJFbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVCYXNpY1NldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QUUzMFx1QkNGOCBcdUMxMjRcdUM4MTUnIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QUUzMFx1QkNGOCBcdUM1QjhcdUM1QjQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0IFx1QjczQlx1Qzc0NCBcdUQ0NUNcdUMyRENcdUQ1NjAgXHVDNUI4XHVDNUI0XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2tvJywgJ1x1RDU1Q1x1QUQ2RFx1QzVCNCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbicsICdFbmdsaXNoJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2phJywgJ1x1NjVFNVx1NjcyQ1x1OEE5RScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdExhbmd1YWdlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRMYW5ndWFnZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjQgXHVENDVDXHVDMkRDJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1RDU1OVx1QzJCNVx1RDU2MCBcdUI1NEMgXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUQ1NjhcdUFFRDggXHVENDVDXHVDMkRDXHVENTY5XHVCMkM4XHVCMkU0LicpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTaW1pbGFyV29yZHMpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1NpbWlsYXJXb3JkcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QzYwOFx1QkIzOCBcdUQ0NUNcdUMyREMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVENTU5XHVDMkI1XHVENTYwIFx1QjU0QyBcdUM2MDhcdUJCMzhcdUI0RTRcdUM3NDQgXHVENTY4XHVBRUQ4IFx1RDQ1Q1x1QzJEQ1x1RDU2OVx1QjJDOFx1QjJFNC4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RXhhbXBsZXMpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0V4YW1wbGVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNjA4XHVCQjM4IFx1QUMxQ1x1QzIxOCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ0NUNcdUMyRENcdUQ1NjAgXHVDNjA4XHVCQjM4XHVDNzU4IFx1QUMxQ1x1QzIxOFx1Qjk3QyBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDEsIDEwLCAxKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YW1wbGVzQ291bnQpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YW1wbGVzQ291bnQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUxMTVNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0xMTSBBUEkgXHVDMTI0XHVDODE1JyB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUFDRTBcdUFFMDkgXHVBRTMwXHVCMkE1IFx1RDY1Q1x1QzEzMVx1RDY1NCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdMTE0gQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU1QyBcdUFDRTBcdUFFMDkgXHVBRTMwXHVCMkE1XHVDNzQ0IFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU2OVx1QjJDOFx1QjJFNC4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBZHZhbmNlZEZlYXR1cmVzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUFkdmFuY2VkRmVhdHVyZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdMTE0gXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QzBBQ1x1QzZBOVx1RDU2MCBMTE0gQVBJIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdvcGVuYWknLCAnT3BlbkFJIChHUFQpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2FudGhyb3BpYycsICdBbnRocm9waWMgKENsYXVkZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ29vZ2xlJywgJ0dvb2dsZSAoR2VtaW5pKScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXIpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtUHJvdmlkZXIgPSB2YWx1ZSBhcyAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dvb2dsZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnb3BlbmFpJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Nb2RlbCA9ICdncHQtNC4xJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnYW50aHJvcGljJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Nb2RlbCA9ICdjbGF1ZGUtMy01LXNvbm5ldCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ2dvb2dsZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwgPSAnZ2VtaW5pLTIuNS1mbGFzaCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZU1vZGVsU2VsZWN0aW9uKGNvbnRhaW5lckVsKTtcclxuXHJcbiAgICAgICAgLy8gXHVBQzAxIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1QkNDNCBBUEkgXHVEMEE0IFx1QzEyNFx1QzgxNVxyXG4gICAgICAgIHRoaXMuY3JlYXRlQXBpS2V5U2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0FQSSBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1RDYwNFx1QzdBQyBcdUMxMjBcdUQwRERcdUI0MUMgXHVDODFDXHVBQ0Y1XHVDNUM1XHVDQ0I0XHVDNzU4IEFQSSBcdUQwQTRcdUFDMDAgXHVDNjJDXHVCQzE0XHVCOTc0XHVBQzhDIFx1QzEyNFx1QzgxNVx1QjQxOFx1QzVDOFx1QjI5NFx1QzlDMCBcdUQxNENcdUMyQTRcdUQyQjhcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzkxMS4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2UodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBsbG1TZXJ2aWNlLnRlc3RDb25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBBUEkgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNSEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBBUEkgXHVDNUYwXHVBQ0IwIFx1QzJFNFx1RDMyODogJyArIHJlc3VsdC5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQVBJIFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjg6ICcgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVEMTRDXHVDMkE0XHVEMkI4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlTW9kZWxTZWxlY3Rpb24oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBUEkgXHVCQUE4XHVCMzc4JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QzBBQ1x1QzZBOVx1RDU2MCBMTE0gXHVCQUE4XHVCMzc4XHVDNzQ0IFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Qcm92aWRlcjtcclxuICAgICAgICAgICAgICAgIGlmIChwcm92aWRlciA9PT0gJ29wZW5haScpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNC4xJywgJ0dQVC00LjEnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNG8nLCAnR1BULTRvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ3B0LTRvLW1pbmknLCAnR1BULTRvIE1pbmknKSAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNC4xLWxvbmcnLCAnR1BULTQuMSAoTG9uZyBDb250ZXh0KScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dwdC00LjUtcHJldmlldycsICdHUFQtNC41IFByZXZpZXcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncHQtNC41LXByZXZpZXctMicsICdHUFQtNC41IFByZXZpZXcgMicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm92aWRlciA9PT0gJ2FudGhyb3BpYycpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGF1ZGUgMy41IFx1QkFBOFx1QjM3OFx1QjRFNFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy01LXNvbm5ldCcsICdDbGF1ZGUgMy41IFNvbm5ldCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTUtaGFpa3UnLCAnQ2xhdWRlIDMuNSBIYWlrdScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTUtb3B1cycsICdDbGF1ZGUgMy41IE9wdXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGF1ZGUgMy43IFx1QkFBOFx1QjM3OFx1QjRFNFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy03LXNvbm5ldCcsICdDbGF1ZGUgMy43IFNvbm5ldCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTctaGFpa3UnLCAnQ2xhdWRlIDMuNyBIYWlrdScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NsYXVkZS0zLTctb3B1cycsICdDbGF1ZGUgMy43IE9wdXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjbGF1ZGUtMy01LWZsYXNoJywgJ0NsYXVkZSAzLjUgRmxhc2gnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdnb29nbGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ2VtaW5pLTEuNS1wcm8tbGF0ZXN0JywgJ0dlbWluaSAxLjUgUHJvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ2VtaW5pLTIuNS1mbGFzaCcsICdHZW1pbmkgMi41IEZsYXNoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZ2VtaW5pLTIuNS1wcm8nLCAnR2VtaW5pIDIuNSBQcm8nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdnZW1pbmktMS41LWZsYXNoLWxhdGVzdCcsICdHZW1pbmkgMS41IEZsYXNoJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtTW9kZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Nb2RlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVBcGlLZXlTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAvLyBPcGVuQUkgQVBJIFx1RDBBNFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnT3BlbkFJIEFQSSBcdUQwQTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnT3BlbkFJIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LiAoc2stLi4uXHVCODVDIFx1QzJEQ1x1Qzc5MSknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRLZXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignc2stLi4uJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFza2VkS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVDMEFDXHVDNkE5XHVDNzkwXHVBQzAwIFx1Qzc4NVx1QjgyNVx1RDU1QyBcdUFDMTJcdUM3NzQgXHVCOUM4XHVDMkE0XHVEMEI5XHVCNDFDIFx1QUMxMlx1QUNGQyBcdUIyRTRcdUI5NzRcdUJBNzQgXHVDMEM4XHVCODVDXHVDNkI0IFx1RDBBNFx1Qjg1QyBcdUFDMDRcdUM4RkNcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBtYXNrZWRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZEtleSA9IGVuY3J5cHRBcGlLZXkodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpQXBpS2V5ID0gZW5jcnlwdGVkS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFudGhyb3BpYyBBUEkgXHVEMEE0XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBbnRocm9waWMgQVBJIFx1RDBBNCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdBbnRocm9waWMgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIChzay1hbnQtLi4uXHVCODVDIFx1QzJEQ1x1Qzc5MSknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRLZXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignc2stYW50LS4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBlbmNyeXB0QXBpS2V5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSA9IGVuY3J5cHRlZEtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBHb29nbGUgQVBJIFx1RDBBNFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnR29vZ2xlIEFQSSBcdUQwQTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnR29vZ2xlIEFQSSBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEtleSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUFwaUtleTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlY3J5cHRlZEtleSA9IGRlY3J5cHRBcGlLZXkoY3VycmVudEtleSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXNrZWRLZXkgPSBtYXNrQXBpS2V5KGRlY3J5cHRlZEtleSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdBSXphLi4uJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFza2VkS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBtYXNrZWRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZEtleSA9IGVuY3J5cHRBcGlLZXkodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQXBpS2V5ID0gZW5jcnlwdGVkS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVBZHZhbmNlZFNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QUNFMFx1QUUwOSBcdUMxMjRcdUM4MTUnIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUQzRjRcdUIzNTQgXHVCQUE5XHVCODVEIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgIGNvbnN0IGZvbGRlcnMgPSB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcik7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzgwMFx1QzdBNSBcdUQzRjRcdUIzNTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDMwQ1x1Qzc3Q1x1QjRFNFx1Qzc3NCBcdUM4MDBcdUM3QTVcdUI0MjAgXHVEM0Y0XHVCMzU0XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4gKFx1QUUzMFx1QkNGOFx1QUMxMjogVm9jYWJ1bGFyeSknKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9sZGVycy5mb3JFYWNoKGZvbGRlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKGZvbGRlci5wYXRoLCBmb2xkZXIucGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCk7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVZvY2FidWxhcnlGb2xkZXJQYXRoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkcm9wZG93bjtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVCQ0Y1XHVDMkI1IFx1RDY1NFx1QkE3NCBcdUIxOTJcdUM3NzQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCQ0Y1XHVDMkI1IFx1QkFBOFx1QjJFQ1x1Qzc1OCBcdUIxOTJcdUM3NzRcdUI5N0MgXHVENjU0XHVCQTc0IFx1QjE5Mlx1Qzc3NFx1Qzc1OCBcdUJDMzFcdUJEODRcdUM3MjhcdUI4NUMgXHVDMTI0XHVDODE1XHVENTU4XHVDMTM4XHVDNjk0LiAoXHVBRTMwXHVCQ0Y4XHVBQzEyOiA4NSUpJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDUwLCA5NSwgNSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodClcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3N0NcdUM3N0MgXHVENTU5XHVDMkI1IFx1QkFBOVx1RDQ1QycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ1NThcdUI4RThcdUM1RDAgXHVENTU5XHVDMkI1XHVENTYwIFx1QjJFOFx1QzVCNFx1Qzc1OCBcdUJBQTlcdUQ0NUMgXHVBQzFDXHVDMjE4XHVCOTdDIFx1QzEyNFx1QzgxNVx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoNSwgNTAsIDUpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyPy5nZXREYXRhRm9yU2F2ZSgpPy5zZXR0aW5ncz8uZGFpbHlHb2FsIHx8IDEwKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXI/LnVwZGF0ZVNldHRpbmdzKHsgZGFpbHlHb2FsOiB2YWx1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUJDRjVcdUMyQjUgXHVBQzA0XHVBQ0E5IChcdUM3N0MpJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUIyRTRcdUMyREMgXHVCQ0Y1XHVDMkI1XHVENTYwIFx1QUMwNFx1QUNBOVx1Qzc0NCBcdUMxMjRcdUM4MTVcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDEsIDMwLCAxKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8uZ2V0RGF0YUZvclNhdmUoKT8uc2V0dGluZ3M/LnJldmlld0ludGVydmFsIHx8IDEpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlcj8udXBkYXRlU2V0dGluZ3MoeyByZXZpZXdJbnRlcnZhbDogdmFsdWUgfSk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVUVFNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdUVFMgKFx1Qzc0Q1x1QzEzMSBcdUM3N0RcdUFFMzApIFx1QzEyNFx1QzgxNScgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHR0c1RvZ2dsZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1RUUyBcdUQ2NUNcdUMxMzFcdUQ2NTQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0XHVDNjQwIFx1QzYwOFx1QkIzOFx1Qzc0NCBcdUM3NENcdUMxMzFcdUM3M0NcdUI4NUMgXHVDNzdEXHVDNUI0XHVDOEZDXHVCMjk0IFx1QUUzMFx1QjJBNVx1Qzc0NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzRW5hYmxlZClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNFbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVFRTIFx1QzEyNFx1QzgxNSBVSSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRUU1NldHRpbmdzVmlzaWJpbGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBUVFMgXHVDODFDXHVBQ0Y1XHVDNzkwIFx1QzEyMFx1RDBERFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnVFRTIFx1QzgxQ1x1QUNGNVx1Qzc5MCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUMwQUNcdUM2QTlcdUQ1NjAgVFRTIFx1QzExQ1x1QkU0NFx1QzJBNFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCd0dHMtcHJvdmlkZXItc2V0dGluZycpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2hhdHRlcmJveCcsICdDaGF0dGVyYm94IFRUUyAoXHVCODVDXHVDRUVDKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdnb29nbGUtY2xvdWQnLCAnR29vZ2xlIENsb3VkIFRleHQtdG8tU3BlZWNoJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQcm92aWRlcilcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNQcm92aWRlciA9IHZhbHVlIGFzICdjaGF0dGVyYm94JyB8ICdnb29nbGUtY2xvdWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVFRTUHJvdmlkZXJTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBDaGF0dGVyYm94IFRUUyBcdUMxMjRcdUM4MTVcclxuICAgICAgICB0aGlzLmNyZWF0ZUNoYXR0ZXJib3hUVFNTZXR0aW5ncyhjb250YWluZXJFbCk7XHJcblxyXG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBUVFMgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgdGhpcy5jcmVhdGVHb29nbGVDbG91ZFRUU1NldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuXHJcbiAgICAgICAgLy8gXHVDNzkwXHVCM0Q5IFx1QzdBQ1x1QzBERCBcdUMxMjRcdUM4MTUgKFx1QUNGNVx1RDFCNSlcclxuICAgICAgICBjb25zdCBhdXRvUGxheVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Qzc5MFx1QjNEOSBcdUM3QUNcdUMwREQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVCMkU4XHVDNUI0IFx1Q0U3NFx1QjREQ1x1QUMwMCBcdUQ0NUNcdUMyRENcdUI0MjAgXHVCNTRDIFx1Qzc5MFx1QjNEOVx1QzczQ1x1Qjg1QyBcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzdEXHVDNUI0XHVDOTBEXHVCMkM4XHVCMkU0LicpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygndHRzLWF1dG9wbGF5LXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNBdXRvUGxheSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNBdXRvUGxheSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBUVFMgXHVDRTkwXHVDMkRDIFx1QUQwMFx1QjlBQyBcdUMxMzlcdUMxNThcclxuICAgICAgICB0aGlzLmNyZWF0ZVRUU0NhY2hlU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Q0QwOFx1QUUzMCBcdUMwQzFcdUQwREMgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgdGhpcy51cGRhdGVUVFNTZXR0aW5nc1Zpc2liaWxpdHkoKTtcclxuICAgICAgICAvLyBcdUM4MUNcdUFDRjVcdUM3OTBcdUJDQzQgXHVDMTI0XHVDODE1IFx1Q0QwOFx1QUUzMFx1RDY1NFxyXG4gICAgICAgIHRoaXMudXBkYXRlVFRTUHJvdmlkZXJTZXR0aW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcG9wdWxhdGVDaGF0dGVyYm94Vm9pY2VEcm9wZG93bihkcm9wZG93bjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLy8gQ2hhdHRlcmJveCBUVFMgXHVDOUMwXHVDNkQwIFx1Qzc0Q1x1QzEzMVx1QjRFNCAoT3BlbkFJIFx1RDYzOFx1RDY1OClcclxuICAgICAgICBjb25zdCBjaGF0dGVyYm94Vm9pY2VzID0gW1xyXG4gICAgICAgICAgICB7IHZhbHVlOiAnYWxsb3knLCBuYW1lOiAnQWxsb3kgKFx1QzkxMVx1QzEzMVx1QzgwMSknIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdlY2hvJywgbmFtZTogJ0VjaG8gKFx1QjBBOFx1QzEzMSknIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdmYWJsZScsIG5hbWU6ICdGYWJsZSAoXHVDNjAxXHVBRDZEXHVDMkREKScgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ29ueXgnLCBuYW1lOiAnT255eCAoXHVBRTRBXHVDNzQwIFx1QjBBOFx1QzEzMSknIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdub3ZhJywgbmFtZTogJ05vdmEgKFx1QzVFQ1x1QzEzMSknIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdzaGltbWVyJywgbmFtZTogJ1NoaW1tZXIgKFx1QkQ4MFx1QjREQ1x1QjdFQ1x1QzZCNCBcdUM1RUNcdUMxMzEpJyB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnY3VzdG9tJywgbmFtZTogJ0N1c3RvbSAoXHVDMEFDXHVDNkE5XHVDNzkwIFx1QzgxNVx1Qzc1OCknIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICAvLyBDaGF0dGVyYm94IFx1Qzc0Q1x1QzEzMVx1QjRFNCBcdUNEOTRcdUFDMDBcclxuICAgICAgICBjaGF0dGVyYm94Vm9pY2VzLmZvckVhY2gob3B0aW9uID0+IHtcclxuICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG9wdGlvbi52YWx1ZSwgb3B0aW9uLm5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUMyRTRcdUM4MUMgXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOSBcdUFDMDBcdUIyQTVcdUQ1NUMgXHVDNjAxXHVDNUI0IFx1Qzc0Q1x1QzEzMVx1QjRFNCBcdUNEOTRcdUFDMDBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB2b2ljZXMgPSBzcGVlY2hTeW50aGVzaXMuZ2V0Vm9pY2VzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZ2xpc2hWb2ljZXMgPSB2b2ljZXMuZmlsdGVyKHZvaWNlID0+IFxyXG4gICAgICAgICAgICAgICAgdm9pY2UubGFuZy5zdGFydHNXaXRoKCdlbi0nKSAmJiBcclxuICAgICAgICAgICAgICAgICF2b2ljZS5sYW5nLmluY2x1ZGVzKCdrbycpICYmXHJcbiAgICAgICAgICAgICAgICAhY2hhdHRlcmJveFZvaWNlcy5zb21lKG9wdCA9PiBvcHQudmFsdWUgPT09IHZvaWNlLm5hbWUpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZW5nbGlzaFZvaWNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUFENkNcdUJEODRcdUMxMjAgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJy0tLScsICctLS0gXHVDMkRDXHVDMkE0XHVEMTVDIFx1Qzc0Q1x1QzEzMSAtLS0nKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZW5nbGlzaFZvaWNlcy5mb3JFYWNoKHZvaWNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGAke3ZvaWNlLm5hbWV9ICgke3ZvaWNlLmxhbmd9KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKHZvaWNlLm5hbWUsIGRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdUM3NENcdUMxMzEgXHVCQUE5XHVCODVEXHVDNzQ0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVUVFNTZXR0aW5nc1Zpc2liaWxpdHkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgaXNFbmFibGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzRW5hYmxlZDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUJBQThcdUI0RTAgVFRTIFx1QUQwMFx1QjgyOCBcdUMxMjRcdUM4MTVcdUI0RTRcclxuICAgICAgICBjb25zdCBhbGxUdHNTZXR0aW5ncyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgICAgICAgJy50dHMtcHJvdmlkZXItc2V0dGluZywgLmNoYXR0ZXJib3gtYXBpLXVybC1zZXR0aW5nLCAuY2hhdHRlcmJveC12b2ljZS1zZXR0aW5nLCAuY2hhdHRlcmJveC1leGFnZ2VyYXRpb24tc2V0dGluZywgLmNoYXR0ZXJib3gtY2ZnLXNldHRpbmcsIC5jaGF0dGVyYm94LXRlbXBlcmF0dXJlLXNldHRpbmcsIC5nb29nbGUtY2xvdWQtdHRzLWd1aWRlLCAuZ29vZ2xlLWNsb3VkLWFwaS1rZXktc2V0dGluZywgLmdvb2dsZS1jbG91ZC1sYW5ndWFnZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXZvaWNlLXNldHRpbmcsIC5nb29nbGUtY2xvdWQtc3BlYWtpbmctcmF0ZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXBpdGNoLXNldHRpbmcsIC50dHMtYXV0b3BsYXktc2V0dGluZywgLnR0cy1jYWNoZS1oZWFkZXIsIC50dHMtY2FjaGUtZW5hYmxlZC1zZXR0aW5nLCAudHRzLWNhY2hlLWluZm8tc2V0dGluZywgLnR0cy1jYWNoZS1jbGVhci1zZXR0aW5nJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYWxsVHRzU2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHNldHRpbmcgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChpc0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3NldHRpbmdzLWRpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdzZXR0aW5ncy1lbmFibGVkJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3ducyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXJzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvZ2dsZXMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBidXR0b25zLmZvckVhY2goYnRuID0+IChidG4gYXMgSFRNTEJ1dHRvbkVsZW1lbnQpLmRpc2FibGVkID0gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25zLmZvckVhY2goZGQgPT4gKGRkIGFzIEhUTUxTZWxlY3RFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHNsaWRlcnMuZm9yRWFjaChzbGlkZXIgPT4gKHNsaWRlciBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZXMuZm9yRWFjaCh0b2dnbGUgPT4gKHRvZ2dsZSBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IGZhbHNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3NldHRpbmdzLWVuYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ3NldHRpbmdzLWRpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3ducyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXJzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvZ2dsZXMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBidXR0b25zLmZvckVhY2goYnRuID0+IChidG4gYXMgSFRNTEJ1dHRvbkVsZW1lbnQpLmRpc2FibGVkID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bnMuZm9yRWFjaChkZCA9PiAoZGQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLmRpc2FibGVkID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXJzLmZvckVhY2goc2xpZGVyID0+IChzbGlkZXIgYXMgSFRNTElucHV0RWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZXMuZm9yRWFjaCh0b2dnbGUgPT4gKHRvZ2dsZSBhcyBIVE1MSW5wdXRFbGVtZW50KS5kaXNhYmxlZCA9IHRydWUpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRpc2FibGVkID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUVFNcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDFDIFx1QUNCRFx1QzZCMCBcdUM4MUNcdUFDRjVcdUM3OTBcdUJDQzQgXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGlmIChpc0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVUVFNQcm92aWRlclNldHRpbmdzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHRlc3RDaGF0dGVyYm94Q29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hBcGlVcmx9L3YxL2F1ZGlvL3NwZWVjaGAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiAnQ29ubmVjdGlvbiB0ZXN0JyxcclxuICAgICAgICAgICAgICAgICAgICB2b2ljZTogJ2FsbG95J1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODQgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNSEnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVDMTFDXHVCQzg0IFx1Qzc1MVx1QjJGNSBcdUM2MjRcdUI5NTg6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2hhdHRlcmJveCBUVFMgXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0IFx1QzVGMFx1QUNCMCBcdUMyRTRcdUQzMjguIFx1QzExQ1x1QkM4NFx1QUMwMCBcdUMyRTRcdUQ1ODkgXHVDOTExXHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQ2hhdHRlcmJveFRUU1NldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIC8vIENoYXR0ZXJib3ggQVBJIFVSTCBcdUMxMjRcdUM4MTVcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0NoYXR0ZXJib3ggVFRTIEFQSSBVUkwnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0XHVDNzU4IFVSTFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIChcdUFFMzBcdUJDRjhcdUFDMTI6IGh0dHA6Ly9sb2NhbGhvc3Q6NDEyMyknKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2NoYXR0ZXJib3gtYXBpLXVybC1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMycpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveEFwaVVybClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94QXBpVXJsID0gdmFsdWUgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6NDEyMyc7IC8vIFx1QUUzMFx1QkNGOFx1QUMxMjogSFRUUCAoXHVCQ0Y0XHVDNTQ4IFx1QzcwNFx1RDVEOClcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4JylcclxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdDaGF0dGVyYm94IFRUUyBcdUMxMUNcdUJDODQgXHVDNUYwXHVBQ0IwXHVDNzQ0IFx1RDE0Q1x1QzJBNFx1RDJCOFx1RDU2OVx1QjJDOFx1QjJFNCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCBcdUM5MTEuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0Q2hhdHRlcmJveENvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gQ2hhdHRlcmJveCBcdUM3NENcdUMxMzEgXHVDMTIwXHVEMEREXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM3NENcdUMxMzEgXHVDMTIwXHVEMEREJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0NoYXR0ZXJib3ggVFRTXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUM3NENcdUMxMzFcdUM3NDQgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnY2hhdHRlcmJveC12b2ljZS1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVDaGF0dGVyYm94Vm9pY2VEcm9wZG93bihkcm9wZG93bik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJylcclxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdcdUMxMjBcdUQwRERcdUQ1NUMgXHVDNzRDXHVDMTMxXHVDNzNDXHVCODVDIFx1QzBEOFx1RDUwQyBcdUQxNERcdUMyQTRcdUQyQjhcdUI5N0MgXHVDN0FDXHVDMEREXHVENTY5XHVCMkM4XHVCMkU0JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDN0FDXHVDMEREIFx1QzkxMS4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsYXlDaGF0dGVyYm94Vm9pY2VQcmV2aWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNzRDXHVDMTMxIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3NENcdUMxMzEgXHVDN0FDXHVDMEREIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIENoYXR0ZXJib3ggVFRTIFx1QzgwNFx1QzZBOSBcdUMxMjRcdUM4MTVcdUI0RTRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QUMxMFx1QzgxNSBcdUQ0NUNcdUQ2MDQgXHVBQzE1XHVCM0M0IChFeGFnZ2VyYXRpb24pJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1Qzc0Q1x1QzEzMVx1Qzc1OCBcdUFDMTBcdUM4MTUgXHVENDVDXHVENjA0IFx1QUMxNVx1QjNDNFx1Qjk3QyBcdUM4NzBcdUM4MDhcdUQ1NjlcdUIyQzhcdUIyRTQuICgwLjI1ID0gXHVDNTdEXHVENTY4LCAyLjAgPSBcdUFDMTVcdUQ1NjgpJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCdjaGF0dGVyYm94LWV4YWdnZXJhdGlvbi1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAuMjUsIDIuMCwgMC4wNSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94RXhhZ2dlcmF0aW9uKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94RXhhZ2dlcmF0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ0ZHIFx1QUMwMFx1QzkxMVx1Q0U1OCAoQ0ZHIFdlaWdodCknKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxIFx1QzBERFx1QzEzMVx1Qzc1OCBcdUFDMDBcdUM3NzRcdUIzNThcdUMyQTQgXHVBQzE1XHVCM0M0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKDAuMCA9IFx1QzU3RFx1RDU2OCwgMS4wID0gXHVBQzE1XHVENTY4KScpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnY2hhdHRlcmJveC1jZmctc2V0dGluZycpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLjAsIDEuMCwgMC4wNSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94Q2ZnV2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94Q2ZnV2VpZ2h0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNjI4XHVCM0M0IChUZW1wZXJhdHVyZSknKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDNzRDXHVDMTMxIFx1QzBERFx1QzEzMVx1Qzc1OCBcdUNDM0RcdUM3NThcdUMxMzFcdUM3NDQgXHVDODcwXHVDODA4XHVENTY5XHVCMkM4XHVCMkU0LiAoMC4wNSA9IFx1Qzc3Q1x1QUQwMFx1QzEzMSwgNS4wID0gXHVDQzNEXHVDNzU4XHVDMTMxKScpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnY2hhdHRlcmJveC10ZW1wZXJhdHVyZS1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAuMDUsIDUuMCwgMC4wNSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0dGVyYm94VGVtcGVyYXR1cmUpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hUZW1wZXJhdHVyZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlR29vZ2xlQ2xvdWRUVFNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzBBQ1x1QzZBOSBcdUFDMDBcdUM3NzRcdUI0RENcclxuICAgICAgICBjb25zdCBndWlkZUVsID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgXHJcbiAgICAgICAgICAgIGNsczogJ2dvb2dsZS1jbG91ZC10dHMtZ3VpZGUgZ29vZ2xlLWNsb3VkLWFwaS1rZXktc2V0dGluZycsXHJcbiAgICAgICAgICAgIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tYm90dG9tOiAxNXB4OyBwYWRkaW5nOiAxMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7IGJvcmRlci1yYWRpdXM6IDVweDsgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOycgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGd1aWRlRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnXHVEODNEXHVERDI3IEdvb2dsZSBDbG91ZCBUVFMgXHVDMTI0XHVDODE1IFx1QUMwMFx1Qzc3NFx1QjREQycsIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW46IDAgMCAxMHB4IDA7IGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOycgfSB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdGVwc0xpc3QgPSBndWlkZUVsLmNyZWF0ZUVsKCdvbCcsIHsgYXR0cjogeyBzdHlsZTogJ21hcmdpbjogMDsgcGFkZGluZy1sZWZ0OiAyMHB4OyBsaW5lLWhlaWdodDogMS42OycgfSB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdGVwMSA9IHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuICAgICAgICBzdGVwMS5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnR29vZ2xlIENsb3VkIENvbnNvbGUgXHVDODExXHVDMThEOicgfSk7XHJcbiAgICAgICAgc3RlcDEuYXBwZW5kVGV4dCgnICcpO1xyXG4gICAgICAgIGNvbnN0IHN0ZXAxTGluayA9IHN0ZXAxLmNyZWF0ZUVsKCdhJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbScsXHJcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbScsXHJcbiAgICAgICAgICAgIGF0dHI6IHsgc3R5bGU6ICdjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsnIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzdGVwMUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbScsICdfYmxhbmsnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdGVwMiA9IHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuICAgICAgICBzdGVwMi5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnXHVENTA0XHVCODVDXHVDODFEXHVEMkI4IFx1QzEyMFx1RDBERC9cdUMwRERcdUMxMzE6JyB9KTtcclxuICAgICAgICBzdGVwMi5hcHBlbmRUZXh0KCcgXHVBRTMwXHVDODc0IFx1RDUwNFx1Qjg1Q1x1QzgxRFx1RDJCOFx1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUFDNzBcdUIwOTggXHVDMEM4IFx1RDUwNFx1Qjg1Q1x1QzgxRFx1RDJCOFx1Qjk3QyBcdUMwRERcdUMxMzFcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc3RlcDMgPSBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcbiAgICAgICAgc3RlcDMuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1RleHQtdG8tU3BlZWNoIEFQSSBcdUQ2NUNcdUMxMzFcdUQ2NTQ6JyB9KTtcclxuICAgICAgICBzdGVwMy5hcHBlbmRUZXh0KCcgJyk7XHJcbiAgICAgICAgY29uc3Qgc3RlcDNMaW5rID0gc3RlcDMuY3JlYXRlRWwoJ2EnLCB7XHJcbiAgICAgICAgICAgIHRleHQ6ICdBUEkgXHVCNzdDXHVDNzc0XHVCRTBDXHVCN0VDXHVCOUFDXHVDNUQwXHVDMTFDIFx1RDY1Q1x1QzEzMVx1RDY1NCcsXHJcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2xpYnJhcnkvdGV4dHRvc3BlZWNoLmdvb2dsZWFwaXMuY29tJyxcclxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ2NvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOycgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN0ZXAzTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93Lm9wZW4oJ2h0dHBzOi8vY29uc29sZS5jbG91ZC5nb29nbGUuY29tL2FwaXMvbGlicmFyeS90ZXh0dG9zcGVlY2guZ29vZ2xlYXBpcy5jb20nLCAnX2JsYW5rJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc3RlcDQgPSBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcbiAgICAgICAgc3RlcDQuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ0FQSSBcdUQwQTQgXHVDMEREXHVDMTMxOicgfSk7XHJcbiAgICAgICAgc3RlcDQuYXBwZW5kVGV4dCgnIFx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUM3NzhcdUM5OUQgXHVDODE1XHVCQ0Y0ID4gQVBJIFx1RDBBNCA+IFx1QzBDOCBBUEkgXHVEMEE0IFx1QzBERFx1QzEzMScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHN0ZXA1ID0gc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScpO1xyXG4gICAgICAgIHN0ZXA1LmNyZWF0ZUVsKCdzdHJvbmcnLCB7IHRleHQ6ICdBUEkgXHVEMEE0IFx1QzgxQ1x1RDU1QyBcdUMxMjRcdUM4MTUgKFx1QUQ4Q1x1QzdBNSk6JyB9KTtcclxuICAgICAgICBzdGVwNS5hcHBlbmRUZXh0KCcgXHVEMEE0IFx1QzgxQ1x1RDU1QyA+IEFQSSBcdUM4MUNcdUQ1NUMgPiBDbG91ZCBUZXh0LXRvLVNwZWVjaCBBUEkgXHVDMTIwXHVEMEREJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgd2FybmluZ0VsID0gZ3VpZGVFbC5jcmVhdGVFbCgnZGl2JywgeyBcclxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDEwcHg7IHBhZGRpbmc6IDhweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvci1yZ2IpOyBib3JkZXItcmFkaXVzOiAzcHg7IGZvbnQtc2l6ZTogMC45ZW07JyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2FybmluZ0VsLmFwcGVuZFRleHQoJ1x1MjZBMFx1RkUwRiAnKTtcclxuICAgICAgICB3YXJuaW5nRWwuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1x1QzkxMVx1QzY5NDonIH0pO1xyXG4gICAgICAgIHdhcm5pbmdFbC5hcHBlbmRUZXh0KCcgVGV4dC10by1TcGVlY2ggQVBJXHVBQzAwIFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM3NDAgXHVBQ0JEXHVDNkIwIFwiQVBJX0tFWV9TRVJWSUNFX0JMT0NLRURcIiBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTY5XHVCMkM4XHVCMkU0LicpO1xyXG5cclxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgQVBJIFx1RDBBNCBcdUMxMjRcdUM4MTVcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0dvb2dsZSBDbG91ZCBUVFMgQVBJIFx1RDBBNCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdHb29nbGUgQ2xvdWQgVGV4dC10by1TcGVlY2ggQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCdnb29nbGUtY2xvdWQtYXBpLWtleS1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRLZXkgPSBkZWNyeXB0QXBpS2V5KGN1cnJlbnRLZXkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkS2V5ID0gbWFza0FwaUtleShkZWNyeXB0ZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQUl6YS4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hc2tlZEtleSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbWFza2VkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBlbmNyeXB0QXBpS2V5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTQXBpS2V5ID0gZW5jcnlwdGVkS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDNUYwXHVBQ0IwXHVDNzQ0IFx1RDE0Q1x1QzJBNFx1RDJCOFx1RDU2OVx1QjJDOFx1QjJFNCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1RDE0Q1x1QzJBNFx1RDJCOCBcdUM5MTEuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0R29vZ2xlQ2xvdWRDb25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1QzVGMFx1QUNCMCBcdUQxNENcdUMyQTRcdUQyQjgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIEdvb2dsZSBDbG91ZCBcdUM1QjhcdUM1QjQgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdUM1QjhcdUM1QjQgXHVDRjU0XHVCNERDJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1QzBBQ1x1QzZBOVx1RDU2MCBcdUM1QjhcdUM1QjQgXHVDRjU0XHVCNERDXHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NC4nKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC1sYW5ndWFnZS1zZXR0aW5nJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUycsICdFbmdsaXNoIChVUyknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tR0InLCAnRW5nbGlzaCAoVUspJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUFVJywgJ0VuZ2xpc2ggKEFVKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1JTicsICdFbmdsaXNoIChJbmRpYSknKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTTGFuZ3VhZ2VDb2RlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTTGFuZ3VhZ2VDb2RlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVHb29nbGVDbG91ZFZvaWNlcygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgXHVDNzRDXHVDMTMxIFx1QzEyMFx1RDBERFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDNzRDXHVDMTMxIFx1QzEyMFx1RDBERCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdHb29nbGUgQ2xvdWQgVFRTXHVDNUQwXHVDMTFDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUM3NENcdUMxMzFcdUM3NDQgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LicpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnZ29vZ2xlLWNsb3VkLXZvaWNlLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUdvb2dsZUNsb3VkVm9pY2VEcm9wZG93bihkcm9wZG93bik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJylcclxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdcdUMxMjBcdUQwRERcdUQ1NUMgXHVDNzRDXHVDMTMxXHVDNzNDXHVCODVDIFx1QzBEOFx1RDUwQyBcdUQxNERcdUMyQTRcdUQyQjhcdUI5N0MgXHVDN0FDXHVDMEREXHVENTY5XHVCMkM4XHVCMkU0JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVDN0FDXHVDMEREIFx1QzkxMS4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsYXlHb29nbGVDbG91ZFZvaWNlUHJldmlldygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzRDXHVDMTMxIFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzgwNFx1QzZBOSBcdUMxMjRcdUM4MTVcdUI0RTRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1QjlEMFx1RDU1OFx1QUUzMCBcdUMxOERcdUIzQzQgKFNwZWFraW5nIFJhdGUpJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1Qzc0Q1x1QzEzMVx1Qzc1OCBcdUI5RDBcdUQ1NThcdUFFMzAgXHVDMThEXHVCM0M0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKDAuMjUgPSBcdUIyOTBcdUI5QkMsIDQuMCA9IFx1QkU2MFx1Qjk4NCknKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2dvb2dsZS1jbG91ZC1zcGVha2luZy1yYXRlLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMC4yNSwgNC4wLCAwLjI1KVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTU3BlYWtpbmdSYXRlKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU1NwZWFraW5nUmF0ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Qzc0Q1x1QzEzMSBcdUIxOTJcdUIwQUVcdUM3NzQgKFBpdGNoKScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUM3NENcdUMxMzFcdUM3NTggXHVCMTkyXHVCMEFFXHVDNzc0XHVCOTdDIFx1Qzg3MFx1QzgwOFx1RDU2OVx1QjJDOFx1QjJFNC4gKC0yMC4wID0gXHVCMEFFXHVDNzRDLCAyMC4wID0gXHVCMTkyXHVDNzRDKScpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnZ29vZ2xlLWNsb3VkLXBpdGNoLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoLTIwLjAsIDIwLjAsIDEuMClcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU1BpdGNoKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU1BpdGNoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwb3B1bGF0ZUdvb2dsZUNsb3VkVm9pY2VEcm9wZG93bihkcm9wZG93bjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VDb2RlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLVVTJykge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtSm91cm5leS1EJywgJ0pvdXJuZXktRCAoTWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtSm91cm5leS1GJywgJ0pvdXJuZXktRiAoRmVtYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1Kb3VybmV5LU8nLCAnSm91cm5leS1PIChNYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUEnLCAnTmV1cmFsMi1BIChNYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUMnLCAnTmV1cmFsMi1DIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItRCcsICdOZXVyYWwyLUQgKE1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItRScsICdOZXVyYWwyLUUgKEZlbWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1GJywgJ05ldXJhbDItRiAoRmVtYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1VUy1OZXVyYWwyLUcnLCAnTmV1cmFsMi1HIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLVVTLU5ldXJhbDItSCcsICdOZXVyYWwyLUggKEZlbWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1JJywgJ05ldXJhbDItSSAoTWFsZSknKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tVVMtTmV1cmFsMi1KJywgJ05ldXJhbDItSiAoTWFsZSknKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUdCJykge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tR0ItTmV1cmFsMi1BJywgJ05ldXJhbDItQSAoRmVtYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQi1OZXVyYWwyLUInLCAnTmV1cmFsMi1CIChNYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1HQi1OZXVyYWwyLUMnLCAnTmV1cmFsMi1DIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUdCLU5ldXJhbDItRCcsICdOZXVyYWwyLUQgKE1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUdCLU5ldXJhbDItRicsICdOZXVyYWwyLUYgKEZlbWFsZSknKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUFVJykge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZW4tQVUtTmV1cmFsMi1BJywgJ05ldXJhbDItQSAoRmVtYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1BVS1OZXVyYWwyLUInLCAnTmV1cmFsMi1CIChNYWxlKScpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlbi1BVS1OZXVyYWwyLUMnLCAnTmV1cmFsMi1DIChGZW1hbGUpJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuLUFVLU5ldXJhbDItRCcsICdOZXVyYWwyLUQgKE1hbGUpJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdlbi1VUy1Kb3VybmV5LUYnLCAnSm91cm5leS1GIChGZW1hbGUpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlR29vZ2xlQ2xvdWRWb2ljZXMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgdm9pY2VEcm9wZG93biA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLmdvb2dsZS1jbG91ZC12b2ljZS1zZXR0aW5nIHNlbGVjdCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgICAgIGlmICh2b2ljZURyb3Bkb3duKSB7XHJcbiAgICAgICAgICAgIHZvaWNlRHJvcGRvd24uZW1wdHkoKTtcclxuICAgICAgICAgICAgY29uc3QgZHJvcGRvd24gPSB7IGFkZE9wdGlvbjogKHZhbHVlOiBzdHJpbmcsIHRleHQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgICAgIHZvaWNlRHJvcGRvd24uYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICAgICAgfX07XHJcbiAgICAgICAgICAgIHRoaXMucG9wdWxhdGVHb29nbGVDbG91ZFZvaWNlRHJvcGRvd24oZHJvcGRvd24pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVBRTMwXHVCQ0Y4IFx1Qzc0Q1x1QzEzMSBcdUMxMjRcdUM4MTVcclxuICAgICAgICAgICAgY29uc3QgbGFuZ3VhZ2VDb2RlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGU7XHJcbiAgICAgICAgICAgIGxldCBkZWZhdWx0Vm9pY2UgPSAnZW4tVVMtSm91cm5leS1GJztcclxuICAgICAgICAgICAgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUdCJykgZGVmYXVsdFZvaWNlID0gJ2VuLUdCLU5ldXJhbDItQSc7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGxhbmd1YWdlQ29kZSA9PT0gJ2VuLUFVJykgZGVmYXVsdFZvaWNlID0gJ2VuLUFVLU5ldXJhbDItQSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2b2ljZURyb3Bkb3duLnZhbHVlID0gZGVmYXVsdFZvaWNlO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSA9IGRlZmF1bHRWb2ljZTtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlVFRTUHJvdmlkZXJTZXR0aW5ncygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnR0c1Byb3ZpZGVyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNoYXR0ZXJib3hTZXR0aW5ncyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmNoYXR0ZXJib3gtYXBpLXVybC1zZXR0aW5nLCAuY2hhdHRlcmJveC12b2ljZS1zZXR0aW5nLCAuY2hhdHRlcmJveC1leGFnZ2VyYXRpb24tc2V0dGluZywgLmNoYXR0ZXJib3gtY2ZnLXNldHRpbmcsIC5jaGF0dGVyYm94LXRlbXBlcmF0dXJlLXNldHRpbmcnKTtcclxuICAgICAgICBjb25zdCBnb29nbGVDbG91ZFNldHRpbmdzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuZ29vZ2xlLWNsb3VkLXR0cy1ndWlkZSwgLmdvb2dsZS1jbG91ZC1hcGkta2V5LXNldHRpbmcsIC5nb29nbGUtY2xvdWQtbGFuZ3VhZ2Utc2V0dGluZywgLmdvb2dsZS1jbG91ZC12b2ljZS1zZXR0aW5nLCAuZ29vZ2xlLWNsb3VkLXNwZWFraW5nLXJhdGUtc2V0dGluZywgLmdvb2dsZS1jbG91ZC1waXRjaC1zZXR0aW5nJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCQUE4XHVCNEUwIFx1QzEyNFx1QzgxNSBcdUMyMjhcdUFFNDBcclxuICAgICAgICBjaGF0dGVyYm94U2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nID0+IHtcclxuICAgICAgICAgICAgKHNldHRpbmcgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZ29vZ2xlQ2xvdWRTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmcgPT4ge1xyXG4gICAgICAgICAgICAoc2V0dGluZyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUMxMjBcdUQwRERcdUI0MUMgXHVDODFDXHVBQ0Y1XHVDNzkwXHVDNzU4IFx1QzEyNFx1QzgxNVx1QjlDQyBcdUQ0NUNcdUMyRENcclxuICAgICAgICBpZiAocHJvdmlkZXIgPT09ICdjaGF0dGVyYm94Jykge1xyXG4gICAgICAgICAgICBjaGF0dGVyYm94U2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nID0+IHtcclxuICAgICAgICAgICAgICAgIChzZXR0aW5nIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdnb29nbGUtY2xvdWQnKSB7XHJcbiAgICAgICAgICAgIGdvb2dsZUNsb3VkU2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nID0+IHtcclxuICAgICAgICAgICAgICAgIChzZXR0aW5nIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHBsYXlDaGF0dGVyYm94Vm9pY2VQcmV2aWV3KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhbXBsZVRleHRzID0gW1xyXG4gICAgICAgICAgICAgICAgJ0hlbGxvLCB0aGlzIGlzIGEgc2FtcGxlIHZvaWNlIHByZXZpZXcuJyxcclxuICAgICAgICAgICAgICAgICdXZWxjb21lIHRvIEVuZ2xpc2ggdm9jYWJ1bGFyeSBsZWFybmluZy4nLFxyXG4gICAgICAgICAgICAgICAgJ1RoaXMgdm9pY2Ugd2lsbCBoZWxwIHlvdSBsZWFybiBwcm9udW5jaWF0aW9uLicsXHJcbiAgICAgICAgICAgICAgICAnQmVhdXRpZnVsIHdvcmRzIG1ha2UgYmVhdXRpZnVsIHNlbnRlbmNlcy4nXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByYW5kb21UZXh0ID0gc2FtcGxlVGV4dHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2FtcGxlVGV4dHMubGVuZ3RoKV07XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hBcGlVcmx9L3YxL2F1ZGlvL3NwZWVjaGAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiByYW5kb21UZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIHZvaWNlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNWb2ljZSxcclxuICAgICAgICAgICAgICAgICAgICBleGFnZ2VyYXRpb246IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXR0ZXJib3hFeGFnZ2VyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY2ZnX3dlaWdodDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveENmZ1dlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdHRlcmJveFRlbXBlcmF0dXJlXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hhdHRlcmJveCBUVFMgQVBJIFx1QzYyNFx1Qjk1ODogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xyXG4gICAgICAgICAgICBjb25zdCBhdWRpb1VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYXVkaW9CbG9iKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKGF1ZGlvVXJsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVuZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc0Q1x1QzEzMSBcdUJCRjhcdUI5QUNcdUI0RTNcdUFFMzAgXHVDNjQ0XHVCOENDIScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGF1ZGlvLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhdWRpby5wbGF5KCkuY2F0Y2gocmVqZWN0KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NoYXR0ZXJib3ggVFRTIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3NENcdUMxMzEgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0XHVBQzAwIFx1QzJFNFx1RDU4OSBcdUM5MTFcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBwbGF5R29vZ2xlQ2xvdWRWb2ljZVByZXZpZXcoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgc2FtcGxlVGV4dHMgPSBbXHJcbiAgICAgICAgICAgICAgICAnSGVsbG8sIHRoaXMgaXMgYSBzYW1wbGUgdm9pY2UgcHJldmlldy4nLFxyXG4gICAgICAgICAgICAgICAgJ1dlbGNvbWUgdG8gRW5nbGlzaCB2b2NhYnVsYXJ5IGxlYXJuaW5nLicsXHJcbiAgICAgICAgICAgICAgICAnVGhpcyB2b2ljZSB3aWxsIGhlbHAgeW91IGxlYXJuIHByb251bmNpYXRpb24uJyxcclxuICAgICAgICAgICAgICAgICdCZWF1dGlmdWwgd29yZHMgbWFrZSBiZWF1dGlmdWwgc2VudGVuY2VzLidcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbVRleHQgPSBzYW1wbGVUZXh0c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzYW1wbGVUZXh0cy5sZW5ndGgpXTtcclxuICAgICAgICAgICAgY29uc3QgYXBpS2V5ID0gZGVjcnlwdEFwaUtleSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0FwaUtleSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dDogeyB0ZXh0OiByYW5kb21UZXh0IH0sXHJcbiAgICAgICAgICAgICAgICB2b2ljZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNMYW5ndWFnZUNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzVm9pY2VcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhdWRpb0NvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvRW5jb2Rpbmc6ICdNUDMnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWFraW5nUmF0ZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlQ2xvdWRUVFNTcGVha2luZ1JhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGl0Y2g6IHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUNsb3VkVFRTUGl0Y2hcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGBodHRwczovL3RleHR0b3NwZWVjaC5nb29nbGVhcGlzLmNvbS92MS90ZXh0OnN5bnRoZXNpemU/a2V5PSR7YXBpS2V5fWAsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQgfHwgJ3t9Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxlZEVycm9yID0gdGhpcy5nZXREZXRhaWxlZEdvb2dsZUNsb3VkRXJyb3IocmVzcG9uc2Uuc3RhdHVzLCBlcnJvckRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRldGFpbGVkRXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gdGhpcy5iYXNlNjRUb0Jsb2IoZGF0YS5hdWRpb0NvbnRlbnQsICdhdWRpby9tcDMnKTtcclxuICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhhdWRpb1VybCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXVkaW8ub25lbmRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3NENcdUMxMzEgXHVCQkY4XHVCOUFDXHVCNEUzXHVBRTMwIFx1QzY0NFx1QjhDQyEnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJykpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYXVkaW8ucGxheSgpLmNhdGNoKHJlamVjdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHb29nbGUgQ2xvdWQgVFRTIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMCBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnQVBJXHVBQzAwIFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTQnKSkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdBUEkgXHVEMEE0JykpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHVDNzRDXHVDMTMxIFx1QkJGOFx1QjlBQ1x1QjRFM1x1QUUzMFx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTRcdUM2NDAgXHVDNzc4XHVEMTMwXHVCMTM3IFx1QzVGMFx1QUNCMFx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmFzZTY0VG9CbG9iKGJhc2U2NDogc3RyaW5nLCBtaW1lVHlwZTogc3RyaW5nKTogQmxvYiB7XHJcbiAgICAgICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZU51bWJlcnMgPSBuZXcgQXJyYXkoYnl0ZUNoYXJhY3RlcnMubGVuZ3RoKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJ5dGVOdW1iZXJzW2ldID0gYnl0ZUNoYXJhY3RlcnMuY2hhckNvZGVBdChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZU51bWJlcnMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbYnl0ZUFycmF5XSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHRlc3RHb29nbGVDbG91ZENvbm5lY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgYXBpS2V5ID0gZGVjcnlwdEFwaUtleSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVDbG91ZFRUU0FwaUtleSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEdvb2dsZSBDbG91ZCBUVFMgQVBJIFx1RDBBNFx1Qjk3QyBcdUJBM0NcdUM4MDAgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly90ZXh0dG9zcGVlY2guZ29vZ2xlYXBpcy5jb20vdjEvdGV4dDpzeW50aGVzaXplP2tleT0ke2FwaUtleX1gLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHsgdGV4dDogJ0Nvbm5lY3Rpb24gdGVzdCcgfSxcclxuICAgICAgICAgICAgICAgICAgICB2b2ljZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6ICdlbi1VUycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdlbi1VUy1Kb3VybmV5LUYnXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhdWRpb0NvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0VuY29kaW5nOiAnTVAzJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA8IDQwMCkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IEdvb2dsZSBDbG91ZCBUVFMgQVBJIFx1QzVGMFx1QUNCMCBcdUMxMzFcdUFDRjUhJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQgfHwgJ3t9Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxlZEVycm9yID0gdGhpcy5nZXREZXRhaWxlZEdvb2dsZUNsb3VkRXJyb3IocmVzcG9uc2Uuc3RhdHVzLCBlcnJvckRhdGEpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDICR7ZGV0YWlsZWRFcnJvcn1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBDbG91ZCBUVFMgXHVDNUYwXHVBQ0IwIFx1RDE0Q1x1QzJBNFx1RDJCOCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1Qzc3OFx1RDEzMFx1QjEzNyBcdUM1RjBcdUFDQjBcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERldGFpbGVkR29vZ2xlQ2xvdWRFcnJvcihzdGF0dXM6IG51bWJlciwgZXJyb3JEYXRhOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChlcnJvckRhdGE/LmVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZXJyb3JEYXRhLmVycm9yO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQVBJXHVBQzAwIFx1Q0MyOFx1QjJFOFx1QjQxQyBcdUFDQkRcdUM2QjAgKDQwMyBQRVJNSVNTSU9OX0RFTklFRCB3aXRoIEFQSV9LRVlfU0VSVklDRV9CTE9DS0VEKVxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDMgJiYgZXJyb3IuZGV0YWlscz8uc29tZSgoZGV0YWlsOiBhbnkpID0+IFxyXG4gICAgICAgICAgICAgICAgZGV0YWlsLnJlYXNvbiA9PT0gJ0FQSV9LRVlfU0VSVklDRV9CTE9DS0VEJyB8fCBcclxuICAgICAgICAgICAgICAgIGRldGFpbFsnQHR5cGUnXT8uaW5jbHVkZXMoJ0Vycm9ySW5mbycpICYmIGRldGFpbC5yZWFzb24gPT09ICdBUElfS0VZX1NFUlZJQ0VfQkxPQ0tFRCdcclxuICAgICAgICAgICAgKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdUZXh0LXRvLVNwZWVjaCBBUElcdUFDMDAgXHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDNzA0XHVDNzU4IFx1QUMwMFx1Qzc3NFx1QjREQ1x1Qjk3QyBcdUNDMzhcdUFDRTBcdUQ1NThcdUM1RUMgQVBJXHVCOTdDIFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBUEkgXHVEMEE0IFx1QUQwMFx1QjgyOCBcdUM2MjRcdUI5NThcdUI0RTRcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ0FQSSBrZXkgbm90IHZhbGlkJykgfHwgZXJyb3IuY29kZSA9PT0gJ0lOVkFMSURfQVJHVU1FTlQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTQuIFx1RDBBNFx1Qjk3QyBcdUIyRTRcdUMyREMgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3F1b3RhJykgfHwgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ1FVT1RBX0VYQ0VFREVEJykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0FQSSBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NzQgXHVDRDA4XHVBQ0ZDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBHb29nbGUgQ2xvdWQgQ29uc29sZVx1QzVEMFx1QzExQyBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0FQSSBcdUM4MTFcdUFERkNcdUM3NzQgXHVBQzcwXHVCRDgwXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0IFx1QUQ4Q1x1RDU1Q1x1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNzc4XHVDOTlEIFx1QzYyNFx1Qjk1OCAoNDAxKVxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnQVBJIFx1RDBBNCBcdUM3NzhcdUM5OURcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LiBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNjk0XHVDQ0FEIFx1QzYyNFx1Qjk1OCAoNDAwKVxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnQVBJIFx1QzY5NFx1Q0NBRFx1Qzc3NCBcdUM3OThcdUJBQkJcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1Qzc0Q1x1QzEzMSBcdUMxMjRcdUM4MTVcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QzExQ1x1QkU0NFx1QzJBNCBcdUMwQUNcdUM2QTkgXHVCRDg4XHVBQzAwICg1MDMpXHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDUwMykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIFx1QzExQ1x1QkU0NFx1QzJBNFx1QUMwMCBcdUM3N0NcdUMyRENcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEFDXHVDNkE5XHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QzdBMFx1QzJEQyBcdUQ2QzQgXHVCMkU0XHVDMkRDIFx1QzJEQ1x1QjNDNFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gYEFQSSBcdUM2MjRcdUI5NTggKCR7c3RhdHVzfSk6ICR7ZXJyb3IubWVzc2FnZSB8fCAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4J31gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gYEFQSSBcdUM2MjRcdUI5NTg6ICR7c3RhdHVzfSBcdUMwQzFcdUQwREMgXHVDRjU0XHVCNERDYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVRUU0NhY2hlU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gVFRTIFx1Q0U5MFx1QzJEQyBcdUMxMzlcdUMxNTggXHVENUU0XHVCMzU0XHJcbiAgICAgICAgY29uc3QgY2FjaGVIZWFkZXJFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxyXG4gICAgICAgICAgICBjbHM6ICd0dHMtY2FjaGUtaGVhZGVyJyxcclxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDIwcHg7IHBhZGRpbmc6IDEwcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgYm9yZGVyLXJhZGl1czogNXB4OyBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7JyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY2FjaGVIZWFkZXJFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdcdUQ4M0RcdUREQzJcdUZFMEYgVFRTIFx1Q0U5MFx1QzJEQyBcdUFEMDBcdUI5QUMnLCBhdHRyOiB7IHN0eWxlOiAnbWFyZ2luOiAwIDAgNXB4IDA7IGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOycgfSB9KTtcclxuICAgICAgICBjYWNoZUhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHVDNzRDXHVDMTMxIFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUI4NUNcdUNFRUNcdUM1RDAgXHVDRTkwXHVDMkRDXHVENTU4XHVDNUVDIEFQSSBcdUJFNDRcdUM2QTlcdUM3NDQgXHVDODA4XHVDNTdEXHVENTU4XHVBQ0UwIFx1Qzc1MVx1QjJGNSBcdUMxOERcdUIzQzRcdUI5N0MgXHVENUE1XHVDMEMxXHVDMkRDXHVEMEI1XHVCMkM4XHVCMkU0LicsIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW46IDA7IGZvbnQtc2l6ZTogMC45ZW07IG9wYWNpdHk6IDAuODsnIH0gfSk7XHJcblxyXG4gICAgICAgIC8vIFx1Q0U5MFx1QzJEQyBcdUQ2NUNcdUMxMzFcdUQ2NTQgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdUVFMgXHVDRTkwXHVDMkRDIFx1RDY1Q1x1QzEzMVx1RDY1NCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdUVFMgXHVDNzRDXHVDMTMxIFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUI4NUNcdUNFRUNcdUM1RDAgXHVDRTkwXHVDMkRDXHVENTU4XHVDNUVDIFx1QzdBQ1x1QzBBQ1x1QzZBOVx1RDU2OVx1QjJDOFx1QjJFNC4nKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3R0cy1jYWNoZS1lbmFibGVkLXNldHRpbmcnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50dHNDYWNoZUVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHRzQ2FjaGVFbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIFx1Q0U5MFx1QzJEQyBcdUM4MTVcdUJDRjQgXHVENDVDXHVDMkRDXHJcbiAgICAgICAgY29uc3QgY2FjaGVJbmZvU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHVDRTkwXHVDMkRDIFx1RDYwNFx1RDY2OScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdUQ2MDRcdUM3QUMgXHVDODAwXHVDN0E1XHVCNDFDIFRUUyBcdUNFOTBcdUMyREMgXHVEMzBDXHVDNzdDIFx1QzgxNVx1QkNGNCcpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygndHRzLWNhY2hlLWluZm8tc2V0dGluZycpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUNhY2hlSW5mbyhjYWNoZUluZm9TZXR0aW5nKTtcclxuXHJcbiAgICAgICAgLy8gXHVDRTkwXHVDMkRDIFx1QzBBRFx1QzgxQyBcdUJDODRcdUQyQkNcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1Q0U5MFx1QzJEQyBcdUFEMDBcdUI5QUMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHVDODAwXHVDN0E1XHVCNDFDIFx1QkFBOFx1QjRFMCBUVFMgXHVDRTkwXHVDMkRDIFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUMwQURcdUM4MUNcdUQ1NjlcdUIyQzhcdUIyRTQuJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCd0dHMtY2FjaGUtY2xlYXItc2V0dGluZycpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1Q0U5MFx1QzJEQyBcdUMwQURcdUM4MUMnKVxyXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ1x1QkFBOFx1QjRFMCBUVFMgXHVDRTkwXHVDMkRDIFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUMwQURcdUM4MUNcdUQ1NjlcdUIyQzhcdUIyRTQnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUMwQURcdUM4MUMgXHVDOTExLi4uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLmNsZWFyVFRTQ2FjaGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBUVFMgXHVDRTkwXHVDMkRDXHVBQzAwIFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwQURcdUM4MUNcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUNFOTBcdUMyREMgXHVDODE1XHVCQ0Y0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYWNoZUluZm8oY2FjaGVJbmZvU2V0dGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgVFRTIFx1Q0U5MFx1QzJEQyBcdUMwQURcdUM4MUNcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVFRTIFx1Q0U5MFx1QzJEQyBcdUMwQURcdUM4MUMgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFRUUyBcdUNFOTBcdUMyREMgXHVDMEFEXHVDODFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdUNFOTBcdUMyREMgXHVDMEFEXHVDODFDJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1QzBDOFx1Qjg1Q1x1QUNFMFx1Q0U2OCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnXHVDRTkwXHVDMkRDIFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUMwQzhcdUI4NUNcdUFDRTBcdUNFNjhcdUQ1NjlcdUIyQzhcdUIyRTQnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FjaGVJbmZvKGNhY2hlSW5mb1NldHRpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Q0U5MFx1QzJEQyBcdUM4MTVcdUJDRjRcdUFDMDAgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQ2FjaGVJbmZvKHNldHRpbmc6IFNldHRpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBHb29nbGUgQ2xvdWQgVFRTIFx1QzExQ1x1QkU0NFx1QzJBNFx1QzVEMFx1QzExQyBcdUNFOTBcdUMyREMgXHVDODE1XHVCQ0Y0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4udHRzU2VydmljZSAmJiAnZ2V0Q2FjaGVJbmZvJyBpbiB0aGlzLnBsdWdpbi50dHNTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUluZm8gPSBhd2FpdCAodGhpcy5wbHVnaW4udHRzU2VydmljZSBhcyBhbnkpLmdldENhY2hlSW5mbygpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvVGV4dCA9IGBcdUQzMENcdUM3N0MgXHVBQzFDXHVDMjE4OiAke2NhY2hlSW5mby50b3RhbEZpbGVzfVx1QUMxQyB8IFx1QzZBOVx1QjdDOTogJHtjYWNoZUluZm8uZm9ybWF0dGVkU2l6ZX1gO1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZy5zZXREZXNjKGBcdUQ2MDRcdUM3QUMgXHVDODAwXHVDN0E1XHVCNDFDIFRUUyBcdUNFOTBcdUMyREMgXHVEMzBDXHVDNzdDIFx1QzgxNVx1QkNGNCAtICR7aW5mb1RleHR9YCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nLnNldERlc2MoJ1x1RDYwNFx1QzdBQyBcdUM4MDBcdUM3QTVcdUI0MUMgVFRTIFx1Q0U5MFx1QzJEQyBcdUQzMENcdUM3N0MgXHVDODE1XHVCQ0Y0IC0gXHVDRTkwXHVDMkRDIFx1QzExQ1x1QkU0NFx1QzJBNFx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Q0U5MFx1QzJEQyBcdUM4MTVcdUJDRjQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHNldHRpbmcuc2V0RGVzYygnXHVENjA0XHVDN0FDIFx1QzgwMFx1QzdBNVx1QjQxQyBUVFMgXHVDRTkwXHVDMkRDIFx1RDMwQ1x1Qzc3QyBcdUM4MTVcdUJDRjQgLSBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNsZWFyVFRTQ2FjaGUoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gR29vZ2xlIENsb3VkIFRUUyBcdUMxMUNcdUJFNDRcdUMyQTRcdUM1RDBcdUMxMUMgXHVDRTkwXHVDMkRDIFx1QzBBRFx1QzgxQ1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4udHRzU2VydmljZSAmJiAnY2xlYXJDYWNoZScgaW4gdGhpcy5wbHVnaW4udHRzU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0ICh0aGlzLnBsdWdpbi50dHNTZXJ2aWNlIGFzIGFueSkuY2xlYXJDYWNoZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUVFMgXHVDRTkwXHVDMkRDIFx1QzBBRFx1QzgxQyBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSAiLCAiLy8gQVBJIFx1RDBBNCBcdUM1NTRcdUQ2MzhcdUQ2NTQvXHVCQ0Y1XHVENjM4XHVENjU0IFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMCAoV2ViIENyeXB0byBBUEkgXHVDMEFDXHVDNkE5KVxyXG5cclxuLy8gXHVEM0M5XHVCQjM4IEFQSSBcdUQwQTRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTU4XHVCMjk0IFx1RDVFQ1x1RDM3QyBcdUQ1NjhcdUMyMThcclxuZnVuY3Rpb24gaXNQbGFpblRleHRBcGlLZXkoYXBpS2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGlmICghYXBpS2V5KSByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgIC8vIFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBBUEkgXHVEMEE0IFx1RDMyOFx1RDEzNFx1QjRFNFxyXG4gICAgY29uc3QgYXBpS2V5UGF0dGVybnMgPSBbXHJcbiAgICAgICAgL15zay1bYS16QS1aMC05XXszMix9JC8sICAgICAgICAgICAvLyBPcGVuQUkgQVBJIFx1RDBBNFxyXG4gICAgICAgIC9ec2stYW50LVthLXpBLVowLTktX117OTV9JC8sICAgICAgLy8gQW50aHJvcGljIEFQSSBcdUQwQTRcclxuICAgICAgICAvXkFJemFbYS16QS1aMC05LV9dezM1fSQvLCAgICAgICAgIC8vIEdvb2dsZSBBUEkgXHVEMEE0XHJcbiAgICAgICAgL15bYS16QS1aMC05LV9dezIwLH0kLyAgICAgICAgICAgICAvLyBcdUM3N0NcdUJDMThcdUM4MDFcdUM3NzggXHVBRTM0IFx1RDFBMFx1RDA3MFxyXG4gICAgXTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGFwaUtleVBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoYXBpS2V5KSk7XHJcbn1cclxuXHJcbi8vIFx1QzU0OFx1QzgwNFx1RDU1QyBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI5N0MgXHVDNzA0XHVENTVDIFx1RDBBNCBcdUMwRERcdUMxMzFcclxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVFbmNyeXB0aW9uS2V5KCk6IFByb21pc2U8Q3J5cHRvS2V5PiB7XHJcbiAgICAvLyBcdUMwQUNcdUM2QTlcdUM3OTBcdUJDQzQgXHVBQ0UwXHVDNzIwIFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFFMzBcdUJDMThcdUM3M0NcdUI4NUMgXHVEMEE0IFx1QzBERFx1QzEzMVxyXG4gICAgY29uc3QgcGx1Z2luSWQgPSAnb2JzaWRpYW4tZW5nbGlzaC12b2NhYnVsYXJ5JztcclxuICAgIGNvbnN0IHZlcnNpb24gPSAnMC4xJztcclxuICAgIGNvbnN0IHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XHJcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XHJcbiAgICBcclxuICAgIC8vIFx1RDBBNCBcdUM3QUNcdUI4Q0MgXHVDMEREXHVDMTMxXHJcbiAgICBjb25zdCBrZXlNYXRlcmlhbCA9IHBsdWdpbklkICsgdmVyc2lvbiArIHVzZXJBZ2VudCArIHRpbWVzdGFtcDtcclxuICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcclxuICAgIGNvbnN0IGtleURhdGEgPSBlbmNvZGVyLmVuY29kZShrZXlNYXRlcmlhbCk7XHJcbiAgICBcclxuICAgIC8vIFdlYiBDcnlwdG8gQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU1QyBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVEMEE0IFx1QjNDNFx1Q0Q5Q1xyXG4gICAgY29uc3QgYmFzZUtleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KFxyXG4gICAgICAgICdyYXcnLFxyXG4gICAgICAgIGtleURhdGEsXHJcbiAgICAgICAgeyBuYW1lOiAnUEJLREYyJyB9LFxyXG4gICAgICAgIGZhbHNlLFxyXG4gICAgICAgIFsnZGVyaXZlQml0cycsICdkZXJpdmVLZXknXVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgLy8gUEJLREYyXHVCODVDIFx1QUMxNVx1QjgyNVx1RDU1QyBcdUQwQTQgXHVCM0M0XHVDRDlDXHJcbiAgICBjb25zdCBkZXJpdmVkS2V5ID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kZXJpdmVLZXkoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnUEJLREYyJyxcclxuICAgICAgICAgICAgc2FsdDogZW5jb2Rlci5lbmNvZGUoJ29ic2lkaWFuLXZvY2FidWxhcnktc2FsdC0yMDI0JyksXHJcbiAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEwMDAwMCxcclxuICAgICAgICAgICAgaGFzaDogJ1NIQS0yNTYnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBiYXNlS2V5LFxyXG4gICAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBsZW5ndGg6IDI1NiB9LFxyXG4gICAgICAgIGZhbHNlLFxyXG4gICAgICAgIFsnZW5jcnlwdCcsICdkZWNyeXB0J11cclxuICAgICk7XHJcbiAgICBcclxuICAgIHJldHVybiBkZXJpdmVkS2V5O1xyXG59XHJcblxyXG4vLyBXZWIgQ3J5cHRvIEFQSVx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NUMgXHVDNTQ4XHVDODA0XHVENTVDIFx1QzU1NFx1RDYzOFx1RDY1NCAoQXN5bmMpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNyeXB0QXBpS2V5QXN5bmMoYXBpS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgaWYgKCFhcGlLZXkpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgLy8gXHVDNzc0XHVCQkY4IFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUQwQTRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHJcbiAgICBpZiAoIWlzUGxhaW5UZXh0QXBpS2V5KGFwaUtleSkpIHtcclxuICAgICAgICByZXR1cm4gYXBpS2V5OyAvLyBcdUM3NzRcdUJCRjggXHVDNTU0XHVENjM4XHVENjU0XHVCNDFDIFx1QUM4M1x1QzczQ1x1Qjg1QyBcdUFDMDRcdUM4RkNcdUQ1NThcdUFDRTAgXHVBREY4XHVCMzAwXHVCODVDIFx1QkMxOFx1RDY1OFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IGdlbmVyYXRlRW5jcnlwdGlvbktleSgpO1xyXG4gICAgICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcclxuICAgICAgICBjb25zdCBkYXRhID0gZW5jb2Rlci5lbmNvZGUoYXBpS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUI3OUNcdUIzNjQgSVYgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgY29uc3QgaXYgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEyKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQUVTLUdDTSBcdUM1NTRcdUQ2MzhcdUQ2NTRcclxuICAgICAgICBjb25zdCBlbmNyeXB0ZWQgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmVuY3J5cHQoXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBpdjogaXYgfSxcclxuICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICBkYXRhXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJVlx1QzY0MCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1QUNCMFx1RDU2OVx1RDU1OFx1QzVFQyBCYXNlNjQgXHVDNzc4XHVDRjU0XHVCNTI5XHJcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkQXJyYXkgPSBuZXcgVWludDhBcnJheShlbmNyeXB0ZWQpO1xyXG4gICAgICAgIGNvbnN0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkoaXYubGVuZ3RoICsgZW5jcnlwdGVkQXJyYXkubGVuZ3RoKTtcclxuICAgICAgICBjb21iaW5lZC5zZXQoaXYpO1xyXG4gICAgICAgIGNvbWJpbmVkLnNldChlbmNyeXB0ZWRBcnJheSwgaXYubGVuZ3RoKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmNvbWJpbmVkKSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QkU0NFx1QjNEOVx1QUUzMCBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4OicsIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XHJcbiAgICAgICAgLy8gXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUIzRDlcdUFFMzAgXHVDNTU0XHVENjM4XHVENjU0XHVCODVDIFx1RDNGNFx1QkMzMVxyXG4gICAgICAgIHJldHVybiBlbmNyeXB0QXBpS2V5KGFwaUtleSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWNyeXB0QXBpS2V5QXN5bmMoZW5jcnlwdGVkQXBpS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgaWYgKCFlbmNyeXB0ZWRBcGlLZXkpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgLy8gXHVEM0M5XHVCQjM4IEFQSSBcdUQwQTRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4IChcdUM3N0NcdUJDMThcdUM4MDFcdUM3NzggQVBJIFx1RDBBNCBcdUQzMjhcdUQxMzQpXHJcbiAgICBpZiAoaXNQbGFpblRleHRBcGlLZXkoZW5jcnlwdGVkQXBpS2V5KSkge1xyXG4gICAgICAgIHJldHVybiBlbmNyeXB0ZWRBcGlLZXk7IC8vIFx1RDNDOVx1QkIzOFx1Qzc3NFx1QkE3NCBcdUFERjhcdUIzMDBcdUI4NUMgXHVCQzE4XHVENjU4XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgZ2VuZXJhdGVFbmNyeXB0aW9uS2V5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQmFzZTY0IFx1QjUxNFx1Q0Y1NFx1QjUyOVxyXG4gICAgICAgIGNvbnN0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkoXHJcbiAgICAgICAgICAgIGF0b2IoZW5jcnlwdGVkQXBpS2V5KVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcnKVxyXG4gICAgICAgICAgICAgICAgLm1hcChjaGFyID0+IGNoYXIuY2hhckNvZGVBdCgwKSlcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIElWXHVDNjQwIFx1QzU1NFx1RDYzOFx1RDY1NFx1QjQxQyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCRDg0XHVCOUFDXHJcbiAgICAgICAgY29uc3QgaXYgPSBjb21iaW5lZC5zbGljZSgwLCAxMik7XHJcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkID0gY29tYmluZWQuc2xpY2UoMTIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFFUy1HQ00gXHVCQ0Y1XHVENjM4XHVENjU0XHJcbiAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kZWNyeXB0KFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdBRVMtR0NNJywgaXY6IGl2IH0sXHJcbiAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgZW5jcnlwdGVkXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XHJcbiAgICAgICAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGRlY3J5cHRlZCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIGF0b2IgXHVDMkU0XHVEMzI4XHVENTU4XHVBQzcwXHVCMDk4IFx1QkNGNVx1RDYzOFx1RDY1NCBcdUMyRTRcdUQzMjhcdUQ1NThcdUJBNzQgXHVEM0M5XHVCQjM4XHVDNzdDIFx1QUMwMFx1QjJBNVx1QzEzMVx1Qzc3NCBcdUIxOTJcdUM3NENcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1x1QkU0NFx1QjNEOVx1QUUzMCBcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4LCBcdUQzQzlcdUJCMzhcdUM3M0NcdUI4NUMgXHVBQzA0XHVDOEZDOicsIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIGVuY3J5cHRlZEFwaUtleTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVCM0Q5XHVBRTMwXHVDMkREIFx1RDYzOFx1RDY1OFx1QzEzMVx1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVCNzk4XHVEMzdDIFx1RDU2OFx1QzIxOFx1QjRFNCAoTGVnYWN5KVxyXG5leHBvcnQgZnVuY3Rpb24gZW5jcnlwdEFwaUtleShhcGlLZXk6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAoIWFwaUtleSkgcmV0dXJuICcnO1xyXG4gICAgXHJcbiAgICAvLyBcdUM3NzRcdUJCRjggXHVDNTU0XHVENjM4XHVENjU0XHVCNDFDIFx1RDBBNFx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzhcclxuICAgIGlmICghaXNQbGFpblRleHRBcGlLZXkoYXBpS2V5KSkge1xyXG4gICAgICAgIHJldHVybiBhcGlLZXk7IC8vIFx1Qzc3NFx1QkJGOCBcdUM1NTRcdUQ2MzhcdUQ2NTRcdUI0MUMgXHVBQzgzXHVDNzNDXHVCODVDIFx1QUMwNFx1QzhGQ1x1RDU1OFx1QUNFMCBcdUFERjhcdUIzMDBcdUI4NUMgXHVCQzE4XHVENjU4XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1QkU0NFx1QjNEOVx1QUUzMCBcdUQ1NjhcdUMyMThcdUI5N0MgXHVCM0Q5XHVBRTMwXHVDODAxXHVDNzNDXHVCODVDIFx1QzBBQ1x1QzZBOVx1RDU1OFx1QUUzMCBcdUM3MDRcdUQ1NUMgXHVEM0Y0XHVCQzMxXHJcbiAgICAvLyBcdUMyRTRcdUM4MUNcdUI4NUNcdUIyOTQgXHVCRTQ0XHVCM0Q5XHVBRTMwIFx1QkM4NFx1QzgwNFx1Qzc0NCBcdUMwQUNcdUM2QTlcdUQ1NThcdUIyOTQgXHVBQzgzXHVDNzQ0IFx1QUQ4Q1x1QzdBNVxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBcdUFDMDRcdUIyRThcdUQ1NUMgWE9SIFx1QzU1NFx1RDYzOFx1RDY1NCAoXHVENjM4XHVENjU4XHVDMTMxXHVDNkE5KVxyXG4gICAgICAgIGNvbnN0IGtleSA9ICdvYnNpZGlhbi12b2NhYi10ZW1wLWtleS0yMDI0JztcclxuICAgICAgICBsZXQgZW5jcnlwdGVkID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcGlLZXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY2hhckNvZGUgPSBhcGlLZXkuY2hhckNvZGVBdChpKSBeIGtleS5jaGFyQ29kZUF0KGkgJSBrZXkubGVuZ3RoKTtcclxuICAgICAgICAgICAgZW5jcnlwdGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnRvYShlbmNyeXB0ZWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIzRDlcdUFFMzAgXHVDNTU0XHVENjM4XHVENjU0IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVjcnlwdEFwaUtleShlbmNyeXB0ZWRBcGlLZXk6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAoIWVuY3J5cHRlZEFwaUtleSkgcmV0dXJuICcnO1xyXG4gICAgXHJcbiAgICAvLyBcdUQzQzlcdUJCMzggQVBJIFx1RDBBNFx1Qzc3OFx1QzlDMCBcdUQ2NTVcdUM3NzggKFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBBUEkgXHVEMEE0IFx1RDMyOFx1RDEzNClcclxuICAgIGlmIChpc1BsYWluVGV4dEFwaUtleShlbmNyeXB0ZWRBcGlLZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGVuY3J5cHRlZEFwaUtleTsgLy8gXHVEM0M5XHVCQjM4XHVDNzc0XHVCQTc0IFx1QURGOFx1QjMwMFx1Qjg1QyBcdUJDMThcdUQ2NThcclxuICAgIH1cclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBrZXkgPSAnb2JzaWRpYW4tdm9jYWItdGVtcC1rZXktMjAyNCc7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGF0b2IoZW5jcnlwdGVkQXBpS2V5KTtcclxuICAgICAgICBsZXQgZGVjcnlwdGVkID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWNvZGVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXJDb2RlID0gZGVjb2RlZC5jaGFyQ29kZUF0KGkpIF4ga2V5LmNoYXJDb2RlQXQoaSAlIGtleS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBkZWNyeXB0ZWQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkZWNyeXB0ZWQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIGF0b2IgXHVDMkU0XHVEMzI4XHVENTU4XHVCQTc0IFx1RDNDOVx1QkIzOFx1Qzc3QyBcdUFDMDBcdUIyQTVcdUMxMzFcdUM3NzQgXHVCMTkyXHVDNzRDXHJcbiAgICAgICAgY29uc29sZS53YXJuKCdcdUJDRjVcdUQ2MzhcdUQ2NTQgXHVDMkU0XHVEMzI4LCBcdUQzQzlcdUJCMzhcdUM3M0NcdUI4NUMgXHVBQzA0XHVDOEZDOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiBlbmNyeXB0ZWRBcGlLZXk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEFQSSBcdUQwQTRcdUI5N0MgXHVCOUM4XHVDMkE0XHVEMEI5XHVENTU4XHVDNUVDIFx1RDQ1Q1x1QzJEQ1xyXG5leHBvcnQgZnVuY3Rpb24gbWFza0FwaUtleShhcGlLZXk6IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGwpOiBzdHJpbmcge1xyXG4gICAgLy8gbnVsbCwgdW5kZWZpbmVkLCBcdUJFNDggXHVCQjM4XHVDNzkwXHVDNUY0IFx1Q0NCNFx1RDA2Q1xyXG4gICAgaWYgKCFhcGlLZXkgfHwgdHlwZW9mIGFwaUtleSAhPT0gJ3N0cmluZycpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgLy8gXHVCQjM4XHVDNzkwXHVDNUY0IFx1QUUzOFx1Qzc3NFx1QUMwMCA4IFx1Qzc3NFx1RDU1OFx1Qzc3OCBcdUFDQkRcdUM2QjBcclxuICAgIGlmIChhcGlLZXkubGVuZ3RoIDw9IDgpIHJldHVybiAnKicucmVwZWF0KGFwaUtleS5sZW5ndGgpO1xyXG4gICAgXHJcbiAgICAvLyBcdUM4MTVcdUMwQzFcdUM4MDFcdUM3NzggXHVCOUM4XHVDMkE0XHVEMEI5IFx1Q0M5OFx1QjlBQ1xyXG4gICAgcmV0dXJuIGFwaUtleS5zdWJzdHJpbmcoMCwgNCkgKyAnKicucmVwZWF0KGFwaUtleS5sZW5ndGggLSA4KSArIGFwaUtleS5zdWJzdHJpbmcoYXBpS2V5Lmxlbmd0aCAtIDQpO1xyXG59XHJcblxyXG4vLyBcdUIwQTBcdUM5REMgXHVEM0VDXHVCOUY3XHVEMzA1IFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMFxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlU3RyaW5nOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcclxuICAgIGlmICghZGF0ZVN0cmluZykge1xyXG4gICAgICAgIHJldHVybiAnXHVDNUM2XHVDNzRDJztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XHJcbiAgICBcclxuICAgIGlmIChpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcclxuICAgICAgICByZXR1cm4gJ1x1Qzc5OFx1QkFCQlx1QjQxQyBcdUIwQTBcdUM5REMnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygna28tS1InLCB7XHJcbiAgICAgICAgeWVhcjogJ251bWVyaWMnLFxyXG4gICAgICAgIG1vbnRoOiAnbG9uZycsXHJcbiAgICAgICAgZGF5OiAnbnVtZXJpYydcclxuICAgIH0pO1xyXG59ICIsICIvLyBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzggXHVDMTI0XHVDODE1IFx1QzBDMVx1QzIxOCBcdUJDMEYgXHVBRDZDXHVDMTMxXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBsdWdpbkNvbmZpZyB7XHJcbiAgICAvLyBBUEkgXHVBRDAwXHVCODI4IFx1QzEyNFx1QzgxNVxyXG4gICAgYXBpOiB7XHJcbiAgICAgICAgdGltZW91dHM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVtYmVyO1xyXG4gICAgICAgICAgICBsbG06IG51bWJlcjtcclxuICAgICAgICAgICAgdHRzOiBudW1iZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXRyaWVzOiB7XHJcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGRlbGF5TXM6IG51bWJlcjtcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiBib29sZWFuO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmF0ZUxpbWl0aW5nOiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RzUGVyTWludXRlOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGJ1cnN0TGltaXQ6IG51bWJlcjtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBcdUJDMzBcdUNFNTggXHVDQzk4XHVCOUFDIFx1QzEyNFx1QzgxNVxyXG4gICAgYmF0Y2g6IHtcclxuICAgICAgICBkZWZhdWx0U2l6ZTogbnVtYmVyO1xyXG4gICAgICAgIG1heFNpemU6IG51bWJlcjtcclxuICAgICAgICBkZWxheUJldHdlZW5CYXRjaGVzOiBudW1iZXI7XHJcbiAgICAgICAgbWF4Q29uY3VycmVudEJhdGNoZXM6IG51bWJlcjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QUQwMFx1QjgyOCBcdUMxMjRcdUM4MTVcclxuICAgIGF1ZGlvOiB7XHJcbiAgICAgICAgbWF4UG9vbFNpemU6IG51bWJlcjtcclxuICAgICAgICBhdXRvQ2xlYW51cFRpbWVvdXRNczogbnVtYmVyO1xyXG4gICAgICAgIG1heER1cmF0aW9uTXM6IG51bWJlcjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QzEyNFx1QzgxNVxyXG4gICAgZGF0YWJhc2U6IHtcclxuICAgICAgICBhdXRvU2F2ZUludGVydmFsOiBudW1iZXI7XHJcbiAgICAgICAgYmFja3VwRW5hYmxlZDogYm9vbGVhbjtcclxuICAgICAgICBtYXhGaWxlU2l6ZTogbnVtYmVyO1xyXG4gICAgICAgIGNvbXByZXNzaW9uRW5hYmxlZDogYm9vbGVhbjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gXHVENTU5XHVDMkI1IFx1QzU0Q1x1QUNFMFx1QjlBQ1x1Qzk5OCBcdUMxMjRcdUM4MTVcclxuICAgIGxlYXJuaW5nOiB7XHJcbiAgICAgICAgc3BhY2VkX3JlcGV0aXRpb246IHtcclxuICAgICAgICAgICAgaW5pdGlhbEludGVydmFsOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGVhc3lCb251czogbnVtYmVyO1xyXG4gICAgICAgICAgICBoYXJkUGVuYWx0eTogbnVtYmVyO1xyXG4gICAgICAgICAgICBtYXhJbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgICAgICAgICBtaW5JbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbG9hZF9iYWxhbmNpbmc6IHtcclxuICAgICAgICAgICAgbWF4RGFpbHlSZXZpZXdzOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGZ1enppbmdQZXJjZW50YWdlOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbldpbmRvdzogbnVtYmVyO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFVJIFx1QzEyNFx1QzgxNVxyXG4gICAgdWk6IHtcclxuICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogbnVtYmVyO1xyXG4gICAgICAgIHByb2dyZXNzVXBkYXRlSW50ZXJ2YWw6IG51bWJlcjtcclxuICAgICAgICBub3RpZmljYXRpb25UaW1lb3V0OiBudW1iZXI7XHJcbiAgICAgICAgbW9kYWxDbG9zZURlbGF5OiBudW1iZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFx1QkNGNFx1QzU0OCBcdUMxMjRcdUM4MTVcclxuICAgIHNlY3VyaXR5OiB7XHJcbiAgICAgICAgYXBpS2V5RW5jcnlwdGlvbjoge1xyXG4gICAgICAgICAgICBpdGVyYXRpb25zOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGtleUxlbmd0aDogbnVtYmVyO1xyXG4gICAgICAgICAgICBzYWx0TGVuZ3RoOiBudW1iZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZXNzaW9uVGltZW91dDogbnVtYmVyO1xyXG4gICAgICAgIG1heExvZ2luQXR0ZW1wdHM6IG51bWJlcjtcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIFx1QUUzMFx1QkNGOCBcdUMxMjRcdUM4MTVcclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09ORklHOiBQbHVnaW5Db25maWcgPSB7XHJcbiAgICBhcGk6IHtcclxuICAgICAgICB0aW1lb3V0czoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiAzMDAwMCwgICAgLy8gMzBcdUNEMDhcclxuICAgICAgICAgICAgbGxtOiA2MDAwMCwgICAgICAgIC8vIDYwXHVDRDA4XHJcbiAgICAgICAgICAgIHR0czogMTUwMDAsICAgICAgICAvLyAxNVx1Q0QwOFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmV0cmllczoge1xyXG4gICAgICAgICAgICBtYXhBdHRlbXB0czogMyxcclxuICAgICAgICAgICAgZGVsYXlNczogMTAwMCxcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmF0ZUxpbWl0aW5nOiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RzUGVyTWludXRlOiA2MCxcclxuICAgICAgICAgICAgYnVyc3RMaW1pdDogMTAsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgYmF0Y2g6IHtcclxuICAgICAgICBkZWZhdWx0U2l6ZTogNSxcclxuICAgICAgICBtYXhTaXplOiAyMCxcclxuICAgICAgICBkZWxheUJldHdlZW5CYXRjaGVzOiAyMDAsXHJcbiAgICAgICAgbWF4Q29uY3VycmVudEJhdGNoZXM6IDMsXHJcbiAgICB9LFxyXG5cclxuICAgIGF1ZGlvOiB7XHJcbiAgICAgICAgbWF4UG9vbFNpemU6IDEwLFxyXG4gICAgICAgIGF1dG9DbGVhbnVwVGltZW91dE1zOiAzMDAwMCwgIC8vIDMwXHVDRDA4XHJcbiAgICAgICAgbWF4RHVyYXRpb25NczogMzAwMDAwLCAgICAgICAgLy8gNVx1QkQ4NFxyXG4gICAgfSxcclxuXHJcbiAgICBkYXRhYmFzZToge1xyXG4gICAgICAgIGF1dG9TYXZlSW50ZXJ2YWw6IDUwMDAsICAgICAgIC8vIDVcdUNEMDhcclxuICAgICAgICBiYWNrdXBFbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIG1heEZpbGVTaXplOiAxMDQ4NTc2MCwgICAgICAgIC8vIDEwTUJcclxuICAgICAgICBjb21wcmVzc2lvbkVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgfSxcclxuXHJcbiAgICBsZWFybmluZzoge1xyXG4gICAgICAgIHNwYWNlZF9yZXBldGl0aW9uOiB7XHJcbiAgICAgICAgICAgIGluaXRpYWxJbnRlcnZhbDogMSwgICAgICAgIC8vIDFcdUM3N0NcclxuICAgICAgICAgICAgZWFzeUJvbnVzOiAxLjMsXHJcbiAgICAgICAgICAgIGhhcmRQZW5hbHR5OiAwLjgsXHJcbiAgICAgICAgICAgIG1heEludGVydmFsOiAzNjUsICAgICAgICAgIC8vIDFcdUIxNDRcclxuICAgICAgICAgICAgbWluSW50ZXJ2YWw6IDEsICAgICAgICAgICAgLy8gMVx1Qzc3Q1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9hZF9iYWxhbmNpbmc6IHtcclxuICAgICAgICAgICAgbWF4RGFpbHlSZXZpZXdzOiAxMDAsXHJcbiAgICAgICAgICAgIGZ1enppbmdQZXJjZW50YWdlOiA1LFxyXG4gICAgICAgICAgICBkaXN0cmlidXRpb25XaW5kb3c6IDcsICAgICAvLyA3XHVDNzdDXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgdWk6IHtcclxuICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogMzAwLCAgICAgICAvLyAzMDBtc1xyXG4gICAgICAgIHByb2dyZXNzVXBkYXRlSW50ZXJ2YWw6IDEwMCwgIC8vIDEwMG1zXHJcbiAgICAgICAgbm90aWZpY2F0aW9uVGltZW91dDogNTAwMCwgICAgLy8gNVx1Q0QwOFxyXG4gICAgICAgIG1vZGFsQ2xvc2VEZWxheTogNTAwLCAgICAgICAgIC8vIDUwMG1zXHJcbiAgICB9LFxyXG5cclxuICAgIHNlY3VyaXR5OiB7XHJcbiAgICAgICAgYXBpS2V5RW5jcnlwdGlvbjoge1xyXG4gICAgICAgICAgICBpdGVyYXRpb25zOiAxMDAwMCxcclxuICAgICAgICAgICAga2V5TGVuZ3RoOiAzMixcclxuICAgICAgICAgICAgc2FsdExlbmd0aDogMTYsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXNzaW9uVGltZW91dDogMzYwMDAwMCwgICAgICAvLyAxXHVDMkRDXHVBQzA0XHJcbiAgICAgICAgbWF4TG9naW5BdHRlbXB0czogNSxcclxuICAgIH0sXHJcbn07XHJcblxyXG4vLyBcdUQ2NThcdUFDQkRcdUJDQzQgXHVDMTI0XHVDODE1XHJcbmV4cG9ydCBjb25zdCBERVZFTE9QTUVOVF9DT05GSUc6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPiA9IHtcclxuICAgIGFwaToge1xyXG4gICAgICAgIHRpbWVvdXRzOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDEwMDAwLFxyXG4gICAgICAgICAgICBsbG06IDIwMDAwLFxyXG4gICAgICAgICAgICB0dHM6IDUwMDAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXRyaWVzOiB7XHJcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAxLFxyXG4gICAgICAgICAgICBkZWxheU1zOiA1MDAsXHJcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBiYXRjaDoge1xyXG4gICAgICAgIGRlZmF1bHRTaXplOiAyLFxyXG4gICAgICAgIG1heFNpemU6IDUsXHJcbiAgICAgICAgZGVsYXlCZXR3ZWVuQmF0Y2hlczogMTAwLFxyXG4gICAgfSxcclxuICAgIGRhdGFiYXNlOiB7XHJcbiAgICAgICAgYXV0b1NhdmVJbnRlcnZhbDogMTAwMCxcclxuICAgICAgICBiYWNrdXBFbmFibGVkOiBmYWxzZSxcclxuICAgIH0sXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgUFJPRFVDVElPTl9DT05GSUc6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPiA9IHtcclxuICAgIGFwaToge1xyXG4gICAgICAgIHJldHJpZXM6IHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDUsXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IDIwMDAsXHJcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIGJhdGNoOiB7XHJcbiAgICAgICAgZGVmYXVsdFNpemU6IDEwLFxyXG4gICAgICAgIG1heFNpemU6IDUwLFxyXG4gICAgICAgIGRlbGF5QmV0d2VlbkJhdGNoZXM6IDUwMCxcclxuICAgIH0sXHJcbiAgICBkYXRhYmFzZToge1xyXG4gICAgICAgIGF1dG9TYXZlSW50ZXJ2YWw6IDEwMDAwLFxyXG4gICAgICAgIGJhY2t1cEVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgY29tcHJlc3Npb25FbmFibGVkOiB0cnVlLFxyXG4gICAgfSxcclxufTtcclxuXHJcbi8vIFx1QzEyNFx1QzgxNSBcdUFEMDBcdUI5QUMgXHVEMDc0XHVCNzk4XHVDMkE0XHJcbmV4cG9ydCBjbGFzcyBDb25maWdNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBDb25maWdNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBjb25maWc6IFBsdWdpbkNvbmZpZztcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZ3MoREVGQVVMVF9DT05GSUcsIHRoaXMuZ2V0RW52aXJvbm1lbnRDb25maWcoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCk6IENvbmZpZ01hbmFnZXIge1xyXG4gICAgICAgIGlmICghQ29uZmlnTWFuYWdlci5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBDb25maWdNYW5hZ2VyLmluc3RhbmNlID0gbmV3IENvbmZpZ01hbmFnZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENvbmZpZ01hbmFnZXIuaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29uZmlnKCk6IFBsdWdpbkNvbmZpZyB7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5jb25maWcgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRWYWx1ZTxUPihwYXRoOiBzdHJpbmcpOiBUIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXROZXN0ZWRWYWx1ZSh0aGlzLmNvbmZpZywgcGF0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ29uZmlnKHVwZGF0ZXM6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZUNvbmZpZ3ModGhpcy5jb25maWcsIHVwZGF0ZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RW52aXJvbm1lbnRDb25maWcoKTogUGFydGlhbDxQbHVnaW5Db25maWc+IHtcclxuICAgICAgICAvLyBcdUFDMUNcdUJDMUMgXHVENjU4XHVBQ0JEIFx1QUMxMFx1QzlDMCAoXHVBQzA0XHVCMkU4XHVENTVDIFx1RDczNFx1QjlBQ1x1QzJBNFx1RDJGMSlcclxuICAgICAgICBjb25zdCBpc0RldmVsb3BtZW50ID0gXHJcbiAgICAgICAgICAgIHByb2Nlc3M/LmVudj8uTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgfHxcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uPy5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcgfHxcclxuICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnRGV2ZWxvcG1lbnQnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGlzRGV2ZWxvcG1lbnQgPyBERVZFTE9QTUVOVF9DT05GSUcgOiBQUk9EVUNUSU9OX0NPTkZJRztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1lcmdlQ29uZmlncyhiYXNlOiBQbHVnaW5Db25maWcsIG92ZXJyaWRlOiBQYXJ0aWFsPFBsdWdpbkNvbmZpZz4pOiBQbHVnaW5Db25maWcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZXBNZXJnZShiYXNlLCBvdmVycmlkZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWVwTWVyZ2U8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KHRhcmdldDogVCwgc291cmNlOiBQYXJ0aWFsPFQ+KTogVCB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyAuLi50YXJnZXQgfTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcclxuICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VWYWx1ZSA9IHNvdXJjZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VmFsdWUgPSByZXN1bHRba2V5XTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPYmplY3Qoc291cmNlVmFsdWUpICYmIHRoaXMuaXNPYmplY3QodGFyZ2V0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB0aGlzLmRlZXBNZXJnZSh0YXJnZXRWYWx1ZSwgc291cmNlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2VWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBzb3VyY2VWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNPYmplY3QoaXRlbTogYW55KTogaXRlbSBpcyBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcclxuICAgICAgICByZXR1cm4gaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoaXRlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXROZXN0ZWRWYWx1ZShvYmo6IGFueSwgcGF0aDogc3RyaW5nKTogYW55IHtcclxuICAgICAgICByZXR1cm4gcGF0aC5zcGxpdCgnLicpLnJlZHVjZSgoY3VycmVudCwga2V5KSA9PiBjdXJyZW50Py5ba2V5XSwgb2JqKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVEM0I4XHVDNzU4IFx1RDU2OFx1QzIxOFx1QjRFNFxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnKCk6IFBsdWdpbkNvbmZpZyB7XHJcbiAgICByZXR1cm4gQ29uZmlnTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldENvbmZpZygpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnVmFsdWU8VD4ocGF0aDogc3RyaW5nKTogVCB7XHJcbiAgICByZXR1cm4gQ29uZmlnTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFZhbHVlPFQ+KHBhdGgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ29uZmlnKHVwZGF0ZXM6IFBhcnRpYWw8UGx1Z2luQ29uZmlnPik6IHZvaWQge1xyXG4gICAgQ29uZmlnTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZUNvbmZpZyh1cGRhdGVzKTtcclxufVxyXG5cclxuLy8gXHVEMEMwXHVDNzg1IFx1QzU0OFx1QzgwNFx1RDU1QyBcdUMxMjRcdUM4MTUgXHVDODExXHVBREZDXHVDNzQ0IFx1QzcwNFx1RDU1QyBcdUMwQzFcdUMyMThcdUI0RTRcclxuZXhwb3J0IGNvbnN0IENPTkZJR19QQVRIUyA9IHtcclxuICAgIEFQSV9USU1FT1VUX0RFRkFVTFQ6ICdhcGkudGltZW91dHMuZGVmYXVsdCcsXHJcbiAgICBBUElfVElNRU9VVF9MTE06ICdhcGkudGltZW91dHMubGxtJyxcclxuICAgIEFQSV9USU1FT1VUX1RUUzogJ2FwaS50aW1lb3V0cy50dHMnLFxyXG4gICAgQVBJX1JFVFJZX01BWF9BVFRFTVBUUzogJ2FwaS5yZXRyaWVzLm1heEF0dGVtcHRzJyxcclxuICAgIEFQSV9SRVRSWV9ERUxBWTogJ2FwaS5yZXRyaWVzLmRlbGF5TXMnLFxyXG4gICAgQkFUQ0hfREVGQVVMVF9TSVpFOiAnYmF0Y2guZGVmYXVsdFNpemUnLFxyXG4gICAgQkFUQ0hfTUFYX1NJWkU6ICdiYXRjaC5tYXhTaXplJyxcclxuICAgIEJBVENIX0RFTEFZOiAnYmF0Y2guZGVsYXlCZXR3ZWVuQmF0Y2hlcycsXHJcbiAgICBBVURJT19NQVhfUE9PTF9TSVpFOiAnYXVkaW8ubWF4UG9vbFNpemUnLFxyXG4gICAgQVVESU9fQ0xFQU5VUF9USU1FT1VUOiAnYXVkaW8uYXV0b0NsZWFudXBUaW1lb3V0TXMnLFxyXG4gICAgTEVBUk5JTkdfSU5JVElBTF9JTlRFUlZBTDogJ2xlYXJuaW5nLnNwYWNlZF9yZXBldGl0aW9uLmluaXRpYWxJbnRlcnZhbCcsXHJcbiAgICBMRUFSTklOR19FQVNZX0JPTlVTOiAnbGVhcm5pbmcuc3BhY2VkX3JlcGV0aXRpb24uZWFzeUJvbnVzJyxcclxuICAgIExFQVJOSU5HX0hBUkRfUEVOQUxUWTogJ2xlYXJuaW5nLnNwYWNlZF9yZXBldGl0aW9uLmhhcmRQZW5hbHR5JyxcclxuICAgIFVJX0FOSU1BVElPTl9EVVJBVElPTjogJ3VpLmFuaW1hdGlvbkR1cmF0aW9uJyxcclxuICAgIFVJX05PVElGSUNBVElPTl9USU1FT1VUOiAndWkubm90aWZpY2F0aW9uVGltZW91dCcsXHJcbn0gYXMgY29uc3Q7IiwgIi8vIFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUM4MTVcdUNDNDUgXHVCQzBGIFx1QUQ2Q1x1RDYwNFxyXG5cclxuaW1wb3J0IHsgZ2V0Q29uZmlnVmFsdWUsIENPTkZJR19QQVRIUyB9IGZyb20gJy4vQ29uZmlnJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmV0cnlPcHRpb25zIHtcclxuICAgIG1heEF0dGVtcHRzPzogbnVtYmVyO1xyXG4gICAgZGVsYXlNcz86IG51bWJlcjtcclxuICAgIGV4cG9uZW50aWFsQmFja29mZj86IGJvb2xlYW47XHJcbiAgICBtYXhEZWxheU1zPzogbnVtYmVyO1xyXG4gICAgYmFja29mZk11bHRpcGxpZXI/OiBudW1iZXI7XHJcbiAgICByZXRyeUNvbmRpdGlvbj86IChlcnJvcjogRXJyb3IpID0+IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmV0cnlSZXN1bHQ8VD4ge1xyXG4gICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgIHJlc3VsdD86IFQ7XHJcbiAgICBlcnJvcj86IEVycm9yO1xyXG4gICAgYXR0ZW1wdHM6IG51bWJlcjtcclxuICAgIHRvdGFsRHVyYXRpb246IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJldHJ5UG9saWN5IHtcclxuICAgIHByaXZhdGUgb3B0aW9uczogUmVxdWlyZWQ8UmV0cnlPcHRpb25zPjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IG9wdGlvbnMubWF4QXR0ZW1wdHMgPz8gZ2V0Q29uZmlnVmFsdWU8bnVtYmVyPihDT05GSUdfUEFUSFMuQVBJX1JFVFJZX01BWF9BVFRFTVBUUyksXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IG9wdGlvbnMuZGVsYXlNcyA/PyBnZXRDb25maWdWYWx1ZTxudW1iZXI+KENPTkZJR19QQVRIUy5BUElfUkVUUllfREVMQVkpLFxyXG4gICAgICAgICAgICBleHBvbmVudGlhbEJhY2tvZmY6IG9wdGlvbnMuZXhwb25lbnRpYWxCYWNrb2ZmID8/IHRydWUsXHJcbiAgICAgICAgICAgIG1heERlbGF5TXM6IG9wdGlvbnMubWF4RGVsYXlNcyA/PyAzMDAwMCwgLy8gMzBcdUNEMDhcclxuICAgICAgICAgICAgYmFja29mZk11bHRpcGxpZXI6IG9wdGlvbnMuYmFja29mZk11bHRpcGxpZXIgPz8gMixcclxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IG9wdGlvbnMucmV0cnlDb25kaXRpb24gPz8gdGhpcy5kZWZhdWx0UmV0cnlDb25kaXRpb24sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUFFMzBcdUJDRjggXHVDN0FDXHVDMkRDXHVCM0M0IFx1Qzg3MFx1QUM3NFxyXG4gICAgcHJpdmF0ZSBkZWZhdWx0UmV0cnlDb25kaXRpb24oZXJyb3I6IEVycm9yKTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QzVEMFx1QjdFQywgXHVEMEMwXHVDNzg0XHVDNTQ0XHVDNkMzLCBcdUMxMUNcdUJDODQgXHVDNUQwXHVCN0VDXHVCMjk0IFx1QzdBQ1x1QzJEQ1x1QjNDNFxyXG4gICAgICAgIGNvbnN0IHJldHJ5YWJsZUVycm9ycyA9IFtcclxuICAgICAgICAgICAgJ05ldHdvcmtFcnJvcicsXHJcbiAgICAgICAgICAgICdUaW1lb3V0RXJyb3InLFxyXG4gICAgICAgICAgICAnZmV0Y2gnLFxyXG4gICAgICAgICAgICAnNTAyJywgJzUwMycsICc1MDQnLCAvLyBcdUMxMUNcdUJDODQgXHVDNUQwXHVCN0VDXHJcbiAgICAgICAgICAgICdFQ09OTlJFU0VUJyxcclxuICAgICAgICAgICAgJ0VUSU1FRE9VVCcsXHJcbiAgICAgICAgICAgICdFTk9URk9VTkQnXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IGVycm9yTmFtZSA9IGVycm9yLm5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJldHJ5YWJsZUVycm9ycy5zb21lKHBhdHRlcm4gPT4gXHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcyhwYXR0ZXJuLnRvTG93ZXJDYXNlKCkpIHx8IFxyXG4gICAgICAgICAgICBlcnJvck5hbWUuaW5jbHVkZXMocGF0dGVybi50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDOUMwXHVDMjE4IFx1QkMzMVx1QzYyNFx1RDUwNCBcdUFDQzRcdUMwQjBcclxuICAgIHByaXZhdGUgY2FsY3VsYXRlRGVsYXkoYXR0ZW1wdDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5leHBvbmVudGlhbEJhY2tvZmYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kZWxheU1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLm9wdGlvbnMuZGVsYXlNcyAqIE1hdGgucG93KHRoaXMub3B0aW9ucy5iYWNrb2ZmTXVsdGlwbGllciwgYXR0ZW1wdCAtIDEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzlDMFx1RDEzMCBcdUNEOTRcdUFDMDAgKFx1MDBCMTIwJSlcclxuICAgICAgICBjb25zdCBqaXR0ZXIgPSBkZWxheSAqIDAuMiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuICAgICAgICBjb25zdCBmaW5hbERlbGF5ID0gTWF0aC5mbG9vcihkZWxheSArIGppdHRlcik7XHJcblxyXG4gICAgICAgIHJldHVybiBNYXRoLm1pbihmaW5hbERlbGF5LCB0aGlzLm9wdGlvbnMubWF4RGVsYXlNcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVCM0Q5XHVBRTMwIFx1RDU2OFx1QzIxOCBcdUM3QUNcdUMyRENcdUIzQzRcclxuICAgIGFzeW5jIGV4ZWN1dGU8VD4oZm46ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFJldHJ5UmVzdWx0PFQ+PiB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzOyBhdHRlbXB0KyspIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHRzOiBhdHRlbXB0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzJEQ1x1QjNDNFx1Qzc3NFx1QUM3MFx1QjA5OCBcdUM3QUNcdUMyRENcdUIzQzQgXHVDODcwXHVBQzc0XHVDNzQ0IFx1QjlDQ1x1Qzg3MVx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3M0NcdUJBNzQgXHVDOTExXHVCMkU4XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzIHx8ICF0aGlzLm9wdGlvbnMucmV0cnlDb25kaXRpb24obGFzdEVycm9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUMyRENcdUIzQzQgXHVDODA0IFx1QjMwMFx1QUUzMFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLmNhbGN1bGF0ZURlbGF5KGF0dGVtcHQpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxheShkZWxheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBlcnJvcjogbGFzdEVycm9yLFxyXG4gICAgICAgICAgICBhdHRlbXB0czogdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzLFxyXG4gICAgICAgICAgICB0b3RhbER1cmF0aW9uOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIzRDlcdUFFMzAgXHVENTY4XHVDMjE4IFx1QzdBQ1x1QzJEQ1x1QjNDNFxyXG4gICAgZXhlY3V0ZVN5bmM8VD4oZm46ICgpID0+IFQpOiBSZXRyeVJlc3VsdDxUPiB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzOyBhdHRlbXB0KyspIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZuKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHRzOiBhdHRlbXB0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzJEQ1x1QjNDNFx1Qzc3NFx1QUM3MFx1QjA5OCBcdUM3QUNcdUMyRENcdUIzQzQgXHVDODcwXHVBQzc0XHVDNzQ0IFx1QjlDQ1x1Qzg3MVx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3M0NcdUJBNzQgXHVDOTExXHVCMkU4XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdGhpcy5vcHRpb25zLm1heEF0dGVtcHRzIHx8ICF0aGlzLm9wdGlvbnMucmV0cnlDb25kaXRpb24obGFzdEVycm9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1QjNEOVx1QUUzMCBcdUQ1NjhcdUMyMThcdUM1RDBcdUMxMUNcdUIyOTQgXHVDOTg5XHVDMkRDIFx1QjJFNFx1Qzc0QyBcdUMyRENcdUIzQzQgKFx1QkU0NFx1QjNEOVx1QUUzMCBcdUIzMDBcdUFFMzAgXHVCRDg4XHVBQzAwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgZXJyb3I6IGxhc3RFcnJvcixcclxuICAgICAgICAgICAgYXR0ZW1wdHM6IHRoaXMub3B0aW9ucy5tYXhBdHRlbXB0cyxcclxuICAgICAgICAgICAgdG90YWxEdXJhdGlvbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHVwZGF0ZU9wdGlvbnMob3B0aW9uczogUGFydGlhbDxSZXRyeU9wdGlvbnM+KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTI0XHVDODE1IFx1QkMxOFx1RDY1OFxyXG4gICAgZ2V0T3B0aW9ucygpOiBSZXF1aXJlZDxSZXRyeU9wdGlvbnM+IHtcclxuICAgICAgICByZXR1cm4geyAuLi50aGlzLm9wdGlvbnMgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVEMkI5XHVENjU0XHVCNDFDIFx1QzdBQ1x1QzJEQ1x1QjNDNCBcdUM4MTVcdUNDNDVcdUI0RTRcclxuZXhwb3J0IGNsYXNzIE5ldHdvcmtSZXRyeVBvbGljeSBleHRlbmRzIFJldHJ5UG9saWN5IHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFJldHJ5T3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgc3VwZXIoe1xyXG4gICAgICAgICAgICBtYXhBdHRlbXB0czogNSxcclxuICAgICAgICAgICAgZGVsYXlNczogMTAwMCxcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiB0cnVlLFxyXG4gICAgICAgICAgICBtYXhEZWxheU1zOiAxMDAwMCxcclxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QUQwMFx1QjgyOCBcdUM1RDBcdUI3RUNcdUI5Q0MgXHVDN0FDXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXR3b3JrRXJyb3JzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICduZXR3b3JrZXJyb3InLCAnZmV0Y2gnLCAndGltZW91dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2Vjb25ucmVzZXQnLCAnZXRpbWVkb3V0JywgJ2Vub3Rmb3VuZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJzUwMicsICc1MDMnLCAnNTA0JywgJzQwOCcsICc0MjknXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV0d29ya0Vycm9ycy5zb21lKHBhdHRlcm4gPT4gZXJyb3JUZXh0LmluY2x1ZGVzKHBhdHRlcm4pKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLi4ub3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQVBJUmV0cnlQb2xpY3kgZXh0ZW5kcyBSZXRyeVBvbGljeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDMsXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IDIwMDAsXHJcbiAgICAgICAgICAgIGV4cG9uZW50aWFsQmFja29mZjogdHJ1ZSxcclxuICAgICAgICAgICAgbWF4RGVsYXlNczogMTUwMDAsXHJcbiAgICAgICAgICAgIHJldHJ5Q29uZGl0aW9uOiAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEFQSSBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1QzkxMSBcdUM3QUNcdUMyRENcdUIzQzQgXHVBQzAwXHVCMkE1XHVENTVDIFx1QUM4M1x1QjRFNFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmV0cnlhYmxlRXJyb3JzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICc0MjknLCAvLyBSYXRlIGxpbWl0XHJcbiAgICAgICAgICAgICAgICAgICAgJzUwMicsICc1MDMnLCAnNTA0JywgLy8gU2VydmVyIGVycm9yc1xyXG4gICAgICAgICAgICAgICAgICAgICd0aW1lb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAnbmV0d29yaydcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXRyeWFibGVFcnJvcnMuc29tZShwYXR0ZXJuID0+IGVycm9yVGV4dC5pbmNsdWRlcyhwYXR0ZXJuKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERhdGFiYXNlUmV0cnlQb2xpY3kgZXh0ZW5kcyBSZXRyeVBvbGljeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDMsXHJcbiAgICAgICAgICAgIGRlbGF5TXM6IDUwMCxcclxuICAgICAgICAgICAgZXhwb25lbnRpYWxCYWNrb2ZmOiBmYWxzZSwgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVCMjk0IFx1QkU2MFx1Qjk3OCBcdUM3QUNcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgbWF4RGVsYXlNczogMjAwMCxcclxuICAgICAgICAgICAgcmV0cnlDb25kaXRpb246IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzdDXHVDMkRDXHVDODAxXHVDNzc4IFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUM1RDBcdUI3RUNcdUI5Q0MgXHVDN0FDXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXRyeWFibGVFcnJvcnMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xvY2snLCAnYnVzeScsICd0aW1lb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAnY29ubmVjdGlvbicsICduZXR3b3JrJ1xyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHJ5YWJsZUVycm9ycy5zb21lKHBhdHRlcm4gPT4gZXJyb3JUZXh0LmluY2x1ZGVzKHBhdHRlcm4pKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLi4ub3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUQzQjhcdUM3NTggXHVENTY4XHVDMjE4XHVCNEU0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyeUFzeW5jPFQ+KFxyXG4gICAgZm46ICgpID0+IFByb21pc2U8VD4sXHJcbiAgICBvcHRpb25zPzogUmV0cnlPcHRpb25zXHJcbik6IFByb21pc2U8VD4ge1xyXG4gICAgY29uc3QgcG9saWN5ID0gbmV3IFJldHJ5UG9saWN5KG9wdGlvbnMpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9saWN5LmV4ZWN1dGUoZm4pO1xyXG4gICAgXHJcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdCE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJldHJ5U3luYzxUPihcclxuICAgIGZuOiAoKSA9PiBULFxyXG4gICAgb3B0aW9ucz86IFJldHJ5T3B0aW9uc1xyXG4pOiBUIHtcclxuICAgIGNvbnN0IHBvbGljeSA9IG5ldyBSZXRyeVBvbGljeShvcHRpb25zKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHBvbGljeS5leGVjdXRlU3luYyhmbik7XHJcbiAgICBcclxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0ITtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUIxMjRcdUQyQjhcdUM2Q0NcdUQwNkMgXHVDNjk0XHVDQ0FEXHVDNkE5IFx1RDNCOFx1Qzc1OCBcdUQ1NjhcdUMyMThcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJldHJ5TmV0d29ya1JlcXVlc3Q8VD4oXHJcbiAgICBmbjogKCkgPT4gUHJvbWlzZTxUPixcclxuICAgIG9wdGlvbnM/OiBSZXRyeU9wdGlvbnNcclxuKTogUHJvbWlzZTxUPiB7XHJcbiAgICBjb25zdCBwb2xpY3kgPSBuZXcgTmV0d29ya1JldHJ5UG9saWN5KG9wdGlvbnMpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9saWN5LmV4ZWN1dGUoZm4pO1xyXG4gICAgXHJcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdCE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcclxuICAgIH1cclxufVxyXG5cclxuLy8gQVBJIFx1RDYzOFx1Q0Q5Q1x1QzZBOSBcdUQzQjhcdUM3NTggXHVENTY4XHVDMjE4XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyeUFQSUNhbGw8VD4oXHJcbiAgICBmbjogKCkgPT4gUHJvbWlzZTxUPixcclxuICAgIG9wdGlvbnM/OiBSZXRyeU9wdGlvbnNcclxuKTogUHJvbWlzZTxUPiB7XHJcbiAgICBjb25zdCBwb2xpY3kgPSBuZXcgQVBJUmV0cnlQb2xpY3kob3B0aW9ucyk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb2xpY3kuZXhlY3V0ZShmbik7XHJcbiAgICBcclxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0ITtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBDaXJjdWl0IEJyZWFrZXIgXHVEMzI4XHVEMTM0XHVBQ0ZDIFx1RDU2OFx1QUVEOCBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QjI5NCBcdUFDRTBcdUFFMDkgXHVDN0FDXHVDMkRDXHVCM0M0XHJcbmV4cG9ydCBjbGFzcyBDaXJjdWl0QnJlYWtlclJldHJ5UG9saWN5IGV4dGVuZHMgUmV0cnlQb2xpY3kge1xyXG4gICAgcHJpdmF0ZSBmYWlsdXJlQ291bnQgPSAwO1xyXG4gICAgcHJpdmF0ZSBsYXN0RmFpbHVyZVRpbWUgPSAwO1xyXG4gICAgcHJpdmF0ZSBjaXJjdWl0QnJlYWtlclRpbWVvdXQgPSA2MDAwMDsgLy8gMVx1QkQ4NFxyXG4gICAgcHJpdmF0ZSBmYWlsdXJlVGhyZXNob2xkID0gNTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBSZXRyeU9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGV4ZWN1dGVXaXRoQ2lyY3VpdEJyZWFrZXI8VD4oZm46ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFJldHJ5UmVzdWx0PFQ+PiB7XHJcbiAgICAgICAgLy8gQ2lyY3VpdCBCcmVha2VyIFx1Q0NCNFx1RDA2Q1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ2lyY3VpdE9wZW4oKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogbmV3IEVycm9yKCdDaXJjdWl0IGJyZWFrZXIgaXMgb3BlbicpLFxyXG4gICAgICAgICAgICAgICAgYXR0ZW1wdHM6IDAsXHJcbiAgICAgICAgICAgICAgICB0b3RhbER1cmF0aW9uOiAwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGUoZm4pO1xyXG5cclxuICAgICAgICAvLyBcdUFDQjBcdUFDRkNcdUM1RDAgXHVCNTMwXHVCOTc4IENpcmN1aXQgQnJlYWtlciBcdUMwQzFcdUQwREMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZUNvdW50ID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZhaWx1cmVDb3VudCsrO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RGYWlsdXJlVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNDaXJjdWl0T3BlbigpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5mYWlsdXJlQ291bnQgPCB0aGlzLmZhaWx1cmVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdEZhaWx1cmUgPSBEYXRlLm5vdygpIC0gdGhpcy5sYXN0RmFpbHVyZVRpbWU7XHJcbiAgICAgICAgaWYgKHRpbWVTaW5jZUxhc3RGYWlsdXJlID49IHRoaXMuY2lyY3VpdEJyZWFrZXJUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZUNvdW50ID0gMDsgLy8gUmVzZXQgY2lyY3VpdCBicmVha2VyXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcclxuaW1wb3J0IHsgV29yZERhdGEgfSBmcm9tICcuLi8uLi9Wb2NhYnVsYXJ5Q2FyZCc7XHJcbmltcG9ydCB7IGRlY3J5cHRBcGlLZXkgfSBmcm9tICcuLi8uLi91dGlscyc7XHJcbmltcG9ydCB7IHJldHJ5QVBJQ2FsbCwgQVBJUmV0cnlQb2xpY3kgfSBmcm9tICcuLi8uLi9zaGFyZWQvUmV0cnlQb2xpY3knO1xyXG5pbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMTE1SZXNwb25zZSB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgZGF0YT86IGFueTtcclxuICAgIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb2dyZXNzQ2FsbGJhY2sge1xyXG4gICAgKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBXb3JkRGV0YWlsRGF0YSB7XHJcbiAgICB3b3JkOiBzdHJpbmc7XHJcbiAgICBwcm9udW5jaWF0aW9uOiBzdHJpbmc7XHJcbiAgICBtZWFuaW5nczogc3RyaW5nW107XHJcbiAgICBleGFtcGxlczoge1xyXG4gICAgICAgIGVuZ2xpc2g6IHN0cmluZztcclxuICAgICAgICBrb3JlYW46IHN0cmluZztcclxuICAgIH1bXTtcclxuICAgIHNpbWlsYXJXb3Jkczogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMTE1TZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncztcclxuICAgIHByaXZhdGUgcmV0cnlQb2xpY3k6IEFQSVJldHJ5UG9saWN5O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICAgICAgdGhpcy5yZXRyeVBvbGljeSA9IG5ldyBBUElSZXRyeVBvbGljeSh7XHJcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAzLFxyXG4gICAgICAgICAgICBkZWxheU1zOiAyMDAwLFxyXG4gICAgICAgICAgICBleHBvbmVudGlhbEJhY2tvZmY6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc1OCBBUEkgXHVEMEE0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUJBNTRcdUMxMUNcdUI0RENcclxuICAgIHByaXZhdGUgZ2V0Q3VycmVudEFwaUtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5zZXR0aW5ncy5sbG1Qcm92aWRlcjtcclxuICAgICAgICBsZXQgZW5jcnlwdGVkS2V5ID0gJyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3dpdGNoIChwcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgZW5jcnlwdGVkS2V5ID0gdGhpcy5zZXR0aW5ncy5vcGVuYWlBcGlLZXk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcclxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZEtleSA9IHRoaXMuc2V0dGluZ3MuYW50aHJvcGljQXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2dvb2dsZSc6XHJcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRLZXkgPSB0aGlzLnNldHRpbmdzLmdvb2dsZUFwaUtleTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZGVjcnlwdEFwaUtleShlbmNyeXB0ZWRLZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKTtcclxuICAgICAgICAgICAgaWYgKCFhcGlLZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RQcm9tcHQgPSAnSGVsbG8sIHRoaXMgaXMgYSB0ZXN0IG1lc3NhZ2UuIFBsZWFzZSByZXNwb25kIHdpdGggXCJPS1wiIGlmIHlvdSBjYW4gcmVhZCB0aGlzLic7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsTExNKHRlc3RQcm9tcHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6ICdBUEkgXHVDNUYwXHVBQ0IwIFx1QzEzMVx1QUNGNScgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzcG9uc2UuZXJyb3IgfHwgJ0FQSSBcdUM1RjBcdUFDQjAgXHVDMkU0XHVEMzI4JyB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFdvcmREZXRhaWxzKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKTtcclxuICAgICAgICAgICAgaWYgKCFhcGlLZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IHRoaXMuY3JlYXRlV29yZERldGFpbFByb21wdCh3b3JkKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxMTE0ocHJvbXB0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gdGhpcy5wYXJzZVdvcmREZXRhaWxSZXNwb25zZShyZXNwb25zZS5kYXRhLCB3b3JkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHBhcnNlZERhdGEgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzcG9uc2UuZXJyb3IgfHwgJ1x1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0XHVCMzcwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0TXVsdGlwbGVXb3JkRGV0YWlscyh3b3Jkczogc3RyaW5nW10sIHByb2dyZXNzQ2FsbGJhY2s/OiBQcm9ncmVzc0NhbGxiYWNrKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IHRoaXMuZ2V0Q3VycmVudEFwaUtleSgpO1xyXG4gICAgICAgICAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHdvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHVDQzk4XHVCOUFDXHVENTYwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBCQVRDSF9TSVpFID0gMjA7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFJlc3VsdHM6IFdvcmREZXRhaWxEYXRhW10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgdG90YWxCYXRjaGVzID0gTWF0aC5jZWlsKHdvcmRzLmxlbmd0aCAvIEJBVENIX1NJWkUpO1xyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKDAsIHdvcmRzLmxlbmd0aCwgYFx1Q0QxRCAke3dvcmRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0XHVCOTdDICR7dG90YWxCYXRjaGVzfVx1QUMxQyBcdUJDMzBcdUNFNThcdUI4NUMgXHVCMDk4XHVCMjA0XHVDNUI0IFx1Q0M5OFx1QjlBQ1x1RDU2OVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkgKz0gQkFUQ0hfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmF0Y2hOdW1iZXIgPSBNYXRoLmZsb29yKGkgLyBCQVRDSF9TSVpFKSArIDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaFdvcmRzID0gd29yZHMuc2xpY2UoaSwgaSArIEJBVENIX1NJWkUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhpLCB3b3Jkcy5sZW5ndGgsIGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0vJHt0b3RhbEJhdGNoZXN9IFx1Q0M5OFx1QjlBQyBcdUM5MTEuLi4gKCR7YmF0Y2hXb3Jkcy5sZW5ndGh9XHVBQzFDIFx1QjJFOFx1QzVCNClgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHQgPSB0aGlzLmNyZWF0ZU11bHRpcGxlV29yZERldGFpbFByb21wdChiYXRjaFdvcmRzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbExMTShwcm9tcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSB0aGlzLnBhcnNlTXVsdGlwbGVXb3JkRGV0YWlsUmVzcG9uc2UocmVzcG9uc2UuZGF0YSwgYmF0Y2hXb3Jkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbFJlc3VsdHMucHVzaCguLi5wYXJzZWREYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGkgKyBiYXRjaFdvcmRzLmxlbmd0aCwgd29yZHMubGVuZ3RoLCBgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzY0NFx1QjhDQzogJHtwYXJzZWREYXRhLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1Q0M5OFx1QjlBQ1x1QjQyOGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCQzMwXHVDRTU4ICR7YmF0Y2hOdW1iZXJ9IFx1QzJFNFx1RDMyODpgLCByZXNwb25zZS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGksIHdvcmRzLmxlbmd0aCwgYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfSBcdUMyRTRcdUQzMjgsIFx1QUMxQ1x1QkNDNCBcdUNDOThcdUI5QUNcdUI4NUMgXHVDODA0XHVENjU4Li4uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVDMkU0XHVEMzI4XHVENTVDIFx1QkMzMFx1Q0U1OFx1Qzc1OCBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NDQgXHVBQzFDXHVCQ0M0XHVDODAxXHVDNzNDXHVCODVDIFx1Q0M5OFx1QjlBQyBcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kaXZpZHVhbFJlc3VsdHMgPSBhd2FpdCB0aGlzLnByb2Nlc3NXb3Jkc0luZGl2aWR1YWxseShiYXRjaFdvcmRzLCBwcm9ncmVzc0NhbGxiYWNrLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLmluZGl2aWR1YWxSZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1QkMzMFx1Q0U1OCAke2JhdGNoTnVtYmVyfSBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1ODpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhpLCB3b3Jkcy5sZW5ndGgsIGBcdUJDMzBcdUNFNTggJHtiYXRjaE51bWJlcn0gXHVDNjI0XHVCOTU4LCBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDXHVCODVDIFx1QzgwNFx1RDY1OC4uLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREIFx1QzJEQyBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDXHVCODVDIFx1RDNGNFx1QkMzMVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGl2aWR1YWxSZXN1bHRzID0gYXdhaXQgdGhpcy5wcm9jZXNzV29yZHNJbmRpdmlkdWFsbHkoYmF0Y2hXb3JkcywgcHJvZ3Jlc3NDYWxsYmFjaywgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLmluZGl2aWR1YWxSZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdUJDMzBcdUNFNTggXHVBQzA0IFx1QzlFN1x1Qzc0MCBcdUM5QzBcdUM1RjAgKEFQSSBcdUM4MUNcdUQ1NUMgXHVCQzI5XHVDOUMwKVxyXG4gICAgICAgICAgICAgICAgaWYgKGkgKyBCQVRDSF9TSVpFIDwgd29yZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxheSgxMDAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2sod29yZHMubGVuZ3RoLCB3b3Jkcy5sZW5ndGgsIGBcdUJBQThcdUI0RTAgXHVCQzMwXHVDRTU4IFx1Q0M5OFx1QjlBQyBcdUM2NDRcdUI4Q0MuIFx1Q0QxRCAke2FsbFJlc3VsdHMubGVuZ3RofVx1QUMxQyBcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzIxOFx1QzlEMVx1QjQyOGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGFsbFJlc3VsdHMgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUIyRThcdUM1QjQgXHVDQzk4XHVCOUFDIChcdUJDMzBcdUNFNTggXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUQzRjRcdUJDMzEpXHJcbiAgICBwcml2YXRlIGFzeW5jIHByb2Nlc3NXb3Jkc0luZGl2aWR1YWxseSh3b3Jkczogc3RyaW5nW10sIHByb2dyZXNzQ2FsbGJhY2s/OiBQcm9ncmVzc0NhbGxiYWNrLCBzdGFydEluZGV4OiBudW1iZXIgPSAwKTogUHJvbWlzZTxXb3JkRGV0YWlsRGF0YVtdPiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0czogV29yZERldGFpbERhdGFbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHdvcmRzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBzdGFydEluZGV4ICsgaTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soY3VycmVudEluZGV4LCBzdGFydEluZGV4ICsgd29yZHMubGVuZ3RoLCBgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQzogXCIke3dvcmR9XCJgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldFdvcmREZXRhaWxzKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCIgXHVDQzk4XHVCOUFDIFx1QzJFNFx1RDMyODpgLCByZXNwb25zZS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVDMkU0XHVEMzI4XHVENTVDIFx1QjJFOFx1QzVCNFx1QzVEMCBcdUIzMDBcdUQ1NUMgXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMwRERcdUMxMzFcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JkOiB3b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogWydcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4J10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUFDMUNcdUJDQzQgXHVDQzk4XHVCOUFDIFx1QUMwNCBcdUM5RTdcdUM3NDAgXHVDOUMwXHVDNUYwXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDUwMCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCIgXHVBQzFDXHVCQ0M0IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZDogd29yZC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Q0M5OFx1QjlBQyBcdUM2MjRcdUI5NTgnXSxcclxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDOUMwXHVDNUYwIFx1RDU2OFx1QzIxOFxyXG4gICAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlV29yZERldGFpbFByb21wdCh3b3JkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgXHVCMkU0XHVDNzRDIFx1QzYwMVx1QzVCNCBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUM1RDAgXHVCMzAwXHVENTVDIFx1QzBDMVx1QzEzOCBcdUM4MTVcdUJDRjRcdUI5N0MgSlNPTiBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUMgXHVDODFDXHVBQ0Y1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LlxyXG5cclxuXHVDNjk0XHVBRDZDXHVDMEFDXHVENTZEOlxyXG4xLiBcdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzggKElQQSBcdUQ2MTVcdUMyREQpXHJcbjIuIFx1RDU1Q1x1QUUwMCBcdUI3M0JcdUI0RTQgKFx1QzVFQ1x1QjdFQyBcdUFDMUNcdUM3N0MgXHVDMjE4IFx1Qzc4OFx1Qzc0QylcclxuMy4gXHVBQzAxIFx1QjczQlx1QkNDNFx1Qjg1QyBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4XHVBQ0ZDIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgKFx1QUMwMSBcdUI3M0JcdUIyRjkgMi0zXHVBQzFDXHVDNzU4IFx1QzYwOFx1QkIzOCBcdUM4MUNcdUFDRjUpXHJcbjQuIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0XHVCNEU0XHJcblxyXG5cdUM3NTFcdUIyRjUgXHVENjE1XHVDMkREOlxyXG57XHJcbiAgXCJ3b3JkXCI6IFwiJHt3b3JkfVwiLFxyXG4gIFwicHJvbnVuY2lhdGlvblwiOiBcIi9cdUJDMUNcdUM3NENcdUFFMzBcdUQ2MzgvXCIsXHJcbiAgXCJtZWFuaW5nc1wiOiBbXCJcdUI3M0IxXCIsIFwiXHVCNzNCMlwiLCBcIlx1QjczQjNcIl0sXHJcbiAgXCJleGFtcGxlc1wiOiBbXHJcbiAgICB7XHJcbiAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggMVwiLFxyXG4gICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgMVwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImVuZ2xpc2hcIjogXCJcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IDJcIiwgXHJcbiAgICAgIFwia29yZWFuXCI6IFwiXHVENTVDXHVBRTAwIFx1QkM4OFx1QzVFRCAyXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiZW5nbGlzaFwiOiBcIlx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggM1wiLFxyXG4gICAgICBcImtvcmVhblwiOiBcIlx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgM1wiXHJcbiAgICB9XHJcbiAgXSxcclxuICBcInNpbWlsYXJXb3Jkc1wiOiBbXCJcdUM3MjBcdUMwQUNcdUIyRThcdUM1QjQxXCIsIFwiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0MlwiLCBcIlx1QzcyMFx1QzBBQ1x1QjJFOFx1QzVCNDNcIl1cclxufVxyXG5cclxuSlNPTiBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUNcdUI5Q0MgXHVDNzUxXHVCMkY1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LiBcdUIyRTRcdUI5NzggXHVDMTI0XHVCQTg1XHVDNzQwIFx1RDNFQ1x1RDU2OFx1RDU1OFx1QzlDMCBcdUI5QzhcdUMxMzhcdUM2OTQuYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZU11bHRpcGxlV29yZERldGFpbFByb21wdCh3b3Jkczogc3RyaW5nW10pOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHdvcmRMaXN0ID0gd29yZHMuam9pbignLCAnKTtcclxuICAgICAgICByZXR1cm4gYFx1QjJFNFx1Qzc0QyBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0XHVCNEU0XHVDNUQwIFx1QjMwMFx1RDU1QyBcdUMwQzFcdUMxMzggXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QzgxNVx1RDY1NVx1RDU1QyBKU09OIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUM4MUNcdUFDRjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQ6ICR7d29yZExpc3R9XHJcblxyXG5cdUM2OTRcdUFENkNcdUMwQUNcdUQ1NkQ6XHJcbi0gXHVBQzAxIFx1QjJFOFx1QzVCNFx1QzVEMCBcdUIzMDBcdUQ1NzQgXHVCQzFDXHVDNzRDXHVBRTMwXHVENjM4IChJUEEgXHVENjE1XHVDMkREKSwgXHVENTVDXHVBRTAwIFx1QjczQlx1QjRFNCwgXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOFx1QUNGQyBcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVELCBcdUM3MjBcdUMwQUNcdUQ1NUMgXHVDNjAxXHVDNUI0IFx1QjJFOFx1QzVCNFx1QjRFNFx1Qzc0NCBcdUQzRUNcdUQ1NjhcclxuLSBcdUFDMDEgXHVCNzNCXHVCQ0M0XHVCODVDIDItM1x1QUMxQ1x1Qzc1OCBcdUM2MDhcdUJCMzhcdUM3NDQgXHVDODFDXHVBQ0Y1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0XHJcbi0gSlNPTiBcdUQ2MTVcdUMyRERcdUI5Q0MgXHVDNzUxXHVCMkY1XHVENTU4XHVBQ0UwIFx1QjJFNFx1Qjk3OCBcdUMxMjRcdUJBODVcdUM3NDAgXHVEM0VDXHVENTY4XHVENTU4XHVDOUMwIFx1QjlDOFx1QzEzOFx1QzY5NFxyXG4tIFx1QkFBOFx1QjRFMCBcdUJCMzhcdUM3OTBcdUM1RjRcdUM3NDAgXHVDNzc0XHVDOTExIFx1QjUzMFx1QzYzNFx1RDQ1Q1x1Qjg1QyBcdUFDMTBcdUMyRjhcdUM4RkNcdUMxMzhcdUM2OTRcclxuLSBcdUJDMzBcdUM1RjRcdUFDRkMgXHVBQzFEXHVDQ0I0XHVCMjk0IFx1QzgxNVx1RDY1NVx1RDU1QyBKU09OIFx1QkIzOFx1QkM5NVx1Qzc0NCBcdUI1MzBcdUI5NzRcdUMxMzhcdUM2OTRcclxuXHJcblx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyREQ6XHJcbltcclxuICB7XHJcbiAgICBcIndvcmRcIjogXCJcdUIyRThcdUM1QjQxXCIsXHJcbiAgICBcInByb251bmNpYXRpb25cIjogXCIvXHVCQzFDXHVDNzRDXHVBRTMwXHVENjM4L1wiLFxyXG4gICAgXCJtZWFuaW5nc1wiOiBbXCJcdUI3M0IxXCIsIFwiXHVCNzNCMlwiXSxcclxuICAgIFwiZXhhbXBsZXNcIjogW1xyXG4gICAgICB7XHJcbiAgICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAxXCIsXHJcbiAgICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDFcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAyXCIsXHJcbiAgICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDJcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgXCJlbmdsaXNoXCI6IFwiXHVDNjAxXHVDNUI0IFx1QzYwOFx1QkIzOCAzXCIsXHJcbiAgICAgICAgXCJrb3JlYW5cIjogXCJcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIDNcIlxyXG4gICAgICB9XHJcbiAgICBdLFxyXG4gICAgXCJzaW1pbGFyV29yZHNcIjogW1wiXHVDNzIwXHVDMEFDXHVCMkU4XHVDNUI0MVwiLCBcIlx1QzcyMFx1QzBBQ1x1QjJFOFx1QzVCNDJcIl1cclxuICB9XHJcbl1cclxuXHJcblx1QzkxMVx1QzY5NDogSlNPTiBcdUQ2MTVcdUMyRERcdUI5Q0MgXHVDNzUxXHVCMkY1XHVENTU4XHVBQ0UwIFx1QjJFNFx1Qjk3OCBcdUQxNERcdUMyQTRcdUQyQjhcdUIyOTQgXHVEM0VDXHVENTY4XHVENTU4XHVDOUMwIFx1QjlDOFx1QzEzOFx1QzY5NC5gO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY2FsbExMTShwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8TExNUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuc2V0dGluZ3MubGxtUHJvdmlkZXI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNhbGxPcGVuQUkocHJvbXB0KTtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2FsbEFudGhyb3BpYyhwcm9tcHQpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZ29vZ2xlJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jYWxsR29vZ2xlKHByb21wdCk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1QzlDMFx1QzZEMFx1RDU1OFx1QzlDMCBcdUM1NEFcdUIyOTQgTExNIFx1QzgxQ1x1QUNGNVx1QzVDNVx1Q0NCNFx1Qzc4NVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsT3BlbkFJKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlBUElDYWxsKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdFVybCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5nZXRDdXJyZW50QXBpS2V5KCl9YFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5zZXR0aW5ncy5sbG1Nb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHByb21wdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3Rva2VuczogNDAwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDQwMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JEYXRhLmVycm9yPy5tZXNzYWdlIHx8ICdPcGVuQUkgQVBJIFx1RDYzOFx1Q0Q5QyBcdUMyRTRcdUQzMjgnIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdUM3NTFcdUIyRjUgXHVCMEI0XHVDNkE5XHVDNzc0IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGNvbnRlbnQgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjYWxsQW50aHJvcGljKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxMTE1SZXNwb25zZT4ge1xyXG4gICAgICAgIC8vIE5vZGUuanMgXHVENjU4XHVBQ0JEXHVDNUQwXHVDMTFDXHVCOUNDIFx1QjNEOVx1Qzc5MVx1RDU1OFx1QjNDNFx1Qjg1RCBcdUNDOThcdUI5QUNcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICdwcm9jZXNzJyBpbiB3aW5kb3cgJiYgKHdpbmRvdyBhcyBXaW5kb3cgJiB7IHByb2Nlc3M/OiB7IHR5cGU/OiBzdHJpbmcgfSB9KS5wcm9jZXNzPy50eXBlID09PSAncmVuZGVyZXInKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5hbnRocm9waWMuY29tL3YxL21lc3NhZ2VzJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd4LWFwaS1rZXknOiB0aGlzLmdldEN1cnJlbnRBcGlLZXkoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLnNldHRpbmdzLmxsbU1vZGVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiAzMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogcHJvbXB0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCAnQW50aHJvcGljIEFQSSBcdUQ2MzhcdUNEOUMgXHVDMkU0XHVEMzI4JyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLmNvbnRlbnRbMF0/LnRleHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdUM3NTFcdUIyRjUgXHVCMEI0XHVDNkE5XHVDNzc0IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjb250ZW50IH07XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1QkUwQ1x1Qjc3Q1x1QzZCMFx1QzgwMCBcdUQ2NThcdUFDQkRcdUM1RDBcdUMxMUNcdUIyOTQgXHVDNTQ4XHVCMEI0IFx1QkE1NFx1QzJEQ1x1QzlDMCBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdBbnRocm9waWMgQVBJXHVCMjk0IFx1QkUwQ1x1Qjc3Q1x1QzZCMFx1QzgwMCBcdUQ2NThcdUFDQkRcdUM1RDBcdUMxMUMgXHVDOUMxXHVDODExIFx1RDYzOFx1Q0Q5Q1x1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUIzNzBcdUMyQTRcdUQwNkNcdUQxQjEgXHVDNTcxKE9ic2lkaWFuKVx1QzVEMFx1QzExQ1x1QjlDQyBcdUIzRDlcdUM3OTFcdUQ1NjlcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNhbGxHb29nbGUocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPExMTVJlc3BvbnNlPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXRyeUFQSUNhbGwoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0VXJsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy8ke3RoaXMuc2V0dGluZ3MubGxtTW9kZWx9OmdlbmVyYXRlQ29udGVudD9rZXk9JHt0aGlzLmdldEN1cnJlbnRBcGlLZXkoKX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9tcHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDQwMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UudGV4dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCAnR29vZ2xlIEFQSSBcdUQ2MzhcdUNEOUMgXHVDMkU0XHVEMzI4JyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGRhdGEuY2FuZGlkYXRlc1swXT8uY29udGVudD8ucGFydHNbMF0/LnRleHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1Qzc1MVx1QjJGNSBcdUIwQjRcdUM2QTlcdUM3NzQgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogY29udGVudCB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcsIG9yaWdpbmFsV29yZDogc3RyaW5nKTogV29yZERldGFpbERhdGEge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEpTT04gXHVDNzUxXHVCMkY1XHVDNUQwXHVDMTFDIEpTT04gXHVCRDgwXHVCRDg0XHVCOUNDIFx1Q0Q5NFx1Q0Q5Q1xyXG4gICAgICAgICAgICBjb25zdCBqc29uTWF0Y2ggPSByZXNwb25zZS5tYXRjaCgvXFx7W1xcc1xcU10qXFx9Lyk7XHJcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pTT04gXHVENjE1XHVDMkREXHVDNzU4IFx1Qzc1MVx1QjJGNVx1Qzc0NCBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUM2MDhcdUJCMzggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUM4MFx1Qzk5RCBcdUJDMEYgXHVDODE1XHVCOUFDXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzID0gdGhpcy52YWxpZGF0ZUV4YW1wbGVzKGpzb25EYXRhLmV4YW1wbGVzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiBqc29uRGF0YS53b3JkIHx8IG9yaWdpbmFsV29yZCxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IGpzb25EYXRhLnByb251bmNpYXRpb24gfHwgJycsXHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nczoganNvbkRhdGEubWVhbmluZ3MgfHwgW10sXHJcbiAgICAgICAgICAgICAgICBleGFtcGxlczogdmFsaWRhdGVkRXhhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IGpzb25EYXRhLnNpbWlsYXJXb3JkcyB8fCBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIEpTT04gXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVBRTMwXHVCQ0Y4IFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6IG9yaWdpbmFsV29yZCxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVDNzU4XHVCQkY4XHVCOTdDIFx1RDMwQ1x1QzJGMVx1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LiddLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM2MDhcdUJCMzggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUM4MFx1Qzk5RCBcdUJDMEYgXHVDODE1XHVCOUFDXHJcbiAgICBwcml2YXRlIHZhbGlkYXRlRXhhbXBsZXMoZXhhbXBsZXM6IGFueVtdKTogeyBlbmdsaXNoOiBzdHJpbmc7IGtvcmVhbjogc3RyaW5nOyB9W10ge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShleGFtcGxlcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRXhhbXBsZXM6IHsgZW5nbGlzaDogc3RyaW5nOyBrb3JlYW46IHN0cmluZzsgfVtdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBleGFtcGxlIG9mIGV4YW1wbGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChleGFtcGxlICYmIHR5cGVvZiBleGFtcGxlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5nbGlzaCA9IGV4YW1wbGUuZW5nbGlzaCB8fCBleGFtcGxlLmVuZ2xpc2hfdGV4dCB8fCBleGFtcGxlLnRleHQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrb3JlYW4gPSBleGFtcGxlLmtvcmVhbiB8fCBleGFtcGxlLmtvcmVhbl90ZXh0IHx8IGV4YW1wbGUudHJhbnNsYXRpb24gfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChlbmdsaXNoLnRyaW0oKSAmJiBrb3JlYW4udHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVkRXhhbXBsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6IGVuZ2xpc2gudHJpbSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46IGtvcmVhbi50cmltKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRXhhbXBsZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZU11bHRpcGxlV29yZERldGFpbFJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcsIG9yaWdpbmFsV29yZHM6IHN0cmluZ1tdKTogV29yZERldGFpbERhdGFbXSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDEuIFx1QzY0NFx1QzgwNFx1RDU1QyBKU09OIFx1QkMzMFx1QzVGNFx1Qzc0NCBcdUNDM0VcdUM1NDRcdUJDRjRcdUFFMzBcclxuICAgICAgICAgICAgbGV0IGpzb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXFtbXFxzXFxTXSpcXF0vKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAyLiBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVCQzMwXHVDNUY0XHVDNzc0IFx1QzVDNlx1QzczQ1x1QkE3NCBcdUFDMUNcdUJDQzQgXHVBQzFEXHVDQ0I0XHVCNEU0XHVDNzQ0IFx1Q0MzRVx1QzU0NFx1QzExQyBcdUJDMzBcdUM1RjRcdUI4NUMgXHVCOUNDXHVCNEU0XHVBRTMwXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmplY3RNYXRjaGVzID0gcmVzcG9uc2UubWF0Y2goL1xce1tee31dKlwid29yZFwiW157fV0qXFx9L2cpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdE1hdGNoZXMgJiYgb2JqZWN0TWF0Y2hlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QganNvblN0cmluZyA9ICdbJyArIG9iamVjdE1hdGNoZXMuam9pbignLCcpICsgJ10nO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbkRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzSnNvbkRhdGEoanNvbkRhdGEsIG9yaWdpbmFsV29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUQzMENcdUMyRjEgXHVDMkU0XHVEMzI4IFx1QzJEQyBcdUJCMzRcdUMyRENcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIDMuIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0XHVBRTRDXHVDOUMwIFx1Q0MzRVx1QUUzMFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdENvbXBsZXRlTWF0Y2ggPSByZXNwb25zZS5tYXRjaCgvXFxbW1xcc1xcU10qXFx9KD89XFxzKiQpLyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdENvbXBsZXRlTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBqc29uTWF0Y2ggPSBbbGFzdENvbXBsZXRlTWF0Y2hbMF0gKyAnXSddO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pTT04gXHVCQzMwXHVDNUY0XHVDNzQ0IFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyA0LiBKU09OIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzQgLSBcdUM4MTBcdUM5QzRcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMkRDXHVCM0M0XHJcbiAgICAgICAgICAgIGxldCBqc29uRGF0YTtcclxuICAgICAgICAgICAgbGV0IHBhcnNlZExlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAganNvbkRhdGEgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIEpTT04gXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVDODEwXHVDOUM0XHVDODAxIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gNS4gXHVDODEwXHVDOUM0XHVDODAxIFx1RDMwQ1x1QzJGMSBcdUMyRENcdUIzQzQgLSBcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0XHVCNEU0XHVCOUNDIFx1RDMwQ1x1QzJGMVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMucGFyc2VJbmNyZW1lbnRhbEpzb24ocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyA2LiBKU09OIFx1QkNGNVx1QUQ2QyBcdUMyRENcdUIzQzRcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpeGVkSnNvbiA9IHRoaXMuZml4SnNvblN0cmluZyhqc29uTWF0Y2hbMF0pO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBqc29uRGF0YSA9IEpTT04ucGFyc2UoZml4ZWRKc29uKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHNlY29uZEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKU09OIFx1RDMwQ1x1QzJGMSBcdUJDMEYgXHVCQ0Y1XHVBRDZDIFx1QzJFNFx1RDMyOCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbkRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1Qzc1MVx1QjJGNVx1Qzc3NCBcdUJDMzBcdUM1RjQgXHVENjE1XHVDMkREXHVDNzc0IFx1QzU0NFx1QjJEOVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0pzb25EYXRhKGpzb25EYXRhLCBvcmlnaW5hbFdvcmRzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNUVDXHVCN0VDIFx1QjJFOFx1QzVCNCBcdUM3NTFcdUIyRjUgXHVEMzBDXHVDMkYxIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QzZEMFx1QkNGOCBcdUM3NTFcdUIyRjU6JywgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERCBcdUMyREMgXHVCRTQ4IFx1QUNCMFx1QUNGQyBcdUJDMThcdUQ2NThcclxuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsV29yZHMubWFwKHdvcmQgPT4gKHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmQudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzgxMFx1QzlDNFx1QzgwMSBKU09OIFx1RDMwQ1x1QzJGMSAtIFx1QzY0NFx1QzgwNFx1RDU1QyBcdUFDMURcdUNDQjRcdUI0RTRcdUI5Q0MgXHVEMzBDXHVDMkYxXHJcbiAgICBwcml2YXRlIHBhcnNlSW5jcmVtZW50YWxKc29uKHJlc3BvbnNlOiBzdHJpbmcpOiBXb3JkRGV0YWlsRGF0YVtdIHtcclxuICAgICAgICBjb25zdCByZXN1bHRzOiBXb3JkRGV0YWlsRGF0YVtdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDNjQ0XHVDODA0XHVENTVDIFx1QUMxRFx1Q0NCNFx1QjRFNFx1Qzc0NCBcdUNDM0VcdUFFMzAgKFx1QzYwOFx1QkIzOCBcdUQ1NDRcdUI0REMgXHVEM0VDXHVENTY4KVxyXG4gICAgICAgIGNvbnN0IG9iamVjdFJlZ2V4ID0gL1xce1tee31dKlwid29yZFwiW157fV0qXCJwcm9udW5jaWF0aW9uXCJbXnt9XSpcIm1lYW5pbmdzXCJbXnt9XSpcImV4YW1wbGVzXCJbXnt9XSpcInNpbWlsYXJXb3Jkc1wiW157fV0qXFx9L2c7XHJcbiAgICAgICAgbGV0IG1hdGNoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHdoaWxlICgobWF0Y2ggPSBvYmplY3RSZWdleC5leGVjKHJlc3BvbnNlKSkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdERhdGEgPSBKU09OLnBhcnNlKG1hdGNoWzBdKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3REYXRhICYmIG9iamVjdERhdGEud29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzID0gdGhpcy52YWxpZGF0ZUV4YW1wbGVzKG9iamVjdERhdGEuZXhhbXBsZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhOiBXb3JkRGV0YWlsRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZDogb2JqZWN0RGF0YS53b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb251bmNpYXRpb246IG9iamVjdERhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVhbmluZ3M6IEFycmF5LmlzQXJyYXkob2JqZWN0RGF0YS5tZWFuaW5ncykgPyBvYmplY3REYXRhLm1lYW5pbmdzIDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB2YWxpZGF0ZWRFeGFtcGxlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBBcnJheS5pc0FycmF5KG9iamVjdERhdGEuc2ltaWxhcldvcmRzKSA/IG9iamVjdERhdGEuc2ltaWxhcldvcmRzIDogW11cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh3b3JkRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QUMxQ1x1QkNDNCBcdUFDMURcdUNDQjQgXHVEMzBDXHVDMkYxIFx1QzJFNFx1RDMyOCBcdUMyREMgXHVCQjM0XHVDMkRDXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICAvLyBXb3JkRGV0YWlsRGF0YVx1Qjk3QyBXb3JkRGF0YVx1Qjg1QyBcdUJDQzBcdUQ2NThcdUQ1NThcdUIyOTQgXHVCQTU0XHVDMTFDXHVCNERDXHJcbiAgICBjb252ZXJ0VG9Xb3JkRGF0YSh3b3JkRGV0YWlsOiBXb3JkRGV0YWlsRGF0YSk6IFdvcmREYXRhIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3b3JkOiB3b3JkRGV0YWlsLndvcmQsXHJcbiAgICAgICAgICAgIHByb251bmNpYXRpb246IHdvcmREZXRhaWwucHJvbnVuY2lhdGlvbixcclxuICAgICAgICAgICAgbWVhbmluZ3M6IHdvcmREZXRhaWwubWVhbmluZ3MsXHJcbiAgICAgICAgICAgIHNpbWlsYXJXb3Jkczogd29yZERldGFpbC5zaW1pbGFyV29yZHMsXHJcbiAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGV0YWlsLmV4YW1wbGVzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBKU09OIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUNDOThcdUI5QUNcclxuICAgIHByaXZhdGUgcHJvY2Vzc0pzb25EYXRhKGpzb25EYXRhOiBhbnlbXSwgb3JpZ2luYWxXb3Jkczogc3RyaW5nW10pOiBXb3JkRGV0YWlsRGF0YVtdIHtcclxuICAgICAgICBjb25zdCByZXN1bHRzOiBXb3JkRGV0YWlsRGF0YVtdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGpzb25EYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiBpdGVtLndvcmQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEV4YW1wbGVzID0gdGhpcy52YWxpZGF0ZUV4YW1wbGVzKGl0ZW0uZXhhbXBsZXMpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YTogV29yZERldGFpbERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZDogaXRlbS53b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogaXRlbS5wcm9udW5jaWF0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBBcnJheS5pc0FycmF5KGl0ZW0ubWVhbmluZ3MpID8gaXRlbS5tZWFuaW5ncyA6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB2YWxpZGF0ZWRFeGFtcGxlcyxcclxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IEFycmF5LmlzQXJyYXkoaXRlbS5zaW1pbGFyV29yZHMpID8gaXRlbS5zaW1pbGFyV29yZHMgOiBbXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh3b3JkRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEpTT04gXHVCQjM4XHVDNzkwXHVDNUY0IFx1QkNGNVx1QUQ2Q1xyXG4gICAgcHJpdmF0ZSBmaXhKc29uU3RyaW5nKGpzb25TdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGZpeGVkID0ganNvblN0cmluZztcclxuICAgICAgICBcclxuICAgICAgICAvLyAxLiBcdUJEODhcdUM2NDRcdUM4MDRcdUQ1NUMgXHVBQzFEXHVDQ0I0IFx1QzgxQ1x1QUM3MCAoXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzI3Q1x1RDQ1QyBcdUI0QTRcdUM3NTggXHVCRDg4XHVDNjQ0XHVDODA0XHVENTVDIFx1QkQ4MFx1QkQ4NClcclxuICAgICAgICBjb25zdCBsYXN0Q29tcGxldGVPYmplY3QgPSBmaXhlZC5tYXRjaCgvLipcXH0oPz0sP1xccyokKS8pO1xyXG4gICAgICAgIGlmIChsYXN0Q29tcGxldGVPYmplY3QpIHtcclxuICAgICAgICAgICAgZml4ZWQgPSBsYXN0Q29tcGxldGVPYmplY3RbMF0gKyAnXSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDIuIFx1QzkxMVx1QkNGNVx1QjQxQyBcdUMyN0NcdUQ0NUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8sXFxzKiwvZywgJywnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyAzLiBcdUJDMzBcdUM1RjQgXHVCMDVEXHVDNzU4IFx1QzI3Q1x1RDQ1QyBcdUM4MUNcdUFDNzBcclxuICAgICAgICBmaXhlZCA9IGZpeGVkLnJlcGxhY2UoLyxcXHMqXFxdL2csICddJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gNC4gXHVBQzFEXHVDQ0I0IFx1QjA1RFx1Qzc1OCBcdUMyN0NcdUQ0NUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgZml4ZWQgPSBmaXhlZC5yZXBsYWNlKC8sXFxzKlxcfS9nLCAnfScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDUuIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUIwQjRcdUM3NTggXHVDNzc0XHVDMkE0XHVDRjAwXHVDNzc0XHVENTA0XHVCNDE4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUI1MzBcdUM2MzRcdUQ0NUMgXHVDQzk4XHVCOUFDIChsb29rYmVoaW5kIFx1QzVDNlx1Qzc3NClcclxuICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XHJcbiAgICAgICAgbGV0IGluU3RyaW5nID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGVzY2FwZWQgPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpeGVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXIgPSBmaXhlZFtpXTtcclxuICAgICAgICAgICAgY29uc3QgcHJldkNoYXIgPSBpID4gMCA/IGZpeGVkW2kgLSAxXSA6ICcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcIicgJiYgIWVzY2FwZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpblN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUM4ODVcdUI4Q0NcclxuICAgICAgICAgICAgICAgICAgICBpblN0cmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUJCMzhcdUM3OTBcdUM1RjQgXHVDMkRDXHVDNzkxXHJcbiAgICAgICAgICAgICAgICAgICAgaW5TdHJpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICdcIicgJiYgZXNjYXBlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzc0XHVCQkY4IFx1Qzc3NFx1QzJBNFx1Q0YwMFx1Qzc3NFx1RDUwNFx1QjQxQyBcdUI1MzBcdUM2MzRcdUQ0NUNcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICdcIicgJiYgaW5TdHJpbmcgJiYgIWVzY2FwZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QkIzOFx1Qzc5MFx1QzVGNCBcdUIwQjRcdUJEODBcdUM3NTggXHVDNzc0XHVDMkE0XHVDRjAwXHVDNzc0XHVENTA0XHVCNDE4XHVDOUMwIFx1QzU0QVx1Qzc0MCBcdUI1MzBcdUM2MzRcdUQ0NUNcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnXFxcXFwiJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGFyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlc2NhcGVkID0gKGNoYXIgPT09ICdcXFxcJyAmJiAhZXNjYXBlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGZpeGVkID0gcmVzdWx0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmaXhlZDtcclxuICAgIH1cclxuXHJcbn0gIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCB9IGZyb20gJy4uLy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcclxuaW1wb3J0IHsgVFRTU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL3R0cy9UVFNJbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBUVFNTZXJ2aWNlRmFjdG9yeSB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL3R0cy9UVFNTZXJ2aWNlJztcclxuaW1wb3J0IHsgU3BhY2VkUmVwZXRpdGlvblNlcnZpY2UsIFJldmlld1Nlc3Npb24gfSBmcm9tICcuLi8uLi8uLi9jb3JlL3NlcnZpY2VzL1NwYWNlZFJlcGV0aXRpb25TZXJ2aWNlJztcclxuaW1wb3J0IHsgUmV2aWV3UmVzcG9uc2UgfSBmcm9tICcuLi8uLi8uLi9jb3JlL2FsZ29yaXRobXMvU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobSc7XHJcblxyXG5leHBvcnQgY2xhc3MgVm9jYWJ1bGFyeU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIGN1cnJlbnRDYXJkSW5kZXggPSAwO1xyXG4gICAgY2FyZHM6IFZvY2FidWxhcnlDYXJkW10gPSBbXTtcclxuICAgIHNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgIHByaXZhdGUga2V5ZG93bkhhbmRsZXI6ICgoZTogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgdHRzU2VydmljZTogVFRTU2VydmljZTtcclxuICAgIHByaXZhdGUgc3BhY2VkUmVwZXRpdGlvblNlcnZpY2U6IFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50U2Vzc2lvbjogUmV2aWV3U2Vzc2lvbiB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLnR0c1NlcnZpY2UgPSBUVFNTZXJ2aWNlRmFjdG9yeS5jcmVhdGVUVFNTZXJ2aWNlKGFwcCwgcGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlID0gbmV3IFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIC8vIFx1QzgwMFx1QzdBNVx1QjQxQyBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgIGNvbnN0IGFsbENhcmRzID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbFdvcmRzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3BhY2VkIFJlcGV0aXRpb246IFx1QkNGNVx1QzJCNVx1Qzc3NCBcdUQ1NDRcdUM2OTRcdUQ1NUMgXHVDRTc0XHVCNERDXHVCNEU0XHVCOUNDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgIHRoaXMuY2FyZHMgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLmdldENhcmRzRm9yUmV2aWV3KGFsbENhcmRzKTtcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5jYXJkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93Tm9DYXJkc0ZvclJldmlldyhhbGxDYXJkcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUJDRjVcdUMyQjUgXHVDMTM4XHVDMTU4IFx1QzJEQ1x1Qzc5MVxyXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24gPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnN0YXJ0UmV2aWV3U2Vzc2lvbih0aGlzLmNhcmRzKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUIyRThcdUM1QjQgXHVDMjFDXHVDMTFDIFx1QzExRVx1QUUzMCAoXHVDMEM4IFx1Q0U3NFx1QjREQ1x1QUMwMCBcdUJBM0NcdUM4MDAgXHVDNjI0XHVCM0M0XHVCODVEIFx1Qzg3MFx1QzgxNSBcdUFDMDBcdUIyQTUpXHJcbiAgICAgICAgdGhpcy5zaHVmZmxlQ2FyZHMoKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICAvLyBcdUQwQTRcdUJDRjRcdUI0REMgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjRGMVx1Qjg1RFxyXG4gICAgICAgIHRoaXMua2V5ZG93bkhhbmRsZXIgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2hvd0Fuc3dlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gJ1NwYWNlJyB8fCBlLmtleSA9PT0gJyAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnMScpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJldmlldygnaGFyZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJzInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXZpZXcoJ2dvb2QnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICczJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmV2aWV3KCdlYXN5Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlkb3duSGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaHVmZmxlQ2FyZHMoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2FyZHMubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xyXG4gICAgICAgICAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XHJcbiAgICAgICAgICAgIFt0aGlzLmNhcmRzW2ldLCB0aGlzLmNhcmRzW2pdXSA9IFt0aGlzLmNhcmRzW2pdLCB0aGlzLmNhcmRzW2ldXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Tm9Xb3Jkc01lc3NhZ2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2b2NhYnVsYXJ5LWxlYXJuaW5nLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNVx1QjQxQyBcdUIxOTJcdUM3NzRcdUI5N0MgQ1NTIFx1QkNDMFx1QzIxOFx1Qjg1QyBcdUM4MDFcdUM2QTlcclxuICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmV2aWV3LW1vZGFsLWhlaWdodCcsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld01vZGFsSGVpZ2h0fXZoYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vV29yZHNFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICduby13b3Jkcy1tZXNzYWdlJyB9KTtcclxuICAgICAgICBub1dvcmRzRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVENTU5XHVDMkI1XHVENTYwIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQnIH0pO1xyXG4gICAgICAgIG5vV29yZHNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1QzVEMCBcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTVDIFx1RDZDNCBcdUIyRTRcdUMyREMgXHVDMkRDXHVCM0M0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBub1dvcmRzRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFQlx1QUUzMCcgfSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkQ2xhc3MoJ2Nsb3NlLWJ1dHRvbicpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dOb0NhcmRzRm9yUmV2aWV3KHRvdGFsQ2FyZHM6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xyXG5cclxuICAgICAgICBjb25zdCBub1Jldmlld0VsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ25vLXJldmlldy1tZXNzYWdlJyB9KTtcclxuICAgICAgICBub1Jldmlld0VsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDgzQ1x1REY4OSBcdUM2MjRcdUIyOThcdUM3NTggXHVCQ0Y1XHVDMkI1IFx1QzY0NFx1QjhDQyEnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0b3RhbENhcmRzID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdGF0cyA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UuY2FsY3VsYXRlU3RhdGlzdGljcyh0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKSk7XHJcbiAgICAgICAgICAgIG5vUmV2aWV3RWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1Q0QxRCAke3RvdGFsQ2FyZHN9XHVBQzFDXHVDNzU4IFx1QjJFOFx1QzVCNCBcdUM5MTEgXHVDNjI0XHVCMjk4IFx1QkNGNVx1QzJCNVx1RDU2MCBcdUIyRThcdUM1QjRcdUFDMDAgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmAgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1QkNGNVx1QzJCNSBcdUM2MDhcdUM4MTUgXHVDODE1XHVCQ0Y0XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHREdWVDYXJkcyA9IHRoaXMuc3BhY2VkUmVwZXRpdGlvblNlcnZpY2UuZ2V0Q2FyZHNEdWVJbkRheXMoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKSwgXHJcbiAgICAgICAgICAgICAgICAxXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChuZXh0RHVlQ2FyZHMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBub1Jldmlld0VsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgXHVCMEI0XHVDNzdDIFx1QkNGNVx1QzJCNSBcdUM2MDhcdUM4MTU6ICR7bmV4dER1ZUNhcmRzfVx1QUMxQyBcdUIyRThcdUM1QjRgIFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1RDU1OVx1QzJCNSBcdUQxQjVcdUFDQzRcclxuICAgICAgICAgICAgY29uc3Qgc3RhdHNFbCA9IG5vUmV2aWV3RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3R1ZHktc3RhdHMnIH0pO1xyXG4gICAgICAgICAgICBzdGF0c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1RDU1OVx1QzJCNSBcdUQ2MDRcdUQ2NjknIH0pO1xyXG4gICAgICAgICAgICBzdGF0c0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgXHUyMDIyIFx1QzBDOCBcdUIyRThcdUM1QjQ6ICR7c3RhdHMub3ZlcmFsbC5uZXdDYXJkc31cdUFDMUNgIH0pO1xyXG4gICAgICAgICAgICBzdGF0c0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgXHUyMDIyIFx1RDU1OVx1QzJCNSBcdUM5MTE6ICR7c3RhdHMub3ZlcmFsbC5sZWFybmluZ0NhcmRzfVx1QUMxQ2AgfSk7XHJcbiAgICAgICAgICAgIHN0YXRzRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBcdTIwMjIgXHVDNjQ0XHVCOENDOiAke3N0YXRzLm92ZXJhbGwubWF0dXJlQ2FyZHN9XHVBQzFDYCB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBub1Jldmlld0VsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1XHVDNUQwIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NUMgXHVENkM0IFx1QjJFNFx1QzJEQyBcdUMyRENcdUIzQzRcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBub1Jldmlld0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnIH0pO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZENsYXNzKCdjbG9zZS1idXR0b24nKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q2FyZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2FyZEluZGV4ID49IHRoaXMuY2FyZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbXBsZXRpb25NZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYXJkID0gdGhpcy5jYXJkc1t0aGlzLmN1cnJlbnRDYXJkSW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xyXG5cclxuICAgICAgICBjb25zdCBjYXJkQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZvY2FidWxhcnktY2FyZCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMEMxXHVCMkU4IFx1QzgxNVx1QkNGNCBcdUM2MDFcdUM1RUQgKGJvb2sgXHVDODE1XHVCQ0Y0XHVDNjQwIFx1Q0U3NFx1QjREQyBcdUMwQURcdUM4MUMgXHVCQzg0XHVEMkJDXHVDNzQ0IFx1RDU2OFx1QUVEOCBcdUJDMzBcdUNFNTgpXHJcbiAgICAgICAgY29uc3QgdG9wSW5mb0NvbnRhaW5lciA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY2FyZC10b3AtaW5mbycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIGJvb2sgXHVDODE1XHVCQ0Y0IFx1RDQ1Q1x1QzJEQyAoXHVDNjdDXHVDQUJEKVxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRCb29rID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEN1cnJlbnRCb29rKCk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRCb29rKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2tJbmZvRWwgPSB0b3BJbmZvQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Jvb2staW5mby1kaXNwbGF5JyB9KTtcclxuICAgICAgICAgICAgYm9va0luZm9FbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBjdXJyZW50Qm9vay5uYW1lLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnY3VycmVudC1ib29rLW5hbWUnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDIFx1QkM4NFx1RDJCQyAoXHVDNjI0XHVCOTc4XHVDQUJEKVxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRvcEluZm9Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDJyxcclxuICAgICAgICAgICAgY2xzOiAnY2FyZC1kZWxldGUtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlRGVsZXRlQ2FyZCgpKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUM5QzRcdUQ1ODlcdUI5NjAgXHVENDVDXHVDMkRDXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NFbCA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3MtaW5kaWNhdG9yJyB9KTtcclxuICAgICAgICBwcm9ncmVzc0VsLnRleHRDb250ZW50ID0gYCR7dGhpcy5jdXJyZW50Q2FyZEluZGV4ICsgMX0gLyAke3RoaXMuY2FyZHMubGVuZ3RofWA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1RDQ1Q1x1QzJEQyAoVFRTIFx1QkM4NFx1RDJCQyBcdUQzRUNcdUQ1NjgpXHJcbiAgICAgICAgY29uc3Qgd29yZENvbnRhaW5lciA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1jb250YWluZXInIH0pO1xyXG4gICAgICAgIGNvbnN0IHdvcmRFbCA9IHdvcmRDb250YWluZXIuY3JlYXRlRWwoJ2gxJywgeyBjbHM6ICdjYXJkLXdvcmQnIH0pO1xyXG4gICAgICAgIGlmIChjdXJyZW50Q2FyZC5wcm9udW5jaWF0aW9uICYmIGN1cnJlbnRDYXJkLnByb251bmNpYXRpb24udHJpbSgpKSB7XHJcbiAgICAgICAgICAgIHdvcmRFbC50ZXh0Q29udGVudCA9IGN1cnJlbnRDYXJkLndvcmQ7XHJcbiAgICAgICAgICAgIHdvcmRFbC5hcHBlbmRUZXh0KCcgJyk7XHJcbiAgICAgICAgICAgIHdvcmRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgWyR7Y3VycmVudENhcmQucHJvbnVuY2lhdGlvbn1dYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Byb251bmNpYXRpb24nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdvcmRFbC50ZXh0Q29udGVudCA9IGN1cnJlbnRDYXJkLndvcmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUJDMUNcdUM3NEMgXHVDN0FDXHVDMEREIFx1QkM4NFx1RDJCQ1xyXG4gICAgICAgIGNvbnN0IHdvcmRQbGF5QnV0dG9uID0gd29yZENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgY2xzOiAndHRzLXBsYXktYnV0dG9uIHdvcmQtcGxheS1idXR0b24nLFxyXG4gICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1QjJFOFx1QzVCNCBcdUJDMUNcdUM3NEMgXHVCNEUzXHVBRTMwJyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd29yZFBsYXlCdXR0b24udGV4dENvbnRlbnQgPSAnXHVEODNEXHVERDBBJztcclxuICAgICAgICB3b3JkUGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50dHNTZXJ2aWNlLnNwZWFrV29yZChjdXJyZW50Q2FyZC53b3JkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNFxyXG4gICAgICAgIGlmIChjdXJyZW50Q2FyZC5zaW1pbGFyV29yZHMgJiYgY3VycmVudENhcmQuc2ltaWxhcldvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3Qgc2ltaWxhclNlY3Rpb24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NpbWlsYXItd29yZHMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJXb3Jkc1RleHQgPSBzaW1pbGFyU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdzaW1pbGFyLXdvcmRzLWlubGluZScsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNFx1QjRFNDogJHtjdXJyZW50Q2FyZC5zaW1pbGFyV29yZHMuam9pbignLCAnKX1gXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDNjA4XHVCQjM4XHVCNEU0IChcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVBQzAwXHVDODM4XHVDNjI4IFx1QzYwOFx1QkIzOCBcdUMwQUNcdUM2QTkpXHJcbiAgICAgICAgaWYgKGN1cnJlbnRDYXJkLmV4YW1wbGVzICYmIGN1cnJlbnRDYXJkLmV4YW1wbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZXhhbXBsZXNTZWN0aW9uID0gY2FyZENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlcy1zZWN0aW9uJyB9KTtcclxuICAgICAgICAgICAgZXhhbXBsZXNTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzYwOFx1QkIzOFx1QjRFNDonIH0pO1xyXG4gICAgICAgICAgICBjdXJyZW50Q2FyZC5leGFtcGxlcy5mb3JFYWNoKChleGFtcGxlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhhbXBsZUNvbnRhaW5lciA9IGV4YW1wbGVzU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdleGFtcGxlLWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1QzYwMVx1QzVCNCBcdUM2MDhcdUJCMzggKFRUUyBcdUJDODRcdUQyQkMgXHVEM0VDXHVENTY4KVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhhbXBsZVRleHRDb250YWluZXIgPSBleGFtcGxlQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGUtdGV4dC1jb250YWluZXInIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5nbGlzaEV4YW1wbGUgPSBleGFtcGxlVGV4dENvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogZXhhbXBsZS5lbmdsaXNoIH0pO1xyXG4gICAgICAgICAgICAgICAgZW5nbGlzaEV4YW1wbGUuYWRkQ2xhc3MoJ2VuZ2xpc2gtZXhhbXBsZScpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUM2MDhcdUJCMzggXHVCQzFDXHVDNzRDIFx1QzdBQ1x1QzBERCBcdUJDODRcdUQyQkNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVQbGF5QnV0dG9uID0gZXhhbXBsZVRleHRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAndHRzLXBsYXktYnV0dG9uIGV4YW1wbGUtcGxheS1idXR0b24nLFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnXHVDNjA4XHVCQjM4IFx1QkMxQ1x1Qzc0QyBcdUI0RTNcdUFFMzAnIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZXhhbXBsZVBsYXlCdXR0b24udGV4dENvbnRlbnQgPSAnXHVEODNEXHVERDBBJztcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVQbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHRzU2VydmljZS5zcGVha0V4YW1wbGUoZXhhbXBsZS5lbmdsaXNoLCBjdXJyZW50Q2FyZC53b3JkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIChcdUM4MTVcdUIyRjUgXHVENjU1XHVDNzc4IFx1RDZDNFx1QzVEMFx1QjlDQyBcdUQ0NUNcdUMyREMpXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93QW5zd2VyICYmIGV4YW1wbGUua29yZWFuICYmIGV4YW1wbGUua29yZWFuLnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtvcmVhbkV4YW1wbGUgPSBleGFtcGxlQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBleGFtcGxlLmtvcmVhbiB9KTtcclxuICAgICAgICAgICAgICAgICAgICBrb3JlYW5FeGFtcGxlLmFkZENsYXNzKCdrb3JlYW4tZXhhbXBsZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdUM2MDhcdUJCMzhcdUM3NzQgXHVDNUM2XHVDNzQ0IFx1QjU0QyBcdUFFMzBcdUJDRjggXHVDNjA4XHVCQjM4IFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlc1NlY3Rpb24gPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGVzLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgICAgICBleGFtcGxlc1NlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNjA4XHVCQjM4XHVCNEU0OicgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVDb250YWluZXIgPSBleGFtcGxlc1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZXhhbXBsZS1jb250YWluZXInIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZXhhbXBsZVRleHRDb250YWluZXIgPSBleGFtcGxlQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGUtdGV4dC1jb250YWluZXInIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBlbmdsaXNoRXhhbXBsZSA9IGV4YW1wbGVUZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBUaGlzIGlzIGFuIGV4YW1wbGUgc2VudGVuY2Ugd2l0aCB0aGUgd29yZCBcIiR7Y3VycmVudENhcmQud29yZH1cIi5gIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZW5nbGlzaEV4YW1wbGUuYWRkQ2xhc3MoJ2VuZ2xpc2gtZXhhbXBsZScpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVBRTMwXHVCQ0Y4IFx1QzYwOFx1QkIzOCBcdUJDMUNcdUM3NEMgXHVDN0FDXHVDMEREIFx1QkM4NFx1RDJCQ1xyXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlUGxheUJ1dHRvbiA9IGV4YW1wbGVUZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICAgICAgY2xzOiAndHRzLXBsYXktYnV0dG9uIGV4YW1wbGUtcGxheS1idXR0b24nLFxyXG4gICAgICAgICAgICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdcdUM2MDhcdUJCMzggXHVCQzFDXHVDNzRDIFx1QjRFM1x1QUUzMCcgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXhhbXBsZVBsYXlCdXR0b24udGV4dENvbnRlbnQgPSAnXHVEODNEXHVERDBBJztcclxuICAgICAgICAgICAgZXhhbXBsZVBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtFeGFtcGxlKGBUaGlzIGlzIGFuIGV4YW1wbGUgc2VudGVuY2Ugd2l0aCB0aGUgd29yZCBcIiR7Y3VycmVudENhcmQud29yZH1cIi5gLCBjdXJyZW50Q2FyZC53b3JkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUQ1NUNcdUFFMDAgXHVCQzg4XHVDNUVEIChcdUM4MTVcdUIyRjUgXHVENjU1XHVDNzc4IFx1RDZDNFx1QzVEMFx1QjlDQyBcdUQ0NUNcdUMyREMpXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dBbnN3ZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtvcmVhbkV4YW1wbGUgPSBleGFtcGxlQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgXCIke2N1cnJlbnRDYXJkLndvcmR9XCJcdUI3N0NcdUIyOTQgXHVCMkU4XHVDNUI0XHVBQzAwIFx1RDNFQ1x1RDU2OFx1QjQxQyBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuYCBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAga29yZWFuRXhhbXBsZS5hZGRDbGFzcygna29yZWFuLWV4YW1wbGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OCBcdUJDODRcdUQyQkNcclxuICAgICAgICBpZiAoIXRoaXMuc2hvd0Fuc3dlcikge1xyXG4gICAgICAgICAgICBjb25zdCBjaGVja0J1dHRvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QzgxNVx1QjJGNSBcdUQ2NTVcdUM3NzhcdUQ1NThcdUFFMzAnIH0pO1xyXG4gICAgICAgICAgICBjaGVja0J1dHRvbi5hZGRDbGFzcygnY2hlY2stYW5zd2VyLWJ1dHRvbicpO1xyXG4gICAgICAgICAgICBjaGVja0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDYXJkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1QzgxNVx1QjJGNSBcdUQ0NUNcdUMyRENcclxuICAgICAgICAgICAgY29uc3QgYW5zd2VyU2VjdGlvbiA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYW5zd2VyLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgICAgICBhbnN3ZXJTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QjczQjonIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBtZWFuaW5nc0xpc3QgPSBhbnN3ZXJTZWN0aW9uLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnbWVhbmluZ3MtbGlzdCcgfSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDYXJkLm1lYW5pbmdzLmZvckVhY2gobWVhbmluZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nc0xpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBtZWFuaW5nIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1QkNGNVx1QzJCNSBcdUJDODRcdUQyQkNcdUI0RTRcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZXZpZXdCdXR0b25zKGNhcmRDb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVJldmlld0J1dHRvbnMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHJldmlld1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmV2aWV3LWJ1dHRvbnMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gR2V0IG5leHQgcmV2aWV3IGludGVydmFscyBmb3IgY3VycmVudCBjYXJkXHJcbiAgICAgICAgY29uc3QgY3VycmVudENhcmQgPSB0aGlzLmNhcmRzW3RoaXMuY3VycmVudENhcmRJbmRleF07XHJcbiAgICAgICAgY29uc3QgaW50ZXJ2YWxzID0gdGhpcy5zcGFjZWRSZXBldGl0aW9uU2VydmljZS5nZXROZXh0UmV2aWV3SW50ZXJ2YWxzKGN1cnJlbnRDYXJkKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBIYXJkIGJ1dHRvbiB3aXRoIGludGVydmFsXHJcbiAgICAgICAgY29uc3QgaGFyZEJ1dHRvbiA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG4gICAgICAgIGhhcmRCdXR0b24uYWRkQ2xhc3MoJ3Jldmlldy1idXR0b24nLCAnaGFyZC1idXR0b24nKTtcclxuICAgICAgICBjb25zdCBoYXJkQ29udGVudCA9IGhhcmRCdXR0b24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLWNvbnRlbnQnIH0pO1xyXG4gICAgICAgIGhhcmRDb250ZW50LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnXHVDNUI0XHVCODI0XHVDNkMwJywgY2xzOiAnYnV0dG9uLWxhYmVsJyB9KTtcclxuICAgICAgICBoYXJkQ29udGVudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogaW50ZXJ2YWxzLmhhcmQuZGlzcGxheVRleHQsIGNsczogJ2J1dHRvbi1pbnRlcnZhbCcgfSk7XHJcbiAgICAgICAgaGFyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdoYXJkJykpO1xyXG5cclxuICAgICAgICAvLyBHb29kIGJ1dHRvbiB3aXRoIGludGVydmFsXHJcbiAgICAgICAgY29uc3QgZ29vZEJ1dHRvbiA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG4gICAgICAgIGdvb2RCdXR0b24uYWRkQ2xhc3MoJ3Jldmlldy1idXR0b24nLCAnZ29vZC1idXR0b24nKTtcclxuICAgICAgICBjb25zdCBnb29kQ29udGVudCA9IGdvb2RCdXR0b24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLWNvbnRlbnQnIH0pO1xyXG4gICAgICAgIGdvb2RDb250ZW50LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnXHVDODhCXHVDNzRDJywgY2xzOiAnYnV0dG9uLWxhYmVsJyB9KTtcclxuICAgICAgICBnb29kQ29udGVudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogaW50ZXJ2YWxzLmdvb2QuZGlzcGxheVRleHQsIGNsczogJ2J1dHRvbi1pbnRlcnZhbCcgfSk7XHJcbiAgICAgICAgZ29vZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdnb29kJykpO1xyXG5cclxuICAgICAgICAvLyBFYXN5IGJ1dHRvbiB3aXRoIGludGVydmFsXHJcbiAgICAgICAgY29uc3QgZWFzeUJ1dHRvbiA9IHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG4gICAgICAgIGVhc3lCdXR0b24uYWRkQ2xhc3MoJ3Jldmlldy1idXR0b24nLCAnZWFzeS1idXR0b24nKTtcclxuICAgICAgICBjb25zdCBlYXN5Q29udGVudCA9IGVhc3lCdXR0b24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLWNvbnRlbnQnIH0pO1xyXG4gICAgICAgIGVhc3lDb250ZW50LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnXHVDMjZDXHVDNkMwJywgY2xzOiAnYnV0dG9uLWxhYmVsJyB9KTtcclxuICAgICAgICBlYXN5Q29udGVudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogaW50ZXJ2YWxzLmVhc3kuZGlzcGxheVRleHQsIGNsczogJ2J1dHRvbi1pbnRlcnZhbCcgfSk7XHJcbiAgICAgICAgZWFzeUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdlYXN5JykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUmV2aWV3KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJykge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYXJkID0gdGhpcy5jYXJkc1t0aGlzLmN1cnJlbnRDYXJkSW5kZXhdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIGlmIFNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlIGhhcyBhbiBhY3RpdmUgc2Vzc2lvblxyXG4gICAgICAgIGNvbnN0IGFjdGl2ZVNlc3Npb24gPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLmdldEN1cnJlbnRTZXNzaW9uKCk7XHJcbiAgICAgICAgaWYgKCFhY3RpdmVTZXNzaW9uKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIGFjdGl2ZSByZXZpZXcgc2Vzc2lvbiBpbiBTcGFjZWRSZXBldGl0aW9uU2VydmljZScpO1xyXG4gICAgICAgICAgICAvLyBGYWxsYmFjazogc3RhcnQgYSBuZXcgc2Vzc2lvbiB3aXRoIHJlbWFpbmluZyBjYXJkc1xyXG4gICAgICAgICAgICBjb25zdCByZW1haW5pbmdDYXJkcyA9IHRoaXMuY2FyZHMuc2xpY2UodGhpcy5jdXJyZW50Q2FyZEluZGV4KTtcclxuICAgICAgICAgICAgaWYgKHJlbWFpbmluZ0NhcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24gPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnN0YXJ0UmV2aWV3U2Vzc2lvbihyZW1haW5pbmdDYXJkcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyByZW1haW5pbmcgY2FyZHMgdG8gcmV2aWV3Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ29udmVydCBkaWZmaWN1bHR5IHRvIFJldmlld1Jlc3BvbnNlIGVudW1cclxuICAgICAgICBjb25zdCByZXZpZXdSZXNwb25zZSA9IGRpZmZpY3VsdHkgYXMgUmV2aWV3UmVzcG9uc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gUHJvY2VzcyByZXZpZXcgdXNpbmcgc3BhY2VkIHJlcGV0aXRpb24gc2VydmljZVxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNwYWNlZFJlcGV0aXRpb25TZXJ2aWNlLnByb2Nlc3NSZXZpZXcoY3VycmVudENhcmQsIHJldmlld1Jlc3BvbnNlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjYXJkIGluIGRhdGFiYXNlIHdpdGggbmV3IHNjaGVkdWxlIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkV2l0aFNjaGVkdWxlKFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnVwZGF0ZWRDYXJkLndvcmQsIFxyXG4gICAgICAgICAgICAgICAgZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgICAgIHJlc3VsdC51cGRhdGVkQ2FyZC5zY2hlZHVsZUluZm9cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUNFNzRcdUI0RENcdUI4NUMgXHVDNzc0XHVCM0Q5XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCsrO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zaG93Q2FyZCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIHNwYWNlZCByZXBldGl0aW9uIHJldmlldzonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIG9sZCBtZXRob2QgaWYgc3BhY2VkIHJlcGV0aXRpb24gZmFpbHNcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmQoY3VycmVudENhcmQud29yZCwgZGlmZmljdWx0eSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCsrO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zaG93Q2FyZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudENhcmQgPSB0aGlzLmNhcmRzW3RoaXMuY3VycmVudENhcmRJbmRleF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcclxuICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICdcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDJyxcclxuICAgICAgICAgICAgYFwiJHtjdXJyZW50Q2FyZC53b3JkfVwiIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUMwQURcdUM4MUNcdUQ1NThcdUMyRENcdUFDQTBcdUMyQjVcdUIyQzhcdUFFNEM/XFxuXFxuXHVDNzc0IFx1Qzc5MVx1QzVDNVx1Qzc0MCBcdUI0MThcdUIzQ0NcdUI5QjQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gLFxyXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnJlbW92ZVdvcmQoY3VycmVudENhcmQud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QjJFOFx1QzVCNCBcdUJBQTlcdUI4NURcdUM1RDBcdUMxMUNcdUIzQzQgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkcy5zcGxpY2UodGhpcy5jdXJyZW50Q2FyZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUFDMDAgXHVCMzU0IFx1Qzc3NFx1QzBDMSBcdUM1QzZcdUM3M0NcdUJBNzQgXHVDNjQ0XHVCOENDIFx1RDY1NFx1QkE3NFx1QzczQ1x1Qjg1Q1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb21wbGV0aW9uTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUM3NzhcdUIzNzFcdUMyQTRcdUFDMDAgXHVCMkU4XHVDNUI0IFx1QkFBOVx1Qjg1RCBcdUJDOTRcdUM3MDRcdUI5N0MgXHVCQzk3XHVDNUI0XHVCMDk4XHVCQTc0IFx1Qzg3MFx1QzgxNVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkSW5kZXggPj0gdGhpcy5jYXJkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4ID0gdGhpcy5jYXJkcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUIyRTRcdUM3NEMgXHVCMkU4XHVDNUI0IFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQyBcdUM5MTEgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQyBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dDb21wbGV0aW9uTWVzc2FnZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZvY2FidWxhcnktbGVhcm5pbmctbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVDMTI0XHVDODE1XHVCNDFDIFx1QjE5Mlx1Qzc3NFx1Qjk3QyBDU1MgXHVCQ0MwXHVDMjE4XHVCODVDIFx1QzgwMVx1QzZBOVxyXG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZXZpZXctbW9kYWwtaGVpZ2h0JywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3TW9kYWxIZWlnaHR9dmhgKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29tcGxldGlvbkVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbXBsZXRpb24tbWVzc2FnZScgfSk7XHJcbiAgICAgICAgY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDU1OVx1QzJCNSBcdUM2NDRcdUI4Q0MhJyB9KTtcclxuICAgICAgICBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBcdUM2MjRcdUIyOTggJHt0aGlzLmNhcmRzLmxlbmd0aH1cdUFDMUNcdUM3NTggXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNVx1Qzc0NCBcdUM2NDRcdUI4Q0NcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuYCB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdGFydEJ1dHRvbiA9IGNvbXBsZXRpb25FbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkU0XHVDMkRDIFx1RDU1OVx1QzJCNVx1RDU1OFx1QUUzMCcgfSk7XHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRDbGFzcygncmVzdGFydC1idXR0b24nKTtcclxuICAgICAgICByZXN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGNvbXBsZXRpb25FbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVCMkVCXHVBRTMwJyB9KTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRDbGFzcygnY2xvc2UtYnV0dG9uJyk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmtleWRvd25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlkb3duSGFuZGxlcik7XHJcbiAgICAgICAgICAgIHRoaXMua2V5ZG93bkhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVBQzA0XHVCMkU4XHVENTVDIFx1RDY1NVx1Qzc3OCBcdUJBQThcdUIyRUMgXHVEMDc0XHVCNzk4XHVDMkE0XHJcbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICBvbkNvbmZpcm06ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgb25Db25maXJtOiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICB0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybTtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdjb25maXJtLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMudGl0bGUsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSwgY2xzOiAnbW9kYWwtbWVzc2FnZScgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVENjU1XHVDNzc4JyxcclxuICAgICAgICAgICAgY2xzOiAnY29uZmlybS1idXR0b24gcHJpbWFyeSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlybSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUVFNTZXJ2aWNlIH0gZnJvbSAnLi9UVFNJbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBBdWRpb01hbmFnZXIsIE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9zaGFyZWQvQXVkaW9NYW5hZ2VyJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdHRlcmJveFRUU1NldHRpbmdzIHtcclxuICAgIGVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgICBhcGlVcmw6IHN0cmluZztcclxuICAgIHZvaWNlOiBzdHJpbmc7XHJcbiAgICByZXNwb25zZV9mb3JtYXQ6IHN0cmluZztcclxuICAgIHNwZWVkOiBudW1iZXI7XHJcbiAgICBleGFnZ2VyYXRpb246IG51bWJlcjtcclxuICAgIGNmZ1dlaWdodDogbnVtYmVyO1xyXG4gICAgdGVtcGVyYXR1cmU6IG51bWJlcjtcclxuICAgIHN0cmVhbWluZ19jaHVua19zaXplOiBudW1iZXI7XHJcbiAgICBzdHJlYW1pbmdfc3RyYXRlZ3k6IHN0cmluZztcclxuICAgIHN0cmVhbWluZ19idWZmZXJfc2l6ZTogbnVtYmVyO1xyXG4gICAgc3RyZWFtaW5nX3F1YWxpdHk6IHN0cmluZztcclxuICAgIGF1dG9QbGF5OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENoYXR0ZXJib3hUVFNSZXF1ZXN0IHtcclxuICAgIGlucHV0OiBzdHJpbmc7XHJcbiAgICB2b2ljZT86IHN0cmluZztcclxuICAgIHJlc3BvbnNlX2Zvcm1hdD86IHN0cmluZztcclxuICAgIHNwZWVkPzogbnVtYmVyO1xyXG4gICAgZXhhZ2dlcmF0aW9uPzogbnVtYmVyO1xyXG4gICAgY2ZnX3dlaWdodD86IG51bWJlcjtcclxuICAgIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xyXG4gICAgc3RyZWFtaW5nX2NodW5rX3NpemU/OiBudW1iZXI7XHJcbiAgICBzdHJlYW1pbmdfc3RyYXRlZ3k/OiBzdHJpbmc7XHJcbiAgICBzdHJlYW1pbmdfYnVmZmVyX3NpemU/OiBudW1iZXI7XHJcbiAgICBzdHJlYW1pbmdfcXVhbGl0eT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENoYXR0ZXJib3hUVFNTZXJ2aWNlIGltcGxlbWVudHMgVFRTU2VydmljZSB7XHJcbiAgICBwcml2YXRlIHNldHRpbmdzOiBDaGF0dGVyYm94VFRTU2V0dGluZ3M7XHJcbiAgICBwcml2YXRlIGF1ZGlvTWFuYWdlcjogQXVkaW9NYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBuZXR3b3JrTWFuYWdlcjogTmV0d29ya1Jlc291cmNlTWFuYWdlcjtcclxuICAgIHByaXZhdGUgYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRBdWRpb0NvbnRleHQ6IEF1ZGlvQ29udGV4dCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBDaGF0dGVyYm94VFRTU2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0ge1xyXG4gICAgICAgICAgICBlbmFibGVkOiBzZXR0aW5ncy5lbmFibGVkIHx8IGZhbHNlLFxyXG4gICAgICAgICAgICBhcGlVcmw6IHNldHRpbmdzLmFwaVVybCB8fCAnaHR0cDovL2xvY2FsaG9zdDo0MTIzJyxcclxuICAgICAgICAgICAgdm9pY2U6IHNldHRpbmdzLnZvaWNlIHx8ICdhbGxveScsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlX2Zvcm1hdDogc2V0dGluZ3MucmVzcG9uc2VfZm9ybWF0IHx8ICd3YXYnLFxyXG4gICAgICAgICAgICBzcGVlZDogc2V0dGluZ3Muc3BlZWQgfHwgMSxcclxuICAgICAgICAgICAgZXhhZ2dlcmF0aW9uOiBzZXR0aW5ncy5leGFnZ2VyYXRpb24gfHwgMC4yNSxcclxuICAgICAgICAgICAgY2ZnV2VpZ2h0OiBzZXR0aW5ncy5jZmdXZWlnaHQgfHwgMSxcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHNldHRpbmdzLnRlbXBlcmF0dXJlIHx8IDAuMDUsXHJcbiAgICAgICAgICAgIHN0cmVhbWluZ19jaHVua19zaXplOiBzZXR0aW5ncy5zdHJlYW1pbmdfY2h1bmtfc2l6ZSB8fCA1MCxcclxuICAgICAgICAgICAgc3RyZWFtaW5nX3N0cmF0ZWd5OiBzZXR0aW5ncy5zdHJlYW1pbmdfc3RyYXRlZ3kgfHwgJ3N0cmluZycsXHJcbiAgICAgICAgICAgIHN0cmVhbWluZ19idWZmZXJfc2l6ZTogc2V0dGluZ3Muc3RyZWFtaW5nX2J1ZmZlcl9zaXplIHx8IDEsXHJcbiAgICAgICAgICAgIHN0cmVhbWluZ19xdWFsaXR5OiBzZXR0aW5ncy5zdHJlYW1pbmdfcXVhbGl0eSB8fCAnc3RyaW5nJyxcclxuICAgICAgICAgICAgYXV0b1BsYXk6IHNldHRpbmdzLmF1dG9QbGF5IHx8IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlciA9IEF1ZGlvTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIHRoaXMubmV0d29ya01hbmFnZXIgPSBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3BlYWtUZXh0KHRleHQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVkKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RUUyBcdUFFMzBcdUIyQTVcdUM3NzQgXHVCRTQ0XHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDNUI0IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUzogXHVCRTQ4IFx1RDE0RFx1QzJBNFx1RDJCOFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzdBQ1x1QzBERCBcdUM5MTFcdUM3NzggXHVDNjI0XHVCNTE0XHVDNjI0XHVBQzAwIFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUM5MTFcdUM5QzBcclxuICAgICAgICAgICAgdGhpcy5zdG9wU3BlYWtpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoYXR0ZXJib3ggVFRTIEFQSSBcdUQ2MzhcdUNEOUNcclxuICAgICAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gYXdhaXQgdGhpcy5jYWxsQ2hhdHRlcmJveEFQSSh0ZXh0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwRERcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbGF5QXVkaW9CbG9iKGF1ZGlvQmxvYik7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NoYXR0ZXJib3ggVFRTIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RUUyBcdUM3NENcdUMxMzEgXHVDMEREXHVDMTMxXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gQ2hhdHRlcmJveCBUVFMgXHVDMTFDXHVCQzg0XHVBQzAwIFx1QzJFNFx1RDU4OSBcdUM5MTFcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzcGVha1dvcmQod29yZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKCF3b3JkIHx8IHdvcmQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUzogXHVCRTQ4IFx1QjJFOFx1QzVCNFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zcGVha1RleHQod29yZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3BlYWtFeGFtcGxlKGV4YW1wbGU6IHN0cmluZywgd29yZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghZXhhbXBsZSB8fCBleGFtcGxlLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoYXR0ZXJib3hUVFNTZXJ2aWNlXHVCMjk0IFx1Q0U5MFx1QzJEQ1x1Qjk3QyBcdUM5QzBcdUM2RDBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzNDXHVCQkMwXHVCODVDIHdvcmQgXHVEMzBDXHVCNzdDXHVCQkY4XHVEMTMwXHVCMjk0IFx1QkIzNFx1QzJEQ1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc3BlYWtUZXh0KGV4YW1wbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY2FsbENoYXR0ZXJib3hBUEkodGV4dDogc3RyaW5nKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICAgICAgLy8gXHVEMTREXHVDMkE0XHVEMkI4IFx1QUUzOFx1Qzc3NCBcdUM4MUNcdUQ1NUMgKENoYXR0ZXJib3ggXHVBRDhDXHVDN0E1OiAzMDAwXHVDNzkwKVxyXG4gICAgICAgIGNvbnN0IHRydW5jYXRlZFRleHQgPSB0ZXh0Lmxlbmd0aCA+IDMwMDAgPyB0ZXh0LnN1YnN0cmluZygwLCAzMDAwKSA6IHRleHQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBDaGF0dGVyYm94VFRTUmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgaW5wdXQ6IHRydW5jYXRlZFRleHQsXHJcbiAgICAgICAgICAgIHZvaWNlOiB0aGlzLnNldHRpbmdzLnZvaWNlLFxyXG4gICAgICAgICAgICByZXNwb25zZV9mb3JtYXQ6IHRoaXMuc2V0dGluZ3MucmVzcG9uc2VfZm9ybWF0LFxyXG4gICAgICAgICAgICBzcGVlZDogdGhpcy5zZXR0aW5ncy5zcGVlZCxcclxuICAgICAgICAgICAgZXhhZ2dlcmF0aW9uOiB0aGlzLnNldHRpbmdzLmV4YWdnZXJhdGlvbixcclxuICAgICAgICAgICAgY2ZnX3dlaWdodDogdGhpcy5zZXR0aW5ncy5jZmdXZWlnaHQsXHJcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnNldHRpbmdzLnRlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgICBzdHJlYW1pbmdfY2h1bmtfc2l6ZTogdGhpcy5zZXR0aW5ncy5zdHJlYW1pbmdfY2h1bmtfc2l6ZSxcclxuICAgICAgICAgICAgc3RyZWFtaW5nX3N0cmF0ZWd5OiB0aGlzLnNldHRpbmdzLnN0cmVhbWluZ19zdHJhdGVneSxcclxuICAgICAgICAgICAgc3RyZWFtaW5nX2J1ZmZlcl9zaXplOiB0aGlzLnNldHRpbmdzLnN0cmVhbWluZ19idWZmZXJfc2l6ZSxcclxuICAgICAgICAgICAgc3RyZWFtaW5nX3F1YWxpdHk6IHRoaXMuc2V0dGluZ3Muc3RyZWFtaW5nX3F1YWxpdHlcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLnNldHRpbmdzLmFwaVVybH0vdjEvYXVkaW8vc3BlZWNoYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDaGF0dGVyYm94IFRUUyBBUEkgXHVDNjI0XHVCOTU4OiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XHJcbiAgICAgICAgaWYgKCFjb250ZW50VHlwZSB8fCAhY29udGVudFR5cGUuaW5jbHVkZXMoJ2F1ZGlvJykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUM2MDhcdUMwQzFcdUQ1NThcdUM5QzAgXHVCQUJCXHVENTVDIFx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyREQ6ICR7Y29udGVudFR5cGV9YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcGxheUF1ZGlvQmxvYihhdWRpb0Jsb2I6IEJsb2IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzc0XHVDODA0IFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM4MTVcdUI5QUNcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQuc3JjID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVDMEM4IFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM1RDhcdUI5QUNcdUJBM0NcdUQyQjggXHVDMEREXHVDMTMxXHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudCA9IG5ldyBBdWRpbygpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBCbG9iXHVDNzQ0IFVSTFx1Qjg1QyBcdUJDQzBcdUQ2NThcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChhdWRpb0Jsb2IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQuc3JjID0gYXVkaW9Vcmw7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUMxMjRcdUM4MTVcclxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50Lm9uZW5kZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJykpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5vbmxvYWRlZGRhdGEgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9FbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnBsYXkoKS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUM2MjRcdUI1MTRcdUM2MjQgXHVDN0FDXHVDMEREIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1Qjg1Q1x1QjREQyBcdUMyRENcdUM3OTFcclxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LmxvYWQoKTtcclxuXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RvcFNwZWFraW5nKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5wYXVzZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBVUkwgXHVDODE1XHVCOUFDXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudC5zcmMgJiYgdGhpcy5hdWRpb0VsZW1lbnQuc3JjLnN0YXJ0c1dpdGgoJ2Jsb2I6JykpIHtcclxuICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5hdWRpb0VsZW1lbnQuc3JjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQuc3JjID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50QXVkaW9Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEF1ZGlvQ29udGV4dC5jbG9zZSgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRBdWRpb0NvbnRleHQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc1BhdXNlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuYXVkaW9FbGVtZW50IHx8IHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlZDtcclxuICAgIH1cclxuXHJcbiAgICByZXN1bWUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9FbGVtZW50ICYmIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5wbGF5KCkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QUMxQyBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QUMxQ1x1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwYXVzZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQgJiYgIXRoaXMuYXVkaW9FbGVtZW50LnBhdXNlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5wYXVzZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUMxMjRcdUM4MTUgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICB1cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5nczogUGFydGlhbDxDaGF0dGVyYm94VFRTU2V0dGluZ3M+KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4XHJcbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VGV4dCA9ICdIZWxsbywgdGhpcyBpcyBhIHRlc3QuJztcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jYWxsQ2hhdHRlcmJveEFQSSh0ZXN0VGV4dCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NoYXR0ZXJib3ggVFRTIFx1QzVGMFx1QUNCMCBcdUQxNENcdUMyQTRcdUQyQjggXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUMwQUNcdUM2QTkgXHVBQzAwXHVCMkE1XHVENTVDIFx1Qzc0Q1x1QzEzMSBcdUJBQTlcdUI4NUQgKENoYXR0ZXJib3hcdUIyOTQgY3VzdG9tIHZvaWNlIFx1QzlDMFx1QzZEMClcclxuICAgIGdldEF2YWlsYWJsZVZvaWNlcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgLy8gT3BlbkFJIFx1RDYzOFx1RDY1OCBcdUM3NENcdUMxMzFcdUI0RTQgKyBcdUNFRTRcdUMyQTRcdUQxNDAgXHVDNzRDXHVDMTMxIFx1QzlDMFx1QzZEMFxyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICdhbGxveScsXHJcbiAgICAgICAgICAgICdlY2hvJywgXHJcbiAgICAgICAgICAgICdmYWJsZScsXHJcbiAgICAgICAgICAgICdvbnl4JyxcclxuICAgICAgICAgICAgJ25vdmEnLFxyXG4gICAgICAgICAgICAnc2hpbW1lcicsXHJcbiAgICAgICAgICAgICdjdXN0b20nIC8vIFx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUM4MTVcdUM3NTggXHVDNzRDXHVDMTMxXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTI0XHVDODE1IFx1QzgxNVx1QkNGNCBcdUJDMThcdUQ2NThcclxuICAgIGdldFNldHRpbmdzKCk6IENoYXR0ZXJib3hUVFNTZXR0aW5ncyB7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5zZXR0aW5ncyB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjlBQ1x1QzE4Q1x1QzJBNCBcdUM4MTVcdUI5QUNcclxuICAgIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zdG9wU3BlYWtpbmcoKTtcclxuICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50QXVkaW9Db250ZXh0ID0gbnVsbDtcclxuICAgIH1cclxufSIsICIvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVCOUFDXHVDMThDXHVDMkE0IFx1QUQwMFx1QjlBQyBcdUJDMEYgXHVDODE1XHVCOUFDXHJcblxyXG5leHBvcnQgY2xhc3MgQXVkaW9NYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBBdWRpb01hbmFnZXI7XHJcbiAgICBwcml2YXRlIGFjdGl2ZUF1ZGlvRWxlbWVudHM6IFNldDxIVE1MQXVkaW9FbGVtZW50PiA9IG5ldyBTZXQoKTtcclxuICAgIHByaXZhdGUgYXVkaW9Qb29sOiBIVE1MQXVkaW9FbGVtZW50W10gPSBbXTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgbWF4UG9vbFNpemUgPSAxMDtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogQXVkaW9NYW5hZ2VyIHtcclxuICAgICAgICBpZiAoIUF1ZGlvTWFuYWdlci5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBBdWRpb01hbmFnZXIuaW5zdGFuY2UgPSBuZXcgQXVkaW9NYW5hZ2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBBdWRpb01hbmFnZXIuaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzY5NFx1QzE4QyBcdUMwRERcdUMxMzEgXHVCQzBGIFx1QUQwMFx1QjlBQ1xyXG4gICAgY3JlYXRlQXVkaW8oc3JjOiBzdHJpbmcpOiBIVE1MQXVkaW9FbGVtZW50IHtcclxuICAgICAgICBsZXQgYXVkaW86IEhUTUxBdWRpb0VsZW1lbnQ7XHJcblxyXG4gICAgICAgIC8vIFx1RDQ4MFx1QzVEMFx1QzExQyBcdUM3QUNcdUMwQUNcdUM2QTkgXHVBQzAwXHVCMkE1XHVENTVDIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM2OTRcdUMxOEMgXHVDQzNFXHVBRTMwXHJcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlQXVkaW8gPSB0aGlzLmF1ZGlvUG9vbC5maW5kKGEgPT4gYS5lbmRlZCB8fCBhLnBhdXNlZCk7XHJcbiAgICAgICAgaWYgKGF2YWlsYWJsZUF1ZGlvKSB7XHJcbiAgICAgICAgICAgIGF1ZGlvID0gYXZhaWxhYmxlQXVkaW87XHJcbiAgICAgICAgICAgIGF1ZGlvLnNyYyA9IHNyYztcclxuICAgICAgICAgICAgYXVkaW8uY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGF1ZGlvID0gbmV3IEF1ZGlvKHNyYyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBBdWRpb0VsZW1lbnQoYXVkaW8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmFkZChhdWRpbyk7XHJcbiAgICAgICAgcmV0dXJuIGF1ZGlvO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM2OTRcdUMxOEMgXHVDMTI0XHVDODE1XHJcbiAgICBwcml2YXRlIHNldHVwQXVkaW9FbGVtZW50KGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNzkwXHVCM0Q5IFx1QzgxNVx1QjlBQyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4XHJcbiAgICAgICAgY29uc3QgY2xlYW51cCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWxlYXNlQXVkaW8oYXVkaW8pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgY2xlYW51cCwgeyBvbmNlOiB0cnVlIH0pO1xyXG4gICAgICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgY2xlYW51cCwgeyBvbmNlOiB0cnVlIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUJBNTRcdUJBQThcdUI5QUMgXHVCMjA0XHVDMjE4IFx1QkMyOVx1QzlDMFx1Qjk3QyBcdUM3MDRcdUQ1NUMgXHVEMEMwXHVDNzg0XHVDNTQ0XHVDNkMzXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUF1ZGlvRWxlbWVudHMuaGFzKGF1ZGlvKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWxlYXNlQXVkaW8oYXVkaW8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMzAwMDApOyAvLyAzMFx1Q0QwOCBcdUQ2QzQgXHVDNzkwXHVCM0Q5IFx1QzgxNVx1QjlBQ1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgKFx1QzU0OFx1QzgwNFx1RDU1QyBcdUI3OThcdUQzN0MpXHJcbiAgICBhc3luYyBwbGF5QXVkaW8oc3JjOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBhdWRpbyA9IHRoaXMuY3JlYXRlQXVkaW8oc3JjKTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBhdWRpby5wbGF5KCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWxlYXNlQXVkaW8oYXVkaW8pO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzY5NFx1QzE4QyBcdUQ1NzRcdUM4MUNcclxuICAgIHJlbGVhc2VBdWRpbyhhdWRpbzogSFRNTEF1ZGlvRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmhhcyhhdWRpbykpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gXHVDN0FDXHVDMEREIFx1QzkxMVx1Qzc3NFx1QkE3NCBcdUM4MTVcdUM5QzBcclxuICAgICAgICBpZiAoIWF1ZGlvLnBhdXNlZCkge1xyXG4gICAgICAgICAgICBhdWRpby5wYXVzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVENjVDXHVDMTMxIFx1QkFBOVx1Qjg1RFx1QzVEMFx1QzExQyBcdUM4MUNcdUFDNzBcclxuICAgICAgICB0aGlzLmFjdGl2ZUF1ZGlvRWxlbWVudHMuZGVsZXRlKGF1ZGlvKTtcclxuXHJcbiAgICAgICAgLy8gXHVENDgwXHVDNUQwIFx1QkMxOFx1RDY1OCAoXHVEMDZDXHVBRTMwIFx1QzgxQ1x1RDU1QylcclxuICAgICAgICBpZiAodGhpcy5hdWRpb1Bvb2wubGVuZ3RoIDwgdGhpcy5tYXhQb29sU2l6ZSkge1xyXG4gICAgICAgICAgICBhdWRpby5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xyXG4gICAgICAgICAgICBhdWRpby5sb2FkKCk7IC8vIFx1QkE1NFx1QkFBOFx1QjlBQyBcdUQ1NzRcdUM4MUNcclxuICAgICAgICAgICAgdGhpcy5hdWRpb1Bvb2wucHVzaChhdWRpbyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHVENDgwXHVDNzc0IFx1QUMwMFx1QjRERCBcdUNDMkMgXHVBQ0JEXHVDNkIwIFx1QzY0NFx1QzgwNFx1RDc4OCBcdUM4MTVcdUI5QUNcclxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlQXVkaW8oYXVkaW8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDIFx1QzY0NFx1QzgwNCBcdUM4MTVcdUI5QUNcclxuICAgIHByaXZhdGUgZGlzcG9zZUF1ZGlvKGF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgYXVkaW8ucGF1c2UoKTtcclxuICAgICAgICBhdWRpby5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xyXG4gICAgICAgIGF1ZGlvLmxvYWQoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUJBQThcdUI0RTAgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzBcclxuICAgICAgICBjb25zdCBuZXdBdWRpbyA9IGF1ZGlvLmNsb25lTm9kZSgpIGFzIEhUTUxBdWRpb0VsZW1lbnQ7XHJcbiAgICAgICAgYXVkaW8ucGFyZW50Tm9kZT8ucmVwbGFjZUNoaWxkKG5ld0F1ZGlvLCBhdWRpbyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCQUE4XHVCNEUwIFx1RDY1Q1x1QzEzMSBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDODE1XHVDOUMwXHJcbiAgICBzdG9wQWxsQXVkaW8oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVBdWRpb0VsZW1lbnRzLmZvckVhY2goYXVkaW8gPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWF1ZGlvLnBhdXNlZCkge1xyXG4gICAgICAgICAgICAgICAgYXVkaW8ucGF1c2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkFBOFx1QjRFMCBcdUI5QUNcdUMxOENcdUMyQTQgXHVDODE1XHVCOUFDXHJcbiAgICBjbGVhbnVwKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1QkFBOFx1QjRFMCBcdUQ2NUNcdUMxMzEgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5mb3JFYWNoKGF1ZGlvID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlQXVkaW8oYXVkaW8pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5jbGVhcigpO1xyXG5cclxuICAgICAgICAvLyBcdUQ0ODBcdUM3NTggXHVCQUE4XHVCNEUwIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM4MTVcdUI5QUNcclxuICAgICAgICB0aGlzLmF1ZGlvUG9vbC5mb3JFYWNoKGF1ZGlvID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlQXVkaW8oYXVkaW8pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYXVkaW9Qb29sLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVENjA0XHVDN0FDIFx1QzBDMVx1RDBEQyBcdUM4MTVcdUJDRjRcclxuICAgIGdldFN0YXR1cygpOiB7IGFjdGl2ZTogbnVtYmVyOyBwb29sZWQ6IG51bWJlciB9IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhY3RpdmU6IHRoaXMuYWN0aXZlQXVkaW9FbGVtZW50cy5zaXplLFxyXG4gICAgICAgICAgICBwb29sZWQ6IHRoaXMuYXVkaW9Qb29sLmxlbmd0aFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QyBcdUI5QUNcdUMxOENcdUMyQTQgXHVBRDAwXHVCOUFDXHJcbmV4cG9ydCBjbGFzcyBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBhYm9ydENvbnRyb2xsZXJzOiBTZXQ8QWJvcnRDb250cm9sbGVyPiA9IG5ldyBTZXQoKTtcclxuICAgIHByaXZhdGUgYWN0aXZlUmVxdWVzdHM6IE1hcDxzdHJpbmcsIEFib3J0Q29udHJvbGxlcj4gPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCk6IE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIge1xyXG4gICAgICAgIGlmICghTmV0d29ya1Jlc291cmNlTWFuYWdlci5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyLmluc3RhbmNlID0gbmV3IE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE5ldHdvcmtSZXNvdXJjZU1hbmFnZXIuaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMTI0XHVEMkI4XHVDNkNDXHVEMDZDIFx1QzY5NFx1Q0NBRCBcdUMwRERcdUMxMzEgKFx1Qzc5MFx1QjNEOSBcdUM4MTVcdUI5QUMgXHVEM0VDXHVENTY4KVxyXG4gICAgY3JlYXRlUmVxdWVzdChpZGVudGlmaWVyPzogc3RyaW5nKTogQWJvcnRDb250cm9sbGVyIHtcclxuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5hZGQoY29udHJvbGxlcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGlkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgLy8gXHVCM0Q5XHVDNzdDXHVENTVDIFx1QzJERFx1QkNDNFx1Qzc5MFx1Qzc1OCBcdUFFMzBcdUM4NzQgXHVDNjk0XHVDQ0FEIFx1Q0RFOFx1QzE4Q1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0NvbnRyb2xsZXIgPSB0aGlzLmFjdGl2ZVJlcXVlc3RzLmdldChpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nQ29udHJvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdDb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlcnMuZGVsZXRlKGV4aXN0aW5nQ29udHJvbGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVSZXF1ZXN0cy5zZXQoaWRlbnRpZmllciwgY29udHJvbGxlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUM3OTBcdUIzRDkgXHVDODE1XHVCOUFDXHVCOTdDIFx1QzcwNFx1RDU1QyBcdUQwQzBcdUM3ODRcdUM1NDRcdUM2QzMgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFib3J0Q29udHJvbGxlcnMuaGFzKGNvbnRyb2xsZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFudXAoY29udHJvbGxlciwgaWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCA2MDAwMCk7IC8vIDYwXHVDRDA4IFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDM1xyXG5cclxuICAgICAgICByZXR1cm4gY29udHJvbGxlcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM2OTRcdUNDQUQgXHVDNjQ0XHVCOENDIFx1QzJEQyBcdUM4MTVcdUI5QUNcclxuICAgIGNvbXBsZXRlUmVxdWVzdChjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsIGlkZW50aWZpZXI/OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNsZWFudXAoY29udHJvbGxlciwgaWRlbnRpZmllcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVEMkI5XHVDODE1IFx1QzY5NFx1Q0NBRCBcdUNERThcdUMxOENcclxuICAgIGNhbmNlbFJlcXVlc3QoaWRlbnRpZmllcjogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuYWN0aXZlUmVxdWVzdHMuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmIChjb250cm9sbGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhbnVwKGNvbnRyb2xsZXIsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIwQjRcdUJEODAgXHVDODE1XHVCOUFDIFx1Qjg1Q1x1QzlDMVxyXG4gICAgcHJpdmF0ZSBjbGVhbnVwKGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciwgaWRlbnRpZmllcj86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5kZWxldGUoY29udHJvbGxlcik7XHJcbiAgICAgICAgaWYgKGlkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVSZXF1ZXN0cy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkFBOFx1QjRFMCBcdUQ2NUNcdUMxMzEgXHVDNjk0XHVDQ0FEIFx1Q0RFOFx1QzE4Q1xyXG4gICAgY2FuY2VsQWxsUmVxdWVzdHMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzLmZvckVhY2goY29udHJvbGxlciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlcnMuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLmFjdGl2ZVJlcXVlc3RzLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmV0Y2ggXHVCNzk4XHVEMzdDIChcdUM3OTBcdUIzRDkgXHVDODE1XHVCOUFDIFx1RDNFQ1x1RDU2OClcclxuICAgIGFzeW5jIGZldGNoKFxyXG4gICAgICAgIHVybDogc3RyaW5nLCBcclxuICAgICAgICBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9LCBcclxuICAgICAgICBpZGVudGlmaWVyPzogc3RyaW5nLFxyXG4gICAgICAgIHRpbWVvdXQ6IG51bWJlciA9IDMwMDAwXHJcbiAgICApOiBQcm9taXNlPFJlc3BvbnNlPiB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuY3JlYXRlUmVxdWVzdChpZGVudGlmaWVyKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xyXG4gICAgICAgIH0sIHRpbWVvdXQpO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZVJlcXVlc3QoY29udHJvbGxlciwgaWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cChjb250cm9sbGVyLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMwQzFcdUQwREMgXHVDODE1XHVCQ0Y0XHJcbiAgICBnZXRTdGF0dXMoKTogeyBhY3RpdmU6IG51bWJlcjsgaWRlbnRpZmllZDogbnVtYmVyIH0ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFjdGl2ZTogdGhpcy5hYm9ydENvbnRyb2xsZXJzLnNpemUsXHJcbiAgICAgICAgICAgIGlkZW50aWZpZWQ6IHRoaXMuYWN0aXZlUmVxdWVzdHMuc2l6ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgTm90aWNlLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFRUU1NlcnZpY2UgfSBmcm9tICcuL1RUU0ludGVyZmFjZSc7XHJcbmltcG9ydCB7IEF1ZGlvTWFuYWdlciwgTmV0d29ya1Jlc291cmNlTWFuYWdlciB9IGZyb20gJy4uLy4uL3NoYXJlZC9BdWRpb01hbmFnZXInO1xyXG5pbXBvcnQgeyBUVFNDYWNoZU1hbmFnZXIsIENhY2hlU2V0dGluZ3MgfSBmcm9tICcuL1RUU0NhY2hlTWFuYWdlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdvb2dsZUNsb3VkVFRTU2V0dGluZ3Mge1xyXG4gICAgZW5hYmxlZDogYm9vbGVhbjtcclxuICAgIGFwaUtleTogc3RyaW5nO1xyXG4gICAgdm9pY2U6IHN0cmluZztcclxuICAgIGxhbmd1YWdlQ29kZTogc3RyaW5nO1xyXG4gICAgc3BlYWtpbmdSYXRlOiBudW1iZXI7XHJcbiAgICBwaXRjaDogbnVtYmVyO1xyXG4gICAgYXV0b1BsYXk6IGJvb2xlYW47XHJcbiAgICBjYWNoZUVuYWJsZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgR29vZ2xlQ2xvdWRUVFNSZXF1ZXN0IHtcclxuICAgIGlucHV0OiB7XHJcbiAgICAgICAgdGV4dDogc3RyaW5nO1xyXG4gICAgfTtcclxuICAgIHZvaWNlOiB7XHJcbiAgICAgICAgbGFuZ3VhZ2VDb2RlOiBzdHJpbmc7XHJcbiAgICAgICAgbmFtZT86IHN0cmluZztcclxuICAgICAgICBzc21sR2VuZGVyPzogJ01BTEUnIHwgJ0ZFTUFMRScgfCAnTkVVVFJBTCc7XHJcbiAgICB9O1xyXG4gICAgYXVkaW9Db25maWc6IHtcclxuICAgICAgICBhdWRpb0VuY29kaW5nOiAnTVAzJyB8ICdMSU5FQVIxNicgfCAnT0dHX09QVVMnO1xyXG4gICAgICAgIHNwZWFraW5nUmF0ZT86IG51bWJlcjtcclxuICAgICAgICBwaXRjaD86IG51bWJlcjtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgR29vZ2xlQ2xvdWRUVFNSZXNwb25zZSB7XHJcbiAgICBhdWRpb0NvbnRlbnQ6IHN0cmluZzsgLy8gQmFzZTY0IGVuY29kZWQgYXVkaW9cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdvb2dsZUNsb3VkVFRTU2VydmljZSBpbXBsZW1lbnRzIFRUU1NlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nczogR29vZ2xlQ2xvdWRUVFNTZXR0aW5ncztcclxuICAgIHByaXZhdGUgYXVkaW9NYW5hZ2VyOiBBdWRpb01hbmFnZXI7XHJcbiAgICBwcml2YXRlIG5ldHdvcmtNYW5hZ2VyOiBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBjYWNoZU1hbmFnZXI6IFRUU0NhY2hlTWFuYWdlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2V0dGluZ3M/OiBHb29nbGVDbG91ZFRUU1NldHRpbmdzKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgZW5hYmxlZDogc2V0dGluZ3M/LmVuYWJsZWQgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgIGFwaUtleTogc2V0dGluZ3M/LmFwaUtleSB8fCAnJyxcclxuICAgICAgICAgICAgdm9pY2U6IHNldHRpbmdzPy52b2ljZSB8fCAnZW4tVVMtSm91cm5leS1GJyxcclxuICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiBzZXR0aW5ncz8ubGFuZ3VhZ2VDb2RlIHx8ICdlbi1VUycsXHJcbiAgICAgICAgICAgIHNwZWFraW5nUmF0ZTogc2V0dGluZ3M/LnNwZWFraW5nUmF0ZSB8fCAxLjAsXHJcbiAgICAgICAgICAgIHBpdGNoOiBzZXR0aW5ncz8ucGl0Y2ggfHwgMC4wLFxyXG4gICAgICAgICAgICBhdXRvUGxheTogc2V0dGluZ3M/LmF1dG9QbGF5IHx8IGZhbHNlLFxyXG4gICAgICAgICAgICBjYWNoZUVuYWJsZWQ6IHNldHRpbmdzPy5jYWNoZUVuYWJsZWQgIT09IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlciA9IEF1ZGlvTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIHRoaXMubmV0d29ya01hbmFnZXIgPSBOZXR3b3JrUmVzb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIgPSBuZXcgVFRTQ2FjaGVNYW5hZ2VyKGFwcCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3BlYWtUZXh0KHRleHQ6IHN0cmluZywgd29yZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVkKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RUUyBcdUFFMzBcdUIyQTVcdUM3NzQgXHVCRTQ0XHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDNUI0IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmFwaUtleSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUzogXHVCRTQ4IFx1RDE0RFx1QzJBNFx1RDJCOFx1Qzc4NVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wU3BlYWtpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBhdWRpb0RhdGE6IHN0cmluZztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1Q0U5MFx1QzJEQyBcdUQ2NTVcdUM3NzggKFx1Q0U5MFx1QzJEQ1x1QUMwMCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUI0MUMgXHVBQ0JEXHVDNkIwKVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5jYWNoZUVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlU2V0dGluZ3M6IENhY2hlU2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiB0aGlzLnNldHRpbmdzLmxhbmd1YWdlQ29kZSxcclxuICAgICAgICAgICAgICAgICAgICB2b2ljZTogdGhpcy5zZXR0aW5ncy52b2ljZSxcclxuICAgICAgICAgICAgICAgICAgICBzcGVha2luZ1JhdGU6IHRoaXMuc2V0dGluZ3Muc3BlYWtpbmdSYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBpdGNoOiB0aGlzLnNldHRpbmdzLnBpdGNoXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZWRBdWRpbyA9IGF3YWl0IHRoaXMuY2FjaGVNYW5hZ2VyLmdldENhY2hlZEF1ZGlvKHRleHQsIGNhY2hlU2V0dGluZ3MsIHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZEF1ZGlvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbGF5QXVkaW9CdWZmZXIoY2FjaGVkQXVkaW8pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHVDRTkwXHVDMkRDXHVDNUQwIFx1QzVDNlx1QzczQ1x1QkE3NCBBUEkgXHVENjM4XHVDRDlDXHJcbiAgICAgICAgICAgIGF1ZGlvRGF0YSA9IGF3YWl0IHRoaXMuY2FsbEdvb2dsZUNsb3VkQVBJKHRleHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDRTkwXHVDMkRDXHVDNUQwIFx1QzgwMFx1QzdBNSAoXHVDRTkwXHVDMkRDXHVBQzAwIFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxQyBcdUFDQkRcdUM2QjApXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmNhY2hlRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGVTZXR0aW5nczogQ2FjaGVTZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHRoaXMuc2V0dGluZ3MubGFuZ3VhZ2VDb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHZvaWNlOiB0aGlzLnNldHRpbmdzLnZvaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWFraW5nUmF0ZTogdGhpcy5zZXR0aW5ncy5zcGVha2luZ1JhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGl0Y2g6IHRoaXMuc2V0dGluZ3MucGl0Y2hcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FjaGVNYW5hZ2VyLnNldENhY2hlZEF1ZGlvKHRleHQsIGNhY2hlU2V0dGluZ3MsIGF1ZGlvRGF0YSwgd29yZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGxheUF1ZGlvRGF0YShhdWRpb0RhdGEpO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHb29nbGUgQ2xvdWQgVFRTIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RUUyBcdUM3NENcdUMxMzEgXHVDMEREXHVDMTMxXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gQVBJIFx1RDBBNFx1QzY0MCBcdUM3NzhcdUQxMzBcdUIxMzcgXHVDNUYwXHVBQ0IwXHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3BlYWtXb3JkKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghd29yZCB8fCB3b3JkLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUIyRThcdUM1QjRcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1Qzc1OCBcdUFDQkRcdUM2QjAgd29yZCBcdUQzMENcdUI3N0NcdUJCRjhcdUQxMzBcdUI5N0MgXHVDODA0XHVCMkVDXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0QyAoXHVCMkU4XHVDMjFDIFx1QjJFOFx1QzVCNCBcdUNFOTBcdUMyREMpXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zcGVha1RleHQod29yZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3BlYWtFeGFtcGxlKGV4YW1wbGU6IHN0cmluZywgd29yZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghZXhhbXBsZSB8fCBleGFtcGxlLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFM6IFx1QkU0OCBcdUM2MDhcdUJCMzhcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QzYwOFx1QkIzOFx1Qzc1OCBcdUFDQkRcdUM2QjAgXHVDNUYwXHVBRDAwXHVCNDFDIFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVDODA0XHVCMkVDXHVENTU4XHVDNUVDIFwiXHVCMkU4XHVDNUI0X1x1QzYwOFx1QkIzOFwiIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUNFOTBcdUMyRENcclxuICAgICAgICBhd2FpdCB0aGlzLnNwZWFrVGV4dChleGFtcGxlLCB3b3JkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNhbGxHb29nbGVDbG91ZEFQSSh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGNvbnN0IHRydW5jYXRlZFRleHQgPSB0ZXh0Lmxlbmd0aCA+IDUwMDAgPyB0ZXh0LnN1YnN0cmluZygwLCA1MDAwKSA6IHRleHQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBHb29nbGVDbG91ZFRUU1JlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIGlucHV0OiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiB0cnVuY2F0ZWRUZXh0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHZvaWNlOiB7XHJcbiAgICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHRoaXMuc2V0dGluZ3MubGFuZ3VhZ2VDb2RlLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5zZXR0aW5ncy52b2ljZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhdWRpb0NvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgYXVkaW9FbmNvZGluZzogJ01QMycsXHJcbiAgICAgICAgICAgICAgICBzcGVha2luZ1JhdGU6IHRoaXMuc2V0dGluZ3Muc3BlYWtpbmdSYXRlLFxyXG4gICAgICAgICAgICAgICAgcGl0Y2g6IHRoaXMuc2V0dGluZ3MucGl0Y2hcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubmV0d29ya01hbmFnZXIuZmV0Y2goXHJcbiAgICAgICAgICAgIGBodHRwczovL3RleHR0b3NwZWVjaC5nb29nbGVhcGlzLmNvbS92MS90ZXh0OnN5bnRoZXNpemU/a2V5PSR7dGhpcy5zZXR0aW5ncy5hcGlLZXl9YCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYGdvb2dsZS10dHMtJHtEYXRlLm5vdygpfWAsIC8vIFx1QUNFMFx1QzcyMCBcdUMyRERcdUJDQzRcdUM3OTBcclxuICAgICAgICAgICAgMTAwMDAgLy8gMTBcdUNEMDggXHVEMEMwXHVDNzg0XHVDNTQ0XHVDNkMzXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuZ2V0RGV0YWlsZWRFcnJvck1lc3NhZ2UocmVzcG9uc2Uuc3RhdHVzLCBlcnJvckRhdGEpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGE6IEdvb2dsZUNsb3VkVFRTUmVzcG9uc2UgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuYXVkaW9Db250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGV0YWlsZWRFcnJvck1lc3NhZ2Uoc3RhdHVzOiBudW1iZXIsIGVycm9yRGF0YTogYW55KTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoZXJyb3JEYXRhPy5lcnJvcikge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IGVycm9yRGF0YS5lcnJvcjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFQSVx1QUMwMCBcdUNDMjhcdUIyRThcdUI0MUMgXHVBQ0JEXHVDNkIwICg0MDMgUEVSTUlTU0lPTl9ERU5JRUQgd2l0aCBBUElfS0VZX1NFUlZJQ0VfQkxPQ0tFRClcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAzICYmIGVycm9yLmRldGFpbHM/LnNvbWUoKGRldGFpbDogYW55KSA9PiBcclxuICAgICAgICAgICAgICAgIGRldGFpbC5yZWFzb24gPT09ICdBUElfS0VZX1NFUlZJQ0VfQkxPQ0tFRCcgfHwgXHJcbiAgICAgICAgICAgICAgICBkZXRhaWxbJ0B0eXBlJ10/LmluY2x1ZGVzKCdFcnJvckluZm8nKSAmJiBkZXRhaWwucmVhc29uID09PSAnQVBJX0tFWV9TRVJWSUNFX0JMT0NLRUQnXHJcbiAgICAgICAgICAgICkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnR29vZ2xlIENsb3VkIFRleHQtdG8tU3BlZWNoIEFQSVx1QUMwMCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LiBHb29nbGUgQ2xvdWQgQ29uc29sZVx1QzVEMFx1QzExQyBUZXh0LXRvLVNwZWVjaCBBUElcdUI5N0MgXHVENjVDXHVDMTMxXHVENjU0XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFQSSBcdUQwQTQgXHVBRDAwXHVCODI4IFx1QzYyNFx1Qjk1OFx1QjRFNFxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnQVBJIGtleSBub3QgdmFsaWQnKSB8fCBlcnJvci5jb2RlID09PSAnSU5WQUxJRF9BUkdVTUVOVCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBBUEkgXHVEMEE0XHVBQzAwIFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTRcdUI5N0MgXHVCMkU0XHVDMkRDIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdxdW90YScpIHx8IGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdRVU9UQV9FWENFRURFRCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NzQgXHVDRDA4XHVBQ0ZDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUQ1NjBcdUIyRjlcdUI3QzlcdUM3NDQgXHVENjU1XHVDNzc4XHVENTU4XHVBQzcwXHVCMDk4IFx1QzY5NFx1QUUwOFx1QzgxQ1x1Qjk3QyBcdUJDQzBcdUFDQkRcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiAnR29vZ2xlIENsb3VkIFRUUyBBUEkgXHVDODExXHVBREZDXHVDNzc0IFx1QUM3MFx1QkQ4MFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4gQVBJIFx1RDBBNCBcdUFEOENcdUQ1NUNcdUM3NDQgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1Qzc3OFx1Qzk5RCBcdUM2MjRcdUI5NTggKDQwMSlcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBDbG91ZCBBUEkgXHVEMEE0IFx1Qzc3OFx1Qzk5RFx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIEFQSSBcdUQwQTRcdUFDMDAgXHVDNjJDXHVCQzE0XHVCOTc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUM2OTRcdUNDQUQgXHVDNjI0XHVCOTU4ICg0MDApXHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUM2OTRcdUNDQURcdUM3NzQgXHVDNzk4XHVCQUJCXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUM3NENcdUMxMzEgXHVDMTI0XHVDODE1XHVDNzQ0IFx1RDY1NVx1Qzc3OFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUMxMUNcdUJFNDRcdUMyQTQgXHVDMEFDXHVDNkE5IFx1QkQ4OFx1QUMwMCAoNTAzKVxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA1MDMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnR29vZ2xlIENsb3VkIFRUUyBcdUMxMUNcdUJFNDRcdUMyQTRcdUFDMDAgXHVDNzdDXHVDMkRDXHVDODAxXHVDNzNDXHVCODVDIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUM3QTBcdUMyREMgXHVENkM0IFx1QjJFNFx1QzJEQyBcdUMyRENcdUIzQzRcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGBHb29nbGUgQ2xvdWQgVFRTIEFQSSBcdUM2MjRcdUI5NTggKCR7c3RhdHVzfSk6ICR7ZXJyb3IubWVzc2FnZSB8fCAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4J31gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gYEdvb2dsZSBDbG91ZCBUVFMgQVBJIFx1QzYyNFx1Qjk1ODogJHtzdGF0dXN9IFx1QzBDMVx1RDBEQyBcdUNGNTRcdUI0RENgO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcGxheUF1ZGlvRGF0YShiYXNlNjRBdWRpbzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIEF1ZGlvTWFuYWdlclx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NUMgXHVDNTQ4XHVDODA0XHVENTVDIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwRERcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IHRoaXMuYmFzZTY0VG9CbG9iKGJhc2U2NEF1ZGlvLCAnYXVkaW8vbXAzJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb1VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYXVkaW9CbG9iKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW8gPSB0aGlzLmF1ZGlvTWFuYWdlci5jcmVhdGVBdWRpbyhhdWRpb1VybCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xlYW51cCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGF1ZGlvVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvTWFuYWdlci5yZWxlYXNlQXVkaW8oYXVkaW8pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVuZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGF1ZGlvLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1x1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJykpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhdWRpby5vbmxvYWRlZGRhdGEgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXVkaW8ucGxheSgpLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDMyBcdUMxMjRcdUM4MTUgKDMwXHVDRDA4KVxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdWRpby5lbmRlZCAmJiAhYXVkaW8ucGF1c2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUMyRENcdUFDMDQgXHVDRDA4XHVBQ0ZDJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDMwMDAwKTtcclxuXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBwbGF5QXVkaW9CdWZmZXIoYXVkaW9CdWZmZXI6IEFycmF5QnVmZmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIEFycmF5QnVmZmVyXHVCOTdDIEJsb2JcdUM3M0NcdUI4NUMgXHVCQ0MwXHVENjU4XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSBuZXcgQmxvYihbYXVkaW9CdWZmZXJdLCB7IHR5cGU6ICdhdWRpby9tcDMnIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gdGhpcy5hdWRpb01hbmFnZXIuY3JlYXRlQXVkaW8oYXVkaW9VcmwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb01hbmFnZXIucmVsZWFzZUF1ZGlvKGF1ZGlvKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgYXVkaW8ub25lbmRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhdWRpby5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdcdUNFOTBcdUMyRENcdUI0MUMgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGF1ZGlvLm9ubG9hZGVkZGF0YSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhdWRpby5wbGF5KCkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUNFOTBcdUMyRENcdUI0MUMgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzdBQ1x1QzBERCBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1RDBDMFx1Qzc4NFx1QzU0NFx1QzZDMyBcdUMxMjRcdUM4MTUgKDMwXHVDRDA4KVxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdWRpby5lbmRlZCAmJiAhYXVkaW8ucGF1c2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignXHVDRTkwXHVDMkRDXHVCNDFDIFx1QzYyNFx1QjUxNFx1QzYyNCBcdUM3QUNcdUMwREQgXHVDMkRDXHVBQzA0IFx1Q0QwOFx1QUNGQycpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAzMDAwMCk7XHJcblxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmFzZTY0VG9CbG9iKGJhc2U2NDogc3RyaW5nLCBtaW1lVHlwZTogc3RyaW5nKTogQmxvYiB7XHJcbiAgICAgICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZU51bWJlcnMgPSBuZXcgQXJyYXkoYnl0ZUNoYXJhY3RlcnMubGVuZ3RoKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJ5dGVOdW1iZXJzW2ldID0gYnl0ZUNoYXJhY3RlcnMuY2hhckNvZGVBdChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZU51bWJlcnMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbYnl0ZUFycmF5XSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdG9wU3BlYWtpbmcoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gQXVkaW9NYW5hZ2VyXHVCOTdDIFx1RDFCNVx1RDU3NCBcdUJBQThcdUI0RTAgXHVDNjI0XHVCNTE0XHVDNjI0IFx1QzgxNVx1QzlDMFxyXG4gICAgICAgIHRoaXMuYXVkaW9NYW5hZ2VyLnN0b3BBbGxBdWRpbygpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzUGF1c2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUQ2NUNcdUMxMzEgXHVDNjI0XHVCNTE0XHVDNjI0XHVBQzAwIFx1Qzc4OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcclxuICAgICAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmF1ZGlvTWFuYWdlci5nZXRTdGF0dXMoKTtcclxuICAgICAgICByZXR1cm4gc3RhdHVzLmFjdGl2ZSA9PT0gMDtcclxuICAgIH1cclxuXHJcbiAgICByZXN1bWUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gQXVkaW9NYW5hZ2VyXHVCMjk0IFx1QUMxQ1x1QkNDNCBcdUM2MjRcdUI1MTRcdUM2MjQgXHVDNjk0XHVDMThDXHVCOTdDIFx1QUQwMFx1QjlBQ1x1RDU1OFx1QkJDMFx1Qjg1QyBcclxuICAgICAgICAvLyBcdUM1RUNcdUFFMzBcdUMxMUNcdUIyOTQgXHVDMEM4XHVCODVDXHVDNkI0IFx1QzY5NFx1Q0NBRFx1QzczQ1x1Qjg1QyBcdUNDOThcdUI5QUNcclxuICAgICAgICBuZXcgTm90aWNlKCdcdUM3NENcdUMxMzFcdUM3NDQgXHVCMkU0XHVDMkRDIFx1QzdBQ1x1QzBERFx1RDU1OFx1QjgyNFx1QkE3NCBcdUJDODRcdUQyQkNcdUM3NDQgXHVCMkU0XHVDMkRDIFx1RDA3NFx1QjlBRFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXVzZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0b3BTcGVha2luZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPEdvb2dsZUNsb3VkVFRTU2V0dGluZ3M+KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUI5QUNcdUMxOENcdUMyQTQgXHVDODE1XHVCOUFDXHJcbiAgICBjbGVhbnVwKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYXVkaW9NYW5hZ2VyLmNsZWFudXAoKTtcclxuICAgICAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyLmNhbmNlbEFsbFJlcXVlc3RzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFRleHQgPSAnSGVsbG8sIHRoaXMgaXMgYSB0ZXN0Lic7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FsbEdvb2dsZUNsb3VkQVBJKHRlc3RUZXh0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIENsb3VkIFRUUyBcdUM1RjBcdUFDQjAgXHVEMTRDXHVDMkE0XHVEMkI4IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXZhaWxhYmxlVm9pY2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAnZW4tVVMtSm91cm5leS1EJyxcclxuICAgICAgICAgICAgJ2VuLVVTLUpvdXJuZXktRicsXHJcbiAgICAgICAgICAgICdlbi1VUy1Kb3VybmV5LU8nLFxyXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1BJyxcclxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItQycsXHJcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUQnLFxyXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1FJyxcclxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItRicsXHJcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUcnLFxyXG4gICAgICAgICAgICAnZW4tVVMtTmV1cmFsMi1IJyxcclxuICAgICAgICAgICAgJ2VuLVVTLU5ldXJhbDItSScsXHJcbiAgICAgICAgICAgICdlbi1VUy1OZXVyYWwyLUonLFxyXG4gICAgICAgICAgICAnZW4tVVMtU3RhbmRhcmQtQScsXHJcbiAgICAgICAgICAgICdlbi1VUy1TdGFuZGFyZC1CJyxcclxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUMnLFxyXG4gICAgICAgICAgICAnZW4tVVMtU3RhbmRhcmQtRCcsXHJcbiAgICAgICAgICAgICdlbi1VUy1TdGFuZGFyZC1FJyxcclxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUYnLFxyXG4gICAgICAgICAgICAnZW4tVVMtU3RhbmRhcmQtRycsXHJcbiAgICAgICAgICAgICdlbi1VUy1TdGFuZGFyZC1IJyxcclxuICAgICAgICAgICAgJ2VuLVVTLVN0YW5kYXJkLUknLFxyXG4gICAgICAgICAgICAnZW4tVVMtU3RhbmRhcmQtSicsXHJcbiAgICAgICAgICAgICdlbi1HQi1OZXVyYWwyLUEnLFxyXG4gICAgICAgICAgICAnZW4tR0ItTmV1cmFsMi1CJyxcclxuICAgICAgICAgICAgJ2VuLUdCLU5ldXJhbDItQycsXHJcbiAgICAgICAgICAgICdlbi1HQi1OZXVyYWwyLUQnLFxyXG4gICAgICAgICAgICAnZW4tR0ItTmV1cmFsMi1GJyxcclxuICAgICAgICAgICAgJ2VuLUFVLU5ldXJhbDItQScsXHJcbiAgICAgICAgICAgICdlbi1BVS1OZXVyYWwyLUInLFxyXG4gICAgICAgICAgICAnZW4tQVUtTmV1cmFsMi1DJyxcclxuICAgICAgICAgICAgJ2VuLUFVLU5ldXJhbDItRCdcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNldHRpbmdzKCk6IEdvb2dsZUNsb3VkVFRTU2V0dGluZ3Mge1xyXG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuc2V0dGluZ3MgfTtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RvcFNwZWFraW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDRTkwXHVDMkRDIFx1QUQwMFx1QjlBQyBcdUJBNTRcdUMxMUNcdUI0RENcdUI0RTRcclxuICAgIGFzeW5jIGdldENhY2hlSW5mbygpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jYWNoZU1hbmFnZXIuZ2V0Q2FjaGVJbmZvKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY2xlYXJDYWNoZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jYWNoZU1hbmFnZXIuY2xlYXJDYWNoZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUNhY2hlRm9sZGVyKHZvY2FidWxhcnlGb2xkZXJQYXRoOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNhY2hlTWFuYWdlci51cGRhdGVDYWNoZUZvbGRlcih2b2NhYnVsYXJ5Rm9sZGVyUGF0aCk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgbm9ybWFsaXplUGF0aCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FjaGVTZXR0aW5ncyB7XHJcbiAgICBsYW5ndWFnZUNvZGU6IHN0cmluZztcclxuICAgIHZvaWNlOiBzdHJpbmc7XHJcbiAgICBzcGVha2luZ1JhdGU6IG51bWJlcjtcclxuICAgIHBpdGNoOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FjaGVJbmZvIHtcclxuICAgIHRvdGFsRmlsZXM6IG51bWJlcjtcclxuICAgIHRvdGFsU2l6ZTogbnVtYmVyO1xyXG4gICAgZm9ybWF0dGVkU2l6ZTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVFRTQ2FjaGVNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHA7XHJcbiAgICBwcml2YXRlIGNhY2hlRm9sZGVyID0gJ1ZvY2FidWxhcnkvY2FjaGUvdHRzJztcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVDYWNoZUZvbGRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUNhY2hlRm9sZGVyKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLmNhY2hlRm9sZGVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIGNhY2hlL3R0cyBcdUQzRjRcdUIzNTQgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih0aGlzLmNhY2hlRm9sZGVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIGlmICghZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdhbHJlYWR5IGV4aXN0cycpICYmIFxyXG4gICAgICAgICAgICAgICAgICAgICFlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZvbGRlciBhbHJlYWR5IGV4aXN0cycpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIWVycm9yTWVzc2FnZS5pbmNsdWRlcygnYWxyZWFkeSBwcmVzZW50JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RUUyBcdUNFOTBcdUMyREMgXHVEM0Y0XHVCMzU0IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2VuZXJhdGVDYWNoZUtleSh0ZXh0OiBzdHJpbmcsIHNldHRpbmdzOiBDYWNoZVNldHRpbmdzLCB3b3JkPzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBrZXlEYXRhID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHNldHRpbmdzLmxhbmd1YWdlQ29kZSxcclxuICAgICAgICAgICAgdm9pY2U6IHNldHRpbmdzLnZvaWNlLFxyXG4gICAgICAgICAgICBzcGVha2luZ1JhdGU6IHNldHRpbmdzLnNwZWFraW5nUmF0ZSxcclxuICAgICAgICAgICAgcGl0Y2g6IHNldHRpbmdzLnBpdGNoXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBrZXlTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShrZXlEYXRhKTtcclxuICAgICAgICAvLyBcdUFDMDRcdUIyRThcdUQ1NUMgXHVENTc0XHVDMkRDIFx1RDU2OFx1QzIxOCAoXHVCRTBDXHVCNzdDXHVDNkIwXHVDODAwIFx1RDY1OFx1QUNCRFx1QzVEMFx1QzExQyBcdUMwQUNcdUM2QTkgXHVBQzAwXHVCMkE1KVxyXG4gICAgICAgIGNvbnN0IGhhc2ggPSB0aGlzLnNpbXBsZUhhc2goa2V5U3RyaW5nKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQxNERcdUMyQTRcdUQyQjhcdUM1RDBcdUMxMUMgXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1Q0Q5QyAoXHVEMzBDXHVDNzdDXHVCQTg1XHVDNUQwIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUMyMTggXHVDNzg4XHVCM0M0XHVCODVEIFx1QzgxNVx1QjlBQylcclxuICAgICAgICBjb25zdCBjbGVhblRleHQgPSB0aGlzLmV4dHJhY3RXb3JkRm9yRmlsZW5hbWUodGV4dCwgd29yZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVEMzBDXHVDNzdDXHVCQTg1OiBcdUIyRThcdUM1QjRfXHVENTc0XHVDMkRDLm1wMyBcdUQ2MTVcdUMyRERcclxuICAgICAgICByZXR1cm4gYCR7Y2xlYW5UZXh0fV8ke2hhc2h9Lm1wM2A7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBleHRyYWN0V29yZEZvckZpbGVuYW1lKHRleHQ6IHN0cmluZywgd29yZD86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8gXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1RDMwQ1x1Qzc3Q1x1QkE4NVx1QzVEMCBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QjNDNFx1Qjg1RCBcdUM4MTVcdUI5QUNcclxuICAgICAgICBsZXQgY2xlYW5UZXh0ID0gdGV4dC50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQxNERcdUMyQTRcdUQyQjggXHVEMEMwXHVDNzg1IFx1QUMxMFx1QzlDMFxyXG4gICAgICAgIGNvbnN0IGlzTG9uZ1RleHQgPSBjbGVhblRleHQubGVuZ3RoID4gNTAgfHwgY2xlYW5UZXh0LmluY2x1ZGVzKCcuJykgfHwgY2xlYW5UZXh0LmluY2x1ZGVzKCcsJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGlzTG9uZ1RleHQgJiYgd29yZCkge1xyXG4gICAgICAgICAgICAvLyBcdUM2MDhcdUJCMzhcdUM3NTggXHVBQ0JEXHVDNkIwOiBcIlx1QzYwMVx1QjJFOFx1QzVCNF9cdUM2MDhcdUJCMzhcdUMyRENcdUM3OTFcdUJEODBcdUJEODRcIiBcdUQ2MTVcdUMyRERcclxuICAgICAgICAgICAgY29uc3QgY2xlYW5Xb3JkID0gdGhpcy5zYW5pdGl6ZUZvckZpbGVuYW1lKHdvcmQpO1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkcyA9IGNsZWFuVGV4dC5zcGxpdCgvW1xcc1xcLiwhPzs6XSsvKS5maWx0ZXIodyA9PiB3Lmxlbmd0aCA+IDApO1xyXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlUGFydCA9IHdvcmRzLnNsaWNlKDAsIDMpLmpvaW4oJy0nKTtcclxuICAgICAgICAgICAgY29uc3QgY2xlYW5FeGFtcGxlID0gdGhpcy5zYW5pdGl6ZUZvckZpbGVuYW1lKGV4YW1wbGVQYXJ0KTtcclxuICAgICAgICAgICAgY2xlYW5UZXh0ID0gYCR7Y2xlYW5Xb3JkfV8ke2NsZWFuRXhhbXBsZX1gO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNMb25nVGV4dCkge1xyXG4gICAgICAgICAgICAvLyBcdUFFMzQgXHVEMTREXHVDMkE0XHVEMkI4KFx1QzYwOFx1QkIzOClcdUM3NTggXHVBQ0JEXHVDNkIwOiBcdUNDQUIgMi0zXHVBQzFDIFx1QjJFOFx1QzVCNCBcdUNEOTRcdUNEOUNcclxuICAgICAgICAgICAgY29uc3Qgd29yZHMgPSBjbGVhblRleHQuc3BsaXQoL1tcXHNcXC4sIT87Ol0rLykuZmlsdGVyKHcgPT4gdy5sZW5ndGggPiAwKTtcclxuICAgICAgICAgICAgY29uc3Qgc2lnbmlmaWNhbnRXb3JkcyA9IHdvcmRzLnNsaWNlKDAsIDMpLmpvaW4oJ18nKTtcclxuICAgICAgICAgICAgY2xlYW5UZXh0ID0gc2lnbmlmaWNhbnRXb3JkcztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM3N0MgXHVCMkU4XHVDNUI0XHVDNzU4IFx1QUNCRFx1QzZCMDogXHVDQ0FCIFx1QkM4OFx1QzlGOCBcdUIyRThcdUM1QjRcdUI5Q0MgXHVDRDk0XHVDRDlDXHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0V29yZCA9IGNsZWFuVGV4dC5zcGxpdCgvW1xcc1xcLiwhPzs6XSsvKVswXTtcclxuICAgICAgICAgICAgY2xlYW5UZXh0ID0gZmlyc3RXb3JkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQzMENcdUM3N0NcdUJBODUgXHVDODE1XHVCOUFDXHJcbiAgICAgICAgY2xlYW5UZXh0ID0gdGhpcy5zYW5pdGl6ZUZvckZpbGVuYW1lKGNsZWFuVGV4dCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVBRTM4XHVDNzc0IFx1QzgxQ1x1RDU1QyAoXHVDRDVDXHVCMzAwIDUwXHVDNzkwXHVCODVDIFx1RDY1NVx1QzdBNSAtIFx1QzYwMVx1QjJFOFx1QzVCNF9cdUM2MDhcdUJCMzggXHVENjE1XHVDMkREXHVDNzQ0IFx1QzcwNFx1RDU3NClcclxuICAgICAgICBpZiAoY2xlYW5UZXh0Lmxlbmd0aCA+IDUwKSB7XHJcbiAgICAgICAgICAgIGNsZWFuVGV4dCA9IGNsZWFuVGV4dC5zdWJzdHJpbmcoMCwgNTApO1xyXG4gICAgICAgICAgICAvLyBcdUIwNURcdUM1RDAgXHVDNUI4XHVCMzU0XHVDMkE0XHVDRjU0XHVDNUI0XHVCMDk4IFx1RDU1OFx1Qzc3NFx1RDUwOFx1Qzc3NCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgICAgIGNsZWFuVGV4dCA9IGNsZWFuVGV4dC5yZXBsYWNlKC9bLV9dKyQvLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QkU0OCBcdUJCMzhcdUM3OTBcdUM1RjRcdUM3NzRcdUJBNzQgXHVBRTMwXHVCQ0Y4XHVBQzEyIFx1QzBBQ1x1QzZBOVxyXG4gICAgICAgIGlmIChjbGVhblRleHQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNsZWFuVGV4dCA9ICd0dHMnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY2xlYW5UZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2FuaXRpemVGb3JGaWxlbmFtZSh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vIFx1RDMwQ1x1Qzc3Q1x1QkE4NVx1QzVEMCBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUJCMzhcdUM3OTBcdUI0RTQgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgbGV0IGNsZWFuZWQgPSB0ZXh0LnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCAnJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDNjAxXHVCQjM4XHVDNzkwLCBcdUMyMkJcdUM3OTAsIFx1RDU1OFx1Qzc3NFx1RDUwOCwgXHVDNUI4XHVCMzU0XHVDMkE0XHVDRjU0XHVDNUI0XHVCOUNDIFx1RDVDOFx1QzZBOVxyXG4gICAgICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL1teYS16MC05XFwtX10vZywgJycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzVGMFx1QzE4RFx1QjQxQyBcdUM1QjhcdUIzNTRcdUMyQTRcdUNGNTRcdUM1QjRcdUIwOTggXHVENTU4XHVDNzc0XHVENTA4IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL1stX10rL2csICdfJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMkRDXHVDNzkxXHVBQ0ZDIFx1QjA1RFx1Qzc1OCBcdUM1QjhcdUIzNTRcdUMyQTRcdUNGNTRcdUM1QjQgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvXl8rfF8rJC9nLCAnJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGNsZWFuZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaW1wbGVIYXNoKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgaGFzaCA9IDA7XHJcbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHJldHVybiBoYXNoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY2hhciA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaGFyO1xyXG4gICAgICAgICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIDMyXHVCRTQ0XHVEMkI4IFx1QzgxNVx1QzIxOFx1Qjg1QyBcdUJDQzBcdUQ2NThcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKGhhc2gpLnRvU3RyaW5nKDM2KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldENhY2hlRmlsZVBhdGgoY2FjaGVLZXk6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZVBhdGgoYCR7dGhpcy5jYWNoZUZvbGRlcn0vJHtjYWNoZUtleX1gKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRDYWNoZWRBdWRpbyh0ZXh0OiBzdHJpbmcsIHNldHRpbmdzOiBDYWNoZVNldHRpbmdzLCB3b3JkPzogc3RyaW5nKTogUHJvbWlzZTxBcnJheUJ1ZmZlciB8IG51bGw+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuZ2VuZXJhdGVDYWNoZUtleSh0ZXh0LCBzZXR0aW5ncywgd29yZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gdGhpcy5nZXRDYWNoZUZpbGVQYXRoKGNhY2hlS2V5KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWRCaW5hcnkoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVFRTIFx1Q0U5MFx1QzJEQyBcdUQ3ODhcdUQyQjg6IFwiJHt0ZXh0LnN1YnN0cmluZygwLCA1MCl9JHt0ZXh0Lmxlbmd0aCA+IDUwID8gJy4uLicgOiAnJ31cIiBcdTIxOTIgJHtjYWNoZUtleX1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheUJ1ZmZlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUVFMgXHVDRTkwXHVDMkRDIFx1Qjg1Q1x1QjREQyBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2V0Q2FjaGVkQXVkaW8odGV4dDogc3RyaW5nLCBzZXR0aW5nczogQ2FjaGVTZXR0aW5ncywgYmFzZTY0QXVkaW86IHN0cmluZywgd29yZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUNhY2hlRm9sZGVyKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuZ2VuZXJhdGVDYWNoZUtleSh0ZXh0LCBzZXR0aW5ncywgd29yZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gdGhpcy5nZXRDYWNoZUZpbGVQYXRoKGNhY2hlS2V5KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEJhc2U2NFx1Qjk3QyBBcnJheUJ1ZmZlclx1Qjg1QyBcdUJDQzBcdUQ2NThcclxuICAgICAgICAgICAgY29uc3QgYmluYXJ5U3RyaW5nID0gYXRvYihiYXNlNjRBdWRpbyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5U3RyaW5nLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluYXJ5U3RyaW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeUJpbmFyeShleGlzdGluZ0ZpbGUsIGJ5dGVzLmJ1ZmZlcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVCaW5hcnkoZmlsZVBhdGgsIGJ5dGVzLmJ1ZmZlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUVFMgXHVDRTkwXHVDMkRDIFx1QzgwMFx1QzdBNTogXCIke3RleHQuc3Vic3RyaW5nKDAsIDUwKX0ke3RleHQubGVuZ3RoID4gNTAgPyAnLi4uJyA6ICcnfVwiIFx1MjE5MiAke2NhY2hlS2V5fWApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RUUyBcdUNFOTBcdUMyREMgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldENhY2hlSW5mbygpOiBQcm9taXNlPENhY2hlSW5mbz4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLmNhY2hlRm9sZGVyKTtcclxuICAgICAgICAgICAgaWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxGaWxlczogMCxcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbFNpemU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkU2l6ZTogJzAgQidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCB0b3RhbEZpbGVzID0gMDtcclxuICAgICAgICAgICAgbGV0IHRvdGFsU2l6ZSA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbXAzJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRmlsZXMrKztcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbFNpemUgKz0gZmlsZS5zdGF0LnNpemU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbEZpbGVzLFxyXG4gICAgICAgICAgICAgICAgdG90YWxTaXplLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkU2l6ZTogdGhpcy5mb3JtYXRGaWxlU2l6ZSh0b3RhbFNpemUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVFRTIFx1Q0U5MFx1QzJEQyBcdUM4MTVcdUJDRjQgXHVDODcwXHVENjhDIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbEZpbGVzOiAwLFxyXG4gICAgICAgICAgICAgICAgdG90YWxTaXplOiAwLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkU2l6ZTogJzAgQidcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY2xlYXJDYWNoZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5jYWNoZUZvbGRlcik7XHJcbiAgICAgICAgICAgIGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZmlsZXNUb0RlbGV0ZSA9IGZvbGRlci5jaGlsZHJlbi5maWx0ZXIoZmlsZSA9PiBcclxuICAgICAgICAgICAgICAgIGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21wMydcclxuICAgICAgICAgICAgKSBhcyBURmlsZVtdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzVG9EZWxldGUpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnRyYXNoRmlsZShmaWxlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFRUUyBcdUNFOTBcdUMyREMgXHVDMEFEXHVDODFDIFx1QzY0NFx1QjhDQzogJHtmaWxlc1RvRGVsZXRlLmxlbmd0aH1cdUFDMUMgXHVEMzBDXHVDNzdDYCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RUUyBcdUNFOTBcdUMyREMgXHVDMEFEXHVDODFDIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmb3JtYXRGaWxlU2l6ZShieXRlczogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCJztcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBrID0gMTAyNDtcclxuICAgICAgICBjb25zdCBzaXplcyA9IFsnQicsICdLQicsICdNQicsICdHQiddO1xyXG4gICAgICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKGspKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdyhrLCBpKSkudG9GaXhlZCgyKSkgKyAnICcgKyBzaXplc1tpXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUNFOTBcdUMyREMgXHVEM0Y0XHVCMzU0IFx1QUNCRFx1Qjg1QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHVwZGF0ZUNhY2hlRm9sZGVyKHZvY2FidWxhcnlGb2xkZXJQYXRoOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNhY2hlRm9sZGVyID0gYCR7dm9jYWJ1bGFyeUZvbGRlclBhdGh9L2NhY2hlL3R0c2A7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplQ2FjaGVGb2xkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUNFOTBcdUMyREMgXHVEMUI1XHVBQ0M0IChcdUFDMUNcdUJDMUMvXHVCNTE0XHVCQzg0XHVBRTQ1XHVDNkE5KVxyXG4gICAgYXN5bmMgZ2V0Q2FjaGVTdGF0cygpOiBQcm9taXNlPHtcclxuICAgICAgICBoaXRDb3VudDogbnVtYmVyO1xyXG4gICAgICAgIG1pc3NDb3VudDogbnVtYmVyO1xyXG4gICAgICAgIGhpdFJhdGU6IG51bWJlcjtcclxuICAgIH0+IHtcclxuICAgICAgICAvLyBcdUMyRTRcdUM4MUMgXHVBRDZDXHVENjA0XHVDMkRDXHVDNUQwXHVCMjk0IFx1QkE1NFx1QkFBOFx1QjlBQ1x1QjA5OCBcdUJDQzRcdUIzQzQgXHVEMzBDXHVDNzdDXHVDNUQwIFx1RDFCNVx1QUNDNFx1Qjk3QyBcdUM4MDBcdUM3QTVcdUQ1NzRcdUM1N0MgXHVENTY4XHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QUUzMFx1QkNGOFx1QUMxMiBcdUJDMThcdUQ2NThcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBoaXRDb3VudDogMCxcclxuICAgICAgICAgICAgbWlzc0NvdW50OiAwLFxyXG4gICAgICAgICAgICBoaXRSYXRlOiAwXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBDaGF0dGVyYm94VFRTU2VydmljZSwgQ2hhdHRlcmJveFRUU1NldHRpbmdzIH0gZnJvbSAnLi9DaGF0dGVyYm94VFRTU2VydmljZSc7XHJcbmltcG9ydCB7IEdvb2dsZUNsb3VkVFRTU2VydmljZSwgR29vZ2xlQ2xvdWRUVFNTZXR0aW5ncyB9IGZyb20gJy4vR29vZ2xlQ2xvdWRUVFNTZXJ2aWNlJztcclxuaW1wb3J0IHsgVFRTU2VydmljZSB9IGZyb20gJy4vVFRTSW50ZXJmYWNlJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMvc2V0dGluZ3MvdWkvc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBkZWNyeXB0QXBpS2V5IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xyXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vLyBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0IFx1RDMyOVx1RDFBMFx1QjlBQ1xyXG5leHBvcnQgY2xhc3MgVFRTU2VydmljZUZhY3Rvcnkge1xyXG4gICAgc3RhdGljIGNyZWF0ZVRUU1NlcnZpY2UoYXBwOiBBcHAsIHNldHRpbmdzPzogVm9jYWJ1bGFyeVNldHRpbmdzKTogVFRTU2VydmljZSB7XHJcbiAgICAgICAgaWYgKCFzZXR0aW5ncyB8fCAhc2V0dGluZ3MudHRzRW5hYmxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vT3BUVFNTZXJ2aWNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2V0dGluZ3MudHRzUHJvdmlkZXIgPT09ICdnb29nbGUtY2xvdWQnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdvb2dsZVNldHRpbmdzOiBHb29nbGVDbG91ZFRUU1NldHRpbmdzID0ge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogc2V0dGluZ3MudHRzRW5hYmxlZCxcclxuICAgICAgICAgICAgICAgIGFwaUtleTogZGVjcnlwdEFwaUtleShzZXR0aW5ncy5nb29nbGVDbG91ZFRUU0FwaUtleSksXHJcbiAgICAgICAgICAgICAgICB2b2ljZTogc2V0dGluZ3MudHRzVm9pY2UsXHJcbiAgICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHNldHRpbmdzLmdvb2dsZUNsb3VkVFRTTGFuZ3VhZ2VDb2RlLFxyXG4gICAgICAgICAgICAgICAgc3BlYWtpbmdSYXRlOiBzZXR0aW5ncy5nb29nbGVDbG91ZFRUU1NwZWFraW5nUmF0ZSxcclxuICAgICAgICAgICAgICAgIHBpdGNoOiBzZXR0aW5ncy5nb29nbGVDbG91ZFRUU1BpdGNoLFxyXG4gICAgICAgICAgICAgICAgYXV0b1BsYXk6IHNldHRpbmdzLnR0c0F1dG9QbGF5LFxyXG4gICAgICAgICAgICAgICAgY2FjaGVFbmFibGVkOiBzZXR0aW5ncy50dHNDYWNoZUVuYWJsZWRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHb29nbGVDbG91ZFRUU1NlcnZpY2UoYXBwLCBnb29nbGVTZXR0aW5ncyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHVBRTMwXHVCQ0Y4XHVBQzEyOiBDaGF0dGVyYm94IFRUU1xyXG4gICAgICAgICAgICBjb25zdCBjaGF0dGVyYm94U2V0dGluZ3M6IENoYXR0ZXJib3hUVFNTZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHNldHRpbmdzLnR0c0VuYWJsZWQsXHJcbiAgICAgICAgICAgICAgICBhcGlVcmw6IHNldHRpbmdzLmNoYXR0ZXJib3hBcGlVcmwsXHJcbiAgICAgICAgICAgICAgICB2b2ljZTogc2V0dGluZ3MudHRzVm9pY2UsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZV9mb3JtYXQ6ICd3YXYnLFxyXG4gICAgICAgICAgICAgICAgc3BlZWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBleGFnZ2VyYXRpb246IHNldHRpbmdzLmNoYXR0ZXJib3hFeGFnZ2VyYXRpb24sXHJcbiAgICAgICAgICAgICAgICBjZmdXZWlnaHQ6IHNldHRpbmdzLmNoYXR0ZXJib3hDZmdXZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogc2V0dGluZ3MuY2hhdHRlcmJveFRlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgc3RyZWFtaW5nX2NodW5rX3NpemU6IDUwLFxyXG4gICAgICAgICAgICAgICAgc3RyZWFtaW5nX3N0cmF0ZWd5OiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgICAgIHN0cmVhbWluZ19idWZmZXJfc2l6ZTogMSxcclxuICAgICAgICAgICAgICAgIHN0cmVhbWluZ19xdWFsaXR5OiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgICAgIGF1dG9QbGF5OiBzZXR0aW5ncy50dHNBdXRvUGxheVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENoYXR0ZXJib3hUVFNTZXJ2aWNlKGNoYXR0ZXJib3hTZXR0aW5ncyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUJFNDRcdUQ2NUNcdUMxMzEgXHVDMEMxXHVEMERDXHVDNzU4IFRUUyBcdUMxMUNcdUJFNDRcdUMyQTQgKE5vLU9wIFx1RDMyOFx1RDEzNClcclxuY2xhc3MgTm9PcFRUU1NlcnZpY2UgaW1wbGVtZW50cyBUVFNTZXJ2aWNlIHtcclxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrRXhhbXBsZShleGFtcGxlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xyXG4gICAgfVxyXG5cclxuICAgIHN0b3BTcGVha2luZygpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xyXG4gICAgfVxyXG5cclxuICAgIGlzUGF1c2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc3VtZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xyXG4gICAgfVxyXG5cclxuICAgIHBhdXNlKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1QzU0NFx1QkIzNFx1QUM4M1x1QjNDNCBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEF2YWlsYWJsZVZvaWNlcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHVDNTQ0XHVCQjM0XHVBQzgzXHVCM0M0IFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHVENjM4XHVENjU4XHVDMTMxXHVDNzQ0IFx1QzcwNFx1RDU1QyBcdUI4MDhcdUFDNzBcdUMyREMgXHVDNzc4XHVEMTMwXHVEMzk4XHVDNzc0XHVDMkE0XHJcbmV4cG9ydCBpbnRlcmZhY2UgTGVnYWN5VFRTU2V0dGluZ3Mge1xyXG4gICAgZW5hYmxlZDogYm9vbGVhbjtcclxuICAgIHZvaWNlOiBzdHJpbmc7XHJcbiAgICBwbGF5YmFja1NwZWVkOiBudW1iZXI7XHJcbiAgICBhdXRvUGxheTogYm9vbGVhbjtcclxufVxyXG5cclxuLy8gXHVCODA4XHVBQzcwXHVDMkRDIFx1QzEyNFx1QzgxNVx1Qzc0NCBDaGF0dGVyYm94IFx1QzEyNFx1QzgxNVx1QzczQ1x1Qjg1QyBcdUJDQzBcdUQ2NThcdUQ1NThcdUIyOTQgXHVENUVDXHVEMzdDIFx1RDU2OFx1QzIxOFxyXG5leHBvcnQgZnVuY3Rpb24gY29udmVydExlZ2FjeVNldHRpbmdzKGxlZ2FjeVNldHRpbmdzOiBMZWdhY3lUVFNTZXR0aW5ncyk6IENoYXR0ZXJib3hUVFNTZXR0aW5ncyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGVuYWJsZWQ6IGxlZ2FjeVNldHRpbmdzLmVuYWJsZWQsXHJcbiAgICAgICAgYXBpVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo0MTIzJyxcclxuICAgICAgICB2b2ljZTogbGVnYWN5U2V0dGluZ3Mudm9pY2UgfHwgJ2FsbG95JyxcclxuICAgICAgICByZXNwb25zZV9mb3JtYXQ6ICd3YXYnLFxyXG4gICAgICAgIHNwZWVkOiAxLFxyXG4gICAgICAgIGV4YWdnZXJhdGlvbjogMC4yNSxcclxuICAgICAgICBjZmdXZWlnaHQ6IDEsXHJcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuMDUsXHJcbiAgICAgICAgc3RyZWFtaW5nX2NodW5rX3NpemU6IDUwLFxyXG4gICAgICAgIHN0cmVhbWluZ19zdHJhdGVneTogJ3N0cmluZycsXHJcbiAgICAgICAgc3RyZWFtaW5nX2J1ZmZlcl9zaXplOiAxLFxyXG4gICAgICAgIHN0cmVhbWluZ19xdWFsaXR5OiAnc3RyaW5nJyxcclxuICAgICAgICBhdXRvUGxheTogbGVnYWN5U2V0dGluZ3MuYXV0b1BsYXlcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIFx1RDYzOFx1RDY1OFx1QzEzMVx1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVBRTMwXHVCQ0Y4IGV4cG9ydFxyXG5leHBvcnQgeyBDaGF0dGVyYm94VFRTU2VydmljZSwgR29vZ2xlQ2xvdWRUVFNTZXJ2aWNlIH07XHJcbmV4cG9ydCB0eXBlIHsgQ2hhdHRlcmJveFRUU1NldHRpbmdzLCBHb29nbGVDbG91ZFRUU1NldHRpbmdzLCBUVFNTZXJ2aWNlIH07IiwgImltcG9ydCB7IE1vbWVudCB9IGZyb20gJ21vbWVudCc7XHJcblxyXG5leHBvcnQgZW51bSBSZXZpZXdSZXNwb25zZSB7XHJcbiAgICBIYXJkID0gJ2hhcmQnLCAgICAvLyBxID0gMTogXHVCOUU0XHVDNkIwIFx1QzVCNFx1QjgzNVx1QUM4QyBcdUQ2OENcdUMwQzFcdUQ1NThcdUFDNzBcdUIwOTggXHVBQzcwXHVDNzU4IFx1QzJFNFx1RDMyOFx1QzVEMCBcdUFDMDBcdUFFNENcdUM2QjQgXHVBQ0JEXHVDNkIwXHJcbiAgICBHb29kID0gJ2dvb2QnLCAgICAvLyBxID0gMjogXHVDNTdEXHVBQzA0XHVDNzU4IFx1QjE3OFx1QjgyNVx1Qzc0NCBcdUI0RTRcdUM1RUMgXHVENjhDXHVDMEMxXHVENTVDIFx1QUNCRFx1QzZCMCAgXHJcbiAgICBFYXN5ID0gJ2Vhc3knICAgICAvLyBxID0gMzogXHVDMjdEXHVBQzhDIFx1QzY0NFx1QzgwNCBcdUQ2OENcdUMwQzFcdUQ1NUMgXHVBQ0JEXHVDNkIwXHJcbn1cclxuXHJcbi8vIFNNLTIgXHVDNTRDXHVBQ0UwXHVCOUFDXHVDOTk4XHVDNzU4IFx1RDQ4OFx1QzlDOCBcdUM4MTBcdUMyMTggXHVCOUU0XHVENTUxXHJcbmV4cG9ydCBjb25zdCBRVUFMSVRZX1NDT1JFUyA9IHtcclxuICAgIFtSZXZpZXdSZXNwb25zZS5IYXJkXTogMSxcclxuICAgIFtSZXZpZXdSZXNwb25zZS5Hb29kXTogMixcclxuICAgIFtSZXZpZXdSZXNwb25zZS5FYXN5XTogM1xyXG59IGFzIGNvbnN0O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTUlNTZXR0aW5ncyB7XHJcbiAgICAvLyBTTS0yIEFsZ29yaXRobSBTZXR0aW5nc1xyXG4gICAgaW5pdGlhbEVGYWN0b3I6IG51bWJlcjsgICAgIC8vIFNNLTIgXHVDRDA4XHVBRTMwIEUtRmFjdG9yICgyLjUpXHJcbiAgICBtaW5pbXVtRUZhY3RvcjogbnVtYmVyOyAgICAgLy8gU00tMiBcdUNENUNcdUMxOEMgRS1GYWN0b3IgKDEuMylcclxuICAgIG1heGltdW1JbnRlcnZhbDogbnVtYmVyOyAgICAvLyBNYXhpbXVtIGludGVydmFsIGluIGRheXMgKDM2NTI1ID0gfjEwMCB5ZWFycylcclxuICAgIFxyXG4gICAgLy8gSW5pdGlhbCBSZXZpZXcgSW50ZXJ2YWxzIChmaXJzdCBzdWNjZXNzZnVsIHJldmlldylcclxuICAgIGhhcmRJbnRlcnZhbDogbnVtYmVyOyAgICAgICAvLyBJbnRlcnZhbCBhZnRlciBoYXJkIHJlc3BvbnNlICgxIGRheSlcclxuICAgIGdvb2RJbnRlcnZhbDogbnVtYmVyOyAgICAgICAvLyBJbnRlcnZhbCBhZnRlciBnb29kIHJlc3BvbnNlICgyIGRheXMpXHJcbiAgICBlYXN5SW50ZXJ2YWw6IG51bWJlcjsgICAgICAgLy8gSW50ZXJ2YWwgYWZ0ZXIgZWFzeSByZXNwb25zZSAoMyBkYXlzKVxyXG4gICAgXHJcbiAgICAvLyBMb2FkIEJhbGFuY2luZyBTZXR0aW5nc1xyXG4gICAgbG9hZEJhbGFuY2U6IGJvb2xlYW47ICAgICAgIC8vIEVuYWJsZSByZXZpZXcgbG9hZCBiYWxhbmNpbmdcclxuICAgIG1heEZ1enppbmdEYXlzOiBudW1iZXI7ICAgICAvLyBNYXhpbXVtIGZ1enppbmcgZm9yIGxvYWQgYmFsYW5jaW5nICgzKVxyXG4gICAgXHJcbiAgICAvLyBMZWdhY3kgY29tcGF0aWJpbGl0eSAoZGVwcmVjYXRlZCBidXQga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSlcclxuICAgIGJhc2VFYXNlOiBudW1iZXI7ICAgICAgICAgICAvLyBTdGFydGluZyBlYXNlIGZhY3RvciAoMjUwJSkgLSBjb252ZXJ0ZWQgdG8gRUZhY3RvclxyXG4gICAgZWFzeUJvbnVzOiBudW1iZXI7ICAgICAgICAgIC8vIE11bHRpcGxpZXIgZm9yIGVhc3kgcmVzcG9uc2VzICgxLjMpIC0gbm90IHVzZWQgaW4gU00tMlxyXG4gICAgaGFyZFBlbmFsdHk6IG51bWJlcjsgICAgICAgIC8vIE11bHRpcGxpZXIgZm9yIGhhcmQgcmVzcG9uc2VzICgwLjUpIC0gbm90IHVzZWQgaW4gU00tMlxyXG4gICAgbWluaW11bUVhc2U6IG51bWJlcjsgICAgICAgIC8vIE1pbmltdW0gZWFzZSBmYWN0b3IgKDEzMCUpIC0gY29udmVydGVkIHRvIEVGYWN0b3JcclxuICAgIGluaXRpYWxJbnRlcnZhbDogbnVtYmVyOyAgICAvLyBTdGFydGluZyBpbnRlcnZhbCBpbiBkYXlzICgxKSAtIG5vdCB1c2VkIGluIFNNLTJcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1JTX1NFVFRJTkdTOiBTUlNTZXR0aW5ncyA9IHtcclxuICAgIC8vIFNNLTIgQWxnb3JpdGhtIFNldHRpbmdzXHJcbiAgICBpbml0aWFsRUZhY3RvcjogMi41LCAgICAgICAgLy8gU00tMiBcdUQ0NUNcdUM5MDAgXHVDRDA4XHVBRTMwIEUtRmFjdG9yXHJcbiAgICBtaW5pbXVtRUZhY3RvcjogMS4zLCAgICAgICAgLy8gU00tMiBcdUQ0NUNcdUM5MDAgXHVDRDVDXHVDMThDIEUtRmFjdG9yXHJcbiAgICBtYXhpbXVtSW50ZXJ2YWw6IDM2NTI1LCAgICAgLy8gfjEwMFx1QjE0NFxyXG4gICAgXHJcbiAgICAvLyBJbml0aWFsIFJldmlldyBJbnRlcnZhbHMgKFx1Q0NBQiBcdUJDODhcdUM5RjggXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzc4IFx1QkNGNVx1QzJCNSBcdUQ2QzQgXHVBQzA0XHVBQ0E5KVxyXG4gICAgaGFyZEludGVydmFsOiAxLCAgICAgICAgICAgIC8vIEhhcmQ6IDFcdUM3N0MgXHVENkM0XHJcbiAgICBnb29kSW50ZXJ2YWw6IDIsICAgICAgICAgICAgLy8gR29vZDogMlx1Qzc3QyBcdUQ2QzQgIFxyXG4gICAgZWFzeUludGVydmFsOiAzLCAgICAgICAgICAgIC8vIEVhc3k6IDNcdUM3N0MgXHVENkM0XHJcbiAgICBcclxuICAgIC8vIExvYWQgQmFsYW5jaW5nIFNldHRpbmdzXHJcbiAgICBsb2FkQmFsYW5jZTogdHJ1ZSxcclxuICAgIG1heEZ1enppbmdEYXlzOiAzLFxyXG4gICAgXHJcbiAgICAvLyBMZWdhY3kgY29tcGF0aWJpbGl0eSAod2lsbCBiZSBjb252ZXJ0ZWQpXHJcbiAgICBiYXNlRWFzZTogMjUwLCAgICAgICAgICAgICAgLy8gMi41ICogMTAwXHJcbiAgICBlYXN5Qm9udXM6IDEuMyxcclxuICAgIGhhcmRQZW5hbHR5OiAwLjUsXHJcbiAgICBtaW5pbXVtRWFzZTogMTMwLCAgICAgICAgICAgLy8gMS4zICogMTAwXHJcbiAgICBpbml0aWFsSW50ZXJ2YWw6IDFcclxufTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2NoZWR1bGVJbmZvIHtcclxuICAgIGR1ZURhdGU6IHN0cmluZzsgICAgICAgICAgIC8vIElTTyBkYXRlIHN0cmluZ1xyXG4gICAgaW50ZXJ2YWw6IG51bWJlcjsgICAgICAgICAgLy8gRGF5cyB1bnRpbCBuZXh0IHJldmlld1xyXG4gICAgZWFzZTogbnVtYmVyOyAgICAgICAgICAgICAgLy8gRWFzZSBmYWN0b3IgKEUtRmFjdG9yICogMTAwLCAxMzAtNTAwKylcclxuICAgIHJldmlld0NvdW50OiBudW1iZXI7ICAgICAgIC8vIFRvdGFsIG51bWJlciBvZiByZXZpZXdzXHJcbiAgICBsYXBzZUNvdW50OiBudW1iZXI7ICAgICAgICAvLyBOdW1iZXIgb2YgaGFyZCByZXNwb25zZXNcclxuICAgIGRlbGF5ZWREYXlzOiBudW1iZXI7ICAgICAgIC8vIERheXMgZGVsYXllZCBiZWZvcmUgdGhpcyByZXZpZXdcclxuICAgIHJlcGV0aXRpb246IG51bWJlcjsgICAgICAgIC8vIFNNLTIgcmVwZXRpdGlvbiBjb3VudCAoXHVDNUYwXHVDMThEIFx1QzEzMVx1QUNGNSBcdUQ2OENcdUMwQzEgXHVENjlGXHVDMjE4KVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1Jlc3VsdCB7XHJcbiAgICBpbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgZWFzZTogbnVtYmVyO1xyXG4gICAgZHVlRGF0ZTogc3RyaW5nO1xyXG4gICAgcmVwZXRpdGlvbjogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobSB7XHJcbiAgICBwcml2YXRlIHNldHRpbmdzOiBTUlNTZXR0aW5ncztcclxuICAgIHByaXZhdGUgZHVlRGF0ZUhpc3RvZ3JhbTogTWFwPHN0cmluZywgbnVtYmVyPiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogU1JTU2V0dGluZ3MgPSBERUZBVUxUX1NSU19TRVRUSU5HUykge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZSB0aGUgbmV4dCByZXZpZXcgc2NoZWR1bGUgYmFzZWQgb24gdXNlciByZXNwb25zZVxyXG4gICAgICogSW1wbGVtZW50cyB0aGUgU00tMiBhbGdvcml0aG0gYWNjb3JkaW5nIHRvIGxlYXJuaW5nX2FsZ29yaXRobS5tZCBzcGVjaWZpY2F0aW9uXHJcbiAgICAgKi9cclxuICAgIHNjaGVkdWxlKFxyXG4gICAgICAgIHJlc3BvbnNlOiBSZXZpZXdSZXNwb25zZSxcclxuICAgICAgICBjdXJyZW50U2NoZWR1bGU/OiBTY2hlZHVsZUluZm9cclxuICAgICk6IFJldmlld1Jlc3VsdCB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCBxID0gUVVBTElUWV9TQ09SRVNbcmVzcG9uc2VdOyAvLyBcdUQ0ODhcdUM5QzggXHVDODEwXHVDMjE4OiAxKGhhcmQpLCAyKGdvb2QpLCAzKGVhc3kpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBzY2hlZHVsZSBpbmZvIGZvciBuZXcgY2FyZHNcclxuICAgICAgICBpZiAoIWN1cnJlbnRTY2hlZHVsZSkge1xyXG4gICAgICAgICAgICBjdXJyZW50U2NoZWR1bGUgPSB7XHJcbiAgICAgICAgICAgICAgICBkdWVEYXRlOiBub3cudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGludGVydmFsOiAwLFxyXG4gICAgICAgICAgICAgICAgZWFzZTogTWF0aC5yb3VuZCh0aGlzLnNldHRpbmdzLmluaXRpYWxFRmFjdG9yICogMTAwKSwgLy8gRS1GYWN0b3JcdUI5N0MgMTAwXHVDNzNDXHVCODVDIFx1QUNGMVx1RDU3NFx1QzExQyBcdUM4MDBcdUM3QTVcclxuICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgbGFwc2VDb3VudDogMCxcclxuICAgICAgICAgICAgICAgIGRlbGF5ZWREYXlzOiAwLFxyXG4gICAgICAgICAgICAgICAgcmVwZXRpdGlvbjogMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIEUtRmFjdG9yIFx1QUNDNFx1QzBCMCAoXHVDODAwXHVDN0E1XHVCNDFDIFx1QUMxMlx1Qzc0NCAxMDBcdUM3M0NcdUI4NUMgXHVCMDk4XHVCMjA0XHVDNUI0IFx1QzJFNFx1QzgxQyBFLUZhY3RvciBcdUM1QkJcdUM3NEMpXHJcbiAgICAgICAgbGV0IGN1cnJlbnRFRmFjdG9yID0gY3VycmVudFNjaGVkdWxlLmVhc2UgLyAxMDA7XHJcbiAgICAgICAgbGV0IG5ld1JlcGV0aXRpb24gPSBjdXJyZW50U2NoZWR1bGUucmVwZXRpdGlvbjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTTS0yIEFsZ29yaXRobSBTdGVwIDE6IEUtRmFjdG9yIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIC8vIEVGX25ldyA9IEVGX29sZCArICgwLjEgLSAoMy1xKSAqICgwLjA4ICsgKDMtcSkgKiAwLjAyKSlcclxuICAgICAgICBjb25zdCBkZWx0YSA9IDAuMSAtICgzIC0gcSkgKiAoMC4wOCArICgzIC0gcSkgKiAwLjAyKTtcclxuICAgICAgICBsZXQgbmV3RUZhY3RvciA9IGN1cnJlbnRFRmFjdG9yICsgZGVsdGE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRS1GYWN0b3IgXHVDRDVDXHVDMThDXHVBQzEyIFx1QzgxQ1x1RDU1QyAoMS4zKVxyXG4gICAgICAgIG5ld0VGYWN0b3IgPSBNYXRoLm1heCh0aGlzLnNldHRpbmdzLm1pbmltdW1FRmFjdG9yLCBuZXdFRmFjdG9yKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTTS0yIEFsZ29yaXRobSBTdGVwIDI6IFJlcGV0aXRpb24gXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKHEgPj0gMikgeyAvLyBnb29kIFx1QjYxMFx1QjI5NCBlYXN5IChxID0gMiBcdUI2MTBcdUIyOTQgMylcclxuICAgICAgICAgICAgbmV3UmVwZXRpdGlvbiA9IGN1cnJlbnRTY2hlZHVsZS5yZXBldGl0aW9uICsgMTtcclxuICAgICAgICB9IGVsc2UgeyAvLyBoYXJkIChxID0gMSlcclxuICAgICAgICAgICAgbmV3UmVwZXRpdGlvbiA9IDA7IC8vIHJlcGV0aXRpb24gXHVCOUFDXHVDMTRCXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNNLTIgQWxnb3JpdGhtIFN0ZXAgMzogXHVCMkU0XHVDNzRDIFx1QkNGNVx1QzJCNSBcdUFDMDRcdUFDQTkgXHVBQ0M0XHVDMEIwXHJcbiAgICAgICAgbGV0IG5ld0ludGVydmFsOiBudW1iZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHEgPCAyKSB7IC8vIGhhcmQgKHEgPSAxKVxyXG4gICAgICAgICAgICAvLyBoYXJkIFx1Qzc1MVx1QjJGNSBcdUMyREMgXHVDMTI0XHVDODE1XHVCNDFDIFx1QUMwNFx1QUNBOVx1QzczQ1x1Qjg1QyBcdUJDRjVcdUMyQjVcclxuICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSB0aGlzLnNldHRpbmdzLmhhcmRJbnRlcnZhbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBnb29kIFx1QjYxMFx1QjI5NCBlYXN5IFx1Qzc1MVx1QjJGNSBcdUMyREMgXHVDRDA4XHVBRTMwIFx1QUMwNFx1QUNBOSBcdUMxMjRcdUM4MTVcclxuICAgICAgICAgICAgaWYgKG5ld1JlcGV0aXRpb24gPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1Q0NBQiBcdUJDODhcdUM5RjggXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzc4IFx1QkNGNVx1QzJCNSBcdUQ2QzQgXHVBQzA0XHVBQ0E5XHJcbiAgICAgICAgICAgICAgICBpZiAocSA9PT0gMikgeyAvLyBnb29kXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSB0aGlzLnNldHRpbmdzLmdvb2RJbnRlcnZhbDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGVhc3kgKHEgPT09IDMpXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSB0aGlzLnNldHRpbmdzLmVhc3lJbnRlcnZhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdSZXBldGl0aW9uID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUI0NTAgXHVCQzg4XHVDOUY4IFx1QzEzMVx1QUNGNVx1QzgwMVx1Qzc3OCBcdUJDRjVcdUMyQjUgXHVENkM0IFx1QUMwNFx1QUNBOSAoXHVBRTMwXHVDODc0IFNNLTIgXHVDNzIwXHVDOUMwKVxyXG4gICAgICAgICAgICAgICAgbmV3SW50ZXJ2YWwgPSA2O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gbiA+PSAzOiBJX24gPSBJXyhuLTEpICogRUZfbmV3XHJcbiAgICAgICAgICAgICAgICBuZXdJbnRlcnZhbCA9IE1hdGgucm91bmQoY3VycmVudFNjaGVkdWxlLmludGVydmFsICogbmV3RUZhY3Rvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDRDVDXHVCMzAwIFx1QUMwNFx1QUNBOSBcdUM4MUNcdUQ1NUNcclxuICAgICAgICBuZXdJbnRlcnZhbCA9IE1hdGgubWluKG5ld0ludGVydmFsLCB0aGlzLnNldHRpbmdzLm1heGltdW1JbnRlcnZhbCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDRDVDXHVDMThDIFx1QUMwNFx1QUNBOSBcdUJDRjRcdUM3QTUgKDFcdUM3N0MpXHJcbiAgICAgICAgbmV3SW50ZXJ2YWwgPSBNYXRoLm1heCgxLCBuZXdJbnRlcnZhbCk7XHJcblxyXG4gICAgICAgIC8vIExvYWQgYmFsYW5jaW5nIFx1QzgwMVx1QzZBOSAoXHVDMTIwXHVEMEREXHVDMEFDXHVENTZEKVxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmxvYWRCYWxhbmNlKSB7XHJcbiAgICAgICAgICAgIG5ld0ludGVydmFsID0gdGhpcy5hcHBseUxvYWRCYWxhbmNpbmcobmV3SW50ZXJ2YWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDMEM4XHVCODVDXHVDNkI0IFx1QjlDQ1x1QjhDQ1x1Qzc3QyBcdUFDQzRcdUMwQjBcclxuICAgICAgICBjb25zdCBuZXdEdWVEYXRlID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIG5ld0ludGVydmFsICogMjQgKiA2MCAqIDYwICogMTAwMCk7XHJcblxyXG4gICAgICAgIC8vIFx1RDc4OFx1QzJBNFx1RDFBMFx1QURGOFx1QjdBOCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggKGxvYWQgYmFsYW5jaW5nXHVDNkE5KVxyXG4gICAgICAgIHRoaXMudXBkYXRlRHVlRGF0ZUhpc3RvZ3JhbShuZXdEdWVEYXRlLnRvRGF0ZVN0cmluZygpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW50ZXJ2YWw6IG5ld0ludGVydmFsLFxyXG4gICAgICAgICAgICBlYXNlOiBNYXRoLnJvdW5kKG5ld0VGYWN0b3IgKiAxMDApLCAvLyBFLUZhY3Rvclx1Qjk3QyAxMDBcdUM3M0NcdUI4NUMgXHVBQ0YxXHVENTc0XHVDMTFDIFx1QkMxOFx1RDY1OFxyXG4gICAgICAgICAgICBkdWVEYXRlOiBuZXdEdWVEYXRlLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHJlcGV0aXRpb246IG5ld1JlcGV0aXRpb25cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwbHkgbG9hZCBiYWxhbmNpbmcgdG8gZGlzdHJpYnV0ZSByZXZpZXdzIGV2ZW5seSBhY3Jvc3MgZGF5c1xyXG4gICAgICogQmFzZWQgb24gdGhlIGhpc3RvZ3JhbS1iYXNlZCBhcHByb2FjaCBmcm9tIG9ic2lkaWFuLXNwYWNlZC1yZXBldGl0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXBwbHlMb2FkQmFsYW5jaW5nKGludGVydmFsOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5sb2FkQmFsYW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZXJ2YWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEaWZmZXJlbnQgZnV6emluZyBzdHJhdGVnaWVzIGJhc2VkIG9uIGludGVydmFsIGxlbmd0aFxyXG4gICAgICAgIGxldCBmdXp6aW5nUmFuZ2U6IG51bWJlcjtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoaW50ZXJ2YWwgPD0gMjEpIHtcclxuICAgICAgICAgICAgZnV6emluZ1JhbmdlID0gMTsgLy8gMSBkYXkgZnV6emluZyBmb3Igc2hvcnQgaW50ZXJ2YWxzXHJcbiAgICAgICAgfSBlbHNlIGlmIChpbnRlcnZhbCA8PSAxODApIHtcclxuICAgICAgICAgICAgZnV6emluZ1JhbmdlID0gTWF0aC5tYXgoMSwgaW50ZXJ2YWwgKiAwLjA1KTsgLy8gNSUgZnV6emluZyBmb3IgbWVkaXVtIGludGVydmFsc1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZ1enppbmdSYW5nZSA9IE1hdGgubWF4KDEsIGludGVydmFsICogMC4wMjUpOyAvLyAyLjUlIGZ1enppbmcgZm9yIGxvbmcgaW50ZXJ2YWxzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDYXAgZnV6emluZyBhdCBtYXggc2V0dGluZ1xyXG4gICAgICAgIGZ1enppbmdSYW5nZSA9IE1hdGgubWluKGZ1enppbmdSYW5nZSwgdGhpcy5zZXR0aW5ncy5tYXhGdXp6aW5nRGF5cyk7XHJcblxyXG4gICAgICAgIC8vIEZpbmQgdGhlIGRhdGUgd2l0aCBtaW5pbXVtIHJldmlld3MgaW4gdGhlIGZ1enppbmcgcmFuZ2VcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGxldCBiZXN0SW50ZXJ2YWwgPSBpbnRlcnZhbDtcclxuICAgICAgICBsZXQgbWluUmV2aWV3cyA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBvZmZzZXQgPSAtZnV6emluZ1JhbmdlOyBvZmZzZXQgPD0gZnV6emluZ1JhbmdlOyBvZmZzZXQrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0SW50ZXJ2YWwgPSBpbnRlcnZhbCArIG9mZnNldDtcclxuICAgICAgICAgICAgaWYgKHRlc3RJbnRlcnZhbCA8IDEpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGVzdERhdGUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgdGVzdEludGVydmFsICogMjQgKiA2MCAqIDYwICogMTAwMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSB0ZXN0RGF0ZS50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgY29uc3QgcmV2aWV3Q291bnQgPSB0aGlzLmR1ZURhdGVIaXN0b2dyYW0uZ2V0KGRhdGVTdHJpbmcpIHx8IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAocmV2aWV3Q291bnQgPCBtaW5SZXZpZXdzKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5SZXZpZXdzID0gcmV2aWV3Q291bnQ7XHJcbiAgICAgICAgICAgICAgICBiZXN0SW50ZXJ2YWwgPSB0ZXN0SW50ZXJ2YWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBiZXN0SW50ZXJ2YWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIGR1ZSBkYXRlIGhpc3RvZ3JhbSBmb3IgbG9hZCBiYWxhbmNpbmdcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVEdWVEYXRlSGlzdG9ncmFtKGRhdGVTdHJpbmc6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmR1ZURhdGVIaXN0b2dyYW0uZ2V0KGRhdGVTdHJpbmcpIHx8IDA7XHJcbiAgICAgICAgdGhpcy5kdWVEYXRlSGlzdG9ncmFtLnNldChkYXRlU3RyaW5nLCBjdXJyZW50ICsgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY2FyZHMgdGhhdCBhcmUgZHVlIGZvciByZXZpZXdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldENhcmRzRm9yUmV2aWV3KGNhcmRzOiBBcnJheTx7IHNjaGVkdWxlSW5mbz86IFNjaGVkdWxlSW5mbyB9Pik6IEFycmF5PHsgc2NoZWR1bGVJbmZvPzogU2NoZWR1bGVJbmZvIH0+IHtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBjYXJkcy5maWx0ZXIoY2FyZCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY2FyZC5zY2hlZHVsZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBOZXcgY2FyZHMgYXJlIGFsd2F5cyBkdWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IG5ldyBEYXRlKGNhcmQuc2NoZWR1bGVJbmZvLmR1ZURhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZHVlRGF0ZSA8PSBub3c7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGUgdGhlIG51bWJlciBvZiBjYXJkcyBkdWUgaW4gdGhlIG5leHQgTiBkYXlzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRDYXJkc0R1ZUluRGF5cyhjYXJkczogQXJyYXk8eyBzY2hlZHVsZUluZm8/OiBTY2hlZHVsZUluZm8gfT4sIGRheXM6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCBmdXR1cmVEYXRlID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY2FyZHMuZmlsdGVyKGNhcmQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWNhcmQuc2NoZWR1bGVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gTmV3IGNhcmRzIGNvdW50IGFzIGR1ZSB0b2RheVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBkdWVEYXRlID0gbmV3IERhdGUoY2FyZC5zY2hlZHVsZUluZm8uZHVlRGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkdWVEYXRlIDw9IGZ1dHVyZURhdGU7XHJcbiAgICAgICAgfSkubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGxlYXJuaW5nIHN0YXRpc3RpY3MgZm9yIGEgc2V0IG9mIGNhcmRzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRTdGF0aXN0aWNzKGNhcmRzOiBBcnJheTx7IHNjaGVkdWxlSW5mbz86IFNjaGVkdWxlSW5mbyB9Pik6IHtcclxuICAgICAgICB0b3RhbDogbnVtYmVyO1xyXG4gICAgICAgIG5ldzogbnVtYmVyO1xyXG4gICAgICAgIGxlYXJuaW5nOiBudW1iZXI7XHJcbiAgICAgICAgbWF0dXJlOiBudW1iZXI7XHJcbiAgICAgICAgYXZlcmFnZUVhc2U6IG51bWJlcjtcclxuICAgICAgICBhdmVyYWdlSW50ZXJ2YWw6IG51bWJlcjtcclxuICAgIH0ge1xyXG4gICAgICAgIGxldCBuZXdDYXJkcyA9IDA7XHJcbiAgICAgICAgbGV0IGxlYXJuaW5nQ2FyZHMgPSAwO1xyXG4gICAgICAgIGxldCBtYXR1cmVDYXJkcyA9IDA7XHJcbiAgICAgICAgbGV0IHRvdGFsRWFzZSA9IDA7XHJcbiAgICAgICAgbGV0IHRvdGFsSW50ZXJ2YWwgPSAwO1xyXG4gICAgICAgIGxldCBjYXJkc1dpdGhTY2hlZHVsZSA9IDA7XHJcblxyXG4gICAgICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY2FyZC5zY2hlZHVsZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIG5ld0NhcmRzKys7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYXJkc1dpdGhTY2hlZHVsZSsrO1xyXG4gICAgICAgICAgICAgICAgdG90YWxFYXNlICs9IGNhcmQuc2NoZWR1bGVJbmZvLmVhc2U7XHJcbiAgICAgICAgICAgICAgICB0b3RhbEludGVydmFsICs9IGNhcmQuc2NoZWR1bGVJbmZvLmludGVydmFsO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbCA8IDIxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdDYXJkcysrO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXR1cmVDYXJkcysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvdGFsOiBjYXJkcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIG5ldzogbmV3Q2FyZHMsXHJcbiAgICAgICAgICAgIGxlYXJuaW5nOiBsZWFybmluZ0NhcmRzLFxyXG4gICAgICAgICAgICBtYXR1cmU6IG1hdHVyZUNhcmRzLFxyXG4gICAgICAgICAgICBhdmVyYWdlRWFzZTogY2FyZHNXaXRoU2NoZWR1bGUgPiAwID8gTWF0aC5yb3VuZCh0b3RhbEVhc2UgLyBjYXJkc1dpdGhTY2hlZHVsZSkgOiAwLFxyXG4gICAgICAgICAgICBhdmVyYWdlSW50ZXJ2YWw6IGNhcmRzV2l0aFNjaGVkdWxlID4gMCA/IE1hdGgucm91bmQodG90YWxJbnRlcnZhbCAvIGNhcmRzV2l0aFNjaGVkdWxlKSA6IDBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGFsZ29yaXRobSBzZXR0aW5nc1xyXG4gICAgICovXHJcbiAgICB1cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5nczogUGFydGlhbDxTUlNTZXR0aW5ncz4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0geyAuLi50aGlzLnNldHRpbmdzLCAuLi5uZXdTZXR0aW5ncyB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGN1cnJlbnQgc2V0dGluZ3NcclxuICAgICAqL1xyXG4gICAgZ2V0U2V0dGluZ3MoKTogU1JTU2V0dGluZ3Mge1xyXG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuc2V0dGluZ3MgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFyIHRoZSBkdWUgZGF0ZSBoaXN0b2dyYW0gKHVzZWZ1bCBmb3IgdGVzdGluZyBvciByZXNldClcclxuICAgICAqL1xyXG4gICAgY2xlYXJIaXN0b2dyYW0oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kdWVEYXRlSGlzdG9ncmFtLmNsZWFyKCk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgXHJcbiAgICBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLCBcclxuICAgIFJldmlld1Jlc3BvbnNlLCBcclxuICAgIFNSU1NldHRpbmdzLCBcclxuICAgIERFRkFVTFRfU1JTX1NFVFRJTkdTLFxyXG4gICAgU2NoZWR1bGVJbmZvIFxyXG59IGZyb20gJy4uL2FsZ29yaXRobXMvU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi4vLi4vVm9jYWJ1bGFyeUNhcmQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZXZpZXdTZXNzaW9uIHtcclxuICAgIHNlc3Npb25JZDogc3RyaW5nO1xyXG4gICAgc3RhcnRUaW1lOiBzdHJpbmc7XHJcbiAgICBjYXJkc1Jldmlld2VkOiBudW1iZXI7XHJcbiAgICB0b3RhbENhcmRzOiBudW1iZXI7XHJcbiAgICBjb21wbGV0ZWRDYXJkczogVm9jYWJ1bGFyeUNhcmRbXTtcclxuICAgIGN1cnJlbnRDYXJkPzogVm9jYWJ1bGFyeUNhcmQ7XHJcbiAgICByZW1haW5pbmdDYXJkcz86IFZvY2FidWxhcnlDYXJkW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3R1ZHlTdGF0aXN0aWNzIHtcclxuICAgIHRvZGF5OiB7XHJcbiAgICAgICAgbmV3Q2FyZHM6IG51bWJlcjtcclxuICAgICAgICByZXZpZXdlZENhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgdG90YWxUaW1lOiBudW1iZXI7IC8vIG1pbnV0ZXNcclxuICAgIH07XHJcbiAgICBzdHJlYWs6IHtcclxuICAgICAgICBjdXJyZW50RGF5czogbnVtYmVyO1xyXG4gICAgICAgIGxvbmdlc3REYXlzOiBudW1iZXI7XHJcbiAgICAgICAgbGFzdFN0dWR5RGF0ZTogc3RyaW5nIHwgbnVsbDtcclxuICAgIH07XHJcbiAgICBvdmVyYWxsOiB7XHJcbiAgICAgICAgdG90YWxDYXJkczogbnVtYmVyO1xyXG4gICAgICAgIG5ld0NhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgbGVhcm5pbmdDYXJkczogbnVtYmVyO1xyXG4gICAgICAgIG1hdHVyZUNhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgYXZlcmFnZUVhc2U6IG51bWJlcjtcclxuICAgICAgICBhdmVyYWdlSW50ZXJ2YWw6IG51bWJlcjtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTcGFjZWRSZXBldGl0aW9uU2VydmljZSB7XHJcbiAgICBwcml2YXRlIGFsZ29yaXRobTogU3BhY2VkUmVwZXRpdGlvbkFsZ29yaXRobTtcclxuICAgIHByaXZhdGUgY3VycmVudFNlc3Npb246IFJldmlld1Nlc3Npb24gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogUGFydGlhbDxTUlNTZXR0aW5ncz4gPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHNyc1NldHRpbmdzID0geyAuLi5ERUZBVUxUX1NSU19TRVRUSU5HUywgLi4uc2V0dGluZ3MgfTtcclxuICAgICAgICB0aGlzLmFsZ29yaXRobSA9IG5ldyBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtKHNyc1NldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjYXJkcyB0aGF0IGFyZSBkdWUgZm9yIHJldmlldyB0b2RheVxyXG4gICAgICovXHJcbiAgICBnZXRDYXJkc0ZvclJldmlldyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIHJldHVybiBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLmdldENhcmRzRm9yUmV2aWV3KGFsbENhcmRzKSBhcyBWb2NhYnVsYXJ5Q2FyZFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IG5ldyBjYXJkcyAobmV2ZXIgcmV2aWV3ZWQpXHJcbiAgICAgKi9cclxuICAgIGdldE5ld0NhcmRzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgcmV0dXJuIGFsbENhcmRzLmZpbHRlcihjYXJkID0+ICFjYXJkLnNjaGVkdWxlSW5mbyB8fCBjYXJkLnJldmlld0NvdW50ID09PSAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBsZWFybmluZyBjYXJkcyAocmV2aWV3ZWQgYnV0IG5vdCBtYXR1cmUpXHJcbiAgICAgKi9cclxuICAgIGdldExlYXJuaW5nQ2FyZHMoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcclxuICAgICAgICByZXR1cm4gYWxsQ2FyZHMuZmlsdGVyKGNhcmQgPT4gXHJcbiAgICAgICAgICAgIGNhcmQuc2NoZWR1bGVJbmZvICYmIFxyXG4gICAgICAgICAgICBjYXJkLnJldmlld0NvdW50ID4gMCAmJiBcclxuICAgICAgICAgICAgY2FyZC5zY2hlZHVsZUluZm8uaW50ZXJ2YWwgPCAyMVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgbWF0dXJlIGNhcmRzIChpbnRlcnZhbCA+PSAyMSBkYXlzKVxyXG4gICAgICovXHJcbiAgICBnZXRNYXR1cmVDYXJkcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIHJldHVybiBhbGxDYXJkcy5maWx0ZXIoY2FyZCA9PiBcclxuICAgICAgICAgICAgY2FyZC5zY2hlZHVsZUluZm8gJiYgXHJcbiAgICAgICAgICAgIGNhcmQuc2NoZWR1bGVJbmZvLmludGVydmFsID49IDIxXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0IGEgbmV3IHJldmlldyBzZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0UmV2aWV3U2Vzc2lvbihkdWVDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSwgbWF4Q2FyZHM/OiBudW1iZXIpOiBSZXZpZXdTZXNzaW9uIHtcclxuICAgICAgICBjb25zdCBjYXJkc1RvUmV2aWV3ID0gbWF4Q2FyZHMgPyBkdWVDYXJkcy5zbGljZSgwLCBtYXhDYXJkcykgOiBkdWVDYXJkcztcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uID0ge1xyXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuZ2VuZXJhdGVTZXNzaW9uSWQoKSxcclxuICAgICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIGNhcmRzUmV2aWV3ZWQ6IDAsXHJcbiAgICAgICAgICAgIHRvdGFsQ2FyZHM6IGNhcmRzVG9SZXZpZXcubGVuZ3RoLFxyXG4gICAgICAgICAgICBjb21wbGV0ZWRDYXJkczogW10sXHJcbiAgICAgICAgICAgIGN1cnJlbnRDYXJkOiBjYXJkc1RvUmV2aWV3WzBdLFxyXG4gICAgICAgICAgICByZW1haW5pbmdDYXJkczogY2FyZHNUb1JldmlldyAvLyBBZGQgcmVtYWluaW5nIGNhcmRzIHRvIHRyYWNrIHByb2dyZXNzXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFNlc3Npb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzIGEgcmV2aWV3IHJlc3BvbnNlIGFuZCBnZXQgdGhlIG5leHQgY2FyZFxyXG4gICAgICovXHJcbiAgICBwcm9jZXNzUmV2aWV3KFxyXG4gICAgICAgIGNhcmQ6IFZvY2FidWxhcnlDYXJkLCBcclxuICAgICAgICByZXNwb25zZTogUmV2aWV3UmVzcG9uc2VcclxuICAgICk6IHsgXHJcbiAgICAgICAgdXBkYXRlZENhcmQ6IFZvY2FidWxhcnlDYXJkOyBcclxuICAgICAgICBuZXh0Q2FyZD86IFZvY2FidWxhcnlDYXJkOyBcclxuICAgICAgICBzZXNzaW9uQ29tcGxldGU6IGJvb2xlYW4gXHJcbiAgICB9IHtcclxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFNlc3Npb24pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhY3RpdmUgcmV2aWV3IHNlc3Npb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFwcGx5IHNwYWNlZCByZXBldGl0aW9uIGFsZ29yaXRobVxyXG4gICAgICAgIGNvbnN0IHJldmlld1Jlc3VsdCA9IHRoaXMuYWxnb3JpdGhtLnNjaGVkdWxlKHJlc3BvbnNlLCBjYXJkLnNjaGVkdWxlSW5mbyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVXBkYXRlIGNhcmQgd2l0aCBuZXcgc2NoZWR1bGVcclxuICAgICAgICBjb25zdCB1cGRhdGVkQ2FyZDogVm9jYWJ1bGFyeUNhcmQgPSB7XHJcbiAgICAgICAgICAgIC4uLmNhcmQsXHJcbiAgICAgICAgICAgIHJldmlld0NvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LnJldmlld0NvdW50IHx8IDApICsgMSxcclxuICAgICAgICAgICAgZGlmZmljdWx0eTogcmVzcG9uc2UsXHJcbiAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICBzY2hlZHVsZUluZm86IHtcclxuICAgICAgICAgICAgICAgIGR1ZURhdGU6IHJldmlld1Jlc3VsdC5kdWVEYXRlLFxyXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IHJldmlld1Jlc3VsdC5pbnRlcnZhbCxcclxuICAgICAgICAgICAgICAgIGVhc2U6IHJldmlld1Jlc3VsdC5lYXNlLFxyXG4gICAgICAgICAgICAgICAgcmV2aWV3Q291bnQ6IChjYXJkLnNjaGVkdWxlSW5mbz8ucmV2aWV3Q291bnQgfHwgMCkgKyAxLFxyXG4gICAgICAgICAgICAgICAgbGFwc2VDb3VudDogKGNhcmQuc2NoZWR1bGVJbmZvPy5sYXBzZUNvdW50IHx8IDApICsgKHJlc3BvbnNlID09PSBSZXZpZXdSZXNwb25zZS5IYXJkID8gMSA6IDApLFxyXG4gICAgICAgICAgICAgICAgZGVsYXllZERheXM6IGNhcmQuc2NoZWR1bGVJbmZvPy5kZWxheWVkRGF5cyB8fCAwLFxyXG4gICAgICAgICAgICAgICAgcmVwZXRpdGlvbjogcmV2aWV3UmVzdWx0LnJlcGV0aXRpb25cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBzZXNzaW9uXHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbi5jYXJkc1Jldmlld2VkKys7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbi5jb21wbGV0ZWRDYXJkcy5wdXNoKHVwZGF0ZWRDYXJkKTtcclxuXHJcbiAgICAgICAgLy8gR2V0IG5leHQgY2FyZCBmcm9tIHJlbWFpbmluZyBjYXJkc1xyXG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0NhcmRzID0gdGhpcy5jdXJyZW50U2Vzc2lvbi5yZW1haW5pbmdDYXJkcyB8fCBbXTtcclxuICAgICAgICBjb25zdCBuZXh0Q2FyZCA9IHRoaXMuY3VycmVudFNlc3Npb24uY2FyZHNSZXZpZXdlZCA8IHJlbWFpbmluZ0NhcmRzLmxlbmd0aCBcclxuICAgICAgICAgICAgPyByZW1haW5pbmdDYXJkc1t0aGlzLmN1cnJlbnRTZXNzaW9uLmNhcmRzUmV2aWV3ZWRdIFxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbi5jdXJyZW50Q2FyZCA9IG5leHRDYXJkO1xyXG5cclxuICAgICAgICBjb25zdCBzZXNzaW9uQ29tcGxldGUgPSAhbmV4dENhcmQgfHwgdGhpcy5jdXJyZW50U2Vzc2lvbi5jYXJkc1Jldmlld2VkID49IHRoaXMuY3VycmVudFNlc3Npb24udG90YWxDYXJkcztcclxuXHJcbiAgICAgICAgaWYgKHNlc3Npb25Db21wbGV0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVuZFJldmlld1Nlc3Npb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVwZGF0ZWRDYXJkLFxyXG4gICAgICAgICAgICBuZXh0Q2FyZCxcclxuICAgICAgICAgICAgc2Vzc2lvbkNvbXBsZXRlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVuZCB0aGUgY3VycmVudCByZXZpZXcgc2Vzc2lvblxyXG4gICAgICovXHJcbiAgICBlbmRSZXZpZXdTZXNzaW9uKCk6IFJldmlld1Nlc3Npb24gfCBudWxsIHtcclxuICAgICAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5jdXJyZW50U2Vzc2lvbjtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjdXJyZW50IHNlc3Npb24gaW5mb1xyXG4gICAgICovXHJcbiAgICBnZXRDdXJyZW50U2Vzc2lvbigpOiBSZXZpZXdTZXNzaW9uIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFNlc3Npb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGUgc3R1ZHkgc3RhdGlzdGljc1xyXG4gICAgICovXHJcbiAgICBjYWxjdWxhdGVTdGF0aXN0aWNzKGFsbENhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdLCBzdHVkeUhpc3Rvcnk/OiBhbnlbXSk6IFN0dWR5U3RhdGlzdGljcyB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCB0b2RheSA9IG5vdy50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBPdmVyYWxsIHN0YXRpc3RpY3MgdXNpbmcgdGhlIGFsZ29yaXRobSdzIHN0YXRpYyBtZXRob2RcclxuICAgICAgICBjb25zdCBvdmVyYWxsU3RhdHMgPSBTcGFjZWRSZXBldGl0aW9uQWxnb3JpdGhtLmdldFN0YXRpc3RpY3MoYWxsQ2FyZHMpO1xyXG5cclxuICAgICAgICAvLyBUb2RheSdzIHN0YXRpc3RpY3MgKHdvdWxkIG5lZWQgdG8gYmUgdHJhY2tlZCBzZXBhcmF0ZWx5KVxyXG4gICAgICAgIGNvbnN0IHRvZGF5U3RhdHMgPSB7XHJcbiAgICAgICAgICAgIG5ld0NhcmRzOiAwLCAvLyBXb3VsZCB0cmFjayBmcm9tIHNlc3Npb24gZGF0YVxyXG4gICAgICAgICAgICByZXZpZXdlZENhcmRzOiAwLCAvLyBXb3VsZCB0cmFjayBmcm9tIHNlc3Npb24gZGF0YVxyXG4gICAgICAgICAgICB0b3RhbFRpbWU6IDAgLy8gV291bGQgdHJhY2sgZnJvbSBzZXNzaW9uIHRpbWluZ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFN0cmVhayBjYWxjdWxhdGlvbiAod291bGQgbmVlZCBwZXJzaXN0ZW50IHN0b3JhZ2UpXHJcbiAgICAgICAgY29uc3Qgc3RyZWFrU3RhdHMgPSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnREYXlzOiAwLCAvLyBXb3VsZCBjYWxjdWxhdGUgZnJvbSBzdHVkeSBoaXN0b3J5XHJcbiAgICAgICAgICAgIGxvbmdlc3REYXlzOiAwLCAvLyBXb3VsZCBjYWxjdWxhdGUgZnJvbSBzdHVkeSBoaXN0b3J5XHJcbiAgICAgICAgICAgIGxhc3RTdHVkeURhdGU6IG51bGwgYXMgc3RyaW5nIHwgbnVsbFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvZGF5OiB0b2RheVN0YXRzLFxyXG4gICAgICAgICAgICBzdHJlYWs6IHN0cmVha1N0YXRzLFxyXG4gICAgICAgICAgICBvdmVyYWxsOiBvdmVyYWxsU3RhdHNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGNhcmRzIGR1ZSBpbiB0aGUgbmV4dCBOIGRheXNcclxuICAgICAqL1xyXG4gICAgZ2V0Q2FyZHNEdWVJbkRheXMoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10sIGRheXM6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIFNwYWNlZFJlcGV0aXRpb25BbGdvcml0aG0uZ2V0Q2FyZHNEdWVJbkRheXMoYWxsQ2FyZHMsIGRheXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXQgYSBjYXJkJ3Mgc2NoZWR1bGUgKGZvciB0ZXN0aW5nIG9yIG1hbnVhbCBpbnRlcnZlbnRpb24pXHJcbiAgICAgKi9cclxuICAgIHJlc2V0Q2FyZFNjaGVkdWxlKGNhcmQ6IFZvY2FidWxhcnlDYXJkKTogVm9jYWJ1bGFyeUNhcmQge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIC4uLmNhcmQsXHJcbiAgICAgICAgICAgIHJldmlld0NvdW50OiAwLFxyXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IG51bGwsXHJcbiAgICAgICAgICAgIHNjaGVkdWxlSW5mbzogdW5kZWZpbmVkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hbnVhbGx5IHNldCBjYXJkIGRpZmZpY3VsdHkgKGZvciBidWxrIG9wZXJhdGlvbnMpXHJcbiAgICAgKi9cclxuICAgIHNldENhcmREaWZmaWN1bHR5KGNhcmQ6IFZvY2FidWxhcnlDYXJkLCBkaWZmaWN1bHR5OiBSZXZpZXdSZXNwb25zZSk6IFZvY2FidWxhcnlDYXJkIHtcclxuICAgICAgICBjb25zdCByZXZpZXdSZXN1bHQgPSB0aGlzLmFsZ29yaXRobS5zY2hlZHVsZShkaWZmaWN1bHR5LCBjYXJkLnNjaGVkdWxlSW5mbyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgLi4uY2FyZCxcclxuICAgICAgICAgICAgZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgc2NoZWR1bGVJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICBkdWVEYXRlOiByZXZpZXdSZXN1bHQuZHVlRGF0ZSxcclxuICAgICAgICAgICAgICAgIGludGVydmFsOiByZXZpZXdSZXN1bHQuaW50ZXJ2YWwsXHJcbiAgICAgICAgICAgICAgICBlYXNlOiByZXZpZXdSZXN1bHQuZWFzZSxcclxuICAgICAgICAgICAgICAgIHJldmlld0NvdW50OiAoY2FyZC5zY2hlZHVsZUluZm8/LnJldmlld0NvdW50IHx8IDApICsgMSxcclxuICAgICAgICAgICAgICAgIGxhcHNlQ291bnQ6IChjYXJkLnNjaGVkdWxlSW5mbz8ubGFwc2VDb3VudCB8fCAwKSArIChkaWZmaWN1bHR5ID09PSBSZXZpZXdSZXNwb25zZS5IYXJkID8gMSA6IDApLFxyXG4gICAgICAgICAgICAgICAgZGVsYXllZERheXM6IDAsXHJcbiAgICAgICAgICAgICAgICByZXBldGl0aW9uOiByZXZpZXdSZXN1bHQucmVwZXRpdGlvblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBhbGdvcml0aG0gc2V0dGluZ3NcclxuICAgICAqL1xyXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFBhcnRpYWw8U1JTU2V0dGluZ3M+KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hbGdvcml0aG0udXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGN1cnJlbnQgYWxnb3JpdGhtIHNldHRpbmdzXHJcbiAgICAgKi9cclxuICAgIGdldFNldHRpbmdzKCk6IFNSU1NldHRpbmdzIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hbGdvcml0aG0uZ2V0U2V0dGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIGEgdW5pcXVlIHNlc3Npb24gSURcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVNlc3Npb25JZCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgc2Vzc2lvbl8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcmVjb21tZW5kZWQgZGFpbHkgc3R1ZHkgbG9hZFxyXG4gICAgICovXHJcbiAgICBnZXRSZWNvbW1lbmRlZERhaWx5Q2FyZHMoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiB7XHJcbiAgICAgICAgbmV3Q2FyZHM6IG51bWJlcjtcclxuICAgICAgICByZXZpZXdDYXJkczogbnVtYmVyO1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXI7XHJcbiAgICB9IHtcclxuICAgICAgICBjb25zdCBkdWVDYXJkcyA9IHRoaXMuZ2V0Q2FyZHNGb3JSZXZpZXcoYWxsQ2FyZHMpO1xyXG4gICAgICAgIGNvbnN0IG5ld0NhcmRzID0gdGhpcy5nZXROZXdDYXJkcyhhbGxDYXJkcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUmVjb21tZW5kZWQgbGltaXRzIChjb25maWd1cmFibGUpXHJcbiAgICAgICAgY29uc3QgbWF4TmV3Q2FyZHNQZXJEYXkgPSAyMDtcclxuICAgICAgICBjb25zdCBtYXhSZXZpZXdDYXJkc1BlckRheSA9IDEwMDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByZWNvbW1lbmRlZE5ldyA9IE1hdGgubWluKG5ld0NhcmRzLmxlbmd0aCwgbWF4TmV3Q2FyZHNQZXJEYXkpO1xyXG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGVkUmV2aWV3ID0gTWF0aC5taW4oZHVlQ2FyZHMubGVuZ3RoIC0gcmVjb21tZW5kZWROZXcsIG1heFJldmlld0NhcmRzUGVyRGF5KTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuZXdDYXJkczogcmVjb21tZW5kZWROZXcsXHJcbiAgICAgICAgICAgIHJldmlld0NhcmRzOiByZWNvbW1lbmRlZFJldmlldyxcclxuICAgICAgICAgICAgdG90YWw6IHJlY29tbWVuZGVkTmV3ICsgcmVjb21tZW5kZWRSZXZpZXdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXhwb3J0IGNhcmRzIGZvciBkYXRhIGFuYWx5c2lzIG9yIGJhY2t1cFxyXG4gICAgICovXHJcbiAgICBleHBvcnRTY2hlZHVsZURhdGEoYWxsQ2FyZHM6IFZvY2FidWxhcnlDYXJkW10pOiBhbnlbXSB7XHJcbiAgICAgICAgcmV0dXJuIGFsbENhcmRzLm1hcChjYXJkID0+ICh7XHJcbiAgICAgICAgICAgIHdvcmQ6IGNhcmQud29yZCxcclxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IGNhcmQucmV2aWV3Q291bnQsXHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IGNhcmQuZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBjYXJkLmxhc3RSZXZpZXdlZCxcclxuICAgICAgICAgICAgc2NoZWR1bGVJbmZvOiBjYXJkLnNjaGVkdWxlSW5mbyxcclxuICAgICAgICAgICAgYWRkZWREYXRlOiBjYXJkLmFkZGVkRGF0ZVxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgbmV4dCByZXZpZXcgaW50ZXJ2YWxzIGZvciBlYWNoIGRpZmZpY3VsdHkgbGV2ZWxcclxuICAgICAqIFNob3dzIHRoZSBleGFjdCBTTS0yIGFsZ29yaXRobSByZXN1bHRzIHdpdGggRS1GYWN0b3IgaW5mb3JtYXRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0TmV4dFJldmlld0ludGVydmFscyhjYXJkOiBWb2NhYnVsYXJ5Q2FyZCk6IHtcclxuICAgICAgICBoYXJkOiB7IGludGVydmFsOiBudW1iZXI7IGRpc3BsYXlUZXh0OiBzdHJpbmc7IGVGYWN0b3I6IG51bWJlcjsgcmVwZXRpdGlvbjogbnVtYmVyIH07XHJcbiAgICAgICAgZ29vZDogeyBpbnRlcnZhbDogbnVtYmVyOyBkaXNwbGF5VGV4dDogc3RyaW5nOyBlRmFjdG9yOiBudW1iZXI7IHJlcGV0aXRpb246IG51bWJlciB9O1xyXG4gICAgICAgIGVhc3k6IHsgaW50ZXJ2YWw6IG51bWJlcjsgZGlzcGxheVRleHQ6IHN0cmluZzsgZUZhY3RvcjogbnVtYmVyOyByZXBldGl0aW9uOiBudW1iZXIgfTtcclxuICAgIH0ge1xyXG4gICAgICAgIGNvbnN0IGhhcmRSZXN1bHQgPSB0aGlzLmFsZ29yaXRobS5zY2hlZHVsZShSZXZpZXdSZXNwb25zZS5IYXJkLCBjYXJkLnNjaGVkdWxlSW5mbyk7XHJcbiAgICAgICAgY29uc3QgZ29vZFJlc3VsdCA9IHRoaXMuYWxnb3JpdGhtLnNjaGVkdWxlKFJldmlld1Jlc3BvbnNlLkdvb2QsIGNhcmQuc2NoZWR1bGVJbmZvKTtcclxuICAgICAgICBjb25zdCBlYXN5UmVzdWx0ID0gdGhpcy5hbGdvcml0aG0uc2NoZWR1bGUoUmV2aWV3UmVzcG9uc2UuRWFzeSwgY2FyZC5zY2hlZHVsZUluZm8pO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBoYXJkOiB7XHJcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogaGFyZFJlc3VsdC5pbnRlcnZhbCxcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0OiB0aGlzLmZvcm1hdEludGVydmFsKGhhcmRSZXN1bHQuaW50ZXJ2YWwpLFxyXG4gICAgICAgICAgICAgICAgZUZhY3RvcjogaGFyZFJlc3VsdC5lYXNlIC8gMTAwLCAvLyBDb252ZXJ0IGJhY2sgdG8gRS1GYWN0b3JcclxuICAgICAgICAgICAgICAgIHJlcGV0aXRpb246IGhhcmRSZXN1bHQucmVwZXRpdGlvblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnb29kOiB7XHJcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogZ29vZFJlc3VsdC5pbnRlcnZhbCxcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0OiB0aGlzLmZvcm1hdEludGVydmFsKGdvb2RSZXN1bHQuaW50ZXJ2YWwpLFxyXG4gICAgICAgICAgICAgICAgZUZhY3RvcjogZ29vZFJlc3VsdC5lYXNlIC8gMTAwLFxyXG4gICAgICAgICAgICAgICAgcmVwZXRpdGlvbjogZ29vZFJlc3VsdC5yZXBldGl0aW9uXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVhc3k6IHtcclxuICAgICAgICAgICAgICAgIGludGVydmFsOiBlYXN5UmVzdWx0LmludGVydmFsLFxyXG4gICAgICAgICAgICAgICAgZGlzcGxheVRleHQ6IHRoaXMuZm9ybWF0SW50ZXJ2YWwoZWFzeVJlc3VsdC5pbnRlcnZhbCksXHJcbiAgICAgICAgICAgICAgICBlRmFjdG9yOiBlYXN5UmVzdWx0LmVhc2UgLyAxMDAsXHJcbiAgICAgICAgICAgICAgICByZXBldGl0aW9uOiBlYXN5UmVzdWx0LnJlcGV0aXRpb25cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3JtYXQgaW50ZXJ2YWwgYXMgaHVtYW4tcmVhZGFibGUgdGV4dFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGZvcm1hdEludGVydmFsKGRheXM6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGRheXMgPCAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAndG9kYXknO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF5cyA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJzEgZGF5JztcclxuICAgICAgICB9IGVsc2UgaWYgKGRheXMgPCAzMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7ZGF5c30gZGF5JHtkYXlzID4gMSA/ICdzJyA6ICcnfWA7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXlzIDwgMzY1KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRocyA9IE1hdGgucm91bmQoZGF5cyAvIDMwICogMTApIC8gMTA7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHttb250aHN9IG1vbnRoJHttb250aHMgPiAxID8gJ3MnIDogJyd9YDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB5ZWFycyA9IE1hdGgucm91bmQoZGF5cyAvIDM2NSAqIDEwKSAvIDEwO1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7eWVhcnN9IHllYXIke3llYXJzID4gMSA/ICdzJyA6ICcnfWA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGRldGFpbGVkIFNNLTIgYWxnb3JpdGhtIHN0YXRpc3RpY3NcclxuICAgICAqL1xyXG4gICAgZ2V0U00yU3RhdGlzdGljcyhhbGxDYXJkczogVm9jYWJ1bGFyeUNhcmRbXSk6IHtcclxuICAgICAgICBvdmVydmlldzoge1xyXG4gICAgICAgICAgICB0b3RhbENhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgICAgIG5ld0NhcmRzOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGxlYXJuaW5nQ2FyZHM6IG51bWJlcjtcclxuICAgICAgICAgICAgbWF0dXJlQ2FyZHM6IG51bWJlcjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlcGV0aXRpb25zOiB7XHJcbiAgICAgICAgICAgIHJlcDA6IG51bWJlcjsgLy8gXHVDMEM4IFx1Q0U3NFx1QjREQ1xyXG4gICAgICAgICAgICByZXAxOiBudW1iZXI7IC8vIFx1Q0NBQiBcdUJDODhcdUM5RjggXHVCQ0Y1XHVDMkI1XHJcbiAgICAgICAgICAgIHJlcDI6IG51bWJlcjsgLy8gXHVCNDUwIFx1QkM4OFx1QzlGOCBcdUJDRjVcdUMyQjVcclxuICAgICAgICAgICAgcmVwM1BsdXM6IG51bWJlcjsgLy8gXHVDMTM4IFx1QkM4OFx1QzlGOCBcdUM3NzRcdUMwQzEgXHVCQ0Y1XHVDMkI1XHJcbiAgICAgICAgfTtcclxuICAgICAgICBlRmFjdG9yczoge1xyXG4gICAgICAgICAgICBhdmVyYWdlOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbjogeyByYW5nZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGludGVydmFsczoge1xyXG4gICAgICAgICAgICBhdmVyYWdlOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbjogeyByYW5nZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXTtcclxuICAgICAgICB9O1xyXG4gICAgfSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB7XHJcbiAgICAgICAgICAgIG92ZXJ2aWV3OiB7IHRvdGFsQ2FyZHM6IDAsIG5ld0NhcmRzOiAwLCBsZWFybmluZ0NhcmRzOiAwLCBtYXR1cmVDYXJkczogMCB9LFxyXG4gICAgICAgICAgICByZXBldGl0aW9uczogeyByZXAwOiAwLCByZXAxOiAwLCByZXAyOiAwLCByZXAzUGx1czogMCB9LFxyXG4gICAgICAgICAgICBlRmFjdG9yczogeyBhdmVyYWdlOiAwLCBkaXN0cmlidXRpb246IFtdIGFzIHsgcmFuZ2U6IHN0cmluZzsgY291bnQ6IG51bWJlciB9W10gfSxcclxuICAgICAgICAgICAgaW50ZXJ2YWxzOiB7IGF2ZXJhZ2U6IDAsIGRpc3RyaWJ1dGlvbjogW10gYXMgeyByYW5nZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXSB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IHRvdGFsRUZhY3RvciA9IDA7XHJcbiAgICAgICAgbGV0IHRvdGFsSW50ZXJ2YWwgPSAwO1xyXG4gICAgICAgIGxldCBjYXJkc1dpdGhTY2hlZHVsZSA9IDA7XHJcbiAgICAgICAgY29uc3QgZUZhY3RvckJ1Y2tldHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG4gICAgICAgIGNvbnN0IGludGVydmFsQnVja2V0cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcblxyXG4gICAgICAgIGFsbENhcmRzLmZvckVhY2goY2FyZCA9PiB7XHJcbiAgICAgICAgICAgIHN0YXRzLm92ZXJ2aWV3LnRvdGFsQ2FyZHMrKztcclxuXHJcbiAgICAgICAgICAgIGlmICghY2FyZC5zY2hlZHVsZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIHN0YXRzLm92ZXJ2aWV3Lm5ld0NhcmRzKys7XHJcbiAgICAgICAgICAgICAgICBzdGF0cy5yZXBldGl0aW9ucy5yZXAwKys7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYXJkc1dpdGhTY2hlZHVsZSsrO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVwZXRpdGlvbiA9IGNhcmQuc2NoZWR1bGVJbmZvLnJlcGV0aXRpb24gfHwgMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVGYWN0b3IgPSBjYXJkLnNjaGVkdWxlSW5mby5lYXNlIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBjYXJkLnNjaGVkdWxlSW5mby5pbnRlcnZhbDtcclxuXHJcbiAgICAgICAgICAgICAgICB0b3RhbEVGYWN0b3IgKz0gZUZhY3RvcjtcclxuICAgICAgICAgICAgICAgIHRvdGFsSW50ZXJ2YWwgKz0gaW50ZXJ2YWw7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmVwZXRpdGlvbiBcdUJEODRcdUQzRUNcclxuICAgICAgICAgICAgICAgIGlmIChyZXBldGl0aW9uID09PSAxKSBzdGF0cy5yZXBldGl0aW9ucy5yZXAxKys7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXBldGl0aW9uID09PSAyKSBzdGF0cy5yZXBldGl0aW9ucy5yZXAyKys7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXBldGl0aW9uID49IDMpIHN0YXRzLnJlcGV0aXRpb25zLnJlcDNQbHVzKys7XHJcbiAgICAgICAgICAgICAgICBlbHNlIHN0YXRzLnJlcGV0aXRpb25zLnJlcDArKztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBNYXR1cmUvTGVhcm5pbmcgXHVCRDg0XHVCOTU4XHJcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJ2YWwgPj0gMjEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0cy5vdmVydmlldy5tYXR1cmVDYXJkcysrO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0cy5vdmVydmlldy5sZWFybmluZ0NhcmRzKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRS1GYWN0b3IgXHVCRDg0XHVEM0VDXHJcbiAgICAgICAgICAgICAgICBjb25zdCBlRmFjdG9yUmFuZ2UgPSB0aGlzLmdldEVGYWN0b3JSYW5nZShlRmFjdG9yKTtcclxuICAgICAgICAgICAgICAgIGVGYWN0b3JCdWNrZXRzLnNldChlRmFjdG9yUmFuZ2UsIChlRmFjdG9yQnVja2V0cy5nZXQoZUZhY3RvclJhbmdlKSB8fCAwKSArIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEludGVydmFsIFx1QkQ4NFx1RDNFQ1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWxSYW5nZSA9IHRoaXMuZ2V0SW50ZXJ2YWxSYW5nZShpbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICBpbnRlcnZhbEJ1Y2tldHMuc2V0KGludGVydmFsUmFuZ2UsIChpbnRlcnZhbEJ1Y2tldHMuZ2V0KGludGVydmFsUmFuZ2UpIHx8IDApICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVEM0M5XHVBREUwIFx1QUNDNFx1QzBCMFxyXG4gICAgICAgIHN0YXRzLmVGYWN0b3JzLmF2ZXJhZ2UgPSBjYXJkc1dpdGhTY2hlZHVsZSA+IDAgPyBNYXRoLnJvdW5kKCh0b3RhbEVGYWN0b3IgLyBjYXJkc1dpdGhTY2hlZHVsZSkgKiAxMDApIC8gMTAwIDogMDtcclxuICAgICAgICBzdGF0cy5pbnRlcnZhbHMuYXZlcmFnZSA9IGNhcmRzV2l0aFNjaGVkdWxlID4gMCA/IE1hdGgucm91bmQodG90YWxJbnRlcnZhbCAvIGNhcmRzV2l0aFNjaGVkdWxlKSA6IDA7XHJcblxyXG4gICAgICAgIC8vIFx1QkQ4NFx1RDNFQyBcdUJDMzBcdUM1RjQgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgc3RhdHMuZUZhY3RvcnMuZGlzdHJpYnV0aW9uID0gQXJyYXkuZnJvbShlRmFjdG9yQnVja2V0cy5lbnRyaWVzKCkpXHJcbiAgICAgICAgICAgIC5tYXAoKFtyYW5nZSwgY291bnRdKSA9PiAoeyByYW5nZSwgY291bnQgfSkpXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBwYXJzZUZsb2F0KGEucmFuZ2Uuc3BsaXQoJy0nKVswXSkgLSBwYXJzZUZsb2F0KGIucmFuZ2Uuc3BsaXQoJy0nKVswXSkpO1xyXG5cclxuICAgICAgICBzdGF0cy5pbnRlcnZhbHMuZGlzdHJpYnV0aW9uID0gQXJyYXkuZnJvbShpbnRlcnZhbEJ1Y2tldHMuZW50cmllcygpKVxyXG4gICAgICAgICAgICAubWFwKChbcmFuZ2UsIGNvdW50XSkgPT4gKHsgcmFuZ2UsIGNvdW50IH0pKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gdGhpcy5jb21wYXJlSW50ZXJ2YWxSYW5nZXMoYS5yYW5nZSwgYi5yYW5nZSkpO1xyXG5cclxuICAgICAgICByZXR1cm4gc3RhdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgRS1GYWN0b3IgcmFuZ2UgZm9yIGdyb3VwaW5nXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0RUZhY3RvclJhbmdlKGVGYWN0b3I6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGVGYWN0b3IgPCAxLjUpIHJldHVybiAnMS4zLTEuNSc7XHJcbiAgICAgICAgaWYgKGVGYWN0b3IgPCAyLjApIHJldHVybiAnMS41LTIuMCc7XHJcbiAgICAgICAgaWYgKGVGYWN0b3IgPCAyLjUpIHJldHVybiAnMi4wLTIuNSc7XHJcbiAgICAgICAgaWYgKGVGYWN0b3IgPCAzLjApIHJldHVybiAnMi41LTMuMCc7XHJcbiAgICAgICAgaWYgKGVGYWN0b3IgPCAzLjUpIHJldHVybiAnMy4wLTMuNSc7XHJcbiAgICAgICAgcmV0dXJuICczLjUrJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBpbnRlcnZhbCByYW5nZSBmb3IgZ3JvdXBpbmdcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRJbnRlcnZhbFJhbmdlKGludGVydmFsOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChpbnRlcnZhbCA9PT0gMSkgcmV0dXJuICcxIGRheSc7XHJcbiAgICAgICAgaWYgKGludGVydmFsIDw9IDYpIHJldHVybiAnMi02IGRheXMnO1xyXG4gICAgICAgIGlmIChpbnRlcnZhbCA8PSAyMCkgcmV0dXJuICc3LTIwIGRheXMnO1xyXG4gICAgICAgIGlmIChpbnRlcnZhbCA8PSA2MCkgcmV0dXJuICcyMS02MCBkYXlzJztcclxuICAgICAgICBpZiAoaW50ZXJ2YWwgPD0gMTgwKSByZXR1cm4gJzItNiBtb250aHMnO1xyXG4gICAgICAgIGlmIChpbnRlcnZhbCA8PSAzNjUpIHJldHVybiAnNi0xMiBtb250aHMnO1xyXG4gICAgICAgIHJldHVybiAnMSsgeWVhcnMnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcGFyZSBpbnRlcnZhbCByYW5nZXMgZm9yIHNvcnRpbmdcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb21wYXJlSW50ZXJ2YWxSYW5nZXMoYTogc3RyaW5nLCBiOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IG9yZGVyID0gWycxIGRheScsICcyLTYgZGF5cycsICc3LTIwIGRheXMnLCAnMjEtNjAgZGF5cycsICcyLTYgbW9udGhzJywgJzYtMTIgbW9udGhzJywgJzErIHllYXJzJ107XHJcbiAgICAgICAgcmV0dXJuIG9yZGVyLmluZGV4T2YoYSkgLSBvcmRlci5pbmRleE9mKGIpO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCwgQm9vayB9IGZyb20gJy4uLy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL3N0b3JhZ2UvVm9jYWJ1bGFyeURhdGFiYXNlJztcclxuaW1wb3J0IHsgV29yZFNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9leHRlcm5hbC9Xb3JkU2VydmljZSc7XHJcbmltcG9ydCB7IExMTVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9sbG0vTExNU2VydmljZSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlNb2RhbCB9IGZyb20gJy4uLy4uL3ZvY2FidWxhcnktbGVhcm5pbmcvdWkvVm9jYWJ1bGFyeU1vZGFsJztcclxuaW1wb3J0IHsgQWRkQm9va01vZGFsIH0gZnJvbSAnLi9BZGRCb29rTW9kYWwnO1xyXG5pbXBvcnQgeyBBZGRXb3Jkc01vZGFsIH0gZnJvbSAnLi4vLi4vd29yZC1tYW5hZ2VtZW50L3VpL0FkZFdvcmRzTW9kYWwnO1xyXG5pbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlNYW5hZ2VyTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG4gICAgZGF0YWJhc2VNYW5hZ2VyOiBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyO1xyXG4gICAgd29yZFNlcnZpY2U6IFdvcmRTZXJ2aWNlO1xyXG4gICAgbGxtU2VydmljZTogTExNU2VydmljZTtcclxuICAgIGN1cnJlbnRWaWV3OiAnbGlzdCcgfCAnc3RhdGlzdGljcycgfCAnYWRkJyA9ICdsaXN0JztcclxuICAgIHNlbGVjdGVkV29yZHM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xyXG4gICAgc2VsZWN0ZWRCb29rSWQ6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlTWFuYWdlciA9IHBsdWdpbi5kYXRhYmFzZU1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy53b3JkU2VydmljZSA9IG5ldyBXb3JkU2VydmljZSgpO1xyXG4gICAgICAgIHRoaXMubGxtU2VydmljZSA9IHBsdWdpbi5sbG1TZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRDdXJyZW50Qm9vaygpPy5pZCB8fCAnZGVmYXVsdCc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYXNWYWxpZEFwaUtleSgpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVByb3ZpZGVyO1xyXG4gICAgICAgIHN3aXRjaCAocHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgY2FzZSAnb3BlbmFpJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haUFwaUtleTtcclxuICAgICAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleTtcclxuICAgICAgICAgICAgY2FzZSAnZ29vZ2xlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZUFwaUtleTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1tYW5hZ2VyLW1vZGFsJyk7XHJcbiAgICAgICAgY29udGVudEVsLmNsYXNzTGlzdC5hZGQoJ3dpZGUtbWFuYWdlci1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDBcdUMxMUMgXHVDRDVDXHVDMkUwIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUI4NUNcdUI0RENcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5sb2FkQWxsQm9va3MoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0Q3VycmVudEJvb2soKT8uaWQgfHwgJ2RlZmF1bHQnO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZUJvb2tTZWxlY3RvckhlYWRlcigpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlTmF2aWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcblxyXG4gICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzEgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUNEOTRcdUFDMDBcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdib29rQ3JlYXRlZCcsIHRoaXMuaGFuZGxlQm9va0NyZWF0ZWQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVCb29rQ3JlYXRlZChldmVudDogQ3VzdG9tRXZlbnQpIHtcclxuICAgICAgICBjb25zdCBuZXdCb29rID0gZXZlbnQuZGV0YWlsO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSBuZXdCb29rLmlkO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEJvb2tTZWxlY3RvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQm9va1NlbGVjdG9ySGVhZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckVsID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbWFuYWdlci1oZWFkZXInIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBib29rcyA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEFsbEJvb2tzKCk7XHJcbiAgICAgICAgY29uc3QgYm9va1NlbGVjdCA9IGhlYWRlckVsLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2Jvb2stc2VsZWN0LWRyb3Bkb3duJyB9KTtcclxuICAgICAgICBib29rcy5mb3JFYWNoKGJvb2sgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gYm9vay5pZDtcclxuICAgICAgICAgICAgb3B0aW9uLnRleHQgPSBib29rLm5hbWU7XHJcbiAgICAgICAgICAgIGlmIChib29rLmlkID09PSB0aGlzLnNlbGVjdGVkQm9va0lkKSBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBib29rU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYm9va1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2V0Q3VycmVudEJvb2sodGhpcy5zZWxlY3RlZEJvb2tJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZEJvb2tCdG4gPSBoZWFkZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVDMEM4IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUNEOTRcdUFDMDAnLCBjbHM6ICdib29rLW1hbmFnZS1idXR0b24nIH0pO1xyXG4gICAgICAgIGFkZEJvb2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZEJvb2tNb2RhbCA9IG5ldyBBZGRCb29rTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKTtcclxuICAgICAgICAgICAgYWRkQm9va01vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NzQgXHVDMEREXHVDMTMxXHVCNDE4XHVCQTc0IFx1QjREQ1x1Qjg2RFx1QjJFNFx1QzZCNFx1QUNGQyBcdUMxMjBcdUQwRERcdUM3NDQgXHVDMEM4XHVCODVDXHVBQ0UwXHVDRTY4XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hCb29rU2VsZWN0b3IoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYWRkQm9va01vZGFsLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgZGVsQm9va0J0biA9IGhlYWRlckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUQ2MDRcdUM3QUMgXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBBRFx1QzgxQycsIGNsczogJ2Jvb2stZGVsZXRlLWJ1dHRvbicgfSk7XHJcbiAgICAgICAgY29uc3QgaXNEZWZhdWx0ID0gdGhpcy5zZWxlY3RlZEJvb2tJZCA9PT0gJ2RlZmF1bHQnO1xyXG4gICAgICAgIGlmIChpc0RlZmF1bHQpIHtcclxuICAgICAgICAgICAgZGVsQm9va0J0bi5zZXRBdHRyKCdkaXNhYmxlZCcsICd0cnVlJyk7XHJcbiAgICAgICAgICAgIGRlbEJvb2tCdG4uYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbEJvb2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpc0RlZmF1bHQpIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUMxMjBcdUQwRERcdUI0MUMgXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzgxNVx1QkNGNCBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudEJvb2sgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRCb29rKHRoaXMuc2VsZWN0ZWRCb29rSWQpO1xyXG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRCb29rKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NTggXHVCMkU4XHVDNUI0IFx1QzIxOCBcdUQ2NTVcdUM3NzhcclxuICAgICAgICAgICAgY29uc3Qgd29yZHNJbkJvb2sgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRXb3Jkc0J5Qm9vayh0aGlzLnNlbGVjdGVkQm9va0lkKTtcclxuICAgICAgICAgICAgY29uc3Qgd29yZENvdW50ID0gd29yZHNJbkJvb2subGVuZ3RoO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDMEMxXHVDMTM4XHVENTVDIFx1RDY1NVx1Qzc3OCBcdUJBQThcdUIyRUMgXHVENDVDXHVDMkRDXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgICAgICdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEFEXHVDODFDIFx1RDY1NVx1Qzc3OCcsXHJcbiAgICAgICAgICAgICAgICBgXHVDODE1XHVCOUQwXHVCODVDIFwiJHtjdXJyZW50Qm9vay5uYW1lfVwiIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc0NCBcdUMwQURcdUM4MUNcdUQ1NThcdUMyRENcdUFDQTBcdUMyQjVcdUIyQzhcdUFFNEM/XFxuXFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXHUyMDIyIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODQ6ICR7Y3VycmVudEJvb2submFtZX1cXG5gICtcclxuICAgICAgICAgICAgICAgIGBcdTIwMjIgXHVEM0VDXHVENTY4XHVCNDFDIFx1QjJFOFx1QzVCNCBcdUMyMTg6ICR7d29yZENvdW50fVx1QUMxQ1xcbmAgK1xyXG4gICAgICAgICAgICAgICAgYFx1MjAyMiBcdUMwRERcdUMxMzFcdUM3N0M6ICR7bmV3IERhdGUoY3VycmVudEJvb2suY3JlYXRlZEF0KS50b0xvY2FsZURhdGVTdHJpbmcoJ2tvLUtSJyl9XFxuXFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXHUyNkEwXHVGRTBGIFx1Qzc3NCBcdUM3OTFcdUM1QzVcdUM3NDAgXHVCNDE4XHVCM0NDXHVCOUI0IFx1QzIxOCBcdUM1QzZcdUM3M0NcdUJBNzAsIFx1QjJFOFx1QzVCNFx1QzdBNVx1QUNGQyBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzYwMVx1QUQ2Q1x1QzgwMVx1QzczQ1x1Qjg1QyBcdUMwQURcdUM4MUNcdUI0MjlcdUIyQzhcdUIyRTQuYCxcclxuICAgICAgICAgICAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5kZWxldGVCb29rKHRoaXMuc2VsZWN0ZWRCb29rSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gJ2RlZmF1bHQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5zZXRDdXJyZW50Qm9vaygnZGVmYXVsdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7Y3VycmVudEJvb2submFtZX1cIiBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NzQgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzBBRFx1QzgxQ1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMwQURcdUM4MUMgXHVDMkU0XHVEMzI4OiAnICsgZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVOYXZpZ2F0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IG5hdkVsID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbWFuYWdlci1uYXZpZ2F0aW9uJyB9KTtcclxuICAgICAgICBjb25zdCBsaXN0QnRuID0gbmF2RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUJBQTlcdUI4NUQnLCBjbHM6ICduYXYtYnV0dG9uJyB9KTtcclxuICAgICAgICBsaXN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3ID0gJ2xpc3QnO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHN0YXRzQnRuID0gbmF2RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1RDFCNVx1QUNDNCcsIGNsczogJ25hdi1idXR0b24nIH0pO1xyXG4gICAgICAgIHN0YXRzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3ID0gJ3N0YXRpc3RpY3MnO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkZEJ0biA9IG5hdkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJywgY2xzOiAnbmF2LWJ1dHRvbicgfSk7XHJcbiAgICAgICAgYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIG5ldyBBZGRXb3Jkc01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgdGhpcy5zZWxlY3RlZEJvb2tJZCkub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0TGVhcm5pbmdCdXR0b24gPSBuYXZFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QzgwNFx1Q0NCNCBcdUM2MDFcdUM1QjQgXHVCMkU4XHVDNUI0IFx1RDU1OVx1QzJCNSBcdUMyRENcdUM3OTEnLFxyXG4gICAgICAgICAgICBjbHM6ICduYXYtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN0YXJ0TGVhcm5pbmdCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgbmV3IFZvY2FidWxhcnlNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dDdXJyZW50VmlldygpIHtcclxuICAgICAgICBjb25zdCBjb250ZW50RWwgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcubWFuYWdlci1jb250ZW50JykgfHwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtYW5hZ2VyLWNvbnRlbnQnIH0pO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5jdXJyZW50Vmlldykge1xyXG4gICAgICAgICAgICBjYXNlICdsaXN0JzpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1dvcmRMaXN0KGNvbnRlbnRFbCBhcyBIVE1MRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc3RhdGlzdGljcyc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dTdGF0aXN0aWNzKGNvbnRlbnRFbCBhcyBIVE1MRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYWRkJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FkZFdvcmQoY29udGVudEVsIGFzIEhUTUxFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dXb3JkTGlzdChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxXb3JkcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh3b3Jkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTVcdUM3NzQgXHVCRTQ0XHVDNUI0XHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUIyRThcdUM1QjRcdUI5N0MgXHVDRDk0XHVBQzAwXHVENTc0XHVCQ0Y0XHVDMTM4XHVDNjk0IScsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdlbXB0eS1tZXNzYWdlJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2VhcmNoRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VhcmNoLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2VhcmNoRWwuY3JlYXRlRWwoJ2lucHV0Jywge1xyXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnXHVCMkU4XHVDNUI0IFx1QUM4MFx1QzBDOS4uLicsXHJcbiAgICAgICAgICAgIGNsczogJ3NlYXJjaC1pbnB1dCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uQ29udHJvbHMgPSBzZWFyY2hFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZWxlY3Rpb24tY29udHJvbHMnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGFsbFNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFdvcmRzLnNpemUgPT09IHdvcmRzLmxlbmd0aCAmJiB3b3Jkcy5sZW5ndGggPiAwO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdEFsbEJ0biA9IHNlbGVjdGlvbkNvbnRyb2xzLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiBhbGxTZWxlY3RlZCA/ICdcdUM4MDRcdUNDQjQgXHVENTc0XHVDODFDJyA6ICdcdUM4MDRcdUNDQjQgXHVDMTIwXHVEMEREJyxcclxuICAgICAgICAgICAgY2xzOiAnc2VsZWN0aW9uLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZWxlY3RBbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkV29yZHMuc2l6ZSA9PT0gd29yZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMuY2xlYXIoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXb3Jkcy5jbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgd29yZHMuZm9yRWFjaCh3b3JkID0+IHRoaXMuc2VsZWN0ZWRXb3Jkcy5hZGQod29yZC53b3JkKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgZmV0Y2hTZWxlY3RlZEJ1dHRvbiA9IHNlbGVjdGlvbkNvbnRyb2xzLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDMTIwXHVEMEREIFx1QjJFOFx1QzVCNCBcdUI3M0IgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwJyxcclxuICAgICAgICAgICAgY2xzOiAnZmV0Y2gtc2VsZWN0ZWQtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZldGNoU2VsZWN0ZWRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkV29yZHMuc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDMTIwXHVEMEREXHVCNDFDIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zaG93RmV0Y2hTZWxlY3RlZE1lYW5pbmdzTW9kYWwoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZExpc3RFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWxpc3QnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJlbmRlcldvcmRzID0gKGZpbHRlcmVkV29yZHM6IFZvY2FidWxhcnlDYXJkW10pID0+IHtcclxuICAgICAgICAgICAgd29yZExpc3RFbC5lbXB0eSgpO1xyXG4gICAgICAgICAgICBmaWx0ZXJlZFdvcmRzLmZvckVhY2god29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVdvcmRJdGVtKHdvcmRMaXN0RWwsIHdvcmQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFdvcmRzID0gcXVlcnkgPyBcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNlYXJjaFdvcmRzKHF1ZXJ5KSA6IHdvcmRzO1xyXG4gICAgICAgICAgICByZW5kZXJXb3JkcyhmaWx0ZXJlZFdvcmRzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmVuZGVyV29yZHMod29yZHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlV29yZEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgd29yZDogVm9jYWJ1bGFyeUNhcmQpIHtcclxuICAgICAgICBjb25zdCB3b3JkRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnd29yZC1pdGVtJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjaGVja2JveCA9IHdvcmRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXHJcbiAgICAgICAgICAgIGNsczogJ3dvcmQtY2hlY2tib3gnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRXb3Jkcy5oYXMod29yZC53b3JkKTtcclxuICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpc0NoZWNrZWQgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZDtcclxuICAgICAgICAgICAgaWYgKGlzQ2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzLmFkZCh3b3JkLndvcmQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzLmRlbGV0ZSh3b3JkLndvcmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgd29yZEhlYWRlciA9IHdvcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWhlYWRlcicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgd29yZFRpdGxlRWwgPSB3b3JkSGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgY2xzOiAnd29yZC10aXRsZScgfSk7XHJcbiAgICAgICAgaWYgKHdvcmQucHJvbnVuY2lhdGlvbiAmJiB3b3JkLnByb251bmNpYXRpb24udHJpbSgpKSB7XHJcbiAgICAgICAgICAgIHdvcmRUaXRsZUVsLnRleHRDb250ZW50ID0gd29yZC53b3JkO1xyXG4gICAgICAgICAgICB3b3JkVGl0bGVFbC5hcHBlbmRUZXh0KCcgJyk7XHJcbiAgICAgICAgICAgIHdvcmRUaXRsZUVsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBbJHt3b3JkLnByb251bmNpYXRpb259XWAsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdwcm9udW5jaWF0aW9uJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3b3JkVGl0bGVFbC50ZXh0Q29udGVudCA9IHdvcmQud29yZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZGlmZmljdWx0eUJhZGdlID0gd29yZEhlYWRlci5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0RGlmZmljdWx0eVRleHQod29yZC5kaWZmaWN1bHR5KSxcclxuICAgICAgICAgICAgY2xzOiBgZGlmZmljdWx0eS1iYWRnZSAke3dvcmQuZGlmZmljdWx0eX1gXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmRDb250ZW50ID0gd29yZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmQtY29udGVudCcgfSk7XHJcbiAgICAgICAgd29yZENvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiBgXHVCNzNCOiAke3dvcmQubWVhbmluZ3Muam9pbignLCAnKX1gLFxyXG4gICAgICAgICAgICBjbHM6ICd3b3JkLW1lYW5pbmdzJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHdvcmRDb250ZW50LmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgdGV4dDogYFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTg6ICR7d29yZC5yZXZpZXdDb3VudH1cdUQ2OENgLFxyXG4gICAgICAgICAgICBjbHM6ICdyZXZpZXctY291bnQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh3b3JkLmxhc3RSZXZpZXdlZCkge1xyXG4gICAgICAgICAgICB3b3JkQ29udGVudC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHVCOUM4XHVDOUMwXHVCOUM5IFx1QkNGNVx1QzJCNTogJHtmb3JtYXREYXRlKHdvcmQubGFzdFJldmlld2VkKX1gLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnbGFzdC1yZXZpZXdlZCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB3b3JkQWN0aW9ucyA9IHdvcmRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWFjdGlvbnMnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBZHZhbmNlZEZlYXR1cmVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZldGNoQnV0dG9uID0gd29yZEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnYWN0aW9uLWJ1dHRvbiBmZXRjaC1zaW5nbGUtYnV0dG9uJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZmV0Y2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoU2luZ2xlV29yZE1lYW5pbmcod29yZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gd29yZEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUMwQURcdUM4MUMnLFxyXG4gICAgICAgICAgICBjbHM6ICdhY3Rpb24tYnV0dG9uIGRlbGV0ZS1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQycsXHJcbiAgICAgICAgICAgICAgICBgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjRcdUI5N0MgXHVDMEFEXHVDODFDXHVENTU4XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDP2AsXHJcbiAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIucmVtb3ZlV29yZCh3b3JkLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93U3RhdGlzdGljcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRTdGF0aXN0aWNzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc3RhdHNHcmlkID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3N0YXRzLWdyaWQnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGJhc2ljU3RhdHMgPSBzdGF0c0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3RhdHMtc2VjdGlvbicgfSk7XHJcbiAgICAgICAgYmFzaWNTdGF0cy5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUFFMzBcdUJDRjggXHVEMUI1XHVBQ0M0JywgY2xzOiAnc3RhdHMtdGl0bGUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oYmFzaWNTdGF0cywgJ1x1Q0QxRCBcdUIyRThcdUM1QjQgXHVDMjE4Jywgc3RhdHMudG90YWxXb3Jkcy50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGJhc2ljU3RhdHMsICdcdUNEMUQgXHVCQ0Y1XHVDMkI1IFx1RDY5Rlx1QzIxOCcsIHN0YXRzLnRvdGFsUmV2aWV3cy50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGJhc2ljU3RhdHMsICdcdUM1RjBcdUMxOEQgXHVENTU5XHVDMkI1XHVDNzdDJywgYCR7c3RhdHMuc3RyZWFrRGF5c31cdUM3N0NgKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGJhc2ljU3RhdHMsICdcdUQzQzlcdUFERTAgXHVCMDlDXHVDNzc0XHVCM0M0Jywgc3RhdHMuYXZlcmFnZURpZmZpY3VsdHkudG9GaXhlZCgxKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdHlTdGF0cyA9IHN0YXRzR3JpZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0cy1zZWN0aW9uJyB9KTtcclxuICAgICAgICBkaWZmaWN1bHR5U3RhdHMuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVCMDlDXHVDNzc0XHVCM0M0XHVCQ0M0IFx1QkQ4NFx1RDNFQycsIGNsczogJ3N0YXRzLXRpdGxlJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGRpZmZpY3VsdHlTdGF0cywgJ1x1QzI2Q1x1QzZDMCcsIHN0YXRzLndvcmRzQnlEaWZmaWN1bHR5LmVhc3kudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0SXRlbShkaWZmaWN1bHR5U3RhdHMsICdcdUM4OEJcdUM3NEMnLCBzdGF0cy53b3Jkc0J5RGlmZmljdWx0eS5nb29kLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdEl0ZW0oZGlmZmljdWx0eVN0YXRzLCAnXHVDNUI0XHVCODI0XHVDNkMwJywgc3RhdHMud29yZHNCeURpZmZpY3VsdHkuaGFyZC50b1N0cmluZygpKTtcclxuXHJcbiAgICAgICAgY29uc3QgYWN0aXZpdHlTdGF0cyA9IHN0YXRzR3JpZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzdGF0cy1zZWN0aW9uJyB9KTtcclxuICAgICAgICBhY3Rpdml0eVN0YXRzLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1Q0Q1Q1x1QURGQyA3XHVDNzdDIFx1RDY1Q1x1QjNEOScsIGNsczogJ3N0YXRzLXRpdGxlJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBzdGF0cy5yZWNlbnRBY3Rpdml0eS5mb3JFYWNoKGFjdGl2aXR5ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGFjdGl2aXR5LmRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygna28tS1InLCB7IFxyXG4gICAgICAgICAgICAgICAgbW9udGg6ICdzaG9ydCcsIFxyXG4gICAgICAgICAgICAgICAgZGF5OiAnbnVtZXJpYycgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVN0YXRJdGVtKGFjdGl2aXR5U3RhdHMsIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgYFx1RDU1OVx1QzJCNTogJHthY3Rpdml0eS53b3Jkc1N0dWRpZWR9LCBcdUJDRjVcdUMyQjU6ICR7YWN0aXZpdHkucmV2aWV3c0NvbXBsZXRlZH1gKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVN0YXRJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBzdGF0RWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3RhdC1pdGVtJyB9KTtcclxuICAgICAgICBzdGF0RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGxhYmVsLCBjbHM6ICdzdGF0LWxhYmVsJyB9KTtcclxuICAgICAgICBzdGF0RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IHZhbHVlLCBjbHM6ICdzdGF0LXZhbHVlJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dBZGRXb3JkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBhZGRTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2FkZC13b3JkLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGFkZFNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDMEM4IFx1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLCBjbHM6ICdzZWN0aW9uLXRpdGxlJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBpbnB1dEVsID0gYWRkU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd3b3JkLWlucHV0LWdyb3VwJyB9KTtcclxuICAgICAgICBjb25zdCB3b3JkSW5wdXQgPSBpbnB1dEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1x1QzYwMVx1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQgKFx1QzYwODogYmVhdXRpZnVsKScsXHJcbiAgICAgICAgICAgIGNsczogJ3dvcmQtaW5wdXQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGlucHV0RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwJyxcclxuICAgICAgICAgICAgY2xzOiAnYWRkLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkV29yZCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHdvcmRJbnB1dC52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmICghd29yZCkge1xyXG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdlcnJvci1tZXNzYWdlJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IGF3YWl0IHRoaXMud29yZFNlcnZpY2UuZ2V0V29yZERhdGEod29yZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2b2NhYnVsYXJ5Q2FyZDogVm9jYWJ1bGFyeUNhcmQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4ud29yZERhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV2aWV3Q291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eTogJ2dvb2QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBhZGRlZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBib29rSWQ6IHRoaXMuc2VsZWN0ZWRCb29rSWRcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5hZGRXb3JkKHZvY2FidWxhcnlDYXJkKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgd29yZElucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgXCIke3dvcmR9XCIgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUNEOTRcdUFDMDBcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQhYCxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdzdWNjZXNzLW1lc3NhZ2UnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc01zZyA9IGFkZFNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnN1Y2Nlc3MtbWVzc2FnZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzTXNnKSBzdWNjZXNzTXNnLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0Q5NFx1QUMwMFx1RDU1OFx1QjI5NCBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ2Vycm9yLW1lc3NhZ2UnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFdvcmQpO1xyXG4gICAgICAgIHdvcmRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG4gICAgICAgICAgICAgICAgYWRkV29yZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREaWZmaWN1bHR5VGV4dChkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpOiBzdHJpbmcge1xyXG4gICAgICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xyXG4gICAgICAgICAgICBjYXNlICdlYXN5JzogcmV0dXJuICdcdUMyNkNcdUM2QzAnO1xyXG4gICAgICAgICAgICBjYXNlICdnb29kJzogcmV0dXJuICdcdUM4OEJcdUM3NEMnO1xyXG4gICAgICAgICAgICBjYXNlICdoYXJkJzogcmV0dXJuICdcdUM1QjRcdUI4MjRcdUM2QzAnO1xyXG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gJ1x1Qzg4Qlx1Qzc0Qyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhcnRSZXZpZXcod29yZHM6IFZvY2FidWxhcnlDYXJkW10pIHtcclxuICAgICAgICBjb25zdCByZXZpZXdNb2RhbCA9IG5ldyBWb2NhYnVsYXJ5UmV2aWV3TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCB3b3Jkcyk7XHJcbiAgICAgICAgcmV2aWV3TW9kYWwub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0ZldGNoU2VsZWN0ZWRNZWFuaW5nc01vZGFsKCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkV29yZExpc3QgPSBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRXb3Jkcyk7XHJcbiAgICAgICAgbmV3IEZldGNoU2VsZWN0ZWRNZWFuaW5nc01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgc2VsZWN0ZWRXb3JkTGlzdCkub3BlbigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGZldGNoU2luZ2xlV29yZE1lYW5pbmcod29yZDogVm9jYWJ1bGFyeUNhcmQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzVmFsaWRBcGlLZXkoKSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdMTE0gQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUMxMjRcdUM4MTVcdUM1RDBcdUMxMUMgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxyXG4gICAgICAgICAgICBgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjRcdUM3NTggXHVCNzNCXHVDNzQ0IFx1QzBDOFx1Qjg1QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUMyRENcdUFDQTBcdUMyQjVcdUIyQzhcdUFFNEM/IFx1QUUzMFx1Qzg3NCBcdUM4MTVcdUJDRjRcdUFDMDBcdUM1QjRcdUM1MENcdUM2Q0NcdUM5RDFcdUIyQzhcdUIyRTQuYCxcclxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUI5N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVCMjk0IFx1QzkxMS4uLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxsbVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4ubGxtU2VydmljZS5nZXRXb3JkRGV0YWlscyh3b3JkLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsbG1SZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREZXRhaWwgPSBsbG1SZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IHRoaXMucGx1Z2luLmxsbVNlcnZpY2UuY29udmVydFRvV29yZERhdGEod29yZERldGFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkV29yZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLndvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogd29yZERhdGEubWVhbmluZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlczogd29yZERhdGEuZXhhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREYXRhLnNpbWlsYXJXb3Jkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmREYXRhKHdvcmQud29yZCwgdXBkYXRlZFdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjRcdUFDMDAgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNCFgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXCIke3dvcmQud29yZH1cIiBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMCBcdUMyRTRcdUQzMjg6ICR7bGxtUmVzcG9uc2UuZXJyb3J9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmQud29yZH1cIiBcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcIiR7d29yZC53b3JkfVwiIFx1QjJFOFx1QzVCNCBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyByZWZyZXNoQm9va1NlbGVjdG9yKCkge1xyXG4gICAgICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNFx1QzVEMFx1QzExQyBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NDQgXHVCMkU0XHVDMkRDIFx1Qjg1Q1x1QjREQ1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1RDVFNFx1QjM1NFx1Qzc1OCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTIwXHVEMEREIFx1QjREQ1x1Qjg2RFx1QjJFNFx1QzZCNFx1Qzc0NCBcdUMwQzhcdUI4NUNcdUFDRTBcdUNFNjhcclxuICAgICAgICBjb25zdCBoZWFkZXJFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5tYW5hZ2VyLWhlYWRlcicpO1xyXG4gICAgICAgIGlmIChoZWFkZXJFbCkge1xyXG4gICAgICAgICAgICBjb25zdCBib29rU2VsZWN0ID0gaGVhZGVyRWwucXVlcnlTZWxlY3RvcignLmJvb2stc2VsZWN0LWRyb3Bkb3duJykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChib29rU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBib29rU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYm9va3MgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVDNjM1XHVDMTU4XHVCNEU0IFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgICAgICAgICAgYm9va1NlbGVjdC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdUMwQzhcdUI4NUNcdUM2QjQgXHVDNjM1XHVDMTU4XHVCNEU0IFx1Q0Q5NFx1QUMwMFxyXG4gICAgICAgICAgICAgICAgYm9va3MuZm9yRWFjaChib29rID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBib29rLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gYm9vay5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChib29rLmlkID09PSBjdXJyZW50VmFsdWUgfHwgYm9vay5pZCA9PT0gdGhpcy5zZWxlY3RlZEJvb2tJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQm9va0lkID0gYm9vay5pZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYm9va1NlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QkRGMCBcdUMwQzhcdUI4NUNcdUFDRTBcdUNFNjhcclxuICAgICAgICB0aGlzLnNob3dDdXJyZW50VmlldygpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzBcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdib29rQ3JlYXRlZCcsIHRoaXMuaGFuZGxlQm9va0NyZWF0ZWQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jbGFzcyBWb2NhYnVsYXJ5UmV2aWV3TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luO1xyXG4gICAgd29yZHM6IFZvY2FidWxhcnlDYXJkW107XHJcbiAgICBjdXJyZW50SW5kZXggPSAwO1xyXG4gICAgc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVuZ2xpc2hWb2NhYnVsYXJ5UGx1Z2luLCB3b3JkczogVm9jYWJ1bGFyeUNhcmRbXSkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy53b3JkcyA9IHdvcmRzO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBpZiAodGhpcy53b3Jkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNob3dDdXJyZW50V29yZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0N1cnJlbnRXb3JkKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndm9jYWJ1bGFyeS1sZWFybmluZy1tb2RhbCcpO1xyXG5cclxuICAgICAgICAvLyBcdUMxMjRcdUM4MTVcdUI0MUMgXHVCMTkyXHVDNzc0XHVCOTdDIENTUyBcdUJDQzBcdUMyMThcdUI4NUMgXHVDODAxXHVDNkE5XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXJldmlldy1tb2RhbC1oZWlnaHQnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZpZXdNb2RhbEhlaWdodH12aGApO1xyXG5cclxuICAgICAgICBjb25zdCBjdXJyZW50V29yZCA9IHRoaXMud29yZHNbdGhpcy5jdXJyZW50SW5kZXhdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmV2aWV3LXByb2dyZXNzJyB9KTtcclxuICAgICAgICBwcm9ncmVzc0VsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgdGV4dDogYCR7dGhpcy5jdXJyZW50SW5kZXggKyAxfSAvICR7dGhpcy53b3Jkcy5sZW5ndGh9YCxcclxuICAgICAgICAgICAgY2xzOiAncHJvZ3Jlc3MtdGV4dCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FyZEVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jldmlldy1jYXJkJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDIFx1QkM4NFx1RDJCQyAoXHVDNjI0XHVCOTc4XHVDQUJEIFx1QzBDMVx1QjJFOClcclxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBjYXJkRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNFNzRcdUI0REMgXHVDMEFEXHVDODFDJyxcclxuICAgICAgICAgICAgY2xzOiAnY2FyZC1kZWxldGUtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlRGVsZXRlQ2FyZCgpKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB3b3JkRWwgPSBjYXJkRWwuY3JlYXRlRWwoJ2gxJywgeyBjbHM6ICdyZXZpZXctd29yZCcgfSk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRXb3JkLnByb251bmNpYXRpb24gJiYgY3VycmVudFdvcmQucHJvbnVuY2lhdGlvbi50cmltKCkpIHtcclxuICAgICAgICAgICAgd29yZEVsLnRleHRDb250ZW50ID0gY3VycmVudFdvcmQud29yZDtcclxuICAgICAgICAgICAgd29yZEVsLmFwcGVuZFRleHQoJyAnKTtcclxuICAgICAgICAgICAgd29yZEVsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBbJHtjdXJyZW50V29yZC5wcm9udW5jaWF0aW9ufV1gLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAncHJvbnVuY2lhdGlvbidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd29yZEVsLnRleHRDb250ZW50ID0gY3VycmVudFdvcmQud29yZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zaG93QW5zd2VyKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50V29yZC5zaW1pbGFyV29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2ltaWxhckVsID0gY2FyZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NpbWlsYXItd29yZHMnIH0pO1xyXG4gICAgICAgICAgICAgICAgc2ltaWxhckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1QzcyMFx1QzBBQ1x1RDU1QyBcdUIyRThcdUM1QjRcdUI0RTQ6JyB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbWlsYXJMaXN0ID0gc2ltaWxhckVsLmNyZWF0ZUVsKCd1bCcpO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFdvcmQuc2ltaWxhcldvcmRzLmZvckVhY2god29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2ltaWxhckxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiB3b3JkIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50V29yZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGFtcGxlc0VsID0gY2FyZEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2V4YW1wbGVzJyB9KTtcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVDNjA4XHVCQjM4XHVCNEU0OicgfSk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50V29yZC5leGFtcGxlcy5mb3JFYWNoKGV4YW1wbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4YW1wbGUuZW5nbGlzaCwgY2xzOiAnZXhhbXBsZScgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgY2hlY2tCdG4gPSBjYXJkRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHVDODE1XHVCMkY1IFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUUzMCcsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdjaGVjay1hbnN3ZXItYnV0dG9uJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2hlY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q3VycmVudFdvcmQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYW5zd2VyRWwgPSBjYXJkRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYW5zd2VyLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgICAgICBhbnN3ZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUI3M0I6JyB9KTtcclxuICAgICAgICAgICAgY29uc3QgbWVhbmluZ3NMaXN0ID0gYW5zd2VyRWwuY3JlYXRlRWwoJ3VsJyk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRXb3JkLm1lYW5pbmdzLmZvckVhY2gobWVhbmluZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBtZWFuaW5nc0xpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBtZWFuaW5nIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50V29yZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhbnN3ZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUM2MDhcdUJCMzggXHVCQzg4XHVDNUVEOicgfSk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50V29yZC5leGFtcGxlcy5mb3JFYWNoKGV4YW1wbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuc3dlckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBleGFtcGxlLmtvcmVhbiwgY2xzOiAndHJhbnNsYXRpb24nIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmV2aWV3QnV0dG9ucyhjYXJkRWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVJldmlld0J1dHRvbnMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHJldmlld1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmV2aWV3LWJ1dHRvbnMnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGhhcmRCdG4gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUM1QjRcdUI4MjRcdUM2QzAnLCBjbHM6ICdyZXZpZXctYnRuIGhhcmQnIH0pO1xyXG4gICAgICAgIGNvbnN0IGdvb2RCdG4gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUM4OEJcdUM3NEMnLCBjbHM6ICdyZXZpZXctYnRuIGdvb2QnIH0pO1xyXG4gICAgICAgIGNvbnN0IGVhc3lCdG4gPSByZXZpZXdTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUMyNkNcdUM2QzAnLCBjbHM6ICdyZXZpZXctYnRuIGVhc3knIH0pO1xyXG5cclxuICAgICAgICBoYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVSZXZpZXcoJ2hhcmQnKSk7XHJcbiAgICAgICAgZ29vZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlUmV2aWV3KCdnb29kJykpO1xyXG4gICAgICAgIGVhc3lCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZVJldmlldygnZWFzeScpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVJldmlldyhkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50V29yZCA9IHRoaXMud29yZHNbdGhpcy5jdXJyZW50SW5kZXhdO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkKGN1cnJlbnRXb3JkLndvcmQsIGRpZmZpY3VsdHkpO1xyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCsrO1xyXG4gICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPj0gdGhpcy53b3Jkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRXb3JkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50V29yZCA9IHRoaXMud29yZHNbdGhpcy5jdXJyZW50SW5kZXhdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAnXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQycsXHJcbiAgICAgICAgICAgIGBcIiR7Y3VycmVudFdvcmQud29yZH1cIiBcdUIyRThcdUM1QjRcdUI5N0MgXHVDMEFEXHVDODFDXHVENTU4XHVDMkRDXHVBQ0EwXHVDMkI1XHVCMkM4XHVBRTRDP1xcblxcblx1Qzc3NCBcdUM3OTFcdUM1QzVcdUM3NDAgXHVCNDE4XHVCM0NDXHVCOUI0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCxcclxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhYmFzZU1hbmFnZXIucmVtb3ZlV29yZChjdXJyZW50V29yZC53b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmRzLnNwbGljZSh0aGlzLmN1cnJlbnRJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud29yZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbXBsZXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPj0gdGhpcy53b3Jkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSB0aGlzLndvcmRzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0N1cnJlbnRXb3JkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQ6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNCBcdUMwQURcdUM4MUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Q29tcGxldGlvbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29tcGxldGlvbkVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbXBsZXRpb24nIH0pO1xyXG4gICAgICAgIGNvbXBsZXRpb25FbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUJDRjVcdUMyQjUgXHVDNjQ0XHVCOENDIScgfSk7XHJcbiAgICAgICAgY29tcGxldGlvbkVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUJDRjVcdUMyQjVcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBjb21wbGV0aW9uRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1QjJFQlx1QUUzMCcsIGNsczogJ2Nsb3NlLWJ0bicgfSk7XHJcbiAgICAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEZldGNoU2VsZWN0ZWRNZWFuaW5nc01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIHNlbGVjdGVkV29yZHM6IHN0cmluZ1tdO1xyXG4gICAgaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4sIHNlbGVjdGVkV29yZHM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkV29yZHMgPSBzZWxlY3RlZFdvcmRzO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2ZldGNoLXNlbGVjdGVkLW1lYW5pbmdzLW1vZGFsJyk7XHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiBgXHVDMTIwXHVEMEREXHVCNDFDICR7dGhpcy5zZWxlY3RlZFdvcmRzLmxlbmd0aH1cdUFDMUMgXHVCMkU4XHVDNUI0IFx1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBgLFxyXG4gICAgICAgICAgICBjbHM6ICdtb2RhbC10aXRsZSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgdGV4dDogYFx1QzEyMFx1RDBERFx1QjQxQyBcdUIyRThcdUM1QjRcdUI0RTRcdUM3NTggXHVDMEMxXHVDMTM4IFx1QzgxNVx1QkNGNFx1Qjk3QyBMTE0gQVBJXHVCOTdDIFx1RDFCNVx1RDU3NCBcdUFDMDBcdUM4MzhcdUM2MzVcdUIyQzhcdUIyRTQuYCxcclxuICAgICAgICAgICAgY2xzOiAnbW9kYWwtZGVzY3JpcHRpb24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmRMaXN0RWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VsZWN0ZWQtd29yZHMtbGlzdCcgfSk7XHJcbiAgICAgICAgd29yZExpc3RFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUMxMjBcdUQwRERcdUI0MUMgXHVCMkU4XHVDNUI0XHVCNEU0OicgfSk7XHJcbiAgICAgICAgY29uc3Qgd29yZHNDb250YWluZXIgPSB3b3JkTGlzdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3dvcmRzLWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFdvcmRzLmZvckVhY2god29yZCA9PiB7XHJcbiAgICAgICAgICAgIHdvcmRzQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IHdvcmQsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdzZWxlY3RlZC13b3JkLXRhZydcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGZldGNoQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjczQiBcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzAnLFxyXG4gICAgICAgICAgICBjbHM6ICdmZXRjaC1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZmV0Y2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hTZWxlY3RlZE1lYW5pbmdzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJvZ3Jlc3Mtc2VjdGlvbiBkaXNwbGF5LW5vbmUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IHByb2dyZXNzU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy10ZXh0JyB9KTtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc0JhciA9IHByb2dyZXNzU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1iYXInIH0pO1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzRmlsbCA9IHByb2dyZXNzQmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWZpbGwnIH0pO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHRTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1zZWN0aW9uIGRpc3BsYXktbm9uZScgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBmZXRjaFNlbGVjdGVkTWVhbmluZ3MoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2hvd1Byb2dyZXNzKHRoaXMuc2VsZWN0ZWRXb3Jkcy5sZW5ndGgpO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnBsdWdpbi5sbG1TZXJ2aWNlLmdldE11bHRpcGxlV29yZERldGFpbHModGhpcy5zZWxlY3RlZFdvcmRzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiBBcnJheS5pc0FycmF5KHJlc3VsdC5kYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc1dvcmRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmFpbGVkV29yZHM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkRGF0YSBvZiByZXN1bHQuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JkRGF0YS53b3JkICYmIHdvcmREYXRhLm1lYW5pbmdzICYmIHdvcmREYXRhLm1lYW5pbmdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nV29yZCA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRXb3JkKHdvcmREYXRhLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nV29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRXb3JkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZXhpc3RpbmdXb3JkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkRGF0YS5wcm9udW5jaWF0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWFuaW5nczogd29yZERhdGEubWVhbmluZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGF0YS5leGFtcGxlcyB8fCBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcldvcmRzOiB3b3JkRGF0YS5zaW1pbGFyV29yZHMgfHwgW11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci51cGRhdGVXb3JkRGF0YSh3b3JkRGF0YS53b3JkLCB1cGRhdGVkV29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc1dvcmRzLnB1c2god29yZERhdGEud29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRXb3Jkcy5wdXNoKHdvcmREYXRhLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkRGF0YS53b3JkfVwiIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOCBcdUMyRTRcdUQzMjg6YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRXb3Jkcy5wdXNoKHdvcmREYXRhLndvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVQcm9ncmVzcygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93UmVzdWx0cyh7IHN1Y2Nlc3M6IHN1Y2Nlc3NXb3JkcywgZmFpbGVkOiBmYWlsZWRXb3JkcyB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3NXb3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgJHtzdWNjZXNzV29yZHMubGVuZ3RofVx1QUMxQ1x1Qzc1OCBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQhYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVQcm9ncmVzcygpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTRcdUIzNzAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0OiAnICsgKHJlc3VsdC5lcnJvciB8fCAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4JykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0IFx1QzgxNVx1QkNGNFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTRcdUIzNzAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0OiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93UHJvZ3Jlc3ModG90YWxXb3JkczogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBcclxuICAgICAgICBwcm9ncmVzc1NlY3Rpb24ucmVtb3ZlQ2xhc3MoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5hZGRDbGFzcygnZGlzcGxheS1ibG9jaycpO1xyXG4gICAgICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IGBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0XHVCOTdDIFx1QUMwMFx1QzgzOFx1QzYyNFx1QjI5NCBcdUM5MTEuLi4gKDAvJHt0b3RhbFdvcmRzfSlgO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGlkZVByb2dyZXNzKCkge1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHByb2dyZXNzU2VjdGlvbikge1xyXG4gICAgICAgICAgICBwcm9ncmVzc1NlY3Rpb24ucmVtb3ZlQ2xhc3MoJ2Rpc3BsYXktYmxvY2snKTtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLmFkZENsYXNzKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93UmVzdWx0cyhyZXN1bHRzOiB7IHN1Y2Nlc3M6IHN0cmluZ1tdOyBmYWlsZWQ6IHN0cmluZ1tdIH0pIHtcclxuICAgICAgICBjb25zdCByZXN1bHRTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnJlc3VsdC1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5yZW1vdmVDbGFzcygnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5hZGRDbGFzcygnZGlzcGxheS1ibG9jaycpO1xyXG4gICAgICAgIHJlc3VsdFNlY3Rpb24uZW1wdHkoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3VtbWFyeUVsID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHRzLXN1bW1hcnknIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gc3VjY2VzcycgfSk7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3NFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNzA1IFx1QzEzMVx1QUNGNTogJHtyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RofVx1QUMxQ2AsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA8PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgc3VjY2Vzc0VsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLnN1Y2Nlc3Muam9pbignLCAnKSxcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtd29yZHMnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlc3VsdHMuZmFpbGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZmFpbGVkRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gZXJyb3InIH0pO1xyXG4gICAgICAgICAgICBmYWlsZWRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNzRDIFx1QzJFNFx1RDMyODogJHtyZXN1bHRzLmZhaWxlZC5sZW5ndGh9XHVBQzFDYCxcclxuICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC1jb3VudCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmZhaWxlZC5sZW5ndGggPD0gMTApIHtcclxuICAgICAgICAgICAgICAgIGZhaWxlZEVsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLmZhaWxlZC5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtYnV0dG9ucycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUIyRUJcdUFFMzAnLCBjbHM6ICdjbG9zZS1idXR0b24nIH0pO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1QUMwNFx1QjJFOFx1RDU1QyBcdUQ2NTVcdUM3NzggXHVCQUE4XHVCMkVDIFx1RDA3NFx1Qjc5OFx1QzJBNFxyXG5jbGFzcyBDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICB0aXRsZTogc3RyaW5nO1xyXG4gICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgb25Db25maXJtOiAoKSA9PiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0aXRsZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIG9uQ29uZmlybTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm07XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnY29uZmlybS1tb2RhbCcpO1xyXG5cclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLnRpdGxlLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0aGlzLm1lc3NhZ2UsIGNsczogJ21vZGFsLW1lc3NhZ2UnIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb25maXJtQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1RDY1NVx1Qzc3OCcsXHJcbiAgICAgICAgICAgIGNsczogJ2NvbmZpcm0tYnV0dG9uIHByaW1hcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkNvbmZpcm0oKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDREU4XHVDMThDJyxcclxuICAgICAgICAgICAgY2xzOiAnY2FuY2VsLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IFdvcmREYXRhIH0gZnJvbSAnLi4vLi4vVm9jYWJ1bGFyeUNhcmQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFdvcmRTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgYXBpQmFzZVVybCA9ICdodHRwczovL2FwaS5kaWN0aW9uYXJ5YXBpLmRldi9hcGkvdjIvZW50cmllcy9lbic7XHJcblxyXG4gICAgYXN5bmMgZ2V0V29yZERhdGEod29yZDogc3RyaW5nKTogUHJvbWlzZTxXb3JkRGF0YT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1QzJFNFx1QzgxQyBBUEkgXHVENjM4XHVDRDlDIFx1QjMwMFx1QzJFMCBcdUMwRDhcdUQ1MEMgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1QkMxOFx1RDY1OFxyXG4gICAgICAgICAgICAvLyBcdUMyRTRcdUM4MUMgXHVBRDZDXHVENjA0XHVDNUQwXHVDMTFDXHVCMjk0IERpY3Rpb25hcnkgQVBJXHVCMDk4IFx1QjJFNFx1Qjk3OCBBUElcdUI5N0MgXHVDMEFDXHVDNkE5XHVENTYwIFx1QzIxOCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTRcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2FtcGxlV29yZERhdGEod29yZCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHVCMkU4XHVDNUI0IFx1QjM3MFx1Qzc3NFx1RDEzMFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MjRcdUIyOTQgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXHVCMkU4XHVDNUI0IFx1QjM3MFx1Qzc3NFx1RDEzMFx1Qjk3QyBcdUFDMDBcdUM4MzhcdUM2MkMgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRTYW1wbGVXb3JkRGF0YSh3b3JkOiBzdHJpbmcpOiBXb3JkRGF0YSB7XHJcbiAgICAgICAgLy8gXHVDMEQ4XHVENTBDIFx1QjM3MFx1Qzc3NFx1RDEzMCAtIFx1QzJFNFx1QzgxQ1x1Qjg1Q1x1QjI5NCBBUElcdUM1RDBcdUMxMUMgXHVBQzAwXHVDODM4XHVDNjQwXHVDNTdDIFx1RDU2OFxyXG4gICAgICAgIGNvbnN0IHNhbXBsZURhdGE6IHsgW2tleTogc3RyaW5nXTogV29yZERhdGEgfSA9IHtcclxuICAgICAgICAgICAgJ2JlYXV0aWZ1bCc6IHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6ICdiZWF1dGlmdWwnLFxyXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJy9cdTAyQzhianVcdTAyRDB0XHUwMjZBZlx1MDI1OWwvJyxcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1QzU0NFx1Qjk4NFx1QjJFNFx1QzZCNCcsICdcdUM2MDhcdUMwNUMnLCAnXHVENkNDXHVCOTZEXHVENTVDJ10sXHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFsncHJldHR5JywgJ2dvcmdlb3VzJywgJ3N0dW5uaW5nJywgJ2F0dHJhY3RpdmUnXSxcclxuICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnU2hlIGlzIGEgYmVhdXRpZnVsIHdvbWFuLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QURGOFx1QjE0MFx1QjI5NCBcdUM1NDRcdUI5ODRcdUIyRTRcdUM2QjQgXHVDNUVDXHVDMTMxXHVDNzg1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1RoZSBzdW5zZXQgd2FzIGJlYXV0aWZ1bC4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUM3N0NcdUJBQjBcdUM3NzQgXHVDNTQ0XHVCOTg0XHVCMkU0XHVDNkUwXHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1doYXQgYSBiZWF1dGlmdWwgZGF5IScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QzgxNVx1QjlEMCBcdUM1NDRcdUI5ODRcdUIyRTRcdUM2QjQgXHVENTU4XHVCOEU4XHVCMTI0XHVDNjk0ISdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdoYXBweSc6IHtcclxuICAgICAgICAgICAgICAgIHdvcmQ6ICdoYXBweScsXHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiAnL1x1MDJDOGhcdTAwRTZwaS8nLFxyXG4gICAgICAgICAgICAgICAgbWVhbmluZ3M6IFsnXHVENTg5XHVCQ0Y1XHVENTVDJywgJ1x1QUUzMFx1QzA1QycsICdcdUM5OTBcdUFDNzBcdUM2QjQnXSxcclxuICAgICAgICAgICAgICAgIHNpbWlsYXJXb3JkczogWydqb3lmdWwnLCAnY2hlZXJmdWwnLCAnZ2xhZCcsICdwbGVhc2VkJ10sXHJcbiAgICAgICAgICAgICAgICBleGFtcGxlczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ0kgYW0gaGFwcHkgdG8gc2VlIHlvdS4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46ICdcdUIyRjlcdUMyRTBcdUM3NDQgXHVCOUNDXHVCMDk4XHVDMTFDIFx1QUUzMFx1QzA2OVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdTaGUgaGFzIGEgaGFwcHkgZmFtaWx5LicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QURGOFx1QjE0MFx1QjI5NCBcdUQ1ODlcdUJDRjVcdUQ1NUMgXHVBQzAwXHVDODcxXHVDNzQ0IFx1QUMwMFx1QzlDMFx1QUNFMCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiAnSGFwcHkgYmlydGhkYXkhJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAga29yZWFuOiAnXHVDMEREXHVDNzdDIFx1Q0Q5NVx1RDU1OFx1RDU2OVx1QjJDOFx1QjJFNCEnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnbGVhcm4nOiB7XHJcbiAgICAgICAgICAgICAgICB3b3JkOiAnbGVhcm4nLFxyXG4gICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJy9sXHUwMjVDXHUwMkQwcm4vJyxcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1QkMzMFx1QzZCMFx1QjJFNCcsICdcdUQ1NTlcdUMyQjVcdUQ1NThcdUIyRTQnLCAnXHVDNzc1XHVENzg4XHVCMkU0J10sXHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IFsnc3R1ZHknLCAnYWNxdWlyZScsICdncmFzcCcsICd1bmRlcnN0YW5kJ10sXHJcbiAgICAgICAgICAgICAgICBleGFtcGxlczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ0kgd2FudCB0byBsZWFybiBFbmdsaXNoLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QzgwMFx1QjI5NCBcdUM2MDFcdUM1QjRcdUI5N0MgXHVCQzMwXHVDNkIwXHVBQ0UwIFx1QzJGNlx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6ICdDaGlsZHJlbiBsZWFybiBxdWlja2x5LicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QzU0NFx1Qzc3NFx1QjRFNFx1Qzc0MCBcdUJFNjhcdUI5QUMgXHVCQzMwXHVDNkMxXHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5nbGlzaDogJ1lvdSBjYW4gbGVhcm4gZnJvbSB5b3VyIG1pc3Rha2VzLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvcmVhbjogJ1x1QzJFNFx1QzIxOFx1Qjg1Q1x1QkQ4MFx1RDEzMCBcdUJDMzBcdUM2QjggXHVDMjE4IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gXHVDNzg1XHVCODI1XHVCNDFDIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUMwRDhcdUQ1MEMgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNUQwIFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUJDMThcdUQ2NTgsIFx1QzVDNlx1QzczQ1x1QkE3NCBcdUFFMzBcdUJDRjggXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzBERFx1QzEzMVxyXG4gICAgICAgIGlmIChzYW1wbGVEYXRhW3dvcmQudG9Mb3dlckNhc2UoKV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZURhdGFbd29yZC50b0xvd2VyQ2FzZSgpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QUUzMFx1QkNGOCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCQzE4XHVENjU4XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd29yZDogd29yZCxcclxuICAgICAgICAgICAgcHJvbnVuY2lhdGlvbjogJy9wcm9udW5jaWF0aW9uLycsXHJcbiAgICAgICAgICAgIG1lYW5pbmdzOiBbJ1x1Qzc1OFx1QkJGOFx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nXSxcclxuICAgICAgICAgICAgc2ltaWxhcldvcmRzOiBbXSxcclxuICAgICAgICAgICAgZXhhbXBsZXM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmdsaXNoOiBgVGhpcyBpcyBhbiBleGFtcGxlIHNlbnRlbmNlIHdpdGggdGhlIHdvcmQgXCIke3dvcmR9XCIuYCxcclxuICAgICAgICAgICAgICAgICAgICBrb3JlYW46IGBcIiR7d29yZH1cIlx1Qjc3Q1x1QjI5NCBcdUIyRThcdUM1QjRcdUFDMDAgXHVEM0VDXHVENTY4XHVCNDFDIFx1QzYwOFx1QkIzOFx1Qzc4NVx1QjJDOFx1QjJFNC5gXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzJFNFx1QzgxQyBBUEkgXHVENjM4XHVDRDlDXHVDNzQ0IFx1QzcwNFx1RDU1QyBcdUJBNTRcdUMxMUNcdUI0REMgKFx1RDVBNVx1RDZDNCBcdUFENkNcdUQ2MDQpXHJcbiAgICBwcml2YXRlIGFzeW5jIGZldGNoRnJvbUFQSSh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5hcGlCYXNlVXJsfS8ke3dvcmR9YCk7XHJcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFQSSBcdUM2OTRcdUNDQUQgXHVDMkU0XHVEMzI4OiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4gZnJvbSAnLi4vLi4vLi4vbWFpbic7XHJcblxyXG5leHBvcnQgY2xhc3MgQWRkQm9va01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnYWRkLWJvb2stbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVDODFDXHVCQUE5XHJcbiAgICAgICAgY29uc3QgdGl0bGVFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVDRDk0XHVBQzAwJywgY2xzOiAnbW9kYWwtdGl0bGUnIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzEyNFx1QkE4NVxyXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVDMEM4XHVCODVDXHVDNkI0IFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc0NCBcdUMwRERcdUMxMzFcdUQ1NjlcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICAgICAgY2xzOiAnbW9kYWwtZGVzY3JpcHRpb24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1Qzc4NVx1QjgyNSBcdUQzRkNcclxuICAgICAgICBjb25zdCBmb3JtRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2Zvcm0nLCB7IGNsczogJ2Jvb2stZm9ybScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NCBcdUM3ODVcdUI4MjVcclxuICAgICAgICBjb25zdCBuYW1lU2VjdGlvbiA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JtLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIGNvbnN0IG5hbWVMYWJlbCA9IG5hbWVTZWN0aW9uLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0IConLFxyXG4gICAgICAgICAgICBjbHM6ICdmb3JtLWxhYmVsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IG5hbWVJbnB1dCA9IG5hbWVTZWN0aW9uLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1x1QzYwODogVE9FSUMgXHVCMkU4XHVDNUI0XHVDN0E1LCBcdUM3N0NcdUMwQzFcdUMwRERcdUQ2NUMgXHVCMkU4XHVDNUI0XHVDN0E1JyxcclxuICAgICAgICAgICAgY2xzOiAnZm9ybS1pbnB1dCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBuYW1lSW5wdXQucmVxdWlyZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTI0XHVCQTg1IFx1Qzc4NVx1QjgyNVxyXG4gICAgICAgIGNvbnN0IGRlc2NTZWN0aW9uID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Zvcm0tc2VjdGlvbicgfSk7XHJcbiAgICAgICAgY29uc3QgZGVzY0xhYmVsID0gZGVzY1NlY3Rpb24uY3JlYXRlRWwoJ2xhYmVsJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QzEyNFx1QkE4NSAoXHVDMTIwXHVEMEREXHVDMEFDXHVENTZEKScsXHJcbiAgICAgICAgICAgIGNsczogJ2Zvcm0tbGFiZWwnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgZGVzY0lucHV0ID0gZGVzY1NlY3Rpb24uY3JlYXRlRWwoJ3RleHRhcmVhJywge1xyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1QzVEMCBcdUIzMDBcdUQ1NUMgXHVDMTI0XHVCQTg1XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4nLFxyXG4gICAgICAgICAgICBjbHM6ICdmb3JtLXRleHRhcmVhJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlc2NJbnB1dC5yb3dzID0gMztcclxuXHJcbiAgICAgICAgLy8gXHVCQzg0XHVEMkJDIFx1QzYwMVx1QzVFRFxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblNlY3Rpb24gPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNyZWF0ZUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxJyxcclxuICAgICAgICAgICAgY2xzOiAnY3JlYXRlLWJ1dHRvbiBwcmltYXJ5JyxcclxuICAgICAgICAgICAgdHlwZTogJ3N1Ym1pdCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uU2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1Q0RFOFx1QzE4QycsXHJcbiAgICAgICAgICAgIGNsczogJ2NhbmNlbC1idXR0b24nLFxyXG4gICAgICAgICAgICB0eXBlOiAnYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG4gICAgICAgIC8vIFx1RDNGQyBcdUM4MUNcdUNEOUMgXHVDNzc0XHVCQ0E0XHVEMkI4XHJcbiAgICAgICAgZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFzeW5jIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVCb29rKG5hbWVJbnB1dC52YWx1ZS50cmltKCksIGRlc2NJbnB1dC52YWx1ZS50cmltKCkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBFbnRlciBcdUQwQTRcdUI4NUMgXHVDODFDXHVDRDlDIFx1QUMwMFx1QjJBNVx1RDU1OFx1QjNDNFx1Qjg1RFxyXG4gICAgICAgIG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBmb3JtRWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3N1Ym1pdCcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUQzRUNcdUNFRTRcdUMyQTQgXHVDMTI0XHVDODE1XHJcbiAgICAgICAgbmFtZUlucHV0LmZvY3VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVCb29rKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZykge1xyXG4gICAgICAgIGlmICghbmFtZS50cmltKCkpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBcdUIyRThcdUM1QjRcdUM3QTVcdUFDRkMgXHVDNzc0XHVCOTg0IFx1QzkxMVx1QkNGNSBcdUQ2NTVcdUM3NzhcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdCb29rcyA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxCb29rcygpO1xyXG4gICAgICAgICAgICBjb25zdCBpc0R1cGxpY2F0ZSA9IGV4aXN0aW5nQm9va3Muc29tZShib29rID0+IFxyXG4gICAgICAgICAgICAgICAgYm9vay5uYW1lICYmIHR5cGVvZiBib29rLm5hbWUgPT09ICdzdHJpbmcnICYmIFxyXG4gICAgICAgICAgICAgICAgYm9vay5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzRHVwbGljYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0IFx1QjJFOFx1QzVCNFx1QzdBNSBcdUM3NzRcdUI5ODRcdUM3ODVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzFcclxuICAgICAgICAgICAgY29uc3QgbmV3Qm9vayA9IGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5jcmVhdGVCb29rKG5hbWUsIGRlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFwiJHtuYW1lfVwiIFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc3NCBcdUMxMzFcdUFDRjVcdUM4MDFcdUM3M0NcdUI4NUMgXHVDMEREXHVDMTMxXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0IWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCQUE4XHVCMkVDIFx1QjJFQlx1QUUzMFxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUJBQThcdUI0RTAgXHVCQUE4XHVCMkVDXHVDNUQwXHVDMTFDIFx1QzIxOFx1QzJFMFx1RDU2MCBcdUMyMTggXHVDNzg4XHVCM0M0XHVCODVEIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUJDMUNcdUMwRERcclxuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2Jvb2tDcmVhdGVkJywgeyBkZXRhaWw6IG5ld0Jvb2sgfSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMwRERcdUMxMzFcdUM1RDAgXHVDMkU0XHVEMzI4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcclxuaW1wb3J0IHsgV29yZFNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9leHRlcm5hbC9Xb3JkU2VydmljZSc7XHJcbmltcG9ydCB7IEFkZEJvb2tNb2RhbCB9IGZyb20gJy4uLy4uL2Jvb2stbWFuYWdlbWVudC91aS9BZGRCb29rTW9kYWwnO1xyXG5pbXBvcnQgeyB2YWxpZGF0ZVdvcmQsIHZhbGlkYXRlQmF0Y2gsIHNhbml0aXplTWFya2Rvd24gfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvdmFsaWRhdGlvbic7XHJcbmltcG9ydCB7IENhbmNlbGxhdGlvblRva2VuU291cmNlLCBDYW5jZWxsYXRpb25FcnJvciwgcHJvY2Vzc0JhdGNoV2l0aENhbmNlbGxhdGlvbiB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9DYW5jZWxsYXRpb25Ub2tlbic7XHJcbmltcG9ydCB7IGdldENvbmZpZ1ZhbHVlLCBDT05GSUdfUEFUSFMgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvQ29uZmlnJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRXb3Jkc01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBFbmdsaXNoVm9jYWJ1bGFyeVBsdWdpbjtcclxuICAgIHdvcmRTZXJ2aWNlOiBXb3JkU2VydmljZTtcclxuICAgIGlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBib29rU2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgIHByaXZhdGUgY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2U6IENhbmNlbGxhdGlvblRva2VuU291cmNlIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkQm9va0lkOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW5nbGlzaFZvY2FidWxhcnlQbHVnaW4sIHNlbGVjdGVkQm9va0lkPzogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLndvcmRTZXJ2aWNlID0gbmV3IFdvcmRTZXJ2aWNlKCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2tJZCA9IHNlbGVjdGVkQm9va0lkIHx8ICdkZWZhdWx0JztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdhZGQtd29yZHMtbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1Q0Q1Q1x1QzJFMCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG5cclxuICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMTIwXHVEMEREIFx1QjREQ1x1Qjg2RFx1QjJFNFx1QzZCNFxyXG4gICAgICAgIGNvbnN0IGJvb2tTZWxlY3RTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Jvb2stc2VsZWN0LXNlY3Rpb24nIH0pO1xyXG4gICAgICAgIGNvbnN0IGJvb2tMYWJlbCA9IGJvb2tTZWxlY3RTZWN0aW9uLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjBcdUQwREQnLCBjbHM6ICdib29rLXNlbGVjdC1sYWJlbCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYm9va1NlbGVjdENvbnRhaW5lciA9IGJvb2tTZWxlY3RTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Jvb2stc2VsZWN0LWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgdGhpcy5ib29rU2VsZWN0ID0gYm9va1NlbGVjdENvbnRhaW5lci5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdib29rLXNlbGVjdC1kcm9wZG93bicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1Q0Q5NFx1QUMwMCBcdUJDODRcdUQyQkNcclxuICAgICAgICBjb25zdCBhZGRCb29rQnV0dG9uID0gYm9va1NlbGVjdENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Q0Q5NFx1QUMwMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2FkZC1ib29rLWJ1dHRvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICBhZGRCb29rQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5vcGVuQWRkQm9va01vZGFsKCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQm9va1NlbGVjdCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuYm9va1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEJvb2tJZCA9IChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rSWQgPSBzZWxlY3RlZEJvb2tJZDtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLnNldEN1cnJlbnRCb29rKHNlbGVjdGVkQm9va0lkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMSBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYm9va0NyZWF0ZWQnLCB0aGlzLmhhbmRsZUJvb2tDcmVhdGVkLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAvLyBcdUM4MUNcdUJBQTlcclxuICAgICAgICBjb25zdCB0aXRsZUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1QjJFOFx1QzVCNCBcdUNEOTRcdUFDMDAnLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMTI0XHVCQTg1XHJcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNEOTRcdUFDMDBcdUQ1NjAgXHVDNjAxXHVCMkU4XHVDNUI0XHVCNEU0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC4gXHVBQzAxIFx1QjJFOFx1QzVCNFx1QjI5NCBcdUMwQzggXHVDOTA0XHVCODVDIFx1QUQ2Q1x1QkQ4NFx1QjQyOVx1QjJDOFx1QjJFNC4nLFxyXG4gICAgICAgICAgICBjbHM6ICdtb2RhbC1kZXNjcmlwdGlvbidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVDNzg1XHVCODI1IFx1QzYwMVx1QzVFRFxyXG4gICAgICAgIGNvbnN0IGlucHV0U2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdpbnB1dC1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGlucHV0U2VjdGlvbi5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnYmVhdXRpZnVsXFxuaGFwcHlcXG5sZWFyblxcbnN0dWR5XFxud29ya1xcbi4uLicsXHJcbiAgICAgICAgICAgIGNsczogJ3dvcmRzLXRleHRhcmVhJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZSgncm93cycsICcxMCcpO1xyXG5cclxuICAgICAgICAvLyBcdUM2MDhcdUMyREMgXHVCQzg0XHVEMkJDXHJcbiAgICAgICAgY29uc3QgZXhhbXBsZUJ0biA9IGlucHV0U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QzYwOFx1QzJEQyBcdUIyRThcdUM1QjRcdUI0RTQgXHVCRDg4XHVCN0VDXHVDNjI0XHVBRTMwJyxcclxuICAgICAgICAgICAgY2xzOiAnZXhhbXBsZS1idXR0b24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXhhbXBsZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSAnYmVhdXRpZnVsXFxuaGFwcHlcXG5sZWFyblxcbnN0dWR5XFxud29ya1xcbmltcG9ydGFudFxcbnN1Y2Nlc3NcXG5rbm93bGVkZ2VcXG5leHBlcmllbmNlXFxuZnJlZWRvbSc7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QkM4NFx1RDJCQyBcdUM2MDFcdUM1RURcclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1zZWN0aW9uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkU4XHVDNUI0IFx1Q0Q5NFx1QUMwMCcsXHJcbiAgICAgICAgICAgIGNsczogJ2FkZC1idXR0b24gcHJpbWFyeSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmFkZFdvcmRzKHRleHRhcmVhLnZhbHVlLCB0aGlzLnNlbGVjdGVkQm9va0lkKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUNERThcdUMxOEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbE9wZXJhdGlvbigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1QzlDNFx1RDU4OSBcdUMwQzFcdUQ2NjkgXHVENDVDXHVDMkRDIFx1QzYwMVx1QzVFRFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1zZWN0aW9uIGRpc3BsYXktbm9uZScgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NTZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NThcdUIyOTQgXHVDOTExLi4uJyxcclxuICAgICAgICAgICAgY2xzOiAncHJvZ3Jlc3MtdGV4dCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwcm9ncmVzc0JhciA9IHByb2dyZXNzU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcm9ncmVzcy1iYXInIH0pO1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzRmlsbCA9IHByb2dyZXNzQmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Byb2dyZXNzLWZpbGwnIH0pO1xyXG5cclxuICAgICAgICAvLyBcdUFDQjBcdUFDRkMgXHVENDVDXHVDMkRDIFx1QzYwMVx1QzVFRFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LXNlY3Rpb24gZGlzcGxheS1ub25lJyB9KTtcclxuXHJcbiAgICAgICAgLy8gRW50ZXIgXHVEMEE0XHVCODVDIFx1Q0Q5NFx1QUMwMCBcdUFDMDBcdUIyQTVcdUQ1NThcdUIzQzRcdUI4NURcclxuICAgICAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUuY3RybEtleSAmJiBlLmtleSA9PT0gJ0VudGVyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRXb3Jkcyh0ZXh0YXJlYS52YWx1ZSwgdGhpcy5zZWxlY3RlZEJvb2tJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVEM0VDXHVDRUU0XHVDMkE0IFx1QzEyNFx1QzgxNVxyXG4gICAgICAgIHRleHRhcmVhLmZvY3VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBhZGRXb3JkcyhpbnB1dFRleHQ6IHN0cmluZywgYm9va0lkOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSB0aGlzLnBhcnNlV29yZHMoaW5wdXRUZXh0KTtcclxuICAgICAgICBpZiAod29yZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Q0Q5NFx1QUMwMFx1RDU2MCBcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZSA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xyXG4gICAgICAgIHRoaXMuc2hvd1Byb2dyZXNzKHdvcmRzLmxlbmd0aCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVDYW5jZWxCdXR0b24odHJ1ZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IFtdIGFzIHN0cmluZ1tdLFxyXG4gICAgICAgICAgICBmYWlsZWQ6IFtdIGFzIHN0cmluZ1tdLFxyXG4gICAgICAgICAgICBhbHJlYWR5RXhpc3RzOiBbXSBhcyBzdHJpbmdbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NCYXRjaFdpdGhDYW5jZWxsYXRpb24oXHJcbiAgICAgICAgICAgICAgICB3b3JkcyxcclxuICAgICAgICAgICAgICAgIGFzeW5jICh3b3JkOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0XHVDOUMwIFx1RDY1NVx1Qzc3OFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nV29yZCA9IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5nZXRXb3JkKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1dvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5hbHJlYWR5RXhpc3RzLnB1c2god29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmREYXRhID0gYXdhaXQgdGhpcy53b3JkU2VydmljZS5nZXRXb3JkRGF0YSh3b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdvcmREYXRhXHVCOTdDIFZvY2FidWxhcnlDYXJkXHVCODVDIFx1QkNDMFx1RDY1OFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2b2NhYnVsYXJ5Q2FyZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLndvcmREYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3Q291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5OiAnZ29vZCcgYXMgY29uc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tJZDogYm9va0lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTRcdUM1RDAgXHVDRDk0XHVBQzAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFiYXNlTWFuYWdlci5hZGRXb3JkKHZvY2FidWxhcnlDYXJkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5zdWNjZXNzLnB1c2god29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh3b3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkfVwiIFx1Q0Q5NFx1QUMwMCBcdUMyRTRcdUQzMjg6YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hTaXplOiBnZXRDb25maWdWYWx1ZTxudW1iZXI+KENPTkZJR19QQVRIUy5CQVRDSF9ERUZBVUxUX1NJWkUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5OiBnZXRDb25maWdWYWx1ZTxudW1iZXI+KENPTkZJR19QQVRIUy5CQVRDSF9ERUxBWSksXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW46IHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UudG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgb25Qcm9ncmVzczogKGN1cnJlbnQsIHRvdGFsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3MoY3VycmVudCwgdG90YWwsIGBcdUNDOThcdUI5QUMgXHVDOTExLi4uICgke2N1cnJlbnR9LyR7dG90YWx9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBDYW5jZWxsYXRpb25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVDNzkxXHVDNUM1XHVDNzc0IFx1Q0RFOFx1QzE4Q1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QkMzMFx1Q0U1OCBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZT8uZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDYW5jZWxCdXR0b24oZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dSZXN1bHRzKHJlc3VsdHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlV29yZHMoaW5wdXRUZXh0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgLy8gXHVDNzg1XHVCODI1IFx1RDE0RFx1QzJBNFx1RDJCOCBcdUM4MTVcdUM4MUNcclxuICAgICAgICBjb25zdCBzYW5pdGl6ZWRJbnB1dCA9IHNhbml0aXplTWFya2Rvd24oaW5wdXRUZXh0KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByYXdXb3JkcyA9IHNhbml0aXplZElucHV0XHJcbiAgICAgICAgICAgIC5zcGxpdCgnXFxuJylcclxuICAgICAgICAgICAgLm1hcCh3b3JkID0+IHdvcmQudHJpbSgpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5sZW5ndGggPiAwKTtcclxuXHJcbiAgICAgICAgLy8gXHVCMkU4XHVDNUI0IFx1QUM4MFx1Qzk5RCBcdUJDMEYgXHVDODE1XHVDODFDXHJcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlQmF0Y2gocmF3V29yZHMsICh3b3JkKSA9PiB2YWxpZGF0ZVdvcmQod29yZCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzcyMFx1RDZBOFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NDAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUMwQUNcdUM2QTlcdUM3OTBcdUM1RDBcdUFDOEMgXHVDNTRDXHVCOUJDXHJcbiAgICAgICAgaWYgKHZhbGlkYXRpb24uaW52YWxpZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmFsaWRXb3JkcyA9IHZhbGlkYXRpb24uaW52YWxpZC5zbGljZSgwLCA1KS5tYXAoaXRlbSA9PiBpdGVtLml0ZW0pLmpvaW4oJywgJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vcmVDb3VudCA9IHZhbGlkYXRpb24uaW52YWxpZC5sZW5ndGggPiA1ID8gYCBcdUM2NzggJHt2YWxpZGF0aW9uLmludmFsaWQubGVuZ3RoIC0gNX1cdUFDMUNgIDogJyc7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1QzcyMFx1RDZBOFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NDAgXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzgxQ1x1QzY3OFx1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNDogJHtpbnZhbGlkV29yZHN9JHttb3JlQ291bnR9YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUM3MjBcdUQ2QThcdUQ1NUMgXHVCMkU4XHVDNUI0XHVCNEU0XHVCOUNDIFx1QkMxOFx1RDY1OCAoXHVDOTExXHVCQ0Y1IFx1QzgxQ1x1QUM3MClcclxuICAgICAgICBjb25zdCB2YWxpZFdvcmRzID0gdmFsaWRhdGlvbi52YWxpZFxyXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gdmFsaWRhdGVXb3JkKHdvcmQpLnNhbml0aXplZCEpXHJcbiAgICAgICAgICAgIC5tYXAod29yZCA9PiB3b3JkLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKHdvcmQsIGluZGV4LCBhcnJheSkgPT4gYXJyYXkuaW5kZXhPZih3b3JkKSA9PT0gaW5kZXgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdmFsaWRXb3JkcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dQcm9ncmVzcyh0b3RhbFdvcmRzOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1NlY3Rpb24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3Mtc2VjdGlvbicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IHByb2dyZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3MtdGV4dCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHByb2dyZXNzU2VjdGlvbi5yZW1vdmVDbGFzcygnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLmFkZENsYXNzKCdkaXNwbGF5LWJsb2NrJyk7XHJcbiAgICAgICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYFx1QjJFOFx1QzVCNFx1Qjk3QyBcdUNEOTRcdUFDMDBcdUQ1NThcdUIyOTQgXHVDOTExLi4uICgwLyR7dG90YWxXb3Jkc30pYDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVByb2dyZXNzKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXNlY3Rpb24nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc0ZpbGwgPSBwcm9ncmVzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLWZpbGwnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gKGN1cnJlbnQgLyB0b3RhbCkgKiAxMDA7XHJcbiAgICAgICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYCR7bWVzc2FnZX0gKCR7Y3VycmVudH0vJHt0b3RhbH0pYDtcclxuICAgICAgICBwcm9ncmVzc0ZpbGwuc3R5bGUud2lkdGggPSBgJHtwZXJjZW50YWdlfSVgO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGlkZVByb2dyZXNzKCkge1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLnJlbW92ZUNsYXNzKCdkaXNwbGF5LWJsb2NrJyk7XHJcbiAgICAgICAgcHJvZ3Jlc3NTZWN0aW9uLmFkZENsYXNzKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dSZXN1bHRzKHJlc3VsdHM6IHsgc3VjY2Vzczogc3RyaW5nW107IGZhaWxlZDogc3RyaW5nW107IGFscmVhZHlFeGlzdHM6IHN0cmluZ1tdIH0pIHtcclxuICAgICAgICBjb25zdCByZXN1bHRTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnJlc3VsdC1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5yZW1vdmVDbGFzcygnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgcmVzdWx0U2VjdGlvbi5hZGRDbGFzcygnZGlzcGxheS1ibG9jaycpO1xyXG4gICAgICAgIHJlc3VsdFNlY3Rpb24uZW1wdHkoKTtcclxuXHJcbiAgICAgICAgY29uc3QgdG90YWxQcm9jZXNzZWQgPSByZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoICsgcmVzdWx0cy5mYWlsZWQubGVuZ3RoICsgcmVzdWx0cy5hbHJlYWR5RXhpc3RzLmxlbmd0aDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUFDQjBcdUFDRkMgXHVDNjk0XHVDNTdEXHJcbiAgICAgICAgY29uc3Qgc3VtbWFyeUVsID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHRzLXN1bW1hcnknIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gc3VjY2VzcycgfSk7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3NFbC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNzA1IFx1QzEzMVx1QUNGNTogJHtyZXN1bHRzLnN1Y2Nlc3MubGVuZ3RofVx1QUMxQ2AsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA8PSA1KSB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdHMuc3VjY2Vzcy5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVzdWx0cy5hbHJlYWR5RXhpc3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RzRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncmVzdWx0LWl0ZW0gd2FybmluZycgfSk7XHJcbiAgICAgICAgICAgIGV4aXN0c0VsLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI2QTBcdUZFMEYgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQzogJHtyZXN1bHRzLmFscmVhZHlFeGlzdHMubGVuZ3RofVx1QUMxQ2AsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5hbHJlYWR5RXhpc3RzLmxlbmd0aCA8PSA1KSB7XHJcbiAgICAgICAgICAgICAgICBleGlzdHNFbC5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0cy5hbHJlYWR5RXhpc3RzLmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAncmVzdWx0LXdvcmRzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZXN1bHRzLmZhaWxlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhaWxlZEVsID0gc3VtbWFyeUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Jlc3VsdC1pdGVtIGVycm9yJyB9KTtcclxuICAgICAgICAgICAgZmFpbGVkRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1Mjc0QyBcdUMyRTRcdUQzMjg6ICR7cmVzdWx0cy5mYWlsZWQubGVuZ3RofVx1QUMxQ2AsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdyZXN1bHQtY291bnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5mYWlsZWQubGVuZ3RoIDw9IDUpIHtcclxuICAgICAgICAgICAgICAgIGZhaWxlZEVsLmNyZWF0ZUVsKCdwJywgeyBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHRzLmZhaWxlZC5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3Jlc3VsdC13b3JkcydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUJDODRcdUQyQkNcdUI0RTRcclxuICAgICAgICBjb25zdCBidXR0b25TZWN0aW9uID0gcmVzdWx0U2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZXN1bHQtYnV0dG9ucycgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBidXR0b25TZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHVCMkVCXHVBRTMwJyxcclxuICAgICAgICAgICAgY2xzOiAnY2xvc2UtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkTW9yZUJ1dHRvbiA9IGJ1dHRvblNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUIzNTQgXHVDRDk0XHVBQzAwXHVENTU4XHVBRTMwJyxcclxuICAgICAgICAgICAgY2xzOiAnYWRkLW1vcmUtYnV0dG9uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFkZE1vcmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc3VsdFNlY3Rpb24ucmVtb3ZlQ2xhc3MoJ2Rpc3BsYXktYmxvY2snKTtcclxuICAgICAgICAgICAgcmVzdWx0U2VjdGlvbi5hZGRDbGFzcygnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHRhcmVhID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLndvcmRzLXRleHRhcmVhJykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHVDMTMxXHVBQ0Y1XHVENTVDIFx1QjJFOFx1QzVCNFx1QUMwMCBcdUM3ODhcdUM3M0NcdUJBNzQgXHVDNTRDXHVCOUJDXHJcbiAgICAgICAgaWYgKHJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYCR7cmVzdWx0cy5zdWNjZXNzLmxlbmd0aH1cdUFDMUNcdUM3NTggXHVCMkU4XHVDNUI0XHVBQzAwIFx1QzEzMVx1QUNGNVx1QzgwMVx1QzczQ1x1Qjg1QyBcdUNEOTRcdUFDMDBcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQhYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FuY2VsT3BlcmF0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Qzc5MVx1QzVDNSBcdUNERThcdUMxOEMgXHVDOTExLi4uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQ2FuY2VsQnV0dG9uKGlzUHJvY2Vzc2luZzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKGNhbmNlbEJ1dHRvbikge1xyXG4gICAgICAgICAgICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSBpc1Byb2Nlc3NpbmcgPyAnXHVDNzkxXHVDNUM1IFx1Q0RFOFx1QzE4QycgOiAnXHVDREU4XHVDMThDJztcclxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2RhbmdlcicsIGlzUHJvY2Vzc2luZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgLy8gXHVDOUM0XHVENTg5IFx1QzkxMVx1Qzc3OCBcdUM3OTFcdUM1QzUgXHVDREU4XHVDMThDXHJcbiAgICAgICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nICYmIHRoaXMuY2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZS5jYW5jZWwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNhbmNlbGxhdGlvblRva2VuU291cmNlPy5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxsYXRpb25Ub2tlblNvdXJjZSA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUM4MUNcdUFDNzBcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdib29rQ3JlYXRlZCcsIHRoaXMuaGFuZGxlQm9va0NyZWF0ZWQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvcGVuQWRkQm9va01vZGFsKCkge1xyXG4gICAgICAgIG5ldyBBZGRCb29rTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKS5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVCb29rQ3JlYXRlZChldmVudDogQ3VzdG9tRXZlbnQpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUJvb2tTZWxlY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUJvb2tTZWxlY3QoKSB7XHJcbiAgICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0XHVDNUQwXHVDMTFDIFx1Q0Q1Q1x1QzJFMCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmxvYWRBbGxCb29rcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGJvb2tzID0gdGhpcy5wbHVnaW4uZGF0YWJhc2VNYW5hZ2VyLmdldEFsbEJvb2tzKCk7XHJcbiAgICAgICAgdGhpcy5ib29rU2VsZWN0LmVtcHR5KCk7XHJcbiAgICAgICAgYm9va3MuZm9yRWFjaChib29rID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGJvb2suaWQ7XHJcbiAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gYm9vay5uYW1lO1xyXG4gICAgICAgICAgICBpZiAoYm9vay5pZCA9PT0gdGhpcy5zZWxlY3RlZEJvb2tJZCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmJvb2tTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSAiLCAiLy8gXHVDNzg1XHVCODI1IFx1QUM4MFx1Qzk5RCBcdUJDMEYgXHVDODE1XHVDODFDIFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMFxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0aW9uUmVzdWx0IHtcclxuICAgIGlzVmFsaWQ6IGJvb2xlYW47XHJcbiAgICBlcnJvcj86IHN0cmluZztcclxuICAgIHNhbml0aXplZD86IHN0cmluZztcclxufVxyXG5cclxuLy8gXHVCQjM4XHVDNzkwXHVDNUY0IFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OURcclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlU3RyaW5nKGlucHV0OiBzdHJpbmcsIG9wdGlvbnM6IHtcclxuICAgIG1pbkxlbmd0aD86IG51bWJlcjtcclxuICAgIG1heExlbmd0aD86IG51bWJlcjtcclxuICAgIGFsbG93RW1wdHk/OiBib29sZWFuO1xyXG4gICAgcGF0dGVybj86IFJlZ0V4cDtcclxuICAgIGZpZWxkTmFtZT86IHN0cmluZztcclxufSA9IHt9KTogVmFsaWRhdGlvblJlc3VsdCB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgICAgbWluTGVuZ3RoID0gMCxcclxuICAgICAgICBtYXhMZW5ndGggPSAxMDAwLFxyXG4gICAgICAgIGFsbG93RW1wdHkgPSBmYWxzZSxcclxuICAgICAgICBwYXR0ZXJuLFxyXG4gICAgICAgIGZpZWxkTmFtZSA9ICdcdUM3ODVcdUI4MjVcdUFDMTInXHJcbiAgICB9ID0gb3B0aW9ucztcclxuXHJcbiAgICBpZiAoIWlucHV0IHx8IGlucHV0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBpZiAoYWxsb3dFbXB0eSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBzYW5pdGl6ZWQ6ICcnIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogYCR7ZmllbGROYW1lfVx1Qzc0MChcdUIyOTQpIFx1RDU0NFx1QzIxOCBcdUM3ODVcdUI4MjVcdUFDMTJcdUM3ODVcdUIyQzhcdUIyRTQuYCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRyaW1tZWQgPSBpbnB1dC50cmltKCk7XHJcblxyXG4gICAgaWYgKHRyaW1tZWQubGVuZ3RoIDwgbWluTGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLCBcclxuICAgICAgICAgICAgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NDAoXHVCMjk0KSBcdUNENUNcdUMxOEMgJHttaW5MZW5ndGh9XHVDNzkwIFx1Qzc3NFx1QzBDMVx1Qzc3NFx1QzVCNFx1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuYCBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0cmltbWVkLmxlbmd0aCA+IG1heExlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSwgXHJcbiAgICAgICAgICAgIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgXHVDRDVDXHVCMzAwICR7bWF4TGVuZ3RofVx1Qzc5MCBcdUM3NzRcdUQ1NThcdUM1RUNcdUM1N0MgXHVENTY5XHVCMkM4XHVCMkU0LmAgXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocGF0dGVybiAmJiAhcGF0dGVybi50ZXN0KHRyaW1tZWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLCBcclxuICAgICAgICAgICAgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NTggXHVENjE1XHVDMkREXHVDNzc0IFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTQuYCBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIHNhbml0aXplZDogdHJpbW1lZCB9O1xyXG59XHJcblxyXG4vLyBBUEkgXHVEMEE0IFx1QUM4MFx1Qzk5RFxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVBcGlLZXkoYXBpS2V5OiBzdHJpbmcsIHByb3ZpZGVyOiBzdHJpbmcpOiBWYWxpZGF0aW9uUmVzdWx0IHtcclxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZVN0cmluZyhhcGlLZXksIHtcclxuICAgICAgICBtaW5MZW5ndGg6IDEwLFxyXG4gICAgICAgIG1heExlbmd0aDogMjAwLFxyXG4gICAgICAgIGZpZWxkTmFtZTogYCR7cHJvdmlkZXJ9IEFQSSBcdUQwQTRgXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xyXG4gICAgICAgIHJldHVybiB2YWxpZGF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QUMwMSBcdUM4MUNcdUFDRjVcdUM1QzVcdUNDQjRcdUJDQzQgQVBJIFx1RDBBNCBcdUQ2MTVcdUMyREQgXHVBQzgwXHVDOTlEXHJcbiAgICBjb25zdCBwYXR0ZXJucyA9IHtcclxuICAgICAgICBvcGVuYWk6IC9ec2stW2EtekEtWjAtOV17NDgsfSQvLFxyXG4gICAgICAgIGFudGhyb3BpYzogL15zay1hbnQtW2EtekEtWjAtOS1fXXs5NSx9JC8sXHJcbiAgICAgICAgZ29vZ2xlOiAvXlthLXpBLVowLTlfLV17Mzl9JC9cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcGF0dGVybiA9IHBhdHRlcm5zW3Byb3ZpZGVyLnRvTG93ZXJDYXNlKCkgYXMga2V5b2YgdHlwZW9mIHBhdHRlcm5zXTtcclxuICAgIGlmIChwYXR0ZXJuICYmICFwYXR0ZXJuLnRlc3QodmFsaWRhdGlvbi5zYW5pdGl6ZWQhKSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBlcnJvcjogYCR7cHJvdmlkZXJ9IEFQSSBcdUQwQTQgXHVENjE1XHVDMkREXHVDNzc0IFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTQuYFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbGlkYXRpb247XHJcbn1cclxuXHJcbi8vIFx1QjJFOFx1QzVCNCBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVdvcmQod29yZDogc3RyaW5nKTogVmFsaWRhdGlvblJlc3VsdCB7XHJcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGVTdHJpbmcod29yZCwge1xyXG4gICAgICAgIG1pbkxlbmd0aDogMSxcclxuICAgICAgICBtYXhMZW5ndGg6IDUwLFxyXG4gICAgICAgIHBhdHRlcm46IC9eW2EtekEtWlxccyctXSskLyxcclxuICAgICAgICBmaWVsZE5hbWU6ICdcdUIyRThcdUM1QjQnXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xyXG4gICAgICAgIHJldHVybiB2YWxpZGF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1Q0Q5NFx1QUMwMCBcdUFDODBcdUM5OUQ6IFx1RDJCOVx1QzIxOCBcdUJCMzhcdUM3OTAgXHVDODFDXHVENTVDXHJcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB2YWxpZGF0aW9uLnNhbml0aXplZCFcclxuICAgICAgICAucmVwbGFjZSgvW15cXHdcXHMnLV0vZywgJycpIC8vIFx1RDVDOFx1QzZBOVx1QjQxOFx1QzlDMCBcdUM1NEFcdUIyOTQgXHVEMkI5XHVDMjE4XHVCQjM4XHVDNzkwIFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIC5yZXBsYWNlKC9cXHMrL2csICcgJyk7IC8vIFx1QzVGMFx1QzE4RFx1QjQxQyBcdUFDRjVcdUJDMzFcdUM3NDQgXHVENTU4XHVCMDk4XHVCODVDXHJcblxyXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgc2FuaXRpemVkIH07XHJcbn1cclxuXHJcbi8vIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUQxNERcdUMyQTRcdUQyQjggXHVDODE1XHVDODFDXHJcbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZU1hcmtkb3duKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAoIXRleHQpIHJldHVybiAnJztcclxuXHJcbiAgICByZXR1cm4gdGV4dFxyXG4gICAgICAgIC5yZXBsYWNlKC88c2NyaXB0W14+XSo+W1xcc1xcU10qPzxcXC9zY3JpcHQ+L2dpLCAnJykgLy8gXHVDMkE0XHVEMDZDXHVCOUJEXHVEMkI4IFx1RDBEQ1x1QURGOCBcdUM4MUNcdUFDNzBcclxuICAgICAgICAucmVwbGFjZSgvPGlmcmFtZVtePl0qPltcXHNcXFNdKj88XFwvaWZyYW1lPi9naSwgJycpIC8vIGlmcmFtZSBcdUQwRENcdUFERjggXHVDODFDXHVBQzcwXHJcbiAgICAgICAgLnJlcGxhY2UoL2phdmFzY3JpcHQ6L2dpLCAnJykgLy8gamF2YXNjcmlwdDogXHVENTA0XHVCODVDXHVEMUEwXHVDRjVDIFx1QzgxQ1x1QUM3MFxyXG4gICAgICAgIC5yZXBsYWNlKC9vblxcdytcXHMqPS9naSwgJycpIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUQ1NzhcdUI0RTRcdUI3RUMgXHVDODFDXHVBQzcwXHJcbiAgICAgICAgLnRyaW0oKTtcclxufVxyXG5cclxuLy8gVVJMIFx1QUM4MFx1Qzk5RFxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVVcmwodXJsOiBzdHJpbmcpOiBWYWxpZGF0aW9uUmVzdWx0IHtcclxuICAgIGlmICghdXJsKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiAnVVJMXHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU2OVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKHVybCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSFRUUFNcdUI5Q0MgXHVENUM4XHVDNkE5XHJcbiAgICAgICAgaWYgKHVybE9iai5wcm90b2NvbCAhPT0gJ2h0dHBzOicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiAnSFRUUFMgVVJMXHVCOUNDIFx1RDVDOFx1QzZBOVx1QjQyOVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUQ1QzhcdUM2QTlcdUI0MUMgXHVCM0M0XHVCQTU0XHVDNzc4IFx1RDY1NVx1Qzc3OCAoXHVENTQ0XHVDNjk0XHVDMkRDKVxyXG4gICAgICAgIGNvbnN0IGFsbG93ZWREb21haW5zID0gW1xyXG4gICAgICAgICAgICAnYXBpLm9wZW5haS5jb20nLFxyXG4gICAgICAgICAgICAnYXBpLmFudGhyb3BpYy5jb20nLFxyXG4gICAgICAgICAgICAnZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tJ1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIC8vIFx1QjNDNFx1QkE1NFx1Qzc3OCBcdUFDODBcdUM5OURcdUM3NDAgXHVDMTIwXHVEMEREXHVDODAxXHVDNzNDXHVCODVDIFx1QzIxOFx1RDU4OVxyXG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIHNhbml0aXplZDogdXJsIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogJ1x1QzcyMFx1RDZBOFx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NDAgVVJMIFx1RDYxNVx1QzJERFx1Qzc4NVx1QjJDOFx1QjJFNC4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1QzIyQlx1Qzc5MCBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU51bWJlcih2YWx1ZTogYW55LCBvcHRpb25zOiB7XHJcbiAgICBtaW4/OiBudW1iZXI7XHJcbiAgICBtYXg/OiBudW1iZXI7XHJcbiAgICBpbnRlZ2VyPzogYm9vbGVhbjtcclxuICAgIGZpZWxkTmFtZT86IHN0cmluZztcclxufSA9IHt9KTogVmFsaWRhdGlvblJlc3VsdCB7XHJcbiAgICBjb25zdCB7IG1pbiwgbWF4LCBpbnRlZ2VyID0gZmFsc2UsIGZpZWxkTmFtZSA9ICdcdUMyMkJcdUM3OTAnIH0gPSBvcHRpb25zO1xyXG5cclxuICAgIGNvbnN0IG51bSA9IE51bWJlcih2YWx1ZSk7XHJcbiAgICBcclxuICAgIGlmIChpc05hTihudW0pKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgXHVDNzIwXHVENkE4XHVENTVDIFx1QzIyQlx1Qzc5MFx1QzVFQ1x1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuYCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpbnRlZ2VyICYmICFOdW1iZXIuaXNJbnRlZ2VyKG51bSkpIHtcclxuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NDAoXHVCMjk0KSBcdUM4MTVcdUMyMThcdUM1RUNcdUM1N0MgXHVENTY5XHVCMkM4XHVCMkU0LmAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobWluICE9PSB1bmRlZmluZWQgJiYgbnVtIDwgbWluKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiBgJHtmaWVsZE5hbWV9XHVDNzQwKFx1QjI5NCkgJHttaW59IFx1Qzc3NFx1QzBDMVx1Qzc3NFx1QzVCNFx1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuYCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChtYXggIT09IHVuZGVmaW5lZCAmJiBudW0gPiBtYXgpIHtcclxuICAgICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6IGAke2ZpZWxkTmFtZX1cdUM3NDAoXHVCMjk0KSAke21heH0gXHVDNzc0XHVENTU4XHVDNUVDXHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5gIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgc2FuaXRpemVkOiBudW0udG9TdHJpbmcoKSB9O1xyXG59XHJcblxyXG4vLyBcdUJDMzBcdUNFNTggXHVBQzgwXHVDOTlEIFx1RDU2OFx1QzIxOFxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVCYXRjaDxUPihcclxuICAgIGl0ZW1zOiBUW10sXHJcbiAgICB2YWxpZGF0b3I6IChpdGVtOiBUKSA9PiBWYWxpZGF0aW9uUmVzdWx0XHJcbik6IHsgdmFsaWQ6IFRbXTsgaW52YWxpZDogQXJyYXk8eyBpdGVtOiBUOyBlcnJvcjogc3RyaW5nIH0+IH0ge1xyXG4gICAgY29uc3QgdmFsaWQ6IFRbXSA9IFtdO1xyXG4gICAgY29uc3QgaW52YWxpZDogQXJyYXk8eyBpdGVtOiBUOyBlcnJvcjogc3RyaW5nIH0+ID0gW107XHJcblxyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdG9yKGl0ZW0pO1xyXG4gICAgICAgIGlmIChyZXN1bHQuaXNWYWxpZCkge1xyXG4gICAgICAgICAgICB2YWxpZC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGludmFsaWQucHVzaCh7IGl0ZW0sIGVycm9yOiByZXN1bHQuZXJyb3IgfHwgJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OCcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHZhbGlkLCBpbnZhbGlkIH07XHJcbn0iLCAiLy8gXHVDNzkxXHVDNUM1IFx1Q0RFOFx1QzE4Q1x1Qjk3QyBcdUM3MDRcdUQ1NUMgXHVEMUEwXHVEMDcwIFx1QzJEQ1x1QzJBNFx1RDE1Q1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDYW5jZWxsYXRpb25Ub2tlbiB7XHJcbiAgICByZWFkb25seSBpc0NhbmNlbGxlZDogYm9vbGVhbjtcclxuICAgIHRocm93SWZDYW5jZWxsZWQoKTogdm9pZDtcclxuICAgIG9uQ2FuY2VsbGVkKGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENhbmNlbGxhdGlvblRva2VuU291cmNlIHtcclxuICAgIHByaXZhdGUgX2lzQ2FuY2VsbGVkID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9jYWxsYmFja3M6ICgoKSA9PiB2b2lkKVtdID0gW107XHJcblxyXG4gICAgZ2V0IHRva2VuKCk6IENhbmNlbGxhdGlvblRva2VuIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXQgaXNDYW5jZWxsZWQoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faXNDYW5jZWxsZWQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRocm93SWZDYW5jZWxsZWQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc0NhbmNlbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBDYW5jZWxsYXRpb25FcnJvcignT3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25DYW5jZWxsZWQ6IChjYWxsYmFjazogKCkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzQ2FuY2VsbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWwoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzQ2FuY2VsbGVkKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5faXNDYW5jZWxsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBjYW5jZWxsYXRpb24gY2FsbGJhY2s6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9jYWxsYmFja3MubGVuZ3RoID0gMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENhbmNlbGxhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gJ09wZXJhdGlvbiB3YXMgY2FuY2VsbGVkJykge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICdDYW5jZWxsYXRpb25FcnJvcic7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMCBcdUQ1NjhcdUMyMThcdUI0RTRcclxuZXhwb3J0IGZ1bmN0aW9uIGRlbGF5KG1zOiBudW1iZXIsIGNhbmNlbGxhdGlvblRva2VuPzogQ2FuY2VsbGF0aW9uVG9rZW4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaWYgKGNhbmNlbGxhdGlvblRva2VuPy5pc0NhbmNlbGxlZCkge1xyXG4gICAgICAgICAgICByZWplY3QobmV3IENhbmNlbGxhdGlvbkVycm9yKCkpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0sIG1zKTtcclxuXHJcbiAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW4/Lm9uQ2FuY2VsbGVkKCgpID0+IHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhDYW5jZWxsYXRpb248VD4oXHJcbiAgICBwcm9taXNlOiBQcm9taXNlPFQ+LFxyXG4gICAgY2FuY2VsbGF0aW9uVG9rZW4/OiBDYW5jZWxsYXRpb25Ub2tlblxyXG4pOiBQcm9taXNlPFQ+IHtcclxuICAgIGlmICghY2FuY2VsbGF0aW9uVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGlmIChjYW5jZWxsYXRpb25Ub2tlbi5pc0NhbmNlbGxlZCkge1xyXG4gICAgICAgICAgICByZWplY3QobmV3IENhbmNlbGxhdGlvbkVycm9yKCkpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaXNSZXNvbHZlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwcm9taXNlLnRoZW4oXHJcbiAgICAgICAgICAgICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1Jlc29sdmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1Jlc29sdmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNhbmNlbGxhdGlvblRva2VuLm9uQ2FuY2VsbGVkKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpc1Jlc29sdmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpc1Jlc29sdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyBcdUJDMzBcdUNFNTggXHVDQzk4XHVCOUFDXHVDNkE5IFx1Q0RFOFx1QzE4QyBcdUFDMDBcdUIyQTVcdUQ1NUMgXHVENTY4XHVDMjE4XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzQmF0Y2hXaXRoQ2FuY2VsbGF0aW9uPFQsIFI+KFxyXG4gICAgaXRlbXM6IFRbXSxcclxuICAgIHByb2Nlc3NvcjogKGl0ZW06IFQsIGluZGV4OiBudW1iZXIpID0+IFByb21pc2U8Uj4sXHJcbiAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgYmF0Y2hTaXplPzogbnVtYmVyO1xyXG4gICAgICAgIGRlbGF5PzogbnVtYmVyO1xyXG4gICAgICAgIGNhbmNlbGxhdGlvblRva2VuPzogQ2FuY2VsbGF0aW9uVG9rZW47XHJcbiAgICAgICAgb25Qcm9ncmVzcz86IChjdXJyZW50OiBudW1iZXIsIHRvdGFsOiBudW1iZXIpID0+IHZvaWQ7XHJcbiAgICB9ID0ge31cclxuKTogUHJvbWlzZTxSW10+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgICBiYXRjaFNpemUgPSAxMCxcclxuICAgICAgICBkZWxheTogZGVsYXlNcyA9IDEwMCxcclxuICAgICAgICBjYW5jZWxsYXRpb25Ub2tlbixcclxuICAgICAgICBvblByb2dyZXNzXHJcbiAgICB9ID0gb3B0aW9ucztcclxuXHJcbiAgICBjb25zdCByZXN1bHRzOiBSW10gPSBbXTtcclxuICAgIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XHJcbiAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW4/LnRocm93SWZDYW5jZWxsZWQoKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBiYXRjaCA9IGl0ZW1zLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xyXG4gICAgICAgIGNvbnN0IGJhdGNoUHJvbWlzZXMgPSBiYXRjaC5tYXAoKGl0ZW0sIGJhdGNoSW5kZXgpID0+XHJcbiAgICAgICAgICAgIHByb2Nlc3NvcihpdGVtLCBpICsgYmF0Y2hJbmRleClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBiYXRjaFJlc3VsdHMgPSBhd2FpdCB3aXRoQ2FuY2VsbGF0aW9uKFxyXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoYmF0Y2hQcm9taXNlcyksXHJcbiAgICAgICAgICAgICAgICBjYW5jZWxsYXRpb25Ub2tlblxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goLi4uYmF0Y2hSZXN1bHRzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1QzlDNFx1RDU4OVx1Qjk2MCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICAgICAgb25Qcm9ncmVzcz8uKE1hdGgubWluKGkgKyBiYXRjaFNpemUsIGl0ZW1zLmxlbmd0aCksIGl0ZW1zLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdUIyRTRcdUM3NEMgXHVCQzMwXHVDRTU4IFx1QzgwNCBcdUIzMDBcdUFFMzAgKFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDMzBcdUNFNThcdUFDMDAgXHVDNTQ0XHVCMkNDIFx1QUNCRFx1QzZCMClcclxuICAgICAgICAgICAgaWYgKGkgKyBiYXRjaFNpemUgPCBpdGVtcy5sZW5ndGggJiYgZGVsYXlNcyA+IDApIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGRlbGF5KGRlbGF5TXMsIGNhbmNlbGxhdGlvblRva2VuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIENhbmNlbGxhdGlvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBcdUIyRTRcdUI5NzggXHVDNUQwXHVCN0VDXHVCMjk0IFx1QUNCMFx1QUNGQ1x1QzVEMCBcdUQzRUNcdUQ1NjhcdUQ1NThcdUFDNzBcdUIwOTggXHVDN0FDXHVDMkRDXHVCM0M0IFx1Qjg1Q1x1QzlDMSBcdUNEOTRcdUFDMDAgXHVBQzAwXHVCMkE1XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0cztcclxufSIsICJleHBvcnQgdHlwZSBDb25zdHJ1Y3RvcjxUID0ge30+ID0gbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gVDtcclxuZXhwb3J0IHR5cGUgRmFjdG9yeTxUID0gYW55PiA9ICguLi5hcmdzOiBhbnlbXSkgPT4gVDtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2VydmljZURlZmluaXRpb248VCA9IGFueT4ge1xyXG4gICAgaW1wbGVtZW50YXRpb246IENvbnN0cnVjdG9yPFQ+IHwgRmFjdG9yeTxUPjtcclxuICAgIHNpbmdsZXRvbj86IGJvb2xlYW47XHJcbiAgICBkZXBlbmRlbmNpZXM/OiBzdHJpbmdbXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERJQ29udGFpbmVyIHtcclxuICAgIHByaXZhdGUgc2VydmljZXMgPSBuZXcgTWFwPHN0cmluZywgU2VydmljZURlZmluaXRpb24+KCk7XHJcbiAgICBwcml2YXRlIGluc3RhbmNlcyA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XHJcblxyXG4gICAgcmVnaXN0ZXI8VD4oXHJcbiAgICAgICAgbmFtZTogc3RyaW5nLCBcclxuICAgICAgICBpbXBsZW1lbnRhdGlvbjogQ29uc3RydWN0b3I8VD4gfCBGYWN0b3J5PFQ+LFxyXG4gICAgICAgIG9wdGlvbnM6IHsgc2luZ2xldG9uPzogYm9vbGVhbjsgZGVwZW5kZW5jaWVzPzogc3RyaW5nW10gfSA9IHt9XHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2VzLnNldChuYW1lLCB7XHJcbiAgICAgICAgICAgIGltcGxlbWVudGF0aW9uLFxyXG4gICAgICAgICAgICBzaW5nbGV0b246IG9wdGlvbnMuc2luZ2xldG9uID8/IHRydWUsXHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogb3B0aW9ucy5kZXBlbmRlbmNpZXMgPz8gW11cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXNvbHZlPFQ+KG5hbWU6IHN0cmluZyk6IFQge1xyXG4gICAgICAgIGNvbnN0IHNlcnZpY2UgPSB0aGlzLnNlcnZpY2VzLmdldChuYW1lKTtcclxuICAgICAgICBpZiAoIXNlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTZXJ2aWNlICcke25hbWV9JyBub3QgcmVnaXN0ZXJlZGApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVDMkYxXHVBRTAwXHVEMUE0XHVDNzc0XHVBQ0UwIFx1Qzc3NFx1QkJGOCBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTRcdUFDMDAgXHVDNzg4XHVDNzNDXHVCQTc0IFx1QkMxOFx1RDY1OFxyXG4gICAgICAgIGlmIChzZXJ2aWNlLnNpbmdsZXRvbiAmJiB0aGlzLmluc3RhbmNlcy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1Qzc1OFx1Qzg3NFx1QzEzMSBcdUQ1NzRcdUFDQjBcclxuICAgICAgICBjb25zdCBkZXBlbmRlbmNpZXMgPSBzZXJ2aWNlLmRlcGVuZGVuY2llcy5tYXAoZGVwID0+IHRoaXMucmVzb2x2ZShkZXApKTtcclxuXHJcbiAgICAgICAgLy8gXHVDNzc4XHVDMkE0XHVEMTM0XHVDMkE0IFx1QzBERFx1QzEzMVxyXG4gICAgICAgIGxldCBpbnN0YW5jZTogVDtcclxuICAgICAgICBpZiAodGhpcy5pc0NvbnN0cnVjdG9yKHNlcnZpY2UuaW1wbGVtZW50YXRpb24pKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gbmV3IHNlcnZpY2UuaW1wbGVtZW50YXRpb24oLi4uZGVwZW5kZW5jaWVzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IHNlcnZpY2UuaW1wbGVtZW50YXRpb24oLi4uZGVwZW5kZW5jaWVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QzJGMVx1QUUwMFx1RDFBNFx1Qzc3NFx1QkE3NCBcdUM3NzhcdUMyQTRcdUQxMzRcdUMyQTQgXHVDODAwXHVDN0E1XHJcbiAgICAgICAgaWYgKHNlcnZpY2Uuc2luZ2xldG9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChuYW1lLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJJbnN0YW5jZTxUPihuYW1lOiBzdHJpbmcsIGluc3RhbmNlOiBUKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KG5hbWUsIGluc3RhbmNlKTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VzLnNldChuYW1lLCB7XHJcbiAgICAgICAgICAgIGltcGxlbWVudGF0aW9uOiAoKSA9PiBpbnN0YW5jZSxcclxuICAgICAgICAgICAgc2luZ2xldG9uOiB0cnVlLFxyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFtdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzKG5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlcnZpY2VzLmhhcyhuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2VzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQ29uc3RydWN0b3IoaW1wbGVtZW50YXRpb246IGFueSk6IGltcGxlbWVudGF0aW9uIGlzIENvbnN0cnVjdG9yIHtcclxuICAgICAgICByZXR1cm4gaW1wbGVtZW50YXRpb24ucHJvdG90eXBlICYmIGltcGxlbWVudGF0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9PT0gaW1wbGVtZW50YXRpb247XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1QUUwMFx1Qjg1Q1x1QkM4QyBcdUNFRThcdUQxNENcdUM3NzRcdUIxMDggXHVDNzc4XHVDMkE0XHVEMTM0XHVDMkE0XHJcbmV4cG9ydCBjb25zdCBjb250YWluZXIgPSBuZXcgRElDb250YWluZXIoKTsiLCAiaW1wb3J0IHsgRGlmZmljdWx0eSwgRXhhbXBsZSB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWIvdHlwZXMnO1xyXG5cclxuLy8gXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNCBcdUM4MTVcdUJDRjQgXHVDNzc4XHVEMTMwXHVEMzk4XHVDNzc0XHVDMkE0XHJcbmV4cG9ydCBpbnRlcmZhY2UgV29yZERhdGEge1xyXG4gICAgd29yZDogc3RyaW5nO1xyXG4gICAgcHJvbnVuY2lhdGlvbjogc3RyaW5nO1xyXG4gICAgbWVhbmluZ3M6IHN0cmluZ1tdO1xyXG4gICAgc2ltaWxhcldvcmRzOiBzdHJpbmdbXTtcclxuICAgIGV4YW1wbGVzOiBFeGFtcGxlW107XHJcbn1cclxuXHJcbi8vIFx1QjJFOFx1QzVCNCBcdUNFNzRcdUI0REMgXHVDNUQ0XHVEMkYwXHVEMkYwXHJcbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5Q2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgd29yZDogc3RyaW5nLFxyXG4gICAgICAgIHB1YmxpYyBwcm9udW5jaWF0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIG1lYW5pbmdzOiBzdHJpbmdbXSxcclxuICAgICAgICBwdWJsaWMgc2ltaWxhcldvcmRzOiBzdHJpbmdbXSxcclxuICAgICAgICBwdWJsaWMgZXhhbXBsZXM6IEV4YW1wbGVbXSxcclxuICAgICAgICBwdWJsaWMgcmV2aWV3Q291bnQ6IG51bWJlcixcclxuICAgICAgICBwdWJsaWMgZGlmZmljdWx0eTogRGlmZmljdWx0eSxcclxuICAgICAgICBwdWJsaWMgbGFzdFJldmlld2VkOiBzdHJpbmcgfCBudWxsLFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBhZGRlZERhdGU6IHN0cmluZyxcclxuICAgICAgICBwdWJsaWMgYm9va0lkOiBzdHJpbmdcclxuICAgICkge31cclxuXHJcbiAgICAvLyBcdUQzMjlcdUQxQTBcdUI5QUMgXHVCQTU0XHVDMTFDXHVCNERDOiBXb3JkRGF0YVx1Qjg1Q1x1QkQ4MFx1RDEzMCBWb2NhYnVsYXJ5Q2FyZCBcdUMwRERcdUMxMzFcclxuICAgIHN0YXRpYyBmcm9tV29yZERhdGEod29yZERhdGE6IFdvcmREYXRhLCBib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlDYXJkKFxyXG4gICAgICAgICAgICB3b3JkRGF0YS53b3JkLFxyXG4gICAgICAgICAgICB3b3JkRGF0YS5wcm9udW5jaWF0aW9uLFxyXG4gICAgICAgICAgICB3b3JkRGF0YS5tZWFuaW5ncyxcclxuICAgICAgICAgICAgd29yZERhdGEuc2ltaWxhcldvcmRzLFxyXG4gICAgICAgICAgICB3b3JkRGF0YS5leGFtcGxlcyxcclxuICAgICAgICAgICAgMCwgLy8gXHVDRDA4XHVBRTMwIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMThcclxuICAgICAgICAgICAgJ2dvb2QnLCAvLyBcdUNEMDhcdUFFMzAgXHVCMDlDXHVDNzc0XHVCM0M0XHJcbiAgICAgICAgICAgIG51bGwsIC8vIFx1Q0QwOFx1QUUzMCBcdUJDRjVcdUMyQjUgXHVCMEEwXHVDOURDXHJcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgLy8gXHVDRDk0XHVBQzAwIFx1QjBBMFx1QzlEQ1xyXG4gICAgICAgICAgICBib29rSWRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QkNGNVx1QzJCNSBcdUMyMThcdUQ1ODlcclxuICAgIHJldmlldyhuZXdEaWZmaWN1bHR5OiBEaWZmaWN1bHR5KTogVm9jYWJ1bGFyeUNhcmQge1xyXG4gICAgICAgIHJldHVybiBuZXcgVm9jYWJ1bGFyeUNhcmQoXHJcbiAgICAgICAgICAgIHRoaXMud29yZCxcclxuICAgICAgICAgICAgdGhpcy5wcm9udW5jaWF0aW9uLFxyXG4gICAgICAgICAgICB0aGlzLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICB0aGlzLnNpbWlsYXJXb3JkcyxcclxuICAgICAgICAgICAgdGhpcy5leGFtcGxlcyxcclxuICAgICAgICAgICAgdGhpcy5yZXZpZXdDb3VudCArIDEsXHJcbiAgICAgICAgICAgIG5ld0RpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgdGhpcy5hZGRlZERhdGUsXHJcbiAgICAgICAgICAgIHRoaXMuYm9va0lkXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjQgXHVDODE1XHVCQ0Y0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgdXBkYXRlV29yZERhdGEod29yZERhdGE6IFBhcnRpYWw8V29yZERhdGE+KTogVm9jYWJ1bGFyeUNhcmQge1xyXG4gICAgICAgIHJldHVybiBuZXcgVm9jYWJ1bGFyeUNhcmQoXHJcbiAgICAgICAgICAgIHRoaXMud29yZCxcclxuICAgICAgICAgICAgd29yZERhdGEucHJvbnVuY2lhdGlvbiA/PyB0aGlzLnByb251bmNpYXRpb24sXHJcbiAgICAgICAgICAgIHdvcmREYXRhLm1lYW5pbmdzID8/IHRoaXMubWVhbmluZ3MsXHJcbiAgICAgICAgICAgIHdvcmREYXRhLnNpbWlsYXJXb3JkcyA/PyB0aGlzLnNpbWlsYXJXb3JkcyxcclxuICAgICAgICAgICAgd29yZERhdGEuZXhhbXBsZXMgPz8gdGhpcy5leGFtcGxlcyxcclxuICAgICAgICAgICAgdGhpcy5yZXZpZXdDb3VudCxcclxuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICB0aGlzLmxhc3RSZXZpZXdlZCxcclxuICAgICAgICAgICAgdGhpcy5hZGRlZERhdGUsXHJcbiAgICAgICAgICAgIHRoaXMuYm9va0lkXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCM0Q5XHJcbiAgICBtb3ZlVG9Cb29rKG5ld0Jvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmQge1xyXG4gICAgICAgIHJldHVybiBuZXcgVm9jYWJ1bGFyeUNhcmQoXHJcbiAgICAgICAgICAgIHRoaXMud29yZCxcclxuICAgICAgICAgICAgdGhpcy5wcm9udW5jaWF0aW9uLFxyXG4gICAgICAgICAgICB0aGlzLm1lYW5pbmdzLFxyXG4gICAgICAgICAgICB0aGlzLnNpbWlsYXJXb3JkcyxcclxuICAgICAgICAgICAgdGhpcy5leGFtcGxlcyxcclxuICAgICAgICAgICAgdGhpcy5yZXZpZXdDb3VudCxcclxuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICB0aGlzLmxhc3RSZXZpZXdlZCxcclxuICAgICAgICAgICAgdGhpcy5hZGRlZERhdGUsXHJcbiAgICAgICAgICAgIG5ld0Jvb2tJZFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCQ0Y1XHVDMkI1XHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU1Q1x1QzlDMCBcdUQ2NTVcdUM3NzhcclxuICAgIG5lZWRzUmV2aWV3KHJldmlld0ludGVydmFsOiBudW1iZXIgPSAxKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxhc3RSZXZpZXdlZCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgbGFzdFJldmlld0RhdGUgPSBuZXcgRGF0ZSh0aGlzLmxhc3RSZXZpZXdlZCk7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCBkYXlzRGlmZiA9IE1hdGguZmxvb3IoKG5vdy5nZXRUaW1lKCkgLSBsYXN0UmV2aWV3RGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUIwOUNcdUM3NzRcdUIzQzRcdUM1RDAgXHVCNTMwXHVCOTc4IFx1QkNGNVx1QzJCNSBcdUM4RkNcdUFFMzAgXHVDODcwXHVDODE1XHJcbiAgICAgICAgY29uc3QgZGlmZmljdWx0eU11bHRpcGxpZXIgPSB7XHJcbiAgICAgICAgICAgICdoYXJkJzogMC41LFxyXG4gICAgICAgICAgICAnZ29vZCc6IDEsXHJcbiAgICAgICAgICAgICdlYXN5JzogMlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYWRqdXN0ZWRJbnRlcnZhbCA9IHJldmlld0ludGVydmFsICogZGlmZmljdWx0eU11bHRpcGxpZXJbdGhpcy5kaWZmaWN1bHR5XTtcclxuICAgICAgICByZXR1cm4gZGF5c0RpZmYgPj0gYWRqdXN0ZWRJbnRlcnZhbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUQ1NTlcdUMyQjUgXHVDOUM0XHVENTg5XHVCM0M0IFx1QUNDNFx1QzBCMCAoMC0xMDApXHJcbiAgICBnZXRQcm9ncmVzc1BlcmNlbnRhZ2UoKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBtYXhSZXZpZXdzID0gMTA7IC8vIFx1Q0Q1Q1x1QjMwMCBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbih0aGlzLnJldmlld0NvdW50IC8gbWF4UmV2aWV3cywgMSkgKiAxMDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVCMDlDXHVDNzc0XHVCM0M0IFx1QkNGNFx1QjEwOFx1QzJBNFxyXG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdHlCb251cyA9IHtcclxuICAgICAgICAgICAgJ2Vhc3knOiAyMCxcclxuICAgICAgICAgICAgJ2dvb2QnOiAxMCxcclxuICAgICAgICAgICAgJ2hhcmQnOiAwXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gTWF0aC5taW4ocHJvZ3Jlc3MgKyBkaWZmaWN1bHR5Qm9udXNbdGhpcy5kaWZmaWN1bHR5XSwgMTAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDOUMxXHVCODJDXHVENjU0XHVCOTdDIFx1QzcwNFx1RDU1QyBcdUJBNTRcdUMxMUNcdUI0RENcclxuICAgIHRvUGxhaW5PYmplY3QoKTogVm9jYWJ1bGFyeUNhcmREYXRhIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3b3JkOiB0aGlzLndvcmQsXHJcbiAgICAgICAgICAgIHByb251bmNpYXRpb246IHRoaXMucHJvbnVuY2lhdGlvbixcclxuICAgICAgICAgICAgbWVhbmluZ3M6IHRoaXMubWVhbmluZ3MsXHJcbiAgICAgICAgICAgIHNpbWlsYXJXb3JkczogdGhpcy5zaW1pbGFyV29yZHMsXHJcbiAgICAgICAgICAgIGV4YW1wbGVzOiB0aGlzLmV4YW1wbGVzLFxyXG4gICAgICAgICAgICByZXZpZXdDb3VudDogdGhpcy5yZXZpZXdDb3VudCxcclxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IHRoaXMubGFzdFJldmlld2VkLFxyXG4gICAgICAgICAgICBhZGRlZERhdGU6IHRoaXMuYWRkZWREYXRlLFxyXG4gICAgICAgICAgICBib29rSWQ6IHRoaXMuYm9va0lkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUFDODBcdUM5OUQgXHVCODVDXHVDOUMxXHJcbiAgICB2YWxpZGF0ZSgpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghdGhpcy53b3JkIHx8IHRoaXMud29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjRcdUFDMDAgXHVDNzg1XHVCODI1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMubWVhbmluZ3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdcdUIyRThcdUM1QjRcdUM3NTggXHVCNzNCXHVDNzc0IFx1RDU1OFx1QjA5OCBcdUM3NzRcdUMwQzEgXHVENTQ0XHVDNjk0XHVENTY5XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXRoaXMuYm9va0lkIHx8IHRoaXMuYm9va0lkLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNFx1QzdBNSBJRFx1QUMwMCBcdUQ1NDRcdUM2OTRcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBlcnJvcnM7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZShkYXRhOiB7XHJcbiAgICAgICAgd29yZDogc3RyaW5nO1xyXG4gICAgICAgIG1lYW5pbmc6IHN0cmluZztcclxuICAgICAgICBwcm9udW5jaWF0aW9uPzogc3RyaW5nO1xyXG4gICAgICAgIGV4YW1wbGVzPzogc3RyaW5nW107XHJcbiAgICAgICAgYm9va0lkPzogc3RyaW5nO1xyXG4gICAgfSk6IFZvY2FidWxhcnlDYXJkIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlDYXJkKFxyXG4gICAgICAgICAgICBkYXRhLndvcmQsXHJcbiAgICAgICAgICAgIGRhdGEucHJvbnVuY2lhdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgW2RhdGEubWVhbmluZ10sIC8vIG1lYW5pbmdzIGFycmF5XHJcbiAgICAgICAgICAgIFtdLCAvLyBzaW1pbGFyV29yZHNcclxuICAgICAgICAgICAgZGF0YS5leGFtcGxlcz8ubWFwKGV4ID0+ICh7IGVuZ2xpc2g6IGV4LCBrb3JlYW46ICcnIH0pKSB8fCBbXSwgLy8gZXhhbXBsZXMgd2l0aCBFeGFtcGxlIHR5cGVcclxuICAgICAgICAgICAgMCwgLy8gcmV2aWV3Q291bnRcclxuICAgICAgICAgICAgJ2dvb2QnLCAvLyBkaWZmaWN1bHR5XHJcbiAgICAgICAgICAgIG51bGwsIC8vIGxhc3RSZXZpZXdlZFxyXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIC8vIGFkZGVkRGF0ZVxyXG4gICAgICAgICAgICBkYXRhLmJvb2tJZCB8fCAnZGVmYXVsdCdcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDODA0XHVDMUExXHVDNkE5IFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNCAoXHVBRTMwXHVDODc0IFx1RDYzOFx1RDY1OFx1QzEzMSBcdUM3MjBcdUM5QzApXHJcbmV4cG9ydCBpbnRlcmZhY2UgVm9jYWJ1bGFyeUNhcmREYXRhIGV4dGVuZHMgV29yZERhdGEge1xyXG4gICAgcmV2aWV3Q291bnQ6IG51bWJlcjtcclxuICAgIGRpZmZpY3VsdHk6IERpZmZpY3VsdHk7XHJcbiAgICBsYXN0UmV2aWV3ZWQ6IHN0cmluZyB8IG51bGw7XHJcbiAgICBhZGRlZERhdGU6IHN0cmluZztcclxuICAgIGJvb2tJZDogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBcdUFDODBcdUMwQzkgXHVBQ0IwXHVBQ0ZDIFx1RDBDMFx1Qzc4NVxyXG5leHBvcnQgaW50ZXJmYWNlIFNlYXJjaFJlc3VsdCB7XHJcbiAgICBjYXJkczogVm9jYWJ1bGFyeUNhcmRbXTtcclxuICAgIHRvdGFsQ291bnQ6IG51bWJlcjtcclxuICAgIGhhc01vcmU6IGJvb2xlYW47XHJcbn0gIiwgImltcG9ydCB7IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL3JlcG9zaXRvcmllcy9JVm9jYWJ1bGFyeVJlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBJQm9va1JlcG9zaXRvcnkgfSBmcm9tICcuLi9wb3J0cy9yZXBvc2l0b3JpZXMvSUJvb2tSZXBvc2l0b3J5JztcclxuaW1wb3J0IHsgSVdvcmRTZXJ2aWNlIH0gZnJvbSAnLi4vcG9ydHMvc2VydmljZXMvSVdvcmRTZXJ2aWNlJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQgfSBmcm9tICcuLi9lbnRpdGllcy9Wb2NhYnVsYXJ5JztcclxuaW1wb3J0IHsgV29yZEFkZGVkRXZlbnQgfSBmcm9tICcuLi8uLi9zaGFyZWQvbGliL3R5cGVzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWRkV29yZFJlcXVlc3Qge1xyXG4gICAgd29yZDogc3RyaW5nO1xyXG4gICAgYm9va0lkPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFkZFdvcmRSZXNwb25zZSB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgY2FyZD86IFZvY2FidWxhcnlDYXJkO1xyXG4gICAgZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRXb3JkVXNlQ2FzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHZvY2FidWxhcnlSZXBvc2l0b3J5OiBJVm9jYWJ1bGFyeVJlcG9zaXRvcnksXHJcbiAgICAgICAgcHJpdmF0ZSBib29rUmVwb3NpdG9yeTogSUJvb2tSZXBvc2l0b3J5LFxyXG4gICAgICAgIHByaXZhdGUgd29yZFNlcnZpY2U6IElXb3JkU2VydmljZVxyXG4gICAgKSB7fVxyXG5cclxuICAgIGFzeW5jIGV4ZWN1dGUocmVxdWVzdDogQWRkV29yZFJlcXVlc3QpOiBQcm9taXNlPEFkZFdvcmRSZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIDEuIFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OURcclxuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0LndvcmQgfHwgcmVxdWVzdC53b3JkLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmQgPSByZXF1ZXN0LndvcmQudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBcdUM5MTFcdUJDRjUgXHVENjU1XHVDNzc4XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nV29yZCA9IGF3YWl0IHRoaXMudm9jYWJ1bGFyeVJlcG9zaXRvcnkuZmluZEJ5V29yZCh3b3JkKTtcclxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nV29yZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTQgXHVCMkU4XHVDNUI0XHVDNzg1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDMuIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQ2NTVcdUM3NzggXHVCQzBGIFx1QzEyNFx1QzgxNVxyXG4gICAgICAgICAgICBsZXQgYm9va0lkID0gcmVxdWVzdC5ib29rSWQ7XHJcbiAgICAgICAgICAgIGlmICghYm9va0lkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Qm9vayA9IGF3YWl0IHRoaXMuYm9va1JlcG9zaXRvcnkuZ2V0Q3VycmVudEJvb2soKTtcclxuICAgICAgICAgICAgICAgIGJvb2tJZCA9IGN1cnJlbnRCb29rPy5pZCB8fCAnZGVmYXVsdCc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCB0aGlzLmJvb2tSZXBvc2l0b3J5LmZpbmRCeUlkKGJvb2tJZCk7XHJcbiAgICAgICAgICAgIGlmICghYm9vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1QjJFOFx1QzVCNFx1QzdBNVx1Qzc0NCBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyA0LiBcdUIyRThcdUM1QjQgXHVCMzcwXHVDNzc0XHVEMTMwIFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IGF3YWl0IHRoaXMud29yZFNlcnZpY2UuZ2V0V29yZERhdGEod29yZCk7XHJcblxyXG4gICAgICAgICAgICAvLyA1LiBWb2NhYnVsYXJ5Q2FyZCBcdUMwRERcdUMxMzFcclxuICAgICAgICAgICAgY29uc3Qgdm9jYWJ1bGFyeUNhcmQgPSBWb2NhYnVsYXJ5Q2FyZC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgd29yZDogd29yZERhdGEud29yZCxcclxuICAgICAgICAgICAgICAgIG1lYW5pbmc6IHdvcmREYXRhLm1lYW5pbmcsXHJcbiAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkRGF0YS5wcm9udW5jaWF0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IHdvcmREYXRhLmV4YW1wbGVzIHx8IFtdLFxyXG4gICAgICAgICAgICAgICAgYm9va0lkOiBib29rSWRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyA2LiBcdUFDODBcdUM5OURcclxuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9ycyA9IHZvY2FidWxhcnlDYXJkLnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHZhbGlkYXRpb25FcnJvcnMuam9pbignLCAnKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gNy4gXHVDODAwXHVDN0E1XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudm9jYWJ1bGFyeVJlcG9zaXRvcnkuYWRkKHZvY2FidWxhcnlDYXJkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIDguIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUJDMUNcdUMwRERcclxuICAgICAgICAgICAgY29uc3QgZXZlbnQ6IFdvcmRBZGRlZEV2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ1dPUkRfQURERUQnLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZDogdm9jYWJ1bGFyeUNhcmQud29yZCxcclxuICAgICAgICAgICAgICAgICAgICBib29rSWQ6IHZvY2FidWxhcnlDYXJkLmJvb2tJZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERCAoXHVDMkU0XHVDODFDIFx1QUQ2Q1x1RDYwNFx1QzVEMFx1QzExQ1x1QjI5NCBFdmVudEJ1cyBcdUMwQUNcdUM2QTkpXHJcbiAgICAgICAgICAgIHRoaXMucHVibGlzaEV2ZW50KGV2ZW50KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FyZDogdm9jYWJ1bGFyeUNhcmRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQWRkV29yZFVzZUNhc2UgXHVDMkU0XHVENTg5IFx1QzkxMSBcdUM2MjRcdUI5NTg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4nXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHVibGlzaEV2ZW50KGV2ZW50OiBXb3JkQWRkZWRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Qzc4NFx1QzJEQyBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgRXZlbnRCdXNcdUI4NUMgXHVBRDUwXHVDQ0I0XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3dvcmRBZGRlZCcsIHsgZGV0YWlsOiBldmVudC5kYXRhIH0pO1xyXG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xyXG4gICAgfVxyXG59ICIsICIvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNUQ0XHVEMkYwXHVEMkYwXHJcbmV4cG9ydCBjbGFzcyBCb29rIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBpZDogc3RyaW5nLFxyXG4gICAgICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGNyZWF0ZWRBdDogc3RyaW5nLFxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVkQXQ6IHN0cmluZyxcclxuICAgICAgICBwdWJsaWMgd29yZENvdW50OiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGlzRGVmYXVsdDogYm9vbGVhblxyXG4gICAgKSB7fVxyXG5cclxuICAgIC8vIFx1RDMyOVx1RDFBMFx1QjlBQyBcdUJBNTRcdUMxMUNcdUI0REM6IFx1QzBDOCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDMEREXHVDMTMxXHJcbiAgICBzdGF0aWMgY3JlYXRlKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZyA9ICcnLCBpc0RlZmF1bHQ6IGJvb2xlYW4gPSBmYWxzZSk6IEJvb2sge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBpZCA9IGlzRGVmYXVsdCA/ICdkZWZhdWx0JyA6IEJvb2suZ2VuZXJhdGVJZCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBub3csXHJcbiAgICAgICAgICAgIG5vdyxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgaXNEZWZhdWx0XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQzMjlcdUQxQTBcdUI5QUMgXHVCQTU0XHVDMTFDXHVCNERDOiBcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzBERFx1QzEzMVxyXG4gICAgc3RhdGljIGNyZWF0ZURlZmF1bHQoKTogQm9vayB7XHJcbiAgICAgICAgcmV0dXJuIEJvb2suY3JlYXRlKCdcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1JywgJ1x1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTVcdUM3ODVcdUIyQzhcdUIyRTQuJywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzgxNVx1QkNGNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHVwZGF0ZUluZm8obmFtZT86IHN0cmluZywgZGVzY3JpcHRpb24/OiBzdHJpbmcpOiBCb29rIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJvb2soXHJcbiAgICAgICAgICAgIHRoaXMuaWQsXHJcbiAgICAgICAgICAgIG5hbWUgPz8gdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA/PyB0aGlzLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICB0aGlzLndvcmRDb3VudCxcclxuICAgICAgICAgICAgdGhpcy5pc0RlZmF1bHRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVDOTlEXHVBQzAwXHJcbiAgICBpbmNyZW1lbnRXb3JkQ291bnQoKTogQm9vayB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxyXG4gICAgICAgICAgICB0aGlzLmlkLFxyXG4gICAgICAgICAgICB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHRoaXMud29yZENvdW50ICsgMSxcclxuICAgICAgICAgICAgdGhpcy5pc0RlZmF1bHRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVBQzEwXHVDMThDXHJcbiAgICBkZWNyZW1lbnRXb3JkQ291bnQoKTogQm9vayB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb29rKFxyXG4gICAgICAgICAgICB0aGlzLmlkLFxyXG4gICAgICAgICAgICB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIE1hdGgubWF4KDAsIHRoaXMud29yZENvdW50IC0gMSksXHJcbiAgICAgICAgICAgIHRoaXMuaXNEZWZhdWx0XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjQgXHVDMjE4IFx1QzdBQ1x1QzEyNFx1QzgxNVxyXG4gICAgdXBkYXRlV29yZENvdW50KGNvdW50OiBudW1iZXIpOiBCb29rIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJvb2soXHJcbiAgICAgICAgICAgIHRoaXMuaWQsXHJcbiAgICAgICAgICAgIHRoaXMubmFtZSxcclxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgTWF0aC5tYXgoMCwgY291bnQpLFxyXG4gICAgICAgICAgICB0aGlzLmlzRGVmYXVsdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCRTQ0XHVDOTg4XHVCMkM4XHVDMkE0IFx1Qjg1Q1x1QzlDMTogXHVDMEFEXHVDODFDIFx1QUMwMFx1QjJBNSBcdUM1RUNcdUJEODAgXHVENjU1XHVDNzc4XHJcbiAgICBjYW5CZURlbGV0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzRGVmYXVsdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUIyRThcdUM1QjRcdUM3QTVcdUM3NzQgXHVCRTQ0XHVDNUI0XHVDNzg4XHVCMjk0XHVDOUMwIFx1RDY1NVx1Qzc3OFxyXG4gICAgaXNFbXB0eSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53b3JkQ291bnQgPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVBQzgwXHVDOTlEIFx1Qjg1Q1x1QzlDMVxyXG4gICAgdmFsaWRhdGUoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXRoaXMubmFtZSB8fCB0aGlzLm5hbWUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc3NCBcdUQ1NDRcdUM2OTRcdUQ1NjlcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLm5hbWUudHJpbSgpLmxlbmd0aCA+IDEwMCkge1xyXG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc0MCAxMDBcdUM3OTBcdUI5N0MgXHVDRDA4XHVBQ0ZDXHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDUwMCkge1xyXG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnXHVCMkU4XHVDNUI0XHVDN0E1IFx1QzEyNFx1QkE4NVx1Qzc0MCA1MDBcdUM3OTBcdUI5N0MgXHVDRDA4XHVBQ0ZDXHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLndvcmRDb3VudCA8IDApIHtcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ1x1QjJFOFx1QzVCNCBcdUMyMThcdUIyOTQgMCBcdUM3NzRcdUMwQzFcdUM3NzRcdUM1QjRcdUM1N0MgXHVENTY5XHVCMkM4XHVCMkU0LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZXJyb3JzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM5QzFcdUI4MkNcdUQ2NTRcdUI5N0MgXHVDNzA0XHVENTVDIFx1QkE1NFx1QzExQ1x1QjREQ1xyXG4gICAgdG9QbGFpbk9iamVjdCgpOiBCb29rRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogdGhpcy5jcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogdGhpcy51cGRhdGVkQXQsXHJcbiAgICAgICAgICAgIHdvcmRDb3VudDogdGhpcy53b3JkQ291bnQsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdGhpcy5pc0RlZmF1bHRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QkU0NFx1Qzk4OFx1QjJDOFx1QzJBNCBcdUI4NUNcdUM5QzE6IFx1QzBERFx1QzEzMVx1Qzc3Q1x1Qjg1Q1x1QkQ4MFx1RDEzMCBcdUFDQkRcdUFDRkMgXHVDNzdDXHVDMjE4IFx1QUNDNFx1QzBCMFxyXG4gICAgZ2V0RGF5c0Zyb21DcmVhdGlvbigpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWREYXRlID0gbmV3IERhdGUodGhpcy5jcmVhdGVkQXQpO1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKG5vdy5nZXRUaW1lKCkgLSBjcmVhdGVkRGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxOiBcdUI5QzhcdUM5QzBcdUI5QzkgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHVCODVDXHVCRDgwXHVEMTMwIFx1QUNCRFx1QUNGQyBcdUM3N0NcdUMyMTggXHVBQ0M0XHVDMEIwXHJcbiAgICBnZXREYXlzRnJvbUxhc3RVcGRhdGUoKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCB1cGRhdGVkRGF0ZSA9IG5ldyBEYXRlKHRoaXMudXBkYXRlZEF0KTtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKChub3cuZ2V0VGltZSgpIC0gdXBkYXRlZERhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSUQgXHVDMEREXHVDMTMxIFx1QzcyMFx1RDJGOFx1QjlBQ1x1RDJGMFxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgYm9va18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM4MDRcdUMxQTFcdUM2QTkgXHVDNzc4XHVEMTMwXHVEMzk4XHVDNzc0XHVDMkE0IChcdUFFMzBcdUM4NzQgXHVENjM4XHVENjU4XHVDMTMxIFx1QzcyMFx1QzlDMClcclxuZXhwb3J0IGludGVyZmFjZSBCb29rRGF0YSB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICAgIGNyZWF0ZWRBdDogc3RyaW5nO1xyXG4gICAgdXBkYXRlZEF0OiBzdHJpbmc7XHJcbiAgICB3b3JkQ291bnQ6IG51bWJlcjtcclxuICAgIGlzRGVmYXVsdDogYm9vbGVhbjtcclxufVxyXG5cclxuLy8gXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDFCNVx1QUNDNCBcdUM3NzhcdUQxMzBcdUQzOThcdUM3NzRcdUMyQTRcclxuZXhwb3J0IGludGVyZmFjZSBCb29rU3RhdGlzdGljcyB7XHJcbiAgICBib29rOiBCb29rO1xyXG4gICAgdG90YWxXb3JkczogbnVtYmVyO1xyXG4gICAgd29yZHNCeURpZmZpY3VsdHk6IHtcclxuICAgICAgICBlYXN5OiBudW1iZXI7XHJcbiAgICAgICAgZ29vZDogbnVtYmVyO1xyXG4gICAgICAgIGhhcmQ6IG51bWJlcjtcclxuICAgIH07XHJcbiAgICBhdmVyYWdlUmV2aWV3Q291bnQ6IG51bWJlcjtcclxuICAgIGxhc3RBY3Rpdml0eURhdGU6IHN0cmluZyB8IG51bGw7XHJcbiAgICBjb21wbGV0aW9uUGVyY2VudGFnZTogbnVtYmVyO1xyXG59XHJcblxyXG4vLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVCQUE5XHVCODVEIFx1QzYzNVx1QzE1OFxyXG5leHBvcnQgaW50ZXJmYWNlIEJvb2tMaXN0T3B0aW9ucyB7XHJcbiAgICBpbmNsdWRlRW1wdHk/OiBib29sZWFuO1xyXG4gICAgc29ydEJ5PzogJ25hbWUnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0JyB8ICd3b3JkQ291bnQnO1xyXG4gICAgc29ydE9yZGVyPzogJ2FzYycgfCAnZGVzYyc7XHJcbiAgICBsaW1pdD86IG51bWJlcjtcclxuICAgIG9mZnNldD86IG51bWJlcjtcclxufSAiLCAiaW1wb3J0IHsgSUJvb2tSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcG9ydHMvcmVwb3NpdG9yaWVzL0lCb29rUmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IEJvb2sgfSBmcm9tICcuLi9lbnRpdGllcy9Cb29rJztcclxuaW1wb3J0IHsgQm9va0NyZWF0ZWRFdmVudCB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWIvdHlwZXMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVCb29rUmVxdWVzdCB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVCb29rUmVzcG9uc2Uge1xyXG4gICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgIGJvb2s/OiBCb29rO1xyXG4gICAgZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDcmVhdGVCb29rVXNlQ2FzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGJvb2tSZXBvc2l0b3J5OiBJQm9va1JlcG9zaXRvcnlcclxuICAgICkge31cclxuXHJcbiAgICBhc3luYyBleGVjdXRlKHJlcXVlc3Q6IENyZWF0ZUJvb2tSZXF1ZXN0KTogUHJvbWlzZTxDcmVhdGVCb29rUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyAxLiBcdUM3ODVcdUI4MjUgXHVBQzgwXHVDOTlEXHJcbiAgICAgICAgICAgIGlmICghcmVxdWVzdC5uYW1lIHx8IHJlcXVlc3QubmFtZS50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVCMkU4XHVDNUI0XHVDN0E1IFx1Qzc3NFx1Qjk4NFx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHJlcXVlc3QubmFtZS50cmltKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAyLiBcdUM3NzRcdUI5ODQgXHVDOTExXHVCQ0Y1IFx1RDY1NVx1Qzc3OFxyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0Jvb2tzID0gYXdhaXQgdGhpcy5ib29rUmVwb3NpdG9yeS5maW5kQWxsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGR1cGxpY2F0ZUJvb2sgPSBleGlzdGluZ0Jvb2tzLmZpbmQoYm9vayA9PiBcclxuICAgICAgICAgICAgICAgIGJvb2submFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChkdXBsaWNhdGVCb29rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUIyRThcdUM1QjRcdUM3QTUgXHVDNzc0XHVCOTg0XHVDNzg1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDMuIEJvb2sgXHVDNUQ0XHVEMkYwXHVEMkYwIFx1QzBERFx1QzEzMVxyXG4gICAgICAgICAgICBjb25zdCBib29rID0gQm9vay5jcmVhdGUoXHJcbiAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5kZXNjcmlwdGlvbiB8fCAnJ1xyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgLy8gNC4gXHVBQzgwXHVDOTlEXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSBib29rLnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHZhbGlkYXRpb25FcnJvcnMuam9pbignLCAnKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gNS4gXHVDODAwXHVDN0E1XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYm9va1JlcG9zaXRvcnkuYWRkKGJvb2spO1xyXG5cclxuICAgICAgICAgICAgLy8gNi4gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERFxyXG4gICAgICAgICAgICBjb25zdCBldmVudDogQm9va0NyZWF0ZWRFdmVudCA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdCT09LX0NSRUFURUQnLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9va0lkOiBib29rLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGJvb2submFtZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5wdWJsaXNoRXZlbnQoZXZlbnQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBib29rOiBib29rXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NyZWF0ZUJvb2tVc2VDYXNlIFx1QzJFNFx1RDU4OSBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHB1Ymxpc2hFdmVudChldmVudDogQm9va0NyZWF0ZWRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Qzc4NFx1QzJEQyBcdUFENkNcdUQ2MDQgLSBcdUIwOThcdUM5MTFcdUM1RDAgRXZlbnRCdXNcdUI4NUMgXHVBRDUwXHVDQ0I0XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2Jvb2tDcmVhdGVkJywgeyBkZXRhaWw6IGV2ZW50LmRhdGEgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL0lWb2NhYnVsYXJ5UmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IElCb29rUmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL0lCb29rUmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi4vZW50aXRpZXMvVm9jYWJ1bGFyeSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdldFdvcmRzRm9yUmV2aWV3UmVxdWVzdCB7XHJcbiAgICBib29rSWQ/OiBzdHJpbmc7XHJcbiAgICBsaW1pdD86IG51bWJlcjtcclxuICAgIHJldmlld0ludGVydmFsPzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdldFdvcmRzRm9yUmV2aWV3UmVzcG9uc2Uge1xyXG4gICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgIHdvcmRzPzogVm9jYWJ1bGFyeUNhcmRbXTtcclxuICAgIHRvdGFsQ291bnQ/OiBudW1iZXI7XHJcbiAgICBlcnJvcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdldFdvcmRzRm9yUmV2aWV3VXNlQ2FzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHZvY2FidWxhcnlSZXBvc2l0b3J5OiBJVm9jYWJ1bGFyeVJlcG9zaXRvcnksXHJcbiAgICAgICAgcHJpdmF0ZSBib29rUmVwb3NpdG9yeTogSUJvb2tSZXBvc2l0b3J5XHJcbiAgICApIHt9XHJcblxyXG4gICAgYXN5bmMgZXhlY3V0ZShyZXF1ZXN0OiBHZXRXb3Jkc0ZvclJldmlld1JlcXVlc3QgPSB7fSk6IFByb21pc2U8R2V0V29yZHNGb3JSZXZpZXdSZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIDEuIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUMxMjRcdUM4MTVcclxuICAgICAgICAgICAgbGV0IGJvb2tJZCA9IHJlcXVlc3QuYm9va0lkO1xyXG4gICAgICAgICAgICBpZiAoIWJvb2tJZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEJvb2sgPSBhd2FpdCB0aGlzLmJvb2tSZXBvc2l0b3J5LmdldEN1cnJlbnRCb29rKCk7XHJcbiAgICAgICAgICAgICAgICBib29rSWQgPSBjdXJyZW50Qm9vaz8uaWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDIuIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFdvcmRzID0gYXdhaXQgdGhpcy52b2NhYnVsYXJ5UmVwb3NpdG9yeS5maW5kQnlCb29rSWQoYm9va0lkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChhbGxXb3Jkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB3b3JkczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxDb3VudDogMFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gMy4gXHVCQ0Y1XHVDMkI1XHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU1QyBcdUIyRThcdUM1QjQgXHVENTQ0XHVEMTMwXHVCOUMxXHJcbiAgICAgICAgICAgIGNvbnN0IHJldmlld0ludGVydmFsID0gcmVxdWVzdC5yZXZpZXdJbnRlcnZhbCB8fCAxO1xyXG4gICAgICAgICAgICBjb25zdCB3b3Jkc05lZWRpbmdSZXZpZXcgPSBhbGxXb3Jkcy5maWx0ZXIod29yZCA9PiBcclxuICAgICAgICAgICAgICAgIHdvcmQubmVlZHNSZXZpZXcocmV2aWV3SW50ZXJ2YWwpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyA0LiBcdUM4MTVcdUI4MkMgKFx1QzZCMFx1QzEyMFx1QzIxQ1x1QzcwNDogXHVDNjI0XHVCNzk4XHVCNDFDIFx1QkNGNVx1QzJCNSA+IFx1QzVCNFx1QjgyNFx1QzZCNCBcdUIyRThcdUM1QjQgPiBcdUJDRjVcdUMyQjUgXHVENjlGXHVDMjE4IFx1QzgwMVx1Qzc0MCBcdUIyRThcdUM1QjQpXHJcbiAgICAgICAgICAgIHdvcmRzTmVlZGluZ1Jldmlldy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAxXHVDMjFDXHVDNzA0OiBcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQ0Y1XHVDMkI1XHVDNzdDIChcdUM2MjRcdUI3OThcdUI0MUMgXHVBQzgzXHVCRDgwXHVEMTMwKVxyXG4gICAgICAgICAgICAgICAgaWYgKGEubGFzdFJldmlld2VkICYmIGIubGFzdFJldmlld2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYURhdGUgPSBuZXcgRGF0ZShhLmxhc3RSZXZpZXdlZCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJEYXRlID0gbmV3IERhdGUoYi5sYXN0UmV2aWV3ZWQpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYURhdGUgIT09IGJEYXRlKSByZXR1cm4gYURhdGUgLSBiRGF0ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5sYXN0UmV2aWV3ZWQgJiYgIWIubGFzdFJldmlld2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYS5sYXN0UmV2aWV3ZWQgJiYgYi5sYXN0UmV2aWV3ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyAyXHVDMjFDXHVDNzA0OiBcdUIwOUNcdUM3NzRcdUIzQzQgKFx1QzVCNFx1QjgyNFx1QzZCNCBcdUFDODNcdUJEODBcdUQxMzApXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmaWN1bHR5T3JkZXIgPSB7ICdoYXJkJzogMywgJ2dvb2QnOiAyLCAnZWFzeSc6IDEgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmZpY3VsdHlEaWZmID0gZGlmZmljdWx0eU9yZGVyW2IuZGlmZmljdWx0eV0gLSBkaWZmaWN1bHR5T3JkZXJbYS5kaWZmaWN1bHR5XTtcclxuICAgICAgICAgICAgICAgIGlmIChkaWZmaWN1bHR5RGlmZiAhPT0gMCkgcmV0dXJuIGRpZmZpY3VsdHlEaWZmO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIDNcdUMyMUNcdUM3MDQ6IFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTggKFx1QzgwMVx1Qzc0MCBcdUFDODNcdUJEODBcdUQxMzApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5yZXZpZXdDb3VudCAtIGIucmV2aWV3Q291bnQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gNS4gXHVDODFDXHVENTVDIFx1QzgwMVx1QzZBOVxyXG4gICAgICAgICAgICBjb25zdCBsaW1pdCA9IHJlcXVlc3QubGltaXQgfHwgMjA7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0ZWRXb3JkcyA9IHdvcmRzTmVlZGluZ1Jldmlldy5zbGljZSgwLCBsaW1pdCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHdvcmRzOiBsaW1pdGVkV29yZHMsXHJcbiAgICAgICAgICAgICAgICB0b3RhbENvdW50OiB3b3Jkc05lZWRpbmdSZXZpZXcubGVuZ3RoXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dldFdvcmRzRm9yUmV2aWV3VXNlQ2FzZSBcdUMyRTRcdUQ1ODkgXHVDOTExIFx1QzYyNFx1Qjk1ODonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0gIiwgImltcG9ydCB7IElWb2NhYnVsYXJ5UmVwb3NpdG9yeSB9IGZyb20gJy4uL3BvcnRzL0lWb2NhYnVsYXJ5UmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlDYXJkIH0gZnJvbSAnLi4vZW50aXRpZXMvVm9jYWJ1bGFyeSc7XHJcbmltcG9ydCB7IERpZmZpY3VsdHksIFdvcmRSZXZpZXdlZEV2ZW50IH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYi90eXBlcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1dvcmRSZXF1ZXN0IHtcclxuICAgIHdvcmQ6IHN0cmluZztcclxuICAgIGRpZmZpY3VsdHk6IERpZmZpY3VsdHk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmV2aWV3V29yZFJlc3BvbnNlIHtcclxuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICBjYXJkPzogVm9jYWJ1bGFyeUNhcmQ7XHJcbiAgICBlcnJvcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJldmlld1dvcmRVc2VDYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgdm9jYWJ1bGFyeVJlcG9zaXRvcnk6IElWb2NhYnVsYXJ5UmVwb3NpdG9yeVxyXG4gICAgKSB7fVxyXG5cclxuICAgIGFzeW5jIGV4ZWN1dGUocmVxdWVzdDogUmV2aWV3V29yZFJlcXVlc3QpOiBQcm9taXNlPFJldmlld1dvcmRSZXNwb25zZT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIDEuIFx1Qzc4NVx1QjgyNSBcdUFDODBcdUM5OURcclxuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0LndvcmQgfHwgcmVxdWVzdC53b3JkLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUIyRThcdUM1QjRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghWydlYXN5JywgJ2dvb2QnLCAnaGFyZCddLmluY2x1ZGVzKHJlcXVlc3QuZGlmZmljdWx0eSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdUM2MkNcdUJDMTRcdUI5NzggXHVCMDlDXHVDNzc0XHVCM0M0XHVCOTdDIFx1QzEyMFx1RDBERFx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NC4nXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDXHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmQgPSByZXF1ZXN0LndvcmQudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FyZCA9IGF3YWl0IHRoaXMudm9jYWJ1bGFyeVJlcG9zaXRvcnkuZmluZEJ5V29yZCh3b3JkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdDYXJkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnXHVCMkU4XHVDNUI0XHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIDMuIFx1QkNGNVx1QzJCNSBcdUMyMThcdUQ1ODkgKFx1QzVENFx1RDJGMFx1RDJGMFx1Qzc1OCBcdUJFNDRcdUM5ODhcdUIyQzhcdUMyQTQgXHVCODVDXHVDOUMxIFx1RDY1Q1x1QzZBOSlcclxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNEaWZmaWN1bHR5ID0gZXhpc3RpbmdDYXJkLmRpZmZpY3VsdHk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJldmlld2VkQ2FyZCA9IGV4aXN0aW5nQ2FyZC5yZXZpZXcocmVxdWVzdC5kaWZmaWN1bHR5KTtcclxuXHJcbiAgICAgICAgICAgIC8vIDQuIFx1QzgwMFx1QzdBNVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZvY2FidWxhcnlSZXBvc2l0b3J5LnVwZGF0ZShyZXZpZXdlZENhcmQpO1xyXG5cclxuICAgICAgICAgICAgLy8gNS4gXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QkMxQ1x1QzBERFxyXG4gICAgICAgICAgICBjb25zdCBldmVudDogV29yZFJldmlld2VkRXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnV09SRF9SRVZJRVdFRCcsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkOiByZXZpZXdlZENhcmQud29yZCxcclxuICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5OiByZXF1ZXN0LmRpZmZpY3VsdHksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNEaWZmaWN1bHR5OiBwcmV2aW91c0RpZmZpY3VsdHlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMucHVibGlzaEV2ZW50KGV2ZW50KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FyZDogcmV2aWV3ZWRDYXJkXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Jldmlld1dvcmRVc2VDYXNlIFx1QzJFNFx1RDU4OSBcdUM5MTEgXHVDNjI0XHVCOTU4OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1x1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHB1Ymxpc2hFdmVudChldmVudDogV29yZFJldmlld2VkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM3ODRcdUMyREMgXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIEV2ZW50QnVzXHVCODVDIFx1QUQ1MFx1Q0NCNFxyXG4gICAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd3b3JkUmV2aWV3ZWQnLCB7IGRldGFpbDogZXZlbnQuZGF0YSB9KTtcclxuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcclxuICAgIH1cclxufSAiLCAiaW1wb3J0IHsgSVZvY2FidWxhcnlSZXBvc2l0b3J5IH0gZnJvbSAnLi4vLi4vLi4vY29yZS9wb3J0cy9yZXBvc2l0b3JpZXMvSVZvY2FidWxhcnlSZXBvc2l0b3J5JztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeUNhcmQsIFNlYXJjaFJlc3VsdCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvZW50aXRpZXMvVm9jYWJ1bGFyeSc7XHJcbmltcG9ydCB7IFNlYXJjaE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvbGliL3R5cGVzJztcclxuaW1wb3J0IHsgVm9jYWJ1bGFyeURhdGFiYXNlTWFuYWdlciB9IGZyb20gJy4uLy4uL3N0b3JhZ2UvVm9jYWJ1bGFyeURhdGFiYXNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5UmVwb3NpdG9yeUFkYXB0ZXIgaW1wbGVtZW50cyBJVm9jYWJ1bGFyeVJlcG9zaXRvcnkge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhYmFzZU1hbmFnZXI6IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIpIHt9XHJcblxyXG4gICAgYXN5bmMgYWRkKGNhcmQ6IFZvY2FidWxhcnlDYXJkKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuYWRkV29yZChjYXJkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlKGNhcmQ6IFZvY2FidWxhcnlDYXJkKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuYWRkV29yZChjYXJkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kQnlXb3JkKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8Vm9jYWJ1bGFyeUNhcmQgfCBudWxsPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmQod29yZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmluZEFsbCgpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkW10+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsV29yZHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kQnlCb29rSWQoYm9va0lkOiBzdHJpbmcpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkW10+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZHNCeUJvb2soYm9va0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1cGRhdGUod29yZDogc3RyaW5nLCBjYXJkOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZVdvcmQod29yZCwgY2FyZC5kaWZmaWN1bHR5KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGUod29yZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIucmVtb3ZlV29yZCh3b3JkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZWFyY2gob3B0aW9uczogU2VhcmNoT3B0aW9ucyk6IFByb21pc2U8U2VhcmNoUmVzdWx0PiB7XHJcbiAgICAgICAgY29uc3QgYWxsV29yZHMgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcclxuICAgICAgICAvLyBcdUFFMzBcdUJDRjhcdUM4MDFcdUM3NzggXHVBQzgwXHVDMEM5IFx1QUQ2Q1x1RDYwNCAtIFx1QjA5OFx1QzkxMVx1QzVEMCBcdUFDRTBcdUIzQzRcdUQ2NTQgXHVBQzAwXHVCMkE1XHJcbiAgICAgICAgY29uc3QgZmlsdGVyZWRXb3JkcyA9IGFsbFdvcmRzLmZpbHRlcih3b3JkID0+IFxyXG4gICAgICAgICAgICB3b3JkLndvcmQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhvcHRpb25zLnF1ZXJ5Py50b0xvd2VyQ2FzZSgpIHx8ICcnKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd29yZHM6IGZpbHRlcmVkV29yZHMsXHJcbiAgICAgICAgICAgIHRvdGFsOiBmaWx0ZXJlZFdvcmRzLmxlbmd0aCxcclxuICAgICAgICAgICAgaGFzTW9yZTogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNlYXJjaEJ5VGV4dChxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxWb2NhYnVsYXJ5Q2FyZFtdPiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZWFyY2goeyBxdWVyeSB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LndvcmRzO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbmRDYXJkc0ZvclJldmlldyhib29rSWQ/OiBzdHJpbmcpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkW10+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0V29yZHNGb3JSZXZpZXcoYm9va0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kQ2FyZHNCeURpZmZpY3VsdHkoZGlmZmljdWx0eTogJ2Vhc3knIHwgJ2dvb2QnIHwgJ2hhcmQnLCBib29rSWQ/OiBzdHJpbmcpOiBQcm9taXNlPFZvY2FidWxhcnlDYXJkW10+IHtcclxuICAgICAgICBjb25zdCB3b3JkcyA9IGJvb2tJZCA/IFxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZpbmRCeUJvb2tJZChib29rSWQpIDogXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZmluZEFsbCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB3b3Jkcy5maWx0ZXIod29yZCA9PiB3b3JkLmRpZmZpY3VsdHkgPT09IGRpZmZpY3VsdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNvdW50KCk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcclxuICAgICAgICByZXR1cm4gd29yZHMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNvdW50QnlCb29rSWQoYm9va0lkOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gYXdhaXQgdGhpcy5maW5kQnlCb29rSWQoYm9va0lkKTtcclxuICAgICAgICByZXR1cm4gd29yZHMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNvdW50QnlEaWZmaWN1bHR5KGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJyk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSBhd2FpdCB0aGlzLmZpbmRDYXJkc0J5RGlmZmljdWx0eShkaWZmaWN1bHR5KTtcclxuICAgICAgICByZXR1cm4gd29yZHMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmVNYW55KGNhcmRzOiBWb2NhYnVsYXJ5Q2FyZFtdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgZm9yIChjb25zdCBjYXJkIG9mIGNhcmRzKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkKGNhcmQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGVNYW55KHdvcmRzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZSh3b3JkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZERhdGEoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2F2ZURhdGEoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2F2ZUFsbERhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRhdGFDaGFuZ2VkKGNhbGxiYWNrOiAoY2FyZHM6IFZvY2FidWxhcnlDYXJkW10pID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QUQ2Q1x1RDYwNCAtIFx1QjA5OFx1QzkxMVx1QzVEMCBFdmVudEVtaXR0ZXIgXHVEMzI4XHVEMTM0XHVDNzNDXHVCODVDIFx1QUQ2Q1x1RDYwNFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XHJcbiAgICB9XHJcblxyXG4gICAgb2ZmRGF0YUNoYW5nZWQoY2FsbGJhY2s6IChjYXJkczogVm9jYWJ1bGFyeUNhcmRbXSkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwIFx1QUQ2Q1x1RDYwNFxyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQ1x1QjI5NCBcdUJFNDggXHVBRDZDXHVENjA0XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgSUJvb2tSZXBvc2l0b3J5IH0gZnJvbSAnLi4vLi4vLi4vY29yZS9wb3J0cy9yZXBvc2l0b3JpZXMvSUJvb2tSZXBvc2l0b3J5JztcclxuaW1wb3J0IHsgQm9vaywgQm9va1N0YXRpc3RpY3MsIEJvb2tMaXN0T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uL2NvcmUvZW50aXRpZXMvQm9vayc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgQm9va1JlcG9zaXRvcnlBZGFwdGVyIGltcGxlbWVudHMgSUJvb2tSZXBvc2l0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0YWJhc2VNYW5hZ2VyOiBWb2NhYnVsYXJ5RGF0YWJhc2VNYW5hZ2VyKSB7fVxyXG5cclxuICAgIGFzeW5jIGFkZChib29rOiBCb29rKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuY3JlYXRlQm9vayhib29rLnRvUGxhaW5PYmplY3QoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2F2ZShib29rOiBCb29rKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuY3JlYXRlQm9vayhib29rLnRvUGxhaW5PYmplY3QoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmluZEJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8Qm9vayB8IG51bGw+IHtcclxuICAgICAgICBjb25zdCBib29rRGF0YSA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldEJvb2soaWQpO1xyXG4gICAgICAgIGlmICghYm9va0RhdGEpIHJldHVybiBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBuZXcgQm9vayhcclxuICAgICAgICAgICAgYm9va0RhdGEuaWQsXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLm5hbWUsXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBib29rRGF0YS5jcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLnVwZGF0ZWRBdCxcclxuICAgICAgICAgICAgYm9va0RhdGEud29yZENvdW50LFxyXG4gICAgICAgICAgICBib29rRGF0YS5pc0RlZmF1bHRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbmRBbGwob3B0aW9ucz86IEJvb2tMaXN0T3B0aW9ucyk6IFByb21pc2U8Qm9va1tdPiB7XHJcbiAgICAgICAgY29uc3QgYm9va3NEYXRhID0gdGhpcy5kYXRhYmFzZU1hbmFnZXIuZ2V0QWxsQm9va3MoKTtcclxuICAgICAgICBsZXQgYm9va3MgPSBib29rc0RhdGEubWFwKGJvb2tEYXRhID0+IG5ldyBCb29rKFxyXG4gICAgICAgICAgICBib29rRGF0YS5pZCxcclxuICAgICAgICAgICAgYm9va0RhdGEubmFtZSxcclxuICAgICAgICAgICAgYm9va0RhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgYm9va0RhdGEudXBkYXRlZEF0LFxyXG4gICAgICAgICAgICBib29rRGF0YS53b3JkQ291bnQsXHJcbiAgICAgICAgICAgIGJvb2tEYXRhLmlzRGVmYXVsdFxyXG4gICAgICAgICkpO1xyXG5cclxuICAgICAgICAvLyBcdUM2MzVcdUMxNThcdUM1RDAgXHVCNTMwXHVCOTc4IFx1RDU0NFx1RDEzMFx1QjlDMVxyXG4gICAgICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVFbXB0eSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGJvb2tzID0gYm9va3MuZmlsdGVyKGJvb2sgPT4gIWJvb2suaXNFbXB0eSgpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHVDODE1XHVCODJDXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNvcnRCeSkge1xyXG4gICAgICAgICAgICAgICAgYm9va3Muc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFWYWx1ZSA9IGFbb3B0aW9ucy5zb3J0QnkhXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBiVmFsdWUgPSBiW29wdGlvbnMuc29ydEJ5IV07XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhVmFsdWUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBiVmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLnNvcnRPcmRlciA9PT0gJ2Rlc2MnID8gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiVmFsdWUubG9jYWxlQ29tcGFyZShhVmFsdWUpIDogXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhVmFsdWUubG9jYWxlQ29tcGFyZShiVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFWYWx1ZSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGJWYWx1ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuc29ydE9yZGVyID09PSAnZGVzYycgPyBiVmFsdWUgLSBhVmFsdWUgOiBhVmFsdWUgLSBiVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1RDM5OFx1Qzc3NFx1QzlDMFx1QjEyNFx1Qzc3NFx1QzE1OFxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5vZmZzZXQgfHwgb3B0aW9ucy5saW1pdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBvcHRpb25zLm9mZnNldCB8fCAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gb3B0aW9ucy5saW1pdCA/IHN0YXJ0ICsgb3B0aW9ucy5saW1pdCA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGJvb2tzID0gYm9va3Muc2xpY2Uoc3RhcnQsIGVuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBib29rcztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1cGRhdGUoaWQ6IHN0cmluZywgYm9vazogQm9vayk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnVwZGF0ZUJvb2soaWQsIGJvb2sudG9QbGFpbk9iamVjdCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmRlbGV0ZUJvb2soaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbmREZWZhdWx0KCk6IFByb21pc2U8Qm9vayB8IG51bGw+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kQnlJZCgnZGVmYXVsdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbmRCeU5hbWUobmFtZTogc3RyaW5nKTogUHJvbWlzZTxCb29rIHwgbnVsbD4ge1xyXG4gICAgICAgIGNvbnN0IGJvb2tzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XHJcbiAgICAgICAgcmV0dXJuIGJvb2tzLmZpbmQoYm9vayA9PiBib29rLm5hbWUgPT09IG5hbWUpIHx8IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZXhpc3RzKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBjb25zdCBib29rID0gYXdhaXQgdGhpcy5maW5kQnlJZChpZCk7XHJcbiAgICAgICAgcmV0dXJuIGJvb2sgIT09IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY291bnQoKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgICAgICBjb25zdCBib29rcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xyXG4gICAgICAgIHJldHVybiBib29rcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0U3RhdGlzdGljcyhib29rSWQ6IHN0cmluZyk6IFByb21pc2U8Qm9va1N0YXRpc3RpY3MgfCBudWxsPiB7XHJcbiAgICAgICAgY29uc3QgYm9vayA9IGF3YWl0IHRoaXMuZmluZEJ5SWQoYm9va0lkKTtcclxuICAgICAgICBpZiAoIWJvb2spIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICBjb25zdCB3b3JkcyA9IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLmdldFdvcmRzQnlCb29rKGJvb2tJZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgd29yZHNCeURpZmZpY3VsdHkgPSB7XHJcbiAgICAgICAgICAgIGVhc3k6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2Vhc3knKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGdvb2Q6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2dvb2QnKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGhhcmQ6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2hhcmQnKS5sZW5ndGhcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCB0b3RhbFJldmlld3MgPSB3b3Jkcy5yZWR1Y2UoKHN1bSwgd29yZCkgPT4gc3VtICsgd29yZC5yZXZpZXdDb3VudCwgMCk7XHJcbiAgICAgICAgY29uc3QgYXZlcmFnZVJldmlld0NvdW50ID0gd29yZHMubGVuZ3RoID4gMCA/IHRvdGFsUmV2aWV3cyAvIHdvcmRzLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGxhc3RBY3Rpdml0eURhdGUgPSB3b3Jkcy5sZW5ndGggPiAwID8gXHJcbiAgICAgICAgICAgIE1hdGgubWF4KC4uLndvcmRzLm1hcCh3ID0+IG5ldyBEYXRlKHcubGFzdFJldmlld2VkIHx8IHcuYWRkZWREYXRlKS5nZXRUaW1lKCkpKSA6XHJcbiAgICAgICAgICAgIG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25QZXJjZW50YWdlID0gd29yZHMubGVuZ3RoID4gMCA/XHJcbiAgICAgICAgICAgICh3b3Jkc0J5RGlmZmljdWx0eS5lYXN5IC8gd29yZHMubGVuZ3RoKSAqIDEwMCA6IDA7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGJvb2ssXHJcbiAgICAgICAgICAgIHRvdGFsV29yZHM6IHdvcmRzLmxlbmd0aCxcclxuICAgICAgICAgICAgd29yZHNCeURpZmZpY3VsdHksXHJcbiAgICAgICAgICAgIGF2ZXJhZ2VSZXZpZXdDb3VudCxcclxuICAgICAgICAgICAgbGFzdEFjdGl2aXR5RGF0ZTogbGFzdEFjdGl2aXR5RGF0ZSA/IG5ldyBEYXRlKGxhc3RBY3Rpdml0eURhdGUpLnRvSVNPU3RyaW5nKCkgOiBudWxsLFxyXG4gICAgICAgICAgICBjb21wbGV0aW9uUGVyY2VudGFnZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0QWxsU3RhdGlzdGljcygpOiBQcm9taXNlPEJvb2tTdGF0aXN0aWNzW10+IHtcclxuICAgICAgICBjb25zdCBib29rcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xyXG4gICAgICAgIGNvbnN0IHN0YXRpc3RpY3M6IEJvb2tTdGF0aXN0aWNzW10gPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IGJvb2sgb2YgYm9va3MpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhdCA9IGF3YWl0IHRoaXMuZ2V0U3RhdGlzdGljcyhib29rLmlkKTtcclxuICAgICAgICAgICAgaWYgKHN0YXQpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRpc3RpY3MucHVzaChzdGF0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gc3RhdGlzdGljcztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRDdXJyZW50Qm9vaygpOiBQcm9taXNlPEJvb2sgfCBudWxsPiB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudEJvb2sgPSB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRDdXJyZW50Qm9vaygpO1xyXG4gICAgICAgIGlmICghY3VycmVudEJvb2spIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IEJvb2soXHJcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLmlkLFxyXG4gICAgICAgICAgICBjdXJyZW50Qm9vay5uYW1lLFxyXG4gICAgICAgICAgICBjdXJyZW50Qm9vay5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY3VycmVudEJvb2suY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBjdXJyZW50Qm9vay51cGRhdGVkQXQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRCb29rLndvcmRDb3VudCxcclxuICAgICAgICAgICAgY3VycmVudEJvb2suaXNEZWZhdWx0XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZXRDdXJyZW50Qm9vayhib29rSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnNldEN1cnJlbnRCb29rKGJvb2tJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZERhdGEoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIubG9hZEFsbEJvb2tzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2F2ZURhdGEoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuc2F2ZUFsbERhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB2YWxpZGF0ZUJvb2tOYW1lKG5hbWU6IHN0cmluZywgZXhjbHVkZUlkPzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgY29uc3QgYm9va3MgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcclxuICAgICAgICByZXR1cm4gIWJvb2tzLnNvbWUoYm9vayA9PiBcclxuICAgICAgICAgICAgYm9vay5uYW1lID09PSBuYW1lICYmIFxyXG4gICAgICAgICAgICAoIWV4Y2x1ZGVJZCB8fCBib29rLmlkICE9PSBleGNsdWRlSWQpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRhdGFDaGFuZ2VkKGNhbGxiYWNrOiAoYm9va3M6IEJvb2tbXSkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVBRDZDXHVENjA0IC0gXHVCMDk4XHVDOTExXHVDNUQwIEV2ZW50RW1pdHRlciBcdUQzMjhcdUQxMzRcdUM3M0NcdUI4NUMgXHVBRDZDXHVENjA0XHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcclxuICAgIH1cclxuXHJcbiAgICBvZmZEYXRhQ2hhbmdlZChjYWxsYmFjazogKGJvb2tzOiBCb29rW10pID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4IFx1QzgxQ1x1QUM3MCBcdUFENkNcdUQ2MDRcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUNcdUIyOTQgXHVCRTQ4IFx1QUQ2Q1x1RDYwNFxyXG4gICAgfVxyXG5cclxuICAgIG9uQ3VycmVudEJvb2tDaGFuZ2VkKGNhbGxiYWNrOiAoYm9vazogQm9vayB8IG51bGwpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVCMkU4XHVDNUI0XHVDN0E1IFx1QkNDMFx1QUNCRCBcdUM3NzRcdUJDQTRcdUQyQjggXHVCOUFDXHVDMkE0XHVCMTA4XHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcclxuICAgIH1cclxuXHJcbiAgICBvZmZDdXJyZW50Qm9va0NoYW5nZWQoY2FsbGJhY2s6IChib29rOiBCb29rIHwgbnVsbCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUIyRThcdUM1QjRcdUM3QTUgXHVCQ0MwXHVBQ0JEIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVDODFDXHVBQzcwXHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDXHVCMjk0IFx1QkU0OCBcdUFENkNcdUQ2MDRcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBWb2NhYnVsYXJ5Q2FyZCwgQm9vayB9IGZyb20gJy4uLy4uL1ZvY2FidWxhcnlDYXJkJztcclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgbm9ybWFsaXplUGF0aCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGF0YWJhc2VEYXRhIHtcclxuICAgIGJvb2tzOiBCb29rW107XHJcbiAgICB3b3JkczogVm9jYWJ1bGFyeUNhcmRbXTtcclxuICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgZGFpbHlHb2FsOiBudW1iZXI7XHJcbiAgICAgICAgcmV2aWV3SW50ZXJ2YWw6IG51bWJlcjtcclxuICAgICAgICBjdXJyZW50Qm9va0lkOiBzdHJpbmc7XHJcbiAgICB9O1xyXG4gICAgc3RhdGlzdGljczoge1xyXG4gICAgICAgIHRvdGFsUmV2aWV3czogbnVtYmVyO1xyXG4gICAgICAgIHN0cmVha0RheXM6IG51bWJlcjtcclxuICAgICAgICBsYXN0U3R1ZHlEYXRlOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuICAgIHByaXZhdGUgYm9va3M6IE1hcDxzdHJpbmcsIEJvb2s+ID0gbmV3IE1hcCgpO1xyXG4gICAgcHJpdmF0ZSB3b3JkczogTWFwPHN0cmluZywgVm9jYWJ1bGFyeUNhcmQ+ID0gbmV3IE1hcCgpO1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5ncyA9IHtcclxuICAgICAgICBkYWlseUdvYWw6IDEwLFxyXG4gICAgICAgIHJldmlld0ludGVydmFsOiAxLFxyXG4gICAgICAgIGN1cnJlbnRCb29rSWQ6ICdkZWZhdWx0J1xyXG4gICAgfTtcclxuICAgIHByaXZhdGUgc3RhdGlzdGljcyA9IHtcclxuICAgICAgICB0b3RhbFJldmlld3M6IDAsXHJcbiAgICAgICAgc3RyZWFrRGF5czogMCxcclxuICAgICAgICBsYXN0U3R1ZHlEYXRlOiBudWxsIGFzIHN0cmluZyB8IG51bGxcclxuICAgIH07XHJcbiAgICBwcml2YXRlIHNhdmVDYWxsYmFjazogKCkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgdm9jYWJ1bGFyeUZvbGRlclBhdGggPSAnVm9jYWJ1bGFyeSc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHNhdmVDYWxsYmFjazogKCkgPT4gdm9pZCwgZm9sZGVyUGF0aD86IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrID0gc2F2ZUNhbGxiYWNrO1xyXG4gICAgICAgIGlmIChmb2xkZXJQYXRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGggPSBmb2xkZXJQYXRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRpYWxpemVWb2NhYnVsYXJ5Rm9sZGVyKCk7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplRGVmYXVsdEJvb2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIyRThcdUM1QjRcdUM3QTUgXHVEM0Y0XHVCMzU0IFx1Q0QwOFx1QUUzMFx1RDY1NFxyXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplVm9jYWJ1bGFyeUZvbGRlcigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUQzRjRcdUIzNTRcdUFDMDAgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QUNFMCBURm9sZGVyIFx1Qzc3OFx1QzJBNFx1RDEzNFx1QzJBNFx1Qzc3OCBcdUFDQkRcdUM2QjBcclxuICAgICAgICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QkJDMFx1Qjg1QyBcdUM1NDRcdUJCMzRcdUFDODNcdUIzQzQgXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUQzRjRcdUIzNTRcdUFDMDAgXHVDODc0XHVDN0FDXHVENTU4XHVDOUMwIFx1QzU0QVx1QjI5NCBcdUFDQkRcdUM2QjBcdUM1RDBcdUI5Q0MgXHVDMEREXHVDMTMxXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gXHVEM0Y0XHVCMzU0XHVBQzAwIFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTQgXHVBQ0JEXHVDNkIwXHVCMjk0IFx1QzgxNVx1QzBDMVx1QzgwMVx1Qzc3OCBcdUMwQzFcdUQ2NjlcdUM3NzRcdUJCQzBcdUI4NUMgXHVBQ0JEXHVBQ0UwXHVCOUNDIFx1Q0Q5Q1x1QjgyNVxyXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnYWxyZWFkeSBleGlzdHMnKSB8fCBcclxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZvbGRlciBhbHJlYWR5IGV4aXN0cycpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdhbHJlYWR5IHByZXNlbnQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTRcdUFDMDAgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NCBcdUFDQkRcdUM2QjAgKFx1QzgxNVx1QzBDMSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEM0Y0XHVCMzU0IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEM0Y0XHVCMzU0IFx1QzBERFx1QzEzMSBcdUM5MTEgXHVDNTRDIFx1QzIxOCBcdUM1QzZcdUIyOTQgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVBRTMwXHVCQ0Y4IGJvb2sgXHVDRDA4XHVBRTMwXHVENjU0XHJcbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVEZWZhdWx0Qm9vaygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYm9va3MuaGFzKCdkZWZhdWx0JykpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdEJvb2s6IEJvb2sgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1x1QUUzMFx1QkNGOCBcdUIyRThcdUM1QjRcdUM3QTUnLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdcdUFFMzBcdUJDRjggXHVCMkU4XHVDNUI0XHVDN0E1XHVDNzg1XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgd29yZENvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiB0cnVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuYm9va3Muc2V0KCdkZWZhdWx0JywgZGVmYXVsdEJvb2spO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGRlZmF1bHRCb29rKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQm9va1x1Qzc0NCBNRCBcdUQzMENcdUM3N0NcdUI4NUMgXHVDODAwXHVDN0E1XHJcbiAgICBwcml2YXRlIGFzeW5jIHNhdmVCb29rVG9GaWxlKGJvb2s6IEJvb2spOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBib29rTmFtZSA9IHR5cGVvZiBib29rLm5hbWUgPT09ICdzdHJpbmcnID8gYm9vay5uYW1lIDogJ3VudGl0bGVkJztcclxuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke2Jvb2tOYW1lLnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCAnXycpfS5tZGA7XHJcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGAke3RoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2tcdUM3NTggXHVCMkU4XHVDNUI0XHVCNEU0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxyXG4gICAgICAgIGNvbnN0IGJvb2tXb3JkcyA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSBib29rLmlkKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZEEgPSB0eXBlb2YgYS53b3JkID09PSAnc3RyaW5nJyA/IGEud29yZCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZEIgPSB0eXBlb2YgYi53b3JkID09PSAnc3RyaW5nJyA/IGIud29yZCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdvcmRBLmxvY2FsZUNvbXBhcmUod29yZEIpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gWUFNTCBmcm9udG1hdHRlciBcdUMwRERcdUMxMzFcclxuICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IFtcclxuICAgICAgICAgICAgJy0tLScsXHJcbiAgICAgICAgICAgIGBib29rSWQ6ICR7Ym9vay5pZH1gLFxyXG4gICAgICAgICAgICBgbmFtZTogXCIke2Jvb2submFtZX1cImAsXHJcbiAgICAgICAgICAgIGBkZXNjcmlwdGlvbjogXCIke2Jvb2suZGVzY3JpcHRpb259XCJgLFxyXG4gICAgICAgICAgICBgY3JlYXRlZEF0OiAke2Jvb2suY3JlYXRlZEF0fWAsXHJcbiAgICAgICAgICAgIGB1cGRhdGVkQXQ6ICR7Ym9vay51cGRhdGVkQXR9YCxcclxuICAgICAgICAgICAgYHdvcmRDb3VudDogJHtib29rV29yZHMubGVuZ3RofWAsXHJcbiAgICAgICAgICAgIGBpc0RlZmF1bHQ6ICR7Ym9vay5pc0RlZmF1bHR9YCxcclxuICAgICAgICAgICAgJy0tLScsXHJcbiAgICAgICAgICAgICcnXHJcbiAgICAgICAgXS5qb2luKCdcXG4nKTtcclxuXHJcbiAgICAgICAgLy8gXHVCOUM4XHVEMDZDXHVCMkU0XHVDNkI0IFx1Q0Y1OFx1RDE1MFx1Q0UyMCBcdUMwRERcdUMxMzFcclxuICAgICAgICBsZXQgY29udGVudCA9IGZyb250bWF0dGVyO1xyXG4gICAgICAgIGNvbnRlbnQgKz0gYCMgJHtib29rLm5hbWV9XFxuXFxuYDtcclxuICAgICAgICBjb250ZW50ICs9IGAke2Jvb2suZGVzY3JpcHRpb259XFxuXFxuYDtcclxuICAgICAgICBjb250ZW50ICs9IGAjIyBcdUIyRThcdUM1QjQgXHVCQUE5XHVCODVEICgke2Jvb2tXb3Jkcy5sZW5ndGh9XHVBQzFDKVxcblxcbmA7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiBib29rV29yZHMpIHtcclxuICAgICAgICAgICAgY29udGVudCArPSBgIyMjICR7d29yZC53b3JkfVxcblxcbmA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAod29yZC5wcm9udW5jaWF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAqKlx1QkMxQ1x1Qzc0QzoqKiAke3dvcmQucHJvbnVuY2lhdGlvbn1cXG5cXG5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAqKlx1QjczQjoqKlxcbmA7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbWVhbmluZyBvZiB3b3JkLm1lYW5pbmdzKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtICR7bWVhbmluZ31cXG5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gJ1xcbic7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAod29yZC5zaW1pbGFyV29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgKipcdUM3MjBcdUMwQUNcdUQ1NUMgXHVCMkU4XHVDNUI0OioqICR7d29yZC5zaW1pbGFyV29yZHMuam9pbignLCAnKX1cXG5cXG5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAod29yZC5leGFtcGxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAqKlx1QzYwOFx1QkIzODoqKlxcbmA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV4YW1wbGUgb2Ygd29yZC5leGFtcGxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gJHtleGFtcGxlLmVuZ2xpc2h9XFxuYDtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAgIC0gJHtleGFtcGxlLmtvcmVhbn1cXG5gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSAnXFxuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QzgxNVx1QkNGNFxyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAqKlx1QkNGNVx1QzJCNSBcdUM4MTVcdUJDRjQ6KipcXG5gO1xyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTg6ICR7d29yZC5yZXZpZXdDb3VudH1cXG5gO1xyXG4gICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QjA5Q1x1Qzc3NFx1QjNDNDogJHt3b3JkLmRpZmZpY3VsdHl9XFxuYDtcclxuICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQ0Y1XHVDMkI1OiAke3dvcmQubGFzdFJldmlld2VkIHx8ICdcdUM1QzZcdUM3NEMnfVxcbmA7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0gXHVDRDk0XHVBQzAwXHVDNzdDOiAke3dvcmQuYWRkZWREYXRlfVxcbmA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdUMyQTRcdUQzOThcdUM3NzRcdUMyQTRcdUI0REMgXHVCOUFDXHVENTNDXHVEMkYwXHVDMTU4IFx1QzgxNVx1QkNGNFxyXG4gICAgICAgICAgICBpZiAod29yZC5zY2hlZHVsZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYFxcbioqXHVDMkE0XHVEMzk4XHVDNzc0XHVDMkE0XHVCNERDIFx1QjlBQ1x1RDUzQ1x1RDJGMFx1QzE1ODoqKlxcbmA7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QjJFNFx1Qzc0QyBcdUJDRjVcdUMyQjVcdUM3N0M6ICR7d29yZC5zY2hlZHVsZUluZm8uZHVlRGF0ZX1cXG5gO1xyXG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgLSBcdUJDRjVcdUMyQjUgXHVBQzA0XHVBQ0E5OiAke3dvcmQuc2NoZWR1bGVJbmZvLmludGVydmFsfVx1Qzc3Q1xcbmA7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QzZBOVx1Qzc3NFx1QjNDNDogJHt3b3JkLnNjaGVkdWxlSW5mby5lYXNlfVxcbmA7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAtIFx1QzJFNFx1RDMyOCBcdUQ2OUZcdUMyMTg6ICR7d29yZC5zY2hlZHVsZUluZm8ubGFwc2VDb3VudH1cXG5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb250ZW50ICs9ICdcXG4tLS1cXG5cXG4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmdGaWxlLCBjb250ZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBjb250ZW50KTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVEMzBDXHVDNzdDXHVDNzc0IFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NUNcdUIyRTRcdUJBNzQgbW9kaWZ5XHVCODVDIFx1QzdBQ1x1QzJEQ1x1QjNDNFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2FscmVhZHkgZXhpc3RzJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1RDMwQ1x1Qzc3Q1x1Qzc3NCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTU4XHVDOUMwXHVCOUNDIFRGaWxlXHVDNzc0IFx1QzU0NFx1QjJDQyBcdUFDQkRcdUM2QjAgKFx1QzYwODogXHVEM0Y0XHVCMzU0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHVDNzc0XHVCMjk0IFx1QzgxNVx1QzBDMVx1QzgwMVx1Qzc3OCBcdUMwQzFcdUQ2NjlcdUM3N0MgXHVDMjE4IFx1Qzc4OFx1QzczQ1x1QkJDMFx1Qjg1QyBcdUM4NzBcdUM2QTlcdUQ3ODggXHVDQzk4XHVCOUFDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUIyRThcdUM1QjRcdUM3QTUgXHVEMzBDXHVDNzdDIFx1QzgwMFx1QzdBNSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzMENcdUM3N0MgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1EIFx1RDMwQ1x1Qzc3Q1x1QzVEMFx1QzExQyBCb29rXHVBQ0ZDIFx1QjJFOFx1QzVCNFx1QjRFNCBcdUI4NUNcdUI0RENcclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZEJvb2tGcm9tRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICBjb25zdCB7IGZyb250bWF0dGVyLCBib2R5IH0gPSB0aGlzLnBhcnNlTURGaWxlKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFmcm9udG1hdHRlci5ib29rSWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIC8vIEJvb2sgXHVDODE1XHVCQ0Y0IFx1QkNGNVx1QzZEMFxyXG4gICAgICAgICAgICBjb25zdCBib29rOiBCb29rID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGZyb250bWF0dGVyLmJvb2tJZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGZyb250bWF0dGVyLm5hbWUgfHwgZmlsZS5iYXNlbmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBmcm9udG1hdHRlci5kZXNjcmlwdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogZnJvbnRtYXR0ZXIuY3JlYXRlZEF0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogZnJvbnRtYXR0ZXIudXBkYXRlZEF0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHdvcmRDb3VudDogZnJvbnRtYXR0ZXIud29yZENvdW50IHx8IDAsXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGZyb250bWF0dGVyLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5ib29rcy5zZXQoYm9vay5pZCwgYm9vayk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdUIyRThcdUM1QjRcdUI0RTQgXHVEMzBDXHVDMkYxXHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5wYXJzZVdvcmRzRnJvbU1hcmtkb3duKGJvZHksIGJvb2suaWQpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud29yZHMuc2V0KHdvcmQud29yZC50b0xvd2VyQ2FzZSgpLCB3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1QjJFOFx1QzVCNFx1QzdBNSBcdUQzMENcdUM3N0MgXHVCODVDXHVCNERDIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1EIFx1RDMwQ1x1Qzc3QyBcdUQzMENcdUMyRjEgKGZyb250bWF0dGVyXHVDNjQwIGJvZHkgXHVCRDg0XHVCOUFDKVxyXG4gICAgcHJpdmF0ZSBwYXJzZU1ERmlsZShjb250ZW50OiBzdHJpbmcpOiB7IGZyb250bWF0dGVyOiBhbnksIGJvZHk6IHN0cmluZyB9IHtcclxuICAgICAgICBjb25zdCBmcm9udG1hdHRlclJlZ2V4ID0gL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS1cXG4oW1xcc1xcU10qKSQvO1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaChmcm9udG1hdHRlclJlZ2V4KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIW1hdGNoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGZyb250bWF0dGVyOiB7fSwgYm9keTogY29udGVudCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBmcm9udG1hdHRlclRleHQgPSBtYXRjaFsxXTtcclxuICAgICAgICBjb25zdCBib2R5ID0gbWF0Y2hbMl07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVBQzA0XHVCMkU4XHVENTVDIFlBTUwgXHVEMzBDXHVDMkYxXHJcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXI6IGFueSA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXJUZXh0LnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sb25JbmRleCA9IGxpbmUuaW5kZXhPZignOicpO1xyXG4gICAgICAgICAgICBpZiAoY29sb25JbmRleCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGxpbmUuc3Vic3RyaW5nKDAsIGNvbG9uSW5kZXgpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGxpbmUuc3Vic3RyaW5nKGNvbG9uSW5kZXggKyAxKS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1QjUzMFx1QzYzNFx1RDQ1QyBcdUM4MUNcdUFDNzBcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIHZhbHVlLmVuZHNXaXRoKCdcIicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgxLCAtMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1RDBDMFx1Qzc4NSBcdUJDQzBcdUQ2NThcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSBmcm9udG1hdHRlcltrZXldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSAnZmFsc2UnKSBmcm9udG1hdHRlcltrZXldID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNOYU4oTnVtYmVyKHZhbHVlKSkpIGZyb250bWF0dGVyW2tleV0gPSBOdW1iZXIodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBmcm9udG1hdHRlcltrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHsgZnJvbnRtYXR0ZXIsIGJvZHkgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUI5QzhcdUQwNkNcdUIyRTRcdUM2QjRcdUM1RDBcdUMxMUMgXHVCMkU4XHVDNUI0XHVCNEU0IFx1RDMwQ1x1QzJGMVxyXG4gICAgcHJpdmF0ZSBwYXJzZVdvcmRzRnJvbU1hcmtkb3duKG1hcmtkb3duOiBzdHJpbmcsIGJvb2tJZDogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgY29uc3Qgd29yZHM6IFZvY2FidWxhcnlDYXJkW10gPSBbXTtcclxuICAgICAgICBjb25zdCB3b3JkU2VjdGlvbnMgPSBtYXJrZG93bi5zcGxpdCgnLS0tJykuZmlsdGVyKHNlY3Rpb24gPT4gc2VjdGlvbi50cmltKCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiB3b3JkU2VjdGlvbnMpIHtcclxuICAgICAgICAgICAgY29uc3Qgd29yZCA9IHRoaXMucGFyc2VXb3JkU2VjdGlvbihzZWN0aW9uLCBib29rSWQpO1xyXG4gICAgICAgICAgICBpZiAod29yZCkge1xyXG4gICAgICAgICAgICAgICAgd29yZHMucHVzaCh3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gd29yZHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVBQzFDXHVCQ0M0IFx1QjJFOFx1QzVCNCBcdUMxMzlcdUMxNTggXHVEMzBDXHVDMkYxXHJcbiAgICBwcml2YXRlIHBhcnNlV29yZFNlY3Rpb24oc2VjdGlvbjogc3RyaW5nLCBib29rSWQ6IHN0cmluZyk6IFZvY2FidWxhcnlDYXJkIHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBzZWN0aW9uLnNwbGl0KCdcXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSk7XHJcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHdvcmQgPSAnJztcclxuICAgICAgICBsZXQgcHJvbnVuY2lhdGlvbiA9ICcnO1xyXG4gICAgICAgIGNvbnN0IG1lYW5pbmdzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNpbWlsYXJXb3Jkczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBjb25zdCBleGFtcGxlczogeyBlbmdsaXNoOiBzdHJpbmc7IGtvcmVhbjogc3RyaW5nIH1bXSA9IFtdO1xyXG4gICAgICAgIGxldCByZXZpZXdDb3VudCA9IDA7XHJcbiAgICAgICAgbGV0IGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdnb29kJyB8ICdoYXJkJyA9ICdnb29kJztcclxuICAgICAgICBsZXQgbGFzdFJldmlld2VkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBsZXQgYWRkZWREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIGxldCBzY2hlZHVsZUluZm86IGFueSA9IHVuZGVmaW5lZDtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgY3VycmVudFNlY3Rpb24gPSAnJztcclxuICAgICAgICBsZXQgY3VycmVudEV4YW1wbGU6IHsgZW5nbGlzaD86IHN0cmluZzsga29yZWFuPzogc3RyaW5nIH0gPSB7fTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QjJFOFx1QzVCNFx1QkE4NSBcdUNEOTRcdUNEOUMgKCMjIyBcdUQ1RTRcdUIzNTQpXHJcbiAgICAgICAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcjIyMgJykpIHtcclxuICAgICAgICAgICAgICAgIHdvcmQgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoNCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1QzEzOVx1QzE1OCBcdUFENkNcdUJEODRcclxuICAgICAgICAgICAgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVCQzFDXHVDNzRDOioqJykpIHtcclxuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb24gPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoNykudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAncHJvbnVuY2lhdGlvbic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnKipcdUI3M0I6KionKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAnbWVhbmluZ3MnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVDNzIwXHVDMEFDXHVENTVDIFx1QjJFOFx1QzVCNDoqKicpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaW1pbGFyV29yZHNUZXh0ID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDEyKS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHMucHVzaCguLi5zaW1pbGFyV29yZHNUZXh0LnNwbGl0KCcsJykubWFwKHcgPT4gdy50cmltKCkpKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ3NpbWlsYXInO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJyoqXHVDNjA4XHVCQjM4OioqJykpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ2V4YW1wbGVzJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcqKlx1QkNGNVx1QzJCNSBcdUM4MTVcdUJDRjQ6KionKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAncmV2aWV3JztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCcqKlx1QzJBNFx1RDM5OFx1Qzc3NFx1QzJBNFx1QjREQyBcdUI5QUNcdUQ1M0NcdUQyRjBcdUMxNTg6KionKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAnc3BhY2VkLXJlcGV0aXRpb24nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnbWVhbmluZ3MnICYmIHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gJykpIHtcclxuICAgICAgICAgICAgICAgIG1lYW5pbmdzLnB1c2godHJpbW1lZExpbmUuc3Vic3RyaW5nKDIpLnRyaW0oKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdleGFtcGxlcycpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1QjRFNFx1QzVFQ1x1QzRGMFx1QUUzMFx1Qjk3QyBcdUFDRTBcdUI4MjRcdUQ1NUMgXHVDNjA4XHVCQjM4IFx1RDMwQ1x1QzJGMVxyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnLSAnKSAmJiAhbGluZS5zdGFydHNXaXRoKCcgIC0gJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdUM2MDFcdUM1QjQgXHVDNjA4XHVCQjM4IChcdUI0RTRcdUM1RUNcdUM0RjBcdUFFMzAgXHVDNUM2XHVDNzRDKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RXhhbXBsZS5lbmdsaXNoICYmIGN1cnJlbnRFeGFtcGxlLmtvcmVhbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2xpc2g6IGN1cnJlbnRFeGFtcGxlLmVuZ2xpc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrb3JlYW46IGN1cnJlbnRFeGFtcGxlLmtvcmVhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEV4YW1wbGUgPSB7IGVuZ2xpc2g6IGxpbmUuc3Vic3RyaW5nKDIpLnRyaW0oKSB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJyAgLSAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1RDU1Q1x1QUUwMCBcdUJDODhcdUM1RUQgKDJcdUNFNzggXHVCNEU0XHVDNUVDXHVDNEYwXHVBRTMwKVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFeGFtcGxlLmtvcmVhbiA9IGxpbmUuc3Vic3RyaW5nKDQpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U2VjdGlvbiA9PT0gJ3JldmlldycpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QkNGNVx1QzJCNSBcdUQ2OUZcdUMyMTg6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV2aWV3Q291bnQgPSBwYXJzZUludCh0cmltbWVkTGluZS5zdWJzdHJpbmcoOSkudHJpbSgpKSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QjA5Q1x1Qzc3NFx1QjNDNDogJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWZmID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDcpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZiA9PT0gJ2Vhc3knIHx8IGRpZmYgPT09ICdnb29kJyB8fCBkaWZmID09PSAnaGFyZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eSA9IGRpZmY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJDRjVcdUMyQjU6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFJldiA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZygxMSkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RSZXZpZXdlZCA9IGxhc3RSZXYgPT09ICdcdUM1QzZcdUM3NEMnID8gbnVsbCA6IGxhc3RSZXY7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVDRDk0XHVBQzAwXHVDNzdDOiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZGVkRGF0ZSA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZyg3KS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdzcGFjZWQtcmVwZXRpdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGlmICghc2NoZWR1bGVJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnLSBcdUIyRTRcdUM3NEMgXHVCQ0Y1XHVDMkI1XHVDNzdDOiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlSW5mby5kdWVEYXRlID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDEwKS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVCQ0Y1XHVDMkI1IFx1QUMwNFx1QUNBOTogJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnZhbFRleHQgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoOCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlSW5mby5pbnRlcnZhbCA9IHBhcnNlSW50KGludGVydmFsVGV4dC5yZXBsYWNlKCdcdUM3N0MnLCAnJykpIHx8IDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJy0gXHVDNkE5XHVDNzc0XHVCM0M0OiAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlSW5mby5lYXNlID0gcGFyc2VJbnQodHJpbW1lZExpbmUuc3Vic3RyaW5nKDcpLnRyaW0oKSkgfHwgMjUwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCctIFx1QzJFNFx1RDMyOCBcdUQ2OUZcdUMyMTg6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVJbmZvLmxhcHNlQ291bnQgPSBwYXJzZUludCh0cmltbWVkTGluZS5zdWJzdHJpbmcoOSkudHJpbSgpKSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUM2MDhcdUJCMzggXHVDQzk4XHVCOUFDXHJcbiAgICAgICAgaWYgKGN1cnJlbnRFeGFtcGxlLmVuZ2xpc2ggJiYgY3VycmVudEV4YW1wbGUua29yZWFuKSB7XHJcbiAgICAgICAgICAgIGV4YW1wbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZW5nbGlzaDogY3VycmVudEV4YW1wbGUuZW5nbGlzaCxcclxuICAgICAgICAgICAgICAgIGtvcmVhbjogY3VycmVudEV4YW1wbGUua29yZWFuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF3b3JkKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3b3JkOiB3b3JkLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgIHByb251bmNpYXRpb24sXHJcbiAgICAgICAgICAgIG1lYW5pbmdzLFxyXG4gICAgICAgICAgICBzaW1pbGFyV29yZHMsXHJcbiAgICAgICAgICAgIGV4YW1wbGVzLFxyXG4gICAgICAgICAgICByZXZpZXdDb3VudCxcclxuICAgICAgICAgICAgZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgbGFzdFJldmlld2VkLFxyXG4gICAgICAgICAgICBhZGRlZERhdGUsXHJcbiAgICAgICAgICAgIGJvb2tJZCxcclxuICAgICAgICAgICAgc2NoZWR1bGVJbmZvXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0XHVDN0E1IFx1RDMwQ1x1Qzc3QyBcdUI4NUNcdUI0RENcclxuICAgIGFzeW5jIGxvYWRBbGxCb29rcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLmJvb2tzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy53b3Jkcy5jbGVhcigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVZvY2FidWxhcnlGb2xkZXIoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVEZWZhdWx0Qm9vaygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRoKTtcclxuICAgICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkQm9va0Zyb21GaWxlKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1QzEyNFx1QzgxNSBcdUQzMENcdUM3N0MgXHVCODVDXHVCNERDXHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUMxMjRcdUM4MTUgXHVEMzBDXHVDNzdDIFx1QzgwMFx1QzdBNS9cdUI4NUNcdUI0RENcclxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aH0vc2V0dGluZ3MuanNvbmApO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzLFxyXG4gICAgICAgICAgICBzdGF0aXN0aWNzOiB0aGlzLnN0YXRpc3RpY3NcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzZXR0aW5nc1BhdGgpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShleGlzdGluZ0ZpbGUsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHNldHRpbmdzUGF0aCwgY29udGVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdUMxMjRcdUM4MTUgXHVEMzBDXHVDNzdDIFx1QzgwMFx1QzdBNSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGxvYWRTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBzZXR0aW5nc1BhdGggPSBub3JtYWxpemVQYXRoKGAke3RoaXMudm9jYWJ1bGFyeUZvbGRlclBhdGh9L3NldHRpbmdzLmpzb25gKTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNldHRpbmdzUGF0aCk7XHJcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncywgLi4uZGF0YS5zZXR0aW5ncyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdGlzdGljcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGlzdGljcyA9IHsgLi4udGhpcy5zdGF0aXN0aWNzLCAuLi5kYXRhLnN0YXRpc3RpY3MgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignXHVDMTI0XHVDODE1IFx1RDMwQ1x1Qzc3QyBcdUI4NUNcdUI0REMgXHVDMkU0XHVEMzI4LCBcdUFFMzBcdUJDRjhcdUFDMTIgXHVDMEFDXHVDNkE5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQm9vayBcdUFEMDBcdUI5QUMgXHVCQTU0XHVDMTFDXHVCNERDXHVCNEU0XHJcbiAgICBhc3luYyBjcmVhdGVCb29rKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZyA9ICcnKTogUHJvbWlzZTxCb29rPiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSBgYm9va18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XHJcbiAgICAgICAgY29uc3QgYm9vazogQm9vayA9IHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHdvcmRDb3VudDogMCxcclxuICAgICAgICAgICAgaXNEZWZhdWx0OiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5ib29rcy5zZXQoaWQsIGJvb2spO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgICAgICByZXR1cm4gYm9vaztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1cGRhdGVCb29rKGJvb2tJZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPEJvb2s+KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XHJcbiAgICAgICAgaWYgKCFib29rKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQm9vayBcIiR7Ym9va0lkfVwiXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEJvb2s6IEJvb2sgPSB7XHJcbiAgICAgICAgICAgIC4uLmJvb2ssXHJcbiAgICAgICAgICAgIC4uLnVwZGF0ZXMsXHJcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5ib29rcy5zZXQoYm9va0lkLCB1cGRhdGVkQm9vayk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZSh1cGRhdGVkQm9vayk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGVCb29rKGJvb2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKGJvb2tJZCA9PT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1QzVCNFx1QzdBNVx1Qzc0MCBcdUMwQURcdUM4MUNcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldChib29rSWQpO1xyXG4gICAgICAgIGlmICghYm9vaykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJvb2sgXCIke2Jvb2tJZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGJvb2tcdUM1RDAgXHVDMThEXHVENTVDIFx1QkFBOFx1QjRFMCBcdUIyRThcdUM1QjQgXHVDMEFEXHVDODFDXHJcbiAgICAgICAgY29uc3Qgd29yZHNUb0RlbGV0ZSA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSBib29rSWQpXHJcbiAgICAgICAgICAgIC5tYXAod29yZCA9PiB3b3JkLndvcmQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkc1RvRGVsZXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMud29yZHMuZGVsZXRlKHdvcmQudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBib29rIFx1QzBBRFx1QzgxQ1xyXG4gICAgICAgIHRoaXMuYm9va3MuZGVsZXRlKGJvb2tJZCk7XHJcblxyXG4gICAgICAgIC8vIFx1RDMwQ1x1Qzc3QyBcdUMwQURcdUM4MUNcclxuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke2Jvb2submFtZS5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgJ18nKX0ubWRgO1xyXG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0aGlzLnZvY2FidWxhcnlGb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWApO1xyXG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIudHJhc2hGaWxlKGZpbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIGJvb2tcdUM3NzQgXHVDMEFEXHVDODFDXHVCNDFDIGJvb2tcdUM3NzRcdUJBNzQgXHVBRTMwXHVCQ0Y4IGJvb2tcdUM3M0NcdUI4NUMgXHVCQ0MwXHVBQ0JEXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCA9PT0gYm9va0lkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCA9ICdkZWZhdWx0JztcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsQm9va3MoKTogQm9va1tdIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmJvb2tzLnZhbHVlcygpKS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhLmlzRGVmYXVsdCkgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICBpZiAoYi5pc0RlZmF1bHQpIHJldHVybiAxO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gbmFtZSBcdUMxOERcdUMxMzFcdUM3NzQgXHVCQjM4XHVDNzkwXHVDNUY0XHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUNFMCBcdUM1NDhcdUM4MDRcdUQ1NThcdUFDOEMgXHVCRTQ0XHVBRDUwXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWVBID0gdHlwZW9mIGEubmFtZSA9PT0gJ3N0cmluZycgPyBhLm5hbWUgOiAnJztcclxuICAgICAgICAgICAgY29uc3QgbmFtZUIgPSB0eXBlb2YgYi5uYW1lID09PSAnc3RyaW5nJyA/IGIubmFtZSA6ICcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG5hbWVBLmxvY2FsZUNvbXBhcmUobmFtZUIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEJvb2soYm9va0lkOiBzdHJpbmcpOiBCb29rIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib29rcy5nZXQoYm9va0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXJyZW50Qm9vaygpOiBCb29rIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib29rcy5nZXQodGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZXRDdXJyZW50Qm9vayhib29rSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghdGhpcy5ib29rcy5oYXMoYm9va0lkKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJvb2sgXCIke2Jvb2tJZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkID0gYm9va0lkO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBCb29rXHVCQ0M0IFx1QjJFOFx1QzVCNCBcdUMyMTggXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICBwcml2YXRlIHVwZGF0ZUJvb2tXb3JkQ291bnQoYm9va0lkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB3b3JkQ291bnQgPSBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gYm9va0lkKS5sZW5ndGg7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay53b3JkQ291bnQgPSB3b3JkQ291bnQ7XHJcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUIyRThcdUM1QjQgXHVDRDk0XHVBQzAwXHJcbiAgICBhc3luYyBhZGRXb3JkKHdvcmREYXRhOiBWb2NhYnVsYXJ5Q2FyZCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHdvcmQgPSB3b3JkRGF0YS53b3JkLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMud29yZHMuaGFzKHdvcmQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHVCMkU4XHVDNUI0IFwiJHt3b3JkRGF0YS53b3JkfVwiXHVCMjk0IFx1Qzc3NFx1QkJGOCBcdUM4NzRcdUM3QUNcdUQ1NjlcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBuZXdXb3JkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcclxuICAgICAgICAgICAgLi4ud29yZERhdGEsXHJcbiAgICAgICAgICAgIHdvcmQ6IHdvcmREYXRhLndvcmQudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgcmV2aWV3Q291bnQ6IDAsXHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6ICdnb29kJyxcclxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBudWxsLFxyXG4gICAgICAgICAgICBhZGRlZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgYm9va0lkOiB3b3JkRGF0YS5ib29rSWQgfHwgdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy53b3Jkcy5zZXQod29yZCwgbmV3V29yZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2sgXHVEMzBDXHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldChuZXdXb3JkLmJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay53b3JkQ291bnQrKztcclxuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzBBRFx1QzgxQ1xyXG4gICAgYXN5bmMgcmVtb3ZlV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB3b3JkS2V5ID0gd29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IHdvcmREYXRhID0gdGhpcy53b3Jkcy5nZXQod29yZEtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF3b3JkRGF0YSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJvb2tJZCA9IHdvcmREYXRhLmJvb2tJZDtcclxuICAgICAgICB0aGlzLndvcmRzLmRlbGV0ZSh3b3JkS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9vayBcdUQzMENcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KGJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay53b3JkQ291bnQtLTtcclxuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOCAoXHVCQ0Y1XHVDMkI1IFx1QUNCMFx1QUNGQylcclxuICAgIGFzeW5jIHVwZGF0ZVdvcmQod29yZDogc3RyaW5nLCBkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB3b3JkS2V5ID0gd29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IHdvcmREYXRhID0gdGhpcy53b3Jkcy5nZXQod29yZEtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF3b3JkRGF0YSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdvcmREYXRhLnJldmlld0NvdW50Kys7XHJcbiAgICAgICAgd29yZERhdGEuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHk7XHJcbiAgICAgICAgd29yZERhdGEubGFzdFJldmlld2VkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG5cclxuICAgICAgICAvLyBcdUQxQjVcdUFDQzQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnRvdGFsUmV2aWV3cysrO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RyZWFrKCk7XHJcblxyXG4gICAgICAgIC8vIFx1RDU3NFx1QjJGOSBib29rIFx1RDMwQ1x1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBjb25zdCBib29rID0gdGhpcy5ib29rcy5nZXQod29yZERhdGEuYm9va0lkKTtcclxuICAgICAgICBpZiAoYm9vaykge1xyXG4gICAgICAgICAgICBib29rLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQm9va1RvRmlsZShib29rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggKFx1QkNGNVx1QzJCNSBcdUFDQjBcdUFDRkMgKyBcdUMyQTRcdUQzOThcdUM3NzRcdUMyQTRcdUI0REMgXHVCOUFDXHVENTNDXHVEMkYwXHVDMTU4IFx1QzgxNVx1QkNGNClcclxuICAgIGFzeW5jIHVwZGF0ZVdvcmRXaXRoU2NoZWR1bGUoXHJcbiAgICAgICAgd29yZDogc3RyaW5nLCBcclxuICAgICAgICBkaWZmaWN1bHR5OiAnZWFzeScgfCAnZ29vZCcgfCAnaGFyZCcsIFxyXG4gICAgICAgIHNjaGVkdWxlSW5mbz86IGFueVxyXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgd29yZEtleSA9IHdvcmQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBjb25zdCB3b3JkRGF0YSA9IHRoaXMud29yZHMuZ2V0KHdvcmRLZXkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghd29yZERhdGEpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUIyRThcdUM1QjQgXCIke3dvcmR9XCJcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3b3JkRGF0YS5yZXZpZXdDb3VudCsrO1xyXG4gICAgICAgIHdvcmREYXRhLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5O1xyXG4gICAgICAgIHdvcmREYXRhLmxhc3RSZXZpZXdlZCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUMyQTRcdUQzOThcdUM3NzRcdUMyQTRcdUI0REMgXHVCOUFDXHVENTNDXHVEMkYwXHVDMTU4IFx1QzgxNVx1QkNGNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICBpZiAoc2NoZWR1bGVJbmZvKSB7XHJcbiAgICAgICAgICAgIHdvcmREYXRhLnNjaGVkdWxlSW5mbyA9IHNjaGVkdWxlSW5mbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1RDFCNVx1QUNDNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgICAgICB0aGlzLnN0YXRpc3RpY3MudG90YWxSZXZpZXdzKys7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdHJlYWsoKTtcclxuXHJcbiAgICAgICAgLy8gXHVENTc0XHVCMkY5IGJvb2sgXHVEMzBDXHVDNzdDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGNvbnN0IGJvb2sgPSB0aGlzLmJvb2tzLmdldCh3b3JkRGF0YS5ib29rSWQpO1xyXG4gICAgICAgIGlmIChib29rKSB7XHJcbiAgICAgICAgICAgIGJvb2sudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVCb29rVG9GaWxlKGJvb2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QzgwNFx1Q0NCNCBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4IChMTE0gQVBJXHVCODVDIFx1QUMwMFx1QzgzOFx1QzYyOCBcdUM4MTVcdUJDRjRcdUI4NUMgXHVCMzZFXHVDNUI0XHVDNEYwXHVBRTMwKVxyXG4gICAgYXN5bmMgdXBkYXRlV29yZERhdGEod29yZDogc3RyaW5nLCB1cGRhdGVkV29yZERhdGE6IFZvY2FidWxhcnlDYXJkKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgd29yZEtleSA9IHdvcmQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ1dvcmQgPSB0aGlzLndvcmRzLmdldCh3b3JkS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWV4aXN0aW5nV29yZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjJFOFx1QzVCNCBcIiR7d29yZH1cIlx1Qjk3QyBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBcdUIyRThcdUM1QjRcdUM3NTggXHVCQ0Y1XHVDMkI1IFx1QUQwMFx1QjgyOCBcdUM4MTVcdUJDRjRcdUIyOTQgXHVDNzIwXHVDOUMwXHVENTU4XHVBQ0UwLCBcdUI3M0IgXHVDODE1XHVCQ0Y0XHVCOUNDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRXb3JkOiBWb2NhYnVsYXJ5Q2FyZCA9IHtcclxuICAgICAgICAgICAgLi4udXBkYXRlZFdvcmREYXRhLFxyXG4gICAgICAgICAgICB3b3JkOiB3b3JkS2V5LFxyXG4gICAgICAgICAgICByZXZpZXdDb3VudDogZXhpc3RpbmdXb3JkLnJldmlld0NvdW50LFxyXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiBleGlzdGluZ1dvcmQuZGlmZmljdWx0eSxcclxuICAgICAgICAgICAgbGFzdFJldmlld2VkOiBleGlzdGluZ1dvcmQubGFzdFJldmlld2VkLFxyXG4gICAgICAgICAgICBhZGRlZERhdGU6IGV4aXN0aW5nV29yZC5hZGRlZERhdGUsXHJcbiAgICAgICAgICAgIGJvb2tJZDogZXhpc3RpbmdXb3JkLmJvb2tJZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMud29yZHMuc2V0KHdvcmRLZXksIHVwZGF0ZWRXb3JkKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdUQ1NzRcdUIyRjkgYm9vayBcdUQzMENcdUM3N0MgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgY29uc3QgYm9vayA9IHRoaXMuYm9va3MuZ2V0KHVwZGF0ZWRXb3JkLmJvb2tJZCk7XHJcbiAgICAgICAgaWYgKGJvb2spIHtcclxuICAgICAgICAgICAgYm9vay51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUJvb2tUb0ZpbGUoYm9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4Q1xyXG4gICAgZ2V0V29yZCh3b3JkOiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud29yZHMuZ2V0KHdvcmQudG9Mb3dlckNhc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVENjA0XHVDN0FDIGJvb2tcdUM3NTggXHVCQUE4XHVCNEUwIFx1QjJFOFx1QzVCNCBcdUM4NzBcdUQ2OENcclxuICAgIGdldEFsbFdvcmRzKCk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmJvb2tJZCA9PT0gdGhpcy5zZXR0aW5ncy5jdXJyZW50Qm9va0lkKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZEEgPSB0eXBlb2YgYS53b3JkID09PSAnc3RyaW5nJyA/IGEud29yZCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZEIgPSB0eXBlb2YgYi53b3JkID09PSAnc3RyaW5nJyA/IGIud29yZCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdvcmRBLmxvY2FsZUNvbXBhcmUod29yZEIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUQyQjlcdUM4MTUgYm9va1x1Qzc1OCBcdUJBQThcdUI0RTAgXHVCMkU4XHVDNUI0IFx1Qzg3MFx1RDY4Q1xyXG4gICAgZ2V0V29yZHNCeUJvb2soYm9va0lkOiBzdHJpbmcpOiBWb2NhYnVsYXJ5Q2FyZFtdIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IGJvb2tJZClcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmRBID0gdHlwZW9mIGEud29yZCA9PT0gJ3N0cmluZycgPyBhLndvcmQgOiAnJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmRCID0gdHlwZW9mIGIud29yZCA9PT0gJ3N0cmluZycgPyBiLndvcmQgOiAnJztcclxuICAgICAgICAgICAgICAgIHJldHVybiB3b3JkQS5sb2NhbGVDb21wYXJlKHdvcmRCKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCQ0Y1XHVDMkI1IFx1QjMwMFx1QzBDMSBcdUIyRThcdUM1QjQgXHVDODcwXHVENjhDIChcdUQ2MDRcdUM3QUMgYm9vaylcclxuICAgIGdldFdvcmRzRm9yUmV2aWV3KCk6IFZvY2FidWxhcnlDYXJkW10ge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgcmV2aWV3SW50ZXJ2YWxNcyA9IHRoaXMuc2V0dGluZ3MucmV2aWV3SW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG5cclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZClcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghd29yZC5sYXN0UmV2aWV3ZWQpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmV2aWV3ID0gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdFJldmlldyA9IG5vdy5nZXRUaW1lKCkgLSBsYXN0UmV2aWV3LmdldFRpbWUoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVTaW5jZUxhc3RSZXZpZXcgPj0gcmV2aWV3SW50ZXJ2YWxNcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCMkU4XHVDNUI0IFx1QUM4MFx1QzBDOSAoXHVENjA0XHVDN0FDIGJvb2spXHJcbiAgICBzZWFyY2hXb3JkcyhxdWVyeTogc3RyaW5nKTogVm9jYWJ1bGFyeUNhcmRbXSB7XHJcbiAgICAgICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PlxyXG4gICAgICAgICAgICAgICAgd29yZC53b3JkLmluY2x1ZGVzKGxvd2VyUXVlcnkpIHx8XHJcbiAgICAgICAgICAgICAgICB3b3JkLm1lYW5pbmdzLnNvbWUobWVhbmluZyA9PiBtZWFuaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVEMUI1XHVBQ0M0IFx1Qzg3MFx1RDY4QyAoXHVENjA0XHVDN0FDIGJvb2spXHJcbiAgICBnZXRTdGF0aXN0aWNzKCkge1xyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5ib29rSWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudEJvb2tJZCk7XHJcbiAgICAgICAgY29uc3QgdG90YWxXb3JkcyA9IHdvcmRzLmxlbmd0aDtcclxuICAgICAgICBjb25zdCB0b3RhbFJldmlld3MgPSB0aGlzLnN0YXRpc3RpY3MudG90YWxSZXZpZXdzO1xyXG4gICAgICAgIGNvbnN0IGF2ZXJhZ2VEaWZmaWN1bHR5ID0gd29yZHMubGVuZ3RoID4gMCBcclxuICAgICAgICAgICAgPyB3b3Jkcy5yZWR1Y2UoKHN1bSwgd29yZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZmljdWx0eVZhbHVlID0gd29yZC5kaWZmaWN1bHR5ID09PSAnZWFzeScgPyAxIDogXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZC5kaWZmaWN1bHR5ID09PSAnZ29vZCcgPyAyIDogMztcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyBkaWZmaWN1bHR5VmFsdWU7XHJcbiAgICAgICAgICAgIH0sIDApIC8gd29yZHMubGVuZ3RoXHJcbiAgICAgICAgICAgIDogMDtcclxuXHJcbiAgICAgICAgY29uc3Qgd29yZHNCeURpZmZpY3VsdHkgPSB7XHJcbiAgICAgICAgICAgIGVhc3k6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2Vhc3knKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGdvb2Q6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2dvb2QnKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGhhcmQ6IHdvcmRzLmZpbHRlcih3ID0+IHcuZGlmZmljdWx0eSA9PT0gJ2hhcmQnKS5sZW5ndGhcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBcdUNENUNcdUFERkMgN1x1Qzc3QyBcdUQ2NUNcdUIzRDkgXHVBQ0M0XHVDMEIwXHJcbiAgICAgICAgY29uc3QgcmVjZW50QWN0aXZpdHkgPSB0aGlzLmNhbGN1bGF0ZVJlY2VudEFjdGl2aXR5KCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvdGFsV29yZHMsXHJcbiAgICAgICAgICAgIHRvdGFsUmV2aWV3cyxcclxuICAgICAgICAgICAgc3RyZWFrRGF5czogdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMsXHJcbiAgICAgICAgICAgIGF2ZXJhZ2VEaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICB3b3Jkc0J5RGlmZmljdWx0eSxcclxuICAgICAgICAgICAgcmVjZW50QWN0aXZpdHlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1Qzc3Q1x1Qzc3QyBcdUJBQTlcdUQ0NUMgXHVDOUM0XHVENTg5XHVCOTYwIFx1Qzg3MFx1RDY4QyAoXHVENjA0XHVDN0FDIGJvb2spXHJcbiAgICBnZXREYWlseUdvYWxQcm9ncmVzcygpIHtcclxuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgdG9kYXlXb3JkcyA9IEFycmF5LmZyb20odGhpcy53b3Jkcy52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQuYm9va0lkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRCb29rSWQpXHJcbiAgICAgICAgICAgIC5maWx0ZXIod29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpLnRvRGF0ZVN0cmluZygpID09PSB0b2RheTtcclxuICAgICAgICAgICAgfSkubGVuZ3RoO1xyXG5cclxuICAgICAgICBjb25zdCBnb2FsID0gdGhpcy5zZXR0aW5ncy5kYWlseUdvYWw7XHJcbiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IGdvYWwgPiAwID8gTWF0aC5taW4oKHRvZGF5V29yZHMgLyBnb2FsKSAqIDEwMCwgMTAwKSA6IDA7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IHRvZGF5V29yZHMsXHJcbiAgICAgICAgICAgIGdvYWw6IGdvYWwsXHJcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IHBlcmNlbnRhZ2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzEyNFx1QzgxNSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIGFzeW5jIHVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzOiBQYXJ0aWFsPHR5cGVvZiB0aGlzLnNldHRpbmdzPik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIC4uLm5ld1NldHRpbmdzIH07XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB0aGlzLnNhdmVDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM4MDBcdUM3QTVcdUM2QTkgXHVENjE1XHVDMkREXHVDNzNDXHVCODVDIFx1QkNDMFx1RDY1OCAoXHVENjM4XHVENjU4XHVDMTMxIFx1QzcyMFx1QzlDMClcclxuICAgIGdldERhdGFGb3JTYXZlKCk6IERhdGFiYXNlRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYm9va3M6IEFycmF5LmZyb20odGhpcy5ib29rcy52YWx1ZXMoKSksXHJcbiAgICAgICAgICAgIHdvcmRzOiBBcnJheS5mcm9tKHRoaXMud29yZHMudmFsdWVzKCkpLFxyXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5zZXR0aW5ncyxcclxuICAgICAgICAgICAgc3RhdGlzdGljczogdGhpcy5zdGF0aXN0aWNzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM4MDBcdUM3QTVcdUI0MUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVDNUQwXHVDMTFDIFx1Qjg1Q1x1QjREQyAoXHVENjM4XHVENjU4XHVDMTMxIFx1QzcyMFx1QzlDMClcclxuICAgIGFzeW5jIGxvYWRGcm9tRGF0YShkYXRhOiBEYXRhYmFzZURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyBNRCBcdUQzMENcdUM3N0MgXHVDMkRDXHVDMkE0XHVEMTVDXHVDNUQwXHVDMTFDXHVCMjk0IFx1Qzc3NCBcdUJBNTRcdUMxMUNcdUI0REMgXHVCMzAwXHVDMkUwIGxvYWRBbGxCb29rcygpXHVCOTdDIFx1QzBBQ1x1QzZBOVxyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZEFsbEJvb2tzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNUYwXHVDMThEIFx1RDU1OVx1QzJCNVx1Qzc3QyBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcclxuICAgIHByaXZhdGUgdXBkYXRlU3RyZWFrKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBsYXN0U3R1ZHlEYXRlID0gdGhpcy5zdGF0aXN0aWNzLmxhc3RTdHVkeURhdGUgXHJcbiAgICAgICAgICAgID8gbmV3IERhdGUodGhpcy5zdGF0aXN0aWNzLmxhc3RTdHVkeURhdGUpLnRvRGF0ZVN0cmluZygpXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGxhc3RTdHVkeURhdGUgPT09IHRvZGF5KSB7XHJcbiAgICAgICAgICAgIC8vIFx1QzYyNFx1QjI5OCBcdUM3NzRcdUJCRjggXHVENTU5XHVDMkI1XHVENTg4XHVDNzNDXHVCQTc0IFx1QzVGMFx1QzE4RFx1Qzc3QyBcdUM5OURcdUFDMDBcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghbGFzdFN0dWR5RGF0ZSkge1xyXG4gICAgICAgICAgICAvLyBcdUNDOThcdUM3NEMgXHVENTU5XHVDMkI1XHVENTU4XHVCMjk0IFx1QUNCRFx1QzZCMFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRpc3RpY3Muc3RyZWFrRGF5cyA9IDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgeWVzdGVyZGF5LnNldERhdGUoeWVzdGVyZGF5LmdldERhdGUoKSAtIDEpO1xyXG4gICAgICAgICAgICBjb25zdCB5ZXN0ZXJkYXlTdHIgPSB5ZXN0ZXJkYXkudG9EYXRlU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobGFzdFN0dWR5RGF0ZSA9PT0geWVzdGVyZGF5U3RyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUM1QjRcdUM4MUMgXHVENTU5XHVDMkI1XHVENTg4XHVDNzNDXHVCQTc0IFx1QzVGMFx1QzE4RFx1Qzc3QyBcdUM5OURcdUFDMDBcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGlzdGljcy5zdHJlYWtEYXlzKys7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdUM1RjBcdUMxOERcdUM3NzQgXHVCMDRBXHVDNUI0XHVDOUM0IFx1QUNCRFx1QzZCMCAxXHVCODVDIFx1QjlBQ1x1QzE0QlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0aXN0aWNzLnN0cmVha0RheXMgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN0YXRpc3RpY3MubGFzdFN0dWR5RGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUNENUNcdUFERkMgN1x1Qzc3QyBcdUQ2NUNcdUIzRDkgXHVBQ0M0XHVDMEIwXHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZVJlY2VudEFjdGl2aXR5KCkge1xyXG4gICAgICAgIGNvbnN0IGFjdGl2aXR5ID0gW107XHJcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gNjsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRvZGF5KTtcclxuICAgICAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBkYXRlLnRvRGF0ZVN0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgd29yZHNTdHVkaWVkID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKS5maWx0ZXIod29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpLnRvRGF0ZVN0cmluZygpID09PSBkYXRlU3RyO1xyXG4gICAgICAgICAgICB9KS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXZpZXdzQ29tcGxldGVkID0gQXJyYXkuZnJvbSh0aGlzLndvcmRzLnZhbHVlcygpKS5maWx0ZXIod29yZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdvcmQubGFzdFJldmlld2VkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXZpZXdEYXRlID0gbmV3IERhdGUod29yZC5sYXN0UmV2aWV3ZWQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldmlld0RhdGUudG9EYXRlU3RyaW5nKCkgPT09IGRhdGVTdHI7XHJcbiAgICAgICAgICAgIH0pLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGFjdGl2aXR5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZGF0ZTogZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXHJcbiAgICAgICAgICAgICAgICB3b3Jkc1N0dWRpZWQsXHJcbiAgICAgICAgICAgICAgICByZXZpZXdzQ29tcGxldGVkXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGFjdGl2aXR5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QjJFOFx1QzVCNFx1QzdBNSBcdUQzRjRcdUIzNTQgXHVBQ0JEXHVCODVDIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxyXG4gICAgdXBkYXRlVm9jYWJ1bGFyeUZvbGRlclBhdGgobmV3UGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy52b2NhYnVsYXJ5Rm9sZGVyUGF0aCA9IG5ld1BhdGg7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplVm9jYWJ1bGFyeUZvbGRlcigpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBJTExNU2VydmljZSwgV29yZERhdGFSZXF1ZXN0LCBXb3JkRGF0YVJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vY29yZS9wb3J0cy9zZXJ2aWNlcy9JTExNU2VydmljZSc7XHJcbmltcG9ydCB7IExMTVNlcnZpY2UgfSBmcm9tICcuL0xMTVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTExNU2VydmljZUFkYXB0ZXIgaW1wbGVtZW50cyBJTExNU2VydmljZSB7XHJcbiAgICBwcml2YXRlIGxsbVNlcnZpY2U6IExMTVNlcnZpY2U7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMubGxtU2VydmljZSA9IG5ldyBMTE1TZXJ2aWNlKHNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRXb3JkRGF0YShyZXF1ZXN0OiBXb3JkRGF0YVJlcXVlc3QpOiBQcm9taXNlPFdvcmREYXRhUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkSW5mbyA9IGF3YWl0IHRoaXMubGxtU2VydmljZS5nZXRXb3JkSW5mbyhyZXF1ZXN0LndvcmQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZDogd29yZEluZm8ud29yZCxcclxuICAgICAgICAgICAgICAgICAgICBtZWFuaW5nOiB3b3JkSW5mby5tZWFuaW5ncyxcclxuICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkSW5mby5wcm9udW5jaWF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkSW5mby5leGFtcGxlcyxcclxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmRJbmZvLnNpbWlsYXJXb3Jkc1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmxsbVNlcnZpY2UudGVzdENvbm5lY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5sbG1TZXJ2aWNlID0gbmV3IExMTVNlcnZpY2Uoc2V0dGluZ3MpO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IElXb3JkU2VydmljZSwgV29yZERhdGFSZXF1ZXN0LCBXb3JkRGF0YVJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vY29yZS9wb3J0cy9zZXJ2aWNlcy9JV29yZFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBXb3JkU2VydmljZSB9IGZyb20gJy4vV29yZFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XHJcblxyXG5leHBvcnQgY2xhc3MgV29yZFNlcnZpY2VBZGFwdGVyIGltcGxlbWVudHMgSVdvcmRTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgd29yZFNlcnZpY2U6IFdvcmRTZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLndvcmRTZXJ2aWNlID0gbmV3IFdvcmRTZXJ2aWNlKHNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRXb3JkRGF0YShyZXF1ZXN0OiBXb3JkRGF0YVJlcXVlc3QpOiBQcm9taXNlPFdvcmREYXRhUmVzcG9uc2U+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkRGF0YSA9IGF3YWl0IHRoaXMud29yZFNlcnZpY2UuZ2V0V29yZERhdGEocmVxdWVzdC53b3JkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmREYXRhLndvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVhbmluZzogd29yZERhdGEubWVhbmluZyxcclxuICAgICAgICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uOiB3b3JkRGF0YS5wcm9udW5jaWF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzOiB3b3JkRGF0YS5leGFtcGxlcyB8fCBbXSxcclxuICAgICAgICAgICAgICAgICAgICBzaW1pbGFyV29yZHM6IHdvcmREYXRhLnNpbWlsYXJXb3JkcyB8fCBbXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogVm9jYWJ1bGFyeVNldHRpbmdzKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy53b3JkU2VydmljZSA9IG5ldyBXb3JkU2VydmljZShzZXR0aW5ncyk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgSVRUU1NlcnZpY2UgfSBmcm9tICcuL0lUVFNTZXJ2aWNlJztcclxuaW1wb3J0IHsgVFRTU2VydmljZSwgVFRTU2VydmljZUZhY3RvcnkgfSBmcm9tICcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS90dHMvVFRTU2VydmljZSc7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlTZXR0aW5ncyB9IGZyb20gJy4uLy4uLy4uL2ZlYXR1cmVzL3NldHRpbmdzL3VpL3NldHRpbmdzJztcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRUU1NlcnZpY2VBZGFwdGVyIGltcGxlbWVudHMgSVRUU1NlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSB0dHNTZXJ2aWNlOiBUVFNTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2V0dGluZ3M/OiBWb2NhYnVsYXJ5U2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLnR0c1NlcnZpY2UgPSBUVFNTZXJ2aWNlRmFjdG9yeS5jcmVhdGVUVFNTZXJ2aWNlKGFwcCwgc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtUZXh0KHRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrV29yZCh3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtXb3JkKHdvcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrRXhhbXBsZShleGFtcGxlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnR0c1NlcnZpY2Uuc3BlYWtFeGFtcGxlKGV4YW1wbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0b3BTcGVha2luZygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnR0c1NlcnZpY2Uuc3RvcFNwZWFraW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1QUUzMFx1Qzg3NCBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0IFx1QzgxNVx1QjlBQ1xyXG4gICAgICAgIHRoaXMudHRzU2VydmljZS5kZXN0cm95KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDMEM4IFx1QzEyNFx1QzgxNVx1QzczQ1x1Qjg1QyBUVFMgXHVDMTFDXHVCRTQ0XHVDMkE0IFx1QzdBQ1x1QzBERFx1QzEzMVxyXG4gICAgICAgIHRoaXMudHRzU2VydmljZSA9IFRUU1NlcnZpY2VGYWN0b3J5LmNyZWF0ZVRUU1NlcnZpY2UodGhpcy5hcHAsIHNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0VuYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIFx1RDMyOVx1RDFBMFx1QjlBQ1x1QzVEMFx1QzExQyBcdUM3NzRcdUJCRjggZW5hYmxlZCBcdUNDQjRcdUQwNkNcdUI5N0MgXHVENTY4XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXZhaWxhYmxlVm9pY2VzKCk6IFNwZWVjaFN5bnRoZXNpc1ZvaWNlW10ge1xyXG4gICAgICAgIGNvbnN0IHZvaWNlcyA9IHRoaXMudHRzU2VydmljZS5nZXRBdmFpbGFibGVWb2ljZXMoKTtcclxuICAgICAgICAvLyBcdUFFMzBcdUM4NzQgXHVDNzc4XHVEMTMwXHVEMzk4XHVDNzc0XHVDMkE0IFx1RDYzOFx1RDY1OFx1Qzc0NCBcdUM3MDRcdUQ1NzQgXHVCRTQ4IFx1QkMzMFx1QzVGNCBcdUJDMThcdUQ2NTggKFx1QzJFNFx1QzgxQyBcdUM3NENcdUMxMzFcdUM3NDAgXHVBQzAxIFx1QzExQ1x1QkU0NFx1QzJBNFx1QUMwMCBcdUNDOThcdUI5QUMpXHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnR0c1NlcnZpY2UudGVzdENvbm5lY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1BhdXNlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50dHNTZXJ2aWNlLmlzUGF1c2VkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdW1lKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudHRzU2VydmljZS5yZXN1bWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXVzZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnR0c1NlcnZpY2UucGF1c2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudHRzU2VydmljZS5kZXN0cm95KCk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBESUNvbnRhaW5lciB9IGZyb20gJy4vRElDb250YWluZXInO1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9mZWF0dXJlcy9zZXR0aW5ncy91aS9zZXR0aW5ncyc7XHJcblxyXG4vLyBDb3JlIFNlcnZpY2VzXHJcbmltcG9ydCB7IEFkZFdvcmRVc2VDYXNlIH0gZnJvbSAnLi4vLi4vY29yZS91c2UtY2FzZXMvQWRkV29yZFVzZUNhc2UnO1xyXG5pbXBvcnQgeyBDcmVhdGVCb29rVXNlQ2FzZSB9IGZyb20gJy4uLy4uL2NvcmUvdXNlLWNhc2VzL0NyZWF0ZUJvb2tVc2VDYXNlJztcclxuaW1wb3J0IHsgR2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlIH0gZnJvbSAnLi4vLi4vY29yZS91c2UtY2FzZXMvR2V0V29yZHNGb3JSZXZpZXdVc2VDYXNlJztcclxuaW1wb3J0IHsgUmV2aWV3V29yZFVzZUNhc2UgfSBmcm9tICcuLi8uLi9jb3JlL3VzZS1jYXNlcy9SZXZpZXdXb3JkVXNlQ2FzZSc7XHJcblxyXG4vLyBJbmZyYXN0cnVjdHVyZSBTZXJ2aWNlc1xyXG5pbXBvcnQgeyBWb2NhYnVsYXJ5UmVwb3NpdG9yeUFkYXB0ZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9vYnNpZGlhbi9yZXBvc2l0b3JpZXMvVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyJztcclxuaW1wb3J0IHsgQm9va1JlcG9zaXRvcnlBZGFwdGVyIH0gZnJvbSAnLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvb2JzaWRpYW4vcmVwb3NpdG9yaWVzL0Jvb2tSZXBvc2l0b3J5QWRhcHRlcic7XHJcbmltcG9ydCB7IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9zdG9yYWdlL1ZvY2FidWxhcnlEYXRhYmFzZSc7XHJcbmltcG9ydCB7IExMTVNlcnZpY2VBZGFwdGVyIH0gZnJvbSAnLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvbGxtL0xMTVNlcnZpY2VBZGFwdGVyJztcclxuXHJcbi8vIEV4dGVybmFsIFNlcnZpY2VzXHJcbmltcG9ydCB7IFdvcmRTZXJ2aWNlQWRhcHRlciB9IGZyb20gJy4uLy4uL2luZnJhc3RydWN0dXJlL2V4dGVybmFsL1dvcmRTZXJ2aWNlQWRhcHRlcic7XHJcbmltcG9ydCB7IFRUU1NlcnZpY2VBZGFwdGVyIH0gZnJvbSAnLi4vLi4vY29yZS9wb3J0cy9zZXJ2aWNlcy9JVFRTU2VydmljZUFkYXB0ZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlcnZpY2VSZWdpc3RyeSB7XHJcbiAgICBzdGF0aWMgcmVnaXN0ZXJTZXJ2aWNlcyhjb250YWluZXI6IERJQ29udGFpbmVyLCBhcHA6IEFwcCwgc2V0dGluZ3M6IFZvY2FidWxhcnlTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgICAgIC8vIEV4dGVybmFsIGRlcGVuZGVuY2llc1xyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlckluc3RhbmNlKCdhcHAnLCBhcHApO1xyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlckluc3RhbmNlKCdzZXR0aW5ncycsIHNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgLy8gSW5mcmFzdHJ1Y3R1cmUgTGF5ZXJcclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2RhdGFiYXNlTWFuYWdlcicsIChhcHA6IEFwcCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZvY2FidWxhcnlEYXRhYmFzZU1hbmFnZXIoXHJcbiAgICAgICAgICAgICAgICBhcHAsXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB7fSwgLy8gc2F2ZUNhbGxiYWNrIC0gRElcdUM1RDBcdUMxMUNcdUIyOTQgXHVCRTQ4IFx1RDU2OFx1QzIxOFx1Qjg1QyBcdUNDOThcdUI5QUNcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLnZvY2FidWxhcnlGb2xkZXJQYXRoXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnYXBwJ10sXHJcbiAgICAgICAgICAgIHNpbmdsZXRvbjogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3ZvY2FidWxhcnlSZXBvc2l0b3J5JywgVm9jYWJ1bGFyeVJlcG9zaXRvcnlBZGFwdGVyLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydkYXRhYmFzZU1hbmFnZXInXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2Jvb2tSZXBvc2l0b3J5JywgQm9va1JlcG9zaXRvcnlBZGFwdGVyLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydkYXRhYmFzZU1hbmFnZXInXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3dvcmRTZXJ2aWNlJywgV29yZFNlcnZpY2VBZGFwdGVyLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydzZXR0aW5ncyddXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignbGxtU2VydmljZScsIExMTVNlcnZpY2VBZGFwdGVyLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydzZXR0aW5ncyddXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcigndHRzU2VydmljZScsIFRUU1NlcnZpY2VBZGFwdGVyLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWydhcHAnLCAnc2V0dGluZ3MnXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBDb3JlIFVzZSBDYXNlc1xyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignYWRkV29yZFVzZUNhc2UnLCBBZGRXb3JkVXNlQ2FzZSwge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsndm9jYWJ1bGFyeVJlcG9zaXRvcnknLCAnYm9va1JlcG9zaXRvcnknLCAnd29yZFNlcnZpY2UnXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2NyZWF0ZUJvb2tVc2VDYXNlJywgQ3JlYXRlQm9va1VzZUNhc2UsIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ2Jvb2tSZXBvc2l0b3J5J11cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdnZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UnLCBHZXRXb3Jkc0ZvclJldmlld1VzZUNhc2UsIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3ZvY2FidWxhcnlSZXBvc2l0b3J5JywgJ2Jvb2tSZXBvc2l0b3J5J11cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdyZXZpZXdXb3JkVXNlQ2FzZScsIFJldmlld1dvcmRVc2VDYXNlLCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWyd2b2NhYnVsYXJ5UmVwb3NpdG9yeSddXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHVwZGF0ZVNldHRpbmdzKGNvbnRhaW5lcjogRElDb250YWluZXIsIHNldHRpbmdzOiBWb2NhYnVsYXJ5U2V0dGluZ3MpOiB2b2lkIHtcclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJJbnN0YW5jZSgnc2V0dGluZ3MnLCBzZXR0aW5ncyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHVDNUI0XHVCMzExXHVEMTMwIFx1QzExQ1x1QkU0NFx1QzJBNFx1QjRFNCBcdUMxMjRcdUM4MTUgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XHJcbiAgICAgICAgaWYgKGNvbnRhaW5lci5oYXMoJ3R0c1NlcnZpY2UnKSkge1xyXG4gICAgICAgICAgICBjb25zdCB0dHNTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmU8VFRTU2VydmljZUFkYXB0ZXI+KCd0dHNTZXJ2aWNlJyk7XHJcbiAgICAgICAgICAgIHR0c1NlcnZpY2UudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoY29udGFpbmVyLmhhcygnbGxtU2VydmljZScpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxsbVNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZTxMTE1TZXJ2aWNlQWRhcHRlcj4oJ2xsbVNlcnZpY2UnKTtcclxuICAgICAgICAgICAgbGxtU2VydmljZS51cGRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjb250YWluZXIuaGFzKCd3b3JkU2VydmljZScpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmRTZXJ2aWNlID0gY29udGFpbmVyLnJlc29sdmU8V29yZFNlcnZpY2VBZGFwdGVyPignd29yZFNlcnZpY2UnKTtcclxuICAgICAgICAgICAgd29yZFNlcnZpY2UudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsICIvLyBcdUM4MDRcdUM1RUQgXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQyBcdUJDMEYgXHVBQ0JEXHVBQ0M0IFx1QUQwMFx1QjlBQ1xyXG5cclxuaW1wb3J0IHsgTm90aWNlLCByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFcnJvckluZm8ge1xyXG4gICAgZXJyb3I6IEVycm9yO1xyXG4gICAgY29udGV4dD86IHN0cmluZztcclxuICAgIHVzZXJJZD86IHN0cmluZztcclxuICAgIHRpbWVzdGFtcDogbnVtYmVyO1xyXG4gICAgc3RhY2tUcmFjZT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVycm9yQm91bmRhcnkge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEVycm9yQm91bmRhcnk7XHJcbiAgICBwcml2YXRlIGVycm9ySGFuZGxlcnM6IE1hcDxzdHJpbmcsIChlcnJvcjogRXJyb3JJbmZvKSA9PiB2b2lkPiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBFcnJvckJvdW5kYXJ5IHtcclxuICAgICAgICBpZiAoIUVycm9yQm91bmRhcnkuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgRXJyb3JCb3VuZGFyeS5pbnN0YW5jZSA9IG5ldyBFcnJvckJvdW5kYXJ5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBFcnJvckJvdW5kYXJ5Lmluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzgwNFx1QzVFRCBcdUM1RDBcdUI3RUMgXHVENTc4XHVCNEU0XHVCN0VDIFx1Q0QwOFx1QUUzMFx1RDY1NFxyXG4gICAgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIFx1QzgwNFx1QzVFRCBcdUM1RDBcdUI3RUMgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOFxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBldmVudC5lcnJvciB8fCBuZXcgRXJyb3IoZXZlbnQubWVzc2FnZSksXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnR2xvYmFsIEVycm9yJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgIHN0YWNrVHJhY2U6IGV2ZW50LmVycm9yPy5zdGFja1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUHJvbWlzZSByZWplY3Rpb24gXHVENTc4XHVCNEU0XHVCN0VDXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VuaGFuZGxlZHJlamVjdGlvbicsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBldmVudC5yZWFzb24gaW5zdGFuY2VvZiBFcnJvciA/IGV2ZW50LnJlYXNvbiA6IG5ldyBFcnJvcihTdHJpbmcoZXZlbnQucmVhc29uKSksXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnVW5oYW5kbGVkIFByb21pc2UgUmVqZWN0aW9uJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgIHN0YWNrVHJhY2U6IGV2ZW50LnJlYXNvbj8uc3RhY2tcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNUQwXHVCN0VDIFx1RDU3OFx1QjRFNFx1QjdFQyBcdUI0RjFcdUI4NURcclxuICAgIHJlZ2lzdGVySGFuZGxlcihjb250ZXh0OiBzdHJpbmcsIGhhbmRsZXI6IChlcnJvcjogRXJyb3JJbmZvKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLnNldChjb250ZXh0LCBoYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM1RDBcdUI3RUMgXHVENTc4XHVCNEU0XHVCN0VDIFx1QzgxQ1x1QUM3MFxyXG4gICAgdW5yZWdpc3RlckhhbmRsZXIoY29udGV4dDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLmRlbGV0ZShjb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM1RDBcdUI3RUMgXHVDQzk4XHVCOUFDXHJcbiAgICBoYW5kbGVFcnJvcihlcnJvckluZm86IEVycm9ySW5mbyk6IHZvaWQge1xyXG4gICAgICAgIC8vIFx1Q0Y1OFx1QzE5NFx1QzVEMCBcdUM1RDBcdUI3RUMgXHVCODVDXHVBREY4XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2F1Z2h0IGJ5IEVycm9yQm91bmRhcnk6JywgZXJyb3JJbmZvKTtcclxuXHJcbiAgICAgICAgLy8gXHVDMEFDXHVDNkE5XHVDNzkwXHVDNUQwXHVBQzhDIFx1Q0U1Q1x1RDY1NFx1QzgwMVx1Qzc3OCBcdUM1RDBcdUI3RUMgXHVCQTU0XHVDMkRDXHVDOUMwIFx1RDQ1Q1x1QzJEQ1xyXG4gICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gdGhpcy5nZXRVc2VyRnJpZW5kbHlNZXNzYWdlKGVycm9ySW5mby5lcnJvcik7XHJcbiAgICAgICAgbmV3IE5vdGljZSh1c2VyTWVzc2FnZSwgMCk7XHJcblxyXG4gICAgICAgIC8vIFx1QjRGMVx1Qjg1RFx1QjQxQyBcdUQ1NzhcdUI0RTRcdUI3RUNcdUI0RTQgXHVDMkU0XHVENTg5XHJcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLmZvckVhY2goKGhhbmRsZXIsIGNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXIoZXJyb3JJbmZvKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoaGFuZGxlckVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyIGZvciBjb250ZXh0ICR7Y29udGV4dH06YCwgaGFuZGxlckVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1QzU0OFx1QzgwNFx1RDU1QyBcdUQ1NjhcdUMyMTggXHVDMkU0XHVENTg5IFx1Qjc5OFx1RDM3Q1xyXG4gICAgYXN5bmMgc2FmZUV4ZWN1dGU8VD4oXHJcbiAgICAgICAgZm46ICgpID0+IFByb21pc2U8VD4gfCBULFxyXG4gICAgICAgIGNvbnRleHQ6IHN0cmluZyxcclxuICAgICAgICBmYWxsYmFjaz86IFRcclxuICAgICk6IFByb21pc2U8VCB8IHVuZGVmaW5lZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKSxcclxuICAgICAgICAgICAgICAgIGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICBzdGFja1RyYWNlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVCM0Q5XHVBRTMwIFx1RDU2OFx1QzIxOFx1QzZBOSBcdUM1NDhcdUM4MDRcdUQ1NUMgXHVDMkU0XHVENTg5XHJcbiAgICBzYWZlRXhlY3V0ZVN5bmM8VD4oXHJcbiAgICAgICAgZm46ICgpID0+IFQsXHJcbiAgICAgICAgY29udGV4dDogc3RyaW5nLFxyXG4gICAgICAgIGZhbGxiYWNrPzogVFxyXG4gICAgKTogVCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIGZuKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKFN0cmluZyhlcnJvcikpLFxyXG4gICAgICAgICAgICAgICAgY29udGV4dCxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgIHN0YWNrVHJhY2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUMwQUNcdUM2QTlcdUM3OTAgXHVDRTVDXHVENjU0XHVDODAxXHVDNzc4IFx1QzVEMFx1QjdFQyBcdUJBNTRcdUMyRENcdUM5QzAgXHVDMEREXHVDMTMxXHJcbiAgICBwcml2YXRlIGdldFVzZXJGcmllbmRseU1lc3NhZ2UoZXJyb3I6IEVycm9yKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBlcnJvclR5cGUgPSBlcnJvci5uYW1lO1xyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcblxyXG4gICAgICAgIC8vIFx1QzVEMFx1QjdFQyBcdUQwQzBcdUM3ODVcdUJDQzQgXHVDMEFDXHVDNkE5XHVDNzkwIFx1Q0U1Q1x1RDY1NFx1QzgwMSBcdUJBNTRcdUMyRENcdUM5QzBcclxuICAgICAgICBjb25zdCBmcmllbmRseU1lc3NhZ2VzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gICAgICAgICAgICAnTmV0d29ya0Vycm9yJzogJ1x1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QyBcdUM1RjBcdUFDQjBcdUM1RDAgXHVCQjM4XHVDODFDXHVBQzAwIFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDNzc4XHVEMTMwXHVCMTM3IFx1QzVGMFx1QUNCMFx1Qzc0NCBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJyxcclxuICAgICAgICAgICAgJ1R5cGVFcnJvcic6ICdcdUIzNzBcdUM3NzRcdUQxMzAgXHVDQzk4XHVCOUFDIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgICdSZWZlcmVuY2VFcnJvcic6ICdcdUQ1NDRcdUM2OTRcdUQ1NUMgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LicsXHJcbiAgICAgICAgICAgICdTeW50YXhFcnJvcic6ICdcdUIzNzBcdUM3NzRcdUQxMzAgXHVENjE1XHVDMkREXHVDNUQwIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICAgICAgJ1F1b3RhRXhjZWVkZWRFcnJvcic6ICdcdUM4MDBcdUM3QTUgXHVBQ0Y1XHVBQzA0XHVDNzc0IFx1QkQ4MFx1Qzg3MVx1RDU2OVx1QjJDOFx1QjJFNC4nLFxyXG4gICAgICAgICAgICAnU2VjdXJpdHlFcnJvcic6ICdcdUJDRjRcdUM1NDggXHVDODE1XHVDQzQ1XHVDNzNDXHVCODVDIFx1Qzc3OFx1RDU3NCBcdUM3OTFcdUM1QzVcdUM3NDQgXHVDMjE4XHVENTg5XHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuJyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBBUEkgXHVBRDAwXHVCODI4IFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUNcclxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdBUEknKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdBUEkgXHVDMTFDXHVCRTQ0XHVDMkE0XHVDNUQwIFx1Qzc3Q1x1QzJEQ1x1QzgwMVx1Qzc3OCBcdUJCMzhcdUM4MUNcdUFDMDAgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUM3QTBcdUMyREMgXHVENkM0IFx1QjJFNFx1QzJEQyBcdUMyRENcdUIzQzRcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1RDMwQ1x1Qzc3QyBcdUFEMDBcdUI4MjggXHVDNUQwXHVCN0VDIFx1Q0M5OFx1QjlBQ1xyXG4gICAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZpbGUnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0ZpbGUnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1RDMwQ1x1Qzc3QyBcdUNDOThcdUI5QUMgXHVDOTExIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1RDMwQ1x1Qzc3Q1x1Qzc3NCBcdUM4NzRcdUM3QUNcdUQ1NThcdUIyOTRcdUM5QzAgXHVENjU1XHVDNzc4XHVENTc0XHVDOEZDXHVDMTM4XHVDNjk0Lic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdUM1NTRcdUQ2MzhcdUQ2NTQgXHVBRDAwXHVCODI4IFx1QzVEMFx1QjdFQyBcdUNDOThcdUI5QUNcclxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdlbmNyeXB0JykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdkZWNyeXB0JykpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdBUEkgXHVEMEE0IFx1Q0M5OFx1QjlBQyBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC4gXHVDMTI0XHVDODE1XHVDNzQ0IFx1QjJFNFx1QzJEQyBcdUQ2NTVcdUM3NzhcdUQ1NzRcdUM4RkNcdUMxMzhcdUM2OTQuJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmcmllbmRseU1lc3NhZ2VzW2Vycm9yVHlwZV0gfHwgXHJcbiAgICAgICAgICAgICAgIGBcdUM2MDhcdUMwQzFcdUNFNTggXHVCQUJCXHVENTVDIFx1QzYyNFx1Qjk1OFx1QUMwMCBcdUJDMUNcdUMwRERcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQ6ICR7ZXJyb3JNZXNzYWdlfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHVDNUQwXHVCN0VDIFx1QkNGNVx1QUQ2QyBcdUMyRENcdUIzQzRcclxuICAgIGFzeW5jIGF0dGVtcHRSZWNvdmVyeShlcnJvcjogRXJyb3IsIGNvbnRleHQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIC8vIFx1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QyBcdUM1RDBcdUI3RUNcdUM3NTggXHVBQ0JEXHVDNkIwIFx1QzdBQ1x1QzJEQ1x1QjNDNFxyXG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdmZXRjaCcpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25ldHdvcmsnKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHVBQzA0XHVCMkU4XHVENTVDIFx1QjEyNFx1RDJCOFx1QzZDQ1x1RDA2QyBcdUQxNENcdUMyQTRcdUQyQjhcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJlcXVlc3RVcmwoeyBcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL3d3dy5nb29nbGUuY29tL2Zhdmljb24uaWNvJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdIRUFEJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1QzgwMFx1QzdBNVx1QzE4QyBcdUM1RDBcdUI3RUNcdUM3NTggXHVBQ0JEXHVDNkIwIFx1RDA3NFx1QjlBQ1x1QzVCNCBcdUMyRENcdUIzQzRcclxuICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1F1b3RhRXhjZWVkZWRFcnJvcicpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIFx1Qzc4NFx1QzJEQyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVEMDc0XHVCOUFDXHVDNUI0IChcdUMyRTRcdUM4MUMgXHVBRDZDXHVENjA0XHVDNUQwXHVDMTFDXHVCMjk0IFx1QjM1NCBcdUMyRTBcdUM5MTFcdUQ1NThcdUFDOEMpXHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndGVtcC1kYXRhJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdUM4MTVcdUI5QUNcclxuICAgIGNsZWFudXAoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1RDNCOFx1Qzc1OCBcdUQ1NjhcdUMyMThcdUI0RTRcclxuZXhwb3J0IGNvbnN0IHNhZmVBc3luYyA9IGFzeW5jIDxUPihcclxuICAgIGZuOiAoKSA9PiBQcm9taXNlPFQ+LFxyXG4gICAgY29udGV4dDogc3RyaW5nLFxyXG4gICAgZmFsbGJhY2s/OiBUXHJcbik6IFByb21pc2U8VCB8IHVuZGVmaW5lZD4gPT4ge1xyXG4gICAgcmV0dXJuIEVycm9yQm91bmRhcnkuZ2V0SW5zdGFuY2UoKS5zYWZlRXhlY3V0ZShmbiwgY29udGV4dCwgZmFsbGJhY2spO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNhZmVTeW5jID0gPFQ+KFxyXG4gICAgZm46ICgpID0+IFQsXHJcbiAgICBjb250ZXh0OiBzdHJpbmcsXHJcbiAgICBmYWxsYmFjaz86IFRcclxuKTogVCB8IHVuZGVmaW5lZCA9PiB7XHJcbiAgICByZXR1cm4gRXJyb3JCb3VuZGFyeS5nZXRJbnN0YW5jZSgpLnNhZmVFeGVjdXRlU3luYyhmbiwgY29udGV4dCwgZmFsbGJhY2spO1xyXG59O1xyXG5cclxuLy8gXHVCMzcwXHVDRjU0XHVCODA4XHVDNzc0XHVEMTMwIFx1RDU2OFx1QzIxOCAoVHlwZVNjcmlwdCBcdUIzNzBcdUNGNTRcdUI4MDhcdUM3NzRcdUQxMzAgXHVCMzAwXHVDMkUwIFx1QzBBQ1x1QzZBOSlcclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhFcnJvckJvdW5kYXJ5PFQgZXh0ZW5kcyBhbnlbXSwgUj4oXHJcbiAgICBmbjogKC4uLmFyZ3M6IFQpID0+IFIgfCBQcm9taXNlPFI+LFxyXG4gICAgY29udGV4dDogc3RyaW5nXHJcbikge1xyXG4gICAgcmV0dXJuIGFzeW5jICguLi5hcmdzOiBUKTogUHJvbWlzZTxSIHwgdW5kZWZpbmVkPiA9PiB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JCb3VuZGFyeSA9IEVycm9yQm91bmRhcnkuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICBpZiAoZm4uY29uc3RydWN0b3IubmFtZSA9PT0gJ0FzeW5jRnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlcnJvckJvdW5kYXJ5LnNhZmVFeGVjdXRlKCgpID0+IGZuKC4uLmFyZ3MpLCBjb250ZXh0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZXJyb3JCb3VuZGFyeS5zYWZlRXhlY3V0ZVN5bmMoKCkgPT4gZm4oLi4uYXJncyksIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG9CQUF1Qjs7O0FDQXZCLElBQUFDLG1CQUE0RTs7O0FDRzVFLFNBQVMsa0JBQWtCLFFBQXlCO0FBQ2hELE1BQUksQ0FBQztBQUFRLFdBQU87QUFHcEIsUUFBTSxpQkFBaUI7QUFBQSxJQUNuQjtBQUFBO0FBQUEsSUFDQTtBQUFBO0FBQUEsSUFDQTtBQUFB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d0JBQXdCO0FBQ2xDLFFBQUk7QUFDQSxZQUFNLFlBQVksTUFBTSxLQUFLLFNBQVM7QUFDdEMsVUFBSSxhQUFhLFVBQVUsWUFBWSxNQUFNLFFBQVEsVUFBVSxTQUFTLEtBQUssR0FBRztBQUM1RSxjQUFNLGFBQWEsVUFBVTtBQUc3QixZQUFJLFdBQVcsU0FBUyxXQUFXLE1BQU0sU0FBUyxHQUFHO0FBQ2pELHFCQUFXLFFBQVEsV0FBVyxPQUFPO0FBQ2pDLGdCQUFJO0FBQ0Esb0JBQU0sS0FBSyxnQkFBZ0IsUUFBUTtBQUFBLGdCQUMvQixHQUFHO0FBQUEsZ0JBQ0gsUUFBUTtBQUFBLGdCQUNSLGVBQWUsS0FBSyxpQkFBaUI7QUFBQSxjQUN6QyxDQUFDO0FBQUEsWUFDTCxTQUFTLE9BQU87QUFDWixzQkFBUSxLQUFLLG1FQUFpQixLQUFLLElBQUksSUFBSSxLQUFLO0FBQUEsWUFDcEQ7QUFBQSxVQUNKO0FBQUEsUUFDSjtBQUdBLFlBQUksV0FBVyxVQUFVO0FBQ3JCLGdCQUFNLEtBQUssZ0JBQWdCLGVBQWUsV0FBVyxRQUFRO0FBQUEsUUFDakU7QUFBQSxNQUNKO0FBQUEsSUFDSixTQUFTLE9BQU87QUFDWixjQUFRLE1BQU0sc0RBQWMsS0FBSztBQUFBLElBQ3JDO0FBQUEsRUFDSjtBQUFBO0FBQUEsRUFHQSxNQUFNLGNBQWM7QUFDaEIsVUFBTSxPQUFPO0FBQUEsTUFDVCxVQUFVLEtBQUs7QUFBQSxJQUNuQjtBQUNBLFVBQU0sS0FBSyxTQUFTLElBQUk7QUFBQSxFQUM1QjtBQUNKOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImRlbGF5IiwgImpzb25EYXRhIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJjb250YWluZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiQ29uZmlybU1vZGFsIiwgImNvbnRhaW5lciIsICJib29rIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250YWluZXIiLCAiYXBwIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
